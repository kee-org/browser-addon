(function(){"use strict";var zo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Te={},Jo={get exports(){return Te},set exports(t){Te=t}};(function(t,e){(function(n,s){s(t)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:zo,function(n){var s,i;if(!((i=(s=globalThis.chrome)==null?void 0:s.runtime)!=null&&i.id))throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const r="The message port closed before a response was received.",o=a=>{const l={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(l).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class c extends WeakMap{constructor(m,y=void 0){super(y),this.createItem=m}get(m){return this.has(m)||this.set(m,this.createItem(m)),super.get(m)}}const d=L=>L&&typeof L=="object"&&typeof L.then=="function",f=(L,m)=>(...y)=>{a.runtime.lastError?L.reject(new Error(a.runtime.lastError.message)):m.singleCallbackArg||y.length<=1&&m.singleCallbackArg!==!1?L.resolve(y[0]):L.resolve(y)},g=L=>L==1?"argument":"arguments",w=(L,m)=>function(p,...E){if(E.length<m.minArgs)throw new Error(`Expected at least ${m.minArgs} ${g(m.minArgs)} for ${L}(), got ${E.length}`);if(E.length>m.maxArgs)throw new Error(`Expected at most ${m.maxArgs} ${g(m.maxArgs)} for ${L}(), got ${E.length}`);return new Promise((H,le)=>{if(m.fallbackToNoCallback)try{p[L](...E,f({resolve:H,reject:le},m))}catch(j){console.warn(`${L} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,j),p[L](...E),m.fallbackToNoCallback=!1,m.noCallback=!0,H()}else m.noCallback?(p[L](...E),H()):p[L](...E,f({resolve:H,reject:le},m))})},I=(L,m,y)=>new Proxy(m,{apply(p,E,H){return y.call(E,L,...H)}});let v=Function.call.bind(Object.prototype.hasOwnProperty);const T=(L,m={},y={})=>{let p=Object.create(null),E={has(le,j){return j in L||j in p},get(le,j,Z){if(j in p)return p[j];if(!(j in L))return;let O=L[j];if(typeof O=="function")if(typeof m[j]=="function")O=I(L,L[j],m[j]);else if(v(y,j)){let X=w(j,y[j]);O=I(L,L[j],X)}else O=O.bind(L);else if(typeof O=="object"&&O!==null&&(v(m,j)||v(y,j)))O=T(O,m[j],y[j]);else if(v(y,"*"))O=T(O,m[j],y["*"]);else return Object.defineProperty(p,j,{configurable:!0,enumerable:!0,get(){return L[j]},set(X){L[j]=X}}),O;return p[j]=O,O},set(le,j,Z,O){return j in p?p[j]=Z:L[j]=Z,!0},defineProperty(le,j,Z){return Reflect.defineProperty(p,j,Z)},deleteProperty(le,j){return Reflect.deleteProperty(p,j)}},H=Object.create(L);return new Proxy(H,E)},$=L=>({addListener(m,y,...p){m.addListener(L.get(y),...p)},hasListener(m,y){return m.hasListener(L.get(y))},removeListener(m,y){m.removeListener(L.get(y))}}),K=new c(L=>typeof L!="function"?L:function(y){const p=T(y,{},{getContent:{minArgs:0,maxArgs:0}});L(p)}),W=new c(L=>typeof L!="function"?L:function(y,p,E){let H=!1,le,j=new Promise(V=>{le=function(te){H=!0,V(te)}}),Z;try{Z=L(y,p,le)}catch(V){Z=Promise.reject(V)}const O=Z!==!0&&d(Z);if(Z!==!0&&!O&&!H)return!1;const X=V=>{V.then(te=>{E(te)},te=>{let Ae;te&&(te instanceof Error||typeof te.message=="string")?Ae=te.message:Ae="An unexpected error occurred",E({__mozWebExtensionPolyfillReject__:!0,message:Ae})}).catch(te=>{console.error("Failed to send onMessage rejected reply",te)})};return X(O?Z:j),!0}),k=({reject:L,resolve:m},y)=>{a.runtime.lastError?a.runtime.lastError.message===r?m():L(new Error(a.runtime.lastError.message)):y&&y.__mozWebExtensionPolyfillReject__?L(new Error(y.message)):m(y)},Y=(L,m,y,...p)=>{if(p.length<m.minArgs)throw new Error(`Expected at least ${m.minArgs} ${g(m.minArgs)} for ${L}(), got ${p.length}`);if(p.length>m.maxArgs)throw new Error(`Expected at most ${m.maxArgs} ${g(m.maxArgs)} for ${L}(), got ${p.length}`);return new Promise((E,H)=>{const le=k.bind(null,{resolve:E,reject:H});p.push(le),y.sendMessage(...p)})},re={devtools:{network:{onRequestFinished:$(K)}},runtime:{onMessage:$(W),onMessageExternal:$(W),sendMessage:Y.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:Y.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},N={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return l.privacy={network:{"*":N},services:{"*":N},websites:{"*":N}},T(a,re,l)};n.exports=o(chrome)}else n.exports=globalThis.browser})})(Jo);class Ti{}class Ce{}class Oi{}class Xo{}const yn=new Oi;yn.pageRegex=new Ce,yn.pageRegex["^.*$"]={config:{preventSaveNotification:!1,listMatchingCaseSensitive:!1,blackList:{form:{names:["search"],ids:["search"]},fields:{names:["search","q","query"],ids:["search","q"]}},whiteList:{form:{names:["login"],ids:["login"]},fields:{names:["username","j_username","user_name","user","user-name","login","vb_login_username","name","user name","user id","user-id","userid","email","e-mail","id","form_loginname","wpname","mail","loginid","login id","login_name","openid_identifier","authentication_email","openid","auth_email","auth_id","authentication_identifier","authentication_id","customer_number","customernumber","onlineid"],ids:["username","j_username","user_name","user","user-name","login","vb_login_username","name","user-id","userid","email","e-mail","id","form_loginname","wpname","mail","loginid","login_name","openid_identifier","authentication_email","openid","auth_email","auth_id","authentication_identifier","authentication_id","customer_number","customernumber","onlineid"]}},preferredEntryUuid:null},matchWeight:0,source:"Default"};class Mi{migrateToVersion8(e){Object.assign(e,{overWriteFieldsAutomatically:!1,version:8})}migrateToVersion7(e){e.notificationCountSavePassword>6?Object.assign(e,{notificationCountSavePassword:6,version:7}):Object.assign(e,{version:7})}migrateToVersion6(e){Object.assign(e,{animateWhenOfferingSave:!0,version:6})}migrateToVersion5(e){Object.assign(e,{notifyPasswordAvailableForPaste:!0,version:5})}migrateToVersion4(e){let n=2;e.logLevel===1&&(n=1),Object.assign(e,{logLevel:n,version:4})}migrateToVersion3(e){e.notificationCountGeneric==null&&(e.notificationCountGeneric=0),e.notificationCountSavePassword==null&&(e.notificationCountSavePassword=0),Object.assign(e,{currentSearchTermTimeout:30,version:3})}migrateToVersion2(e){let n=new Oi;if(!e.config||e.config.length==0){n=yn;return}n.pageRegex=new Ce,n.hostExact=new Ce,n.pagePrefix=new Ce,n.pageRegex["^.*$"]={matchWeight:0,config:this.migrateIndividualSiteConfigSettingsToV2(e.config[0].config),source:"Migration"};for(let s=1;s<e.config.length;s++){const i=e.config[s].url;if(i.indexOf("://")==-1)continue;const r=i.substr(i.indexOf("://")+3);if(r.length<=1)continue;const o=this.migrateIndividualSiteConfigSettingsToV2(e.config[s].config),a=r.indexOf("/");if(a>-1||a==r.lastIndexOf("/")){const l=a>-1?r.substr(0,a):r;n.hostExact[l]={config:o,matchWeight:100,source:"Migration"}}else{let l=200;for(const c in n.pagePrefix)r.startsWith(c)&&l++;n.pagePrefix[r]={config:o,matchWeight:l,source:"Migration"}}}Object.assign(e,{siteConfig:n,config:null,version:2})}migrateIndividualSiteConfigSettingsToV2(e){const n=new Ti;return e.preventSaveNotification==null&&(n.preventSaveNotification=e.preventSaveNotification),e.interestingForms&&(e.interestingForms.name_w&&(n.whiteList?n.whiteList.form?n.whiteList.form.names||(n.whiteList.form.names=[]):n.whiteList.form={names:[]}:n.whiteList={form:{names:[]}},n.whiteList.form.names=e.interestingForms.name_w),e.interestingForms.id_w&&(n.whiteList?n.whiteList.form?n.whiteList.form.ids||(n.whiteList.form.ids=[]):n.whiteList.form={ids:[]}:n.whiteList={form:{ids:[]}},n.whiteList.form.ids=e.interestingForms.id_w),e.interestingForms.name_b&&(n.blackList?n.blackList.form?n.blackList.form.names||(n.blackList.form.names=[]):n.blackList.form={names:[]}:n.blackList={form:{names:[]}},n.blackList.form.names=e.interestingForms.name_b),e.interestingForms.id_b&&(n.blackList?n.blackList.form?n.blackList.form.ids||(n.blackList.form.ids=[]):n.blackList.form={ids:[]}:n.blackList={form:{ids:[]}},n.blackList.form.ids=e.interestingForms.id_b),e.interestingForms.f_name_w&&(n.whiteList?n.whiteList.fields?n.whiteList.fields.names||(n.whiteList.fields.names=[]):n.whiteList.fields={names:[]}:n.whiteList={fields:{names:[]}},n.whiteList.fields.names=e.interestingForms.f_name_w),e.interestingForms.f_id_w&&(n.whiteList?n.whiteList.fields?n.whiteList.fields.ids||(n.whiteList.fields.ids=[]):n.whiteList.fields={ids:[]}:n.whiteList={fields:{ids:[]}},n.whiteList.fields.ids=e.interestingForms.f_id_w),e.interestingForms.f_name_b&&(n.blackList?n.blackList.fields?n.blackList.fields.names||(n.blackList.fields.names=[]):n.blackList.fields={names:[]}:n.blackList={fields:{names:[]}},n.blackList.fields.names=e.interestingForms.f_name_b),e.interestingForms.f_id_b&&(n.blackList?n.blackList.fields?n.blackList.fields.ids||(n.blackList.fields.ids=[]):n.blackList.fields={ids:[]}:n.blackList={fields:{ids:[]}},n.blackList.fields.ids=e.interestingForms.f_id_b)),n}}class Yo{constructor(){this.pslInitialised=!1}versionAsInt(e){let n=0;for(let s=0;s<e.length;s++)n=n*256+e[s];return n}versionAsArray(e){const n=[0,0,0];for(let s=n.length-1;s>=0;s--){const i=e&255;n[s]=i,e=(e-i)/256}return n}versionAsString(e){let n="";const s=this.versionAsArray(e);for(let i=0;i<s.length;i++)i>0&&(n+="."),n+=s[i].toString();return n}toHexString(e){return("0"+e.toString(16)).slice(-2)}BigIntFromRandom(e){const n=new Uint8Array(e);window.crypto.getRandomValues(n);const s=Array.from(n).map(this.toHexString).join("");return BigInteger.parse(s,16)}hash(e,n="hex",s="SHA-256"){let i;return typeof e=="string"?i=new TextEncoder().encode(e):i=e,crypto.subtle.digest({name:s},i).then(r=>n=="base64"?Oe.byteArrayToBase64(r):Array.from(new Uint8Array(r)).map(this.toHexString).join(""))}intToByteArray(e){const n=[0,0,0,0];for(let s=n.length-1;s>=0;s--){const i=e&255;n[s]=i,e=(e-i)/256}return n}intArrayToByteArray(e){const n=new Array(e.length*4);for(let s=0;s<e.length;s++){let i=e[s];for(let r=3;r>=0;r--){const o=i&255;n[s*4+r]=o,i=(i-o)/256}}return n}stringToByteArray(e){return new TextEncoder().encode(e)}base64toByteArrayForHMAC(e,n,s=null){const i=atob(e),r=i.length;let o=0;if(!s){const a=new ArrayBuffer(r+n);s=new Uint8Array(a),o=20}for(let a=0;a<r;a++)s[a+o]=i.charCodeAt(a);return s}base64toByteArray(e){const n=atob(e),s=n.length,i=new ArrayBuffer(s),r=new Uint8Array(i);for(let o=0;o<s;o++)r[o]=n.charCodeAt(o);return r}byteArrayToBase64(e){let n="";const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=new Uint8Array(e),r=i.byteLength,o=r%3,a=r-o;let l,c,d,f,g;for(let w=0;w<a;w=w+3)g=i[w]<<16|i[w+1]<<8|i[w+2],l=(g&16515072)>>18,c=(g&258048)>>12,d=(g&4032)>>6,f=g&63,n+=s[l]+s[c]+s[d]+s[f];return o==1?(g=i[a],l=(g&252)>>2,c=(g&3)<<4,n+=s[l]+s[c]+"=="):o==2&&(g=i[a]<<8|i[a+1],l=(g&64512)>>10,c=(g&1008)>>4,d=(g&15)<<2,n+=s[l]+s[c]+s[d]+"="),n}hexStringToByteArray(e,n=null){if(e.length%2!==0)throw Error("Must have an even number of hex digits to convert to bytes");const s=e.length/2;n||(n=new Uint8Array(s));for(let i=0;i<s;i++)n[i]=parseInt(e.substr(i*2,2),16);return n}newGUID(){const e=[];for(let a=0;a<256;a++)e[a]=(a<16?"0":"")+a.toString(16);const n=new Uint32Array(4);window.crypto.getRandomValues(n);const s=n[0],i=n[1],r=n[2],o=n[3];return e[s&255]+e[s>>8&255]+e[s>>16&255]+e[s>>24&255]+"-"+e[i&255]+e[i>>8&255]+"-"+e[i>>16&15|64]+e[i>>24&255]+"-"+e[r&63|128]+e[r>>8&255]+"-"+e[r>>16&255]+e[r>>24&255]+e[o&255]+e[o>>8&255]+e[o>>16&255]+e[o>>24&255]}base64urlDecode(e){return atob(e.replace(/-/g,"+").replace(/_/g,"/"))}binaryToByteArray(e){const n=e.length,s=new ArrayBuffer(n),i=new Uint8Array(s);for(let r=0;r<n;r++)i[r]=e.charCodeAt(r);return i}base64urltoByteArray(e){const n=this.base64urlDecode(e);return this.binaryToByteArray(n)}get psl(){if(!publicSuffixList)throw new Error("publicSuffixList library not present");return this.pslInitialised||(publicSuffixList.parse(pslData.text,punycode.toASCII),this.pslInitialised=!0),publicSuffixList}}function bs(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,s;if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(s=n;s--!==0;)if(!bs(t[s],e[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const i=Object.keys(t);if(n=i.length,n!==Object.keys(e).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(e,i[s]))return!1;for(s=n;s--!==0;){const r=i[s];if(!bs(t[r],e[r]))return!1}return!0}return t!==t&&e!==e}const Oe=new Yo,Qo=[EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,globalThis.DOMException,globalThis.AssertionError,globalThis.SystemError].filter(Boolean).map(t=>[t.name,t]),Zo=new Map(Qo),ea=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0},{property:"cause",enumerable:!1}],ws=Symbol(".toJSON was called"),ta=t=>{t[ws]=!0;const e=t.toJSON();return delete t[ws],e},na=t=>Zo.get(t)??Error,ki=({from:t,seen:e,to:n,forceEnumerable:s,maxDepth:i,depth:r,useToJSON:o,serialize:a})=>{if(!n)if(Array.isArray(t))n=[];else if(!a&&Di(t)){const c=na(t.name);n=new c}else n={};if(e.push(t),r>=i)return n;if(o&&typeof t.toJSON=="function"&&t[ws]!==!0)return ta(t);const l=c=>ki({from:c,seen:[...e],forceEnumerable:s,maxDepth:i,depth:r,useToJSON:o,serialize:a});for(const[c,d]of Object.entries(t)){if(typeof Buffer=="function"&&Buffer.isBuffer(d)){n[c]="[object Buffer]";continue}if(d!==null&&typeof d=="object"&&typeof d.pipe=="function"){n[c]="[object Stream]";continue}if(typeof d!="function"){if(!d||typeof d!="object"){n[c]=d;continue}if(!e.includes(t[c])){r++,n[c]=l(t[c]);continue}n[c]="[Circular]"}}for(const{property:c,enumerable:d}of ea)typeof t[c]<"u"&&t[c]!==null&&Object.defineProperty(n,c,{value:Di(t[c])?l(t[c]):t[c],enumerable:s?!0:d,configurable:!0,writable:!0});return n};function sa(t,e={}){const{maxDepth:n=Number.POSITIVE_INFINITY,useToJSON:s=!0}=e;return typeof t=="object"&&t!==null?ki({from:t,seen:[],forceEnumerable:!0,maxDepth:n,depth:0,useToJSON:s,serialize:!0}):typeof t=="function"?`[Function: ${t.name??"anonymous"}]`:t}function Di(t){return Boolean(t)&&typeof t=="object"&&"name"in t&&"message"in t&&"stack"in t}class ia{constructor(){this.defaultLevel=4,this.outputStarted=!1,this.config={logLevel:this.defaultLevel}}attachConfig(e){this.debug("Logging system config updated at "+Date()),this.config=e}formatMessage(e,n){return!e&&!n?"":(this.outputStarted||(e="* "+e,this.outputStarted=!0),n&&(e+=` Error: ${JSON.stringify(sa(n))}`),e)}debug(e){this.config.logLevel>=4&&(e=this.formatMessage(e),e.length>0&&(console.debug(e),this.config.logLevel>=4&&this.send(4,e)))}info(e){this.config.logLevel>=3&&(e=this.formatMessage(e),e.length>0&&(console.info(e),this.config.logLevel>=4&&this.send(3,e)))}warn(e){this.config.logLevel>=2&&(e=this.formatMessage(e),e.length>0&&(console.warn(e),this.config.logLevel>=4&&this.send(2,e)))}error(e,n){this.config.logLevel>=1&&(e=this.formatMessage(e,n),e.length>0&&(console.error(e),this.config.logLevel>=4&&this.send(1,e)))}send(e,n){}stackTrace(){console.groupCollapsed("%c Stack Trace","color:cream; font-style: normal;"),console.debug(new Error().stack),console.groupEnd()}}const ce=new ia,ys=8,B=new Xo;B.autoFillDialogs=!1,B.autoFillForms=!0,B.autoFillFormsWithMultipleMatches=!1,B.autoSubmitForms=!1,B.autoSubmitDialogs=!1,B.autoSubmitMatchedForms=!1,B.connSLClient=2,B.connSLServerMin=2,B.keePassDBToOpen="",B.keePassMRUDB="",B.KeePassRPCWebSocketPort=12546,B.KPRPCUsername="",B.KPRPCStoredKeys={},B.lastConnectedToKeePass="",B.listAllOpenDBs=!0,B.logLevel=ce.defaultLevel,B.logMethodConsole=!1,B.logMethodFile=!1,B.logSensitiveData=!1,B.metricsUsageDisabled=!1,B.metricsUserId="",B.notifyWhenEntryUpdated=!0,B.notifyWhenLateDiscovery=!1,B.notifyWhenLoggedOut=!1,B.overWriteFieldsAutomatically=!1,B.rememberMRUDB=!0,B.rememberMRUGroup=!0,B.saveFavicons=!0,B.searchAllOpenDBs=!0,B.config=null,B.siteConfig=yn,B.tutorialProgress="",B.version=ys,B.triggerChangeInputEventAfterFill=!1,B.autoSubmitNetworkAuthWithSingleMatch=!1,B.searchNetworkAuth=!0,B.notificationCountGeneric=0,B.notificationCountSavePassword=0,B.currentSearchTermTimeout=30,B.notifyPasswordAvailableForPaste=!0,B.animateWhenOfferingSave=!0,B.keeVaultLaunchMessageDismissed=!1,B.keeVaultLaunchStart=864e13,B.keeVaultLaunchEnd=864e13,B.manualSubmitOverrideProhibited=!1,B.theme=null,B.hideConfirmationAfterSave=!1,B.mustShowReleaseNotesAtStartup=!1,B.autoFillFieldsWithExistingValue=!1;class ra{constructor(){this.maxCharsPerPage=1e4,this._listeners=[],this.current=B,Te.storage.onChanged.addListener((e,n)=>this.reloadOnStorageChange(e,n))}addChangeListener(e){this._listeners.push(e)}reloadOnStorageChange(e,n){Ie.reload(()=>this._listeners.forEach(s=>s(e,n)))}async setASAP(e){Object.assign(this.current,e),await this.save()}splitStringToPages(e){const n=Math.ceil(e.length/this.maxCharsPerPage),s=new Array(n);for(let i=0,r=0;i<n;++i,r+=this.maxCharsPerPage)s[i]=e.substr(r,this.maxCharsPerPage);return s}async save(){const e=JSON.stringify(this.current),n=this.splitStringToPages(e),s={};s.keeConfigPageCount=n.length;for(let i=0;i<n.length;i++)s["keeConfigPage"+i]=n[i];await Te.storage.local.set(s)}load(e){Te.storage.local.get().then(n=>{const s=n.keeConfigPageCount;if(s){let i="";for(let r=0;r<s;r++){const o=n["keeConfigPage"+r];o&&(i+=o)}i&&(this.current=JSON.parse(i))}else{const i=n.keefoxConfigPageCount;if(i){let r="";for(let o=0;o<i;o++){const a=n["keefoxConfigPage"+o];a&&(r+=a)}r&&(this.current=JSON.parse(r))}}this.fixInvalidConfigData(),this.migrateToLatestVersion(),e()})}fixInvalidConfigData(){let e=!1;this.current.KPRPCStoredKeys==null&&(this.current.KPRPCStoredKeys={},e=!0),e&&this.save()}migrateToLatestVersion(){if(this.current.version>=ys)return;const e=new Mi;switch(this.current.version){case 1:e.migrateToVersion2(this.current);case 2:e.migrateToVersion3(this.current);case 3:e.migrateToVersion4(this.current);case 4:e.migrateToVersion5(this.current);case 5:e.migrateToVersion6(this.current);case 6:e.migrateToVersion7(this.current);case 7:e.migrateToVersion8(this.current)}this.save()}migrateFromRemoteToLatestVersion(){if(this.current.version>=ys)return;const e=new Mi;switch(this.current.version){case 5:e.migrateToVersion6(this.current);case 6:e.migrateToVersion7(this.current)}this.save()}reload(e){Te.storage.local.get().then(n=>{const s=n.keeConfigPageCount;if(s){let i="";for(let r=0;r<s;r++){const o=n["keeConfigPage"+r];o&&(i+=o)}i&&(this.current=Object.assign(this.current,JSON.parse(i)))}e&&e()})}siteConfigLookupFor(e,n){if(e=="Domain"){if(n=="Exact")return this.current.siteConfig.domainExact||(this.current.siteConfig.domainExact=new Ce),this.current.siteConfig.domainExact;if(n=="Prefix")return this.current.siteConfig.domainPrefix||(this.current.siteConfig.domainPrefix=new Ce),this.current.siteConfig.domainPrefix;if(n=="Regex")return this.current.siteConfig.domainRegex||(this.current.siteConfig.domainRegex=new Ce),this.current.siteConfig.domainRegex}else if(e=="Host"){if(n=="Exact")return this.current.siteConfig.hostExact||(this.current.siteConfig.hostExact=new Ce),this.current.siteConfig.hostExact;if(n=="Prefix")return this.current.siteConfig.hostPrefix||(this.current.siteConfig.hostPrefix=new Ce),this.current.siteConfig.hostPrefix;if(n=="Regex")return this.current.siteConfig.hostRegex||(this.current.siteConfig.hostRegex=new Ce),this.current.siteConfig.hostRegex}else if(e=="Page"){if(n=="Exact")return this.current.siteConfig.pageExact||(this.current.siteConfig.pageExact=new Ce),this.current.siteConfig.pageExact;if(n=="Prefix")return this.current.siteConfig.pagePrefix||(this.current.siteConfig.pagePrefix=new Ce),this.current.siteConfig.pagePrefix;if(n=="Regex")return this.current.siteConfig.pageRegex||(this.current.siteConfig.pageRegex=new Ce),this.current.siteConfig.pageRegex}return null}siteConfigFor(e){const n=this.findAllConfigsFor(e);return n.sort((s,i)=>i.matchWeight-s.matchWeight),this.deriveConfigFromMatches(n)}findAllConfigsFor(e){const n=[],s=new URL(e),i=s.host,r=i+s.pathname,o=Oe.psl.getDomain(i);for(const a in this.current.siteConfig.domainExact)a===o&&n.push(this.current.siteConfig.domainExact[a]);for(const a in this.current.siteConfig.hostExact)a===i&&n.push(this.current.siteConfig.hostExact[a]);for(const a in this.current.siteConfig.pageExact)a===r&&n.push(this.current.siteConfig.pageExact[a]);for(const a in this.current.siteConfig.domainPrefix)o.startsWith(a)&&n.push(this.current.siteConfig.domainPrefix[a]);for(const a in this.current.siteConfig.hostPrefix)i.startsWith(a)&&n.push(this.current.siteConfig.hostPrefix[a]);for(const a in this.current.siteConfig.pagePrefix)r.startsWith(a)&&n.push(this.current.siteConfig.pagePrefix[a]);for(const a in this.current.siteConfig.domainRegex)new RegExp(a).test(o)&&n.push(this.current.siteConfig.domainRegex[a]);for(const a in this.current.siteConfig.hostRegex)new RegExp(a).test(i)&&n.push(this.current.siteConfig.hostRegex[a]);for(const a in this.current.siteConfig.pageRegex)new RegExp(a).test(r)&&n.push(this.current.siteConfig.pageRegex[a]);return n}findAllConfigsAndIndexFor(e){const n=[],s=new URL(e),i=s.host,r=i+s.pathname,o=Oe.psl.getDomain(i);for(const a in this.current.siteConfig.domainExact)a===o&&n.push({node:this.current.siteConfig.domainExact[a],target:"Domain",method:"Exact",lookupValue:a});for(const a in this.current.siteConfig.hostExact)a===i&&n.push({node:this.current.siteConfig.hostExact[a],target:"Host",method:"Exact",lookupValue:a});for(const a in this.current.siteConfig.pageExact)a===r&&n.push({node:this.current.siteConfig.pageExact[a],target:"Page",method:"Exact",lookupValue:a});for(const a in this.current.siteConfig.domainPrefix)o.startsWith(a)&&n.push({node:this.current.siteConfig.domainPrefix[a],target:"Domain",method:"Prefix",lookupValue:a});for(const a in this.current.siteConfig.hostPrefix)i.startsWith(a)&&n.push({node:this.current.siteConfig.hostPrefix[a],target:"Host",method:"Prefix",lookupValue:a});for(const a in this.current.siteConfig.pagePrefix)r.startsWith(a)&&n.push({node:this.current.siteConfig.pagePrefix[a],target:"Page",method:"Prefix",lookupValue:a});for(const a in this.current.siteConfig.domainRegex)new RegExp(a).test(o)&&n.push({node:this.current.siteConfig.domainRegex[a],target:"Domain",method:"Regex",lookupValue:a});for(const a in this.current.siteConfig.hostRegex)new RegExp(a).test(i)&&n.push({node:this.current.siteConfig.hostRegex[a],target:"Host",method:"Regex",lookupValue:a});for(const a in this.current.siteConfig.pageRegex)new RegExp(a).test(r)&&n.push({node:this.current.siteConfig.pageRegex[a],target:"Page",method:"Regex",lookupValue:a});return n}deriveConfigFromMatches(e){const n={};return e.forEach(s=>{s.config.preventSaveNotification!==void 0&&n.preventSaveNotification==null&&(n.preventSaveNotification=s.config.preventSaveNotification),s.config.listMatchingCaseSensitive!==void 0&&n.listMatchingCaseSensitive==null&&(n.listMatchingCaseSensitive=s.config.listMatchingCaseSensitive),s.config.blackList!==void 0&&(n.blackList===void 0&&(n.blackList={}),s.config.blackList.form!==void 0&&(n.blackList.form===void 0&&(n.blackList.form={}),s.config.blackList.form.ids!==void 0&&n.blackList.form.ids===void 0&&(n.blackList.form.ids=s.config.blackList.form.ids),s.config.blackList.form.names!==void 0&&n.blackList.form.names===void 0&&(n.blackList.form.names=s.config.blackList.form.names)),s.config.blackList.fields!==void 0&&(n.blackList.fields===void 0&&(n.blackList.fields={}),s.config.blackList.fields.ids!==void 0&&n.blackList.fields.ids===void 0&&(n.blackList.fields.ids=s.config.blackList.fields.ids),s.config.blackList.fields.names!==void 0&&n.blackList.fields.names===void 0&&(n.blackList.fields.names=s.config.blackList.fields.names))),s.config.whiteList!==void 0&&(n.whiteList===void 0&&(n.whiteList={}),s.config.whiteList.form!==void 0&&(n.whiteList.form===void 0&&(n.whiteList.form={}),s.config.whiteList.form.ids!==void 0&&n.whiteList.form.ids===void 0&&(n.whiteList.form.ids=s.config.whiteList.form.ids),s.config.whiteList.form.names!==void 0&&n.whiteList.form.names===void 0&&(n.whiteList.form.names=s.config.whiteList.form.names)),s.config.whiteList.fields!==void 0&&(n.whiteList.fields===void 0&&(n.whiteList.fields={}),s.config.whiteList.fields.ids!==void 0&&n.whiteList.fields.ids===void 0&&(n.whiteList.fields.ids=s.config.whiteList.fields.ids),s.config.whiteList.fields.names!==void 0&&n.whiteList.fields.names===void 0&&(n.whiteList.fields.names=s.config.whiteList.fields.names))),s.config.preferredEntryUuid!==void 0&&n.preferredEntryUuid==null&&(n.preferredEntryUuid=s.config.preferredEntryUuid)}),n}normalizeFormProperty(e,n){return typeof e!="string"?null:n?e.toLowerCase():e}isFormInteresting(e,n,s){var W,k,Y,re,N,L,m,y,p,E,H,le,j,Z,O,X;const i=n.listMatchingCaseSensitive!==!0,r=s.map(V=>{var te,Ae;return i?(te=V.locators[0])==null?void 0:te.id.toLowerCase():(Ae=V.locators[0])==null?void 0:Ae.id}).filter(Boolean),o=s.map(V=>{var te,Ae;return i?(te=V.locators[0])==null?void 0:te.name.toLowerCase():(Ae=V.locators[0])==null?void 0:Ae.name}).filter(Boolean),a=this.normalizeFormProperty(e.id,i),l=this.normalizeFormProperty(e.name,i),c=(((k=(W=n==null?void 0:n.blackList)==null?void 0:W.form)==null?void 0:k.ids)||[]).map(V=>i?V==null?void 0:V.toLowerCase():V).filter(Boolean),d=(((re=(Y=n==null?void 0:n.blackList)==null?void 0:Y.form)==null?void 0:re.names)||[]).map(V=>i?V==null?void 0:V.toLowerCase():V).filter(Boolean),f=(((L=(N=n==null?void 0:n.blackList)==null?void 0:N.fields)==null?void 0:L.ids)||[]).map(V=>i?V==null?void 0:V.toLowerCase():V).filter(Boolean),g=(((y=(m=n==null?void 0:n.blackList)==null?void 0:m.fields)==null?void 0:y.names)||[]).map(V=>i?V==null?void 0:V.toLowerCase():V).filter(Boolean);if(c.indexOf(a)>=0||d.indexOf(l)>=0||f.some(V=>r.find(te=>V===te)!==void 0)||g.some(V=>o.find(te=>V===te)!==void 0))return!1;const I=((E=(p=n==null?void 0:n.whiteList)==null?void 0:p.form)==null?void 0:E.ids)||[],v=((le=(H=n==null?void 0:n.whiteList)==null?void 0:H.form)==null?void 0:le.names)||[],T=((Z=(j=n==null?void 0:n.whiteList)==null?void 0:j.fields)==null?void 0:Z.ids)||[],$=((X=(O=n==null?void 0:n.whiteList)==null?void 0:O.fields)==null?void 0:X.names)||[];return I.indexOf(a)>=0||v.indexOf(l)>=0||T.some(V=>r.find(te=>V===te)!==void 0)||$.some(V=>o.find(te=>V===te)!==void 0)?!0:null}get activeTheme(){return this.current.theme||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}togglePreferredEntryUuid(e,n){let s;try{s=new URL(n)}catch{ce.error("Invalid URL supplied to togglePreferredEntryUuid. Preferred entry will not be altered.");return}const i="Domain",r=this.findAllConfigsAndIndexFor(n),a=this.siteConfigFor(n).preferredEntryUuid;a===e?r.forEach(l=>{l.node.config.preferredEntryUuid===e&&this.removePreferredEntryUuid(l)}):(r.forEach(l=>{l.node.config.preferredEntryUuid===a&&this.leastSpecificTarget(i,l.target)===i&&this.removePreferredEntryUuid(l)}),this.addSiteConfigParameters({preferredEntryUuid:e},s,i,"Exact","Auto")),this.save()}removePreferredEntryUuid(e){if(e.node.config.preferredEntryUuid=null,e.node.source==="Auto"&&this.equalsDefaultSiteConfig(e.node.config)){const n=this.siteConfigLookupFor(e.target,e.method);delete n[e.lookupValue]}}equalsDefaultSiteConfig(e){return!(typeof e.preferredEntryUuid=="boolean"||typeof e.preventSaveNotification=="boolean"||typeof e.listMatchingCaseSensitive=="boolean"||e.whiteList||e.blackList)}leastSpecificTarget(e,n){return e==="Domain"||n==="Domain"?"Domain":e==="Host"||n==="Host"?"Host":"Page"}valueFromUrl(e,n){const s=e.host;if(n==="Host")return s;if(n==="Page")return s+e.pathname;if(n==="Domain")return Oe.psl.getDomain(s)}addSiteConfigParameters(e,n,s,i,r){const o=this.valueFromUrl(n,s),a=Ie.siteConfigLookupFor(s,i);a[o]||(a[o]={config:new Ti,source:r,matchWeight:100}),Object.assign(a[o].config,e)}}const Ie=new ra;class pt{}pt.MatchedLogins={id:"KeeAddonPanelMatchedLogins",height:300,width:400,name:"matchedLoginsLegacy",autoCloseTime:0,legacy:!0},pt.GeneratePasswordLegacy={id:"KeeAddonPanelGeneratePassword",height:300,width:400,name:"generatePasswordLegacy",autoCloseTime:0,legacy:!0},pt.GeneratePassword={id:"KeeAddonPanelGeneratePassword",height:500,width:450,name:"generatePassword",autoCloseTime:0,legacy:!1};class Jt{constructor(e,n,s){this.target=n,this.options=e,this.parentFrameId=s}createPanel(){this.options.name=="generatePassword"&&(this.elementToRefocus=document.activeElement),this.container=document.createElement("div");const e=this.container.attachShadow({mode:"closed"});this.container.id=this.options.id;const n=document.createElement("style");n.textContent=`:host(div) {
            display: block !important;
            position: absolute !important;
            z-index: 2147483647 !important;
        }`,e.appendChild(n),this.target?(this.targetRelativeRect=this.target.getBoundingClientRect(),this.positionPanel()):(this.container.style.setProperty("width",this.options.width+"px","important"),this.container.style.setProperty("height",this.options.height+"px","important"),this.container.style.setProperty("top",(window.innerHeight-this.options.height)/2+window.scrollY+"px","important"),this.container.style.setProperty("left",(window.innerWidth-this.options.width)/2+window.scrollX+"px","important"));const s=document.createElement("iframe");s.setAttribute("sandbox","allow-scripts allow-same-origin"),s.setAttribute("allow",""),s.style.setProperty("width","100%","important"),s.style.setProperty("height","100%","important"),s.style.setProperty("visibility","visible","important"),s.style.setProperty("display","block","important"),s.style.setProperty("position","relative","important"),s.style.setProperty("background-color",Ie.activeTheme==="dark"?"#1e1e1e":"#ffffff","important"),s.setAttribute("scrolling","no"),this.options.legacy?s.style.setProperty("border","none","important"):(s.style.setProperty("border","2px solid #1a466b","important"),s.style.setProperty("border-radius","8px","important")),e.appendChild(s);const i=Te.extension.getURL(`panels/panels${this.options.legacy?"Legacy":""}.html`);s.src=`${i}?parentFrameId=${this.parentFrameId}&autoCloseTime=${this.options.autoCloseTime}&panel=${this.options.name}&theme=${Ie.activeTheme}`;const r=document.getElementsByTagName("body");if(r&&r.length>0)r[0].appendChild(this.container);else{const o=document.getElementsByTagName("frameset");o&&o.length>0&&o[0].insertAdjacentElement("afterend",this.container)}}updateBoundingClientRect(){const e=this.targetRelativeRect;this.targetRelativeRect=this.target.getBoundingClientRect(),(e.top!=this.targetRelativeRect.top||e.bottom!=this.targetRelativeRect.bottom||e.left!=this.targetRelativeRect.left||e.right!=this.targetRelativeRect.right)&&this.positionPanel()}positionPanel(){const e=this.options.height;let n=e;const s=this.options.width;let i=!1;const r=this.targetRelativeRect.top+window.scrollY,o=this.targetRelativeRect.bottom+window.scrollY,a=this.targetRelativeRect.right-12,l=this.targetRelativeRect.bottom+e;if(l>window.innerHeight){const w=this.targetRelativeRect.top-e;if(w>=0)i=!0;else{const I=l-window.innerHeight,v=-w;I>v?(i=!0,n=e-v):n=e-I}}const c=a-this.targetRelativeRect.left;let d;c<s?d=Math.min(this.targetRelativeRect.left,window.innerWidth-s):d=a-s;const f=i?r-n:o,g=d+window.scrollX;this.container.style.setProperty("width",s+"px","important"),this.container.style.setProperty("height",n+"px","important"),this.container.style.setProperty("top",f+"px","important"),this.container.style.setProperty("left",g+"px","important")}closePanel(){const e=document.getElementById(this.options.id);if(e&&e.parentNode.removeChild(e),this.elementToRefocus)try{this.elementToRefocus.focus()}catch{}}}var Ve=(t=>(t.CloseAllPanels="closeAllPanels",t.DetectForms="detectForms",t.ResetForms="resetForms",t.GetPasswordProfiles="getPasswordProfiles",t.GeneratePassword="generatePassword",t.ManualFill="manualFill",t.Primary="primary",t.ShowMatchedLoginsPanel="showMatchedLoginsPanel",t.PageHide="pageHide",t.OpenKeePass="openkeepass",t.CreateEntry="createEntry",t.UpdateEntry="updateEntry",t))(Ve||{});class oa{constructor(e,n,s,i){this.myPort=e,this.parentFrameId=n,this.formUtils=s,this.createMatchedLoginsPanelNearNode=i,this.fieldsWithIcons=[],this.KEEFOX_ICON_16="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAA7AAAAOwBeShxvQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAOdEVYdFRpdGxlAEtlZSBsb2dvN59B9AAAABB0RVh0QXV0aG9yAEtlZSBWYXVsdGXwy5UAAAH8SURBVDiNhZDfS1NhGMc/z3vOEHea0lgXrkisvArWTUSlF9XFIKj/waugtP+hey/M5vpFN0Eg4UVB0WARSglC0IX2AwwtzdywppYsz862875dzLmDbfTcvd/n8/0+X16JX74Sxgt9AHrYmYhVfTbZ88Z6/SeWVEC/szF1brGvVDT2JRqzVLLUCTl28Xrbtq8LwL76JtU1axLhLTm/2A/A1JFp5txOM5RPSCBgM2ypLrWQSXkID+tqd8jljLMpjvgMRFcY2P+NsPI57WxId8gN+HmwkEl5NoBUuWUsrgIqZnu7xLXol6CBmF1mudIOUDU2aQAFsPoq/RkjGYB5L4KnFXvH04p5zwHAwNP8i/TybgAAYkYBitpieL0XP2D2geH1XorarqG6xgIEP0XiycH3wHGAU+0b3D44h6sthvIJZt3OOvYulx07WTcFuxojjeSlSq3u13KYT6VIAwowewOwttoeIRSC2sx2lIqpY5KPdhx43DLg+8yIK3A/qJ111gmJrtmNvvNx4ka5ZQCA0pIGKho0QET5AAYoVUXf+4ffK6y8HMsBEyVtuQC/dQgfMRjG17J3f/w3AEArc7Oo7fD4r0OMFI6ijShRarQZK81EgHhycBro23lO5rLpC824pg0AxEjjotD0OoDdarFaiT053Lb2VhB/uePn81bcX+xXu7resl9RAAAAAElFTkSuQmCC"}removeKeeIconFromAllFields(){for(const e of this.fieldsWithIcons){const n=e.DOMelement;n&&(n.removeEventListener("click",this),n.removeEventListener("mousemove",this),n.style.setProperty("background-image",""),n.style.setProperty("background-repeat",""),n.style.setProperty("background-attachment",""),n.style.setProperty("background-size",""),n.style.setProperty("background-position",""))}this.fieldsWithIcons=[],this.passwordFields=null,this.otherFields=null}addKeeIconToFields(e,n,s){this.passwordFields=e,this.otherFields=n,s.length>1?this.getLabelledIcon(s.length.toString()):this.afterImageLoaded(this.KEEFOX_ICON_16)}skipField(e){return!this.formUtils.isATextFormFieldType(e.field.type)&&e.field.type!="password"||!e.DOMelement||e.DOMelement instanceof HTMLSelectElement||!e.DOMelement.isConnected||e.DOMelement.maxLength>0&&e.DOMelement.maxLength<=3||e.DOMelement.offsetWidth<50}addIcon(e,n){this.fieldsWithIcons.push(e);const s=e.DOMelement;s.addEventListener("click",this),s.addEventListener("mousemove",this),s.style.setProperty("background-image","url('"+n+"')","important"),s.style.setProperty("background-repeat","no-repeat","important"),s.style.setProperty("background-attachment","scroll","important"),s.style.setProperty("background-size","16px 16px","important"),s.style.setProperty("background-position","calc(100% - 4px) 50%","important"),s.style.setProperty("cursor","auto");const i=window.getComputedStyle(e.DOMelement).getPropertyValue("transition-property");["all","background"].some(r=>i.includes(r))&&e.DOMelement.style.setProperty("transition","none","important"),this.overrideBoxShadows(s)}handleEvent(e){e.type==="click"&&this.showMatchedLoginsPanel(e),e.type==="mousemove"&&this.hoverOverInput(e)}limitFields(e){return e.filter(s=>!this.skipField(s)).sort((s,i)=>s.highestScore===i.highestScore?0:s.highestScore<i.highestScore?1:-1).slice(0,2)}afterImageLoaded(e){const n=this.limitFields(this.passwordFields),s=this.limitFields(this.otherFields);for(const i of n.concat(s))this.addIcon(i,e)}overrideBoxShadows(e){const n=window.getComputedStyle(e);if(n){const s=[];s.push(n.getPropertyValue("box-shadow")),s.push(n.getPropertyValue("-webkit-box-shadow")),s.push(n.getPropertyValue("-moz-box-shadow")),s.some(i=>i.indexOf("inset"))&&(e.style.setProperty("box-shadow","initial","important"),e.style.setProperty("-webkit-box-shadow","initial","important"),e.style.setProperty("-moz-box-shadow","initial","important"))}}showMatchedLoginsPanel(e){const n=e.target.getBoundingClientRect(),s=n.left+n.width-22;e.clientX>s&&n.top<=e.clientY&&e.clientY<=n.bottom&&(this.parentFrameId!==0?this.myPort.postMessage({action:Ve.ShowMatchedLoginsPanel}):this.createMatchedLoginsPanelNearNode(e.target))}hoverOverInput(e){if(e.target.disabled)return;const n=e.target.getBoundingClientRect(),s=n.left+n.width-22;if(e.clientX>s){e.target.style.setProperty("cursor","pointer","important");return}e.target.style.setProperty("cursor","auto")}getLabelledIcon(e){const n=document.createElement("canvas");n.height=16,n.width=16;const s=document.createElement("img");s.addEventListener("load",()=>{const i=n.getContext("2d");i.drawImage(s,0,0),i.fillStyle="white",i.fillRect(6,8,10,8),i.fillStyle="red",i.font="8px Arial",i.fillText(e,7,15),this.afterImageLoaded(n.toDataURL())}),s.src=this.KEEFOX_ICON_16}}class aa{}var Ni=(t=>(t.Event="event",t.Websocket="websocket",t))(Ni||{});class An{constructor(e){this.icon=e.icon||{version:1,iconImageData:""},this.usernameValue=e.usernameValue||"<no username>",this.usernameName=e.usernameName||"<no username>",this.path=e.path||"UNKNOWN PATH",this.title=e.title||"",this.uRLs=e.uRLs||[],this.url=(e==null?void 0:e.url)||"",this.uuid=e.uuid||Oe.newGUID(),this.dbFileName=e.dbFileName||"",this.relevanceScore=e.relevanceScore,this.fullDetails=e.fullDetails,this.isPreferredMatch=e.isPreferredMatch}static fromEntry(e){var n,s;return new An({icon:e.icon,usernameValue:(n=Ye.getUsernameField(e))==null?void 0:n.value,usernameName:(s=Ye.getUsernameField(e))==null?void 0:s.name,title:e.title,uRLs:e.URLs,url:e==null?void 0:e.URLs[0],uuid:e.uuid,dbFileName:e.database.fileName,fullDetails:e,isPreferredMatch:e.isPreferredMatch})}static fromKPRPCEntrySummaryDTO(e,n,s){return new An({icon:{version:1,iconImageData:e.iconImageData},usernameValue:e.usernameValue,usernameName:e.usernameName,path:n,title:e.title,uRLs:e.uRLs,url:e==null?void 0:e.uRLs[0],uuid:e.uniqueID,dbFileName:s})}}class Xt{constructor(e){this.title=e.title||"",this.uuid=e.uuid||Oe.newGUID(),this.icon=e.icon||{version:1,iconImageData:""},this.path=e.path||"UNKNOWN PATH",this.entrySummaries=e.entrySummaries||[],this.groups=e.groups||[]}static fromKPRPCGroupDTO(e,n){return new Xt({title:e.title,uuid:e.uniqueID,icon:{version:1,iconImageData:e.iconImageData},path:e.path,entrySummaries:e.childLightEntries.map(s=>An.fromKPRPCEntrySummaryDTO(s,e.path,n)),groups:e.childGroups.map(s=>this.fromKPRPCGroupDTO(s,n))})}static containsId(e,n){return!!(e.uuid===n||e.groups&&e.groups.some(s=>Xt.containsId(s,n)))}}class As{constructor(e){this.name=e.name||"",this.fileName=e.fileName||"",this.icon=e.icon||{version:1,iconImageData:""},this.root=e.root||new Xt({}),this.active=e.active||!1,this.sessionType=e.sessionType||Ni.Event,this.sessionFeatures=e.sessionFeatures||[""]}static fromKPRPCDatabaseDTO(e,n,s){return new As({name:e.name,fileName:e.fileName,icon:{version:1,iconImageData:e.iconImageData},root:Xt.fromKPRPCGroupDTO(e.root,e.fileName),active:e.active,sessionType:n,sessionFeatures:s})}}function Xe(t){return Te.i18n.getMessage(t)||t}function vs(t,e){return Te.i18n.getMessage(t,e)||t}class Ui{constructor(e){this.id=e.id||"",this.name=e.name||"",this.type=e.type||"",this.query=e.query,this.labels=e.labels,this.autocompleteValues=e.autocompleteValues}}class la{}var xe=(t=>(t.radio="FFTradio",t.username="FFTusername",t.text="FFTtext",t.password="FFTpassword",t.select="FFTselect",t.checkbox="FFTcheckbox",t))(xe||{});class Fe{constructor(e){this.name=e.name||"",this.value=e.value||"",this.resetValue=e.resetValue||"",this.uuid=e.uuid||Oe.newGUID(),this.type=e.type||"text",this.locators=e.locators||[]}static getDisplayValueInternal(e,n,s){return e.type==="boolean"?e.value==="KEEFOX_CHECKED_FLAG_TRUE"?Xe("enabled"):Xe("disabled"):e.type==="password"&&!n?s:e.value}static getDisplayValue(e,n){return Fe.getDisplayValueInternal(e,n,"*".repeat(e.value.length))}static getDisplayName(e){return e.name==="KeePass username"?Xe("username"):e.name==="KeePass password"?Xe("password"):e.name?e.name:"[ "+Xe("no_name")+" ]"}static getDisplayTooltip(e,n){return Fe.getDisplayName(e)+": "+Fe.getDisplayValueInternal(e,n,Xe("click_to_reveal_hide"))}static typeFromDOMtype(e){switch(e){case"password":return"password";case"radio":return"existing";case"checkbox":return"boolean";case"select-one":return"existing";default:return"text"}}static combineDomFieldLists(e,n,s){const i=[];return e>=0&&n[e]&&i.push(n[e]),s.forEach(r=>{i.push(r)}),n.forEach((r,o)=>{o!==e&&i.push(r)}),i}static fromDOM(e,n,s){const i=ca(e);return new Fe({uuid:Oe.newGUID(),name:i&&i.length?i[0]:e.name,locators:[new Ui({name:e.name,id:e.id,type:n,labels:i,autocompleteValues:ua(e)})],value:s,type:Fe.typeFromDOMtype(n)})}static fromKPRPCFieldDTO(e){let n="text",s="text";switch(e.type){case xe.password:n="password",s="password";break;case xe.radio:n="existing",s="radio";break;case xe.checkbox:n="boolean",s="checkbox";break;case xe.select:n="existing",s="select";break;case xe.username:n="text",s="text";break;case xe.text:n="text",s="text";break}return new Fe({name:e.displayName||e.name,uuid:Oe.newGUID(),value:e.value,resetValue:e.value,type:n,locators:[new Ui({id:e.id,name:e.name,type:s})]})}static toKPRPCFieldDTO(e,n){let s;switch(e.locators[0].type){case"password":s=xe.password;break;case"radio":s=xe.radio;break;case"checkbox":s=xe.checkbox;break;case"select-one":s=xe.select;break;default:s=n?xe.username:xe.text;break}return{displayName:e.name,id:e.locators[0].id,name:e.locators[0].name,type:s,value:e.value,page:-1}}}function ca(t){var r,o,a,l;const e=[],n=((r=t.labels)==null?void 0:r.length)||0;for(let c=0;c<n;c++){const d=t.labels[c];d!=null&&d.innerText&&e.push(d.innerText)}const s=(o=t.getAttribute("aria-label"))==null?void 0:o.toLowerCase();s&&e.push(s);const i=[];return(a=t.getAttribute("aria-labelledby"))==null||a.trim().split(" ").forEach(c=>{c&&i.push(c)}),(l=t.getAttribute("aria-describedby"))==null||l.trim().split(" ").forEach(c=>{c&&i.push(c)}),i.forEach(c=>{const d=document.getElementById(c);d!=null&&d.innerText&&e.push(d.innerText)}),e.length?e:void 0}function ua(t){var n,s;const e=[];return(s=(n=t.attributes.autocomplete)==null?void 0:n.value)==null||s.trim().split(" ").forEach(i=>{i&&e.push(i.toLowerCase())}),e.length?e:void 0}class vn{constructor(e){this.title=e.title||"",this.uuid=e.uuid||Oe.newGUID(),this.icon=e.icon||{version:1,iconImageData:""},this.path=e.path||"UNKNOWN PATH"}static fromKPRPCGroupSummaryDTO(e){return new vn({title:e.title,uuid:e.uniqueID,icon:{version:1,iconImageData:e.iconImageData},path:e.path})}static fromGroup(e){return new vn({title:e.title,uuid:e.uuid,icon:e.icon,path:e.path})}}class Ye{constructor(e){this.alwaysAutoFill=e.alwaysAutoFill||!1,this.alwaysAutoSubmit=e.alwaysAutoSubmit||!1,this.neverAutoFill=e.neverAutoFill||!1,this.neverAutoSubmit=e.neverAutoSubmit||!1,this.URLs=e.URLs||[],this.fields=e.fields||[],this.httpRealm=e.httpRealm||"",this.parentGroup=e.parentGroup||null,this.uuid=e.uuid||Oe.newGUID(),this.title=e.title||"",this.matchAccuracy=e.matchAccuracy||0,this.icon=e.icon||{version:1,iconImageData:""},this.database=e.database||new As({}),this.relevanceScore=e.relevanceScore,this.lowFieldMatchRatio=e.lowFieldMatchRatio,this.formIndex=e.formIndex,this.entryIndex=e.entryIndex,this.isPreferredMatch=e.isPreferredMatch}static getUsernameField(e){return e.fields.find(n=>n.type==="text")}static getPasswordField(e){return e.fields.find(n=>n.type==="password")}static fromKPRPCEntryDTO(e,n){const s=[];let i=1;const r=e.formFieldList.findIndex(c=>c.type===xe.username),o=e.formFieldList.map(c=>(c.page>i&&(i=c.page),Fe.fromKPRPCFieldDTO(c))),a=o.findIndex(c=>c.type==="password");return r>-1&&s.push(o[r]),a>-1&&s.push(o[a]),o.forEach((c,d)=>{d!==r&&d!==a&&s.push(c)}),new Ye({URLs:e.uRLs,neverAutoFill:e.neverAutoFill,alwaysAutoFill:e.alwaysAutoFill,neverAutoSubmit:e.neverAutoSubmit,alwaysAutoSubmit:e.alwaysAutoSubmit,icon:{version:1,iconImageData:e.iconImageData},parentGroup:vn.fromKPRPCGroupSummaryDTO(e.parent),database:n,matchAccuracy:e.matchAccuracy,httpRealm:e.hTTPRealm,uuid:e.uniqueID,title:e.title,fields:s})}static toKPRPCEntryDTO(e){const n=new la;return n.alwaysAutoFill=e.alwaysAutoFill,n.alwaysAutoSubmit=e.alwaysAutoSubmit,n.formFieldList=e.fields.map((s,i)=>Fe.toKPRPCFieldDTO(s,i===0)),n.hTTPRealm=e.httpRealm,n.iconImageData=e.icon.iconImageData,n.neverAutoFill=e.neverAutoFill,n.neverAutoSubmit=e.neverAutoSubmit,n.title=e.title,n.uRLs=e.URLs,n}}function rt(t,e){const n=Object.create(null),s=t.split(",");for(let i=0;i<s.length;i++)n[s[i]]=!0;return e?i=>!!n[i.toLowerCase()]:i=>!!n[i]}function xs(t){if(G(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],i=fe(s)?ga(s):xs(s);if(i)for(const r in i)e[r]=i[r]}return e}else{if(fe(t))return t;if(oe(t))return t}}const fa=/;(?![^(]*\))/g,da=/:([^]+)/,ha=/\/\*.*?\*\//gs;function ga(t){const e={};return t.replace(ha,"").split(fa).forEach(n=>{if(n){const s=n.split(da);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function _s(t){let e="";if(fe(t))e=t;else if(G(t))for(let n=0;n<t.length;n++){const s=_s(t[n]);s&&(e+=s+" ")}else if(oe(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const ma="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",pa="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistanceLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",ba=rt(ma),wa=rt(pa),ya=rt("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function $i(t){return!!t||t===""}const se=Object.freeze({}),Yt=Object.freeze([]),_e=()=>{},ji=()=>!1,Aa=/^on[^a-z]/,Qt=t=>Aa.test(t),xn=t=>t.startsWith("onUpdate:"),ue=Object.assign,Ps=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},va=Object.prototype.hasOwnProperty,Q=(t,e)=>va.call(t,e),G=Array.isArray,kt=t=>_n(t)==="[object Map]",xa=t=>_n(t)==="[object Set]",q=t=>typeof t=="function",fe=t=>typeof t=="string",Ss=t=>typeof t=="symbol",oe=t=>t!==null&&typeof t=="object",Cs=t=>oe(t)&&q(t.then)&&q(t.catch),_a=Object.prototype.toString,_n=t=>_a.call(t),Fs=t=>_n(t).slice(8,-1),Pa=t=>_n(t)==="[object Object]",Es=t=>fe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Pn=rt(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Sa=rt("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),Sn=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},Ca=/-(\w)/g,Dt=Sn(t=>t.replace(Ca,(e,n)=>n?n.toUpperCase():"")),Fa=/\B([A-Z])/g,ot=Sn(t=>t.replace(Fa,"-$1").toLowerCase()),Cn=Sn(t=>t.charAt(0).toUpperCase()+t.slice(1)),bt=Sn(t=>t?`on${Cn(t)}`:""),Zt=(t,e)=>!Object.is(t,e),en=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},Fn=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},Bi=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Vi;const Ki=()=>Vi||(Vi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function En(t,...e){console.warn(`[Vue warn] ${t}`,...e)}let Ee;class Hi{constructor(e=!1){this.detached=e,this.active=!0,this.effects=[],this.cleanups=[],this.parent=Ee,!e&&Ee&&(this.index=(Ee.scopes||(Ee.scopes=[])).push(this)-1)}run(e){if(this.active){const n=Ee;try{return Ee=this,e()}finally{Ee=n}}else En("cannot run an inactive effect scope.")}on(){Ee=this}off(){Ee=this.parent}stop(e){if(this.active){let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this.active=!1}}}function Wi(t){return new Hi(t)}function Ea(t,e=Ee){e&&e.active&&e.effects.push(t)}function La(){return Ee}function Ra(t){Ee?Ee.cleanups.push(t):En("onScopeDispose() is called when there is no active effect scope to be associated with.")}const Ls=t=>{const e=new Set(t);return e.w=0,e.n=0,e},Gi=t=>(t.w&at)>0,qi=t=>(t.n&at)>0,Ia=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=at},Ta=t=>{const{deps:e}=t;if(e.length){let n=0;for(let s=0;s<e.length;s++){const i=e[s];Gi(i)&&!qi(i)?i.delete(t):e[n++]=i,i.w&=~at,i.n&=~at}e.length=n}},Rs=new WeakMap;let tn=0,at=1;const Is=30;let we;const wt=Symbol("iterate"),Ts=Symbol("Map key iterate");class Os{constructor(e,n=null,s){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,Ea(this,s)}run(){if(!this.active)return this.fn();let e=we,n=lt;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=we,we=this,lt=!0,at=1<<++tn,tn<=Is?Ia(this):zi(this),this.fn()}finally{tn<=Is&&Ta(this),at=1<<--tn,we=this.parent,lt=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){we===this?this.deferStop=!0:this.active&&(zi(this),this.onStop&&this.onStop(),this.active=!1)}}function zi(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let lt=!0;const Ji=[];function yt(){Ji.push(lt),lt=!1}function At(){const t=Ji.pop();lt=t===void 0?!0:t}function Le(t,e,n){if(lt&&we){let s=Rs.get(t);s||Rs.set(t,s=new Map);let i=s.get(n);i||s.set(n,i=Ls()),Xi(i,{effect:we,target:t,type:e,key:n})}}function Xi(t,e){let n=!1;tn<=Is?qi(t)||(t.n|=at,n=!Gi(t)):n=!t.has(we),n&&(t.add(we),we.deps.push(t),we.onTrack&&we.onTrack(Object.assign({effect:we},e)))}function Qe(t,e,n,s,i,r){const o=Rs.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&G(t)){const c=Bi(s);o.forEach((d,f)=>{(f==="length"||f>=c)&&a.push(d)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":G(t)?Es(n)&&a.push(o.get("length")):(a.push(o.get(wt)),kt(t)&&a.push(o.get(Ts)));break;case"delete":G(t)||(a.push(o.get(wt)),kt(t)&&a.push(o.get(Ts)));break;case"set":kt(t)&&a.push(o.get(wt));break}const l={target:t,type:e,key:n,newValue:s,oldValue:i,oldTarget:r};if(a.length===1)a[0]&&Ms(a[0],l);else{const c=[];for(const d of a)d&&c.push(...d);Ms(Ls(c),l)}}function Ms(t,e){const n=G(t)?t:[...t];for(const s of n)s.computed&&Yi(s,e);for(const s of n)s.computed||Yi(s,e)}function Yi(t,e){(t!==we||t.allowRecurse)&&(t.onTrigger&&t.onTrigger(ue({effect:t},e)),t.scheduler?t.scheduler():t.run())}const Oa=rt("__proto__,__v_isRef,__isVue"),Qi=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Ss)),Ma=Ln(),ka=Ln(!1,!0),Da=Ln(!0),Na=Ln(!0,!0),Zi=Ua();function Ua(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const s=z(this);for(let r=0,o=this.length;r<o;r++)Le(s,"get",r+"");const i=s[e](...n);return i===-1||i===!1?s[e](...n.map(z)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){yt();const s=z(this)[e].apply(this,n);return At(),s}}),t}function Ln(t=!1,e=!1){return function(s,i,r){if(i==="__v_isReactive")return!t;if(i==="__v_isReadonly")return t;if(i==="__v_isShallow")return e;if(i==="__v_raw"&&r===(t?e?fr:ur:e?cr:lr).get(s))return s;const o=G(s);if(!t&&o&&Q(Zi,i))return Reflect.get(Zi,i,r);const a=Reflect.get(s,i,r);return(Ss(i)?Qi.has(i):Oa(i))||(t||Le(s,"get",i),e)?a:ae(a)?o&&Es(i)?a:a.value:oe(a)?t?dr(a):Nn(a):a}}const $a=er(),ja=er(!0);function er(t=!1){return function(n,s,i,r){let o=n[s];if(ut(o)&&ae(o)&&!ae(i))return!1;if(!t&&(!$n(i)&&!ut(i)&&(o=z(o),i=z(i)),!G(n)&&ae(o)&&!ae(i)))return o.value=i,!0;const a=G(n)&&Es(s)?Number(s)<n.length:Q(n,s),l=Reflect.set(n,s,i,r);return n===z(r)&&(a?Zt(i,o)&&Qe(n,"set",s,i,o):Qe(n,"add",s,i)),l}}function Ba(t,e){const n=Q(t,e),s=t[e],i=Reflect.deleteProperty(t,e);return i&&n&&Qe(t,"delete",e,void 0,s),i}function Va(t,e){const n=Reflect.has(t,e);return(!Ss(e)||!Qi.has(e))&&Le(t,"has",e),n}function Ka(t){return Le(t,"iterate",G(t)?"length":wt),Reflect.ownKeys(t)}const tr={get:Ma,set:$a,deleteProperty:Ba,has:Va,ownKeys:Ka},nr={get:Da,set(t,e){return En(`Set operation on key "${String(e)}" failed: target is readonly.`,t),!0},deleteProperty(t,e){return En(`Delete operation on key "${String(e)}" failed: target is readonly.`,t),!0}},Ha=ue({},tr,{get:ka,set:ja}),Wa=ue({},nr,{get:Na}),ks=t=>t,Rn=t=>Reflect.getPrototypeOf(t);function In(t,e,n=!1,s=!1){t=t.__v_raw;const i=z(t),r=z(e);n||(e!==r&&Le(i,"get",e),Le(i,"get",r));const{has:o}=Rn(i),a=s?ks:n?Ds:nn;if(o.call(i,e))return a(t.get(e));if(o.call(i,r))return a(t.get(r));t!==i&&t.get(e)}function Tn(t,e=!1){const n=this.__v_raw,s=z(n),i=z(t);return e||(t!==i&&Le(s,"has",t),Le(s,"has",i)),t===i?n.has(t):n.has(t)||n.has(i)}function On(t,e=!1){return t=t.__v_raw,!e&&Le(z(t),"iterate",wt),Reflect.get(t,"size",t)}function sr(t){t=z(t);const e=z(this);return Rn(e).has.call(e,t)||(e.add(t),Qe(e,"add",t,t)),this}function ir(t,e){e=z(e);const n=z(this),{has:s,get:i}=Rn(n);let r=s.call(n,t);r?ar(n,s,t):(t=z(t),r=s.call(n,t));const o=i.call(n,t);return n.set(t,e),r?Zt(e,o)&&Qe(n,"set",t,e,o):Qe(n,"add",t,e),this}function rr(t){const e=z(this),{has:n,get:s}=Rn(e);let i=n.call(e,t);i?ar(e,n,t):(t=z(t),i=n.call(e,t));const r=s?s.call(e,t):void 0,o=e.delete(t);return i&&Qe(e,"delete",t,void 0,r),o}function or(){const t=z(this),e=t.size!==0,n=kt(t)?new Map(t):new Set(t),s=t.clear();return e&&Qe(t,"clear",void 0,void 0,n),s}function Mn(t,e){return function(s,i){const r=this,o=r.__v_raw,a=z(o),l=e?ks:t?Ds:nn;return!t&&Le(a,"iterate",wt),o.forEach((c,d)=>s.call(i,l(c),l(d),r))}}function kn(t,e,n){return function(...s){const i=this.__v_raw,r=z(i),o=kt(r),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=i[t](...s),d=n?ks:e?Ds:nn;return!e&&Le(r,"iterate",l?Ts:wt),{next(){const{value:f,done:g}=c.next();return g?{value:f,done:g}:{value:a?[d(f[0]),d(f[1])]:d(f),done:g}},[Symbol.iterator](){return this}}}}function ct(t){return function(...e){{const n=e[0]?`on key "${e[0]}" `:"";console.warn(`${Cn(t)} operation ${n}failed: target is readonly.`,z(this))}return t==="delete"?!1:this}}function Ga(){const t={get(r){return In(this,r)},get size(){return On(this)},has:Tn,add:sr,set:ir,delete:rr,clear:or,forEach:Mn(!1,!1)},e={get(r){return In(this,r,!1,!0)},get size(){return On(this)},has:Tn,add:sr,set:ir,delete:rr,clear:or,forEach:Mn(!1,!0)},n={get(r){return In(this,r,!0)},get size(){return On(this,!0)},has(r){return Tn.call(this,r,!0)},add:ct("add"),set:ct("set"),delete:ct("delete"),clear:ct("clear"),forEach:Mn(!0,!1)},s={get(r){return In(this,r,!0,!0)},get size(){return On(this,!0)},has(r){return Tn.call(this,r,!0)},add:ct("add"),set:ct("set"),delete:ct("delete"),clear:ct("clear"),forEach:Mn(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{t[r]=kn(r,!1,!1),n[r]=kn(r,!0,!1),e[r]=kn(r,!1,!0),s[r]=kn(r,!0,!0)}),[t,n,e,s]}const[qa,za,Ja,Xa]=Ga();function Dn(t,e){const n=e?t?Xa:Ja:t?za:qa;return(s,i,r)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?s:Reflect.get(Q(n,i)&&i in s?n:s,i,r)}const Ya={get:Dn(!1,!1)},Qa={get:Dn(!1,!0)},Za={get:Dn(!0,!1)},el={get:Dn(!0,!0)};function ar(t,e,n){const s=z(n);if(s!==n&&e.call(t,s)){const i=Fs(t);console.warn(`Reactive ${i} contains both the raw and reactive versions of the same object${i==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}const lr=new WeakMap,cr=new WeakMap,ur=new WeakMap,fr=new WeakMap;function tl(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function nl(t){return t.__v_skip||!Object.isExtensible(t)?0:tl(Fs(t))}function Nn(t){return ut(t)?t:Un(t,!1,tr,Ya,lr)}function sl(t){return Un(t,!1,Ha,Qa,cr)}function dr(t){return Un(t,!0,nr,Za,ur)}function Nt(t){return Un(t,!0,Wa,el,fr)}function Un(t,e,n,s,i){if(!oe(t))return console.warn(`value cannot be made reactive: ${String(t)}`),t;if(t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=i.get(t);if(r)return r;const o=nl(t);if(o===0)return t;const a=new Proxy(t,o===2?s:n);return i.set(t,a),a}function Ke(t){return ut(t)?Ke(t.__v_raw):!!(t&&t.__v_isReactive)}function ut(t){return!!(t&&t.__v_isReadonly)}function $n(t){return!!(t&&t.__v_isShallow)}function jn(t){return Ke(t)||ut(t)}function z(t){const e=t&&t.__v_raw;return e?z(e):t}function Me(t){return Fn(t,"__v_skip",!0),t}const nn=t=>oe(t)?Nn(t):t,Ds=t=>oe(t)?dr(t):t;function hr(t){lt&&we&&(t=z(t),Xi(t.dep||(t.dep=Ls()),{target:t,type:"get",key:"value"}))}function gr(t,e){t=z(t),t.dep&&Ms(t.dep,{target:t,type:"set",key:"value",newValue:e})}function ae(t){return!!(t&&t.__v_isRef===!0)}function Ns(t){return il(t,!1)}function il(t,e){return ae(t)?t:new rl(t,e)}class rl{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:z(e),this._value=n?e:nn(e)}get value(){return hr(this),this._value}set value(e){const n=this.__v_isShallow||$n(e)||ut(e);e=n?e:z(e),Zt(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:nn(e),gr(this,e))}}function mr(t){return ae(t)?t.value:t}const ol={get:(t,e,n)=>mr(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const i=t[e];return ae(i)&&!ae(n)?(i.value=n,!0):Reflect.set(t,e,n,s)}};function pr(t){return Ke(t)?t:new Proxy(t,ol)}function br(t){jn(t)||console.warn("toRefs() expects a reactive object but received a plain one.");const e=G(t)?new Array(t.length):{};for(const n in t)e[n]=Bn(t,n);return e}class al{constructor(e,n,s){this._object=e,this._key=n,this._defaultValue=s,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}}function Bn(t,e,n){const s=t[e];return ae(s)?s:new al(t,e,n)}var wr;class ll{constructor(e,n,s,i){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[wr]=!1,this._dirty=!0,this.effect=new Os(e,()=>{this._dirty||(this._dirty=!0,gr(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=s}get value(){const e=z(this);return hr(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}wr="__v_isReadonly";function cl(t,e,n=!1){let s,i;const r=q(t);r?(s=t,i=()=>{console.warn("Write operation failed: computed value is readonly")}):(s=t.get,i=t.set);const o=new ll(s,i,r||!i,n);return e&&!n&&(o.effect.onTrack=e.onTrack,o.effect.onTrigger=e.onTrigger),o}const vt=[];function Vn(t){vt.push(t)}function Kn(){vt.pop()}function C(t,...e){yt();const n=vt.length?vt[vt.length-1].component:null,s=n&&n.appContext.config.warnHandler,i=ul();if(s)Ze(s,n,11,[t+e.join(""),n&&n.proxy,i.map(({vnode:r})=>`at <${is(n,r.type)}>`).join(`
`),i]);else{const r=[`[Vue warn]: ${t}`,...e];i.length&&r.push(`
`,...fl(i)),console.warn(...r)}At()}function ul(){let t=vt[vt.length-1];if(!t)return[];const e=[];for(;t;){const n=e[0];n&&n.vnode===t?n.recurseCount++:e.push({vnode:t,recurseCount:0});const s=t.component&&t.component.parent;t=s&&s.vnode}return e}function fl(t){const e=[];return t.forEach((n,s)=>{e.push(...s===0?[]:[`
`],...dl(n))}),e}function dl({vnode:t,recurseCount:e}){const n=e>0?`... (${e} recursive calls)`:"",s=t.component?t.component.parent==null:!1,i=` at <${is(t.component,t.type,s)}`,r=">"+n;return t.props?[i,...hl(t.props),r]:[i+r]}function hl(t){const e=[],n=Object.keys(t);return n.slice(0,3).forEach(s=>{e.push(...yr(s,t[s]))}),n.length>3&&e.push(" ..."),e}function yr(t,e,n){return fe(e)?(e=JSON.stringify(e),n?e:[`${t}=${e}`]):typeof e=="number"||typeof e=="boolean"||e==null?n?e:[`${t}=${e}`]:ae(e)?(e=yr(t,z(e.value),!0),n?e:[`${t}=Ref<`,e,">"]):q(e)?[`${t}=fn${e.name?`<${e.name}>`:""}`]:(e=z(e),n?e:[`${t}=`,e])}const Us={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",[0]:"setup function",[1]:"render function",[2]:"watcher getter",[3]:"watcher callback",[4]:"watcher cleanup function",[5]:"native event handler",[6]:"component event handler",[7]:"vnode hook",[8]:"directive hook",[9]:"transition hook",[10]:"app errorHandler",[11]:"app warnHandler",[12]:"ref function",[13]:"async component loader",[14]:"scheduler flush. This is likely a Vue internals bug. Please open an issue at https://new-issue.vuejs.org/?repo=vuejs/core"};function Ze(t,e,n,s){let i;try{i=s?t(...s):t()}catch(r){Hn(r,e,n)}return i}function ke(t,e,n,s){if(q(t)){const r=Ze(t,e,n,s);return r&&Cs(r)&&r.catch(o=>{Hn(o,e,n)}),r}const i=[];for(let r=0;r<t.length;r++)i.push(ke(t[r],e,n,s));return i}function Hn(t,e,n,s=!0){const i=e?e.vnode:null;if(e){let r=e.parent;const o=e.proxy,a=Us[n];for(;r;){const c=r.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](t,o,a)===!1)return}r=r.parent}const l=e.appContext.config.errorHandler;if(l){Ze(l,null,10,[t,o,a]);return}}gl(t,n,i,s)}function gl(t,e,n,s=!0){{const i=Us[e];if(n&&Vn(n),C(`Unhandled error${i?` during execution of ${i}`:""}`),n&&Kn(),s)throw t;console.error(t)}}let sn=!1,$s=!1;const pe=[];let He=0;const Ut=[];let We=null,ft=0;const Ar=Promise.resolve();let js=null;const ml=100;function Bs(t){const e=js||Ar;return t?e.then(this?t.bind(this):t):e}function pl(t){let e=He+1,n=pe.length;for(;e<n;){const s=e+n>>>1;rn(pe[s])<t?e=s+1:n=s}return e}function Wn(t){(!pe.length||!pe.includes(t,sn&&t.allowRecurse?He+1:He))&&(t.id==null?pe.push(t):pe.splice(pl(t.id),0,t),vr())}function vr(){!sn&&!$s&&($s=!0,js=Ar.then(Sr))}function bl(t){const e=pe.indexOf(t);e>He&&pe.splice(e,1)}function xr(t){G(t)?Ut.push(...t):(!We||!We.includes(t,t.allowRecurse?ft+1:ft))&&Ut.push(t),vr()}function _r(t,e=sn?He+1:0){for(t=t||new Map;e<pe.length;e++){const n=pe[e];if(n&&n.pre){if(Vs(t,n))continue;pe.splice(e,1),e--,n()}}}function Pr(t){if(Ut.length){const e=[...new Set(Ut)];if(Ut.length=0,We){We.push(...e);return}for(We=e,t=t||new Map,We.sort((n,s)=>rn(n)-rn(s)),ft=0;ft<We.length;ft++)Vs(t,We[ft])||We[ft]();We=null,ft=0}}const rn=t=>t.id==null?1/0:t.id,wl=(t,e)=>{const n=rn(t)-rn(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function Sr(t){$s=!1,sn=!0,t=t||new Map,pe.sort(wl);const e=n=>Vs(t,n);try{for(He=0;He<pe.length;He++){const n=pe[He];if(n&&n.active!==!1){if(e(n))continue;Ze(n,null,14)}}}finally{He=0,pe.length=0,Pr(t),sn=!1,js=null,(pe.length||Ut.length)&&Sr(t)}}function Vs(t,e){if(!t.has(e))t.set(e,1);else{const n=t.get(e);if(n>ml){const s=e.ownerInstance,i=s&&co(s.type);return C(`Maximum recursive updates exceeded${i?` in component <${i}>`:""}. This means you have a reactive effect that is mutating its own dependencies and thus recursively triggering itself. Possible sources include component template, render function, updated hook or watcher source function.`),!0}else t.set(e,n+1)}}let xt=!1;const $t=new Set;Ki().__VUE_HMR_RUNTIME__={createRecord:Ks(Cr),rerender:Ks(vl),reload:Ks(xl)};const _t=new Map;function yl(t){const e=t.type.__hmrId;let n=_t.get(e);n||(Cr(e,t.type),n=_t.get(e)),n.instances.add(t)}function Al(t){_t.get(t.type.__hmrId).instances.delete(t)}function Cr(t,e){return _t.has(t)?!1:(_t.set(t,{initialDef:on(e),instances:new Set}),!0)}function on(t){return uo(t)?t.__vccOpts:t}function vl(t,e){const n=_t.get(t);n&&(n.initialDef.render=e,[...n.instances].forEach(s=>{e&&(s.render=e,on(s.type).render=e),s.renderCache=[],xt=!0,s.update(),xt=!1}))}function xl(t,e){const n=_t.get(t);if(!n)return;e=on(e),Fr(n.initialDef,e);const s=[...n.instances];for(const i of s){const r=on(i.type);$t.has(r)||(r!==n.initialDef&&Fr(r,e),$t.add(r)),i.appContext.optionsCache.delete(i.type),i.ceReload?($t.add(r),i.ceReload(e.styles),$t.delete(r)):i.parent?Wn(i.parent.update):i.appContext.reload?i.appContext.reload():typeof window<"u"?window.location.reload():console.warn("[HMR] Root or manually mounted instance modified. Full reload required.")}xr(()=>{for(const i of s)$t.delete(on(i.type))})}function Fr(t,e){ue(t,e);for(const n in t)n!=="__file"&&!(n in e)&&delete t[n]}function Ks(t){return(e,n)=>{try{return t(e,n)}catch(s){console.error(s),console.warn("[HMR] Something went wrong during Vue component hot-reload. Full reload required.")}}}let Ge,an=[],Hs=!1;function ln(t,...e){Ge?Ge.emit(t,...e):Hs||an.push({event:t,args:e})}function Er(t,e){var n,s;Ge=t,Ge?(Ge.enabled=!0,an.forEach(({event:i,args:r})=>Ge.emit(i,...r)),an=[]):typeof window<"u"&&window.HTMLElement&&!(!((s=(n=window.navigator)===null||n===void 0?void 0:n.userAgent)===null||s===void 0)&&s.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(r=>{Er(r,e)}),setTimeout(()=>{Ge||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,Hs=!0,an=[])},3e3)):(Hs=!0,an=[])}function _l(t,e){ln("app:init",t,e,{Fragment:qe,Text:dn,Comment:De,Static:ts})}function Pl(t){ln("app:unmount",t)}const Sl=Ws("component:added"),Lr=Ws("component:updated"),Cl=Ws("component:removed"),Fl=t=>{Ge&&typeof Ge.cleanupBuffer=="function"&&!Ge.cleanupBuffer(t)&&Cl(t)};function Ws(t){return e=>{ln(t,e.appContext.app,e.uid,e.parent?e.parent.uid:void 0,e)}}const El=Rr("perf:start"),Ll=Rr("perf:end");function Rr(t){return(e,n,s)=>{ln(t,e.appContext.app,e.uid,e,n,s)}}function Rl(t,e,n){ln("component:emit",t.appContext.app,t,e,n)}function Il(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||se;{const{emitsOptions:d,propsOptions:[f]}=t;if(d)if(!(e in d))(!f||!(bt(e)in f))&&C(`Component emitted event "${e}" but it is neither declared in the emits option nor as an "${bt(e)}" prop.`);else{const g=d[e];q(g)&&(g(...n)||C(`Invalid event arguments: event validation failed for event "${e}".`))}}let i=n;const r=e.startsWith("update:"),o=r&&e.slice(7);if(o&&o in s){const d=`${o==="modelValue"?"model":o}Modifiers`,{number:f,trim:g}=s[d]||se;g&&(i=n.map(w=>fe(w)?w.trim():w)),f&&(i=n.map(Bi))}Rl(t,e,i);{const d=e.toLowerCase();d!==e&&s[bt(d)]&&C(`Event "${d}" is emitted in component ${is(t,t.type)} but the handler is registered for "${e}". Note that HTML attributes are case-insensitive and you cannot use v-on to listen to camelCase events when using in-DOM templates. You should probably use "${ot(e)}" instead of "${e}".`)}let a,l=s[a=bt(e)]||s[a=bt(Dt(e))];!l&&r&&(l=s[a=bt(ot(e))]),l&&ke(l,t,6,i);const c=s[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,ke(c,t,6,i)}}function Ir(t,e,n=!1){const s=e.emitsCache,i=s.get(t);if(i!==void 0)return i;const r=t.emits;let o={},a=!1;if(!q(t)){const l=c=>{const d=Ir(c,e,!0);d&&(a=!0,ue(o,d))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!r&&!a?(oe(t)&&s.set(t,null),null):(G(r)?r.forEach(l=>o[l]=null):ue(o,r),oe(t)&&s.set(t,o),o)}function Gn(t,e){return!t||!Qt(e)?!1:(e=e.slice(2).replace(/Once$/,""),Q(t,e[0].toLowerCase()+e.slice(1))||Q(t,ot(e))||Q(t,e))}let Re=null,Tr=null;function qn(t){const e=Re;return Re=t,Tr=t&&t.type.__scopeId||null,e}function Tl(t,e=Re,n){if(!e||t._n)return t;const s=(...i)=>{s._d&&so(-1);const r=qn(e);let o;try{o=t(...i)}finally{qn(r),s._d&&so(1)}return Lr(e),o};return s._n=!0,s._c=!0,s._d=!0,s}let Gs=!1;function zn(){Gs=!0}function qs(t){const{type:e,vnode:n,proxy:s,withProxy:i,props:r,propsOptions:[o],slots:a,attrs:l,emit:c,render:d,renderCache:f,data:g,setupState:w,ctx:I,inheritAttrs:v}=t;let T,$;const K=qn(t);Gs=!1;try{if(n.shapeFlag&4){const Y=i||s;T=Ne(d.call(Y,Y,f,r,w,g,I)),$=l}else{const Y=e;l===r&&zn(),T=Ne(Y.length>1?Y(r,{get attrs(){return zn(),l},slots:a,emit:c}):Y(r,null)),$=e.props?l:Ml(l)}}catch(Y){Hn(Y,t,1),T=Et(De)}let W=T,k;if(T.patchFlag>0&&T.patchFlag&2048&&([W,k]=Ol(T)),$&&v!==!1){const Y=Object.keys($),{shapeFlag:re}=W;if(Y.length){if(re&7)o&&Y.some(xn)&&($=kl($,o)),W=ht(W,$);else if(!Gs&&W.type!==De){const N=Object.keys(l),L=[],m=[];for(let y=0,p=N.length;y<p;y++){const E=N[y];Qt(E)?xn(E)||L.push(E[2].toLowerCase()+E.slice(3)):m.push(E)}m.length&&C(`Extraneous non-props attributes (${m.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text root nodes.`),L.length&&C(`Extraneous non-emits event listeners (${L.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text root nodes. If the listener is intended to be a component custom event listener only, declare it using the "emits" option.`)}}}return n.dirs&&(Mr(W)||C("Runtime directive used on component with non-element root node. The directives will not function as intended."),W=ht(W),W.dirs=W.dirs?W.dirs.concat(n.dirs):n.dirs),n.transition&&(Mr(W)||C("Component inside <Transition> renders non-element root node that cannot be animated."),W.transition=n.transition),k?k(W):T=W,qn(K),T}const Ol=t=>{const e=t.children,n=t.dynamicChildren,s=Or(e);if(!s)return[t,void 0];const i=e.indexOf(s),r=n?n.indexOf(s):-1,o=a=>{e[i]=a,n&&(r>-1?n[r]=a:a.patchFlag>0&&(t.dynamicChildren=[...n,a]))};return[Ne(s),o]};function Or(t){let e;for(let n=0;n<t.length;n++){const s=t[n];if(oi(s)){if(s.type!==De||s.children==="v-if"){if(e)return;e=s}}else return}return e}const Ml=t=>{let e;for(const n in t)(n==="class"||n==="style"||Qt(n))&&((e||(e={}))[n]=t[n]);return e},kl=(t,e)=>{const n={};for(const s in t)(!xn(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n},Mr=t=>t.shapeFlag&7||t.type===De;function Dl(t,e,n){const{props:s,children:i,component:r}=t,{props:o,children:a,patchFlag:l}=e,c=r.emitsOptions;if((i||a)&&xt||e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?kr(s,o,c):!!o;if(l&8){const d=e.dynamicProps;for(let f=0;f<d.length;f++){const g=d[f];if(o[g]!==s[g]&&!Gn(c,g))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?kr(s,o,c):!0:!!o;return!1}function kr(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let i=0;i<s.length;i++){const r=s[i];if(e[r]!==t[r]&&!Gn(n,r))return!0}return!1}function Nl({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const Ul=t=>t.__isSuspense;function $l(t,e){e&&e.pendingBranch?G(t)?e.effects.push(...t):e.effects.push(t):xr(t)}function jl(t,e){if(!he)C("provide() can only be used inside setup().");else{let n=he.provides;const s=he.parent&&he.parent.provides;s===n&&(n=he.provides=Object.create(s)),n[t]=e}}function cn(t,e,n=!1){const s=he||Re;if(s){const i=s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&q(e)?e.call(s.proxy):e;C(`injection "${String(t)}" not found.`)}else C("inject() can only be used inside setup() or functional components.")}const Jn={};function un(t,e,n){return q(e)||C("`watch(fn, options?)` signature has been moved to a separate API. Use `watchEffect(fn, options?)` instead. `watch` now only supports `watch(source, cb, options?) signature."),Dr(t,e,n)}function Dr(t,e,{immediate:n,deep:s,flush:i,onTrack:r,onTrigger:o}=se){e||(n!==void 0&&C('watch() "immediate" option is only respected when using the watch(source, callback, options?) signature.'),s!==void 0&&C('watch() "deep" option is only respected when using the watch(source, callback, options?) signature.'));const a=k=>{C("Invalid watch source: ",k,"A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.")},l=he;let c,d=!1,f=!1;if(ae(t)?(c=()=>t.value,d=$n(t)):Ke(t)?(c=()=>t,s=!0):G(t)?(f=!0,d=t.some(k=>Ke(k)||$n(k)),c=()=>t.map(k=>{if(ae(k))return k.value;if(Ke(k))return jt(k);if(q(k))return Ze(k,l,2);a(k)})):q(t)?e?c=()=>Ze(t,l,2):c=()=>{if(!(l&&l.isUnmounted))return g&&g(),ke(t,l,3,[w])}:(c=_e,a(t)),e&&s){const k=c;c=()=>jt(k())}let g,w=k=>{g=K.onStop=()=>{Ze(k,l,4)}},I;if(gn)if(w=_e,e?n&&ke(e,l,3,[c(),f?[]:void 0,w]):c(),i==="sync"){const k=zc();I=k.__watcherHandles||(k.__watcherHandles=[])}else return _e;let v=f?new Array(t.length).fill(Jn):Jn;const T=()=>{if(K.active)if(e){const k=K.run();(s||d||(f?k.some((Y,re)=>Zt(Y,v[re])):Zt(k,v)))&&(g&&g(),ke(e,l,3,[k,v===Jn?void 0:f&&v[0]===Jn?[]:v,w]),v=k)}else K.run()};T.allowRecurse=!!e;let $;i==="sync"?$=T:i==="post"?$=()=>Pe(T,l&&l.suspense):(T.pre=!0,l&&(T.id=l.uid),$=()=>Wn(T));const K=new Os(c,$);K.onTrack=r,K.onTrigger=o,e?n?T():v=K.run():i==="post"?Pe(K.run.bind(K),l&&l.suspense):K.run();const W=()=>{K.stop(),l&&l.scope&&Ps(l.scope.effects,K)};return I&&I.push(W),W}function Bl(t,e,n){const s=this.proxy,i=fe(t)?t.includes(".")?Nr(s,t):()=>s[t]:t.bind(s,s);let r;q(e)?r=e:(r=e.handler,n=e);const o=he;Vt(this);const a=Dr(i,r.bind(s),n);return o?Vt(o):Lt(),a}function Nr(t,e){const n=e.split(".");return()=>{let s=t;for(let i=0;i<n.length&&s;i++)s=s[n[i]];return s}}function jt(t,e){if(!oe(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),ae(t))jt(t.value,e);else if(G(t))for(let n=0;n<t.length;n++)jt(t[n],e);else if(xa(t)||kt(t))t.forEach(n=>{jt(n,e)});else if(Pa(t))for(const n in t)jt(t[n],e);return t}function Vl(t){return q(t)?{setup:t,name:t.name}:t}const Xn=t=>!!t.type.__asyncLoader,zs=t=>t.type.__isKeepAlive;function Kl(t,e){Ur(t,"a",e)}function Hl(t,e){Ur(t,"da",e)}function Ur(t,e,n=he){const s=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Yn(e,s,n),n){let i=n.parent;for(;i&&i.parent;)zs(i.parent.vnode)&&Wl(s,e,n,i),i=i.parent}}function Wl(t,e,n,s){const i=Yn(e,t,s,!0);$r(()=>{Ps(s[e],i)},n)}function Yn(t,e,n=he,s=!1){if(n){const i=n[t]||(n[t]=[]),r=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;yt(),Vt(n);const a=ke(e,n,t,o);return Lt(),At(),a});return s?i.unshift(r):i.push(r),r}else{const i=bt(Us[t].replace(/ hook$/,""));C(`${i} is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.`)}}const et=t=>(e,n=he)=>(!gn||t==="sp")&&Yn(t,(...s)=>e(...s),n),Gl=et("bm"),ql=et("m"),zl=et("bu"),Jl=et("u"),Xl=et("bum"),$r=et("um"),Yl=et("sp"),Ql=et("rtg"),Zl=et("rtc");function ec(t,e=he){Yn("ec",t,e)}function jr(t){Sa(t)&&C("Do not use built-in directive ids as custom directive id: "+t)}function Pt(t,e,n,s){const i=t.dirs,r=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];r&&(a.oldValue=r[o].value);let l=a.dir[s];l&&(yt(),ke(l,n,8,[t.el,a,t,e]),At())}}const tc=Symbol(),Js=t=>t?oo(t)?ui(t)||t.proxy:Js(t.parent):null,St=ue(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>Nt(t.props),$attrs:t=>Nt(t.attrs),$slots:t=>Nt(t.slots),$refs:t=>Nt(t.refs),$parent:t=>Js(t.parent),$root:t=>Js(t.root),$emit:t=>t.emit,$options:t=>Zs(t),$forceUpdate:t=>t.f||(t.f=()=>Wn(t.update)),$nextTick:t=>t.n||(t.n=Bs.bind(t.proxy)),$watch:t=>Bl.bind(t)}),Xs=t=>t==="_"||t==="$",Ys=(t,e)=>t!==se&&!t.__isScriptSetup&&Q(t,e),Br={get({_:t},e){const{ctx:n,setupState:s,data:i,props:r,accessCache:o,type:a,appContext:l}=t;if(e==="__isVue")return!0;let c;if(e[0]!=="$"){const w=o[e];if(w!==void 0)switch(w){case 1:return s[e];case 2:return i[e];case 4:return n[e];case 3:return r[e]}else{if(Ys(s,e))return o[e]=1,s[e];if(i!==se&&Q(i,e))return o[e]=2,i[e];if((c=t.propsOptions[0])&&Q(c,e))return o[e]=3,r[e];if(n!==se&&Q(n,e))return o[e]=4,n[e];Qs&&(o[e]=0)}}const d=St[e];let f,g;if(d)return e==="$attrs"&&(Le(t,"get",e),zn()),d(t);if((f=a.__cssModules)&&(f=f[e]))return f;if(n!==se&&Q(n,e))return o[e]=4,n[e];if(g=l.config.globalProperties,Q(g,e))return g[e];Re&&(!fe(e)||e.indexOf("__v")!==0)&&(i!==se&&Xs(e[0])&&Q(i,e)?C(`Property ${JSON.stringify(e)} must be accessed via $data because it starts with a reserved character ("$" or "_") and is not proxied on the render context.`):t===Re&&C(`Property ${JSON.stringify(e)} was accessed during render but is not defined on instance.`))},set({_:t},e,n){const{data:s,setupState:i,ctx:r}=t;return Ys(i,e)?(i[e]=n,!0):i.__isScriptSetup&&Q(i,e)?(C(`Cannot mutate <script setup> binding "${e}" from Options API.`),!1):s!==se&&Q(s,e)?(s[e]=n,!0):Q(t.props,e)?(C(`Attempting to mutate prop "${e}". Props are readonly.`),!1):e[0]==="$"&&e.slice(1)in t?(C(`Attempting to mutate public property "${e}". Properties starting with $ are reserved and readonly.`),!1):(e in t.appContext.config.globalProperties?Object.defineProperty(r,e,{enumerable:!0,configurable:!0,value:n}):r[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:i,propsOptions:r}},o){let a;return!!n[o]||t!==se&&Q(t,o)||Ys(e,o)||(a=r[0])&&Q(a,o)||Q(s,o)||Q(St,o)||Q(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Q(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};Br.ownKeys=t=>(C("Avoid app logic that relies on enumerating keys on a component instance. The keys will be empty in production mode to avoid performance overhead."),Reflect.ownKeys(t));function nc(t){const e={};return Object.defineProperty(e,"_",{configurable:!0,enumerable:!1,get:()=>t}),Object.keys(St).forEach(n=>{Object.defineProperty(e,n,{configurable:!0,enumerable:!1,get:()=>St[n](t),set:_e})}),e}function sc(t){const{ctx:e,propsOptions:[n]}=t;n&&Object.keys(n).forEach(s=>{Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>t.props[s],set:_e})})}function ic(t){const{ctx:e,setupState:n}=t;Object.keys(z(n)).forEach(s=>{if(!n.__isScriptSetup){if(Xs(s[0])){C(`setup() return property ${JSON.stringify(s)} should not start with "$" or "_" which are reserved prefixes for Vue internals.`);return}Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>n[s],set:_e})}})}function rc(){const t=Object.create(null);return(e,n)=>{t[n]?C(`${e} property "${n}" is already defined in ${t[n]}.`):t[n]=e}}let Qs=!0;function oc(t){const e=Zs(t),n=t.proxy,s=t.ctx;Qs=!1,e.beforeCreate&&Vr(e.beforeCreate,t,"bc");const{data:i,computed:r,methods:o,watch:a,provide:l,inject:c,created:d,beforeMount:f,mounted:g,beforeUpdate:w,updated:I,activated:v,deactivated:T,beforeDestroy:$,beforeUnmount:K,destroyed:W,unmounted:k,render:Y,renderTracked:re,renderTriggered:N,errorCaptured:L,serverPrefetch:m,expose:y,inheritAttrs:p,components:E,directives:H,filters:le}=e,j=rc();{const[O]=t.propsOptions;if(O)for(const X in O)j("Props",X)}if(c&&ac(c,s,j,t.appContext.config.unwrapInjectedRef),o)for(const O in o){const X=o[O];q(X)?(Object.defineProperty(s,O,{value:X.bind(n),configurable:!0,enumerable:!0,writable:!0}),j("Methods",O)):C(`Method "${O}" has type "${typeof X}" in the component definition. Did you reference the function correctly?`)}if(i){q(i)||C("The data option must be a function. Plain object usage is no longer supported.");const O=i.call(n,n);if(Cs(O)&&C("data() returned a Promise - note data() cannot be async; If you intend to perform data fetching before component renders, use async setup() + <Suspense>."),!oe(O))C("data() should return an object.");else{t.data=Nn(O);for(const X in O)j("Data",X),Xs(X[0])||Object.defineProperty(s,X,{configurable:!0,enumerable:!0,get:()=>O[X],set:_e})}}if(Qs=!0,r)for(const O in r){const X=r[O],V=q(X)?X.bind(n,n):q(X.get)?X.get.bind(n,n):_e;V===_e&&C(`Computed property "${O}" has no getter.`);const te=!q(X)&&q(X.set)?X.set.bind(n):()=>{C(`Write operation failed: computed property "${O}" is readonly.`)},Ae=fi({get:V,set:te});Object.defineProperty(s,O,{enumerable:!0,configurable:!0,get:()=>Ae.value,set:Gt=>Ae.value=Gt}),j("Computed",O)}if(a)for(const O in a)Kr(a[O],s,n,O);if(l){const O=q(l)?l.call(n):l;Reflect.ownKeys(O).forEach(X=>{jl(X,O[X])})}d&&Vr(d,t,"c");function Z(O,X){G(X)?X.forEach(V=>O(V.bind(n))):X&&O(X.bind(n))}if(Z(Gl,f),Z(ql,g),Z(zl,w),Z(Jl,I),Z(Kl,v),Z(Hl,T),Z(ec,L),Z(Zl,re),Z(Ql,N),Z(Xl,K),Z($r,k),Z(Yl,m),G(y))if(y.length){const O=t.exposed||(t.exposed={});y.forEach(X=>{Object.defineProperty(O,X,{get:()=>n[X],set:V=>n[X]=V})})}else t.exposed||(t.exposed={});Y&&t.render===_e&&(t.render=Y),p!=null&&(t.inheritAttrs=p),E&&(t.components=E),H&&(t.directives=H)}function ac(t,e,n=_e,s=!1){G(t)&&(t=ei(t));for(const i in t){const r=t[i];let o;oe(r)?"default"in r?o=cn(r.from||i,r.default,!0):o=cn(r.from||i):o=cn(r),ae(o)?s?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):(C(`injected property "${i}" is a ref and will be auto-unwrapped and no longer needs \`.value\` in the next minor release. To opt-in to the new behavior now, set \`app.config.unwrapInjectedRef = true\` (this config is temporary and will not be needed in the future.)`),e[i]=o):e[i]=o,n("Inject",i)}}function Vr(t,e,n){ke(G(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function Kr(t,e,n,s){const i=s.includes(".")?Nr(n,s):()=>n[s];if(fe(t)){const r=e[t];q(r)?un(i,r):C(`Invalid watch handler specified by key "${t}"`,r)}else if(q(t))un(i,t.bind(n));else if(oe(t))if(G(t))t.forEach(r=>Kr(r,e,n,s));else{const r=q(t.handler)?t.handler.bind(n):e[t.handler];q(r)?un(i,r,t):C(`Invalid watch handler specified by key "${t.handler}"`,r)}else C(`Invalid watch option: "${s}"`,t)}function Zs(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=t.appContext,a=r.get(e);let l;return a?l=a:!i.length&&!n&&!s?l=e:(l={},i.length&&i.forEach(c=>Qn(l,c,o,!0)),Qn(l,e,o)),oe(e)&&r.set(e,l),l}function Qn(t,e,n,s=!1){const{mixins:i,extends:r}=e;r&&Qn(t,r,n,!0),i&&i.forEach(o=>Qn(t,o,n,!0));for(const o in e)if(s&&o==="expose")C('"expose" option is ignored when declared in mixins or extends. It should only be declared in the base component itself.');else{const a=lc[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const lc={data:Hr,props:Ct,emits:Ct,methods:Ct,computed:Ct,beforeCreate:ye,created:ye,beforeMount:ye,mounted:ye,beforeUpdate:ye,updated:ye,beforeDestroy:ye,beforeUnmount:ye,destroyed:ye,unmounted:ye,activated:ye,deactivated:ye,errorCaptured:ye,serverPrefetch:ye,components:Ct,directives:Ct,watch:uc,provide:Hr,inject:cc};function Hr(t,e){return e?t?function(){return ue(q(t)?t.call(this,this):t,q(e)?e.call(this,this):e)}:e:t}function cc(t,e){return Ct(ei(t),ei(e))}function ei(t){if(G(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function ye(t,e){return t?[...new Set([].concat(t,e))]:e}function Ct(t,e){return t?ue(ue(Object.create(null),t),e):e}function uc(t,e){if(!t)return e;if(!e)return t;const n=ue(Object.create(null),t);for(const s in e)n[s]=ye(t[s],e[s]);return n}function fc(t,e,n,s=!1){const i={},r={};Fn(r,ns,1),t.propsDefaults=Object.create(null),Wr(t,e,i,r);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);Xr(e||{},i,t),n?t.props=s?i:sl(i):t.type.props?t.props=i:t.props=r,t.attrs=r}function dc(t){for(;t;){if(t.type.__hmrId)return!0;t=t.parent}}function hc(t,e,n,s){const{props:i,attrs:r,vnode:{patchFlag:o}}=t,a=z(i),[l]=t.propsOptions;let c=!1;if(!dc(t)&&(s||o>0)&&!(o&16)){if(o&8){const d=t.vnode.dynamicProps;for(let f=0;f<d.length;f++){let g=d[f];if(Gn(t.emitsOptions,g))continue;const w=e[g];if(l)if(Q(r,g))w!==r[g]&&(r[g]=w,c=!0);else{const I=Dt(g);i[I]=ti(l,a,I,w,t,!1)}else w!==r[g]&&(r[g]=w,c=!0)}}}else{Wr(t,e,i,r)&&(c=!0);let d;for(const f in a)(!e||!Q(e,f)&&((d=ot(f))===f||!Q(e,d)))&&(l?n&&(n[f]!==void 0||n[d]!==void 0)&&(i[f]=ti(l,a,f,void 0,t,!0)):delete i[f]);if(r!==a)for(const f in r)(!e||!Q(e,f))&&(delete r[f],c=!0)}c&&Qe(t,"set","$attrs"),Xr(e||{},i,t)}function Wr(t,e,n,s){const[i,r]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(Pn(l))continue;const c=e[l];let d;i&&Q(i,d=Dt(l))?!r||!r.includes(d)?n[d]=c:(a||(a={}))[d]=c:Gn(t.emitsOptions,l)||(!(l in s)||c!==s[l])&&(s[l]=c,o=!0)}if(r){const l=z(n),c=a||se;for(let d=0;d<r.length;d++){const f=r[d];n[f]=ti(i,l,f,c[f],t,!Q(c,f))}}return o}function ti(t,e,n,s,i,r){const o=t[n];if(o!=null){const a=Q(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&q(l)){const{propsDefaults:c}=i;n in c?s=c[n]:(Vt(i),s=c[n]=l.call(null,e),Lt())}else s=l}o[0]&&(r&&!a?s=!1:o[1]&&(s===""||s===ot(n))&&(s=!0))}return s}function Gr(t,e,n=!1){const s=e.propsCache,i=s.get(t);if(i)return i;const r=t.props,o={},a=[];let l=!1;if(!q(t)){const d=f=>{l=!0;const[g,w]=Gr(f,e,!0);ue(o,g),w&&a.push(...w)};!n&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!r&&!l)return oe(t)&&s.set(t,Yt),Yt;if(G(r))for(let d=0;d<r.length;d++){fe(r[d])||C("props must be strings when using array syntax.",r[d]);const f=Dt(r[d]);qr(f)&&(o[f]=se)}else if(r){oe(r)||C("invalid props options",r);for(const d in r){const f=Dt(d);if(qr(f)){const g=r[d],w=o[f]=G(g)||q(g)?{type:g}:Object.assign({},g);if(w){const I=Jr(Boolean,w.type),v=Jr(String,w.type);w[0]=I>-1,w[1]=v<0||I<v,(I>-1||Q(w,"default"))&&a.push(f)}}}}const c=[o,a];return oe(t)&&s.set(t,c),c}function qr(t){return t[0]!=="$"?!0:(C(`Invalid prop name: "${t}" is a reserved property.`),!1)}function ni(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function zr(t,e){return ni(t)===ni(e)}function Jr(t,e){return G(e)?e.findIndex(n=>zr(n,t)):q(e)&&zr(e,t)?0:-1}function Xr(t,e,n){const s=z(e),i=n.propsOptions[0];for(const r in i){let o=i[r];o!=null&&gc(r,s[r],o,!Q(t,r)&&!Q(t,ot(r)))}}function gc(t,e,n,s){const{type:i,required:r,validator:o}=n;if(r&&s){C('Missing required prop: "'+t+'"');return}if(!(e==null&&!n.required)){if(i!=null&&i!==!0){let a=!1;const l=G(i)?i:[i],c=[];for(let d=0;d<l.length&&!a;d++){const{valid:f,expectedType:g}=pc(e,l[d]);c.push(g||""),a=f}if(!a){C(bc(t,e,c));return}}o&&!o(e)&&C('Invalid prop: custom validator check failed for prop "'+t+'".')}}const mc=rt("String,Number,Boolean,Function,Symbol,BigInt");function pc(t,e){let n;const s=ni(e);if(mc(s)){const i=typeof t;n=i===s.toLowerCase(),!n&&i==="object"&&(n=t instanceof e)}else s==="Object"?n=oe(t):s==="Array"?n=G(t):s==="null"?n=t===null:n=t instanceof e;return{valid:n,expectedType:s}}function bc(t,e,n){let s=`Invalid prop: type check failed for prop "${t}". Expected ${n.map(Cn).join(" | ")}`;const i=n[0],r=Fs(e),o=Yr(e,i),a=Yr(e,r);return n.length===1&&Qr(i)&&!wc(i,r)&&(s+=` with value ${o}`),s+=`, got ${r} `,Qr(r)&&(s+=`with value ${a}.`),s}function Yr(t,e){return e==="String"?`"${t}"`:e==="Number"?`${Number(t)}`:`${t}`}function Qr(t){return["string","number","boolean"].some(n=>t.toLowerCase()===n)}function wc(...t){return t.some(e=>e.toLowerCase()==="boolean")}const Zr=t=>t[0]==="_"||t==="$stable",si=t=>G(t)?t.map(Ne):[Ne(t)],yc=(t,e,n)=>{if(e._n)return e;const s=Tl((...i)=>(he&&C(`Slot "${t}" invoked outside of the render function: this will not track dependencies used in the slot. Invoke the slot function inside the render function instead.`),si(e(...i))),n);return s._c=!1,s},eo=(t,e,n)=>{const s=t._ctx;for(const i in t){if(Zr(i))continue;const r=t[i];if(q(r))e[i]=yc(i,r,s);else if(r!=null){C(`Non-function value encountered for slot "${i}". Prefer function slots for better performance.`);const o=si(r);e[i]=()=>o}}},to=(t,e)=>{zs(t.vnode)||C("Non-function value encountered for default slot. Prefer function slots for better performance.");const n=si(e);t.slots.default=()=>n},Ac=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=z(e),Fn(e,"_",n)):eo(e,t.slots={})}else t.slots={},e&&to(t,e);Fn(t.slots,ns,1)},vc=(t,e,n)=>{const{vnode:s,slots:i}=t;let r=!0,o=se;if(s.shapeFlag&32){const a=e._;a?xt?ue(i,e):n&&a===1?r=!1:(ue(i,e),!n&&a===1&&delete i._):(r=!e.$stable,eo(e,i)),o=e}else e&&(to(t,e),o={default:1});if(r)for(const a in i)!Zr(a)&&!(a in o)&&delete i[a]};function no(){return{app:null,config:{isNativeTag:ji,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let xc=0;function _c(t,e){return function(s,i=null){q(s)||(s=Object.assign({},s)),i!=null&&!oe(i)&&(C("root props passed to app.mount() must be an object."),i=null);const r=no(),o=new Set;let a=!1;const l=r.app={_uid:xc++,_component:s,_props:i,_container:null,_context:r,_instance:null,version:fo,get config(){return r.config},set config(c){C("app.config cannot be replaced. Modify individual options instead.")},use(c,...d){return o.has(c)?C("Plugin has already been applied to target app."):c&&q(c.install)?(o.add(c),c.install(l,...d)):q(c)?(o.add(c),c(l,...d)):C('A plugin must either be a function or an object with an "install" function.'),l},mixin(c){return r.mixins.includes(c)?C("Mixin has already been applied to target app"+(c.name?`: ${c.name}`:"")):r.mixins.push(c),l},component(c,d){return li(c,r.config),d?(r.components[c]&&C(`Component "${c}" has already been registered in target app.`),r.components[c]=d,l):r.components[c]},directive(c,d){return jr(c),d?(r.directives[c]&&C(`Directive "${c}" has already been registered in target app.`),r.directives[c]=d,l):r.directives[c]},mount(c,d,f){if(a)C("App has already been mounted.\nIf you want to remount the same app, move your app creation logic into a factory function and create fresh app instances for each mount - e.g. `const createMyApp = () => createApp(App)`");else{c.__vue_app__&&C("There is already an app instance mounted on the host container.\n If you want to mount another app on the same host container, you need to unmount the previous app by calling `app.unmount()` first.");const g=Et(s,i);return g.appContext=r,r.reload=()=>{t(ht(g),c,f)},d&&e?e(g,c):t(g,c,f),a=!0,l._container=c,c.__vue_app__=l,l._instance=g.component,_l(l,fo),ui(g.component)||g.component.proxy}},unmount(){a?(t(null,l._container),l._instance=null,Pl(l),delete l._container.__vue_app__):C("Cannot unmount an app that is not mounted.")},provide(c,d){return c in r.provides&&C(`App already provides property with key "${String(c)}". It will be overwritten with the new value.`),r.provides[c]=d,l}};return l}}function ii(t,e,n,s,i=!1){if(G(t)){t.forEach((g,w)=>ii(g,e&&(G(e)?e[w]:e),n,s,i));return}if(Xn(s)&&!i)return;const r=s.shapeFlag&4?ui(s.component)||s.component.proxy:s.el,o=i?null:r,{i:a,r:l}=t;if(!a){C("Missing ref owner context. ref cannot be used on hoisted vnodes. A vnode with ref must be created inside the render function.");return}const c=e&&e.r,d=a.refs===se?a.refs={}:a.refs,f=a.setupState;if(c!=null&&c!==l&&(fe(c)?(d[c]=null,Q(f,c)&&(f[c]=null)):ae(c)&&(c.value=null)),q(l))Ze(l,a,12,[o,d]);else{const g=fe(l),w=ae(l);if(g||w){const I=()=>{if(t.f){const v=g?Q(f,l)?f[l]:d[l]:l.value;i?G(v)&&Ps(v,r):G(v)?v.includes(r)||v.push(r):g?(d[l]=[r],Q(f,l)&&(f[l]=d[l])):(l.value=[r],t.k&&(d[t.k]=l.value))}else g?(d[l]=o,Q(f,l)&&(f[l]=o)):w?(l.value=o,t.k&&(d[t.k]=o)):C("Invalid template ref type:",l,`(${typeof l})`)};o?(I.id=-1,Pe(I,n)):I()}else C("Invalid template ref type:",l,`(${typeof l})`)}}let fn,dt;function tt(t,e){t.appContext.config.performance&&Zn()&&dt.mark(`vue-${e}-${t.uid}`),El(t,e,Zn()?dt.now():Date.now())}function nt(t,e){if(t.appContext.config.performance&&Zn()){const n=`vue-${e}-${t.uid}`,s=n+":end";dt.mark(s),dt.measure(`<${is(t,t.type)}> ${e}`,n,s),dt.clearMarks(n),dt.clearMarks(s)}Ll(t,e,Zn()?dt.now():Date.now())}function Zn(){return fn!==void 0||(typeof window<"u"&&window.performance?(fn=!0,dt=window.performance):fn=!1),fn}function Pc(){const t=[];if(t.length){const e=t.length>1;console.warn(`Feature flag${e?"s":""} ${t.join(", ")} ${e?"are":"is"} not explicitly defined. You are running the esm-bundler build of Vue, which expects these compile-time feature flags to be globally injected via the bundler config in order to get better tree-shaking in the production bundle.

For more details, see https://link.vuejs.org/feature-flags.`)}}const Pe=$l;function Sc(t){return Cc(t)}function Cc(t,e){Pc();const n=Ki();n.__VUE__=!0,Er(n.__VUE_DEVTOOLS_GLOBAL_HOOK__,n);const{insert:s,remove:i,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:d,parentNode:f,nextSibling:g,setScopeId:w=_e,insertStaticContent:I}=t,v=(u,h,b,x=null,A=null,S=null,R=!1,P=null,F=xt?!1:!!h.dynamicChildren)=>{if(u===h)return;u&&!hn(u,h)&&(x=ps(u),mt(u,A,S,!0),u=null),h.patchFlag===-2&&(F=!1,h.dynamicChildren=null);const{type:_,ref:D,shapeFlag:M}=h;switch(_){case dn:T(u,h,b,x);break;case De:$(u,h,b,x);break;case ts:u==null?K(h,b,x,R):W(u,h,b,R);break;case qe:H(u,h,b,x,A,S,R,P,F);break;default:M&1?re(u,h,b,x,A,S,R,P,F):M&6?le(u,h,b,x,A,S,R,P,F):M&64||M&128?_.process(u,h,b,x,A,S,R,P,F,qt):C("Invalid VNode type:",_,`(${typeof _})`)}D!=null&&A&&ii(D,u&&u.ref,S,h||u,!h)},T=(u,h,b,x)=>{if(u==null)s(h.el=a(h.children),b,x);else{const A=h.el=u.el;h.children!==u.children&&c(A,h.children)}},$=(u,h,b,x)=>{u==null?s(h.el=l(h.children||""),b,x):h.el=u.el},K=(u,h,b,x)=>{[u.el,u.anchor]=I(u.children,h,b,x,u.el,u.anchor)},W=(u,h,b,x)=>{if(h.children!==u.children){const A=g(u.anchor);Y(u),[h.el,h.anchor]=I(h.children,b,A,x)}else h.el=u.el,h.anchor=u.anchor},k=({el:u,anchor:h},b,x)=>{let A;for(;u&&u!==h;)A=g(u),s(u,b,x),u=A;s(h,b,x)},Y=({el:u,anchor:h})=>{let b;for(;u&&u!==h;)b=g(u),i(u),u=b;i(h)},re=(u,h,b,x,A,S,R,P,F)=>{R=R||h.type==="svg",u==null?N(h,b,x,A,S,R,P,F):y(u,h,A,S,R,P,F)},N=(u,h,b,x,A,S,R,P)=>{let F,_;const{type:D,props:M,shapeFlag:U,transition:J,dirs:ee}=u;if(F=u.el=o(u.type,S,M&&M.is,M),U&8?d(F,u.children):U&16&&m(u.children,F,null,x,A,S&&D!=="foreignObject",R,P),ee&&Pt(u,null,x,"created"),M){for(const ne in M)ne!=="value"&&!Pn(ne)&&r(F,ne,null,M[ne],S,u.children,x,A,it);"value"in M&&r(F,"value",null,M.value),(_=M.onVnodeBeforeMount)&&ze(_,x,u)}L(F,u,u.scopeId,R,x),Object.defineProperty(F,"__vnode",{value:u,enumerable:!1}),Object.defineProperty(F,"__vueParentComponent",{value:x,enumerable:!1}),ee&&Pt(u,null,x,"beforeMount");const ie=(!A||A&&!A.pendingBranch)&&J&&!J.persisted;ie&&J.beforeEnter(F),s(F,h,b),((_=M&&M.onVnodeMounted)||ie||ee)&&Pe(()=>{_&&ze(_,x,u),ie&&J.enter(F),ee&&Pt(u,null,x,"mounted")},A)},L=(u,h,b,x,A)=>{if(b&&w(u,b),x)for(let S=0;S<x.length;S++)w(u,x[S]);if(A){let S=A.subTree;if(S.patchFlag>0&&S.patchFlag&2048&&(S=Or(S.children)||S),h===S){const R=A.vnode;L(u,R,R.scopeId,R.slotScopeIds,A.parent)}}},m=(u,h,b,x,A,S,R,P,F=0)=>{for(let _=F;_<u.length;_++){const D=u[_]=P?gt(u[_]):Ne(u[_]);v(null,D,h,b,x,A,S,R,P)}},y=(u,h,b,x,A,S,R)=>{const P=h.el=u.el;let{patchFlag:F,dynamicChildren:_,dirs:D}=h;F|=u.patchFlag&16;const M=u.props||se,U=h.props||se;let J;b&&Ft(b,!1),(J=U.onVnodeBeforeUpdate)&&ze(J,b,h,u),D&&Pt(h,u,b,"beforeUpdate"),b&&Ft(b,!0),xt&&(F=0,R=!1,_=null);const ee=A&&h.type!=="foreignObject";if(_?(p(u.dynamicChildren,_,P,b,x,ee,S),b&&b.type.__hmrId&&es(u,h)):R||V(u,h,P,null,b,x,ee,S,!1),F>0){if(F&16)E(P,h,M,U,b,x,A);else if(F&2&&M.class!==U.class&&r(P,"class",null,U.class,A),F&4&&r(P,"style",M.style,U.style,A),F&8){const ie=h.dynamicProps;for(let ne=0;ne<ie.length;ne++){const de=ie[ne],Be=M[de],zt=U[de];(zt!==Be||de==="value")&&r(P,de,Be,zt,A,u.children,b,x,it)}}F&1&&u.children!==h.children&&d(P,h.children)}else!R&&_==null&&E(P,h,M,U,b,x,A);((J=U.onVnodeUpdated)||D)&&Pe(()=>{J&&ze(J,b,h,u),D&&Pt(h,u,b,"updated")},x)},p=(u,h,b,x,A,S,R)=>{for(let P=0;P<h.length;P++){const F=u[P],_=h[P],D=F.el&&(F.type===qe||!hn(F,_)||F.shapeFlag&70)?f(F.el):b;v(F,_,D,null,x,A,S,R,!0)}},E=(u,h,b,x,A,S,R)=>{if(b!==x){if(b!==se)for(const P in b)!Pn(P)&&!(P in x)&&r(u,P,b[P],null,R,h.children,A,S,it);for(const P in x){if(Pn(P))continue;const F=x[P],_=b[P];F!==_&&P!=="value"&&r(u,P,_,F,R,h.children,A,S,it)}"value"in x&&r(u,"value",b.value,x.value)}},H=(u,h,b,x,A,S,R,P,F)=>{const _=h.el=u?u.el:a(""),D=h.anchor=u?u.anchor:a("");let{patchFlag:M,dynamicChildren:U,slotScopeIds:J}=h;(xt||M&2048)&&(M=0,F=!1,U=null),J&&(P=P?P.concat(J):J),u==null?(s(_,b,x),s(D,b,x),m(h.children,b,D,A,S,R,P,F)):M>0&&M&64&&U&&u.dynamicChildren?(p(u.dynamicChildren,U,b,A,S,R,P),A&&A.type.__hmrId?es(u,h):(h.key!=null||A&&h===A.subTree)&&es(u,h,!0)):V(u,h,b,D,A,S,R,P,F)},le=(u,h,b,x,A,S,R,P,F)=>{h.slotScopeIds=P,u==null?h.shapeFlag&512?A.ctx.activate(h,b,x,R,F):j(h,b,x,A,S,R,F):Z(u,h,F)},j=(u,h,b,x,A,S,R)=>{const P=u.component=Nc(u,x,A);if(P.type.__hmrId&&yl(P),Vn(u),tt(P,"mount"),zs(u)&&(P.ctx.renderer=qt),tt(P,"init"),jc(P),nt(P,"init"),P.asyncDep){if(A&&A.registerDep(P,O),!u.el){const F=P.subTree=Et(De);$(null,F,h,b)}return}O(P,u,h,b,A,S,R),Kn(),nt(P,"mount")},Z=(u,h,b)=>{const x=h.component=u.component;if(Dl(u,h,b))if(x.asyncDep&&!x.asyncResolved){Vn(h),X(x,h,b),Kn();return}else x.next=h,bl(x.update),x.update();else h.el=u.el,x.vnode=h},O=(u,h,b,x,A,S,R)=>{const P=()=>{if(u.isMounted){let{next:D,bu:M,u:U,parent:J,vnode:ee}=u,ie=D,ne;Vn(D||u.vnode),Ft(u,!1),D?(D.el=ee.el,X(u,D,R)):D=ee,M&&en(M),(ne=D.props&&D.props.onVnodeBeforeUpdate)&&ze(ne,J,D,ee),Ft(u,!0),tt(u,"render");const de=qs(u);nt(u,"render");const Be=u.subTree;u.subTree=de,tt(u,"patch"),v(Be,de,f(Be.el),ps(Be),u,A,S),nt(u,"patch"),D.el=de.el,ie===null&&Nl(u,de.el),U&&Pe(U,A),(ne=D.props&&D.props.onVnodeUpdated)&&Pe(()=>ze(ne,J,D,ee),A),Lr(u),Kn()}else{let D;const{el:M,props:U}=h,{bm:J,m:ee,parent:ie}=u,ne=Xn(h);if(Ft(u,!1),J&&en(J),!ne&&(D=U&&U.onVnodeBeforeMount)&&ze(D,ie,h),Ft(u,!0),M&&Ii){const de=()=>{tt(u,"render"),u.subTree=qs(u),nt(u,"render"),tt(u,"hydrate"),Ii(M,u.subTree,u,A,null),nt(u,"hydrate")};ne?h.type.__asyncLoader().then(()=>!u.isUnmounted&&de()):de()}else{tt(u,"render");const de=u.subTree=qs(u);nt(u,"render"),tt(u,"patch"),v(null,de,b,x,u,A,S),nt(u,"patch"),h.el=de.el}if(ee&&Pe(ee,A),!ne&&(D=U&&U.onVnodeMounted)){const de=h;Pe(()=>ze(D,ie,de),A)}(h.shapeFlag&256||ie&&Xn(ie.vnode)&&ie.vnode.shapeFlag&256)&&u.a&&Pe(u.a,A),u.isMounted=!0,Sl(u),h=b=x=null}},F=u.effect=new Os(P,()=>Wn(_),u.scope),_=u.update=()=>F.run();_.id=u.uid,Ft(u,!0),F.onTrack=u.rtc?D=>en(u.rtc,D):void 0,F.onTrigger=u.rtg?D=>en(u.rtg,D):void 0,_.ownerInstance=u,_()},X=(u,h,b)=>{h.component=u;const x=u.vnode.props;u.vnode=h,u.next=null,hc(u,h.props,x,b),vc(u,h.children,b),yt(),_r(),At()},V=(u,h,b,x,A,S,R,P,F=!1)=>{const _=u&&u.children,D=u?u.shapeFlag:0,M=h.children,{patchFlag:U,shapeFlag:J}=h;if(U>0){if(U&128){Ae(_,M,b,x,A,S,R,P,F);return}else if(U&256){te(_,M,b,x,A,S,R,P,F);return}}J&8?(D&16&&it(_,A,S),M!==_&&d(b,M)):D&16?J&16?Ae(_,M,b,x,A,S,R,P,F):it(_,A,S,!0):(D&8&&d(b,""),J&16&&m(M,b,x,A,S,R,P,F))},te=(u,h,b,x,A,S,R,P,F)=>{u=u||Yt,h=h||Yt;const _=u.length,D=h.length,M=Math.min(_,D);let U;for(U=0;U<M;U++){const J=h[U]=F?gt(h[U]):Ne(h[U]);v(u[U],J,b,null,A,S,R,P,F)}_>D?it(u,A,S,!0,!1,M):m(h,b,x,A,S,R,P,F,M)},Ae=(u,h,b,x,A,S,R,P,F)=>{let _=0;const D=h.length;let M=u.length-1,U=D-1;for(;_<=M&&_<=U;){const J=u[_],ee=h[_]=F?gt(h[_]):Ne(h[_]);if(hn(J,ee))v(J,ee,b,null,A,S,R,P,F);else break;_++}for(;_<=M&&_<=U;){const J=u[M],ee=h[U]=F?gt(h[U]):Ne(h[U]);if(hn(J,ee))v(J,ee,b,null,A,S,R,P,F);else break;M--,U--}if(_>M){if(_<=U){const J=U+1,ee=J<D?h[J].el:x;for(;_<=U;)v(null,h[_]=F?gt(h[_]):Ne(h[_]),b,ee,A,S,R,P,F),_++}}else if(_>U)for(;_<=M;)mt(u[_],A,S,!0),_++;else{const J=_,ee=_,ie=new Map;for(_=ee;_<=U;_++){const ve=h[_]=F?gt(h[_]):Ne(h[_]);ve.key!=null&&(ie.has(ve.key)&&C("Duplicate keys found during update:",JSON.stringify(ve.key),"Make sure keys are unique."),ie.set(ve.key,_))}let ne,de=0;const Be=U-ee+1;let zt=!1,Wo=0;const wn=new Array(Be);for(_=0;_<Be;_++)wn[_]=0;for(_=J;_<=M;_++){const ve=u[_];if(de>=Be){mt(ve,A,S,!0);continue}let Je;if(ve.key!=null)Je=ie.get(ve.key);else for(ne=ee;ne<=U;ne++)if(wn[ne-ee]===0&&hn(ve,h[ne])){Je=ne;break}Je===void 0?mt(ve,A,S,!0):(wn[Je-ee]=_+1,Je>=Wo?Wo=Je:zt=!0,v(ve,h[Je],b,null,A,S,R,P,F),de++)}const Go=zt?Fc(wn):Yt;for(ne=Go.length-1,_=Be-1;_>=0;_--){const ve=ee+_,Je=h[ve],qo=ve+1<D?h[ve+1].el:x;wn[_]===0?v(null,Je,b,qo,A,S,R,P,F):zt&&(ne<0||_!==Go[ne]?Gt(Je,b,qo,2):ne--)}}},Gt=(u,h,b,x,A=null)=>{const{el:S,type:R,transition:P,children:F,shapeFlag:_}=u;if(_&6){Gt(u.component.subTree,h,b,x);return}if(_&128){u.suspense.move(h,b,x);return}if(_&64){R.move(u,h,b,qt);return}if(R===qe){s(S,h,b);for(let M=0;M<F.length;M++)Gt(F[M],h,b,x);s(u.anchor,h,b);return}if(R===ts){k(u,h,b);return}if(x!==2&&_&1&&P)if(x===0)P.beforeEnter(S),s(S,h,b),Pe(()=>P.enter(S),A);else{const{leave:M,delayLeave:U,afterLeave:J}=P,ee=()=>s(S,h,b),ie=()=>{M(S,()=>{ee(),J&&J()})};U?U(S,ee,ie):ie()}else s(S,h,b)},mt=(u,h,b,x=!1,A=!1)=>{const{type:S,props:R,ref:P,children:F,dynamicChildren:_,shapeFlag:D,patchFlag:M,dirs:U}=u;if(P!=null&&ii(P,null,b,u,!0),D&256){h.ctx.deactivate(u);return}const J=D&1&&U,ee=!Xn(u);let ie;if(ee&&(ie=R&&R.onVnodeBeforeUnmount)&&ze(ie,h,u),D&6)lf(u.component,b,x);else{if(D&128){u.suspense.unmount(b,x);return}J&&Pt(u,null,h,"beforeUnmount"),D&64?u.type.remove(u,h,b,A,qt,x):_&&(S!==qe||M>0&&M&64)?it(_,h,b,!1,!0):(S===qe&&M&384||!A&&D&16)&&it(F,h,b),x&&Li(u)}(ee&&(ie=R&&R.onVnodeUnmounted)||J)&&Pe(()=>{ie&&ze(ie,h,u),J&&Pt(u,null,h,"unmounted")},b)},Li=u=>{const{type:h,el:b,anchor:x,transition:A}=u;if(h===qe){u.patchFlag>0&&u.patchFlag&2048&&A&&!A.persisted?u.children.forEach(R=>{R.type===De?i(R.el):Li(R)}):af(b,x);return}if(h===ts){Y(u);return}const S=()=>{i(b),A&&!A.persisted&&A.afterLeave&&A.afterLeave()};if(u.shapeFlag&1&&A&&!A.persisted){const{leave:R,delayLeave:P}=A,F=()=>R(b,S);P?P(u.el,S,F):F()}else S()},af=(u,h)=>{let b;for(;u!==h;)b=g(u),i(u),u=b;i(h)},lf=(u,h,b)=>{u.type.__hmrId&&Al(u);const{bum:x,scope:A,update:S,subTree:R,um:P}=u;x&&en(x),A.stop(),S&&(S.active=!1,mt(R,u,h,b)),P&&Pe(P,h),Pe(()=>{u.isUnmounted=!0},h),h&&h.pendingBranch&&!h.isUnmounted&&u.asyncDep&&!u.asyncResolved&&u.suspenseId===h.pendingId&&(h.deps--,h.deps===0&&h.resolve()),Fl(u)},it=(u,h,b,x=!1,A=!1,S=0)=>{for(let R=S;R<u.length;R++)mt(u[R],h,b,x,A)},ps=u=>u.shapeFlag&6?ps(u.component.subTree):u.shapeFlag&128?u.suspense.next():g(u.anchor||u.el),Ho=(u,h,b)=>{u==null?h._vnode&&mt(h._vnode,null,null,!0):v(h._vnode||null,u,h,null,null,null,b),_r(),Pr(),h._vnode=u},qt={p:v,um:mt,m:Gt,r:Li,mt:j,mc:m,pc:V,pbc:p,n:ps,o:t};let Ri,Ii;return e&&([Ri,Ii]=e(qt)),{render:Ho,hydrate:Ri,createApp:_c(Ho,Ri)}}function Ft({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function es(t,e,n=!1){const s=t.children,i=e.children;if(G(s)&&G(i))for(let r=0;r<s.length;r++){const o=s[r];let a=i[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[r]=gt(i[r]),a.el=o.el),n||es(o,a)),a.type===dn&&(a.el=o.el),a.type===De&&!a.el&&(a.el=o.el)}}function Fc(t){const e=t.slice(),n=[0];let s,i,r,o,a;const l=t.length;for(s=0;s<l;s++){const c=t[s];if(c!==0){if(i=n[n.length-1],t[i]<c){e[s]=i,n.push(s);continue}for(r=0,o=n.length-1;r<o;)a=r+o>>1,t[n[a]]<c?r=a+1:o=a;c<t[n[r]]&&(r>0&&(e[s]=n[r-1]),n[r]=s)}}for(r=n.length,o=n[r-1];r-- >0;)n[r]=o,o=e[o];return n}const Ec=t=>t.__isTeleport,qe=Symbol("Fragment"),dn=Symbol("Text"),De=Symbol("Comment"),ts=Symbol("Static");let Bt=null,ri=1;function so(t){ri+=t}function oi(t){return t?t.__v_isVNode===!0:!1}function hn(t,e){return e.shapeFlag&6&&$t.has(e.type)?(t.shapeFlag&=-257,e.shapeFlag&=-513,!1):t.type===e.type&&t.key===e.key}const Lc=(...t)=>Ic(...t),ns="__vInternal",io=({key:t})=>t??null,ss=({ref:t,ref_key:e,ref_for:n})=>t!=null?fe(t)||ae(t)||q(t)?{i:Re,r:t,k:e,f:!!n}:t:null;function Rc(t,e=null,n=null,s=0,i=null,r=t===qe?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&io(e),ref:e&&ss(e),scopeId:Tr,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Re};return a?(ai(l,n),r&128&&t.normalize(l)):n&&(l.shapeFlag|=fe(n)?8:16),l.key!==l.key&&C("VNode created with invalid key (NaN). VNode type:",l.type),ri>0&&!o&&Bt&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&Bt.push(l),l}const Et=Lc;function Ic(t,e=null,n=null,s=0,i=null,r=!1){if((!t||t===tc)&&(t||C(`Invalid vnode type when creating vnode: ${t}.`),t=De),oi(t)){const a=ht(t,e,!0);return n&&ai(a,n),ri>0&&!r&&Bt&&(a.shapeFlag&6?Bt[Bt.indexOf(t)]=a:Bt.push(a)),a.patchFlag|=-2,a}if(uo(t)&&(t=t.__vccOpts),e){e=Tc(e);let{class:a,style:l}=e;a&&!fe(a)&&(e.class=_s(a)),oe(l)&&(jn(l)&&!G(l)&&(l=ue({},l)),e.style=xs(l))}const o=fe(t)?1:Ul(t)?128:Ec(t)?64:oe(t)?4:q(t)?2:0;return o&4&&jn(t)&&(t=z(t),C("Vue received a Component which was made a reactive object. This can lead to unnecessary performance overhead, and should be avoided by marking the component with `markRaw` or using `shallowRef` instead of `ref`.",`
Component that was made reactive: `,t)),Rc(t,e,n,s,i,o,r,!0)}function Tc(t){return t?jn(t)||ns in t?ue({},t):t:null}function ht(t,e,n=!1){const{props:s,ref:i,patchFlag:r,children:o}=t,a=e?Mc(s||{},e):s;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&io(a),ref:e&&e.ref?n&&i?G(i)?i.concat(ss(e)):[i,ss(e)]:ss(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:r===-1&&G(o)?o.map(ro):o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==qe?r===-1?16:r|16:r,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&ht(t.ssContent),ssFallback:t.ssFallback&&ht(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx}}function ro(t){const e=ht(t);return G(t.children)&&(e.children=t.children.map(ro)),e}function Oc(t=" ",e=0){return Et(dn,null,t,e)}function Ne(t){return t==null||typeof t=="boolean"?Et(De):G(t)?Et(qe,null,t.slice()):typeof t=="object"?gt(t):Et(dn,null,String(t))}function gt(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:ht(t)}function ai(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(G(e))n=16;else if(typeof e=="object")if(s&65){const i=e.default;i&&(i._c&&(i._d=!1),ai(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!(ns in e)?e._ctx=Re:i===3&&Re&&(Re.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else q(e)?(e={default:e,_ctx:Re},n=32):(e=String(e),s&64?(n=16,e=[Oc(e)]):n=8);t.children=e,t.shapeFlag|=n}function Mc(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const i in s)if(i==="class")e.class!==s.class&&(e.class=_s([e.class,s.class]));else if(i==="style")e.style=xs([e.style,s.style]);else if(Qt(i)){const r=e[i],o=s[i];o&&r!==o&&!(G(r)&&r.includes(o))&&(e[i]=r?[].concat(r,o):o)}else i!==""&&(e[i]=s[i])}return e}function ze(t,e,n,s=null){ke(t,e,7,[n,s])}const kc=no();let Dc=0;function Nc(t,e,n){const s=t.type,i=(e?e.appContext:t.appContext)||kc,r={uid:Dc++,vnode:t,type:s,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new Hi(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Gr(s,i),emitsOptions:Ir(s,i),emit:null,emitted:null,propsDefaults:se,inheritAttrs:s.inheritAttrs,ctx:se,data:se,props:se,attrs:se,slots:se,refs:se,setupState:se,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx=nc(r),r.root=e?e.root:r,r.emit=Il.bind(null,r),t.ce&&t.ce(r),r}let he=null;const Uc=()=>he||Re,Vt=t=>{he=t,t.scope.on()},Lt=()=>{he&&he.scope.off(),he=null},$c=rt("slot,component");function li(t,e){const n=e.isNativeTag||ji;($c(t)||n(t))&&C("Do not use built-in or reserved HTML elements as component id: "+t)}function oo(t){return t.vnode.shapeFlag&4}let gn=!1;function jc(t,e=!1){gn=e;const{props:n,children:s}=t.vnode,i=oo(t);fc(t,n,i,e),Ac(t,s);const r=i?Bc(t,e):void 0;return gn=!1,r}function Bc(t,e){var n;const s=t.type;{if(s.name&&li(s.name,t.appContext.config),s.components){const r=Object.keys(s.components);for(let o=0;o<r.length;o++)li(r[o],t.appContext.config)}if(s.directives){const r=Object.keys(s.directives);for(let o=0;o<r.length;o++)jr(r[o])}s.compilerOptions&&Vc()&&C('"compilerOptions" is only supported when using a build of Vue that includes the runtime compiler. Since you are using a runtime-only build, the options should be passed via your build tool config instead.')}t.accessCache=Object.create(null),t.proxy=Me(new Proxy(t.ctx,Br)),sc(t);const{setup:i}=s;if(i){const r=t.setupContext=i.length>1?Hc(t):null;Vt(t),yt();const o=Ze(i,t,0,[Nt(t.props),r]);if(At(),Lt(),Cs(o)){if(o.then(Lt,Lt),e)return o.then(a=>{ao(t,a,e)}).catch(a=>{Hn(a,t,0)});if(t.asyncDep=o,!t.suspense){const a=(n=s.name)!==null&&n!==void 0?n:"Anonymous";C(`Component <${a}>: setup function returned a promise, but no <Suspense> boundary was found in the parent component tree. A component with async setup() must be nested in a <Suspense> in order to be rendered.`)}}else ao(t,o,e)}else lo(t,e)}function ao(t,e,n){q(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:oe(e)?(oi(e)&&C("setup() should not return VNodes directly - return a render function instead."),t.devtoolsRawSetupState=e,t.setupState=pr(e),ic(t)):e!==void 0&&C(`setup() should return an object. Received: ${e===null?"null":typeof e}`),lo(t,n)}let ci;const Vc=()=>!ci;function lo(t,e,n){const s=t.type;if(!t.render){if(!e&&ci&&!s.render){const i=s.template||Zs(t).template;if(i){tt(t,"compile");const{isCustomElement:r,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=s,c=ue(ue({isCustomElement:r,delimiters:a},o),l);s.render=ci(i,c),nt(t,"compile")}}t.render=s.render||_e}Vt(t),yt(),oc(t),At(),Lt(),!s.render&&t.render===_e&&!e&&(s.template?C('Component provided template option but runtime compilation is not supported in this build of Vue. Configure your bundler to alias "vue" to "vue/dist/vue.esm-bundler.js".'):C("Component is missing template or render function."))}function Kc(t){return new Proxy(t.attrs,{get(e,n){return zn(),Le(t,"get","$attrs"),e[n]},set(){return C("setupContext.attrs is readonly."),!1},deleteProperty(){return C("setupContext.attrs is readonly."),!1}})}function Hc(t){const e=s=>{t.exposed&&C("expose() should be called only once per setup()."),t.exposed=s||{}};let n;return Object.freeze({get attrs(){return n||(n=Kc(t))},get slots(){return Nt(t.slots)},get emit(){return(s,...i)=>t.emit(s,...i)},expose:e})}function ui(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(pr(Me(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in St)return St[n](t)},has(e,n){return n in e||n in St}}))}const Wc=/(?:^|[-_])(\w)/g,Gc=t=>t.replace(Wc,e=>e.toUpperCase()).replace(/[-_]/g,"");function co(t,e=!0){return q(t)?t.displayName||t.name:t.name||e&&t.__name}function is(t,e,n=!1){let s=co(e);if(!s&&e.__file){const i=e.__file.match(/([^/\\]+)\.\w+$/);i&&(s=i[1])}if(!s&&t&&t.parent){const i=r=>{for(const o in r)if(r[o]===e)return o};s=i(t.components||t.parent.type.components)||i(t.appContext.components)}return s?Gc(s):n?"App":"Anonymous"}function uo(t){return q(t)&&"__vccOpts"in t}const fi=(t,e)=>cl(t,e,gn),qc=Symbol("ssrContext"),zc=()=>{{const t=cn(qc);return t||C("Server rendering context not provided. Make sure to only call useSSRContext() conditionally in the server build."),t}};function di(t){return!!(t&&t.__v_isShallow)}function Jc(){if(typeof window>"u")return;const t={style:"color:#3ba776"},e={style:"color:#0b1bc9"},n={style:"color:#b62e24"},s={style:"color:#9d288c"},i={header(f){return oe(f)?f.__isVue?["div",t,"VueInstance"]:ae(f)?["div",{},["span",t,d(f)],"<",a(f.value),">"]:Ke(f)?["div",{},["span",t,di(f)?"ShallowReactive":"Reactive"],"<",a(f),`>${ut(f)?" (readonly)":""}`]:ut(f)?["div",{},["span",t,di(f)?"ShallowReadonly":"Readonly"],"<",a(f),">"]:null:null},hasBody(f){return f&&f.__isVue},body(f){if(f&&f.__isVue)return["div",{},...r(f.$)]}};function r(f){const g=[];f.type.props&&f.props&&g.push(o("props",z(f.props))),f.setupState!==se&&g.push(o("setup",f.setupState)),f.data!==se&&g.push(o("data",z(f.data)));const w=l(f,"computed");w&&g.push(o("computed",w));const I=l(f,"inject");return I&&g.push(o("injected",I)),g.push(["div",{},["span",{style:s.style+";opacity:0.66"},"$ (internal): "],["object",{object:f}]]),g}function o(f,g){return g=ue({},g),Object.keys(g).length?["div",{style:"line-height:1.25em;margin-bottom:0.6em"},["div",{style:"color:#476582"},f],["div",{style:"padding-left:1.25em"},...Object.keys(g).map(w=>["div",{},["span",s,w+": "],a(g[w],!1)])]]:["span",{}]}function a(f,g=!0){return typeof f=="number"?["span",e,f]:typeof f=="string"?["span",n,JSON.stringify(f)]:typeof f=="boolean"?["span",s,f]:oe(f)?["object",{object:g?z(f):f}]:["span",n,String(f)]}function l(f,g){const w=f.type;if(q(w))return;const I={};for(const v in f.ctx)c(w,v,g)&&(I[v]=f.ctx[v]);return I}function c(f,g,w){const I=f[w];if(G(I)&&I.includes(g)||oe(I)&&g in I||f.extends&&c(f.extends,g,w)||f.mixins&&f.mixins.some(v=>c(v,g,w)))return!0}function d(f){return di(f)?"ShallowRef":f.effect?"ComputedRef":"Ref"}window.devtoolsFormatters?window.devtoolsFormatters.push(i):window.devtoolsFormatters=[i]}const fo="3.2.45",Xc="http://www.w3.org/2000/svg",Rt=typeof document<"u"?document:null,ho=Rt&&Rt.createElement("template"),Yc={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const i=e?Rt.createElementNS(Xc,t):Rt.createElement(t,n?{is:n}:void 0);return t==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:t=>Rt.createTextNode(t),createComment:t=>Rt.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Rt.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,i,r){const o=n?n.previousSibling:e.lastChild;if(i&&(i===r||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===r||!(i=i.nextSibling)););else{ho.innerHTML=s?`<svg>${t}</svg>`:t;const a=ho.content;if(s){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function Qc(t,e,n){const s=t._vtc;s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function Zc(t,e,n){const s=t.style,i=fe(n);if(n&&!i){for(const r in n)hi(s,r,n[r]);if(e&&!fe(e))for(const r in e)n[r]==null&&hi(s,r,"")}else{const r=s.display;i?e!==n&&(s.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(s.display=r)}}const eu=/[^\\];\s*$/,go=/\s*!important$/;function hi(t,e,n){if(G(n))n.forEach(s=>hi(t,e,s));else if(n==null&&(n=""),eu.test(n)&&C(`Unexpected semicolon at the end of '${e}' style value: '${n}'`),e.startsWith("--"))t.setProperty(e,n);else{const s=tu(t,e);go.test(n)?t.setProperty(ot(s),n.replace(go,""),"important"):t[s]=n}}const mo=["Webkit","Moz","ms"],gi={};function tu(t,e){const n=gi[e];if(n)return n;let s=Dt(e);if(s!=="filter"&&s in t)return gi[e]=s;s=Cn(s);for(let i=0;i<mo.length;i++){const r=mo[i]+s;if(r in t)return gi[e]=r}return e}const po="http://www.w3.org/1999/xlink";function nu(t,e,n,s,i){if(s&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(po,e.slice(6,e.length)):t.setAttributeNS(po,e,n);else{const r=ya(e);n==null||r&&!$i(n)?t.removeAttribute(e):t.setAttribute(e,r?"":n)}}function su(t,e,n,s,i,r,o){if(e==="innerHTML"||e==="textContent"){s&&o(s,i,r),t[e]=n??"";return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=n;const l=n??"";(t.value!==l||t.tagName==="OPTION")&&(t.value=l),n==null&&t.removeAttribute(e);return}let a=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=$i(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{t[e]=n}catch(l){a||C(`Failed setting prop "${e}" on <${t.tagName.toLowerCase()}>: value ${n} is invalid.`,l)}a&&t.removeAttribute(e)}function iu(t,e,n,s){t.addEventListener(e,n,s)}function ru(t,e,n,s){t.removeEventListener(e,n,s)}function ou(t,e,n,s,i=null){const r=t._vei||(t._vei={}),o=r[e];if(s&&o)o.value=s;else{const[a,l]=au(e);if(s){const c=r[e]=uu(s,i);iu(t,a,c,l)}else o&&(ru(t,a,o,l),r[e]=void 0)}}const bo=/(?:Once|Passive|Capture)$/;function au(t){let e;if(bo.test(t)){e={};let s;for(;s=t.match(bo);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):ot(t.slice(2)),e]}let mi=0;const lu=Promise.resolve(),cu=()=>mi||(lu.then(()=>mi=0),mi=Date.now());function uu(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;ke(fu(s,n.value),e,5,[s])};return n.value=t,n.attached=cu(),n}function fu(t,e){if(G(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>i=>!i._stopped&&s&&s(i))}else return e}const wo=/^on[a-z]/,du=(t,e,n,s,i=!1,r,o,a,l)=>{e==="class"?Qc(t,s,i):e==="style"?Zc(t,n,s):Qt(e)?xn(e)||ou(t,e,n,s,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):hu(t,e,s,i))?su(t,e,s,r,o,a,l):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),nu(t,e,s,i))};function hu(t,e,n,s){return s?!!(e==="innerHTML"||e==="textContent"||e in t&&wo.test(e)&&q(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||wo.test(e)&&fe(n)?!1:e in t}const gu=ue({patchProp:du},Yc);let yo;function mu(){return yo||(yo=Sc(gu))}const pu=(...t)=>{const e=mu().createApp(...t);bu(e),wu(e);const{mount:n}=e;return e.mount=s=>{const i=yu(s);if(!i)return;const r=e._component;!q(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.innerHTML="";const o=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function bu(t){Object.defineProperty(t.config,"isNativeTag",{value:e=>ba(e)||wa(e),writable:!1})}function wu(t){{const e=t.config.isCustomElement;Object.defineProperty(t.config,"isCustomElement",{get(){return e},set(){C("The `isCustomElement` config option is deprecated. Use `compilerOptions.isCustomElement` instead.")}});const n=t.config.compilerOptions,s='The `compilerOptions` config option is only respected when using a build of Vue.js that includes the runtime compiler (aka "full build"). Since you are using the runtime-only build, `compilerOptions` must be passed to `@vue/compiler-dom` in the build setup instead.\n- For vue-loader: pass it via vue-loader\'s `compilerOptions` loader option.\n- For vue-cli: see https://cli.vuejs.org/guide/webpack.html#modifying-options-of-a-loader\n- For vite: pass it via @vitejs/plugin-vue options. See https://github.com/vitejs/vite/tree/main/packages/plugin-vue#example-for-passing-options-to-vuecompiler-dom';Object.defineProperty(t.config,"compilerOptions",{get(){return C(s),n},set(){C(s)}})}}function yu(t){if(fe(t)){const e=document.querySelector(t);return e||C(`Failed to mount app: mount target selector "${t}" returned null.`),e}return window.ShadowRoot&&t instanceof window.ShadowRoot&&t.mode==="closed"&&C('mounting on a ShadowRoot with `{mode: "closed"}` may lead to unpredictable bugs'),t}function Au(){Jc()}Au();var vu=!1;function rs(t,e,n){return Array.isArray(t)?(t.length=Math.max(t.length,e),t.splice(e,1,n),n):(t[e]=n,n)}function pi(t,e){if(Array.isArray(t)){t.splice(e,1);return}delete t[e]}function xu(){return Ao().__VUE_DEVTOOLS_GLOBAL_HOOK__}function Ao(){return typeof navigator<"u"&&typeof window<"u"?window:typeof global<"u"?global:{}}const _u=typeof Proxy=="function",Pu="devtools-plugin:setup",Su="plugin:settings:set";let Kt,bi;function Cu(){var t;return Kt!==void 0||(typeof window<"u"&&window.performance?(Kt=!0,bi=window.performance):typeof global<"u"&&(!((t=global.perf_hooks)===null||t===void 0)&&t.performance)?(Kt=!0,bi=global.perf_hooks.performance):Kt=!1),Kt}function Fu(){return Cu()?bi.now():Date.now()}class Eu{constructor(e,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=n;const s={};if(e.settings)for(const o in e.settings){const a=e.settings[o];s[o]=a.defaultValue}const i=`__vue-devtools-plugin-settings__${e.id}`;let r=Object.assign({},s);try{const o=localStorage.getItem(i),a=JSON.parse(o);Object.assign(r,a)}catch{}this.fallbacks={getSettings(){return r},setSettings(o){try{localStorage.setItem(i,JSON.stringify(o))}catch{}r=o},now(){return Fu()}},n&&n.on(Su,(o,a)=>{o===this.plugin.id&&this.fallbacks.setSettings(a)}),this.proxiedOn=new Proxy({},{get:(o,a)=>this.target?this.target.on[a]:(...l)=>{this.onQueue.push({method:a,args:l})}}),this.proxiedTarget=new Proxy({},{get:(o,a)=>this.target?this.target[a]:a==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(a)?(...l)=>(this.targetQueue.push({method:a,args:l,resolve:()=>{}}),this.fallbacks[a](...l)):(...l)=>new Promise(c=>{this.targetQueue.push({method:a,args:l,resolve:c})})})}async setRealTarget(e){this.target=e;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function vo(t,e){const n=t,s=Ao(),i=xu(),r=_u&&n.enableEarlyProxy;if(i&&(s.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!r))i.emit(Pu,t,e);else{const o=r?new Eu(n,i):null;(s.__VUE_DEVTOOLS_PLUGINS__=s.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:e,proxy:o}),o&&e(o.proxiedTarget)}}/*!
  * pinia v2.0.29
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */let wi;const mn=t=>wi=t,xo=Symbol("pinia");function It(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Ue;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Ue||(Ue={}));const os=typeof window<"u",as=os,_o=(()=>typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:typeof globalThis=="object"?globalThis:{HTMLElement:null})();function Lu(t,{autoBom:e=!1}={}){return e&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t}function yi(t,e,n){const s=new XMLHttpRequest;s.open("GET",t),s.responseType="blob",s.onload=function(){Co(s.response,e,n)},s.onerror=function(){console.error("could not download file")},s.send()}function Po(t){const e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function ls(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{const n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}const cs=typeof navigator=="object"?navigator:{userAgent:""},So=(()=>/Macintosh/.test(cs.userAgent)&&/AppleWebKit/.test(cs.userAgent)&&!/Safari/.test(cs.userAgent))(),Co=os?typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype&&!So?Ru:"msSaveOrOpenBlob"in cs?Iu:Tu:()=>{};function Ru(t,e="download",n){const s=document.createElement("a");s.download=e,s.rel="noopener",typeof t=="string"?(s.href=t,s.origin!==location.origin?Po(s.href)?yi(t,e,n):(s.target="_blank",ls(s)):ls(s)):(s.href=URL.createObjectURL(t),setTimeout(function(){URL.revokeObjectURL(s.href)},4e4),setTimeout(function(){ls(s)},0))}function Iu(t,e="download",n){if(typeof t=="string")if(Po(t))yi(t,e,n);else{const s=document.createElement("a");s.href=t,s.target="_blank",setTimeout(function(){ls(s)})}else navigator.msSaveOrOpenBlob(Lu(t,n),e)}function Tu(t,e,n,s){if(s=s||open("","_blank"),s&&(s.document.title=s.document.body.innerText="downloading..."),typeof t=="string")return yi(t,e,n);const i=t.type==="application/octet-stream",r=/constructor/i.test(String(_o.HTMLElement))||"safari"in _o,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&r||So)&&typeof FileReader<"u"){const a=new FileReader;a.onloadend=function(){let l=a.result;if(typeof l!="string")throw s=null,new Error("Wrong reader.result type");l=o?l:l.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=l:location.assign(l),s=null},a.readAsDataURL(t)}else{const a=URL.createObjectURL(t);s?s.location.assign(a):location.href=a,s=null,setTimeout(function(){URL.revokeObjectURL(a)},4e4)}}function ge(t,e){const n=" "+t;typeof __VUE_DEVTOOLS_TOAST__=="function"?__VUE_DEVTOOLS_TOAST__(n,e):e==="error"?console.error(n):e==="warn"?console.warn(n):console.log(n)}function Ai(t){return"_a"in t&&"install"in t}function Fo(){if(!("clipboard"in navigator))return ge("Your browser doesn't support the Clipboard API","error"),!0}function Eo(t){return t instanceof Error&&t.message.toLowerCase().includes("document is not focused")?(ge('You need to activate the "Emulate a focused page" setting in the "Rendering" panel of devtools.',"warn"),!0):!1}async function Ou(t){if(!Fo())try{await navigator.clipboard.writeText(JSON.stringify(t.state.value)),ge("Global state copied to clipboard.")}catch(e){if(Eo(e))return;ge("Failed to serialize the state. Check the console for more details.","error"),console.error(e)}}async function Mu(t){if(!Fo())try{t.state.value=JSON.parse(await navigator.clipboard.readText()),ge("Global state pasted from clipboard.")}catch(e){if(Eo(e))return;ge("Failed to deserialize the state from clipboard. Check the console for more details.","error"),console.error(e)}}async function ku(t){try{Co(new Blob([JSON.stringify(t.state.value)],{type:"text/plain;charset=utf-8"}),"pinia-state.json")}catch(e){ge("Failed to export the state as JSON. Check the console for more details.","error"),console.error(e)}}let st;function Du(){st||(st=document.createElement("input"),st.type="file",st.accept=".json");function t(){return new Promise((e,n)=>{st.onchange=async()=>{const s=st.files;if(!s)return e(null);const i=s.item(0);return e(i?{text:await i.text(),file:i}:null)},st.oncancel=()=>e(null),st.onerror=n,st.click()})}return t}async function Nu(t){try{const n=await(await Du())();if(!n)return;const{text:s,file:i}=n;t.state.value=JSON.parse(s),ge(`Global state imported from "${i.name}".`)}catch(e){ge("Failed to export the state as JSON. Check the console for more details.","error"),console.error(e)}}function $e(t){return{_custom:{display:t}}}const Lo=" Pinia (root)",vi="_root";function Uu(t){return Ai(t)?{id:vi,label:Lo}:{id:t.$id,label:t.$id}}function $u(t){if(Ai(t)){const n=Array.from(t._s.keys()),s=t._s;return{state:n.map(r=>({editable:!0,key:r,value:t.state.value[r]})),getters:n.filter(r=>s.get(r)._getters).map(r=>{const o=s.get(r);return{editable:!1,key:r,value:o._getters.reduce((a,l)=>(a[l]=o[l],a),{})}})}}const e={state:Object.keys(t.$state).map(n=>({editable:!0,key:n,value:t.$state[n]}))};return t._getters&&t._getters.length&&(e.getters=t._getters.map(n=>({editable:!1,key:n,value:t[n]}))),t._customProperties.size&&(e.customProperties=Array.from(t._customProperties).map(n=>({editable:!0,key:n,value:t[n]}))),e}function ju(t){return t?Array.isArray(t)?t.reduce((e,n)=>(e.keys.push(n.key),e.operations.push(n.type),e.oldValue[n.key]=n.oldValue,e.newValue[n.key]=n.newValue,e),{oldValue:{},keys:[],operations:[],newValue:{}}):{operation:$e(t.type),key:$e(t.key),oldValue:t.oldValue,newValue:t.newValue}:{}}function Bu(t){switch(t){case Ue.direct:return"mutation";case Ue.patchFunction:return"$patch";case Ue.patchObject:return"$patch";default:return"unknown"}}let Ht=!0;const us=[],Tt="pinia:mutations",be="pinia",fs=t=>" "+t;function Vu(t,e){vo({id:"dev.esm.pinia",label:"Pinia ",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:us,app:t},n=>{typeof n.now!="function"&&ge("You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),n.addTimelineLayer({id:Tt,label:"Pinia ",color:15064968}),n.addInspector({id:be,label:"Pinia ",icon:"storage",treeFilterPlaceholder:"Search stores",actions:[{icon:"content_copy",action:()=>{Ou(e)},tooltip:"Serialize and copy the state"},{icon:"content_paste",action:async()=>{await Mu(e),n.sendInspectorTree(be),n.sendInspectorState(be)},tooltip:"Replace the state with the content of your clipboard"},{icon:"save",action:()=>{ku(e)},tooltip:"Save the state as a JSON file"},{icon:"folder_open",action:async()=>{await Nu(e),n.sendInspectorTree(be),n.sendInspectorState(be)},tooltip:"Import the state from a JSON file"}],nodeActions:[{icon:"restore",tooltip:"Reset the state (option store only)",action:s=>{const i=e._s.get(s);i?i._isOptionsAPI?(i.$reset(),ge(`Store "${s}" reset.`)):ge(`Cannot reset "${s}" store because it's a setup store.`,"warn"):ge(`Cannot reset "${s}" store because it wasn't found.`,"warn")}}]}),n.on.inspectComponent((s,i)=>{const r=s.componentInstance&&s.componentInstance.proxy;if(r&&r._pStores){const o=s.componentInstance.proxy._pStores;Object.values(o).forEach(a=>{s.instanceData.state.push({type:fs(a.$id),key:"state",editable:!0,value:a._isOptionsAPI?{_custom:{value:z(a.$state),actions:[{icon:"restore",tooltip:"Reset the state of this store",action:()=>a.$reset()}]}}:Object.keys(a.$state).reduce((l,c)=>(l[c]=a.$state[c],l),{})}),a._getters&&a._getters.length&&s.instanceData.state.push({type:fs(a.$id),key:"getters",editable:!1,value:a._getters.reduce((l,c)=>{try{l[c]=a[c]}catch(d){l[c]=d}return l},{})})})}}),n.on.getInspectorTree(s=>{if(s.app===t&&s.inspectorId===be){let i=[e];i=i.concat(Array.from(e._s.values())),s.rootNodes=(s.filter?i.filter(r=>"$id"in r?r.$id.toLowerCase().includes(s.filter.toLowerCase()):Lo.toLowerCase().includes(s.filter.toLowerCase())):i).map(Uu)}}),n.on.getInspectorState(s=>{if(s.app===t&&s.inspectorId===be){const i=s.nodeId===vi?e:e._s.get(s.nodeId);if(!i)return;i&&(s.state=$u(i))}}),n.on.editInspectorState((s,i)=>{if(s.app===t&&s.inspectorId===be){const r=s.nodeId===vi?e:e._s.get(s.nodeId);if(!r)return ge(`store "${s.nodeId}" not found`,"error");const{path:o}=s;Ai(r)?o.unshift("state"):(o.length!==1||!r._customProperties.has(o[0])||o[0]in r.$state)&&o.unshift("$state"),Ht=!1,s.set(r,o,s.state.value),Ht=!0}}),n.on.editComponentState(s=>{if(s.type.startsWith("")){const i=s.type.replace(/^\s*/,""),r=e._s.get(i);if(!r)return ge(`store "${i}" not found`,"error");const{path:o}=s;if(o[0]!=="state")return ge(`Invalid path for store "${i}":
${o}
Only state can be modified.`);o[0]="$state",Ht=!1,s.set(r,o,s.state.value),Ht=!0}})})}function Ku(t,e){us.includes(fs(e.$id))||us.push(fs(e.$id)),vo({id:"dev.esm.pinia",label:"Pinia ",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:us,app:t,settings:{logStoreChanges:{label:"Notify about new/deleted stores",type:"boolean",defaultValue:!0}}},n=>{const s=typeof n.now=="function"?n.now.bind(n):Date.now;e.$onAction(({after:o,onError:a,name:l,args:c})=>{const d=Ro++;n.addTimelineEvent({layerId:Tt,event:{time:s(),title:" "+l,subtitle:"start",data:{store:$e(e.$id),action:$e(l),args:c},groupId:d}}),o(f=>{Ot=void 0,n.addTimelineEvent({layerId:Tt,event:{time:s(),title:" "+l,subtitle:"end",data:{store:$e(e.$id),action:$e(l),args:c,result:f},groupId:d}})}),a(f=>{Ot=void 0,n.addTimelineEvent({layerId:Tt,event:{time:s(),logType:"error",title:" "+l,subtitle:"end",data:{store:$e(e.$id),action:$e(l),args:c,error:f},groupId:d}})})},!0),e._customProperties.forEach(o=>{un(()=>mr(e[o]),(a,l)=>{n.notifyComponentUpdate(),n.sendInspectorState(be),Ht&&n.addTimelineEvent({layerId:Tt,event:{time:s(),title:"Change",subtitle:o,data:{newValue:a,oldValue:l},groupId:Ot}})},{deep:!0})}),e.$subscribe(({events:o,type:a},l)=>{if(n.notifyComponentUpdate(),n.sendInspectorState(be),!Ht)return;const c={time:s(),title:Bu(a),data:{store:$e(e.$id),...ju(o)},groupId:Ot};Ot=void 0,a===Ue.patchFunction?c.subtitle="":a===Ue.patchObject?c.subtitle="":o&&!Array.isArray(o)&&(c.subtitle=o.type),o&&(c.data["rawEvent(s)"]={_custom:{display:"DebuggerEvent",type:"object",tooltip:"raw DebuggerEvent[]",value:o}}),n.addTimelineEvent({layerId:Tt,event:c})},{detached:!0,flush:"sync"});const i=e._hotUpdate;e._hotUpdate=Me(o=>{i(o),n.addTimelineEvent({layerId:Tt,event:{time:s(),title:" "+e.$id,subtitle:"HMR update",data:{store:$e(e.$id),info:$e("HMR update")}}}),n.notifyComponentUpdate(),n.sendInspectorTree(be),n.sendInspectorState(be)});const{$dispose:r}=e;e.$dispose=()=>{r(),n.notifyComponentUpdate(),n.sendInspectorTree(be),n.sendInspectorState(be),n.getSettings().logStoreChanges&&ge(`Disposed "${e.$id}" store `)},n.notifyComponentUpdate(),n.sendInspectorTree(be),n.sendInspectorState(be),n.getSettings().logStoreChanges&&ge(`"${e.$id}" store installed `)})}let Ro=0,Ot;function Io(t,e){const n=e.reduce((s,i)=>(s[i]=z(t)[i],s),{});for(const s in n)t[s]=function(){const i=Ro,r=new Proxy(t,{get(...o){return Ot=i,Reflect.get(...o)},set(...o){return Ot=i,Reflect.set(...o)}});return n[s].apply(r,arguments)}}function Hu({app:t,store:e,options:n}){if(!e.$id.startsWith("__hot:")){if(n.state&&(e._isOptionsAPI=!0),typeof n.state=="function"){Io(e,Object.keys(n.actions));const s=e._hotUpdate;z(e)._hotUpdate=function(i){s.apply(this,arguments),Io(e,Object.keys(i._hmrPayload.actions))}}Ku(t,e)}}function Wu(){const t=Wi(!0),e=t.run(()=>Ns({}));let n=[],s=[];const i=Me({install(r){mn(i),i._a=r,r.provide(xo,i),r.config.globalProperties.$pinia=i,as&&Vu(r,i),s.forEach(o=>n.push(o)),s=[]},use(r){return!this._a&&!vu?s.push(r):n.push(r),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return as&&typeof Proxy<"u"&&i.use(Hu),i}function To(t,e){for(const n in e){const s=e[n];if(!(n in t))continue;const i=t[n];It(i)&&It(s)&&!ae(s)&&!Ke(s)?t[n]=To(i,s):t[n]=s}return t}const Gu=()=>{};function Oo(t,e,n,s=Gu){t.push(e);const i=()=>{const r=t.indexOf(e);r>-1&&(t.splice(r,1),s())};return!n&&La()&&Ra(i),i}function Wt(t,...e){t.slice().forEach(n=>{n(...e)})}function xi(t,e){t instanceof Map&&e instanceof Map&&e.forEach((n,s)=>t.set(s,n)),t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const s=e[n],i=t[n];It(i)&&It(s)&&t.hasOwnProperty(n)&&!ae(s)&&!Ke(s)?t[n]=xi(i,s):t[n]=s}return t}const qu=Symbol("pinia:skipHydration");function zu(t){return!It(t)||!t.hasOwnProperty(qu)}const{assign:je}=Object;function Mo(t){return!!(ae(t)&&t.effect)}function ko(t,e,n,s){const{state:i,actions:r,getters:o}=e,a=n.state.value[t];let l;function c(){!a&&!s&&(n.state.value[t]=i?i():{});const d=br(s?Ns(i?i():{}).value:n.state.value[t]);return je(d,r,Object.keys(o||{}).reduce((f,g)=>(g in d&&console.warn(`[]: A getter cannot have the same name as another state property. Rename one of them. Found with "${g}" in store "${t}".`),f[g]=Me(fi(()=>{mn(n);const w=n._s.get(t);return o[g].call(w,w)})),f),{}))}return l=_i(t,c,e,n,s,!0),l.$reset=function(){const f=i?i():{};this.$patch(g=>{je(g,f)})},l}function _i(t,e,n={},s,i,r){let o;const a=je({actions:{}},n);if(!s._e.active)throw new Error("Pinia destroyed");const l={deep:!0};l.onTrigger=m=>{c?w=m:c==!1&&!N._hotUpdating&&(Array.isArray(w)?w.push(m):console.error(" debuggerEvents should be an array. This is most likely an internal Pinia bug."))};let c,d,f=Me([]),g=Me([]),w;const I=s.state.value[t];!r&&!I&&!i&&(s.state.value[t]={});const v=Ns({});let T;function $(m){let y;c=d=!1,w=[],typeof m=="function"?(m(s.state.value[t]),y={type:Ue.patchFunction,storeId:t,events:w}):(xi(s.state.value[t],m),y={type:Ue.patchObject,payload:m,storeId:t,events:w});const p=T=Symbol();Bs().then(()=>{T===p&&(c=!0)}),d=!0,Wt(f,y,s.state.value[t])}const K=()=>{throw new Error(`: Store "${t}" is built using the setup syntax and does not implement $reset().`)};function W(){o.stop(),f=[],g=[],s._s.delete(t)}function k(m,y){return function(){mn(s);const p=Array.from(arguments),E=[],H=[];function le(O){E.push(O)}function j(O){H.push(O)}Wt(g,{args:p,name:m,store:N,after:le,onError:j});let Z;try{Z=y.apply(this&&this.$id===t?this:N,p)}catch(O){throw Wt(H,O),O}return Z instanceof Promise?Z.then(O=>(Wt(E,O),O)).catch(O=>(Wt(H,O),Promise.reject(O))):(Wt(E,Z),Z)}}const Y=Me({actions:{},getters:{},state:[],hotState:v}),re={_p:s,$id:t,$onAction:Oo.bind(null,g),$patch:$,$reset:K,$subscribe(m,y={}){const p=Oo(f,m,y.detached,()=>E()),E=o.run(()=>un(()=>s.state.value[t],H=>{(y.flush==="sync"?d:c)&&m({storeId:t,type:Ue.direct,events:w},H)},je({},l,y)));return p},$dispose:W},N=Nn(je({_hmrPayload:Y,_customProperties:Me(new Set)},re));s._s.set(t,N);const L=s._e.run(()=>(o=Wi(),o.run(()=>e())));for(const m in L){const y=L[m];if(ae(y)&&!Mo(y)||Ke(y))i?rs(v.value,m,Bn(L,m)):r||(I&&zu(y)&&(ae(y)?y.value=I[m]:xi(y,I[m])),s.state.value[t][m]=y),Y.state.push(m);else if(typeof y=="function"){const p=i?y:k(m,y);L[m]=p,Y.actions[m]=y,a.actions[m]=y}else Mo(y)&&(Y.getters[m]=r?n.getters[m]:y,os&&(L._getters||(L._getters=Me([]))).push(m))}if(je(N,L),je(z(N),L),Object.defineProperty(N,"$state",{get:()=>i?v.value:s.state.value[t],set:m=>{if(i)throw new Error("cannot set hotState");$(y=>{je(y,m)})}}),N._hotUpdate=Me(m=>{N._hotUpdating=!0,m._hmrPayload.state.forEach(y=>{if(y in N.$state){const p=m.$state[y],E=N.$state[y];typeof p=="object"&&It(p)&&It(E)?To(p,E):m.$state[y]=E}rs(N,y,Bn(m.$state,y))}),Object.keys(N.$state).forEach(y=>{y in m.$state||pi(N,y)}),c=!1,d=!1,s.state.value[t]=Bn(m._hmrPayload,"hotState"),d=!0,Bs().then(()=>{c=!0});for(const y in m._hmrPayload.actions){const p=m[y];rs(N,y,k(y,p))}for(const y in m._hmrPayload.getters){const p=m._hmrPayload.getters[y],E=r?fi(()=>(mn(s),p.call(N,N))):p;rs(N,y,E)}Object.keys(N._hmrPayload.getters).forEach(y=>{y in m._hmrPayload.getters||pi(N,y)}),Object.keys(N._hmrPayload.actions).forEach(y=>{y in m._hmrPayload.actions||pi(N,y)}),N._hmrPayload=m._hmrPayload,N._getters=m._getters,N._hotUpdating=!1}),as){const m={writable:!0,configurable:!0,enumerable:!1};["_p","_hmrPayload","_getters","_customProperties"].forEach(y=>{Object.defineProperty(N,y,{value:N[y],...m})})}return s._p.forEach(m=>{if(as){const y=o.run(()=>m({store:N,app:s._a,pinia:s,options:a}));Object.keys(y||{}).forEach(p=>N._customProperties.add(p)),je(N,y)}else je(N,o.run(()=>m({store:N,app:s._a,pinia:s,options:a})))}),N.$state&&typeof N.$state=="object"&&typeof N.$state.constructor=="function"&&!N.$state.constructor.toString().includes("[native code]")&&console.warn(`[]: The "state" must be a plain object. It cannot be
	state: () => new MyClass()
Found in store "${N.$id}".`),I&&r&&n.hydrate&&n.hydrate(N.$state,I),c=!0,d=!0,N}function Ju(t,e,n){let s,i;const r=typeof e=="function";typeof t=="string"?(s=t,i=r?n:e):(i=t,s=t.id);function o(a,l){const c=Uc();if(a=a||c&&cn(xo,null),a&&mn(a),!wi)throw new Error(`[]: getActivePinia was called with no active Pinia. Did you forget to install pinia?
	const pinia = createPinia()
	app.use(pinia)
This will fail in production.`);a=wi,a._s.has(s)||(r?_i(s,e,i,a):ko(s,i,a),o._pinia=a);const d=a._s.get(s);if(l){const f="__hot:"+s,g=r?_i(f,e,i,a,!0):ko(f,je({},i),a,!0);l._hotUpdate(g),delete a.state.value[f],a._s.delete(f)}if(os&&c&&c.proxy&&!l){const f=c.proxy,g="_pStores"in f?f._pStores:f._pStores={};g[s]=d}return d}return o.$id=s,o}class Do{constructor(){this.newEntry=new Ye({})}}const Xu={latestConnectionError:"",lastKeePassRPCRefresh:0,ActiveKeePassDatabaseIndex:-1,KeePassDatabases:[],PasswordProfiles:[],notifications:[],connected:!1,connectedWebsocket:!1,currentSearchTerm:null,loginsFound:!1,searchResults:null,saveState:new Do,generatedPassword:"",saveEntryResult:{result:null,receivedAt:new Date,fileName:null,uuid:null},entryUpdateStartedAtTimestamp:0};var Pi=(t=>(t.Event="event",t.Websocket="websocket",t))(Pi||{});function Yu(t,e){return Ju(t,e)}const No=Yu("kee",{state:()=>Xu,getters:{showGeneratePasswordLink:t=>t.connected,showMatchedLogins:t=>!!t.loginsFound,showNotifications:t=>t.notifications&&!!t.notifications.length,databaseIsOpen:t=>t.connected&&!!t.KeePassDatabases.length,databaseName:t=>{if(t.KeePassDatabases&&t.KeePassDatabases.length&&t.ActiveKeePassDatabaseIndex>=0){const e=t.KeePassDatabases[t.ActiveKeePassDatabaseIndex];return e.name?e.name:e.fileName.replace(/^.*[\\/]/,"")}return""},connectionStatus(t){return t.connected?t.KeePassDatabases.length>1?vs("multiplePasswordSourcesEnabled",[t.KeePassDatabases.length.toString()]):t.KeePassDatabases.length==1?this.databaseName:Xe("notifyBarLoginToKeePassButton_tip"):Xe("notifyBarLaunchKeePassButton_tip")},connectionStatusDetail(t){if(t.connected){if(t.KeePassDatabases.length>1)return vs("loggedInMultiple_tip",[t.KeePassDatabases.length.toString(),this.databaseName]);if(t.KeePassDatabases.length==1)return vs("loggedIn_tip",this.databaseName)}return Xe("notifyBarLaunchKeePass_label")},showOpenKeePassButton:t=>{if(t.connectedWebsocket){const e=t.KeePassDatabases.some(s=>s.sessionType===Pi.Websocket),n=t.KeePassDatabases.some(s=>s.sessionType===Pi.Websocket&&s.sessionFeatures.indexOf("KPRPC_OPEN_AND_FOCUS_DATABASE")>=0);return!!(!e||n)}else return!1}},actions:{updateActiveKeePassDatabaseIndex(t){this.$patch({ActiveKeePassDatabaseIndex:t})},updateConnected(t){this.$patch({connected:t})},updateConnectedWebsocket(t){this.$patch({connectedWebsocket:t})},updateCurrentSearchTerm(t){this.$patch({currentSearchTerm:t})},updateKeePassDatabases(t){this.$patch({KeePassDatabases:t})},updateLastKeePassRPCRefresh(t){this.$patch({lastKeePassRPCRefresh:t})},updateLatestConnectionError(t){this.$patch({latestConnectionError:t})},updateLoginsFound(t){this.$patch({loginsFound:t||!1})},updateNotifications(t){this.$patch({notifications:t})},updatePasswordProfiles(t){this.$patch({PasswordProfiles:t})},updateGeneratedPassword(t){this.$patch({generatedPassword:t})},updateSubmittedData(t){this.saveState||new Do,this.$patch({saveState:{submittedData:t||null}})},updateSaveState(t){this.$patch({saveState:t||null})},updateSearchResults(t){this.$patch({searchResults:t||null})},updateSearchResultWithFullDetails(t){const e=t.uuid;for(const n of this.searchResults)if(n.uuid===e){n.fullDetails=t||null;break}},addNotification(t){this.notifications.push(t)},updateSaveEntryResult(t){this.$patch({saveEntryResult:t||null})},removeFieldFromActiveEntry(t){const e=this.saveState.newEntry.fields.findIndex(i=>i.type==="text"),n=this.saveState.newEntry.fields.findIndex(i=>i.type==="password"),s=this.saveState.newEntry.fields.findIndex(i=>i.uuid===(t||null));if(this.saveState.newEntry.fields.splice(s,1),s===e){const i=this.saveState.newEntry.fields.findIndex(o=>o.type==="text");if(i<0)return;const r=this.saveState.newEntry.fields.splice(i,1)[0];this.saveState.newEntry.fields.splice(s,0,new Fe({...r,name:"KeePass username"}))}else if(s===n){const i=this.saveState.newEntry.fields.findIndex(o=>o.type==="password");if(i<0)return;const r=this.saveState.newEntry.fields.splice(i,1)[0];this.saveState.newEntry.fields.splice(s,0,new Fe({...r,name:"KeePass password"}))}},updateEntryUpdateStartedAtTimestamp(t){this.$patch({entryUpdateStartedAtTimestamp:t||null})}}});let Si,Ci;function Qu(){return Ci||(Ci=Wu()),Si||(Si=pu(Vl),Si.use(Ci)),No()}const Uo=No();class Zu{constructor(e,n,s,i,r,o,a){this.myPort=e,this.parentFrameId=n,this.formUtils=s,this.formSaving=i,this.Logger=r,this.config=o,this.matchFinder=a,this.findLoginOp={},this.matchResult=new aa,this.formFinderTimer=null,this.keeFieldIcon=new oa(e,n,s,this.createMatchedLoginsPanelNearNode.bind(this))}executePrimaryAction(){this.matchResult.entries&&this.matchResult.entries.length>0&&this.matchResult.mostRelevantFormIndex!=null&&this.matchResult.mostRelevantFormIndex>=0&&(this.matchResult.entries[this.matchResult.mostRelevantFormIndex].length==1?(this.fillAndSubmit(!1,this.matchResult.mostRelevantFormIndex,0),this.closeMatchedLoginsPanel()):this.matchResult.entries[this.matchResult.mostRelevantFormIndex].length>1&&(this.closeMatchedLoginsPanel(),this.matchedLoginsPanelStub=new Jt(pt.MatchedLogins,null,this.parentFrameId),this.matchedLoginsPanelStub.createPanel()))}createMatchedLoginsPanelInCenter(e){this.closeMatchedLoginsPanel(),this.matchedLoginsPanelStub=new Jt(pt.MatchedLogins,null,e),this.matchedLoginsPanelStub.createPanel()}createMatchedLoginsPanelNearNode(e){this.closeMatchedLoginsPanel(),this.matchedLoginsPanelStub=new Jt(pt.MatchedLogins,e,this.parentFrameId),this.matchedLoginsPanelStub.createPanel(),this.matchedLoginsPanelStubRaf=requestAnimationFrame(()=>this.updateMatchedLoginsPanelPosition())}closeMatchedLoginsPanel(){this.matchedLoginsPanelStub&&this.matchedLoginsPanelStub.closePanel(),this.matchedLoginsPanelStub=null,cancelAnimationFrame(this.matchedLoginsPanelStubRaf)}updateMatchedLoginsPanelPosition(){this.matchedLoginsPanelStub.updateBoundingClientRect(),this.matchedLoginsPanelStubRaf=requestAnimationFrame(()=>this.updateMatchedLoginsPanelPosition())}calculateFieldMatchScore(e,n,s,i,r){const o=e.field;let a=1;return o.type!==n.type?0:(o.locators[0].id!=null&&o.locators[0].id!=null&&o.locators[0].id!=""&&o.locators[0].id==n.locators[0].id?a+=50:i.punishWrongIDAndName&&n.locators[0].id&&(a-=5),o.locators[0].name!=null&&o.locators[0].name!=null&&o.locators[0].name!=""&&o.locators[0].name==n.locators[0].name?a+=40:i.punishWrongIDAndName&&n.locators[0].name&&(a-=5),o.locators[0].type==="radio"&&o.value!=null&&o.value!=null&&o.value!=""&&o.value==n.value&&(a+=30),r===void 0&&this.formUtils.isDOMElementVisible(e.DOMelement)&&(r=!0),a+=r?35:0,a)}fillMatchedFields(e,n,s,i){e.sort(function(o,a){return a.score-o.score});const r=[];for(;e.length>0&&e[0].score>0;){const o=e[0].formFieldIndex,a=e[0].dataFieldIndex,l=s[o],c=n[a],d=l.DOMelement,f=this.getFormFieldCurrentValue(d,l.field.locators[0].type);i&&f&&f!==d.keeInitialDetectedValue?this.Logger.info("Not filling field because it's not empty and was edited by user since last load/fill"):i&&f&&!Ie.current.autoFillFieldsWithExistingValue?this.Logger.info("Not filling field because it's not empty and user preference is to prevent automatic fill"):(this.Logger.info("We will populate field "+o+" (id:"+l.field.locators[0].id+")"),this.fillASingleField(d,l.field.locators[0].type,c.value)),r.push({id:l.field.locators[0].id,DOMelement:d,name:l.field.locators[0].name,value:c.value}),e=e.filter(function(g){return g.dataFieldIndex!=a&&g.formFieldIndex!=o}),e.sort(function(g,w){return w.score-g.score})}return r}getFormFieldCurrentValue(e,n){let s=e.value;return e instanceof HTMLInputElement&&n==="checkbox"&&(e.checked?s="KEEFOX_CHECKED_FLAG_TRUE":s="KEEFOX_CHECKED_FLAG_FALSE"),s}fillASingleField(e,n,s){n=="select-one"?e.value=s:e instanceof HTMLInputElement&&n=="checkbox"?s=="KEEFOX_CHECKED_FLAG_TRUE"?e.checked=!0:e.checked=!1:e instanceof HTMLInputElement&&n=="radio"?e.checked=!0:e.value=s,e.keeInitialDetectedValue=s,e.dispatchEvent(new UIEvent("input",{view:window,bubbles:!0,cancelable:!0})),e.dispatchEvent(new UIEvent("change",{view:window,bubbles:!0,cancelable:!0}))}fillManyFormFields(e,n,s,i,r){if(this.Logger.debug("_fillManyFormFields started"),e==null||e==null||n==null||n==null)return;this.Logger.debug("We've received the data we need"),this.Logger.info("Filling form fields for page "+s);const o=[];for(let a=0;a<e.length;a++)for(let l=0;l<n.length;l++){const c=this.calculateFieldMatchScore(e[a],n[l],s,i);this.Logger.debug("Suitability of putting data field "+l+" into form field "+a+" (id: "+e[a].field.locators[0].id+") is "+c),o.push({score:c,dataFieldIndex:l,formFieldIndex:a})}return this.fillMatchedFields(o,n,e,r)}initMatchResult(e){this.matchResult.UUID="",this.matchResult.entries=[],this.matchResult.mostRelevantFormIndex=null,this.matchResult.mustAutoFillForm=!1,this.matchResult.cannotAutoFillForm=!1,this.matchResult.mustAutoSubmitForm=!1,this.matchResult.cannotAutoSubmitForm=!1,e.UUID!=null&&e.UUID!=null&&e.UUID!=""&&(this.matchResult.UUID=e.UUID,this.matchResult.dbFileName=e.dbFileName,this.matchResult.mustAutoFillForm=!0,e.mustAutoSubmitForm&&(this.matchResult.mustAutoSubmitForm=!0)),this.matchResult.doc=window.document,this.matchResult.formReadyForSubmit=!1,this.matchResult.autofillOnSuccess=e.autofillOnSuccess,this.matchResult.autosubmitOnSuccess=e.autosubmitOnSuccess,this.matchResult.notifyUserOnSuccess=e.notifyUserOnSuccess,this.matchResult.wrappers=[],this.matchResult.allMatchingLogins=[],this.matchResult.formRelevanceScores=[],this.matchResult.submitTargets=[],this.matchResult.usernameIndexArray=[],this.matchResult.passwordFieldsArray=[],this.matchResult.otherFieldsArray=[],this.matchResult.requestCount=0,this.matchResult.responseCount=0,this.matchResult.requestIds=[]}findMatchesInThisFrame(e={}){this.semanticWhitelistCache={},this.semanticBlacklistCache={},this.formFinderTimer!==null&&(clearTimeout(this.formFinderTimer),this.formFinderTimer=null),window.document.forms.length>50&&this.Logger.debug("Too many forms on this page. Assuming it is not a login page and avoiding looking for login forms in order to avoid performance impact.");let n=new Array;for(let a=0;a<window.document.forms.length;a++)n.push(window.document.forms.item(a));const s=this.scanForOrphanedFields(window.document);if(s&&(n=Array.prototype.slice.call(n),n.push(s)),!n||n.length==0){this.Logger.info("No forms found on this page.");return}const i=new URL(window.document.URL);i.hostname=punycode.toUnicode(i.hostname),this.Logger.info("Finding matches in a document. readyState: "+window.document.readyState),this.initMatchResult(e),this.matchResult.forms=n;const r=Ie.siteConfigFor(i.href);this.Logger.debug("findMatches processing "+n.length+" forms");let o=!1;for(let a=0;a<n.length;a++){const l=n[a];this.matchResult.entries[a]=[],this.matchResult.formRelevanceScores[a]=0,this.Logger.debug("about to get form fields");let c;try{c=this.formUtils.getFormFields(l,!1,50)}catch($){this.Logger.debug("Lost interest in this form after finding too many fields"+$);continue}const d=c.actualUsernameIndex,f=c.pwFields,g=c.otherFields;let w=null;if(w=Ie.isFormInteresting(l,r,g.map($=>$.field)),w===!1){this.Logger.debug("Lost interest in this form after inspecting field names and IDs");continue}const I=f==null||f.length<=0||f[0]==null,v=d<0||g==null||g.length<=0||g[d]==null;if(I&&(v||w!==!0)){this.Logger.debug("No password field found in this form and either there are no other fields or no whitelisted text field or form element");continue}let T;I?T=g[d].DOMelement:T=f[0].DOMelement,this.attachSubmitHandlers(l,T,a),this.matchResult.usernameIndexArray[a]=d,this.matchResult.passwordFieldsArray[a]=f,this.matchResult.otherFieldsArray[a]=g,this.matchResult.submitTargets[a]=T,o?(this.Logger.debug("form["+a+"]: reusing entries from last form."),this.findLoginOp.formIndexes.push(a)):(this.findLoginOp.forms=n,this.findLoginOp.formIndexes=[a],this.findLoginOp.wrappedBy=this.matchResult,this.matchResult.wrappers[a]=this.findLoginOp,this.matchResult.requestCount++,this.matchFinder(i.href),o=!0)}}async attachSubmitHandlers(e,n,s){try{await Promise.resolve();const i=performance.now(),r=this.findSubmitButton(e,n);this.formSaving.addSubmitHandler(r,e),ce.info("Submit handlers attached asynchronously to form "+s+" in "+(performance.now()-i)+"ms")}catch(i){ce.warn("Exception while adding submit handler. Message: "+i.message)}}scanForOrphanedFields(e){const n=new Date().getTime(),s=[];let i=null;const r=e.getElementsByTagName("input");for(const a of r)a.form||s.push(a);s.length>0&&(i={elements:s,id:"Kee-pseudo-form",name:"Kee-pseudo-form",ownerDocument:e,getElementsByTagName:function(){return this.elements},querySelectorAll:function(){return[]},submit:function(){},offsetParent:!0,addEventListener:function(){},removeEventListener:function(){}});const o=new Date().getTime();return this.Logger.debug("scanForOrphanedFields took: "+(o-n)),i}findLoginsResultHandler(e){if(!e)return;const n=e.filter(s=>Ye.getUsernameField(s)||Ye.getPasswordField(s));this.matchResult=this.getRelevanceOfLoginMatchesAgainstAllForms(n,this.findLoginOp,this.matchResult),this.fillAndSubmit(!0)}getRelevanceOfLoginMatchesAgainstAllForms(e,n,s){const i=JSON.stringify(e);let r=!1;for(let o=0;o<n.forms.length;o++){if(n.formIndexes.indexOf(o)==-1||(s.entries[o]=JSON.parse(i),s.entries[o].length==0))continue;this.Logger.info("match found!");const a=this.formUtils.isDOMElementVisible(s.submitTargets[o]);this.Logger.debug("formVisible: "+a);const l={other:s.otherFieldsArray[o].map(c=>this.formUtils.isDOMElementVisible(c.DOMelement)),password:s.passwordFieldsArray[o].map(c=>this.formUtils.isDOMElementVisible(c.DOMelement))};for(let c=0;c<s.entries[o].length;c++){const f={punishWrongIDAndName:Uo.KeePassDatabases.find(I=>I.fileName===s.entries[o][c].database.fileName).sessionFeatures.indexOf("KPRPC_FIELD_DEFAULT_NAME_AND_ID_EMPTY")>=0},{score:g,lowFieldMatchRatio:w}=this.calculateRelevanceScore(s.entries[o][c],s.passwordFieldsArray[o],s.otherFieldsArray[o],s.currentPage,a,f,l);s.entries[o][c].relevanceScore=g,s.entries[o][c].lowFieldMatchRatio=w,s.entries[o][c].formIndex=o,s.entries[o][c].entryIndex=c,(!r||s.entries[o][c].relevanceScore>s.allMatchingLogins[c].relevanceScore)&&(this.Logger.debug("Higher relevance score found for entry "+c+" with formIndex "+s.entries[o][c].formIndex+" ("+n.forms[o].id+")"),s.allMatchingLogins[c]=s.entries[o][c])}r=!0,s.entries[o].forEach(function(c){c.relevanceScore>s.formRelevanceScores[o]&&(s.formRelevanceScores[o]=c.relevanceScore)}),this.Logger.debug("Relevance of form "+o+" ("+n.forms[o].id+") is "+s.formRelevanceScores[o])}return s}getMostRelevantForm(e){const n=this.matchResult;if(!n)return{bestFormIndex:0,bestRelevanceScore:0,bestFindMatchesResult:void 0};let s=0;return e>=0?s=e:n.formRelevanceScores.forEach((i,r)=>{this.Logger.debug("Relevance of form is "+i),i>n.formRelevanceScores[s]&&(s=r)}),this.Logger.debug("The most relevant form is #"+s),{bestFormIndex:s,bestRelevanceScore:n.formRelevanceScores[s],bestFindMatchesResult:n}}fillAndSubmit(e,n,s){this.Logger.debug("fillAndSubmit started. automated: "+e+", formIndex: "+n+", entryIndex: "+s);const i=this.matchResult;let r;if(!i)return;const o=!e&&(i.mostRelevantFormIndex!==null&&i.mostRelevantFormIndex>=0||typeof n<"u")&&typeof s<"u";o||(i.mostRelevantFormIndex=this.getMostRelevantForm().bestFormIndex),n!==null&&n>=0&&(i.mostRelevantFormIndex=n);const a=i.forms[i.mostRelevantFormIndex],l=i.passwordFieldsArray[i.mostRelevantFormIndex],c=i.otherFieldsArray[i.mostRelevantFormIndex],d=this.sortMatchedEntries(i.entries[i.mostRelevantFormIndex]),f=this.flagUserPreferredEntry(d);!o&&i.entries[i.mostRelevantFormIndex].length>0&&(this.myPort.postMessage({entries:f}),this.keeFieldIcon.addKeeIconToFields(l,c,f));let g=null,w={fill:!1,submit:!1},I=!1;if(i.cannotAutoFillForm=!1,i.cannotAutoSubmitForm=!1,e&&i.autofillOnSuccess===!1&&(i.cannotAutoFillForm=!0),e&&i.autosubmitOnSuccess===!1&&(i.cannotAutoSubmitForm=!0),!i.cannotAutoFillForm){this.Logger.debug("We are allowed to auto-fill this form."),s>=0&&(g=i.entries[i.mostRelevantFormIndex][s],i.UUID=null,i.dbFileName=null);let v=!1;if(g==null&&i.entries[i.mostRelevantFormIndex].length==1)g=i.entries[i.mostRelevantFormIndex][0],v=!0;else if(i.UUID!=null&&i.UUID!=null&&i.UUID!=""){this.Logger.debug("We've been told to use an entry with this UUID: "+i.UUID);for(let T=0;T<i.entries[i.mostRelevantFormIndex].length;T++)if(i.entries[i.mostRelevantFormIndex][T].uuid==i.UUID){g=i.entries[i.mostRelevantFormIndex][T];break}g==null&&this.Logger.warn("Could not find the required KeePass entry. Maybe the website redirected you to a different domain or hostname?")}else g==null&&(!i.entries[i.mostRelevantFormIndex]||!i.entries[i.mostRelevantFormIndex].length)?this.Logger.debug("No entries for form."):g==null&&(this.Logger.debug("Multiple entries for form, so using preferred or most relevant."),g=f.find(T=>T.isPreferredMatch)||f[0],I=!0,v=!0);if(e&&v&&g!=null&&(g.relevanceScore<1?(this.Logger.info("Our selected entry is not relevant enough to exceed our threshold so will not be auto-filled."),g=null):g.lowFieldMatchRatio&&(this.Logger.info("Our selected entry has a low field match ratio so will not be auto-filled."),g=null)),g!=null){const T=o||(e&&I&&!this.config.autoFillFormsWithMultipleMatches?!1:this.config.autoFillForms),$=o?this.config.autoSubmitMatchedForms:this.config.autoSubmitForms;if(w={fill:T,submit:$},o||(g.alwaysAutoFill&&(w.fill=!0),g.neverAutoFill&&(w.fill=!1)),(!o||!this.config.manualSubmitOverrideProhibited)&&(g.alwaysAutoSubmit&&(w.submit=!0),g.neverAutoSubmit&&(w.submit=!1)),w.fill||i.mustAutoFillForm){this.Logger.debug("Going to auto-fill a form");const W={punishWrongIDAndName:Uo.KeePassDatabases.find(re=>re.fileName===g.database.fileName).sessionFeatures.indexOf("KPRPC_FIELD_DEFAULT_NAME_AND_ID_EMPTY")>=0},k=this.fillManyFormFields(c,g.fields.filter(re=>re.type!=="password"),-1,W,e),Y=this.fillManyFormFields(l,g.fields.filter(re=>re.type==="password"),-1,W,e);i.formReadyForSubmit=!0,i.lastFilledPasswords=Y,i.lastFilledOther=k,Y&&Y.length>0?r=Y[0].DOMelement:k&&k.length>0&&(r=k[0].DOMelement),this.formSaving.updateMatchResult(i)}}}i.formReadyForSubmit&&(i.UUID==null||i.UUID==null||i.UUID=="")&&(this.Logger.debug("Syncing UUID to: "+g.uuid),i.UUID=g.uuid,i.dbFileName=g.database.fileName),!i.cannotAutoSubmitForm&&(w.submit||i.mustAutoSubmitForm)&&i.formReadyForSubmit?(this.Logger.info("Auto-submitting form..."),this.submitForm(a,r)):o?this.Logger.debug("Matched entry request is not being auto-submitted."):this.matchResult.allMatchingLogins.length>0?e?this.Logger.debug("Automatic form fill complete."):this.Logger.debug("Manual form fill complete."):this.Logger.info("Nothing to fill.")}sortMatchedEntries(e){return e.map(n=>new Ye({...n})).sort((n,s)=>s.relevanceScore-n.relevanceScore)}flagUserPreferredEntry(e){const n=new URL(window.document.URL);n.hostname=punycode.toUnicode(n.hostname);const s=Ie.siteConfigFor(n.href);return e.map(i=>new Ye({...i,isPreferredMatch:s.preferredEntryUuid===i.uuid}))}findSubmitButton(e,n){const s=[];let I=0;const v=(p,E)=>this.commonAncestorDistance(p,E,T),T=new Map,$=this.formUtils;function K(p,E){I>E+60+100||(($.isDOMElementVisible(p)||!$.isDOMElementVisible(n))&&(E+=60),I>E+100)||(s.push({distance:v(p,n),element:p,score:E}),I=E)}function W(p){var H;const E=[];return p.hasAttribute("aria-label")&&E.push(p.getAttribute("aria-label").toLowerCase()),(H=p.getAttribute("aria-labelledby"))==null||H.trim().split(" ").forEach(le=>{if(le){const j=e.ownerDocument.getElementById(le);j&&j.innerText&&E.push(j.innerText.toLowerCase())}}),E}if(Array.from(e.ownerDocument.getElementsByTagName("button")).forEach(p=>{if(p.isConnected&&(!p.type||p.type!="reset")){const E=[];p.name&&E.push(p.name.toLowerCase()),p.textContent&&E.push(p.textContent.toLowerCase()),p.value&&E.push(p.value.toLowerCase()),E.push(...W(p));let H=this.scoreAdjustmentForMagicWords(E,50,this.semanticWhitelistCache,this.semanticBlacklistCache);H+=p.form&&p.form==e?60:40,K(p,H)}}),Array.from(e.getElementsByTagName("input")).forEach(p=>{if(p.isConnected&&p.type!=null){let E=0;if(p.type=="submit"||p.type=="button"){p.name&&(E+=this.scoreAdjustmentForMagicWords([p.name.toLowerCase()],50,this.semanticWhitelistCache,this.semanticBlacklistCache));const H=[];p.value&&H.push(p.value.toLowerCase()),H.push(...W(p)),H.length>0&&(E+=this.scoreAdjustmentForMagicWords(H,40,this.semanticWhitelistCache,this.semanticBlacklistCache)),p.id&&(E+=this.scoreAdjustmentForMagicWords([p.id.toLowerCase()],20,this.semanticWhitelistCache,this.semanticBlacklistCache))}if(p.type=="submit"||p.type=="button"||p.type=="image"){let H=E;H+=p.type=="button"?30:p.type=="image"?40:50,K(p,H)}}}),Array.from(e.ownerDocument.querySelectorAll("[role=button]:not(button)")).forEach(p=>{if(!p.isConnected)return;const E=[];p.name&&E.push(p.name.toLowerCase()),p.id&&E.push(p.id.toLowerCase()),p.title&&E.push(p.title.toLowerCase()),p.innerText&&E.push(p.innerText.toLowerCase()),p.dataSet&&p.dataSet.length>0&&p.dataSet.tooltip&&E.push(p.dataSet.tooltip.toLowerCase()),E.push(...W(p));let H=this.scoreAdjustmentForMagicWords(E,50,this.semanticWhitelistCache,this.semanticBlacklistCache);H+=p.form&&p.form==e?20:10,K(p,H)}),s.length<=0)return null;if(s.length===1)return s[0].element;const k=s.sort((p,E)=>p.distance>E.distance?-1:p.distance<E.distance?1:0),Y=k[0].distance-k[k.length-1].distance,re=Math.min(100,20*Y);let N=1/k.length,L=k[0].distance;k.forEach((p,E,H)=>{p.distance<L&&(N=(E+1)/H.length,L=p.distance),p.score+=N*re});let m=k[0].score,y=k[0].element;for(let p=1;p<k.length;p++)k[p].score>m&&(m=k[p].score,y=k[p].element);return y}scoreAdjustmentForMagicWords(e,n,s,i){const r=["submit","login","enter","log in","signin","sign in","next","continue"],o=["reset","cancel","back","abort","undo","exit","empty","clear","captcha","totp","forgot","dismiss","delete","show","reveal"];let a=!1,l=!1;for(let c=0;c<e.length&&!a;c++){if(!e[c])continue;const d=e[c].trim();if(d){if(s[d]===!0){a=!0;break}if(s[d]!==!1)for(let f=0;f<r.length;f++)if(d.indexOf(r[f])>=0){a=!0,s[d]=!0;break}else s[d]=!1}}for(let c=0;c<e.length&&!l;c++){if(!e[c])continue;const d=e[c].trim();if(d){if(i[d]===!0){l=!0;break}if(i[d]!==!1)for(let f=0;f<o.length;f++)if(d.indexOf(o[f])>=0){l=!0,i[d]=!0;break}else i[d]=!1}}return a&&l?0:l?-1*n:a?n:0}commonAncestorDistance(e,n,s){let i=1,r=!1;const o=[];let a=0;for(;e=e.parentElement;){const l=s.get(e);if(l!==void 0){i+=l,a=l+1,r=!0;break}if(o.push(e),e.contains(n)){r=!0;break}i++}if(r){if(o.length>0)for(let l=a;l<i&&o.length>0;l++){const c=o.pop();s.set(c,l)}return i}else return 9007199254740991}submitForm(e,n){const s=this.findSubmitButton(e,n);this.formSaving.removeAllSubmitHandlers(),s!=null?(this.Logger.debug("Submiting using element: "+s.name+": "+s.id),s.click()):(this.Logger.debug("Submiting using form"),e.submit())}calculateRelevanceScore(e,n,s,i,r,o,a){let l=0,c=!1;l+=e.matchAccuracy,r||(l-=20);const d=.501,[f,g]=this.determineRelevanceScores("other",s,e.fields.filter(m=>m.type!=="password"),i,o,a.other),[w,I]=this.determineRelevanceScores("password",n,e.fields.filter(m=>m.type==="password"),i,o,a.password),v=f+w,T=n.concat(s).filter(m=>m.field.locators[0].id||m.field.locators[0].name||m.field.value).length,$=e.fields.filter(m=>m.locators[0].id||m.locators[0].name||m.value).length,K=n.concat(s).filter(m=>(m.field.type==="password"||m.field.type==="text")&&(m.field.locators[0].id||m.field.locators[0].name)).length,W=e.fields.filter(m=>(m.type==="password"||m.type==="text")&&(m.locators[0].id||m.locators[0].name||m.value)).length,k=g.filter(m=>m===!0).length+I.filter(m=>m===!0).length,Y=n.filter(m=>{var y;return(y=m.field.locators[0].autocompleteValues)==null?void 0:y.some(p=>p==="new-password")}).length,re=Math.min(W+Y,k)/Math.max(1,K);this.Logger.debug("formFieldCount: "+T+", loginFieldCount: "+$+", loginFieldCountForAutofill: "+W+", formFieldCountForAutofill: "+K+", formMatchedFieldCountForAutofill: "+k+", numberOfNewPasswordFields: "+Y+", fieldMatchRatio: "+re),re<d&&(this.Logger.info(e.uuid+" will be forced to not auto-fill because the form field match ratio ("+re+") is not high enough."),c=!0);const L=v/Math.max(T,$)/(Math.abs(T-$)+1);return l+=L,this.Logger.info("Relevance for "+e.uuid+" is: "+l),{score:l,lowFieldMatchRatio:c}}determineRelevanceScores(e,n,s,i,r,o){var d;let a=0;const l=1,c=[];for(let f=0;f<n.length;f++){let g=0;const w=n[f].field;(d=w.locators[0].autocompleteValues)!=null&&d.some(I=>I==="new-password")&&(c[f]=!0);for(let I=0;I<s.length;I++){const v=this.calculateFieldMatchScore(n[f],s[I],i,r,o[f]);this.Logger.debug("Suitability of putting "+e+" field "+I+" into form field "+f+" (id: "+w.locators[0].id+") is "+v),v>g&&(g=v);const T=v-(o[f]?0:10);(w.type==="text"||w.type==="password")&&T>=l&&s[I].value&&!c[f]&&(c[f]=!0),(n[f].highestScore==null||v>n[f].highestScore)&&(n[f].highestScore=v)}a+=g}return[a,c]}removeKeeIconFromAllFields(){this.keeFieldIcon.removeKeeIconFromAllFields()}}class ef{}class tf{constructor(e){this.findLoginOps=[],this.matchResults=[],this.Logger=e}countAllDocuments(e){if(!this.isUriWeCanFill(e.location))return 0;let n=1;if(e.frames.length>0){const s=e.frames;for(let i=0;i<s.length;i++)n+=this.countAllDocuments(s[i])}return n}isUriWeCanFill(e){return e.protocol=="http:"||e.protocol=="https:"||e.protocol=="file:"}isATextFormFieldType(e){return!(e=="checkbox"||e=="select-one"||e=="radio"||e=="password"||e=="hidden"||e=="submit"||e=="button"||e=="file"||e=="image"||e=="reset")}isAKnownUsernameString(e){const n=e.toLowerCase();return n=="username"||n=="j_username"||n=="user_name"||n=="user"||n=="user-name"||n=="login"||n=="vb_login_username"||n=="name"||n=="user name"||n=="user id"||n=="user-id"||n=="userid"||n=="email"||n=="e-mail"||n=="id"||n=="form_loginname"||n=="wpname"||n=="mail"||n=="loginid"||n=="login id"||n=="login_name"||n=="openid_identifier"||n=="authentication_email"||n=="openid"||n=="auth_email"||n=="auth_id"||n=="authentication_identifier"||n=="authentication_id"||n=="customer_number"||n=="customernumber"||n=="onlineid"}getFormFields(e,n,s){var I;const i=[],r=[],o=[];let a=-1,l=-1,c=-1;const d=e.elements.length,f=d<2e3?d:2e3;for(let v=0;v<f;v++){if(o.length>s)throw new Error("Too many fields");if(e.elements[v].localName.toLowerCase()=="object"||e.elements[v].localName.toLowerCase()=="keygen"||e.elements[v].localName.toLowerCase()=="output"||e.elements[v].localName.toLowerCase()!="input"&&(e.elements[v].type==null||e.elements[v].type==null))continue;const T=e.elements[v].type.toLowerCase();if(T=="fieldset"||T!="password"&&!this.isATextFormFieldType(T)&&T!="checkbox"&&T!="radio"&&T!="select-one"||T=="radio"&&n&&e.elements[v].checked==!1||T=="password"&&n&&!e.elements[v].value||T=="select-one"&&n&&!e.elements[v].value)continue;this.Logger.debug(`processing field with domtype ${T}...`),o[o.length]={index:v,element:new ef,type:T};let $=e.elements[v].value;T=="checkbox"&&(e.elements[v].checked?$="KEEFOX_CHECKED_FLAG_TRUE":$="KEEFOX_CHECKED_FLAG_FALSE");const K=Fe.fromDOM(e.elements[v],T,$);o[o.length-1].element.field=K,o[o.length-1].element.DOMelement=e.elements[v],T=="password"&&a==-1&&(a=o.length-1),this.isATextFormFieldType(T)&&l==-1&&(this.isAKnownUsernameString(e.elements[v].name)||(I=K.locators[0].labels)!=null&&I.some(W=>this.isAKnownUsernameString(W)))&&(l=o.length-1),e.elements[v].keeInitialDetectedValue==null&&(e.elements[v].keeInitialDetectedValue=$)}l!=-1?c=l:a>0&&(c=a-1),this.Logger.debug("usernameIndex: "+c);let g=0,w=0;for(let v=0;v<o.length;v++)o[v].type=="password"?i[i.length]=o[v].element:(this.isATextFormFieldType(o[v].type)||o[v].type=="checkbox"||o[v].type=="radio"||o[v].type=="select-one")&&(r[r.length]=o[v].element,v==c?w=g:g++);return this.Logger.debug("actualUsernameIndex: "+w),this.Logger.debug("otherFields.length:"+r.length),{actualUsernameIndex:w,pwFields:i,otherFields:r}}isDOMElementVisible(e){return!(!e.offsetParent&&e.offsetHeight===0&&e.offsetWidth===0)}}class nf{constructor(e,n,s){this.myPort=e,this.SubmitHandlerAttachments=[],this.Logger=n,this.formUtils=s}addSubmitHandler(e,n){const s=i=>this.submitHandler(i,n);this.SubmitHandlerAttachments.push({target:e,form:n,handler:s}),e&&e.addEventListener("click",s),n.addEventListener("submit",s)}removeAllSubmitHandlers(){this.SubmitHandlerAttachments.forEach(e=>{e.target&&e.target.removeEventListener("click",e.handler),e.form.removeEventListener("submit",e.handler)}),this.SubmitHandlerAttachments=[]}updateMatchResult(e){this.matchResult=e}submitHandler(e,n){this.Logger.debug("submitHandler called"),this.removeAllSubmitHandlers();const s=n.ownerDocument,i=new URL(s.URL);if(i.hostname=punycode.toUnicode(i.hostname),Ie.siteConfigFor(i.href).preventSaveNotification)return;let o=!1,a=!1;const l=[];let c;try{c=this.formUtils.getFormFields(n,!0,50)}catch($){this.Logger.warn("Lost interest in this form after finding too many fields"+$);return}const d=c.actualUsernameIndex,f=c.pwFields,g=c.otherFields;if(f.length>1){let $=-1;for(let K=0;K<f.length&&$==-1;K++)for(let W=K+1;W<f.length&&$==-1;W++)f[W].field.value==f[K].field.value&&($=W);if($==-1){this.Logger.debug("multiple passwords found (with no identical values)");for(let K=0;K<f.length;K++)l.push(f[K])}else this.Logger.debug("Looks like a password change form or new registration form has been submitted"),f.length==2?(l.push(f[0]),o=!1,a=!0):(o=!1,a=!1,l.push(f[$]))}else f!=null&&f[0]!=null&&f[0]!=null&&l.push(f[0]);const w=this.removeEmptyFields(l),I=this.removeEmptyFields(g),v=!this.matchResult||!this.matchResult.lastFilledPasswords||this.hasFieldBeenModified(w,this.matchResult.lastFilledPasswords),T=!this.matchResult||!this.matchResult.lastFilledOther||this.hasFieldBeenModified(I,this.matchResult.lastFilledOther);if(v||T){const $={url:i.href,fields:Fe.combineDomFieldLists(d,I.map(K=>K.field),w.map(K=>K.field)),title:s.title||i.hostname,isPasswordChangeForm:o,isRegistrationForm:a};this.myPort.postMessage({submittedData:$})}}removeEmptyFields(e){return e.filter(n=>n.field.value||n.field.type==="boolean")}hasFieldBeenModified(e,n){return!!n.find(s=>{const i=e.find(r=>s.DOMelement==r.DOMelement);return!i||i.field.value!=s.value})}}const $o=pt.GeneratePassword;class sf{constructor(e){this.parentFrameId=e}createGeneratePasswordPanel(){this.closeGeneratePasswordPanel(),this.generatePasswordPanelStub=new Jt($o,null,this.parentFrameId),this.generatePasswordPanelStub.createPanel()}createGeneratePasswordPanelNearNode(e){this.closeGeneratePasswordPanel(),this.generatePasswordPanelStub=new Jt($o,e,this.parentFrameId),this.generatePasswordPanelStub.createPanel(),this.generatePasswordPanelStubRaf=requestAnimationFrame(()=>this.updateGeneratePasswordPanelPosition())}closeGeneratePasswordPanel(){this.generatePasswordPanelStub&&this.generatePasswordPanelStub.closePanel(),this.generatePasswordPanelStub=null,cancelAnimationFrame(this.generatePasswordPanelStubRaf)}updateGeneratePasswordPanelPosition(){this.generatePasswordPanelStub.updateBoundingClientRect(),this.generatePasswordPanelStubRaf=requestAnimationFrame(()=>this.updateGeneratePasswordPanelPosition())}}class rf{constructor(){this.receivedPayloads=[],this.initialized=!1,this.pendingMutations=[]}init(e,n,s,i){this.store=e,this.store.$subscribe(r=>{if(r.type==Ue.patchObject)this.handleLocallyGeneratedMutation(r);else throw new Error("Pinia generated a non-object mutation. We don't think we can support this and need to know that it is possible for it to happen! Tell us now or weird things will happen.")}),this.sendMutationPayload=s,this.store.$patch(n),this.initialized=!0,this.processPendingLocallySourcedMutations(),i&&i()}reset(e){this.store.$patch(e)}onRemoteMutationPayload(e){this.initialized&&(this.receivedPayloads.push(e),this.store.$patch(e))}handleLocallyGeneratedMutation(e){if(!this.initialized)return this.pendingMutations.push(e);if(!this.receivedPayloads.length)return this.sendMutationPayload(e.payload);for(let n=this.receivedPayloads.length-1;n>=0;n--)if(bs(this.receivedPayloads[n],e.payload)){this.receivedPayloads.splice(n,1);break}else n==0&&this.sendMutationPayload(e.payload)}processPendingLocallySourcedMutations(){if(this.pendingMutations.length)for(let e=0;e<this.pendingMutations.length;e++)this.sendMutationPayload(this.pendingMutations[e].payload),this.pendingMutations.splice(e,1)}}class of{postMessage(e){this.port.postMessage(e)}startup(e){this.port=Te.runtime.connect({name:e})}shutdown(){this.port=null}get raw(){return this.port}}const Se=new of;var pn;pn?ce&&ce.error?ce.error("Duplicate Kee content script instance detected! Found this many other instances: "+pn):console.error("Duplicate Kee content script instance detected! Found this many other instances: "+pn):pn=0,pn+=1;let ds,me,bn,hs,gs,ms,Fi=!1,jo,Bo=!1,Vo=!1,Ko,Ei;const Mt=Qu();if(document.body){let t=function(r){Se.postMessage({findMatches:{uri:r}})},e=function(){if(window.location.hostname.endsWith("tutorial-addon.kee.pm")){const r=document.createElement("KeeFoxAddonStateTransferElement");r.setAttribute("state",JSON.stringify({connected:Mt.connected,version:Te.runtime.getManifest().version,dbLoaded:Mt.KeePassDatabases.length>0,sessionNames:Mt.KeePassDatabases.map(a=>a.sessionType.toString()).filter((a,l,c)=>c.indexOf(a)===l)})),document.documentElement.appendChild(r);const o=new Event("KeeFoxAddonStateTransferEvent",{bubbles:!0,cancelable:!1});r.dispatchEvent(o)}},n=function(r){gs=r,ce.attachConfig(Ie.current),ds=new tf(ce),bn=new nf(Se.raw,ce,ds),me=new Zu(Se.raw,gs,ds,bn,ce,Ie.current,t),hs=new sf(gs),Ei.observe(document.body,{childList:!0,subtree:!0}),e()},s=function(){ce.debug("content page starting");try{i(),Se.raw==null&&ce.warn("Failed to connect to messaging port. We'll try again later.")}catch(r){ce.warn("Failed to connect to messaging port. We'll try again later. Exception message: "+r.message)}jo=window.setInterval(()=>{if(Se.raw==null){ce.info("Messaging port was not established at page startup. Retrying now...");try{i(),Se.raw==null&&ce.warn("Failed to connect to messaging port. We'll try again later.")}catch(r){ce.warn("Failed to connect to messaging port. We'll try again later. Exception message: "+r.message)}}else clearInterval(jo)},5e3),ce.debug("content page ready")},i=function(){if(Se.raw){ce.warn("port already set to '"+Se.raw.name+"'. Skipping startup because it should already be underway but is taking a long time.");return}ms=new rf(Mt),Se.startup("page"),Se.raw.onMessage.addListener(function(r){if(ce.debug("In browser content page script, received message from background script"),r.initialState&&ms.init(r.initialState,o=>{Se.postMessage({mutation:o})}),r.mutation){ms.onRemoteMutation(r.mutation);return}Fi?r.action==Ve.DetectForms&&(r.resetState&&ms.reset(r.resetState),me.removeKeeIconFromAllFields(),bn.removeAllSubmitHandlers(),Mt.entryUpdateStartedAtTimestamp>=Date.now()-2e4?me.findMatchesInThisFrame({autofillOnSuccess:!1,autosubmitOnSuccess:!1}):me.findMatchesInThisFrame()):(n(r.frameId),me.findMatchesInThisFrame(),Fi=!0),r.findMatchesResult&&me.findLoginsResultHandler(r.findMatchesResult),r.action==Ve.ManualFill&&r.selectedEntryIndex!=null&&(me.closeMatchedLoginsPanel(),me.fillAndSubmit(!1,null,r.selectedEntryIndex)),r.action==Ve.ResetForms&&(me.removeKeeIconFromAllFields(),bn.removeAllSubmitHandlers()),r.action==Ve.Primary&&me.executePrimaryAction(),r.action==Ve.GeneratePassword&&hs.createGeneratePasswordPanel(),r.action==Ve.CloseAllPanels&&(hs.closeGeneratePasswordPanel(),me.closeMatchedLoginsPanel()),r.action==Ve.ShowMatchedLoginsPanel&&me.createMatchedLoginsPanelInCenter(r.frameId)})};Ei=new MutationObserver(r=>{if(me.formFinderTimer!==null||!Mt.connected||Mt.ActiveKeePassDatabaseIndex<0)return;let o=!1;const a=["form","input","select"];r.forEach(l=>{if(!o&&l.type==="childList"&&l.addedNodes.length>0)for(const c of l.addedNodes){if(o)break;for(let d=0;d<a.length;d++){const f=c;if(f.querySelector&&f.querySelector(a[d])){o=!0;break}}}}),o&&(me.formFinderTimer=window.setTimeout(me.findMatchesInThisFrame.bind(me),500))}),window.addEventListener("pageshow",()=>{Bo=!0,clearTimeout(Ko),Vo&&s()}),window.addEventListener("pagehide",()=>{Ei.disconnect(),Se.raw&&Se.postMessage({action:Ve.PageHide}),me.removeKeeIconFromAllFields(),Se.shutdown(),Fi=!1,gs=void 0,ds=void 0,bn=void 0,me=void 0,hs=void 0}),Ie.load(()=>{Vo=!0,Bo?s():Ko=window.setTimeout(s,1500)})}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguZ2xvYmFsLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi9ub2RlX21vZHVsZXMvd2ViZXh0ZW5zaW9uLXBvbHlmaWxsL2Rpc3QvYnJvd3Nlci1wb2x5ZmlsbC5qcyIsIi4uLy4uLy4uL3NyYy9jb21tb24vY29uZmlnLnRzIiwiLi4vLi4vLi4vc3JjL2NvbW1vbi9EZWZhdWx0U2l0ZUNvbmZpZy50cyIsIi4uLy4uLy4uL3NyYy9jb21tb24vQ29uZmlnTWlncmF0aW9ucy50cyIsIi4uLy4uLy4uL3NyYy9jb21tb24vdXRpbHMudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvc2VyaWFsaXplLWVycm9yL2Vycm9yLWNvbnN0cnVjdG9ycy5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9zZXJpYWxpemUtZXJyb3IvaW5kZXguanMiLCIuLi8uLi8uLi9zcmMvY29tbW9uL0xvZ2dlci50cyIsIi4uLy4uLy4uL3NyYy9jb21tb24vQ29uZmlnTWFuYWdlci50cyIsIi4uLy4uLy4uL3NyYy9wYWdlL1BhbmVsU3R1Yi50cyIsIi4uLy4uLy4uL3NyYy9jb21tb24vQWN0aW9uLnRzIiwiLi4vLi4vLi4vc3JjL3BhZ2Uva2VlRmllbGRJY29uLnRzIiwiLi4vLi4vLi4vc3JjL3BhZ2UvTWF0Y2hSZXN1bHQudHMiLCIuLi8uLi8uLi9zcmMvY29tbW9uL21vZGVsL1Nlc3Npb25UeXBlLnRzIiwiLi4vLi4vLi4vc3JjL2NvbW1vbi9tb2RlbC9FbnRyeVN1bW1hcnkudHMiLCIuLi8uLi8uLi9zcmMvY29tbW9uL21vZGVsL0dyb3VwLnRzIiwiLi4vLi4vLi4vc3JjL2NvbW1vbi9tb2RlbC9EYXRhYmFzZS50cyIsIi4uLy4uLy4uL3NyYy9jb21tb24vRG9sbGFyUG9seWZpbGxzLnRzIiwiLi4vLi4vLi4vc3JjL2NvbW1vbi9tb2RlbC9Mb2NhdG9yLnRzIiwiLi4vLi4vLi4vc3JjL2NvbW1vbi9tb2RlbC9LUFJQQ0RUT3MudHMiLCIuLi8uLi8uLi9zcmMvY29tbW9uL21vZGVsL0ZpZWxkLnRzIiwiLi4vLi4vLi4vc3JjL2NvbW1vbi9tb2RlbC9Hcm91cFN1bW1hcnkudHMiLCIuLi8uLi8uLi9zcmMvY29tbW9uL21vZGVsL0VudHJ5LnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B2dWUvc2hhcmVkL2Rpc3Qvc2hhcmVkLmVzbS1idW5kbGVyLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B2dWUvcmVhY3Rpdml0eS9kaXN0L3JlYWN0aXZpdHkuZXNtLWJ1bmRsZXIuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS9ydW50aW1lLWNvcmUvZGlzdC9ydW50aW1lLWNvcmUuZXNtLWJ1bmRsZXIuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS9ydW50aW1lLWRvbS9kaXN0L3J1bnRpbWUtZG9tLmVzbS1idW5kbGVyLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS9kaXN0L3Z1ZS5ydW50aW1lLmVzbS1idW5kbGVyLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1kZW1pL2xpYi9pbmRleC5tanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS9kZXZ0b29scy1hcGkvbGliL2VzbS9lbnYuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS9kZXZ0b29scy1hcGkvbGliL2VzbS9jb25zdC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdnVlL2RldnRvb2xzLWFwaS9saWIvZXNtL3RpbWUuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS9kZXZ0b29scy1hcGkvbGliL2VzbS9wcm94eS5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdnVlL2RldnRvb2xzLWFwaS9saWIvZXNtL2luZGV4LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3BpbmlhL2Rpc3QvcGluaWEubWpzIiwiLi4vLi4vLi4vc3JjL2NvbW1vbi9TYXZlU3RhdGUudHMiLCIuLi8uLi8uLi9zcmMvc3RvcmUvS2VlU3RhdGUudHMiLCIuLi8uLi8uLi9zcmMvY29tbW9uL1Nlc3Npb25UeXBlLnRzIiwiLi4vLi4vLi4vc3JjL3N0b3JlL2luZGV4LnRzIiwiLi4vLi4vLi4vc3JjL3BhZ2UvZm9ybUZpbGxpbmcudHMiLCIuLi8uLi8uLi9zcmMvcGFnZS9NYXRjaGVkRmllbGQudHMiLCIuLi8uLi8uLi9zcmMvcGFnZS9mb3Jtc1V0aWxzLnRzIiwiLi4vLi4vLi4vc3JjL3BhZ2UvZm9ybVNhdmluZy50cyIsIi4uLy4uLy4uL3NyYy9wYWdlL1Bhc3N3b3JkR2VuZXJhdG9yLnRzIiwiLi4vLi4vLi4vc3JjL3N0b3JlL3N5bmNDb250ZW50LnRzIiwiLi4vLi4vLi4vc3JjL2NvbW1vbi9wb3J0LnRzIiwiLi4vLi4vLi4vc3JjL3BhZ2UvcGFnZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoXCJ3ZWJleHRlbnNpb24tcG9seWZpbGxcIiwgW1wibW9kdWxlXCJdLCBmYWN0b3J5KTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIGZhY3RvcnkobW9kdWxlKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgbW9kID0ge1xuICAgICAgZXhwb3J0czoge31cbiAgICB9O1xuICAgIGZhY3RvcnkobW9kKTtcbiAgICBnbG9iYWwuYnJvd3NlciA9IG1vZC5leHBvcnRzO1xuICB9XG59KSh0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0aGlzLCBmdW5jdGlvbiAobW9kdWxlKSB7XG4gIC8qIHdlYmV4dGVuc2lvbi1wb2x5ZmlsbCAtIHYwLjEwLjAgLSBGcmkgQXVnIDEyIDIwMjIgMTk6NDI6NDQgKi9cblxuICAvKiAtKi0gTW9kZTogaW5kZW50LXRhYnMtbW9kZTogbmlsOyBqcy1pbmRlbnQtbGV2ZWw6IDIgLSotICovXG5cbiAgLyogdmltOiBzZXQgc3RzPTIgc3c9MiBldCB0dz04MDogKi9cblxuICAvKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gICAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXNcbiAgICogZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy4gKi9cbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgaWYgKCFnbG9iYWxUaGlzLmNocm9tZT8ucnVudGltZT8uaWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIHNjcmlwdCBzaG91bGQgb25seSBiZSBsb2FkZWQgaW4gYSBicm93c2VyIGV4dGVuc2lvbi5cIik7XG4gIH1cblxuICBpZiAodHlwZW9mIGdsb2JhbFRoaXMuYnJvd3NlciA9PT0gXCJ1bmRlZmluZWRcIiB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZ2xvYmFsVGhpcy5icm93c2VyKSAhPT0gT2JqZWN0LnByb3RvdHlwZSkge1xuICAgIGNvbnN0IENIUk9NRV9TRU5EX01FU1NBR0VfQ0FMTEJBQ0tfTk9fUkVTUE9OU0VfTUVTU0FHRSA9IFwiVGhlIG1lc3NhZ2UgcG9ydCBjbG9zZWQgYmVmb3JlIGEgcmVzcG9uc2Ugd2FzIHJlY2VpdmVkLlwiOyAvLyBXcmFwcGluZyB0aGUgYnVsayBvZiB0aGlzIHBvbHlmaWxsIGluIGEgb25lLXRpbWUtdXNlIGZ1bmN0aW9uIGlzIGEgbWlub3JcbiAgICAvLyBvcHRpbWl6YXRpb24gZm9yIEZpcmVmb3guIFNpbmNlIFNwaWRlcm1vbmtleSBkb2VzIG5vdCBmdWxseSBwYXJzZSB0aGVcbiAgICAvLyBjb250ZW50cyBvZiBhIGZ1bmN0aW9uIHVudGlsIHRoZSBmaXJzdCB0aW1lIGl0J3MgY2FsbGVkLCBhbmQgc2luY2UgaXQgd2lsbFxuICAgIC8vIG5ldmVyIGFjdHVhbGx5IG5lZWQgdG8gYmUgY2FsbGVkLCB0aGlzIGFsbG93cyB0aGUgcG9seWZpbGwgdG8gYmUgaW5jbHVkZWRcbiAgICAvLyBpbiBGaXJlZm94IG5lYXJseSBmb3IgZnJlZS5cblxuICAgIGNvbnN0IHdyYXBBUElzID0gZXh0ZW5zaW9uQVBJcyA9PiB7XG4gICAgICAvLyBOT1RFOiBhcGlNZXRhZGF0YSBpcyBhc3NvY2lhdGVkIHRvIHRoZSBjb250ZW50IG9mIHRoZSBhcGktbWV0YWRhdGEuanNvbiBmaWxlXG4gICAgICAvLyBhdCBidWlsZCB0aW1lIGJ5IHJlcGxhY2luZyB0aGUgZm9sbG93aW5nIFwiaW5jbHVkZVwiIHdpdGggdGhlIGNvbnRlbnQgb2YgdGhlXG4gICAgICAvLyBKU09OIGZpbGUuXG4gICAgICBjb25zdCBhcGlNZXRhZGF0YSA9IHtcbiAgICAgICAgXCJhbGFybXNcIjoge1xuICAgICAgICAgIFwiY2xlYXJcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJjbGVhckFsbFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldEFsbFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcImJvb2ttYXJrc1wiOiB7XG4gICAgICAgICAgXCJjcmVhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRDaGlsZHJlblwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldFJlY2VudFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldFN1YlRyZWVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRUcmVlXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAwLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDBcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwibW92ZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMixcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAyXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlbW92ZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlbW92ZVRyZWVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJzZWFyY2hcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJ1cGRhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDIsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJicm93c2VyQWN0aW9uXCI6IHtcbiAgICAgICAgICBcImRpc2FibGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwiZmFsbGJhY2tUb05vQ2FsbGJhY2tcIjogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJlbmFibGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwiZmFsbGJhY2tUb05vQ2FsbGJhY2tcIjogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRCYWRnZUJhY2tncm91bmRDb2xvclwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldEJhZGdlVGV4dFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldFBvcHVwXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiZ2V0VGl0bGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJvcGVuUG9wdXBcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMFxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJzZXRCYWRnZUJhY2tncm91bmRDb2xvclwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJmYWxsYmFja1RvTm9DYWxsYmFja1wiOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInNldEJhZGdlVGV4dFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJmYWxsYmFja1RvTm9DYWxsYmFja1wiOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInNldEljb25cIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJzZXRQb3B1cFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJmYWxsYmFja1RvTm9DYWxsYmFja1wiOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInNldFRpdGxlXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDEsXG4gICAgICAgICAgICBcImZhbGxiYWNrVG9Ob0NhbGxiYWNrXCI6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwiYnJvd3NpbmdEYXRhXCI6IHtcbiAgICAgICAgICBcInJlbW92ZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMixcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAyXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlbW92ZUNhY2hlXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwicmVtb3ZlQ29va2llc1wiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlbW92ZURvd25sb2Fkc1wiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlbW92ZUZvcm1EYXRhXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwicmVtb3ZlSGlzdG9yeVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlbW92ZUxvY2FsU3RvcmFnZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlbW92ZVBhc3N3b3Jkc1wiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlbW92ZVBsdWdpbkRhdGFcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJzZXR0aW5nc1wiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcImNvbW1hbmRzXCI6IHtcbiAgICAgICAgICBcImdldEFsbFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcImNvbnRleHRNZW51c1wiOiB7XG4gICAgICAgICAgXCJyZW1vdmVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJyZW1vdmVBbGxcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMFxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJ1cGRhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDIsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJjb29raWVzXCI6IHtcbiAgICAgICAgICBcImdldFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldEFsbFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldEFsbENvb2tpZVN0b3Jlc1wiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlbW92ZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInNldFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcImRldnRvb2xzXCI6IHtcbiAgICAgICAgICBcImluc3BlY3RlZFdpbmRvd1wiOiB7XG4gICAgICAgICAgICBcImV2YWxcIjoge1xuICAgICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDIsXG4gICAgICAgICAgICAgIFwic2luZ2xlQ2FsbGJhY2tBcmdcIjogZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIFwicGFuZWxzXCI6IHtcbiAgICAgICAgICAgIFwiY3JlYXRlXCI6IHtcbiAgICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDMsXG4gICAgICAgICAgICAgIFwibWF4QXJnc1wiOiAzLFxuICAgICAgICAgICAgICBcInNpbmdsZUNhbGxiYWNrQXJnXCI6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcImVsZW1lbnRzXCI6IHtcbiAgICAgICAgICAgICAgXCJjcmVhdGVTaWRlYmFyUGFuZVwiOiB7XG4gICAgICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJkb3dubG9hZHNcIjoge1xuICAgICAgICAgIFwiY2FuY2VsXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiZG93bmxvYWRcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJlcmFzZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldEZpbGVJY29uXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDJcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwib3BlblwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJmYWxsYmFja1RvTm9DYWxsYmFja1wiOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInBhdXNlXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwicmVtb3ZlRmlsZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlc3VtZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInNlYXJjaFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInNob3dcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwiZmFsbGJhY2tUb05vQ2FsbGJhY2tcIjogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJleHRlbnNpb25cIjoge1xuICAgICAgICAgIFwiaXNBbGxvd2VkRmlsZVNjaGVtZUFjY2Vzc1wiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImlzQWxsb3dlZEluY29nbml0b0FjY2Vzc1wiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcImhpc3RvcnlcIjoge1xuICAgICAgICAgIFwiYWRkVXJsXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiZGVsZXRlQWxsXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAwLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDBcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiZGVsZXRlUmFuZ2VcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJkZWxldGVVcmxcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRWaXNpdHNcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJzZWFyY2hcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJpMThuXCI6IHtcbiAgICAgICAgICBcImRldGVjdExhbmd1YWdlXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiZ2V0QWNjZXB0TGFuZ3VhZ2VzXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAwLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDBcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwiaWRlbnRpdHlcIjoge1xuICAgICAgICAgIFwibGF1bmNoV2ViQXV0aEZsb3dcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJpZGxlXCI6IHtcbiAgICAgICAgICBcInF1ZXJ5U3RhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJtYW5hZ2VtZW50XCI6IHtcbiAgICAgICAgICBcImdldFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldEFsbFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldFNlbGZcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMFxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJzZXRFbmFibGVkXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAyLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDJcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwidW5pbnN0YWxsU2VsZlwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcIm5vdGlmaWNhdGlvbnNcIjoge1xuICAgICAgICAgIFwiY2xlYXJcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJjcmVhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRBbGxcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMFxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRQZXJtaXNzaW9uTGV2ZWxcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMFxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJ1cGRhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDIsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJwYWdlQWN0aW9uXCI6IHtcbiAgICAgICAgICBcImdldFBvcHVwXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiZ2V0VGl0bGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJoaWRlXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDEsXG4gICAgICAgICAgICBcImZhbGxiYWNrVG9Ob0NhbGxiYWNrXCI6IHRydWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwic2V0SWNvblwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInNldFBvcHVwXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDEsXG4gICAgICAgICAgICBcImZhbGxiYWNrVG9Ob0NhbGxiYWNrXCI6IHRydWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwic2V0VGl0bGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwiZmFsbGJhY2tUb05vQ2FsbGJhY2tcIjogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJzaG93XCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDEsXG4gICAgICAgICAgICBcImZhbGxiYWNrVG9Ob0NhbGxiYWNrXCI6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwicGVybWlzc2lvbnNcIjoge1xuICAgICAgICAgIFwiY29udGFpbnNcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRBbGxcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMFxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJyZW1vdmVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJyZXF1ZXN0XCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwicnVudGltZVwiOiB7XG4gICAgICAgICAgXCJnZXRCYWNrZ3JvdW5kUGFnZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldFBsYXRmb3JtSW5mb1wiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcIm9wZW5PcHRpb25zUGFnZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlcXVlc3RVcGRhdGVDaGVja1wiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInNlbmRNZXNzYWdlXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDNcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwic2VuZE5hdGl2ZU1lc3NhZ2VcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDIsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJzZXRVbmluc3RhbGxVUkxcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJzZXNzaW9uc1wiOiB7XG4gICAgICAgICAgXCJnZXREZXZpY2VzXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAwLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiZ2V0UmVjZW50bHlDbG9zZWRcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJyZXN0b3JlXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAwLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwic3RvcmFnZVwiOiB7XG4gICAgICAgICAgXCJsb2NhbFwiOiB7XG4gICAgICAgICAgICBcImNsZWFyXCI6IHtcbiAgICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJnZXRcIjoge1xuICAgICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcImdldEJ5dGVzSW5Vc2VcIjoge1xuICAgICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcInJlbW92ZVwiOiB7XG4gICAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwic2V0XCI6IHtcbiAgICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBcIm1hbmFnZWRcIjoge1xuICAgICAgICAgICAgXCJnZXRcIjoge1xuICAgICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcImdldEJ5dGVzSW5Vc2VcIjoge1xuICAgICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIFwic3luY1wiOiB7XG4gICAgICAgICAgICBcImNsZWFyXCI6IHtcbiAgICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJnZXRcIjoge1xuICAgICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcImdldEJ5dGVzSW5Vc2VcIjoge1xuICAgICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcInJlbW92ZVwiOiB7XG4gICAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwic2V0XCI6IHtcbiAgICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcInRhYnNcIjoge1xuICAgICAgICAgIFwiY2FwdHVyZVZpc2libGVUYWJcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJjcmVhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJkZXRlY3RMYW5ndWFnZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImRpc2NhcmRcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJkdXBsaWNhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJleGVjdXRlU2NyaXB0XCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDJcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiZ2V0XCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiZ2V0Q3VycmVudFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldFpvb21cIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRab29tU2V0dGluZ3NcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnb0JhY2tcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnb0ZvcndhcmRcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJoaWdobGlnaHRcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJpbnNlcnRDU1NcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJtb3ZlXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAyLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDJcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwicXVlcnlcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJyZWxvYWRcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJyZW1vdmVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJyZW1vdmVDU1NcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJzZW5kTWVzc2FnZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMixcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAzXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInNldFpvb21cIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJzZXRab29tU2V0dGluZ3NcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJ1cGRhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJ0b3BTaXRlc1wiOiB7XG4gICAgICAgICAgXCJnZXRcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMFxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJ3ZWJOYXZpZ2F0aW9uXCI6IHtcbiAgICAgICAgICBcImdldEFsbEZyYW1lc1wiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldEZyYW1lXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwid2ViUmVxdWVzdFwiOiB7XG4gICAgICAgICAgXCJoYW5kbGVyQmVoYXZpb3JDaGFuZ2VkXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAwLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDBcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwid2luZG93c1wiOiB7XG4gICAgICAgICAgXCJjcmVhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRBbGxcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRDdXJyZW50XCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAwLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiZ2V0TGFzdEZvY3VzZWRcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJyZW1vdmVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJ1cGRhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDIsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgaWYgKE9iamVjdC5rZXlzKGFwaU1ldGFkYXRhKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYXBpLW1ldGFkYXRhLmpzb24gaGFzIG5vdCBiZWVuIGluY2x1ZGVkIGluIGJyb3dzZXItcG9seWZpbGxcIik7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIEEgV2Vha01hcCBzdWJjbGFzcyB3aGljaCBjcmVhdGVzIGFuZCBzdG9yZXMgYSB2YWx1ZSBmb3IgYW55IGtleSB3aGljaCBkb2VzXG4gICAgICAgKiBub3QgZXhpc3Qgd2hlbiBhY2Nlc3NlZCwgYnV0IGJlaGF2ZXMgZXhhY3RseSBhcyBhbiBvcmRpbmFyeSBXZWFrTWFwXG4gICAgICAgKiBvdGhlcndpc2UuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtmdW5jdGlvbn0gY3JlYXRlSXRlbVxuICAgICAgICogICAgICAgIEEgZnVuY3Rpb24gd2hpY2ggd2lsbCBiZSBjYWxsZWQgaW4gb3JkZXIgdG8gY3JlYXRlIHRoZSB2YWx1ZSBmb3IgYW55XG4gICAgICAgKiAgICAgICAga2V5IHdoaWNoIGRvZXMgbm90IGV4aXN0LCB0aGUgZmlyc3QgdGltZSBpdCBpcyBhY2Nlc3NlZC4gVGhlXG4gICAgICAgKiAgICAgICAgZnVuY3Rpb24gcmVjZWl2ZXMsIGFzIGl0cyBvbmx5IGFyZ3VtZW50LCB0aGUga2V5IGJlaW5nIGNyZWF0ZWQuXG4gICAgICAgKi9cblxuXG4gICAgICBjbGFzcyBEZWZhdWx0V2Vha01hcCBleHRlbmRzIFdlYWtNYXAge1xuICAgICAgICBjb25zdHJ1Y3RvcihjcmVhdGVJdGVtLCBpdGVtcyA9IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHN1cGVyKGl0ZW1zKTtcbiAgICAgICAgICB0aGlzLmNyZWF0ZUl0ZW0gPSBjcmVhdGVJdGVtO1xuICAgICAgICB9XG5cbiAgICAgICAgZ2V0KGtleSkge1xuICAgICAgICAgIGlmICghdGhpcy5oYXMoa2V5KSkge1xuICAgICAgICAgICAgdGhpcy5zZXQoa2V5LCB0aGlzLmNyZWF0ZUl0ZW0oa2V5KSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHN1cGVyLmdldChrZXkpO1xuICAgICAgICB9XG5cbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBvYmplY3QgaXMgYW4gb2JqZWN0IHdpdGggYSBgdGhlbmAgbWV0aG9kLCBhbmQgY2FuXG4gICAgICAgKiB0aGVyZWZvcmUgYmUgYXNzdW1lZCB0byBiZWhhdmUgYXMgYSBQcm9taXNlLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHRlc3QuXG4gICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgdmFsdWUgaXMgdGhlbmFibGUuXG4gICAgICAgKi9cblxuXG4gICAgICBjb25zdCBpc1RoZW5hYmxlID0gdmFsdWUgPT4ge1xuICAgICAgICByZXR1cm4gdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiB2YWx1ZS50aGVuID09PSBcImZ1bmN0aW9uXCI7XG4gICAgICB9O1xuICAgICAgLyoqXG4gICAgICAgKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgZnVuY3Rpb24gd2hpY2gsIHdoZW4gY2FsbGVkLCB3aWxsIHJlc29sdmUgb3IgcmVqZWN0XG4gICAgICAgKiB0aGUgZ2l2ZW4gcHJvbWlzZSBiYXNlZCBvbiBob3cgaXQgaXMgY2FsbGVkOlxuICAgICAgICpcbiAgICAgICAqIC0gSWYsIHdoZW4gY2FsbGVkLCBgY2hyb21lLnJ1bnRpbWUubGFzdEVycm9yYCBjb250YWlucyBhIG5vbi1udWxsIG9iamVjdCxcbiAgICAgICAqICAgdGhlIHByb21pc2UgaXMgcmVqZWN0ZWQgd2l0aCB0aGF0IHZhbHVlLlxuICAgICAgICogLSBJZiB0aGUgZnVuY3Rpb24gaXMgY2FsbGVkIHdpdGggZXhhY3RseSBvbmUgYXJndW1lbnQsIHRoZSBwcm9taXNlIGlzXG4gICAgICAgKiAgIHJlc29sdmVkIHRvIHRoYXQgdmFsdWUuXG4gICAgICAgKiAtIE90aGVyd2lzZSwgdGhlIHByb21pc2UgaXMgcmVzb2x2ZWQgdG8gYW4gYXJyYXkgY29udGFpbmluZyBhbGwgb2YgdGhlXG4gICAgICAgKiAgIGZ1bmN0aW9uJ3MgYXJndW1lbnRzLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBwcm9taXNlXG4gICAgICAgKiAgICAgICAgQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHJlc29sdXRpb24gYW5kIHJlamVjdGlvbiBmdW5jdGlvbnMgb2YgYVxuICAgICAgICogICAgICAgIHByb21pc2UuXG4gICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBwcm9taXNlLnJlc29sdmVcbiAgICAgICAqICAgICAgICBUaGUgcHJvbWlzZSdzIHJlc29sdXRpb24gZnVuY3Rpb24uXG4gICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBwcm9taXNlLnJlamVjdFxuICAgICAgICogICAgICAgIFRoZSBwcm9taXNlJ3MgcmVqZWN0aW9uIGZ1bmN0aW9uLlxuICAgICAgICogQHBhcmFtIHtvYmplY3R9IG1ldGFkYXRhXG4gICAgICAgKiAgICAgICAgTWV0YWRhdGEgYWJvdXQgdGhlIHdyYXBwZWQgbWV0aG9kIHdoaWNoIGhhcyBjcmVhdGVkIHRoZSBjYWxsYmFjay5cbiAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gbWV0YWRhdGEuc2luZ2xlQ2FsbGJhY2tBcmdcbiAgICAgICAqICAgICAgICBXaGV0aGVyIG9yIG5vdCB0aGUgcHJvbWlzZSBpcyByZXNvbHZlZCB3aXRoIG9ubHkgdGhlIGZpcnN0XG4gICAgICAgKiAgICAgICAgYXJndW1lbnQgb2YgdGhlIGNhbGxiYWNrLCBhbHRlcm5hdGl2ZWx5IGFuIGFycmF5IG9mIGFsbCB0aGVcbiAgICAgICAqICAgICAgICBjYWxsYmFjayBhcmd1bWVudHMgaXMgcmVzb2x2ZWQuIEJ5IGRlZmF1bHQsIGlmIHRoZSBjYWxsYmFja1xuICAgICAgICogICAgICAgIGZ1bmN0aW9uIGlzIGludm9rZWQgd2l0aCBvbmx5IGEgc2luZ2xlIGFyZ3VtZW50LCB0aGF0IHdpbGwgYmVcbiAgICAgICAqICAgICAgICByZXNvbHZlZCB0byB0aGUgcHJvbWlzZSwgd2hpbGUgYWxsIGFyZ3VtZW50cyB3aWxsIGJlIHJlc29sdmVkIGFzXG4gICAgICAgKiAgICAgICAgYW4gYXJyYXkgaWYgbXVsdGlwbGUgYXJlIGdpdmVuLlxuICAgICAgICpcbiAgICAgICAqIEByZXR1cm5zIHtmdW5jdGlvbn1cbiAgICAgICAqICAgICAgICBUaGUgZ2VuZXJhdGVkIGNhbGxiYWNrIGZ1bmN0aW9uLlxuICAgICAgICovXG5cblxuICAgICAgY29uc3QgbWFrZUNhbGxiYWNrID0gKHByb21pc2UsIG1ldGFkYXRhKSA9PiB7XG4gICAgICAgIHJldHVybiAoLi4uY2FsbGJhY2tBcmdzKSA9PiB7XG4gICAgICAgICAgaWYgKGV4dGVuc2lvbkFQSXMucnVudGltZS5sYXN0RXJyb3IpIHtcbiAgICAgICAgICAgIHByb21pc2UucmVqZWN0KG5ldyBFcnJvcihleHRlbnNpb25BUElzLnJ1bnRpbWUubGFzdEVycm9yLm1lc3NhZ2UpKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKG1ldGFkYXRhLnNpbmdsZUNhbGxiYWNrQXJnIHx8IGNhbGxiYWNrQXJncy5sZW5ndGggPD0gMSAmJiBtZXRhZGF0YS5zaW5nbGVDYWxsYmFja0FyZyAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHByb21pc2UucmVzb2x2ZShjYWxsYmFja0FyZ3NbMF0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwcm9taXNlLnJlc29sdmUoY2FsbGJhY2tBcmdzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9O1xuXG4gICAgICBjb25zdCBwbHVyYWxpemVBcmd1bWVudHMgPSBudW1BcmdzID0+IG51bUFyZ3MgPT0gMSA/IFwiYXJndW1lbnRcIiA6IFwiYXJndW1lbnRzXCI7XG4gICAgICAvKipcbiAgICAgICAqIENyZWF0ZXMgYSB3cmFwcGVyIGZ1bmN0aW9uIGZvciBhIG1ldGhvZCB3aXRoIHRoZSBnaXZlbiBuYW1lIGFuZCBtZXRhZGF0YS5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgICAgICogICAgICAgIFRoZSBuYW1lIG9mIHRoZSBtZXRob2Qgd2hpY2ggaXMgYmVpbmcgd3JhcHBlZC5cbiAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBtZXRhZGF0YVxuICAgICAgICogICAgICAgIE1ldGFkYXRhIGFib3V0IHRoZSBtZXRob2QgYmVpbmcgd3JhcHBlZC5cbiAgICAgICAqIEBwYXJhbSB7aW50ZWdlcn0gbWV0YWRhdGEubWluQXJnc1xuICAgICAgICogICAgICAgIFRoZSBtaW5pbXVtIG51bWJlciBvZiBhcmd1bWVudHMgd2hpY2ggbXVzdCBiZSBwYXNzZWQgdG8gdGhlXG4gICAgICAgKiAgICAgICAgZnVuY3Rpb24uIElmIGNhbGxlZCB3aXRoIGZld2VyIHRoYW4gdGhpcyBudW1iZXIgb2YgYXJndW1lbnRzLCB0aGVcbiAgICAgICAqICAgICAgICB3cmFwcGVyIHdpbGwgcmFpc2UgYW4gZXhjZXB0aW9uLlxuICAgICAgICogQHBhcmFtIHtpbnRlZ2VyfSBtZXRhZGF0YS5tYXhBcmdzXG4gICAgICAgKiAgICAgICAgVGhlIG1heGltdW0gbnVtYmVyIG9mIGFyZ3VtZW50cyB3aGljaCBtYXkgYmUgcGFzc2VkIHRvIHRoZVxuICAgICAgICogICAgICAgIGZ1bmN0aW9uLiBJZiBjYWxsZWQgd2l0aCBtb3JlIHRoYW4gdGhpcyBudW1iZXIgb2YgYXJndW1lbnRzLCB0aGVcbiAgICAgICAqICAgICAgICB3cmFwcGVyIHdpbGwgcmFpc2UgYW4gZXhjZXB0aW9uLlxuICAgICAgICogQHBhcmFtIHtib29sZWFufSBtZXRhZGF0YS5zaW5nbGVDYWxsYmFja0FyZ1xuICAgICAgICogICAgICAgIFdoZXRoZXIgb3Igbm90IHRoZSBwcm9taXNlIGlzIHJlc29sdmVkIHdpdGggb25seSB0aGUgZmlyc3RcbiAgICAgICAqICAgICAgICBhcmd1bWVudCBvZiB0aGUgY2FsbGJhY2ssIGFsdGVybmF0aXZlbHkgYW4gYXJyYXkgb2YgYWxsIHRoZVxuICAgICAgICogICAgICAgIGNhbGxiYWNrIGFyZ3VtZW50cyBpcyByZXNvbHZlZC4gQnkgZGVmYXVsdCwgaWYgdGhlIGNhbGxiYWNrXG4gICAgICAgKiAgICAgICAgZnVuY3Rpb24gaXMgaW52b2tlZCB3aXRoIG9ubHkgYSBzaW5nbGUgYXJndW1lbnQsIHRoYXQgd2lsbCBiZVxuICAgICAgICogICAgICAgIHJlc29sdmVkIHRvIHRoZSBwcm9taXNlLCB3aGlsZSBhbGwgYXJndW1lbnRzIHdpbGwgYmUgcmVzb2x2ZWQgYXNcbiAgICAgICAqICAgICAgICBhbiBhcnJheSBpZiBtdWx0aXBsZSBhcmUgZ2l2ZW4uXG4gICAgICAgKlxuICAgICAgICogQHJldHVybnMge2Z1bmN0aW9uKG9iamVjdCwgLi4uKil9XG4gICAgICAgKiAgICAgICBUaGUgZ2VuZXJhdGVkIHdyYXBwZXIgZnVuY3Rpb24uXG4gICAgICAgKi9cblxuXG4gICAgICBjb25zdCB3cmFwQXN5bmNGdW5jdGlvbiA9IChuYW1lLCBtZXRhZGF0YSkgPT4ge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gYXN5bmNGdW5jdGlvbldyYXBwZXIodGFyZ2V0LCAuLi5hcmdzKSB7XG4gICAgICAgICAgaWYgKGFyZ3MubGVuZ3RoIDwgbWV0YWRhdGEubWluQXJncykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCBhdCBsZWFzdCAke21ldGFkYXRhLm1pbkFyZ3N9ICR7cGx1cmFsaXplQXJndW1lbnRzKG1ldGFkYXRhLm1pbkFyZ3MpfSBmb3IgJHtuYW1lfSgpLCBnb3QgJHthcmdzLmxlbmd0aH1gKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoYXJncy5sZW5ndGggPiBtZXRhZGF0YS5tYXhBcmdzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIGF0IG1vc3QgJHttZXRhZGF0YS5tYXhBcmdzfSAke3BsdXJhbGl6ZUFyZ3VtZW50cyhtZXRhZGF0YS5tYXhBcmdzKX0gZm9yICR7bmFtZX0oKSwgZ290ICR7YXJncy5sZW5ndGh9YCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGlmIChtZXRhZGF0YS5mYWxsYmFja1RvTm9DYWxsYmFjaykge1xuICAgICAgICAgICAgICAvLyBUaGlzIEFQSSBtZXRob2QgaGFzIGN1cnJlbnRseSBubyBjYWxsYmFjayBvbiBDaHJvbWUsIGJ1dCBpdCByZXR1cm4gYSBwcm9taXNlIG9uIEZpcmVmb3gsXG4gICAgICAgICAgICAgIC8vIGFuZCBzbyB0aGUgcG9seWZpbGwgd2lsbCB0cnkgdG8gY2FsbCBpdCB3aXRoIGEgY2FsbGJhY2sgZmlyc3QsIGFuZCBpdCB3aWxsIGZhbGxiYWNrXG4gICAgICAgICAgICAgIC8vIHRvIG5vdCBwYXNzaW5nIHRoZSBjYWxsYmFjayBpZiB0aGUgZmlyc3QgY2FsbCBmYWlscy5cbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0YXJnZXRbbmFtZV0oLi4uYXJncywgbWFrZUNhbGxiYWNrKHtcbiAgICAgICAgICAgICAgICAgIHJlc29sdmUsXG4gICAgICAgICAgICAgICAgICByZWplY3RcbiAgICAgICAgICAgICAgICB9LCBtZXRhZGF0YSkpO1xuICAgICAgICAgICAgICB9IGNhdGNoIChjYkVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGAke25hbWV9IEFQSSBtZXRob2QgZG9lc24ndCBzZWVtIHRvIHN1cHBvcnQgdGhlIGNhbGxiYWNrIHBhcmFtZXRlciwgYCArIFwiZmFsbGluZyBiYWNrIHRvIGNhbGwgaXQgd2l0aG91dCBhIGNhbGxiYWNrOiBcIiwgY2JFcnJvcik7XG4gICAgICAgICAgICAgICAgdGFyZ2V0W25hbWVdKC4uLmFyZ3MpOyAvLyBVcGRhdGUgdGhlIEFQSSBtZXRob2QgbWV0YWRhdGEsIHNvIHRoYXQgdGhlIG5leHQgQVBJIGNhbGxzIHdpbGwgbm90IHRyeSB0b1xuICAgICAgICAgICAgICAgIC8vIHVzZSB0aGUgdW5zdXBwb3J0ZWQgY2FsbGJhY2sgYW55bW9yZS5cblxuICAgICAgICAgICAgICAgIG1ldGFkYXRhLmZhbGxiYWNrVG9Ob0NhbGxiYWNrID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgbWV0YWRhdGEubm9DYWxsYmFjayA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG1ldGFkYXRhLm5vQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgdGFyZ2V0W25hbWVdKC4uLmFyZ3MpO1xuICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0YXJnZXRbbmFtZV0oLi4uYXJncywgbWFrZUNhbGxiYWNrKHtcbiAgICAgICAgICAgICAgICByZXNvbHZlLFxuICAgICAgICAgICAgICAgIHJlamVjdFxuICAgICAgICAgICAgICB9LCBtZXRhZGF0YSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICAgIC8qKlxuICAgICAgICogV3JhcHMgYW4gZXhpc3RpbmcgbWV0aG9kIG9mIHRoZSB0YXJnZXQgb2JqZWN0LCBzbyB0aGF0IGNhbGxzIHRvIGl0IGFyZVxuICAgICAgICogaW50ZXJjZXB0ZWQgYnkgdGhlIGdpdmVuIHdyYXBwZXIgZnVuY3Rpb24uIFRoZSB3cmFwcGVyIGZ1bmN0aW9uIHJlY2VpdmVzLFxuICAgICAgICogYXMgaXRzIGZpcnN0IGFyZ3VtZW50LCB0aGUgb3JpZ2luYWwgYHRhcmdldGAgb2JqZWN0LCBmb2xsb3dlZCBieSBlYWNoIG9mXG4gICAgICAgKiB0aGUgYXJndW1lbnRzIHBhc3NlZCB0byB0aGUgb3JpZ2luYWwgbWV0aG9kLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSB0YXJnZXRcbiAgICAgICAqICAgICAgICBUaGUgb3JpZ2luYWwgdGFyZ2V0IG9iamVjdCB0aGF0IHRoZSB3cmFwcGVkIG1ldGhvZCBiZWxvbmdzIHRvLlxuICAgICAgICogQHBhcmFtIHtmdW5jdGlvbn0gbWV0aG9kXG4gICAgICAgKiAgICAgICAgVGhlIG1ldGhvZCBiZWluZyB3cmFwcGVkLiBUaGlzIGlzIHVzZWQgYXMgdGhlIHRhcmdldCBvZiB0aGUgUHJveHlcbiAgICAgICAqICAgICAgICBvYmplY3Qgd2hpY2ggaXMgY3JlYXRlZCB0byB3cmFwIHRoZSBtZXRob2QuXG4gICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSB3cmFwcGVyXG4gICAgICAgKiAgICAgICAgVGhlIHdyYXBwZXIgZnVuY3Rpb24gd2hpY2ggaXMgY2FsbGVkIGluIHBsYWNlIG9mIGEgZGlyZWN0IGludm9jYXRpb25cbiAgICAgICAqICAgICAgICBvZiB0aGUgd3JhcHBlZCBtZXRob2QuXG4gICAgICAgKlxuICAgICAgICogQHJldHVybnMge1Byb3h5PGZ1bmN0aW9uPn1cbiAgICAgICAqICAgICAgICBBIFByb3h5IG9iamVjdCBmb3IgdGhlIGdpdmVuIG1ldGhvZCwgd2hpY2ggaW52b2tlcyB0aGUgZ2l2ZW4gd3JhcHBlclxuICAgICAgICogICAgICAgIG1ldGhvZCBpbiBpdHMgcGxhY2UuXG4gICAgICAgKi9cblxuXG4gICAgICBjb25zdCB3cmFwTWV0aG9kID0gKHRhcmdldCwgbWV0aG9kLCB3cmFwcGVyKSA9PiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJveHkobWV0aG9kLCB7XG4gICAgICAgICAgYXBwbHkodGFyZ2V0TWV0aG9kLCB0aGlzT2JqLCBhcmdzKSB7XG4gICAgICAgICAgICByZXR1cm4gd3JhcHBlci5jYWxsKHRoaXNPYmosIHRhcmdldCwgLi4uYXJncyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgbGV0IGhhc093blByb3BlcnR5ID0gRnVuY3Rpb24uY2FsbC5iaW5kKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkpO1xuICAgICAgLyoqXG4gICAgICAgKiBXcmFwcyBhbiBvYmplY3QgaW4gYSBQcm94eSB3aGljaCBpbnRlcmNlcHRzIGFuZCB3cmFwcyBjZXJ0YWluIG1ldGhvZHNcbiAgICAgICAqIGJhc2VkIG9uIHRoZSBnaXZlbiBgd3JhcHBlcnNgIGFuZCBgbWV0YWRhdGFgIG9iamVjdHMuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtvYmplY3R9IHRhcmdldFxuICAgICAgICogICAgICAgIFRoZSB0YXJnZXQgb2JqZWN0IHRvIHdyYXAuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtvYmplY3R9IFt3cmFwcGVycyA9IHt9XVxuICAgICAgICogICAgICAgIEFuIG9iamVjdCB0cmVlIGNvbnRhaW5pbmcgd3JhcHBlciBmdW5jdGlvbnMgZm9yIHNwZWNpYWwgY2FzZXMuIEFueVxuICAgICAgICogICAgICAgIGZ1bmN0aW9uIHByZXNlbnQgaW4gdGhpcyBvYmplY3QgdHJlZSBpcyBjYWxsZWQgaW4gcGxhY2Ugb2YgdGhlXG4gICAgICAgKiAgICAgICAgbWV0aG9kIGluIHRoZSBzYW1lIGxvY2F0aW9uIGluIHRoZSBgdGFyZ2V0YCBvYmplY3QgdHJlZS4gVGhlc2VcbiAgICAgICAqICAgICAgICB3cmFwcGVyIG1ldGhvZHMgYXJlIGludm9rZWQgYXMgZGVzY3JpYmVkIGluIHtAc2VlIHdyYXBNZXRob2R9LlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbbWV0YWRhdGEgPSB7fV1cbiAgICAgICAqICAgICAgICBBbiBvYmplY3QgdHJlZSBjb250YWluaW5nIG1ldGFkYXRhIHVzZWQgdG8gYXV0b21hdGljYWxseSBnZW5lcmF0ZVxuICAgICAgICogICAgICAgIFByb21pc2UtYmFzZWQgd3JhcHBlciBmdW5jdGlvbnMgZm9yIGFzeW5jaHJvbm91cy4gQW55IGZ1bmN0aW9uIGluXG4gICAgICAgKiAgICAgICAgdGhlIGB0YXJnZXRgIG9iamVjdCB0cmVlIHdoaWNoIGhhcyBhIGNvcnJlc3BvbmRpbmcgbWV0YWRhdGEgb2JqZWN0XG4gICAgICAgKiAgICAgICAgaW4gdGhlIHNhbWUgbG9jYXRpb24gaW4gdGhlIGBtZXRhZGF0YWAgdHJlZSBpcyByZXBsYWNlZCB3aXRoIGFuXG4gICAgICAgKiAgICAgICAgYXV0b21hdGljYWxseS1nZW5lcmF0ZWQgd3JhcHBlciBmdW5jdGlvbiwgYXMgZGVzY3JpYmVkIGluXG4gICAgICAgKiAgICAgICAge0BzZWUgd3JhcEFzeW5jRnVuY3Rpb259XG4gICAgICAgKlxuICAgICAgICogQHJldHVybnMge1Byb3h5PG9iamVjdD59XG4gICAgICAgKi9cblxuICAgICAgY29uc3Qgd3JhcE9iamVjdCA9ICh0YXJnZXQsIHdyYXBwZXJzID0ge30sIG1ldGFkYXRhID0ge30pID0+IHtcbiAgICAgICAgbGV0IGNhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgbGV0IGhhbmRsZXJzID0ge1xuICAgICAgICAgIGhhcyhwcm94eVRhcmdldCwgcHJvcCkge1xuICAgICAgICAgICAgcmV0dXJuIHByb3AgaW4gdGFyZ2V0IHx8IHByb3AgaW4gY2FjaGU7XG4gICAgICAgICAgfSxcblxuICAgICAgICAgIGdldChwcm94eVRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpIHtcbiAgICAgICAgICAgIGlmIChwcm9wIGluIGNhY2hlKSB7XG4gICAgICAgICAgICAgIHJldHVybiBjYWNoZVtwcm9wXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCEocHJvcCBpbiB0YXJnZXQpKSB7XG4gICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCB2YWx1ZSA9IHRhcmdldFtwcm9wXTtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBtZXRob2Qgb24gdGhlIHVuZGVybHlpbmcgb2JqZWN0LiBDaGVjayBpZiB3ZSBuZWVkIHRvIGRvXG4gICAgICAgICAgICAgIC8vIGFueSB3cmFwcGluZy5cbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiB3cmFwcGVyc1twcm9wXSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgLy8gV2UgaGF2ZSBhIHNwZWNpYWwtY2FzZSB3cmFwcGVyIGZvciB0aGlzIG1ldGhvZC5cbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHdyYXBNZXRob2QodGFyZ2V0LCB0YXJnZXRbcHJvcF0sIHdyYXBwZXJzW3Byb3BdKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChoYXNPd25Qcm9wZXJ0eShtZXRhZGF0YSwgcHJvcCkpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGFuIGFzeW5jIG1ldGhvZCB0aGF0IHdlIGhhdmUgbWV0YWRhdGEgZm9yLiBDcmVhdGUgYVxuICAgICAgICAgICAgICAgIC8vIFByb21pc2Ugd3JhcHBlciBmb3IgaXQuXG4gICAgICAgICAgICAgICAgbGV0IHdyYXBwZXIgPSB3cmFwQXN5bmNGdW5jdGlvbihwcm9wLCBtZXRhZGF0YVtwcm9wXSk7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSB3cmFwTWV0aG9kKHRhcmdldCwgdGFyZ2V0W3Byb3BdLCB3cmFwcGVyKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGEgbWV0aG9kIHRoYXQgd2UgZG9uJ3Qga25vdyBvciBjYXJlIGFib3V0LiBSZXR1cm4gdGhlXG4gICAgICAgICAgICAgICAgLy8gb3JpZ2luYWwgbWV0aG9kLCBib3VuZCB0byB0aGUgdW5kZXJseWluZyBvYmplY3QuXG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5iaW5kKHRhcmdldCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmIHZhbHVlICE9PSBudWxsICYmIChoYXNPd25Qcm9wZXJ0eSh3cmFwcGVycywgcHJvcCkgfHwgaGFzT3duUHJvcGVydHkobWV0YWRhdGEsIHByb3ApKSkge1xuICAgICAgICAgICAgICAvLyBUaGlzIGlzIGFuIG9iamVjdCB0aGF0IHdlIG5lZWQgdG8gZG8gc29tZSB3cmFwcGluZyBmb3IgdGhlIGNoaWxkcmVuXG4gICAgICAgICAgICAgIC8vIG9mLiBDcmVhdGUgYSBzdWItb2JqZWN0IHdyYXBwZXIgZm9yIGl0IHdpdGggdGhlIGFwcHJvcHJpYXRlIGNoaWxkXG4gICAgICAgICAgICAgIC8vIG1ldGFkYXRhLlxuICAgICAgICAgICAgICB2YWx1ZSA9IHdyYXBPYmplY3QodmFsdWUsIHdyYXBwZXJzW3Byb3BdLCBtZXRhZGF0YVtwcm9wXSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGhhc093blByb3BlcnR5KG1ldGFkYXRhLCBcIipcIikpIHtcbiAgICAgICAgICAgICAgLy8gV3JhcCBhbGwgcHJvcGVydGllcyBpbiAqIG5hbWVzcGFjZS5cbiAgICAgICAgICAgICAgdmFsdWUgPSB3cmFwT2JqZWN0KHZhbHVlLCB3cmFwcGVyc1twcm9wXSwgbWV0YWRhdGFbXCIqXCJdKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIFdlIGRvbid0IG5lZWQgdG8gZG8gYW55IHdyYXBwaW5nIGZvciB0aGlzIHByb3BlcnR5LFxuICAgICAgICAgICAgICAvLyBzbyBqdXN0IGZvcndhcmQgYWxsIGFjY2VzcyB0byB0aGUgdW5kZXJseWluZyBvYmplY3QuXG4gICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjYWNoZSwgcHJvcCwge1xuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXG4gICAgICAgICAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldFtwcm9wXTtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgc2V0KHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICB0YXJnZXRbcHJvcF0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2FjaGVbcHJvcF0gPSB2YWx1ZTtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICB9LFxuXG4gICAgICAgICAgc2V0KHByb3h5VGFyZ2V0LCBwcm9wLCB2YWx1ZSwgcmVjZWl2ZXIpIHtcbiAgICAgICAgICAgIGlmIChwcm9wIGluIGNhY2hlKSB7XG4gICAgICAgICAgICAgIGNhY2hlW3Byb3BdID0gdmFsdWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0YXJnZXRbcHJvcF0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfSxcblxuICAgICAgICAgIGRlZmluZVByb3BlcnR5KHByb3h5VGFyZ2V0LCBwcm9wLCBkZXNjKSB7XG4gICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5kZWZpbmVQcm9wZXJ0eShjYWNoZSwgcHJvcCwgZGVzYyk7XG4gICAgICAgICAgfSxcblxuICAgICAgICAgIGRlbGV0ZVByb3BlcnR5KHByb3h5VGFyZ2V0LCBwcm9wKSB7XG4gICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5kZWxldGVQcm9wZXJ0eShjYWNoZSwgcHJvcCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgIH07IC8vIFBlciBjb250cmFjdCBvZiB0aGUgUHJveHkgQVBJLCB0aGUgXCJnZXRcIiBwcm94eSBoYW5kbGVyIG11c3QgcmV0dXJuIHRoZVxuICAgICAgICAvLyBvcmlnaW5hbCB2YWx1ZSBvZiB0aGUgdGFyZ2V0IGlmIHRoYXQgdmFsdWUgaXMgZGVjbGFyZWQgcmVhZC1vbmx5IGFuZFxuICAgICAgICAvLyBub24tY29uZmlndXJhYmxlLiBGb3IgdGhpcyByZWFzb24sIHdlIGNyZWF0ZSBhbiBvYmplY3Qgd2l0aCB0aGVcbiAgICAgICAgLy8gcHJvdG90eXBlIHNldCB0byBgdGFyZ2V0YCBpbnN0ZWFkIG9mIHVzaW5nIGB0YXJnZXRgIGRpcmVjdGx5LlxuICAgICAgICAvLyBPdGhlcndpc2Ugd2UgY2Fubm90IHJldHVybiBhIGN1c3RvbSBvYmplY3QgZm9yIEFQSXMgdGhhdFxuICAgICAgICAvLyBhcmUgZGVjbGFyZWQgcmVhZC1vbmx5IGFuZCBub24tY29uZmlndXJhYmxlLCBzdWNoIGFzIGBjaHJvbWUuZGV2dG9vbHNgLlxuICAgICAgICAvL1xuICAgICAgICAvLyBUaGUgcHJveHkgaGFuZGxlcnMgdGhlbXNlbHZlcyB3aWxsIHN0aWxsIHVzZSB0aGUgb3JpZ2luYWwgYHRhcmdldGBcbiAgICAgICAgLy8gaW5zdGVhZCBvZiB0aGUgYHByb3h5VGFyZ2V0YCwgc28gdGhhdCB0aGUgbWV0aG9kcyBhbmQgcHJvcGVydGllcyBhcmVcbiAgICAgICAgLy8gZGVyZWZlcmVuY2VkIHZpYSB0aGUgb3JpZ2luYWwgdGFyZ2V0cy5cblxuICAgICAgICBsZXQgcHJveHlUYXJnZXQgPSBPYmplY3QuY3JlYXRlKHRhcmdldCk7XG4gICAgICAgIHJldHVybiBuZXcgUHJveHkocHJveHlUYXJnZXQsIGhhbmRsZXJzKTtcbiAgICAgIH07XG4gICAgICAvKipcbiAgICAgICAqIENyZWF0ZXMgYSBzZXQgb2Ygd3JhcHBlciBmdW5jdGlvbnMgZm9yIGFuIGV2ZW50IG9iamVjdCwgd2hpY2ggaGFuZGxlc1xuICAgICAgICogd3JhcHBpbmcgb2YgbGlzdGVuZXIgZnVuY3Rpb25zIHRoYXQgdGhvc2UgbWVzc2FnZXMgYXJlIHBhc3NlZC5cbiAgICAgICAqXG4gICAgICAgKiBBIHNpbmdsZSB3cmFwcGVyIGlzIGNyZWF0ZWQgZm9yIGVhY2ggbGlzdGVuZXIgZnVuY3Rpb24sIGFuZCBzdG9yZWQgaW4gYVxuICAgICAgICogbWFwLiBTdWJzZXF1ZW50IGNhbGxzIHRvIGBhZGRMaXN0ZW5lcmAsIGBoYXNMaXN0ZW5lcmAsIG9yIGByZW1vdmVMaXN0ZW5lcmBcbiAgICAgICAqIHJldHJpZXZlIHRoZSBvcmlnaW5hbCB3cmFwcGVyLCBzbyB0aGF0ICBhdHRlbXB0cyB0byByZW1vdmUgYVxuICAgICAgICogcHJldmlvdXNseS1hZGRlZCBsaXN0ZW5lciB3b3JrIGFzIGV4cGVjdGVkLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7RGVmYXVsdFdlYWtNYXA8ZnVuY3Rpb24sIGZ1bmN0aW9uPn0gd3JhcHBlck1hcFxuICAgICAgICogICAgICAgIEEgRGVmYXVsdFdlYWtNYXAgb2JqZWN0IHdoaWNoIHdpbGwgY3JlYXRlIHRoZSBhcHByb3ByaWF0ZSB3cmFwcGVyXG4gICAgICAgKiAgICAgICAgZm9yIGEgZ2l2ZW4gbGlzdGVuZXIgZnVuY3Rpb24gd2hlbiBvbmUgZG9lcyBub3QgZXhpc3QsIGFuZCByZXRyaWV2ZVxuICAgICAgICogICAgICAgIGFuIGV4aXN0aW5nIG9uZSB3aGVuIGl0IGRvZXMuXG4gICAgICAgKlxuICAgICAgICogQHJldHVybnMge29iamVjdH1cbiAgICAgICAqL1xuXG5cbiAgICAgIGNvbnN0IHdyYXBFdmVudCA9IHdyYXBwZXJNYXAgPT4gKHtcbiAgICAgICAgYWRkTGlzdGVuZXIodGFyZ2V0LCBsaXN0ZW5lciwgLi4uYXJncykge1xuICAgICAgICAgIHRhcmdldC5hZGRMaXN0ZW5lcih3cmFwcGVyTWFwLmdldChsaXN0ZW5lciksIC4uLmFyZ3MpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGhhc0xpc3RlbmVyKHRhcmdldCwgbGlzdGVuZXIpIHtcbiAgICAgICAgICByZXR1cm4gdGFyZ2V0Lmhhc0xpc3RlbmVyKHdyYXBwZXJNYXAuZ2V0KGxpc3RlbmVyKSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVtb3ZlTGlzdGVuZXIodGFyZ2V0LCBsaXN0ZW5lcikge1xuICAgICAgICAgIHRhcmdldC5yZW1vdmVMaXN0ZW5lcih3cmFwcGVyTWFwLmdldChsaXN0ZW5lcikpO1xuICAgICAgICB9XG5cbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBvblJlcXVlc3RGaW5pc2hlZFdyYXBwZXJzID0gbmV3IERlZmF1bHRXZWFrTWFwKGxpc3RlbmVyID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lciAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgcmV0dXJuIGxpc3RlbmVyO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXcmFwcyBhbiBvblJlcXVlc3RGaW5pc2hlZCBsaXN0ZW5lciBmdW5jdGlvbiBzbyB0aGF0IGl0IHdpbGwgcmV0dXJuIGFcbiAgICAgICAgICogYGdldENvbnRlbnQoKWAgcHJvcGVydHkgd2hpY2ggcmV0dXJucyBhIGBQcm9taXNlYCByYXRoZXIgdGhhbiB1c2luZyBhXG4gICAgICAgICAqIGNhbGxiYWNrIEFQSS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IHJlcVxuICAgICAgICAgKiAgICAgICAgVGhlIEhBUiBlbnRyeSBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBuZXR3b3JrIHJlcXVlc3QuXG4gICAgICAgICAqL1xuXG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIG9uUmVxdWVzdEZpbmlzaGVkKHJlcSkge1xuICAgICAgICAgIGNvbnN0IHdyYXBwZWRSZXEgPSB3cmFwT2JqZWN0KHJlcSwge31cbiAgICAgICAgICAvKiB3cmFwcGVycyAqL1xuICAgICAgICAgICwge1xuICAgICAgICAgICAgZ2V0Q29udGVudDoge1xuICAgICAgICAgICAgICBtaW5BcmdzOiAwLFxuICAgICAgICAgICAgICBtYXhBcmdzOiAwXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgbGlzdGVuZXIod3JhcHBlZFJlcSk7XG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICAgIGNvbnN0IG9uTWVzc2FnZVdyYXBwZXJzID0gbmV3IERlZmF1bHRXZWFrTWFwKGxpc3RlbmVyID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lciAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgcmV0dXJuIGxpc3RlbmVyO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXcmFwcyBhIG1lc3NhZ2UgbGlzdGVuZXIgZnVuY3Rpb24gc28gdGhhdCBpdCBtYXkgc2VuZCByZXNwb25zZXMgYmFzZWQgb25cbiAgICAgICAgICogaXRzIHJldHVybiB2YWx1ZSwgcmF0aGVyIHRoYW4gYnkgcmV0dXJuaW5nIGEgc2VudGluZWwgdmFsdWUgYW5kIGNhbGxpbmcgYVxuICAgICAgICAgKiBjYWxsYmFjay4gSWYgdGhlIGxpc3RlbmVyIGZ1bmN0aW9uIHJldHVybnMgYSBQcm9taXNlLCB0aGUgcmVzcG9uc2UgaXNcbiAgICAgICAgICogc2VudCB3aGVuIHRoZSBwcm9taXNlIGVpdGhlciByZXNvbHZlcyBvciByZWplY3RzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0geyp9IG1lc3NhZ2VcbiAgICAgICAgICogICAgICAgIFRoZSBtZXNzYWdlIHNlbnQgYnkgdGhlIG90aGVyIGVuZCBvZiB0aGUgY2hhbm5lbC5cbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IHNlbmRlclxuICAgICAgICAgKiAgICAgICAgRGV0YWlscyBhYm91dCB0aGUgc2VuZGVyIG9mIHRoZSBtZXNzYWdlLlxuICAgICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCopfSBzZW5kUmVzcG9uc2VcbiAgICAgICAgICogICAgICAgIEEgY2FsbGJhY2sgd2hpY2gsIHdoZW4gY2FsbGVkIHdpdGggYW4gYXJiaXRyYXJ5IGFyZ3VtZW50LCBzZW5kc1xuICAgICAgICAgKiAgICAgICAgdGhhdCB2YWx1ZSBhcyBhIHJlc3BvbnNlLlxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgICAgICogICAgICAgIFRydWUgaWYgdGhlIHdyYXBwZWQgbGlzdGVuZXIgcmV0dXJuZWQgYSBQcm9taXNlLCB3aGljaCB3aWxsIGxhdGVyXG4gICAgICAgICAqICAgICAgICB5aWVsZCBhIHJlc3BvbnNlLiBGYWxzZSBvdGhlcndpc2UuXG4gICAgICAgICAqL1xuXG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIG9uTWVzc2FnZShtZXNzYWdlLCBzZW5kZXIsIHNlbmRSZXNwb25zZSkge1xuICAgICAgICAgIGxldCBkaWRDYWxsU2VuZFJlc3BvbnNlID0gZmFsc2U7XG4gICAgICAgICAgbGV0IHdyYXBwZWRTZW5kUmVzcG9uc2U7XG4gICAgICAgICAgbGV0IHNlbmRSZXNwb25zZVByb21pc2UgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICAgIHdyYXBwZWRTZW5kUmVzcG9uc2UgPSBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgZGlkQ2FsbFNlbmRSZXNwb25zZSA9IHRydWU7XG4gICAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBsZXQgcmVzdWx0O1xuXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IGxpc3RlbmVyKG1lc3NhZ2UsIHNlbmRlciwgd3JhcHBlZFNlbmRSZXNwb25zZSk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICByZXN1bHQgPSBQcm9taXNlLnJlamVjdChlcnIpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGlzUmVzdWx0VGhlbmFibGUgPSByZXN1bHQgIT09IHRydWUgJiYgaXNUaGVuYWJsZShyZXN1bHQpOyAvLyBJZiB0aGUgbGlzdGVuZXIgZGlkbid0IHJldHVybmVkIHRydWUgb3IgYSBQcm9taXNlLCBvciBjYWxsZWRcbiAgICAgICAgICAvLyB3cmFwcGVkU2VuZFJlc3BvbnNlIHN5bmNocm9ub3VzbHksIHdlIGNhbiBleGl0IGVhcmxpZXJcbiAgICAgICAgICAvLyBiZWNhdXNlIHRoZXJlIHdpbGwgYmUgbm8gcmVzcG9uc2Ugc2VudCBmcm9tIHRoaXMgbGlzdGVuZXIuXG5cbiAgICAgICAgICBpZiAocmVzdWx0ICE9PSB0cnVlICYmICFpc1Jlc3VsdFRoZW5hYmxlICYmICFkaWRDYWxsU2VuZFJlc3BvbnNlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfSAvLyBBIHNtYWxsIGhlbHBlciB0byBzZW5kIHRoZSBtZXNzYWdlIGlmIHRoZSBwcm9taXNlIHJlc29sdmVzXG4gICAgICAgICAgLy8gYW5kIGFuIGVycm9yIGlmIHRoZSBwcm9taXNlIHJlamVjdHMgKGEgd3JhcHBlZCBzZW5kTWVzc2FnZSBoYXNcbiAgICAgICAgICAvLyB0byB0cmFuc2xhdGUgdGhlIG1lc3NhZ2UgaW50byBhIHJlc29sdmVkIHByb21pc2Ugb3IgYSByZWplY3RlZFxuICAgICAgICAgIC8vIHByb21pc2UpLlxuXG5cbiAgICAgICAgICBjb25zdCBzZW5kUHJvbWlzZWRSZXN1bHQgPSBwcm9taXNlID0+IHtcbiAgICAgICAgICAgIHByb21pc2UudGhlbihtc2cgPT4ge1xuICAgICAgICAgICAgICAvLyBzZW5kIHRoZSBtZXNzYWdlIHZhbHVlLlxuICAgICAgICAgICAgICBzZW5kUmVzcG9uc2UobXNnKTtcbiAgICAgICAgICAgIH0sIGVycm9yID0+IHtcbiAgICAgICAgICAgICAgLy8gU2VuZCBhIEpTT04gcmVwcmVzZW50YXRpb24gb2YgdGhlIGVycm9yIGlmIHRoZSByZWplY3RlZCB2YWx1ZVxuICAgICAgICAgICAgICAvLyBpcyBhbiBpbnN0YW5jZSBvZiBlcnJvciwgb3IgdGhlIG9iamVjdCBpdHNlbGYgb3RoZXJ3aXNlLlxuICAgICAgICAgICAgICBsZXQgbWVzc2FnZTtcblxuICAgICAgICAgICAgICBpZiAoZXJyb3IgJiYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgfHwgdHlwZW9mIGVycm9yLm1lc3NhZ2UgPT09IFwic3RyaW5nXCIpKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IFwiQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZFwiO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgc2VuZFJlc3BvbnNlKHtcbiAgICAgICAgICAgICAgICBfX21veldlYkV4dGVuc2lvblBvbHlmaWxsUmVqZWN0X186IHRydWUsXG4gICAgICAgICAgICAgICAgbWVzc2FnZVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgICAgIC8vIFByaW50IGFuIGVycm9yIG9uIHRoZSBjb25zb2xlIGlmIHVuYWJsZSB0byBzZW5kIHRoZSByZXNwb25zZS5cbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBzZW5kIG9uTWVzc2FnZSByZWplY3RlZCByZXBseVwiLCBlcnIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfTsgLy8gSWYgdGhlIGxpc3RlbmVyIHJldHVybmVkIGEgUHJvbWlzZSwgc2VuZCB0aGUgcmVzb2x2ZWQgdmFsdWUgYXMgYVxuICAgICAgICAgIC8vIHJlc3VsdCwgb3RoZXJ3aXNlIHdhaXQgdGhlIHByb21pc2UgcmVsYXRlZCB0byB0aGUgd3JhcHBlZFNlbmRSZXNwb25zZVxuICAgICAgICAgIC8vIGNhbGxiYWNrIHRvIHJlc29sdmUgYW5kIHNlbmQgaXQgYXMgYSByZXNwb25zZS5cblxuXG4gICAgICAgICAgaWYgKGlzUmVzdWx0VGhlbmFibGUpIHtcbiAgICAgICAgICAgIHNlbmRQcm9taXNlZFJlc3VsdChyZXN1bHQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZW5kUHJvbWlzZWRSZXN1bHQoc2VuZFJlc3BvbnNlUHJvbWlzZSk7XG4gICAgICAgICAgfSAvLyBMZXQgQ2hyb21lIGtub3cgdGhhdCB0aGUgbGlzdGVuZXIgaXMgcmVwbHlpbmcuXG5cblxuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9O1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHdyYXBwZWRTZW5kTWVzc2FnZUNhbGxiYWNrID0gKHtcbiAgICAgICAgcmVqZWN0LFxuICAgICAgICByZXNvbHZlXG4gICAgICB9LCByZXBseSkgPT4ge1xuICAgICAgICBpZiAoZXh0ZW5zaW9uQVBJcy5ydW50aW1lLmxhc3RFcnJvcikge1xuICAgICAgICAgIC8vIERldGVjdCB3aGVuIG5vbmUgb2YgdGhlIGxpc3RlbmVycyByZXBsaWVkIHRvIHRoZSBzZW5kTWVzc2FnZSBjYWxsIGFuZCByZXNvbHZlXG4gICAgICAgICAgLy8gdGhlIHByb21pc2UgdG8gdW5kZWZpbmVkIGFzIGluIEZpcmVmb3guXG4gICAgICAgICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9tb3ppbGxhL3dlYmV4dGVuc2lvbi1wb2x5ZmlsbC9pc3N1ZXMvMTMwXG4gICAgICAgICAgaWYgKGV4dGVuc2lvbkFQSXMucnVudGltZS5sYXN0RXJyb3IubWVzc2FnZSA9PT0gQ0hST01FX1NFTkRfTUVTU0FHRV9DQUxMQkFDS19OT19SRVNQT05TRV9NRVNTQUdFKSB7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoZXh0ZW5zaW9uQVBJcy5ydW50aW1lLmxhc3RFcnJvci5tZXNzYWdlKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHJlcGx5ICYmIHJlcGx5Ll9fbW96V2ViRXh0ZW5zaW9uUG9seWZpbGxSZWplY3RfXykge1xuICAgICAgICAgIC8vIENvbnZlcnQgYmFjayB0aGUgSlNPTiByZXByZXNlbnRhdGlvbiBvZiB0aGUgZXJyb3IgaW50b1xuICAgICAgICAgIC8vIGFuIEVycm9yIGluc3RhbmNlLlxuICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IocmVwbHkubWVzc2FnZSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc29sdmUocmVwbHkpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBjb25zdCB3cmFwcGVkU2VuZE1lc3NhZ2UgPSAobmFtZSwgbWV0YWRhdGEsIGFwaU5hbWVzcGFjZU9iaiwgLi4uYXJncykgPT4ge1xuICAgICAgICBpZiAoYXJncy5sZW5ndGggPCBtZXRhZGF0YS5taW5BcmdzKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCBhdCBsZWFzdCAke21ldGFkYXRhLm1pbkFyZ3N9ICR7cGx1cmFsaXplQXJndW1lbnRzKG1ldGFkYXRhLm1pbkFyZ3MpfSBmb3IgJHtuYW1lfSgpLCBnb3QgJHthcmdzLmxlbmd0aH1gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhcmdzLmxlbmd0aCA+IG1ldGFkYXRhLm1heEFyZ3MpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIGF0IG1vc3QgJHttZXRhZGF0YS5tYXhBcmdzfSAke3BsdXJhbGl6ZUFyZ3VtZW50cyhtZXRhZGF0YS5tYXhBcmdzKX0gZm9yICR7bmFtZX0oKSwgZ290ICR7YXJncy5sZW5ndGh9YCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHdyYXBwZWRDYiA9IHdyYXBwZWRTZW5kTWVzc2FnZUNhbGxiYWNrLmJpbmQobnVsbCwge1xuICAgICAgICAgICAgcmVzb2x2ZSxcbiAgICAgICAgICAgIHJlamVjdFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGFyZ3MucHVzaCh3cmFwcGVkQ2IpO1xuICAgICAgICAgIGFwaU5hbWVzcGFjZU9iai5zZW5kTWVzc2FnZSguLi5hcmdzKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICBjb25zdCBzdGF0aWNXcmFwcGVycyA9IHtcbiAgICAgICAgZGV2dG9vbHM6IHtcbiAgICAgICAgICBuZXR3b3JrOiB7XG4gICAgICAgICAgICBvblJlcXVlc3RGaW5pc2hlZDogd3JhcEV2ZW50KG9uUmVxdWVzdEZpbmlzaGVkV3JhcHBlcnMpXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBydW50aW1lOiB7XG4gICAgICAgICAgb25NZXNzYWdlOiB3cmFwRXZlbnQob25NZXNzYWdlV3JhcHBlcnMpLFxuICAgICAgICAgIG9uTWVzc2FnZUV4dGVybmFsOiB3cmFwRXZlbnQob25NZXNzYWdlV3JhcHBlcnMpLFxuICAgICAgICAgIHNlbmRNZXNzYWdlOiB3cmFwcGVkU2VuZE1lc3NhZ2UuYmluZChudWxsLCBcInNlbmRNZXNzYWdlXCIsIHtcbiAgICAgICAgICAgIG1pbkFyZ3M6IDEsXG4gICAgICAgICAgICBtYXhBcmdzOiAzXG4gICAgICAgICAgfSlcbiAgICAgICAgfSxcbiAgICAgICAgdGFiczoge1xuICAgICAgICAgIHNlbmRNZXNzYWdlOiB3cmFwcGVkU2VuZE1lc3NhZ2UuYmluZChudWxsLCBcInNlbmRNZXNzYWdlXCIsIHtcbiAgICAgICAgICAgIG1pbkFyZ3M6IDIsXG4gICAgICAgICAgICBtYXhBcmdzOiAzXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGNvbnN0IHNldHRpbmdNZXRhZGF0YSA9IHtcbiAgICAgICAgY2xlYXI6IHtcbiAgICAgICAgICBtaW5BcmdzOiAxLFxuICAgICAgICAgIG1heEFyZ3M6IDFcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0OiB7XG4gICAgICAgICAgbWluQXJnczogMSxcbiAgICAgICAgICBtYXhBcmdzOiAxXG4gICAgICAgIH0sXG4gICAgICAgIHNldDoge1xuICAgICAgICAgIG1pbkFyZ3M6IDEsXG4gICAgICAgICAgbWF4QXJnczogMVxuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgYXBpTWV0YWRhdGEucHJpdmFjeSA9IHtcbiAgICAgICAgbmV0d29yazoge1xuICAgICAgICAgIFwiKlwiOiBzZXR0aW5nTWV0YWRhdGFcbiAgICAgICAgfSxcbiAgICAgICAgc2VydmljZXM6IHtcbiAgICAgICAgICBcIipcIjogc2V0dGluZ01ldGFkYXRhXG4gICAgICAgIH0sXG4gICAgICAgIHdlYnNpdGVzOiB7XG4gICAgICAgICAgXCIqXCI6IHNldHRpbmdNZXRhZGF0YVxuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgcmV0dXJuIHdyYXBPYmplY3QoZXh0ZW5zaW9uQVBJcywgc3RhdGljV3JhcHBlcnMsIGFwaU1ldGFkYXRhKTtcbiAgICB9OyAvLyBUaGUgYnVpbGQgcHJvY2VzcyBhZGRzIGEgVU1EIHdyYXBwZXIgYXJvdW5kIHRoaXMgZmlsZSwgd2hpY2ggbWFrZXMgdGhlXG4gICAgLy8gYG1vZHVsZWAgdmFyaWFibGUgYXZhaWxhYmxlLlxuXG5cbiAgICBtb2R1bGUuZXhwb3J0cyA9IHdyYXBBUElzKGNocm9tZSk7XG4gIH0gZWxzZSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBnbG9iYWxUaGlzLmJyb3dzZXI7XG4gIH1cbn0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YnJvd3Nlci1wb2x5ZmlsbC5qcy5tYXBcbiIsImV4cG9ydCB0eXBlIFNpdGVDb25maWdNZXRob2QgPSBcIkV4YWN0XCIgfCBcIlByZWZpeFwiIHwgXCJSZWdleFwiO1xuZXhwb3J0IHR5cGUgU2l0ZUNvbmZpZ1RhcmdldCA9IFwiRG9tYWluXCIgfCBcIkhvc3RcIiB8IFwiUGFnZVwiO1xuZXhwb3J0IHR5cGUgU2l0ZUNvbmZpZ05vZGVUeXBlID0gXCJNaWdyYXRpb25cIiB8IFwiVXNlclwiIHwgXCJEZWZhdWx0XCIgfCBcIkF1dG9cIjtcblxuZXhwb3J0IGNsYXNzIEZvcm1NYXRjaENvbmZpZyB7XG4gICAgZm9ybT86IHtcbiAgICAgICAgbmFtZXM/OiBzdHJpbmdbXTtcbiAgICAgICAgaWRzPzogc3RyaW5nW107XG4gICAgfTtcbiAgICBmaWVsZHM/OiB7XG4gICAgICAgIG5hbWVzPzogc3RyaW5nW107XG4gICAgICAgIGlkcz86IHN0cmluZ1tdO1xuICAgIH07XG4gICAgcXVlcnlTZWxlY3RvcnM/OiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGNsYXNzIFNpdGVDb25maWcge1xuICAgIHdoaXRlTGlzdD86IEZvcm1NYXRjaENvbmZpZztcbiAgICBibGFja0xpc3Q/OiBGb3JtTWF0Y2hDb25maWc7XG4gICAgcHJldmVudFNhdmVOb3RpZmljYXRpb24/OiBib29sZWFuO1xuICAgIGxpc3RNYXRjaGluZ0Nhc2VTZW5zaXRpdmU/OiBib29sZWFuO1xuICAgIHByZWZlcnJlZEVudHJ5VXVpZD86IHN0cmluZztcbn1cblxuZXhwb3J0IGNsYXNzIFNpdGVDb25maWdOb2RlIHtcbiAgICBjb25maWc6IFNpdGVDb25maWc7XG4gICAgbWF0Y2hXZWlnaHQ6IG51bWJlcjsgLy8gaGVscCB0byBkZWNpZGUgd2hpY2ggY29uZmlnIHRvIHVzZSB3aGVuIG1vcmUgdGhhbiBvbmUgbWF0Y2hlcyBjdXJyZW50IFVSTFxuICAgIHNvdXJjZTogU2l0ZUNvbmZpZ05vZGVUeXBlO1xufVxuXG5leHBvcnQgY2xhc3MgU2l0ZUNvbmZpZ0xvb2t1cCB7XG4gICAgW2tleTogc3RyaW5nXTogU2l0ZUNvbmZpZ05vZGU7XG59XG5cbmV4cG9ydCBjbGFzcyBTaXRlQ29uZmlnSW5kZXgge1xuICAgIGRvbWFpblJlZ2V4PzogU2l0ZUNvbmZpZ0xvb2t1cDtcbiAgICBkb21haW5FeGFjdD86IFNpdGVDb25maWdMb29rdXA7XG4gICAgZG9tYWluUHJlZml4PzogU2l0ZUNvbmZpZ0xvb2t1cDtcbiAgICBob3N0UmVnZXg/OiBTaXRlQ29uZmlnTG9va3VwO1xuICAgIGhvc3RFeGFjdD86IFNpdGVDb25maWdMb29rdXA7XG4gICAgaG9zdFByZWZpeD86IFNpdGVDb25maWdMb29rdXA7XG4gICAgcGFnZVJlZ2V4PzogU2l0ZUNvbmZpZ0xvb2t1cDtcbiAgICBwYWdlRXhhY3Q/OiBTaXRlQ29uZmlnTG9va3VwO1xuICAgIHBhZ2VQcmVmaXg6IFNpdGVDb25maWdMb29rdXA7XG59XG5cbmV4cG9ydCBjbGFzcyBDb25maWcge1xuICAgIGF1dG9GaWxsRGlhbG9nczogYm9vbGVhbjtcbiAgICBhdXRvRmlsbEZvcm1zOiBib29sZWFuO1xuICAgIGF1dG9GaWxsRm9ybXNXaXRoTXVsdGlwbGVNYXRjaGVzOiBib29sZWFuO1xuICAgIGF1dG9TdWJtaXRGb3JtczogYm9vbGVhbjtcbiAgICBhdXRvU3VibWl0RGlhbG9nczogYm9vbGVhbjtcbiAgICBhdXRvU3VibWl0TWF0Y2hlZEZvcm1zOiBib29sZWFuO1xuICAgIGNvbm5TTENsaWVudDogbnVtYmVyO1xuICAgIGNvbm5TTFNlcnZlck1pbjogbnVtYmVyO1xuICAgIGtlZVBhc3NEQlRvT3Blbjogc3RyaW5nO1xuICAgIGtlZVBhc3NNUlVEQjogc3RyaW5nO1xuICAgIEtlZVBhc3NSUENXZWJTb2NrZXRQb3J0OiBudW1iZXI7XG4gICAgS1BSUENVc2VybmFtZTogc3RyaW5nO1xuICAgIEtQUlBDU3RvcmVkS2V5czogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfTtcbiAgICBsYXN0Q29ubmVjdGVkVG9LZWVQYXNzOiBzdHJpbmc7XG4gICAgbGlzdEFsbE9wZW5EQnM6IGJvb2xlYW47XG4gICAgbG9nTGV2ZWw6IG51bWJlcjtcbiAgICBsb2dNZXRob2RDb25zb2xlOiBib29sZWFuO1xuICAgIGxvZ01ldGhvZEZpbGU6IGJvb2xlYW47XG4gICAgbG9nU2Vuc2l0aXZlRGF0YTogYm9vbGVhbjtcbiAgICBtZXRyaWNzVXNhZ2VEaXNhYmxlZDogYm9vbGVhbjtcbiAgICBtZXRyaWNzVXNlcklkOiBzdHJpbmc7XG4gICAgbXJ1R3JvdXA6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH07XG4gICAgbm90aWZ5V2hlbkVudHJ5VXBkYXRlZDogYm9vbGVhbjtcbiAgICBub3RpZnlXaGVuTGF0ZURpc2NvdmVyeTogYm9vbGVhbjtcbiAgICBub3RpZnlXaGVuTG9nZ2VkT3V0OiBib29sZWFuO1xuICAgIG92ZXJXcml0ZUZpZWxkc0F1dG9tYXRpY2FsbHk6IGJvb2xlYW47IC8vIGRlcHJlY2F0ZWRcbiAgICByZW1lbWJlck1SVURCOiBib29sZWFuO1xuICAgIHJlbWVtYmVyTVJVR3JvdXA6IGJvb2xlYW47XG4gICAgc2F2ZUZhdmljb25zOiBib29sZWFuO1xuICAgIHNlYXJjaEFsbE9wZW5EQnM6IGJvb2xlYW47XG4gICAgc2l0ZUNvbmZpZzogU2l0ZUNvbmZpZ0luZGV4O1xuICAgIGNvbmZpZzogeyB1cmw6IHN0cmluZzsgY29uZmlnOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB9W107XG4gICAgdHV0b3JpYWxQcm9ncmVzczogc3RyaW5nO1xuICAgIHZlcnNpb246IG51bWJlcjsgLy8gZGVmYXVsdCBpcyBpbmNyZW1lbnRlZCB3aGVuIGNoYW5nZXMgYXJlIGludHJvZHVjZWQgdGhhdCByZXF1aXJlIGRhdGEgbWlncmF0aW9uXG4gICAgdHJpZ2dlckNoYW5nZUlucHV0RXZlbnRBZnRlckZpbGw6IGJvb2xlYW47XG4gICAgYXV0b1N1Ym1pdE5ldHdvcmtBdXRoV2l0aFNpbmdsZU1hdGNoOiBib29sZWFuO1xuICAgIHNlYXJjaE5ldHdvcmtBdXRoOiBib29sZWFuO1xuICAgIHBvcnRDb25uZWN0aW9uRGVsYXk6IG51bWJlcjsgLy8gZGVwcmVjYXRlZFxuICAgIG5vdGlmaWNhdGlvbkNvdW50R2VuZXJpYzogbnVtYmVyO1xuICAgIG5vdGlmaWNhdGlvbkNvdW50U2F2ZVBhc3N3b3JkOiBudW1iZXI7XG4gICAgY3VycmVudFNlYXJjaFRlcm1UaW1lb3V0OiBudW1iZXI7XG4gICAgbm90aWZ5UGFzc3dvcmRBdmFpbGFibGVGb3JQYXN0ZTogYm9vbGVhbjtcbiAgICBhbmltYXRlV2hlbk9mZmVyaW5nU2F2ZTogYm9vbGVhbjtcbiAgICBrZWVWYXVsdExhdW5jaE1lc3NhZ2VEaXNtaXNzZWQ6IGJvb2xlYW47XG4gICAga2VlVmF1bHRMYXVuY2hTdGFydDogbnVtYmVyO1xuICAgIGtlZVZhdWx0TGF1bmNoRW5kOiBudW1iZXI7XG4gICAgbWFudWFsU3VibWl0T3ZlcnJpZGVQcm9oaWJpdGVkOiBib29sZWFuO1xuICAgIHRoZW1lOiBzdHJpbmc7XG4gICAgaGlkZUNvbmZpcm1hdGlvbkFmdGVyU2F2ZTogYm9vbGVhbjtcbiAgICBtdXN0U2hvd1JlbGVhc2VOb3Rlc0F0U3RhcnR1cDogYm9vbGVhbjtcbiAgICBhdXRvRmlsbEZpZWxkc1dpdGhFeGlzdGluZ1ZhbHVlOiBib29sZWFuO1xufVxuIiwiaW1wb3J0IHsgU2l0ZUNvbmZpZ0luZGV4LCBTaXRlQ29uZmlnTG9va3VwIH0gZnJvbSBcIi4vY29uZmlnXCI7XG5cbmV4cG9ydCBjb25zdCBkZWZhdWx0U2l0ZUNvbmZpZyA9IG5ldyBTaXRlQ29uZmlnSW5kZXgoKTtcbmRlZmF1bHRTaXRlQ29uZmlnLnBhZ2VSZWdleCA9IG5ldyBTaXRlQ29uZmlnTG9va3VwKCk7XG5cbmRlZmF1bHRTaXRlQ29uZmlnLnBhZ2VSZWdleFtcIl4uKiRcIl0gPSB7XG4gICAgY29uZmlnOiB7XG4gICAgICAgIC8qIFRPRE86NDogPyBJbiBmdXR1cmUgd2UgY2FuIGdpdmUgZmluZXIgY29udHJvbCBvZiBmb3JtIHJlc2Nhbm5pbmcgYmVoYXZpb3VyIGZyb20gaGVyZVxuICAgICAgICAgICAgcmVzY2FuRE9NZXZlbnRzOlxuICAgICAgICAgICAgW3tcblxuICAgICAgICAgICAgICAgIC8vIC9odG1sL2JvZHkvZGl2WzNdL2Rpdi9oMS9zbWFsbFxuXG4gICAgICAgICAgICAgICAgdHlwZTogXCJjbGlja1wiIHwgXCJtdXRhdGlvblwiIHwgXCJob3ZlclwiIHwgZXRjLFxuICAgICAgICAgICAgICAgIHhwYXRoOiBcIi9odG1sL2JvZHkvZGl2WzNdL2Rpdi9oMS9zbWFsbFwiLCAvLyB3ZSBzaG91bGQgZG8gYSBzYW5pdHkgY2hlY2sgb24gcmV0dXJuZWQgaXRlbXMgYW5kIGxpbWl0IHRvIG1heCBvZiB+YSBodW5kcmVkIERPTSBub2Rlc1xuICAgICAgICAgICAgICAgIGlkOiBcInNvbWVJRFwiLFxuICAgICAgICAgICAgICAgIC8vc29tZXRoaW5nIGVsc2UgdG8gbGltaXQgbXV0YXRpb24gZXZlbnRzIHRvIGNyZWF0ZSBvbmUgKGUuZy4gY3JlYXRpb24gb2YgbmV3IGNoaWxkIGl0ZW0gbWF0Y2hpbmcgY2VydGFpbiB4cGF0aD8gZXRjLilcbiAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgKi9cblxuICAgICAgICBwcmV2ZW50U2F2ZU5vdGlmaWNhdGlvbjogZmFsc2UsXG4gICAgICAgIGxpc3RNYXRjaGluZ0Nhc2VTZW5zaXRpdmU6IGZhbHNlLFxuXG4gICAgICAgIC8qXG4gICAgICAgICAgICAgICAgRm9ybXMgd2lsbCBiZSBzY2FubmVkIGlmZiB0aGV5IGhhdmUgYSBwYXNzd29yZCAodHlwZSkgZmllbGRcbiAgICAgICAgICAgICAgICBVTkxFU1Mgb25lIG9mIHRoZSBpbnRlcmVzdGluZ0Zvcm1zIGFycmF5cyBtYXRjaGVzIHRoZSBmb3JtIGluIHF1ZXN0aW9uLlxuICAgICAgICAgICAgICAgIEFsbCAodyloaXRlbGlzdHMgd2lsbCBmb3JjZSB0aGUgZm9ybSB0byBiZSBzY2FubmVkIGZvciBtYXRjaGluZyBwYXNzd29yZHMuXG4gICAgICAgICAgICAgICAgKGIpbGFja2xpc3RzIHdpbGwgcHJldmVudCB0aGUgZm9ybSBiZWluZyBzY2FubmVkLlxuICAgICAgICAgICAgICAgIChiKWxhY2tsaXN0cyBoYXZlIHByaW9yaXR5IG92ZXIgd2hpdGVsaXN0cyBvZiB0aGUgc2FtZSB0eXBlIGJ1dCB0aGUgcHJpb3JpdGllc1xuICAgICAgICAgICAgICAgIG9mIGRpZmZlcmVudCB0eXBlcyBvZiBjaGVjayBhcmUgdW5kZWZpbmVkIGhlcmUgLSB5b3UnbGwgaGF2ZSB0byBsb29rIGF0IHRoZVxuICAgICAgICAgICAgICAgIGJlaGF2aW91ciBvZiB0aGUgZm9ybSBtYXRjaGluZyBjb2RlIHdoaWNoIGlzIHN1YmplY3QgdG8gY2hhbmdlLlxuICAgICAgICAgICAgICAgICovXG4gICAgICAgIGJsYWNrTGlzdDoge1xuICAgICAgICAgICAgZm9ybTogeyBuYW1lczogW1wic2VhcmNoXCJdLCBpZHM6IFtcInNlYXJjaFwiXSB9LFxuICAgICAgICAgICAgZmllbGRzOiB7IG5hbWVzOiBbXCJzZWFyY2hcIiwgXCJxXCIsIFwicXVlcnlcIl0sIGlkczogW1wic2VhcmNoXCIsIFwicVwiXSB9XG4gICAgICAgIH0sXG4gICAgICAgIHdoaXRlTGlzdDoge1xuICAgICAgICAgICAgZm9ybTogeyBuYW1lczogW1wibG9naW5cIl0sIGlkczogW1wibG9naW5cIl0gfSxcbiAgICAgICAgICAgIGZpZWxkczoge1xuICAgICAgICAgICAgICAgIG5hbWVzOiBbXG4gICAgICAgICAgICAgICAgICAgIFwidXNlcm5hbWVcIixcbiAgICAgICAgICAgICAgICAgICAgXCJqX3VzZXJuYW1lXCIsXG4gICAgICAgICAgICAgICAgICAgIFwidXNlcl9uYW1lXCIsXG4gICAgICAgICAgICAgICAgICAgIFwidXNlclwiLFxuICAgICAgICAgICAgICAgICAgICBcInVzZXItbmFtZVwiLFxuICAgICAgICAgICAgICAgICAgICBcImxvZ2luXCIsXG4gICAgICAgICAgICAgICAgICAgIFwidmJfbG9naW5fdXNlcm5hbWVcIixcbiAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCIsXG4gICAgICAgICAgICAgICAgICAgIFwidXNlciBuYW1lXCIsXG4gICAgICAgICAgICAgICAgICAgIFwidXNlciBpZFwiLFxuICAgICAgICAgICAgICAgICAgICBcInVzZXItaWRcIixcbiAgICAgICAgICAgICAgICAgICAgXCJ1c2VyaWRcIixcbiAgICAgICAgICAgICAgICAgICAgXCJlbWFpbFwiLFxuICAgICAgICAgICAgICAgICAgICBcImUtbWFpbFwiLFxuICAgICAgICAgICAgICAgICAgICBcImlkXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiZm9ybV9sb2dpbm5hbWVcIixcbiAgICAgICAgICAgICAgICAgICAgXCJ3cG5hbWVcIixcbiAgICAgICAgICAgICAgICAgICAgXCJtYWlsXCIsXG4gICAgICAgICAgICAgICAgICAgIFwibG9naW5pZFwiLFxuICAgICAgICAgICAgICAgICAgICBcImxvZ2luIGlkXCIsXG4gICAgICAgICAgICAgICAgICAgIFwibG9naW5fbmFtZVwiLFxuICAgICAgICAgICAgICAgICAgICBcIm9wZW5pZF9pZGVudGlmaWVyXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiYXV0aGVudGljYXRpb25fZW1haWxcIixcbiAgICAgICAgICAgICAgICAgICAgXCJvcGVuaWRcIixcbiAgICAgICAgICAgICAgICAgICAgXCJhdXRoX2VtYWlsXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiYXV0aF9pZFwiLFxuICAgICAgICAgICAgICAgICAgICBcImF1dGhlbnRpY2F0aW9uX2lkZW50aWZpZXJcIixcbiAgICAgICAgICAgICAgICAgICAgXCJhdXRoZW50aWNhdGlvbl9pZFwiLFxuICAgICAgICAgICAgICAgICAgICBcImN1c3RvbWVyX251bWJlclwiLFxuICAgICAgICAgICAgICAgICAgICBcImN1c3RvbWVybnVtYmVyXCIsXG4gICAgICAgICAgICAgICAgICAgIFwib25saW5laWRcIlxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgaWRzOiBbXG4gICAgICAgICAgICAgICAgICAgIFwidXNlcm5hbWVcIixcbiAgICAgICAgICAgICAgICAgICAgXCJqX3VzZXJuYW1lXCIsXG4gICAgICAgICAgICAgICAgICAgIFwidXNlcl9uYW1lXCIsXG4gICAgICAgICAgICAgICAgICAgIFwidXNlclwiLFxuICAgICAgICAgICAgICAgICAgICBcInVzZXItbmFtZVwiLFxuICAgICAgICAgICAgICAgICAgICBcImxvZ2luXCIsXG4gICAgICAgICAgICAgICAgICAgIFwidmJfbG9naW5fdXNlcm5hbWVcIixcbiAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCIsXG4gICAgICAgICAgICAgICAgICAgIFwidXNlci1pZFwiLFxuICAgICAgICAgICAgICAgICAgICBcInVzZXJpZFwiLFxuICAgICAgICAgICAgICAgICAgICBcImVtYWlsXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiZS1tYWlsXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiaWRcIixcbiAgICAgICAgICAgICAgICAgICAgXCJmb3JtX2xvZ2lubmFtZVwiLFxuICAgICAgICAgICAgICAgICAgICBcIndwbmFtZVwiLFxuICAgICAgICAgICAgICAgICAgICBcIm1haWxcIixcbiAgICAgICAgICAgICAgICAgICAgXCJsb2dpbmlkXCIsXG4gICAgICAgICAgICAgICAgICAgIFwibG9naW5fbmFtZVwiLFxuICAgICAgICAgICAgICAgICAgICBcIm9wZW5pZF9pZGVudGlmaWVyXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiYXV0aGVudGljYXRpb25fZW1haWxcIixcbiAgICAgICAgICAgICAgICAgICAgXCJvcGVuaWRcIixcbiAgICAgICAgICAgICAgICAgICAgXCJhdXRoX2VtYWlsXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiYXV0aF9pZFwiLFxuICAgICAgICAgICAgICAgICAgICBcImF1dGhlbnRpY2F0aW9uX2lkZW50aWZpZXJcIixcbiAgICAgICAgICAgICAgICAgICAgXCJhdXRoZW50aWNhdGlvbl9pZFwiLFxuICAgICAgICAgICAgICAgICAgICBcImN1c3RvbWVyX251bWJlclwiLFxuICAgICAgICAgICAgICAgICAgICBcImN1c3RvbWVybnVtYmVyXCIsXG4gICAgICAgICAgICAgICAgICAgIFwib25saW5laWRcIlxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcHJlZmVycmVkRW50cnlVdWlkOiBudWxsXG4gICAgfSxcbiAgICBtYXRjaFdlaWdodDogMCxcbiAgICBzb3VyY2U6IFwiRGVmYXVsdFwiXG59O1xuIiwiaW1wb3J0IHsgU2l0ZUNvbmZpZywgQ29uZmlnLCBTaXRlQ29uZmlnTG9va3VwLCBTaXRlQ29uZmlnSW5kZXggfSBmcm9tIFwiLi9jb25maWdcIjtcbmltcG9ydCB7IGRlZmF1bHRTaXRlQ29uZmlnIH0gZnJvbSBcIi4vRGVmYXVsdFNpdGVDb25maWdcIjtcblxuZXhwb3J0IGNsYXNzIENvbmZpZ01pZ3JhdGlvbnMge1xuICAgIHB1YmxpYyBtaWdyYXRlVG9WZXJzaW9uOChjdXJyZW50OiBDb25maWcpIHtcbiAgICAgICAgLy8gVGhpcyBpc24ndCByZWxpYWJsZSBkdWUgdG8gc3luYyBzbyB3ZSd2ZSBkZXByZWNhdGVkIHRoZSBzZXR0aW5nXG4gICAgICAgIC8vIGFuZCBjcmVhdGVkIGEgbmV3IG9uZSB0aGF0IHJlcXVpcmVzIG5vIG1pZ3JhdGlvblxuICAgICAgICBPYmplY3QuYXNzaWduKGN1cnJlbnQsIHtcbiAgICAgICAgICAgIG92ZXJXcml0ZUZpZWxkc0F1dG9tYXRpY2FsbHk6IGZhbHNlLFxuICAgICAgICAgICAgdmVyc2lvbjogOFxuICAgICAgICB9IGFzIFBhcnRpYWw8Q29uZmlnPik7XG4gICAgfVxuXG4gICAgcHVibGljIG1pZ3JhdGVUb1ZlcnNpb243KGN1cnJlbnQ6IENvbmZpZykge1xuICAgICAgICBpZiAoY3VycmVudC5ub3RpZmljYXRpb25Db3VudFNhdmVQYXNzd29yZCA+IDYpIHtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oY3VycmVudCwge1xuICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbkNvdW50U2F2ZVBhc3N3b3JkOiA2LFxuICAgICAgICAgICAgICAgIHZlcnNpb246IDdcbiAgICAgICAgICAgIH0gYXMgUGFydGlhbDxDb25maWc+KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oY3VycmVudCwgeyB2ZXJzaW9uOiA3IH0gYXMgUGFydGlhbDxDb25maWc+KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBtaWdyYXRlVG9WZXJzaW9uNihjdXJyZW50OiBDb25maWcpIHtcbiAgICAgICAgT2JqZWN0LmFzc2lnbihjdXJyZW50LCB7XG4gICAgICAgICAgICBhbmltYXRlV2hlbk9mZmVyaW5nU2F2ZTogdHJ1ZSxcbiAgICAgICAgICAgIHZlcnNpb246IDZcbiAgICAgICAgfSBhcyBQYXJ0aWFsPENvbmZpZz4pO1xuICAgIH1cblxuICAgIHB1YmxpYyBtaWdyYXRlVG9WZXJzaW9uNShjdXJyZW50OiBDb25maWcpIHtcbiAgICAgICAgT2JqZWN0LmFzc2lnbihjdXJyZW50LCB7XG4gICAgICAgICAgICBub3RpZnlQYXNzd29yZEF2YWlsYWJsZUZvclBhc3RlOiB0cnVlLFxuICAgICAgICAgICAgdmVyc2lvbjogNVxuICAgICAgICB9IGFzIFBhcnRpYWw8Q29uZmlnPik7XG4gICAgfVxuXG4gICAgcHVibGljIG1pZ3JhdGVUb1ZlcnNpb240KGN1cnJlbnQ6IENvbmZpZykge1xuICAgICAgICBsZXQgbmV3TG9nTGV2ZWwgPSAyO1xuICAgICAgICBpZiAoY3VycmVudC5sb2dMZXZlbCA9PT0gMSkge1xuICAgICAgICAgICAgbmV3TG9nTGV2ZWwgPSAxO1xuICAgICAgICB9XG5cbiAgICAgICAgT2JqZWN0LmFzc2lnbihjdXJyZW50LCB7IGxvZ0xldmVsOiBuZXdMb2dMZXZlbCwgdmVyc2lvbjogNCB9IGFzIFBhcnRpYWw8Q29uZmlnPik7XG4gICAgfVxuXG4gICAgcHVibGljIG1pZ3JhdGVUb1ZlcnNpb24zKGN1cnJlbnQ6IENvbmZpZykge1xuICAgICAgICBpZiAoY3VycmVudC5ub3RpZmljYXRpb25Db3VudEdlbmVyaWMgPT0gbnVsbCkge1xuICAgICAgICAgICAgY3VycmVudC5ub3RpZmljYXRpb25Db3VudEdlbmVyaWMgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdXJyZW50Lm5vdGlmaWNhdGlvbkNvdW50U2F2ZVBhc3N3b3JkID09IG51bGwpIHtcbiAgICAgICAgICAgIGN1cnJlbnQubm90aWZpY2F0aW9uQ291bnRTYXZlUGFzc3dvcmQgPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgT2JqZWN0LmFzc2lnbihjdXJyZW50LCB7XG4gICAgICAgICAgICBjdXJyZW50U2VhcmNoVGVybVRpbWVvdXQ6IDMwLFxuICAgICAgICAgICAgdmVyc2lvbjogM1xuICAgICAgICB9IGFzIFBhcnRpYWw8Q29uZmlnPik7XG4gICAgfVxuXG4gICAgcHVibGljIG1pZ3JhdGVUb1ZlcnNpb24yKGN1cnJlbnQ6IENvbmZpZykge1xuICAgICAgICBsZXQgbmV3U2l0ZUNvbmZpZyA9IG5ldyBTaXRlQ29uZmlnSW5kZXgoKTtcblxuICAgICAgICBpZiAoIWN1cnJlbnQuY29uZmlnIHx8IGN1cnJlbnQuY29uZmlnLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICBuZXdTaXRlQ29uZmlnID0gZGVmYXVsdFNpdGVDb25maWc7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbmV3U2l0ZUNvbmZpZy5wYWdlUmVnZXggPSBuZXcgU2l0ZUNvbmZpZ0xvb2t1cCgpO1xuICAgICAgICBuZXdTaXRlQ29uZmlnLmhvc3RFeGFjdCA9IG5ldyBTaXRlQ29uZmlnTG9va3VwKCk7XG4gICAgICAgIG5ld1NpdGVDb25maWcucGFnZVByZWZpeCA9IG5ldyBTaXRlQ29uZmlnTG9va3VwKCk7XG5cbiAgICAgICAgbmV3U2l0ZUNvbmZpZy5wYWdlUmVnZXhbXCJeLiokXCJdID0ge1xuICAgICAgICAgICAgbWF0Y2hXZWlnaHQ6IDAsXG4gICAgICAgICAgICBjb25maWc6IHRoaXMubWlncmF0ZUluZGl2aWR1YWxTaXRlQ29uZmlnU2V0dGluZ3NUb1YyKGN1cnJlbnQuY29uZmlnWzBdLmNvbmZpZyksXG4gICAgICAgICAgICBzb3VyY2U6IFwiTWlncmF0aW9uXCJcbiAgICAgICAgfTtcblxuICAgICAgICBmb3IgKFxuICAgICAgICAgICAgbGV0IGkgPSAxO1xuICAgICAgICAgICAgaSA8IGN1cnJlbnQuY29uZmlnLmxlbmd0aDtcbiAgICAgICAgICAgIGkrKyAvLyBza2lwIGZpcnN0IHdoaWNoIGlzIGFsd2F5cyBcIipcIlxuICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnN0IHVybCA9IGN1cnJlbnQuY29uZmlnW2ldLnVybDtcbiAgICAgICAgICAgIGlmICh1cmwuaW5kZXhPZihcIjovL1wiKSA9PSAtMSkgY29udGludWU7IC8vIGludmFsaWQgZGF0YSBmcm9tIG9sZCBjb25maWdcbiAgICAgICAgICAgIGNvbnN0IHdpdGhvdXRQcm90b2NvbCA9IHVybC5zdWJzdHIodXJsLmluZGV4T2YoXCI6Ly9cIikgKyAzKTtcbiAgICAgICAgICAgIGlmICh3aXRob3V0UHJvdG9jb2wubGVuZ3RoIDw9IDEpIGNvbnRpbnVlOyAvLyBpbnZhbGlkIGRhdGEgZnJvbSBvbGQgY29uZmlnXG5cbiAgICAgICAgICAgIGNvbnN0IG5ld0NvbmZpZyA9IHRoaXMubWlncmF0ZUluZGl2aWR1YWxTaXRlQ29uZmlnU2V0dGluZ3NUb1YyKFxuICAgICAgICAgICAgICAgIGN1cnJlbnQuY29uZmlnW2ldLmNvbmZpZ1xuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgY29uc3QgcGF0aEluZGV4ID0gd2l0aG91dFByb3RvY29sLmluZGV4T2YoXCIvXCIpO1xuXG4gICAgICAgICAgICBpZiAocGF0aEluZGV4ID4gLTEgfHwgcGF0aEluZGV4ID09IHdpdGhvdXRQcm90b2NvbC5sYXN0SW5kZXhPZihcIi9cIikpIHtcbiAgICAgICAgICAgICAgICAvLyByZW1vdmluZyB0cmFpbGluZyBzbGFzaCBpZiB3ZSBoYXZlIG9ubHkgYSBob3N0IG5hbWVcbiAgICAgICAgICAgICAgICBjb25zdCBob3N0ID1cbiAgICAgICAgICAgICAgICAgICAgcGF0aEluZGV4ID4gLTEgPyB3aXRob3V0UHJvdG9jb2wuc3Vic3RyKDAsIHBhdGhJbmRleCkgOiB3aXRob3V0UHJvdG9jb2w7XG5cbiAgICAgICAgICAgICAgICAvLyBVc2VyIG1heSBoYXZlIGNvbmZpZ3VyZWQgYSBwcmVmaXggbWF0Y2ggaW4gS2VlRm94IDEueCBidXQgaXQncyBub3QgYW4gZXNwZWNpYWxseSB1c2VmdWxcbiAgICAgICAgICAgICAgICAvLyBiZWhhdmlvdXIgYW5kIGhhcyBwb3RlbnRpYWwgdG8gYmUgdW5zYWZlIGluIGZ1dHVyZSBzbyB3ZSBjb252ZXJ0IGFsbCB0byBleGFjdCBtYXRjaGVzIG5vd1xuICAgICAgICAgICAgICAgIG5ld1NpdGVDb25maWcuaG9zdEV4YWN0W2hvc3RdID0ge1xuICAgICAgICAgICAgICAgICAgICBjb25maWc6IG5ld0NvbmZpZyxcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hXZWlnaHQ6IDEwMCxcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiBcIk1pZ3JhdGlvblwiXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8ga2VlcCBpbmNyZWFzaW5nIHdlaWdodCB1bnRpbCB3ZSBmaW5kIG5vIG90aGVyIHNob3J0ZXIgZXhpc3RpbmcgZW50cmllcy4gVGhpcyBhc3N1bWVzIG9yZGVyaW5nIGJ5IGxlbmd0aFxuICAgICAgICAgICAgICAgIC8vIGluIHRoZSBvcmlnaW5hbCBkYXRhIHNvIHRoYXQgaXQgY2FuIGJlIHRyYW5zZmVycmVkIHRvIHRoZSBuZXcgY29uZmlnIGluIHNhbWUgb3JkZXJcbiAgICAgICAgICAgICAgICAvLyB3aGljaCBpc24ndCBjb21wbGV0ZWx5IHNhZmUgYnV0IG9ubHkgYmVjYXVzZSBvZiBidWdzIGluIEtlZUZveCAxLnggd2hpY2ggbWF5IGhhdmUgYWZmZWN0ZWQgZGF0YSBpbnRlZ3JpdHlcbiAgICAgICAgICAgICAgICAvLyBpbiBvbmUgb3IgdHdvIHJhcmUgY2FzZXMgYW5kIHdoaWNoIHdlIGNhbiBubyBsb25nZXIgZml4IHJlbGlhYmx5IGFueXdheS5cbiAgICAgICAgICAgICAgICBsZXQgd2VpZ2h0ID0gMjAwO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcGFnZVByZWZpeCBpbiBuZXdTaXRlQ29uZmlnLnBhZ2VQcmVmaXgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHdpdGhvdXRQcm90b2NvbC5zdGFydHNXaXRoKHBhZ2VQcmVmaXgpKSB3ZWlnaHQrKztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBuZXdTaXRlQ29uZmlnLnBhZ2VQcmVmaXhbd2l0aG91dFByb3RvY29sXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnOiBuZXdDb25maWcsXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoV2VpZ2h0OiB3ZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogXCJNaWdyYXRpb25cIlxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBPYmplY3QuYXNzaWduKGN1cnJlbnQsIHtcbiAgICAgICAgICAgIHNpdGVDb25maWc6IG5ld1NpdGVDb25maWcsXG4gICAgICAgICAgICBjb25maWc6IG51bGwsXG4gICAgICAgICAgICB2ZXJzaW9uOiAyXG4gICAgICAgIH0gYXMgUGFydGlhbDxDb25maWc+KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG1pZ3JhdGVJbmRpdmlkdWFsU2l0ZUNvbmZpZ1NldHRpbmdzVG9WMihvbGRDb25maWc6IGFueSk6IFNpdGVDb25maWcge1xuICAgICAgICBjb25zdCBzYyA9IG5ldyBTaXRlQ29uZmlnKCk7XG4gICAgICAgIGlmIChvbGRDb25maWcucHJldmVudFNhdmVOb3RpZmljYXRpb24gPT0gbnVsbCkge1xuICAgICAgICAgICAgc2MucHJldmVudFNhdmVOb3RpZmljYXRpb24gPSBvbGRDb25maWcucHJldmVudFNhdmVOb3RpZmljYXRpb247XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9sZENvbmZpZy5pbnRlcmVzdGluZ0Zvcm1zKSB7XG4gICAgICAgICAgICBpZiAob2xkQ29uZmlnLmludGVyZXN0aW5nRm9ybXMubmFtZV93KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzYy53aGl0ZUxpc3QpIHNjLndoaXRlTGlzdCA9IHsgZm9ybTogeyBuYW1lczogW10gfSB9O1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFzYy53aGl0ZUxpc3QuZm9ybSkgc2Mud2hpdGVMaXN0LmZvcm0gPSB7IG5hbWVzOiBbXSB9O1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFzYy53aGl0ZUxpc3QuZm9ybS5uYW1lcykgc2Mud2hpdGVMaXN0LmZvcm0ubmFtZXMgPSBbXTtcbiAgICAgICAgICAgICAgICBzYy53aGl0ZUxpc3QuZm9ybS5uYW1lcyA9IG9sZENvbmZpZy5pbnRlcmVzdGluZ0Zvcm1zLm5hbWVfdztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvbGRDb25maWcuaW50ZXJlc3RpbmdGb3Jtcy5pZF93KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzYy53aGl0ZUxpc3QpIHNjLndoaXRlTGlzdCA9IHsgZm9ybTogeyBpZHM6IFtdIH0gfTtcbiAgICAgICAgICAgICAgICBlbHNlIGlmICghc2Mud2hpdGVMaXN0LmZvcm0pIHNjLndoaXRlTGlzdC5mb3JtID0geyBpZHM6IFtdIH07XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIXNjLndoaXRlTGlzdC5mb3JtLmlkcykgc2Mud2hpdGVMaXN0LmZvcm0uaWRzID0gW107XG4gICAgICAgICAgICAgICAgc2Mud2hpdGVMaXN0LmZvcm0uaWRzID0gb2xkQ29uZmlnLmludGVyZXN0aW5nRm9ybXMuaWRfdztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvbGRDb25maWcuaW50ZXJlc3RpbmdGb3Jtcy5uYW1lX2IpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXNjLmJsYWNrTGlzdCkgc2MuYmxhY2tMaXN0ID0geyBmb3JtOiB7IG5hbWVzOiBbXSB9IH07XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIXNjLmJsYWNrTGlzdC5mb3JtKSBzYy5ibGFja0xpc3QuZm9ybSA9IHsgbmFtZXM6IFtdIH07XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIXNjLmJsYWNrTGlzdC5mb3JtLm5hbWVzKSBzYy5ibGFja0xpc3QuZm9ybS5uYW1lcyA9IFtdO1xuICAgICAgICAgICAgICAgIHNjLmJsYWNrTGlzdC5mb3JtLm5hbWVzID0gb2xkQ29uZmlnLmludGVyZXN0aW5nRm9ybXMubmFtZV9iO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9sZENvbmZpZy5pbnRlcmVzdGluZ0Zvcm1zLmlkX2IpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXNjLmJsYWNrTGlzdCkgc2MuYmxhY2tMaXN0ID0geyBmb3JtOiB7IGlkczogW10gfSB9O1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFzYy5ibGFja0xpc3QuZm9ybSkgc2MuYmxhY2tMaXN0LmZvcm0gPSB7IGlkczogW10gfTtcbiAgICAgICAgICAgICAgICBlbHNlIGlmICghc2MuYmxhY2tMaXN0LmZvcm0uaWRzKSBzYy5ibGFja0xpc3QuZm9ybS5pZHMgPSBbXTtcbiAgICAgICAgICAgICAgICBzYy5ibGFja0xpc3QuZm9ybS5pZHMgPSBvbGRDb25maWcuaW50ZXJlc3RpbmdGb3Jtcy5pZF9iO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9sZENvbmZpZy5pbnRlcmVzdGluZ0Zvcm1zLmZfbmFtZV93KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzYy53aGl0ZUxpc3QpIHNjLndoaXRlTGlzdCA9IHsgZmllbGRzOiB7IG5hbWVzOiBbXSB9IH07XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIXNjLndoaXRlTGlzdC5maWVsZHMpIHNjLndoaXRlTGlzdC5maWVsZHMgPSB7IG5hbWVzOiBbXSB9O1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFzYy53aGl0ZUxpc3QuZmllbGRzLm5hbWVzKSBzYy53aGl0ZUxpc3QuZmllbGRzLm5hbWVzID0gW107XG4gICAgICAgICAgICAgICAgc2Mud2hpdGVMaXN0LmZpZWxkcy5uYW1lcyA9IG9sZENvbmZpZy5pbnRlcmVzdGluZ0Zvcm1zLmZfbmFtZV93O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9sZENvbmZpZy5pbnRlcmVzdGluZ0Zvcm1zLmZfaWRfdykge1xuICAgICAgICAgICAgICAgIGlmICghc2Mud2hpdGVMaXN0KSBzYy53aGl0ZUxpc3QgPSB7IGZpZWxkczogeyBpZHM6IFtdIH0gfTtcbiAgICAgICAgICAgICAgICBlbHNlIGlmICghc2Mud2hpdGVMaXN0LmZpZWxkcykgc2Mud2hpdGVMaXN0LmZpZWxkcyA9IHsgaWRzOiBbXSB9O1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFzYy53aGl0ZUxpc3QuZmllbGRzLmlkcykgc2Mud2hpdGVMaXN0LmZpZWxkcy5pZHMgPSBbXTtcbiAgICAgICAgICAgICAgICBzYy53aGl0ZUxpc3QuZmllbGRzLmlkcyA9IG9sZENvbmZpZy5pbnRlcmVzdGluZ0Zvcm1zLmZfaWRfdztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvbGRDb25maWcuaW50ZXJlc3RpbmdGb3Jtcy5mX25hbWVfYikge1xuICAgICAgICAgICAgICAgIGlmICghc2MuYmxhY2tMaXN0KSBzYy5ibGFja0xpc3QgPSB7IGZpZWxkczogeyBuYW1lczogW10gfSB9O1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFzYy5ibGFja0xpc3QuZmllbGRzKSBzYy5ibGFja0xpc3QuZmllbGRzID0geyBuYW1lczogW10gfTtcbiAgICAgICAgICAgICAgICBlbHNlIGlmICghc2MuYmxhY2tMaXN0LmZpZWxkcy5uYW1lcykgc2MuYmxhY2tMaXN0LmZpZWxkcy5uYW1lcyA9IFtdO1xuICAgICAgICAgICAgICAgIHNjLmJsYWNrTGlzdC5maWVsZHMubmFtZXMgPSBvbGRDb25maWcuaW50ZXJlc3RpbmdGb3Jtcy5mX25hbWVfYjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvbGRDb25maWcuaW50ZXJlc3RpbmdGb3Jtcy5mX2lkX2IpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXNjLmJsYWNrTGlzdCkgc2MuYmxhY2tMaXN0ID0geyBmaWVsZHM6IHsgaWRzOiBbXSB9IH07XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIXNjLmJsYWNrTGlzdC5maWVsZHMpIHNjLmJsYWNrTGlzdC5maWVsZHMgPSB7IGlkczogW10gfTtcbiAgICAgICAgICAgICAgICBlbHNlIGlmICghc2MuYmxhY2tMaXN0LmZpZWxkcy5pZHMpIHNjLmJsYWNrTGlzdC5maWVsZHMuaWRzID0gW107XG4gICAgICAgICAgICAgICAgc2MuYmxhY2tMaXN0LmZpZWxkcy5pZHMgPSBvbGRDb25maWcuaW50ZXJlc3RpbmdGb3Jtcy5mX2lkX2I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNjO1xuICAgIH1cbn1cbiIsImRlY2xhcmUgY29uc3QgcHVibGljU3VmZml4TGlzdDtcbmRlY2xhcmUgY29uc3QgcHVueWNvZGU7XG5kZWNsYXJlIGNvbnN0IHBzbERhdGE7XG5cbmV4cG9ydCBjbGFzcyBVdGlscyB7XG4gICAgcHJpdmF0ZSBwc2xJbml0aWFsaXNlZCA9IGZhbHNlO1xuXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAvIEdlbmVyYWwgdXRpbGl0eSBmdW5jdGlvbnNcbiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAgIHZlcnNpb25Bc0ludCh2ZXJzaW9uQXJyYXkpIHtcbiAgICAgICAgbGV0IHZhbHVlID0gMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2ZXJzaW9uQXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUgKiAyNTYgKyB2ZXJzaW9uQXJyYXlbaV07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuXG4gICAgdmVyc2lvbkFzQXJyYXkodmVyc2lvbkludCkge1xuICAgICAgICBjb25zdCBieXRlQXJyYXkgPSBbMCwgMCwgMF07XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IGJ5dGVBcnJheS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgY29uc3QgYnl0ZSA9IHZlcnNpb25JbnQgJiAweGZmO1xuICAgICAgICAgICAgYnl0ZUFycmF5W2ldID0gYnl0ZTtcbiAgICAgICAgICAgIHZlcnNpb25JbnQgPSAodmVyc2lvbkludCAtIGJ5dGUpIC8gMjU2O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGJ5dGVBcnJheTtcbiAgICB9XG5cbiAgICB2ZXJzaW9uQXNTdHJpbmcodmVyc2lvbkludCkge1xuICAgICAgICBsZXQgdmFsdWUgPSBcIlwiO1xuICAgICAgICBjb25zdCB2ZXJzaW9uQXJyYXkgPSB0aGlzLnZlcnNpb25Bc0FycmF5KHZlcnNpb25JbnQpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZlcnNpb25BcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGkgPiAwKSB2YWx1ZSArPSBcIi5cIjtcbiAgICAgICAgICAgIHZhbHVlICs9IHZlcnNpb25BcnJheVtpXS50b1N0cmluZygpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIC8vIHJldHVybiB0aGUgdHdvLWRpZ2l0IGhleGFkZWNpbWFsIGNvZGUgZm9yIGEgYnl0ZVxuICAgIHRvSGV4U3RyaW5nKGNoYXJDb2RlKSB7XG4gICAgICAgIHJldHVybiAoXCIwXCIgKyBjaGFyQ29kZS50b1N0cmluZygxNikpLnNsaWNlKC0yKTtcbiAgICB9XG5cbiAgICBCaWdJbnRGcm9tUmFuZG9tKGJ5dGVDb3VudCkge1xuICAgICAgICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KGJ5dGVDb3VudCk7XG4gICAgICAgIHdpbmRvdy5jcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKGJ5dGVzKTtcbiAgICAgICAgY29uc3QgaGV4ID0gQXJyYXkuZnJvbShieXRlcykubWFwKHRoaXMudG9IZXhTdHJpbmcpLmpvaW4oXCJcIik7XG4gICAgICAgIHJldHVybiBCaWdJbnRlZ2VyLnBhcnNlKGhleCwgMTYpO1xuICAgICAgICAvL1RPRE86IHN3aXRjaCB0byBuYXRpdmUgYmlnaW50XG4gICAgICAgIC8vICAgICAgICByZXR1cm4gQmlnSW50KGAweCR7aGV4fWApO1xuICAgIH1cblxuICAgIC8vIGlucHV0IGNhbiBiZSBlaXRoZXIgVVRGOCBmb3JtYXR0ZWQgc3RyaW5nIG9yIGEgYnl0ZSBhcnJheVxuICAgIGhhc2g8VCBleHRlbmRzIHN0cmluZyB8IFVpbnQ4QXJyYXk+KGRhdGE6IFQsIG91dEZvcm1hdCA9IFwiaGV4XCIsIGFsZ29yaXRobSA9IFwiU0hBLTI1NlwiKSB7XG4gICAgICAgIGxldCBpbkJ1ZmZlcjogYW55O1xuXG4gICAgICAgIGlmICh0eXBlb2YgZGF0YSA9PSBcInN0cmluZ1wiKSBpbkJ1ZmZlciA9IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShkYXRhKTtcbiAgICAgICAgZWxzZSBpbkJ1ZmZlciA9IGRhdGE7XG5cbiAgICAgICAgcmV0dXJuIGNyeXB0by5zdWJ0bGUuZGlnZXN0KHsgbmFtZTogYWxnb3JpdGhtIH0sIGluQnVmZmVyKS50aGVuKG91dEJ1ZmZlciA9PiB7XG4gICAgICAgICAgICBpZiAob3V0Rm9ybWF0ID09IFwiYmFzZTY0XCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdXRpbHMuYnl0ZUFycmF5VG9CYXNlNjQob3V0QnVmZmVyKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEFycmF5LmZyb20obmV3IFVpbnQ4QXJyYXkob3V0QnVmZmVyKSkubWFwKHRoaXMudG9IZXhTdHJpbmcpLmpvaW4oXCJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGludFRvQnl0ZUFycmF5KGludCkge1xuICAgICAgICBjb25zdCBieXRlQXJyYXkgPSBbMCwgMCwgMCwgMF07XG5cbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSBieXRlQXJyYXkubGVuZ3RoIC0gMTsgaW5kZXggPj0gMDsgaW5kZXgtLSkge1xuICAgICAgICAgICAgY29uc3QgYnl0ZSA9IGludCAmIDB4ZmY7XG4gICAgICAgICAgICBieXRlQXJyYXlbaW5kZXhdID0gYnl0ZTtcbiAgICAgICAgICAgIGludCA9IChpbnQgLSBieXRlKSAvIDI1NjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBieXRlQXJyYXk7XG4gICAgfVxuXG4gICAgaW50QXJyYXlUb0J5dGVBcnJheShpbnRBcnJheSkge1xuICAgICAgICBjb25zdCBieXRlQXJyYXkgPSBuZXcgQXJyYXkoaW50QXJyYXkubGVuZ3RoICogNCk7XG5cbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGludEFycmF5Lmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgbGV0IGludCA9IGludEFycmF5W2luZGV4XTtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAzOyBqID49IDA7IGotLSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJ5dGUgPSBpbnQgJiAweGZmO1xuICAgICAgICAgICAgICAgIGJ5dGVBcnJheVtpbmRleCAqIDQgKyBqXSA9IGJ5dGU7XG4gICAgICAgICAgICAgICAgaW50ID0gKGludCAtIGJ5dGUpIC8gMjU2O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGJ5dGVBcnJheTtcbiAgICB9XG5cbiAgICBzdHJpbmdUb0J5dGVBcnJheShzdHIpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBUZXh0RW5jb2RlcigpO1xuICAgICAgICByZXR1cm4gZS5lbmNvZGUoc3RyKTtcbiAgICB9XG5cbiAgICAvLyBBIHZhcmlhdGlvbiBvZiBiYXNlNjR0b0J5dGVBcnJheSB3aGljaCBhbGxvd3MgdXMgdG8gY2FsY3VsYXRlIGEgSE1BQyBmYXJcbiAgICAvLyBtb3JlIGVmZmljaWVudGx5IHRoYW4gd2l0aCBzZXBlcmF0ZSBtZW1vcnkgYnVmZmVyc1xuICAgIGJhc2U2NHRvQnl0ZUFycmF5Rm9ySE1BQyhpbnB1dCwgZXh0cmFMZW5ndGgsIHZpZXcgPSBudWxsKSB7XG4gICAgICAgIGNvbnN0IGJpbmFyeSA9IGF0b2IoaW5wdXQpO1xuICAgICAgICBjb25zdCBsZW4gPSBiaW5hcnkubGVuZ3RoO1xuICAgICAgICBsZXQgb2Zmc2V0ID0gMDtcbiAgICAgICAgaWYgKCF2aWV3KSB7XG4gICAgICAgICAgICBjb25zdCBidWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIobGVuICsgZXh0cmFMZW5ndGgpO1xuICAgICAgICAgICAgdmlldyA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlcik7XG4gICAgICAgICAgICBvZmZzZXQgPSAyMDtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2aWV3W2kgKyBvZmZzZXRdID0gYmluYXJ5LmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZpZXc7XG4gICAgfVxuXG4gICAgYmFzZTY0dG9CeXRlQXJyYXkoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgYmluYXJ5ID0gYXRvYihpbnB1dCk7XG4gICAgICAgIGNvbnN0IGxlbiA9IGJpbmFyeS5sZW5ndGg7XG4gICAgICAgIGNvbnN0IGJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihsZW4pO1xuICAgICAgICBjb25zdCB2aWV3ID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgdmlld1tpXSA9IGJpbmFyeS5jaGFyQ29kZUF0KGkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2aWV3O1xuICAgIH1cblxuICAgIGJ5dGVBcnJheVRvQmFzZTY0KGFycmF5QnVmZmVyKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IGJhc2U2NCA9IFwiXCI7XG4gICAgICAgIGNvbnN0IGVuY29kaW5ncyA9IFwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrL1wiO1xuICAgICAgICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5QnVmZmVyKTtcbiAgICAgICAgY29uc3QgYnl0ZUxlbmd0aCA9IGJ5dGVzLmJ5dGVMZW5ndGg7XG4gICAgICAgIGNvbnN0IGJ5dGVSZW1haW5kZXIgPSBieXRlTGVuZ3RoICUgMztcbiAgICAgICAgY29uc3QgbWFpbkxlbmd0aCA9IGJ5dGVMZW5ndGggLSBieXRlUmVtYWluZGVyO1xuICAgICAgICBsZXQgYTtcbiAgICAgICAgbGV0IGI7XG4gICAgICAgIGxldCBjO1xuICAgICAgICBsZXQgZDtcbiAgICAgICAgbGV0IGNodW5rO1xuXG4gICAgICAgIC8vIE1haW4gbG9vcCBkZWFscyB3aXRoIGJ5dGVzIGluIGNodW5rcyBvZiAzXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWFpbkxlbmd0aDsgaSA9IGkgKyAzKSB7XG4gICAgICAgICAgICAvLyBDb21iaW5lIGludG8gYSBzaW5nbGUgaW50ZWdlclxuICAgICAgICAgICAgY2h1bmsgPSAoYnl0ZXNbaV0gPDwgMTYpIHwgKGJ5dGVzW2kgKyAxXSA8PCA4KSB8IGJ5dGVzW2kgKyAyXTtcblxuICAgICAgICAgICAgLy8gVXNlIGJpdG1hc2tzIHRvIGV4dHJhY3QgNi1iaXQgc2VnbWVudHMgZnJvbSB0aGUgdHJpcGxldFxuICAgICAgICAgICAgYSA9IChjaHVuayAmIDE2NTE1MDcyKSA+PiAxODsgLy8gMTY1MTUwNzIgPSAoMl42IC0gMSkgPDwgMThcbiAgICAgICAgICAgIGIgPSAoY2h1bmsgJiAyNTgwNDgpID4+IDEyOyAvLyAyNTgwNDggPSAoMl42IC0gMSkgPDwgMTJcbiAgICAgICAgICAgIGMgPSAoY2h1bmsgJiA0MDMyKSA+PiA2OyAvLyA0MDMyID0gKDJeNiAtIDEpIDw8IDZcbiAgICAgICAgICAgIGQgPSBjaHVuayAmIDYzOyAvLyA2MyA9IDJeNiAtIDFcblxuICAgICAgICAgICAgLy8gQ29udmVydCB0aGUgcmF3IGJpbmFyeSBzZWdtZW50cyB0byB0aGUgYXBwcm9wcmlhdGUgQVNDSUkgZW5jb2RpbmdcbiAgICAgICAgICAgIGJhc2U2NCArPSBlbmNvZGluZ3NbYV0gKyBlbmNvZGluZ3NbYl0gKyBlbmNvZGluZ3NbY10gKyBlbmNvZGluZ3NbZF07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBEZWFsIHdpdGggdGhlIHJlbWFpbmluZyBieXRlcyBhbmQgcGFkZGluZ1xuICAgICAgICBpZiAoYnl0ZVJlbWFpbmRlciA9PSAxKSB7XG4gICAgICAgICAgICBjaHVuayA9IGJ5dGVzW21haW5MZW5ndGhdO1xuXG4gICAgICAgICAgICBhID0gKGNodW5rICYgMjUyKSA+PiAyOyAvLyAyNTIgPSAoMl42IC0gMSkgPDwgMlxuXG4gICAgICAgICAgICAvLyBTZXQgdGhlIDQgbGVhc3Qgc2lnbmlmaWNhbnQgYml0cyB0byB6ZXJvXG4gICAgICAgICAgICBiID0gKGNodW5rICYgMykgPDwgNDsgLy8gMyA9IDJeMiAtIDFcblxuICAgICAgICAgICAgYmFzZTY0ICs9IGVuY29kaW5nc1thXSArIGVuY29kaW5nc1tiXSArIFwiPT1cIjtcbiAgICAgICAgfSBlbHNlIGlmIChieXRlUmVtYWluZGVyID09IDIpIHtcbiAgICAgICAgICAgIGNodW5rID0gKGJ5dGVzW21haW5MZW5ndGhdIDw8IDgpIHwgYnl0ZXNbbWFpbkxlbmd0aCArIDFdO1xuXG4gICAgICAgICAgICBhID0gKGNodW5rICYgNjQ1MTIpID4+IDEwOyAvLyA2NDUxMiA9ICgyXjYgLSAxKSA8PCAxMFxuICAgICAgICAgICAgYiA9IChjaHVuayAmIDEwMDgpID4+IDQ7IC8vIDEwMDggID0gKDJeNiAtIDEpIDw8IDRcblxuICAgICAgICAgICAgLy8gU2V0IHRoZSAyIGxlYXN0IHNpZ25pZmljYW50IGJpdHMgdG8gemVyb1xuICAgICAgICAgICAgYyA9IChjaHVuayAmIDE1KSA8PCAyOyAvLyAxNSA9IDJeNCAtIDFcblxuICAgICAgICAgICAgYmFzZTY0ICs9IGVuY29kaW5nc1thXSArIGVuY29kaW5nc1tiXSArIGVuY29kaW5nc1tjXSArIFwiPVwiO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGJhc2U2NDtcbiAgICB9XG5cbiAgICBoZXhTdHJpbmdUb0J5dGVBcnJheShoZXhTdHJpbmcsIGJ5dGVBcnJheSA9IG51bGwpIHtcbiAgICAgICAgaWYgKGhleFN0cmluZy5sZW5ndGggJSAyICE9PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcIk11c3QgaGF2ZSBhbiBldmVuIG51bWJlciBvZiBoZXggZGlnaXRzIHRvIGNvbnZlcnQgdG8gYnl0ZXNcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbnVtQnl0ZXMgPSBoZXhTdHJpbmcubGVuZ3RoIC8gMjtcbiAgICAgICAgaWYgKCFieXRlQXJyYXkpIGJ5dGVBcnJheSA9IG5ldyBVaW50OEFycmF5KG51bUJ5dGVzKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1CeXRlczsgaSsrKSB7XG4gICAgICAgICAgICBieXRlQXJyYXlbaV0gPSBwYXJzZUludChoZXhTdHJpbmcuc3Vic3RyKGkgKiAyLCAyKSwgMTYpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBieXRlQXJyYXk7XG4gICAgfVxuXG4gICAgbmV3R1VJRCgpIHtcbiAgICAgICAgY29uc3QgbHV0ID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMjU2OyBpKyspIHtcbiAgICAgICAgICAgIGx1dFtpXSA9IChpIDwgMTYgPyBcIjBcIiA6IFwiXCIpICsgaS50b1N0cmluZygxNik7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBkdmFscyA9IG5ldyBVaW50MzJBcnJheSg0KTtcbiAgICAgICAgd2luZG93LmNyeXB0by5nZXRSYW5kb21WYWx1ZXMoZHZhbHMpO1xuICAgICAgICBjb25zdCBkMCA9IGR2YWxzWzBdO1xuICAgICAgICBjb25zdCBkMSA9IGR2YWxzWzFdO1xuICAgICAgICBjb25zdCBkMiA9IGR2YWxzWzJdO1xuICAgICAgICBjb25zdCBkMyA9IGR2YWxzWzNdO1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgbHV0W2QwICYgMHhmZl0gK1xuICAgICAgICAgICAgbHV0WyhkMCA+PiA4KSAmIDB4ZmZdICtcbiAgICAgICAgICAgIGx1dFsoZDAgPj4gMTYpICYgMHhmZl0gK1xuICAgICAgICAgICAgbHV0WyhkMCA+PiAyNCkgJiAweGZmXSArXG4gICAgICAgICAgICBcIi1cIiArXG4gICAgICAgICAgICBsdXRbZDEgJiAweGZmXSArXG4gICAgICAgICAgICBsdXRbKGQxID4+IDgpICYgMHhmZl0gK1xuICAgICAgICAgICAgXCItXCIgK1xuICAgICAgICAgICAgbHV0WygoZDEgPj4gMTYpICYgMHgwZikgfCAweDQwXSArXG4gICAgICAgICAgICBsdXRbKGQxID4+IDI0KSAmIDB4ZmZdICtcbiAgICAgICAgICAgIFwiLVwiICtcbiAgICAgICAgICAgIGx1dFsoZDIgJiAweDNmKSB8IDB4ODBdICtcbiAgICAgICAgICAgIGx1dFsoZDIgPj4gOCkgJiAweGZmXSArXG4gICAgICAgICAgICBcIi1cIiArXG4gICAgICAgICAgICBsdXRbKGQyID4+IDE2KSAmIDB4ZmZdICtcbiAgICAgICAgICAgIGx1dFsoZDIgPj4gMjQpICYgMHhmZl0gK1xuICAgICAgICAgICAgbHV0W2QzICYgMHhmZl0gK1xuICAgICAgICAgICAgbHV0WyhkMyA+PiA4KSAmIDB4ZmZdICtcbiAgICAgICAgICAgIGx1dFsoZDMgPj4gMTYpICYgMHhmZl0gK1xuICAgICAgICAgICAgbHV0WyhkMyA+PiAyNCkgJiAweGZmXVxuICAgICAgICApO1xuICAgIH1cblxuICAgIGJhc2U2NHVybERlY29kZShpbnB1dDogc3RyaW5nKSB7XG4gICAgICAgIC8vIEkgZG9uJ3Qgc2VlIHdoeSB3ZSBkbyBhbnkgcmVwbGFjZW1lbnRzIGhlcmUuIFNlZW1zIGEgcG9pbnRsZXNzIHdhc3RlIG9mIGN5Y2xlcy4gTmVlZHMgdGVzdGluZyBhbmQgcmVtb3ZhbCBpZiBJJ20gcmlnaHQuXG4gICAgICAgIHJldHVybiBhdG9iKGlucHV0LnJlcGxhY2UoLy0vZywgXCIrXCIpLnJlcGxhY2UoL18vZywgXCIvXCIpKTtcbiAgICB9XG5cbiAgICBiaW5hcnlUb0J5dGVBcnJheShiaW5hcnk6IHN0cmluZyk6IFVpbnQ4QXJyYXkge1xuICAgICAgICBjb25zdCBsZW4gPSBiaW5hcnkubGVuZ3RoO1xuICAgICAgICBjb25zdCBidWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIobGVuKTtcbiAgICAgICAgY29uc3QgdmlldyA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlcik7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIHZpZXdbaV0gPSBiaW5hcnkuY2hhckNvZGVBdChpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmlldztcbiAgICB9XG5cbiAgICBiYXNlNjR1cmx0b0J5dGVBcnJheShpbnB1dDogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IGJpbmFyeSA9IHRoaXMuYmFzZTY0dXJsRGVjb2RlKGlucHV0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJ5VG9CeXRlQXJyYXkoYmluYXJ5KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0IHBzbCgpIHtcbiAgICAgICAgaWYgKCFwdWJsaWNTdWZmaXhMaXN0KSB0aHJvdyBuZXcgRXJyb3IoXCJwdWJsaWNTdWZmaXhMaXN0IGxpYnJhcnkgbm90IHByZXNlbnRcIik7XG4gICAgICAgIGlmICghdGhpcy5wc2xJbml0aWFsaXNlZCkge1xuICAgICAgICAgICAgcHVibGljU3VmZml4TGlzdC5wYXJzZShwc2xEYXRhLnRleHQsIHB1bnljb2RlLnRvQVNDSUkpO1xuICAgICAgICAgICAgdGhpcy5wc2xJbml0aWFsaXNlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHB1YmxpY1N1ZmZpeExpc3Q7XG4gICAgfVxufVxuXG4vLyBCYXNlZCBvbiB0aGUgZmFzdC1kZWVwLWVxdWFsIHBhY2thZ2VcbmV4cG9ydCBmdW5jdGlvbiBkZWVwRXF1YWwoYTogYW55LCBiOiBhbnkpOiBib29sZWFuIHtcbiAgICBpZiAoYSA9PT0gYikgcmV0dXJuIHRydWU7XG5cbiAgICBpZiAoYSAmJiBiICYmIHR5cGVvZiBhID09IFwib2JqZWN0XCIgJiYgdHlwZW9mIGIgPT0gXCJvYmplY3RcIikge1xuICAgICAgICBpZiAoYS5jb25zdHJ1Y3RvciAhPT0gYi5jb25zdHJ1Y3RvcikgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgIGxldCBsZW5ndGg7XG4gICAgICAgIGxldCBpO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhKSkge1xuICAgICAgICAgICAgbGVuZ3RoID0gYS5sZW5ndGg7XG4gICAgICAgICAgICBpZiAobGVuZ3RoICE9PSBiLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgZm9yIChpID0gbGVuZ3RoOyBpLS0gIT09IDA7KVxuICAgICAgICAgICAgICAgIHtpZiAoIWRlZXBFcXVhbChhW2ldLCBiW2ldKSkgcmV0dXJuIGZhbHNlO31cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cblxuICAgICAgICBpZiAoYS5jb25zdHJ1Y3RvciA9PT0gUmVnRXhwKSByZXR1cm4gYS5zb3VyY2UgPT09IGIuc291cmNlICYmIGEuZmxhZ3MgPT09IGIuZmxhZ3M7XG4gICAgICAgIGlmIChhLnZhbHVlT2YgIT09IE9iamVjdC5wcm90b3R5cGUudmFsdWVPZikgcmV0dXJuIGEudmFsdWVPZigpID09PSBiLnZhbHVlT2YoKTtcbiAgICAgICAgaWYgKGEudG9TdHJpbmcgIT09IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcpIHJldHVybiBhLnRvU3RyaW5nKCkgPT09IGIudG9TdHJpbmcoKTtcblxuICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoYSk7XG4gICAgICAgIGxlbmd0aCA9IGtleXMubGVuZ3RoO1xuICAgICAgICBpZiAobGVuZ3RoICE9PSBPYmplY3Qua2V5cyhiKS5sZW5ndGgpIHJldHVybiBmYWxzZTtcblxuICAgICAgICBmb3IgKGkgPSBsZW5ndGg7IGktLSAhPT0gMDspXG4gICAgICAgICAgICB7aWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwga2V5c1tpXSkpIHJldHVybiBmYWxzZTt9XG5cbiAgICAgICAgZm9yIChpID0gbGVuZ3RoOyBpLS0gIT09IDA7KSB7XG4gICAgICAgICAgICBjb25zdCBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgICAgaWYgKCFkZWVwRXF1YWwoYVtrZXldLCBiW2tleV0pKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyB0cnVlIGlmIGJvdGggTmFOLCBmYWxzZSBvdGhlcndpc2VcbiAgICByZXR1cm4gYSAhPT0gYSAmJiBiICE9PSBiO1xufVxuXG5leHBvcnQgY29uc3QgdXRpbHMgPSBuZXcgVXRpbHMoKTtcbiIsImNvbnN0IGxpc3QgPSBbXG5cdC8vIE5hdGl2ZSBFUyBlcnJvcnMgaHR0cHM6Ly8yNjIuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy8xMi4wLyNzZWMtd2VsbC1rbm93bi1pbnRyaW5zaWMtb2JqZWN0c1xuXHRFdmFsRXJyb3IsXG5cdFJhbmdlRXJyb3IsXG5cdFJlZmVyZW5jZUVycm9yLFxuXHRTeW50YXhFcnJvcixcblx0VHlwZUVycm9yLFxuXHRVUklFcnJvcixcblxuXHQvLyBCdWlsdC1pbiBlcnJvcnNcblx0Z2xvYmFsVGhpcy5ET01FeGNlcHRpb24sXG5cblx0Ly8gTm9kZS1zcGVjaWZpYyBlcnJvcnNcblx0Ly8gaHR0cHM6Ly9ub2RlanMub3JnL2FwaS9lcnJvcnMuaHRtbFxuXHRnbG9iYWxUaGlzLkFzc2VydGlvbkVycm9yLFxuXHRnbG9iYWxUaGlzLlN5c3RlbUVycm9yLFxuXVxuXHQvLyBOb24tbmF0aXZlIEVycm9ycyBhcmUgdXNlZCB3aXRoIGBnbG9iYWxUaGlzYCBiZWNhdXNlIHRoZXkgbWlnaHQgYmUgbWlzc2luZy4gVGhpcyBmaWx0ZXIgZHJvcHMgdGhlbSB3aGVuIHVuZGVmaW5lZC5cblx0LmZpbHRlcihCb29sZWFuKVxuXHQubWFwKFxuXHRcdGNvbnN0cnVjdG9yID0+IFtjb25zdHJ1Y3Rvci5uYW1lLCBjb25zdHJ1Y3Rvcl0sXG5cdCk7XG5cbmNvbnN0IGVycm9yQ29uc3RydWN0b3JzID0gbmV3IE1hcChsaXN0KTtcblxuZXhwb3J0IGRlZmF1bHQgZXJyb3JDb25zdHJ1Y3RvcnM7XG4iLCJpbXBvcnQgZXJyb3JDb25zdHJ1Y3RvcnMgZnJvbSAnLi9lcnJvci1jb25zdHJ1Y3RvcnMuanMnO1xuXG5leHBvcnQgY2xhc3MgTm9uRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG5cdG5hbWUgPSAnTm9uRXJyb3InO1xuXG5cdGNvbnN0cnVjdG9yKG1lc3NhZ2UpIHtcblx0XHRzdXBlcihOb25FcnJvci5fcHJlcGFyZVN1cGVyTWVzc2FnZShtZXNzYWdlKSk7XG5cdH1cblxuXHRzdGF0aWMgX3ByZXBhcmVTdXBlck1lc3NhZ2UobWVzc2FnZSkge1xuXHRcdHRyeSB7XG5cdFx0XHRyZXR1cm4gSlNPTi5zdHJpbmdpZnkobWVzc2FnZSk7XG5cdFx0fSBjYXRjaCB7XG5cdFx0XHRyZXR1cm4gU3RyaW5nKG1lc3NhZ2UpO1xuXHRcdH1cblx0fVxufVxuXG5jb25zdCBjb21tb25Qcm9wZXJ0aWVzID0gW1xuXHR7XG5cdFx0cHJvcGVydHk6ICduYW1lJyxcblx0XHRlbnVtZXJhYmxlOiBmYWxzZSxcblx0fSxcblx0e1xuXHRcdHByb3BlcnR5OiAnbWVzc2FnZScsXG5cdFx0ZW51bWVyYWJsZTogZmFsc2UsXG5cdH0sXG5cdHtcblx0XHRwcm9wZXJ0eTogJ3N0YWNrJyxcblx0XHRlbnVtZXJhYmxlOiBmYWxzZSxcblx0fSxcblx0e1xuXHRcdHByb3BlcnR5OiAnY29kZScsXG5cdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0fSxcblx0e1xuXHRcdHByb3BlcnR5OiAnY2F1c2UnLFxuXHRcdGVudW1lcmFibGU6IGZhbHNlLFxuXHR9LFxuXTtcblxuY29uc3QgdG9Kc29uV2FzQ2FsbGVkID0gU3ltYm9sKCcudG9KU09OIHdhcyBjYWxsZWQnKTtcblxuY29uc3QgdG9KU09OID0gZnJvbSA9PiB7XG5cdGZyb21bdG9Kc29uV2FzQ2FsbGVkXSA9IHRydWU7XG5cdGNvbnN0IGpzb24gPSBmcm9tLnRvSlNPTigpO1xuXHRkZWxldGUgZnJvbVt0b0pzb25XYXNDYWxsZWRdO1xuXHRyZXR1cm4ganNvbjtcbn07XG5cbmNvbnN0IGdldEVycm9yQ29uc3RydWN0b3IgPSBuYW1lID0+IGVycm9yQ29uc3RydWN0b3JzLmdldChuYW1lKSA/PyBFcnJvcjtcblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbXBsZXhpdHlcbmNvbnN0IGRlc3Ryb3lDaXJjdWxhciA9ICh7XG5cdGZyb20sXG5cdHNlZW4sXG5cdHRvLFxuXHRmb3JjZUVudW1lcmFibGUsXG5cdG1heERlcHRoLFxuXHRkZXB0aCxcblx0dXNlVG9KU09OLFxuXHRzZXJpYWxpemUsXG59KSA9PiB7XG5cdGlmICghdG8pIHtcblx0XHRpZiAoQXJyYXkuaXNBcnJheShmcm9tKSkge1xuXHRcdFx0dG8gPSBbXTtcblx0XHR9IGVsc2UgaWYgKCFzZXJpYWxpemUgJiYgaXNFcnJvckxpa2UoZnJvbSkpIHtcblx0XHRcdGNvbnN0IEVycm9yID0gZ2V0RXJyb3JDb25zdHJ1Y3Rvcihmcm9tLm5hbWUpO1xuXHRcdFx0dG8gPSBuZXcgRXJyb3IoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dG8gPSB7fTtcblx0XHR9XG5cdH1cblxuXHRzZWVuLnB1c2goZnJvbSk7XG5cblx0aWYgKGRlcHRoID49IG1heERlcHRoKSB7XG5cdFx0cmV0dXJuIHRvO1xuXHR9XG5cblx0aWYgKHVzZVRvSlNPTiAmJiB0eXBlb2YgZnJvbS50b0pTT04gPT09ICdmdW5jdGlvbicgJiYgZnJvbVt0b0pzb25XYXNDYWxsZWRdICE9PSB0cnVlKSB7XG5cdFx0cmV0dXJuIHRvSlNPTihmcm9tKTtcblx0fVxuXG5cdGNvbnN0IGNvbnRpbnVlRGVzdHJveUNpcmN1bGFyID0gdmFsdWUgPT4gZGVzdHJveUNpcmN1bGFyKHtcblx0XHRmcm9tOiB2YWx1ZSxcblx0XHRzZWVuOiBbLi4uc2Vlbl0sXG5cdFx0Zm9yY2VFbnVtZXJhYmxlLFxuXHRcdG1heERlcHRoLFxuXHRcdGRlcHRoLFxuXHRcdHVzZVRvSlNPTixcblx0XHRzZXJpYWxpemUsXG5cdH0pO1xuXG5cdGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGZyb20pKSB7XG5cdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vZGUvcHJlZmVyLWdsb2JhbC9idWZmZXJcblx0XHRpZiAodHlwZW9mIEJ1ZmZlciA9PT0gJ2Z1bmN0aW9uJyAmJiBCdWZmZXIuaXNCdWZmZXIodmFsdWUpKSB7XG5cdFx0XHR0b1trZXldID0gJ1tvYmplY3QgQnVmZmVyXSc7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHQvLyBUT0RPOiBVc2UgYHN0cmVhbS5pc1JlYWRhYmxlKClgIHdoZW4gdGFyZ2V0aW5nIE5vZGUuanMgMTguXG5cdFx0aWYgKHZhbHVlICE9PSBudWxsICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHZhbHVlLnBpcGUgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdHRvW2tleV0gPSAnW29iamVjdCBTdHJlYW1dJztcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdGlmICghdmFsdWUgfHwgdHlwZW9mIHZhbHVlICE9PSAnb2JqZWN0Jykge1xuXHRcdFx0dG9ba2V5XSA9IHZhbHVlO1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0aWYgKCFzZWVuLmluY2x1ZGVzKGZyb21ba2V5XSkpIHtcblx0XHRcdGRlcHRoKys7XG5cdFx0XHR0b1trZXldID0gY29udGludWVEZXN0cm95Q2lyY3VsYXIoZnJvbVtrZXldKTtcblxuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0dG9ba2V5XSA9ICdbQ2lyY3VsYXJdJztcblx0fVxuXG5cdGZvciAoY29uc3Qge3Byb3BlcnR5LCBlbnVtZXJhYmxlfSBvZiBjb21tb25Qcm9wZXJ0aWVzKSB7XG5cdFx0aWYgKHR5cGVvZiBmcm9tW3Byb3BlcnR5XSAhPT0gJ3VuZGVmaW5lZCcgJiYgZnJvbVtwcm9wZXJ0eV0gIT09IG51bGwpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0bywgcHJvcGVydHksIHtcblx0XHRcdFx0dmFsdWU6IGlzRXJyb3JMaWtlKGZyb21bcHJvcGVydHldKSA/IGNvbnRpbnVlRGVzdHJveUNpcmN1bGFyKGZyb21bcHJvcGVydHldKSA6IGZyb21bcHJvcGVydHldLFxuXHRcdFx0XHRlbnVtZXJhYmxlOiBmb3JjZUVudW1lcmFibGUgPyB0cnVlIDogZW51bWVyYWJsZSxcblx0XHRcdFx0Y29uZmlndXJhYmxlOiB0cnVlLFxuXHRcdFx0XHR3cml0YWJsZTogdHJ1ZSxcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiB0bztcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXJpYWxpemVFcnJvcih2YWx1ZSwgb3B0aW9ucyA9IHt9KSB7XG5cdGNvbnN0IHtcblx0XHRtYXhEZXB0aCA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSxcblx0XHR1c2VUb0pTT04gPSB0cnVlLFxuXHR9ID0gb3B0aW9ucztcblxuXHRpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAhPT0gbnVsbCkge1xuXHRcdHJldHVybiBkZXN0cm95Q2lyY3VsYXIoe1xuXHRcdFx0ZnJvbTogdmFsdWUsXG5cdFx0XHRzZWVuOiBbXSxcblx0XHRcdGZvcmNlRW51bWVyYWJsZTogdHJ1ZSxcblx0XHRcdG1heERlcHRoLFxuXHRcdFx0ZGVwdGg6IDAsXG5cdFx0XHR1c2VUb0pTT04sXG5cdFx0XHRzZXJpYWxpemU6IHRydWUsXG5cdFx0fSk7XG5cdH1cblxuXHQvLyBQZW9wbGUgc29tZXRpbWVzIHRocm93IHRoaW5ncyBiZXNpZGVzIEVycm9yIG9iamVjdHPigKZcblx0aWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdC8vIGBKU09OLnN0cmluZ2lmeSgpYCBkaXNjYXJkcyBmdW5jdGlvbnMuIFdlIGRvIHRvbywgdW5sZXNzIGEgZnVuY3Rpb24gaXMgdGhyb3duIGRpcmVjdGx5LlxuXHRcdHJldHVybiBgW0Z1bmN0aW9uOiAke3ZhbHVlLm5hbWUgPz8gJ2Fub255bW91cyd9XWA7XG5cdH1cblxuXHRyZXR1cm4gdmFsdWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZXNlcmlhbGl6ZUVycm9yKHZhbHVlLCBvcHRpb25zID0ge30pIHtcblx0Y29uc3Qge21heERlcHRoID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZfSA9IG9wdGlvbnM7XG5cblx0aWYgKHZhbHVlIGluc3RhbmNlb2YgRXJyb3IpIHtcblx0XHRyZXR1cm4gdmFsdWU7XG5cdH1cblxuXHRpZiAoaXNNaW5pbXVtVmlhYmxlU2VyaWFsaXplZEVycm9yKHZhbHVlKSkge1xuXHRcdGNvbnN0IEVycm9yID0gZ2V0RXJyb3JDb25zdHJ1Y3Rvcih2YWx1ZS5uYW1lKTtcblx0XHRyZXR1cm4gZGVzdHJveUNpcmN1bGFyKHtcblx0XHRcdGZyb206IHZhbHVlLFxuXHRcdFx0c2VlbjogW10sXG5cdFx0XHR0bzogbmV3IEVycm9yKCksXG5cdFx0XHRtYXhEZXB0aCxcblx0XHRcdGRlcHRoOiAwLFxuXHRcdFx0c2VyaWFsaXplOiBmYWxzZSxcblx0XHR9KTtcblx0fVxuXG5cdHJldHVybiBuZXcgTm9uRXJyb3IodmFsdWUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNFcnJvckxpa2UodmFsdWUpIHtcblx0cmV0dXJuIEJvb2xlYW4odmFsdWUpXG5cdCYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCdcblx0JiYgJ25hbWUnIGluIHZhbHVlXG5cdCYmICdtZXNzYWdlJyBpbiB2YWx1ZVxuXHQmJiAnc3RhY2snIGluIHZhbHVlO1xufVxuXG5mdW5jdGlvbiBpc01pbmltdW1WaWFibGVTZXJpYWxpemVkRXJyb3IodmFsdWUpIHtcblx0cmV0dXJuIEJvb2xlYW4odmFsdWUpXG5cdCYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCdcblx0JiYgJ21lc3NhZ2UnIGluIHZhbHVlXG5cdCYmICFBcnJheS5pc0FycmF5KHZhbHVlKTtcbn1cblxuZXhwb3J0IHtkZWZhdWx0IGFzIGVycm9yQ29uc3RydWN0b3JzfSBmcm9tICcuL2Vycm9yLWNvbnN0cnVjdG9ycy5qcyc7XG4iLCIvKlxuICBUaGVyZSBhcmUgZm91ciBjdW11bGF0aXZlIGxvZyBsZXZlbHMuXG5cbiAgRXJyb3IgPSAxXG4gIFdhcm4gPSAyXG4gIEluZm8gPSAzXG4gIERlYnVnID0gNFxuXG4gIFRoZSBkZWZhdWx0IGxldmVsIChXYXJuKSB3aWxsIGJlIHNldCBhcyBwYXJ0IG9mIHRoZSBpbnN0YWxsYXRpb24gcHJvY2Vzcy5cblxuICBJZiBEZWJ1ZyBsZXZlbCBpcyBzZWxlY3RlZCwgYSBQZXJzaXN0ZW50TG9nZ2VyIG9iamVjdCBpbiB0aGUgYmFja2dyb3VuZFxuICBwcm9jZXNzIHdpbGwgc3RvcmUgdGhlIGxvZyBlbnRyaWVzIGluIGxvY2FsU3RvcmFnZSBvbiBhIHJlZ3VsYXIgYmFzaXMuIEJ1dFxuICBvbmx5IGlmIHlvdSBlZGl0IHRoZSBjb2RlIHRvIGVuYWJsZSB0aGlzIGZlYXR1cmUgYmVjYXVzZSBpdCBpcyB2ZXJ5IHJlc291cmNlLWh1bmdyeVxuXG4qL1xuaW1wb3J0IHsgc2VyaWFsaXplRXJyb3IgfSBmcm9tIFwic2VyaWFsaXplLWVycm9yXCI7XG5cbmV4cG9ydCBjbGFzcyBLZWVMb2dnZXIge1xuICAgIHB1YmxpYyBkZWZhdWx0TGV2ZWwgPSA0O1xuICAgIHByaXZhdGUgb3V0cHV0U3RhcnRlZCA9IGZhbHNlO1xuICAgIHByaXZhdGUgY29uZmlnID0geyBsb2dMZXZlbDogdGhpcy5kZWZhdWx0TGV2ZWwgfTtcblxuICAgIGF0dGFjaENvbmZpZyhjb25maWc6IHsgbG9nTGV2ZWw6IG51bWJlciB9KSB7XG4gICAgICAgIHRoaXMuZGVidWcoXCJMb2dnaW5nIHN5c3RlbSBjb25maWcgdXBkYXRlZCBhdCBcIiArIERhdGUoKSk7XG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgIH1cblxuICAgIHByaXZhdGUgZm9ybWF0TWVzc2FnZShtZXNzYWdlLCBlPzogRXJyb3IpIHtcbiAgICAgICAgaWYgKCFtZXNzYWdlICYmICFlKSByZXR1cm4gXCJcIjtcblxuICAgICAgICBpZiAoIXRoaXMub3V0cHV0U3RhcnRlZCkge1xuICAgICAgICAgICAgbWVzc2FnZSA9IFwiKiBcIiArIG1lc3NhZ2U7XG4gICAgICAgICAgICB0aGlzLm91dHB1dFN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlKSB7XG4gICAgICAgICAgICBtZXNzYWdlICs9IGAgRXJyb3I6ICR7SlNPTi5zdHJpbmdpZnkoc2VyaWFsaXplRXJyb3IoZSkpfWA7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9XG5cbiAgICBkZWJ1ZyhtZXNzYWdlOiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmxvZ0xldmVsID49IDQpIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgPSB0aGlzLmZvcm1hdE1lc3NhZ2UobWVzc2FnZSk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5kZWJ1ZyhtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5sb2dMZXZlbCA+PSA0ICYmIHRoaXMuc2VuZCg0LCBtZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGluZm8obWVzc2FnZTogc3RyaW5nKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5sb2dMZXZlbCA+PSAzKSB7XG4gICAgICAgICAgICBtZXNzYWdlID0gdGhpcy5mb3JtYXRNZXNzYWdlKG1lc3NhZ2UpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5sb2dMZXZlbCA+PSA0ICYmIHRoaXMuc2VuZCgzLCBtZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHdhcm4obWVzc2FnZTogc3RyaW5nKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5sb2dMZXZlbCA+PSAyKSB7XG4gICAgICAgICAgICBtZXNzYWdlID0gdGhpcy5mb3JtYXRNZXNzYWdlKG1lc3NhZ2UpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5sb2dMZXZlbCA+PSA0ICYmIHRoaXMuc2VuZCgyLCBtZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGVycm9yKG1lc3NhZ2U6IHN0cmluZywgZT86IEVycm9yKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5sb2dMZXZlbCA+PSAxKSB7XG4gICAgICAgICAgICBtZXNzYWdlID0gdGhpcy5mb3JtYXRNZXNzYWdlKG1lc3NhZ2UsIGUpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWcubG9nTGV2ZWwgPj0gNCAmJiB0aGlzLnNlbmQoMSwgbWVzc2FnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gICAgc2VuZChsb2dMZXZlbDogMSB8IDIgfCAzIHwgNCwgbWVzc2FnZTogc3RyaW5nKSB7XG4gICAgICAgIC8vIERvIG5vdGhpbmcuXG4gICAgICAgIC8vIEZvciBhZHZhbmNlZCBkZWJ1Z2dpbmcsIGVzcGVjaWFsbHkgYWNyb3NzIGJyb3dzZXIgcmVzdGFydHMsXG4gICAgICAgIC8vIGVuYWJsZSB0aGUgY29kZSBiZWxvdyBhbmQgdGhlIHJlbGV2YW50IFBlcnNpc3RlbnRMb2dnZXIgbGluZXNcbiAgICAgICAgLy8gaW4gYmFja2dyb3VuZC50c1xuICAgICAgICAvLyBjb25zdCBsb2dFbnRyeSA9IHtsb2dMZXZlbCwgdGltZXN0YW1wOiBEYXRlLm5vdygpLCBtZXNzYWdlfTtcbiAgICAgICAgLy8gaWYgKHdpbmRvdy5LZWVQZXJzaXN0ZW50TG9nZ2VyKSB7XG4gICAgICAgIC8vICAgICAvLyBXaWxsIG9ubHkgYmUgdHJ1ZSBpbiB0aGUgYmFja2dyb3VuZCBwcm9jZXNzXG4gICAgICAgIC8vICAgICB3aW5kb3cuS2VlUGVyc2lzdGVudExvZ2dlci5lbWl0KGxvZ0VudHJ5KTtcbiAgICAgICAgLy8gfSBlbHNlIHtcbiAgICAgICAgLy8gICAgIGJyb3dzZXIucnVudGltZS5zZW5kTWVzc2FnZShsb2dFbnRyeSk7XG4gICAgICAgIC8vIH1cbiAgICB9XG5cbiAgICBzdGFja1RyYWNlKCkge1xuICAgICAgICBjb25zb2xlLmdyb3VwQ29sbGFwc2VkKFwiJWMgU3RhY2sgVHJhY2VcIiwgXCJjb2xvcjpjcmVhbTsgZm9udC1zdHlsZTogbm9ybWFsO1wiKTtcbiAgICAgICAgY29uc29sZS5kZWJ1ZyhuZXcgRXJyb3IoKS5zdGFjayk7XG4gICAgICAgIGNvbnNvbGUuZ3JvdXBFbmQoKTtcbiAgICB9XG59XG5cbmV4cG9ydCBjb25zdCBLZWVMb2cgPSBuZXcgS2VlTG9nZ2VyKCk7XG4iLCJpbXBvcnQge1xuICAgIENvbmZpZyxcbiAgICBTaXRlQ29uZmlnLFxuICAgIFNpdGVDb25maWdMb29rdXAsXG4gICAgU2l0ZUNvbmZpZ01ldGhvZCxcbiAgICBTaXRlQ29uZmlnTm9kZSxcbiAgICBTaXRlQ29uZmlnTm9kZVR5cGUsXG4gICAgU2l0ZUNvbmZpZ1RhcmdldFxufSBmcm9tIFwiLi9jb25maWdcIjtcbmltcG9ydCB7IENvbmZpZ01pZ3JhdGlvbnMgfSBmcm9tIFwiLi9Db25maWdNaWdyYXRpb25zXCI7XG5pbXBvcnQgeyBkZWZhdWx0U2l0ZUNvbmZpZyB9IGZyb20gXCIuL0RlZmF1bHRTaXRlQ29uZmlnXCI7XG5pbXBvcnQgeyB1dGlscyB9IGZyb20gXCIuL3V0aWxzXCI7XG5pbXBvcnQgeyBGaWVsZCB9IGZyb20gXCIuL21vZGVsL0ZpZWxkXCI7XG5pbXBvcnQgeyBLZWVMb2cgfSBmcm9tIFwiLi9Mb2dnZXJcIjtcblxudHlwZSBTaXRlQ29uZmlnTm9kZUFuZEluZGV4ID0ge1xuICAgIG5vZGU6IFNpdGVDb25maWdOb2RlO1xuICAgIHRhcmdldDogU2l0ZUNvbmZpZ1RhcmdldDtcbiAgICBtZXRob2Q6IFNpdGVDb25maWdNZXRob2Q7XG4gICAgbG9va3VwVmFsdWU6IHN0cmluZztcbn07XG5cbi8qXG4gIEVudHJ5LXNwZWNpZmljIGNvbmZpZ3VyYXRpb24gaXMgc3RvcmVkIGluIEtlZVBhc3MgYnV0IGluIGZ1dHVyZSBtYXliZVxuICB3ZSdsbCBzdGlsbCBtYWtlIGl0IGF2YWlsYWJsZSBmcm9tIHRoaXMgaW50ZXJmYWNlLlxuKi9cblxuLy8gUHJldGVuZCBicm93c2VyIChXZWJFeHRlbnNpb25zKSBpcyBjaHJvbWUgKHdlIGluY2x1ZGUgYVxuLy8gcG9seWZpbGwgZnJvbSBNb3ppbGxhIGJ1dCBpdCBkb2Vzbid0IHdvcmsgaW4gc29tZSBjYXNlcylcbmRlY2xhcmUgY29uc3QgY2hyb21lO1xuXG4vLyBpbmNyZW1lbnQgd2hlbiBjaGFuZ2VzIGFyZSBpbnRyb2R1Y2VkIHRoYXQgcmVxdWlyZSBkYXRhIG1pZ3JhdGlvblxuZXhwb3J0IGNvbnN0IExBVEVTVF9WRVJTSU9OID0gODtcblxuZXhwb3J0IGNvbnN0IGRlZmF1bHRDb25maWcgPSBuZXcgQ29uZmlnKCk7XG5kZWZhdWx0Q29uZmlnLmF1dG9GaWxsRGlhbG9ncyA9IGZhbHNlO1xuZGVmYXVsdENvbmZpZy5hdXRvRmlsbEZvcm1zID0gdHJ1ZTtcbmRlZmF1bHRDb25maWcuYXV0b0ZpbGxGb3Jtc1dpdGhNdWx0aXBsZU1hdGNoZXMgPSBmYWxzZTtcbmRlZmF1bHRDb25maWcuYXV0b1N1Ym1pdEZvcm1zID0gZmFsc2U7XG5kZWZhdWx0Q29uZmlnLmF1dG9TdWJtaXREaWFsb2dzID0gZmFsc2U7XG5kZWZhdWx0Q29uZmlnLmF1dG9TdWJtaXRNYXRjaGVkRm9ybXMgPSBmYWxzZTtcbmRlZmF1bHRDb25maWcuY29ublNMQ2xpZW50ID0gMjtcbmRlZmF1bHRDb25maWcuY29ublNMU2VydmVyTWluID0gMjtcbmRlZmF1bHRDb25maWcua2VlUGFzc0RCVG9PcGVuID0gXCJcIjtcbmRlZmF1bHRDb25maWcua2VlUGFzc01SVURCID0gXCJcIjtcbmRlZmF1bHRDb25maWcuS2VlUGFzc1JQQ1dlYlNvY2tldFBvcnQgPSAxMjU0NjtcbmRlZmF1bHRDb25maWcuS1BSUENVc2VybmFtZSA9IFwiXCI7XG5kZWZhdWx0Q29uZmlnLktQUlBDU3RvcmVkS2V5cyA9IHt9O1xuZGVmYXVsdENvbmZpZy5sYXN0Q29ubmVjdGVkVG9LZWVQYXNzID0gXCJcIjtcbmRlZmF1bHRDb25maWcubGlzdEFsbE9wZW5EQnMgPSB0cnVlO1xuZGVmYXVsdENvbmZpZy5sb2dMZXZlbCA9IEtlZUxvZy5kZWZhdWx0TGV2ZWw7XG5kZWZhdWx0Q29uZmlnLmxvZ01ldGhvZENvbnNvbGUgPSBmYWxzZTtcbmRlZmF1bHRDb25maWcubG9nTWV0aG9kRmlsZSA9IGZhbHNlO1xuZGVmYXVsdENvbmZpZy5sb2dTZW5zaXRpdmVEYXRhID0gZmFsc2U7XG5kZWZhdWx0Q29uZmlnLm1ldHJpY3NVc2FnZURpc2FibGVkID0gZmFsc2U7XG5kZWZhdWx0Q29uZmlnLm1ldHJpY3NVc2VySWQgPSBcIlwiO1xuZGVmYXVsdENvbmZpZy5ub3RpZnlXaGVuRW50cnlVcGRhdGVkID0gdHJ1ZTtcbmRlZmF1bHRDb25maWcubm90aWZ5V2hlbkxhdGVEaXNjb3ZlcnkgPSBmYWxzZTtcbmRlZmF1bHRDb25maWcubm90aWZ5V2hlbkxvZ2dlZE91dCA9IGZhbHNlO1xuZGVmYXVsdENvbmZpZy5vdmVyV3JpdGVGaWVsZHNBdXRvbWF0aWNhbGx5ID0gZmFsc2U7XG5kZWZhdWx0Q29uZmlnLnJlbWVtYmVyTVJVREIgPSB0cnVlO1xuZGVmYXVsdENvbmZpZy5yZW1lbWJlck1SVUdyb3VwID0gdHJ1ZTtcbmRlZmF1bHRDb25maWcuc2F2ZUZhdmljb25zID0gdHJ1ZTtcbmRlZmF1bHRDb25maWcuc2VhcmNoQWxsT3BlbkRCcyA9IHRydWU7XG5kZWZhdWx0Q29uZmlnLmNvbmZpZyA9IG51bGw7XG5kZWZhdWx0Q29uZmlnLnNpdGVDb25maWcgPSBkZWZhdWx0U2l0ZUNvbmZpZztcbmRlZmF1bHRDb25maWcudHV0b3JpYWxQcm9ncmVzcyA9IFwiXCI7XG5kZWZhdWx0Q29uZmlnLnZlcnNpb24gPSBMQVRFU1RfVkVSU0lPTjtcbmRlZmF1bHRDb25maWcudHJpZ2dlckNoYW5nZUlucHV0RXZlbnRBZnRlckZpbGwgPSBmYWxzZTtcbmRlZmF1bHRDb25maWcuYXV0b1N1Ym1pdE5ldHdvcmtBdXRoV2l0aFNpbmdsZU1hdGNoID0gZmFsc2U7XG5kZWZhdWx0Q29uZmlnLnNlYXJjaE5ldHdvcmtBdXRoID0gdHJ1ZTtcbmRlZmF1bHRDb25maWcubm90aWZpY2F0aW9uQ291bnRHZW5lcmljID0gMDtcbmRlZmF1bHRDb25maWcubm90aWZpY2F0aW9uQ291bnRTYXZlUGFzc3dvcmQgPSAwO1xuZGVmYXVsdENvbmZpZy5jdXJyZW50U2VhcmNoVGVybVRpbWVvdXQgPSAzMDtcbmRlZmF1bHRDb25maWcubm90aWZ5UGFzc3dvcmRBdmFpbGFibGVGb3JQYXN0ZSA9IHRydWU7XG5kZWZhdWx0Q29uZmlnLmFuaW1hdGVXaGVuT2ZmZXJpbmdTYXZlID0gdHJ1ZTtcbmRlZmF1bHRDb25maWcua2VlVmF1bHRMYXVuY2hNZXNzYWdlRGlzbWlzc2VkID0gZmFsc2U7XG5kZWZhdWx0Q29uZmlnLmtlZVZhdWx0TGF1bmNoU3RhcnQgPSA4NjQwMDAwMDAwMDAwMDAwO1xuZGVmYXVsdENvbmZpZy5rZWVWYXVsdExhdW5jaEVuZCA9IDg2NDAwMDAwMDAwMDAwMDA7XG5kZWZhdWx0Q29uZmlnLm1hbnVhbFN1Ym1pdE92ZXJyaWRlUHJvaGliaXRlZCA9IGZhbHNlO1xuZGVmYXVsdENvbmZpZy50aGVtZSA9IG51bGw7XG5kZWZhdWx0Q29uZmlnLmhpZGVDb25maXJtYXRpb25BZnRlclNhdmUgPSBmYWxzZTtcbmRlZmF1bHRDb25maWcubXVzdFNob3dSZWxlYXNlTm90ZXNBdFN0YXJ0dXAgPSBmYWxzZTtcbmRlZmF1bHRDb25maWcuYXV0b0ZpbGxGaWVsZHNXaXRoRXhpc3RpbmdWYWx1ZSA9IGZhbHNlO1xuXG5leHBvcnQgY2xhc3MgQ29uZmlnTWFuYWdlciB7XG4gICAgcHVibGljIGN1cnJlbnQ6IENvbmZpZztcbiAgICBwcml2YXRlIHJlYWRvbmx5IG1heENoYXJzUGVyUGFnZTogbnVtYmVyID0gMTAwMDA7XG4gICAgcHJpdmF0ZSBfbGlzdGVuZXJzID0gW107XG5cbiAgICBwdWJsaWMgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuY3VycmVudCA9IGRlZmF1bHRDb25maWc7XG4gICAgICAgIGJyb3dzZXIuc3RvcmFnZS5vbkNoYW5nZWQuYWRkTGlzdGVuZXIoKGEsIGIpID0+IHRoaXMucmVsb2FkT25TdG9yYWdlQ2hhbmdlKGEsIGIpKTtcbiAgICB9XG5cbiAgICAvLyBTb21lIHByb2Nlc3NlcyBtYXkgd2FudCB0byB0YWtlIGFjdGlvbiB3aGVuIHNldHRpbmdzIGFyZSBjaGFuZ2VkIChlLmcuIHRoZSBiYWNrZ3JvdW5kXG4gICAgLy8gcHJvY2VzcyB0byBub3RpZnkgdGhlIEtQUlBDIHNlcnZlcikuIFVzaW5nIHRoaXMgcmF0aGVyIHRoYW4gYnJvd3Nlci5zdG9yYWdlLm9uQ2hhbmdlZC5hZGRMaXN0ZW5lclxuICAgIC8vIGVuc3VyZXMgdGhhdCBvdXIgY29uZmlnTWFuYWdlciBkYXRhIGlzIGNvbnNpc3RlbnQgd2l0aCB0aGUgdW5kZXJseWluZyBzdG9yYWdlXG4gICAgcHVibGljIGFkZENoYW5nZUxpc3RlbmVyKGxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMuX2xpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbG9hZE9uU3RvcmFnZUNoYW5nZShjaGFuZ2VzOiBicm93c2VyLnN0b3JhZ2UuU3RvcmFnZUNoYW5nZSwgYXJlYTogc3RyaW5nKSB7XG4gICAgICAgIC8vIFdlIGFzc3VtZSBldmVyeSBjaGFuZ2UgcmVxdWlyZXMgYSByZWxvYWQgb2YgdGhlIGNvbmZpZyBkYXRhLiBTaW5jZSB3ZSBiYXRjaCBhbmRcbiAgICAgICAgLy8gcGFnZSB0aGUgZGF0YSB0byBlbmFibGUgZW5vdWdoIHN0b3JhZ2Ugc3BhY2UgdGhpcyBpcyBsaWtsZXkgc2FmZSBmb3IgdGhlXG4gICAgICAgIC8vIGxvbmctdGVybSBidXQgcGVyaGFwcyBwZXJmb3JtYW5jZSBnYWlucyBjb3VsZCBiZSBmb3VuZCBhcm91bmQgaGVyZSBvbmUgZGF5LlxuICAgICAgICAvL1xuICAgICAgICAvLyBXZSBhbHNvIHJlbG9hZCBhZnRlciBldmVyeSBzYXZlIHdoaWNoIGlzIGhvcnJpYmx5IGluZWZmaWNpZW50IGJ1dCB0aGUgYWx0ZXJuYXRpdmVcbiAgICAgICAgLy8gaXMgZmluZGluZyBhIHJlbGlhYmxlIGNyb3NzLXByb2Nlc3MgbG9ja2luZyBtZWNoYW5pc20gdG8gZW5zdXJlIHdlIG9ubHkgZGlzYWJsZVxuICAgICAgICAvLyByZWxvYWRpbmcgZHVyaW5nIGFuIGFzeW5jIHNhdmUgb3BlcmF0aW9uIGFuZCBub3QgZm9yIGEgbW9tZW50IGxvbmdlci4gVGhhdCdzIGp1c3RcbiAgICAgICAgLy8gbm90IHdvcnRoIHRoZSByaXNrIG9mIG1pc3NpbmcgYSBjaGFuZ2UgZnJvbSBhbm90aGVyIHByb2Nlc3MuXG5cbiAgICAgICAgY29uZmlnTWFuYWdlci5yZWxvYWQoKCkgPT4gdGhpcy5fbGlzdGVuZXJzLmZvckVhY2gobGlzdGVuZXIgPT4gbGlzdGVuZXIoY2hhbmdlcywgYXJlYSkpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgc2V0QVNBUCh2YWx1ZXM6IFBhcnRpYWw8Q29uZmlnPikge1xuICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMuY3VycmVudCwgdmFsdWVzKTtcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlKCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNwbGl0U3RyaW5nVG9QYWdlcyhzdHI6IHN0cmluZykge1xuICAgICAgICBjb25zdCBudW1QYWdlcyA9IE1hdGguY2VpbChzdHIubGVuZ3RoIC8gdGhpcy5tYXhDaGFyc1BlclBhZ2UpO1xuICAgICAgICBjb25zdCBwYWdlcyA9IG5ldyBBcnJheShudW1QYWdlcyk7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIG8gPSAwOyBpIDwgbnVtUGFnZXM7ICsraSwgbyArPSB0aGlzLm1heENoYXJzUGVyUGFnZSkge1xuICAgICAgICAgICAgcGFnZXNbaV0gPSBzdHIuc3Vic3RyKG8sIHRoaXMubWF4Q2hhcnNQZXJQYWdlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFnZXM7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIHNhdmUoKSB7XG4gICAgICAgIGNvbnN0IGNvbmZpZ1N0cmluZyA9IEpTT04uc3RyaW5naWZ5KHRoaXMuY3VycmVudCk7XG4gICAgICAgIGNvbnN0IHBhZ2VzID0gdGhpcy5zcGxpdFN0cmluZ1RvUGFnZXMoY29uZmlnU3RyaW5nKTtcbiAgICAgICAgY29uc3QgY29uZmlnVmFsdWVzOiBhbnkgPSB7fTtcblxuICAgICAgICBjb25maWdWYWx1ZXMua2VlQ29uZmlnUGFnZUNvdW50ID0gcGFnZXMubGVuZ3RoO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFnZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbmZpZ1ZhbHVlc1tcImtlZUNvbmZpZ1BhZ2VcIiArIGldID0gcGFnZXNbaV07XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgYnJvd3Nlci5zdG9yYWdlLmxvY2FsLnNldChjb25maWdWYWx1ZXMpO1xuICAgIH1cblxuICAgIHB1YmxpYyBsb2FkKG9uTG9hZGVkKSB7XG4gICAgICAgIC8vIFdlIGNvbXBsZXRlbHkgcmVwbGFjZSBjdXJyZW50IGNvbmZpZyB3aXRoIHdoYXQgd2UgbG9hZCBiZWNhdXNlIHdlXG4gICAgICAgIC8vIGRvbid0IGtub3cgdGhhdCBhcHBseWluZyBvbnRvIHRoZSBkZWZhdWx0cyB3aWxsIHJlc3VsdCBpbiBhIHNhZmVcbiAgICAgICAgLy8gbWlncmF0aW9uIGZyb20gYW55IG9sZCB2ZXJzaW9uIHRoYXQgd2UgbG9hZC4gSXQgd291bGQgcHJvYmFibHkgYmVcbiAgICAgICAgLy8gZmluZSBidXQgbWlnaHQgcmVxdWlyZSB2ZXJzaW9uIGNvbXBhcmlzb25zLi4uIGluIHdoaWNoIGNhc2Ugd2UgbWlnaHRcbiAgICAgICAgLy8gYXMgd2VsbCBqdXN0IGluY3JlbWVudCB0aGUgdmVyc2lvbiBudW1iZXIgYW5kIHJ1biBhIG1pZ3JhdGlvbiBvbmNlXG4gICAgICAgIC8vIHJhdGhlciB0aGFuIGluY3VyIGluY3JlYXNlZCBvbmdvaW5nIGxvYWQgY29zdHMuXG4gICAgICAgIGJyb3dzZXIuc3RvcmFnZS5sb2NhbC5nZXQoKS50aGVuKGNvbmZpZyA9PiB7XG4gICAgICAgICAgICBjb25zdCBwYWdlQ291bnQgPSBjb25maWdbXCJrZWVDb25maWdQYWdlQ291bnRcIl07XG5cbiAgICAgICAgICAgIGlmIChwYWdlQ291bnQpIHtcbiAgICAgICAgICAgICAgICBsZXQgY29uZmlnU3RyaW5nID0gXCJcIjtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhZ2VDb3VudDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRQYWdlID0gY29uZmlnW1wia2VlQ29uZmlnUGFnZVwiICsgaV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXh0UGFnZSkgY29uZmlnU3RyaW5nICs9IG5leHRQYWdlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY29uZmlnU3RyaW5nKSB0aGlzLmN1cnJlbnQgPSBKU09OLnBhcnNlKGNvbmZpZ1N0cmluZyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IG9sZFBhZ2VDb3VudCA9IGNvbmZpZ1tcImtlZWZveENvbmZpZ1BhZ2VDb3VudFwiXTtcblxuICAgICAgICAgICAgICAgIGlmIChvbGRQYWdlQ291bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNvbmZpZ1N0cmluZyA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb2xkUGFnZUNvdW50OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRQYWdlID0gY29uZmlnW1wia2VlZm94Q29uZmlnUGFnZVwiICsgaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV4dFBhZ2UpIGNvbmZpZ1N0cmluZyArPSBuZXh0UGFnZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmlnU3RyaW5nKSB0aGlzLmN1cnJlbnQgPSBKU09OLnBhcnNlKGNvbmZpZ1N0cmluZyk7XG4gICAgICAgICAgICAgICAgICAgIC8vVE9ETzo0OiBEZWxldGUgdGhlIG9sZCBrZWVmb3ggcHJlZml4ZWQgZGF0YSB0byBzYXZlIHNwYWNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5maXhJbnZhbGlkQ29uZmlnRGF0YSgpO1xuICAgICAgICAgICAgdGhpcy5taWdyYXRlVG9MYXRlc3RWZXJzaW9uKCk7XG4gICAgICAgICAgICBvbkxvYWRlZCgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBUaGlzIGlzIHR5cGljYWxseSBpbnZhbGlkIGR1ZSB0byB0aGUgcHJldmlvdXMgZXhlY3V0aW9uIG9mIGFscGhhIGFuZCBiZXRhIGNvZGVcbiAgICAvLyBvbiB0aGUgdXNlcidzIHN5c3RlbSBidXQgd2hhdGV2ZXIgdGhlIHJlYXNvbiwgdGhlIGl0ZW1zIGhlcmUgYXJlIGVzcGVjaWFsbHkgaGFyZFxuICAgIC8vIHRvIGZpeCB0aHJvdWdoIHRoZSBVSSBhbmQgY3JpdGljYWwgdG8gS2VlIGZ1bmN0aW9uYWxpdHkgc28gd2UgdGFrZSBubyBjaGFuY2VzXG4gICAgcHJpdmF0ZSBmaXhJbnZhbGlkQ29uZmlnRGF0YSgpIHtcbiAgICAgICAgbGV0IHNhdmVOZWVkZWQgPSBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudC5LUFJQQ1N0b3JlZEtleXMgPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50LktQUlBDU3RvcmVkS2V5cyA9IHt9O1xuICAgICAgICAgICAgc2F2ZU5lZWRlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNhdmVOZWVkZWQpIHRoaXMuc2F2ZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgbWlncmF0ZVRvTGF0ZXN0VmVyc2lvbigpIHtcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudC52ZXJzaW9uID49IExBVEVTVF9WRVJTSU9OKSByZXR1cm47XG4gICAgICAgIGNvbnN0IG1pZ3JhdGlvbnMgPSBuZXcgQ29uZmlnTWlncmF0aW9ucygpO1xuICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1mYWxsdGhyb3VnaCAqL1xuICAgICAgICBzd2l0Y2ggKHRoaXMuY3VycmVudC52ZXJzaW9uKSB7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgbWlncmF0aW9ucy5taWdyYXRlVG9WZXJzaW9uMih0aGlzLmN1cnJlbnQpO1xuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIG1pZ3JhdGlvbnMubWlncmF0ZVRvVmVyc2lvbjModGhpcy5jdXJyZW50KTtcbiAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICBtaWdyYXRpb25zLm1pZ3JhdGVUb1ZlcnNpb240KHRoaXMuY3VycmVudCk7XG4gICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgbWlncmF0aW9ucy5taWdyYXRlVG9WZXJzaW9uNSh0aGlzLmN1cnJlbnQpO1xuICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgIG1pZ3JhdGlvbnMubWlncmF0ZVRvVmVyc2lvbjYodGhpcy5jdXJyZW50KTtcbiAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICBtaWdyYXRpb25zLm1pZ3JhdGVUb1ZlcnNpb243KHRoaXMuY3VycmVudCk7XG4gICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgbWlncmF0aW9ucy5taWdyYXRlVG9WZXJzaW9uOCh0aGlzLmN1cnJlbnQpO1xuICAgICAgICB9XG4gICAgICAgIC8qIGVzbGludC1lbmFibGUgbm8tZmFsbHRocm91Z2ggKi9cbiAgICAgICAgdGhpcy5zYXZlKCk7XG4gICAgfVxuXG4gICAgcHVibGljIG1pZ3JhdGVGcm9tUmVtb3RlVG9MYXRlc3RWZXJzaW9uKCkge1xuICAgICAgICBpZiAodGhpcy5jdXJyZW50LnZlcnNpb24gPj0gTEFURVNUX1ZFUlNJT04pIHJldHVybjtcbiAgICAgICAgY29uc3QgbWlncmF0aW9ucyA9IG5ldyBDb25maWdNaWdyYXRpb25zKCk7XG4gICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWZhbGx0aHJvdWdoICovXG4gICAgICAgIHN3aXRjaCAodGhpcy5jdXJyZW50LnZlcnNpb24pIHtcbiAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICBtaWdyYXRpb25zLm1pZ3JhdGVUb1ZlcnNpb242KHRoaXMuY3VycmVudCk7XG4gICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgbWlncmF0aW9ucy5taWdyYXRlVG9WZXJzaW9uNyh0aGlzLmN1cnJlbnQpO1xuICAgICAgICB9XG4gICAgICAgIC8qIGVzbGludC1lbmFibGUgbm8tZmFsbHRocm91Z2ggKi9cbiAgICAgICAgdGhpcy5zYXZlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWxvYWQob25Mb2FkZWQ/KSB7XG4gICAgICAgIGJyb3dzZXIuc3RvcmFnZS5sb2NhbC5nZXQoKS50aGVuKGNvbmZpZyA9PiB7XG4gICAgICAgICAgICBjb25zdCBwYWdlQ291bnQgPSBjb25maWdbXCJrZWVDb25maWdQYWdlQ291bnRcIl07XG5cbiAgICAgICAgICAgIGlmIChwYWdlQ291bnQpIHtcbiAgICAgICAgICAgICAgICBsZXQgY29uZmlnU3RyaW5nID0gXCJcIjtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhZ2VDb3VudDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRQYWdlID0gY29uZmlnW1wia2VlQ29uZmlnUGFnZVwiICsgaV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXh0UGFnZSkgY29uZmlnU3RyaW5nICs9IG5leHRQYWdlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY29uZmlnU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudCA9IE9iamVjdC5hc3NpZ24odGhpcy5jdXJyZW50LCBKU09OLnBhcnNlKGNvbmZpZ1N0cmluZykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvbkxvYWRlZCkgb25Mb2FkZWQoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIHNpdGVDb25maWdMb29rdXBGb3IodGFyZ2V0OiBTaXRlQ29uZmlnVGFyZ2V0LCBtZXRob2Q6IFNpdGVDb25maWdNZXRob2QpIHtcbiAgICAgICAgaWYgKHRhcmdldCA9PSBcIkRvbWFpblwiKSB7XG4gICAgICAgICAgICBpZiAobWV0aG9kID09IFwiRXhhY3RcIikge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5jdXJyZW50LnNpdGVDb25maWcuZG9tYWluRXhhY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50LnNpdGVDb25maWcuZG9tYWluRXhhY3QgPSBuZXcgU2l0ZUNvbmZpZ0xvb2t1cCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50LnNpdGVDb25maWcuZG9tYWluRXhhY3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWV0aG9kID09IFwiUHJlZml4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY3VycmVudC5zaXRlQ29uZmlnLmRvbWFpblByZWZpeCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5kb21haW5QcmVmaXggPSBuZXcgU2l0ZUNvbmZpZ0xvb2t1cCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50LnNpdGVDb25maWcuZG9tYWluUHJlZml4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1ldGhvZCA9PSBcIlJlZ2V4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY3VycmVudC5zaXRlQ29uZmlnLmRvbWFpblJlZ2V4KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudC5zaXRlQ29uZmlnLmRvbWFpblJlZ2V4ID0gbmV3IFNpdGVDb25maWdMb29rdXAoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudC5zaXRlQ29uZmlnLmRvbWFpblJlZ2V4O1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRhcmdldCA9PSBcIkhvc3RcIikge1xuICAgICAgICAgICAgaWYgKG1ldGhvZCA9PSBcIkV4YWN0XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY3VycmVudC5zaXRlQ29uZmlnLmhvc3RFeGFjdCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5ob3N0RXhhY3QgPSBuZXcgU2l0ZUNvbmZpZ0xvb2t1cCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50LnNpdGVDb25maWcuaG9zdEV4YWN0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1ldGhvZCA9PSBcIlByZWZpeFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5ob3N0UHJlZml4KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudC5zaXRlQ29uZmlnLmhvc3RQcmVmaXggPSBuZXcgU2l0ZUNvbmZpZ0xvb2t1cCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50LnNpdGVDb25maWcuaG9zdFByZWZpeDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXRob2QgPT0gXCJSZWdleFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5ob3N0UmVnZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50LnNpdGVDb25maWcuaG9zdFJlZ2V4ID0gbmV3IFNpdGVDb25maWdMb29rdXAoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudC5zaXRlQ29uZmlnLmhvc3RSZWdleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0YXJnZXQgPT0gXCJQYWdlXCIpIHtcbiAgICAgICAgICAgIGlmIChtZXRob2QgPT0gXCJFeGFjdFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5wYWdlRXhhY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50LnNpdGVDb25maWcucGFnZUV4YWN0ID0gbmV3IFNpdGVDb25maWdMb29rdXAoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudC5zaXRlQ29uZmlnLnBhZ2VFeGFjdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXRob2QgPT0gXCJQcmVmaXhcIikge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5jdXJyZW50LnNpdGVDb25maWcucGFnZVByZWZpeCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5wYWdlUHJlZml4ID0gbmV3IFNpdGVDb25maWdMb29rdXAoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudC5zaXRlQ29uZmlnLnBhZ2VQcmVmaXg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWV0aG9kID09IFwiUmVnZXhcIikge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5jdXJyZW50LnNpdGVDb25maWcucGFnZVJlZ2V4KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudC5zaXRlQ29uZmlnLnBhZ2VSZWdleCA9IG5ldyBTaXRlQ29uZmlnTG9va3VwKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5wYWdlUmVnZXg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcHVibGljIHNpdGVDb25maWdGb3IodXJsOiBzdHJpbmcpOiBTaXRlQ29uZmlnIHtcbiAgICAgICAgY29uc3QgbWF0Y2hlZENvbmZpZ05vZGVzID0gdGhpcy5maW5kQWxsQ29uZmlnc0Zvcih1cmwpO1xuICAgICAgICBtYXRjaGVkQ29uZmlnTm9kZXMuc29ydCgobm9kZTEsIG5vZGUyKSA9PiBub2RlMi5tYXRjaFdlaWdodCAtIG5vZGUxLm1hdGNoV2VpZ2h0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVyaXZlQ29uZmlnRnJvbU1hdGNoZXMobWF0Y2hlZENvbmZpZ05vZGVzKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGZpbmRBbGxDb25maWdzRm9yKHVybFN0cmluZzogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IG1hdGNoZWRDb25maWdOb2RlczogU2l0ZUNvbmZpZ05vZGVbXSA9IFtdO1xuICAgICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHVybFN0cmluZyk7XG4gICAgICAgIGNvbnN0IGhvc3QgPSB1cmwuaG9zdDtcbiAgICAgICAgY29uc3QgcGFnZSA9IGhvc3QgKyB1cmwucGF0aG5hbWU7XG4gICAgICAgIGNvbnN0IGRvbWFpbiA9IHV0aWxzLnBzbC5nZXREb21haW4oaG9zdCk7XG5cbiAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBpbiB0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5kb21haW5FeGFjdCkge1xuICAgICAgICAgICAgaWYgKHZhbHVlID09PSBkb21haW4pIHtcbiAgICAgICAgICAgICAgICBtYXRjaGVkQ29uZmlnTm9kZXMucHVzaCh0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5kb21haW5FeGFjdFt2YWx1ZV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgdmFsdWUgaW4gdGhpcy5jdXJyZW50LnNpdGVDb25maWcuaG9zdEV4YWN0KSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IGhvc3QpIHtcbiAgICAgICAgICAgICAgICBtYXRjaGVkQ29uZmlnTm9kZXMucHVzaCh0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5ob3N0RXhhY3RbdmFsdWVdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIGluIHRoaXMuY3VycmVudC5zaXRlQ29uZmlnLnBhZ2VFeGFjdCkge1xuICAgICAgICAgICAgaWYgKHZhbHVlID09PSBwYWdlKSB7XG4gICAgICAgICAgICAgICAgbWF0Y2hlZENvbmZpZ05vZGVzLnB1c2godGhpcy5jdXJyZW50LnNpdGVDb25maWcucGFnZUV4YWN0W3ZhbHVlXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBpbiB0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5kb21haW5QcmVmaXgpIHtcbiAgICAgICAgICAgIGlmIChkb21haW4uc3RhcnRzV2l0aCh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBtYXRjaGVkQ29uZmlnTm9kZXMucHVzaCh0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5kb21haW5QcmVmaXhbdmFsdWVdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIGluIHRoaXMuY3VycmVudC5zaXRlQ29uZmlnLmhvc3RQcmVmaXgpIHtcbiAgICAgICAgICAgIGlmIChob3N0LnN0YXJ0c1dpdGgodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgbWF0Y2hlZENvbmZpZ05vZGVzLnB1c2godGhpcy5jdXJyZW50LnNpdGVDb25maWcuaG9zdFByZWZpeFt2YWx1ZV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgdmFsdWUgaW4gdGhpcy5jdXJyZW50LnNpdGVDb25maWcucGFnZVByZWZpeCkge1xuICAgICAgICAgICAgaWYgKHBhZ2Uuc3RhcnRzV2l0aCh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBtYXRjaGVkQ29uZmlnTm9kZXMucHVzaCh0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5wYWdlUHJlZml4W3ZhbHVlXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBpbiB0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5kb21haW5SZWdleCkge1xuICAgICAgICAgICAgaWYgKG5ldyBSZWdFeHAodmFsdWUpLnRlc3QoZG9tYWluKSkge1xuICAgICAgICAgICAgICAgIG1hdGNoZWRDb25maWdOb2Rlcy5wdXNoKHRoaXMuY3VycmVudC5zaXRlQ29uZmlnLmRvbWFpblJlZ2V4W3ZhbHVlXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBpbiB0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5ob3N0UmVnZXgpIHtcbiAgICAgICAgICAgIGlmIChuZXcgUmVnRXhwKHZhbHVlKS50ZXN0KGhvc3QpKSB7XG4gICAgICAgICAgICAgICAgbWF0Y2hlZENvbmZpZ05vZGVzLnB1c2godGhpcy5jdXJyZW50LnNpdGVDb25maWcuaG9zdFJlZ2V4W3ZhbHVlXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBpbiB0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5wYWdlUmVnZXgpIHtcbiAgICAgICAgICAgIGlmIChuZXcgUmVnRXhwKHZhbHVlKS50ZXN0KHBhZ2UpKSB7XG4gICAgICAgICAgICAgICAgbWF0Y2hlZENvbmZpZ05vZGVzLnB1c2godGhpcy5jdXJyZW50LnNpdGVDb25maWcucGFnZVJlZ2V4W3ZhbHVlXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbWF0Y2hlZENvbmZpZ05vZGVzO1xuICAgIH1cblxuICAgIHByaXZhdGUgZmluZEFsbENvbmZpZ3NBbmRJbmRleEZvcih1cmxTdHJpbmc6IHN0cmluZykge1xuICAgICAgICBjb25zdCBtYXRjaGVkQ29uZmlnTm9kZXNBbmRJbmRleGVzOiBTaXRlQ29uZmlnTm9kZUFuZEluZGV4W10gPSBbXTtcbiAgICAgICAgY29uc3QgdXJsID0gbmV3IFVSTCh1cmxTdHJpbmcpO1xuICAgICAgICBjb25zdCBob3N0ID0gdXJsLmhvc3Q7XG4gICAgICAgIGNvbnN0IHBhZ2UgPSBob3N0ICsgdXJsLnBhdGhuYW1lO1xuICAgICAgICBjb25zdCBkb21haW4gPSB1dGlscy5wc2wuZ2V0RG9tYWluKGhvc3QpO1xuXG4gICAgICAgIGZvciAoY29uc3QgdmFsdWUgaW4gdGhpcy5jdXJyZW50LnNpdGVDb25maWcuZG9tYWluRXhhY3QpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gZG9tYWluKSB7XG4gICAgICAgICAgICAgICAgbWF0Y2hlZENvbmZpZ05vZGVzQW5kSW5kZXhlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZTogdGhpcy5jdXJyZW50LnNpdGVDb25maWcuZG9tYWluRXhhY3RbdmFsdWVdLFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IFwiRG9tYWluXCIsXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogXCJFeGFjdFwiLFxuICAgICAgICAgICAgICAgICAgICBsb29rdXBWYWx1ZTogdmFsdWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIGluIHRoaXMuY3VycmVudC5zaXRlQ29uZmlnLmhvc3RFeGFjdCkge1xuICAgICAgICAgICAgaWYgKHZhbHVlID09PSBob3N0KSB7XG4gICAgICAgICAgICAgICAgbWF0Y2hlZENvbmZpZ05vZGVzQW5kSW5kZXhlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZTogdGhpcy5jdXJyZW50LnNpdGVDb25maWcuaG9zdEV4YWN0W3ZhbHVlXSxcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBcIkhvc3RcIixcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBcIkV4YWN0XCIsXG4gICAgICAgICAgICAgICAgICAgIGxvb2t1cFZhbHVlOiB2YWx1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgdmFsdWUgaW4gdGhpcy5jdXJyZW50LnNpdGVDb25maWcucGFnZUV4YWN0KSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IHBhZ2UpIHtcbiAgICAgICAgICAgICAgICBtYXRjaGVkQ29uZmlnTm9kZXNBbmRJbmRleGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBub2RlOiB0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5wYWdlRXhhY3RbdmFsdWVdLFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IFwiUGFnZVwiLFxuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IFwiRXhhY3RcIixcbiAgICAgICAgICAgICAgICAgICAgbG9va3VwVmFsdWU6IHZhbHVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBpbiB0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5kb21haW5QcmVmaXgpIHtcbiAgICAgICAgICAgIGlmIChkb21haW4uc3RhcnRzV2l0aCh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBtYXRjaGVkQ29uZmlnTm9kZXNBbmRJbmRleGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBub2RlOiB0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5kb21haW5QcmVmaXhbdmFsdWVdLFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IFwiRG9tYWluXCIsXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQcmVmaXhcIixcbiAgICAgICAgICAgICAgICAgICAgbG9va3VwVmFsdWU6IHZhbHVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBpbiB0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5ob3N0UHJlZml4KSB7XG4gICAgICAgICAgICBpZiAoaG9zdC5zdGFydHNXaXRoKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIG1hdGNoZWRDb25maWdOb2Rlc0FuZEluZGV4ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG5vZGU6IHRoaXMuY3VycmVudC5zaXRlQ29uZmlnLmhvc3RQcmVmaXhbdmFsdWVdLFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IFwiSG9zdFwiLFxuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUHJlZml4XCIsXG4gICAgICAgICAgICAgICAgICAgIGxvb2t1cFZhbHVlOiB2YWx1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgdmFsdWUgaW4gdGhpcy5jdXJyZW50LnNpdGVDb25maWcucGFnZVByZWZpeCkge1xuICAgICAgICAgICAgaWYgKHBhZ2Uuc3RhcnRzV2l0aCh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBtYXRjaGVkQ29uZmlnTm9kZXNBbmRJbmRleGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBub2RlOiB0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5wYWdlUHJlZml4W3ZhbHVlXSxcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBcIlBhZ2VcIixcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBcIlByZWZpeFwiLFxuICAgICAgICAgICAgICAgICAgICBsb29rdXBWYWx1ZTogdmFsdWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIGluIHRoaXMuY3VycmVudC5zaXRlQ29uZmlnLmRvbWFpblJlZ2V4KSB7XG4gICAgICAgICAgICBpZiAobmV3IFJlZ0V4cCh2YWx1ZSkudGVzdChkb21haW4pKSB7XG4gICAgICAgICAgICAgICAgbWF0Y2hlZENvbmZpZ05vZGVzQW5kSW5kZXhlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZTogdGhpcy5jdXJyZW50LnNpdGVDb25maWcuZG9tYWluUmVnZXhbdmFsdWVdLFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IFwiRG9tYWluXCIsXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogXCJSZWdleFwiLFxuICAgICAgICAgICAgICAgICAgICBsb29rdXBWYWx1ZTogdmFsdWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIGluIHRoaXMuY3VycmVudC5zaXRlQ29uZmlnLmhvc3RSZWdleCkge1xuICAgICAgICAgICAgaWYgKG5ldyBSZWdFeHAodmFsdWUpLnRlc3QoaG9zdCkpIHtcbiAgICAgICAgICAgICAgICBtYXRjaGVkQ29uZmlnTm9kZXNBbmRJbmRleGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBub2RlOiB0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5ob3N0UmVnZXhbdmFsdWVdLFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IFwiSG9zdFwiLFxuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUmVnZXhcIixcbiAgICAgICAgICAgICAgICAgICAgbG9va3VwVmFsdWU6IHZhbHVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBpbiB0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5wYWdlUmVnZXgpIHtcbiAgICAgICAgICAgIGlmIChuZXcgUmVnRXhwKHZhbHVlKS50ZXN0KHBhZ2UpKSB7XG4gICAgICAgICAgICAgICAgbWF0Y2hlZENvbmZpZ05vZGVzQW5kSW5kZXhlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZTogdGhpcy5jdXJyZW50LnNpdGVDb25maWcucGFnZVJlZ2V4W3ZhbHVlXSxcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBcIlBhZ2VcIixcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBcIlJlZ2V4XCIsXG4gICAgICAgICAgICAgICAgICAgIGxvb2t1cFZhbHVlOiB2YWx1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG1hdGNoZWRDb25maWdOb2Rlc0FuZEluZGV4ZXM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBkZXJpdmVDb25maWdGcm9tTWF0Y2hlcyhtYXRjaGVkQ29uZmlnTm9kZXM6IFNpdGVDb25maWdOb2RlW10pIHtcbiAgICAgICAgY29uc3QgZGVyaXZlZENvbmZpZzogU2l0ZUNvbmZpZyA9IHt9O1xuICAgICAgICBtYXRjaGVkQ29uZmlnTm9kZXMuZm9yRWFjaChub2RlID0+IHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBub2RlLmNvbmZpZy5wcmV2ZW50U2F2ZU5vdGlmaWNhdGlvbiAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgZGVyaXZlZENvbmZpZy5wcmV2ZW50U2F2ZU5vdGlmaWNhdGlvbiA9PSBudWxsXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBkZXJpdmVkQ29uZmlnLnByZXZlbnRTYXZlTm90aWZpY2F0aW9uID0gbm9kZS5jb25maWcucHJldmVudFNhdmVOb3RpZmljYXRpb247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgbm9kZS5jb25maWcubGlzdE1hdGNoaW5nQ2FzZVNlbnNpdGl2ZSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgZGVyaXZlZENvbmZpZy5saXN0TWF0Y2hpbmdDYXNlU2Vuc2l0aXZlID09IG51bGxcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGRlcml2ZWRDb25maWcubGlzdE1hdGNoaW5nQ2FzZVNlbnNpdGl2ZSA9IG5vZGUuY29uZmlnLmxpc3RNYXRjaGluZ0Nhc2VTZW5zaXRpdmU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChub2RlLmNvbmZpZy5ibGFja0xpc3QgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGlmIChkZXJpdmVkQ29uZmlnLmJsYWNrTGlzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlcml2ZWRDb25maWcuYmxhY2tMaXN0ID0ge307XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChub2RlLmNvbmZpZy5ibGFja0xpc3QuZm9ybSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkZXJpdmVkQ29uZmlnLmJsYWNrTGlzdC5mb3JtID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlcml2ZWRDb25maWcuYmxhY2tMaXN0LmZvcm0gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZS5jb25maWcuYmxhY2tMaXN0LmZvcm0uaWRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZXJpdmVkQ29uZmlnLmJsYWNrTGlzdC5mb3JtLmlkcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVyaXZlZENvbmZpZy5ibGFja0xpc3QuZm9ybS5pZHMgPSBub2RlLmNvbmZpZy5ibGFja0xpc3QuZm9ybS5pZHM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUuY29uZmlnLmJsYWNrTGlzdC5mb3JtLm5hbWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZXJpdmVkQ29uZmlnLmJsYWNrTGlzdC5mb3JtLm5hbWVzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXJpdmVkQ29uZmlnLmJsYWNrTGlzdC5mb3JtLm5hbWVzID0gbm9kZS5jb25maWcuYmxhY2tMaXN0LmZvcm0ubmFtZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUuY29uZmlnLmJsYWNrTGlzdC5maWVsZHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGVyaXZlZENvbmZpZy5ibGFja0xpc3QuZmllbGRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlcml2ZWRDb25maWcuYmxhY2tMaXN0LmZpZWxkcyA9IHt9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChub2RlLmNvbmZpZy5ibGFja0xpc3QuZmllbGRzLmlkcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVyaXZlZENvbmZpZy5ibGFja0xpc3QuZmllbGRzLmlkcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVyaXZlZENvbmZpZy5ibGFja0xpc3QuZmllbGRzLmlkcyA9IG5vZGUuY29uZmlnLmJsYWNrTGlzdC5maWVsZHMuaWRzO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChub2RlLmNvbmZpZy5ibGFja0xpc3QuZmllbGRzLm5hbWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZXJpdmVkQ29uZmlnLmJsYWNrTGlzdC5maWVsZHMubmFtZXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlcml2ZWRDb25maWcuYmxhY2tMaXN0LmZpZWxkcy5uYW1lcyA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuY29uZmlnLmJsYWNrTGlzdC5maWVsZHMubmFtZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChub2RlLmNvbmZpZy53aGl0ZUxpc3QgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGlmIChkZXJpdmVkQ29uZmlnLndoaXRlTGlzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlcml2ZWRDb25maWcud2hpdGVMaXN0ID0ge307XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChub2RlLmNvbmZpZy53aGl0ZUxpc3QuZm9ybSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkZXJpdmVkQ29uZmlnLndoaXRlTGlzdC5mb3JtID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlcml2ZWRDb25maWcud2hpdGVMaXN0LmZvcm0gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZS5jb25maWcud2hpdGVMaXN0LmZvcm0uaWRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZXJpdmVkQ29uZmlnLndoaXRlTGlzdC5mb3JtLmlkcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVyaXZlZENvbmZpZy53aGl0ZUxpc3QuZm9ybS5pZHMgPSBub2RlLmNvbmZpZy53aGl0ZUxpc3QuZm9ybS5pZHM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUuY29uZmlnLndoaXRlTGlzdC5mb3JtLm5hbWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZXJpdmVkQ29uZmlnLndoaXRlTGlzdC5mb3JtLm5hbWVzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXJpdmVkQ29uZmlnLndoaXRlTGlzdC5mb3JtLm5hbWVzID0gbm9kZS5jb25maWcud2hpdGVMaXN0LmZvcm0ubmFtZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUuY29uZmlnLndoaXRlTGlzdC5maWVsZHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGVyaXZlZENvbmZpZy53aGl0ZUxpc3QuZmllbGRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlcml2ZWRDb25maWcud2hpdGVMaXN0LmZpZWxkcyA9IHt9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChub2RlLmNvbmZpZy53aGl0ZUxpc3QuZmllbGRzLmlkcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVyaXZlZENvbmZpZy53aGl0ZUxpc3QuZmllbGRzLmlkcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVyaXZlZENvbmZpZy53aGl0ZUxpc3QuZmllbGRzLmlkcyA9IG5vZGUuY29uZmlnLndoaXRlTGlzdC5maWVsZHMuaWRzO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChub2RlLmNvbmZpZy53aGl0ZUxpc3QuZmllbGRzLm5hbWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZXJpdmVkQ29uZmlnLndoaXRlTGlzdC5maWVsZHMubmFtZXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlcml2ZWRDb25maWcud2hpdGVMaXN0LmZpZWxkcy5uYW1lcyA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuY29uZmlnLndoaXRlTGlzdC5maWVsZHMubmFtZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBub2RlLmNvbmZpZy5wcmVmZXJyZWRFbnRyeVV1aWQgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgIGRlcml2ZWRDb25maWcucHJlZmVycmVkRW50cnlVdWlkID09IG51bGxcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGRlcml2ZWRDb25maWcucHJlZmVycmVkRW50cnlVdWlkID0gbm9kZS5jb25maWcucHJlZmVycmVkRW50cnlVdWlkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRlcml2ZWRDb25maWc7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBub3JtYWxpemVGb3JtUHJvcGVydHkoaW5wdXQ6IHVua25vd24sIGljOiBib29sZWFuKSB7XG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQgIT09IFwic3RyaW5nXCIpIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4gaWMgPyBpbnB1dC50b0xvd2VyQ2FzZSgpIDogaW5wdXQ7XG4gICAgfVxuXG4gICAgcHVibGljIGlzRm9ybUludGVyZXN0aW5nKGZvcm06IEhUTUxGb3JtRWxlbWVudCwgY29uZjogU2l0ZUNvbmZpZywgb3RoZXJGaWVsZHM6IEZpZWxkW10pIHtcbiAgICAgICAgY29uc3QgaWMgPSBjb25mLmxpc3RNYXRjaGluZ0Nhc2VTZW5zaXRpdmUgIT09IHRydWU7XG4gICAgICAgIGNvbnN0IGZpZWxkSWRzID0gb3RoZXJGaWVsZHNcbiAgICAgICAgICAgIC5tYXAoZmllbGQgPT4gKGljID8gZmllbGQubG9jYXRvcnNbMF0/LmlkLnRvTG93ZXJDYXNlKCkgOiBmaWVsZC5sb2NhdG9yc1swXT8uaWQpKVxuICAgICAgICAgICAgLmZpbHRlcihCb29sZWFuKTtcbiAgICAgICAgY29uc3QgZmllbGROYW1lcyA9IG90aGVyRmllbGRzXG4gICAgICAgICAgICAubWFwKGZpZWxkID0+IChpYyA/IGZpZWxkLmxvY2F0b3JzWzBdPy5uYW1lLnRvTG93ZXJDYXNlKCkgOiBmaWVsZC5sb2NhdG9yc1swXT8ubmFtZSkpXG4gICAgICAgICAgICAuZmlsdGVyKEJvb2xlYW4pO1xuICAgICAgICBjb25zdCBmb3JtSWQgPSB0aGlzLm5vcm1hbGl6ZUZvcm1Qcm9wZXJ0eShmb3JtLmlkLCBpYyk7XG4gICAgICAgIGNvbnN0IGZvcm1OYW1lID0gdGhpcy5ub3JtYWxpemVGb3JtUHJvcGVydHkoZm9ybS5uYW1lLCBpYyk7XG4gICAgICAgIGNvbnN0IGV4Y2x1ZGVGb3JtSWRzID0gKGNvbmY/LmJsYWNrTGlzdD8uZm9ybT8uaWRzIHx8IFtdKVxuICAgICAgICAgICAgLm1hcCh4ID0+IChpYyA/IHg/LnRvTG93ZXJDYXNlKCkgOiB4KSlcbiAgICAgICAgICAgIC5maWx0ZXIoQm9vbGVhbik7XG4gICAgICAgIGNvbnN0IGV4Y2x1ZGVGb3JtTmFtZXMgPSAoY29uZj8uYmxhY2tMaXN0Py5mb3JtPy5uYW1lcyB8fCBbXSlcbiAgICAgICAgICAgIC5tYXAoeCA9PiAoaWMgPyB4Py50b0xvd2VyQ2FzZSgpIDogeCkpXG4gICAgICAgICAgICAuZmlsdGVyKEJvb2xlYW4pO1xuICAgICAgICBjb25zdCBleGNsdWRlRmllbGRJZHMgPSAoY29uZj8uYmxhY2tMaXN0Py5maWVsZHM/LmlkcyB8fCBbXSlcbiAgICAgICAgICAgIC5tYXAoeCA9PiAoaWMgPyB4Py50b0xvd2VyQ2FzZSgpIDogeCkpXG4gICAgICAgICAgICAuZmlsdGVyKEJvb2xlYW4pO1xuICAgICAgICBjb25zdCBleGNsdWRlRmllbGROYW1lcyA9IChjb25mPy5ibGFja0xpc3Q/LmZpZWxkcz8ubmFtZXMgfHwgW10pXG4gICAgICAgICAgICAubWFwKHggPT4gKGljID8geD8udG9Mb3dlckNhc2UoKSA6IHgpKVxuICAgICAgICAgICAgLmZpbHRlcihCb29sZWFuKTtcblxuICAgICAgICBjb25zdCBleGNsdWRlZCA9XG4gICAgICAgICAgICBleGNsdWRlRm9ybUlkcy5pbmRleE9mKGZvcm1JZCkgPj0gMCB8fFxuICAgICAgICAgICAgZXhjbHVkZUZvcm1OYW1lcy5pbmRleE9mKGZvcm1OYW1lKSA+PSAwIHx8XG4gICAgICAgICAgICBleGNsdWRlRmllbGRJZHMuc29tZShpZCA9PiBmaWVsZElkcy5maW5kKGkgPT4gaWQgPT09IGkpICE9PSB1bmRlZmluZWQpIHx8XG4gICAgICAgICAgICBleGNsdWRlRmllbGROYW1lcy5zb21lKG5hbWUgPT4gZmllbGROYW1lcy5maW5kKG4gPT4gbmFtZSA9PT0gbikgIT09IHVuZGVmaW5lZCk7XG5cbiAgICAgICAgaWYgKGV4Y2x1ZGVkKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgY29uc3QgaW5jbHVkZUZvcm1JZHMgPSBjb25mPy53aGl0ZUxpc3Q/LmZvcm0/LmlkcyB8fCBbXTtcbiAgICAgICAgY29uc3QgaW5jbHVkZUZvcm1OYW1lcyA9IGNvbmY/LndoaXRlTGlzdD8uZm9ybT8ubmFtZXMgfHwgW107XG4gICAgICAgIGNvbnN0IGluY2x1ZGVGaWVsZElkcyA9IGNvbmY/LndoaXRlTGlzdD8uZmllbGRzPy5pZHMgfHwgW107XG4gICAgICAgIGNvbnN0IGluY2x1ZGVGaWVsZE5hbWVzID0gY29uZj8ud2hpdGVMaXN0Py5maWVsZHM/Lm5hbWVzIHx8IFtdO1xuXG4gICAgICAgIGNvbnN0IGluY2x1ZGVkID1cbiAgICAgICAgICAgIGluY2x1ZGVGb3JtSWRzLmluZGV4T2YoZm9ybUlkKSA+PSAwIHx8XG4gICAgICAgICAgICBpbmNsdWRlRm9ybU5hbWVzLmluZGV4T2YoZm9ybU5hbWUpID49IDAgfHxcbiAgICAgICAgICAgIGluY2x1ZGVGaWVsZElkcy5zb21lKGlkID0+IGZpZWxkSWRzLmZpbmQoaSA9PiBpZCA9PT0gaSkgIT09IHVuZGVmaW5lZCkgfHxcbiAgICAgICAgICAgIGluY2x1ZGVGaWVsZE5hbWVzLnNvbWUobmFtZSA9PiBmaWVsZE5hbWVzLmZpbmQobiA9PiBuYW1lID09PSBuKSAhPT0gdW5kZWZpbmVkKTtcblxuICAgICAgICBpZiAoaW5jbHVkZWQpIHJldHVybiB0cnVlO1xuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQgYWN0aXZlVGhlbWUoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIHRoaXMuY3VycmVudC50aGVtZSB8fFxuICAgICAgICAgICAgKHdpbmRvdy5tYXRjaE1lZGlhKFwiKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKVwiKS5tYXRjaGVzID8gXCJkYXJrXCIgOiBcImxpZ2h0XCIpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIHRvZ2dsZVByZWZlcnJlZEVudHJ5VXVpZCh1dWlkOiBzdHJpbmcsIHVybFN0cmluZzogc3RyaW5nKSB7XG4gICAgICAgIGxldCB1cmw7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB1cmwgPSBuZXcgVVJMKHVybFN0cmluZyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIEtlZUxvZy5lcnJvcihcbiAgICAgICAgICAgICAgICBcIkludmFsaWQgVVJMIHN1cHBsaWVkIHRvIHRvZ2dsZVByZWZlcnJlZEVudHJ5VXVpZC4gUHJlZmVycmVkIGVudHJ5IHdpbGwgbm90IGJlIGFsdGVyZWQuXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29uZmlndXJlZFRhcmdldDogU2l0ZUNvbmZpZ1RhcmdldCA9IFwiRG9tYWluXCI7XG4gICAgICAgIGNvbnN0IGFsbENvbmZpZ05vZGVzQW5kTG9va3VwcyA9IHRoaXMuZmluZEFsbENvbmZpZ3NBbmRJbmRleEZvcih1cmxTdHJpbmcpO1xuICAgICAgICBjb25zdCBkZXJpdmVkQ29uZmlnID0gdGhpcy5zaXRlQ29uZmlnRm9yKHVybFN0cmluZyk7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRQcmVmZXJyZWRVdWlkID0gZGVyaXZlZENvbmZpZy5wcmVmZXJyZWRFbnRyeVV1aWQ7XG5cbiAgICAgICAgaWYgKGN1cnJlbnRQcmVmZXJyZWRVdWlkID09PSB1dWlkKSB7XG4gICAgICAgICAgICBhbGxDb25maWdOb2Rlc0FuZExvb2t1cHMuZm9yRWFjaChjbmwgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChjbmwubm9kZS5jb25maWcucHJlZmVycmVkRW50cnlVdWlkID09PSB1dWlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlUHJlZmVycmVkRW50cnlVdWlkKGNubCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhbGxDb25maWdOb2Rlc0FuZExvb2t1cHMuZm9yRWFjaChjbmwgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgY25sLm5vZGUuY29uZmlnLnByZWZlcnJlZEVudHJ5VXVpZCA9PT0gY3VycmVudFByZWZlcnJlZFV1aWQgJiZcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sZWFzdFNwZWNpZmljVGFyZ2V0KGNvbmZpZ3VyZWRUYXJnZXQsIGNubC50YXJnZXQpID09PSBjb25maWd1cmVkVGFyZ2V0XG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlUHJlZmVycmVkRW50cnlVdWlkKGNubCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuYWRkU2l0ZUNvbmZpZ1BhcmFtZXRlcnMoXG4gICAgICAgICAgICAgICAgeyBwcmVmZXJyZWRFbnRyeVV1aWQ6IHV1aWQgfSBhcyBTaXRlQ29uZmlnLFxuICAgICAgICAgICAgICAgIHVybCxcbiAgICAgICAgICAgICAgICBjb25maWd1cmVkVGFyZ2V0LFxuICAgICAgICAgICAgICAgIFwiRXhhY3RcIixcbiAgICAgICAgICAgICAgICBcIkF1dG9cIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNhdmUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbW92ZVByZWZlcnJlZEVudHJ5VXVpZChjbmw6IFNpdGVDb25maWdOb2RlQW5kSW5kZXgpIHtcbiAgICAgICAgY25sLm5vZGUuY29uZmlnLnByZWZlcnJlZEVudHJ5VXVpZCA9IG51bGw7XG5cbiAgICAgICAgLy8gVW5sZXNzIHRoZSB1c2VyIGhhcyBtYW51YWxseSBtb2RpZmllZCB0aGUgcGVyLXNpdGUgY29uZmlnIGZvciB0aGlzIHNpdGVcbiAgICAgICAgLy8gd2UgY2FuIHRpZHkgdXAgdGhpcyB1bm5lY2Vzc2FyeSBkYXRhXG4gICAgICAgIGlmIChjbmwubm9kZS5zb3VyY2UgPT09IFwiQXV0b1wiICYmIHRoaXMuZXF1YWxzRGVmYXVsdFNpdGVDb25maWcoY25sLm5vZGUuY29uZmlnKSkge1xuICAgICAgICAgICAgY29uc3QgbG9va3VwID0gdGhpcy5zaXRlQ29uZmlnTG9va3VwRm9yKGNubC50YXJnZXQsIGNubC5tZXRob2QpO1xuICAgICAgICAgICAgZGVsZXRlIGxvb2t1cFtjbmwubG9va3VwVmFsdWVdO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBlcXVhbHNEZWZhdWx0U2l0ZUNvbmZpZyhjb25maWc6IFNpdGVDb25maWcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjb25maWcucHJlZmVycmVkRW50cnlVdWlkID09PSBcImJvb2xlYW5cIikgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy5wcmV2ZW50U2F2ZU5vdGlmaWNhdGlvbiA9PT0gXCJib29sZWFuXCIpIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKHR5cGVvZiBjb25maWcubGlzdE1hdGNoaW5nQ2FzZVNlbnNpdGl2ZSA9PT0gXCJib29sZWFuXCIpIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKGNvbmZpZy53aGl0ZUxpc3QpIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKGNvbmZpZy5ibGFja0xpc3QpIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBsZWFzdFNwZWNpZmljVGFyZ2V0KHQxOiBTaXRlQ29uZmlnVGFyZ2V0LCB0MjogU2l0ZUNvbmZpZ1RhcmdldCk6IFNpdGVDb25maWdUYXJnZXQge1xuICAgICAgICBpZiAodDEgPT09IFwiRG9tYWluXCIgfHwgdDIgPT09IFwiRG9tYWluXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBcIkRvbWFpblwiO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0MSA9PT0gXCJIb3N0XCIgfHwgdDIgPT09IFwiSG9zdFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJIb3N0XCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFwiUGFnZVwiO1xuICAgIH1cblxuICAgIHB1YmxpYyB2YWx1ZUZyb21VcmwodXJsOiBVUkwsIHRhcmdldDogU2l0ZUNvbmZpZ1RhcmdldCk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IGhvc3QgPSB1cmwuaG9zdDtcbiAgICAgICAgaWYgKHRhcmdldCA9PT0gXCJIb3N0XCIpIHJldHVybiBob3N0O1xuICAgICAgICBpZiAodGFyZ2V0ID09PSBcIlBhZ2VcIikgcmV0dXJuIGhvc3QgKyB1cmwucGF0aG5hbWU7XG4gICAgICAgIGlmICh0YXJnZXQgPT09IFwiRG9tYWluXCIpIHJldHVybiB1dGlscy5wc2wuZ2V0RG9tYWluKGhvc3QpO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGRTaXRlQ29uZmlnUGFyYW1ldGVycyhcbiAgICAgICAgcGFydGlhbENvbmZpZzogUGFydGlhbDxTaXRlQ29uZmlnPixcbiAgICAgICAgdXJsOiBVUkwsXG4gICAgICAgIHRhcmdldDogU2l0ZUNvbmZpZ1RhcmdldCxcbiAgICAgICAgbWV0aG9kOiBTaXRlQ29uZmlnTWV0aG9kLFxuICAgICAgICBzb3VyY2U6IFNpdGVDb25maWdOb2RlVHlwZVxuICAgICkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMudmFsdWVGcm9tVXJsKHVybCwgdGFyZ2V0KTtcbiAgICAgICAgY29uc3QgY29uZmlnTG9va3VwID0gY29uZmlnTWFuYWdlci5zaXRlQ29uZmlnTG9va3VwRm9yKHRhcmdldCwgbWV0aG9kKTtcbiAgICAgICAgaWYgKCFjb25maWdMb29rdXBbdmFsdWVdKSB7XG4gICAgICAgICAgICBjb25maWdMb29rdXBbdmFsdWVdID0geyBjb25maWc6IG5ldyBTaXRlQ29uZmlnKCksIHNvdXJjZSwgbWF0Y2hXZWlnaHQ6IDEwMCB9O1xuICAgICAgICB9XG4gICAgICAgIE9iamVjdC5hc3NpZ24oY29uZmlnTG9va3VwW3ZhbHVlXS5jb25maWcsIHBhcnRpYWxDb25maWcpO1xuICAgIH1cbn1cblxuZXhwb3J0IGNvbnN0IGNvbmZpZ01hbmFnZXIgPSBuZXcgQ29uZmlnTWFuYWdlcigpO1xuIiwiaW1wb3J0IHsgY29uZmlnTWFuYWdlciB9IGZyb20gXCIuLi9jb21tb24vQ29uZmlnTWFuYWdlclwiO1xuXG5leHBvcnQgY2xhc3MgUGFuZWxTdHViT3B0aW9ucyB7XG4gICAgaWQ6IHN0cmluZztcbiAgICBoZWlnaHQ6IG51bWJlcjtcbiAgICB3aWR0aDogbnVtYmVyO1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBhdXRvQ2xvc2VUaW1lOiBudW1iZXI7XG4gICAgbGVnYWN5OiBib29sZWFuO1xuXG4gICAgcHVibGljIHN0YXRpYyBNYXRjaGVkTG9naW5zOiBQYW5lbFN0dWJPcHRpb25zID0ge1xuICAgICAgICBpZDogXCJLZWVBZGRvblBhbmVsTWF0Y2hlZExvZ2luc1wiLFxuICAgICAgICBoZWlnaHQ6IDMwMCxcbiAgICAgICAgd2lkdGg6IDQwMCxcbiAgICAgICAgbmFtZTogXCJtYXRjaGVkTG9naW5zTGVnYWN5XCIsXG4gICAgICAgIGF1dG9DbG9zZVRpbWU6IDAsXG4gICAgICAgIGxlZ2FjeTogdHJ1ZVxuICAgIH07XG5cbiAgICBwdWJsaWMgc3RhdGljIEdlbmVyYXRlUGFzc3dvcmRMZWdhY3k6IFBhbmVsU3R1Yk9wdGlvbnMgPSB7XG4gICAgICAgIGlkOiBcIktlZUFkZG9uUGFuZWxHZW5lcmF0ZVBhc3N3b3JkXCIsXG4gICAgICAgIGhlaWdodDogMzAwLFxuICAgICAgICB3aWR0aDogNDAwLFxuICAgICAgICBuYW1lOiBcImdlbmVyYXRlUGFzc3dvcmRMZWdhY3lcIixcbiAgICAgICAgYXV0b0Nsb3NlVGltZTogMCxcbiAgICAgICAgbGVnYWN5OiB0cnVlXG4gICAgfTtcblxuICAgIHB1YmxpYyBzdGF0aWMgR2VuZXJhdGVQYXNzd29yZDogUGFuZWxTdHViT3B0aW9ucyA9IHtcbiAgICAgICAgaWQ6IFwiS2VlQWRkb25QYW5lbEdlbmVyYXRlUGFzc3dvcmRcIixcbiAgICAgICAgaGVpZ2h0OiA1MDAsXG4gICAgICAgIHdpZHRoOiA0NTAsXG4gICAgICAgIG5hbWU6IFwiZ2VuZXJhdGVQYXNzd29yZFwiLFxuICAgICAgICBhdXRvQ2xvc2VUaW1lOiAwLFxuICAgICAgICBsZWdhY3k6IGZhbHNlXG4gICAgfTtcbn1cblxuZXhwb3J0IGNsYXNzIFBhbmVsU3R1YiB7XG4gICAgcHJpdmF0ZSB0YXJnZXQ6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgY29udGFpbmVyOiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIHRhcmdldFJlbGF0aXZlUmVjdDogQ2xpZW50UmVjdDtcbiAgICBwcml2YXRlIG9wdGlvbnM6IFBhbmVsU3R1Yk9wdGlvbnM7XG4gICAgcHJpdmF0ZSBwYXJlbnRGcmFtZUlkOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBlbGVtZW50VG9SZWZvY3VzOiBFbGVtZW50O1xuXG4gICAgY29uc3RydWN0b3Iob3B0aW9uczogUGFuZWxTdHViT3B0aW9ucywgdGFyZ2V0OiBIVE1MRWxlbWVudCwgcGFyZW50RnJhbWVJZDogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLnBhcmVudEZyYW1lSWQgPSBwYXJlbnRGcmFtZUlkO1xuICAgIH1cblxuICAgIHB1YmxpYyBjcmVhdGVQYW5lbCgpIHtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5uYW1lID09IFwiZ2VuZXJhdGVQYXNzd29yZFwiKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRUb1JlZm9jdXMgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgY29uc3Qgc2hhZG93ID0gdGhpcy5jb250YWluZXIuYXR0YWNoU2hhZG93KHsgbW9kZTogXCJjbG9zZWRcIiB9KTtcbiAgICAgICAgdGhpcy5jb250YWluZXIuaWQgPSB0aGlzLm9wdGlvbnMuaWQ7XG4gICAgICAgIGNvbnN0IHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuICAgICAgICBzdHlsZS50ZXh0Q29udGVudCA9IGA6aG9zdChkaXYpIHtcbiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGUgIWltcG9ydGFudDtcbiAgICAgICAgICAgIHotaW5kZXg6IDIxNDc0ODM2NDcgIWltcG9ydGFudDtcbiAgICAgICAgfWA7XG4gICAgICAgIHNoYWRvdy5hcHBlbmRDaGlsZChzdHlsZSk7XG5cbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0KSB7XG4gICAgICAgICAgICB0aGlzLnRhcmdldFJlbGF0aXZlUmVjdCA9IHRoaXMudGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgdGhpcy5wb3NpdGlvblBhbmVsKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS5zZXRQcm9wZXJ0eShcIndpZHRoXCIsIHRoaXMub3B0aW9ucy53aWR0aCArIFwicHhcIiwgXCJpbXBvcnRhbnRcIik7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS5zZXRQcm9wZXJ0eShcImhlaWdodFwiLCB0aGlzLm9wdGlvbnMuaGVpZ2h0ICsgXCJweFwiLCBcImltcG9ydGFudFwiKTtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLnNldFByb3BlcnR5KFxuICAgICAgICAgICAgICAgIFwidG9wXCIsXG4gICAgICAgICAgICAgICAgKHdpbmRvdy5pbm5lckhlaWdodCAtIHRoaXMub3B0aW9ucy5oZWlnaHQpIC8gMiArIHdpbmRvdy5zY3JvbGxZICsgXCJweFwiLFxuICAgICAgICAgICAgICAgIFwiaW1wb3J0YW50XCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS5zZXRQcm9wZXJ0eShcbiAgICAgICAgICAgICAgICBcImxlZnRcIixcbiAgICAgICAgICAgICAgICAod2luZG93LmlubmVyV2lkdGggLSB0aGlzLm9wdGlvbnMud2lkdGgpIC8gMiArIHdpbmRvdy5zY3JvbGxYICsgXCJweFwiLFxuICAgICAgICAgICAgICAgIFwiaW1wb3J0YW50XCJcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIpO1xuICAgICAgICBpZnJhbWUuc2V0QXR0cmlidXRlKFwic2FuZGJveFwiLCBcImFsbG93LXNjcmlwdHMgYWxsb3ctc2FtZS1vcmlnaW5cIik7XG4gICAgICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoXCJhbGxvd1wiLCBcIlwiKTtcbiAgICAgICAgaWZyYW1lLnN0eWxlLnNldFByb3BlcnR5KFwid2lkdGhcIiwgXCIxMDAlXCIsIFwiaW1wb3J0YW50XCIpO1xuICAgICAgICBpZnJhbWUuc3R5bGUuc2V0UHJvcGVydHkoXCJoZWlnaHRcIiwgXCIxMDAlXCIsIFwiaW1wb3J0YW50XCIpO1xuICAgICAgICBpZnJhbWUuc3R5bGUuc2V0UHJvcGVydHkoXCJ2aXNpYmlsaXR5XCIsIFwidmlzaWJsZVwiLCBcImltcG9ydGFudFwiKTtcbiAgICAgICAgaWZyYW1lLnN0eWxlLnNldFByb3BlcnR5KFwiZGlzcGxheVwiLCBcImJsb2NrXCIsIFwiaW1wb3J0YW50XCIpO1xuICAgICAgICBpZnJhbWUuc3R5bGUuc2V0UHJvcGVydHkoXCJwb3NpdGlvblwiLCBcInJlbGF0aXZlXCIsIFwiaW1wb3J0YW50XCIpO1xuICAgICAgICBpZnJhbWUuc3R5bGUuc2V0UHJvcGVydHkoXG4gICAgICAgICAgICBcImJhY2tncm91bmQtY29sb3JcIixcbiAgICAgICAgICAgIGNvbmZpZ01hbmFnZXIuYWN0aXZlVGhlbWUgPT09IFwiZGFya1wiID8gXCIjMWUxZTFlXCIgOiBcIiNmZmZmZmZcIixcbiAgICAgICAgICAgIFwiaW1wb3J0YW50XCJcbiAgICAgICAgKTtcbiAgICAgICAgaWZyYW1lLnNldEF0dHJpYnV0ZShcInNjcm9sbGluZ1wiLCBcIm5vXCIpO1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmxlZ2FjeSkge1xuICAgICAgICAgICAgaWZyYW1lLnN0eWxlLnNldFByb3BlcnR5KFwiYm9yZGVyXCIsIFwibm9uZVwiLCBcImltcG9ydGFudFwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmcmFtZS5zdHlsZS5zZXRQcm9wZXJ0eShcImJvcmRlclwiLCBcIjJweCBzb2xpZCAjMWE0NjZiXCIsIFwiaW1wb3J0YW50XCIpO1xuICAgICAgICAgICAgaWZyYW1lLnN0eWxlLnNldFByb3BlcnR5KFwiYm9yZGVyLXJhZGl1c1wiLCBcIjhweFwiLCBcImltcG9ydGFudFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNoYWRvdy5hcHBlbmRDaGlsZChpZnJhbWUpO1xuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IGJyb3dzZXIuZXh0ZW5zaW9uLmdldFVSTChcbiAgICAgICAgICAgIGBwYW5lbHMvcGFuZWxzJHt0aGlzLm9wdGlvbnMubGVnYWN5ID8gXCJMZWdhY3lcIiA6IFwiXCJ9Lmh0bWxgXG4gICAgICAgICk7XG4gICAgICAgIGlmcmFtZS5zcmMgPSBgJHt0ZW1wbGF0ZX0/cGFyZW50RnJhbWVJZD0ke3RoaXMucGFyZW50RnJhbWVJZH0mYXV0b0Nsb3NlVGltZT0ke3RoaXMub3B0aW9ucy5hdXRvQ2xvc2VUaW1lfSZwYW5lbD0ke3RoaXMub3B0aW9ucy5uYW1lfSZ0aGVtZT0ke2NvbmZpZ01hbmFnZXIuYWN0aXZlVGhlbWV9YDtcblxuICAgICAgICBjb25zdCBib2R5RWxlbWVudHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIik7XG4gICAgICAgIGlmIChib2R5RWxlbWVudHMgJiYgYm9keUVsZW1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGJvZHlFbGVtZW50c1swXS5hcHBlbmRDaGlsZCh0aGlzLmNvbnRhaW5lcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBmcmFtZXNldEVsZW1lbnRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJmcmFtZXNldFwiKTtcbiAgICAgICAgICAgIGlmIChmcmFtZXNldEVsZW1lbnRzICYmIGZyYW1lc2V0RWxlbWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGZyYW1lc2V0RWxlbWVudHNbMF0uaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYWZ0ZXJlbmRcIiwgdGhpcy5jb250YWluZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHVwZGF0ZUJvdW5kaW5nQ2xpZW50UmVjdCgpIHtcbiAgICAgICAgY29uc3Qgb2xkUmVjdCA9IHRoaXMudGFyZ2V0UmVsYXRpdmVSZWN0O1xuICAgICAgICB0aGlzLnRhcmdldFJlbGF0aXZlUmVjdCA9IHRoaXMudGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIG9sZFJlY3QudG9wICE9IHRoaXMudGFyZ2V0UmVsYXRpdmVSZWN0LnRvcCB8fFxuICAgICAgICAgICAgb2xkUmVjdC5ib3R0b20gIT0gdGhpcy50YXJnZXRSZWxhdGl2ZVJlY3QuYm90dG9tIHx8XG4gICAgICAgICAgICBvbGRSZWN0LmxlZnQgIT0gdGhpcy50YXJnZXRSZWxhdGl2ZVJlY3QubGVmdCB8fFxuICAgICAgICAgICAgb2xkUmVjdC5yaWdodCAhPSB0aGlzLnRhcmdldFJlbGF0aXZlUmVjdC5yaWdodFxuICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb25QYW5lbCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwb3NpdGlvblBhbmVsKCkge1xuICAgICAgICBjb25zdCBwcmVmZXJyZWRDb250YWluZXJIZWlnaHQgPSB0aGlzLm9wdGlvbnMuaGVpZ2h0O1xuICAgICAgICBsZXQgY29udGFpbmVySGVpZ2h0ID0gcHJlZmVycmVkQ29udGFpbmVySGVpZ2h0O1xuICAgICAgICBjb25zdCBjb250YWluZXJXaWR0aCA9IHRoaXMub3B0aW9ucy53aWR0aDtcbiAgICAgICAgbGV0IHBvc2l0aW9uQWJvdmUgPSBmYWxzZTtcblxuICAgICAgICBjb25zdCB0YXJnZXRUb3AgPSB0aGlzLnRhcmdldFJlbGF0aXZlUmVjdC50b3AgKyB3aW5kb3cuc2Nyb2xsWTtcbiAgICAgICAgY29uc3QgdGFyZ2V0Qm90dG9tID0gdGhpcy50YXJnZXRSZWxhdGl2ZVJlY3QuYm90dG9tICsgd2luZG93LnNjcm9sbFk7XG4gICAgICAgIGNvbnN0IHByZWZlcnJlZEFycm93WENvb3JkID0gdGhpcy50YXJnZXRSZWxhdGl2ZVJlY3QucmlnaHQgLSAxMjtcblxuICAgICAgICBjb25zdCBwcmVmZXJyZWRCb3R0b20gPSB0aGlzLnRhcmdldFJlbGF0aXZlUmVjdC5ib3R0b20gKyBwcmVmZXJyZWRDb250YWluZXJIZWlnaHQ7XG4gICAgICAgIGlmIChwcmVmZXJyZWRCb3R0b20gPiB3aW5kb3cuaW5uZXJIZWlnaHQpIHtcbiAgICAgICAgICAgIGNvbnN0IHByZWZlcnJlZFRvcCA9IHRoaXMudGFyZ2V0UmVsYXRpdmVSZWN0LnRvcCAtIHByZWZlcnJlZENvbnRhaW5lckhlaWdodDtcbiAgICAgICAgICAgIGlmIChwcmVmZXJyZWRUb3AgPj0gMCkge1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uQWJvdmUgPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvdmVyZmxvd0JvdHRvbSA9IHByZWZlcnJlZEJvdHRvbSAtIHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICAgICAgICAgICAgICBjb25zdCBvdmVyZmxvd1RvcCA9IC1wcmVmZXJyZWRUb3A7XG4gICAgICAgICAgICAgICAgaWYgKG92ZXJmbG93Qm90dG9tID4gb3ZlcmZsb3dUb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25BYm92ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lckhlaWdodCA9IHByZWZlcnJlZENvbnRhaW5lckhlaWdodCAtIG92ZXJmbG93VG9wO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lckhlaWdodCA9IHByZWZlcnJlZENvbnRhaW5lckhlaWdodCAtIG92ZXJmbG93Qm90dG9tO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE1vdmUgYXMgZmFyIGxlZnQgYXMgcG9zc2libGUgd2hpbGUga2VlcGluZyB0aGUgS2VlIGljb24gYWJvdmUgdGhlIGNvbnRhaW5lciBhbmQgbm90XG4gICAgICAgIC8vIGdvaW5nIGJleW9uZCB0aGUgbGVmdCBlZGdlIG9mIHRoZSB0YXJnZXQuIFdlIGFzc3VtZSB0aGUgS2VlIGljb24gaXMgYWx3YXlzIHZpc2libGUgYmVjYXVzZVxuICAgICAgICAvLyB0aGUgdXNlciBoYXMgaGFkIHRvIGludGVyYWN0IHdpdGggdGhlIGJ1dHRvbiBpbml0aWFsbHkuIFRoYXQgYXNzdW1wdGlvbiB3b24ndCBhbHdheXMgaG9sZFxuICAgICAgICAvLyAtIGUuZy4gaW4gdmVyeSBuYXJyb3cgc2NyZWVucyB3aXRoIGtleWJvYXJkIGFjdGl2YXRpb24gb3Igc29tZSBsYXRlciB3aW5kb3cgb3IgRE9NIGFkanVzdG1lbnRzIGJ1dCB0aGlzIHNob3VsZFxuICAgICAgICAvLyBiZSBhbiBlZGdlIGNhc2UgdGhhdCB1c2VycyBjYW4gd29yayBhcm91bmQgdW50aWwgd2UgaGF2ZSBtb3JlIHRpbWUgdG8gZXh0ZW5kIHN1cHBvcnQgdG8gdGhvc2Ugc2NlbmFyaW9zLlxuICAgICAgICBjb25zdCB0YXJnZXRXaWR0aCA9IHByZWZlcnJlZEFycm93WENvb3JkIC0gdGhpcy50YXJnZXRSZWxhdGl2ZVJlY3QubGVmdDtcbiAgICAgICAgbGV0IHJlbGF0aXZlTGVmdDogbnVtYmVyO1xuICAgICAgICBpZiAodGFyZ2V0V2lkdGggPCBjb250YWluZXJXaWR0aCkge1xuICAgICAgICAgICAgcmVsYXRpdmVMZWZ0ID0gTWF0aC5taW4oXG4gICAgICAgICAgICAgICAgdGhpcy50YXJnZXRSZWxhdGl2ZVJlY3QubGVmdCxcbiAgICAgICAgICAgICAgICB3aW5kb3cuaW5uZXJXaWR0aCAtIGNvbnRhaW5lcldpZHRoXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVsYXRpdmVMZWZ0ID0gcHJlZmVycmVkQXJyb3dYQ29vcmQgLSBjb250YWluZXJXaWR0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHRvcCA9IHBvc2l0aW9uQWJvdmUgPyB0YXJnZXRUb3AgLSBjb250YWluZXJIZWlnaHQgOiB0YXJnZXRCb3R0b207XG4gICAgICAgIGNvbnN0IGxlZnQgPSByZWxhdGl2ZUxlZnQgKyB3aW5kb3cuc2Nyb2xsWDtcbiAgICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUuc2V0UHJvcGVydHkoXCJ3aWR0aFwiLCBjb250YWluZXJXaWR0aCArIFwicHhcIiwgXCJpbXBvcnRhbnRcIik7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLnNldFByb3BlcnR5KFwiaGVpZ2h0XCIsIGNvbnRhaW5lckhlaWdodCArIFwicHhcIiwgXCJpbXBvcnRhbnRcIik7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLnNldFByb3BlcnR5KFwidG9wXCIsIHRvcCArIFwicHhcIiwgXCJpbXBvcnRhbnRcIik7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLnNldFByb3BlcnR5KFwibGVmdFwiLCBsZWZ0ICsgXCJweFwiLCBcImltcG9ydGFudFwiKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY2xvc2VQYW5lbCgpIHtcbiAgICAgICAgY29uc3QgcGFuZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLm9wdGlvbnMuaWQpO1xuICAgICAgICBpZiAocGFuZWwpIHBhbmVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQocGFuZWwpO1xuICAgICAgICBpZiAodGhpcy5lbGVtZW50VG9SZWZvY3VzKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICh0aGlzLmVsZW1lbnRUb1JlZm9jdXMgYXMgSFRNTEVsZW1lbnQpLmZvY3VzKCk7XG4gICAgICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgICAgICAvLyBFeHBlY3RlZCBpZiBhY3RpdmVFbGVtZW50IHdhcyBub3QgYWN0dWFsbHkgYW4gSFRNTEVsZW1lbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImV4cG9ydCBjb25zdCBlbnVtIEFjdGlvbiB7XG4gICAgQ2xvc2VBbGxQYW5lbHMgPSBcImNsb3NlQWxsUGFuZWxzXCIsXG4gICAgRGV0ZWN0Rm9ybXMgPSBcImRldGVjdEZvcm1zXCIsXG4gICAgUmVzZXRGb3JtcyA9IFwicmVzZXRGb3Jtc1wiLFxuICAgIEdldFBhc3N3b3JkUHJvZmlsZXMgPSBcImdldFBhc3N3b3JkUHJvZmlsZXNcIixcbiAgICBHZW5lcmF0ZVBhc3N3b3JkID0gXCJnZW5lcmF0ZVBhc3N3b3JkXCIsXG4gICAgTWFudWFsRmlsbCA9IFwibWFudWFsRmlsbFwiLFxuICAgIFByaW1hcnkgPSBcInByaW1hcnlcIixcbiAgICBTaG93TWF0Y2hlZExvZ2luc1BhbmVsID0gXCJzaG93TWF0Y2hlZExvZ2luc1BhbmVsXCIsXG4gICAgUGFnZUhpZGUgPSBcInBhZ2VIaWRlXCIsXG4gICAgT3BlbktlZVBhc3MgPSBcIm9wZW5rZWVwYXNzXCIsXG4gICAgQ3JlYXRlRW50cnkgPSBcImNyZWF0ZUVudHJ5XCIsXG4gICAgVXBkYXRlRW50cnkgPSBcInVwZGF0ZUVudHJ5XCJcbn1cbiIsImltcG9ydCB7IEZvcm1VdGlscyB9IGZyb20gXCIuL2Zvcm1zVXRpbHNcIjtcbmltcG9ydCB7IEFjdGlvbiB9IGZyb20gXCIuLi9jb21tb24vQWN0aW9uXCI7XG5pbXBvcnQgeyBBZGRvbk1lc3NhZ2UgfSBmcm9tIFwiLi4vY29tbW9uL0FkZG9uTWVzc2FnZVwiO1xuaW1wb3J0IHsgTWF0Y2hlZEZpZWxkIH0gZnJvbSBcIi4vTWF0Y2hlZEZpZWxkXCI7XG5pbXBvcnQgeyBFbnRyeSB9IGZyb20gXCIuLi9jb21tb24vbW9kZWwvRW50cnlcIjtcblxuZXhwb3J0IGNsYXNzIEtlZUZpZWxkSWNvbiB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgbXlQb3J0OiBicm93c2VyLnJ1bnRpbWUuUG9ydCxcbiAgICAgICAgcHJpdmF0ZSBwYXJlbnRGcmFtZUlkOiBudW1iZXIsXG4gICAgICAgIHByaXZhdGUgZm9ybVV0aWxzOiBGb3JtVXRpbHMsXG4gICAgICAgIHByaXZhdGUgY3JlYXRlTWF0Y2hlZExvZ2luc1BhbmVsTmVhck5vZGU6IChlOiBIVE1MRWxlbWVudCkgPT4gdm9pZFxuICAgICkge31cblxuICAgIHByaXZhdGUgZmllbGRzV2l0aEljb25zOiBNYXRjaGVkRmllbGRbXSA9IFtdO1xuICAgIHByaXZhdGUgcGFzc3dvcmRGaWVsZHM6IE1hdGNoZWRGaWVsZFtdO1xuICAgIHByaXZhdGUgb3RoZXJGaWVsZHM6IE1hdGNoZWRGaWVsZFtdO1xuXG4gICAgcHVibGljIHJlbW92ZUtlZUljb25Gcm9tQWxsRmllbGRzKCkge1xuICAgICAgICBmb3IgKGNvbnN0IGZpZWxkIG9mIHRoaXMuZmllbGRzV2l0aEljb25zKSB7XG4gICAgICAgICAgICBjb25zdCBlbGVtZW50OiBIVE1MRWxlbWVudCA9IGZpZWxkLkRPTWVsZW1lbnQ7XG4gICAgICAgICAgICBpZiAoIWVsZW1lbnQpIGNvbnRpbnVlO1xuICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcyk7XG4gICAgICAgICAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgdGhpcyk7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KFwiYmFja2dyb3VuZC1pbWFnZVwiLCBcIlwiKTtcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoXCJiYWNrZ3JvdW5kLXJlcGVhdFwiLCBcIlwiKTtcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoXCJiYWNrZ3JvdW5kLWF0dGFjaG1lbnRcIiwgXCJcIik7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KFwiYmFja2dyb3VuZC1zaXplXCIsIFwiXCIpO1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShcImJhY2tncm91bmQtcG9zaXRpb25cIiwgXCJcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5maWVsZHNXaXRoSWNvbnMgPSBbXTtcbiAgICAgICAgdGhpcy5wYXNzd29yZEZpZWxkcyA9IG51bGw7XG4gICAgICAgIHRoaXMub3RoZXJGaWVsZHMgPSBudWxsO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGRLZWVJY29uVG9GaWVsZHMoXG4gICAgICAgIHBhc3N3b3JkRmllbGRzOiBNYXRjaGVkRmllbGRbXSxcbiAgICAgICAgb3RoZXJGaWVsZHM6IE1hdGNoZWRGaWVsZFtdLFxuICAgICAgICBlbnRyaWVzOiBFbnRyeVtdXG4gICAgKSB7XG4gICAgICAgIHRoaXMucGFzc3dvcmRGaWVsZHMgPSBwYXNzd29yZEZpZWxkcztcbiAgICAgICAgdGhpcy5vdGhlckZpZWxkcyA9IG90aGVyRmllbGRzO1xuXG4gICAgICAgIGlmIChlbnRyaWVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIHRoaXMuZ2V0TGFiZWxsZWRJY29uKGVudHJpZXMubGVuZ3RoLnRvU3RyaW5nKCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5hZnRlckltYWdlTG9hZGVkKHRoaXMuS0VFRk9YX0lDT05fMTYpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBza2lwRmllbGQoZmllbGQ6IE1hdGNoZWRGaWVsZCkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICAhdGhpcy5mb3JtVXRpbHMuaXNBVGV4dEZvcm1GaWVsZFR5cGUoZmllbGQuZmllbGQudHlwZSkgJiZcbiAgICAgICAgICAgIGZpZWxkLmZpZWxkLnR5cGUgIT0gXCJwYXNzd29yZFwiXG4gICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgIWZpZWxkLkRPTWVsZW1lbnQgfHxcbiAgICAgICAgICAgIGZpZWxkLkRPTWVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MU2VsZWN0RWxlbWVudCB8fFxuICAgICAgICAgICAgIWZpZWxkLkRPTWVsZW1lbnQuaXNDb25uZWN0ZWRcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmllbGQuRE9NZWxlbWVudC5tYXhMZW5ndGggPiAwICYmIGZpZWxkLkRPTWVsZW1lbnQubWF4TGVuZ3RoIDw9IDMpIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAoZmllbGQuRE9NZWxlbWVudC5vZmZzZXRXaWR0aCA8IDUwKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHByaXZhdGUgYWRkSWNvbihmaWVsZDogTWF0Y2hlZEZpZWxkLCBpbWFnZTogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuZmllbGRzV2l0aEljb25zLnB1c2goZmllbGQpO1xuXG4gICAgICAgIGNvbnN0IGVsZW1lbnQ6IEhUTUxFbGVtZW50ID0gZmllbGQuRE9NZWxlbWVudDtcbiAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcyk7XG4gICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB0aGlzKTtcblxuICAgICAgICBlbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KFwiYmFja2dyb3VuZC1pbWFnZVwiLCBcInVybCgnXCIgKyBpbWFnZSArIFwiJylcIiwgXCJpbXBvcnRhbnRcIik7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoXCJiYWNrZ3JvdW5kLXJlcGVhdFwiLCBcIm5vLXJlcGVhdFwiLCBcImltcG9ydGFudFwiKTtcbiAgICAgICAgZWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShcImJhY2tncm91bmQtYXR0YWNobWVudFwiLCBcInNjcm9sbFwiLCBcImltcG9ydGFudFwiKTtcbiAgICAgICAgZWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShcImJhY2tncm91bmQtc2l6ZVwiLCBcIjE2cHggMTZweFwiLCBcImltcG9ydGFudFwiKTtcbiAgICAgICAgZWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShcImJhY2tncm91bmQtcG9zaXRpb25cIiwgXCJjYWxjKDEwMCUgLSA0cHgpIDUwJVwiLCBcImltcG9ydGFudFwiKTtcbiAgICAgICAgZWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShcImN1cnNvclwiLCBcImF1dG9cIik7XG5cbiAgICAgICAgY29uc3QgdHJhbnNpdGlvbkNvbmZpZyA9IHdpbmRvd1xuICAgICAgICAgICAgLmdldENvbXB1dGVkU3R5bGUoZmllbGQuRE9NZWxlbWVudClcbiAgICAgICAgICAgIC5nZXRQcm9wZXJ0eVZhbHVlKFwidHJhbnNpdGlvbi1wcm9wZXJ0eVwiKTtcbiAgICAgICAgaWYgKFtcImFsbFwiLCBcImJhY2tncm91bmRcIl0uc29tZSh2YWwgPT4gdHJhbnNpdGlvbkNvbmZpZy5pbmNsdWRlcyh2YWwpKSkge1xuICAgICAgICAgICAgZmllbGQuRE9NZWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShcInRyYW5zaXRpb25cIiwgXCJub25lXCIsIFwiaW1wb3J0YW50XCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5vdmVycmlkZUJveFNoYWRvd3MoZWxlbWVudCk7XG4gICAgfVxuXG4gICAgcHVibGljIGhhbmRsZUV2ZW50KGU6IEV2ZW50KSB7XG4gICAgICAgIGlmIChlLnR5cGUgPT09IFwiY2xpY2tcIikgdGhpcy5zaG93TWF0Y2hlZExvZ2luc1BhbmVsKGUpO1xuICAgICAgICBpZiAoZS50eXBlID09PSBcIm1vdXNlbW92ZVwiKSB0aGlzLmhvdmVyT3ZlcklucHV0KGUpO1xuICAgIH1cblxuICAgIHByaXZhdGUgbGltaXRGaWVsZHMoZmllbGRzOiBNYXRjaGVkRmllbGRbXSkge1xuICAgICAgICBjb25zdCBvcmRlcmVkRmllbGRzID0gZmllbGRzXG4gICAgICAgICAgICAuZmlsdGVyKGYgPT4gIXRoaXMuc2tpcEZpZWxkKGYpKVxuICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoYS5oaWdoZXN0U2NvcmUgPT09IGIuaGlnaGVzdFNjb3JlKSByZXR1cm4gMDtcbiAgICAgICAgICAgICAgICByZXR1cm4gYS5oaWdoZXN0U2NvcmUgPCBiLmhpZ2hlc3RTY29yZSA/IDEgOiAtMTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gb3JkZXJlZEZpZWxkcy5zbGljZSgwLCAyKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFmdGVySW1hZ2VMb2FkZWQoaW1hZ2U6IHN0cmluZykge1xuICAgICAgICAvLyBQdXQgaWNvbnMgaW4gb25seSB0aGUgdG9wIDIgbWF0Y2hpbmcgcGFzc3dvcmQgYW5kIHRleHQgZmllbGRzXG4gICAgICAgIGNvbnN0IGZpZWxkU2V0MSA9IHRoaXMubGltaXRGaWVsZHModGhpcy5wYXNzd29yZEZpZWxkcyk7XG4gICAgICAgIGNvbnN0IGZpZWxkU2V0MiA9IHRoaXMubGltaXRGaWVsZHModGhpcy5vdGhlckZpZWxkcyk7XG4gICAgICAgIGZvciAoY29uc3QgZmllbGQgb2YgZmllbGRTZXQxLmNvbmNhdChmaWVsZFNldDIpKSB7XG4gICAgICAgICAgICB0aGlzLmFkZEljb24oZmllbGQsIGltYWdlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgb3ZlcnJpZGVCb3hTaGFkb3dzKGVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpO1xuICAgICAgICBpZiAoY3VycmVudFN0eWxlKSB7XG4gICAgICAgICAgICBjb25zdCBzaGFkb3dzID0gW107XG4gICAgICAgICAgICBzaGFkb3dzLnB1c2goY3VycmVudFN0eWxlLmdldFByb3BlcnR5VmFsdWUoXCJib3gtc2hhZG93XCIpKTtcbiAgICAgICAgICAgIHNoYWRvd3MucHVzaChjdXJyZW50U3R5bGUuZ2V0UHJvcGVydHlWYWx1ZShcIi13ZWJraXQtYm94LXNoYWRvd1wiKSk7XG4gICAgICAgICAgICBzaGFkb3dzLnB1c2goY3VycmVudFN0eWxlLmdldFByb3BlcnR5VmFsdWUoXCItbW96LWJveC1zaGFkb3dcIikpO1xuICAgICAgICAgICAgaWYgKHNoYWRvd3Muc29tZShzID0+IHMuaW5kZXhPZihcImluc2V0XCIpKSkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoXCJib3gtc2hhZG93XCIsIFwiaW5pdGlhbFwiLCBcImltcG9ydGFudFwiKTtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KFwiLXdlYmtpdC1ib3gtc2hhZG93XCIsIFwiaW5pdGlhbFwiLCBcImltcG9ydGFudFwiKTtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KFwiLW1vei1ib3gtc2hhZG93XCIsIFwiaW5pdGlhbFwiLCBcImltcG9ydGFudFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgc2hvd01hdGNoZWRMb2dpbnNQYW5lbChlKSB7XG4gICAgICAgIGNvbnN0IGJjcmVjdCA9IGUudGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBjb25zdCBsZWZ0TGltaXQgPSBiY3JlY3QubGVmdCArIGJjcmVjdC53aWR0aCAtIDIyO1xuICAgICAgICBpZiAoZS5jbGllbnRYID4gbGVmdExpbWl0ICYmIGJjcmVjdC50b3AgPD0gZS5jbGllbnRZICYmIGUuY2xpZW50WSA8PSBiY3JlY3QuYm90dG9tKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnRGcmFtZUlkICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5teVBvcnQucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IEFjdGlvbi5TaG93TWF0Y2hlZExvZ2luc1BhbmVsXG4gICAgICAgICAgICAgICAgfSBhcyBBZGRvbk1lc3NhZ2UpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZU1hdGNoZWRMb2dpbnNQYW5lbE5lYXJOb2RlKGUudGFyZ2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgaG92ZXJPdmVySW5wdXQoZSkge1xuICAgICAgICBpZiAoZS50YXJnZXQuZGlzYWJsZWQpIHJldHVybjtcbiAgICAgICAgY29uc3QgYmNyZWN0ID0gZS50YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGNvbnN0IGxlZnRMaW1pdCA9IGJjcmVjdC5sZWZ0ICsgYmNyZWN0LndpZHRoIC0gMjI7XG4gICAgICAgIGlmIChlLmNsaWVudFggPiBsZWZ0TGltaXQpIHtcbiAgICAgICAgICAgIGUudGFyZ2V0LnN0eWxlLnNldFByb3BlcnR5KFwiY3Vyc29yXCIsIFwicG9pbnRlclwiLCBcImltcG9ydGFudFwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlLnRhcmdldC5zdHlsZS5zZXRQcm9wZXJ0eShcImN1cnNvclwiLCBcImF1dG9cIik7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRMYWJlbGxlZEljb24odGV4dDogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSAxNjtcbiAgICAgICAgY2FudmFzLndpZHRoID0gMTY7XG4gICAgICAgIGNvbnN0IGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gICAgICAgIGltZy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICAgICAgICAgIGNvbnRleHQuZHJhd0ltYWdlKGltZywgMCwgMCk7XG4gICAgICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IFwid2hpdGVcIjtcbiAgICAgICAgICAgIGNvbnRleHQuZmlsbFJlY3QoNiwgOCwgMTAsIDgpO1xuICAgICAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBcInJlZFwiO1xuICAgICAgICAgICAgY29udGV4dC5mb250ID0gXCI4cHggQXJpYWxcIjtcbiAgICAgICAgICAgIGNvbnRleHQuZmlsbFRleHQodGV4dCwgNywgMTUpO1xuICAgICAgICAgICAgdGhpcy5hZnRlckltYWdlTG9hZGVkKGNhbnZhcy50b0RhdGFVUkwoKSk7XG4gICAgICAgIH0pO1xuICAgICAgICBpbWcuc3JjID0gdGhpcy5LRUVGT1hfSUNPTl8xNjtcbiAgICB9XG5cbiAgICByZWFkb25seSBLRUVGT1hfSUNPTl8xNiA9XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtbGVuXG4gICAgICAgIFwiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCQUFBQUFRQ0FZQUFBQWY4LzloQUFBQUJITkNTVlFJQ0FnSWZBaGtpQUFBQUFsd1NGbHpBQUFBN0FBQUFPd0JlU2h4dlFBQUFCbDBSVmgwVTI5bWRIZGhjbVVBZDNkM0xtbHVhM05qWVhCbExtOXlaNXZ1UEJvQUFBQU9kRVZZZEZScGRHeGxBRXRsWlNCc2IyZHZONTlCOUFBQUFCQjBSVmgwUVhWMGFHOXlBRXRsWlNCV1lYVnNkR1h3eTVVQUFBSDhTVVJCVkRpTmhaRGZTMU5oR01jL3ozdk9FSGVhMGxnWHJraXN2QXJXVFVTbEY5WEZJS2ovd2F1Z3RQK2hleS9NNXZwRk4wRWc0VVZCMFdBUlNnbEMwSVgyQXd3dHpkeXdwcFlzejg2Mjg3NWR6TG1EYmZUY3ZkL244LzArWDE2Slg3NFN4Z3Q5QUhyWW1ZaFZmVGJaODhaNi9TZVdWRUMvc3pGMWJyR3ZWRFQySlJxelZMTFVDVGwyOFhyYnRxOEx3TDc2SnRVMWF4TGhMVG0vMkEvQTFKRnA1dHhPTTVSUFNDQmdNMnlwTHJXUVNYa0lEK3RxZDhqbGpMTXBqdmdNUkZjWTJQK05zUEk1N1d4SWQ4Z04rSG13a0VsNU5vQlV1V1VzcmdJcVpudTd4TFhvbDZDQm1GMW11ZElPVURVMmFRQUZzUG9xL1JrakdZQjVMNEtuRlh2SDA0cDV6d0hBd05QOGkvVHliZ0FBWWtZQml0cGllTDBYUDJEMmdlSDFYb3JhcnFHNnhnSUVQMFhpeWNIM3dIR0FVKzBiM0Q0NGg2c3RodklKWnQzT092WXVseDA3V1RjRnV4b2pqZVNsU3EzdTEzS1lUNlZJQXdvd2V3T3d0dG9lSVJTQzJzeDJsSXFwWTVLUGRoeDQzRExnKzh5SUszQS9xSjExMWdtSnJ0bU52dk54NGthNVpRQ0EwcElHS2hvMFFFVDVBQVlvVlVYZis0ZmZLNnk4SE1zQkV5VnR1UUMvZFFnZk1SakcxN0ozZi93M0FFQXJjN09vN2ZENHIwT01GSTZpalNoUmFyUVpLODFFZ0hoeWNCcm8yM2xPNXJMcEM4MjRwZzBBeEVqam90RDBPb0RkYXJGYWlUMDUzTGIyVmhCL3VlUG44MWJjWCt4WHU3cmVzbDlSQUFBQUFFbEZUa1N1UW1DQ1wiO1xufVxuIiwiaW1wb3J0IHsgRmlsbGVkRmllbGQgfSBmcm9tIFwiLi9GaWxsZWRGaWVsZFwiO1xuaW1wb3J0IHsgRW50cnkgfSBmcm9tIFwiLi4vY29tbW9uL21vZGVsL0VudHJ5XCI7XG5pbXBvcnQgeyBNYXRjaGVkRmllbGQgfSBmcm9tIFwiLi9NYXRjaGVkRmllbGRcIjtcblxuZXhwb3J0IGNsYXNzIE1hdGNoUmVzdWx0IHtcbiAgICBlbnRyaWVzOiBFbnRyeVtdW107XG4gICAgc3VibWl0VGFyZ2V0czogSFRNTEVsZW1lbnRbXTtcbiAgICB1c2VybmFtZUluZGV4QXJyYXk6IG51bWJlcltdO1xuICAgIHBhc3N3b3JkRmllbGRzQXJyYXk6IE1hdGNoZWRGaWVsZFtdW107XG4gICAgb3RoZXJGaWVsZHNBcnJheTogTWF0Y2hlZEZpZWxkW11bXTtcbiAgICBjdXJyZW50UGFnZTogbnVtYmVyO1xuICAgIGFsbE1hdGNoaW5nTG9naW5zOiBhbnlbXTtcbiAgICBmb3JtUmVsZXZhbmNlU2NvcmVzOiBudW1iZXJbXTtcbiAgICBVVUlEOiBzdHJpbmc7XG4gICAgbXVzdEF1dG9GaWxsRm9ybTogYm9vbGVhbjtcbiAgICBjYW5ub3RBdXRvRmlsbEZvcm06IGJvb2xlYW47XG4gICAgbXVzdEF1dG9TdWJtaXRGb3JtOiBib29sZWFuO1xuICAgIGNhbm5vdEF1dG9TdWJtaXRGb3JtOiBib29sZWFuO1xuICAgIGRiRmlsZU5hbWU6IHN0cmluZztcbiAgICBkb2M6IERvY3VtZW50O1xuICAgIGZvcm1zOiBIVE1MRm9ybUVsZW1lbnRbXTtcbiAgICBmb3JtUmVhZHlGb3JTdWJtaXQ6IGJvb2xlYW47XG4gICAgYXV0b2ZpbGxPblN1Y2Nlc3M6IGJvb2xlYW47XG4gICAgYXV0b3N1Ym1pdE9uU3VjY2VzczogYm9vbGVhbjtcbiAgICBub3RpZnlVc2VyT25TdWNjZXNzOiBib29sZWFuO1xuICAgIHdyYXBwZXJzOiBhbnlbXTtcbiAgICByZXF1ZXN0Q291bnQ6IG51bWJlcjtcbiAgICByZXNwb25zZUNvdW50OiBudW1iZXI7XG4gICAgcmVxdWVzdElkczogYW55W107XG4gICAgbW9zdFJlbGV2YW50Rm9ybUluZGV4PzogbnVtYmVyO1xuICAgIGxhc3RGaWxsZWRPdGhlcjogRmlsbGVkRmllbGRbXTtcbiAgICBsYXN0RmlsbGVkUGFzc3dvcmRzOiBGaWxsZWRGaWVsZFtdO1xufVxuIiwiZXhwb3J0IGVudW0gU2Vzc2lvblR5cGUge1xuICAgIEV2ZW50ID0gXCJldmVudFwiLFxuICAgIFdlYnNvY2tldCA9IFwid2Vic29ja2V0XCJcbn1cbiIsImltcG9ydCB7IEVudHJ5IH0gZnJvbSBcIi4vRW50cnlcIjtcbmltcG9ydCB7IEljb24gfSBmcm9tIFwiLi9JY29uXCI7XG5pbXBvcnQgeyB1dGlscyB9IGZyb20gXCIuLi91dGlsc1wiO1xuaW1wb3J0IHsgRW50cnlTdW1tYXJ5RHRvIH0gZnJvbSBcIi4vS1BSUENEVE9zXCI7XG5cbmV4cG9ydCBjbGFzcyBFbnRyeVN1bW1hcnkge1xuICAgIGljb246IEljb247XG4gICAgdXNlcm5hbWVWYWx1ZTogc3RyaW5nO1xuICAgIHVzZXJuYW1lTmFtZTogc3RyaW5nO1xuICAgIHBhdGg6IHN0cmluZztcbiAgICB0aXRsZTogc3RyaW5nO1xuICAgIHVSTHM6IHN0cmluZ1tdO1xuICAgIHVybDogc3RyaW5nO1xuICAgIHV1aWQ6IHN0cmluZztcbiAgICBkYkZpbGVOYW1lOiBzdHJpbmc7XG4gICAgcmVsZXZhbmNlU2NvcmU6IG51bWJlcjtcbiAgICBmdWxsRGV0YWlscz86IEVudHJ5OyAvL1RPRE86NDogcmVtb3ZlIGNpcmN1bGFyIHJlZmVyZW5jZSBieSBtYWludGFpbmluZyBpbmRlcGVuZGVudCBFbnRyeSBsb29rdXAgYnkgdXVpZD9cbiAgICBpc1ByZWZlcnJlZE1hdGNoPzogYm9vbGVhbjtcblxuICAgIGNvbnN0cnVjdG9yKGU6IFBhcnRpYWw8RW50cnlTdW1tYXJ5Pikge1xuICAgICAgICB0aGlzLmljb24gPSBlLmljb24gfHwgeyB2ZXJzaW9uOiAxLCBpY29uSW1hZ2VEYXRhOiBcIlwiIH07XG4gICAgICAgIHRoaXMudXNlcm5hbWVWYWx1ZSA9IGUudXNlcm5hbWVWYWx1ZSB8fCBcIjxubyB1c2VybmFtZT5cIjtcbiAgICAgICAgdGhpcy51c2VybmFtZU5hbWUgPSBlLnVzZXJuYW1lTmFtZSB8fCBcIjxubyB1c2VybmFtZT5cIjtcbiAgICAgICAgdGhpcy5wYXRoID0gZS5wYXRoIHx8IFwiVU5LTk9XTiBQQVRIXCI7XG4gICAgICAgIHRoaXMudGl0bGUgPSBlLnRpdGxlIHx8IFwiXCI7XG4gICAgICAgIHRoaXMudVJMcyA9IGUudVJMcyB8fCBbXTtcbiAgICAgICAgdGhpcy51cmwgPSBlPy51cmwgfHwgXCJcIjtcbiAgICAgICAgdGhpcy51dWlkID0gZS51dWlkIHx8IHV0aWxzLm5ld0dVSUQoKTtcbiAgICAgICAgdGhpcy5kYkZpbGVOYW1lID0gZS5kYkZpbGVOYW1lIHx8IFwiXCI7XG4gICAgICAgIHRoaXMucmVsZXZhbmNlU2NvcmUgPSBlLnJlbGV2YW5jZVNjb3JlO1xuICAgICAgICB0aGlzLmZ1bGxEZXRhaWxzID0gZS5mdWxsRGV0YWlscztcbiAgICAgICAgdGhpcy5pc1ByZWZlcnJlZE1hdGNoID0gZS5pc1ByZWZlcnJlZE1hdGNoO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZnJvbUVudHJ5KGVudHJ5OiBFbnRyeSkge1xuICAgICAgICByZXR1cm4gbmV3IEVudHJ5U3VtbWFyeSh7XG4gICAgICAgICAgICBpY29uOiBlbnRyeS5pY29uLFxuICAgICAgICAgICAgdXNlcm5hbWVWYWx1ZTogRW50cnkuZ2V0VXNlcm5hbWVGaWVsZChlbnRyeSk/LnZhbHVlLFxuICAgICAgICAgICAgdXNlcm5hbWVOYW1lOiBFbnRyeS5nZXRVc2VybmFtZUZpZWxkKGVudHJ5KT8ubmFtZSxcbiAgICAgICAgICAgIHRpdGxlOiBlbnRyeS50aXRsZSxcbiAgICAgICAgICAgIHVSTHM6IGVudHJ5LlVSTHMsXG4gICAgICAgICAgICB1cmw6IGVudHJ5Py5VUkxzWzBdLFxuICAgICAgICAgICAgdXVpZDogZW50cnkudXVpZCxcbiAgICAgICAgICAgIGRiRmlsZU5hbWU6IGVudHJ5LmRhdGFiYXNlLmZpbGVOYW1lLFxuICAgICAgICAgICAgZnVsbERldGFpbHM6IGVudHJ5LFxuICAgICAgICAgICAgaXNQcmVmZXJyZWRNYXRjaDogZW50cnkuaXNQcmVmZXJyZWRNYXRjaFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGZyb21LUFJQQ0VudHJ5U3VtbWFyeURUTyhcbiAgICAgICAgZW50cnlTdW1tYXJ5RHRvOiBFbnRyeVN1bW1hcnlEdG8sXG4gICAgICAgIHBhdGg6IHN0cmluZyxcbiAgICAgICAgZGJGaWxlTmFtZTogc3RyaW5nXG4gICAgKSB7XG4gICAgICAgIHJldHVybiBuZXcgRW50cnlTdW1tYXJ5KHtcbiAgICAgICAgICAgIGljb246IHsgdmVyc2lvbjogMSwgaWNvbkltYWdlRGF0YTogZW50cnlTdW1tYXJ5RHRvLmljb25JbWFnZURhdGEgfSxcbiAgICAgICAgICAgIHVzZXJuYW1lVmFsdWU6IGVudHJ5U3VtbWFyeUR0by51c2VybmFtZVZhbHVlLFxuICAgICAgICAgICAgdXNlcm5hbWVOYW1lOiBlbnRyeVN1bW1hcnlEdG8udXNlcm5hbWVOYW1lLFxuICAgICAgICAgICAgcGF0aCxcbiAgICAgICAgICAgIHRpdGxlOiBlbnRyeVN1bW1hcnlEdG8udGl0bGUsXG4gICAgICAgICAgICB1UkxzOiBlbnRyeVN1bW1hcnlEdG8udVJMcyxcbiAgICAgICAgICAgIHVybDogZW50cnlTdW1tYXJ5RHRvPy51UkxzWzBdLFxuICAgICAgICAgICAgdXVpZDogZW50cnlTdW1tYXJ5RHRvLnVuaXF1ZUlELFxuICAgICAgICAgICAgZGJGaWxlTmFtZVxuICAgICAgICB9KTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBFbnRyeVN1bW1hcnkgfSBmcm9tIFwiLi9FbnRyeVN1bW1hcnlcIjtcbmltcG9ydCB7IEljb24gfSBmcm9tIFwiLi9JY29uXCI7XG5pbXBvcnQgeyB1dGlscyB9IGZyb20gXCIuLi91dGlsc1wiO1xuaW1wb3J0IHsgR3JvdXBEdG8gfSBmcm9tIFwiLi9LUFJQQ0RUT3NcIjtcblxuZXhwb3J0IGNsYXNzIEdyb3VwIHtcbiAgICByZWFkb25seSB0aXRsZTogc3RyaW5nO1xuICAgIHJlYWRvbmx5IHV1aWQ6IHN0cmluZztcbiAgICByZWFkb25seSBpY29uOiBJY29uO1xuICAgIHJlYWRvbmx5IHBhdGg6IHN0cmluZztcbiAgICByZWFkb25seSBlbnRyeVN1bW1hcmllczogRW50cnlTdW1tYXJ5W107XG4gICAgcmVhZG9ubHkgZ3JvdXBzOiBHcm91cFtdO1xuICAgIC8vY2hpbGRFbnRyaWVzOiBFbnRyeVtdIC0gdGhpcyBpcyBvbmx5IG5lZWRlZCBpZiB3ZSBldmVyIHJlcXVlc3QgR2V0QWxsRGF0YWJhc2VzKHRydWUpIGJ1dCBLZWUgY3VycmVudGx5IGhhcyBubyBuZWVkIGZvciB0aGlzIEtQUlBDIGZlYXR1cmVcblxuICAgIGNvbnN0cnVjdG9yKGc6IFBhcnRpYWw8R3JvdXA+KSB7XG4gICAgICAgIHRoaXMudGl0bGUgPSBnLnRpdGxlIHx8IFwiXCI7XG4gICAgICAgIHRoaXMudXVpZCA9IGcudXVpZCB8fCB1dGlscy5uZXdHVUlEKCk7XG4gICAgICAgIHRoaXMuaWNvbiA9IGcuaWNvbiB8fCB7IHZlcnNpb246IDEsIGljb25JbWFnZURhdGE6IFwiXCIgfTtcbiAgICAgICAgdGhpcy5wYXRoID0gZy5wYXRoIHx8IFwiVU5LTk9XTiBQQVRIXCI7XG4gICAgICAgIHRoaXMuZW50cnlTdW1tYXJpZXMgPSBnLmVudHJ5U3VtbWFyaWVzIHx8IFtdO1xuICAgICAgICB0aGlzLmdyb3VwcyA9IGcuZ3JvdXBzIHx8IFtdO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZnJvbUtQUlBDR3JvdXBEVE8oZ3JvdXBEdG86IEdyb3VwRHRvLCBkYkZpbGVOYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBHcm91cCh7XG4gICAgICAgICAgICB0aXRsZTogZ3JvdXBEdG8udGl0bGUsXG4gICAgICAgICAgICB1dWlkOiBncm91cER0by51bmlxdWVJRCxcbiAgICAgICAgICAgIGljb246IHsgdmVyc2lvbjogMSwgaWNvbkltYWdlRGF0YTogZ3JvdXBEdG8uaWNvbkltYWdlRGF0YSB9LFxuICAgICAgICAgICAgcGF0aDogZ3JvdXBEdG8ucGF0aCxcbiAgICAgICAgICAgIGVudHJ5U3VtbWFyaWVzOiBncm91cER0by5jaGlsZExpZ2h0RW50cmllcy5tYXAoY2hpbGRMaWdodEVudHJ5ID0+XG4gICAgICAgICAgICAgICAgRW50cnlTdW1tYXJ5LmZyb21LUFJQQ0VudHJ5U3VtbWFyeURUTyhjaGlsZExpZ2h0RW50cnksIGdyb3VwRHRvLnBhdGgsIGRiRmlsZU5hbWUpXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgZ3JvdXBzOiBncm91cER0by5jaGlsZEdyb3Vwcy5tYXAoY2hpbGRHcm91cCA9PlxuICAgICAgICAgICAgICAgIHRoaXMuZnJvbUtQUlBDR3JvdXBEVE8oY2hpbGRHcm91cCwgZGJGaWxlTmFtZSlcbiAgICAgICAgICAgIClcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBjb250YWluc0lkKGdyb3VwOiBHcm91cCwgaWQ6IHN0cmluZykge1xuICAgICAgICBpZiAoZ3JvdXAudXVpZCA9PT0gaWQpIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAoZ3JvdXAuZ3JvdXBzICYmIGdyb3VwLmdyb3Vwcy5zb21lKGcgPT4gR3JvdXAuY29udGFpbnNJZChnLCBpZCkpKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFNlc3Npb25UeXBlIH0gZnJvbSBcIi4vU2Vzc2lvblR5cGVcIjtcbmltcG9ydCB7IERhdGFiYXNlRHRvIH0gZnJvbSBcIi4vS1BSUENEVE9zXCI7XG5pbXBvcnQgeyBJY29uIH0gZnJvbSBcIi4vSWNvblwiO1xuaW1wb3J0IHsgR3JvdXAgfSBmcm9tIFwiLi9Hcm91cFwiO1xuXG5leHBvcnQgY2xhc3MgRGF0YWJhc2Uge1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBmaWxlTmFtZTogc3RyaW5nO1xuICAgIGljb246IEljb247XG4gICAgcm9vdDogR3JvdXA7XG4gICAgYWN0aXZlOiBib29sZWFuO1xuICAgIHNlc3Npb25UeXBlOiBTZXNzaW9uVHlwZTtcbiAgICBzZXNzaW9uRmVhdHVyZXM6IHN0cmluZ1tdO1xuXG4gICAgY29uc3RydWN0b3IoZGI6IFBhcnRpYWw8RGF0YWJhc2U+KSB7XG4gICAgICAgIHRoaXMubmFtZSA9IGRiLm5hbWUgfHwgXCJcIjtcbiAgICAgICAgdGhpcy5maWxlTmFtZSA9IGRiLmZpbGVOYW1lIHx8IFwiXCI7XG4gICAgICAgIHRoaXMuaWNvbiA9IGRiLmljb24gfHwgeyB2ZXJzaW9uOiAxLCBpY29uSW1hZ2VEYXRhOiBcIlwiIH07XG4gICAgICAgIHRoaXMucm9vdCA9IGRiLnJvb3QgfHwgbmV3IEdyb3VwKHt9KTtcbiAgICAgICAgdGhpcy5hY3RpdmUgPSBkYi5hY3RpdmUgfHwgZmFsc2U7XG4gICAgICAgIHRoaXMuc2Vzc2lvblR5cGUgPSBkYi5zZXNzaW9uVHlwZSB8fCBTZXNzaW9uVHlwZS5FdmVudDtcbiAgICAgICAgdGhpcy5zZXNzaW9uRmVhdHVyZXMgPSBkYi5zZXNzaW9uRmVhdHVyZXMgfHwgW1wiXCJdO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZnJvbUtQUlBDRGF0YWJhc2VEVE8oXG4gICAgICAgIGR0bzogRGF0YWJhc2VEdG8sXG4gICAgICAgIHNlc3Npb25UeXBlOiBTZXNzaW9uVHlwZSxcbiAgICAgICAgc2Vzc2lvbkZlYXR1cmVzOiBzdHJpbmdbXVxuICAgICkge1xuICAgICAgICByZXR1cm4gbmV3IERhdGFiYXNlKHtcbiAgICAgICAgICAgIG5hbWU6IGR0by5uYW1lLFxuICAgICAgICAgICAgZmlsZU5hbWU6IGR0by5maWxlTmFtZSxcbiAgICAgICAgICAgIGljb246IHsgdmVyc2lvbjogMSwgaWNvbkltYWdlRGF0YTogZHRvLmljb25JbWFnZURhdGEgfSxcbiAgICAgICAgICAgIHJvb3Q6IEdyb3VwLmZyb21LUFJQQ0dyb3VwRFRPKGR0by5yb290LCBkdG8uZmlsZU5hbWUpLFxuICAgICAgICAgICAgYWN0aXZlOiBkdG8uYWN0aXZlLFxuICAgICAgICAgICAgc2Vzc2lvblR5cGUsXG4gICAgICAgICAgICBzZXNzaW9uRmVhdHVyZXNcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIiwiZXhwb3J0IGZ1bmN0aW9uICQoc2VsZWN0b3I6IGFueSwgZWw/OiBEb2N1bWVudCkge1xuICAgIGlmICghZWwpIGVsID0gZG9jdW1lbnQ7XG4gICAgcmV0dXJuIGVsLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xufVxuZXhwb3J0IGZ1bmN0aW9uICQkKHNlbGVjdG9yOiBhbnksIGVsPzogRG9jdW1lbnQpIHtcbiAgICBpZiAoIWVsKSBlbCA9IGRvY3VtZW50O1xuICAgIHJldHVybiBlbC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiAkU1RSKHN0cjogc3RyaW5nKSB7XG4gICAgY29uc3QgbXNnID0gYnJvd3Nlci5pMThuLmdldE1lc3NhZ2Uoc3RyKTtcbiAgICByZXR1cm4gbXNnIHx8IHN0cjtcbn1cbmV4cG9ydCBmdW5jdGlvbiAkU1RSRihzdHI6IHN0cmluZywgc3ViczogYW55KSB7XG4gICAgY29uc3QgbXNnID0gYnJvd3Nlci5pMThuLmdldE1lc3NhZ2Uoc3RyLCBzdWJzKTtcbiAgICByZXR1cm4gbXNnIHx8IHN0cjtcbn1cbiIsImV4cG9ydCBjbGFzcyBMb2NhdG9yIHtcbiAgICAvLyBIVE1MIGlkIGF0dHJpYnV0ZVxuICAgIGlkOiBzdHJpbmc7XG5cbiAgICAvLyBIVE1MIG5hbWUgYXR0cmlidXRlXG4gICAgbmFtZTogc3RyaW5nO1xuXG4gICAgLy8gSFRNTCBpbnB1dCB0eXBlXG4gICAgdHlwZTogc3RyaW5nO1xuXG4gICAgLy8gSFRNTCBET00gc2VsZWN0IHF1ZXJ5XG4gICAgcXVlcnk/OiBzdHJpbmc7XG5cbiAgICAvLyBWaXNpYmxlIGFuZCBhY2Nlc3NpYmlsaXR5IGxhYmVsc1xuICAgIGxhYmVscz86IHN0cmluZ1tdO1xuXG4gICAgLy8gQW55IGF1dG9jb21wbGV0ZSB2YWx1ZXMgd2UgZm91bmQsIG9yIHJlcXVpcmUsIGluIHRoZSBET01cbiAgICBhdXRvY29tcGxldGVWYWx1ZXM/OiBzdHJpbmdbXTtcblxuICAgIGNvbnN0cnVjdG9yKGxvY2F0b3I6IFBhcnRpYWw8TG9jYXRvcj4pIHtcbiAgICAgICAgdGhpcy5pZCA9IGxvY2F0b3IuaWQgfHwgXCJcIjtcbiAgICAgICAgdGhpcy5uYW1lID0gbG9jYXRvci5uYW1lIHx8IFwiXCI7XG4gICAgICAgIHRoaXMudHlwZSA9IGxvY2F0b3IudHlwZSB8fCBcIlwiO1xuICAgICAgICB0aGlzLnF1ZXJ5ID0gbG9jYXRvci5xdWVyeTtcbiAgICAgICAgdGhpcy5sYWJlbHMgPSBsb2NhdG9yLmxhYmVscztcbiAgICAgICAgdGhpcy5hdXRvY29tcGxldGVWYWx1ZXMgPSBsb2NhdG9yLmF1dG9jb21wbGV0ZVZhbHVlcztcbiAgICB9XG5cbiAgICAvL1RPRE86NDogVGhpbmdzIGxpa2UgTWF4TGVuZ3RoIHRoYXQgY2FuIGJlIHVzZWQgdG8gYm90aCBoZWxwIGlkZW50aWZ5IHRoZSBmaWVsZCBhbmQgZ2VuZXJhdGUgbmV3IHZhbHVlcy9wYXNzd29yZHNcbn1cbiIsImltcG9ydCB7IFNlc3Npb25UeXBlIH0gZnJvbSBcIi4vU2Vzc2lvblR5cGVcIjtcblxuZXhwb3J0IGNsYXNzIFBhc3N3b3JkUHJvZmlsZUR0byB7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIHNlc3Npb25UeXBlOiBTZXNzaW9uVHlwZTtcbn1cblxuZXhwb3J0IGNsYXNzIERhdGFiYXNlRHRvIHtcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgZmlsZU5hbWU/OiBzdHJpbmc7XG4gICAgaWNvbkltYWdlRGF0YTogc3RyaW5nO1xuICAgIHJvb3Q6IEdyb3VwRHRvO1xuICAgIGFjdGl2ZT86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBjbGFzcyBEYXRhYmFzZVN1bW1hcnlEdG8ge1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBmaWxlTmFtZT86IHN0cmluZztcbiAgICBpY29uSW1hZ2VEYXRhOiBzdHJpbmc7XG4gICAgcm9vdDogR3JvdXBTdW1tYXJ5RHRvO1xuICAgIGFjdGl2ZT86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBjbGFzcyBHcm91cFN1bW1hcnlEdG8ge1xuICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgdW5pcXVlSUQ6IHN0cmluZztcbiAgICBpY29uSW1hZ2VEYXRhOiBzdHJpbmc7XG4gICAgcGF0aDogc3RyaW5nO1xufVxuXG5leHBvcnQgY2xhc3MgR3JvdXBEdG8ge1xuICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgdW5pcXVlSUQ6IHN0cmluZztcbiAgICBpY29uSW1hZ2VEYXRhOiBzdHJpbmc7XG4gICAgcGF0aDogc3RyaW5nO1xuICAgIGNoaWxkTGlnaHRFbnRyaWVzOiBFbnRyeVN1bW1hcnlEdG9bXTtcbiAgICBjaGlsZEdyb3VwczogR3JvdXBEdG9bXTtcbiAgICAvL2NoaWxkRW50cmllczogRW50cnlEdG9bXSAtIHRoaXMgaXMgb25seSBuZWVkZWQgaWYgd2UgZXZlciByZXF1ZXN0IEdldEFsbERhdGFiYXNlcyh0cnVlKSBidXQgS2VlIGN1cnJlbnRseSBoYXMgbm8gbmVlZCBmb3IgdGhpcyBLUFJQQyBmZWF0dXJlXG59XG5cbmV4cG9ydCBlbnVtIFBsYWNlaG9sZGVySGFuZGxpbmcge1xuICAgIERlZmF1bHQgPSBcIkRlZmF1bHRcIixcbiAgICBFbmFibGVkID0gXCJFbmFibGVkXCIsXG4gICAgRGlzYWJsZWQgPSBcIkRpc2FibGVkXCJcbn1cblxuZXhwb3J0IGVudW0gTWF0Y2hBY2N1cmFjeUVudW0ge1xuICAgIC8vIEJlc3QgPSBOb24tVVJMIG1hdGNoIChpLmUuIHdlIG1hdGNoZWQgYnkgVVVJRCBpbnN0ZWFkKVxuICAgIC8vIEJlc3QgPSBSZWdleCBtYXRjaCAoaXQgaXMgaW1wb3NzaWJsZSBmb3IgdXMgdG8gaW5mZXIgaG93XG4gICAgLy8gYWNjdXJhdGUgYSByZWdleCBtYXRjaCBpcyBpbiBjb21wYXJpc29uIHdpdGggb3RoZXIgY2xhc3Nlc1xuICAgIC8vIG9mIG1hdGNoIHNvIHdlIGFsd2F5cyB0cmVhdCBpdCBhcyB0aGUgYmVzdCBwb3NzaWJsZSBtYXRjaFxuICAgIC8vIGV2ZW4gaWYgdGhlIHJlZ2V4IGl0c2VsZiBpcyB2ZXJ5IGxvb3NlKVxuICAgIC8vIEJlc3QgPSBTYW1lIFVSTCBpbmNsdWRpbmcgcXVlcnkgc3RyaW5nXG5cbiAgICAvLyBDbG9zZSA9IFNhbWUgVVJMIGV4Y2x1ZGluZyBxdWVyeSBzdHJpbmdcblxuICAgIC8vIEhvc3RuYW1lQW5kUG9ydCA9IFNhbWUgaG9zdG5hbWUgYW5kIHBvcnRcblxuICAgIC8vIEhvc3RuYW1lID0gU2FtZSBob3N0bmFtZSAoZG9tYWluICsgc3ViZG9tYWlucylcblxuICAgIC8vIERvbWFpbiA9IFNhbWUgZG9tYWluXG5cbiAgICAvLyBOb25lID0gTm8gbWF0Y2ggKGUuZy4gd2hlbiB3ZSBhcmUgYmVpbmcgYXNrZWQgdG8gcmV0dXJuIGFsbCBlbnRyaWVzKVxuXG4gICAgQmVzdCA9IDUwLFxuICAgIENsb3NlID0gNDAsXG4gICAgSG9zdG5hbWVBbmRQb3J0ID0gMzAsXG4gICAgSG9zdG5hbWUgPSAyMCxcbiAgICBEb21haW4gPSAxMCxcbiAgICBOb25lID0gMFxufVxuXG5leHBvcnQgY2xhc3MgRW50cnlEdG8ge1xuICAgIGRiOiBEYXRhYmFzZUR0bztcbiAgICBwYXJlbnQ6IEdyb3VwU3VtbWFyeUR0bztcbiAgICBpY29uSW1hZ2VEYXRhOiBzdHJpbmc7XG4gICAgYWx3YXlzQXV0b0ZpbGw6IGJvb2xlYW47XG4gICAgYWx3YXlzQXV0b1N1Ym1pdDogYm9vbGVhbjtcbiAgICBuZXZlckF1dG9GaWxsOiBib29sZWFuO1xuICAgIG5ldmVyQXV0b1N1Ym1pdDogYm9vbGVhbjtcbiAgICBwcmlvcml0eTogbnVtYmVyO1xuICAgIHVSTHM6IHN0cmluZ1tdO1xuICAgIG1hdGNoQWNjdXJhY3k6IG51bWJlcjtcbiAgICBoVFRQUmVhbG06IHN0cmluZztcbiAgICB1bmlxdWVJRDogc3RyaW5nO1xuICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgZm9ybUZpZWxkTGlzdDogRmllbGREdG9bXTtcbn1cblxuZXhwb3J0IGNsYXNzIEVudHJ5U3VtbWFyeUR0byB7XG4gICAgaWNvbkltYWdlRGF0YTogc3RyaW5nO1xuICAgIHVSTHM6IHN0cmluZ1tdO1xuICAgIHVuaXF1ZUlEOiBzdHJpbmc7XG4gICAgdGl0bGU6IHN0cmluZztcbiAgICB1c2VybmFtZVZhbHVlOiBzdHJpbmc7XG4gICAgdXNlcm5hbWVOYW1lOiBzdHJpbmc7XG59XG5cbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpjbGFzcy1uYW1lXG5leHBvcnQgY2xhc3MgRmllbGREdG8ge1xuICAgIGRpc3BsYXlOYW1lOiBzdHJpbmc7XG5cbiAgICAvLyBcIm5hbWVcIiBhdHRyaWJ1dGUgb24gdGhlIEhUTUwgZm9ybSBlbGVtZW50XG4gICAgbmFtZTogc3RyaW5nO1xuXG4gICAgLy8gXCJ2YWx1ZVwiIGF0dHJpYnV0ZSBvbiB0aGUgSFRNTCBmb3JtIGVsZW1lbnRcbiAgICB2YWx1ZTogc3RyaW5nO1xuXG4gICAgLy8gXCJpZFwiIGF0dHJpYnV0ZSBvbiB0aGUgSFRNTCBmb3JtIGVsZW1lbnRcbiAgICBpZDogc3RyaW5nO1xuXG4gICAgLy8gXCJ0eXBlXCIgYXR0cmlidXRlIG9uIHRoZSBIVE1MIGZvcm0gZWxlbWVudFxuICAgIHR5cGU6IEZvcm1GaWVsZFR5cGVEVE87XG5cbiAgICBwYWdlOiBudW1iZXI7XG59XG5cbmV4cG9ydCBlbnVtIEZvcm1GaWVsZFR5cGVEVE8ge1xuICAgIHJhZGlvID0gXCJGRlRyYWRpb1wiLFxuICAgIHVzZXJuYW1lID0gXCJGRlR1c2VybmFtZVwiLFxuICAgIHRleHQgPSBcIkZGVHRleHRcIixcbiAgICBwYXNzd29yZCA9IFwiRkZUcGFzc3dvcmRcIixcbiAgICBzZWxlY3QgPSBcIkZGVHNlbGVjdFwiLFxuICAgIGNoZWNrYm94ID0gXCJGRlRjaGVja2JveFwiXG59XG4iLCJpbXBvcnQgeyB1dGlscyB9IGZyb20gXCIuLi91dGlsc1wiO1xuaW1wb3J0IHsgTG9jYXRvciB9IGZyb20gXCIuL0xvY2F0b3JcIjtcbmltcG9ydCB7IEZpZWxkRHRvLCBGb3JtRmllbGRUeXBlRFRPIH0gZnJvbSBcIi4vS1BSUENEVE9zXCI7XG5cbmV4cG9ydCB0eXBlIEZpZWxkVHlwZSA9IFwicGFzc3dvcmRcIiB8IFwidGV4dFwiIHwgXCJleGlzdGluZ1wiIHwgXCJib29sZWFuXCIgfCBcIm90cFwiIHwgXCJzb21lLWNoYXJzXCI7XG5cbmV4cG9ydCBjbGFzcyBGaWVsZCB7XG4gICAgLy8gVW5pcXVlIElEIHRoYXQgd2UgY2FuIHVzZSB0byBoZWxwIFVJIG9wZXJhdGlvbnMgYW5kIGlkZW50aWZpY2F0aW9uIHdoZW4gdGhlcmUgaXMgbm8ga25vd24gbmFtZSBmb3IgdGhpcyBmaWVsZC5cbiAgICAvLyBBbHNvIG1heSBiZSB1c2VmdWwgaW4gZnV0dXJlIGZvciBtdWx0aXBsZS1wYWdlIHJlY29uZmlndXJhdGlvbiBvciBwZXItYnJvd3NlciBmaWVsZCBjb25maWd1cmF0aW9uIG92ZXJyaWRlcz9cbiAgICByZWFkb25seSB1dWlkOiBzdHJpbmc7XG5cbiAgICAvLyB2aXN1YWwgaWRlbnRpZmllciBmb3IgdGhlIGZpZWxkLiBNYXkgYmUgc3BlY2lmaWVkIGJ5IHRoZSB1c2VyIG9yIGluZmVycmVkIGZyb21cbiAgICAvLyBlaXRoZXIgZGVmYXVsdCBFbnRyeSBkYXRhICh1c2VybmFtZS9wYXNzd29yZC9PVFApIG9yIGZvcm0gZmllbGQgbGFiZWwgb3IgbmFtZSBhdHRyaWJ1dGVcbiAgICByZWFkb25seSBuYW1lOiBzdHJpbmc7XG5cbiAgICAvLyBUaGUgdmFsdWUgd2UnbGwgZmlsbCBpbnRvIHRoZSBmb3JtLlxuICAgIC8vIEZvciBleGlzdGluZyBkZXRlcm1pbmVzIHdoaWNoIG9wdGlvbiB0byBhY3RpdmF0ZS5cbiAgICAvLyBGb3IgYm9vbGVhbiBkZXRlcm1pbmVzIHdoZXRoZXIgdG8gYWN0aXZhdGUgb3IgZGVhY3RpdmF0ZSAodG8gaWdub3JlLCBkZWxldGUgdGhlIGZpZWxkIHJlY29yZClcbiAgICAvLyBGb3IgT1RQLCBuZWVkIHRvIHdvcmsgb3V0IHdoZXRoZXIgd2Ugd2lsbCBoYXZlIHRvIHRyYW5zZmVyIHRoZSBzZWNyZXRzIGFuZCByZWNhbGN1bGF0ZSBpbiB0aGUgYnJvd3NlciBvciBqdXN0IHRyZWF0IGFzIHN0YW5kYXJkIHZhbHVlXG4gICAgcmVhZG9ubHkgdmFsdWU6IHN0cmluZztcblxuICAgIC8vIHR5cGUgb2YgZGF0YSB0aGlzIGZpZWxkIHJlcHJlc2VudHMuIFRoZXJlJ3Mgbm8gMTAwJSB3YXkgdG8gbWF0Y2ggdGhpcyB0byB0aGUgdHlwZSBvZiBIVE1MIGZvcm0gZWxlbWVudCBidXQgaXQncyBvZnRlbiBsb2dpY2FsLlxuICAgIC8vIEUuZy4gcGFzc3dvcmQgZ29lcyBpbnRvIHBhc3N3b3JkIGZpZWxkcyB1bmxlc3MgdXNlciBleHBsaWNpdGx5IHJlLWNvbmZpZ3VyZXMgdGhhdDsgZXhpc3Rpbmcgd291bGQgdHlwaWNhbGx5IG1hdGNoIHNvbWV0aGluZ1xuICAgIC8vIGxpa2UgYSByYWRpbyBidXR0b24gb3Igc2VsZWN0IG9wdGlvbiBhbHJlYWR5IHByZXNlbnQgb24gdGhlIEhUTUwgZm9ybTsgYm9vbGVhbiB3b3VsZCBtYXRjaCBhIGNoZWNrYm94LlxuICAgIHJlYWRvbmx5IHR5cGU6IEZpZWxkVHlwZTtcblxuICAgIC8vIEhvdyB3ZSBjYW4gZmluZCB0aGUgY29ycmVjdCB0YXJnZXQgaW4gdGhlIEhUTUwuXG4gICAgcmVhZG9ubHkgbG9jYXRvcnM6IExvY2F0b3JbXTtcblxuICAgIC8vIHRyYWNrcyB0aGUgbW9zdCByZWNlbnQgdmFsdWUgd2Ugd2FudCB0byByZXNldCB0byBpbiBjYXNlcyB3aGVyZSB0aGUgdXNlciBoYXMgdGhhdCBwb3NzaWJpbGl0eVxuICAgIHJlYWRvbmx5IHJlc2V0VmFsdWU6IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKGZpZWxkOiBQYXJ0aWFsPEZpZWxkPikge1xuICAgICAgICB0aGlzLm5hbWUgPSBmaWVsZC5uYW1lIHx8IFwiXCI7XG4gICAgICAgIHRoaXMudmFsdWUgPSBmaWVsZC52YWx1ZSB8fCBcIlwiO1xuICAgICAgICB0aGlzLnJlc2V0VmFsdWUgPSBmaWVsZC5yZXNldFZhbHVlIHx8IFwiXCI7XG4gICAgICAgIHRoaXMudXVpZCA9IGZpZWxkLnV1aWQgfHwgdXRpbHMubmV3R1VJRCgpO1xuICAgICAgICB0aGlzLnR5cGUgPSBmaWVsZC50eXBlIHx8IFwidGV4dFwiO1xuICAgICAgICB0aGlzLmxvY2F0b3JzID0gZmllbGQubG9jYXRvcnMgfHwgW107XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ2V0RGlzcGxheVZhbHVlSW50ZXJuYWwoXG4gICAgICAgIGZpZWxkOiBGaWVsZCxcbiAgICAgICAgcmV2ZWFsUGFzc3dvcmRzOiBib29sZWFuLFxuICAgICAgICByZXBsYWNlbWVudElmUHJvdGVjdGVkOiBzdHJpbmdcbiAgICApIHtcbiAgICAgICAgaWYgKGZpZWxkLnR5cGUgPT09IFwiYm9vbGVhblwiKSB7XG4gICAgICAgICAgICByZXR1cm4gZmllbGQudmFsdWUgPT09IFwiS0VFRk9YX0NIRUNLRURfRkxBR19UUlVFXCIgPyAkU1RSKFwiZW5hYmxlZFwiKSA6ICRTVFIoXCJkaXNhYmxlZFwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmaWVsZC50eXBlID09PSBcInBhc3N3b3JkXCIgJiYgIXJldmVhbFBhc3N3b3Jkc1xuICAgICAgICAgICAgICAgID8gcmVwbGFjZW1lbnRJZlByb3RlY3RlZFxuICAgICAgICAgICAgICAgIDogZmllbGQudmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0RGlzcGxheVZhbHVlKGZpZWxkOiBGaWVsZCwgcmV2ZWFsUGFzc3dvcmRzOiBib29sZWFuKSB7XG4gICAgICAgIHJldHVybiBGaWVsZC5nZXREaXNwbGF5VmFsdWVJbnRlcm5hbChcbiAgICAgICAgICAgIGZpZWxkLFxuICAgICAgICAgICAgcmV2ZWFsUGFzc3dvcmRzLFxuICAgICAgICAgICAgXCIqXCIucmVwZWF0KGZpZWxkLnZhbHVlLmxlbmd0aClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0RGlzcGxheU5hbWUoZmllbGQ6IEZpZWxkKSB7XG4gICAgICAgIGlmIChmaWVsZC5uYW1lID09PSBcIktlZVBhc3MgdXNlcm5hbWVcIikge1xuICAgICAgICAgICAgcmV0dXJuICRTVFIoXCJ1c2VybmFtZVwiKTtcbiAgICAgICAgfSBlbHNlIGlmIChmaWVsZC5uYW1lID09PSBcIktlZVBhc3MgcGFzc3dvcmRcIikge1xuICAgICAgICAgICAgcmV0dXJuICRTVFIoXCJwYXNzd29yZFwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmaWVsZC5uYW1lID8gZmllbGQubmFtZSA6IFwiWyBcIiArICRTVFIoXCJub19uYW1lXCIpICsgXCIgXVwiO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3RhdGljIGdldERpc3BsYXlUb29sdGlwKGZpZWxkOiBGaWVsZCwgcmV2ZWFsUGFzc3dvcmRzOiBib29sZWFuKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICBGaWVsZC5nZXREaXNwbGF5TmFtZShmaWVsZCkgK1xuICAgICAgICAgICAgXCI6IFwiICtcbiAgICAgICAgICAgIEZpZWxkLmdldERpc3BsYXlWYWx1ZUludGVybmFsKGZpZWxkLCByZXZlYWxQYXNzd29yZHMsICRTVFIoXCJjbGlja190b19yZXZlYWxfaGlkZVwiKSlcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgdHlwZUZyb21ET010eXBlKGRvbVR5cGU6IHN0cmluZyk6IEZpZWxkVHlwZSB7XG4gICAgICAgIC8vIFdlIGNhbid0IGtub3cgZXZlcnkgdHlwZSB0aGF0IG1heSBleGlzdCBpbiBmdXR1cmUgc28gYXNzdW1lOlxuICAgICAgICAvLyAxLiB1bmtub3duIHR5cGVzIG11c3QgYmUgdGV4dFxuICAgICAgICAvLyAyLiB3ZSB3b24ndCBiZSBhc2tlZCB0byBoYW5kbGUgdHlwZXMgZm9yIGlycmVsZXZhbnQgZWxlbWVudHMgc3VjaCBhcyBidXR0b25zXG4gICAgICAgIHN3aXRjaCAoZG9tVHlwZSkge1xuICAgICAgICAgICAgY2FzZSBcInBhc3N3b3JkXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwicGFzc3dvcmRcIjtcbiAgICAgICAgICAgIGNhc2UgXCJyYWRpb1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcImV4aXN0aW5nXCI7XG4gICAgICAgICAgICBjYXNlIFwiY2hlY2tib3hcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJib29sZWFuXCI7XG4gICAgICAgICAgICBjYXNlIFwic2VsZWN0LW9uZVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcImV4aXN0aW5nXCI7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBcInRleHRcIjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIEJ5IGNvbnZlbnRpb24gdGhlIGZpcnN0IG5vbi1wYXNzd29yZCBpdGVtIHdpbGwgYmUgdGhlIHVzZXJuYW1lIGFuZCB0aGUgcGFzc3dvcmQgd2lsbCBiZSBlaXRoZXIgMXN0IG9yIDJuZCBpbiB0aGUgbGlzdFxuICAgIHN0YXRpYyBjb21iaW5lRG9tRmllbGRMaXN0cyh1c2VybmFtZUluZGV4OiBudW1iZXIsIG90aGVyRmllbGRzOiBGaWVsZFtdLCBwYXNzd29yZHM6IEZpZWxkW10pIHtcbiAgICAgICAgY29uc3QgZmllbGRzOiBGaWVsZFtdID0gW107XG4gICAgICAgIGlmICh1c2VybmFtZUluZGV4ID49IDAgJiYgb3RoZXJGaWVsZHNbdXNlcm5hbWVJbmRleF0pIHtcbiAgICAgICAgICAgIGZpZWxkcy5wdXNoKG90aGVyRmllbGRzW3VzZXJuYW1lSW5kZXhdKTtcbiAgICAgICAgfVxuICAgICAgICBwYXNzd29yZHMuZm9yRWFjaChmID0+IHtcbiAgICAgICAgICAgIGZpZWxkcy5wdXNoKGYpO1xuICAgICAgICB9KTtcbiAgICAgICAgb3RoZXJGaWVsZHMuZm9yRWFjaCgoZiwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGlmIChpbmRleCAhPT0gdXNlcm5hbWVJbmRleCkge1xuICAgICAgICAgICAgICAgIGZpZWxkcy5wdXNoKGYpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZpZWxkcztcbiAgICB9XG5cbiAgICBzdGF0aWMgZnJvbURPTShlbGVtZW50OiBhbnksIGRvbVR5cGU6IHN0cmluZywgdmFsdWU6IHN0cmluZykge1xuICAgICAgICBjb25zdCBsYWJlbHMgPSBjb2xsZWN0TGFiZWxzKGVsZW1lbnQpO1xuICAgICAgICByZXR1cm4gbmV3IEZpZWxkKHtcbiAgICAgICAgICAgIHV1aWQ6IHV0aWxzLm5ld0dVSUQoKSxcbiAgICAgICAgICAgIG5hbWU6IGxhYmVscyAmJiBsYWJlbHMubGVuZ3RoID8gbGFiZWxzWzBdIDogZWxlbWVudC5uYW1lLFxuICAgICAgICAgICAgbG9jYXRvcnM6IFtcbiAgICAgICAgICAgICAgICBuZXcgTG9jYXRvcih7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGVsZW1lbnQubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQuaWQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGRvbVR5cGUsXG4gICAgICAgICAgICAgICAgICAgIGxhYmVscyxcbiAgICAgICAgICAgICAgICAgICAgYXV0b2NvbXBsZXRlVmFsdWVzOiBjb2xsZWN0QXV0b2NvbXBsZXRlVmFsdWVzKGVsZW1lbnQpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgIHR5cGU6IEZpZWxkLnR5cGVGcm9tRE9NdHlwZShkb21UeXBlKVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZnJvbUtQUlBDRmllbGREVE8oZjogRmllbGREdG8pIHtcbiAgICAgICAgbGV0IHR5cGU6IEZpZWxkVHlwZSA9IFwidGV4dFwiO1xuICAgICAgICBsZXQgbG9jYXRvclR5cGUgPSBcInRleHRcIjtcblxuICAgICAgICBzd2l0Y2ggKGYudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBGb3JtRmllbGRUeXBlRFRPLnBhc3N3b3JkOlxuICAgICAgICAgICAgICAgIHR5cGUgPSBcInBhc3N3b3JkXCI7XG4gICAgICAgICAgICAgICAgbG9jYXRvclR5cGUgPSBcInBhc3N3b3JkXCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEZvcm1GaWVsZFR5cGVEVE8ucmFkaW86XG4gICAgICAgICAgICAgICAgdHlwZSA9IFwiZXhpc3RpbmdcIjtcbiAgICAgICAgICAgICAgICBsb2NhdG9yVHlwZSA9IFwicmFkaW9cIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgRm9ybUZpZWxkVHlwZURUTy5jaGVja2JveDpcbiAgICAgICAgICAgICAgICB0eXBlID0gXCJib29sZWFuXCI7XG4gICAgICAgICAgICAgICAgbG9jYXRvclR5cGUgPSBcImNoZWNrYm94XCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEZvcm1GaWVsZFR5cGVEVE8uc2VsZWN0OlxuICAgICAgICAgICAgICAgIHR5cGUgPSBcImV4aXN0aW5nXCI7XG4gICAgICAgICAgICAgICAgbG9jYXRvclR5cGUgPSBcInNlbGVjdFwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBGb3JtRmllbGRUeXBlRFRPLnVzZXJuYW1lOlxuICAgICAgICAgICAgICAgIHR5cGUgPSBcInRleHRcIjtcbiAgICAgICAgICAgICAgICBsb2NhdG9yVHlwZSA9IFwidGV4dFwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBGb3JtRmllbGRUeXBlRFRPLnRleHQ6XG4gICAgICAgICAgICAgICAgdHlwZSA9IFwidGV4dFwiO1xuICAgICAgICAgICAgICAgIGxvY2F0b3JUeXBlID0gXCJ0ZXh0XCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3IEZpZWxkKHtcbiAgICAgICAgICAgIG5hbWU6IGYuZGlzcGxheU5hbWUgfHwgZi5uYW1lLFxuICAgICAgICAgICAgdXVpZDogdXRpbHMubmV3R1VJRCgpLFxuICAgICAgICAgICAgdmFsdWU6IGYudmFsdWUsXG4gICAgICAgICAgICByZXNldFZhbHVlOiBmLnZhbHVlLFxuICAgICAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgICAgIGxvY2F0b3JzOiBbXG4gICAgICAgICAgICAgICAgbmV3IExvY2F0b3Ioe1xuICAgICAgICAgICAgICAgICAgICBpZDogZi5pZCxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogZi5uYW1lLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBsb2NhdG9yVHlwZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHN0YXRpYyB0b0tQUlBDRmllbGREVE8oZjogRmllbGQsIGlzVXNlcm5hbWU6IGJvb2xlYW4pIHtcbiAgICAgICAgbGV0IGZmdDogRm9ybUZpZWxkVHlwZURUTztcblxuICAgICAgICBzd2l0Y2ggKGYubG9jYXRvcnNbMF0udHlwZSkge1xuICAgICAgICAgICAgY2FzZSBcInBhc3N3b3JkXCI6XG4gICAgICAgICAgICAgICAgZmZ0ID0gRm9ybUZpZWxkVHlwZURUTy5wYXNzd29yZDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJyYWRpb1wiOlxuICAgICAgICAgICAgICAgIGZmdCA9IEZvcm1GaWVsZFR5cGVEVE8ucmFkaW87XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiY2hlY2tib3hcIjpcbiAgICAgICAgICAgICAgICBmZnQgPSBGb3JtRmllbGRUeXBlRFRPLmNoZWNrYm94O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInNlbGVjdC1vbmVcIjpcbiAgICAgICAgICAgICAgICBmZnQgPSBGb3JtRmllbGRUeXBlRFRPLnNlbGVjdDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgZmZ0ID0gaXNVc2VybmFtZSA/IEZvcm1GaWVsZFR5cGVEVE8udXNlcm5hbWUgOiBGb3JtRmllbGRUeXBlRFRPLnRleHQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZGlzcGxheU5hbWU6IGYubmFtZSxcbiAgICAgICAgICAgIGlkOiBmLmxvY2F0b3JzWzBdLmlkLFxuICAgICAgICAgICAgbmFtZTogZi5sb2NhdG9yc1swXS5uYW1lLFxuICAgICAgICAgICAgdHlwZTogZmZ0LFxuICAgICAgICAgICAgdmFsdWU6IGYudmFsdWUsXG4gICAgICAgICAgICBwYWdlOiAtMVxuICAgICAgICB9IGFzIEZpZWxkRHRvO1xuICAgIH1cbn1cblxuLy8gTWlnaHQgYmUgb3RoZXIgZWxlbWVudCB0eXBlcyBidXQgbWFpbiB0aGluZyBpcyB0aGV5IGhhdmUgdGhlIGxhYmVscyBwcm9wZXJ0eVxuZnVuY3Rpb24gY29sbGVjdExhYmVscyhlbGVtZW50OiBIVE1MSW5wdXRFbGVtZW50IHwgSFRNTFNlbGVjdEVsZW1lbnQpIHtcbiAgICBjb25zdCBsYWJlbHM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3QgbGFiZWxzQ291bnQgPSBlbGVtZW50LmxhYmVscz8ubGVuZ3RoIHx8IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsYWJlbHNDb3VudDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGxhYmVsID0gZWxlbWVudC5sYWJlbHNbaV07XG4gICAgICAgIGlmIChsYWJlbD8uaW5uZXJUZXh0KSBsYWJlbHMucHVzaChsYWJlbC5pbm5lclRleHQpO1xuICAgIH1cbiAgICBjb25zdCBhcmlhTGFiZWwgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIik/LnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKGFyaWFMYWJlbCkgbGFiZWxzLnB1c2goYXJpYUxhYmVsKTtcbiAgICBjb25zdCBhcmlhTGFiZWxJZHM6IHN0cmluZ1tdID0gW107XG4gICAgZWxlbWVudFxuICAgICAgICAuZ2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbGxlZGJ5XCIpXG4gICAgICAgID8udHJpbSgpXG4gICAgICAgIC5zcGxpdChcIiBcIilcbiAgICAgICAgLmZvckVhY2goaWQgPT4ge1xuICAgICAgICAgICAgaWYgKGlkKSBhcmlhTGFiZWxJZHMucHVzaChpZCk7XG4gICAgICAgIH0pO1xuICAgIGVsZW1lbnRcbiAgICAgICAgLmdldEF0dHJpYnV0ZShcImFyaWEtZGVzY3JpYmVkYnlcIilcbiAgICAgICAgPy50cmltKClcbiAgICAgICAgLnNwbGl0KFwiIFwiKVxuICAgICAgICAuZm9yRWFjaChpZCA9PiB7XG4gICAgICAgICAgICBpZiAoaWQpIGFyaWFMYWJlbElkcy5wdXNoKGlkKTtcbiAgICAgICAgfSk7XG4gICAgYXJpYUxhYmVsSWRzLmZvckVhY2goaWQgPT4ge1xuICAgICAgICBjb25zdCBsYWJlbEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XG4gICAgICAgIGlmIChsYWJlbEVsZW1lbnQ/LmlubmVyVGV4dCkgbGFiZWxzLnB1c2gobGFiZWxFbGVtZW50LmlubmVyVGV4dCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGxhYmVscy5sZW5ndGggPyBsYWJlbHMgOiB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIGNvbGxlY3RBdXRvY29tcGxldGVWYWx1ZXMoZWxlbWVudDogSFRNTElucHV0RWxlbWVudCB8IEhUTUxTZWxlY3RFbGVtZW50KSB7XG4gICAgY29uc3QgdmFsdWVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGVsZW1lbnQuYXR0cmlidXRlc1tcImF1dG9jb21wbGV0ZVwiXT8udmFsdWVcbiAgICAgICAgPy50cmltKClcbiAgICAgICAgLnNwbGl0KFwiIFwiKVxuICAgICAgICAuZm9yRWFjaCh2ID0+IHtcbiAgICAgICAgICAgIGlmICh2KSB2YWx1ZXMucHVzaCh2LnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICB9KTtcbiAgICByZXR1cm4gdmFsdWVzLmxlbmd0aCA/IHZhbHVlcyA6IHVuZGVmaW5lZDtcbn1cbiIsImltcG9ydCB7IEljb24gfSBmcm9tIFwiLi9JY29uXCI7XG5pbXBvcnQgeyB1dGlscyB9IGZyb20gXCIuLi91dGlsc1wiO1xuaW1wb3J0IHsgR3JvdXBTdW1tYXJ5RHRvIH0gZnJvbSBcIi4vS1BSUENEVE9zXCI7XG5pbXBvcnQgeyBHcm91cCB9IGZyb20gXCIuL0dyb3VwXCI7XG5cbmV4cG9ydCBjbGFzcyBHcm91cFN1bW1hcnkge1xuICAgIHJlYWRvbmx5IHRpdGxlOiBzdHJpbmc7XG4gICAgcmVhZG9ubHkgdXVpZDogc3RyaW5nO1xuICAgIHJlYWRvbmx5IGljb246IEljb247XG4gICAgcmVhZG9ubHkgcGF0aDogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IoZzogUGFydGlhbDxHcm91cFN1bW1hcnk+KSB7XG4gICAgICAgIHRoaXMudGl0bGUgPSBnLnRpdGxlIHx8IFwiXCI7XG4gICAgICAgIHRoaXMudXVpZCA9IGcudXVpZCB8fCB1dGlscy5uZXdHVUlEKCk7XG4gICAgICAgIHRoaXMuaWNvbiA9IGcuaWNvbiB8fCB7IHZlcnNpb246IDEsIGljb25JbWFnZURhdGE6IFwiXCIgfTtcbiAgICAgICAgdGhpcy5wYXRoID0gZy5wYXRoIHx8IFwiVU5LTk9XTiBQQVRIXCI7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBmcm9tS1BSUENHcm91cFN1bW1hcnlEVE8oZ3JvdXBTdW1tYXJ5RHRvOiBHcm91cFN1bW1hcnlEdG8pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBHcm91cFN1bW1hcnkoe1xuICAgICAgICAgICAgdGl0bGU6IGdyb3VwU3VtbWFyeUR0by50aXRsZSxcbiAgICAgICAgICAgIHV1aWQ6IGdyb3VwU3VtbWFyeUR0by51bmlxdWVJRCxcbiAgICAgICAgICAgIGljb246IHsgdmVyc2lvbjogMSwgaWNvbkltYWdlRGF0YTogZ3JvdXBTdW1tYXJ5RHRvLmljb25JbWFnZURhdGEgfSxcbiAgICAgICAgICAgIHBhdGg6IGdyb3VwU3VtbWFyeUR0by5wYXRoXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZnJvbUdyb3VwKGdyb3VwOiBHcm91cCkge1xuICAgICAgICByZXR1cm4gbmV3IEdyb3VwU3VtbWFyeSh7XG4gICAgICAgICAgICB0aXRsZTogZ3JvdXAudGl0bGUsXG4gICAgICAgICAgICB1dWlkOiBncm91cC51dWlkLFxuICAgICAgICAgICAgaWNvbjogZ3JvdXAuaWNvbixcbiAgICAgICAgICAgIHBhdGg6IGdyb3VwLnBhdGhcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5leHBvcnQgY29uc3QgVGVtcG9yYXJ5SURTdHJpbmcgPVxuICAgIFwiVEVNUE9SQVJZIElEIFRPIElERU5USUZZIFRISVMgQVMgQSBESVJUWSBFTlRSWSBUSEFUIERPRVNOJ1QgRVhJU1QgSU4gU09VUkNFIERBVEFCQVNFIFlFVFwiO1xuIiwiaW1wb3J0IHsgSWNvbiB9IGZyb20gXCIuL0ljb25cIjtcbmltcG9ydCB7IERhdGFiYXNlIH0gZnJvbSBcIi4vRGF0YWJhc2VcIjtcbmltcG9ydCB7IHV0aWxzIH0gZnJvbSBcIi4uL3V0aWxzXCI7XG5pbXBvcnQgeyBGaWVsZCB9IGZyb20gXCIuL0ZpZWxkXCI7XG5pbXBvcnQgeyBFbnRyeUR0bywgRm9ybUZpZWxkVHlwZURUTyB9IGZyb20gXCIuL0tQUlBDRFRPc1wiO1xuaW1wb3J0IHsgRGF0YWJhc2VTdW1tYXJ5IH0gZnJvbSBcIi4vRGF0YWJhc2VTdW1tYXJ5XCI7XG5pbXBvcnQgeyBHcm91cFN1bW1hcnkgfSBmcm9tIFwiLi9Hcm91cFN1bW1hcnlcIjtcblxuLy8gQWx0aG91Z2ggd2UgdXNlIHV1aWRzIGZvciBGaWVsZHMgYW5kIHBvc3NpYmx5IExvY2F0b3JzLCB3ZSBkb24ndCBhbGxvdyB0aGVtIHRvIGV4aXN0IG91dHNpZGUgb2YgdGhlaXIgcGFyZW50IGVudHJ5LlxuXG5leHBvcnQgY2xhc3MgRW50cnkge1xuICAgIC8vIGFycmF5IG9mIFVSTCBzdHJpbmdzIChub3JtYWxseSBqdXN0IG9uZSBpcyBuZWVkZWRcbiAgICAvLyBidXQgYSBnaXZlbiBlbnRyeSBjYW4gYmUgYXNzb2NpYXRlZCB3aXRoIG1vcmUgdGhhbiBvbmUgc2l0ZVxuICAgIC8vIG9yIHdpdGggbXVsdGlwbGUgcGFnZXMgb24gdGhhdCBzaXRlKVxuICAgIHJlYWRvbmx5IFVSTHM6IHN0cmluZ1tdO1xuXG4gICAgLy8gSG93IGFjY3VyYXRlIGlzIHRoZSBiZXN0IFVSTCBtYXRjaCBmb3IgdGhpcyBlbnRyeSAob25seSBzZXQgaWYgZW50cnlcbiAgICAvLyB3YXMgc3VwcGxpZWQgaW4gcmVzcG9uc2UgdG8gY2VydGFpbiBzZWFyY2ggcmVxdWVzdHMpLiBIaWdoZXIgPSBjbG9zZXIgbWF0Y2hcbiAgICByZWFkb25seSBtYXRjaEFjY3VyYWN5OiBudW1iZXI7XG5cbiAgICAvLyBUaGUgcmVhbG0gb2YgYSBIVFRQIGF1dGhlbnRpY2F0aW9uIHJlcXVlc3RcbiAgICByZWFkb25seSBodHRwUmVhbG06IHN0cmluZztcblxuICAgIC8vIFRoZSBpbmRleCBvZiB0aGUgb3RoZXJGaWVsZCB3aGljaCB3ZSB3aWxsIHRyZWF0IGFzIHRoZSB1c2VybmFtZSBpbiBLZWVQYXNzXG4gICAgLy8gcmVhZG9ubHkgdXNlcm5hbWVJbmRleDogbnVtYmVyO1xuXG4gICAgcmVhZG9ubHkgZmllbGRzOiBGaWVsZFtdO1xuXG4gICAgLy8gVGhlIEtlZVBhc3MgZW50cnkncyB1bmlxdWVJRCAoaWYga25vd24pXG4gICAgcmVhZG9ubHkgdXVpZDogc3RyaW5nO1xuXG4gICAgLy8gVGhlIHRpdGxlIG9mIHRoZSBLZWVQYXNzIGVudHJ5IChhdXRvLWdlbmVyYXRlZCBmcm9tIHRoZSBwYWdlIHRpdGxlIGJ5IGRlZmF1bHQsXG4gICAgLy8gb3IgdGhlIHBhZ2UgVVJMJ3MgaG9zdG5hbWUgaWYgbm8gdGl0bGUgaXMgc2V0KVxuICAgIHJlYWRvbmx5IHRpdGxlOiBzdHJpbmc7XG5cbiAgICByZWFkb25seSBpY29uOiBJY29uO1xuXG4gICAgcmVhZG9ubHkgcGFyZW50R3JvdXA6IEdyb3VwU3VtbWFyeTtcblxuICAgIHJlYWRvbmx5IGFsd2F5c0F1dG9GaWxsOiBib29sZWFuO1xuICAgIHJlYWRvbmx5IGFsd2F5c0F1dG9TdWJtaXQ6IGJvb2xlYW47XG4gICAgcmVhZG9ubHkgbmV2ZXJBdXRvRmlsbDogYm9vbGVhbjtcbiAgICByZWFkb25seSBuZXZlckF1dG9TdWJtaXQ6IGJvb2xlYW47XG5cbiAgICByZWFkb25seSBkYXRhYmFzZTogRGF0YWJhc2VTdW1tYXJ5O1xuXG4gICAgLy8gSG93IHJlbGV2YW50IHRoaXMgZW50cnkgaXMgdG8gdGhlIGN1cnJlbnQgZm9ybSBpblxuICAgIC8vIHRoZSBicm93c2VyIC0gdHJhbnNpZW50IChub3Qgc3RvcmVkIGluIEtlZVBhc3MpXG4gICAgLy9UT0RPOjQgcHV0IGFsbCBtYXRjaCBkYXRhIGludG8gYSBuZXcgb2JqZWN0P1xuICAgIHJlbGV2YW5jZVNjb3JlOiBudW1iZXI7XG4gICAgbG93RmllbGRNYXRjaFJhdGlvOiBhbnk7XG4gICAgZm9ybUluZGV4OiBudW1iZXI7XG4gICAgZW50cnlJbmRleDogbnVtYmVyO1xuICAgIGlzUHJlZmVycmVkTWF0Y2g/OiBib29sZWFuO1xuXG4gICAgY29uc3RydWN0b3IoZTogUGFydGlhbDxFbnRyeT4pIHtcbiAgICAgICAgdGhpcy5hbHdheXNBdXRvRmlsbCA9IGUuYWx3YXlzQXV0b0ZpbGwgfHwgZmFsc2U7XG4gICAgICAgIHRoaXMuYWx3YXlzQXV0b1N1Ym1pdCA9IGUuYWx3YXlzQXV0b1N1Ym1pdCB8fCBmYWxzZTtcbiAgICAgICAgdGhpcy5uZXZlckF1dG9GaWxsID0gZS5uZXZlckF1dG9GaWxsIHx8IGZhbHNlO1xuICAgICAgICB0aGlzLm5ldmVyQXV0b1N1Ym1pdCA9IGUubmV2ZXJBdXRvU3VibWl0IHx8IGZhbHNlO1xuICAgICAgICB0aGlzLlVSTHMgPSBlLlVSTHMgfHwgW107XG4gICAgICAgIHRoaXMuZmllbGRzID0gZS5maWVsZHMgfHwgW107XG4gICAgICAgIHRoaXMuaHR0cFJlYWxtID0gZS5odHRwUmVhbG0gfHwgXCJcIjtcbiAgICAgICAgdGhpcy5wYXJlbnRHcm91cCA9IGUucGFyZW50R3JvdXAgfHwgbnVsbDtcbiAgICAgICAgdGhpcy51dWlkID0gZS51dWlkIHx8IHV0aWxzLm5ld0dVSUQoKTtcbiAgICAgICAgdGhpcy50aXRsZSA9IGUudGl0bGUgfHwgXCJcIjtcbiAgICAgICAgdGhpcy5tYXRjaEFjY3VyYWN5ID0gZS5tYXRjaEFjY3VyYWN5IHx8IDA7XG4gICAgICAgIHRoaXMuaWNvbiA9IGUuaWNvbiB8fCB7IHZlcnNpb246IDEsIGljb25JbWFnZURhdGE6IFwiXCIgfTtcbiAgICAgICAgdGhpcy5kYXRhYmFzZSA9IGUuZGF0YWJhc2UgfHwgbmV3IERhdGFiYXNlKHt9KTtcbiAgICAgICAgdGhpcy5yZWxldmFuY2VTY29yZSA9IGUucmVsZXZhbmNlU2NvcmU7XG4gICAgICAgIHRoaXMubG93RmllbGRNYXRjaFJhdGlvID0gZS5sb3dGaWVsZE1hdGNoUmF0aW87XG4gICAgICAgIHRoaXMuZm9ybUluZGV4ID0gZS5mb3JtSW5kZXg7XG4gICAgICAgIHRoaXMuZW50cnlJbmRleCA9IGUuZW50cnlJbmRleDtcbiAgICAgICAgdGhpcy5pc1ByZWZlcnJlZE1hdGNoID0gZS5pc1ByZWZlcnJlZE1hdGNoO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0VXNlcm5hbWVGaWVsZChlbnRyeTogRW50cnkpIHtcbiAgICAgICAgcmV0dXJuIGVudHJ5LmZpZWxkcy5maW5kKGYgPT4gZi50eXBlID09PSBcInRleHRcIik7XG4gICAgfVxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0UGFzc3dvcmRGaWVsZChlbnRyeTogRW50cnkpIHtcbiAgICAgICAgcmV0dXJuIGVudHJ5LmZpZWxkcy5maW5kKGYgPT4gZi50eXBlID09PSBcInBhc3N3b3JkXCIpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZnJvbUtQUlBDRW50cnlEVE8oZW50cnlEdG86IEVudHJ5RHRvLCBkYjogRGF0YWJhc2VTdW1tYXJ5KSB7XG4gICAgICAgIGNvbnN0IHNvcnRlZEZpZWxkczogRmllbGRbXSA9IFtdO1xuICAgICAgICBsZXQgbWF4aW11bVBhZ2UgPSAxO1xuICAgICAgICBjb25zdCB1c2VybmFtZUluZGV4ID0gZW50cnlEdG8uZm9ybUZpZWxkTGlzdC5maW5kSW5kZXgoXG4gICAgICAgICAgICBmID0+IGYudHlwZSA9PT0gRm9ybUZpZWxkVHlwZURUTy51c2VybmFtZVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IHVuc29ydGVkRmllbGRzID0gZW50cnlEdG8uZm9ybUZpZWxkTGlzdC5tYXAoZiA9PiB7XG4gICAgICAgICAgICBpZiAoZi5wYWdlID4gbWF4aW11bVBhZ2UpIG1heGltdW1QYWdlID0gZi5wYWdlO1xuXG4gICAgICAgICAgICByZXR1cm4gRmllbGQuZnJvbUtQUlBDRmllbGREVE8oZik7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBmaXJzdFBhc3N3b3JkSW5kZXggPSB1bnNvcnRlZEZpZWxkcy5maW5kSW5kZXgoZiA9PiBmLnR5cGUgPT09IFwicGFzc3dvcmRcIik7XG5cbiAgICAgICAgaWYgKHVzZXJuYW1lSW5kZXggPiAtMSkge1xuICAgICAgICAgICAgc29ydGVkRmllbGRzLnB1c2godW5zb3J0ZWRGaWVsZHNbdXNlcm5hbWVJbmRleF0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmaXJzdFBhc3N3b3JkSW5kZXggPiAtMSkge1xuICAgICAgICAgICAgc29ydGVkRmllbGRzLnB1c2godW5zb3J0ZWRGaWVsZHNbZmlyc3RQYXNzd29yZEluZGV4XSk7XG4gICAgICAgIH1cbiAgICAgICAgdW5zb3J0ZWRGaWVsZHMuZm9yRWFjaCgoZiwgaSkgPT4ge1xuICAgICAgICAgICAgaWYgKGkgIT09IHVzZXJuYW1lSW5kZXggJiYgaSAhPT0gZmlyc3RQYXNzd29yZEluZGV4KSB7XG4gICAgICAgICAgICAgICAgc29ydGVkRmllbGRzLnB1c2goZik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGVudHJ5ID0gbmV3IEVudHJ5KHtcbiAgICAgICAgICAgIFVSTHM6IGVudHJ5RHRvLnVSTHMsXG4gICAgICAgICAgICBuZXZlckF1dG9GaWxsOiBlbnRyeUR0by5uZXZlckF1dG9GaWxsLFxuICAgICAgICAgICAgYWx3YXlzQXV0b0ZpbGw6IGVudHJ5RHRvLmFsd2F5c0F1dG9GaWxsLFxuICAgICAgICAgICAgbmV2ZXJBdXRvU3VibWl0OiBlbnRyeUR0by5uZXZlckF1dG9TdWJtaXQsXG4gICAgICAgICAgICBhbHdheXNBdXRvU3VibWl0OiBlbnRyeUR0by5hbHdheXNBdXRvU3VibWl0LFxuICAgICAgICAgICAgaWNvbjogeyB2ZXJzaW9uOiAxLCBpY29uSW1hZ2VEYXRhOiBlbnRyeUR0by5pY29uSW1hZ2VEYXRhIH0sXG4gICAgICAgICAgICBwYXJlbnRHcm91cDogR3JvdXBTdW1tYXJ5LmZyb21LUFJQQ0dyb3VwU3VtbWFyeURUTyhlbnRyeUR0by5wYXJlbnQpLFxuICAgICAgICAgICAgZGF0YWJhc2U6IGRiLFxuICAgICAgICAgICAgbWF0Y2hBY2N1cmFjeTogZW50cnlEdG8ubWF0Y2hBY2N1cmFjeSxcbiAgICAgICAgICAgIGh0dHBSZWFsbTogZW50cnlEdG8uaFRUUFJlYWxtLFxuICAgICAgICAgICAgdXVpZDogZW50cnlEdG8udW5pcXVlSUQsXG4gICAgICAgICAgICB0aXRsZTogZW50cnlEdG8udGl0bGUsXG4gICAgICAgICAgICBmaWVsZHM6IHNvcnRlZEZpZWxkc1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gZW50cnk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB0b0tQUlBDRW50cnlEVE8oZW50cnk6IEVudHJ5KSB7XG4gICAgICAgIGNvbnN0IGVudHJ5RHRvID0gbmV3IEVudHJ5RHRvKCk7XG4gICAgICAgIGVudHJ5RHRvLmFsd2F5c0F1dG9GaWxsID0gZW50cnkuYWx3YXlzQXV0b0ZpbGw7XG4gICAgICAgIGVudHJ5RHRvLmFsd2F5c0F1dG9TdWJtaXQgPSBlbnRyeS5hbHdheXNBdXRvU3VibWl0O1xuICAgICAgICBlbnRyeUR0by5mb3JtRmllbGRMaXN0ID0gZW50cnkuZmllbGRzLm1hcCgoZiwgaSkgPT4gRmllbGQudG9LUFJQQ0ZpZWxkRFRPKGYsIGkgPT09IDApKTtcbiAgICAgICAgZW50cnlEdG8uaFRUUFJlYWxtID0gZW50cnkuaHR0cFJlYWxtO1xuICAgICAgICBlbnRyeUR0by5pY29uSW1hZ2VEYXRhID0gZW50cnkuaWNvbi5pY29uSW1hZ2VEYXRhO1xuICAgICAgICBlbnRyeUR0by5uZXZlckF1dG9GaWxsID0gZW50cnkubmV2ZXJBdXRvRmlsbDtcbiAgICAgICAgZW50cnlEdG8ubmV2ZXJBdXRvU3VibWl0ID0gZW50cnkubmV2ZXJBdXRvU3VibWl0O1xuICAgICAgICBlbnRyeUR0by50aXRsZSA9IGVudHJ5LnRpdGxlO1xuICAgICAgICBlbnRyeUR0by51UkxzID0gZW50cnkuVVJMcztcbiAgICAgICAgcmV0dXJuIGVudHJ5RHRvO1xuICAgIH1cbn1cbiIsIi8qKlxuICogTWFrZSBhIG1hcCBhbmQgcmV0dXJuIGEgZnVuY3Rpb24gZm9yIGNoZWNraW5nIGlmIGEga2V5XG4gKiBpcyBpbiB0aGF0IG1hcC5cbiAqIElNUE9SVEFOVDogYWxsIGNhbGxzIG9mIHRoaXMgZnVuY3Rpb24gbXVzdCBiZSBwcmVmaXhlZCB3aXRoXG4gKiBcXC9cXCojXFxfXFxfUFVSRVxcX1xcX1xcKlxcL1xuICogU28gdGhhdCByb2xsdXAgY2FuIHRyZWUtc2hha2UgdGhlbSBpZiBuZWNlc3NhcnkuXG4gKi9cbmZ1bmN0aW9uIG1ha2VNYXAoc3RyLCBleHBlY3RzTG93ZXJDYXNlKSB7XG4gICAgY29uc3QgbWFwID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICBjb25zdCBsaXN0ID0gc3RyLnNwbGl0KCcsJyk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIG1hcFtsaXN0W2ldXSA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiBleHBlY3RzTG93ZXJDYXNlID8gdmFsID0+ICEhbWFwW3ZhbC50b0xvd2VyQ2FzZSgpXSA6IHZhbCA9PiAhIW1hcFt2YWxdO1xufVxuXG4vKipcbiAqIGRldiBvbmx5IGZsYWcgLT4gbmFtZSBtYXBwaW5nXG4gKi9cbmNvbnN0IFBhdGNoRmxhZ05hbWVzID0ge1xuICAgIFsxIC8qIFBhdGNoRmxhZ3MuVEVYVCAqL106IGBURVhUYCxcbiAgICBbMiAvKiBQYXRjaEZsYWdzLkNMQVNTICovXTogYENMQVNTYCxcbiAgICBbNCAvKiBQYXRjaEZsYWdzLlNUWUxFICovXTogYFNUWUxFYCxcbiAgICBbOCAvKiBQYXRjaEZsYWdzLlBST1BTICovXTogYFBST1BTYCxcbiAgICBbMTYgLyogUGF0Y2hGbGFncy5GVUxMX1BST1BTICovXTogYEZVTExfUFJPUFNgLFxuICAgIFszMiAvKiBQYXRjaEZsYWdzLkhZRFJBVEVfRVZFTlRTICovXTogYEhZRFJBVEVfRVZFTlRTYCxcbiAgICBbNjQgLyogUGF0Y2hGbGFncy5TVEFCTEVfRlJBR01FTlQgKi9dOiBgU1RBQkxFX0ZSQUdNRU5UYCxcbiAgICBbMTI4IC8qIFBhdGNoRmxhZ3MuS0VZRURfRlJBR01FTlQgKi9dOiBgS0VZRURfRlJBR01FTlRgLFxuICAgIFsyNTYgLyogUGF0Y2hGbGFncy5VTktFWUVEX0ZSQUdNRU5UICovXTogYFVOS0VZRURfRlJBR01FTlRgLFxuICAgIFs1MTIgLyogUGF0Y2hGbGFncy5ORUVEX1BBVENIICovXTogYE5FRURfUEFUQ0hgLFxuICAgIFsxMDI0IC8qIFBhdGNoRmxhZ3MuRFlOQU1JQ19TTE9UUyAqL106IGBEWU5BTUlDX1NMT1RTYCxcbiAgICBbMjA0OCAvKiBQYXRjaEZsYWdzLkRFVl9ST09UX0ZSQUdNRU5UICovXTogYERFVl9ST09UX0ZSQUdNRU5UYCxcbiAgICBbLTEgLyogUGF0Y2hGbGFncy5IT0lTVEVEICovXTogYEhPSVNURURgLFxuICAgIFstMiAvKiBQYXRjaEZsYWdzLkJBSUwgKi9dOiBgQkFJTGBcbn07XG5cbi8qKlxuICogRGV2IG9ubHlcbiAqL1xuY29uc3Qgc2xvdEZsYWdzVGV4dCA9IHtcbiAgICBbMSAvKiBTbG90RmxhZ3MuU1RBQkxFICovXTogJ1NUQUJMRScsXG4gICAgWzIgLyogU2xvdEZsYWdzLkRZTkFNSUMgKi9dOiAnRFlOQU1JQycsXG4gICAgWzMgLyogU2xvdEZsYWdzLkZPUldBUkRFRCAqL106ICdGT1JXQVJERUQnXG59O1xuXG5jb25zdCBHTE9CQUxTX1dISVRFX0xJU1RFRCA9ICdJbmZpbml0eSx1bmRlZmluZWQsTmFOLGlzRmluaXRlLGlzTmFOLHBhcnNlRmxvYXQscGFyc2VJbnQsZGVjb2RlVVJJLCcgK1xuICAgICdkZWNvZGVVUklDb21wb25lbnQsZW5jb2RlVVJJLGVuY29kZVVSSUNvbXBvbmVudCxNYXRoLE51bWJlcixEYXRlLEFycmF5LCcgK1xuICAgICdPYmplY3QsQm9vbGVhbixTdHJpbmcsUmVnRXhwLE1hcCxTZXQsSlNPTixJbnRsLEJpZ0ludCc7XG5jb25zdCBpc0dsb2JhbGx5V2hpdGVsaXN0ZWQgPSAvKiNfX1BVUkVfXyovIG1ha2VNYXAoR0xPQkFMU19XSElURV9MSVNURUQpO1xuXG5jb25zdCByYW5nZSA9IDI7XG5mdW5jdGlvbiBnZW5lcmF0ZUNvZGVGcmFtZShzb3VyY2UsIHN0YXJ0ID0gMCwgZW5kID0gc291cmNlLmxlbmd0aCkge1xuICAgIC8vIFNwbGl0IHRoZSBjb250ZW50IGludG8gaW5kaXZpZHVhbCBsaW5lcyBidXQgY2FwdHVyZSB0aGUgbmV3bGluZSBzZXF1ZW5jZVxuICAgIC8vIHRoYXQgc2VwYXJhdGVkIGVhY2ggbGluZS4gVGhpcyBpcyBpbXBvcnRhbnQgYmVjYXVzZSB0aGUgYWN0dWFsIHNlcXVlbmNlIGlzXG4gICAgLy8gbmVlZGVkIHRvIHByb3Blcmx5IHRha2UgaW50byBhY2NvdW50IHRoZSBmdWxsIGxpbmUgbGVuZ3RoIGZvciBvZmZzZXRcbiAgICAvLyBjb21wYXJpc29uXG4gICAgbGV0IGxpbmVzID0gc291cmNlLnNwbGl0KC8oXFxyP1xcbikvKTtcbiAgICAvLyBTZXBhcmF0ZSB0aGUgbGluZXMgYW5kIG5ld2xpbmUgc2VxdWVuY2VzIGludG8gc2VwYXJhdGUgYXJyYXlzIGZvciBlYXNpZXIgcmVmZXJlbmNpbmdcbiAgICBjb25zdCBuZXdsaW5lU2VxdWVuY2VzID0gbGluZXMuZmlsdGVyKChfLCBpZHgpID0+IGlkeCAlIDIgPT09IDEpO1xuICAgIGxpbmVzID0gbGluZXMuZmlsdGVyKChfLCBpZHgpID0+IGlkeCAlIDIgPT09IDApO1xuICAgIGxldCBjb3VudCA9IDA7XG4gICAgY29uc3QgcmVzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb3VudCArPVxuICAgICAgICAgICAgbGluZXNbaV0ubGVuZ3RoICtcbiAgICAgICAgICAgICAgICAoKG5ld2xpbmVTZXF1ZW5jZXNbaV0gJiYgbmV3bGluZVNlcXVlbmNlc1tpXS5sZW5ndGgpIHx8IDApO1xuICAgICAgICBpZiAoY291bnQgPj0gc3RhcnQpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSBpIC0gcmFuZ2U7IGogPD0gaSArIHJhbmdlIHx8IGVuZCA+IGNvdW50OyBqKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoaiA8IDAgfHwgaiA+PSBsaW5lcy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBqICsgMTtcbiAgICAgICAgICAgICAgICByZXMucHVzaChgJHtsaW5lfSR7JyAnLnJlcGVhdChNYXRoLm1heCgzIC0gU3RyaW5nKGxpbmUpLmxlbmd0aCwgMCkpfXwgICR7bGluZXNbal19YCk7XG4gICAgICAgICAgICAgICAgY29uc3QgbGluZUxlbmd0aCA9IGxpbmVzW2pdLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdMaW5lU2VxTGVuZ3RoID0gKG5ld2xpbmVTZXF1ZW5jZXNbal0gJiYgbmV3bGluZVNlcXVlbmNlc1tqXS5sZW5ndGgpIHx8IDA7XG4gICAgICAgICAgICAgICAgaWYgKGogPT09IGkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gcHVzaCB1bmRlcmxpbmVcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFkID0gc3RhcnQgLSAoY291bnQgLSAobGluZUxlbmd0aCArIG5ld0xpbmVTZXFMZW5ndGgpKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGVuZ3RoID0gTWF0aC5tYXgoMSwgZW5kID4gY291bnQgPyBsaW5lTGVuZ3RoIC0gcGFkIDogZW5kIC0gc3RhcnQpO1xuICAgICAgICAgICAgICAgICAgICByZXMucHVzaChgICAgfCAgYCArICcgJy5yZXBlYXQocGFkKSArICdeJy5yZXBlYXQobGVuZ3RoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGogPiBpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbmQgPiBjb3VudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGVuZ3RoID0gTWF0aC5tYXgoTWF0aC5taW4oZW5kIC0gY291bnQsIGxpbmVMZW5ndGgpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5wdXNoKGAgICB8ICBgICsgJ14nLnJlcGVhdChsZW5ndGgpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb3VudCArPSBsaW5lTGVuZ3RoICsgbmV3TGluZVNlcUxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzLmpvaW4oJ1xcbicpO1xufVxuXG5mdW5jdGlvbiBub3JtYWxpemVTdHlsZSh2YWx1ZSkge1xuICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgICBjb25zdCByZXMgPSB7fTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IHZhbHVlW2ldO1xuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IGlzU3RyaW5nKGl0ZW0pXG4gICAgICAgICAgICAgICAgPyBwYXJzZVN0cmluZ1N0eWxlKGl0ZW0pXG4gICAgICAgICAgICAgICAgOiBub3JtYWxpemVTdHlsZShpdGVtKTtcbiAgICAgICAgICAgIGlmIChub3JtYWxpemVkKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbm9ybWFsaXplZCkge1xuICAgICAgICAgICAgICAgICAgICByZXNba2V5XSA9IG5vcm1hbGl6ZWRba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNTdHJpbmcodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG59XG5jb25zdCBsaXN0RGVsaW1pdGVyUkUgPSAvOyg/IVteKF0qXFwpKS9nO1xuY29uc3QgcHJvcGVydHlEZWxpbWl0ZXJSRSA9IC86KFteXSspLztcbmNvbnN0IHN0eWxlQ29tbWVudFJFID0gL1xcL1xcKi4qP1xcKlxcLy9ncztcbmZ1bmN0aW9uIHBhcnNlU3RyaW5nU3R5bGUoY3NzVGV4dCkge1xuICAgIGNvbnN0IHJldCA9IHt9O1xuICAgIGNzc1RleHRcbiAgICAgICAgLnJlcGxhY2Uoc3R5bGVDb21tZW50UkUsICcnKVxuICAgICAgICAuc3BsaXQobGlzdERlbGltaXRlclJFKVxuICAgICAgICAuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgICAgIGNvbnN0IHRtcCA9IGl0ZW0uc3BsaXQocHJvcGVydHlEZWxpbWl0ZXJSRSk7XG4gICAgICAgICAgICB0bXAubGVuZ3RoID4gMSAmJiAocmV0W3RtcFswXS50cmltKCldID0gdG1wWzFdLnRyaW0oKSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcmV0O1xufVxuZnVuY3Rpb24gc3RyaW5naWZ5U3R5bGUoc3R5bGVzKSB7XG4gICAgbGV0IHJldCA9ICcnO1xuICAgIGlmICghc3R5bGVzIHx8IGlzU3RyaW5nKHN0eWxlcykpIHtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgaW4gc3R5bGVzKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gc3R5bGVzW2tleV07XG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRLZXkgPSBrZXkuc3RhcnRzV2l0aChgLS1gKSA/IGtleSA6IGh5cGhlbmF0ZShrZXkpO1xuICAgICAgICBpZiAoaXNTdHJpbmcodmFsdWUpIHx8IHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIC8vIG9ubHkgcmVuZGVyIHZhbGlkIHZhbHVlc1xuICAgICAgICAgICAgcmV0ICs9IGAke25vcm1hbGl6ZWRLZXl9OiR7dmFsdWV9O2A7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUNsYXNzKHZhbHVlKSB7XG4gICAgbGV0IHJlcyA9ICcnO1xuICAgIGlmIChpc1N0cmluZyh2YWx1ZSkpIHtcbiAgICAgICAgcmVzID0gdmFsdWU7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBub3JtYWxpemVDbGFzcyh2YWx1ZVtpXSk7XG4gICAgICAgICAgICBpZiAobm9ybWFsaXplZCkge1xuICAgICAgICAgICAgICAgIHJlcyArPSBub3JtYWxpemVkICsgJyAnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzT2JqZWN0KHZhbHVlKSkge1xuICAgICAgICBmb3IgKGNvbnN0IG5hbWUgaW4gdmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZVtuYW1lXSkge1xuICAgICAgICAgICAgICAgIHJlcyArPSBuYW1lICsgJyAnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXMudHJpbSgpO1xufVxuZnVuY3Rpb24gbm9ybWFsaXplUHJvcHMocHJvcHMpIHtcbiAgICBpZiAoIXByb3BzKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBsZXQgeyBjbGFzczoga2xhc3MsIHN0eWxlIH0gPSBwcm9wcztcbiAgICBpZiAoa2xhc3MgJiYgIWlzU3RyaW5nKGtsYXNzKSkge1xuICAgICAgICBwcm9wcy5jbGFzcyA9IG5vcm1hbGl6ZUNsYXNzKGtsYXNzKTtcbiAgICB9XG4gICAgaWYgKHN0eWxlKSB7XG4gICAgICAgIHByb3BzLnN0eWxlID0gbm9ybWFsaXplU3R5bGUoc3R5bGUpO1xuICAgIH1cbiAgICByZXR1cm4gcHJvcHM7XG59XG5cbi8vIFRoZXNlIHRhZyBjb25maWdzIGFyZSBzaGFyZWQgYmV0d2VlbiBjb21waWxlci1kb20gYW5kIHJ1bnRpbWUtZG9tLCBzbyB0aGV5XG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVE1ML0VsZW1lbnRcbmNvbnN0IEhUTUxfVEFHUyA9ICdodG1sLGJvZHksYmFzZSxoZWFkLGxpbmssbWV0YSxzdHlsZSx0aXRsZSxhZGRyZXNzLGFydGljbGUsYXNpZGUsZm9vdGVyLCcgK1xuICAgICdoZWFkZXIsaDEsaDIsaDMsaDQsaDUsaDYsbmF2LHNlY3Rpb24sZGl2LGRkLGRsLGR0LGZpZ2NhcHRpb24sJyArXG4gICAgJ2ZpZ3VyZSxwaWN0dXJlLGhyLGltZyxsaSxtYWluLG9sLHAscHJlLHVsLGEsYixhYmJyLGJkaSxiZG8sYnIsY2l0ZSxjb2RlLCcgK1xuICAgICdkYXRhLGRmbixlbSxpLGtiZCxtYXJrLHEscnAscnQscnVieSxzLHNhbXAsc21hbGwsc3BhbixzdHJvbmcsc3ViLHN1cCwnICtcbiAgICAndGltZSx1LHZhcix3YnIsYXJlYSxhdWRpbyxtYXAsdHJhY2ssdmlkZW8sZW1iZWQsb2JqZWN0LHBhcmFtLHNvdXJjZSwnICtcbiAgICAnY2FudmFzLHNjcmlwdCxub3NjcmlwdCxkZWwsaW5zLGNhcHRpb24sY29sLGNvbGdyb3VwLHRhYmxlLHRoZWFkLHRib2R5LHRkLCcgK1xuICAgICd0aCx0cixidXR0b24sZGF0YWxpc3QsZmllbGRzZXQsZm9ybSxpbnB1dCxsYWJlbCxsZWdlbmQsbWV0ZXIsb3B0Z3JvdXAsJyArXG4gICAgJ29wdGlvbixvdXRwdXQscHJvZ3Jlc3Msc2VsZWN0LHRleHRhcmVhLGRldGFpbHMsZGlhbG9nLG1lbnUsJyArXG4gICAgJ3N1bW1hcnksdGVtcGxhdGUsYmxvY2txdW90ZSxpZnJhbWUsdGZvb3QnO1xuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvU1ZHL0VsZW1lbnRcbmNvbnN0IFNWR19UQUdTID0gJ3N2ZyxhbmltYXRlLGFuaW1hdGVNb3Rpb24sYW5pbWF0ZVRyYW5zZm9ybSxjaXJjbGUsY2xpcFBhdGgsY29sb3ItcHJvZmlsZSwnICtcbiAgICAnZGVmcyxkZXNjLGRpc2NhcmQsZWxsaXBzZSxmZUJsZW5kLGZlQ29sb3JNYXRyaXgsZmVDb21wb25lbnRUcmFuc2ZlciwnICtcbiAgICAnZmVDb21wb3NpdGUsZmVDb252b2x2ZU1hdHJpeCxmZURpZmZ1c2VMaWdodGluZyxmZURpc3BsYWNlbWVudE1hcCwnICtcbiAgICAnZmVEaXN0YW5jZUxpZ2h0LGZlRHJvcFNoYWRvdyxmZUZsb29kLGZlRnVuY0EsZmVGdW5jQixmZUZ1bmNHLGZlRnVuY1IsJyArXG4gICAgJ2ZlR2F1c3NpYW5CbHVyLGZlSW1hZ2UsZmVNZXJnZSxmZU1lcmdlTm9kZSxmZU1vcnBob2xvZ3ksZmVPZmZzZXQsJyArXG4gICAgJ2ZlUG9pbnRMaWdodCxmZVNwZWN1bGFyTGlnaHRpbmcsZmVTcG90TGlnaHQsZmVUaWxlLGZlVHVyYnVsZW5jZSxmaWx0ZXIsJyArXG4gICAgJ2ZvcmVpZ25PYmplY3QsZyxoYXRjaCxoYXRjaHBhdGgsaW1hZ2UsbGluZSxsaW5lYXJHcmFkaWVudCxtYXJrZXIsbWFzaywnICtcbiAgICAnbWVzaCxtZXNoZ3JhZGllbnQsbWVzaHBhdGNoLG1lc2hyb3csbWV0YWRhdGEsbXBhdGgscGF0aCxwYXR0ZXJuLCcgK1xuICAgICdwb2x5Z29uLHBvbHlsaW5lLHJhZGlhbEdyYWRpZW50LHJlY3Qsc2V0LHNvbGlkY29sb3Isc3RvcCxzd2l0Y2gsc3ltYm9sLCcgK1xuICAgICd0ZXh0LHRleHRQYXRoLHRpdGxlLHRzcGFuLHVua25vd24sdXNlLHZpZXcnO1xuY29uc3QgVk9JRF9UQUdTID0gJ2FyZWEsYmFzZSxicixjb2wsZW1iZWQsaHIsaW1nLGlucHV0LGxpbmssbWV0YSxwYXJhbSxzb3VyY2UsdHJhY2ssd2JyJztcbi8qKlxuICogQ29tcGlsZXIgb25seS5cbiAqIERvIE5PVCB1c2UgaW4gcnVudGltZSBjb2RlIHBhdGhzIHVubGVzcyBiZWhpbmQgYChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKWAgZmxhZy5cbiAqL1xuY29uc3QgaXNIVE1MVGFnID0gLyojX19QVVJFX18qLyBtYWtlTWFwKEhUTUxfVEFHUyk7XG4vKipcbiAqIENvbXBpbGVyIG9ubHkuXG4gKiBEbyBOT1QgdXNlIGluIHJ1bnRpbWUgY29kZSBwYXRocyB1bmxlc3MgYmVoaW5kIGAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJylgIGZsYWcuXG4gKi9cbmNvbnN0IGlzU1ZHVGFnID0gLyojX19QVVJFX18qLyBtYWtlTWFwKFNWR19UQUdTKTtcbi8qKlxuICogQ29tcGlsZXIgb25seS5cbiAqIERvIE5PVCB1c2UgaW4gcnVudGltZSBjb2RlIHBhdGhzIHVubGVzcyBiZWhpbmQgYChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKWAgZmxhZy5cbiAqL1xuY29uc3QgaXNWb2lkVGFnID0gLyojX19QVVJFX18qLyBtYWtlTWFwKFZPSURfVEFHUyk7XG5cbi8qKlxuICogT24gdGhlIGNsaWVudCB3ZSBvbmx5IG5lZWQgdG8gb2ZmZXIgc3BlY2lhbCBjYXNlcyBmb3IgYm9vbGVhbiBhdHRyaWJ1dGVzIHRoYXRcbiAqIGhhdmUgZGlmZmVyZW50IG5hbWVzIGZyb20gdGhlaXIgY29ycmVzcG9uZGluZyBkb20gcHJvcGVydGllczpcbiAqIC0gaXRlbXNjb3BlIC0+IE4vQVxuICogLSBhbGxvd2Z1bGxzY3JlZW4gLT4gYWxsb3dGdWxsc2NyZWVuXG4gKiAtIGZvcm1ub3ZhbGlkYXRlIC0+IGZvcm1Ob1ZhbGlkYXRlXG4gKiAtIGlzbWFwIC0+IGlzTWFwXG4gKiAtIG5vbW9kdWxlIC0+IG5vTW9kdWxlXG4gKiAtIG5vdmFsaWRhdGUgLT4gbm9WYWxpZGF0ZVxuICogLSByZWFkb25seSAtPiByZWFkT25seVxuICovXG5jb25zdCBzcGVjaWFsQm9vbGVhbkF0dHJzID0gYGl0ZW1zY29wZSxhbGxvd2Z1bGxzY3JlZW4sZm9ybW5vdmFsaWRhdGUsaXNtYXAsbm9tb2R1bGUsbm92YWxpZGF0ZSxyZWFkb25seWA7XG5jb25zdCBpc1NwZWNpYWxCb29sZWFuQXR0ciA9IC8qI19fUFVSRV9fKi8gbWFrZU1hcChzcGVjaWFsQm9vbGVhbkF0dHJzKTtcbi8qKlxuICogVGhlIGZ1bGwgbGlzdCBpcyBuZWVkZWQgZHVyaW5nIFNTUiB0byBwcm9kdWNlIHRoZSBjb3JyZWN0IGluaXRpYWwgbWFya3VwLlxuICovXG5jb25zdCBpc0Jvb2xlYW5BdHRyID0gLyojX19QVVJFX18qLyBtYWtlTWFwKHNwZWNpYWxCb29sZWFuQXR0cnMgK1xuICAgIGAsYXN5bmMsYXV0b2ZvY3VzLGF1dG9wbGF5LGNvbnRyb2xzLGRlZmF1bHQsZGVmZXIsZGlzYWJsZWQsaGlkZGVuLGAgK1xuICAgIGBsb29wLG9wZW4scmVxdWlyZWQscmV2ZXJzZWQsc2NvcGVkLHNlYW1sZXNzLGAgK1xuICAgIGBjaGVja2VkLG11dGVkLG11bHRpcGxlLHNlbGVjdGVkYCk7XG4vKipcbiAqIEJvb2xlYW4gYXR0cmlidXRlcyBzaG91bGQgYmUgaW5jbHVkZWQgaWYgdGhlIHZhbHVlIGlzIHRydXRoeSBvciAnJy5cbiAqIGUuZy4gYDxzZWxlY3QgbXVsdGlwbGU+YCBjb21waWxlcyB0byBgeyBtdWx0aXBsZTogJycgfWBcbiAqL1xuZnVuY3Rpb24gaW5jbHVkZUJvb2xlYW5BdHRyKHZhbHVlKSB7XG4gICAgcmV0dXJuICEhdmFsdWUgfHwgdmFsdWUgPT09ICcnO1xufVxuY29uc3QgdW5zYWZlQXR0ckNoYXJSRSA9IC9bPi89XCInXFx1MDAwOVxcdTAwMGFcXHUwMDBjXFx1MDAyMF0vO1xuY29uc3QgYXR0clZhbGlkYXRpb25DYWNoZSA9IHt9O1xuZnVuY3Rpb24gaXNTU1JTYWZlQXR0ck5hbWUobmFtZSkge1xuICAgIGlmIChhdHRyVmFsaWRhdGlvbkNhY2hlLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgIHJldHVybiBhdHRyVmFsaWRhdGlvbkNhY2hlW25hbWVdO1xuICAgIH1cbiAgICBjb25zdCBpc1Vuc2FmZSA9IHVuc2FmZUF0dHJDaGFyUkUudGVzdChuYW1lKTtcbiAgICBpZiAoaXNVbnNhZmUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgdW5zYWZlIGF0dHJpYnV0ZSBuYW1lOiAke25hbWV9YCk7XG4gICAgfVxuICAgIHJldHVybiAoYXR0clZhbGlkYXRpb25DYWNoZVtuYW1lXSA9ICFpc1Vuc2FmZSk7XG59XG5jb25zdCBwcm9wc1RvQXR0ck1hcCA9IHtcbiAgICBhY2NlcHRDaGFyc2V0OiAnYWNjZXB0LWNoYXJzZXQnLFxuICAgIGNsYXNzTmFtZTogJ2NsYXNzJyxcbiAgICBodG1sRm9yOiAnZm9yJyxcbiAgICBodHRwRXF1aXY6ICdodHRwLWVxdWl2J1xufTtcbi8qKlxuICogS25vd24gYXR0cmlidXRlcywgdGhpcyBpcyB1c2VkIGZvciBzdHJpbmdpZmljYXRpb24gb2YgcnVudGltZSBzdGF0aWMgbm9kZXNcbiAqIHNvIHRoYXQgd2UgZG9uJ3Qgc3RyaW5naWZ5IGJpbmRpbmdzIHRoYXQgY2Fubm90IGJlIHNldCBmcm9tIEhUTUwuXG4gKiBEb24ndCBhbHNvIGZvcmdldCB0byBhbGxvdyBgZGF0YS0qYCBhbmQgYGFyaWEtKmAhXG4gKiBHZW5lcmF0ZWQgZnJvbSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVE1ML0F0dHJpYnV0ZXNcbiAqL1xuY29uc3QgaXNLbm93bkh0bWxBdHRyID0gLyojX19QVVJFX18qLyBtYWtlTWFwKGBhY2NlcHQsYWNjZXB0LWNoYXJzZXQsYWNjZXNza2V5LGFjdGlvbixhbGlnbixhbGxvdyxhbHQsYXN5bmMsYCArXG4gICAgYGF1dG9jYXBpdGFsaXplLGF1dG9jb21wbGV0ZSxhdXRvZm9jdXMsYXV0b3BsYXksYmFja2dyb3VuZCxiZ2NvbG9yLGAgK1xuICAgIGBib3JkZXIsYnVmZmVyZWQsY2FwdHVyZSxjaGFsbGVuZ2UsY2hhcnNldCxjaGVja2VkLGNpdGUsY2xhc3MsY29kZSxgICtcbiAgICBgY29kZWJhc2UsY29sb3IsY29scyxjb2xzcGFuLGNvbnRlbnQsY29udGVudGVkaXRhYmxlLGNvbnRleHRtZW51LGNvbnRyb2xzLGAgK1xuICAgIGBjb29yZHMsY3Jvc3NvcmlnaW4sY3NwLGRhdGEsZGF0ZXRpbWUsZGVjb2RpbmcsZGVmYXVsdCxkZWZlcixkaXIsZGlybmFtZSxgICtcbiAgICBgZGlzYWJsZWQsZG93bmxvYWQsZHJhZ2dhYmxlLGRyb3B6b25lLGVuY3R5cGUsZW50ZXJrZXloaW50LGZvcixmb3JtLGAgK1xuICAgIGBmb3JtYWN0aW9uLGZvcm1lbmN0eXBlLGZvcm1tZXRob2QsZm9ybW5vdmFsaWRhdGUsZm9ybXRhcmdldCxoZWFkZXJzLGAgK1xuICAgIGBoZWlnaHQsaGlkZGVuLGhpZ2gsaHJlZixocmVmbGFuZyxodHRwLWVxdWl2LGljb24saWQsaW1wb3J0YW5jZSxpbnRlZ3JpdHksYCArXG4gICAgYGlzbWFwLGl0ZW1wcm9wLGtleXR5cGUsa2luZCxsYWJlbCxsYW5nLGxhbmd1YWdlLGxvYWRpbmcsbGlzdCxsb29wLGxvdyxgICtcbiAgICBgbWFuaWZlc3QsbWF4LG1heGxlbmd0aCxtaW5sZW5ndGgsbWVkaWEsbWluLG11bHRpcGxlLG11dGVkLG5hbWUsbm92YWxpZGF0ZSxgICtcbiAgICBgb3BlbixvcHRpbXVtLHBhdHRlcm4scGluZyxwbGFjZWhvbGRlcixwb3N0ZXIscHJlbG9hZCxyYWRpb2dyb3VwLHJlYWRvbmx5LGAgK1xuICAgIGByZWZlcnJlcnBvbGljeSxyZWwscmVxdWlyZWQscmV2ZXJzZWQscm93cyxyb3dzcGFuLHNhbmRib3gsc2NvcGUsc2NvcGVkLGAgK1xuICAgIGBzZWxlY3RlZCxzaGFwZSxzaXplLHNpemVzLHNsb3Qsc3BhbixzcGVsbGNoZWNrLHNyYyxzcmNkb2Msc3JjbGFuZyxzcmNzZXQsYCArXG4gICAgYHN0YXJ0LHN0ZXAsc3R5bGUsc3VtbWFyeSx0YWJpbmRleCx0YXJnZXQsdGl0bGUsdHJhbnNsYXRlLHR5cGUsdXNlbWFwLGAgK1xuICAgIGB2YWx1ZSx3aWR0aCx3cmFwYCk7XG4vKipcbiAqIEdlbmVyYXRlZCBmcm9tIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL1NWRy9BdHRyaWJ1dGVcbiAqL1xuY29uc3QgaXNLbm93blN2Z0F0dHIgPSAvKiNfX1BVUkVfXyovIG1ha2VNYXAoYHhtbG5zLGFjY2VudC1oZWlnaHQsYWNjdW11bGF0ZSxhZGRpdGl2ZSxhbGlnbm1lbnQtYmFzZWxpbmUsYWxwaGFiZXRpYyxhbXBsaXR1ZGUsYCArXG4gICAgYGFyYWJpYy1mb3JtLGFzY2VudCxhdHRyaWJ1dGVOYW1lLGF0dHJpYnV0ZVR5cGUsYXppbXV0aCxiYXNlRnJlcXVlbmN5LGAgK1xuICAgIGBiYXNlbGluZS1zaGlmdCxiYXNlUHJvZmlsZSxiYm94LGJlZ2luLGJpYXMsYnksY2FsY01vZGUsY2FwLWhlaWdodCxjbGFzcyxgICtcbiAgICBgY2xpcCxjbGlwUGF0aFVuaXRzLGNsaXAtcGF0aCxjbGlwLXJ1bGUsY29sb3IsY29sb3ItaW50ZXJwb2xhdGlvbixgICtcbiAgICBgY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzLGNvbG9yLXByb2ZpbGUsY29sb3ItcmVuZGVyaW5nLGAgK1xuICAgIGBjb250ZW50U2NyaXB0VHlwZSxjb250ZW50U3R5bGVUeXBlLGNyb3Nzb3JpZ2luLGN1cnNvcixjeCxjeSxkLGRlY2VsZXJhdGUsYCArXG4gICAgYGRlc2NlbnQsZGlmZnVzZUNvbnN0YW50LGRpcmVjdGlvbixkaXNwbGF5LGRpdmlzb3IsZG9taW5hbnQtYmFzZWxpbmUsZHVyLGR4LGAgK1xuICAgIGBkeSxlZGdlTW9kZSxlbGV2YXRpb24sZW5hYmxlLWJhY2tncm91bmQsZW5kLGV4cG9uZW50LGZpbGwsZmlsbC1vcGFjaXR5LGAgK1xuICAgIGBmaWxsLXJ1bGUsZmlsdGVyLGZpbHRlclJlcyxmaWx0ZXJVbml0cyxmbG9vZC1jb2xvcixmbG9vZC1vcGFjaXR5LGAgK1xuICAgIGBmb250LWZhbWlseSxmb250LXNpemUsZm9udC1zaXplLWFkanVzdCxmb250LXN0cmV0Y2gsZm9udC1zdHlsZSxgICtcbiAgICBgZm9udC12YXJpYW50LGZvbnQtd2VpZ2h0LGZvcm1hdCxmcm9tLGZyLGZ4LGZ5LGcxLGcyLGdseXBoLW5hbWUsYCArXG4gICAgYGdseXBoLW9yaWVudGF0aW9uLWhvcml6b250YWwsZ2x5cGgtb3JpZW50YXRpb24tdmVydGljYWwsZ2x5cGhSZWYsYCArXG4gICAgYGdyYWRpZW50VHJhbnNmb3JtLGdyYWRpZW50VW5pdHMsaGFuZ2luZyxoZWlnaHQsaHJlZixocmVmbGFuZyxob3Jpei1hZHYteCxgICtcbiAgICBgaG9yaXotb3JpZ2luLXgsaWQsaWRlb2dyYXBoaWMsaW1hZ2UtcmVuZGVyaW5nLGluLGluMixpbnRlcmNlcHQsayxrMSxrMixrMyxgICtcbiAgICBgazQsa2VybmVsTWF0cml4LGtlcm5lbFVuaXRMZW5ndGgsa2VybmluZyxrZXlQb2ludHMsa2V5U3BsaW5lcyxrZXlUaW1lcyxgICtcbiAgICBgbGFuZyxsZW5ndGhBZGp1c3QsbGV0dGVyLXNwYWNpbmcsbGlnaHRpbmctY29sb3IsbGltaXRpbmdDb25lQW5nbGUsbG9jYWwsYCArXG4gICAgYG1hcmtlci1lbmQsbWFya2VyLW1pZCxtYXJrZXItc3RhcnQsbWFya2VySGVpZ2h0LG1hcmtlclVuaXRzLG1hcmtlcldpZHRoLGAgK1xuICAgIGBtYXNrLG1hc2tDb250ZW50VW5pdHMsbWFza1VuaXRzLG1hdGhlbWF0aWNhbCxtYXgsbWVkaWEsbWV0aG9kLG1pbixtb2RlLGAgK1xuICAgIGBuYW1lLG51bU9jdGF2ZXMsb2Zmc2V0LG9wYWNpdHksb3BlcmF0b3Isb3JkZXIsb3JpZW50LG9yaWVudGF0aW9uLG9yaWdpbixgICtcbiAgICBgb3ZlcmZsb3csb3ZlcmxpbmUtcG9zaXRpb24sb3ZlcmxpbmUtdGhpY2tuZXNzLHBhbm9zZS0xLHBhaW50LW9yZGVyLHBhdGgsYCArXG4gICAgYHBhdGhMZW5ndGgscGF0dGVybkNvbnRlbnRVbml0cyxwYXR0ZXJuVHJhbnNmb3JtLHBhdHRlcm5Vbml0cyxwaW5nLGAgK1xuICAgIGBwb2ludGVyLWV2ZW50cyxwb2ludHMscG9pbnRzQXRYLHBvaW50c0F0WSxwb2ludHNBdFoscHJlc2VydmVBbHBoYSxgICtcbiAgICBgcHJlc2VydmVBc3BlY3RSYXRpbyxwcmltaXRpdmVVbml0cyxyLHJhZGl1cyxyZWZlcnJlclBvbGljeSxyZWZYLHJlZlkscmVsLGAgK1xuICAgIGByZW5kZXJpbmctaW50ZW50LHJlcGVhdENvdW50LHJlcGVhdER1cixyZXF1aXJlZEV4dGVuc2lvbnMscmVxdWlyZWRGZWF0dXJlcyxgICtcbiAgICBgcmVzdGFydCxyZXN1bHQscm90YXRlLHJ4LHJ5LHNjYWxlLHNlZWQsc2hhcGUtcmVuZGVyaW5nLHNsb3BlLHNwYWNpbmcsYCArXG4gICAgYHNwZWN1bGFyQ29uc3RhbnQsc3BlY3VsYXJFeHBvbmVudCxzcGVlZCxzcHJlYWRNZXRob2Qsc3RhcnRPZmZzZXQsYCArXG4gICAgYHN0ZERldmlhdGlvbixzdGVtaCxzdGVtdixzdGl0Y2hUaWxlcyxzdG9wLWNvbG9yLHN0b3Atb3BhY2l0eSxgICtcbiAgICBgc3RyaWtldGhyb3VnaC1wb3NpdGlvbixzdHJpa2V0aHJvdWdoLXRoaWNrbmVzcyxzdHJpbmcsc3Ryb2tlLGAgK1xuICAgIGBzdHJva2UtZGFzaGFycmF5LHN0cm9rZS1kYXNob2Zmc2V0LHN0cm9rZS1saW5lY2FwLHN0cm9rZS1saW5lam9pbixgICtcbiAgICBgc3Ryb2tlLW1pdGVybGltaXQsc3Ryb2tlLW9wYWNpdHksc3Ryb2tlLXdpZHRoLHN0eWxlLHN1cmZhY2VTY2FsZSxgICtcbiAgICBgc3lzdGVtTGFuZ3VhZ2UsdGFiaW5kZXgsdGFibGVWYWx1ZXMsdGFyZ2V0LHRhcmdldFgsdGFyZ2V0WSx0ZXh0LWFuY2hvcixgICtcbiAgICBgdGV4dC1kZWNvcmF0aW9uLHRleHQtcmVuZGVyaW5nLHRleHRMZW5ndGgsdG8sdHJhbnNmb3JtLHRyYW5zZm9ybS1vcmlnaW4sYCArXG4gICAgYHR5cGUsdTEsdTIsdW5kZXJsaW5lLXBvc2l0aW9uLHVuZGVybGluZS10aGlja25lc3MsdW5pY29kZSx1bmljb2RlLWJpZGksYCArXG4gICAgYHVuaWNvZGUtcmFuZ2UsdW5pdHMtcGVyLWVtLHYtYWxwaGFiZXRpYyx2LWhhbmdpbmcsdi1pZGVvZ3JhcGhpYyxgICtcbiAgICBgdi1tYXRoZW1hdGljYWwsdmFsdWVzLHZlY3Rvci1lZmZlY3QsdmVyc2lvbix2ZXJ0LWFkdi15LHZlcnQtb3JpZ2luLXgsYCArXG4gICAgYHZlcnQtb3JpZ2luLXksdmlld0JveCx2aWV3VGFyZ2V0LHZpc2liaWxpdHksd2lkdGgsd2lkdGhzLHdvcmQtc3BhY2luZyxgICtcbiAgICBgd3JpdGluZy1tb2RlLHgseC1oZWlnaHQseDEseDIseENoYW5uZWxTZWxlY3Rvcix4bGluazphY3R1YXRlLHhsaW5rOmFyY3JvbGUsYCArXG4gICAgYHhsaW5rOmhyZWYseGxpbms6cm9sZSx4bGluazpzaG93LHhsaW5rOnRpdGxlLHhsaW5rOnR5cGUseG1sOmJhc2UseG1sOmxhbmcsYCArXG4gICAgYHhtbDpzcGFjZSx5LHkxLHkyLHlDaGFubmVsU2VsZWN0b3Iseix6b29tQW5kUGFuYCk7XG5cbmNvbnN0IGVzY2FwZVJFID0gL1tcIicmPD5dLztcbmZ1bmN0aW9uIGVzY2FwZUh0bWwoc3RyaW5nKSB7XG4gICAgY29uc3Qgc3RyID0gJycgKyBzdHJpbmc7XG4gICAgY29uc3QgbWF0Y2ggPSBlc2NhcGVSRS5leGVjKHN0cik7XG4gICAgaWYgKCFtYXRjaCkge1xuICAgICAgICByZXR1cm4gc3RyO1xuICAgIH1cbiAgICBsZXQgaHRtbCA9ICcnO1xuICAgIGxldCBlc2NhcGVkO1xuICAgIGxldCBpbmRleDtcbiAgICBsZXQgbGFzdEluZGV4ID0gMDtcbiAgICBmb3IgKGluZGV4ID0gbWF0Y2guaW5kZXg7IGluZGV4IDwgc3RyLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICBzd2l0Y2ggKHN0ci5jaGFyQ29kZUF0KGluZGV4KSkge1xuICAgICAgICAgICAgY2FzZSAzNDogLy8gXCJcbiAgICAgICAgICAgICAgICBlc2NhcGVkID0gJyZxdW90Oyc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDM4OiAvLyAmXG4gICAgICAgICAgICAgICAgZXNjYXBlZCA9ICcmYW1wOyc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDM5OiAvLyAnXG4gICAgICAgICAgICAgICAgZXNjYXBlZCA9ICcmIzM5Oyc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDYwOiAvLyA8XG4gICAgICAgICAgICAgICAgZXNjYXBlZCA9ICcmbHQ7JztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNjI6IC8vID5cbiAgICAgICAgICAgICAgICBlc2NhcGVkID0gJyZndDsnO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGFzdEluZGV4ICE9PSBpbmRleCkge1xuICAgICAgICAgICAgaHRtbCArPSBzdHIuc2xpY2UobGFzdEluZGV4LCBpbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgbGFzdEluZGV4ID0gaW5kZXggKyAxO1xuICAgICAgICBodG1sICs9IGVzY2FwZWQ7XG4gICAgfVxuICAgIHJldHVybiBsYXN0SW5kZXggIT09IGluZGV4ID8gaHRtbCArIHN0ci5zbGljZShsYXN0SW5kZXgsIGluZGV4KSA6IGh0bWw7XG59XG4vLyBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUyL3N5bnRheC5odG1sI2NvbW1lbnRzXG5jb25zdCBjb21tZW50U3RyaXBSRSA9IC9eLT8+fDwhLS18LS0+fC0tIT58PCEtJC9nO1xuZnVuY3Rpb24gZXNjYXBlSHRtbENvbW1lbnQoc3JjKSB7XG4gICAgcmV0dXJuIHNyYy5yZXBsYWNlKGNvbW1lbnRTdHJpcFJFLCAnJyk7XG59XG5cbmZ1bmN0aW9uIGxvb3NlQ29tcGFyZUFycmF5cyhhLCBiKSB7XG4gICAgaWYgKGEubGVuZ3RoICE9PSBiLmxlbmd0aClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGxldCBlcXVhbCA9IHRydWU7XG4gICAgZm9yIChsZXQgaSA9IDA7IGVxdWFsICYmIGkgPCBhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGVxdWFsID0gbG9vc2VFcXVhbChhW2ldLCBiW2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIGVxdWFsO1xufVxuZnVuY3Rpb24gbG9vc2VFcXVhbChhLCBiKSB7XG4gICAgaWYgKGEgPT09IGIpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIGxldCBhVmFsaWRUeXBlID0gaXNEYXRlKGEpO1xuICAgIGxldCBiVmFsaWRUeXBlID0gaXNEYXRlKGIpO1xuICAgIGlmIChhVmFsaWRUeXBlIHx8IGJWYWxpZFR5cGUpIHtcbiAgICAgICAgcmV0dXJuIGFWYWxpZFR5cGUgJiYgYlZhbGlkVHlwZSA/IGEuZ2V0VGltZSgpID09PSBiLmdldFRpbWUoKSA6IGZhbHNlO1xuICAgIH1cbiAgICBhVmFsaWRUeXBlID0gaXNTeW1ib2woYSk7XG4gICAgYlZhbGlkVHlwZSA9IGlzU3ltYm9sKGIpO1xuICAgIGlmIChhVmFsaWRUeXBlIHx8IGJWYWxpZFR5cGUpIHtcbiAgICAgICAgcmV0dXJuIGEgPT09IGI7XG4gICAgfVxuICAgIGFWYWxpZFR5cGUgPSBpc0FycmF5KGEpO1xuICAgIGJWYWxpZFR5cGUgPSBpc0FycmF5KGIpO1xuICAgIGlmIChhVmFsaWRUeXBlIHx8IGJWYWxpZFR5cGUpIHtcbiAgICAgICAgcmV0dXJuIGFWYWxpZFR5cGUgJiYgYlZhbGlkVHlwZSA/IGxvb3NlQ29tcGFyZUFycmF5cyhhLCBiKSA6IGZhbHNlO1xuICAgIH1cbiAgICBhVmFsaWRUeXBlID0gaXNPYmplY3QoYSk7XG4gICAgYlZhbGlkVHlwZSA9IGlzT2JqZWN0KGIpO1xuICAgIGlmIChhVmFsaWRUeXBlIHx8IGJWYWxpZFR5cGUpIHtcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmOiB0aGlzIGlmIHdpbGwgcHJvYmFibHkgbmV2ZXIgYmUgY2FsbGVkICovXG4gICAgICAgIGlmICghYVZhbGlkVHlwZSB8fCAhYlZhbGlkVHlwZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFLZXlzQ291bnQgPSBPYmplY3Qua2V5cyhhKS5sZW5ndGg7XG4gICAgICAgIGNvbnN0IGJLZXlzQ291bnQgPSBPYmplY3Qua2V5cyhiKS5sZW5ndGg7XG4gICAgICAgIGlmIChhS2V5c0NvdW50ICE9PSBiS2V5c0NvdW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gYSkge1xuICAgICAgICAgICAgY29uc3QgYUhhc0tleSA9IGEuaGFzT3duUHJvcGVydHkoa2V5KTtcbiAgICAgICAgICAgIGNvbnN0IGJIYXNLZXkgPSBiLmhhc093blByb3BlcnR5KGtleSk7XG4gICAgICAgICAgICBpZiAoKGFIYXNLZXkgJiYgIWJIYXNLZXkpIHx8XG4gICAgICAgICAgICAgICAgKCFhSGFzS2V5ICYmIGJIYXNLZXkpIHx8XG4gICAgICAgICAgICAgICAgIWxvb3NlRXF1YWwoYVtrZXldLCBiW2tleV0pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBTdHJpbmcoYSkgPT09IFN0cmluZyhiKTtcbn1cbmZ1bmN0aW9uIGxvb3NlSW5kZXhPZihhcnIsIHZhbCkge1xuICAgIHJldHVybiBhcnIuZmluZEluZGV4KGl0ZW0gPT4gbG9vc2VFcXVhbChpdGVtLCB2YWwpKTtcbn1cblxuLyoqXG4gKiBGb3IgY29udmVydGluZyB7eyBpbnRlcnBvbGF0aW9uIH19IHZhbHVlcyB0byBkaXNwbGF5ZWQgc3RyaW5ncy5cbiAqIEBwcml2YXRlXG4gKi9cbmNvbnN0IHRvRGlzcGxheVN0cmluZyA9ICh2YWwpID0+IHtcbiAgICByZXR1cm4gaXNTdHJpbmcodmFsKVxuICAgICAgICA/IHZhbFxuICAgICAgICA6IHZhbCA9PSBudWxsXG4gICAgICAgICAgICA/ICcnXG4gICAgICAgICAgICA6IGlzQXJyYXkodmFsKSB8fFxuICAgICAgICAgICAgICAgIChpc09iamVjdCh2YWwpICYmXG4gICAgICAgICAgICAgICAgICAgICh2YWwudG9TdHJpbmcgPT09IG9iamVjdFRvU3RyaW5nIHx8ICFpc0Z1bmN0aW9uKHZhbC50b1N0cmluZykpKVxuICAgICAgICAgICAgICAgID8gSlNPTi5zdHJpbmdpZnkodmFsLCByZXBsYWNlciwgMilcbiAgICAgICAgICAgICAgICA6IFN0cmluZyh2YWwpO1xufTtcbmNvbnN0IHJlcGxhY2VyID0gKF9rZXksIHZhbCkgPT4ge1xuICAgIC8vIGNhbid0IHVzZSBpc1JlZiBoZXJlIHNpbmNlIEB2dWUvc2hhcmVkIGhhcyBubyBkZXBzXG4gICAgaWYgKHZhbCAmJiB2YWwuX192X2lzUmVmKSB7XG4gICAgICAgIHJldHVybiByZXBsYWNlcihfa2V5LCB2YWwudmFsdWUpO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc01hcCh2YWwpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBbYE1hcCgke3ZhbC5zaXplfSlgXTogWy4uLnZhbC5lbnRyaWVzKCldLnJlZHVjZSgoZW50cmllcywgW2tleSwgdmFsXSkgPT4ge1xuICAgICAgICAgICAgICAgIGVudHJpZXNbYCR7a2V5fSA9PmBdID0gdmFsO1xuICAgICAgICAgICAgICAgIHJldHVybiBlbnRyaWVzO1xuICAgICAgICAgICAgfSwge30pXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzU2V0KHZhbCkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFtgU2V0KCR7dmFsLnNpemV9KWBdOiBbLi4udmFsLnZhbHVlcygpXVxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChpc09iamVjdCh2YWwpICYmICFpc0FycmF5KHZhbCkgJiYgIWlzUGxhaW5PYmplY3QodmFsKSkge1xuICAgICAgICByZXR1cm4gU3RyaW5nKHZhbCk7XG4gICAgfVxuICAgIHJldHVybiB2YWw7XG59O1xuXG5jb25zdCBFTVBUWV9PQkogPSAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJylcbiAgICA/IE9iamVjdC5mcmVlemUoe30pXG4gICAgOiB7fTtcbmNvbnN0IEVNUFRZX0FSUiA9IChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/IE9iamVjdC5mcmVlemUoW10pIDogW107XG5jb25zdCBOT09QID0gKCkgPT4geyB9O1xuLyoqXG4gKiBBbHdheXMgcmV0dXJuIGZhbHNlLlxuICovXG5jb25zdCBOTyA9ICgpID0+IGZhbHNlO1xuY29uc3Qgb25SRSA9IC9eb25bXmEtel0vO1xuY29uc3QgaXNPbiA9IChrZXkpID0+IG9uUkUudGVzdChrZXkpO1xuY29uc3QgaXNNb2RlbExpc3RlbmVyID0gKGtleSkgPT4ga2V5LnN0YXJ0c1dpdGgoJ29uVXBkYXRlOicpO1xuY29uc3QgZXh0ZW5kID0gT2JqZWN0LmFzc2lnbjtcbmNvbnN0IHJlbW92ZSA9IChhcnIsIGVsKSA9PiB7XG4gICAgY29uc3QgaSA9IGFyci5pbmRleE9mKGVsKTtcbiAgICBpZiAoaSA+IC0xKSB7XG4gICAgICAgIGFyci5zcGxpY2UoaSwgMSk7XG4gICAgfVxufTtcbmNvbnN0IGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbmNvbnN0IGhhc093biA9ICh2YWwsIGtleSkgPT4gaGFzT3duUHJvcGVydHkuY2FsbCh2YWwsIGtleSk7XG5jb25zdCBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcbmNvbnN0IGlzTWFwID0gKHZhbCkgPT4gdG9UeXBlU3RyaW5nKHZhbCkgPT09ICdbb2JqZWN0IE1hcF0nO1xuY29uc3QgaXNTZXQgPSAodmFsKSA9PiB0b1R5cGVTdHJpbmcodmFsKSA9PT0gJ1tvYmplY3QgU2V0XSc7XG5jb25zdCBpc0RhdGUgPSAodmFsKSA9PiB0b1R5cGVTdHJpbmcodmFsKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xuY29uc3QgaXNGdW5jdGlvbiA9ICh2YWwpID0+IHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbic7XG5jb25zdCBpc1N0cmluZyA9ICh2YWwpID0+IHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnO1xuY29uc3QgaXNTeW1ib2wgPSAodmFsKSA9PiB0eXBlb2YgdmFsID09PSAnc3ltYm9sJztcbmNvbnN0IGlzT2JqZWN0ID0gKHZhbCkgPT4gdmFsICE9PSBudWxsICYmIHR5cGVvZiB2YWwgPT09ICdvYmplY3QnO1xuY29uc3QgaXNQcm9taXNlID0gKHZhbCkgPT4ge1xuICAgIHJldHVybiBpc09iamVjdCh2YWwpICYmIGlzRnVuY3Rpb24odmFsLnRoZW4pICYmIGlzRnVuY3Rpb24odmFsLmNhdGNoKTtcbn07XG5jb25zdCBvYmplY3RUb1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5jb25zdCB0b1R5cGVTdHJpbmcgPSAodmFsdWUpID0+IG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpO1xuY29uc3QgdG9SYXdUeXBlID0gKHZhbHVlKSA9PiB7XG4gICAgLy8gZXh0cmFjdCBcIlJhd1R5cGVcIiBmcm9tIHN0cmluZ3MgbGlrZSBcIltvYmplY3QgUmF3VHlwZV1cIlxuICAgIHJldHVybiB0b1R5cGVTdHJpbmcodmFsdWUpLnNsaWNlKDgsIC0xKTtcbn07XG5jb25zdCBpc1BsYWluT2JqZWN0ID0gKHZhbCkgPT4gdG9UeXBlU3RyaW5nKHZhbCkgPT09ICdbb2JqZWN0IE9iamVjdF0nO1xuY29uc3QgaXNJbnRlZ2VyS2V5ID0gKGtleSkgPT4gaXNTdHJpbmcoa2V5KSAmJlxuICAgIGtleSAhPT0gJ05hTicgJiZcbiAgICBrZXlbMF0gIT09ICctJyAmJlxuICAgICcnICsgcGFyc2VJbnQoa2V5LCAxMCkgPT09IGtleTtcbmNvbnN0IGlzUmVzZXJ2ZWRQcm9wID0gLyojX19QVVJFX18qLyBtYWtlTWFwKFxuLy8gdGhlIGxlYWRpbmcgY29tbWEgaXMgaW50ZW50aW9uYWwgc28gZW1wdHkgc3RyaW5nIFwiXCIgaXMgYWxzbyBpbmNsdWRlZFxuJyxrZXkscmVmLHJlZl9mb3IscmVmX2tleSwnICtcbiAgICAnb25Wbm9kZUJlZm9yZU1vdW50LG9uVm5vZGVNb3VudGVkLCcgK1xuICAgICdvblZub2RlQmVmb3JlVXBkYXRlLG9uVm5vZGVVcGRhdGVkLCcgK1xuICAgICdvblZub2RlQmVmb3JlVW5tb3VudCxvblZub2RlVW5tb3VudGVkJyk7XG5jb25zdCBpc0J1aWx0SW5EaXJlY3RpdmUgPSAvKiNfX1BVUkVfXyovIG1ha2VNYXAoJ2JpbmQsY2xvYWssZWxzZS1pZixlbHNlLGZvcixodG1sLGlmLG1vZGVsLG9uLG9uY2UscHJlLHNob3csc2xvdCx0ZXh0LG1lbW8nKTtcbmNvbnN0IGNhY2hlU3RyaW5nRnVuY3Rpb24gPSAoZm4pID0+IHtcbiAgICBjb25zdCBjYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgcmV0dXJuICgoc3RyKSA9PiB7XG4gICAgICAgIGNvbnN0IGhpdCA9IGNhY2hlW3N0cl07XG4gICAgICAgIHJldHVybiBoaXQgfHwgKGNhY2hlW3N0cl0gPSBmbihzdHIpKTtcbiAgICB9KTtcbn07XG5jb25zdCBjYW1lbGl6ZVJFID0gLy0oXFx3KS9nO1xuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5jb25zdCBjYW1lbGl6ZSA9IGNhY2hlU3RyaW5nRnVuY3Rpb24oKHN0cikgPT4ge1xuICAgIHJldHVybiBzdHIucmVwbGFjZShjYW1lbGl6ZVJFLCAoXywgYykgPT4gKGMgPyBjLnRvVXBwZXJDYXNlKCkgOiAnJykpO1xufSk7XG5jb25zdCBoeXBoZW5hdGVSRSA9IC9cXEIoW0EtWl0pL2c7XG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmNvbnN0IGh5cGhlbmF0ZSA9IGNhY2hlU3RyaW5nRnVuY3Rpb24oKHN0cikgPT4gc3RyLnJlcGxhY2UoaHlwaGVuYXRlUkUsICctJDEnKS50b0xvd2VyQ2FzZSgpKTtcbi8qKlxuICogQHByaXZhdGVcbiAqL1xuY29uc3QgY2FwaXRhbGl6ZSA9IGNhY2hlU3RyaW5nRnVuY3Rpb24oKHN0cikgPT4gc3RyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyLnNsaWNlKDEpKTtcbi8qKlxuICogQHByaXZhdGVcbiAqL1xuY29uc3QgdG9IYW5kbGVyS2V5ID0gY2FjaGVTdHJpbmdGdW5jdGlvbigoc3RyKSA9PiBzdHIgPyBgb24ke2NhcGl0YWxpemUoc3RyKX1gIDogYGApO1xuLy8gY29tcGFyZSB3aGV0aGVyIGEgdmFsdWUgaGFzIGNoYW5nZWQsIGFjY291bnRpbmcgZm9yIE5hTi5cbmNvbnN0IGhhc0NoYW5nZWQgPSAodmFsdWUsIG9sZFZhbHVlKSA9PiAhT2JqZWN0LmlzKHZhbHVlLCBvbGRWYWx1ZSk7XG5jb25zdCBpbnZva2VBcnJheUZucyA9IChmbnMsIGFyZykgPT4ge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZm5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGZuc1tpXShhcmcpO1xuICAgIH1cbn07XG5jb25zdCBkZWYgPSAob2JqLCBrZXksIHZhbHVlKSA9PiB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIHZhbHVlXG4gICAgfSk7XG59O1xuY29uc3QgdG9OdW1iZXIgPSAodmFsKSA9PiB7XG4gICAgY29uc3QgbiA9IHBhcnNlRmxvYXQodmFsKTtcbiAgICByZXR1cm4gaXNOYU4obikgPyB2YWwgOiBuO1xufTtcbmxldCBfZ2xvYmFsVGhpcztcbmNvbnN0IGdldEdsb2JhbFRoaXMgPSAoKSA9PiB7XG4gICAgcmV0dXJuIChfZ2xvYmFsVGhpcyB8fFxuICAgICAgICAoX2dsb2JhbFRoaXMgPVxuICAgICAgICAgICAgdHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgICAgICAgPyBnbG9iYWxUaGlzXG4gICAgICAgICAgICAgICAgOiB0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgICAgICAgICAgPyBzZWxmXG4gICAgICAgICAgICAgICAgICAgIDogdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgICAgICAgICAgICAgID8gd2luZG93XG4gICAgICAgICAgICAgICAgICAgICAgICA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBnbG9iYWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHt9KSk7XG59O1xuY29uc3QgaWRlbnRSRSA9IC9eW18kYS16QS1aXFx4QTAtXFx1RkZGRl1bXyRhLXpBLVowLTlcXHhBMC1cXHVGRkZGXSokLztcbmZ1bmN0aW9uIGdlblByb3BzQWNjZXNzRXhwKG5hbWUpIHtcbiAgICByZXR1cm4gaWRlbnRSRS50ZXN0KG5hbWUpXG4gICAgICAgID8gYF9fcHJvcHMuJHtuYW1lfWBcbiAgICAgICAgOiBgX19wcm9wc1ske0pTT04uc3RyaW5naWZ5KG5hbWUpfV1gO1xufVxuXG5leHBvcnQgeyBFTVBUWV9BUlIsIEVNUFRZX09CSiwgTk8sIE5PT1AsIFBhdGNoRmxhZ05hbWVzLCBjYW1lbGl6ZSwgY2FwaXRhbGl6ZSwgZGVmLCBlc2NhcGVIdG1sLCBlc2NhcGVIdG1sQ29tbWVudCwgZXh0ZW5kLCBnZW5Qcm9wc0FjY2Vzc0V4cCwgZ2VuZXJhdGVDb2RlRnJhbWUsIGdldEdsb2JhbFRoaXMsIGhhc0NoYW5nZWQsIGhhc093biwgaHlwaGVuYXRlLCBpbmNsdWRlQm9vbGVhbkF0dHIsIGludm9rZUFycmF5Rm5zLCBpc0FycmF5LCBpc0Jvb2xlYW5BdHRyLCBpc0J1aWx0SW5EaXJlY3RpdmUsIGlzRGF0ZSwgaXNGdW5jdGlvbiwgaXNHbG9iYWxseVdoaXRlbGlzdGVkLCBpc0hUTUxUYWcsIGlzSW50ZWdlcktleSwgaXNLbm93bkh0bWxBdHRyLCBpc0tub3duU3ZnQXR0ciwgaXNNYXAsIGlzTW9kZWxMaXN0ZW5lciwgaXNPYmplY3QsIGlzT24sIGlzUGxhaW5PYmplY3QsIGlzUHJvbWlzZSwgaXNSZXNlcnZlZFByb3AsIGlzU1NSU2FmZUF0dHJOYW1lLCBpc1NWR1RhZywgaXNTZXQsIGlzU3BlY2lhbEJvb2xlYW5BdHRyLCBpc1N0cmluZywgaXNTeW1ib2wsIGlzVm9pZFRhZywgbG9vc2VFcXVhbCwgbG9vc2VJbmRleE9mLCBtYWtlTWFwLCBub3JtYWxpemVDbGFzcywgbm9ybWFsaXplUHJvcHMsIG5vcm1hbGl6ZVN0eWxlLCBvYmplY3RUb1N0cmluZywgcGFyc2VTdHJpbmdTdHlsZSwgcHJvcHNUb0F0dHJNYXAsIHJlbW92ZSwgc2xvdEZsYWdzVGV4dCwgc3RyaW5naWZ5U3R5bGUsIHRvRGlzcGxheVN0cmluZywgdG9IYW5kbGVyS2V5LCB0b051bWJlciwgdG9SYXdUeXBlLCB0b1R5cGVTdHJpbmcgfTtcbiIsImltcG9ydCB7IGV4dGVuZCwgaXNBcnJheSwgdG9OdW1iZXIsIGlzTWFwLCBpc0ludGVnZXJLZXksIGhhc093biwgaXNTeW1ib2wsIGlzT2JqZWN0LCBoYXNDaGFuZ2VkLCBtYWtlTWFwLCBjYXBpdGFsaXplLCB0b1Jhd1R5cGUsIGRlZiwgaXNGdW5jdGlvbiwgTk9PUCB9IGZyb20gJ0B2dWUvc2hhcmVkJztcblxuZnVuY3Rpb24gd2Fybihtc2csIC4uLmFyZ3MpIHtcbiAgICBjb25zb2xlLndhcm4oYFtWdWUgd2Fybl0gJHttc2d9YCwgLi4uYXJncyk7XG59XG5cbmxldCBhY3RpdmVFZmZlY3RTY29wZTtcbmNsYXNzIEVmZmVjdFNjb3BlIHtcbiAgICBjb25zdHJ1Y3RvcihkZXRhY2hlZCA9IGZhbHNlKSB7XG4gICAgICAgIHRoaXMuZGV0YWNoZWQgPSBkZXRhY2hlZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5hY3RpdmUgPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmVmZmVjdHMgPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jbGVhbnVwcyA9IFtdO1xuICAgICAgICB0aGlzLnBhcmVudCA9IGFjdGl2ZUVmZmVjdFNjb3BlO1xuICAgICAgICBpZiAoIWRldGFjaGVkICYmIGFjdGl2ZUVmZmVjdFNjb3BlKSB7XG4gICAgICAgICAgICB0aGlzLmluZGV4ID1cbiAgICAgICAgICAgICAgICAoYWN0aXZlRWZmZWN0U2NvcGUuc2NvcGVzIHx8IChhY3RpdmVFZmZlY3RTY29wZS5zY29wZXMgPSBbXSkpLnB1c2godGhpcykgLSAxO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJ1bihmbikge1xuICAgICAgICBpZiAodGhpcy5hY3RpdmUpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRFZmZlY3RTY29wZSA9IGFjdGl2ZUVmZmVjdFNjb3BlO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhY3RpdmVFZmZlY3RTY29wZSA9IHRoaXM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICBhY3RpdmVFZmZlY3RTY29wZSA9IGN1cnJlbnRFZmZlY3RTY29wZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgIHdhcm4oYGNhbm5vdCBydW4gYW4gaW5hY3RpdmUgZWZmZWN0IHNjb3BlLmApO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIG9uIG5vbi1kZXRhY2hlZCBzY29wZXNcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBvbigpIHtcbiAgICAgICAgYWN0aXZlRWZmZWN0U2NvcGUgPSB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBvbiBub24tZGV0YWNoZWQgc2NvcGVzXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgb2ZmKCkge1xuICAgICAgICBhY3RpdmVFZmZlY3RTY29wZSA9IHRoaXMucGFyZW50O1xuICAgIH1cbiAgICBzdG9wKGZyb21QYXJlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlKSB7XG4gICAgICAgICAgICBsZXQgaSwgbDtcbiAgICAgICAgICAgIGZvciAoaSA9IDAsIGwgPSB0aGlzLmVmZmVjdHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lZmZlY3RzW2ldLnN0b3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoaSA9IDAsIGwgPSB0aGlzLmNsZWFudXBzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xlYW51cHNbaV0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnNjb3Blcykge1xuICAgICAgICAgICAgICAgIGZvciAoaSA9IDAsIGwgPSB0aGlzLnNjb3Blcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY29wZXNbaV0uc3RvcCh0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBuZXN0ZWQgc2NvcGUsIGRlcmVmZXJlbmNlIGZyb20gcGFyZW50IHRvIGF2b2lkIG1lbW9yeSBsZWFrc1xuICAgICAgICAgICAgaWYgKCF0aGlzLmRldGFjaGVkICYmIHRoaXMucGFyZW50ICYmICFmcm9tUGFyZW50KSB7XG4gICAgICAgICAgICAgICAgLy8gb3B0aW1pemVkIE8oMSkgcmVtb3ZhbFxuICAgICAgICAgICAgICAgIGNvbnN0IGxhc3QgPSB0aGlzLnBhcmVudC5zY29wZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgaWYgKGxhc3QgJiYgbGFzdCAhPT0gdGhpcykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5zY29wZXNbdGhpcy5pbmRleF0gPSBsYXN0O1xuICAgICAgICAgICAgICAgICAgICBsYXN0LmluZGV4ID0gdGhpcy5pbmRleDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBlZmZlY3RTY29wZShkZXRhY2hlZCkge1xuICAgIHJldHVybiBuZXcgRWZmZWN0U2NvcGUoZGV0YWNoZWQpO1xufVxuZnVuY3Rpb24gcmVjb3JkRWZmZWN0U2NvcGUoZWZmZWN0LCBzY29wZSA9IGFjdGl2ZUVmZmVjdFNjb3BlKSB7XG4gICAgaWYgKHNjb3BlICYmIHNjb3BlLmFjdGl2ZSkge1xuICAgICAgICBzY29wZS5lZmZlY3RzLnB1c2goZWZmZWN0KTtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRDdXJyZW50U2NvcGUoKSB7XG4gICAgcmV0dXJuIGFjdGl2ZUVmZmVjdFNjb3BlO1xufVxuZnVuY3Rpb24gb25TY29wZURpc3Bvc2UoZm4pIHtcbiAgICBpZiAoYWN0aXZlRWZmZWN0U2NvcGUpIHtcbiAgICAgICAgYWN0aXZlRWZmZWN0U2NvcGUuY2xlYW51cHMucHVzaChmbik7XG4gICAgfVxuICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICB3YXJuKGBvblNjb3BlRGlzcG9zZSgpIGlzIGNhbGxlZCB3aGVuIHRoZXJlIGlzIG5vIGFjdGl2ZSBlZmZlY3Qgc2NvcGVgICtcbiAgICAgICAgICAgIGAgdG8gYmUgYXNzb2NpYXRlZCB3aXRoLmApO1xuICAgIH1cbn1cblxuY29uc3QgY3JlYXRlRGVwID0gKGVmZmVjdHMpID0+IHtcbiAgICBjb25zdCBkZXAgPSBuZXcgU2V0KGVmZmVjdHMpO1xuICAgIGRlcC53ID0gMDtcbiAgICBkZXAubiA9IDA7XG4gICAgcmV0dXJuIGRlcDtcbn07XG5jb25zdCB3YXNUcmFja2VkID0gKGRlcCkgPT4gKGRlcC53ICYgdHJhY2tPcEJpdCkgPiAwO1xuY29uc3QgbmV3VHJhY2tlZCA9IChkZXApID0+IChkZXAubiAmIHRyYWNrT3BCaXQpID4gMDtcbmNvbnN0IGluaXREZXBNYXJrZXJzID0gKHsgZGVwcyB9KSA9PiB7XG4gICAgaWYgKGRlcHMubGVuZ3RoKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGVwcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZGVwc1tpXS53IHw9IHRyYWNrT3BCaXQ7IC8vIHNldCB3YXMgdHJhY2tlZFxuICAgICAgICB9XG4gICAgfVxufTtcbmNvbnN0IGZpbmFsaXplRGVwTWFya2VycyA9IChlZmZlY3QpID0+IHtcbiAgICBjb25zdCB7IGRlcHMgfSA9IGVmZmVjdDtcbiAgICBpZiAoZGVwcy5sZW5ndGgpIHtcbiAgICAgICAgbGV0IHB0ciA9IDA7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGVwcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgZGVwID0gZGVwc1tpXTtcbiAgICAgICAgICAgIGlmICh3YXNUcmFja2VkKGRlcCkgJiYgIW5ld1RyYWNrZWQoZGVwKSkge1xuICAgICAgICAgICAgICAgIGRlcC5kZWxldGUoZWZmZWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGRlcHNbcHRyKytdID0gZGVwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gY2xlYXIgYml0c1xuICAgICAgICAgICAgZGVwLncgJj0gfnRyYWNrT3BCaXQ7XG4gICAgICAgICAgICBkZXAubiAmPSB+dHJhY2tPcEJpdDtcbiAgICAgICAgfVxuICAgICAgICBkZXBzLmxlbmd0aCA9IHB0cjtcbiAgICB9XG59O1xuXG5jb25zdCB0YXJnZXRNYXAgPSBuZXcgV2Vha01hcCgpO1xuLy8gVGhlIG51bWJlciBvZiBlZmZlY3RzIGN1cnJlbnRseSBiZWluZyB0cmFja2VkIHJlY3Vyc2l2ZWx5LlxubGV0IGVmZmVjdFRyYWNrRGVwdGggPSAwO1xubGV0IHRyYWNrT3BCaXQgPSAxO1xuLyoqXG4gKiBUaGUgYml0d2lzZSB0cmFjayBtYXJrZXJzIHN1cHBvcnQgYXQgbW9zdCAzMCBsZXZlbHMgb2YgcmVjdXJzaW9uLlxuICogVGhpcyB2YWx1ZSBpcyBjaG9zZW4gdG8gZW5hYmxlIG1vZGVybiBKUyBlbmdpbmVzIHRvIHVzZSBhIFNNSSBvbiBhbGwgcGxhdGZvcm1zLlxuICogV2hlbiByZWN1cnNpb24gZGVwdGggaXMgZ3JlYXRlciwgZmFsbCBiYWNrIHRvIHVzaW5nIGEgZnVsbCBjbGVhbnVwLlxuICovXG5jb25zdCBtYXhNYXJrZXJCaXRzID0gMzA7XG5sZXQgYWN0aXZlRWZmZWN0O1xuY29uc3QgSVRFUkFURV9LRVkgPSBTeW1ib2woKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gJ2l0ZXJhdGUnIDogJycpO1xuY29uc3QgTUFQX0tFWV9JVEVSQVRFX0tFWSA9IFN5bWJvbCgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyAnTWFwIGtleSBpdGVyYXRlJyA6ICcnKTtcbmNsYXNzIFJlYWN0aXZlRWZmZWN0IHtcbiAgICBjb25zdHJ1Y3Rvcihmbiwgc2NoZWR1bGVyID0gbnVsbCwgc2NvcGUpIHtcbiAgICAgICAgdGhpcy5mbiA9IGZuO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgICAgdGhpcy5hY3RpdmUgPSB0cnVlO1xuICAgICAgICB0aGlzLmRlcHMgPSBbXTtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHJlY29yZEVmZmVjdFNjb3BlKHRoaXMsIHNjb3BlKTtcbiAgICB9XG4gICAgcnVuKCkge1xuICAgICAgICBpZiAoIXRoaXMuYWN0aXZlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mbigpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBwYXJlbnQgPSBhY3RpdmVFZmZlY3Q7XG4gICAgICAgIGxldCBsYXN0U2hvdWxkVHJhY2sgPSBzaG91bGRUcmFjaztcbiAgICAgICAgd2hpbGUgKHBhcmVudCkge1xuICAgICAgICAgICAgaWYgKHBhcmVudCA9PT0gdGhpcykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gYWN0aXZlRWZmZWN0O1xuICAgICAgICAgICAgYWN0aXZlRWZmZWN0ID0gdGhpcztcbiAgICAgICAgICAgIHNob3VsZFRyYWNrID0gdHJ1ZTtcbiAgICAgICAgICAgIHRyYWNrT3BCaXQgPSAxIDw8ICsrZWZmZWN0VHJhY2tEZXB0aDtcbiAgICAgICAgICAgIGlmIChlZmZlY3RUcmFja0RlcHRoIDw9IG1heE1hcmtlckJpdHMpIHtcbiAgICAgICAgICAgICAgICBpbml0RGVwTWFya2Vycyh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNsZWFudXBFZmZlY3QodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mbigpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgaWYgKGVmZmVjdFRyYWNrRGVwdGggPD0gbWF4TWFya2VyQml0cykge1xuICAgICAgICAgICAgICAgIGZpbmFsaXplRGVwTWFya2Vycyh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyYWNrT3BCaXQgPSAxIDw8IC0tZWZmZWN0VHJhY2tEZXB0aDtcbiAgICAgICAgICAgIGFjdGl2ZUVmZmVjdCA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgc2hvdWxkVHJhY2sgPSBsYXN0U2hvdWxkVHJhY2s7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGlmICh0aGlzLmRlZmVyU3RvcCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHN0b3AoKSB7XG4gICAgICAgIC8vIHN0b3BwZWQgd2hpbGUgcnVubmluZyBpdHNlbGYgLSBkZWZlciB0aGUgY2xlYW51cFxuICAgICAgICBpZiAoYWN0aXZlRWZmZWN0ID09PSB0aGlzKSB7XG4gICAgICAgICAgICB0aGlzLmRlZmVyU3RvcCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5hY3RpdmUpIHtcbiAgICAgICAgICAgIGNsZWFudXBFZmZlY3QodGhpcyk7XG4gICAgICAgICAgICBpZiAodGhpcy5vblN0b3ApIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uU3RvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGNsZWFudXBFZmZlY3QoZWZmZWN0KSB7XG4gICAgY29uc3QgeyBkZXBzIH0gPSBlZmZlY3Q7XG4gICAgaWYgKGRlcHMubGVuZ3RoKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGVwcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZGVwc1tpXS5kZWxldGUoZWZmZWN0KTtcbiAgICAgICAgfVxuICAgICAgICBkZXBzLmxlbmd0aCA9IDA7XG4gICAgfVxufVxuZnVuY3Rpb24gZWZmZWN0KGZuLCBvcHRpb25zKSB7XG4gICAgaWYgKGZuLmVmZmVjdCkge1xuICAgICAgICBmbiA9IGZuLmVmZmVjdC5mbjtcbiAgICB9XG4gICAgY29uc3QgX2VmZmVjdCA9IG5ldyBSZWFjdGl2ZUVmZmVjdChmbik7XG4gICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgICAgZXh0ZW5kKF9lZmZlY3QsIG9wdGlvbnMpO1xuICAgICAgICBpZiAob3B0aW9ucy5zY29wZSlcbiAgICAgICAgICAgIHJlY29yZEVmZmVjdFNjb3BlKF9lZmZlY3QsIG9wdGlvbnMuc2NvcGUpO1xuICAgIH1cbiAgICBpZiAoIW9wdGlvbnMgfHwgIW9wdGlvbnMubGF6eSkge1xuICAgICAgICBfZWZmZWN0LnJ1bigpO1xuICAgIH1cbiAgICBjb25zdCBydW5uZXIgPSBfZWZmZWN0LnJ1bi5iaW5kKF9lZmZlY3QpO1xuICAgIHJ1bm5lci5lZmZlY3QgPSBfZWZmZWN0O1xuICAgIHJldHVybiBydW5uZXI7XG59XG5mdW5jdGlvbiBzdG9wKHJ1bm5lcikge1xuICAgIHJ1bm5lci5lZmZlY3Quc3RvcCgpO1xufVxubGV0IHNob3VsZFRyYWNrID0gdHJ1ZTtcbmNvbnN0IHRyYWNrU3RhY2sgPSBbXTtcbmZ1bmN0aW9uIHBhdXNlVHJhY2tpbmcoKSB7XG4gICAgdHJhY2tTdGFjay5wdXNoKHNob3VsZFRyYWNrKTtcbiAgICBzaG91bGRUcmFjayA9IGZhbHNlO1xufVxuZnVuY3Rpb24gZW5hYmxlVHJhY2tpbmcoKSB7XG4gICAgdHJhY2tTdGFjay5wdXNoKHNob3VsZFRyYWNrKTtcbiAgICBzaG91bGRUcmFjayA9IHRydWU7XG59XG5mdW5jdGlvbiByZXNldFRyYWNraW5nKCkge1xuICAgIGNvbnN0IGxhc3QgPSB0cmFja1N0YWNrLnBvcCgpO1xuICAgIHNob3VsZFRyYWNrID0gbGFzdCA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IGxhc3Q7XG59XG5mdW5jdGlvbiB0cmFjayh0YXJnZXQsIHR5cGUsIGtleSkge1xuICAgIGlmIChzaG91bGRUcmFjayAmJiBhY3RpdmVFZmZlY3QpIHtcbiAgICAgICAgbGV0IGRlcHNNYXAgPSB0YXJnZXRNYXAuZ2V0KHRhcmdldCk7XG4gICAgICAgIGlmICghZGVwc01hcCkge1xuICAgICAgICAgICAgdGFyZ2V0TWFwLnNldCh0YXJnZXQsIChkZXBzTWFwID0gbmV3IE1hcCgpKSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGRlcCA9IGRlcHNNYXAuZ2V0KGtleSk7XG4gICAgICAgIGlmICghZGVwKSB7XG4gICAgICAgICAgICBkZXBzTWFwLnNldChrZXksIChkZXAgPSBjcmVhdGVEZXAoKSkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGV2ZW50SW5mbyA9IChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKVxuICAgICAgICAgICAgPyB7IGVmZmVjdDogYWN0aXZlRWZmZWN0LCB0YXJnZXQsIHR5cGUsIGtleSB9XG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgdHJhY2tFZmZlY3RzKGRlcCwgZXZlbnRJbmZvKTtcbiAgICB9XG59XG5mdW5jdGlvbiB0cmFja0VmZmVjdHMoZGVwLCBkZWJ1Z2dlckV2ZW50RXh0cmFJbmZvKSB7XG4gICAgbGV0IHNob3VsZFRyYWNrID0gZmFsc2U7XG4gICAgaWYgKGVmZmVjdFRyYWNrRGVwdGggPD0gbWF4TWFya2VyQml0cykge1xuICAgICAgICBpZiAoIW5ld1RyYWNrZWQoZGVwKSkge1xuICAgICAgICAgICAgZGVwLm4gfD0gdHJhY2tPcEJpdDsgLy8gc2V0IG5ld2x5IHRyYWNrZWRcbiAgICAgICAgICAgIHNob3VsZFRyYWNrID0gIXdhc1RyYWNrZWQoZGVwKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gRnVsbCBjbGVhbnVwIG1vZGUuXG4gICAgICAgIHNob3VsZFRyYWNrID0gIWRlcC5oYXMoYWN0aXZlRWZmZWN0KTtcbiAgICB9XG4gICAgaWYgKHNob3VsZFRyYWNrKSB7XG4gICAgICAgIGRlcC5hZGQoYWN0aXZlRWZmZWN0KTtcbiAgICAgICAgYWN0aXZlRWZmZWN0LmRlcHMucHVzaChkZXApO1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGFjdGl2ZUVmZmVjdC5vblRyYWNrKSB7XG4gICAgICAgICAgICBhY3RpdmVFZmZlY3Qub25UcmFjayhPYmplY3QuYXNzaWduKHsgZWZmZWN0OiBhY3RpdmVFZmZlY3QgfSwgZGVidWdnZXJFdmVudEV4dHJhSW5mbykpO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gdHJpZ2dlcih0YXJnZXQsIHR5cGUsIGtleSwgbmV3VmFsdWUsIG9sZFZhbHVlLCBvbGRUYXJnZXQpIHtcbiAgICBjb25zdCBkZXBzTWFwID0gdGFyZ2V0TWFwLmdldCh0YXJnZXQpO1xuICAgIGlmICghZGVwc01hcCkge1xuICAgICAgICAvLyBuZXZlciBiZWVuIHRyYWNrZWRcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgZGVwcyA9IFtdO1xuICAgIGlmICh0eXBlID09PSBcImNsZWFyXCIgLyogVHJpZ2dlck9wVHlwZXMuQ0xFQVIgKi8pIHtcbiAgICAgICAgLy8gY29sbGVjdGlvbiBiZWluZyBjbGVhcmVkXG4gICAgICAgIC8vIHRyaWdnZXIgYWxsIGVmZmVjdHMgZm9yIHRhcmdldFxuICAgICAgICBkZXBzID0gWy4uLmRlcHNNYXAudmFsdWVzKCldO1xuICAgIH1cbiAgICBlbHNlIGlmIChrZXkgPT09ICdsZW5ndGgnICYmIGlzQXJyYXkodGFyZ2V0KSkge1xuICAgICAgICBjb25zdCBuZXdMZW5ndGggPSB0b051bWJlcihuZXdWYWx1ZSk7XG4gICAgICAgIGRlcHNNYXAuZm9yRWFjaCgoZGVwLCBrZXkpID0+IHtcbiAgICAgICAgICAgIGlmIChrZXkgPT09ICdsZW5ndGgnIHx8IGtleSA+PSBuZXdMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBkZXBzLnB1c2goZGVwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBzY2hlZHVsZSBydW5zIGZvciBTRVQgfCBBREQgfCBERUxFVEVcbiAgICAgICAgaWYgKGtleSAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBkZXBzLnB1c2goZGVwc01hcC5nZXQoa2V5KSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gYWxzbyBydW4gZm9yIGl0ZXJhdGlvbiBrZXkgb24gQUREIHwgREVMRVRFIHwgTWFwLlNFVFxuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJhZGRcIiAvKiBUcmlnZ2VyT3BUeXBlcy5BREQgKi86XG4gICAgICAgICAgICAgICAgaWYgKCFpc0FycmF5KHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVwcy5wdXNoKGRlcHNNYXAuZ2V0KElURVJBVEVfS0VZKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc01hcCh0YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXBzLnB1c2goZGVwc01hcC5nZXQoTUFQX0tFWV9JVEVSQVRFX0tFWSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzSW50ZWdlcktleShrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIG5ldyBpbmRleCBhZGRlZCB0byBhcnJheSAtPiBsZW5ndGggY2hhbmdlc1xuICAgICAgICAgICAgICAgICAgICBkZXBzLnB1c2goZGVwc01hcC5nZXQoJ2xlbmd0aCcpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiZGVsZXRlXCIgLyogVHJpZ2dlck9wVHlwZXMuREVMRVRFICovOlxuICAgICAgICAgICAgICAgIGlmICghaXNBcnJheSh0YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlcHMucHVzaChkZXBzTWFwLmdldChJVEVSQVRFX0tFWSkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNNYXAodGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVwcy5wdXNoKGRlcHNNYXAuZ2V0KE1BUF9LRVlfSVRFUkFURV9LRVkpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJzZXRcIiAvKiBUcmlnZ2VyT3BUeXBlcy5TRVQgKi86XG4gICAgICAgICAgICAgICAgaWYgKGlzTWFwKHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVwcy5wdXNoKGRlcHNNYXAuZ2V0KElURVJBVEVfS0VZKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGV2ZW50SW5mbyA9IChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKVxuICAgICAgICA/IHsgdGFyZ2V0LCB0eXBlLCBrZXksIG5ld1ZhbHVlLCBvbGRWYWx1ZSwgb2xkVGFyZ2V0IH1cbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgaWYgKGRlcHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGlmIChkZXBzWzBdKSB7XG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgdHJpZ2dlckVmZmVjdHMoZGVwc1swXSwgZXZlbnRJbmZvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRyaWdnZXJFZmZlY3RzKGRlcHNbMF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBlZmZlY3RzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgZGVwIG9mIGRlcHMpIHtcbiAgICAgICAgICAgIGlmIChkZXApIHtcbiAgICAgICAgICAgICAgICBlZmZlY3RzLnB1c2goLi4uZGVwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICB0cmlnZ2VyRWZmZWN0cyhjcmVhdGVEZXAoZWZmZWN0cyksIGV2ZW50SW5mbyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0cmlnZ2VyRWZmZWN0cyhjcmVhdGVEZXAoZWZmZWN0cykpO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gdHJpZ2dlckVmZmVjdHMoZGVwLCBkZWJ1Z2dlckV2ZW50RXh0cmFJbmZvKSB7XG4gICAgLy8gc3ByZWFkIGludG8gYXJyYXkgZm9yIHN0YWJpbGl6YXRpb25cbiAgICBjb25zdCBlZmZlY3RzID0gaXNBcnJheShkZXApID8gZGVwIDogWy4uLmRlcF07XG4gICAgZm9yIChjb25zdCBlZmZlY3Qgb2YgZWZmZWN0cykge1xuICAgICAgICBpZiAoZWZmZWN0LmNvbXB1dGVkKSB7XG4gICAgICAgICAgICB0cmlnZ2VyRWZmZWN0KGVmZmVjdCwgZGVidWdnZXJFdmVudEV4dHJhSW5mbyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBlZmZlY3Qgb2YgZWZmZWN0cykge1xuICAgICAgICBpZiAoIWVmZmVjdC5jb21wdXRlZCkge1xuICAgICAgICAgICAgdHJpZ2dlckVmZmVjdChlZmZlY3QsIGRlYnVnZ2VyRXZlbnRFeHRyYUluZm8pO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gdHJpZ2dlckVmZmVjdChlZmZlY3QsIGRlYnVnZ2VyRXZlbnRFeHRyYUluZm8pIHtcbiAgICBpZiAoZWZmZWN0ICE9PSBhY3RpdmVFZmZlY3QgfHwgZWZmZWN0LmFsbG93UmVjdXJzZSkge1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGVmZmVjdC5vblRyaWdnZXIpIHtcbiAgICAgICAgICAgIGVmZmVjdC5vblRyaWdnZXIoZXh0ZW5kKHsgZWZmZWN0IH0sIGRlYnVnZ2VyRXZlbnRFeHRyYUluZm8pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZWZmZWN0LnNjaGVkdWxlcikge1xuICAgICAgICAgICAgZWZmZWN0LnNjaGVkdWxlcigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZWZmZWN0LnJ1bigpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5jb25zdCBpc05vblRyYWNrYWJsZUtleXMgPSAvKiNfX1BVUkVfXyovIG1ha2VNYXAoYF9fcHJvdG9fXyxfX3ZfaXNSZWYsX19pc1Z1ZWApO1xuY29uc3QgYnVpbHRJblN5bWJvbHMgPSBuZXcgU2V0KFxuLyojX19QVVJFX18qL1xuT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoU3ltYm9sKVxuICAgIC8vIGlvczEwLnggT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoU3ltYm9sKSBjYW4gZW51bWVyYXRlICdhcmd1bWVudHMnIGFuZCAnY2FsbGVyJ1xuICAgIC8vIGJ1dCBhY2Nlc3NpbmcgdGhlbSBvbiBTeW1ib2wgbGVhZHMgdG8gVHlwZUVycm9yIGJlY2F1c2UgU3ltYm9sIGlzIGEgc3RyaWN0IG1vZGVcbiAgICAvLyBmdW5jdGlvblxuICAgIC5maWx0ZXIoa2V5ID0+IGtleSAhPT0gJ2FyZ3VtZW50cycgJiYga2V5ICE9PSAnY2FsbGVyJylcbiAgICAubWFwKGtleSA9PiBTeW1ib2xba2V5XSlcbiAgICAuZmlsdGVyKGlzU3ltYm9sKSk7XG5jb25zdCBnZXQgPSAvKiNfX1BVUkVfXyovIGNyZWF0ZUdldHRlcigpO1xuY29uc3Qgc2hhbGxvd0dldCA9IC8qI19fUFVSRV9fKi8gY3JlYXRlR2V0dGVyKGZhbHNlLCB0cnVlKTtcbmNvbnN0IHJlYWRvbmx5R2V0ID0gLyojX19QVVJFX18qLyBjcmVhdGVHZXR0ZXIodHJ1ZSk7XG5jb25zdCBzaGFsbG93UmVhZG9ubHlHZXQgPSAvKiNfX1BVUkVfXyovIGNyZWF0ZUdldHRlcih0cnVlLCB0cnVlKTtcbmNvbnN0IGFycmF5SW5zdHJ1bWVudGF0aW9ucyA9IC8qI19fUFVSRV9fKi8gY3JlYXRlQXJyYXlJbnN0cnVtZW50YXRpb25zKCk7XG5mdW5jdGlvbiBjcmVhdGVBcnJheUluc3RydW1lbnRhdGlvbnMoKSB7XG4gICAgY29uc3QgaW5zdHJ1bWVudGF0aW9ucyA9IHt9O1xuICAgIFsnaW5jbHVkZXMnLCAnaW5kZXhPZicsICdsYXN0SW5kZXhPZiddLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgaW5zdHJ1bWVudGF0aW9uc1trZXldID0gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgIGNvbnN0IGFyciA9IHRvUmF3KHRoaXMpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSB0aGlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgIHRyYWNrKGFyciwgXCJnZXRcIiAvKiBUcmFja09wVHlwZXMuR0VUICovLCBpICsgJycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gd2UgcnVuIHRoZSBtZXRob2QgdXNpbmcgdGhlIG9yaWdpbmFsIGFyZ3MgZmlyc3QgKHdoaWNoIG1heSBiZSByZWFjdGl2ZSlcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGFycltrZXldKC4uLmFyZ3MpO1xuICAgICAgICAgICAgaWYgKHJlcyA9PT0gLTEgfHwgcmVzID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIC8vIGlmIHRoYXQgZGlkbid0IHdvcmssIHJ1biBpdCBhZ2FpbiB1c2luZyByYXcgdmFsdWVzLlxuICAgICAgICAgICAgICAgIHJldHVybiBhcnJba2V5XSguLi5hcmdzLm1hcCh0b1JhdykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KTtcbiAgICBbJ3B1c2gnLCAncG9wJywgJ3NoaWZ0JywgJ3Vuc2hpZnQnLCAnc3BsaWNlJ10uZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICBpbnN0cnVtZW50YXRpb25zW2tleV0gPSBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICAgICAgcGF1c2VUcmFja2luZygpO1xuICAgICAgICAgICAgY29uc3QgcmVzID0gdG9SYXcodGhpcylba2V5XS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgICAgIHJlc2V0VHJhY2tpbmcoKTtcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH07XG4gICAgfSk7XG4gICAgcmV0dXJuIGluc3RydW1lbnRhdGlvbnM7XG59XG5mdW5jdGlvbiBjcmVhdGVHZXR0ZXIoaXNSZWFkb25seSA9IGZhbHNlLCBzaGFsbG93ID0gZmFsc2UpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gZ2V0KHRhcmdldCwga2V5LCByZWNlaXZlcikge1xuICAgICAgICBpZiAoa2V5ID09PSBcIl9fdl9pc1JlYWN0aXZlXCIgLyogUmVhY3RpdmVGbGFncy5JU19SRUFDVElWRSAqLykge1xuICAgICAgICAgICAgcmV0dXJuICFpc1JlYWRvbmx5O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGtleSA9PT0gXCJfX3ZfaXNSZWFkb25seVwiIC8qIFJlYWN0aXZlRmxhZ3MuSVNfUkVBRE9OTFkgKi8pIHtcbiAgICAgICAgICAgIHJldHVybiBpc1JlYWRvbmx5O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGtleSA9PT0gXCJfX3ZfaXNTaGFsbG93XCIgLyogUmVhY3RpdmVGbGFncy5JU19TSEFMTE9XICovKSB7XG4gICAgICAgICAgICByZXR1cm4gc2hhbGxvdztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChrZXkgPT09IFwiX192X3Jhd1wiIC8qIFJlYWN0aXZlRmxhZ3MuUkFXICovICYmXG4gICAgICAgICAgICByZWNlaXZlciA9PT1cbiAgICAgICAgICAgICAgICAoaXNSZWFkb25seVxuICAgICAgICAgICAgICAgICAgICA/IHNoYWxsb3dcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc2hhbGxvd1JlYWRvbmx5TWFwXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHJlYWRvbmx5TWFwXG4gICAgICAgICAgICAgICAgICAgIDogc2hhbGxvd1xuICAgICAgICAgICAgICAgICAgICAgICAgPyBzaGFsbG93UmVhY3RpdmVNYXBcbiAgICAgICAgICAgICAgICAgICAgICAgIDogcmVhY3RpdmVNYXApLmdldCh0YXJnZXQpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRhcmdldElzQXJyYXkgPSBpc0FycmF5KHRhcmdldCk7XG4gICAgICAgIGlmICghaXNSZWFkb25seSAmJiB0YXJnZXRJc0FycmF5ICYmIGhhc093bihhcnJheUluc3RydW1lbnRhdGlvbnMsIGtleSkpIHtcbiAgICAgICAgICAgIHJldHVybiBSZWZsZWN0LmdldChhcnJheUluc3RydW1lbnRhdGlvbnMsIGtleSwgcmVjZWl2ZXIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlcyA9IFJlZmxlY3QuZ2V0KHRhcmdldCwga2V5LCByZWNlaXZlcik7XG4gICAgICAgIGlmIChpc1N5bWJvbChrZXkpID8gYnVpbHRJblN5bWJvbHMuaGFzKGtleSkgOiBpc05vblRyYWNrYWJsZUtleXMoa2V5KSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzUmVhZG9ubHkpIHtcbiAgICAgICAgICAgIHRyYWNrKHRhcmdldCwgXCJnZXRcIiAvKiBUcmFja09wVHlwZXMuR0VUICovLCBrZXkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzaGFsbG93KSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1JlZihyZXMpKSB7XG4gICAgICAgICAgICAvLyByZWYgdW53cmFwcGluZyAtIHNraXAgdW53cmFwIGZvciBBcnJheSArIGludGVnZXIga2V5LlxuICAgICAgICAgICAgcmV0dXJuIHRhcmdldElzQXJyYXkgJiYgaXNJbnRlZ2VyS2V5KGtleSkgPyByZXMgOiByZXMudmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzT2JqZWN0KHJlcykpIHtcbiAgICAgICAgICAgIC8vIENvbnZlcnQgcmV0dXJuZWQgdmFsdWUgaW50byBhIHByb3h5IGFzIHdlbGwuIHdlIGRvIHRoZSBpc09iamVjdCBjaGVja1xuICAgICAgICAgICAgLy8gaGVyZSB0byBhdm9pZCBpbnZhbGlkIHZhbHVlIHdhcm5pbmcuIEFsc28gbmVlZCB0byBsYXp5IGFjY2VzcyByZWFkb25seVxuICAgICAgICAgICAgLy8gYW5kIHJlYWN0aXZlIGhlcmUgdG8gYXZvaWQgY2lyY3VsYXIgZGVwZW5kZW5jeS5cbiAgICAgICAgICAgIHJldHVybiBpc1JlYWRvbmx5ID8gcmVhZG9ubHkocmVzKSA6IHJlYWN0aXZlKHJlcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9O1xufVxuY29uc3Qgc2V0ID0gLyojX19QVVJFX18qLyBjcmVhdGVTZXR0ZXIoKTtcbmNvbnN0IHNoYWxsb3dTZXQgPSAvKiNfX1BVUkVfXyovIGNyZWF0ZVNldHRlcih0cnVlKTtcbmZ1bmN0aW9uIGNyZWF0ZVNldHRlcihzaGFsbG93ID0gZmFsc2UpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gc2V0KHRhcmdldCwga2V5LCB2YWx1ZSwgcmVjZWl2ZXIpIHtcbiAgICAgICAgbGV0IG9sZFZhbHVlID0gdGFyZ2V0W2tleV07XG4gICAgICAgIGlmIChpc1JlYWRvbmx5KG9sZFZhbHVlKSAmJiBpc1JlZihvbGRWYWx1ZSkgJiYgIWlzUmVmKHZhbHVlKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc2hhbGxvdykge1xuICAgICAgICAgICAgaWYgKCFpc1NoYWxsb3codmFsdWUpICYmICFpc1JlYWRvbmx5KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIG9sZFZhbHVlID0gdG9SYXcob2xkVmFsdWUpO1xuICAgICAgICAgICAgICAgIHZhbHVlID0gdG9SYXcodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFpc0FycmF5KHRhcmdldCkgJiYgaXNSZWYob2xkVmFsdWUpICYmICFpc1JlZih2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBvbGRWYWx1ZS52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhhZEtleSA9IGlzQXJyYXkodGFyZ2V0KSAmJiBpc0ludGVnZXJLZXkoa2V5KVxuICAgICAgICAgICAgPyBOdW1iZXIoa2V5KSA8IHRhcmdldC5sZW5ndGhcbiAgICAgICAgICAgIDogaGFzT3duKHRhcmdldCwga2V5KTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gUmVmbGVjdC5zZXQodGFyZ2V0LCBrZXksIHZhbHVlLCByZWNlaXZlcik7XG4gICAgICAgIC8vIGRvbid0IHRyaWdnZXIgaWYgdGFyZ2V0IGlzIHNvbWV0aGluZyB1cCBpbiB0aGUgcHJvdG90eXBlIGNoYWluIG9mIG9yaWdpbmFsXG4gICAgICAgIGlmICh0YXJnZXQgPT09IHRvUmF3KHJlY2VpdmVyKSkge1xuICAgICAgICAgICAgaWYgKCFoYWRLZXkpIHtcbiAgICAgICAgICAgICAgICB0cmlnZ2VyKHRhcmdldCwgXCJhZGRcIiAvKiBUcmlnZ2VyT3BUeXBlcy5BREQgKi8sIGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaGFzQ2hhbmdlZCh2YWx1ZSwgb2xkVmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgdHJpZ2dlcih0YXJnZXQsIFwic2V0XCIgLyogVHJpZ2dlck9wVHlwZXMuU0VUICovLCBrZXksIHZhbHVlLCBvbGRWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xufVxuZnVuY3Rpb24gZGVsZXRlUHJvcGVydHkodGFyZ2V0LCBrZXkpIHtcbiAgICBjb25zdCBoYWRLZXkgPSBoYXNPd24odGFyZ2V0LCBrZXkpO1xuICAgIGNvbnN0IG9sZFZhbHVlID0gdGFyZ2V0W2tleV07XG4gICAgY29uc3QgcmVzdWx0ID0gUmVmbGVjdC5kZWxldGVQcm9wZXJ0eSh0YXJnZXQsIGtleSk7XG4gICAgaWYgKHJlc3VsdCAmJiBoYWRLZXkpIHtcbiAgICAgICAgdHJpZ2dlcih0YXJnZXQsIFwiZGVsZXRlXCIgLyogVHJpZ2dlck9wVHlwZXMuREVMRVRFICovLCBrZXksIHVuZGVmaW5lZCwgb2xkVmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gaGFzKHRhcmdldCwga2V5KSB7XG4gICAgY29uc3QgcmVzdWx0ID0gUmVmbGVjdC5oYXModGFyZ2V0LCBrZXkpO1xuICAgIGlmICghaXNTeW1ib2woa2V5KSB8fCAhYnVpbHRJblN5bWJvbHMuaGFzKGtleSkpIHtcbiAgICAgICAgdHJhY2sodGFyZ2V0LCBcImhhc1wiIC8qIFRyYWNrT3BUeXBlcy5IQVMgKi8sIGtleSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBvd25LZXlzKHRhcmdldCkge1xuICAgIHRyYWNrKHRhcmdldCwgXCJpdGVyYXRlXCIgLyogVHJhY2tPcFR5cGVzLklURVJBVEUgKi8sIGlzQXJyYXkodGFyZ2V0KSA/ICdsZW5ndGgnIDogSVRFUkFURV9LRVkpO1xuICAgIHJldHVybiBSZWZsZWN0Lm93bktleXModGFyZ2V0KTtcbn1cbmNvbnN0IG11dGFibGVIYW5kbGVycyA9IHtcbiAgICBnZXQsXG4gICAgc2V0LFxuICAgIGRlbGV0ZVByb3BlcnR5LFxuICAgIGhhcyxcbiAgICBvd25LZXlzXG59O1xuY29uc3QgcmVhZG9ubHlIYW5kbGVycyA9IHtcbiAgICBnZXQ6IHJlYWRvbmx5R2V0LFxuICAgIHNldCh0YXJnZXQsIGtleSkge1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICB3YXJuKGBTZXQgb3BlcmF0aW9uIG9uIGtleSBcIiR7U3RyaW5nKGtleSl9XCIgZmFpbGVkOiB0YXJnZXQgaXMgcmVhZG9ubHkuYCwgdGFyZ2V0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIGRlbGV0ZVByb3BlcnR5KHRhcmdldCwga2V5KSB7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgIHdhcm4oYERlbGV0ZSBvcGVyYXRpb24gb24ga2V5IFwiJHtTdHJpbmcoa2V5KX1cIiBmYWlsZWQ6IHRhcmdldCBpcyByZWFkb25seS5gLCB0YXJnZXQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn07XG5jb25zdCBzaGFsbG93UmVhY3RpdmVIYW5kbGVycyA9IC8qI19fUFVSRV9fKi8gZXh0ZW5kKHt9LCBtdXRhYmxlSGFuZGxlcnMsIHtcbiAgICBnZXQ6IHNoYWxsb3dHZXQsXG4gICAgc2V0OiBzaGFsbG93U2V0XG59KTtcbi8vIFByb3BzIGhhbmRsZXJzIGFyZSBzcGVjaWFsIGluIHRoZSBzZW5zZSB0aGF0IGl0IHNob3VsZCBub3QgdW53cmFwIHRvcC1sZXZlbFxuLy8gcmVmcyAoaW4gb3JkZXIgdG8gYWxsb3cgcmVmcyB0byBiZSBleHBsaWNpdGx5IHBhc3NlZCBkb3duKSwgYnV0IHNob3VsZFxuLy8gcmV0YWluIHRoZSByZWFjdGl2aXR5IG9mIHRoZSBub3JtYWwgcmVhZG9ubHkgb2JqZWN0LlxuY29uc3Qgc2hhbGxvd1JlYWRvbmx5SGFuZGxlcnMgPSAvKiNfX1BVUkVfXyovIGV4dGVuZCh7fSwgcmVhZG9ubHlIYW5kbGVycywge1xuICAgIGdldDogc2hhbGxvd1JlYWRvbmx5R2V0XG59KTtcblxuY29uc3QgdG9TaGFsbG93ID0gKHZhbHVlKSA9PiB2YWx1ZTtcbmNvbnN0IGdldFByb3RvID0gKHYpID0+IFJlZmxlY3QuZ2V0UHJvdG90eXBlT2Yodik7XG5mdW5jdGlvbiBnZXQkMSh0YXJnZXQsIGtleSwgaXNSZWFkb25seSA9IGZhbHNlLCBpc1NoYWxsb3cgPSBmYWxzZSkge1xuICAgIC8vICMxNzcyOiByZWFkb25seShyZWFjdGl2ZShNYXApKSBzaG91bGQgcmV0dXJuIHJlYWRvbmx5ICsgcmVhY3RpdmUgdmVyc2lvblxuICAgIC8vIG9mIHRoZSB2YWx1ZVxuICAgIHRhcmdldCA9IHRhcmdldFtcIl9fdl9yYXdcIiAvKiBSZWFjdGl2ZUZsYWdzLlJBVyAqL107XG4gICAgY29uc3QgcmF3VGFyZ2V0ID0gdG9SYXcodGFyZ2V0KTtcbiAgICBjb25zdCByYXdLZXkgPSB0b1JhdyhrZXkpO1xuICAgIGlmICghaXNSZWFkb25seSkge1xuICAgICAgICBpZiAoa2V5ICE9PSByYXdLZXkpIHtcbiAgICAgICAgICAgIHRyYWNrKHJhd1RhcmdldCwgXCJnZXRcIiAvKiBUcmFja09wVHlwZXMuR0VUICovLCBrZXkpO1xuICAgICAgICB9XG4gICAgICAgIHRyYWNrKHJhd1RhcmdldCwgXCJnZXRcIiAvKiBUcmFja09wVHlwZXMuR0VUICovLCByYXdLZXkpO1xuICAgIH1cbiAgICBjb25zdCB7IGhhcyB9ID0gZ2V0UHJvdG8ocmF3VGFyZ2V0KTtcbiAgICBjb25zdCB3cmFwID0gaXNTaGFsbG93ID8gdG9TaGFsbG93IDogaXNSZWFkb25seSA/IHRvUmVhZG9ubHkgOiB0b1JlYWN0aXZlO1xuICAgIGlmIChoYXMuY2FsbChyYXdUYXJnZXQsIGtleSkpIHtcbiAgICAgICAgcmV0dXJuIHdyYXAodGFyZ2V0LmdldChrZXkpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaGFzLmNhbGwocmF3VGFyZ2V0LCByYXdLZXkpKSB7XG4gICAgICAgIHJldHVybiB3cmFwKHRhcmdldC5nZXQocmF3S2V5KSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHRhcmdldCAhPT0gcmF3VGFyZ2V0KSB7XG4gICAgICAgIC8vICMzNjAyIHJlYWRvbmx5KHJlYWN0aXZlKE1hcCkpXG4gICAgICAgIC8vIGVuc3VyZSB0aGF0IHRoZSBuZXN0ZWQgcmVhY3RpdmUgYE1hcGAgY2FuIGRvIHRyYWNraW5nIGZvciBpdHNlbGZcbiAgICAgICAgdGFyZ2V0LmdldChrZXkpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGhhcyQxKGtleSwgaXNSZWFkb25seSA9IGZhbHNlKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gdGhpc1tcIl9fdl9yYXdcIiAvKiBSZWFjdGl2ZUZsYWdzLlJBVyAqL107XG4gICAgY29uc3QgcmF3VGFyZ2V0ID0gdG9SYXcodGFyZ2V0KTtcbiAgICBjb25zdCByYXdLZXkgPSB0b1JhdyhrZXkpO1xuICAgIGlmICghaXNSZWFkb25seSkge1xuICAgICAgICBpZiAoa2V5ICE9PSByYXdLZXkpIHtcbiAgICAgICAgICAgIHRyYWNrKHJhd1RhcmdldCwgXCJoYXNcIiAvKiBUcmFja09wVHlwZXMuSEFTICovLCBrZXkpO1xuICAgICAgICB9XG4gICAgICAgIHRyYWNrKHJhd1RhcmdldCwgXCJoYXNcIiAvKiBUcmFja09wVHlwZXMuSEFTICovLCByYXdLZXkpO1xuICAgIH1cbiAgICByZXR1cm4ga2V5ID09PSByYXdLZXlcbiAgICAgICAgPyB0YXJnZXQuaGFzKGtleSlcbiAgICAgICAgOiB0YXJnZXQuaGFzKGtleSkgfHwgdGFyZ2V0LmhhcyhyYXdLZXkpO1xufVxuZnVuY3Rpb24gc2l6ZSh0YXJnZXQsIGlzUmVhZG9ubHkgPSBmYWxzZSkge1xuICAgIHRhcmdldCA9IHRhcmdldFtcIl9fdl9yYXdcIiAvKiBSZWFjdGl2ZUZsYWdzLlJBVyAqL107XG4gICAgIWlzUmVhZG9ubHkgJiYgdHJhY2sodG9SYXcodGFyZ2V0KSwgXCJpdGVyYXRlXCIgLyogVHJhY2tPcFR5cGVzLklURVJBVEUgKi8sIElURVJBVEVfS0VZKTtcbiAgICByZXR1cm4gUmVmbGVjdC5nZXQodGFyZ2V0LCAnc2l6ZScsIHRhcmdldCk7XG59XG5mdW5jdGlvbiBhZGQodmFsdWUpIHtcbiAgICB2YWx1ZSA9IHRvUmF3KHZhbHVlKTtcbiAgICBjb25zdCB0YXJnZXQgPSB0b1Jhdyh0aGlzKTtcbiAgICBjb25zdCBwcm90byA9IGdldFByb3RvKHRhcmdldCk7XG4gICAgY29uc3QgaGFkS2V5ID0gcHJvdG8uaGFzLmNhbGwodGFyZ2V0LCB2YWx1ZSk7XG4gICAgaWYgKCFoYWRLZXkpIHtcbiAgICAgICAgdGFyZ2V0LmFkZCh2YWx1ZSk7XG4gICAgICAgIHRyaWdnZXIodGFyZ2V0LCBcImFkZFwiIC8qIFRyaWdnZXJPcFR5cGVzLkFERCAqLywgdmFsdWUsIHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG59XG5mdW5jdGlvbiBzZXQkMShrZXksIHZhbHVlKSB7XG4gICAgdmFsdWUgPSB0b1Jhdyh2YWx1ZSk7XG4gICAgY29uc3QgdGFyZ2V0ID0gdG9SYXcodGhpcyk7XG4gICAgY29uc3QgeyBoYXMsIGdldCB9ID0gZ2V0UHJvdG8odGFyZ2V0KTtcbiAgICBsZXQgaGFkS2V5ID0gaGFzLmNhbGwodGFyZ2V0LCBrZXkpO1xuICAgIGlmICghaGFkS2V5KSB7XG4gICAgICAgIGtleSA9IHRvUmF3KGtleSk7XG4gICAgICAgIGhhZEtleSA9IGhhcy5jYWxsKHRhcmdldCwga2V5KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIGNoZWNrSWRlbnRpdHlLZXlzKHRhcmdldCwgaGFzLCBrZXkpO1xuICAgIH1cbiAgICBjb25zdCBvbGRWYWx1ZSA9IGdldC5jYWxsKHRhcmdldCwga2V5KTtcbiAgICB0YXJnZXQuc2V0KGtleSwgdmFsdWUpO1xuICAgIGlmICghaGFkS2V5KSB7XG4gICAgICAgIHRyaWdnZXIodGFyZ2V0LCBcImFkZFwiIC8qIFRyaWdnZXJPcFR5cGVzLkFERCAqLywga2V5LCB2YWx1ZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGhhc0NoYW5nZWQodmFsdWUsIG9sZFZhbHVlKSkge1xuICAgICAgICB0cmlnZ2VyKHRhcmdldCwgXCJzZXRcIiAvKiBUcmlnZ2VyT3BUeXBlcy5TRVQgKi8sIGtleSwgdmFsdWUsIG9sZFZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG59XG5mdW5jdGlvbiBkZWxldGVFbnRyeShrZXkpIHtcbiAgICBjb25zdCB0YXJnZXQgPSB0b1Jhdyh0aGlzKTtcbiAgICBjb25zdCB7IGhhcywgZ2V0IH0gPSBnZXRQcm90byh0YXJnZXQpO1xuICAgIGxldCBoYWRLZXkgPSBoYXMuY2FsbCh0YXJnZXQsIGtleSk7XG4gICAgaWYgKCFoYWRLZXkpIHtcbiAgICAgICAga2V5ID0gdG9SYXcoa2V5KTtcbiAgICAgICAgaGFkS2V5ID0gaGFzLmNhbGwodGFyZ2V0LCBrZXkpO1xuICAgIH1cbiAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgY2hlY2tJZGVudGl0eUtleXModGFyZ2V0LCBoYXMsIGtleSk7XG4gICAgfVxuICAgIGNvbnN0IG9sZFZhbHVlID0gZ2V0ID8gZ2V0LmNhbGwodGFyZ2V0LCBrZXkpIDogdW5kZWZpbmVkO1xuICAgIC8vIGZvcndhcmQgdGhlIG9wZXJhdGlvbiBiZWZvcmUgcXVldWVpbmcgcmVhY3Rpb25zXG4gICAgY29uc3QgcmVzdWx0ID0gdGFyZ2V0LmRlbGV0ZShrZXkpO1xuICAgIGlmIChoYWRLZXkpIHtcbiAgICAgICAgdHJpZ2dlcih0YXJnZXQsIFwiZGVsZXRlXCIgLyogVHJpZ2dlck9wVHlwZXMuREVMRVRFICovLCBrZXksIHVuZGVmaW5lZCwgb2xkVmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gdG9SYXcodGhpcyk7XG4gICAgY29uc3QgaGFkSXRlbXMgPSB0YXJnZXQuc2l6ZSAhPT0gMDtcbiAgICBjb25zdCBvbGRUYXJnZXQgPSAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJylcbiAgICAgICAgPyBpc01hcCh0YXJnZXQpXG4gICAgICAgICAgICA/IG5ldyBNYXAodGFyZ2V0KVxuICAgICAgICAgICAgOiBuZXcgU2V0KHRhcmdldClcbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgLy8gZm9yd2FyZCB0aGUgb3BlcmF0aW9uIGJlZm9yZSBxdWV1ZWluZyByZWFjdGlvbnNcbiAgICBjb25zdCByZXN1bHQgPSB0YXJnZXQuY2xlYXIoKTtcbiAgICBpZiAoaGFkSXRlbXMpIHtcbiAgICAgICAgdHJpZ2dlcih0YXJnZXQsIFwiY2xlYXJcIiAvKiBUcmlnZ2VyT3BUeXBlcy5DTEVBUiAqLywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIG9sZFRhcmdldCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBjcmVhdGVGb3JFYWNoKGlzUmVhZG9ubHksIGlzU2hhbGxvdykge1xuICAgIHJldHVybiBmdW5jdGlvbiBmb3JFYWNoKGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgICAgIGNvbnN0IG9ic2VydmVkID0gdGhpcztcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gb2JzZXJ2ZWRbXCJfX3ZfcmF3XCIgLyogUmVhY3RpdmVGbGFncy5SQVcgKi9dO1xuICAgICAgICBjb25zdCByYXdUYXJnZXQgPSB0b1Jhdyh0YXJnZXQpO1xuICAgICAgICBjb25zdCB3cmFwID0gaXNTaGFsbG93ID8gdG9TaGFsbG93IDogaXNSZWFkb25seSA/IHRvUmVhZG9ubHkgOiB0b1JlYWN0aXZlO1xuICAgICAgICAhaXNSZWFkb25seSAmJiB0cmFjayhyYXdUYXJnZXQsIFwiaXRlcmF0ZVwiIC8qIFRyYWNrT3BUeXBlcy5JVEVSQVRFICovLCBJVEVSQVRFX0tFWSk7XG4gICAgICAgIHJldHVybiB0YXJnZXQuZm9yRWFjaCgodmFsdWUsIGtleSkgPT4ge1xuICAgICAgICAgICAgLy8gaW1wb3J0YW50OiBtYWtlIHN1cmUgdGhlIGNhbGxiYWNrIGlzXG4gICAgICAgICAgICAvLyAxLiBpbnZva2VkIHdpdGggdGhlIHJlYWN0aXZlIG1hcCBhcyBgdGhpc2AgYW5kIDNyZCBhcmdcbiAgICAgICAgICAgIC8vIDIuIHRoZSB2YWx1ZSByZWNlaXZlZCBzaG91bGQgYmUgYSBjb3JyZXNwb25kaW5nIHJlYWN0aXZlL3JlYWRvbmx5LlxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmNhbGwodGhpc0FyZywgd3JhcCh2YWx1ZSksIHdyYXAoa2V5KSwgb2JzZXJ2ZWQpO1xuICAgICAgICB9KTtcbiAgICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlSXRlcmFibGVNZXRob2QobWV0aG9kLCBpc1JlYWRvbmx5LCBpc1NoYWxsb3cpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gdGhpc1tcIl9fdl9yYXdcIiAvKiBSZWFjdGl2ZUZsYWdzLlJBVyAqL107XG4gICAgICAgIGNvbnN0IHJhd1RhcmdldCA9IHRvUmF3KHRhcmdldCk7XG4gICAgICAgIGNvbnN0IHRhcmdldElzTWFwID0gaXNNYXAocmF3VGFyZ2V0KTtcbiAgICAgICAgY29uc3QgaXNQYWlyID0gbWV0aG9kID09PSAnZW50cmllcycgfHwgKG1ldGhvZCA9PT0gU3ltYm9sLml0ZXJhdG9yICYmIHRhcmdldElzTWFwKTtcbiAgICAgICAgY29uc3QgaXNLZXlPbmx5ID0gbWV0aG9kID09PSAna2V5cycgJiYgdGFyZ2V0SXNNYXA7XG4gICAgICAgIGNvbnN0IGlubmVySXRlcmF0b3IgPSB0YXJnZXRbbWV0aG9kXSguLi5hcmdzKTtcbiAgICAgICAgY29uc3Qgd3JhcCA9IGlzU2hhbGxvdyA/IHRvU2hhbGxvdyA6IGlzUmVhZG9ubHkgPyB0b1JlYWRvbmx5IDogdG9SZWFjdGl2ZTtcbiAgICAgICAgIWlzUmVhZG9ubHkgJiZcbiAgICAgICAgICAgIHRyYWNrKHJhd1RhcmdldCwgXCJpdGVyYXRlXCIgLyogVHJhY2tPcFR5cGVzLklURVJBVEUgKi8sIGlzS2V5T25seSA/IE1BUF9LRVlfSVRFUkFURV9LRVkgOiBJVEVSQVRFX0tFWSk7XG4gICAgICAgIC8vIHJldHVybiBhIHdyYXBwZWQgaXRlcmF0b3Igd2hpY2ggcmV0dXJucyBvYnNlcnZlZCB2ZXJzaW9ucyBvZiB0aGVcbiAgICAgICAgLy8gdmFsdWVzIGVtaXR0ZWQgZnJvbSB0aGUgcmVhbCBpdGVyYXRvclxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLy8gaXRlcmF0b3IgcHJvdG9jb2xcbiAgICAgICAgICAgIG5leHQoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyB2YWx1ZSwgZG9uZSB9ID0gaW5uZXJJdGVyYXRvci5uZXh0KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRvbmVcbiAgICAgICAgICAgICAgICAgICAgPyB7IHZhbHVlLCBkb25lIH1cbiAgICAgICAgICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogaXNQYWlyID8gW3dyYXAodmFsdWVbMF0pLCB3cmFwKHZhbHVlWzFdKV0gOiB3cmFwKHZhbHVlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvbmVcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvLyBpdGVyYWJsZSBwcm90b2NvbFxuICAgICAgICAgICAgW1N5bWJvbC5pdGVyYXRvcl0oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVJlYWRvbmx5TWV0aG9kKHR5cGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgY29uc3Qga2V5ID0gYXJnc1swXSA/IGBvbiBrZXkgXCIke2FyZ3NbMF19XCIgYCA6IGBgO1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGAke2NhcGl0YWxpemUodHlwZSl9IG9wZXJhdGlvbiAke2tleX1mYWlsZWQ6IHRhcmdldCBpcyByZWFkb25seS5gLCB0b1Jhdyh0aGlzKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHR5cGUgPT09IFwiZGVsZXRlXCIgLyogVHJpZ2dlck9wVHlwZXMuREVMRVRFICovID8gZmFsc2UgOiB0aGlzO1xuICAgIH07XG59XG5mdW5jdGlvbiBjcmVhdGVJbnN0cnVtZW50YXRpb25zKCkge1xuICAgIGNvbnN0IG11dGFibGVJbnN0cnVtZW50YXRpb25zID0ge1xuICAgICAgICBnZXQoa2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gZ2V0JDEodGhpcywga2V5KTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0IHNpemUoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2l6ZSh0aGlzKTtcbiAgICAgICAgfSxcbiAgICAgICAgaGFzOiBoYXMkMSxcbiAgICAgICAgYWRkLFxuICAgICAgICBzZXQ6IHNldCQxLFxuICAgICAgICBkZWxldGU6IGRlbGV0ZUVudHJ5LFxuICAgICAgICBjbGVhcixcbiAgICAgICAgZm9yRWFjaDogY3JlYXRlRm9yRWFjaChmYWxzZSwgZmFsc2UpXG4gICAgfTtcbiAgICBjb25zdCBzaGFsbG93SW5zdHJ1bWVudGF0aW9ucyA9IHtcbiAgICAgICAgZ2V0KGtleSkge1xuICAgICAgICAgICAgcmV0dXJuIGdldCQxKHRoaXMsIGtleSwgZmFsc2UsIHRydWUpO1xuICAgICAgICB9LFxuICAgICAgICBnZXQgc2l6ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBzaXplKHRoaXMpO1xuICAgICAgICB9LFxuICAgICAgICBoYXM6IGhhcyQxLFxuICAgICAgICBhZGQsXG4gICAgICAgIHNldDogc2V0JDEsXG4gICAgICAgIGRlbGV0ZTogZGVsZXRlRW50cnksXG4gICAgICAgIGNsZWFyLFxuICAgICAgICBmb3JFYWNoOiBjcmVhdGVGb3JFYWNoKGZhbHNlLCB0cnVlKVxuICAgIH07XG4gICAgY29uc3QgcmVhZG9ubHlJbnN0cnVtZW50YXRpb25zID0ge1xuICAgICAgICBnZXQoa2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gZ2V0JDEodGhpcywga2V5LCB0cnVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0IHNpemUoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2l6ZSh0aGlzLCB0cnVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgaGFzKGtleSkge1xuICAgICAgICAgICAgcmV0dXJuIGhhcyQxLmNhbGwodGhpcywga2V5LCB0cnVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgYWRkOiBjcmVhdGVSZWFkb25seU1ldGhvZChcImFkZFwiIC8qIFRyaWdnZXJPcFR5cGVzLkFERCAqLyksXG4gICAgICAgIHNldDogY3JlYXRlUmVhZG9ubHlNZXRob2QoXCJzZXRcIiAvKiBUcmlnZ2VyT3BUeXBlcy5TRVQgKi8pLFxuICAgICAgICBkZWxldGU6IGNyZWF0ZVJlYWRvbmx5TWV0aG9kKFwiZGVsZXRlXCIgLyogVHJpZ2dlck9wVHlwZXMuREVMRVRFICovKSxcbiAgICAgICAgY2xlYXI6IGNyZWF0ZVJlYWRvbmx5TWV0aG9kKFwiY2xlYXJcIiAvKiBUcmlnZ2VyT3BUeXBlcy5DTEVBUiAqLyksXG4gICAgICAgIGZvckVhY2g6IGNyZWF0ZUZvckVhY2godHJ1ZSwgZmFsc2UpXG4gICAgfTtcbiAgICBjb25zdCBzaGFsbG93UmVhZG9ubHlJbnN0cnVtZW50YXRpb25zID0ge1xuICAgICAgICBnZXQoa2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gZ2V0JDEodGhpcywga2V5LCB0cnVlLCB0cnVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0IHNpemUoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2l6ZSh0aGlzLCB0cnVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgaGFzKGtleSkge1xuICAgICAgICAgICAgcmV0dXJuIGhhcyQxLmNhbGwodGhpcywga2V5LCB0cnVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgYWRkOiBjcmVhdGVSZWFkb25seU1ldGhvZChcImFkZFwiIC8qIFRyaWdnZXJPcFR5cGVzLkFERCAqLyksXG4gICAgICAgIHNldDogY3JlYXRlUmVhZG9ubHlNZXRob2QoXCJzZXRcIiAvKiBUcmlnZ2VyT3BUeXBlcy5TRVQgKi8pLFxuICAgICAgICBkZWxldGU6IGNyZWF0ZVJlYWRvbmx5TWV0aG9kKFwiZGVsZXRlXCIgLyogVHJpZ2dlck9wVHlwZXMuREVMRVRFICovKSxcbiAgICAgICAgY2xlYXI6IGNyZWF0ZVJlYWRvbmx5TWV0aG9kKFwiY2xlYXJcIiAvKiBUcmlnZ2VyT3BUeXBlcy5DTEVBUiAqLyksXG4gICAgICAgIGZvckVhY2g6IGNyZWF0ZUZvckVhY2godHJ1ZSwgdHJ1ZSlcbiAgICB9O1xuICAgIGNvbnN0IGl0ZXJhdG9yTWV0aG9kcyA9IFsna2V5cycsICd2YWx1ZXMnLCAnZW50cmllcycsIFN5bWJvbC5pdGVyYXRvcl07XG4gICAgaXRlcmF0b3JNZXRob2RzLmZvckVhY2gobWV0aG9kID0+IHtcbiAgICAgICAgbXV0YWJsZUluc3RydW1lbnRhdGlvbnNbbWV0aG9kXSA9IGNyZWF0ZUl0ZXJhYmxlTWV0aG9kKG1ldGhvZCwgZmFsc2UsIGZhbHNlKTtcbiAgICAgICAgcmVhZG9ubHlJbnN0cnVtZW50YXRpb25zW21ldGhvZF0gPSBjcmVhdGVJdGVyYWJsZU1ldGhvZChtZXRob2QsIHRydWUsIGZhbHNlKTtcbiAgICAgICAgc2hhbGxvd0luc3RydW1lbnRhdGlvbnNbbWV0aG9kXSA9IGNyZWF0ZUl0ZXJhYmxlTWV0aG9kKG1ldGhvZCwgZmFsc2UsIHRydWUpO1xuICAgICAgICBzaGFsbG93UmVhZG9ubHlJbnN0cnVtZW50YXRpb25zW21ldGhvZF0gPSBjcmVhdGVJdGVyYWJsZU1ldGhvZChtZXRob2QsIHRydWUsIHRydWUpO1xuICAgIH0pO1xuICAgIHJldHVybiBbXG4gICAgICAgIG11dGFibGVJbnN0cnVtZW50YXRpb25zLFxuICAgICAgICByZWFkb25seUluc3RydW1lbnRhdGlvbnMsXG4gICAgICAgIHNoYWxsb3dJbnN0cnVtZW50YXRpb25zLFxuICAgICAgICBzaGFsbG93UmVhZG9ubHlJbnN0cnVtZW50YXRpb25zXG4gICAgXTtcbn1cbmNvbnN0IFttdXRhYmxlSW5zdHJ1bWVudGF0aW9ucywgcmVhZG9ubHlJbnN0cnVtZW50YXRpb25zLCBzaGFsbG93SW5zdHJ1bWVudGF0aW9ucywgc2hhbGxvd1JlYWRvbmx5SW5zdHJ1bWVudGF0aW9uc10gPSAvKiAjX19QVVJFX18qLyBjcmVhdGVJbnN0cnVtZW50YXRpb25zKCk7XG5mdW5jdGlvbiBjcmVhdGVJbnN0cnVtZW50YXRpb25HZXR0ZXIoaXNSZWFkb25seSwgc2hhbGxvdykge1xuICAgIGNvbnN0IGluc3RydW1lbnRhdGlvbnMgPSBzaGFsbG93XG4gICAgICAgID8gaXNSZWFkb25seVxuICAgICAgICAgICAgPyBzaGFsbG93UmVhZG9ubHlJbnN0cnVtZW50YXRpb25zXG4gICAgICAgICAgICA6IHNoYWxsb3dJbnN0cnVtZW50YXRpb25zXG4gICAgICAgIDogaXNSZWFkb25seVxuICAgICAgICAgICAgPyByZWFkb25seUluc3RydW1lbnRhdGlvbnNcbiAgICAgICAgICAgIDogbXV0YWJsZUluc3RydW1lbnRhdGlvbnM7XG4gICAgcmV0dXJuICh0YXJnZXQsIGtleSwgcmVjZWl2ZXIpID0+IHtcbiAgICAgICAgaWYgKGtleSA9PT0gXCJfX3ZfaXNSZWFjdGl2ZVwiIC8qIFJlYWN0aXZlRmxhZ3MuSVNfUkVBQ1RJVkUgKi8pIHtcbiAgICAgICAgICAgIHJldHVybiAhaXNSZWFkb25seTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChrZXkgPT09IFwiX192X2lzUmVhZG9ubHlcIiAvKiBSZWFjdGl2ZUZsYWdzLklTX1JFQURPTkxZICovKSB7XG4gICAgICAgICAgICByZXR1cm4gaXNSZWFkb25seTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChrZXkgPT09IFwiX192X3Jhd1wiIC8qIFJlYWN0aXZlRmxhZ3MuUkFXICovKSB7XG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBSZWZsZWN0LmdldChoYXNPd24oaW5zdHJ1bWVudGF0aW9ucywga2V5KSAmJiBrZXkgaW4gdGFyZ2V0XG4gICAgICAgICAgICA/IGluc3RydW1lbnRhdGlvbnNcbiAgICAgICAgICAgIDogdGFyZ2V0LCBrZXksIHJlY2VpdmVyKTtcbiAgICB9O1xufVxuY29uc3QgbXV0YWJsZUNvbGxlY3Rpb25IYW5kbGVycyA9IHtcbiAgICBnZXQ6IC8qI19fUFVSRV9fKi8gY3JlYXRlSW5zdHJ1bWVudGF0aW9uR2V0dGVyKGZhbHNlLCBmYWxzZSlcbn07XG5jb25zdCBzaGFsbG93Q29sbGVjdGlvbkhhbmRsZXJzID0ge1xuICAgIGdldDogLyojX19QVVJFX18qLyBjcmVhdGVJbnN0cnVtZW50YXRpb25HZXR0ZXIoZmFsc2UsIHRydWUpXG59O1xuY29uc3QgcmVhZG9ubHlDb2xsZWN0aW9uSGFuZGxlcnMgPSB7XG4gICAgZ2V0OiAvKiNfX1BVUkVfXyovIGNyZWF0ZUluc3RydW1lbnRhdGlvbkdldHRlcih0cnVlLCBmYWxzZSlcbn07XG5jb25zdCBzaGFsbG93UmVhZG9ubHlDb2xsZWN0aW9uSGFuZGxlcnMgPSB7XG4gICAgZ2V0OiAvKiNfX1BVUkVfXyovIGNyZWF0ZUluc3RydW1lbnRhdGlvbkdldHRlcih0cnVlLCB0cnVlKVxufTtcbmZ1bmN0aW9uIGNoZWNrSWRlbnRpdHlLZXlzKHRhcmdldCwgaGFzLCBrZXkpIHtcbiAgICBjb25zdCByYXdLZXkgPSB0b1JhdyhrZXkpO1xuICAgIGlmIChyYXdLZXkgIT09IGtleSAmJiBoYXMuY2FsbCh0YXJnZXQsIHJhd0tleSkpIHtcbiAgICAgICAgY29uc3QgdHlwZSA9IHRvUmF3VHlwZSh0YXJnZXQpO1xuICAgICAgICBjb25zb2xlLndhcm4oYFJlYWN0aXZlICR7dHlwZX0gY29udGFpbnMgYm90aCB0aGUgcmF3IGFuZCByZWFjdGl2ZSBgICtcbiAgICAgICAgICAgIGB2ZXJzaW9ucyBvZiB0aGUgc2FtZSBvYmplY3Qke3R5cGUgPT09IGBNYXBgID8gYCBhcyBrZXlzYCA6IGBgfSwgYCArXG4gICAgICAgICAgICBgd2hpY2ggY2FuIGxlYWQgdG8gaW5jb25zaXN0ZW5jaWVzLiBgICtcbiAgICAgICAgICAgIGBBdm9pZCBkaWZmZXJlbnRpYXRpbmcgYmV0d2VlbiB0aGUgcmF3IGFuZCByZWFjdGl2ZSB2ZXJzaW9ucyBgICtcbiAgICAgICAgICAgIGBvZiBhbiBvYmplY3QgYW5kIG9ubHkgdXNlIHRoZSByZWFjdGl2ZSB2ZXJzaW9uIGlmIHBvc3NpYmxlLmApO1xuICAgIH1cbn1cblxuY29uc3QgcmVhY3RpdmVNYXAgPSBuZXcgV2Vha01hcCgpO1xuY29uc3Qgc2hhbGxvd1JlYWN0aXZlTWFwID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHJlYWRvbmx5TWFwID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHNoYWxsb3dSZWFkb25seU1hcCA9IG5ldyBXZWFrTWFwKCk7XG5mdW5jdGlvbiB0YXJnZXRUeXBlTWFwKHJhd1R5cGUpIHtcbiAgICBzd2l0Y2ggKHJhd1R5cGUpIHtcbiAgICAgICAgY2FzZSAnT2JqZWN0JzpcbiAgICAgICAgY2FzZSAnQXJyYXknOlxuICAgICAgICAgICAgcmV0dXJuIDEgLyogVGFyZ2V0VHlwZS5DT01NT04gKi87XG4gICAgICAgIGNhc2UgJ01hcCc6XG4gICAgICAgIGNhc2UgJ1NldCc6XG4gICAgICAgIGNhc2UgJ1dlYWtNYXAnOlxuICAgICAgICBjYXNlICdXZWFrU2V0JzpcbiAgICAgICAgICAgIHJldHVybiAyIC8qIFRhcmdldFR5cGUuQ09MTEVDVElPTiAqLztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAwIC8qIFRhcmdldFR5cGUuSU5WQUxJRCAqLztcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRUYXJnZXRUeXBlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlW1wiX192X3NraXBcIiAvKiBSZWFjdGl2ZUZsYWdzLlNLSVAgKi9dIHx8ICFPYmplY3QuaXNFeHRlbnNpYmxlKHZhbHVlKVxuICAgICAgICA/IDAgLyogVGFyZ2V0VHlwZS5JTlZBTElEICovXG4gICAgICAgIDogdGFyZ2V0VHlwZU1hcCh0b1Jhd1R5cGUodmFsdWUpKTtcbn1cbmZ1bmN0aW9uIHJlYWN0aXZlKHRhcmdldCkge1xuICAgIC8vIGlmIHRyeWluZyB0byBvYnNlcnZlIGEgcmVhZG9ubHkgcHJveHksIHJldHVybiB0aGUgcmVhZG9ubHkgdmVyc2lvbi5cbiAgICBpZiAoaXNSZWFkb25seSh0YXJnZXQpKSB7XG4gICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfVxuICAgIHJldHVybiBjcmVhdGVSZWFjdGl2ZU9iamVjdCh0YXJnZXQsIGZhbHNlLCBtdXRhYmxlSGFuZGxlcnMsIG11dGFibGVDb2xsZWN0aW9uSGFuZGxlcnMsIHJlYWN0aXZlTWFwKTtcbn1cbi8qKlxuICogUmV0dXJuIGEgc2hhbGxvd2x5LXJlYWN0aXZlIGNvcHkgb2YgdGhlIG9yaWdpbmFsIG9iamVjdCwgd2hlcmUgb25seSB0aGUgcm9vdFxuICogbGV2ZWwgcHJvcGVydGllcyBhcmUgcmVhY3RpdmUuIEl0IGFsc28gZG9lcyBub3QgYXV0by11bndyYXAgcmVmcyAoZXZlbiBhdCB0aGVcbiAqIHJvb3QgbGV2ZWwpLlxuICovXG5mdW5jdGlvbiBzaGFsbG93UmVhY3RpdmUodGFyZ2V0KSB7XG4gICAgcmV0dXJuIGNyZWF0ZVJlYWN0aXZlT2JqZWN0KHRhcmdldCwgZmFsc2UsIHNoYWxsb3dSZWFjdGl2ZUhhbmRsZXJzLCBzaGFsbG93Q29sbGVjdGlvbkhhbmRsZXJzLCBzaGFsbG93UmVhY3RpdmVNYXApO1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgcmVhZG9ubHkgY29weSBvZiB0aGUgb3JpZ2luYWwgb2JqZWN0LiBOb3RlIHRoZSByZXR1cm5lZCBjb3B5IGlzIG5vdFxuICogbWFkZSByZWFjdGl2ZSwgYnV0IGByZWFkb25seWAgY2FuIGJlIGNhbGxlZCBvbiBhbiBhbHJlYWR5IHJlYWN0aXZlIG9iamVjdC5cbiAqL1xuZnVuY3Rpb24gcmVhZG9ubHkodGFyZ2V0KSB7XG4gICAgcmV0dXJuIGNyZWF0ZVJlYWN0aXZlT2JqZWN0KHRhcmdldCwgdHJ1ZSwgcmVhZG9ubHlIYW5kbGVycywgcmVhZG9ubHlDb2xsZWN0aW9uSGFuZGxlcnMsIHJlYWRvbmx5TWFwKTtcbn1cbi8qKlxuICogUmV0dXJucyBhIHJlYWN0aXZlLWNvcHkgb2YgdGhlIG9yaWdpbmFsIG9iamVjdCwgd2hlcmUgb25seSB0aGUgcm9vdCBsZXZlbFxuICogcHJvcGVydGllcyBhcmUgcmVhZG9ubHksIGFuZCBkb2VzIE5PVCB1bndyYXAgcmVmcyBub3IgcmVjdXJzaXZlbHkgY29udmVydFxuICogcmV0dXJuZWQgcHJvcGVydGllcy5cbiAqIFRoaXMgaXMgdXNlZCBmb3IgY3JlYXRpbmcgdGhlIHByb3BzIHByb3h5IG9iamVjdCBmb3Igc3RhdGVmdWwgY29tcG9uZW50cy5cbiAqL1xuZnVuY3Rpb24gc2hhbGxvd1JlYWRvbmx5KHRhcmdldCkge1xuICAgIHJldHVybiBjcmVhdGVSZWFjdGl2ZU9iamVjdCh0YXJnZXQsIHRydWUsIHNoYWxsb3dSZWFkb25seUhhbmRsZXJzLCBzaGFsbG93UmVhZG9ubHlDb2xsZWN0aW9uSGFuZGxlcnMsIHNoYWxsb3dSZWFkb25seU1hcCk7XG59XG5mdW5jdGlvbiBjcmVhdGVSZWFjdGl2ZU9iamVjdCh0YXJnZXQsIGlzUmVhZG9ubHksIGJhc2VIYW5kbGVycywgY29sbGVjdGlvbkhhbmRsZXJzLCBwcm94eU1hcCkge1xuICAgIGlmICghaXNPYmplY3QodGFyZ2V0KSkge1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYHZhbHVlIGNhbm5vdCBiZSBtYWRlIHJlYWN0aXZlOiAke1N0cmluZyh0YXJnZXQpfWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfVxuICAgIC8vIHRhcmdldCBpcyBhbHJlYWR5IGEgUHJveHksIHJldHVybiBpdC5cbiAgICAvLyBleGNlcHRpb246IGNhbGxpbmcgcmVhZG9ubHkoKSBvbiBhIHJlYWN0aXZlIG9iamVjdFxuICAgIGlmICh0YXJnZXRbXCJfX3ZfcmF3XCIgLyogUmVhY3RpdmVGbGFncy5SQVcgKi9dICYmXG4gICAgICAgICEoaXNSZWFkb25seSAmJiB0YXJnZXRbXCJfX3ZfaXNSZWFjdGl2ZVwiIC8qIFJlYWN0aXZlRmxhZ3MuSVNfUkVBQ1RJVkUgKi9dKSkge1xuICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIH1cbiAgICAvLyB0YXJnZXQgYWxyZWFkeSBoYXMgY29ycmVzcG9uZGluZyBQcm94eVxuICAgIGNvbnN0IGV4aXN0aW5nUHJveHkgPSBwcm94eU1hcC5nZXQodGFyZ2V0KTtcbiAgICBpZiAoZXhpc3RpbmdQcm94eSkge1xuICAgICAgICByZXR1cm4gZXhpc3RpbmdQcm94eTtcbiAgICB9XG4gICAgLy8gb25seSBzcGVjaWZpYyB2YWx1ZSB0eXBlcyBjYW4gYmUgb2JzZXJ2ZWQuXG4gICAgY29uc3QgdGFyZ2V0VHlwZSA9IGdldFRhcmdldFR5cGUodGFyZ2V0KTtcbiAgICBpZiAodGFyZ2V0VHlwZSA9PT0gMCAvKiBUYXJnZXRUeXBlLklOVkFMSUQgKi8pIHtcbiAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICB9XG4gICAgY29uc3QgcHJveHkgPSBuZXcgUHJveHkodGFyZ2V0LCB0YXJnZXRUeXBlID09PSAyIC8qIFRhcmdldFR5cGUuQ09MTEVDVElPTiAqLyA/IGNvbGxlY3Rpb25IYW5kbGVycyA6IGJhc2VIYW5kbGVycyk7XG4gICAgcHJveHlNYXAuc2V0KHRhcmdldCwgcHJveHkpO1xuICAgIHJldHVybiBwcm94eTtcbn1cbmZ1bmN0aW9uIGlzUmVhY3RpdmUodmFsdWUpIHtcbiAgICBpZiAoaXNSZWFkb25seSh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIGlzUmVhY3RpdmUodmFsdWVbXCJfX3ZfcmF3XCIgLyogUmVhY3RpdmVGbGFncy5SQVcgKi9dKTtcbiAgICB9XG4gICAgcmV0dXJuICEhKHZhbHVlICYmIHZhbHVlW1wiX192X2lzUmVhY3RpdmVcIiAvKiBSZWFjdGl2ZUZsYWdzLklTX1JFQUNUSVZFICovXSk7XG59XG5mdW5jdGlvbiBpc1JlYWRvbmx5KHZhbHVlKSB7XG4gICAgcmV0dXJuICEhKHZhbHVlICYmIHZhbHVlW1wiX192X2lzUmVhZG9ubHlcIiAvKiBSZWFjdGl2ZUZsYWdzLklTX1JFQURPTkxZICovXSk7XG59XG5mdW5jdGlvbiBpc1NoYWxsb3codmFsdWUpIHtcbiAgICByZXR1cm4gISEodmFsdWUgJiYgdmFsdWVbXCJfX3ZfaXNTaGFsbG93XCIgLyogUmVhY3RpdmVGbGFncy5JU19TSEFMTE9XICovXSk7XG59XG5mdW5jdGlvbiBpc1Byb3h5KHZhbHVlKSB7XG4gICAgcmV0dXJuIGlzUmVhY3RpdmUodmFsdWUpIHx8IGlzUmVhZG9ubHkodmFsdWUpO1xufVxuZnVuY3Rpb24gdG9SYXcob2JzZXJ2ZWQpIHtcbiAgICBjb25zdCByYXcgPSBvYnNlcnZlZCAmJiBvYnNlcnZlZFtcIl9fdl9yYXdcIiAvKiBSZWFjdGl2ZUZsYWdzLlJBVyAqL107XG4gICAgcmV0dXJuIHJhdyA/IHRvUmF3KHJhdykgOiBvYnNlcnZlZDtcbn1cbmZ1bmN0aW9uIG1hcmtSYXcodmFsdWUpIHtcbiAgICBkZWYodmFsdWUsIFwiX192X3NraXBcIiAvKiBSZWFjdGl2ZUZsYWdzLlNLSVAgKi8sIHRydWUpO1xuICAgIHJldHVybiB2YWx1ZTtcbn1cbmNvbnN0IHRvUmVhY3RpdmUgPSAodmFsdWUpID0+IGlzT2JqZWN0KHZhbHVlKSA/IHJlYWN0aXZlKHZhbHVlKSA6IHZhbHVlO1xuY29uc3QgdG9SZWFkb25seSA9ICh2YWx1ZSkgPT4gaXNPYmplY3QodmFsdWUpID8gcmVhZG9ubHkodmFsdWUpIDogdmFsdWU7XG5cbmZ1bmN0aW9uIHRyYWNrUmVmVmFsdWUocmVmKSB7XG4gICAgaWYgKHNob3VsZFRyYWNrICYmIGFjdGl2ZUVmZmVjdCkge1xuICAgICAgICByZWYgPSB0b1JhdyhyZWYpO1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICB0cmFja0VmZmVjdHMocmVmLmRlcCB8fCAocmVmLmRlcCA9IGNyZWF0ZURlcCgpKSwge1xuICAgICAgICAgICAgICAgIHRhcmdldDogcmVmLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiZ2V0XCIgLyogVHJhY2tPcFR5cGVzLkdFVCAqLyxcbiAgICAgICAgICAgICAgICBrZXk6ICd2YWx1ZSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdHJhY2tFZmZlY3RzKHJlZi5kZXAgfHwgKHJlZi5kZXAgPSBjcmVhdGVEZXAoKSkpO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gdHJpZ2dlclJlZlZhbHVlKHJlZiwgbmV3VmFsKSB7XG4gICAgcmVmID0gdG9SYXcocmVmKTtcbiAgICBpZiAocmVmLmRlcCkge1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICB0cmlnZ2VyRWZmZWN0cyhyZWYuZGVwLCB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0OiByZWYsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJzZXRcIiAvKiBUcmlnZ2VyT3BUeXBlcy5TRVQgKi8sXG4gICAgICAgICAgICAgICAga2V5OiAndmFsdWUnLFxuICAgICAgICAgICAgICAgIG5ld1ZhbHVlOiBuZXdWYWxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdHJpZ2dlckVmZmVjdHMocmVmLmRlcCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBpc1JlZihyKSB7XG4gICAgcmV0dXJuICEhKHIgJiYgci5fX3ZfaXNSZWYgPT09IHRydWUpO1xufVxuZnVuY3Rpb24gcmVmKHZhbHVlKSB7XG4gICAgcmV0dXJuIGNyZWF0ZVJlZih2YWx1ZSwgZmFsc2UpO1xufVxuZnVuY3Rpb24gc2hhbGxvd1JlZih2YWx1ZSkge1xuICAgIHJldHVybiBjcmVhdGVSZWYodmFsdWUsIHRydWUpO1xufVxuZnVuY3Rpb24gY3JlYXRlUmVmKHJhd1ZhbHVlLCBzaGFsbG93KSB7XG4gICAgaWYgKGlzUmVmKHJhd1ZhbHVlKSkge1xuICAgICAgICByZXR1cm4gcmF3VmFsdWU7XG4gICAgfVxuICAgIHJldHVybiBuZXcgUmVmSW1wbChyYXdWYWx1ZSwgc2hhbGxvdyk7XG59XG5jbGFzcyBSZWZJbXBsIHtcbiAgICBjb25zdHJ1Y3Rvcih2YWx1ZSwgX192X2lzU2hhbGxvdykge1xuICAgICAgICB0aGlzLl9fdl9pc1NoYWxsb3cgPSBfX3ZfaXNTaGFsbG93O1xuICAgICAgICB0aGlzLmRlcCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fX3ZfaXNSZWYgPSB0cnVlO1xuICAgICAgICB0aGlzLl9yYXdWYWx1ZSA9IF9fdl9pc1NoYWxsb3cgPyB2YWx1ZSA6IHRvUmF3KHZhbHVlKTtcbiAgICAgICAgdGhpcy5fdmFsdWUgPSBfX3ZfaXNTaGFsbG93ID8gdmFsdWUgOiB0b1JlYWN0aXZlKHZhbHVlKTtcbiAgICB9XG4gICAgZ2V0IHZhbHVlKCkge1xuICAgICAgICB0cmFja1JlZlZhbHVlKHRoaXMpO1xuICAgICAgICByZXR1cm4gdGhpcy5fdmFsdWU7XG4gICAgfVxuICAgIHNldCB2YWx1ZShuZXdWYWwpIHtcbiAgICAgICAgY29uc3QgdXNlRGlyZWN0VmFsdWUgPSB0aGlzLl9fdl9pc1NoYWxsb3cgfHwgaXNTaGFsbG93KG5ld1ZhbCkgfHwgaXNSZWFkb25seShuZXdWYWwpO1xuICAgICAgICBuZXdWYWwgPSB1c2VEaXJlY3RWYWx1ZSA/IG5ld1ZhbCA6IHRvUmF3KG5ld1ZhbCk7XG4gICAgICAgIGlmIChoYXNDaGFuZ2VkKG5ld1ZhbCwgdGhpcy5fcmF3VmFsdWUpKSB7XG4gICAgICAgICAgICB0aGlzLl9yYXdWYWx1ZSA9IG5ld1ZhbDtcbiAgICAgICAgICAgIHRoaXMuX3ZhbHVlID0gdXNlRGlyZWN0VmFsdWUgPyBuZXdWYWwgOiB0b1JlYWN0aXZlKG5ld1ZhbCk7XG4gICAgICAgICAgICB0cmlnZ2VyUmVmVmFsdWUodGhpcywgbmV3VmFsKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIHRyaWdnZXJSZWYocmVmKSB7XG4gICAgdHJpZ2dlclJlZlZhbHVlKHJlZiwgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gcmVmLnZhbHVlIDogdm9pZCAwKTtcbn1cbmZ1bmN0aW9uIHVucmVmKHJlZikge1xuICAgIHJldHVybiBpc1JlZihyZWYpID8gcmVmLnZhbHVlIDogcmVmO1xufVxuY29uc3Qgc2hhbGxvd1Vud3JhcEhhbmRsZXJzID0ge1xuICAgIGdldDogKHRhcmdldCwga2V5LCByZWNlaXZlcikgPT4gdW5yZWYoUmVmbGVjdC5nZXQodGFyZ2V0LCBrZXksIHJlY2VpdmVyKSksXG4gICAgc2V0OiAodGFyZ2V0LCBrZXksIHZhbHVlLCByZWNlaXZlcikgPT4ge1xuICAgICAgICBjb25zdCBvbGRWYWx1ZSA9IHRhcmdldFtrZXldO1xuICAgICAgICBpZiAoaXNSZWYob2xkVmFsdWUpICYmICFpc1JlZih2YWx1ZSkpIHtcbiAgICAgICAgICAgIG9sZFZhbHVlLnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBSZWZsZWN0LnNldCh0YXJnZXQsIGtleSwgdmFsdWUsIHJlY2VpdmVyKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5mdW5jdGlvbiBwcm94eVJlZnMob2JqZWN0V2l0aFJlZnMpIHtcbiAgICByZXR1cm4gaXNSZWFjdGl2ZShvYmplY3RXaXRoUmVmcylcbiAgICAgICAgPyBvYmplY3RXaXRoUmVmc1xuICAgICAgICA6IG5ldyBQcm94eShvYmplY3RXaXRoUmVmcywgc2hhbGxvd1Vud3JhcEhhbmRsZXJzKTtcbn1cbmNsYXNzIEN1c3RvbVJlZkltcGwge1xuICAgIGNvbnN0cnVjdG9yKGZhY3RvcnkpIHtcbiAgICAgICAgdGhpcy5kZXAgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX192X2lzUmVmID0gdHJ1ZTtcbiAgICAgICAgY29uc3QgeyBnZXQsIHNldCB9ID0gZmFjdG9yeSgoKSA9PiB0cmFja1JlZlZhbHVlKHRoaXMpLCAoKSA9PiB0cmlnZ2VyUmVmVmFsdWUodGhpcykpO1xuICAgICAgICB0aGlzLl9nZXQgPSBnZXQ7XG4gICAgICAgIHRoaXMuX3NldCA9IHNldDtcbiAgICB9XG4gICAgZ2V0IHZhbHVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0KCk7XG4gICAgfVxuICAgIHNldCB2YWx1ZShuZXdWYWwpIHtcbiAgICAgICAgdGhpcy5fc2V0KG5ld1ZhbCk7XG4gICAgfVxufVxuZnVuY3Rpb24gY3VzdG9tUmVmKGZhY3RvcnkpIHtcbiAgICByZXR1cm4gbmV3IEN1c3RvbVJlZkltcGwoZmFjdG9yeSk7XG59XG5mdW5jdGlvbiB0b1JlZnMob2JqZWN0KSB7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhaXNQcm94eShvYmplY3QpKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgdG9SZWZzKCkgZXhwZWN0cyBhIHJlYWN0aXZlIG9iamVjdCBidXQgcmVjZWl2ZWQgYSBwbGFpbiBvbmUuYCk7XG4gICAgfVxuICAgIGNvbnN0IHJldCA9IGlzQXJyYXkob2JqZWN0KSA/IG5ldyBBcnJheShvYmplY3QubGVuZ3RoKSA6IHt9O1xuICAgIGZvciAoY29uc3Qga2V5IGluIG9iamVjdCkge1xuICAgICAgICByZXRba2V5XSA9IHRvUmVmKG9iamVjdCwga2V5KTtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn1cbmNsYXNzIE9iamVjdFJlZkltcGwge1xuICAgIGNvbnN0cnVjdG9yKF9vYmplY3QsIF9rZXksIF9kZWZhdWx0VmFsdWUpIHtcbiAgICAgICAgdGhpcy5fb2JqZWN0ID0gX29iamVjdDtcbiAgICAgICAgdGhpcy5fa2V5ID0gX2tleTtcbiAgICAgICAgdGhpcy5fZGVmYXVsdFZhbHVlID0gX2RlZmF1bHRWYWx1ZTtcbiAgICAgICAgdGhpcy5fX3ZfaXNSZWYgPSB0cnVlO1xuICAgIH1cbiAgICBnZXQgdmFsdWUoKSB7XG4gICAgICAgIGNvbnN0IHZhbCA9IHRoaXMuX29iamVjdFt0aGlzLl9rZXldO1xuICAgICAgICByZXR1cm4gdmFsID09PSB1bmRlZmluZWQgPyB0aGlzLl9kZWZhdWx0VmFsdWUgOiB2YWw7XG4gICAgfVxuICAgIHNldCB2YWx1ZShuZXdWYWwpIHtcbiAgICAgICAgdGhpcy5fb2JqZWN0W3RoaXMuX2tleV0gPSBuZXdWYWw7XG4gICAgfVxufVxuZnVuY3Rpb24gdG9SZWYob2JqZWN0LCBrZXksIGRlZmF1bHRWYWx1ZSkge1xuICAgIGNvbnN0IHZhbCA9IG9iamVjdFtrZXldO1xuICAgIHJldHVybiBpc1JlZih2YWwpXG4gICAgICAgID8gdmFsXG4gICAgICAgIDogbmV3IE9iamVjdFJlZkltcGwob2JqZWN0LCBrZXksIGRlZmF1bHRWYWx1ZSk7XG59XG5cbnZhciBfYTtcbmNsYXNzIENvbXB1dGVkUmVmSW1wbCB7XG4gICAgY29uc3RydWN0b3IoZ2V0dGVyLCBfc2V0dGVyLCBpc1JlYWRvbmx5LCBpc1NTUikge1xuICAgICAgICB0aGlzLl9zZXR0ZXIgPSBfc2V0dGVyO1xuICAgICAgICB0aGlzLmRlcCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fX3ZfaXNSZWYgPSB0cnVlO1xuICAgICAgICB0aGlzW19hXSA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHRoaXMuZWZmZWN0ID0gbmV3IFJlYWN0aXZlRWZmZWN0KGdldHRlciwgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9kaXJ0eSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0cmlnZ2VyUmVmVmFsdWUodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmVmZmVjdC5jb21wdXRlZCA9IHRoaXM7XG4gICAgICAgIHRoaXMuZWZmZWN0LmFjdGl2ZSA9IHRoaXMuX2NhY2hlYWJsZSA9ICFpc1NTUjtcbiAgICAgICAgdGhpc1tcIl9fdl9pc1JlYWRvbmx5XCIgLyogUmVhY3RpdmVGbGFncy5JU19SRUFET05MWSAqL10gPSBpc1JlYWRvbmx5O1xuICAgIH1cbiAgICBnZXQgdmFsdWUoKSB7XG4gICAgICAgIC8vIHRoZSBjb21wdXRlZCByZWYgbWF5IGdldCB3cmFwcGVkIGJ5IG90aGVyIHByb3hpZXMgZS5nLiByZWFkb25seSgpICMzMzc2XG4gICAgICAgIGNvbnN0IHNlbGYgPSB0b1Jhdyh0aGlzKTtcbiAgICAgICAgdHJhY2tSZWZWYWx1ZShzZWxmKTtcbiAgICAgICAgaWYgKHNlbGYuX2RpcnR5IHx8ICFzZWxmLl9jYWNoZWFibGUpIHtcbiAgICAgICAgICAgIHNlbGYuX2RpcnR5ID0gZmFsc2U7XG4gICAgICAgICAgICBzZWxmLl92YWx1ZSA9IHNlbGYuZWZmZWN0LnJ1bigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzZWxmLl92YWx1ZTtcbiAgICB9XG4gICAgc2V0IHZhbHVlKG5ld1ZhbHVlKSB7XG4gICAgICAgIHRoaXMuX3NldHRlcihuZXdWYWx1ZSk7XG4gICAgfVxufVxuX2EgPSBcIl9fdl9pc1JlYWRvbmx5XCIgLyogUmVhY3RpdmVGbGFncy5JU19SRUFET05MWSAqLztcbmZ1bmN0aW9uIGNvbXB1dGVkKGdldHRlck9yT3B0aW9ucywgZGVidWdPcHRpb25zLCBpc1NTUiA9IGZhbHNlKSB7XG4gICAgbGV0IGdldHRlcjtcbiAgICBsZXQgc2V0dGVyO1xuICAgIGNvbnN0IG9ubHlHZXR0ZXIgPSBpc0Z1bmN0aW9uKGdldHRlck9yT3B0aW9ucyk7XG4gICAgaWYgKG9ubHlHZXR0ZXIpIHtcbiAgICAgICAgZ2V0dGVyID0gZ2V0dGVyT3JPcHRpb25zO1xuICAgICAgICBzZXR0ZXIgPSAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJylcbiAgICAgICAgICAgID8gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignV3JpdGUgb3BlcmF0aW9uIGZhaWxlZDogY29tcHV0ZWQgdmFsdWUgaXMgcmVhZG9ubHknKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDogTk9PUDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGdldHRlciA9IGdldHRlck9yT3B0aW9ucy5nZXQ7XG4gICAgICAgIHNldHRlciA9IGdldHRlck9yT3B0aW9ucy5zZXQ7XG4gICAgfVxuICAgIGNvbnN0IGNSZWYgPSBuZXcgQ29tcHV0ZWRSZWZJbXBsKGdldHRlciwgc2V0dGVyLCBvbmx5R2V0dGVyIHx8ICFzZXR0ZXIsIGlzU1NSKTtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGRlYnVnT3B0aW9ucyAmJiAhaXNTU1IpIHtcbiAgICAgICAgY1JlZi5lZmZlY3Qub25UcmFjayA9IGRlYnVnT3B0aW9ucy5vblRyYWNrO1xuICAgICAgICBjUmVmLmVmZmVjdC5vblRyaWdnZXIgPSBkZWJ1Z09wdGlvbnMub25UcmlnZ2VyO1xuICAgIH1cbiAgICByZXR1cm4gY1JlZjtcbn1cblxudmFyIF9hJDE7XG5jb25zdCB0aWNrID0gLyojX19QVVJFX18qLyBQcm9taXNlLnJlc29sdmUoKTtcbmNvbnN0IHF1ZXVlID0gW107XG5sZXQgcXVldWVkID0gZmFsc2U7XG5jb25zdCBzY2hlZHVsZXIgPSAoZm4pID0+IHtcbiAgICBxdWV1ZS5wdXNoKGZuKTtcbiAgICBpZiAoIXF1ZXVlZCkge1xuICAgICAgICBxdWV1ZWQgPSB0cnVlO1xuICAgICAgICB0aWNrLnRoZW4oZmx1c2gpO1xuICAgIH1cbn07XG5jb25zdCBmbHVzaCA9ICgpID0+IHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHF1ZXVlW2ldKCk7XG4gICAgfVxuICAgIHF1ZXVlLmxlbmd0aCA9IDA7XG4gICAgcXVldWVkID0gZmFsc2U7XG59O1xuY2xhc3MgRGVmZXJyZWRDb21wdXRlZFJlZkltcGwge1xuICAgIGNvbnN0cnVjdG9yKGdldHRlcikge1xuICAgICAgICB0aGlzLmRlcCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICB0aGlzLl9fdl9pc1JlZiA9IHRydWU7XG4gICAgICAgIHRoaXNbX2EkMV0gPSB0cnVlO1xuICAgICAgICBsZXQgY29tcGFyZVRhcmdldDtcbiAgICAgICAgbGV0IGhhc0NvbXBhcmVUYXJnZXQgPSBmYWxzZTtcbiAgICAgICAgbGV0IHNjaGVkdWxlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmVmZmVjdCA9IG5ldyBSZWFjdGl2ZUVmZmVjdChnZXR0ZXIsIChjb21wdXRlZFRyaWdnZXIpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmRlcCkge1xuICAgICAgICAgICAgICAgIGlmIChjb21wdXRlZFRyaWdnZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29tcGFyZVRhcmdldCA9IHRoaXMuX3ZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBoYXNDb21wYXJlVGFyZ2V0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIXNjaGVkdWxlZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZVRvQ29tcGFyZSA9IGhhc0NvbXBhcmVUYXJnZXQgPyBjb21wYXJlVGFyZ2V0IDogdGhpcy5fdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHNjaGVkdWxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGhhc0NvbXBhcmVUYXJnZXQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGVyKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmVmZmVjdC5hY3RpdmUgJiYgdGhpcy5fZ2V0KCkgIT09IHZhbHVlVG9Db21wYXJlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJpZ2dlclJlZlZhbHVlKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBjaGFpbmVkIHVwc3RyZWFtIGNvbXB1dGVkcyBhcmUgbm90aWZpZWQgc3luY2hyb25vdXNseSB0byBlbnN1cmVcbiAgICAgICAgICAgICAgICAvLyB2YWx1ZSBpbnZhbGlkYXRpb24gaW4gY2FzZSBvZiBzeW5jIGFjY2Vzczsgbm9ybWFsIGVmZmVjdHMgYXJlXG4gICAgICAgICAgICAgICAgLy8gZGVmZXJyZWQgdG8gYmUgdHJpZ2dlcmVkIGluIHNjaGVkdWxlci5cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdGhpcy5kZXApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUuY29tcHV0ZWQgaW5zdGFuY2VvZiBEZWZlcnJlZENvbXB1dGVkUmVmSW1wbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5zY2hlZHVsZXIodHJ1ZSAvKiBjb21wdXRlZFRyaWdnZXIgKi8pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5lZmZlY3QuY29tcHV0ZWQgPSB0aGlzO1xuICAgIH1cbiAgICBfZ2V0KCkge1xuICAgICAgICBpZiAodGhpcy5fZGlydHkpIHtcbiAgICAgICAgICAgIHRoaXMuX2RpcnR5ID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gKHRoaXMuX3ZhbHVlID0gdGhpcy5lZmZlY3QucnVuKCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl92YWx1ZTtcbiAgICB9XG4gICAgZ2V0IHZhbHVlKCkge1xuICAgICAgICB0cmFja1JlZlZhbHVlKHRoaXMpO1xuICAgICAgICAvLyB0aGUgY29tcHV0ZWQgcmVmIG1heSBnZXQgd3JhcHBlZCBieSBvdGhlciBwcm94aWVzIGUuZy4gcmVhZG9ubHkoKSAjMzM3NlxuICAgICAgICByZXR1cm4gdG9SYXcodGhpcykuX2dldCgpO1xuICAgIH1cbn1cbl9hJDEgPSBcIl9fdl9pc1JlYWRvbmx5XCIgLyogUmVhY3RpdmVGbGFncy5JU19SRUFET05MWSAqLztcbmZ1bmN0aW9uIGRlZmVycmVkQ29tcHV0ZWQoZ2V0dGVyKSB7XG4gICAgcmV0dXJuIG5ldyBEZWZlcnJlZENvbXB1dGVkUmVmSW1wbChnZXR0ZXIpO1xufVxuXG5leHBvcnQgeyBFZmZlY3RTY29wZSwgSVRFUkFURV9LRVksIFJlYWN0aXZlRWZmZWN0LCBjb21wdXRlZCwgY3VzdG9tUmVmLCBkZWZlcnJlZENvbXB1dGVkLCBlZmZlY3QsIGVmZmVjdFNjb3BlLCBlbmFibGVUcmFja2luZywgZ2V0Q3VycmVudFNjb3BlLCBpc1Byb3h5LCBpc1JlYWN0aXZlLCBpc1JlYWRvbmx5LCBpc1JlZiwgaXNTaGFsbG93LCBtYXJrUmF3LCBvblNjb3BlRGlzcG9zZSwgcGF1c2VUcmFja2luZywgcHJveHlSZWZzLCByZWFjdGl2ZSwgcmVhZG9ubHksIHJlZiwgcmVzZXRUcmFja2luZywgc2hhbGxvd1JlYWN0aXZlLCBzaGFsbG93UmVhZG9ubHksIHNoYWxsb3dSZWYsIHN0b3AsIHRvUmF3LCB0b1JlZiwgdG9SZWZzLCB0cmFjaywgdHJpZ2dlciwgdHJpZ2dlclJlZiwgdW5yZWYgfTtcbiIsImltcG9ydCB7IHBhdXNlVHJhY2tpbmcsIHJlc2V0VHJhY2tpbmcsIGlzUmVmLCB0b1JhdywgaXNTaGFsbG93IGFzIGlzU2hhbGxvdyQxLCBpc1JlYWN0aXZlLCBSZWFjdGl2ZUVmZmVjdCwgcmVmLCBzaGFsbG93UmVhZG9ubHksIHRyYWNrLCByZWFjdGl2ZSwgc2hhbGxvd1JlYWN0aXZlLCB0cmlnZ2VyLCBpc1Byb3h5LCBFZmZlY3RTY29wZSwgbWFya1JhdywgcHJveHlSZWZzLCBjb21wdXRlZCBhcyBjb21wdXRlZCQxLCBpc1JlYWRvbmx5IH0gZnJvbSAnQHZ1ZS9yZWFjdGl2aXR5JztcbmV4cG9ydCB7IEVmZmVjdFNjb3BlLCBSZWFjdGl2ZUVmZmVjdCwgY3VzdG9tUmVmLCBlZmZlY3QsIGVmZmVjdFNjb3BlLCBnZXRDdXJyZW50U2NvcGUsIGlzUHJveHksIGlzUmVhY3RpdmUsIGlzUmVhZG9ubHksIGlzUmVmLCBpc1NoYWxsb3csIG1hcmtSYXcsIG9uU2NvcGVEaXNwb3NlLCBwcm94eVJlZnMsIHJlYWN0aXZlLCByZWFkb25seSwgcmVmLCBzaGFsbG93UmVhY3RpdmUsIHNoYWxsb3dSZWFkb25seSwgc2hhbGxvd1JlZiwgc3RvcCwgdG9SYXcsIHRvUmVmLCB0b1JlZnMsIHRyaWdnZXJSZWYsIHVucmVmIH0gZnJvbSAnQHZ1ZS9yZWFjdGl2aXR5JztcbmltcG9ydCB7IGlzU3RyaW5nLCBpc0Z1bmN0aW9uLCBpc1Byb21pc2UsIGlzQXJyYXksIE5PT1AsIGdldEdsb2JhbFRoaXMsIGV4dGVuZCwgRU1QVFlfT0JKLCB0b0hhbmRsZXJLZXksIHRvTnVtYmVyLCBoeXBoZW5hdGUsIGNhbWVsaXplLCBpc09iamVjdCwgaXNPbiwgaGFzT3duLCBpc01vZGVsTGlzdGVuZXIsIGhhc0NoYW5nZWQsIHJlbW92ZSwgaXNTZXQsIGlzTWFwLCBpc1BsYWluT2JqZWN0LCBpbnZva2VBcnJheUZucywgaXNCdWlsdEluRGlyZWN0aXZlLCBjYXBpdGFsaXplLCBpc0dsb2JhbGx5V2hpdGVsaXN0ZWQsIGRlZiwgaXNSZXNlcnZlZFByb3AsIEVNUFRZX0FSUiwgdG9SYXdUeXBlLCBtYWtlTWFwLCBOTywgbm9ybWFsaXplQ2xhc3MsIG5vcm1hbGl6ZVN0eWxlIH0gZnJvbSAnQHZ1ZS9zaGFyZWQnO1xuZXhwb3J0IHsgY2FtZWxpemUsIGNhcGl0YWxpemUsIG5vcm1hbGl6ZUNsYXNzLCBub3JtYWxpemVQcm9wcywgbm9ybWFsaXplU3R5bGUsIHRvRGlzcGxheVN0cmluZywgdG9IYW5kbGVyS2V5IH0gZnJvbSAnQHZ1ZS9zaGFyZWQnO1xuXG5jb25zdCBzdGFjayA9IFtdO1xuZnVuY3Rpb24gcHVzaFdhcm5pbmdDb250ZXh0KHZub2RlKSB7XG4gICAgc3RhY2sucHVzaCh2bm9kZSk7XG59XG5mdW5jdGlvbiBwb3BXYXJuaW5nQ29udGV4dCgpIHtcbiAgICBzdGFjay5wb3AoKTtcbn1cbmZ1bmN0aW9uIHdhcm4obXNnLCAuLi5hcmdzKSB7XG4gICAgaWYgKCEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpXG4gICAgICAgIHJldHVybjtcbiAgICAvLyBhdm9pZCBwcm9wcyBmb3JtYXR0aW5nIG9yIHdhcm4gaGFuZGxlciB0cmFja2luZyBkZXBzIHRoYXQgbWlnaHQgYmUgbXV0YXRlZFxuICAgIC8vIGR1cmluZyBwYXRjaCwgbGVhZGluZyB0byBpbmZpbml0ZSByZWN1cnNpb24uXG4gICAgcGF1c2VUcmFja2luZygpO1xuICAgIGNvbnN0IGluc3RhbmNlID0gc3RhY2subGVuZ3RoID8gc3RhY2tbc3RhY2subGVuZ3RoIC0gMV0uY29tcG9uZW50IDogbnVsbDtcbiAgICBjb25zdCBhcHBXYXJuSGFuZGxlciA9IGluc3RhbmNlICYmIGluc3RhbmNlLmFwcENvbnRleHQuY29uZmlnLndhcm5IYW5kbGVyO1xuICAgIGNvbnN0IHRyYWNlID0gZ2V0Q29tcG9uZW50VHJhY2UoKTtcbiAgICBpZiAoYXBwV2FybkhhbmRsZXIpIHtcbiAgICAgICAgY2FsbFdpdGhFcnJvckhhbmRsaW5nKGFwcFdhcm5IYW5kbGVyLCBpbnN0YW5jZSwgMTEgLyogRXJyb3JDb2Rlcy5BUFBfV0FSTl9IQU5ETEVSICovLCBbXG4gICAgICAgICAgICBtc2cgKyBhcmdzLmpvaW4oJycpLFxuICAgICAgICAgICAgaW5zdGFuY2UgJiYgaW5zdGFuY2UucHJveHksXG4gICAgICAgICAgICB0cmFjZVxuICAgICAgICAgICAgICAgIC5tYXAoKHsgdm5vZGUgfSkgPT4gYGF0IDwke2Zvcm1hdENvbXBvbmVudE5hbWUoaW5zdGFuY2UsIHZub2RlLnR5cGUpfT5gKVxuICAgICAgICAgICAgICAgIC5qb2luKCdcXG4nKSxcbiAgICAgICAgICAgIHRyYWNlXG4gICAgICAgIF0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3Qgd2FybkFyZ3MgPSBbYFtWdWUgd2Fybl06ICR7bXNnfWAsIC4uLmFyZ3NdO1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKHRyYWNlLmxlbmd0aCAmJlxuICAgICAgICAgICAgLy8gYXZvaWQgc3BhbW1pbmcgY29uc29sZSBkdXJpbmcgdGVzdHNcbiAgICAgICAgICAgICFmYWxzZSkge1xuICAgICAgICAgICAgd2FybkFyZ3MucHVzaChgXFxuYCwgLi4uZm9ybWF0VHJhY2UodHJhY2UpKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLndhcm4oLi4ud2FybkFyZ3MpO1xuICAgIH1cbiAgICByZXNldFRyYWNraW5nKCk7XG59XG5mdW5jdGlvbiBnZXRDb21wb25lbnRUcmFjZSgpIHtcbiAgICBsZXQgY3VycmVudFZOb2RlID0gc3RhY2tbc3RhY2subGVuZ3RoIC0gMV07XG4gICAgaWYgKCFjdXJyZW50Vk5vZGUpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICAvLyB3ZSBjYW4ndCBqdXN0IHVzZSB0aGUgc3RhY2sgYmVjYXVzZSBpdCB3aWxsIGJlIGluY29tcGxldGUgZHVyaW5nIHVwZGF0ZXNcbiAgICAvLyB0aGF0IGRpZCBub3Qgc3RhcnQgZnJvbSB0aGUgcm9vdC4gUmUtY29uc3RydWN0IHRoZSBwYXJlbnQgY2hhaW4gdXNpbmdcbiAgICAvLyBpbnN0YW5jZSBwYXJlbnQgcG9pbnRlcnMuXG4gICAgY29uc3Qgbm9ybWFsaXplZFN0YWNrID0gW107XG4gICAgd2hpbGUgKGN1cnJlbnRWTm9kZSkge1xuICAgICAgICBjb25zdCBsYXN0ID0gbm9ybWFsaXplZFN0YWNrWzBdO1xuICAgICAgICBpZiAobGFzdCAmJiBsYXN0LnZub2RlID09PSBjdXJyZW50Vk5vZGUpIHtcbiAgICAgICAgICAgIGxhc3QucmVjdXJzZUNvdW50Kys7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBub3JtYWxpemVkU3RhY2sucHVzaCh7XG4gICAgICAgICAgICAgICAgdm5vZGU6IGN1cnJlbnRWTm9kZSxcbiAgICAgICAgICAgICAgICByZWN1cnNlQ291bnQ6IDBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcmVudEluc3RhbmNlID0gY3VycmVudFZOb2RlLmNvbXBvbmVudCAmJiBjdXJyZW50Vk5vZGUuY29tcG9uZW50LnBhcmVudDtcbiAgICAgICAgY3VycmVudFZOb2RlID0gcGFyZW50SW5zdGFuY2UgJiYgcGFyZW50SW5zdGFuY2Uudm5vZGU7XG4gICAgfVxuICAgIHJldHVybiBub3JtYWxpemVkU3RhY2s7XG59XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZnVuY3Rpb24gZm9ybWF0VHJhY2UodHJhY2UpIHtcbiAgICBjb25zdCBsb2dzID0gW107XG4gICAgdHJhY2UuZm9yRWFjaCgoZW50cnksIGkpID0+IHtcbiAgICAgICAgbG9ncy5wdXNoKC4uLihpID09PSAwID8gW10gOiBbYFxcbmBdKSwgLi4uZm9ybWF0VHJhY2VFbnRyeShlbnRyeSkpO1xuICAgIH0pO1xuICAgIHJldHVybiBsb2dzO1xufVxuZnVuY3Rpb24gZm9ybWF0VHJhY2VFbnRyeSh7IHZub2RlLCByZWN1cnNlQ291bnQgfSkge1xuICAgIGNvbnN0IHBvc3RmaXggPSByZWN1cnNlQ291bnQgPiAwID8gYC4uLiAoJHtyZWN1cnNlQ291bnR9IHJlY3Vyc2l2ZSBjYWxscylgIDogYGA7XG4gICAgY29uc3QgaXNSb290ID0gdm5vZGUuY29tcG9uZW50ID8gdm5vZGUuY29tcG9uZW50LnBhcmVudCA9PSBudWxsIDogZmFsc2U7XG4gICAgY29uc3Qgb3BlbiA9IGAgYXQgPCR7Zm9ybWF0Q29tcG9uZW50TmFtZSh2bm9kZS5jb21wb25lbnQsIHZub2RlLnR5cGUsIGlzUm9vdCl9YDtcbiAgICBjb25zdCBjbG9zZSA9IGA+YCArIHBvc3RmaXg7XG4gICAgcmV0dXJuIHZub2RlLnByb3BzXG4gICAgICAgID8gW29wZW4sIC4uLmZvcm1hdFByb3BzKHZub2RlLnByb3BzKSwgY2xvc2VdXG4gICAgICAgIDogW29wZW4gKyBjbG9zZV07XG59XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZnVuY3Rpb24gZm9ybWF0UHJvcHMocHJvcHMpIHtcbiAgICBjb25zdCByZXMgPSBbXTtcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMocHJvcHMpO1xuICAgIGtleXMuc2xpY2UoMCwgMykuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICByZXMucHVzaCguLi5mb3JtYXRQcm9wKGtleSwgcHJvcHNba2V5XSkpO1xuICAgIH0pO1xuICAgIGlmIChrZXlzLmxlbmd0aCA+IDMpIHtcbiAgICAgICAgcmVzLnB1c2goYCAuLi5gKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn1cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5mdW5jdGlvbiBmb3JtYXRQcm9wKGtleSwgdmFsdWUsIHJhdykge1xuICAgIGlmIChpc1N0cmluZyh2YWx1ZSkpIHtcbiAgICAgICAgdmFsdWUgPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG4gICAgICAgIHJldHVybiByYXcgPyB2YWx1ZSA6IFtgJHtrZXl9PSR7dmFsdWV9YF07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgfHxcbiAgICAgICAgdHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbicgfHxcbiAgICAgICAgdmFsdWUgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gcmF3ID8gdmFsdWUgOiBbYCR7a2V5fT0ke3ZhbHVlfWBdO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc1JlZih2YWx1ZSkpIHtcbiAgICAgICAgdmFsdWUgPSBmb3JtYXRQcm9wKGtleSwgdG9SYXcodmFsdWUudmFsdWUpLCB0cnVlKTtcbiAgICAgICAgcmV0dXJuIHJhdyA/IHZhbHVlIDogW2Ake2tleX09UmVmPGAsIHZhbHVlLCBgPmBdO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gW2Ake2tleX09Zm4ke3ZhbHVlLm5hbWUgPyBgPCR7dmFsdWUubmFtZX0+YCA6IGBgfWBdO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmFsdWUgPSB0b1Jhdyh2YWx1ZSk7XG4gICAgICAgIHJldHVybiByYXcgPyB2YWx1ZSA6IFtgJHtrZXl9PWAsIHZhbHVlXTtcbiAgICB9XG59XG5cbmNvbnN0IEVycm9yVHlwZVN0cmluZ3MgPSB7XG4gICAgW1wic3BcIiAvKiBMaWZlY3ljbGVIb29rcy5TRVJWRVJfUFJFRkVUQ0ggKi9dOiAnc2VydmVyUHJlZmV0Y2ggaG9vaycsXG4gICAgW1wiYmNcIiAvKiBMaWZlY3ljbGVIb29rcy5CRUZPUkVfQ1JFQVRFICovXTogJ2JlZm9yZUNyZWF0ZSBob29rJyxcbiAgICBbXCJjXCIgLyogTGlmZWN5Y2xlSG9va3MuQ1JFQVRFRCAqL106ICdjcmVhdGVkIGhvb2snLFxuICAgIFtcImJtXCIgLyogTGlmZWN5Y2xlSG9va3MuQkVGT1JFX01PVU5UICovXTogJ2JlZm9yZU1vdW50IGhvb2snLFxuICAgIFtcIm1cIiAvKiBMaWZlY3ljbGVIb29rcy5NT1VOVEVEICovXTogJ21vdW50ZWQgaG9vaycsXG4gICAgW1wiYnVcIiAvKiBMaWZlY3ljbGVIb29rcy5CRUZPUkVfVVBEQVRFICovXTogJ2JlZm9yZVVwZGF0ZSBob29rJyxcbiAgICBbXCJ1XCIgLyogTGlmZWN5Y2xlSG9va3MuVVBEQVRFRCAqL106ICd1cGRhdGVkJyxcbiAgICBbXCJidW1cIiAvKiBMaWZlY3ljbGVIb29rcy5CRUZPUkVfVU5NT1VOVCAqL106ICdiZWZvcmVVbm1vdW50IGhvb2snLFxuICAgIFtcInVtXCIgLyogTGlmZWN5Y2xlSG9va3MuVU5NT1VOVEVEICovXTogJ3VubW91bnRlZCBob29rJyxcbiAgICBbXCJhXCIgLyogTGlmZWN5Y2xlSG9va3MuQUNUSVZBVEVEICovXTogJ2FjdGl2YXRlZCBob29rJyxcbiAgICBbXCJkYVwiIC8qIExpZmVjeWNsZUhvb2tzLkRFQUNUSVZBVEVEICovXTogJ2RlYWN0aXZhdGVkIGhvb2snLFxuICAgIFtcImVjXCIgLyogTGlmZWN5Y2xlSG9va3MuRVJST1JfQ0FQVFVSRUQgKi9dOiAnZXJyb3JDYXB0dXJlZCBob29rJyxcbiAgICBbXCJydGNcIiAvKiBMaWZlY3ljbGVIb29rcy5SRU5ERVJfVFJBQ0tFRCAqL106ICdyZW5kZXJUcmFja2VkIGhvb2snLFxuICAgIFtcInJ0Z1wiIC8qIExpZmVjeWNsZUhvb2tzLlJFTkRFUl9UUklHR0VSRUQgKi9dOiAncmVuZGVyVHJpZ2dlcmVkIGhvb2snLFxuICAgIFswIC8qIEVycm9yQ29kZXMuU0VUVVBfRlVOQ1RJT04gKi9dOiAnc2V0dXAgZnVuY3Rpb24nLFxuICAgIFsxIC8qIEVycm9yQ29kZXMuUkVOREVSX0ZVTkNUSU9OICovXTogJ3JlbmRlciBmdW5jdGlvbicsXG4gICAgWzIgLyogRXJyb3JDb2Rlcy5XQVRDSF9HRVRURVIgKi9dOiAnd2F0Y2hlciBnZXR0ZXInLFxuICAgIFszIC8qIEVycm9yQ29kZXMuV0FUQ0hfQ0FMTEJBQ0sgKi9dOiAnd2F0Y2hlciBjYWxsYmFjaycsXG4gICAgWzQgLyogRXJyb3JDb2Rlcy5XQVRDSF9DTEVBTlVQICovXTogJ3dhdGNoZXIgY2xlYW51cCBmdW5jdGlvbicsXG4gICAgWzUgLyogRXJyb3JDb2Rlcy5OQVRJVkVfRVZFTlRfSEFORExFUiAqL106ICduYXRpdmUgZXZlbnQgaGFuZGxlcicsXG4gICAgWzYgLyogRXJyb3JDb2Rlcy5DT01QT05FTlRfRVZFTlRfSEFORExFUiAqL106ICdjb21wb25lbnQgZXZlbnQgaGFuZGxlcicsXG4gICAgWzcgLyogRXJyb3JDb2Rlcy5WTk9ERV9IT09LICovXTogJ3Zub2RlIGhvb2snLFxuICAgIFs4IC8qIEVycm9yQ29kZXMuRElSRUNUSVZFX0hPT0sgKi9dOiAnZGlyZWN0aXZlIGhvb2snLFxuICAgIFs5IC8qIEVycm9yQ29kZXMuVFJBTlNJVElPTl9IT09LICovXTogJ3RyYW5zaXRpb24gaG9vaycsXG4gICAgWzEwIC8qIEVycm9yQ29kZXMuQVBQX0VSUk9SX0hBTkRMRVIgKi9dOiAnYXBwIGVycm9ySGFuZGxlcicsXG4gICAgWzExIC8qIEVycm9yQ29kZXMuQVBQX1dBUk5fSEFORExFUiAqL106ICdhcHAgd2FybkhhbmRsZXInLFxuICAgIFsxMiAvKiBFcnJvckNvZGVzLkZVTkNUSU9OX1JFRiAqL106ICdyZWYgZnVuY3Rpb24nLFxuICAgIFsxMyAvKiBFcnJvckNvZGVzLkFTWU5DX0NPTVBPTkVOVF9MT0FERVIgKi9dOiAnYXN5bmMgY29tcG9uZW50IGxvYWRlcicsXG4gICAgWzE0IC8qIEVycm9yQ29kZXMuU0NIRURVTEVSICovXTogJ3NjaGVkdWxlciBmbHVzaC4gVGhpcyBpcyBsaWtlbHkgYSBWdWUgaW50ZXJuYWxzIGJ1Zy4gJyArXG4gICAgICAgICdQbGVhc2Ugb3BlbiBhbiBpc3N1ZSBhdCBodHRwczovL25ldy1pc3N1ZS52dWVqcy5vcmcvP3JlcG89dnVlanMvY29yZSdcbn07XG5mdW5jdGlvbiBjYWxsV2l0aEVycm9ySGFuZGxpbmcoZm4sIGluc3RhbmNlLCB0eXBlLCBhcmdzKSB7XG4gICAgbGV0IHJlcztcbiAgICB0cnkge1xuICAgICAgICByZXMgPSBhcmdzID8gZm4oLi4uYXJncykgOiBmbigpO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGhhbmRsZUVycm9yKGVyciwgaW5zdGFuY2UsIHR5cGUpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufVxuZnVuY3Rpb24gY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoZm4sIGluc3RhbmNlLCB0eXBlLCBhcmdzKSB7XG4gICAgaWYgKGlzRnVuY3Rpb24oZm4pKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGNhbGxXaXRoRXJyb3JIYW5kbGluZyhmbiwgaW5zdGFuY2UsIHR5cGUsIGFyZ3MpO1xuICAgICAgICBpZiAocmVzICYmIGlzUHJvbWlzZShyZXMpKSB7XG4gICAgICAgICAgICByZXMuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICAgICAgICBoYW5kbGVFcnJvcihlcnIsIGluc3RhbmNlLCB0eXBlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxuICAgIGNvbnN0IHZhbHVlcyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZm4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFsdWVzLnB1c2goY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoZm5baV0sIGluc3RhbmNlLCB0eXBlLCBhcmdzKSk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZXM7XG59XG5mdW5jdGlvbiBoYW5kbGVFcnJvcihlcnIsIGluc3RhbmNlLCB0eXBlLCB0aHJvd0luRGV2ID0gdHJ1ZSkge1xuICAgIGNvbnN0IGNvbnRleHRWTm9kZSA9IGluc3RhbmNlID8gaW5zdGFuY2Uudm5vZGUgOiBudWxsO1xuICAgIGlmIChpbnN0YW5jZSkge1xuICAgICAgICBsZXQgY3VyID0gaW5zdGFuY2UucGFyZW50O1xuICAgICAgICAvLyB0aGUgZXhwb3NlZCBpbnN0YW5jZSBpcyB0aGUgcmVuZGVyIHByb3h5IHRvIGtlZXAgaXQgY29uc2lzdGVudCB3aXRoIDIueFxuICAgICAgICBjb25zdCBleHBvc2VkSW5zdGFuY2UgPSBpbnN0YW5jZS5wcm94eTtcbiAgICAgICAgLy8gaW4gcHJvZHVjdGlvbiB0aGUgaG9vayByZWNlaXZlcyBvbmx5IHRoZSBlcnJvciBjb2RlXG4gICAgICAgIGNvbnN0IGVycm9ySW5mbyA9IChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/IEVycm9yVHlwZVN0cmluZ3NbdHlwZV0gOiB0eXBlO1xuICAgICAgICB3aGlsZSAoY3VyKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvckNhcHR1cmVkSG9va3MgPSBjdXIuZWM7XG4gICAgICAgICAgICBpZiAoZXJyb3JDYXB0dXJlZEhvb2tzKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlcnJvckNhcHR1cmVkSG9va3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yQ2FwdHVyZWRIb29rc1tpXShlcnIsIGV4cG9zZWRJbnN0YW5jZSwgZXJyb3JJbmZvKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1ciA9IGN1ci5wYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gYXBwLWxldmVsIGhhbmRsaW5nXG4gICAgICAgIGNvbnN0IGFwcEVycm9ySGFuZGxlciA9IGluc3RhbmNlLmFwcENvbnRleHQuY29uZmlnLmVycm9ySGFuZGxlcjtcbiAgICAgICAgaWYgKGFwcEVycm9ySGFuZGxlcikge1xuICAgICAgICAgICAgY2FsbFdpdGhFcnJvckhhbmRsaW5nKGFwcEVycm9ySGFuZGxlciwgbnVsbCwgMTAgLyogRXJyb3JDb2Rlcy5BUFBfRVJST1JfSEFORExFUiAqLywgW2VyciwgZXhwb3NlZEluc3RhbmNlLCBlcnJvckluZm9dKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBsb2dFcnJvcihlcnIsIHR5cGUsIGNvbnRleHRWTm9kZSwgdGhyb3dJbkRldik7XG59XG5mdW5jdGlvbiBsb2dFcnJvcihlcnIsIHR5cGUsIGNvbnRleHRWTm9kZSwgdGhyb3dJbkRldiA9IHRydWUpIHtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIGNvbnN0IGluZm8gPSBFcnJvclR5cGVTdHJpbmdzW3R5cGVdO1xuICAgICAgICBpZiAoY29udGV4dFZOb2RlKSB7XG4gICAgICAgICAgICBwdXNoV2FybmluZ0NvbnRleHQoY29udGV4dFZOb2RlKTtcbiAgICAgICAgfVxuICAgICAgICB3YXJuKGBVbmhhbmRsZWQgZXJyb3Ike2luZm8gPyBgIGR1cmluZyBleGVjdXRpb24gb2YgJHtpbmZvfWAgOiBgYH1gKTtcbiAgICAgICAgaWYgKGNvbnRleHRWTm9kZSkge1xuICAgICAgICAgICAgcG9wV2FybmluZ0NvbnRleHQoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBjcmFzaCBpbiBkZXYgYnkgZGVmYXVsdCBzbyBpdCdzIG1vcmUgbm90aWNlYWJsZVxuICAgICAgICBpZiAodGhyb3dJbkRldikge1xuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyByZWNvdmVyIGluIHByb2QgdG8gcmVkdWNlIHRoZSBpbXBhY3Qgb24gZW5kLXVzZXJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH1cbn1cblxubGV0IGlzRmx1c2hpbmcgPSBmYWxzZTtcbmxldCBpc0ZsdXNoUGVuZGluZyA9IGZhbHNlO1xuY29uc3QgcXVldWUgPSBbXTtcbmxldCBmbHVzaEluZGV4ID0gMDtcbmNvbnN0IHBlbmRpbmdQb3N0Rmx1c2hDYnMgPSBbXTtcbmxldCBhY3RpdmVQb3N0Rmx1c2hDYnMgPSBudWxsO1xubGV0IHBvc3RGbHVzaEluZGV4ID0gMDtcbmNvbnN0IHJlc29sdmVkUHJvbWlzZSA9IC8qI19fUFVSRV9fKi8gUHJvbWlzZS5yZXNvbHZlKCk7XG5sZXQgY3VycmVudEZsdXNoUHJvbWlzZSA9IG51bGw7XG5jb25zdCBSRUNVUlNJT05fTElNSVQgPSAxMDA7XG5mdW5jdGlvbiBuZXh0VGljayhmbikge1xuICAgIGNvbnN0IHAgPSBjdXJyZW50Rmx1c2hQcm9taXNlIHx8IHJlc29sdmVkUHJvbWlzZTtcbiAgICByZXR1cm4gZm4gPyBwLnRoZW4odGhpcyA/IGZuLmJpbmQodGhpcykgOiBmbikgOiBwO1xufVxuLy8gIzI3Njhcbi8vIFVzZSBiaW5hcnktc2VhcmNoIHRvIGZpbmQgYSBzdWl0YWJsZSBwb3NpdGlvbiBpbiB0aGUgcXVldWUsXG4vLyBzbyB0aGF0IHRoZSBxdWV1ZSBtYWludGFpbnMgdGhlIGluY3JlYXNpbmcgb3JkZXIgb2Ygam9iJ3MgaWQsXG4vLyB3aGljaCBjYW4gcHJldmVudCB0aGUgam9iIGZyb20gYmVpbmcgc2tpcHBlZCBhbmQgYWxzbyBjYW4gYXZvaWQgcmVwZWF0ZWQgcGF0Y2hpbmcuXG5mdW5jdGlvbiBmaW5kSW5zZXJ0aW9uSW5kZXgoaWQpIHtcbiAgICAvLyB0aGUgc3RhcnQgaW5kZXggc2hvdWxkIGJlIGBmbHVzaEluZGV4ICsgMWBcbiAgICBsZXQgc3RhcnQgPSBmbHVzaEluZGV4ICsgMTtcbiAgICBsZXQgZW5kID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlIChzdGFydCA8IGVuZCkge1xuICAgICAgICBjb25zdCBtaWRkbGUgPSAoc3RhcnQgKyBlbmQpID4+PiAxO1xuICAgICAgICBjb25zdCBtaWRkbGVKb2JJZCA9IGdldElkKHF1ZXVlW21pZGRsZV0pO1xuICAgICAgICBtaWRkbGVKb2JJZCA8IGlkID8gKHN0YXJ0ID0gbWlkZGxlICsgMSkgOiAoZW5kID0gbWlkZGxlKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0YXJ0O1xufVxuZnVuY3Rpb24gcXVldWVKb2Ioam9iKSB7XG4gICAgLy8gdGhlIGRlZHVwZSBzZWFyY2ggdXNlcyB0aGUgc3RhcnRJbmRleCBhcmd1bWVudCBvZiBBcnJheS5pbmNsdWRlcygpXG4gICAgLy8gYnkgZGVmYXVsdCB0aGUgc2VhcmNoIGluZGV4IGluY2x1ZGVzIHRoZSBjdXJyZW50IGpvYiB0aGF0IGlzIGJlaW5nIHJ1blxuICAgIC8vIHNvIGl0IGNhbm5vdCByZWN1cnNpdmVseSB0cmlnZ2VyIGl0c2VsZiBhZ2Fpbi5cbiAgICAvLyBpZiB0aGUgam9iIGlzIGEgd2F0Y2goKSBjYWxsYmFjaywgdGhlIHNlYXJjaCB3aWxsIHN0YXJ0IHdpdGggYSArMSBpbmRleCB0b1xuICAgIC8vIGFsbG93IGl0IHJlY3Vyc2l2ZWx5IHRyaWdnZXIgaXRzZWxmIC0gaXQgaXMgdGhlIHVzZXIncyByZXNwb25zaWJpbGl0eSB0b1xuICAgIC8vIGVuc3VyZSBpdCBkb2Vzbid0IGVuZCB1cCBpbiBhbiBpbmZpbml0ZSBsb29wLlxuICAgIGlmICghcXVldWUubGVuZ3RoIHx8XG4gICAgICAgICFxdWV1ZS5pbmNsdWRlcyhqb2IsIGlzRmx1c2hpbmcgJiYgam9iLmFsbG93UmVjdXJzZSA/IGZsdXNoSW5kZXggKyAxIDogZmx1c2hJbmRleCkpIHtcbiAgICAgICAgaWYgKGpvYi5pZCA9PSBudWxsKSB7XG4gICAgICAgICAgICBxdWV1ZS5wdXNoKGpvYik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBxdWV1ZS5zcGxpY2UoZmluZEluc2VydGlvbkluZGV4KGpvYi5pZCksIDAsIGpvYik7XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVGbHVzaCgpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHF1ZXVlRmx1c2goKSB7XG4gICAgaWYgKCFpc0ZsdXNoaW5nICYmICFpc0ZsdXNoUGVuZGluZykge1xuICAgICAgICBpc0ZsdXNoUGVuZGluZyA9IHRydWU7XG4gICAgICAgIGN1cnJlbnRGbHVzaFByb21pc2UgPSByZXNvbHZlZFByb21pc2UudGhlbihmbHVzaEpvYnMpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGludmFsaWRhdGVKb2Ioam9iKSB7XG4gICAgY29uc3QgaSA9IHF1ZXVlLmluZGV4T2Yoam9iKTtcbiAgICBpZiAoaSA+IGZsdXNoSW5kZXgpIHtcbiAgICAgICAgcXVldWUuc3BsaWNlKGksIDEpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHF1ZXVlUG9zdEZsdXNoQ2IoY2IpIHtcbiAgICBpZiAoIWlzQXJyYXkoY2IpKSB7XG4gICAgICAgIGlmICghYWN0aXZlUG9zdEZsdXNoQ2JzIHx8XG4gICAgICAgICAgICAhYWN0aXZlUG9zdEZsdXNoQ2JzLmluY2x1ZGVzKGNiLCBjYi5hbGxvd1JlY3Vyc2UgPyBwb3N0Rmx1c2hJbmRleCArIDEgOiBwb3N0Rmx1c2hJbmRleCkpIHtcbiAgICAgICAgICAgIHBlbmRpbmdQb3N0Rmx1c2hDYnMucHVzaChjYik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIGlmIGNiIGlzIGFuIGFycmF5LCBpdCBpcyBhIGNvbXBvbmVudCBsaWZlY3ljbGUgaG9vayB3aGljaCBjYW4gb25seSBiZVxuICAgICAgICAvLyB0cmlnZ2VyZWQgYnkgYSBqb2IsIHdoaWNoIGlzIGFscmVhZHkgZGVkdXBlZCBpbiB0aGUgbWFpbiBxdWV1ZSwgc29cbiAgICAgICAgLy8gd2UgY2FuIHNraXAgZHVwbGljYXRlIGNoZWNrIGhlcmUgdG8gaW1wcm92ZSBwZXJmXG4gICAgICAgIHBlbmRpbmdQb3N0Rmx1c2hDYnMucHVzaCguLi5jYik7XG4gICAgfVxuICAgIHF1ZXVlRmx1c2goKTtcbn1cbmZ1bmN0aW9uIGZsdXNoUHJlRmx1c2hDYnMoc2VlbiwgXG4vLyBpZiBjdXJyZW50bHkgZmx1c2hpbmcsIHNraXAgdGhlIGN1cnJlbnQgam9iIGl0c2VsZlxuaSA9IGlzRmx1c2hpbmcgPyBmbHVzaEluZGV4ICsgMSA6IDApIHtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIHNlZW4gPSBzZWVuIHx8IG5ldyBNYXAoKTtcbiAgICB9XG4gICAgZm9yICg7IGkgPCBxdWV1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBjYiA9IHF1ZXVlW2ldO1xuICAgICAgICBpZiAoY2IgJiYgY2IucHJlKSB7XG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGNoZWNrUmVjdXJzaXZlVXBkYXRlcyhzZWVuLCBjYikpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHF1ZXVlLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgIGktLTtcbiAgICAgICAgICAgIGNiKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBmbHVzaFBvc3RGbHVzaENicyhzZWVuKSB7XG4gICAgaWYgKHBlbmRpbmdQb3N0Rmx1c2hDYnMubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGRlZHVwZWQgPSBbLi4ubmV3IFNldChwZW5kaW5nUG9zdEZsdXNoQ2JzKV07XG4gICAgICAgIHBlbmRpbmdQb3N0Rmx1c2hDYnMubGVuZ3RoID0gMDtcbiAgICAgICAgLy8gIzE5NDcgYWxyZWFkeSBoYXMgYWN0aXZlIHF1ZXVlLCBuZXN0ZWQgZmx1c2hQb3N0Rmx1c2hDYnMgY2FsbFxuICAgICAgICBpZiAoYWN0aXZlUG9zdEZsdXNoQ2JzKSB7XG4gICAgICAgICAgICBhY3RpdmVQb3N0Rmx1c2hDYnMucHVzaCguLi5kZWR1cGVkKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBhY3RpdmVQb3N0Rmx1c2hDYnMgPSBkZWR1cGVkO1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICBzZWVuID0gc2VlbiB8fCBuZXcgTWFwKCk7XG4gICAgICAgIH1cbiAgICAgICAgYWN0aXZlUG9zdEZsdXNoQ2JzLnNvcnQoKGEsIGIpID0+IGdldElkKGEpIC0gZ2V0SWQoYikpO1xuICAgICAgICBmb3IgKHBvc3RGbHVzaEluZGV4ID0gMDsgcG9zdEZsdXNoSW5kZXggPCBhY3RpdmVQb3N0Rmx1c2hDYnMubGVuZ3RoOyBwb3N0Rmx1c2hJbmRleCsrKSB7XG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXG4gICAgICAgICAgICAgICAgY2hlY2tSZWN1cnNpdmVVcGRhdGVzKHNlZW4sIGFjdGl2ZVBvc3RGbHVzaENic1twb3N0Rmx1c2hJbmRleF0pKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhY3RpdmVQb3N0Rmx1c2hDYnNbcG9zdEZsdXNoSW5kZXhdKCk7XG4gICAgICAgIH1cbiAgICAgICAgYWN0aXZlUG9zdEZsdXNoQ2JzID0gbnVsbDtcbiAgICAgICAgcG9zdEZsdXNoSW5kZXggPSAwO1xuICAgIH1cbn1cbmNvbnN0IGdldElkID0gKGpvYikgPT4gam9iLmlkID09IG51bGwgPyBJbmZpbml0eSA6IGpvYi5pZDtcbmNvbnN0IGNvbXBhcmF0b3IgPSAoYSwgYikgPT4ge1xuICAgIGNvbnN0IGRpZmYgPSBnZXRJZChhKSAtIGdldElkKGIpO1xuICAgIGlmIChkaWZmID09PSAwKSB7XG4gICAgICAgIGlmIChhLnByZSAmJiAhYi5wcmUpXG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIGlmIChiLnByZSAmJiAhYS5wcmUpXG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICB9XG4gICAgcmV0dXJuIGRpZmY7XG59O1xuZnVuY3Rpb24gZmx1c2hKb2JzKHNlZW4pIHtcbiAgICBpc0ZsdXNoUGVuZGluZyA9IGZhbHNlO1xuICAgIGlzRmx1c2hpbmcgPSB0cnVlO1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgc2VlbiA9IHNlZW4gfHwgbmV3IE1hcCgpO1xuICAgIH1cbiAgICAvLyBTb3J0IHF1ZXVlIGJlZm9yZSBmbHVzaC5cbiAgICAvLyBUaGlzIGVuc3VyZXMgdGhhdDpcbiAgICAvLyAxLiBDb21wb25lbnRzIGFyZSB1cGRhdGVkIGZyb20gcGFyZW50IHRvIGNoaWxkLiAoYmVjYXVzZSBwYXJlbnQgaXMgYWx3YXlzXG4gICAgLy8gICAgY3JlYXRlZCBiZWZvcmUgdGhlIGNoaWxkIHNvIGl0cyByZW5kZXIgZWZmZWN0IHdpbGwgaGF2ZSBzbWFsbGVyXG4gICAgLy8gICAgcHJpb3JpdHkgbnVtYmVyKVxuICAgIC8vIDIuIElmIGEgY29tcG9uZW50IGlzIHVubW91bnRlZCBkdXJpbmcgYSBwYXJlbnQgY29tcG9uZW50J3MgdXBkYXRlLFxuICAgIC8vICAgIGl0cyB1cGRhdGUgY2FuIGJlIHNraXBwZWQuXG4gICAgcXVldWUuc29ydChjb21wYXJhdG9yKTtcbiAgICAvLyBjb25kaXRpb25hbCB1c2FnZSBvZiBjaGVja1JlY3Vyc2l2ZVVwZGF0ZSBtdXN0IGJlIGRldGVybWluZWQgb3V0IG9mXG4gICAgLy8gdHJ5IC4uLiBjYXRjaCBibG9jayBzaW5jZSBSb2xsdXAgYnkgZGVmYXVsdCBkZS1vcHRpbWl6ZXMgdHJlZXNoYWtpbmdcbiAgICAvLyBpbnNpZGUgdHJ5LWNhdGNoLiBUaGlzIGNhbiBsZWF2ZSBhbGwgd2FybmluZyBjb2RlIHVuc2hha2VkLiBBbHRob3VnaFxuICAgIC8vIHRoZXkgd291bGQgZ2V0IGV2ZW50dWFsbHkgc2hha2VuIGJ5IGEgbWluaWZpZXIgbGlrZSB0ZXJzZXIsIHNvbWUgbWluaWZpZXJzXG4gICAgLy8gd291bGQgZmFpbCB0byBkbyB0aGF0IChlLmcuIGh0dHBzOi8vZ2l0aHViLmNvbS9ldmFudy9lc2J1aWxkL2lzc3Vlcy8xNjEwKVxuICAgIGNvbnN0IGNoZWNrID0gKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpXG4gICAgICAgID8gKGpvYikgPT4gY2hlY2tSZWN1cnNpdmVVcGRhdGVzKHNlZW4sIGpvYilcbiAgICAgICAgOiBOT09QO1xuICAgIHRyeSB7XG4gICAgICAgIGZvciAoZmx1c2hJbmRleCA9IDA7IGZsdXNoSW5kZXggPCBxdWV1ZS5sZW5ndGg7IGZsdXNoSW5kZXgrKykge1xuICAgICAgICAgICAgY29uc3Qgam9iID0gcXVldWVbZmx1c2hJbmRleF07XG4gICAgICAgICAgICBpZiAoam9iICYmIGpvYi5hY3RpdmUgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBjaGVjayhqb2IpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgcnVubmluZzpgLCBqb2IuaWQpXG4gICAgICAgICAgICAgICAgY2FsbFdpdGhFcnJvckhhbmRsaW5nKGpvYiwgbnVsbCwgMTQgLyogRXJyb3JDb2Rlcy5TQ0hFRFVMRVIgKi8pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGZpbmFsbHkge1xuICAgICAgICBmbHVzaEluZGV4ID0gMDtcbiAgICAgICAgcXVldWUubGVuZ3RoID0gMDtcbiAgICAgICAgZmx1c2hQb3N0Rmx1c2hDYnMoc2Vlbik7XG4gICAgICAgIGlzRmx1c2hpbmcgPSBmYWxzZTtcbiAgICAgICAgY3VycmVudEZsdXNoUHJvbWlzZSA9IG51bGw7XG4gICAgICAgIC8vIHNvbWUgcG9zdEZsdXNoQ2IgcXVldWVkIGpvYnMhXG4gICAgICAgIC8vIGtlZXAgZmx1c2hpbmcgdW50aWwgaXQgZHJhaW5zLlxuICAgICAgICBpZiAocXVldWUubGVuZ3RoIHx8IHBlbmRpbmdQb3N0Rmx1c2hDYnMubGVuZ3RoKSB7XG4gICAgICAgICAgICBmbHVzaEpvYnMoc2Vlbik7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBjaGVja1JlY3Vyc2l2ZVVwZGF0ZXMoc2VlbiwgZm4pIHtcbiAgICBpZiAoIXNlZW4uaGFzKGZuKSkge1xuICAgICAgICBzZWVuLnNldChmbiwgMSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBjb3VudCA9IHNlZW4uZ2V0KGZuKTtcbiAgICAgICAgaWYgKGNvdW50ID4gUkVDVVJTSU9OX0xJTUlUKSB7XG4gICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IGZuLm93bmVySW5zdGFuY2U7XG4gICAgICAgICAgICBjb25zdCBjb21wb25lbnROYW1lID0gaW5zdGFuY2UgJiYgZ2V0Q29tcG9uZW50TmFtZShpbnN0YW5jZS50eXBlKTtcbiAgICAgICAgICAgIHdhcm4oYE1heGltdW0gcmVjdXJzaXZlIHVwZGF0ZXMgZXhjZWVkZWQke2NvbXBvbmVudE5hbWUgPyBgIGluIGNvbXBvbmVudCA8JHtjb21wb25lbnROYW1lfT5gIDogYGB9LiBgICtcbiAgICAgICAgICAgICAgICBgVGhpcyBtZWFucyB5b3UgaGF2ZSBhIHJlYWN0aXZlIGVmZmVjdCB0aGF0IGlzIG11dGF0aW5nIGl0cyBvd24gYCArXG4gICAgICAgICAgICAgICAgYGRlcGVuZGVuY2llcyBhbmQgdGh1cyByZWN1cnNpdmVseSB0cmlnZ2VyaW5nIGl0c2VsZi4gUG9zc2libGUgc291cmNlcyBgICtcbiAgICAgICAgICAgICAgICBgaW5jbHVkZSBjb21wb25lbnQgdGVtcGxhdGUsIHJlbmRlciBmdW5jdGlvbiwgdXBkYXRlZCBob29rIG9yIGAgK1xuICAgICAgICAgICAgICAgIGB3YXRjaGVyIHNvdXJjZSBmdW5jdGlvbi5gKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2Vlbi5zZXQoZm4sIGNvdW50ICsgMSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qIGVzbGludC1kaXNhYmxlIG5vLXJlc3RyaWN0ZWQtZ2xvYmFscyAqL1xubGV0IGlzSG1yVXBkYXRpbmcgPSBmYWxzZTtcbmNvbnN0IGhtckRpcnR5Q29tcG9uZW50cyA9IG5ldyBTZXQoKTtcbi8vIEV4cG9zZSB0aGUgSE1SIHJ1bnRpbWUgb24gdGhlIGdsb2JhbCBvYmplY3Rcbi8vIFRoaXMgbWFrZXMgaXQgZW50aXJlbHkgdHJlZS1zaGFrYWJsZSB3aXRob3V0IHBvbGx1dGluZyB0aGUgZXhwb3J0cyBhbmQgbWFrZXNcbi8vIGl0IGVhc2llciB0byBiZSB1c2VkIGluIHRvb2xpbmdzIGxpa2UgdnVlLWxvYWRlclxuLy8gTm90ZTogZm9yIGEgY29tcG9uZW50IHRvIGJlIGVsaWdpYmxlIGZvciBITVIgaXQgYWxzbyBuZWVkcyB0aGUgX19obXJJZCBvcHRpb25cbi8vIHRvIGJlIHNldCBzbyB0aGF0IGl0cyBpbnN0YW5jZXMgY2FuIGJlIHJlZ2lzdGVyZWQgLyByZW1vdmVkLlxuaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgIGdldEdsb2JhbFRoaXMoKS5fX1ZVRV9ITVJfUlVOVElNRV9fID0ge1xuICAgICAgICBjcmVhdGVSZWNvcmQ6IHRyeVdyYXAoY3JlYXRlUmVjb3JkKSxcbiAgICAgICAgcmVyZW5kZXI6IHRyeVdyYXAocmVyZW5kZXIpLFxuICAgICAgICByZWxvYWQ6IHRyeVdyYXAocmVsb2FkKVxuICAgIH07XG59XG5jb25zdCBtYXAgPSBuZXcgTWFwKCk7XG5mdW5jdGlvbiByZWdpc3RlckhNUihpbnN0YW5jZSkge1xuICAgIGNvbnN0IGlkID0gaW5zdGFuY2UudHlwZS5fX2htcklkO1xuICAgIGxldCByZWNvcmQgPSBtYXAuZ2V0KGlkKTtcbiAgICBpZiAoIXJlY29yZCkge1xuICAgICAgICBjcmVhdGVSZWNvcmQoaWQsIGluc3RhbmNlLnR5cGUpO1xuICAgICAgICByZWNvcmQgPSBtYXAuZ2V0KGlkKTtcbiAgICB9XG4gICAgcmVjb3JkLmluc3RhbmNlcy5hZGQoaW5zdGFuY2UpO1xufVxuZnVuY3Rpb24gdW5yZWdpc3RlckhNUihpbnN0YW5jZSkge1xuICAgIG1hcC5nZXQoaW5zdGFuY2UudHlwZS5fX2htcklkKS5pbnN0YW5jZXMuZGVsZXRlKGluc3RhbmNlKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVJlY29yZChpZCwgaW5pdGlhbERlZikge1xuICAgIGlmIChtYXAuaGFzKGlkKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIG1hcC5zZXQoaWQsIHtcbiAgICAgICAgaW5pdGlhbERlZjogbm9ybWFsaXplQ2xhc3NDb21wb25lbnQoaW5pdGlhbERlZiksXG4gICAgICAgIGluc3RhbmNlczogbmV3IFNldCgpXG4gICAgfSk7XG4gICAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiBub3JtYWxpemVDbGFzc0NvbXBvbmVudChjb21wb25lbnQpIHtcbiAgICByZXR1cm4gaXNDbGFzc0NvbXBvbmVudChjb21wb25lbnQpID8gY29tcG9uZW50Ll9fdmNjT3B0cyA6IGNvbXBvbmVudDtcbn1cbmZ1bmN0aW9uIHJlcmVuZGVyKGlkLCBuZXdSZW5kZXIpIHtcbiAgICBjb25zdCByZWNvcmQgPSBtYXAuZ2V0KGlkKTtcbiAgICBpZiAoIXJlY29yZCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIHVwZGF0ZSBpbml0aWFsIHJlY29yZCAoZm9yIG5vdC15ZXQtcmVuZGVyZWQgY29tcG9uZW50KVxuICAgIHJlY29yZC5pbml0aWFsRGVmLnJlbmRlciA9IG5ld1JlbmRlcjtcbiAgICBbLi4ucmVjb3JkLmluc3RhbmNlc10uZm9yRWFjaChpbnN0YW5jZSA9PiB7XG4gICAgICAgIGlmIChuZXdSZW5kZXIpIHtcbiAgICAgICAgICAgIGluc3RhbmNlLnJlbmRlciA9IG5ld1JlbmRlcjtcbiAgICAgICAgICAgIG5vcm1hbGl6ZUNsYXNzQ29tcG9uZW50KGluc3RhbmNlLnR5cGUpLnJlbmRlciA9IG5ld1JlbmRlcjtcbiAgICAgICAgfVxuICAgICAgICBpbnN0YW5jZS5yZW5kZXJDYWNoZSA9IFtdO1xuICAgICAgICAvLyB0aGlzIGZsYWcgZm9yY2VzIGNoaWxkIGNvbXBvbmVudHMgd2l0aCBzbG90IGNvbnRlbnQgdG8gdXBkYXRlXG4gICAgICAgIGlzSG1yVXBkYXRpbmcgPSB0cnVlO1xuICAgICAgICBpbnN0YW5jZS51cGRhdGUoKTtcbiAgICAgICAgaXNIbXJVcGRhdGluZyA9IGZhbHNlO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gcmVsb2FkKGlkLCBuZXdDb21wKSB7XG4gICAgY29uc3QgcmVjb3JkID0gbWFwLmdldChpZCk7XG4gICAgaWYgKCFyZWNvcmQpXG4gICAgICAgIHJldHVybjtcbiAgICBuZXdDb21wID0gbm9ybWFsaXplQ2xhc3NDb21wb25lbnQobmV3Q29tcCk7XG4gICAgLy8gdXBkYXRlIGluaXRpYWwgZGVmIChmb3Igbm90LXlldC1yZW5kZXJlZCBjb21wb25lbnRzKVxuICAgIHVwZGF0ZUNvbXBvbmVudERlZihyZWNvcmQuaW5pdGlhbERlZiwgbmV3Q29tcCk7XG4gICAgLy8gY3JlYXRlIGEgc25hcHNob3Qgd2hpY2ggYXZvaWRzIHRoZSBzZXQgYmVpbmcgbXV0YXRlZCBkdXJpbmcgdXBkYXRlc1xuICAgIGNvbnN0IGluc3RhbmNlcyA9IFsuLi5yZWNvcmQuaW5zdGFuY2VzXTtcbiAgICBmb3IgKGNvbnN0IGluc3RhbmNlIG9mIGluc3RhbmNlcykge1xuICAgICAgICBjb25zdCBvbGRDb21wID0gbm9ybWFsaXplQ2xhc3NDb21wb25lbnQoaW5zdGFuY2UudHlwZSk7XG4gICAgICAgIGlmICghaG1yRGlydHlDb21wb25lbnRzLmhhcyhvbGRDb21wKSkge1xuICAgICAgICAgICAgLy8gMS4gVXBkYXRlIGV4aXN0aW5nIGNvbXAgZGVmaW5pdGlvbiB0byBtYXRjaCBuZXcgb25lXG4gICAgICAgICAgICBpZiAob2xkQ29tcCAhPT0gcmVjb3JkLmluaXRpYWxEZWYpIHtcbiAgICAgICAgICAgICAgICB1cGRhdGVDb21wb25lbnREZWYob2xkQ29tcCwgbmV3Q29tcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyAyLiBtYXJrIGRlZmluaXRpb24gZGlydHkuIFRoaXMgZm9yY2VzIHRoZSByZW5kZXJlciB0byByZXBsYWNlIHRoZVxuICAgICAgICAgICAgLy8gY29tcG9uZW50IG9uIHBhdGNoLlxuICAgICAgICAgICAgaG1yRGlydHlDb21wb25lbnRzLmFkZChvbGRDb21wKTtcbiAgICAgICAgfVxuICAgICAgICAvLyAzLiBpbnZhbGlkYXRlIG9wdGlvbnMgcmVzb2x1dGlvbiBjYWNoZVxuICAgICAgICBpbnN0YW5jZS5hcHBDb250ZXh0Lm9wdGlvbnNDYWNoZS5kZWxldGUoaW5zdGFuY2UudHlwZSk7XG4gICAgICAgIC8vIDQuIGFjdHVhbGx5IHVwZGF0ZVxuICAgICAgICBpZiAoaW5zdGFuY2UuY2VSZWxvYWQpIHtcbiAgICAgICAgICAgIC8vIGN1c3RvbSBlbGVtZW50XG4gICAgICAgICAgICBobXJEaXJ0eUNvbXBvbmVudHMuYWRkKG9sZENvbXApO1xuICAgICAgICAgICAgaW5zdGFuY2UuY2VSZWxvYWQobmV3Q29tcC5zdHlsZXMpO1xuICAgICAgICAgICAgaG1yRGlydHlDb21wb25lbnRzLmRlbGV0ZShvbGRDb21wKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpbnN0YW5jZS5wYXJlbnQpIHtcbiAgICAgICAgICAgIC8vIDQuIEZvcmNlIHRoZSBwYXJlbnQgaW5zdGFuY2UgdG8gcmUtcmVuZGVyLiBUaGlzIHdpbGwgY2F1c2UgYWxsIHVwZGF0ZWRcbiAgICAgICAgICAgIC8vIGNvbXBvbmVudHMgdG8gYmUgdW5tb3VudGVkIGFuZCByZS1tb3VudGVkLiBRdWV1ZSB0aGUgdXBkYXRlIHNvIHRoYXQgd2VcbiAgICAgICAgICAgIC8vIGRvbid0IGVuZCB1cCBmb3JjaW5nIHRoZSBzYW1lIHBhcmVudCB0byByZS1yZW5kZXIgbXVsdGlwbGUgdGltZXMuXG4gICAgICAgICAgICBxdWV1ZUpvYihpbnN0YW5jZS5wYXJlbnQudXBkYXRlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpbnN0YW5jZS5hcHBDb250ZXh0LnJlbG9hZCkge1xuICAgICAgICAgICAgLy8gcm9vdCBpbnN0YW5jZSBtb3VudGVkIHZpYSBjcmVhdGVBcHAoKSBoYXMgYSByZWxvYWQgbWV0aG9kXG4gICAgICAgICAgICBpbnN0YW5jZS5hcHBDb250ZXh0LnJlbG9hZCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAvLyByb290IGluc3RhbmNlIGluc2lkZSB0cmVlIGNyZWF0ZWQgdmlhIHJhdyByZW5kZXIoKS4gRm9yY2UgcmVsb2FkLlxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdbSE1SXSBSb290IG9yIG1hbnVhbGx5IG1vdW50ZWQgaW5zdGFuY2UgbW9kaWZpZWQuIEZ1bGwgcmVsb2FkIHJlcXVpcmVkLicpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIDUuIG1ha2Ugc3VyZSB0byBjbGVhbnVwIGRpcnR5IGhtciBjb21wb25lbnRzIGFmdGVyIHVwZGF0ZVxuICAgIHF1ZXVlUG9zdEZsdXNoQ2IoKCkgPT4ge1xuICAgICAgICBmb3IgKGNvbnN0IGluc3RhbmNlIG9mIGluc3RhbmNlcykge1xuICAgICAgICAgICAgaG1yRGlydHlDb21wb25lbnRzLmRlbGV0ZShub3JtYWxpemVDbGFzc0NvbXBvbmVudChpbnN0YW5jZS50eXBlKSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbmZ1bmN0aW9uIHVwZGF0ZUNvbXBvbmVudERlZihvbGRDb21wLCBuZXdDb21wKSB7XG4gICAgZXh0ZW5kKG9sZENvbXAsIG5ld0NvbXApO1xuICAgIGZvciAoY29uc3Qga2V5IGluIG9sZENvbXApIHtcbiAgICAgICAgaWYgKGtleSAhPT0gJ19fZmlsZScgJiYgIShrZXkgaW4gbmV3Q29tcCkpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBvbGRDb21wW2tleV07XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiB0cnlXcmFwKGZuKSB7XG4gICAgcmV0dXJuIChpZCwgYXJnKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gZm4oaWQsIGFyZyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYFtITVJdIFNvbWV0aGluZyB3ZW50IHdyb25nIGR1cmluZyBWdWUgY29tcG9uZW50IGhvdC1yZWxvYWQuIGAgK1xuICAgICAgICAgICAgICAgIGBGdWxsIHJlbG9hZCByZXF1aXJlZC5gKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbmxldCBkZXZ0b29scztcbmxldCBidWZmZXIgPSBbXTtcbmxldCBkZXZ0b29sc05vdEluc3RhbGxlZCA9IGZhbHNlO1xuZnVuY3Rpb24gZW1pdChldmVudCwgLi4uYXJncykge1xuICAgIGlmIChkZXZ0b29scykge1xuICAgICAgICBkZXZ0b29scy5lbWl0KGV2ZW50LCAuLi5hcmdzKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoIWRldnRvb2xzTm90SW5zdGFsbGVkKSB7XG4gICAgICAgIGJ1ZmZlci5wdXNoKHsgZXZlbnQsIGFyZ3MgfSk7XG4gICAgfVxufVxuZnVuY3Rpb24gc2V0RGV2dG9vbHNIb29rKGhvb2ssIHRhcmdldCkge1xuICAgIHZhciBfYSwgX2I7XG4gICAgZGV2dG9vbHMgPSBob29rO1xuICAgIGlmIChkZXZ0b29scykge1xuICAgICAgICBkZXZ0b29scy5lbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgYnVmZmVyLmZvckVhY2goKHsgZXZlbnQsIGFyZ3MgfSkgPT4gZGV2dG9vbHMuZW1pdChldmVudCwgLi4uYXJncykpO1xuICAgICAgICBidWZmZXIgPSBbXTtcbiAgICB9XG4gICAgZWxzZSBpZiAoXG4gICAgLy8gaGFuZGxlIGxhdGUgZGV2dG9vbHMgaW5qZWN0aW9uIC0gb25seSBkbyB0aGlzIGlmIHdlIGFyZSBpbiBhbiBhY3R1YWxcbiAgICAvLyBicm93c2VyIGVudmlyb25tZW50IHRvIGF2b2lkIHRoZSB0aW1lciBoYW5kbGUgc3RhbGxpbmcgdGVzdCBydW5uZXIgZXhpdFxuICAgIC8vICgjNDgxNSlcbiAgICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAvLyBzb21lIGVudnMgbW9jayB3aW5kb3cgYnV0IG5vdCBmdWxseVxuICAgICAgICB3aW5kb3cuSFRNTEVsZW1lbnQgJiZcbiAgICAgICAgLy8gYWxzbyBleGNsdWRlIGpzZG9tXG4gICAgICAgICEoKF9iID0gKF9hID0gd2luZG93Lm5hdmlnYXRvcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnVzZXJBZ2VudCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmluY2x1ZGVzKCdqc2RvbScpKSkge1xuICAgICAgICBjb25zdCByZXBsYXkgPSAodGFyZ2V0Ll9fVlVFX0RFVlRPT0xTX0hPT0tfUkVQTEFZX18gPVxuICAgICAgICAgICAgdGFyZ2V0Ll9fVlVFX0RFVlRPT0xTX0hPT0tfUkVQTEFZX18gfHwgW10pO1xuICAgICAgICByZXBsYXkucHVzaCgobmV3SG9vaykgPT4ge1xuICAgICAgICAgICAgc2V0RGV2dG9vbHNIb29rKG5ld0hvb2ssIHRhcmdldCk7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBjbGVhciBidWZmZXIgYWZ0ZXIgM3MgLSB0aGUgdXNlciBwcm9iYWJseSBkb2Vzbid0IGhhdmUgZGV2dG9vbHMgaW5zdGFsbGVkXG4gICAgICAgIC8vIGF0IGFsbCwgYW5kIGtlZXBpbmcgdGhlIGJ1ZmZlciB3aWxsIGNhdXNlIG1lbW9yeSBsZWFrcyAoIzQ3MzgpXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFkZXZ0b29scykge1xuICAgICAgICAgICAgICAgIHRhcmdldC5fX1ZVRV9ERVZUT09MU19IT09LX1JFUExBWV9fID0gbnVsbDtcbiAgICAgICAgICAgICAgICBkZXZ0b29sc05vdEluc3RhbGxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnVmZmVyID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIDMwMDApO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gbm9uLWJyb3dzZXIgZW52LCBhc3N1bWUgbm90IGluc3RhbGxlZFxuICAgICAgICBkZXZ0b29sc05vdEluc3RhbGxlZCA9IHRydWU7XG4gICAgICAgIGJ1ZmZlciA9IFtdO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGRldnRvb2xzSW5pdEFwcChhcHAsIHZlcnNpb24pIHtcbiAgICBlbWl0KFwiYXBwOmluaXRcIiAvKiBEZXZ0b29sc0hvb2tzLkFQUF9JTklUICovLCBhcHAsIHZlcnNpb24sIHtcbiAgICAgICAgRnJhZ21lbnQsXG4gICAgICAgIFRleHQsXG4gICAgICAgIENvbW1lbnQsXG4gICAgICAgIFN0YXRpY1xuICAgIH0pO1xufVxuZnVuY3Rpb24gZGV2dG9vbHNVbm1vdW50QXBwKGFwcCkge1xuICAgIGVtaXQoXCJhcHA6dW5tb3VudFwiIC8qIERldnRvb2xzSG9va3MuQVBQX1VOTU9VTlQgKi8sIGFwcCk7XG59XG5jb25zdCBkZXZ0b29sc0NvbXBvbmVudEFkZGVkID0gLyojX19QVVJFX18qLyBjcmVhdGVEZXZ0b29sc0NvbXBvbmVudEhvb2soXCJjb21wb25lbnQ6YWRkZWRcIiAvKiBEZXZ0b29sc0hvb2tzLkNPTVBPTkVOVF9BRERFRCAqLyk7XG5jb25zdCBkZXZ0b29sc0NvbXBvbmVudFVwZGF0ZWQgPSBcbi8qI19fUFVSRV9fKi8gY3JlYXRlRGV2dG9vbHNDb21wb25lbnRIb29rKFwiY29tcG9uZW50OnVwZGF0ZWRcIiAvKiBEZXZ0b29sc0hvb2tzLkNPTVBPTkVOVF9VUERBVEVEICovKTtcbmNvbnN0IF9kZXZ0b29sc0NvbXBvbmVudFJlbW92ZWQgPSAvKiNfX1BVUkVfXyovIGNyZWF0ZURldnRvb2xzQ29tcG9uZW50SG9vayhcImNvbXBvbmVudDpyZW1vdmVkXCIgLyogRGV2dG9vbHNIb29rcy5DT01QT05FTlRfUkVNT1ZFRCAqLyk7XG5jb25zdCBkZXZ0b29sc0NvbXBvbmVudFJlbW92ZWQgPSAoY29tcG9uZW50KSA9PiB7XG4gICAgaWYgKGRldnRvb2xzICYmXG4gICAgICAgIHR5cGVvZiBkZXZ0b29scy5jbGVhbnVwQnVmZmVyID09PSAnZnVuY3Rpb24nICYmXG4gICAgICAgIC8vIHJlbW92ZSB0aGUgY29tcG9uZW50IGlmIGl0IHdhc24ndCBidWZmZXJlZFxuICAgICAgICAhZGV2dG9vbHMuY2xlYW51cEJ1ZmZlcihjb21wb25lbnQpKSB7XG4gICAgICAgIF9kZXZ0b29sc0NvbXBvbmVudFJlbW92ZWQoY29tcG9uZW50KTtcbiAgICB9XG59O1xuZnVuY3Rpb24gY3JlYXRlRGV2dG9vbHNDb21wb25lbnRIb29rKGhvb2spIHtcbiAgICByZXR1cm4gKGNvbXBvbmVudCkgPT4ge1xuICAgICAgICBlbWl0KGhvb2ssIGNvbXBvbmVudC5hcHBDb250ZXh0LmFwcCwgY29tcG9uZW50LnVpZCwgY29tcG9uZW50LnBhcmVudCA/IGNvbXBvbmVudC5wYXJlbnQudWlkIDogdW5kZWZpbmVkLCBjb21wb25lbnQpO1xuICAgIH07XG59XG5jb25zdCBkZXZ0b29sc1BlcmZTdGFydCA9IC8qI19fUFVSRV9fKi8gY3JlYXRlRGV2dG9vbHNQZXJmb3JtYW5jZUhvb2soXCJwZXJmOnN0YXJ0XCIgLyogRGV2dG9vbHNIb29rcy5QRVJGT1JNQU5DRV9TVEFSVCAqLyk7XG5jb25zdCBkZXZ0b29sc1BlcmZFbmQgPSAvKiNfX1BVUkVfXyovIGNyZWF0ZURldnRvb2xzUGVyZm9ybWFuY2VIb29rKFwicGVyZjplbmRcIiAvKiBEZXZ0b29sc0hvb2tzLlBFUkZPUk1BTkNFX0VORCAqLyk7XG5mdW5jdGlvbiBjcmVhdGVEZXZ0b29sc1BlcmZvcm1hbmNlSG9vayhob29rKSB7XG4gICAgcmV0dXJuIChjb21wb25lbnQsIHR5cGUsIHRpbWUpID0+IHtcbiAgICAgICAgZW1pdChob29rLCBjb21wb25lbnQuYXBwQ29udGV4dC5hcHAsIGNvbXBvbmVudC51aWQsIGNvbXBvbmVudCwgdHlwZSwgdGltZSk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGRldnRvb2xzQ29tcG9uZW50RW1pdChjb21wb25lbnQsIGV2ZW50LCBwYXJhbXMpIHtcbiAgICBlbWl0KFwiY29tcG9uZW50OmVtaXRcIiAvKiBEZXZ0b29sc0hvb2tzLkNPTVBPTkVOVF9FTUlUICovLCBjb21wb25lbnQuYXBwQ29udGV4dC5hcHAsIGNvbXBvbmVudCwgZXZlbnQsIHBhcmFtcyk7XG59XG5cbmZ1bmN0aW9uIGVtaXQkMShpbnN0YW5jZSwgZXZlbnQsIC4uLnJhd0FyZ3MpIHtcbiAgICBpZiAoaW5zdGFuY2UuaXNVbm1vdW50ZWQpXG4gICAgICAgIHJldHVybjtcbiAgICBjb25zdCBwcm9wcyA9IGluc3RhbmNlLnZub2RlLnByb3BzIHx8IEVNUFRZX09CSjtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIGNvbnN0IHsgZW1pdHNPcHRpb25zLCBwcm9wc09wdGlvbnM6IFtwcm9wc09wdGlvbnNdIH0gPSBpbnN0YW5jZTtcbiAgICAgICAgaWYgKGVtaXRzT3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKCEoZXZlbnQgaW4gZW1pdHNPcHRpb25zKSAmJlxuICAgICAgICAgICAgICAgICEoZmFsc2UgKSkge1xuICAgICAgICAgICAgICAgIGlmICghcHJvcHNPcHRpb25zIHx8ICEodG9IYW5kbGVyS2V5KGV2ZW50KSBpbiBwcm9wc09wdGlvbnMpKSB7XG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYENvbXBvbmVudCBlbWl0dGVkIGV2ZW50IFwiJHtldmVudH1cIiBidXQgaXQgaXMgbmVpdGhlciBkZWNsYXJlZCBpbiBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGB0aGUgZW1pdHMgb3B0aW9uIG5vciBhcyBhbiBcIiR7dG9IYW5kbGVyS2V5KGV2ZW50KX1cIiBwcm9wLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbGlkYXRvciA9IGVtaXRzT3B0aW9uc1tldmVudF07XG4gICAgICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24odmFsaWRhdG9yKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpc1ZhbGlkID0gdmFsaWRhdG9yKC4uLnJhd0FyZ3MpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzVmFsaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm4oYEludmFsaWQgZXZlbnQgYXJndW1lbnRzOiBldmVudCB2YWxpZGF0aW9uIGZhaWxlZCBmb3IgZXZlbnQgXCIke2V2ZW50fVwiLmApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGxldCBhcmdzID0gcmF3QXJncztcbiAgICBjb25zdCBpc01vZGVsTGlzdGVuZXIgPSBldmVudC5zdGFydHNXaXRoKCd1cGRhdGU6Jyk7XG4gICAgLy8gZm9yIHYtbW9kZWwgdXBkYXRlOnh4eCBldmVudHMsIGFwcGx5IG1vZGlmaWVycyBvbiBhcmdzXG4gICAgY29uc3QgbW9kZWxBcmcgPSBpc01vZGVsTGlzdGVuZXIgJiYgZXZlbnQuc2xpY2UoNyk7XG4gICAgaWYgKG1vZGVsQXJnICYmIG1vZGVsQXJnIGluIHByb3BzKSB7XG4gICAgICAgIGNvbnN0IG1vZGlmaWVyc0tleSA9IGAke21vZGVsQXJnID09PSAnbW9kZWxWYWx1ZScgPyAnbW9kZWwnIDogbW9kZWxBcmd9TW9kaWZpZXJzYDtcbiAgICAgICAgY29uc3QgeyBudW1iZXIsIHRyaW0gfSA9IHByb3BzW21vZGlmaWVyc0tleV0gfHwgRU1QVFlfT0JKO1xuICAgICAgICBpZiAodHJpbSkge1xuICAgICAgICAgICAgYXJncyA9IHJhd0FyZ3MubWFwKGEgPT4gKGlzU3RyaW5nKGEpID8gYS50cmltKCkgOiBhKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG51bWJlcikge1xuICAgICAgICAgICAgYXJncyA9IHJhd0FyZ3MubWFwKHRvTnVtYmVyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xuICAgICAgICBkZXZ0b29sc0NvbXBvbmVudEVtaXQoaW5zdGFuY2UsIGV2ZW50LCBhcmdzKTtcbiAgICB9XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICBjb25zdCBsb3dlckNhc2VFdmVudCA9IGV2ZW50LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGlmIChsb3dlckNhc2VFdmVudCAhPT0gZXZlbnQgJiYgcHJvcHNbdG9IYW5kbGVyS2V5KGxvd2VyQ2FzZUV2ZW50KV0pIHtcbiAgICAgICAgICAgIHdhcm4oYEV2ZW50IFwiJHtsb3dlckNhc2VFdmVudH1cIiBpcyBlbWl0dGVkIGluIGNvbXBvbmVudCBgICtcbiAgICAgICAgICAgICAgICBgJHtmb3JtYXRDb21wb25lbnROYW1lKGluc3RhbmNlLCBpbnN0YW5jZS50eXBlKX0gYnV0IHRoZSBoYW5kbGVyIGlzIHJlZ2lzdGVyZWQgZm9yIFwiJHtldmVudH1cIi4gYCArXG4gICAgICAgICAgICAgICAgYE5vdGUgdGhhdCBIVE1MIGF0dHJpYnV0ZXMgYXJlIGNhc2UtaW5zZW5zaXRpdmUgYW5kIHlvdSBjYW5ub3QgdXNlIGAgK1xuICAgICAgICAgICAgICAgIGB2LW9uIHRvIGxpc3RlbiB0byBjYW1lbENhc2UgZXZlbnRzIHdoZW4gdXNpbmcgaW4tRE9NIHRlbXBsYXRlcy4gYCArXG4gICAgICAgICAgICAgICAgYFlvdSBzaG91bGQgcHJvYmFibHkgdXNlIFwiJHtoeXBoZW5hdGUoZXZlbnQpfVwiIGluc3RlYWQgb2YgXCIke2V2ZW50fVwiLmApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGxldCBoYW5kbGVyTmFtZTtcbiAgICBsZXQgaGFuZGxlciA9IHByb3BzWyhoYW5kbGVyTmFtZSA9IHRvSGFuZGxlcktleShldmVudCkpXSB8fFxuICAgICAgICAvLyBhbHNvIHRyeSBjYW1lbENhc2UgZXZlbnQgaGFuZGxlciAoIzIyNDkpXG4gICAgICAgIHByb3BzWyhoYW5kbGVyTmFtZSA9IHRvSGFuZGxlcktleShjYW1lbGl6ZShldmVudCkpKV07XG4gICAgLy8gZm9yIHYtbW9kZWwgdXBkYXRlOnh4eCBldmVudHMsIGFsc28gdHJpZ2dlciBrZWJhYi1jYXNlIGVxdWl2YWxlbnRcbiAgICAvLyBmb3IgcHJvcHMgcGFzc2VkIHZpYSBrZWJhYi1jYXNlXG4gICAgaWYgKCFoYW5kbGVyICYmIGlzTW9kZWxMaXN0ZW5lcikge1xuICAgICAgICBoYW5kbGVyID0gcHJvcHNbKGhhbmRsZXJOYW1lID0gdG9IYW5kbGVyS2V5KGh5cGhlbmF0ZShldmVudCkpKV07XG4gICAgfVxuICAgIGlmIChoYW5kbGVyKSB7XG4gICAgICAgIGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nKGhhbmRsZXIsIGluc3RhbmNlLCA2IC8qIEVycm9yQ29kZXMuQ09NUE9ORU5UX0VWRU5UX0hBTkRMRVIgKi8sIGFyZ3MpO1xuICAgIH1cbiAgICBjb25zdCBvbmNlSGFuZGxlciA9IHByb3BzW2hhbmRsZXJOYW1lICsgYE9uY2VgXTtcbiAgICBpZiAob25jZUhhbmRsZXIpIHtcbiAgICAgICAgaWYgKCFpbnN0YW5jZS5lbWl0dGVkKSB7XG4gICAgICAgICAgICBpbnN0YW5jZS5lbWl0dGVkID0ge307XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaW5zdGFuY2UuZW1pdHRlZFtoYW5kbGVyTmFtZV0pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpbnN0YW5jZS5lbWl0dGVkW2hhbmRsZXJOYW1lXSA9IHRydWU7XG4gICAgICAgIGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nKG9uY2VIYW5kbGVyLCBpbnN0YW5jZSwgNiAvKiBFcnJvckNvZGVzLkNPTVBPTkVOVF9FVkVOVF9IQU5ETEVSICovLCBhcmdzKTtcbiAgICB9XG59XG5mdW5jdGlvbiBub3JtYWxpemVFbWl0c09wdGlvbnMoY29tcCwgYXBwQ29udGV4dCwgYXNNaXhpbiA9IGZhbHNlKSB7XG4gICAgY29uc3QgY2FjaGUgPSBhcHBDb250ZXh0LmVtaXRzQ2FjaGU7XG4gICAgY29uc3QgY2FjaGVkID0gY2FjaGUuZ2V0KGNvbXApO1xuICAgIGlmIChjYWNoZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gY2FjaGVkO1xuICAgIH1cbiAgICBjb25zdCByYXcgPSBjb21wLmVtaXRzO1xuICAgIGxldCBub3JtYWxpemVkID0ge307XG4gICAgLy8gYXBwbHkgbWl4aW4vZXh0ZW5kcyBwcm9wc1xuICAgIGxldCBoYXNFeHRlbmRzID0gZmFsc2U7XG4gICAgaWYgKF9fVlVFX09QVElPTlNfQVBJX18gJiYgIWlzRnVuY3Rpb24oY29tcCkpIHtcbiAgICAgICAgY29uc3QgZXh0ZW5kRW1pdHMgPSAocmF3KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkRnJvbUV4dGVuZCA9IG5vcm1hbGl6ZUVtaXRzT3B0aW9ucyhyYXcsIGFwcENvbnRleHQsIHRydWUpO1xuICAgICAgICAgICAgaWYgKG5vcm1hbGl6ZWRGcm9tRXh0ZW5kKSB7XG4gICAgICAgICAgICAgICAgaGFzRXh0ZW5kcyA9IHRydWU7XG4gICAgICAgICAgICAgICAgZXh0ZW5kKG5vcm1hbGl6ZWQsIG5vcm1hbGl6ZWRGcm9tRXh0ZW5kKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKCFhc01peGluICYmIGFwcENvbnRleHQubWl4aW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgYXBwQ29udGV4dC5taXhpbnMuZm9yRWFjaChleHRlbmRFbWl0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbXAuZXh0ZW5kcykge1xuICAgICAgICAgICAgZXh0ZW5kRW1pdHMoY29tcC5leHRlbmRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29tcC5taXhpbnMpIHtcbiAgICAgICAgICAgIGNvbXAubWl4aW5zLmZvckVhY2goZXh0ZW5kRW1pdHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICghcmF3ICYmICFoYXNFeHRlbmRzKSB7XG4gICAgICAgIGlmIChpc09iamVjdChjb21wKSkge1xuICAgICAgICAgICAgY2FjaGUuc2V0KGNvbXAsIG51bGwpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAoaXNBcnJheShyYXcpKSB7XG4gICAgICAgIHJhdy5mb3JFYWNoKGtleSA9PiAobm9ybWFsaXplZFtrZXldID0gbnVsbCkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZXh0ZW5kKG5vcm1hbGl6ZWQsIHJhdyk7XG4gICAgfVxuICAgIGlmIChpc09iamVjdChjb21wKSkge1xuICAgICAgICBjYWNoZS5zZXQoY29tcCwgbm9ybWFsaXplZCk7XG4gICAgfVxuICAgIHJldHVybiBub3JtYWxpemVkO1xufVxuLy8gQ2hlY2sgaWYgYW4gaW5jb21pbmcgcHJvcCBrZXkgaXMgYSBkZWNsYXJlZCBlbWl0IGV2ZW50IGxpc3RlbmVyLlxuLy8gZS5nLiBXaXRoIGBlbWl0czogeyBjbGljazogbnVsbCB9YCwgcHJvcHMgbmFtZWQgYG9uQ2xpY2tgIGFuZCBgb25jbGlja2AgYXJlXG4vLyBib3RoIGNvbnNpZGVyZWQgbWF0Y2hlZCBsaXN0ZW5lcnMuXG5mdW5jdGlvbiBpc0VtaXRMaXN0ZW5lcihvcHRpb25zLCBrZXkpIHtcbiAgICBpZiAoIW9wdGlvbnMgfHwgIWlzT24oa2V5KSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGtleSA9IGtleS5zbGljZSgyKS5yZXBsYWNlKC9PbmNlJC8sICcnKTtcbiAgICByZXR1cm4gKGhhc093bihvcHRpb25zLCBrZXlbMF0udG9Mb3dlckNhc2UoKSArIGtleS5zbGljZSgxKSkgfHxcbiAgICAgICAgaGFzT3duKG9wdGlvbnMsIGh5cGhlbmF0ZShrZXkpKSB8fFxuICAgICAgICBoYXNPd24ob3B0aW9ucywga2V5KSk7XG59XG5cbi8qKlxuICogbWFyayB0aGUgY3VycmVudCByZW5kZXJpbmcgaW5zdGFuY2UgZm9yIGFzc2V0IHJlc29sdXRpb24gKGUuZy5cbiAqIHJlc29sdmVDb21wb25lbnQsIHJlc29sdmVEaXJlY3RpdmUpIGR1cmluZyByZW5kZXJcbiAqL1xubGV0IGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSA9IG51bGw7XG5sZXQgY3VycmVudFNjb3BlSWQgPSBudWxsO1xuLyoqXG4gKiBOb3RlOiByZW5kZXJpbmcgY2FsbHMgbWF5YmUgbmVzdGVkLiBUaGUgZnVuY3Rpb24gcmV0dXJucyB0aGUgcGFyZW50IHJlbmRlcmluZ1xuICogaW5zdGFuY2UgaWYgcHJlc2VudCwgd2hpY2ggc2hvdWxkIGJlIHJlc3RvcmVkIGFmdGVyIHRoZSByZW5kZXIgaXMgZG9uZTpcbiAqXG4gKiBgYGBqc1xuICogY29uc3QgcHJldiA9IHNldEN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZShpKVxuICogLy8gLi4ucmVuZGVyXG4gKiBzZXRDdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UocHJldilcbiAqIGBgYFxuICovXG5mdW5jdGlvbiBzZXRDdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UoaW5zdGFuY2UpIHtcbiAgICBjb25zdCBwcmV2ID0gY3VycmVudFJlbmRlcmluZ0luc3RhbmNlO1xuICAgIGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSA9IGluc3RhbmNlO1xuICAgIGN1cnJlbnRTY29wZUlkID0gKGluc3RhbmNlICYmIGluc3RhbmNlLnR5cGUuX19zY29wZUlkKSB8fCBudWxsO1xuICAgIHJldHVybiBwcmV2O1xufVxuLyoqXG4gKiBTZXQgc2NvcGUgaWQgd2hlbiBjcmVhdGluZyBob2lzdGVkIHZub2Rlcy5cbiAqIEBwcml2YXRlIGNvbXBpbGVyIGhlbHBlclxuICovXG5mdW5jdGlvbiBwdXNoU2NvcGVJZChpZCkge1xuICAgIGN1cnJlbnRTY29wZUlkID0gaWQ7XG59XG4vKipcbiAqIFRlY2huaWNhbGx5IHdlIG5vIGxvbmdlciBuZWVkIHRoaXMgYWZ0ZXIgMy4wLjggYnV0IHdlIG5lZWQgdG8ga2VlcCB0aGUgc2FtZVxuICogQVBJIGZvciBiYWNrd2FyZHMgY29tcGF0IHcvIGNvZGUgZ2VuZXJhdGVkIGJ5IGNvbXBpbGVycy5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHBvcFNjb3BlSWQoKSB7XG4gICAgY3VycmVudFNjb3BlSWQgPSBudWxsO1xufVxuLyoqXG4gKiBPbmx5IGZvciBiYWNrd2FyZHMgY29tcGF0XG4gKiBAcHJpdmF0ZVxuICovXG5jb25zdCB3aXRoU2NvcGVJZCA9IChfaWQpID0+IHdpdGhDdHg7XG4vKipcbiAqIFdyYXAgYSBzbG90IGZ1bmN0aW9uIHRvIG1lbW9pemUgY3VycmVudCByZW5kZXJpbmcgaW5zdGFuY2VcbiAqIEBwcml2YXRlIGNvbXBpbGVyIGhlbHBlclxuICovXG5mdW5jdGlvbiB3aXRoQ3R4KGZuLCBjdHggPSBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UsIGlzTm9uU2NvcGVkU2xvdCAvLyBmYWxzZSBvbmx5XG4pIHtcbiAgICBpZiAoIWN0eClcbiAgICAgICAgcmV0dXJuIGZuO1xuICAgIC8vIGFscmVhZHkgbm9ybWFsaXplZFxuICAgIGlmIChmbi5fbikge1xuICAgICAgICByZXR1cm4gZm47XG4gICAgfVxuICAgIGNvbnN0IHJlbmRlckZuV2l0aENvbnRleHQgPSAoLi4uYXJncykgPT4ge1xuICAgICAgICAvLyBJZiBhIHVzZXIgY2FsbHMgYSBjb21waWxlZCBzbG90IGluc2lkZSBhIHRlbXBsYXRlIGV4cHJlc3Npb24gKCMxNzQ1KSwgaXRcbiAgICAgICAgLy8gY2FuIG1lc3MgdXAgYmxvY2sgdHJhY2tpbmcsIHNvIGJ5IGRlZmF1bHQgd2UgZGlzYWJsZSBibG9jayB0cmFja2luZyBhbmRcbiAgICAgICAgLy8gZm9yY2UgYmFpbCBvdXQgd2hlbiBpbnZva2luZyBhIGNvbXBpbGVkIHNsb3QgKGluZGljYXRlZCBieSB0aGUgLl9kIGZsYWcpLlxuICAgICAgICAvLyBUaGlzIGlzbid0IG5lY2Vzc2FyeSBpZiByZW5kZXJpbmcgYSBjb21waWxlZCBgPHNsb3Q+YCwgc28gd2UgZmxpcCB0aGVcbiAgICAgICAgLy8gLl9kIGZsYWcgb2ZmIHdoZW4gaW52b2tpbmcgdGhlIHdyYXBwZWQgZm4gaW5zaWRlIGByZW5kZXJTbG90YC5cbiAgICAgICAgaWYgKHJlbmRlckZuV2l0aENvbnRleHQuX2QpIHtcbiAgICAgICAgICAgIHNldEJsb2NrVHJhY2tpbmcoLTEpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByZXZJbnN0YW5jZSA9IHNldEN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZShjdHgpO1xuICAgICAgICBsZXQgcmVzO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVzID0gZm4oLi4uYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBzZXRDdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UocHJldkluc3RhbmNlKTtcbiAgICAgICAgICAgIGlmIChyZW5kZXJGbldpdGhDb250ZXh0Ll9kKSB7XG4gICAgICAgICAgICAgICAgc2V0QmxvY2tUcmFja2luZygxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xuICAgICAgICAgICAgZGV2dG9vbHNDb21wb25lbnRVcGRhdGVkKGN0eCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9O1xuICAgIC8vIG1hcmsgbm9ybWFsaXplZCB0byBhdm9pZCBkdXBsaWNhdGVkIHdyYXBwaW5nXG4gICAgcmVuZGVyRm5XaXRoQ29udGV4dC5fbiA9IHRydWU7XG4gICAgLy8gbWFyayB0aGlzIGFzIGNvbXBpbGVkIGJ5IGRlZmF1bHRcbiAgICAvLyB0aGlzIGlzIHVzZWQgaW4gdm5vZGUudHMgLT4gbm9ybWFsaXplQ2hpbGRyZW4oKSB0byBzZXQgdGhlIHNsb3RcbiAgICAvLyByZW5kZXJpbmcgZmxhZy5cbiAgICByZW5kZXJGbldpdGhDb250ZXh0Ll9jID0gdHJ1ZTtcbiAgICAvLyBkaXNhYmxlIGJsb2NrIHRyYWNraW5nIGJ5IGRlZmF1bHRcbiAgICByZW5kZXJGbldpdGhDb250ZXh0Ll9kID0gdHJ1ZTtcbiAgICByZXR1cm4gcmVuZGVyRm5XaXRoQ29udGV4dDtcbn1cblxuLyoqXG4gKiBkZXYgb25seSBmbGFnIHRvIHRyYWNrIHdoZXRoZXIgJGF0dHJzIHdhcyB1c2VkIGR1cmluZyByZW5kZXIuXG4gKiBJZiAkYXR0cnMgd2FzIHVzZWQgZHVyaW5nIHJlbmRlciB0aGVuIHRoZSB3YXJuaW5nIGZvciBmYWlsZWQgYXR0cnNcbiAqIGZhbGx0aHJvdWdoIGNhbiBiZSBzdXBwcmVzc2VkLlxuICovXG5sZXQgYWNjZXNzZWRBdHRycyA9IGZhbHNlO1xuZnVuY3Rpb24gbWFya0F0dHJzQWNjZXNzZWQoKSB7XG4gICAgYWNjZXNzZWRBdHRycyA9IHRydWU7XG59XG5mdW5jdGlvbiByZW5kZXJDb21wb25lbnRSb290KGluc3RhbmNlKSB7XG4gICAgY29uc3QgeyB0eXBlOiBDb21wb25lbnQsIHZub2RlLCBwcm94eSwgd2l0aFByb3h5LCBwcm9wcywgcHJvcHNPcHRpb25zOiBbcHJvcHNPcHRpb25zXSwgc2xvdHMsIGF0dHJzLCBlbWl0LCByZW5kZXIsIHJlbmRlckNhY2hlLCBkYXRhLCBzZXR1cFN0YXRlLCBjdHgsIGluaGVyaXRBdHRycyB9ID0gaW5zdGFuY2U7XG4gICAgbGV0IHJlc3VsdDtcbiAgICBsZXQgZmFsbHRocm91Z2hBdHRycztcbiAgICBjb25zdCBwcmV2ID0gc2V0Q3VycmVudFJlbmRlcmluZ0luc3RhbmNlKGluc3RhbmNlKTtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIGFjY2Vzc2VkQXR0cnMgPSBmYWxzZTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHZub2RlLnNoYXBlRmxhZyAmIDQgLyogU2hhcGVGbGFncy5TVEFURUZVTF9DT01QT05FTlQgKi8pIHtcbiAgICAgICAgICAgIC8vIHdpdGhQcm94eSBpcyBhIHByb3h5IHdpdGggYSBkaWZmZXJlbnQgYGhhc2AgdHJhcCBvbmx5IGZvclxuICAgICAgICAgICAgLy8gcnVudGltZS1jb21waWxlZCByZW5kZXIgZnVuY3Rpb25zIHVzaW5nIGB3aXRoYCBibG9jay5cbiAgICAgICAgICAgIGNvbnN0IHByb3h5VG9Vc2UgPSB3aXRoUHJveHkgfHwgcHJveHk7XG4gICAgICAgICAgICByZXN1bHQgPSBub3JtYWxpemVWTm9kZShyZW5kZXIuY2FsbChwcm94eVRvVXNlLCBwcm94eVRvVXNlLCByZW5kZXJDYWNoZSwgcHJvcHMsIHNldHVwU3RhdGUsIGRhdGEsIGN0eCkpO1xuICAgICAgICAgICAgZmFsbHRocm91Z2hBdHRycyA9IGF0dHJzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gZnVuY3Rpb25hbFxuICAgICAgICAgICAgY29uc3QgcmVuZGVyID0gQ29tcG9uZW50O1xuICAgICAgICAgICAgLy8gaW4gZGV2LCBtYXJrIGF0dHJzIGFjY2Vzc2VkIGlmIG9wdGlvbmFsIHByb3BzIChhdHRycyA9PT0gcHJvcHMpXG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGF0dHJzID09PSBwcm9wcykge1xuICAgICAgICAgICAgICAgIG1hcmtBdHRyc0FjY2Vzc2VkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXN1bHQgPSBub3JtYWxpemVWTm9kZShyZW5kZXIubGVuZ3RoID4gMVxuICAgICAgICAgICAgICAgID8gcmVuZGVyKHByb3BzLCAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJylcbiAgICAgICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICBnZXQgYXR0cnMoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFya0F0dHJzQWNjZXNzZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXR0cnM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgc2xvdHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBlbWl0XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgOiB7IGF0dHJzLCBzbG90cywgZW1pdCB9KVxuICAgICAgICAgICAgICAgIDogcmVuZGVyKHByb3BzLCBudWxsIC8qIHdlIGtub3cgaXQgZG9lc24ndCBuZWVkIGl0ICovKSk7XG4gICAgICAgICAgICBmYWxsdGhyb3VnaEF0dHJzID0gQ29tcG9uZW50LnByb3BzXG4gICAgICAgICAgICAgICAgPyBhdHRyc1xuICAgICAgICAgICAgICAgIDogZ2V0RnVuY3Rpb25hbEZhbGx0aHJvdWdoKGF0dHJzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGJsb2NrU3RhY2subGVuZ3RoID0gMDtcbiAgICAgICAgaGFuZGxlRXJyb3IoZXJyLCBpbnN0YW5jZSwgMSAvKiBFcnJvckNvZGVzLlJFTkRFUl9GVU5DVElPTiAqLyk7XG4gICAgICAgIHJlc3VsdCA9IGNyZWF0ZVZOb2RlKENvbW1lbnQpO1xuICAgIH1cbiAgICAvLyBhdHRyIG1lcmdpbmdcbiAgICAvLyBpbiBkZXYgbW9kZSwgY29tbWVudHMgYXJlIHByZXNlcnZlZCwgYW5kIGl0J3MgcG9zc2libGUgZm9yIGEgdGVtcGxhdGVcbiAgICAvLyB0byBoYXZlIGNvbW1lbnRzIGFsb25nIHNpZGUgdGhlIHJvb3QgZWxlbWVudCB3aGljaCBtYWtlcyBpdCBhIGZyYWdtZW50XG4gICAgbGV0IHJvb3QgPSByZXN1bHQ7XG4gICAgbGV0IHNldFJvb3QgPSB1bmRlZmluZWQ7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxuICAgICAgICByZXN1bHQucGF0Y2hGbGFnID4gMCAmJlxuICAgICAgICByZXN1bHQucGF0Y2hGbGFnICYgMjA0OCAvKiBQYXRjaEZsYWdzLkRFVl9ST09UX0ZSQUdNRU5UICovKSB7XG4gICAgICAgIFtyb290LCBzZXRSb290XSA9IGdldENoaWxkUm9vdChyZXN1bHQpO1xuICAgIH1cbiAgICBpZiAoZmFsbHRocm91Z2hBdHRycyAmJiBpbmhlcml0QXR0cnMgIT09IGZhbHNlKSB7XG4gICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhmYWxsdGhyb3VnaEF0dHJzKTtcbiAgICAgICAgY29uc3QgeyBzaGFwZUZsYWcgfSA9IHJvb3Q7XG4gICAgICAgIGlmIChrZXlzLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKHNoYXBlRmxhZyAmICgxIC8qIFNoYXBlRmxhZ3MuRUxFTUVOVCAqLyB8IDYgLyogU2hhcGVGbGFncy5DT01QT05FTlQgKi8pKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByb3BzT3B0aW9ucyAmJiBrZXlzLnNvbWUoaXNNb2RlbExpc3RlbmVyKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiBhIHYtbW9kZWwgbGlzdGVuZXIgKG9uVXBkYXRlOnh4eCkgaGFzIGEgY29ycmVzcG9uZGluZyBkZWNsYXJlZFxuICAgICAgICAgICAgICAgICAgICAvLyBwcm9wLCBpdCBpbmRpY2F0ZXMgdGhpcyBjb21wb25lbnQgZXhwZWN0cyB0byBoYW5kbGUgdi1tb2RlbCBhbmRcbiAgICAgICAgICAgICAgICAgICAgLy8gaXQgc2hvdWxkIG5vdCBmYWxsdGhyb3VnaC5cbiAgICAgICAgICAgICAgICAgICAgLy8gcmVsYXRlZDogIzE1NDMsICMxNjQzLCAjMTk4OVxuICAgICAgICAgICAgICAgICAgICBmYWxsdGhyb3VnaEF0dHJzID0gZmlsdGVyTW9kZWxMaXN0ZW5lcnMoZmFsbHRocm91Z2hBdHRycywgcHJvcHNPcHRpb25zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcm9vdCA9IGNsb25lVk5vZGUocm9vdCwgZmFsbHRocm91Z2hBdHRycyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWFjY2Vzc2VkQXR0cnMgJiYgcm9vdC50eXBlICE9PSBDb21tZW50KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYWxsQXR0cnMgPSBPYmplY3Qua2V5cyhhdHRycyk7XG4gICAgICAgICAgICAgICAgY29uc3QgZXZlbnRBdHRycyA9IFtdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4dHJhQXR0cnMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IGFsbEF0dHJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBhbGxBdHRyc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzT24oa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWdub3JlIHYtbW9kZWwgaGFuZGxlcnMgd2hlbiB0aGV5IGZhaWwgdG8gZmFsbHRocm91Z2hcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNNb2RlbExpc3RlbmVyKGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgYG9uYCwgbG93ZXJjYXNlIGZpcnN0IGxldHRlciB0byByZWZsZWN0IGV2ZW50IGNhc2luZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFjY3VyYXRlbHlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudEF0dHJzLnB1c2goa2V5WzJdLnRvTG93ZXJDYXNlKCkgKyBrZXkuc2xpY2UoMykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmFBdHRycy5wdXNoKGtleSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGV4dHJhQXR0cnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYEV4dHJhbmVvdXMgbm9uLXByb3BzIGF0dHJpYnV0ZXMgKGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYCR7ZXh0cmFBdHRycy5qb2luKCcsICcpfSkgYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgd2VyZSBwYXNzZWQgdG8gY29tcG9uZW50IGJ1dCBjb3VsZCBub3QgYmUgYXV0b21hdGljYWxseSBpbmhlcml0ZWQgYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgYmVjYXVzZSBjb21wb25lbnQgcmVuZGVycyBmcmFnbWVudCBvciB0ZXh0IHJvb3Qgbm9kZXMuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChldmVudEF0dHJzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB3YXJuKGBFeHRyYW5lb3VzIG5vbi1lbWl0cyBldmVudCBsaXN0ZW5lcnMgKGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYCR7ZXZlbnRBdHRycy5qb2luKCcsICcpfSkgYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgd2VyZSBwYXNzZWQgdG8gY29tcG9uZW50IGJ1dCBjb3VsZCBub3QgYmUgYXV0b21hdGljYWxseSBpbmhlcml0ZWQgYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgYmVjYXVzZSBjb21wb25lbnQgcmVuZGVycyBmcmFnbWVudCBvciB0ZXh0IHJvb3Qgbm9kZXMuIGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYElmIHRoZSBsaXN0ZW5lciBpcyBpbnRlbmRlZCB0byBiZSBhIGNvbXBvbmVudCBjdXN0b20gZXZlbnQgbGlzdGVuZXIgb25seSwgYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgZGVjbGFyZSBpdCB1c2luZyB0aGUgXCJlbWl0c1wiIG9wdGlvbi5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gaW5oZXJpdCBkaXJlY3RpdmVzXG4gICAgaWYgKHZub2RlLmRpcnMpIHtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhaXNFbGVtZW50Um9vdChyb290KSkge1xuICAgICAgICAgICAgd2FybihgUnVudGltZSBkaXJlY3RpdmUgdXNlZCBvbiBjb21wb25lbnQgd2l0aCBub24tZWxlbWVudCByb290IG5vZGUuIGAgK1xuICAgICAgICAgICAgICAgIGBUaGUgZGlyZWN0aXZlcyB3aWxsIG5vdCBmdW5jdGlvbiBhcyBpbnRlbmRlZC5gKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBjbG9uZSBiZWZvcmUgbXV0YXRpbmcgc2luY2UgdGhlIHJvb3QgbWF5IGJlIGEgaG9pc3RlZCB2bm9kZVxuICAgICAgICByb290ID0gY2xvbmVWTm9kZShyb290KTtcbiAgICAgICAgcm9vdC5kaXJzID0gcm9vdC5kaXJzID8gcm9vdC5kaXJzLmNvbmNhdCh2bm9kZS5kaXJzKSA6IHZub2RlLmRpcnM7XG4gICAgfVxuICAgIC8vIGluaGVyaXQgdHJhbnNpdGlvbiBkYXRhXG4gICAgaWYgKHZub2RlLnRyYW5zaXRpb24pIHtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhaXNFbGVtZW50Um9vdChyb290KSkge1xuICAgICAgICAgICAgd2FybihgQ29tcG9uZW50IGluc2lkZSA8VHJhbnNpdGlvbj4gcmVuZGVycyBub24tZWxlbWVudCByb290IG5vZGUgYCArXG4gICAgICAgICAgICAgICAgYHRoYXQgY2Fubm90IGJlIGFuaW1hdGVkLmApO1xuICAgICAgICB9XG4gICAgICAgIHJvb3QudHJhbnNpdGlvbiA9IHZub2RlLnRyYW5zaXRpb247XG4gICAgfVxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgc2V0Um9vdCkge1xuICAgICAgICBzZXRSb290KHJvb3QpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmVzdWx0ID0gcm9vdDtcbiAgICB9XG4gICAgc2V0Q3VycmVudFJlbmRlcmluZ0luc3RhbmNlKHByZXYpO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG4vKipcbiAqIGRldiBvbmx5XG4gKiBJbiBkZXYgbW9kZSwgdGVtcGxhdGUgcm9vdCBsZXZlbCBjb21tZW50cyBhcmUgcmVuZGVyZWQsIHdoaWNoIHR1cm5zIHRoZVxuICogdGVtcGxhdGUgaW50byBhIGZyYWdtZW50IHJvb3QsIGJ1dCB3ZSBuZWVkIHRvIGxvY2F0ZSB0aGUgc2luZ2xlIGVsZW1lbnRcbiAqIHJvb3QgZm9yIGF0dHJzIGFuZCBzY29wZSBpZCBwcm9jZXNzaW5nLlxuICovXG5jb25zdCBnZXRDaGlsZFJvb3QgPSAodm5vZGUpID0+IHtcbiAgICBjb25zdCByYXdDaGlsZHJlbiA9IHZub2RlLmNoaWxkcmVuO1xuICAgIGNvbnN0IGR5bmFtaWNDaGlsZHJlbiA9IHZub2RlLmR5bmFtaWNDaGlsZHJlbjtcbiAgICBjb25zdCBjaGlsZFJvb3QgPSBmaWx0ZXJTaW5nbGVSb290KHJhd0NoaWxkcmVuKTtcbiAgICBpZiAoIWNoaWxkUm9vdCkge1xuICAgICAgICByZXR1cm4gW3Zub2RlLCB1bmRlZmluZWRdO1xuICAgIH1cbiAgICBjb25zdCBpbmRleCA9IHJhd0NoaWxkcmVuLmluZGV4T2YoY2hpbGRSb290KTtcbiAgICBjb25zdCBkeW5hbWljSW5kZXggPSBkeW5hbWljQ2hpbGRyZW4gPyBkeW5hbWljQ2hpbGRyZW4uaW5kZXhPZihjaGlsZFJvb3QpIDogLTE7XG4gICAgY29uc3Qgc2V0Um9vdCA9ICh1cGRhdGVkUm9vdCkgPT4ge1xuICAgICAgICByYXdDaGlsZHJlbltpbmRleF0gPSB1cGRhdGVkUm9vdDtcbiAgICAgICAgaWYgKGR5bmFtaWNDaGlsZHJlbikge1xuICAgICAgICAgICAgaWYgKGR5bmFtaWNJbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgZHluYW1pY0NoaWxkcmVuW2R5bmFtaWNJbmRleF0gPSB1cGRhdGVkUm9vdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHVwZGF0ZWRSb290LnBhdGNoRmxhZyA+IDApIHtcbiAgICAgICAgICAgICAgICB2bm9kZS5keW5hbWljQ2hpbGRyZW4gPSBbLi4uZHluYW1pY0NoaWxkcmVuLCB1cGRhdGVkUm9vdF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBbbm9ybWFsaXplVk5vZGUoY2hpbGRSb290KSwgc2V0Um9vdF07XG59O1xuZnVuY3Rpb24gZmlsdGVyU2luZ2xlUm9vdChjaGlsZHJlbikge1xuICAgIGxldCBzaW5nbGVSb290O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgY2hpbGQgPSBjaGlsZHJlbltpXTtcbiAgICAgICAgaWYgKGlzVk5vZGUoY2hpbGQpKSB7XG4gICAgICAgICAgICAvLyBpZ25vcmUgdXNlciBjb21tZW50XG4gICAgICAgICAgICBpZiAoY2hpbGQudHlwZSAhPT0gQ29tbWVudCB8fCBjaGlsZC5jaGlsZHJlbiA9PT0gJ3YtaWYnKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNpbmdsZVJvb3QpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaGFzIG1vcmUgdGhhbiAxIG5vbi1jb21tZW50IGNoaWxkLCByZXR1cm4gbm93XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNpbmdsZVJvb3QgPSBjaGlsZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNpbmdsZVJvb3Q7XG59XG5jb25zdCBnZXRGdW5jdGlvbmFsRmFsbHRocm91Z2ggPSAoYXR0cnMpID0+IHtcbiAgICBsZXQgcmVzO1xuICAgIGZvciAoY29uc3Qga2V5IGluIGF0dHJzKSB7XG4gICAgICAgIGlmIChrZXkgPT09ICdjbGFzcycgfHwga2V5ID09PSAnc3R5bGUnIHx8IGlzT24oa2V5KSkge1xuICAgICAgICAgICAgKHJlcyB8fCAocmVzID0ge30pKVtrZXldID0gYXR0cnNba2V5XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufTtcbmNvbnN0IGZpbHRlck1vZGVsTGlzdGVuZXJzID0gKGF0dHJzLCBwcm9wcykgPT4ge1xuICAgIGNvbnN0IHJlcyA9IHt9O1xuICAgIGZvciAoY29uc3Qga2V5IGluIGF0dHJzKSB7XG4gICAgICAgIGlmICghaXNNb2RlbExpc3RlbmVyKGtleSkgfHwgIShrZXkuc2xpY2UoOSkgaW4gcHJvcHMpKSB7XG4gICAgICAgICAgICByZXNba2V5XSA9IGF0dHJzW2tleV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn07XG5jb25zdCBpc0VsZW1lbnRSb290ID0gKHZub2RlKSA9PiB7XG4gICAgcmV0dXJuICh2bm9kZS5zaGFwZUZsYWcgJiAoNiAvKiBTaGFwZUZsYWdzLkNPTVBPTkVOVCAqLyB8IDEgLyogU2hhcGVGbGFncy5FTEVNRU5UICovKSB8fFxuICAgICAgICB2bm9kZS50eXBlID09PSBDb21tZW50IC8vIHBvdGVudGlhbCB2LWlmIGJyYW5jaCBzd2l0Y2hcbiAgICApO1xufTtcbmZ1bmN0aW9uIHNob3VsZFVwZGF0ZUNvbXBvbmVudChwcmV2Vk5vZGUsIG5leHRWTm9kZSwgb3B0aW1pemVkKSB7XG4gICAgY29uc3QgeyBwcm9wczogcHJldlByb3BzLCBjaGlsZHJlbjogcHJldkNoaWxkcmVuLCBjb21wb25lbnQgfSA9IHByZXZWTm9kZTtcbiAgICBjb25zdCB7IHByb3BzOiBuZXh0UHJvcHMsIGNoaWxkcmVuOiBuZXh0Q2hpbGRyZW4sIHBhdGNoRmxhZyB9ID0gbmV4dFZOb2RlO1xuICAgIGNvbnN0IGVtaXRzID0gY29tcG9uZW50LmVtaXRzT3B0aW9ucztcbiAgICAvLyBQYXJlbnQgY29tcG9uZW50J3MgcmVuZGVyIGZ1bmN0aW9uIHdhcyBob3QtdXBkYXRlZC4gU2luY2UgdGhpcyBtYXkgaGF2ZVxuICAgIC8vIGNhdXNlZCB0aGUgY2hpbGQgY29tcG9uZW50J3Mgc2xvdHMgY29udGVudCB0byBoYXZlIGNoYW5nZWQsIHdlIG5lZWQgdG9cbiAgICAvLyBmb3JjZSB0aGUgY2hpbGQgdG8gdXBkYXRlIGFzIHdlbGwuXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAocHJldkNoaWxkcmVuIHx8IG5leHRDaGlsZHJlbikgJiYgaXNIbXJVcGRhdGluZykge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLy8gZm9yY2UgY2hpbGQgdXBkYXRlIGZvciBydW50aW1lIGRpcmVjdGl2ZSBvciB0cmFuc2l0aW9uIG9uIGNvbXBvbmVudCB2bm9kZS5cbiAgICBpZiAobmV4dFZOb2RlLmRpcnMgfHwgbmV4dFZOb2RlLnRyYW5zaXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChvcHRpbWl6ZWQgJiYgcGF0Y2hGbGFnID49IDApIHtcbiAgICAgICAgaWYgKHBhdGNoRmxhZyAmIDEwMjQgLyogUGF0Y2hGbGFncy5EWU5BTUlDX1NMT1RTICovKSB7XG4gICAgICAgICAgICAvLyBzbG90IGNvbnRlbnQgdGhhdCByZWZlcmVuY2VzIHZhbHVlcyB0aGF0IG1pZ2h0IGhhdmUgY2hhbmdlZCxcbiAgICAgICAgICAgIC8vIGUuZy4gaW4gYSB2LWZvclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhdGNoRmxhZyAmIDE2IC8qIFBhdGNoRmxhZ3MuRlVMTF9QUk9QUyAqLykge1xuICAgICAgICAgICAgaWYgKCFwcmV2UHJvcHMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gISFuZXh0UHJvcHM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBwcmVzZW5jZSBvZiB0aGlzIGZsYWcgaW5kaWNhdGVzIHByb3BzIGFyZSBhbHdheXMgbm9uLW51bGxcbiAgICAgICAgICAgIHJldHVybiBoYXNQcm9wc0NoYW5nZWQocHJldlByb3BzLCBuZXh0UHJvcHMsIGVtaXRzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwYXRjaEZsYWcgJiA4IC8qIFBhdGNoRmxhZ3MuUFJPUFMgKi8pIHtcbiAgICAgICAgICAgIGNvbnN0IGR5bmFtaWNQcm9wcyA9IG5leHRWTm9kZS5keW5hbWljUHJvcHM7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGR5bmFtaWNQcm9wcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGR5bmFtaWNQcm9wc1tpXTtcbiAgICAgICAgICAgICAgICBpZiAobmV4dFByb3BzW2tleV0gIT09IHByZXZQcm9wc1trZXldICYmXG4gICAgICAgICAgICAgICAgICAgICFpc0VtaXRMaXN0ZW5lcihlbWl0cywga2V5KSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIHRoaXMgcGF0aCBpcyBvbmx5IHRha2VuIGJ5IG1hbnVhbGx5IHdyaXR0ZW4gcmVuZGVyIGZ1bmN0aW9uc1xuICAgICAgICAvLyBzbyBwcmVzZW5jZSBvZiBhbnkgY2hpbGRyZW4gbGVhZHMgdG8gYSBmb3JjZWQgdXBkYXRlXG4gICAgICAgIGlmIChwcmV2Q2hpbGRyZW4gfHwgbmV4dENoaWxkcmVuKSB7XG4gICAgICAgICAgICBpZiAoIW5leHRDaGlsZHJlbiB8fCAhbmV4dENoaWxkcmVuLiRzdGFibGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocHJldlByb3BzID09PSBuZXh0UHJvcHMpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXByZXZQcm9wcykge1xuICAgICAgICAgICAgcmV0dXJuICEhbmV4dFByb3BzO1xuICAgICAgICB9XG4gICAgICAgIGlmICghbmV4dFByb3BzKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaGFzUHJvcHNDaGFuZ2VkKHByZXZQcm9wcywgbmV4dFByb3BzLCBlbWl0cyk7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGhhc1Byb3BzQ2hhbmdlZChwcmV2UHJvcHMsIG5leHRQcm9wcywgZW1pdHNPcHRpb25zKSB7XG4gICAgY29uc3QgbmV4dEtleXMgPSBPYmplY3Qua2V5cyhuZXh0UHJvcHMpO1xuICAgIGlmIChuZXh0S2V5cy5sZW5ndGggIT09IE9iamVjdC5rZXlzKHByZXZQcm9wcykubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5leHRLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IG5leHRLZXlzW2ldO1xuICAgICAgICBpZiAobmV4dFByb3BzW2tleV0gIT09IHByZXZQcm9wc1trZXldICYmXG4gICAgICAgICAgICAhaXNFbWl0TGlzdGVuZXIoZW1pdHNPcHRpb25zLCBrZXkpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiB1cGRhdGVIT0NIb3N0RWwoeyB2bm9kZSwgcGFyZW50IH0sIGVsIC8vIEhvc3ROb2RlXG4pIHtcbiAgICB3aGlsZSAocGFyZW50ICYmIHBhcmVudC5zdWJUcmVlID09PSB2bm9kZSkge1xuICAgICAgICAodm5vZGUgPSBwYXJlbnQudm5vZGUpLmVsID0gZWw7XG4gICAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnQ7XG4gICAgfVxufVxuXG5jb25zdCBpc1N1c3BlbnNlID0gKHR5cGUpID0+IHR5cGUuX19pc1N1c3BlbnNlO1xuLy8gU3VzcGVuc2UgZXhwb3NlcyBhIGNvbXBvbmVudC1saWtlIEFQSSwgYW5kIGlzIHRyZWF0ZWQgbGlrZSBhIGNvbXBvbmVudFxuLy8gaW4gdGhlIGNvbXBpbGVyLCBidXQgaW50ZXJuYWxseSBpdCdzIGEgc3BlY2lhbCBidWlsdC1pbiB0eXBlIHRoYXQgaG9va3Ncbi8vIGRpcmVjdGx5IGludG8gdGhlIHJlbmRlcmVyLlxuY29uc3QgU3VzcGVuc2VJbXBsID0ge1xuICAgIG5hbWU6ICdTdXNwZW5zZScsXG4gICAgLy8gSW4gb3JkZXIgdG8gbWFrZSBTdXNwZW5zZSB0cmVlLXNoYWthYmxlLCB3ZSBuZWVkIHRvIGF2b2lkIGltcG9ydGluZyBpdFxuICAgIC8vIGRpcmVjdGx5IGluIHRoZSByZW5kZXJlci4gVGhlIHJlbmRlcmVyIGNoZWNrcyBmb3IgdGhlIF9faXNTdXNwZW5zZSBmbGFnXG4gICAgLy8gb24gYSB2bm9kZSdzIHR5cGUgYW5kIGNhbGxzIHRoZSBgcHJvY2Vzc2AgbWV0aG9kLCBwYXNzaW5nIGluIHJlbmRlcmVyXG4gICAgLy8gaW50ZXJuYWxzLlxuICAgIF9faXNTdXNwZW5zZTogdHJ1ZSxcbiAgICBwcm9jZXNzKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCwgXG4gICAgLy8gcGxhdGZvcm0tc3BlY2lmaWMgaW1wbCBwYXNzZWQgZnJvbSByZW5kZXJlclxuICAgIHJlbmRlcmVySW50ZXJuYWxzKSB7XG4gICAgICAgIGlmIChuMSA9PSBudWxsKSB7XG4gICAgICAgICAgICBtb3VudFN1c3BlbnNlKG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCByZW5kZXJlckludGVybmFscyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwYXRjaFN1c3BlbnNlKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCByZW5kZXJlckludGVybmFscyk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGh5ZHJhdGU6IGh5ZHJhdGVTdXNwZW5zZSxcbiAgICBjcmVhdGU6IGNyZWF0ZVN1c3BlbnNlQm91bmRhcnksXG4gICAgbm9ybWFsaXplOiBub3JtYWxpemVTdXNwZW5zZUNoaWxkcmVuXG59O1xuLy8gRm9yY2UtY2FzdGVkIHB1YmxpYyB0eXBpbmcgZm9yIGggYW5kIFRTWCBwcm9wcyBpbmZlcmVuY2VcbmNvbnN0IFN1c3BlbnNlID0gKFN1c3BlbnNlSW1wbFxuICAgICk7XG5mdW5jdGlvbiB0cmlnZ2VyRXZlbnQodm5vZGUsIG5hbWUpIHtcbiAgICBjb25zdCBldmVudExpc3RlbmVyID0gdm5vZGUucHJvcHMgJiYgdm5vZGUucHJvcHNbbmFtZV07XG4gICAgaWYgKGlzRnVuY3Rpb24oZXZlbnRMaXN0ZW5lcikpIHtcbiAgICAgICAgZXZlbnRMaXN0ZW5lcigpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG1vdW50U3VzcGVuc2Uodm5vZGUsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIHJlbmRlcmVySW50ZXJuYWxzKSB7XG4gICAgY29uc3QgeyBwOiBwYXRjaCwgbzogeyBjcmVhdGVFbGVtZW50IH0gfSA9IHJlbmRlcmVySW50ZXJuYWxzO1xuICAgIGNvbnN0IGhpZGRlbkNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnN0IHN1c3BlbnNlID0gKHZub2RlLnN1c3BlbnNlID0gY3JlYXRlU3VzcGVuc2VCb3VuZGFyeSh2bm9kZSwgcGFyZW50U3VzcGVuc2UsIHBhcmVudENvbXBvbmVudCwgY29udGFpbmVyLCBoaWRkZW5Db250YWluZXIsIGFuY2hvciwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCByZW5kZXJlckludGVybmFscykpO1xuICAgIC8vIHN0YXJ0IG1vdW50aW5nIHRoZSBjb250ZW50IHN1YnRyZWUgaW4gYW4gb2ZmLWRvbSBjb250YWluZXJcbiAgICBwYXRjaChudWxsLCAoc3VzcGVuc2UucGVuZGluZ0JyYW5jaCA9IHZub2RlLnNzQ29udGVudCksIGhpZGRlbkNvbnRhaW5lciwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCBzdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcyk7XG4gICAgLy8gbm93IGNoZWNrIGlmIHdlIGhhdmUgZW5jb3VudGVyZWQgYW55IGFzeW5jIGRlcHNcbiAgICBpZiAoc3VzcGVuc2UuZGVwcyA+IDApIHtcbiAgICAgICAgLy8gaGFzIGFzeW5jXG4gICAgICAgIC8vIGludm9rZSBAZmFsbGJhY2sgZXZlbnRcbiAgICAgICAgdHJpZ2dlckV2ZW50KHZub2RlLCAnb25QZW5kaW5nJyk7XG4gICAgICAgIHRyaWdnZXJFdmVudCh2bm9kZSwgJ29uRmFsbGJhY2snKTtcbiAgICAgICAgLy8gbW91bnQgdGhlIGZhbGxiYWNrIHRyZWVcbiAgICAgICAgcGF0Y2gobnVsbCwgdm5vZGUuc3NGYWxsYmFjaywgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgbnVsbCwgLy8gZmFsbGJhY2sgdHJlZSB3aWxsIG5vdCBoYXZlIHN1c3BlbnNlIGNvbnRleHRcbiAgICAgICAgaXNTVkcsIHNsb3RTY29wZUlkcyk7XG4gICAgICAgIHNldEFjdGl2ZUJyYW5jaChzdXNwZW5zZSwgdm5vZGUuc3NGYWxsYmFjayk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBTdXNwZW5zZSBoYXMgbm8gYXN5bmMgZGVwcy4gSnVzdCByZXNvbHZlLlxuICAgICAgICBzdXNwZW5zZS5yZXNvbHZlKCk7XG4gICAgfVxufVxuZnVuY3Rpb24gcGF0Y2hTdXNwZW5zZShuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCwgeyBwOiBwYXRjaCwgdW06IHVubW91bnQsIG86IHsgY3JlYXRlRWxlbWVudCB9IH0pIHtcbiAgICBjb25zdCBzdXNwZW5zZSA9IChuMi5zdXNwZW5zZSA9IG4xLnN1c3BlbnNlKTtcbiAgICBzdXNwZW5zZS52bm9kZSA9IG4yO1xuICAgIG4yLmVsID0gbjEuZWw7XG4gICAgY29uc3QgbmV3QnJhbmNoID0gbjIuc3NDb250ZW50O1xuICAgIGNvbnN0IG5ld0ZhbGxiYWNrID0gbjIuc3NGYWxsYmFjaztcbiAgICBjb25zdCB7IGFjdGl2ZUJyYW5jaCwgcGVuZGluZ0JyYW5jaCwgaXNJbkZhbGxiYWNrLCBpc0h5ZHJhdGluZyB9ID0gc3VzcGVuc2U7XG4gICAgaWYgKHBlbmRpbmdCcmFuY2gpIHtcbiAgICAgICAgc3VzcGVuc2UucGVuZGluZ0JyYW5jaCA9IG5ld0JyYW5jaDtcbiAgICAgICAgaWYgKGlzU2FtZVZOb2RlVHlwZShuZXdCcmFuY2gsIHBlbmRpbmdCcmFuY2gpKSB7XG4gICAgICAgICAgICAvLyBzYW1lIHJvb3QgdHlwZSBidXQgY29udGVudCBtYXkgaGF2ZSBjaGFuZ2VkLlxuICAgICAgICAgICAgcGF0Y2gocGVuZGluZ0JyYW5jaCwgbmV3QnJhbmNoLCBzdXNwZW5zZS5oaWRkZW5Db250YWluZXIsIG51bGwsIHBhcmVudENvbXBvbmVudCwgc3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgICAgICAgICBpZiAoc3VzcGVuc2UuZGVwcyA8PSAwKSB7XG4gICAgICAgICAgICAgICAgc3VzcGVuc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNJbkZhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgcGF0Y2goYWN0aXZlQnJhbmNoLCBuZXdGYWxsYmFjaywgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgbnVsbCwgLy8gZmFsbGJhY2sgdHJlZSB3aWxsIG5vdCBoYXZlIHN1c3BlbnNlIGNvbnRleHRcbiAgICAgICAgICAgICAgICBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgICAgIHNldEFjdGl2ZUJyYW5jaChzdXNwZW5zZSwgbmV3RmFsbGJhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gdG9nZ2xlZCBiZWZvcmUgcGVuZGluZyB0cmVlIGlzIHJlc29sdmVkXG4gICAgICAgICAgICBzdXNwZW5zZS5wZW5kaW5nSWQrKztcbiAgICAgICAgICAgIGlmIChpc0h5ZHJhdGluZykge1xuICAgICAgICAgICAgICAgIC8vIGlmIHRvZ2dsZWQgYmVmb3JlIGh5ZHJhdGlvbiBpcyBmaW5pc2hlZCwgdGhlIGN1cnJlbnQgRE9NIHRyZWUgaXNcbiAgICAgICAgICAgICAgICAvLyBubyBsb25nZXIgdmFsaWQuIHNldCBpdCBhcyB0aGUgYWN0aXZlIGJyYW5jaCBzbyBpdCB3aWxsIGJlIHVubW91bnRlZFxuICAgICAgICAgICAgICAgIC8vIHdoZW4gcmVzb2x2ZWRcbiAgICAgICAgICAgICAgICBzdXNwZW5zZS5pc0h5ZHJhdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHN1c3BlbnNlLmFjdGl2ZUJyYW5jaCA9IHBlbmRpbmdCcmFuY2g7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB1bm1vdW50KHBlbmRpbmdCcmFuY2gsIHBhcmVudENvbXBvbmVudCwgc3VzcGVuc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gaW5jcmVtZW50IHBlbmRpbmcgSUQuIHRoaXMgaXMgdXNlZCB0byBpbnZhbGlkYXRlIGFzeW5jIGNhbGxiYWNrc1xuICAgICAgICAgICAgLy8gcmVzZXQgc3VzcGVuc2Ugc3RhdGVcbiAgICAgICAgICAgIHN1c3BlbnNlLmRlcHMgPSAwO1xuICAgICAgICAgICAgLy8gZGlzY2FyZCBlZmZlY3RzIGZyb20gcGVuZGluZyBicmFuY2hcbiAgICAgICAgICAgIHN1c3BlbnNlLmVmZmVjdHMubGVuZ3RoID0gMDtcbiAgICAgICAgICAgIC8vIGRpc2NhcmQgcHJldmlvdXMgY29udGFpbmVyXG4gICAgICAgICAgICBzdXNwZW5zZS5oaWRkZW5Db250YWluZXIgPSBjcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIGlmIChpc0luRmFsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAvLyBhbHJlYWR5IGluIGZhbGxiYWNrIHN0YXRlXG4gICAgICAgICAgICAgICAgcGF0Y2gobnVsbCwgbmV3QnJhbmNoLCBzdXNwZW5zZS5oaWRkZW5Db250YWluZXIsIG51bGwsIHBhcmVudENvbXBvbmVudCwgc3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgICAgICAgICAgICAgaWYgKHN1c3BlbnNlLmRlcHMgPD0gMCkge1xuICAgICAgICAgICAgICAgICAgICBzdXNwZW5zZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwYXRjaChhY3RpdmVCcmFuY2gsIG5ld0ZhbGxiYWNrLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBudWxsLCAvLyBmYWxsYmFjayB0cmVlIHdpbGwgbm90IGhhdmUgc3VzcGVuc2UgY29udGV4dFxuICAgICAgICAgICAgICAgICAgICBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgICAgICAgICBzZXRBY3RpdmVCcmFuY2goc3VzcGVuc2UsIG5ld0ZhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChhY3RpdmVCcmFuY2ggJiYgaXNTYW1lVk5vZGVUeXBlKG5ld0JyYW5jaCwgYWN0aXZlQnJhbmNoKSkge1xuICAgICAgICAgICAgICAgIC8vIHRvZ2dsZWQgXCJiYWNrXCIgdG8gY3VycmVudCBhY3RpdmUgYnJhbmNoXG4gICAgICAgICAgICAgICAgcGF0Y2goYWN0aXZlQnJhbmNoLCBuZXdCcmFuY2gsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgICAgIC8vIGZvcmNlIHJlc29sdmVcbiAgICAgICAgICAgICAgICBzdXNwZW5zZS5yZXNvbHZlKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gc3dpdGNoZWQgdG8gYSAzcmQgYnJhbmNoXG4gICAgICAgICAgICAgICAgcGF0Y2gobnVsbCwgbmV3QnJhbmNoLCBzdXNwZW5zZS5oaWRkZW5Db250YWluZXIsIG51bGwsIHBhcmVudENvbXBvbmVudCwgc3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgICAgICAgICAgICAgaWYgKHN1c3BlbnNlLmRlcHMgPD0gMCkge1xuICAgICAgICAgICAgICAgICAgICBzdXNwZW5zZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoYWN0aXZlQnJhbmNoICYmIGlzU2FtZVZOb2RlVHlwZShuZXdCcmFuY2gsIGFjdGl2ZUJyYW5jaCkpIHtcbiAgICAgICAgICAgIC8vIHJvb3QgZGlkIG5vdCBjaGFuZ2UsIGp1c3Qgbm9ybWFsIHBhdGNoXG4gICAgICAgICAgICBwYXRjaChhY3RpdmVCcmFuY2gsIG5ld0JyYW5jaCwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgc3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgICAgICAgICBzZXRBY3RpdmVCcmFuY2goc3VzcGVuc2UsIG5ld0JyYW5jaCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyByb290IG5vZGUgdG9nZ2xlZFxuICAgICAgICAgICAgLy8gaW52b2tlIEBwZW5kaW5nIGV2ZW50XG4gICAgICAgICAgICB0cmlnZ2VyRXZlbnQobjIsICdvblBlbmRpbmcnKTtcbiAgICAgICAgICAgIC8vIG1vdW50IHBlbmRpbmcgYnJhbmNoIGluIG9mZi1kb20gY29udGFpbmVyXG4gICAgICAgICAgICBzdXNwZW5zZS5wZW5kaW5nQnJhbmNoID0gbmV3QnJhbmNoO1xuICAgICAgICAgICAgc3VzcGVuc2UucGVuZGluZ0lkKys7XG4gICAgICAgICAgICBwYXRjaChudWxsLCBuZXdCcmFuY2gsIHN1c3BlbnNlLmhpZGRlbkNvbnRhaW5lciwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCBzdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgIGlmIChzdXNwZW5zZS5kZXBzIDw9IDApIHtcbiAgICAgICAgICAgICAgICAvLyBpbmNvbWluZyBicmFuY2ggaGFzIG5vIGFzeW5jIGRlcHMsIHJlc29sdmUgbm93LlxuICAgICAgICAgICAgICAgIHN1c3BlbnNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgdGltZW91dCwgcGVuZGluZ0lkIH0gPSBzdXNwZW5zZTtcbiAgICAgICAgICAgICAgICBpZiAodGltZW91dCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3VzcGVuc2UucGVuZGluZ0lkID09PSBwZW5kaW5nSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdXNwZW5zZS5mYWxsYmFjayhuZXdGYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sIHRpbWVvdXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aW1lb3V0ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHN1c3BlbnNlLmZhbGxiYWNrKG5ld0ZhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5sZXQgaGFzV2FybmVkID0gZmFsc2U7XG5mdW5jdGlvbiBjcmVhdGVTdXNwZW5zZUJvdW5kYXJ5KHZub2RlLCBwYXJlbnQsIHBhcmVudENvbXBvbmVudCwgY29udGFpbmVyLCBoaWRkZW5Db250YWluZXIsIGFuY2hvciwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCByZW5kZXJlckludGVybmFscywgaXNIeWRyYXRpbmcgPSBmYWxzZSkge1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWZhbHNlICYmICFoYXNXYXJuZWQpIHtcbiAgICAgICAgaGFzV2FybmVkID0gdHJ1ZTtcbiAgICAgICAgLy8gQHRzLWlnbm9yZSBgY29uc29sZS5pbmZvYCBjYW5ub3QgYmUgbnVsbCBlcnJvclxuICAgICAgICBjb25zb2xlW2NvbnNvbGUuaW5mbyA/ICdpbmZvJyA6ICdsb2cnXShgPFN1c3BlbnNlPiBpcyBhbiBleHBlcmltZW50YWwgZmVhdHVyZSBhbmQgaXRzIEFQSSB3aWxsIGxpa2VseSBjaGFuZ2UuYCk7XG4gICAgfVxuICAgIGNvbnN0IHsgcDogcGF0Y2gsIG06IG1vdmUsIHVtOiB1bm1vdW50LCBuOiBuZXh0LCBvOiB7IHBhcmVudE5vZGUsIHJlbW92ZSB9IH0gPSByZW5kZXJlckludGVybmFscztcbiAgICBjb25zdCB0aW1lb3V0ID0gdG9OdW1iZXIodm5vZGUucHJvcHMgJiYgdm5vZGUucHJvcHMudGltZW91dCk7XG4gICAgY29uc3Qgc3VzcGVuc2UgPSB7XG4gICAgICAgIHZub2RlLFxuICAgICAgICBwYXJlbnQsXG4gICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgaXNTVkcsXG4gICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgaGlkZGVuQ29udGFpbmVyLFxuICAgICAgICBhbmNob3IsXG4gICAgICAgIGRlcHM6IDAsXG4gICAgICAgIHBlbmRpbmdJZDogMCxcbiAgICAgICAgdGltZW91dDogdHlwZW9mIHRpbWVvdXQgPT09ICdudW1iZXInID8gdGltZW91dCA6IC0xLFxuICAgICAgICBhY3RpdmVCcmFuY2g6IG51bGwsXG4gICAgICAgIHBlbmRpbmdCcmFuY2g6IG51bGwsXG4gICAgICAgIGlzSW5GYWxsYmFjazogdHJ1ZSxcbiAgICAgICAgaXNIeWRyYXRpbmcsXG4gICAgICAgIGlzVW5tb3VudGVkOiBmYWxzZSxcbiAgICAgICAgZWZmZWN0czogW10sXG4gICAgICAgIHJlc29sdmUocmVzdW1lID0gZmFsc2UpIHtcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXJlc3VtZSAmJiAhc3VzcGVuc2UucGVuZGluZ0JyYW5jaCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHN1c3BlbnNlLnJlc29sdmUoKSBpcyBjYWxsZWQgd2l0aG91dCBhIHBlbmRpbmcgYnJhbmNoLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc3VzcGVuc2UuaXNVbm1vdW50ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBzdXNwZW5zZS5yZXNvbHZlKCkgaXMgY2FsbGVkIG9uIGFuIGFscmVhZHkgdW5tb3VudGVkIHN1c3BlbnNlIGJvdW5kYXJ5LmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHsgdm5vZGUsIGFjdGl2ZUJyYW5jaCwgcGVuZGluZ0JyYW5jaCwgcGVuZGluZ0lkLCBlZmZlY3RzLCBwYXJlbnRDb21wb25lbnQsIGNvbnRhaW5lciB9ID0gc3VzcGVuc2U7XG4gICAgICAgICAgICBpZiAoc3VzcGVuc2UuaXNIeWRyYXRpbmcpIHtcbiAgICAgICAgICAgICAgICBzdXNwZW5zZS5pc0h5ZHJhdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIXJlc3VtZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlbGF5RW50ZXIgPSBhY3RpdmVCcmFuY2ggJiZcbiAgICAgICAgICAgICAgICAgICAgcGVuZGluZ0JyYW5jaC50cmFuc2l0aW9uICYmXG4gICAgICAgICAgICAgICAgICAgIHBlbmRpbmdCcmFuY2gudHJhbnNpdGlvbi5tb2RlID09PSAnb3V0LWluJztcbiAgICAgICAgICAgICAgICBpZiAoZGVsYXlFbnRlcikge1xuICAgICAgICAgICAgICAgICAgICBhY3RpdmVCcmFuY2gudHJhbnNpdGlvbi5hZnRlckxlYXZlID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBlbmRpbmdJZCA9PT0gc3VzcGVuc2UucGVuZGluZ0lkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZShwZW5kaW5nQnJhbmNoLCBjb250YWluZXIsIGFuY2hvciwgMCAvKiBNb3ZlVHlwZS5FTlRFUiAqLyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIHRoaXMgaXMgaW5pdGlhbCBhbmNob3Igb24gbW91bnRcbiAgICAgICAgICAgICAgICBsZXQgeyBhbmNob3IgfSA9IHN1c3BlbnNlO1xuICAgICAgICAgICAgICAgIC8vIHVubW91bnQgY3VycmVudCBhY3RpdmUgdHJlZVxuICAgICAgICAgICAgICAgIGlmIChhY3RpdmVCcmFuY2gpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlIGZhbGxiYWNrIHRyZWUgd2FzIG1vdW50ZWQsIGl0IG1heSBoYXZlIGJlZW4gbW92ZWRcbiAgICAgICAgICAgICAgICAgICAgLy8gYXMgcGFydCBvZiBhIHBhcmVudCBzdXNwZW5zZS4gZ2V0IHRoZSBsYXRlc3QgYW5jaG9yIGZvciBpbnNlcnRpb25cbiAgICAgICAgICAgICAgICAgICAgYW5jaG9yID0gbmV4dChhY3RpdmVCcmFuY2gpO1xuICAgICAgICAgICAgICAgICAgICB1bm1vdW50KGFjdGl2ZUJyYW5jaCwgcGFyZW50Q29tcG9uZW50LCBzdXNwZW5zZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghZGVsYXlFbnRlcikge1xuICAgICAgICAgICAgICAgICAgICAvLyBtb3ZlIGNvbnRlbnQgZnJvbSBvZmYtZG9tIGNvbnRhaW5lciB0byBhY3R1YWwgY29udGFpbmVyXG4gICAgICAgICAgICAgICAgICAgIG1vdmUocGVuZGluZ0JyYW5jaCwgY29udGFpbmVyLCBhbmNob3IsIDAgLyogTW92ZVR5cGUuRU5URVIgKi8pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNldEFjdGl2ZUJyYW5jaChzdXNwZW5zZSwgcGVuZGluZ0JyYW5jaCk7XG4gICAgICAgICAgICBzdXNwZW5zZS5wZW5kaW5nQnJhbmNoID0gbnVsbDtcbiAgICAgICAgICAgIHN1c3BlbnNlLmlzSW5GYWxsYmFjayA9IGZhbHNlO1xuICAgICAgICAgICAgLy8gZmx1c2ggYnVmZmVyZWQgZWZmZWN0c1xuICAgICAgICAgICAgLy8gY2hlY2sgaWYgdGhlcmUgaXMgYSBwZW5kaW5nIHBhcmVudCBzdXNwZW5zZVxuICAgICAgICAgICAgbGV0IHBhcmVudCA9IHN1c3BlbnNlLnBhcmVudDtcbiAgICAgICAgICAgIGxldCBoYXNVbnJlc29sdmVkQW5jZXN0b3IgPSBmYWxzZTtcbiAgICAgICAgICAgIHdoaWxlIChwYXJlbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAocGFyZW50LnBlbmRpbmdCcmFuY2gpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZm91bmQgYSBwZW5kaW5nIHBhcmVudCBzdXNwZW5zZSwgbWVyZ2UgYnVmZmVyZWQgcG9zdCBqb2JzXG4gICAgICAgICAgICAgICAgICAgIC8vIGludG8gdGhhdCBwYXJlbnRcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50LmVmZmVjdHMucHVzaCguLi5lZmZlY3RzKTtcbiAgICAgICAgICAgICAgICAgICAgaGFzVW5yZXNvbHZlZEFuY2VzdG9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBubyBwZW5kaW5nIHBhcmVudCBzdXNwZW5zZSwgZmx1c2ggYWxsIGpvYnNcbiAgICAgICAgICAgIGlmICghaGFzVW5yZXNvbHZlZEFuY2VzdG9yKSB7XG4gICAgICAgICAgICAgICAgcXVldWVQb3N0Rmx1c2hDYihlZmZlY3RzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN1c3BlbnNlLmVmZmVjdHMgPSBbXTtcbiAgICAgICAgICAgIC8vIGludm9rZSBAcmVzb2x2ZSBldmVudFxuICAgICAgICAgICAgdHJpZ2dlckV2ZW50KHZub2RlLCAnb25SZXNvbHZlJyk7XG4gICAgICAgIH0sXG4gICAgICAgIGZhbGxiYWNrKGZhbGxiYWNrVk5vZGUpIHtcbiAgICAgICAgICAgIGlmICghc3VzcGVuc2UucGVuZGluZ0JyYW5jaCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHsgdm5vZGUsIGFjdGl2ZUJyYW5jaCwgcGFyZW50Q29tcG9uZW50LCBjb250YWluZXIsIGlzU1ZHIH0gPSBzdXNwZW5zZTtcbiAgICAgICAgICAgIC8vIGludm9rZSBAZmFsbGJhY2sgZXZlbnRcbiAgICAgICAgICAgIHRyaWdnZXJFdmVudCh2bm9kZSwgJ29uRmFsbGJhY2snKTtcbiAgICAgICAgICAgIGNvbnN0IGFuY2hvciA9IG5leHQoYWN0aXZlQnJhbmNoKTtcbiAgICAgICAgICAgIGNvbnN0IG1vdW50RmFsbGJhY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFzdXNwZW5zZS5pc0luRmFsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBtb3VudCB0aGUgZmFsbGJhY2sgdHJlZVxuICAgICAgICAgICAgICAgIHBhdGNoKG51bGwsIGZhbGxiYWNrVk5vZGUsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIG51bGwsIC8vIGZhbGxiYWNrIHRyZWUgd2lsbCBub3QgaGF2ZSBzdXNwZW5zZSBjb250ZXh0XG4gICAgICAgICAgICAgICAgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgICAgICBzZXRBY3RpdmVCcmFuY2goc3VzcGVuc2UsIGZhbGxiYWNrVk5vZGUpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGRlbGF5RW50ZXIgPSBmYWxsYmFja1ZOb2RlLnRyYW5zaXRpb24gJiYgZmFsbGJhY2tWTm9kZS50cmFuc2l0aW9uLm1vZGUgPT09ICdvdXQtaW4nO1xuICAgICAgICAgICAgaWYgKGRlbGF5RW50ZXIpIHtcbiAgICAgICAgICAgICAgICBhY3RpdmVCcmFuY2gudHJhbnNpdGlvbi5hZnRlckxlYXZlID0gbW91bnRGYWxsYmFjaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN1c3BlbnNlLmlzSW5GYWxsYmFjayA9IHRydWU7XG4gICAgICAgICAgICAvLyB1bm1vdW50IGN1cnJlbnQgYWN0aXZlIGJyYW5jaFxuICAgICAgICAgICAgdW5tb3VudChhY3RpdmVCcmFuY2gsIHBhcmVudENvbXBvbmVudCwgbnVsbCwgLy8gbm8gc3VzcGVuc2Ugc28gdW5tb3VudCBob29rcyBmaXJlIG5vd1xuICAgICAgICAgICAgdHJ1ZSAvLyBzaG91bGRSZW1vdmVcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAoIWRlbGF5RW50ZXIpIHtcbiAgICAgICAgICAgICAgICBtb3VudEZhbGxiYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIG1vdmUoY29udGFpbmVyLCBhbmNob3IsIHR5cGUpIHtcbiAgICAgICAgICAgIHN1c3BlbnNlLmFjdGl2ZUJyYW5jaCAmJlxuICAgICAgICAgICAgICAgIG1vdmUoc3VzcGVuc2UuYWN0aXZlQnJhbmNoLCBjb250YWluZXIsIGFuY2hvciwgdHlwZSk7XG4gICAgICAgICAgICBzdXNwZW5zZS5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgICAgIH0sXG4gICAgICAgIG5leHQoKSB7XG4gICAgICAgICAgICByZXR1cm4gc3VzcGVuc2UuYWN0aXZlQnJhbmNoICYmIG5leHQoc3VzcGVuc2UuYWN0aXZlQnJhbmNoKTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVnaXN0ZXJEZXAoaW5zdGFuY2UsIHNldHVwUmVuZGVyRWZmZWN0KSB7XG4gICAgICAgICAgICBjb25zdCBpc0luUGVuZGluZ1N1c3BlbnNlID0gISFzdXNwZW5zZS5wZW5kaW5nQnJhbmNoO1xuICAgICAgICAgICAgaWYgKGlzSW5QZW5kaW5nU3VzcGVuc2UpIHtcbiAgICAgICAgICAgICAgICBzdXNwZW5zZS5kZXBzKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBoeWRyYXRlZEVsID0gaW5zdGFuY2Uudm5vZGUuZWw7XG4gICAgICAgICAgICBpbnN0YW5jZVxuICAgICAgICAgICAgICAgIC5hc3luY0RlcC5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgICAgICAgIGhhbmRsZUVycm9yKGVyciwgaW5zdGFuY2UsIDAgLyogRXJyb3JDb2Rlcy5TRVRVUF9GVU5DVElPTiAqLyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC50aGVuKGFzeW5jU2V0dXBSZXN1bHQgPT4ge1xuICAgICAgICAgICAgICAgIC8vIHJldHJ5IHdoZW4gdGhlIHNldHVwKCkgcHJvbWlzZSByZXNvbHZlcy5cbiAgICAgICAgICAgICAgICAvLyBjb21wb25lbnQgbWF5IGhhdmUgYmVlbiB1bm1vdW50ZWQgYmVmb3JlIHJlc29sdmUuXG4gICAgICAgICAgICAgICAgaWYgKGluc3RhbmNlLmlzVW5tb3VudGVkIHx8XG4gICAgICAgICAgICAgICAgICAgIHN1c3BlbnNlLmlzVW5tb3VudGVkIHx8XG4gICAgICAgICAgICAgICAgICAgIHN1c3BlbnNlLnBlbmRpbmdJZCAhPT0gaW5zdGFuY2Uuc3VzcGVuc2VJZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIHJldHJ5IGZyb20gdGhpcyBjb21wb25lbnRcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5hc3luY1Jlc29sdmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHZub2RlIH0gPSBpbnN0YW5jZTtcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIHB1c2hXYXJuaW5nQ29udGV4dCh2bm9kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGhhbmRsZVNldHVwUmVzdWx0KGluc3RhbmNlLCBhc3luY1NldHVwUmVzdWx0LCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgaWYgKGh5ZHJhdGVkRWwpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gdm5vZGUgbWF5IGhhdmUgYmVlbiByZXBsYWNlZCBpZiBhbiB1cGRhdGUgaGFwcGVuZWQgYmVmb3JlIHRoZVxuICAgICAgICAgICAgICAgICAgICAvLyBhc3luYyBkZXAgaXMgcmVzb2x2ZWQuXG4gICAgICAgICAgICAgICAgICAgIHZub2RlLmVsID0gaHlkcmF0ZWRFbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgcGxhY2Vob2xkZXIgPSAhaHlkcmF0ZWRFbCAmJiBpbnN0YW5jZS5zdWJUcmVlLmVsO1xuICAgICAgICAgICAgICAgIHNldHVwUmVuZGVyRWZmZWN0KGluc3RhbmNlLCB2bm9kZSwgXG4gICAgICAgICAgICAgICAgLy8gY29tcG9uZW50IG1heSBoYXZlIGJlZW4gbW92ZWQgYmVmb3JlIHJlc29sdmUuXG4gICAgICAgICAgICAgICAgLy8gaWYgdGhpcyBpcyBub3QgYSBoeWRyYXRpb24sIGluc3RhbmNlLnN1YlRyZWUgd2lsbCBiZSB0aGUgY29tbWVudFxuICAgICAgICAgICAgICAgIC8vIHBsYWNlaG9sZGVyLlxuICAgICAgICAgICAgICAgIHBhcmVudE5vZGUoaHlkcmF0ZWRFbCB8fCBpbnN0YW5jZS5zdWJUcmVlLmVsKSwgXG4gICAgICAgICAgICAgICAgLy8gYW5jaG9yIHdpbGwgbm90IGJlIHVzZWQgaWYgdGhpcyBpcyBoeWRyYXRpb24sIHNvIG9ubHkgbmVlZCB0b1xuICAgICAgICAgICAgICAgIC8vIGNvbnNpZGVyIHRoZSBjb21tZW50IHBsYWNlaG9sZGVyIGNhc2UuXG4gICAgICAgICAgICAgICAgaHlkcmF0ZWRFbCA/IG51bGwgOiBuZXh0KGluc3RhbmNlLnN1YlRyZWUpLCBzdXNwZW5zZSwgaXNTVkcsIG9wdGltaXplZCk7XG4gICAgICAgICAgICAgICAgaWYgKHBsYWNlaG9sZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZShwbGFjZWhvbGRlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHVwZGF0ZUhPQ0hvc3RFbChpbnN0YW5jZSwgdm5vZGUuZWwpO1xuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgcG9wV2FybmluZ0NvbnRleHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gb25seSBkZWNyZWFzZSBkZXBzIGNvdW50IGlmIHN1c3BlbnNlIGlzIG5vdCBhbHJlYWR5IHJlc29sdmVkXG4gICAgICAgICAgICAgICAgaWYgKGlzSW5QZW5kaW5nU3VzcGVuc2UgJiYgLS1zdXNwZW5zZS5kZXBzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHN1c3BlbnNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgdW5tb3VudChwYXJlbnRTdXNwZW5zZSwgZG9SZW1vdmUpIHtcbiAgICAgICAgICAgIHN1c3BlbnNlLmlzVW5tb3VudGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmIChzdXNwZW5zZS5hY3RpdmVCcmFuY2gpIHtcbiAgICAgICAgICAgICAgICB1bm1vdW50KHN1c3BlbnNlLmFjdGl2ZUJyYW5jaCwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgZG9SZW1vdmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN1c3BlbnNlLnBlbmRpbmdCcmFuY2gpIHtcbiAgICAgICAgICAgICAgICB1bm1vdW50KHN1c3BlbnNlLnBlbmRpbmdCcmFuY2gsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGRvUmVtb3ZlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIHN1c3BlbnNlO1xufVxuZnVuY3Rpb24gaHlkcmF0ZVN1c3BlbnNlKG5vZGUsIHZub2RlLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIHJlbmRlcmVySW50ZXJuYWxzLCBoeWRyYXRlTm9kZSkge1xuICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLXJlc3RyaWN0ZWQtZ2xvYmFscyAqL1xuICAgIGNvbnN0IHN1c3BlbnNlID0gKHZub2RlLnN1c3BlbnNlID0gY3JlYXRlU3VzcGVuc2VCb3VuZGFyeSh2bm9kZSwgcGFyZW50U3VzcGVuc2UsIHBhcmVudENvbXBvbmVudCwgbm9kZS5wYXJlbnROb2RlLCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSwgbnVsbCwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCByZW5kZXJlckludGVybmFscywgdHJ1ZSAvKiBoeWRyYXRpbmcgKi8pKTtcbiAgICAvLyB0aGVyZSBhcmUgdHdvIHBvc3NpYmxlIHNjZW5hcmlvcyBmb3Igc2VydmVyLXJlbmRlcmVkIHN1c3BlbnNlOlxuICAgIC8vIC0gc3VjY2Vzczogc3NyIGNvbnRlbnQgc2hvdWxkIGJlIGZ1bGx5IHJlc29sdmVkXG4gICAgLy8gLSBmYWlsdXJlOiBzc3IgY29udGVudCBzaG91bGQgYmUgdGhlIGZhbGxiYWNrIGJyYW5jaC5cbiAgICAvLyBob3dldmVyLCBvbiB0aGUgY2xpZW50IHdlIGRvbid0IHJlYWxseSBrbm93IGlmIGl0IGhhcyBmYWlsZWQgb3Igbm90XG4gICAgLy8gYXR0ZW1wdCB0byBoeWRyYXRlIHRoZSBET00gYXNzdW1pbmcgaXQgaGFzIHN1Y2NlZWRlZCwgYnV0IHdlIHN0aWxsXG4gICAgLy8gbmVlZCB0byBjb25zdHJ1Y3QgYSBzdXNwZW5zZSBib3VuZGFyeSBmaXJzdFxuICAgIGNvbnN0IHJlc3VsdCA9IGh5ZHJhdGVOb2RlKG5vZGUsIChzdXNwZW5zZS5wZW5kaW5nQnJhbmNoID0gdm5vZGUuc3NDb250ZW50KSwgcGFyZW50Q29tcG9uZW50LCBzdXNwZW5zZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgIGlmIChzdXNwZW5zZS5kZXBzID09PSAwKSB7XG4gICAgICAgIHN1c3BlbnNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLXJlc3RyaWN0ZWQtZ2xvYmFscyAqL1xufVxuZnVuY3Rpb24gbm9ybWFsaXplU3VzcGVuc2VDaGlsZHJlbih2bm9kZSkge1xuICAgIGNvbnN0IHsgc2hhcGVGbGFnLCBjaGlsZHJlbiB9ID0gdm5vZGU7XG4gICAgY29uc3QgaXNTbG90Q2hpbGRyZW4gPSBzaGFwZUZsYWcgJiAzMiAvKiBTaGFwZUZsYWdzLlNMT1RTX0NISUxEUkVOICovO1xuICAgIHZub2RlLnNzQ29udGVudCA9IG5vcm1hbGl6ZVN1c3BlbnNlU2xvdChpc1Nsb3RDaGlsZHJlbiA/IGNoaWxkcmVuLmRlZmF1bHQgOiBjaGlsZHJlbik7XG4gICAgdm5vZGUuc3NGYWxsYmFjayA9IGlzU2xvdENoaWxkcmVuXG4gICAgICAgID8gbm9ybWFsaXplU3VzcGVuc2VTbG90KGNoaWxkcmVuLmZhbGxiYWNrKVxuICAgICAgICA6IGNyZWF0ZVZOb2RlKENvbW1lbnQpO1xufVxuZnVuY3Rpb24gbm9ybWFsaXplU3VzcGVuc2VTbG90KHMpIHtcbiAgICBsZXQgYmxvY2s7XG4gICAgaWYgKGlzRnVuY3Rpb24ocykpIHtcbiAgICAgICAgY29uc3QgdHJhY2tCbG9jayA9IGlzQmxvY2tUcmVlRW5hYmxlZCAmJiBzLl9jO1xuICAgICAgICBpZiAodHJhY2tCbG9jaykge1xuICAgICAgICAgICAgLy8gZGlzYWJsZVRyYWNraW5nOiBmYWxzZVxuICAgICAgICAgICAgLy8gYWxsb3cgYmxvY2sgdHJhY2tpbmcgZm9yIGNvbXBpbGVkIHNsb3RzXG4gICAgICAgICAgICAvLyAoc2VlIC4vY29tcG9uZW50UmVuZGVyQ29udGV4dC50cylcbiAgICAgICAgICAgIHMuX2QgPSBmYWxzZTtcbiAgICAgICAgICAgIG9wZW5CbG9jaygpO1xuICAgICAgICB9XG4gICAgICAgIHMgPSBzKCk7XG4gICAgICAgIGlmICh0cmFja0Jsb2NrKSB7XG4gICAgICAgICAgICBzLl9kID0gdHJ1ZTtcbiAgICAgICAgICAgIGJsb2NrID0gY3VycmVudEJsb2NrO1xuICAgICAgICAgICAgY2xvc2VCbG9jaygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChpc0FycmF5KHMpKSB7XG4gICAgICAgIGNvbnN0IHNpbmdsZUNoaWxkID0gZmlsdGVyU2luZ2xlUm9vdChzKTtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhc2luZ2xlQ2hpbGQpIHtcbiAgICAgICAgICAgIHdhcm4oYDxTdXNwZW5zZT4gc2xvdHMgZXhwZWN0IGEgc2luZ2xlIHJvb3Qgbm9kZS5gKTtcbiAgICAgICAgfVxuICAgICAgICBzID0gc2luZ2xlQ2hpbGQ7XG4gICAgfVxuICAgIHMgPSBub3JtYWxpemVWTm9kZShzKTtcbiAgICBpZiAoYmxvY2sgJiYgIXMuZHluYW1pY0NoaWxkcmVuKSB7XG4gICAgICAgIHMuZHluYW1pY0NoaWxkcmVuID0gYmxvY2suZmlsdGVyKGMgPT4gYyAhPT0gcyk7XG4gICAgfVxuICAgIHJldHVybiBzO1xufVxuZnVuY3Rpb24gcXVldWVFZmZlY3RXaXRoU3VzcGVuc2UoZm4sIHN1c3BlbnNlKSB7XG4gICAgaWYgKHN1c3BlbnNlICYmIHN1c3BlbnNlLnBlbmRpbmdCcmFuY2gpIHtcbiAgICAgICAgaWYgKGlzQXJyYXkoZm4pKSB7XG4gICAgICAgICAgICBzdXNwZW5zZS5lZmZlY3RzLnB1c2goLi4uZm4pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3VzcGVuc2UuZWZmZWN0cy5wdXNoKGZuKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcXVldWVQb3N0Rmx1c2hDYihmbik7XG4gICAgfVxufVxuZnVuY3Rpb24gc2V0QWN0aXZlQnJhbmNoKHN1c3BlbnNlLCBicmFuY2gpIHtcbiAgICBzdXNwZW5zZS5hY3RpdmVCcmFuY2ggPSBicmFuY2g7XG4gICAgY29uc3QgeyB2bm9kZSwgcGFyZW50Q29tcG9uZW50IH0gPSBzdXNwZW5zZTtcbiAgICBjb25zdCBlbCA9ICh2bm9kZS5lbCA9IGJyYW5jaC5lbCk7XG4gICAgLy8gaW4gY2FzZSBzdXNwZW5zZSBpcyB0aGUgcm9vdCBub2RlIG9mIGEgY29tcG9uZW50LFxuICAgIC8vIHJlY3Vyc2l2ZWx5IHVwZGF0ZSB0aGUgSE9DIGVsXG4gICAgaWYgKHBhcmVudENvbXBvbmVudCAmJiBwYXJlbnRDb21wb25lbnQuc3ViVHJlZSA9PT0gdm5vZGUpIHtcbiAgICAgICAgcGFyZW50Q29tcG9uZW50LnZub2RlLmVsID0gZWw7XG4gICAgICAgIHVwZGF0ZUhPQ0hvc3RFbChwYXJlbnRDb21wb25lbnQsIGVsKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHByb3ZpZGUoa2V5LCB2YWx1ZSkge1xuICAgIGlmICghY3VycmVudEluc3RhbmNlKSB7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgIHdhcm4oYHByb3ZpZGUoKSBjYW4gb25seSBiZSB1c2VkIGluc2lkZSBzZXR1cCgpLmApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBsZXQgcHJvdmlkZXMgPSBjdXJyZW50SW5zdGFuY2UucHJvdmlkZXM7XG4gICAgICAgIC8vIGJ5IGRlZmF1bHQgYW4gaW5zdGFuY2UgaW5oZXJpdHMgaXRzIHBhcmVudCdzIHByb3ZpZGVzIG9iamVjdFxuICAgICAgICAvLyBidXQgd2hlbiBpdCBuZWVkcyB0byBwcm92aWRlIHZhbHVlcyBvZiBpdHMgb3duLCBpdCBjcmVhdGVzIGl0c1xuICAgICAgICAvLyBvd24gcHJvdmlkZXMgb2JqZWN0IHVzaW5nIHBhcmVudCBwcm92aWRlcyBvYmplY3QgYXMgcHJvdG90eXBlLlxuICAgICAgICAvLyB0aGlzIHdheSBpbiBgaW5qZWN0YCB3ZSBjYW4gc2ltcGx5IGxvb2sgdXAgaW5qZWN0aW9ucyBmcm9tIGRpcmVjdFxuICAgICAgICAvLyBwYXJlbnQgYW5kIGxldCB0aGUgcHJvdG90eXBlIGNoYWluIGRvIHRoZSB3b3JrLlxuICAgICAgICBjb25zdCBwYXJlbnRQcm92aWRlcyA9IGN1cnJlbnRJbnN0YW5jZS5wYXJlbnQgJiYgY3VycmVudEluc3RhbmNlLnBhcmVudC5wcm92aWRlcztcbiAgICAgICAgaWYgKHBhcmVudFByb3ZpZGVzID09PSBwcm92aWRlcykge1xuICAgICAgICAgICAgcHJvdmlkZXMgPSBjdXJyZW50SW5zdGFuY2UucHJvdmlkZXMgPSBPYmplY3QuY3JlYXRlKHBhcmVudFByb3ZpZGVzKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUUyBkb2Vzbid0IGFsbG93IHN5bWJvbCBhcyBpbmRleCB0eXBlXG4gICAgICAgIHByb3ZpZGVzW2tleV0gPSB2YWx1ZTtcbiAgICB9XG59XG5mdW5jdGlvbiBpbmplY3Qoa2V5LCBkZWZhdWx0VmFsdWUsIHRyZWF0RGVmYXVsdEFzRmFjdG9yeSA9IGZhbHNlKSB7XG4gICAgLy8gZmFsbGJhY2sgdG8gYGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZWAgc28gdGhhdCB0aGlzIGNhbiBiZSBjYWxsZWQgaW5cbiAgICAvLyBhIGZ1bmN0aW9uYWwgY29tcG9uZW50XG4gICAgY29uc3QgaW5zdGFuY2UgPSBjdXJyZW50SW5zdGFuY2UgfHwgY3VycmVudFJlbmRlcmluZ0luc3RhbmNlO1xuICAgIGlmIChpbnN0YW5jZSkge1xuICAgICAgICAvLyAjMjQwMFxuICAgICAgICAvLyB0byBzdXBwb3J0IGBhcHAudXNlYCBwbHVnaW5zLFxuICAgICAgICAvLyBmYWxsYmFjayB0byBhcHBDb250ZXh0J3MgYHByb3ZpZGVzYCBpZiB0aGUgaW5zdGFuY2UgaXMgYXQgcm9vdFxuICAgICAgICBjb25zdCBwcm92aWRlcyA9IGluc3RhbmNlLnBhcmVudCA9PSBudWxsXG4gICAgICAgICAgICA/IGluc3RhbmNlLnZub2RlLmFwcENvbnRleHQgJiYgaW5zdGFuY2Uudm5vZGUuYXBwQ29udGV4dC5wcm92aWRlc1xuICAgICAgICAgICAgOiBpbnN0YW5jZS5wYXJlbnQucHJvdmlkZXM7XG4gICAgICAgIGlmIChwcm92aWRlcyAmJiBrZXkgaW4gcHJvdmlkZXMpIHtcbiAgICAgICAgICAgIC8vIFRTIGRvZXNuJ3QgYWxsb3cgc3ltYm9sIGFzIGluZGV4IHR5cGVcbiAgICAgICAgICAgIHJldHVybiBwcm92aWRlc1trZXldO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJlYXREZWZhdWx0QXNGYWN0b3J5ICYmIGlzRnVuY3Rpb24oZGVmYXVsdFZhbHVlKVxuICAgICAgICAgICAgICAgID8gZGVmYXVsdFZhbHVlLmNhbGwoaW5zdGFuY2UucHJveHkpXG4gICAgICAgICAgICAgICAgOiBkZWZhdWx0VmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICB3YXJuKGBpbmplY3Rpb24gXCIke1N0cmluZyhrZXkpfVwiIG5vdCBmb3VuZC5gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgd2FybihgaW5qZWN0KCkgY2FuIG9ubHkgYmUgdXNlZCBpbnNpZGUgc2V0dXAoKSBvciBmdW5jdGlvbmFsIGNvbXBvbmVudHMuYCk7XG4gICAgfVxufVxuXG4vLyBTaW1wbGUgZWZmZWN0LlxuZnVuY3Rpb24gd2F0Y2hFZmZlY3QoZWZmZWN0LCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGRvV2F0Y2goZWZmZWN0LCBudWxsLCBvcHRpb25zKTtcbn1cbmZ1bmN0aW9uIHdhdGNoUG9zdEVmZmVjdChlZmZlY3QsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZG9XYXRjaChlZmZlY3QsIG51bGwsICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJylcbiAgICAgICAgPyBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpLCB7IGZsdXNoOiAncG9zdCcgfSkgOiB7IGZsdXNoOiAncG9zdCcgfSkpO1xufVxuZnVuY3Rpb24gd2F0Y2hTeW5jRWZmZWN0KGVmZmVjdCwgb3B0aW9ucykge1xuICAgIHJldHVybiBkb1dhdGNoKGVmZmVjdCwgbnVsbCwgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKVxuICAgICAgICA/IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyksIHsgZmx1c2g6ICdzeW5jJyB9KSA6IHsgZmx1c2g6ICdzeW5jJyB9KSk7XG59XG4vLyBpbml0aWFsIHZhbHVlIGZvciB3YXRjaGVycyB0byB0cmlnZ2VyIG9uIHVuZGVmaW5lZCBpbml0aWFsIHZhbHVlc1xuY29uc3QgSU5JVElBTF9XQVRDSEVSX1ZBTFVFID0ge307XG4vLyBpbXBsZW1lbnRhdGlvblxuZnVuY3Rpb24gd2F0Y2goc291cmNlLCBjYiwgb3B0aW9ucykge1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWlzRnVuY3Rpb24oY2IpKSB7XG4gICAgICAgIHdhcm4oYFxcYHdhdGNoKGZuLCBvcHRpb25zPylcXGAgc2lnbmF0dXJlIGhhcyBiZWVuIG1vdmVkIHRvIGEgc2VwYXJhdGUgQVBJLiBgICtcbiAgICAgICAgICAgIGBVc2UgXFxgd2F0Y2hFZmZlY3QoZm4sIG9wdGlvbnM/KVxcYCBpbnN0ZWFkLiBcXGB3YXRjaFxcYCBub3cgb25seSBgICtcbiAgICAgICAgICAgIGBzdXBwb3J0cyBcXGB3YXRjaChzb3VyY2UsIGNiLCBvcHRpb25zPykgc2lnbmF0dXJlLmApO1xuICAgIH1cbiAgICByZXR1cm4gZG9XYXRjaChzb3VyY2UsIGNiLCBvcHRpb25zKTtcbn1cbmZ1bmN0aW9uIGRvV2F0Y2goc291cmNlLCBjYiwgeyBpbW1lZGlhdGUsIGRlZXAsIGZsdXNoLCBvblRyYWNrLCBvblRyaWdnZXIgfSA9IEVNUFRZX09CSikge1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWNiKSB7XG4gICAgICAgIGlmIChpbW1lZGlhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgd2Fybihgd2F0Y2goKSBcImltbWVkaWF0ZVwiIG9wdGlvbiBpcyBvbmx5IHJlc3BlY3RlZCB3aGVuIHVzaW5nIHRoZSBgICtcbiAgICAgICAgICAgICAgICBgd2F0Y2goc291cmNlLCBjYWxsYmFjaywgb3B0aW9ucz8pIHNpZ25hdHVyZS5gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVlcCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB3YXJuKGB3YXRjaCgpIFwiZGVlcFwiIG9wdGlvbiBpcyBvbmx5IHJlc3BlY3RlZCB3aGVuIHVzaW5nIHRoZSBgICtcbiAgICAgICAgICAgICAgICBgd2F0Y2goc291cmNlLCBjYWxsYmFjaywgb3B0aW9ucz8pIHNpZ25hdHVyZS5gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCB3YXJuSW52YWxpZFNvdXJjZSA9IChzKSA9PiB7XG4gICAgICAgIHdhcm4oYEludmFsaWQgd2F0Y2ggc291cmNlOiBgLCBzLCBgQSB3YXRjaCBzb3VyY2UgY2FuIG9ubHkgYmUgYSBnZXR0ZXIvZWZmZWN0IGZ1bmN0aW9uLCBhIHJlZiwgYCArXG4gICAgICAgICAgICBgYSByZWFjdGl2ZSBvYmplY3QsIG9yIGFuIGFycmF5IG9mIHRoZXNlIHR5cGVzLmApO1xuICAgIH07XG4gICAgY29uc3QgaW5zdGFuY2UgPSBjdXJyZW50SW5zdGFuY2U7XG4gICAgbGV0IGdldHRlcjtcbiAgICBsZXQgZm9yY2VUcmlnZ2VyID0gZmFsc2U7XG4gICAgbGV0IGlzTXVsdGlTb3VyY2UgPSBmYWxzZTtcbiAgICBpZiAoaXNSZWYoc291cmNlKSkge1xuICAgICAgICBnZXR0ZXIgPSAoKSA9PiBzb3VyY2UudmFsdWU7XG4gICAgICAgIGZvcmNlVHJpZ2dlciA9IGlzU2hhbGxvdyQxKHNvdXJjZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzUmVhY3RpdmUoc291cmNlKSkge1xuICAgICAgICBnZXR0ZXIgPSAoKSA9PiBzb3VyY2U7XG4gICAgICAgIGRlZXAgPSB0cnVlO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc0FycmF5KHNvdXJjZSkpIHtcbiAgICAgICAgaXNNdWx0aVNvdXJjZSA9IHRydWU7XG4gICAgICAgIGZvcmNlVHJpZ2dlciA9IHNvdXJjZS5zb21lKHMgPT4gaXNSZWFjdGl2ZShzKSB8fCBpc1NoYWxsb3ckMShzKSk7XG4gICAgICAgIGdldHRlciA9ICgpID0+IHNvdXJjZS5tYXAocyA9PiB7XG4gICAgICAgICAgICBpZiAoaXNSZWYocykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcy52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzUmVhY3RpdmUocykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJhdmVyc2Uocyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpc0Z1bmN0aW9uKHMpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxXaXRoRXJyb3JIYW5kbGluZyhzLCBpbnN0YW5jZSwgMiAvKiBFcnJvckNvZGVzLldBVENIX0dFVFRFUiAqLyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgd2FybkludmFsaWRTb3VyY2Uocyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc0Z1bmN0aW9uKHNvdXJjZSkpIHtcbiAgICAgICAgaWYgKGNiKSB7XG4gICAgICAgICAgICAvLyBnZXR0ZXIgd2l0aCBjYlxuICAgICAgICAgICAgZ2V0dGVyID0gKCkgPT4gY2FsbFdpdGhFcnJvckhhbmRsaW5nKHNvdXJjZSwgaW5zdGFuY2UsIDIgLyogRXJyb3JDb2Rlcy5XQVRDSF9HRVRURVIgKi8pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gbm8gY2IgLT4gc2ltcGxlIGVmZmVjdFxuICAgICAgICAgICAgZ2V0dGVyID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpbnN0YW5jZSAmJiBpbnN0YW5jZS5pc1VubW91bnRlZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjbGVhbnVwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nKHNvdXJjZSwgaW5zdGFuY2UsIDMgLyogRXJyb3JDb2Rlcy5XQVRDSF9DQUxMQkFDSyAqLywgW29uQ2xlYW51cF0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZ2V0dGVyID0gTk9PUDtcbiAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIHdhcm5JbnZhbGlkU291cmNlKHNvdXJjZSk7XG4gICAgfVxuICAgIGlmIChjYiAmJiBkZWVwKSB7XG4gICAgICAgIGNvbnN0IGJhc2VHZXR0ZXIgPSBnZXR0ZXI7XG4gICAgICAgIGdldHRlciA9ICgpID0+IHRyYXZlcnNlKGJhc2VHZXR0ZXIoKSk7XG4gICAgfVxuICAgIGxldCBjbGVhbnVwO1xuICAgIGxldCBvbkNsZWFudXAgPSAoZm4pID0+IHtcbiAgICAgICAgY2xlYW51cCA9IGVmZmVjdC5vblN0b3AgPSAoKSA9PiB7XG4gICAgICAgICAgICBjYWxsV2l0aEVycm9ySGFuZGxpbmcoZm4sIGluc3RhbmNlLCA0IC8qIEVycm9yQ29kZXMuV0FUQ0hfQ0xFQU5VUCAqLyk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICAvLyBpbiBTU1IgdGhlcmUgaXMgbm8gbmVlZCB0byBzZXR1cCBhbiBhY3R1YWwgZWZmZWN0LCBhbmQgaXQgc2hvdWxkIGJlIG5vb3BcbiAgICAvLyB1bmxlc3MgaXQncyBlYWdlciBvciBzeW5jIGZsdXNoXG4gICAgbGV0IHNzckNsZWFudXA7XG4gICAgaWYgKGlzSW5TU1JDb21wb25lbnRTZXR1cCkge1xuICAgICAgICAvLyB3ZSB3aWxsIGFsc28gbm90IGNhbGwgdGhlIGludmFsaWRhdGUgY2FsbGJhY2sgKCsgcnVubmVyIGlzIG5vdCBzZXQgdXApXG4gICAgICAgIG9uQ2xlYW51cCA9IE5PT1A7XG4gICAgICAgIGlmICghY2IpIHtcbiAgICAgICAgICAgIGdldHRlcigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGltbWVkaWF0ZSkge1xuICAgICAgICAgICAgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoY2IsIGluc3RhbmNlLCAzIC8qIEVycm9yQ29kZXMuV0FUQ0hfQ0FMTEJBQ0sgKi8sIFtcbiAgICAgICAgICAgICAgICBnZXR0ZXIoKSxcbiAgICAgICAgICAgICAgICBpc011bHRpU291cmNlID8gW10gOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgb25DbGVhbnVwXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmx1c2ggPT09ICdzeW5jJykge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdXNlU1NSQ29udGV4dCgpO1xuICAgICAgICAgICAgc3NyQ2xlYW51cCA9IGN0eC5fX3dhdGNoZXJIYW5kbGVzIHx8IChjdHguX193YXRjaGVySGFuZGxlcyA9IFtdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBOT09QO1xuICAgICAgICB9XG4gICAgfVxuICAgIGxldCBvbGRWYWx1ZSA9IGlzTXVsdGlTb3VyY2VcbiAgICAgICAgPyBuZXcgQXJyYXkoc291cmNlLmxlbmd0aCkuZmlsbChJTklUSUFMX1dBVENIRVJfVkFMVUUpXG4gICAgICAgIDogSU5JVElBTF9XQVRDSEVSX1ZBTFVFO1xuICAgIGNvbnN0IGpvYiA9ICgpID0+IHtcbiAgICAgICAgaWYgKCFlZmZlY3QuYWN0aXZlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNiKSB7XG4gICAgICAgICAgICAvLyB3YXRjaChzb3VyY2UsIGNiKVxuICAgICAgICAgICAgY29uc3QgbmV3VmFsdWUgPSBlZmZlY3QucnVuKCk7XG4gICAgICAgICAgICBpZiAoZGVlcCB8fFxuICAgICAgICAgICAgICAgIGZvcmNlVHJpZ2dlciB8fFxuICAgICAgICAgICAgICAgIChpc011bHRpU291cmNlXG4gICAgICAgICAgICAgICAgICAgID8gbmV3VmFsdWUuc29tZSgodiwgaSkgPT4gaGFzQ2hhbmdlZCh2LCBvbGRWYWx1ZVtpXSkpXG4gICAgICAgICAgICAgICAgICAgIDogaGFzQ2hhbmdlZChuZXdWYWx1ZSwgb2xkVmFsdWUpKSB8fFxuICAgICAgICAgICAgICAgIChmYWxzZSAgKSkge1xuICAgICAgICAgICAgICAgIC8vIGNsZWFudXAgYmVmb3JlIHJ1bm5pbmcgY2IgYWdhaW5cbiAgICAgICAgICAgICAgICBpZiAoY2xlYW51cCkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhbnVwKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nKGNiLCBpbnN0YW5jZSwgMyAvKiBFcnJvckNvZGVzLldBVENIX0NBTExCQUNLICovLCBbXG4gICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAvLyBwYXNzIHVuZGVmaW5lZCBhcyB0aGUgb2xkIHZhbHVlIHdoZW4gaXQncyBjaGFuZ2VkIGZvciB0aGUgZmlyc3QgdGltZVxuICAgICAgICAgICAgICAgICAgICBvbGRWYWx1ZSA9PT0gSU5JVElBTF9XQVRDSEVSX1ZBTFVFXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgOiAoaXNNdWx0aVNvdXJjZSAmJiBvbGRWYWx1ZVswXSA9PT0gSU5JVElBTF9XQVRDSEVSX1ZBTFVFKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gW11cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG9sZFZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBvbkNsZWFudXBcbiAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICBvbGRWYWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gd2F0Y2hFZmZlY3RcbiAgICAgICAgICAgIGVmZmVjdC5ydW4oKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLy8gaW1wb3J0YW50OiBtYXJrIHRoZSBqb2IgYXMgYSB3YXRjaGVyIGNhbGxiYWNrIHNvIHRoYXQgc2NoZWR1bGVyIGtub3dzXG4gICAgLy8gaXQgaXMgYWxsb3dlZCB0byBzZWxmLXRyaWdnZXIgKCMxNzI3KVxuICAgIGpvYi5hbGxvd1JlY3Vyc2UgPSAhIWNiO1xuICAgIGxldCBzY2hlZHVsZXI7XG4gICAgaWYgKGZsdXNoID09PSAnc3luYycpIHtcbiAgICAgICAgc2NoZWR1bGVyID0gam9iOyAvLyB0aGUgc2NoZWR1bGVyIGZ1bmN0aW9uIGdldHMgY2FsbGVkIGRpcmVjdGx5XG4gICAgfVxuICAgIGVsc2UgaWYgKGZsdXNoID09PSAncG9zdCcpIHtcbiAgICAgICAgc2NoZWR1bGVyID0gKCkgPT4gcXVldWVQb3N0UmVuZGVyRWZmZWN0KGpvYiwgaW5zdGFuY2UgJiYgaW5zdGFuY2Uuc3VzcGVuc2UpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gZGVmYXVsdDogJ3ByZSdcbiAgICAgICAgam9iLnByZSA9IHRydWU7XG4gICAgICAgIGlmIChpbnN0YW5jZSlcbiAgICAgICAgICAgIGpvYi5pZCA9IGluc3RhbmNlLnVpZDtcbiAgICAgICAgc2NoZWR1bGVyID0gKCkgPT4gcXVldWVKb2Ioam9iKTtcbiAgICB9XG4gICAgY29uc3QgZWZmZWN0ID0gbmV3IFJlYWN0aXZlRWZmZWN0KGdldHRlciwgc2NoZWR1bGVyKTtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIGVmZmVjdC5vblRyYWNrID0gb25UcmFjaztcbiAgICAgICAgZWZmZWN0Lm9uVHJpZ2dlciA9IG9uVHJpZ2dlcjtcbiAgICB9XG4gICAgLy8gaW5pdGlhbCBydW5cbiAgICBpZiAoY2IpIHtcbiAgICAgICAgaWYgKGltbWVkaWF0ZSkge1xuICAgICAgICAgICAgam9iKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvbGRWYWx1ZSA9IGVmZmVjdC5ydW4oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChmbHVzaCA9PT0gJ3Bvc3QnKSB7XG4gICAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdChlZmZlY3QucnVuLmJpbmQoZWZmZWN0KSwgaW5zdGFuY2UgJiYgaW5zdGFuY2Uuc3VzcGVuc2UpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZWZmZWN0LnJ1bigpO1xuICAgIH1cbiAgICBjb25zdCB1bndhdGNoID0gKCkgPT4ge1xuICAgICAgICBlZmZlY3Quc3RvcCgpO1xuICAgICAgICBpZiAoaW5zdGFuY2UgJiYgaW5zdGFuY2Uuc2NvcGUpIHtcbiAgICAgICAgICAgIHJlbW92ZShpbnN0YW5jZS5zY29wZS5lZmZlY3RzLCBlZmZlY3QpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBpZiAoc3NyQ2xlYW51cClcbiAgICAgICAgc3NyQ2xlYW51cC5wdXNoKHVud2F0Y2gpO1xuICAgIHJldHVybiB1bndhdGNoO1xufVxuLy8gdGhpcy4kd2F0Y2hcbmZ1bmN0aW9uIGluc3RhbmNlV2F0Y2goc291cmNlLCB2YWx1ZSwgb3B0aW9ucykge1xuICAgIGNvbnN0IHB1YmxpY1RoaXMgPSB0aGlzLnByb3h5O1xuICAgIGNvbnN0IGdldHRlciA9IGlzU3RyaW5nKHNvdXJjZSlcbiAgICAgICAgPyBzb3VyY2UuaW5jbHVkZXMoJy4nKVxuICAgICAgICAgICAgPyBjcmVhdGVQYXRoR2V0dGVyKHB1YmxpY1RoaXMsIHNvdXJjZSlcbiAgICAgICAgICAgIDogKCkgPT4gcHVibGljVGhpc1tzb3VyY2VdXG4gICAgICAgIDogc291cmNlLmJpbmQocHVibGljVGhpcywgcHVibGljVGhpcyk7XG4gICAgbGV0IGNiO1xuICAgIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkge1xuICAgICAgICBjYiA9IHZhbHVlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY2IgPSB2YWx1ZS5oYW5kbGVyO1xuICAgICAgICBvcHRpb25zID0gdmFsdWU7XG4gICAgfVxuICAgIGNvbnN0IGN1ciA9IGN1cnJlbnRJbnN0YW5jZTtcbiAgICBzZXRDdXJyZW50SW5zdGFuY2UodGhpcyk7XG4gICAgY29uc3QgcmVzID0gZG9XYXRjaChnZXR0ZXIsIGNiLmJpbmQocHVibGljVGhpcyksIG9wdGlvbnMpO1xuICAgIGlmIChjdXIpIHtcbiAgICAgICAgc2V0Q3VycmVudEluc3RhbmNlKGN1cik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB1bnNldEN1cnJlbnRJbnN0YW5jZSgpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufVxuZnVuY3Rpb24gY3JlYXRlUGF0aEdldHRlcihjdHgsIHBhdGgpIHtcbiAgICBjb25zdCBzZWdtZW50cyA9IHBhdGguc3BsaXQoJy4nKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBsZXQgY3VyID0gY3R4O1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlZ21lbnRzLmxlbmd0aCAmJiBjdXI7IGkrKykge1xuICAgICAgICAgICAgY3VyID0gY3VyW3NlZ21lbnRzW2ldXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY3VyO1xuICAgIH07XG59XG5mdW5jdGlvbiB0cmF2ZXJzZSh2YWx1ZSwgc2Vlbikge1xuICAgIGlmICghaXNPYmplY3QodmFsdWUpIHx8IHZhbHVlW1wiX192X3NraXBcIiAvKiBSZWFjdGl2ZUZsYWdzLlNLSVAgKi9dKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgc2VlbiA9IHNlZW4gfHwgbmV3IFNldCgpO1xuICAgIGlmIChzZWVuLmhhcyh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBzZWVuLmFkZCh2YWx1ZSk7XG4gICAgaWYgKGlzUmVmKHZhbHVlKSkge1xuICAgICAgICB0cmF2ZXJzZSh2YWx1ZS52YWx1ZSwgc2Vlbik7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRyYXZlcnNlKHZhbHVlW2ldLCBzZWVuKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChpc1NldCh2YWx1ZSkgfHwgaXNNYXAodmFsdWUpKSB7XG4gICAgICAgIHZhbHVlLmZvckVhY2goKHYpID0+IHtcbiAgICAgICAgICAgIHRyYXZlcnNlKHYsIHNlZW4pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNQbGFpbk9iamVjdCh2YWx1ZSkpIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdmFsdWUpIHtcbiAgICAgICAgICAgIHRyYXZlcnNlKHZhbHVlW2tleV0sIHNlZW4pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbn1cblxuZnVuY3Rpb24gdXNlVHJhbnNpdGlvblN0YXRlKCkge1xuICAgIGNvbnN0IHN0YXRlID0ge1xuICAgICAgICBpc01vdW50ZWQ6IGZhbHNlLFxuICAgICAgICBpc0xlYXZpbmc6IGZhbHNlLFxuICAgICAgICBpc1VubW91bnRpbmc6IGZhbHNlLFxuICAgICAgICBsZWF2aW5nVk5vZGVzOiBuZXcgTWFwKClcbiAgICB9O1xuICAgIG9uTW91bnRlZCgoKSA9PiB7XG4gICAgICAgIHN0YXRlLmlzTW91bnRlZCA9IHRydWU7XG4gICAgfSk7XG4gICAgb25CZWZvcmVVbm1vdW50KCgpID0+IHtcbiAgICAgICAgc3RhdGUuaXNVbm1vdW50aW5nID0gdHJ1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gc3RhdGU7XG59XG5jb25zdCBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvciA9IFtGdW5jdGlvbiwgQXJyYXldO1xuY29uc3QgQmFzZVRyYW5zaXRpb25JbXBsID0ge1xuICAgIG5hbWU6IGBCYXNlVHJhbnNpdGlvbmAsXG4gICAgcHJvcHM6IHtcbiAgICAgICAgbW9kZTogU3RyaW5nLFxuICAgICAgICBhcHBlYXI6IEJvb2xlYW4sXG4gICAgICAgIHBlcnNpc3RlZDogQm9vbGVhbixcbiAgICAgICAgLy8gZW50ZXJcbiAgICAgICAgb25CZWZvcmVFbnRlcjogVHJhbnNpdGlvbkhvb2tWYWxpZGF0b3IsXG4gICAgICAgIG9uRW50ZXI6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yLFxuICAgICAgICBvbkFmdGVyRW50ZXI6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yLFxuICAgICAgICBvbkVudGVyQ2FuY2VsbGVkOiBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvcixcbiAgICAgICAgLy8gbGVhdmVcbiAgICAgICAgb25CZWZvcmVMZWF2ZTogVHJhbnNpdGlvbkhvb2tWYWxpZGF0b3IsXG4gICAgICAgIG9uTGVhdmU6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yLFxuICAgICAgICBvbkFmdGVyTGVhdmU6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yLFxuICAgICAgICBvbkxlYXZlQ2FuY2VsbGVkOiBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvcixcbiAgICAgICAgLy8gYXBwZWFyXG4gICAgICAgIG9uQmVmb3JlQXBwZWFyOiBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvcixcbiAgICAgICAgb25BcHBlYXI6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yLFxuICAgICAgICBvbkFmdGVyQXBwZWFyOiBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvcixcbiAgICAgICAgb25BcHBlYXJDYW5jZWxsZWQ6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yXG4gICAgfSxcbiAgICBzZXR1cChwcm9wcywgeyBzbG90cyB9KSB7XG4gICAgICAgIGNvbnN0IGluc3RhbmNlID0gZ2V0Q3VycmVudEluc3RhbmNlKCk7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdXNlVHJhbnNpdGlvblN0YXRlKCk7XG4gICAgICAgIGxldCBwcmV2VHJhbnNpdGlvbktleTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkcmVuID0gc2xvdHMuZGVmYXVsdCAmJiBnZXRUcmFuc2l0aW9uUmF3Q2hpbGRyZW4oc2xvdHMuZGVmYXVsdCgpLCB0cnVlKTtcbiAgICAgICAgICAgIGlmICghY2hpbGRyZW4gfHwgIWNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBjaGlsZCA9IGNoaWxkcmVuWzBdO1xuICAgICAgICAgICAgaWYgKGNoaWxkcmVuLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICBsZXQgaGFzRm91bmQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAvLyBsb2NhdGUgZmlyc3Qgbm9uLWNvbW1lbnQgY2hpbGRcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGMgb2YgY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGMudHlwZSAhPT0gQ29tbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBoYXNGb3VuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdhcm4gbW9yZSB0aGFuIG9uZSBub24tY29tbWVudCBjaGlsZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm4oJzx0cmFuc2l0aW9uPiBjYW4gb25seSBiZSB1c2VkIG9uIGEgc2luZ2xlIGVsZW1lbnQgb3IgY29tcG9uZW50LiAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1VzZSA8dHJhbnNpdGlvbi1ncm91cD4gZm9yIGxpc3RzLicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGQgPSBjO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFzRm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB0aGVyZSdzIG5vIG5lZWQgdG8gdHJhY2sgcmVhY3Rpdml0eSBmb3IgdGhlc2UgcHJvcHMgc28gdXNlIHRoZSByYXdcbiAgICAgICAgICAgIC8vIHByb3BzIGZvciBhIGJpdCBiZXR0ZXIgcGVyZlxuICAgICAgICAgICAgY29uc3QgcmF3UHJvcHMgPSB0b1Jhdyhwcm9wcyk7XG4gICAgICAgICAgICBjb25zdCB7IG1vZGUgfSA9IHJhd1Byb3BzO1xuICAgICAgICAgICAgLy8gY2hlY2sgbW9kZVxuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxuICAgICAgICAgICAgICAgIG1vZGUgJiZcbiAgICAgICAgICAgICAgICBtb2RlICE9PSAnaW4tb3V0JyAmJlxuICAgICAgICAgICAgICAgIG1vZGUgIT09ICdvdXQtaW4nICYmXG4gICAgICAgICAgICAgICAgbW9kZSAhPT0gJ2RlZmF1bHQnKSB7XG4gICAgICAgICAgICAgICAgd2FybihgaW52YWxpZCA8dHJhbnNpdGlvbj4gbW9kZTogJHttb2RlfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0YXRlLmlzTGVhdmluZykge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbXB0eVBsYWNlaG9sZGVyKGNoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGluIHRoZSBjYXNlIG9mIDx0cmFuc2l0aW9uPjxrZWVwLWFsaXZlLz48L3RyYW5zaXRpb24+LCB3ZSBuZWVkIHRvXG4gICAgICAgICAgICAvLyBjb21wYXJlIHRoZSB0eXBlIG9mIHRoZSBrZXB0LWFsaXZlIGNoaWxkcmVuLlxuICAgICAgICAgICAgY29uc3QgaW5uZXJDaGlsZCA9IGdldEtlZXBBbGl2ZUNoaWxkKGNoaWxkKTtcbiAgICAgICAgICAgIGlmICghaW5uZXJDaGlsZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbXB0eVBsYWNlaG9sZGVyKGNoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGVudGVySG9va3MgPSByZXNvbHZlVHJhbnNpdGlvbkhvb2tzKGlubmVyQ2hpbGQsIHJhd1Byb3BzLCBzdGF0ZSwgaW5zdGFuY2UpO1xuICAgICAgICAgICAgc2V0VHJhbnNpdGlvbkhvb2tzKGlubmVyQ2hpbGQsIGVudGVySG9va3MpO1xuICAgICAgICAgICAgY29uc3Qgb2xkQ2hpbGQgPSBpbnN0YW5jZS5zdWJUcmVlO1xuICAgICAgICAgICAgY29uc3Qgb2xkSW5uZXJDaGlsZCA9IG9sZENoaWxkICYmIGdldEtlZXBBbGl2ZUNoaWxkKG9sZENoaWxkKTtcbiAgICAgICAgICAgIGxldCB0cmFuc2l0aW9uS2V5Q2hhbmdlZCA9IGZhbHNlO1xuICAgICAgICAgICAgY29uc3QgeyBnZXRUcmFuc2l0aW9uS2V5IH0gPSBpbm5lckNoaWxkLnR5cGU7XG4gICAgICAgICAgICBpZiAoZ2V0VHJhbnNpdGlvbktleSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGdldFRyYW5zaXRpb25LZXkoKTtcbiAgICAgICAgICAgICAgICBpZiAocHJldlRyYW5zaXRpb25LZXkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBwcmV2VHJhbnNpdGlvbktleSA9IGtleTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoa2V5ICE9PSBwcmV2VHJhbnNpdGlvbktleSkge1xuICAgICAgICAgICAgICAgICAgICBwcmV2VHJhbnNpdGlvbktleSA9IGtleTtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbktleUNoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGhhbmRsZSBtb2RlXG4gICAgICAgICAgICBpZiAob2xkSW5uZXJDaGlsZCAmJlxuICAgICAgICAgICAgICAgIG9sZElubmVyQ2hpbGQudHlwZSAhPT0gQ29tbWVudCAmJlxuICAgICAgICAgICAgICAgICghaXNTYW1lVk5vZGVUeXBlKGlubmVyQ2hpbGQsIG9sZElubmVyQ2hpbGQpIHx8IHRyYW5zaXRpb25LZXlDaGFuZ2VkKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxlYXZpbmdIb29rcyA9IHJlc29sdmVUcmFuc2l0aW9uSG9va3Mob2xkSW5uZXJDaGlsZCwgcmF3UHJvcHMsIHN0YXRlLCBpbnN0YW5jZSk7XG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIG9sZCB0cmVlJ3MgaG9va3MgaW4gY2FzZSBvZiBkeW5hbWljIHRyYW5zaXRpb25cbiAgICAgICAgICAgICAgICBzZXRUcmFuc2l0aW9uSG9va3Mob2xkSW5uZXJDaGlsZCwgbGVhdmluZ0hvb2tzKTtcbiAgICAgICAgICAgICAgICAvLyBzd2l0Y2hpbmcgYmV0d2VlbiBkaWZmZXJlbnQgdmlld3NcbiAgICAgICAgICAgICAgICBpZiAobW9kZSA9PT0gJ291dC1pbicpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuaXNMZWF2aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuIHBsYWNlaG9sZGVyIG5vZGUgYW5kIHF1ZXVlIHVwZGF0ZSB3aGVuIGxlYXZlIGZpbmlzaGVzXG4gICAgICAgICAgICAgICAgICAgIGxlYXZpbmdIb29rcy5hZnRlckxlYXZlID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuaXNMZWF2aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAjNjgzNVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaXQgYWxzbyBuZWVkcyB0byBiZSB1cGRhdGVkIHdoZW4gYWN0aXZlIGlzIHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluc3RhbmNlLnVwZGF0ZS5hY3RpdmUgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UudXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlbXB0eVBsYWNlaG9sZGVyKGNoaWxkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobW9kZSA9PT0gJ2luLW91dCcgJiYgaW5uZXJDaGlsZC50eXBlICE9PSBDb21tZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGxlYXZpbmdIb29rcy5kZWxheUxlYXZlID0gKGVsLCBlYXJseVJlbW92ZSwgZGVsYXllZExlYXZlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsZWF2aW5nVk5vZGVzQ2FjaGUgPSBnZXRMZWF2aW5nTm9kZXNGb3JUeXBlKHN0YXRlLCBvbGRJbm5lckNoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlYXZpbmdWTm9kZXNDYWNoZVtTdHJpbmcob2xkSW5uZXJDaGlsZC5rZXkpXSA9IG9sZElubmVyQ2hpbGQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlYXJseSByZW1vdmFsIGNhbGxiYWNrXG4gICAgICAgICAgICAgICAgICAgICAgICBlbC5fbGVhdmVDYiA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXJseVJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLl9sZWF2ZUNiID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBlbnRlckhvb2tzLmRlbGF5ZWRMZWF2ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRlckhvb2tzLmRlbGF5ZWRMZWF2ZSA9IGRlbGF5ZWRMZWF2ZTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY2hpbGQ7XG4gICAgICAgIH07XG4gICAgfVxufTtcbi8vIGV4cG9ydCB0aGUgcHVibGljIHR5cGUgZm9yIGgvdHN4IGluZmVyZW5jZVxuLy8gYWxzbyB0byBhdm9pZCBpbmxpbmUgaW1wb3J0KCkgaW4gZ2VuZXJhdGVkIGQudHMgZmlsZXNcbmNvbnN0IEJhc2VUcmFuc2l0aW9uID0gQmFzZVRyYW5zaXRpb25JbXBsO1xuZnVuY3Rpb24gZ2V0TGVhdmluZ05vZGVzRm9yVHlwZShzdGF0ZSwgdm5vZGUpIHtcbiAgICBjb25zdCB7IGxlYXZpbmdWTm9kZXMgfSA9IHN0YXRlO1xuICAgIGxldCBsZWF2aW5nVk5vZGVzQ2FjaGUgPSBsZWF2aW5nVk5vZGVzLmdldCh2bm9kZS50eXBlKTtcbiAgICBpZiAoIWxlYXZpbmdWTm9kZXNDYWNoZSkge1xuICAgICAgICBsZWF2aW5nVk5vZGVzQ2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICBsZWF2aW5nVk5vZGVzLnNldCh2bm9kZS50eXBlLCBsZWF2aW5nVk5vZGVzQ2FjaGUpO1xuICAgIH1cbiAgICByZXR1cm4gbGVhdmluZ1ZOb2Rlc0NhY2hlO1xufVxuLy8gVGhlIHRyYW5zaXRpb24gaG9va3MgYXJlIGF0dGFjaGVkIHRvIHRoZSB2bm9kZSBhcyB2bm9kZS50cmFuc2l0aW9uXG4vLyBhbmQgd2lsbCBiZSBjYWxsZWQgYXQgYXBwcm9wcmlhdGUgdGltaW5nIGluIHRoZSByZW5kZXJlci5cbmZ1bmN0aW9uIHJlc29sdmVUcmFuc2l0aW9uSG9va3Modm5vZGUsIHByb3BzLCBzdGF0ZSwgaW5zdGFuY2UpIHtcbiAgICBjb25zdCB7IGFwcGVhciwgbW9kZSwgcGVyc2lzdGVkID0gZmFsc2UsIG9uQmVmb3JlRW50ZXIsIG9uRW50ZXIsIG9uQWZ0ZXJFbnRlciwgb25FbnRlckNhbmNlbGxlZCwgb25CZWZvcmVMZWF2ZSwgb25MZWF2ZSwgb25BZnRlckxlYXZlLCBvbkxlYXZlQ2FuY2VsbGVkLCBvbkJlZm9yZUFwcGVhciwgb25BcHBlYXIsIG9uQWZ0ZXJBcHBlYXIsIG9uQXBwZWFyQ2FuY2VsbGVkIH0gPSBwcm9wcztcbiAgICBjb25zdCBrZXkgPSBTdHJpbmcodm5vZGUua2V5KTtcbiAgICBjb25zdCBsZWF2aW5nVk5vZGVzQ2FjaGUgPSBnZXRMZWF2aW5nTm9kZXNGb3JUeXBlKHN0YXRlLCB2bm9kZSk7XG4gICAgY29uc3QgY2FsbEhvb2sgPSAoaG9vaywgYXJncykgPT4ge1xuICAgICAgICBob29rICYmXG4gICAgICAgICAgICBjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZyhob29rLCBpbnN0YW5jZSwgOSAvKiBFcnJvckNvZGVzLlRSQU5TSVRJT05fSE9PSyAqLywgYXJncyk7XG4gICAgfTtcbiAgICBjb25zdCBjYWxsQXN5bmNIb29rID0gKGhvb2ssIGFyZ3MpID0+IHtcbiAgICAgICAgY29uc3QgZG9uZSA9IGFyZ3NbMV07XG4gICAgICAgIGNhbGxIb29rKGhvb2ssIGFyZ3MpO1xuICAgICAgICBpZiAoaXNBcnJheShob29rKSkge1xuICAgICAgICAgICAgaWYgKGhvb2suZXZlcnkoaG9vayA9PiBob29rLmxlbmd0aCA8PSAxKSlcbiAgICAgICAgICAgICAgICBkb25lKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaG9vay5sZW5ndGggPD0gMSkge1xuICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBob29rcyA9IHtcbiAgICAgICAgbW9kZSxcbiAgICAgICAgcGVyc2lzdGVkLFxuICAgICAgICBiZWZvcmVFbnRlcihlbCkge1xuICAgICAgICAgICAgbGV0IGhvb2sgPSBvbkJlZm9yZUVudGVyO1xuICAgICAgICAgICAgaWYgKCFzdGF0ZS5pc01vdW50ZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXBwZWFyKSB7XG4gICAgICAgICAgICAgICAgICAgIGhvb2sgPSBvbkJlZm9yZUFwcGVhciB8fCBvbkJlZm9yZUVudGVyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGZvciBzYW1lIGVsZW1lbnQgKHYtc2hvdylcbiAgICAgICAgICAgIGlmIChlbC5fbGVhdmVDYikge1xuICAgICAgICAgICAgICAgIGVsLl9sZWF2ZUNiKHRydWUgLyogY2FuY2VsbGVkICovKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGZvciB0b2dnbGVkIGVsZW1lbnQgd2l0aCBzYW1lIGtleSAodi1pZilcbiAgICAgICAgICAgIGNvbnN0IGxlYXZpbmdWTm9kZSA9IGxlYXZpbmdWTm9kZXNDYWNoZVtrZXldO1xuICAgICAgICAgICAgaWYgKGxlYXZpbmdWTm9kZSAmJlxuICAgICAgICAgICAgICAgIGlzU2FtZVZOb2RlVHlwZSh2bm9kZSwgbGVhdmluZ1ZOb2RlKSAmJlxuICAgICAgICAgICAgICAgIGxlYXZpbmdWTm9kZS5lbC5fbGVhdmVDYikge1xuICAgICAgICAgICAgICAgIC8vIGZvcmNlIGVhcmx5IHJlbW92YWwgKG5vdCBjYW5jZWxsZWQpXG4gICAgICAgICAgICAgICAgbGVhdmluZ1ZOb2RlLmVsLl9sZWF2ZUNiKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYWxsSG9vayhob29rLCBbZWxdKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW50ZXIoZWwpIHtcbiAgICAgICAgICAgIGxldCBob29rID0gb25FbnRlcjtcbiAgICAgICAgICAgIGxldCBhZnRlckhvb2sgPSBvbkFmdGVyRW50ZXI7XG4gICAgICAgICAgICBsZXQgY2FuY2VsSG9vayA9IG9uRW50ZXJDYW5jZWxsZWQ7XG4gICAgICAgICAgICBpZiAoIXN0YXRlLmlzTW91bnRlZCkge1xuICAgICAgICAgICAgICAgIGlmIChhcHBlYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaG9vayA9IG9uQXBwZWFyIHx8IG9uRW50ZXI7XG4gICAgICAgICAgICAgICAgICAgIGFmdGVySG9vayA9IG9uQWZ0ZXJBcHBlYXIgfHwgb25BZnRlckVudGVyO1xuICAgICAgICAgICAgICAgICAgICBjYW5jZWxIb29rID0gb25BcHBlYXJDYW5jZWxsZWQgfHwgb25FbnRlckNhbmNlbGxlZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgY2FsbGVkID0gZmFsc2U7XG4gICAgICAgICAgICBjb25zdCBkb25lID0gKGVsLl9lbnRlckNiID0gKGNhbmNlbGxlZCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChjYWxsZWQpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBjYWxsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmIChjYW5jZWxsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbEhvb2soY2FuY2VsSG9vaywgW2VsXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjYWxsSG9vayhhZnRlckhvb2ssIFtlbF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaG9va3MuZGVsYXllZExlYXZlKSB7XG4gICAgICAgICAgICAgICAgICAgIGhvb2tzLmRlbGF5ZWRMZWF2ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbC5fZW50ZXJDYiA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGhvb2spIHtcbiAgICAgICAgICAgICAgICBjYWxsQXN5bmNIb29rKGhvb2ssIFtlbCwgZG9uZV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBsZWF2ZShlbCwgcmVtb3ZlKSB7XG4gICAgICAgICAgICBjb25zdCBrZXkgPSBTdHJpbmcodm5vZGUua2V5KTtcbiAgICAgICAgICAgIGlmIChlbC5fZW50ZXJDYikge1xuICAgICAgICAgICAgICAgIGVsLl9lbnRlckNiKHRydWUgLyogY2FuY2VsbGVkICovKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzdGF0ZS5pc1VubW91bnRpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVtb3ZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYWxsSG9vayhvbkJlZm9yZUxlYXZlLCBbZWxdKTtcbiAgICAgICAgICAgIGxldCBjYWxsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbnN0IGRvbmUgPSAoZWwuX2xlYXZlQ2IgPSAoY2FuY2VsbGVkKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGNhbGxlZClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGNhbGxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgaWYgKGNhbmNlbGxlZCkge1xuICAgICAgICAgICAgICAgICAgICBjYWxsSG9vayhvbkxlYXZlQ2FuY2VsbGVkLCBbZWxdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxIb29rKG9uQWZ0ZXJMZWF2ZSwgW2VsXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsLl9sZWF2ZUNiID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGlmIChsZWF2aW5nVk5vZGVzQ2FjaGVba2V5XSA9PT0gdm5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGxlYXZpbmdWTm9kZXNDYWNoZVtrZXldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbGVhdmluZ1ZOb2Rlc0NhY2hlW2tleV0gPSB2bm9kZTtcbiAgICAgICAgICAgIGlmIChvbkxlYXZlKSB7XG4gICAgICAgICAgICAgICAgY2FsbEFzeW5jSG9vayhvbkxlYXZlLCBbZWwsIGRvbmVdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgY2xvbmUodm5vZGUpIHtcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlVHJhbnNpdGlvbkhvb2tzKHZub2RlLCBwcm9wcywgc3RhdGUsIGluc3RhbmNlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIGhvb2tzO1xufVxuLy8gdGhlIHBsYWNlaG9sZGVyIHJlYWxseSBvbmx5IGhhbmRsZXMgb25lIHNwZWNpYWwgY2FzZTogS2VlcEFsaXZlXG4vLyBpbiB0aGUgY2FzZSBvZiBhIEtlZXBBbGl2ZSBpbiBhIGxlYXZlIHBoYXNlIHdlIG5lZWQgdG8gcmV0dXJuIGEgS2VlcEFsaXZlXG4vLyBwbGFjZWhvbGRlciB3aXRoIGVtcHR5IGNvbnRlbnQgdG8gYXZvaWQgdGhlIEtlZXBBbGl2ZSBpbnN0YW5jZSBmcm9tIGJlaW5nXG4vLyB1bm1vdW50ZWQuXG5mdW5jdGlvbiBlbXB0eVBsYWNlaG9sZGVyKHZub2RlKSB7XG4gICAgaWYgKGlzS2VlcEFsaXZlKHZub2RlKSkge1xuICAgICAgICB2bm9kZSA9IGNsb25lVk5vZGUodm5vZGUpO1xuICAgICAgICB2bm9kZS5jaGlsZHJlbiA9IG51bGw7XG4gICAgICAgIHJldHVybiB2bm9kZTtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRLZWVwQWxpdmVDaGlsZCh2bm9kZSkge1xuICAgIHJldHVybiBpc0tlZXBBbGl2ZSh2bm9kZSlcbiAgICAgICAgPyB2bm9kZS5jaGlsZHJlblxuICAgICAgICAgICAgPyB2bm9kZS5jaGlsZHJlblswXVxuICAgICAgICAgICAgOiB1bmRlZmluZWRcbiAgICAgICAgOiB2bm9kZTtcbn1cbmZ1bmN0aW9uIHNldFRyYW5zaXRpb25Ib29rcyh2bm9kZSwgaG9va3MpIHtcbiAgICBpZiAodm5vZGUuc2hhcGVGbGFnICYgNiAvKiBTaGFwZUZsYWdzLkNPTVBPTkVOVCAqLyAmJiB2bm9kZS5jb21wb25lbnQpIHtcbiAgICAgICAgc2V0VHJhbnNpdGlvbkhvb2tzKHZub2RlLmNvbXBvbmVudC5zdWJUcmVlLCBob29rcyk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHZub2RlLnNoYXBlRmxhZyAmIDEyOCAvKiBTaGFwZUZsYWdzLlNVU1BFTlNFICovKSB7XG4gICAgICAgIHZub2RlLnNzQ29udGVudC50cmFuc2l0aW9uID0gaG9va3MuY2xvbmUodm5vZGUuc3NDb250ZW50KTtcbiAgICAgICAgdm5vZGUuc3NGYWxsYmFjay50cmFuc2l0aW9uID0gaG9va3MuY2xvbmUodm5vZGUuc3NGYWxsYmFjayk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2bm9kZS50cmFuc2l0aW9uID0gaG9va3M7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0VHJhbnNpdGlvblJhd0NoaWxkcmVuKGNoaWxkcmVuLCBrZWVwQ29tbWVudCA9IGZhbHNlLCBwYXJlbnRLZXkpIHtcbiAgICBsZXQgcmV0ID0gW107XG4gICAgbGV0IGtleWVkRnJhZ21lbnRDb3VudCA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgY2hpbGQgPSBjaGlsZHJlbltpXTtcbiAgICAgICAgLy8gIzUzNjAgaW5oZXJpdCBwYXJlbnQga2V5IGluIGNhc2Ugb2YgPHRlbXBsYXRlIHYtZm9yPlxuICAgICAgICBjb25zdCBrZXkgPSBwYXJlbnRLZXkgPT0gbnVsbFxuICAgICAgICAgICAgPyBjaGlsZC5rZXlcbiAgICAgICAgICAgIDogU3RyaW5nKHBhcmVudEtleSkgKyBTdHJpbmcoY2hpbGQua2V5ICE9IG51bGwgPyBjaGlsZC5rZXkgOiBpKTtcbiAgICAgICAgLy8gaGFuZGxlIGZyYWdtZW50IGNoaWxkcmVuIGNhc2UsIGUuZy4gdi1mb3JcbiAgICAgICAgaWYgKGNoaWxkLnR5cGUgPT09IEZyYWdtZW50KSB7XG4gICAgICAgICAgICBpZiAoY2hpbGQucGF0Y2hGbGFnICYgMTI4IC8qIFBhdGNoRmxhZ3MuS0VZRURfRlJBR01FTlQgKi8pXG4gICAgICAgICAgICAgICAga2V5ZWRGcmFnbWVudENvdW50Kys7XG4gICAgICAgICAgICByZXQgPSByZXQuY29uY2F0KGdldFRyYW5zaXRpb25SYXdDaGlsZHJlbihjaGlsZC5jaGlsZHJlbiwga2VlcENvbW1lbnQsIGtleSkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNvbW1lbnQgcGxhY2Vob2xkZXJzIHNob3VsZCBiZSBza2lwcGVkLCBlLmcuIHYtaWZcbiAgICAgICAgZWxzZSBpZiAoa2VlcENvbW1lbnQgfHwgY2hpbGQudHlwZSAhPT0gQ29tbWVudCkge1xuICAgICAgICAgICAgcmV0LnB1c2goa2V5ICE9IG51bGwgPyBjbG9uZVZOb2RlKGNoaWxkLCB7IGtleSB9KSA6IGNoaWxkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyAjMTEyNiBpZiBhIHRyYW5zaXRpb24gY2hpbGRyZW4gbGlzdCBjb250YWlucyBtdWx0aXBsZSBzdWIgZnJhZ21lbnRzLCB0aGVzZVxuICAgIC8vIGZyYWdtZW50cyB3aWxsIGJlIG1lcmdlZCBpbnRvIGEgZmxhdCBjaGlsZHJlbiBhcnJheS4gU2luY2UgZWFjaCB2LWZvclxuICAgIC8vIGZyYWdtZW50IG1heSBjb250YWluIGRpZmZlcmVudCBzdGF0aWMgYmluZGluZ3MgaW5zaWRlLCB3ZSBuZWVkIHRvIGRlLW9wXG4gICAgLy8gdGhlc2UgY2hpbGRyZW4gdG8gZm9yY2UgZnVsbCBkaWZmcyB0byBlbnN1cmUgY29ycmVjdCBiZWhhdmlvci5cbiAgICBpZiAoa2V5ZWRGcmFnbWVudENvdW50ID4gMSkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJldC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgcmV0W2ldLnBhdGNoRmxhZyA9IC0yIC8qIFBhdGNoRmxhZ3MuQkFJTCAqLztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufVxuXG4vLyBpbXBsZW1lbnRhdGlvbiwgY2xvc2UgdG8gbm8tb3BcbmZ1bmN0aW9uIGRlZmluZUNvbXBvbmVudChvcHRpb25zKSB7XG4gICAgcmV0dXJuIGlzRnVuY3Rpb24ob3B0aW9ucykgPyB7IHNldHVwOiBvcHRpb25zLCBuYW1lOiBvcHRpb25zLm5hbWUgfSA6IG9wdGlvbnM7XG59XG5cbmNvbnN0IGlzQXN5bmNXcmFwcGVyID0gKGkpID0+ICEhaS50eXBlLl9fYXN5bmNMb2FkZXI7XG5mdW5jdGlvbiBkZWZpbmVBc3luY0NvbXBvbmVudChzb3VyY2UpIHtcbiAgICBpZiAoaXNGdW5jdGlvbihzb3VyY2UpKSB7XG4gICAgICAgIHNvdXJjZSA9IHsgbG9hZGVyOiBzb3VyY2UgfTtcbiAgICB9XG4gICAgY29uc3QgeyBsb2FkZXIsIGxvYWRpbmdDb21wb25lbnQsIGVycm9yQ29tcG9uZW50LCBkZWxheSA9IDIwMCwgdGltZW91dCwgLy8gdW5kZWZpbmVkID0gbmV2ZXIgdGltZXMgb3V0XG4gICAgc3VzcGVuc2libGUgPSB0cnVlLCBvbkVycm9yOiB1c2VyT25FcnJvciB9ID0gc291cmNlO1xuICAgIGxldCBwZW5kaW5nUmVxdWVzdCA9IG51bGw7XG4gICAgbGV0IHJlc29sdmVkQ29tcDtcbiAgICBsZXQgcmV0cmllcyA9IDA7XG4gICAgY29uc3QgcmV0cnkgPSAoKSA9PiB7XG4gICAgICAgIHJldHJpZXMrKztcbiAgICAgICAgcGVuZGluZ1JlcXVlc3QgPSBudWxsO1xuICAgICAgICByZXR1cm4gbG9hZCgpO1xuICAgIH07XG4gICAgY29uc3QgbG9hZCA9ICgpID0+IHtcbiAgICAgICAgbGV0IHRoaXNSZXF1ZXN0O1xuICAgICAgICByZXR1cm4gKHBlbmRpbmdSZXF1ZXN0IHx8XG4gICAgICAgICAgICAodGhpc1JlcXVlc3QgPSBwZW5kaW5nUmVxdWVzdCA9XG4gICAgICAgICAgICAgICAgbG9hZGVyKClcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGVyciA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyIDogbmV3IEVycm9yKFN0cmluZyhlcnIpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXJPbkVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJSZXRyeSA9ICgpID0+IHJlc29sdmUocmV0cnkoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdXNlckZhaWwgPSAoKSA9PiByZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyT25FcnJvcihlcnIsIHVzZXJSZXRyeSwgdXNlckZhaWwsIHJldHJpZXMgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKGNvbXApID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXNSZXF1ZXN0ICE9PSBwZW5kaW5nUmVxdWVzdCAmJiBwZW5kaW5nUmVxdWVzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBlbmRpbmdSZXF1ZXN0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWNvbXApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm4oYEFzeW5jIGNvbXBvbmVudCBsb2FkZXIgcmVzb2x2ZWQgdG8gdW5kZWZpbmVkLiBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgSWYgeW91IGFyZSB1c2luZyByZXRyeSgpLCBtYWtlIHN1cmUgdG8gcmV0dXJuIGl0cyByZXR1cm4gdmFsdWUuYCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gaW50ZXJvcCBtb2R1bGUgZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgICBpZiAoY29tcCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgKGNvbXAuX19lc01vZHVsZSB8fCBjb21wW1N5bWJvbC50b1N0cmluZ1RhZ10gPT09ICdNb2R1bGUnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29tcCA9IGNvbXAuZGVmYXVsdDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGNvbXAgJiYgIWlzT2JqZWN0KGNvbXApICYmICFpc0Z1bmN0aW9uKGNvbXApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgYXN5bmMgY29tcG9uZW50IGxvYWQgcmVzdWx0OiAke2NvbXB9YCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZWRDb21wID0gY29tcDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbXA7XG4gICAgICAgICAgICAgICAgfSkpKTtcbiAgICB9O1xuICAgIHJldHVybiBkZWZpbmVDb21wb25lbnQoe1xuICAgICAgICBuYW1lOiAnQXN5bmNDb21wb25lbnRXcmFwcGVyJyxcbiAgICAgICAgX19hc3luY0xvYWRlcjogbG9hZCxcbiAgICAgICAgZ2V0IF9fYXN5bmNSZXNvbHZlZCgpIHtcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlZENvbXA7XG4gICAgICAgIH0sXG4gICAgICAgIHNldHVwKCkge1xuICAgICAgICAgICAgY29uc3QgaW5zdGFuY2UgPSBjdXJyZW50SW5zdGFuY2U7XG4gICAgICAgICAgICAvLyBhbHJlYWR5IHJlc29sdmVkXG4gICAgICAgICAgICBpZiAocmVzb2x2ZWRDb21wKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICgpID0+IGNyZWF0ZUlubmVyQ29tcChyZXNvbHZlZENvbXAsIGluc3RhbmNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG9uRXJyb3IgPSAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgcGVuZGluZ1JlcXVlc3QgPSBudWxsO1xuICAgICAgICAgICAgICAgIGhhbmRsZUVycm9yKGVyciwgaW5zdGFuY2UsIDEzIC8qIEVycm9yQ29kZXMuQVNZTkNfQ09NUE9ORU5UX0xPQURFUiAqLywgIWVycm9yQ29tcG9uZW50IC8qIGRvIG5vdCB0aHJvdyBpbiBkZXYgaWYgdXNlciBwcm92aWRlZCBlcnJvciBjb21wb25lbnQgKi8pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8vIHN1c3BlbnNlLWNvbnRyb2xsZWQgb3IgU1NSLlxuICAgICAgICAgICAgaWYgKChzdXNwZW5zaWJsZSAmJiBpbnN0YW5jZS5zdXNwZW5zZSkgfHxcbiAgICAgICAgICAgICAgICAoaXNJblNTUkNvbXBvbmVudFNldHVwKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBsb2FkKClcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oY29tcCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoKSA9PiBjcmVhdGVJbm5lckNvbXAoY29tcCwgaW5zdGFuY2UpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgICAgICAgICAgICBvbkVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoKSA9PiBlcnJvckNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBjcmVhdGVWTm9kZShlcnJvckNvbXBvbmVudCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsb2FkZWQgPSByZWYoZmFsc2UpO1xuICAgICAgICAgICAgY29uc3QgZXJyb3IgPSByZWYoKTtcbiAgICAgICAgICAgIGNvbnN0IGRlbGF5ZWQgPSByZWYoISFkZWxheSk7XG4gICAgICAgICAgICBpZiAoZGVsYXkpIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZGVsYXllZC52YWx1ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH0sIGRlbGF5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aW1lb3V0ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFsb2FkZWQudmFsdWUgJiYgIWVycm9yLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlcnIgPSBuZXcgRXJyb3IoYEFzeW5jIGNvbXBvbmVudCB0aW1lZCBvdXQgYWZ0ZXIgJHt0aW1lb3V0fW1zLmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgb25FcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IudmFsdWUgPSBlcnI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCB0aW1lb3V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxvYWQoKVxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBsb2FkZWQudmFsdWUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmIChpbnN0YW5jZS5wYXJlbnQgJiYgaXNLZWVwQWxpdmUoaW5zdGFuY2UucGFyZW50LnZub2RlKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBwYXJlbnQgaXMga2VlcC1hbGl2ZSwgZm9yY2UgdXBkYXRlIHNvIHRoZSBsb2FkZWQgY29tcG9uZW50J3NcbiAgICAgICAgICAgICAgICAgICAgLy8gbmFtZSBpcyB0YWtlbiBpbnRvIGFjY291bnRcbiAgICAgICAgICAgICAgICAgICAgcXVldWVKb2IoaW5zdGFuY2UucGFyZW50LnVwZGF0ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICAgICAgICBvbkVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgZXJyb3IudmFsdWUgPSBlcnI7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGxvYWRlZC52YWx1ZSAmJiByZXNvbHZlZENvbXApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUlubmVyQ29tcChyZXNvbHZlZENvbXAsIGluc3RhbmNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZXJyb3IudmFsdWUgJiYgZXJyb3JDb21wb25lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVZOb2RlKGVycm9yQ29tcG9uZW50LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGxvYWRpbmdDb21wb25lbnQgJiYgIWRlbGF5ZWQudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVZOb2RlKGxvYWRpbmdDb21wb25lbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUlubmVyQ29tcChjb21wLCBwYXJlbnQpIHtcbiAgICBjb25zdCB7IHJlZiwgcHJvcHMsIGNoaWxkcmVuLCBjZSB9ID0gcGFyZW50LnZub2RlO1xuICAgIGNvbnN0IHZub2RlID0gY3JlYXRlVk5vZGUoY29tcCwgcHJvcHMsIGNoaWxkcmVuKTtcbiAgICAvLyBlbnN1cmUgaW5uZXIgY29tcG9uZW50IGluaGVyaXRzIHRoZSBhc3luYyB3cmFwcGVyJ3MgcmVmIG93bmVyXG4gICAgdm5vZGUucmVmID0gcmVmO1xuICAgIC8vIHBhc3MgdGhlIGN1c3RvbSBlbGVtZW50IGNhbGxiYWNrIG9uIHRvIHRoZSBpbm5lciBjb21wXG4gICAgLy8gYW5kIHJlbW92ZSBpdCBmcm9tIHRoZSBhc3luYyB3cmFwcGVyXG4gICAgdm5vZGUuY2UgPSBjZTtcbiAgICBkZWxldGUgcGFyZW50LnZub2RlLmNlO1xuICAgIHJldHVybiB2bm9kZTtcbn1cblxuY29uc3QgaXNLZWVwQWxpdmUgPSAodm5vZGUpID0+IHZub2RlLnR5cGUuX19pc0tlZXBBbGl2ZTtcbmNvbnN0IEtlZXBBbGl2ZUltcGwgPSB7XG4gICAgbmFtZTogYEtlZXBBbGl2ZWAsXG4gICAgLy8gTWFya2VyIGZvciBzcGVjaWFsIGhhbmRsaW5nIGluc2lkZSB0aGUgcmVuZGVyZXIuIFdlIGFyZSBub3QgdXNpbmcgYSA9PT1cbiAgICAvLyBjaGVjayBkaXJlY3RseSBvbiBLZWVwQWxpdmUgaW4gdGhlIHJlbmRlcmVyLCBiZWNhdXNlIGltcG9ydGluZyBpdCBkaXJlY3RseVxuICAgIC8vIHdvdWxkIHByZXZlbnQgaXQgZnJvbSBiZWluZyB0cmVlLXNoYWtlbi5cbiAgICBfX2lzS2VlcEFsaXZlOiB0cnVlLFxuICAgIHByb3BzOiB7XG4gICAgICAgIGluY2x1ZGU6IFtTdHJpbmcsIFJlZ0V4cCwgQXJyYXldLFxuICAgICAgICBleGNsdWRlOiBbU3RyaW5nLCBSZWdFeHAsIEFycmF5XSxcbiAgICAgICAgbWF4OiBbU3RyaW5nLCBOdW1iZXJdXG4gICAgfSxcbiAgICBzZXR1cChwcm9wcywgeyBzbG90cyB9KSB7XG4gICAgICAgIGNvbnN0IGluc3RhbmNlID0gZ2V0Q3VycmVudEluc3RhbmNlKCk7XG4gICAgICAgIC8vIEtlZXBBbGl2ZSBjb21tdW5pY2F0ZXMgd2l0aCB0aGUgaW5zdGFudGlhdGVkIHJlbmRlcmVyIHZpYSB0aGVcbiAgICAgICAgLy8gY3R4IHdoZXJlIHRoZSByZW5kZXJlciBwYXNzZXMgaW4gaXRzIGludGVybmFscyxcbiAgICAgICAgLy8gYW5kIHRoZSBLZWVwQWxpdmUgaW5zdGFuY2UgZXhwb3NlcyBhY3RpdmF0ZS9kZWFjdGl2YXRlIGltcGxlbWVudGF0aW9ucy5cbiAgICAgICAgLy8gVGhlIHdob2xlIHBvaW50IG9mIHRoaXMgaXMgdG8gYXZvaWQgaW1wb3J0aW5nIEtlZXBBbGl2ZSBkaXJlY3RseSBpbiB0aGVcbiAgICAgICAgLy8gcmVuZGVyZXIgdG8gZmFjaWxpdGF0ZSB0cmVlLXNoYWtpbmcuXG4gICAgICAgIGNvbnN0IHNoYXJlZENvbnRleHQgPSBpbnN0YW5jZS5jdHg7XG4gICAgICAgIC8vIGlmIHRoZSBpbnRlcm5hbCByZW5kZXJlciBpcyBub3QgcmVnaXN0ZXJlZCwgaXQgaW5kaWNhdGVzIHRoYXQgdGhpcyBpcyBzZXJ2ZXItc2lkZSByZW5kZXJpbmcsXG4gICAgICAgIC8vIGZvciBLZWVwQWxpdmUsIHdlIGp1c3QgbmVlZCB0byByZW5kZXIgaXRzIGNoaWxkcmVuXG4gICAgICAgIGlmICghc2hhcmVkQ29udGV4dC5yZW5kZXJlcikge1xuICAgICAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZHJlbiA9IHNsb3RzLmRlZmF1bHQgJiYgc2xvdHMuZGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjaGlsZHJlbiAmJiBjaGlsZHJlbi5sZW5ndGggPT09IDEgPyBjaGlsZHJlblswXSA6IGNoaWxkcmVuO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjYWNoZSA9IG5ldyBNYXAoKTtcbiAgICAgICAgY29uc3Qga2V5cyA9IG5ldyBTZXQoKTtcbiAgICAgICAgbGV0IGN1cnJlbnQgPSBudWxsO1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xuICAgICAgICAgICAgaW5zdGFuY2UuX192X2NhY2hlID0gY2FjaGU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyZW50U3VzcGVuc2UgPSBpbnN0YW5jZS5zdXNwZW5zZTtcbiAgICAgICAgY29uc3QgeyByZW5kZXJlcjogeyBwOiBwYXRjaCwgbTogbW92ZSwgdW06IF91bm1vdW50LCBvOiB7IGNyZWF0ZUVsZW1lbnQgfSB9IH0gPSBzaGFyZWRDb250ZXh0O1xuICAgICAgICBjb25zdCBzdG9yYWdlQ29udGFpbmVyID0gY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHNoYXJlZENvbnRleHQuYWN0aXZhdGUgPSAodm5vZGUsIGNvbnRhaW5lciwgYW5jaG9yLCBpc1NWRywgb3B0aW1pemVkKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IHZub2RlLmNvbXBvbmVudDtcbiAgICAgICAgICAgIG1vdmUodm5vZGUsIGNvbnRhaW5lciwgYW5jaG9yLCAwIC8qIE1vdmVUeXBlLkVOVEVSICovLCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICAgICAgICAvLyBpbiBjYXNlIHByb3BzIGhhdmUgY2hhbmdlZFxuICAgICAgICAgICAgcGF0Y2goaW5zdGFuY2Uudm5vZGUsIHZub2RlLCBjb250YWluZXIsIGFuY2hvciwgaW5zdGFuY2UsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgdm5vZGUuc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5pc0RlYWN0aXZhdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKGluc3RhbmNlLmEpIHtcbiAgICAgICAgICAgICAgICAgICAgaW52b2tlQXJyYXlGbnMoaW5zdGFuY2UuYSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHZub2RlSG9vayA9IHZub2RlLnByb3BzICYmIHZub2RlLnByb3BzLm9uVm5vZGVNb3VudGVkO1xuICAgICAgICAgICAgICAgIGlmICh2bm9kZUhvb2spIHtcbiAgICAgICAgICAgICAgICAgICAgaW52b2tlVk5vZGVIb29rKHZub2RlSG9vaywgaW5zdGFuY2UucGFyZW50LCB2bm9kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgcGFyZW50U3VzcGVuc2UpO1xuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pIHtcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgY29tcG9uZW50cyB0cmVlXG4gICAgICAgICAgICAgICAgZGV2dG9vbHNDb21wb25lbnRBZGRlZChpbnN0YW5jZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHNoYXJlZENvbnRleHQuZGVhY3RpdmF0ZSA9ICh2bm9kZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaW5zdGFuY2UgPSB2bm9kZS5jb21wb25lbnQ7XG4gICAgICAgICAgICBtb3ZlKHZub2RlLCBzdG9yYWdlQ29udGFpbmVyLCBudWxsLCAxIC8qIE1vdmVUeXBlLkxFQVZFICovLCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICAgICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpbnN0YW5jZS5kYSkge1xuICAgICAgICAgICAgICAgICAgICBpbnZva2VBcnJheUZucyhpbnN0YW5jZS5kYSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHZub2RlSG9vayA9IHZub2RlLnByb3BzICYmIHZub2RlLnByb3BzLm9uVm5vZGVVbm1vdW50ZWQ7XG4gICAgICAgICAgICAgICAgaWYgKHZub2RlSG9vaykge1xuICAgICAgICAgICAgICAgICAgICBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBpbnN0YW5jZS5wYXJlbnQsIHZub2RlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaW5zdGFuY2UuaXNEZWFjdGl2YXRlZCA9IHRydWU7XG4gICAgICAgICAgICB9LCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBjb21wb25lbnRzIHRyZWVcbiAgICAgICAgICAgICAgICBkZXZ0b29sc0NvbXBvbmVudEFkZGVkKGluc3RhbmNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgZnVuY3Rpb24gdW5tb3VudCh2bm9kZSkge1xuICAgICAgICAgICAgLy8gcmVzZXQgdGhlIHNoYXBlRmxhZyBzbyBpdCBjYW4gYmUgcHJvcGVybHkgdW5tb3VudGVkXG4gICAgICAgICAgICByZXNldFNoYXBlRmxhZyh2bm9kZSk7XG4gICAgICAgICAgICBfdW5tb3VudCh2bm9kZSwgaW5zdGFuY2UsIHBhcmVudFN1c3BlbnNlLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBwcnVuZUNhY2hlKGZpbHRlcikge1xuICAgICAgICAgICAgY2FjaGUuZm9yRWFjaCgodm5vZGUsIGtleSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBnZXRDb21wb25lbnROYW1lKHZub2RlLnR5cGUpO1xuICAgICAgICAgICAgICAgIGlmIChuYW1lICYmICghZmlsdGVyIHx8ICFmaWx0ZXIobmFtZSkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHBydW5lQ2FjaGVFbnRyeShrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIHBydW5lQ2FjaGVFbnRyeShrZXkpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlZCA9IGNhY2hlLmdldChrZXkpO1xuICAgICAgICAgICAgaWYgKCFjdXJyZW50IHx8IGNhY2hlZC50eXBlICE9PSBjdXJyZW50LnR5cGUpIHtcbiAgICAgICAgICAgICAgICB1bm1vdW50KGNhY2hlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgLy8gY3VycmVudCBhY3RpdmUgaW5zdGFuY2Ugc2hvdWxkIG5vIGxvbmdlciBiZSBrZXB0LWFsaXZlLlxuICAgICAgICAgICAgICAgIC8vIHdlIGNhbid0IHVubW91bnQgaXQgbm93IGJ1dCBpdCBtaWdodCBiZSBsYXRlciwgc28gcmVzZXQgaXRzIGZsYWcgbm93LlxuICAgICAgICAgICAgICAgIHJlc2V0U2hhcGVGbGFnKGN1cnJlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FjaGUuZGVsZXRlKGtleSk7XG4gICAgICAgICAgICBrZXlzLmRlbGV0ZShrZXkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHBydW5lIGNhY2hlIG9uIGluY2x1ZGUvZXhjbHVkZSBwcm9wIGNoYW5nZVxuICAgICAgICB3YXRjaCgoKSA9PiBbcHJvcHMuaW5jbHVkZSwgcHJvcHMuZXhjbHVkZV0sIChbaW5jbHVkZSwgZXhjbHVkZV0pID0+IHtcbiAgICAgICAgICAgIGluY2x1ZGUgJiYgcHJ1bmVDYWNoZShuYW1lID0+IG1hdGNoZXMoaW5jbHVkZSwgbmFtZSkpO1xuICAgICAgICAgICAgZXhjbHVkZSAmJiBwcnVuZUNhY2hlKG5hbWUgPT4gIW1hdGNoZXMoZXhjbHVkZSwgbmFtZSkpO1xuICAgICAgICB9LCBcbiAgICAgICAgLy8gcHJ1bmUgcG9zdC1yZW5kZXIgYWZ0ZXIgYGN1cnJlbnRgIGhhcyBiZWVuIHVwZGF0ZWRcbiAgICAgICAgeyBmbHVzaDogJ3Bvc3QnLCBkZWVwOiB0cnVlIH0pO1xuICAgICAgICAvLyBjYWNoZSBzdWIgdHJlZSBhZnRlciByZW5kZXJcbiAgICAgICAgbGV0IHBlbmRpbmdDYWNoZUtleSA9IG51bGw7XG4gICAgICAgIGNvbnN0IGNhY2hlU3VidHJlZSA9ICgpID0+IHtcbiAgICAgICAgICAgIC8vIGZpeCAjMTYyMSwgdGhlIHBlbmRpbmdDYWNoZUtleSBjb3VsZCBiZSAwXG4gICAgICAgICAgICBpZiAocGVuZGluZ0NhY2hlS2V5ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjYWNoZS5zZXQocGVuZGluZ0NhY2hlS2V5LCBnZXRJbm5lckNoaWxkKGluc3RhbmNlLnN1YlRyZWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgb25Nb3VudGVkKGNhY2hlU3VidHJlZSk7XG4gICAgICAgIG9uVXBkYXRlZChjYWNoZVN1YnRyZWUpO1xuICAgICAgICBvbkJlZm9yZVVubW91bnQoKCkgPT4ge1xuICAgICAgICAgICAgY2FjaGUuZm9yRWFjaChjYWNoZWQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgc3ViVHJlZSwgc3VzcGVuc2UgfSA9IGluc3RhbmNlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHZub2RlID0gZ2V0SW5uZXJDaGlsZChzdWJUcmVlKTtcbiAgICAgICAgICAgICAgICBpZiAoY2FjaGVkLnR5cGUgPT09IHZub2RlLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY3VycmVudCBpbnN0YW5jZSB3aWxsIGJlIHVubW91bnRlZCBhcyBwYXJ0IG9mIGtlZXAtYWxpdmUncyB1bm1vdW50XG4gICAgICAgICAgICAgICAgICAgIHJlc2V0U2hhcGVGbGFnKHZub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gYnV0IGludm9rZSBpdHMgZGVhY3RpdmF0ZWQgaG9vayBoZXJlXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhID0gdm5vZGUuY29tcG9uZW50LmRhO1xuICAgICAgICAgICAgICAgICAgICBkYSAmJiBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoZGEsIHN1c3BlbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB1bm1vdW50KGNhY2hlZCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICBwZW5kaW5nQ2FjaGVLZXkgPSBudWxsO1xuICAgICAgICAgICAgaWYgKCFzbG90cy5kZWZhdWx0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBjaGlsZHJlbiA9IHNsb3RzLmRlZmF1bHQoKTtcbiAgICAgICAgICAgIGNvbnN0IHJhd1ZOb2RlID0gY2hpbGRyZW5bMF07XG4gICAgICAgICAgICBpZiAoY2hpbGRyZW4ubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgd2FybihgS2VlcEFsaXZlIHNob3VsZCBjb250YWluIGV4YWN0bHkgb25lIGNvbXBvbmVudCBjaGlsZC5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY3VycmVudCA9IG51bGw7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoaWxkcmVuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIWlzVk5vZGUocmF3Vk5vZGUpIHx8XG4gICAgICAgICAgICAgICAgKCEocmF3Vk5vZGUuc2hhcGVGbGFnICYgNCAvKiBTaGFwZUZsYWdzLlNUQVRFRlVMX0NPTVBPTkVOVCAqLykgJiZcbiAgICAgICAgICAgICAgICAgICAgIShyYXdWTm9kZS5zaGFwZUZsYWcgJiAxMjggLyogU2hhcGVGbGFncy5TVVNQRU5TRSAqLykpKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudCA9IG51bGw7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJhd1ZOb2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHZub2RlID0gZ2V0SW5uZXJDaGlsZChyYXdWTm9kZSk7XG4gICAgICAgICAgICBjb25zdCBjb21wID0gdm5vZGUudHlwZTtcbiAgICAgICAgICAgIC8vIGZvciBhc3luYyBjb21wb25lbnRzLCBuYW1lIGNoZWNrIHNob3VsZCBiZSBiYXNlZCBpbiBpdHMgbG9hZGVkXG4gICAgICAgICAgICAvLyBpbm5lciBjb21wb25lbnQgaWYgYXZhaWxhYmxlXG4gICAgICAgICAgICBjb25zdCBuYW1lID0gZ2V0Q29tcG9uZW50TmFtZShpc0FzeW5jV3JhcHBlcih2bm9kZSlcbiAgICAgICAgICAgICAgICA/IHZub2RlLnR5cGUuX19hc3luY1Jlc29sdmVkIHx8IHt9XG4gICAgICAgICAgICAgICAgOiBjb21wKTtcbiAgICAgICAgICAgIGNvbnN0IHsgaW5jbHVkZSwgZXhjbHVkZSwgbWF4IH0gPSBwcm9wcztcbiAgICAgICAgICAgIGlmICgoaW5jbHVkZSAmJiAoIW5hbWUgfHwgIW1hdGNoZXMoaW5jbHVkZSwgbmFtZSkpKSB8fFxuICAgICAgICAgICAgICAgIChleGNsdWRlICYmIG5hbWUgJiYgbWF0Y2hlcyhleGNsdWRlLCBuYW1lKSkpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50ID0gdm5vZGU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJhd1ZOb2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qga2V5ID0gdm5vZGUua2V5ID09IG51bGwgPyBjb21wIDogdm5vZGUua2V5O1xuICAgICAgICAgICAgY29uc3QgY2FjaGVkVk5vZGUgPSBjYWNoZS5nZXQoa2V5KTtcbiAgICAgICAgICAgIC8vIGNsb25lIHZub2RlIGlmIGl0J3MgcmV1c2VkIGJlY2F1c2Ugd2UgYXJlIGdvaW5nIHRvIG11dGF0ZSBpdFxuICAgICAgICAgICAgaWYgKHZub2RlLmVsKSB7XG4gICAgICAgICAgICAgICAgdm5vZGUgPSBjbG9uZVZOb2RlKHZub2RlKTtcbiAgICAgICAgICAgICAgICBpZiAocmF3Vk5vZGUuc2hhcGVGbGFnICYgMTI4IC8qIFNoYXBlRmxhZ3MuU1VTUEVOU0UgKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgcmF3Vk5vZGUuc3NDb250ZW50ID0gdm5vZGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gIzE1MTMgaXQncyBwb3NzaWJsZSBmb3IgdGhlIHJldHVybmVkIHZub2RlIHRvIGJlIGNsb25lZCBkdWUgdG8gYXR0clxuICAgICAgICAgICAgLy8gZmFsbHRocm91Z2ggb3Igc2NvcGVJZCwgc28gdGhlIHZub2RlIGhlcmUgbWF5IG5vdCBiZSB0aGUgZmluYWwgdm5vZGVcbiAgICAgICAgICAgIC8vIHRoYXQgaXMgbW91bnRlZC4gSW5zdGVhZCBvZiBjYWNoaW5nIGl0IGRpcmVjdGx5LCB3ZSBzdG9yZSB0aGUgcGVuZGluZ1xuICAgICAgICAgICAgLy8ga2V5IGFuZCBjYWNoZSBgaW5zdGFuY2Uuc3ViVHJlZWAgKHRoZSBub3JtYWxpemVkIHZub2RlKSBpblxuICAgICAgICAgICAgLy8gYmVmb3JlTW91bnQvYmVmb3JlVXBkYXRlIGhvb2tzLlxuICAgICAgICAgICAgcGVuZGluZ0NhY2hlS2V5ID0ga2V5O1xuICAgICAgICAgICAgaWYgKGNhY2hlZFZOb2RlKSB7XG4gICAgICAgICAgICAgICAgLy8gY29weSBvdmVyIG1vdW50ZWQgc3RhdGVcbiAgICAgICAgICAgICAgICB2bm9kZS5lbCA9IGNhY2hlZFZOb2RlLmVsO1xuICAgICAgICAgICAgICAgIHZub2RlLmNvbXBvbmVudCA9IGNhY2hlZFZOb2RlLmNvbXBvbmVudDtcbiAgICAgICAgICAgICAgICBpZiAodm5vZGUudHJhbnNpdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAvLyByZWN1cnNpdmVseSB1cGRhdGUgdHJhbnNpdGlvbiBob29rcyBvbiBzdWJUcmVlXG4gICAgICAgICAgICAgICAgICAgIHNldFRyYW5zaXRpb25Ib29rcyh2bm9kZSwgdm5vZGUudHJhbnNpdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGF2b2lkIHZub2RlIGJlaW5nIG1vdW50ZWQgYXMgZnJlc2hcbiAgICAgICAgICAgICAgICB2bm9kZS5zaGFwZUZsYWcgfD0gNTEyIC8qIFNoYXBlRmxhZ3MuQ09NUE9ORU5UX0tFUFRfQUxJVkUgKi87XG4gICAgICAgICAgICAgICAgLy8gbWFrZSB0aGlzIGtleSB0aGUgZnJlc2hlc3RcbiAgICAgICAgICAgICAgICBrZXlzLmRlbGV0ZShrZXkpO1xuICAgICAgICAgICAgICAgIGtleXMuYWRkKGtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBrZXlzLmFkZChrZXkpO1xuICAgICAgICAgICAgICAgIC8vIHBydW5lIG9sZGVzdCBlbnRyeVxuICAgICAgICAgICAgICAgIGlmIChtYXggJiYga2V5cy5zaXplID4gcGFyc2VJbnQobWF4LCAxMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJ1bmVDYWNoZUVudHJ5KGtleXMudmFsdWVzKCkubmV4dCgpLnZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBhdm9pZCB2bm9kZSBiZWluZyB1bm1vdW50ZWRcbiAgICAgICAgICAgIHZub2RlLnNoYXBlRmxhZyB8PSAyNTYgLyogU2hhcGVGbGFncy5DT01QT05FTlRfU0hPVUxEX0tFRVBfQUxJVkUgKi87XG4gICAgICAgICAgICBjdXJyZW50ID0gdm5vZGU7XG4gICAgICAgICAgICByZXR1cm4gaXNTdXNwZW5zZShyYXdWTm9kZS50eXBlKSA/IHJhd1ZOb2RlIDogdm5vZGU7XG4gICAgICAgIH07XG4gICAgfVxufTtcbi8vIGV4cG9ydCB0aGUgcHVibGljIHR5cGUgZm9yIGgvdHN4IGluZmVyZW5jZVxuLy8gYWxzbyB0byBhdm9pZCBpbmxpbmUgaW1wb3J0KCkgaW4gZ2VuZXJhdGVkIGQudHMgZmlsZXNcbmNvbnN0IEtlZXBBbGl2ZSA9IEtlZXBBbGl2ZUltcGw7XG5mdW5jdGlvbiBtYXRjaGVzKHBhdHRlcm4sIG5hbWUpIHtcbiAgICBpZiAoaXNBcnJheShwYXR0ZXJuKSkge1xuICAgICAgICByZXR1cm4gcGF0dGVybi5zb21lKChwKSA9PiBtYXRjaGVzKHAsIG5hbWUpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNTdHJpbmcocGF0dGVybikpIHtcbiAgICAgICAgcmV0dXJuIHBhdHRlcm4uc3BsaXQoJywnKS5pbmNsdWRlcyhuYW1lKTtcbiAgICB9XG4gICAgZWxzZSBpZiAocGF0dGVybi50ZXN0KSB7XG4gICAgICAgIHJldHVybiBwYXR0ZXJuLnRlc3QobmFtZSk7XG4gICAgfVxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gb25BY3RpdmF0ZWQoaG9vaywgdGFyZ2V0KSB7XG4gICAgcmVnaXN0ZXJLZWVwQWxpdmVIb29rKGhvb2ssIFwiYVwiIC8qIExpZmVjeWNsZUhvb2tzLkFDVElWQVRFRCAqLywgdGFyZ2V0KTtcbn1cbmZ1bmN0aW9uIG9uRGVhY3RpdmF0ZWQoaG9vaywgdGFyZ2V0KSB7XG4gICAgcmVnaXN0ZXJLZWVwQWxpdmVIb29rKGhvb2ssIFwiZGFcIiAvKiBMaWZlY3ljbGVIb29rcy5ERUFDVElWQVRFRCAqLywgdGFyZ2V0KTtcbn1cbmZ1bmN0aW9uIHJlZ2lzdGVyS2VlcEFsaXZlSG9vayhob29rLCB0eXBlLCB0YXJnZXQgPSBjdXJyZW50SW5zdGFuY2UpIHtcbiAgICAvLyBjYWNoZSB0aGUgZGVhY3RpdmF0ZSBicmFuY2ggY2hlY2sgd3JhcHBlciBmb3IgaW5qZWN0ZWQgaG9va3Mgc28gdGhlIHNhbWVcbiAgICAvLyBob29rIGNhbiBiZSBwcm9wZXJseSBkZWR1cGVkIGJ5IHRoZSBzY2hlZHVsZXIuIFwiX193ZGNcIiBzdGFuZHMgZm9yIFwid2l0aFxuICAgIC8vIGRlYWN0aXZhdGlvbiBjaGVja1wiLlxuICAgIGNvbnN0IHdyYXBwZWRIb29rID0gaG9vay5fX3dkYyB8fFxuICAgICAgICAoaG9vay5fX3dkYyA9ICgpID0+IHtcbiAgICAgICAgICAgIC8vIG9ubHkgZmlyZSB0aGUgaG9vayBpZiB0aGUgdGFyZ2V0IGluc3RhbmNlIGlzIE5PVCBpbiBhIGRlYWN0aXZhdGVkIGJyYW5jaC5cbiAgICAgICAgICAgIGxldCBjdXJyZW50ID0gdGFyZ2V0O1xuICAgICAgICAgICAgd2hpbGUgKGN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudC5pc0RlYWN0aXZhdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQucGFyZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGhvb2soKTtcbiAgICAgICAgfSk7XG4gICAgaW5qZWN0SG9vayh0eXBlLCB3cmFwcGVkSG9vaywgdGFyZ2V0KTtcbiAgICAvLyBJbiBhZGRpdGlvbiB0byByZWdpc3RlcmluZyBpdCBvbiB0aGUgdGFyZ2V0IGluc3RhbmNlLCB3ZSB3YWxrIHVwIHRoZSBwYXJlbnRcbiAgICAvLyBjaGFpbiBhbmQgcmVnaXN0ZXIgaXQgb24gYWxsIGFuY2VzdG9yIGluc3RhbmNlcyB0aGF0IGFyZSBrZWVwLWFsaXZlIHJvb3RzLlxuICAgIC8vIFRoaXMgYXZvaWRzIHRoZSBuZWVkIHRvIHdhbGsgdGhlIGVudGlyZSBjb21wb25lbnQgdHJlZSB3aGVuIGludm9raW5nIHRoZXNlXG4gICAgLy8gaG9va3MsIGFuZCBtb3JlIGltcG9ydGFudGx5LCBhdm9pZHMgdGhlIG5lZWQgdG8gdHJhY2sgY2hpbGQgY29tcG9uZW50cyBpblxuICAgIC8vIGFycmF5cy5cbiAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgIGxldCBjdXJyZW50ID0gdGFyZ2V0LnBhcmVudDtcbiAgICAgICAgd2hpbGUgKGN1cnJlbnQgJiYgY3VycmVudC5wYXJlbnQpIHtcbiAgICAgICAgICAgIGlmIChpc0tlZXBBbGl2ZShjdXJyZW50LnBhcmVudC52bm9kZSkpIHtcbiAgICAgICAgICAgICAgICBpbmplY3RUb0tlZXBBbGl2ZVJvb3Qod3JhcHBlZEhvb2ssIHR5cGUsIHRhcmdldCwgY3VycmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5wYXJlbnQ7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBpbmplY3RUb0tlZXBBbGl2ZVJvb3QoaG9vaywgdHlwZSwgdGFyZ2V0LCBrZWVwQWxpdmVSb290KSB7XG4gICAgLy8gaW5qZWN0SG9vayB3cmFwcyB0aGUgb3JpZ2luYWwgZm9yIGVycm9yIGhhbmRsaW5nLCBzbyBtYWtlIHN1cmUgdG8gcmVtb3ZlXG4gICAgLy8gdGhlIHdyYXBwZWQgdmVyc2lvbi5cbiAgICBjb25zdCBpbmplY3RlZCA9IGluamVjdEhvb2sodHlwZSwgaG9vaywga2VlcEFsaXZlUm9vdCwgdHJ1ZSAvKiBwcmVwZW5kICovKTtcbiAgICBvblVubW91bnRlZCgoKSA9PiB7XG4gICAgICAgIHJlbW92ZShrZWVwQWxpdmVSb290W3R5cGVdLCBpbmplY3RlZCk7XG4gICAgfSwgdGFyZ2V0KTtcbn1cbmZ1bmN0aW9uIHJlc2V0U2hhcGVGbGFnKHZub2RlKSB7XG4gICAgLy8gYml0d2lzZSBvcGVyYXRpb25zIHRvIHJlbW92ZSBrZWVwIGFsaXZlIGZsYWdzXG4gICAgdm5vZGUuc2hhcGVGbGFnICY9IH4yNTYgLyogU2hhcGVGbGFncy5DT01QT05FTlRfU0hPVUxEX0tFRVBfQUxJVkUgKi87XG4gICAgdm5vZGUuc2hhcGVGbGFnICY9IH41MTIgLyogU2hhcGVGbGFncy5DT01QT05FTlRfS0VQVF9BTElWRSAqLztcbn1cbmZ1bmN0aW9uIGdldElubmVyQ2hpbGQodm5vZGUpIHtcbiAgICByZXR1cm4gdm5vZGUuc2hhcGVGbGFnICYgMTI4IC8qIFNoYXBlRmxhZ3MuU1VTUEVOU0UgKi8gPyB2bm9kZS5zc0NvbnRlbnQgOiB2bm9kZTtcbn1cblxuZnVuY3Rpb24gaW5qZWN0SG9vayh0eXBlLCBob29rLCB0YXJnZXQgPSBjdXJyZW50SW5zdGFuY2UsIHByZXBlbmQgPSBmYWxzZSkge1xuICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgY29uc3QgaG9va3MgPSB0YXJnZXRbdHlwZV0gfHwgKHRhcmdldFt0eXBlXSA9IFtdKTtcbiAgICAgICAgLy8gY2FjaGUgdGhlIGVycm9yIGhhbmRsaW5nIHdyYXBwZXIgZm9yIGluamVjdGVkIGhvb2tzIHNvIHRoZSBzYW1lIGhvb2tcbiAgICAgICAgLy8gY2FuIGJlIHByb3Blcmx5IGRlZHVwZWQgYnkgdGhlIHNjaGVkdWxlci4gXCJfX3dlaFwiIHN0YW5kcyBmb3IgXCJ3aXRoIGVycm9yXG4gICAgICAgIC8vIGhhbmRsaW5nXCIuXG4gICAgICAgIGNvbnN0IHdyYXBwZWRIb29rID0gaG9vay5fX3dlaCB8fFxuICAgICAgICAgICAgKGhvb2suX193ZWggPSAoLi4uYXJncykgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0YXJnZXQuaXNVbm1vdW50ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBkaXNhYmxlIHRyYWNraW5nIGluc2lkZSBhbGwgbGlmZWN5Y2xlIGhvb2tzXG4gICAgICAgICAgICAgICAgLy8gc2luY2UgdGhleSBjYW4gcG90ZW50aWFsbHkgYmUgY2FsbGVkIGluc2lkZSBlZmZlY3RzLlxuICAgICAgICAgICAgICAgIHBhdXNlVHJhY2tpbmcoKTtcbiAgICAgICAgICAgICAgICAvLyBTZXQgY3VycmVudEluc3RhbmNlIGR1cmluZyBob29rIGludm9jYXRpb24uXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBhc3N1bWVzIHRoZSBob29rIGRvZXMgbm90IHN5bmNocm9ub3VzbHkgdHJpZ2dlciBvdGhlciBob29rcywgd2hpY2hcbiAgICAgICAgICAgICAgICAvLyBjYW4gb25seSBiZSBmYWxzZSB3aGVuIHRoZSB1c2VyIGRvZXMgc29tZXRoaW5nIHJlYWxseSBmdW5reS5cbiAgICAgICAgICAgICAgICBzZXRDdXJyZW50SW5zdGFuY2UodGFyZ2V0KTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZyhob29rLCB0YXJnZXQsIHR5cGUsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIHVuc2V0Q3VycmVudEluc3RhbmNlKCk7XG4gICAgICAgICAgICAgICAgcmVzZXRUcmFja2luZygpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgaWYgKHByZXBlbmQpIHtcbiAgICAgICAgICAgIGhvb2tzLnVuc2hpZnQod3JhcHBlZEhvb2spO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaG9va3MucHVzaCh3cmFwcGVkSG9vayk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyYXBwZWRIb29rO1xuICAgIH1cbiAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgY29uc3QgYXBpTmFtZSA9IHRvSGFuZGxlcktleShFcnJvclR5cGVTdHJpbmdzW3R5cGVdLnJlcGxhY2UoLyBob29rJC8sICcnKSk7XG4gICAgICAgIHdhcm4oYCR7YXBpTmFtZX0gaXMgY2FsbGVkIHdoZW4gdGhlcmUgaXMgbm8gYWN0aXZlIGNvbXBvbmVudCBpbnN0YW5jZSB0byBiZSBgICtcbiAgICAgICAgICAgIGBhc3NvY2lhdGVkIHdpdGguIGAgK1xuICAgICAgICAgICAgYExpZmVjeWNsZSBpbmplY3Rpb24gQVBJcyBjYW4gb25seSBiZSB1c2VkIGR1cmluZyBleGVjdXRpb24gb2Ygc2V0dXAoKS5gICtcbiAgICAgICAgICAgIChgIElmIHlvdSBhcmUgdXNpbmcgYXN5bmMgc2V0dXAoKSwgbWFrZSBzdXJlIHRvIHJlZ2lzdGVyIGxpZmVjeWNsZSBgICtcbiAgICAgICAgICAgICAgICAgICAgYGhvb2tzIGJlZm9yZSB0aGUgZmlyc3QgYXdhaXQgc3RhdGVtZW50LmBcbiAgICAgICAgICAgICAgICApKTtcbiAgICB9XG59XG5jb25zdCBjcmVhdGVIb29rID0gKGxpZmVjeWNsZSkgPT4gKGhvb2ssIHRhcmdldCA9IGN1cnJlbnRJbnN0YW5jZSkgPT4gXG4vLyBwb3N0LWNyZWF0ZSBsaWZlY3ljbGUgcmVnaXN0cmF0aW9ucyBhcmUgbm9vcHMgZHVyaW5nIFNTUiAoZXhjZXB0IGZvciBzZXJ2ZXJQcmVmZXRjaClcbighaXNJblNTUkNvbXBvbmVudFNldHVwIHx8IGxpZmVjeWNsZSA9PT0gXCJzcFwiIC8qIExpZmVjeWNsZUhvb2tzLlNFUlZFUl9QUkVGRVRDSCAqLykgJiZcbiAgICBpbmplY3RIb29rKGxpZmVjeWNsZSwgKC4uLmFyZ3MpID0+IGhvb2soLi4uYXJncyksIHRhcmdldCk7XG5jb25zdCBvbkJlZm9yZU1vdW50ID0gY3JlYXRlSG9vayhcImJtXCIgLyogTGlmZWN5Y2xlSG9va3MuQkVGT1JFX01PVU5UICovKTtcbmNvbnN0IG9uTW91bnRlZCA9IGNyZWF0ZUhvb2soXCJtXCIgLyogTGlmZWN5Y2xlSG9va3MuTU9VTlRFRCAqLyk7XG5jb25zdCBvbkJlZm9yZVVwZGF0ZSA9IGNyZWF0ZUhvb2soXCJidVwiIC8qIExpZmVjeWNsZUhvb2tzLkJFRk9SRV9VUERBVEUgKi8pO1xuY29uc3Qgb25VcGRhdGVkID0gY3JlYXRlSG9vayhcInVcIiAvKiBMaWZlY3ljbGVIb29rcy5VUERBVEVEICovKTtcbmNvbnN0IG9uQmVmb3JlVW5tb3VudCA9IGNyZWF0ZUhvb2soXCJidW1cIiAvKiBMaWZlY3ljbGVIb29rcy5CRUZPUkVfVU5NT1VOVCAqLyk7XG5jb25zdCBvblVubW91bnRlZCA9IGNyZWF0ZUhvb2soXCJ1bVwiIC8qIExpZmVjeWNsZUhvb2tzLlVOTU9VTlRFRCAqLyk7XG5jb25zdCBvblNlcnZlclByZWZldGNoID0gY3JlYXRlSG9vayhcInNwXCIgLyogTGlmZWN5Y2xlSG9va3MuU0VSVkVSX1BSRUZFVENIICovKTtcbmNvbnN0IG9uUmVuZGVyVHJpZ2dlcmVkID0gY3JlYXRlSG9vayhcInJ0Z1wiIC8qIExpZmVjeWNsZUhvb2tzLlJFTkRFUl9UUklHR0VSRUQgKi8pO1xuY29uc3Qgb25SZW5kZXJUcmFja2VkID0gY3JlYXRlSG9vayhcInJ0Y1wiIC8qIExpZmVjeWNsZUhvb2tzLlJFTkRFUl9UUkFDS0VEICovKTtcbmZ1bmN0aW9uIG9uRXJyb3JDYXB0dXJlZChob29rLCB0YXJnZXQgPSBjdXJyZW50SW5zdGFuY2UpIHtcbiAgICBpbmplY3RIb29rKFwiZWNcIiAvKiBMaWZlY3ljbGVIb29rcy5FUlJPUl9DQVBUVVJFRCAqLywgaG9vaywgdGFyZ2V0KTtcbn1cblxuLyoqXG5SdW50aW1lIGhlbHBlciBmb3IgYXBwbHlpbmcgZGlyZWN0aXZlcyB0byBhIHZub2RlLiBFeGFtcGxlIHVzYWdlOlxuXG5jb25zdCBjb21wID0gcmVzb2x2ZUNvbXBvbmVudCgnY29tcCcpXG5jb25zdCBmb28gPSByZXNvbHZlRGlyZWN0aXZlKCdmb28nKVxuY29uc3QgYmFyID0gcmVzb2x2ZURpcmVjdGl2ZSgnYmFyJylcblxucmV0dXJuIHdpdGhEaXJlY3RpdmVzKGgoY29tcCksIFtcbiAgW2ZvbywgdGhpcy54XSxcbiAgW2JhciwgdGhpcy55XVxuXSlcbiovXG5mdW5jdGlvbiB2YWxpZGF0ZURpcmVjdGl2ZU5hbWUobmFtZSkge1xuICAgIGlmIChpc0J1aWx0SW5EaXJlY3RpdmUobmFtZSkpIHtcbiAgICAgICAgd2FybignRG8gbm90IHVzZSBidWlsdC1pbiBkaXJlY3RpdmUgaWRzIGFzIGN1c3RvbSBkaXJlY3RpdmUgaWQ6ICcgKyBuYW1lKTtcbiAgICB9XG59XG4vKipcbiAqIEFkZHMgZGlyZWN0aXZlcyB0byBhIFZOb2RlLlxuICovXG5mdW5jdGlvbiB3aXRoRGlyZWN0aXZlcyh2bm9kZSwgZGlyZWN0aXZlcykge1xuICAgIGNvbnN0IGludGVybmFsSW5zdGFuY2UgPSBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2U7XG4gICAgaWYgKGludGVybmFsSW5zdGFuY2UgPT09IG51bGwpIHtcbiAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIHdhcm4oYHdpdGhEaXJlY3RpdmVzIGNhbiBvbmx5IGJlIHVzZWQgaW5zaWRlIHJlbmRlciBmdW5jdGlvbnMuYCk7XG4gICAgICAgIHJldHVybiB2bm9kZTtcbiAgICB9XG4gICAgY29uc3QgaW5zdGFuY2UgPSBnZXRFeHBvc2VQcm94eShpbnRlcm5hbEluc3RhbmNlKSB8fFxuICAgICAgICBpbnRlcm5hbEluc3RhbmNlLnByb3h5O1xuICAgIGNvbnN0IGJpbmRpbmdzID0gdm5vZGUuZGlycyB8fCAodm5vZGUuZGlycyA9IFtdKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRpcmVjdGl2ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IFtkaXIsIHZhbHVlLCBhcmcsIG1vZGlmaWVycyA9IEVNUFRZX09CSl0gPSBkaXJlY3RpdmVzW2ldO1xuICAgICAgICBpZiAoZGlyKSB7XG4gICAgICAgICAgICBpZiAoaXNGdW5jdGlvbihkaXIpKSB7XG4gICAgICAgICAgICAgICAgZGlyID0ge1xuICAgICAgICAgICAgICAgICAgICBtb3VudGVkOiBkaXIsXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZWQ6IGRpclxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGlyLmRlZXApIHtcbiAgICAgICAgICAgICAgICB0cmF2ZXJzZSh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBiaW5kaW5ncy5wdXNoKHtcbiAgICAgICAgICAgICAgICBkaXIsXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UsXG4gICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgb2xkVmFsdWU6IHZvaWQgMCxcbiAgICAgICAgICAgICAgICBhcmcsXG4gICAgICAgICAgICAgICAgbW9kaWZpZXJzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdm5vZGU7XG59XG5mdW5jdGlvbiBpbnZva2VEaXJlY3RpdmVIb29rKHZub2RlLCBwcmV2Vk5vZGUsIGluc3RhbmNlLCBuYW1lKSB7XG4gICAgY29uc3QgYmluZGluZ3MgPSB2bm9kZS5kaXJzO1xuICAgIGNvbnN0IG9sZEJpbmRpbmdzID0gcHJldlZOb2RlICYmIHByZXZWTm9kZS5kaXJzO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmluZGluZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgYmluZGluZyA9IGJpbmRpbmdzW2ldO1xuICAgICAgICBpZiAob2xkQmluZGluZ3MpIHtcbiAgICAgICAgICAgIGJpbmRpbmcub2xkVmFsdWUgPSBvbGRCaW5kaW5nc1tpXS52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgaG9vayA9IGJpbmRpbmcuZGlyW25hbWVdO1xuICAgICAgICBpZiAoaG9vaykge1xuICAgICAgICAgICAgLy8gZGlzYWJsZSB0cmFja2luZyBpbnNpZGUgYWxsIGxpZmVjeWNsZSBob29rc1xuICAgICAgICAgICAgLy8gc2luY2UgdGhleSBjYW4gcG90ZW50aWFsbHkgYmUgY2FsbGVkIGluc2lkZSBlZmZlY3RzLlxuICAgICAgICAgICAgcGF1c2VUcmFja2luZygpO1xuICAgICAgICAgICAgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoaG9vaywgaW5zdGFuY2UsIDggLyogRXJyb3JDb2Rlcy5ESVJFQ1RJVkVfSE9PSyAqLywgW1xuICAgICAgICAgICAgICAgIHZub2RlLmVsLFxuICAgICAgICAgICAgICAgIGJpbmRpbmcsXG4gICAgICAgICAgICAgICAgdm5vZGUsXG4gICAgICAgICAgICAgICAgcHJldlZOb2RlXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIHJlc2V0VHJhY2tpbmcoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuY29uc3QgQ09NUE9ORU5UUyA9ICdjb21wb25lbnRzJztcbmNvbnN0IERJUkVDVElWRVMgPSAnZGlyZWN0aXZlcyc7XG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHJlc29sdmVDb21wb25lbnQobmFtZSwgbWF5YmVTZWxmUmVmZXJlbmNlKSB7XG4gICAgcmV0dXJuIHJlc29sdmVBc3NldChDT01QT05FTlRTLCBuYW1lLCB0cnVlLCBtYXliZVNlbGZSZWZlcmVuY2UpIHx8IG5hbWU7XG59XG5jb25zdCBOVUxMX0RZTkFNSUNfQ09NUE9ORU5UID0gU3ltYm9sKCk7XG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHJlc29sdmVEeW5hbWljQ29tcG9uZW50KGNvbXBvbmVudCkge1xuICAgIGlmIChpc1N0cmluZyhjb21wb25lbnQpKSB7XG4gICAgICAgIHJldHVybiByZXNvbHZlQXNzZXQoQ09NUE9ORU5UUywgY29tcG9uZW50LCBmYWxzZSkgfHwgY29tcG9uZW50O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gaW52YWxpZCB0eXBlcyB3aWxsIGZhbGx0aHJvdWdoIHRvIGNyZWF0ZVZOb2RlIGFuZCByYWlzZSB3YXJuaW5nXG4gICAgICAgIHJldHVybiAoY29tcG9uZW50IHx8IE5VTExfRFlOQU1JQ19DT01QT05FTlQpO1xuICAgIH1cbn1cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcmVzb2x2ZURpcmVjdGl2ZShuYW1lKSB7XG4gICAgcmV0dXJuIHJlc29sdmVBc3NldChESVJFQ1RJVkVTLCBuYW1lKTtcbn1cbi8vIGltcGxlbWVudGF0aW9uXG5mdW5jdGlvbiByZXNvbHZlQXNzZXQodHlwZSwgbmFtZSwgd2Fybk1pc3NpbmcgPSB0cnVlLCBtYXliZVNlbGZSZWZlcmVuY2UgPSBmYWxzZSkge1xuICAgIGNvbnN0IGluc3RhbmNlID0gY3VycmVudFJlbmRlcmluZ0luc3RhbmNlIHx8IGN1cnJlbnRJbnN0YW5jZTtcbiAgICBpZiAoaW5zdGFuY2UpIHtcbiAgICAgICAgY29uc3QgQ29tcG9uZW50ID0gaW5zdGFuY2UudHlwZTtcbiAgICAgICAgLy8gZXhwbGljaXQgc2VsZiBuYW1lIGhhcyBoaWdoZXN0IHByaW9yaXR5XG4gICAgICAgIGlmICh0eXBlID09PSBDT01QT05FTlRTKSB7XG4gICAgICAgICAgICBjb25zdCBzZWxmTmFtZSA9IGdldENvbXBvbmVudE5hbWUoQ29tcG9uZW50LCBmYWxzZSAvKiBkbyBub3QgaW5jbHVkZSBpbmZlcnJlZCBuYW1lIHRvIGF2b2lkIGJyZWFraW5nIGV4aXN0aW5nIGNvZGUgKi8pO1xuICAgICAgICAgICAgaWYgKHNlbGZOYW1lICYmXG4gICAgICAgICAgICAgICAgKHNlbGZOYW1lID09PSBuYW1lIHx8XG4gICAgICAgICAgICAgICAgICAgIHNlbGZOYW1lID09PSBjYW1lbGl6ZShuYW1lKSB8fFxuICAgICAgICAgICAgICAgICAgICBzZWxmTmFtZSA9PT0gY2FwaXRhbGl6ZShjYW1lbGl6ZShuYW1lKSkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIENvbXBvbmVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXMgPSBcbiAgICAgICAgLy8gbG9jYWwgcmVnaXN0cmF0aW9uXG4gICAgICAgIC8vIGNoZWNrIGluc3RhbmNlW3R5cGVdIGZpcnN0IHdoaWNoIGlzIHJlc29sdmVkIGZvciBvcHRpb25zIEFQSVxuICAgICAgICByZXNvbHZlKGluc3RhbmNlW3R5cGVdIHx8IENvbXBvbmVudFt0eXBlXSwgbmFtZSkgfHxcbiAgICAgICAgICAgIC8vIGdsb2JhbCByZWdpc3RyYXRpb25cbiAgICAgICAgICAgIHJlc29sdmUoaW5zdGFuY2UuYXBwQ29udGV4dFt0eXBlXSwgbmFtZSk7XG4gICAgICAgIGlmICghcmVzICYmIG1heWJlU2VsZlJlZmVyZW5jZSkge1xuICAgICAgICAgICAgLy8gZmFsbGJhY2sgdG8gaW1wbGljaXQgc2VsZi1yZWZlcmVuY2VcbiAgICAgICAgICAgIHJldHVybiBDb21wb25lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiB3YXJuTWlzc2luZyAmJiAhcmVzKSB7XG4gICAgICAgICAgICBjb25zdCBleHRyYSA9IHR5cGUgPT09IENPTVBPTkVOVFNcbiAgICAgICAgICAgICAgICA/IGBcXG5JZiB0aGlzIGlzIGEgbmF0aXZlIGN1c3RvbSBlbGVtZW50LCBtYWtlIHN1cmUgdG8gZXhjbHVkZSBpdCBmcm9tIGAgK1xuICAgICAgICAgICAgICAgICAgICBgY29tcG9uZW50IHJlc29sdXRpb24gdmlhIGNvbXBpbGVyT3B0aW9ucy5pc0N1c3RvbUVsZW1lbnQuYFxuICAgICAgICAgICAgICAgIDogYGA7XG4gICAgICAgICAgICB3YXJuKGBGYWlsZWQgdG8gcmVzb2x2ZSAke3R5cGUuc2xpY2UoMCwgLTEpfTogJHtuYW1lfSR7ZXh0cmF9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG4gICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIHdhcm4oYHJlc29sdmUke2NhcGl0YWxpemUodHlwZS5zbGljZSgwLCAtMSkpfSBgICtcbiAgICAgICAgICAgIGBjYW4gb25seSBiZSB1c2VkIGluIHJlbmRlcigpIG9yIHNldHVwKCkuYCk7XG4gICAgfVxufVxuZnVuY3Rpb24gcmVzb2x2ZShyZWdpc3RyeSwgbmFtZSkge1xuICAgIHJldHVybiAocmVnaXN0cnkgJiZcbiAgICAgICAgKHJlZ2lzdHJ5W25hbWVdIHx8XG4gICAgICAgICAgICByZWdpc3RyeVtjYW1lbGl6ZShuYW1lKV0gfHxcbiAgICAgICAgICAgIHJlZ2lzdHJ5W2NhcGl0YWxpemUoY2FtZWxpemUobmFtZSkpXSkpO1xufVxuXG4vKipcbiAqIEFjdHVhbCBpbXBsZW1lbnRhdGlvblxuICovXG5mdW5jdGlvbiByZW5kZXJMaXN0KHNvdXJjZSwgcmVuZGVySXRlbSwgY2FjaGUsIGluZGV4KSB7XG4gICAgbGV0IHJldDtcbiAgICBjb25zdCBjYWNoZWQgPSAoY2FjaGUgJiYgY2FjaGVbaW5kZXhdKTtcbiAgICBpZiAoaXNBcnJheShzb3VyY2UpIHx8IGlzU3RyaW5nKHNvdXJjZSkpIHtcbiAgICAgICAgcmV0ID0gbmV3IEFycmF5KHNvdXJjZS5sZW5ndGgpO1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IHNvdXJjZS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIHJldFtpXSA9IHJlbmRlckl0ZW0oc291cmNlW2ldLCBpLCB1bmRlZmluZWQsIGNhY2hlZCAmJiBjYWNoZWRbaV0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBzb3VyY2UgPT09ICdudW1iZXInKSB7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIU51bWJlci5pc0ludGVnZXIoc291cmNlKSkge1xuICAgICAgICAgICAgd2FybihgVGhlIHYtZm9yIHJhbmdlIGV4cGVjdCBhbiBpbnRlZ2VyIHZhbHVlIGJ1dCBnb3QgJHtzb3VyY2V9LmApO1xuICAgICAgICB9XG4gICAgICAgIHJldCA9IG5ldyBBcnJheShzb3VyY2UpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNvdXJjZTsgaSsrKSB7XG4gICAgICAgICAgICByZXRbaV0gPSByZW5kZXJJdGVtKGkgKyAxLCBpLCB1bmRlZmluZWQsIGNhY2hlZCAmJiBjYWNoZWRbaV0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzT2JqZWN0KHNvdXJjZSkpIHtcbiAgICAgICAgaWYgKHNvdXJjZVtTeW1ib2wuaXRlcmF0b3JdKSB7XG4gICAgICAgICAgICByZXQgPSBBcnJheS5mcm9tKHNvdXJjZSwgKGl0ZW0sIGkpID0+IHJlbmRlckl0ZW0oaXRlbSwgaSwgdW5kZWZpbmVkLCBjYWNoZWQgJiYgY2FjaGVkW2ldKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoc291cmNlKTtcbiAgICAgICAgICAgIHJldCA9IG5ldyBBcnJheShrZXlzLmxlbmd0aCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgICAgICAgICByZXRbaV0gPSByZW5kZXJJdGVtKHNvdXJjZVtrZXldLCBrZXksIGksIGNhY2hlZCAmJiBjYWNoZWRbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXQgPSBbXTtcbiAgICB9XG4gICAgaWYgKGNhY2hlKSB7XG4gICAgICAgIGNhY2hlW2luZGV4XSA9IHJldDtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn1cblxuLyoqXG4gKiBDb21waWxlciBydW50aW1lIGhlbHBlciBmb3IgY3JlYXRpbmcgZHluYW1pYyBzbG90cyBvYmplY3RcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVNsb3RzKHNsb3RzLCBkeW5hbWljU2xvdHMpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGR5bmFtaWNTbG90cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBzbG90ID0gZHluYW1pY1Nsb3RzW2ldO1xuICAgICAgICAvLyBhcnJheSBvZiBkeW5hbWljIHNsb3QgZ2VuZXJhdGVkIGJ5IDx0ZW1wbGF0ZSB2LWZvcj1cIi4uLlwiICNbLi4uXT5cbiAgICAgICAgaWYgKGlzQXJyYXkoc2xvdCkpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgc2xvdC5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIHNsb3RzW3Nsb3Rbal0ubmFtZV0gPSBzbG90W2pdLmZuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNsb3QpIHtcbiAgICAgICAgICAgIC8vIGNvbmRpdGlvbmFsIHNpbmdsZSBzbG90IGdlbmVyYXRlZCBieSA8dGVtcGxhdGUgdi1pZj1cIi4uLlwiICNmb28+XG4gICAgICAgICAgICBzbG90c1tzbG90Lm5hbWVdID0gc2xvdC5rZXlcbiAgICAgICAgICAgICAgICA/ICguLi5hcmdzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IHNsb3QuZm4oLi4uYXJncyk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGF0dGFjaCBicmFuY2gga2V5IHNvIGVhY2ggY29uZGl0aW9uYWwgYnJhbmNoIGlzIGNvbnNpZGVyZWQgYVxuICAgICAgICAgICAgICAgICAgICAvLyBkaWZmZXJlbnQgZnJhZ21lbnRcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcylcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5rZXkgPSBzbG90LmtleTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgOiBzbG90LmZuO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzbG90cztcbn1cblxuLyoqXG4gKiBDb21waWxlciBydW50aW1lIGhlbHBlciBmb3IgcmVuZGVyaW5nIGA8c2xvdC8+YFxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcmVuZGVyU2xvdChzbG90cywgbmFtZSwgcHJvcHMgPSB7fSwgXG4vLyB0aGlzIGlzIG5vdCBhIHVzZXItZmFjaW5nIGZ1bmN0aW9uLCBzbyB0aGUgZmFsbGJhY2sgaXMgYWx3YXlzIGdlbmVyYXRlZCBieVxuLy8gdGhlIGNvbXBpbGVyIGFuZCBndWFyYW50ZWVkIHRvIGJlIGEgZnVuY3Rpb24gcmV0dXJuaW5nIGFuIGFycmF5XG5mYWxsYmFjaywgbm9TbG90dGVkKSB7XG4gICAgaWYgKGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZS5pc0NFIHx8XG4gICAgICAgIChjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UucGFyZW50ICYmXG4gICAgICAgICAgICBpc0FzeW5jV3JhcHBlcihjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UucGFyZW50KSAmJlxuICAgICAgICAgICAgY3VycmVudFJlbmRlcmluZ0luc3RhbmNlLnBhcmVudC5pc0NFKSkge1xuICAgICAgICBpZiAobmFtZSAhPT0gJ2RlZmF1bHQnKVxuICAgICAgICAgICAgcHJvcHMubmFtZSA9IG5hbWU7XG4gICAgICAgIHJldHVybiBjcmVhdGVWTm9kZSgnc2xvdCcsIHByb3BzLCBmYWxsYmFjayAmJiBmYWxsYmFjaygpKTtcbiAgICB9XG4gICAgbGV0IHNsb3QgPSBzbG90c1tuYW1lXTtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIHNsb3QgJiYgc2xvdC5sZW5ndGggPiAxKSB7XG4gICAgICAgIHdhcm4oYFNTUi1vcHRpbWl6ZWQgc2xvdCBmdW5jdGlvbiBkZXRlY3RlZCBpbiBhIG5vbi1TU1Itb3B0aW1pemVkIHJlbmRlciBgICtcbiAgICAgICAgICAgIGBmdW5jdGlvbi4gWW91IG5lZWQgdG8gbWFyayB0aGlzIGNvbXBvbmVudCB3aXRoICRkeW5hbWljLXNsb3RzIGluIHRoZSBgICtcbiAgICAgICAgICAgIGBwYXJlbnQgdGVtcGxhdGUuYCk7XG4gICAgICAgIHNsb3QgPSAoKSA9PiBbXTtcbiAgICB9XG4gICAgLy8gYSBjb21waWxlZCBzbG90IGRpc2FibGVzIGJsb2NrIHRyYWNraW5nIGJ5IGRlZmF1bHQgdG8gYXZvaWQgbWFudWFsXG4gICAgLy8gaW52b2NhdGlvbiBpbnRlcmZlcmluZyB3aXRoIHRlbXBsYXRlLWJhc2VkIGJsb2NrIHRyYWNraW5nLCBidXQgaW5cbiAgICAvLyBgcmVuZGVyU2xvdGAgd2UgY2FuIGJlIHN1cmUgdGhhdCBpdCdzIHRlbXBsYXRlLWJhc2VkIHNvIHdlIGNhbiBmb3JjZVxuICAgIC8vIGVuYWJsZSBpdC5cbiAgICBpZiAoc2xvdCAmJiBzbG90Ll9jKSB7XG4gICAgICAgIHNsb3QuX2QgPSBmYWxzZTtcbiAgICB9XG4gICAgb3BlbkJsb2NrKCk7XG4gICAgY29uc3QgdmFsaWRTbG90Q29udGVudCA9IHNsb3QgJiYgZW5zdXJlVmFsaWRWTm9kZShzbG90KHByb3BzKSk7XG4gICAgY29uc3QgcmVuZGVyZWQgPSBjcmVhdGVCbG9jayhGcmFnbWVudCwge1xuICAgICAgICBrZXk6IHByb3BzLmtleSB8fFxuICAgICAgICAgICAgLy8gc2xvdCBjb250ZW50IGFycmF5IG9mIGEgZHluYW1pYyBjb25kaXRpb25hbCBzbG90IG1heSBoYXZlIGEgYnJhbmNoXG4gICAgICAgICAgICAvLyBrZXkgYXR0YWNoZWQgaW4gdGhlIGBjcmVhdGVTbG90c2AgaGVscGVyLCByZXNwZWN0IHRoYXRcbiAgICAgICAgICAgICh2YWxpZFNsb3RDb250ZW50ICYmIHZhbGlkU2xvdENvbnRlbnQua2V5KSB8fFxuICAgICAgICAgICAgYF8ke25hbWV9YFxuICAgIH0sIHZhbGlkU2xvdENvbnRlbnQgfHwgKGZhbGxiYWNrID8gZmFsbGJhY2soKSA6IFtdKSwgdmFsaWRTbG90Q29udGVudCAmJiBzbG90cy5fID09PSAxIC8qIFNsb3RGbGFncy5TVEFCTEUgKi9cbiAgICAgICAgPyA2NCAvKiBQYXRjaEZsYWdzLlNUQUJMRV9GUkFHTUVOVCAqL1xuICAgICAgICA6IC0yIC8qIFBhdGNoRmxhZ3MuQkFJTCAqLyk7XG4gICAgaWYgKCFub1Nsb3R0ZWQgJiYgcmVuZGVyZWQuc2NvcGVJZCkge1xuICAgICAgICByZW5kZXJlZC5zbG90U2NvcGVJZHMgPSBbcmVuZGVyZWQuc2NvcGVJZCArICctcyddO1xuICAgIH1cbiAgICBpZiAoc2xvdCAmJiBzbG90Ll9jKSB7XG4gICAgICAgIHNsb3QuX2QgPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gcmVuZGVyZWQ7XG59XG5mdW5jdGlvbiBlbnN1cmVWYWxpZFZOb2RlKHZub2Rlcykge1xuICAgIHJldHVybiB2bm9kZXMuc29tZShjaGlsZCA9PiB7XG4gICAgICAgIGlmICghaXNWTm9kZShjaGlsZCkpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgaWYgKGNoaWxkLnR5cGUgPT09IENvbW1lbnQpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChjaGlsZC50eXBlID09PSBGcmFnbWVudCAmJlxuICAgICAgICAgICAgIWVuc3VyZVZhbGlkVk5vZGUoY2hpbGQuY2hpbGRyZW4pKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KVxuICAgICAgICA/IHZub2Rlc1xuICAgICAgICA6IG51bGw7XG59XG5cbi8qKlxuICogRm9yIHByZWZpeGluZyBrZXlzIGluIHYtb249XCJvYmpcIiB3aXRoIFwib25cIlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gdG9IYW5kbGVycyhvYmosIHByZXNlcnZlQ2FzZUlmTmVjZXNzYXJ5KSB7XG4gICAgY29uc3QgcmV0ID0ge307XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhaXNPYmplY3Qob2JqKSkge1xuICAgICAgICB3YXJuKGB2LW9uIHdpdGggbm8gYXJndW1lbnQgZXhwZWN0cyBhbiBvYmplY3QgdmFsdWUuYCk7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xuICAgICAgICByZXRbcHJlc2VydmVDYXNlSWZOZWNlc3NhcnkgJiYgL1tBLVpdLy50ZXN0KGtleSlcbiAgICAgICAgICAgID8gYG9uOiR7a2V5fWBcbiAgICAgICAgICAgIDogdG9IYW5kbGVyS2V5KGtleSldID0gb2JqW2tleV07XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59XG5cbi8qKlxuICogIzI0MzcgSW4gVnVlIDMsIGZ1bmN0aW9uYWwgY29tcG9uZW50cyBkbyBub3QgaGF2ZSBhIHB1YmxpYyBpbnN0YW5jZSBwcm94eSBidXRcbiAqIHRoZXkgZXhpc3QgaW4gdGhlIGludGVybmFsIHBhcmVudCBjaGFpbi4gRm9yIGNvZGUgdGhhdCByZWxpZXMgb24gdHJhdmVyc2luZ1xuICogcHVibGljICRwYXJlbnQgY2hhaW5zLCBza2lwIGZ1bmN0aW9uYWwgb25lcyBhbmQgZ28gdG8gdGhlIHBhcmVudCBpbnN0ZWFkLlxuICovXG5jb25zdCBnZXRQdWJsaWNJbnN0YW5jZSA9IChpKSA9PiB7XG4gICAgaWYgKCFpKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBpZiAoaXNTdGF0ZWZ1bENvbXBvbmVudChpKSlcbiAgICAgICAgcmV0dXJuIGdldEV4cG9zZVByb3h5KGkpIHx8IGkucHJveHk7XG4gICAgcmV0dXJuIGdldFB1YmxpY0luc3RhbmNlKGkucGFyZW50KTtcbn07XG5jb25zdCBwdWJsaWNQcm9wZXJ0aWVzTWFwID0gXG4vLyBNb3ZlIFBVUkUgbWFya2VyIHRvIG5ldyBsaW5lIHRvIHdvcmthcm91bmQgY29tcGlsZXIgZGlzY2FyZGluZyBpdFxuLy8gZHVlIHRvIHR5cGUgYW5ub3RhdGlvblxuLyojX19QVVJFX18qLyBleHRlbmQoT2JqZWN0LmNyZWF0ZShudWxsKSwge1xuICAgICQ6IGkgPT4gaSxcbiAgICAkZWw6IGkgPT4gaS52bm9kZS5lbCxcbiAgICAkZGF0YTogaSA9PiBpLmRhdGEsXG4gICAgJHByb3BzOiBpID0+ICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyBzaGFsbG93UmVhZG9ubHkoaS5wcm9wcykgOiBpLnByb3BzKSxcbiAgICAkYXR0cnM6IGkgPT4gKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/IHNoYWxsb3dSZWFkb25seShpLmF0dHJzKSA6IGkuYXR0cnMpLFxuICAgICRzbG90czogaSA9PiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gc2hhbGxvd1JlYWRvbmx5KGkuc2xvdHMpIDogaS5zbG90cyksXG4gICAgJHJlZnM6IGkgPT4gKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/IHNoYWxsb3dSZWFkb25seShpLnJlZnMpIDogaS5yZWZzKSxcbiAgICAkcGFyZW50OiBpID0+IGdldFB1YmxpY0luc3RhbmNlKGkucGFyZW50KSxcbiAgICAkcm9vdDogaSA9PiBnZXRQdWJsaWNJbnN0YW5jZShpLnJvb3QpLFxuICAgICRlbWl0OiBpID0+IGkuZW1pdCxcbiAgICAkb3B0aW9uczogaSA9PiAoX19WVUVfT1BUSU9OU19BUElfXyA/IHJlc29sdmVNZXJnZWRPcHRpb25zKGkpIDogaS50eXBlKSxcbiAgICAkZm9yY2VVcGRhdGU6IGkgPT4gaS5mIHx8IChpLmYgPSAoKSA9PiBxdWV1ZUpvYihpLnVwZGF0ZSkpLFxuICAgICRuZXh0VGljazogaSA9PiBpLm4gfHwgKGkubiA9IG5leHRUaWNrLmJpbmQoaS5wcm94eSkpLFxuICAgICR3YXRjaDogaSA9PiAoX19WVUVfT1BUSU9OU19BUElfXyA/IGluc3RhbmNlV2F0Y2guYmluZChpKSA6IE5PT1ApXG59KTtcbmNvbnN0IGlzUmVzZXJ2ZWRQcmVmaXggPSAoa2V5KSA9PiBrZXkgPT09ICdfJyB8fCBrZXkgPT09ICckJztcbmNvbnN0IGhhc1NldHVwQmluZGluZyA9IChzdGF0ZSwga2V5KSA9PiBzdGF0ZSAhPT0gRU1QVFlfT0JKICYmICFzdGF0ZS5fX2lzU2NyaXB0U2V0dXAgJiYgaGFzT3duKHN0YXRlLCBrZXkpO1xuY29uc3QgUHVibGljSW5zdGFuY2VQcm94eUhhbmRsZXJzID0ge1xuICAgIGdldCh7IF86IGluc3RhbmNlIH0sIGtleSkge1xuICAgICAgICBjb25zdCB7IGN0eCwgc2V0dXBTdGF0ZSwgZGF0YSwgcHJvcHMsIGFjY2Vzc0NhY2hlLCB0eXBlLCBhcHBDb250ZXh0IH0gPSBpbnN0YW5jZTtcbiAgICAgICAgLy8gZm9yIGludGVybmFsIGZvcm1hdHRlcnMgdG8ga25vdyB0aGF0IHRoaXMgaXMgYSBWdWUgaW5zdGFuY2VcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBrZXkgPT09ICdfX2lzVnVlJykge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZGF0YSAvIHByb3BzIC8gY3R4XG4gICAgICAgIC8vIFRoaXMgZ2V0dGVyIGdldHMgY2FsbGVkIGZvciBldmVyeSBwcm9wZXJ0eSBhY2Nlc3Mgb24gdGhlIHJlbmRlciBjb250ZXh0XG4gICAgICAgIC8vIGR1cmluZyByZW5kZXIgYW5kIGlzIGEgbWFqb3IgaG90c3BvdC4gVGhlIG1vc3QgZXhwZW5zaXZlIHBhcnQgb2YgdGhpc1xuICAgICAgICAvLyBpcyB0aGUgbXVsdGlwbGUgaGFzT3duKCkgY2FsbHMuIEl0J3MgbXVjaCBmYXN0ZXIgdG8gZG8gYSBzaW1wbGUgcHJvcGVydHlcbiAgICAgICAgLy8gYWNjZXNzIG9uIGEgcGxhaW4gb2JqZWN0LCBzbyB3ZSB1c2UgYW4gYWNjZXNzQ2FjaGUgb2JqZWN0ICh3aXRoIG51bGxcbiAgICAgICAgLy8gcHJvdG90eXBlKSB0byBtZW1vaXplIHdoYXQgYWNjZXNzIHR5cGUgYSBrZXkgY29ycmVzcG9uZHMgdG8uXG4gICAgICAgIGxldCBub3JtYWxpemVkUHJvcHM7XG4gICAgICAgIGlmIChrZXlbMF0gIT09ICckJykge1xuICAgICAgICAgICAgY29uc3QgbiA9IGFjY2Vzc0NhY2hlW2tleV07XG4gICAgICAgICAgICBpZiAobiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChuKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMSAvKiBBY2Nlc3NUeXBlcy5TRVRVUCAqLzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXR1cFN0YXRlW2tleV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMiAvKiBBY2Nlc3NUeXBlcy5EQVRBICovOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGFba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0IC8qIEFjY2Vzc1R5cGVzLkNPTlRFWFQgKi86XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3R4W2tleV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMyAvKiBBY2Nlc3NUeXBlcy5QUk9QUyAqLzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9wc1trZXldO1xuICAgICAgICAgICAgICAgICAgICAvLyBkZWZhdWx0OiBqdXN0IGZhbGx0aHJvdWdoXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaGFzU2V0dXBCaW5kaW5nKHNldHVwU3RhdGUsIGtleSkpIHtcbiAgICAgICAgICAgICAgICBhY2Nlc3NDYWNoZVtrZXldID0gMSAvKiBBY2Nlc3NUeXBlcy5TRVRVUCAqLztcbiAgICAgICAgICAgICAgICByZXR1cm4gc2V0dXBTdGF0ZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZGF0YSAhPT0gRU1QVFlfT0JKICYmIGhhc093bihkYXRhLCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgYWNjZXNzQ2FjaGVba2V5XSA9IDIgLyogQWNjZXNzVHlwZXMuREFUQSAqLztcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoXG4gICAgICAgICAgICAvLyBvbmx5IGNhY2hlIG90aGVyIHByb3BlcnRpZXMgd2hlbiBpbnN0YW5jZSBoYXMgZGVjbGFyZWQgKHRodXMgc3RhYmxlKVxuICAgICAgICAgICAgLy8gcHJvcHNcbiAgICAgICAgICAgIChub3JtYWxpemVkUHJvcHMgPSBpbnN0YW5jZS5wcm9wc09wdGlvbnNbMF0pICYmXG4gICAgICAgICAgICAgICAgaGFzT3duKG5vcm1hbGl6ZWRQcm9wcywga2V5KSkge1xuICAgICAgICAgICAgICAgIGFjY2Vzc0NhY2hlW2tleV0gPSAzIC8qIEFjY2Vzc1R5cGVzLlBST1BTICovO1xuICAgICAgICAgICAgICAgIHJldHVybiBwcm9wc1trZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY3R4ICE9PSBFTVBUWV9PQkogJiYgaGFzT3duKGN0eCwga2V5KSkge1xuICAgICAgICAgICAgICAgIGFjY2Vzc0NhY2hlW2tleV0gPSA0IC8qIEFjY2Vzc1R5cGVzLkNPTlRFWFQgKi87XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN0eFtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIV9fVlVFX09QVElPTlNfQVBJX18gfHwgc2hvdWxkQ2FjaGVBY2Nlc3MpIHtcbiAgICAgICAgICAgICAgICBhY2Nlc3NDYWNoZVtrZXldID0gMCAvKiBBY2Nlc3NUeXBlcy5PVEhFUiAqLztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwdWJsaWNHZXR0ZXIgPSBwdWJsaWNQcm9wZXJ0aWVzTWFwW2tleV07XG4gICAgICAgIGxldCBjc3NNb2R1bGUsIGdsb2JhbFByb3BlcnRpZXM7XG4gICAgICAgIC8vIHB1YmxpYyAkeHh4IHByb3BlcnRpZXNcbiAgICAgICAgaWYgKHB1YmxpY0dldHRlcikge1xuICAgICAgICAgICAgaWYgKGtleSA9PT0gJyRhdHRycycpIHtcbiAgICAgICAgICAgICAgICB0cmFjayhpbnN0YW5jZSwgXCJnZXRcIiAvKiBUcmFja09wVHlwZXMuR0VUICovLCBrZXkpO1xuICAgICAgICAgICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBtYXJrQXR0cnNBY2Nlc3NlZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHB1YmxpY0dldHRlcihpbnN0YW5jZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoXG4gICAgICAgIC8vIGNzcyBtb2R1bGUgKGluamVjdGVkIGJ5IHZ1ZS1sb2FkZXIpXG4gICAgICAgIChjc3NNb2R1bGUgPSB0eXBlLl9fY3NzTW9kdWxlcykgJiZcbiAgICAgICAgICAgIChjc3NNb2R1bGUgPSBjc3NNb2R1bGVba2V5XSkpIHtcbiAgICAgICAgICAgIHJldHVybiBjc3NNb2R1bGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY3R4ICE9PSBFTVBUWV9PQkogJiYgaGFzT3duKGN0eCwga2V5KSkge1xuICAgICAgICAgICAgLy8gdXNlciBtYXkgc2V0IGN1c3RvbSBwcm9wZXJ0aWVzIHRvIGB0aGlzYCB0aGF0IHN0YXJ0IHdpdGggYCRgXG4gICAgICAgICAgICBhY2Nlc3NDYWNoZVtrZXldID0gNCAvKiBBY2Nlc3NUeXBlcy5DT05URVhUICovO1xuICAgICAgICAgICAgcmV0dXJuIGN0eFtrZXldO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKFxuICAgICAgICAvLyBnbG9iYWwgcHJvcGVydGllc1xuICAgICAgICAoKGdsb2JhbFByb3BlcnRpZXMgPSBhcHBDb250ZXh0LmNvbmZpZy5nbG9iYWxQcm9wZXJ0aWVzKSxcbiAgICAgICAgICAgIGhhc093bihnbG9iYWxQcm9wZXJ0aWVzLCBrZXkpKSkge1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybiBnbG9iYWxQcm9wZXJ0aWVzW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXG4gICAgICAgICAgICBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UgJiZcbiAgICAgICAgICAgICghaXNTdHJpbmcoa2V5KSB8fFxuICAgICAgICAgICAgICAgIC8vICMxMDkxIGF2b2lkIGludGVybmFsIGlzUmVmL2lzVk5vZGUgY2hlY2tzIG9uIGNvbXBvbmVudCBpbnN0YW5jZSBsZWFkaW5nXG4gICAgICAgICAgICAgICAgLy8gdG8gaW5maW5pdGUgd2FybmluZyBsb29wXG4gICAgICAgICAgICAgICAga2V5LmluZGV4T2YoJ19fdicpICE9PSAwKSkge1xuICAgICAgICAgICAgaWYgKGRhdGEgIT09IEVNUFRZX09CSiAmJiBpc1Jlc2VydmVkUHJlZml4KGtleVswXSkgJiYgaGFzT3duKGRhdGEsIGtleSkpIHtcbiAgICAgICAgICAgICAgICB3YXJuKGBQcm9wZXJ0eSAke0pTT04uc3RyaW5naWZ5KGtleSl9IG11c3QgYmUgYWNjZXNzZWQgdmlhICRkYXRhIGJlY2F1c2UgaXQgc3RhcnRzIHdpdGggYSByZXNlcnZlZCBgICtcbiAgICAgICAgICAgICAgICAgICAgYGNoYXJhY3RlciAoXCIkXCIgb3IgXCJfXCIpIGFuZCBpcyBub3QgcHJveGllZCBvbiB0aGUgcmVuZGVyIGNvbnRleHQuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpbnN0YW5jZSA9PT0gY3VycmVudFJlbmRlcmluZ0luc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgd2FybihgUHJvcGVydHkgJHtKU09OLnN0cmluZ2lmeShrZXkpfSB3YXMgYWNjZXNzZWQgZHVyaW5nIHJlbmRlciBgICtcbiAgICAgICAgICAgICAgICAgICAgYGJ1dCBpcyBub3QgZGVmaW5lZCBvbiBpbnN0YW5jZS5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgc2V0KHsgXzogaW5zdGFuY2UgfSwga2V5LCB2YWx1ZSkge1xuICAgICAgICBjb25zdCB7IGRhdGEsIHNldHVwU3RhdGUsIGN0eCB9ID0gaW5zdGFuY2U7XG4gICAgICAgIGlmIChoYXNTZXR1cEJpbmRpbmcoc2V0dXBTdGF0ZSwga2V5KSkge1xuICAgICAgICAgICAgc2V0dXBTdGF0ZVtrZXldID0gdmFsdWU7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcbiAgICAgICAgICAgIHNldHVwU3RhdGUuX19pc1NjcmlwdFNldHVwICYmXG4gICAgICAgICAgICBoYXNPd24oc2V0dXBTdGF0ZSwga2V5KSkge1xuICAgICAgICAgICAgd2FybihgQ2Fubm90IG11dGF0ZSA8c2NyaXB0IHNldHVwPiBiaW5kaW5nIFwiJHtrZXl9XCIgZnJvbSBPcHRpb25zIEFQSS5gKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkYXRhICE9PSBFTVBUWV9PQkogJiYgaGFzT3duKGRhdGEsIGtleSkpIHtcbiAgICAgICAgICAgIGRhdGFba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaGFzT3duKGluc3RhbmNlLnByb3BzLCBrZXkpKSB7XG4gICAgICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgd2FybihgQXR0ZW1wdGluZyB0byBtdXRhdGUgcHJvcCBcIiR7a2V5fVwiLiBQcm9wcyBhcmUgcmVhZG9ubHkuYCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGtleVswXSA9PT0gJyQnICYmIGtleS5zbGljZSgxKSBpbiBpbnN0YW5jZSkge1xuICAgICAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXG4gICAgICAgICAgICAgICAgd2FybihgQXR0ZW1wdGluZyB0byBtdXRhdGUgcHVibGljIHByb3BlcnR5IFwiJHtrZXl9XCIuIGAgK1xuICAgICAgICAgICAgICAgICAgICBgUHJvcGVydGllcyBzdGFydGluZyB3aXRoICQgYXJlIHJlc2VydmVkIGFuZCByZWFkb25seS5gKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYga2V5IGluIGluc3RhbmNlLmFwcENvbnRleHQuY29uZmlnLmdsb2JhbFByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4LCBrZXksIHtcbiAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY3R4W2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIGhhcyh7IF86IHsgZGF0YSwgc2V0dXBTdGF0ZSwgYWNjZXNzQ2FjaGUsIGN0eCwgYXBwQ29udGV4dCwgcHJvcHNPcHRpb25zIH0gfSwga2V5KSB7XG4gICAgICAgIGxldCBub3JtYWxpemVkUHJvcHM7XG4gICAgICAgIHJldHVybiAoISFhY2Nlc3NDYWNoZVtrZXldIHx8XG4gICAgICAgICAgICAoZGF0YSAhPT0gRU1QVFlfT0JKICYmIGhhc093bihkYXRhLCBrZXkpKSB8fFxuICAgICAgICAgICAgaGFzU2V0dXBCaW5kaW5nKHNldHVwU3RhdGUsIGtleSkgfHxcbiAgICAgICAgICAgICgobm9ybWFsaXplZFByb3BzID0gcHJvcHNPcHRpb25zWzBdKSAmJiBoYXNPd24obm9ybWFsaXplZFByb3BzLCBrZXkpKSB8fFxuICAgICAgICAgICAgaGFzT3duKGN0eCwga2V5KSB8fFxuICAgICAgICAgICAgaGFzT3duKHB1YmxpY1Byb3BlcnRpZXNNYXAsIGtleSkgfHxcbiAgICAgICAgICAgIGhhc093bihhcHBDb250ZXh0LmNvbmZpZy5nbG9iYWxQcm9wZXJ0aWVzLCBrZXkpKTtcbiAgICB9LFxuICAgIGRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBkZXNjcmlwdG9yKSB7XG4gICAgICAgIGlmIChkZXNjcmlwdG9yLmdldCAhPSBudWxsKSB7XG4gICAgICAgICAgICAvLyBpbnZhbGlkYXRlIGtleSBjYWNoZSBvZiBhIGdldHRlciBiYXNlZCBwcm9wZXJ0eSAjNTQxN1xuICAgICAgICAgICAgdGFyZ2V0Ll8uYWNjZXNzQ2FjaGVba2V5XSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaGFzT3duKGRlc2NyaXB0b3IsICd2YWx1ZScpKSB7XG4gICAgICAgICAgICB0aGlzLnNldCh0YXJnZXQsIGtleSwgZGVzY3JpcHRvci52YWx1ZSwgbnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFJlZmxlY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIGRlc2NyaXB0b3IpO1xuICAgIH1cbn07XG5pZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFmYWxzZSkge1xuICAgIFB1YmxpY0luc3RhbmNlUHJveHlIYW5kbGVycy5vd25LZXlzID0gKHRhcmdldCkgPT4ge1xuICAgICAgICB3YXJuKGBBdm9pZCBhcHAgbG9naWMgdGhhdCByZWxpZXMgb24gZW51bWVyYXRpbmcga2V5cyBvbiBhIGNvbXBvbmVudCBpbnN0YW5jZS4gYCArXG4gICAgICAgICAgICBgVGhlIGtleXMgd2lsbCBiZSBlbXB0eSBpbiBwcm9kdWN0aW9uIG1vZGUgdG8gYXZvaWQgcGVyZm9ybWFuY2Ugb3ZlcmhlYWQuYCk7XG4gICAgICAgIHJldHVybiBSZWZsZWN0Lm93bktleXModGFyZ2V0KTtcbiAgICB9O1xufVxuY29uc3QgUnVudGltZUNvbXBpbGVkUHVibGljSW5zdGFuY2VQcm94eUhhbmRsZXJzID0gLyojX19QVVJFX18qLyBleHRlbmQoe30sIFB1YmxpY0luc3RhbmNlUHJveHlIYW5kbGVycywge1xuICAgIGdldCh0YXJnZXQsIGtleSkge1xuICAgICAgICAvLyBmYXN0IHBhdGggZm9yIHVuc2NvcGFibGVzIHdoZW4gdXNpbmcgYHdpdGhgIGJsb2NrXG4gICAgICAgIGlmIChrZXkgPT09IFN5bWJvbC51bnNjb3BhYmxlcykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQdWJsaWNJbnN0YW5jZVByb3h5SGFuZGxlcnMuZ2V0KHRhcmdldCwga2V5LCB0YXJnZXQpO1xuICAgIH0sXG4gICAgaGFzKF8sIGtleSkge1xuICAgICAgICBjb25zdCBoYXMgPSBrZXlbMF0gIT09ICdfJyAmJiAhaXNHbG9iYWxseVdoaXRlbGlzdGVkKGtleSk7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWhhcyAmJiBQdWJsaWNJbnN0YW5jZVByb3h5SGFuZGxlcnMuaGFzKF8sIGtleSkpIHtcbiAgICAgICAgICAgIHdhcm4oYFByb3BlcnR5ICR7SlNPTi5zdHJpbmdpZnkoa2V5KX0gc2hvdWxkIG5vdCBzdGFydCB3aXRoIF8gd2hpY2ggaXMgYSByZXNlcnZlZCBwcmVmaXggZm9yIFZ1ZSBpbnRlcm5hbHMuYCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGhhcztcbiAgICB9XG59KTtcbi8vIGRldiBvbmx5XG4vLyBJbiBkZXYgbW9kZSwgdGhlIHByb3h5IHRhcmdldCBleHBvc2VzIHRoZSBzYW1lIHByb3BlcnRpZXMgYXMgc2VlbiBvbiBgdGhpc2Bcbi8vIGZvciBlYXNpZXIgY29uc29sZSBpbnNwZWN0aW9uLiBJbiBwcm9kIG1vZGUgaXQgd2lsbCBiZSBhbiBlbXB0eSBvYmplY3Qgc29cbi8vIHRoZXNlIHByb3BlcnRpZXMgZGVmaW5pdGlvbnMgY2FuIGJlIHNraXBwZWQuXG5mdW5jdGlvbiBjcmVhdGVEZXZSZW5kZXJDb250ZXh0KGluc3RhbmNlKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0ge307XG4gICAgLy8gZXhwb3NlIGludGVybmFsIGluc3RhbmNlIGZvciBwcm94eSBoYW5kbGVyc1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGBfYCwge1xuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBnZXQ6ICgpID0+IGluc3RhbmNlXG4gICAgfSk7XG4gICAgLy8gZXhwb3NlIHB1YmxpYyBwcm9wZXJ0aWVzXG4gICAgT2JqZWN0LmtleXMocHVibGljUHJvcGVydGllc01hcCkuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHtcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgZ2V0OiAoKSA9PiBwdWJsaWNQcm9wZXJ0aWVzTWFwW2tleV0oaW5zdGFuY2UpLFxuICAgICAgICAgICAgLy8gaW50ZXJjZXB0ZWQgYnkgdGhlIHByb3h5IHNvIG5vIG5lZWQgZm9yIGltcGxlbWVudGF0aW9uLFxuICAgICAgICAgICAgLy8gYnV0IG5lZWRlZCB0byBwcmV2ZW50IHNldCBlcnJvcnNcbiAgICAgICAgICAgIHNldDogTk9PUFxuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGFyZ2V0O1xufVxuLy8gZGV2IG9ubHlcbmZ1bmN0aW9uIGV4cG9zZVByb3BzT25SZW5kZXJDb250ZXh0KGluc3RhbmNlKSB7XG4gICAgY29uc3QgeyBjdHgsIHByb3BzT3B0aW9uczogW3Byb3BzT3B0aW9uc10gfSA9IGluc3RhbmNlO1xuICAgIGlmIChwcm9wc09wdGlvbnMpIHtcbiAgICAgICAgT2JqZWN0LmtleXMocHJvcHNPcHRpb25zKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4LCBrZXksIHtcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBnZXQ6ICgpID0+IGluc3RhbmNlLnByb3BzW2tleV0sXG4gICAgICAgICAgICAgICAgc2V0OiBOT09QXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLy8gZGV2IG9ubHlcbmZ1bmN0aW9uIGV4cG9zZVNldHVwU3RhdGVPblJlbmRlckNvbnRleHQoaW5zdGFuY2UpIHtcbiAgICBjb25zdCB7IGN0eCwgc2V0dXBTdGF0ZSB9ID0gaW5zdGFuY2U7XG4gICAgT2JqZWN0LmtleXModG9SYXcoc2V0dXBTdGF0ZSkpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgaWYgKCFzZXR1cFN0YXRlLl9faXNTY3JpcHRTZXR1cCkge1xuICAgICAgICAgICAgaWYgKGlzUmVzZXJ2ZWRQcmVmaXgoa2V5WzBdKSkge1xuICAgICAgICAgICAgICAgIHdhcm4oYHNldHVwKCkgcmV0dXJuIHByb3BlcnR5ICR7SlNPTi5zdHJpbmdpZnkoa2V5KX0gc2hvdWxkIG5vdCBzdGFydCB3aXRoIFwiJFwiIG9yIFwiX1wiIGAgK1xuICAgICAgICAgICAgICAgICAgICBgd2hpY2ggYXJlIHJlc2VydmVkIHByZWZpeGVzIGZvciBWdWUgaW50ZXJuYWxzLmApO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjdHgsIGtleSwge1xuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGdldDogKCkgPT4gc2V0dXBTdGF0ZVtrZXldLFxuICAgICAgICAgICAgICAgIHNldDogTk9PUFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRHVwbGljYXRlQ2hlY2tlcigpIHtcbiAgICBjb25zdCBjYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgcmV0dXJuICh0eXBlLCBrZXkpID0+IHtcbiAgICAgICAgaWYgKGNhY2hlW2tleV0pIHtcbiAgICAgICAgICAgIHdhcm4oYCR7dHlwZX0gcHJvcGVydHkgXCIke2tleX1cIiBpcyBhbHJlYWR5IGRlZmluZWQgaW4gJHtjYWNoZVtrZXldfS5gKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlW2tleV0gPSB0eXBlO1xuICAgICAgICB9XG4gICAgfTtcbn1cbmxldCBzaG91bGRDYWNoZUFjY2VzcyA9IHRydWU7XG5mdW5jdGlvbiBhcHBseU9wdGlvbnMoaW5zdGFuY2UpIHtcbiAgICBjb25zdCBvcHRpb25zID0gcmVzb2x2ZU1lcmdlZE9wdGlvbnMoaW5zdGFuY2UpO1xuICAgIGNvbnN0IHB1YmxpY1RoaXMgPSBpbnN0YW5jZS5wcm94eTtcbiAgICBjb25zdCBjdHggPSBpbnN0YW5jZS5jdHg7XG4gICAgLy8gZG8gbm90IGNhY2hlIHByb3BlcnR5IGFjY2VzcyBvbiBwdWJsaWMgcHJveHkgZHVyaW5nIHN0YXRlIGluaXRpYWxpemF0aW9uXG4gICAgc2hvdWxkQ2FjaGVBY2Nlc3MgPSBmYWxzZTtcbiAgICAvLyBjYWxsIGJlZm9yZUNyZWF0ZSBmaXJzdCBiZWZvcmUgYWNjZXNzaW5nIG90aGVyIG9wdGlvbnMgc2luY2VcbiAgICAvLyB0aGUgaG9vayBtYXkgbXV0YXRlIHJlc29sdmVkIG9wdGlvbnMgKCMyNzkxKVxuICAgIGlmIChvcHRpb25zLmJlZm9yZUNyZWF0ZSkge1xuICAgICAgICBjYWxsSG9vayhvcHRpb25zLmJlZm9yZUNyZWF0ZSwgaW5zdGFuY2UsIFwiYmNcIiAvKiBMaWZlY3ljbGVIb29rcy5CRUZPUkVfQ1JFQVRFICovKTtcbiAgICB9XG4gICAgY29uc3QgeyBcbiAgICAvLyBzdGF0ZVxuICAgIGRhdGE6IGRhdGFPcHRpb25zLCBjb21wdXRlZDogY29tcHV0ZWRPcHRpb25zLCBtZXRob2RzLCB3YXRjaDogd2F0Y2hPcHRpb25zLCBwcm92aWRlOiBwcm92aWRlT3B0aW9ucywgaW5qZWN0OiBpbmplY3RPcHRpb25zLCBcbiAgICAvLyBsaWZlY3ljbGVcbiAgICBjcmVhdGVkLCBiZWZvcmVNb3VudCwgbW91bnRlZCwgYmVmb3JlVXBkYXRlLCB1cGRhdGVkLCBhY3RpdmF0ZWQsIGRlYWN0aXZhdGVkLCBiZWZvcmVEZXN0cm95LCBiZWZvcmVVbm1vdW50LCBkZXN0cm95ZWQsIHVubW91bnRlZCwgcmVuZGVyLCByZW5kZXJUcmFja2VkLCByZW5kZXJUcmlnZ2VyZWQsIGVycm9yQ2FwdHVyZWQsIHNlcnZlclByZWZldGNoLCBcbiAgICAvLyBwdWJsaWMgQVBJXG4gICAgZXhwb3NlLCBpbmhlcml0QXR0cnMsIFxuICAgIC8vIGFzc2V0c1xuICAgIGNvbXBvbmVudHMsIGRpcmVjdGl2ZXMsIGZpbHRlcnMgfSA9IG9wdGlvbnM7XG4gICAgY29uc3QgY2hlY2tEdXBsaWNhdGVQcm9wZXJ0aWVzID0gKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gY3JlYXRlRHVwbGljYXRlQ2hlY2tlcigpIDogbnVsbDtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIGNvbnN0IFtwcm9wc09wdGlvbnNdID0gaW5zdGFuY2UucHJvcHNPcHRpb25zO1xuICAgICAgICBpZiAocHJvcHNPcHRpb25zKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBwcm9wc09wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBjaGVja0R1cGxpY2F0ZVByb3BlcnRpZXMoXCJQcm9wc1wiIC8qIE9wdGlvblR5cGVzLlBST1BTICovLCBrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8vIG9wdGlvbnMgaW5pdGlhbGl6YXRpb24gb3JkZXIgKHRvIGJlIGNvbnNpc3RlbnQgd2l0aCBWdWUgMik6XG4gICAgLy8gLSBwcm9wcyAoYWxyZWFkeSBkb25lIG91dHNpZGUgb2YgdGhpcyBmdW5jdGlvbilcbiAgICAvLyAtIGluamVjdFxuICAgIC8vIC0gbWV0aG9kc1xuICAgIC8vIC0gZGF0YSAoZGVmZXJyZWQgc2luY2UgaXQgcmVsaWVzIG9uIGB0aGlzYCBhY2Nlc3MpXG4gICAgLy8gLSBjb21wdXRlZFxuICAgIC8vIC0gd2F0Y2ggKGRlZmVycmVkIHNpbmNlIGl0IHJlbGllcyBvbiBgdGhpc2AgYWNjZXNzKVxuICAgIGlmIChpbmplY3RPcHRpb25zKSB7XG4gICAgICAgIHJlc29sdmVJbmplY3Rpb25zKGluamVjdE9wdGlvbnMsIGN0eCwgY2hlY2tEdXBsaWNhdGVQcm9wZXJ0aWVzLCBpbnN0YW5jZS5hcHBDb250ZXh0LmNvbmZpZy51bndyYXBJbmplY3RlZFJlZik7XG4gICAgfVxuICAgIGlmIChtZXRob2RzKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIG1ldGhvZHMpIHtcbiAgICAgICAgICAgIGNvbnN0IG1ldGhvZEhhbmRsZXIgPSBtZXRob2RzW2tleV07XG4gICAgICAgICAgICBpZiAoaXNGdW5jdGlvbihtZXRob2RIYW5kbGVyKSkge1xuICAgICAgICAgICAgICAgIC8vIEluIGRldiBtb2RlLCB3ZSB1c2UgdGhlIGBjcmVhdGVSZW5kZXJDb250ZXh0YCBmdW5jdGlvbiB0byBkZWZpbmVcbiAgICAgICAgICAgICAgICAvLyBtZXRob2RzIHRvIHRoZSBwcm94eSB0YXJnZXQsIGFuZCB0aG9zZSBhcmUgcmVhZC1vbmx5IGJ1dFxuICAgICAgICAgICAgICAgIC8vIHJlY29uZmlndXJhYmxlLCBzbyBpdCBuZWVkcyB0byBiZSByZWRlZmluZWQgaGVyZVxuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGN0eCwga2V5LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogbWV0aG9kSGFuZGxlci5iaW5kKHB1YmxpY1RoaXMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4W2tleV0gPSBtZXRob2RIYW5kbGVyLmJpbmQocHVibGljVGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tEdXBsaWNhdGVQcm9wZXJ0aWVzKFwiTWV0aG9kc1wiIC8qIE9wdGlvblR5cGVzLk1FVEhPRFMgKi8sIGtleSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgd2FybihgTWV0aG9kIFwiJHtrZXl9XCIgaGFzIHR5cGUgXCIke3R5cGVvZiBtZXRob2RIYW5kbGVyfVwiIGluIHRoZSBjb21wb25lbnQgZGVmaW5pdGlvbi4gYCArXG4gICAgICAgICAgICAgICAgICAgIGBEaWQgeW91IHJlZmVyZW5jZSB0aGUgZnVuY3Rpb24gY29ycmVjdGx5P2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChkYXRhT3B0aW9ucykge1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFpc0Z1bmN0aW9uKGRhdGFPcHRpb25zKSkge1xuICAgICAgICAgICAgd2FybihgVGhlIGRhdGEgb3B0aW9uIG11c3QgYmUgYSBmdW5jdGlvbi4gYCArXG4gICAgICAgICAgICAgICAgYFBsYWluIG9iamVjdCB1c2FnZSBpcyBubyBsb25nZXIgc3VwcG9ydGVkLmApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRhdGEgPSBkYXRhT3B0aW9ucy5jYWxsKHB1YmxpY1RoaXMsIHB1YmxpY1RoaXMpO1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGlzUHJvbWlzZShkYXRhKSkge1xuICAgICAgICAgICAgd2FybihgZGF0YSgpIHJldHVybmVkIGEgUHJvbWlzZSAtIG5vdGUgZGF0YSgpIGNhbm5vdCBiZSBhc3luYzsgSWYgeW91IGAgK1xuICAgICAgICAgICAgICAgIGBpbnRlbmQgdG8gcGVyZm9ybSBkYXRhIGZldGNoaW5nIGJlZm9yZSBjb21wb25lbnQgcmVuZGVycywgdXNlIGAgK1xuICAgICAgICAgICAgICAgIGBhc3luYyBzZXR1cCgpICsgPFN1c3BlbnNlPi5gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzT2JqZWN0KGRhdGEpKSB7XG4gICAgICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgd2FybihgZGF0YSgpIHNob3VsZCByZXR1cm4gYW4gb2JqZWN0LmApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaW5zdGFuY2UuZGF0YSA9IHJlYWN0aXZlKGRhdGEpO1xuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tEdXBsaWNhdGVQcm9wZXJ0aWVzKFwiRGF0YVwiIC8qIE9wdGlvblR5cGVzLkRBVEEgKi8sIGtleSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGV4cG9zZSBkYXRhIG9uIGN0eCBkdXJpbmcgZGV2XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNSZXNlcnZlZFByZWZpeChrZXlbMF0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4LCBrZXksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXQ6ICgpID0+IGRhdGFba2V5XSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXQ6IE5PT1BcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8vIHN0YXRlIGluaXRpYWxpemF0aW9uIGNvbXBsZXRlIGF0IHRoaXMgcG9pbnQgLSBzdGFydCBjYWNoaW5nIGFjY2Vzc1xuICAgIHNob3VsZENhY2hlQWNjZXNzID0gdHJ1ZTtcbiAgICBpZiAoY29tcHV0ZWRPcHRpb25zKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIGNvbXB1dGVkT3B0aW9ucykge1xuICAgICAgICAgICAgY29uc3Qgb3B0ID0gY29tcHV0ZWRPcHRpb25zW2tleV07XG4gICAgICAgICAgICBjb25zdCBnZXQgPSBpc0Z1bmN0aW9uKG9wdClcbiAgICAgICAgICAgICAgICA/IG9wdC5iaW5kKHB1YmxpY1RoaXMsIHB1YmxpY1RoaXMpXG4gICAgICAgICAgICAgICAgOiBpc0Z1bmN0aW9uKG9wdC5nZXQpXG4gICAgICAgICAgICAgICAgICAgID8gb3B0LmdldC5iaW5kKHB1YmxpY1RoaXMsIHB1YmxpY1RoaXMpXG4gICAgICAgICAgICAgICAgICAgIDogTk9PUDtcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgZ2V0ID09PSBOT09QKSB7XG4gICAgICAgICAgICAgICAgd2FybihgQ29tcHV0ZWQgcHJvcGVydHkgXCIke2tleX1cIiBoYXMgbm8gZ2V0dGVyLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc2V0ID0gIWlzRnVuY3Rpb24ob3B0KSAmJiBpc0Z1bmN0aW9uKG9wdC5zZXQpXG4gICAgICAgICAgICAgICAgPyBvcHQuc2V0LmJpbmQocHVibGljVGhpcylcbiAgICAgICAgICAgICAgICA6IChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKVxuICAgICAgICAgICAgICAgICAgICA/ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm4oYFdyaXRlIG9wZXJhdGlvbiBmYWlsZWQ6IGNvbXB1dGVkIHByb3BlcnR5IFwiJHtrZXl9XCIgaXMgcmVhZG9ubHkuYCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgOiBOT09QO1xuICAgICAgICAgICAgY29uc3QgYyA9IGNvbXB1dGVkKHtcbiAgICAgICAgICAgICAgICBnZXQsXG4gICAgICAgICAgICAgICAgc2V0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjdHgsIGtleSwge1xuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGdldDogKCkgPT4gYy52YWx1ZSxcbiAgICAgICAgICAgICAgICBzZXQ6IHYgPT4gKGMudmFsdWUgPSB2KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgY2hlY2tEdXBsaWNhdGVQcm9wZXJ0aWVzKFwiQ29tcHV0ZWRcIiAvKiBPcHRpb25UeXBlcy5DT01QVVRFRCAqLywga2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAod2F0Y2hPcHRpb25zKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHdhdGNoT3B0aW9ucykge1xuICAgICAgICAgICAgY3JlYXRlV2F0Y2hlcih3YXRjaE9wdGlvbnNba2V5XSwgY3R4LCBwdWJsaWNUaGlzLCBrZXkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChwcm92aWRlT3B0aW9ucykge1xuICAgICAgICBjb25zdCBwcm92aWRlcyA9IGlzRnVuY3Rpb24ocHJvdmlkZU9wdGlvbnMpXG4gICAgICAgICAgICA/IHByb3ZpZGVPcHRpb25zLmNhbGwocHVibGljVGhpcylcbiAgICAgICAgICAgIDogcHJvdmlkZU9wdGlvbnM7XG4gICAgICAgIFJlZmxlY3Qub3duS2V5cyhwcm92aWRlcykuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICAgICAgcHJvdmlkZShrZXksIHByb3ZpZGVzW2tleV0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGNyZWF0ZWQpIHtcbiAgICAgICAgY2FsbEhvb2soY3JlYXRlZCwgaW5zdGFuY2UsIFwiY1wiIC8qIExpZmVjeWNsZUhvb2tzLkNSRUFURUQgKi8pO1xuICAgIH1cbiAgICBmdW5jdGlvbiByZWdpc3RlckxpZmVjeWNsZUhvb2socmVnaXN0ZXIsIGhvb2spIHtcbiAgICAgICAgaWYgKGlzQXJyYXkoaG9vaykpIHtcbiAgICAgICAgICAgIGhvb2suZm9yRWFjaChfaG9vayA9PiByZWdpc3RlcihfaG9vay5iaW5kKHB1YmxpY1RoaXMpKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaG9vaykge1xuICAgICAgICAgICAgcmVnaXN0ZXIoaG9vay5iaW5kKHB1YmxpY1RoaXMpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25CZWZvcmVNb3VudCwgYmVmb3JlTW91bnQpO1xuICAgIHJlZ2lzdGVyTGlmZWN5Y2xlSG9vayhvbk1vdW50ZWQsIG1vdW50ZWQpO1xuICAgIHJlZ2lzdGVyTGlmZWN5Y2xlSG9vayhvbkJlZm9yZVVwZGF0ZSwgYmVmb3JlVXBkYXRlKTtcbiAgICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25VcGRhdGVkLCB1cGRhdGVkKTtcbiAgICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25BY3RpdmF0ZWQsIGFjdGl2YXRlZCk7XG4gICAgcmVnaXN0ZXJMaWZlY3ljbGVIb29rKG9uRGVhY3RpdmF0ZWQsIGRlYWN0aXZhdGVkKTtcbiAgICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25FcnJvckNhcHR1cmVkLCBlcnJvckNhcHR1cmVkKTtcbiAgICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25SZW5kZXJUcmFja2VkLCByZW5kZXJUcmFja2VkKTtcbiAgICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25SZW5kZXJUcmlnZ2VyZWQsIHJlbmRlclRyaWdnZXJlZCk7XG4gICAgcmVnaXN0ZXJMaWZlY3ljbGVIb29rKG9uQmVmb3JlVW5tb3VudCwgYmVmb3JlVW5tb3VudCk7XG4gICAgcmVnaXN0ZXJMaWZlY3ljbGVIb29rKG9uVW5tb3VudGVkLCB1bm1vdW50ZWQpO1xuICAgIHJlZ2lzdGVyTGlmZWN5Y2xlSG9vayhvblNlcnZlclByZWZldGNoLCBzZXJ2ZXJQcmVmZXRjaCk7XG4gICAgaWYgKGlzQXJyYXkoZXhwb3NlKSkge1xuICAgICAgICBpZiAoZXhwb3NlLmxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3QgZXhwb3NlZCA9IGluc3RhbmNlLmV4cG9zZWQgfHwgKGluc3RhbmNlLmV4cG9zZWQgPSB7fSk7XG4gICAgICAgICAgICBleHBvc2UuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvc2VkLCBrZXksIHtcbiAgICAgICAgICAgICAgICAgICAgZ2V0OiAoKSA9PiBwdWJsaWNUaGlzW2tleV0sXG4gICAgICAgICAgICAgICAgICAgIHNldDogdmFsID0+IChwdWJsaWNUaGlzW2tleV0gPSB2YWwpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghaW5zdGFuY2UuZXhwb3NlZCkge1xuICAgICAgICAgICAgaW5zdGFuY2UuZXhwb3NlZCA9IHt9O1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIG9wdGlvbnMgdGhhdCBhcmUgaGFuZGxlZCB3aGVuIGNyZWF0aW5nIHRoZSBpbnN0YW5jZSBidXQgYWxzbyBuZWVkIHRvIGJlXG4gICAgLy8gYXBwbGllZCBmcm9tIG1peGluc1xuICAgIGlmIChyZW5kZXIgJiYgaW5zdGFuY2UucmVuZGVyID09PSBOT09QKSB7XG4gICAgICAgIGluc3RhbmNlLnJlbmRlciA9IHJlbmRlcjtcbiAgICB9XG4gICAgaWYgKGluaGVyaXRBdHRycyAhPSBudWxsKSB7XG4gICAgICAgIGluc3RhbmNlLmluaGVyaXRBdHRycyA9IGluaGVyaXRBdHRycztcbiAgICB9XG4gICAgLy8gYXNzZXQgb3B0aW9ucy5cbiAgICBpZiAoY29tcG9uZW50cylcbiAgICAgICAgaW5zdGFuY2UuY29tcG9uZW50cyA9IGNvbXBvbmVudHM7XG4gICAgaWYgKGRpcmVjdGl2ZXMpXG4gICAgICAgIGluc3RhbmNlLmRpcmVjdGl2ZXMgPSBkaXJlY3RpdmVzO1xufVxuZnVuY3Rpb24gcmVzb2x2ZUluamVjdGlvbnMoaW5qZWN0T3B0aW9ucywgY3R4LCBjaGVja0R1cGxpY2F0ZVByb3BlcnRpZXMgPSBOT09QLCB1bndyYXBSZWYgPSBmYWxzZSkge1xuICAgIGlmIChpc0FycmF5KGluamVjdE9wdGlvbnMpKSB7XG4gICAgICAgIGluamVjdE9wdGlvbnMgPSBub3JtYWxpemVJbmplY3QoaW5qZWN0T3B0aW9ucyk7XG4gICAgfVxuICAgIGZvciAoY29uc3Qga2V5IGluIGluamVjdE9wdGlvbnMpIHtcbiAgICAgICAgY29uc3Qgb3B0ID0gaW5qZWN0T3B0aW9uc1trZXldO1xuICAgICAgICBsZXQgaW5qZWN0ZWQ7XG4gICAgICAgIGlmIChpc09iamVjdChvcHQpKSB7XG4gICAgICAgICAgICBpZiAoJ2RlZmF1bHQnIGluIG9wdCkge1xuICAgICAgICAgICAgICAgIGluamVjdGVkID0gaW5qZWN0KG9wdC5mcm9tIHx8IGtleSwgb3B0LmRlZmF1bHQsIHRydWUgLyogdHJlYXQgZGVmYXVsdCBmdW5jdGlvbiBhcyBmYWN0b3J5ICovKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGluamVjdGVkID0gaW5qZWN0KG9wdC5mcm9tIHx8IGtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpbmplY3RlZCA9IGluamVjdChvcHQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1JlZihpbmplY3RlZCkpIHtcbiAgICAgICAgICAgIC8vIFRPRE8gcmVtb3ZlIHRoZSBjaGVjayBpbiAzLjNcbiAgICAgICAgICAgIGlmICh1bndyYXBSZWYpIHtcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4LCBrZXksIHtcbiAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBnZXQ6ICgpID0+IGluamVjdGVkLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBzZXQ6IHYgPT4gKGluamVjdGVkLnZhbHVlID0gdilcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgd2FybihgaW5qZWN0ZWQgcHJvcGVydHkgXCIke2tleX1cIiBpcyBhIHJlZiBhbmQgd2lsbCBiZSBhdXRvLXVud3JhcHBlZCBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBhbmQgbm8gbG9uZ2VyIG5lZWRzIFxcYC52YWx1ZVxcYCBpbiB0aGUgbmV4dCBtaW5vciByZWxlYXNlLiBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBUbyBvcHQtaW4gdG8gdGhlIG5ldyBiZWhhdmlvciBub3csIGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYHNldCBcXGBhcHAuY29uZmlnLnVud3JhcEluamVjdGVkUmVmID0gdHJ1ZVxcYCAodGhpcyBjb25maWcgaXMgYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgdGVtcG9yYXJ5IGFuZCB3aWxsIG5vdCBiZSBuZWVkZWQgaW4gdGhlIGZ1dHVyZS4pYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN0eFtrZXldID0gaW5qZWN0ZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjdHhba2V5XSA9IGluamVjdGVkO1xuICAgICAgICB9XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgIGNoZWNrRHVwbGljYXRlUHJvcGVydGllcyhcIkluamVjdFwiIC8qIE9wdGlvblR5cGVzLklOSkVDVCAqLywga2V5KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGNhbGxIb29rKGhvb2ssIGluc3RhbmNlLCB0eXBlKSB7XG4gICAgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoaXNBcnJheShob29rKVxuICAgICAgICA/IGhvb2subWFwKGggPT4gaC5iaW5kKGluc3RhbmNlLnByb3h5KSlcbiAgICAgICAgOiBob29rLmJpbmQoaW5zdGFuY2UucHJveHkpLCBpbnN0YW5jZSwgdHlwZSk7XG59XG5mdW5jdGlvbiBjcmVhdGVXYXRjaGVyKHJhdywgY3R4LCBwdWJsaWNUaGlzLCBrZXkpIHtcbiAgICBjb25zdCBnZXR0ZXIgPSBrZXkuaW5jbHVkZXMoJy4nKVxuICAgICAgICA/IGNyZWF0ZVBhdGhHZXR0ZXIocHVibGljVGhpcywga2V5KVxuICAgICAgICA6ICgpID0+IHB1YmxpY1RoaXNba2V5XTtcbiAgICBpZiAoaXNTdHJpbmcocmF3KSkge1xuICAgICAgICBjb25zdCBoYW5kbGVyID0gY3R4W3Jhd107XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKGhhbmRsZXIpKSB7XG4gICAgICAgICAgICB3YXRjaChnZXR0ZXIsIGhhbmRsZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgd2FybihgSW52YWxpZCB3YXRjaCBoYW5kbGVyIHNwZWNpZmllZCBieSBrZXkgXCIke3Jhd31cImAsIGhhbmRsZXIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzRnVuY3Rpb24ocmF3KSkge1xuICAgICAgICB3YXRjaChnZXR0ZXIsIHJhdy5iaW5kKHB1YmxpY1RoaXMpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNPYmplY3QocmF3KSkge1xuICAgICAgICBpZiAoaXNBcnJheShyYXcpKSB7XG4gICAgICAgICAgICByYXcuZm9yRWFjaChyID0+IGNyZWF0ZVdhdGNoZXIociwgY3R4LCBwdWJsaWNUaGlzLCBrZXkpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZXIgPSBpc0Z1bmN0aW9uKHJhdy5oYW5kbGVyKVxuICAgICAgICAgICAgICAgID8gcmF3LmhhbmRsZXIuYmluZChwdWJsaWNUaGlzKVxuICAgICAgICAgICAgICAgIDogY3R4W3Jhdy5oYW5kbGVyXTtcbiAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGhhbmRsZXIpKSB7XG4gICAgICAgICAgICAgICAgd2F0Y2goZ2V0dGVyLCBoYW5kbGVyLCByYXcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgd2FybihgSW52YWxpZCB3YXRjaCBoYW5kbGVyIHNwZWNpZmllZCBieSBrZXkgXCIke3Jhdy5oYW5kbGVyfVwiYCwgaGFuZGxlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIHdhcm4oYEludmFsaWQgd2F0Y2ggb3B0aW9uOiBcIiR7a2V5fVwiYCwgcmF3KTtcbiAgICB9XG59XG4vKipcbiAqIFJlc29sdmUgbWVyZ2VkIG9wdGlvbnMgYW5kIGNhY2hlIGl0IG9uIHRoZSBjb21wb25lbnQuXG4gKiBUaGlzIGlzIGRvbmUgb25seSBvbmNlIHBlci1jb21wb25lbnQgc2luY2UgdGhlIG1lcmdpbmcgZG9lcyBub3QgaW52b2x2ZVxuICogaW5zdGFuY2VzLlxuICovXG5mdW5jdGlvbiByZXNvbHZlTWVyZ2VkT3B0aW9ucyhpbnN0YW5jZSkge1xuICAgIGNvbnN0IGJhc2UgPSBpbnN0YW5jZS50eXBlO1xuICAgIGNvbnN0IHsgbWl4aW5zLCBleHRlbmRzOiBleHRlbmRzT3B0aW9ucyB9ID0gYmFzZTtcbiAgICBjb25zdCB7IG1peGluczogZ2xvYmFsTWl4aW5zLCBvcHRpb25zQ2FjaGU6IGNhY2hlLCBjb25maWc6IHsgb3B0aW9uTWVyZ2VTdHJhdGVnaWVzIH0gfSA9IGluc3RhbmNlLmFwcENvbnRleHQ7XG4gICAgY29uc3QgY2FjaGVkID0gY2FjaGUuZ2V0KGJhc2UpO1xuICAgIGxldCByZXNvbHZlZDtcbiAgICBpZiAoY2FjaGVkKSB7XG4gICAgICAgIHJlc29sdmVkID0gY2FjaGVkO1xuICAgIH1cbiAgICBlbHNlIGlmICghZ2xvYmFsTWl4aW5zLmxlbmd0aCAmJiAhbWl4aW5zICYmICFleHRlbmRzT3B0aW9ucykge1xuICAgICAgICB7XG4gICAgICAgICAgICByZXNvbHZlZCA9IGJhc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJlc29sdmVkID0ge307XG4gICAgICAgIGlmIChnbG9iYWxNaXhpbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICBnbG9iYWxNaXhpbnMuZm9yRWFjaChtID0+IG1lcmdlT3B0aW9ucyhyZXNvbHZlZCwgbSwgb3B0aW9uTWVyZ2VTdHJhdGVnaWVzLCB0cnVlKSk7XG4gICAgICAgIH1cbiAgICAgICAgbWVyZ2VPcHRpb25zKHJlc29sdmVkLCBiYXNlLCBvcHRpb25NZXJnZVN0cmF0ZWdpZXMpO1xuICAgIH1cbiAgICBpZiAoaXNPYmplY3QoYmFzZSkpIHtcbiAgICAgICAgY2FjaGUuc2V0KGJhc2UsIHJlc29sdmVkKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc29sdmVkO1xufVxuZnVuY3Rpb24gbWVyZ2VPcHRpb25zKHRvLCBmcm9tLCBzdHJhdHMsIGFzTWl4aW4gPSBmYWxzZSkge1xuICAgIGNvbnN0IHsgbWl4aW5zLCBleHRlbmRzOiBleHRlbmRzT3B0aW9ucyB9ID0gZnJvbTtcbiAgICBpZiAoZXh0ZW5kc09wdGlvbnMpIHtcbiAgICAgICAgbWVyZ2VPcHRpb25zKHRvLCBleHRlbmRzT3B0aW9ucywgc3RyYXRzLCB0cnVlKTtcbiAgICB9XG4gICAgaWYgKG1peGlucykge1xuICAgICAgICBtaXhpbnMuZm9yRWFjaCgobSkgPT4gbWVyZ2VPcHRpb25zKHRvLCBtLCBzdHJhdHMsIHRydWUpKTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgaW4gZnJvbSkge1xuICAgICAgICBpZiAoYXNNaXhpbiAmJiBrZXkgPT09ICdleHBvc2UnKSB7XG4gICAgICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcbiAgICAgICAgICAgICAgICB3YXJuKGBcImV4cG9zZVwiIG9wdGlvbiBpcyBpZ25vcmVkIHdoZW4gZGVjbGFyZWQgaW4gbWl4aW5zIG9yIGV4dGVuZHMuIGAgK1xuICAgICAgICAgICAgICAgICAgICBgSXQgc2hvdWxkIG9ubHkgYmUgZGVjbGFyZWQgaW4gdGhlIGJhc2UgY29tcG9uZW50IGl0c2VsZi5gKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHN0cmF0ID0gaW50ZXJuYWxPcHRpb25NZXJnZVN0cmF0c1trZXldIHx8IChzdHJhdHMgJiYgc3RyYXRzW2tleV0pO1xuICAgICAgICAgICAgdG9ba2V5XSA9IHN0cmF0ID8gc3RyYXQodG9ba2V5XSwgZnJvbVtrZXldKSA6IGZyb21ba2V5XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG87XG59XG5jb25zdCBpbnRlcm5hbE9wdGlvbk1lcmdlU3RyYXRzID0ge1xuICAgIGRhdGE6IG1lcmdlRGF0YUZuLFxuICAgIHByb3BzOiBtZXJnZU9iamVjdE9wdGlvbnMsXG4gICAgZW1pdHM6IG1lcmdlT2JqZWN0T3B0aW9ucyxcbiAgICAvLyBvYmplY3RzXG4gICAgbWV0aG9kczogbWVyZ2VPYmplY3RPcHRpb25zLFxuICAgIGNvbXB1dGVkOiBtZXJnZU9iamVjdE9wdGlvbnMsXG4gICAgLy8gbGlmZWN5Y2xlXG4gICAgYmVmb3JlQ3JlYXRlOiBtZXJnZUFzQXJyYXksXG4gICAgY3JlYXRlZDogbWVyZ2VBc0FycmF5LFxuICAgIGJlZm9yZU1vdW50OiBtZXJnZUFzQXJyYXksXG4gICAgbW91bnRlZDogbWVyZ2VBc0FycmF5LFxuICAgIGJlZm9yZVVwZGF0ZTogbWVyZ2VBc0FycmF5LFxuICAgIHVwZGF0ZWQ6IG1lcmdlQXNBcnJheSxcbiAgICBiZWZvcmVEZXN0cm95OiBtZXJnZUFzQXJyYXksXG4gICAgYmVmb3JlVW5tb3VudDogbWVyZ2VBc0FycmF5LFxuICAgIGRlc3Ryb3llZDogbWVyZ2VBc0FycmF5LFxuICAgIHVubW91bnRlZDogbWVyZ2VBc0FycmF5LFxuICAgIGFjdGl2YXRlZDogbWVyZ2VBc0FycmF5LFxuICAgIGRlYWN0aXZhdGVkOiBtZXJnZUFzQXJyYXksXG4gICAgZXJyb3JDYXB0dXJlZDogbWVyZ2VBc0FycmF5LFxuICAgIHNlcnZlclByZWZldGNoOiBtZXJnZUFzQXJyYXksXG4gICAgLy8gYXNzZXRzXG4gICAgY29tcG9uZW50czogbWVyZ2VPYmplY3RPcHRpb25zLFxuICAgIGRpcmVjdGl2ZXM6IG1lcmdlT2JqZWN0T3B0aW9ucyxcbiAgICAvLyB3YXRjaFxuICAgIHdhdGNoOiBtZXJnZVdhdGNoT3B0aW9ucyxcbiAgICAvLyBwcm92aWRlIC8gaW5qZWN0XG4gICAgcHJvdmlkZTogbWVyZ2VEYXRhRm4sXG4gICAgaW5qZWN0OiBtZXJnZUluamVjdFxufTtcbmZ1bmN0aW9uIG1lcmdlRGF0YUZuKHRvLCBmcm9tKSB7XG4gICAgaWYgKCFmcm9tKSB7XG4gICAgICAgIHJldHVybiB0bztcbiAgICB9XG4gICAgaWYgKCF0bykge1xuICAgICAgICByZXR1cm4gZnJvbTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uIG1lcmdlZERhdGFGbigpIHtcbiAgICAgICAgcmV0dXJuIChleHRlbmQpKGlzRnVuY3Rpb24odG8pID8gdG8uY2FsbCh0aGlzLCB0aGlzKSA6IHRvLCBpc0Z1bmN0aW9uKGZyb20pID8gZnJvbS5jYWxsKHRoaXMsIHRoaXMpIDogZnJvbSk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIG1lcmdlSW5qZWN0KHRvLCBmcm9tKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0T3B0aW9ucyhub3JtYWxpemVJbmplY3QodG8pLCBub3JtYWxpemVJbmplY3QoZnJvbSkpO1xufVxuZnVuY3Rpb24gbm9ybWFsaXplSW5qZWN0KHJhdykge1xuICAgIGlmIChpc0FycmF5KHJhdykpIHtcbiAgICAgICAgY29uc3QgcmVzID0ge307XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmF3Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICByZXNbcmF3W2ldXSA9IHJhd1tpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgICByZXR1cm4gcmF3O1xufVxuZnVuY3Rpb24gbWVyZ2VBc0FycmF5KHRvLCBmcm9tKSB7XG4gICAgcmV0dXJuIHRvID8gWy4uLm5ldyBTZXQoW10uY29uY2F0KHRvLCBmcm9tKSldIDogZnJvbTtcbn1cbmZ1bmN0aW9uIG1lcmdlT2JqZWN0T3B0aW9ucyh0bywgZnJvbSkge1xuICAgIHJldHVybiB0byA/IGV4dGVuZChleHRlbmQoT2JqZWN0LmNyZWF0ZShudWxsKSwgdG8pLCBmcm9tKSA6IGZyb207XG59XG5mdW5jdGlvbiBtZXJnZVdhdGNoT3B0aW9ucyh0bywgZnJvbSkge1xuICAgIGlmICghdG8pXG4gICAgICAgIHJldHVybiBmcm9tO1xuICAgIGlmICghZnJvbSlcbiAgICAgICAgcmV0dXJuIHRvO1xuICAgIGNvbnN0IG1lcmdlZCA9IGV4dGVuZChPYmplY3QuY3JlYXRlKG51bGwpLCB0byk7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gZnJvbSkge1xuICAgICAgICBtZXJnZWRba2V5XSA9IG1lcmdlQXNBcnJheSh0b1trZXldLCBmcm9tW2tleV0pO1xuICAgIH1cbiAgICByZXR1cm4gbWVyZ2VkO1xufVxuXG5mdW5jdGlvbiBpbml0UHJvcHMoaW5zdGFuY2UsIHJhd1Byb3BzLCBpc1N0YXRlZnVsLCAvLyByZXN1bHQgb2YgYml0d2lzZSBmbGFnIGNvbXBhcmlzb25cbmlzU1NSID0gZmFsc2UpIHtcbiAgICBjb25zdCBwcm9wcyA9IHt9O1xuICAgIGNvbnN0IGF0dHJzID0ge307XG4gICAgZGVmKGF0dHJzLCBJbnRlcm5hbE9iamVjdEtleSwgMSk7XG4gICAgaW5zdGFuY2UucHJvcHNEZWZhdWx0cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgc2V0RnVsbFByb3BzKGluc3RhbmNlLCByYXdQcm9wcywgcHJvcHMsIGF0dHJzKTtcbiAgICAvLyBlbnN1cmUgYWxsIGRlY2xhcmVkIHByb3Aga2V5cyBhcmUgcHJlc2VudFxuICAgIGZvciAoY29uc3Qga2V5IGluIGluc3RhbmNlLnByb3BzT3B0aW9uc1swXSkge1xuICAgICAgICBpZiAoIShrZXkgaW4gcHJvcHMpKSB7XG4gICAgICAgICAgICBwcm9wc1trZXldID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIHZhbGlkYXRpb25cbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIHZhbGlkYXRlUHJvcHMocmF3UHJvcHMgfHwge30sIHByb3BzLCBpbnN0YW5jZSk7XG4gICAgfVxuICAgIGlmIChpc1N0YXRlZnVsKSB7XG4gICAgICAgIC8vIHN0YXRlZnVsXG4gICAgICAgIGluc3RhbmNlLnByb3BzID0gaXNTU1IgPyBwcm9wcyA6IHNoYWxsb3dSZWFjdGl2ZShwcm9wcyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoIWluc3RhbmNlLnR5cGUucHJvcHMpIHtcbiAgICAgICAgICAgIC8vIGZ1bmN0aW9uYWwgdy8gb3B0aW9uYWwgcHJvcHMsIHByb3BzID09PSBhdHRyc1xuICAgICAgICAgICAgaW5zdGFuY2UucHJvcHMgPSBhdHRycztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGZ1bmN0aW9uYWwgdy8gZGVjbGFyZWQgcHJvcHNcbiAgICAgICAgICAgIGluc3RhbmNlLnByb3BzID0gcHJvcHM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaW5zdGFuY2UuYXR0cnMgPSBhdHRycztcbn1cbmZ1bmN0aW9uIGlzSW5IbXJDb250ZXh0KGluc3RhbmNlKSB7XG4gICAgd2hpbGUgKGluc3RhbmNlKSB7XG4gICAgICAgIGlmIChpbnN0YW5jZS50eXBlLl9faG1ySWQpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgaW5zdGFuY2UgPSBpbnN0YW5jZS5wYXJlbnQ7XG4gICAgfVxufVxuZnVuY3Rpb24gdXBkYXRlUHJvcHMoaW5zdGFuY2UsIHJhd1Byb3BzLCByYXdQcmV2UHJvcHMsIG9wdGltaXplZCkge1xuICAgIGNvbnN0IHsgcHJvcHMsIGF0dHJzLCB2bm9kZTogeyBwYXRjaEZsYWcgfSB9ID0gaW5zdGFuY2U7XG4gICAgY29uc3QgcmF3Q3VycmVudFByb3BzID0gdG9SYXcocHJvcHMpO1xuICAgIGNvbnN0IFtvcHRpb25zXSA9IGluc3RhbmNlLnByb3BzT3B0aW9ucztcbiAgICBsZXQgaGFzQXR0cnNDaGFuZ2VkID0gZmFsc2U7XG4gICAgaWYgKFxuICAgIC8vIGFsd2F5cyBmb3JjZSBmdWxsIGRpZmYgaW4gZGV2XG4gICAgLy8gLSAjMTk0MiBpZiBobXIgaXMgZW5hYmxlZCB3aXRoIHNmYyBjb21wb25lbnRcbiAgICAvLyAtIHZpdGUjODcyIG5vbi1zZmMgY29tcG9uZW50IHVzZWQgYnkgc2ZjIGNvbXBvbmVudFxuICAgICEoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGlzSW5IbXJDb250ZXh0KGluc3RhbmNlKSkgJiZcbiAgICAgICAgKG9wdGltaXplZCB8fCBwYXRjaEZsYWcgPiAwKSAmJlxuICAgICAgICAhKHBhdGNoRmxhZyAmIDE2IC8qIFBhdGNoRmxhZ3MuRlVMTF9QUk9QUyAqLykpIHtcbiAgICAgICAgaWYgKHBhdGNoRmxhZyAmIDggLyogUGF0Y2hGbGFncy5QUk9QUyAqLykge1xuICAgICAgICAgICAgLy8gQ29tcGlsZXItZ2VuZXJhdGVkIHByb3BzICYgbm8ga2V5cyBjaGFuZ2UsIGp1c3Qgc2V0IHRoZSB1cGRhdGVkXG4gICAgICAgICAgICAvLyB0aGUgcHJvcHMuXG4gICAgICAgICAgICBjb25zdCBwcm9wc1RvVXBkYXRlID0gaW5zdGFuY2Uudm5vZGUuZHluYW1pY1Byb3BzO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcm9wc1RvVXBkYXRlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IGtleSA9IHByb3BzVG9VcGRhdGVbaV07XG4gICAgICAgICAgICAgICAgLy8gc2tpcCBpZiB0aGUgcHJvcCBrZXkgaXMgYSBkZWNsYXJlZCBlbWl0IGV2ZW50IGxpc3RlbmVyXG4gICAgICAgICAgICAgICAgaWYgKGlzRW1pdExpc3RlbmVyKGluc3RhbmNlLmVtaXRzT3B0aW9ucywga2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gUFJPUFMgZmxhZyBndWFyYW50ZWVzIHJhd1Byb3BzIHRvIGJlIG5vbi1udWxsXG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSByYXdQcm9wc1trZXldO1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGF0dHIgLyBwcm9wcyBzZXBhcmF0aW9uIHdhcyBkb25lIG9uIGluaXQgYW5kIHdpbGwgYmUgY29uc2lzdGVudFxuICAgICAgICAgICAgICAgICAgICAvLyBpbiB0aGlzIGNvZGUgcGF0aCwgc28ganVzdCBjaGVjayBpZiBhdHRycyBoYXZlIGl0LlxuICAgICAgICAgICAgICAgICAgICBpZiAoaGFzT3duKGF0dHJzLCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgIT09IGF0dHJzW2tleV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyc1trZXldID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzQXR0cnNDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbWVsaXplZEtleSA9IGNhbWVsaXplKGtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wc1tjYW1lbGl6ZWRLZXldID0gcmVzb2x2ZVByb3BWYWx1ZShvcHRpb25zLCByYXdDdXJyZW50UHJvcHMsIGNhbWVsaXplZEtleSwgdmFsdWUsIGluc3RhbmNlLCBmYWxzZSAvKiBpc0Fic2VudCAqLyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gYXR0cnNba2V5XSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnNba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFzQXR0cnNDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gZnVsbCBwcm9wcyB1cGRhdGUuXG4gICAgICAgIGlmIChzZXRGdWxsUHJvcHMoaW5zdGFuY2UsIHJhd1Byb3BzLCBwcm9wcywgYXR0cnMpKSB7XG4gICAgICAgICAgICBoYXNBdHRyc0NoYW5nZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIGluIGNhc2Ugb2YgZHluYW1pYyBwcm9wcywgY2hlY2sgaWYgd2UgbmVlZCB0byBkZWxldGUga2V5cyBmcm9tXG4gICAgICAgIC8vIHRoZSBwcm9wcyBvYmplY3RcbiAgICAgICAgbGV0IGtlYmFiS2V5O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiByYXdDdXJyZW50UHJvcHMpIHtcbiAgICAgICAgICAgIGlmICghcmF3UHJvcHMgfHxcbiAgICAgICAgICAgICAgICAvLyBmb3IgY2FtZWxDYXNlXG4gICAgICAgICAgICAgICAgKCFoYXNPd24ocmF3UHJvcHMsIGtleSkgJiZcbiAgICAgICAgICAgICAgICAgICAgLy8gaXQncyBwb3NzaWJsZSB0aGUgb3JpZ2luYWwgcHJvcHMgd2FzIHBhc3NlZCBpbiBhcyBrZWJhYi1jYXNlXG4gICAgICAgICAgICAgICAgICAgIC8vIGFuZCBjb252ZXJ0ZWQgdG8gY2FtZWxDYXNlICgjOTU1KVxuICAgICAgICAgICAgICAgICAgICAoKGtlYmFiS2V5ID0gaHlwaGVuYXRlKGtleSkpID09PSBrZXkgfHwgIWhhc093bihyYXdQcm9wcywga2ViYWJLZXkpKSkpIHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmF3UHJldlByb3BzICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBmb3IgY2FtZWxDYXNlXG4gICAgICAgICAgICAgICAgICAgICAgICAocmF3UHJldlByb3BzW2tleV0gIT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZvciBrZWJhYi1jYXNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmF3UHJldlByb3BzW2tlYmFiS2V5XSAhPT0gdW5kZWZpbmVkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHNba2V5XSA9IHJlc29sdmVQcm9wVmFsdWUob3B0aW9ucywgcmF3Q3VycmVudFByb3BzLCBrZXksIHVuZGVmaW5lZCwgaW5zdGFuY2UsIHRydWUgLyogaXNBYnNlbnQgKi8pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgcHJvcHNba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gaW4gdGhlIGNhc2Ugb2YgZnVuY3Rpb25hbCBjb21wb25lbnQgdy9vIHByb3BzIGRlY2xhcmF0aW9uLCBwcm9wcyBhbmRcbiAgICAgICAgLy8gYXR0cnMgcG9pbnQgdG8gdGhlIHNhbWUgb2JqZWN0IHNvIGl0IHNob3VsZCBhbHJlYWR5IGhhdmUgYmVlbiB1cGRhdGVkLlxuICAgICAgICBpZiAoYXR0cnMgIT09IHJhd0N1cnJlbnRQcm9wcykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gYXR0cnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXJhd1Byb3BzIHx8XG4gICAgICAgICAgICAgICAgICAgICghaGFzT3duKHJhd1Byb3BzLCBrZXkpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAoIWZhbHNlICkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdHRyc1trZXldO1xuICAgICAgICAgICAgICAgICAgICBoYXNBdHRyc0NoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyB0cmlnZ2VyIHVwZGF0ZXMgZm9yICRhdHRycyBpbiBjYXNlIGl0J3MgdXNlZCBpbiBjb21wb25lbnQgc2xvdHNcbiAgICBpZiAoaGFzQXR0cnNDaGFuZ2VkKSB7XG4gICAgICAgIHRyaWdnZXIoaW5zdGFuY2UsIFwic2V0XCIgLyogVHJpZ2dlck9wVHlwZXMuU0VUICovLCAnJGF0dHJzJyk7XG4gICAgfVxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgdmFsaWRhdGVQcm9wcyhyYXdQcm9wcyB8fCB7fSwgcHJvcHMsIGluc3RhbmNlKTtcbiAgICB9XG59XG5mdW5jdGlvbiBzZXRGdWxsUHJvcHMoaW5zdGFuY2UsIHJhd1Byb3BzLCBwcm9wcywgYXR0cnMpIHtcbiAgICBjb25zdCBbb3B0aW9ucywgbmVlZENhc3RLZXlzXSA9IGluc3RhbmNlLnByb3BzT3B0aW9ucztcbiAgICBsZXQgaGFzQXR0cnNDaGFuZ2VkID0gZmFsc2U7XG4gICAgbGV0IHJhd0Nhc3RWYWx1ZXM7XG4gICAgaWYgKHJhd1Byb3BzKSB7XG4gICAgICAgIGZvciAobGV0IGtleSBpbiByYXdQcm9wcykge1xuICAgICAgICAgICAgLy8ga2V5LCByZWYgYXJlIHJlc2VydmVkIGFuZCBuZXZlciBwYXNzZWQgZG93blxuICAgICAgICAgICAgaWYgKGlzUmVzZXJ2ZWRQcm9wKGtleSkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gcmF3UHJvcHNba2V5XTtcbiAgICAgICAgICAgIC8vIHByb3Agb3B0aW9uIG5hbWVzIGFyZSBjYW1lbGl6ZWQgZHVyaW5nIG5vcm1hbGl6YXRpb24sIHNvIHRvIHN1cHBvcnRcbiAgICAgICAgICAgIC8vIGtlYmFiIC0+IGNhbWVsIGNvbnZlcnNpb24gaGVyZSB3ZSBuZWVkIHRvIGNhbWVsaXplIHRoZSBrZXkuXG4gICAgICAgICAgICBsZXQgY2FtZWxLZXk7XG4gICAgICAgICAgICBpZiAob3B0aW9ucyAmJiBoYXNPd24ob3B0aW9ucywgKGNhbWVsS2V5ID0gY2FtZWxpemUoa2V5KSkpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFuZWVkQ2FzdEtleXMgfHwgIW5lZWRDYXN0S2V5cy5pbmNsdWRlcyhjYW1lbEtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvcHNbY2FtZWxLZXldID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAocmF3Q2FzdFZhbHVlcyB8fCAocmF3Q2FzdFZhbHVlcyA9IHt9KSlbY2FtZWxLZXldID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIWlzRW1pdExpc3RlbmVyKGluc3RhbmNlLmVtaXRzT3B0aW9ucywga2V5KSkge1xuICAgICAgICAgICAgICAgIGlmICghKGtleSBpbiBhdHRycykgfHwgdmFsdWUgIT09IGF0dHJzW2tleV0pIHtcbiAgICAgICAgICAgICAgICAgICAgYXR0cnNba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBoYXNBdHRyc0NoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAobmVlZENhc3RLZXlzKSB7XG4gICAgICAgIGNvbnN0IHJhd0N1cnJlbnRQcm9wcyA9IHRvUmF3KHByb3BzKTtcbiAgICAgICAgY29uc3QgY2FzdFZhbHVlcyA9IHJhd0Nhc3RWYWx1ZXMgfHwgRU1QVFlfT0JKO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5lZWRDYXN0S2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3Qga2V5ID0gbmVlZENhc3RLZXlzW2ldO1xuICAgICAgICAgICAgcHJvcHNba2V5XSA9IHJlc29sdmVQcm9wVmFsdWUob3B0aW9ucywgcmF3Q3VycmVudFByb3BzLCBrZXksIGNhc3RWYWx1ZXNba2V5XSwgaW5zdGFuY2UsICFoYXNPd24oY2FzdFZhbHVlcywga2V5KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGhhc0F0dHJzQ2hhbmdlZDtcbn1cbmZ1bmN0aW9uIHJlc29sdmVQcm9wVmFsdWUob3B0aW9ucywgcHJvcHMsIGtleSwgdmFsdWUsIGluc3RhbmNlLCBpc0Fic2VudCkge1xuICAgIGNvbnN0IG9wdCA9IG9wdGlvbnNba2V5XTtcbiAgICBpZiAob3B0ICE9IG51bGwpIHtcbiAgICAgICAgY29uc3QgaGFzRGVmYXVsdCA9IGhhc093bihvcHQsICdkZWZhdWx0Jyk7XG4gICAgICAgIC8vIGRlZmF1bHQgdmFsdWVzXG4gICAgICAgIGlmIChoYXNEZWZhdWx0ICYmIHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRWYWx1ZSA9IG9wdC5kZWZhdWx0O1xuICAgICAgICAgICAgaWYgKG9wdC50eXBlICE9PSBGdW5jdGlvbiAmJiBpc0Z1bmN0aW9uKGRlZmF1bHRWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHByb3BzRGVmYXVsdHMgfSA9IGluc3RhbmNlO1xuICAgICAgICAgICAgICAgIGlmIChrZXkgaW4gcHJvcHNEZWZhdWx0cykge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHByb3BzRGVmYXVsdHNba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNldEN1cnJlbnRJbnN0YW5jZShpbnN0YW5jZSk7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gcHJvcHNEZWZhdWx0c1trZXldID0gZGVmYXVsdFZhbHVlLmNhbGwobnVsbCwgcHJvcHMpO1xuICAgICAgICAgICAgICAgICAgICB1bnNldEN1cnJlbnRJbnN0YW5jZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gZGVmYXVsdFZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGJvb2xlYW4gY2FzdGluZ1xuICAgICAgICBpZiAob3B0WzAgLyogQm9vbGVhbkZsYWdzLnNob3VsZENhc3QgKi9dKSB7XG4gICAgICAgICAgICBpZiAoaXNBYnNlbnQgJiYgIWhhc0RlZmF1bHQpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAob3B0WzEgLyogQm9vbGVhbkZsYWdzLnNob3VsZENhc3RUcnVlICovXSAmJlxuICAgICAgICAgICAgICAgICh2YWx1ZSA9PT0gJycgfHwgdmFsdWUgPT09IGh5cGhlbmF0ZShrZXkpKSkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG59XG5mdW5jdGlvbiBub3JtYWxpemVQcm9wc09wdGlvbnMoY29tcCwgYXBwQ29udGV4dCwgYXNNaXhpbiA9IGZhbHNlKSB7XG4gICAgY29uc3QgY2FjaGUgPSBhcHBDb250ZXh0LnByb3BzQ2FjaGU7XG4gICAgY29uc3QgY2FjaGVkID0gY2FjaGUuZ2V0KGNvbXApO1xuICAgIGlmIChjYWNoZWQpIHtcbiAgICAgICAgcmV0dXJuIGNhY2hlZDtcbiAgICB9XG4gICAgY29uc3QgcmF3ID0gY29tcC5wcm9wcztcbiAgICBjb25zdCBub3JtYWxpemVkID0ge307XG4gICAgY29uc3QgbmVlZENhc3RLZXlzID0gW107XG4gICAgLy8gYXBwbHkgbWl4aW4vZXh0ZW5kcyBwcm9wc1xuICAgIGxldCBoYXNFeHRlbmRzID0gZmFsc2U7XG4gICAgaWYgKF9fVlVFX09QVElPTlNfQVBJX18gJiYgIWlzRnVuY3Rpb24oY29tcCkpIHtcbiAgICAgICAgY29uc3QgZXh0ZW5kUHJvcHMgPSAocmF3KSA9PiB7XG4gICAgICAgICAgICBoYXNFeHRlbmRzID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnN0IFtwcm9wcywga2V5c10gPSBub3JtYWxpemVQcm9wc09wdGlvbnMocmF3LCBhcHBDb250ZXh0LCB0cnVlKTtcbiAgICAgICAgICAgIGV4dGVuZChub3JtYWxpemVkLCBwcm9wcyk7XG4gICAgICAgICAgICBpZiAoa2V5cylcbiAgICAgICAgICAgICAgICBuZWVkQ2FzdEtleXMucHVzaCguLi5rZXlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKCFhc01peGluICYmIGFwcENvbnRleHQubWl4aW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgYXBwQ29udGV4dC5taXhpbnMuZm9yRWFjaChleHRlbmRQcm9wcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbXAuZXh0ZW5kcykge1xuICAgICAgICAgICAgZXh0ZW5kUHJvcHMoY29tcC5leHRlbmRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29tcC5taXhpbnMpIHtcbiAgICAgICAgICAgIGNvbXAubWl4aW5zLmZvckVhY2goZXh0ZW5kUHJvcHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICghcmF3ICYmICFoYXNFeHRlbmRzKSB7XG4gICAgICAgIGlmIChpc09iamVjdChjb21wKSkge1xuICAgICAgICAgICAgY2FjaGUuc2V0KGNvbXAsIEVNUFRZX0FSUik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEVNUFRZX0FSUjtcbiAgICB9XG4gICAgaWYgKGlzQXJyYXkocmF3KSkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJhdy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhaXNTdHJpbmcocmF3W2ldKSkge1xuICAgICAgICAgICAgICAgIHdhcm4oYHByb3BzIG11c3QgYmUgc3RyaW5ncyB3aGVuIHVzaW5nIGFycmF5IHN5bnRheC5gLCByYXdbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZEtleSA9IGNhbWVsaXplKHJhd1tpXSk7XG4gICAgICAgICAgICBpZiAodmFsaWRhdGVQcm9wTmFtZShub3JtYWxpemVkS2V5KSkge1xuICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRbbm9ybWFsaXplZEtleV0gPSBFTVBUWV9PQko7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAocmF3KSB7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWlzT2JqZWN0KHJhdykpIHtcbiAgICAgICAgICAgIHdhcm4oYGludmFsaWQgcHJvcHMgb3B0aW9uc2AsIHJhdyk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gcmF3KSB7XG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkS2V5ID0gY2FtZWxpemUoa2V5KTtcbiAgICAgICAgICAgIGlmICh2YWxpZGF0ZVByb3BOYW1lKG5vcm1hbGl6ZWRLZXkpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3B0ID0gcmF3W2tleV07XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvcCA9IChub3JtYWxpemVkW25vcm1hbGl6ZWRLZXldID1cbiAgICAgICAgICAgICAgICAgICAgaXNBcnJheShvcHQpIHx8IGlzRnVuY3Rpb24ob3B0KSA/IHsgdHlwZTogb3B0IH0gOiBPYmplY3QuYXNzaWduKHt9LCBvcHQpKTtcbiAgICAgICAgICAgICAgICBpZiAocHJvcCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBib29sZWFuSW5kZXggPSBnZXRUeXBlSW5kZXgoQm9vbGVhbiwgcHJvcC50eXBlKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RyaW5nSW5kZXggPSBnZXRUeXBlSW5kZXgoU3RyaW5nLCBwcm9wLnR5cGUpO1xuICAgICAgICAgICAgICAgICAgICBwcm9wWzAgLyogQm9vbGVhbkZsYWdzLnNob3VsZENhc3QgKi9dID0gYm9vbGVhbkluZGV4ID4gLTE7XG4gICAgICAgICAgICAgICAgICAgIHByb3BbMSAvKiBCb29sZWFuRmxhZ3Muc2hvdWxkQ2FzdFRydWUgKi9dID1cbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZ0luZGV4IDwgMCB8fCBib29sZWFuSW5kZXggPCBzdHJpbmdJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlIHByb3AgbmVlZHMgYm9vbGVhbiBjYXN0aW5nIG9yIGRlZmF1bHQgdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJvb2xlYW5JbmRleCA+IC0xIHx8IGhhc093bihwcm9wLCAnZGVmYXVsdCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZWVkQ2FzdEtleXMucHVzaChub3JtYWxpemVkS2V5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCByZXMgPSBbbm9ybWFsaXplZCwgbmVlZENhc3RLZXlzXTtcbiAgICBpZiAoaXNPYmplY3QoY29tcCkpIHtcbiAgICAgICAgY2FjaGUuc2V0KGNvbXAsIHJlcyk7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG59XG5mdW5jdGlvbiB2YWxpZGF0ZVByb3BOYW1lKGtleSkge1xuICAgIGlmIChrZXlbMF0gIT09ICckJykge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIHdhcm4oYEludmFsaWQgcHJvcCBuYW1lOiBcIiR7a2V5fVwiIGlzIGEgcmVzZXJ2ZWQgcHJvcGVydHkuYCk7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbi8vIHVzZSBmdW5jdGlvbiBzdHJpbmcgbmFtZSB0byBjaGVjayB0eXBlIGNvbnN0cnVjdG9yc1xuLy8gc28gdGhhdCBpdCB3b3JrcyBhY3Jvc3Mgdm1zIC8gaWZyYW1lcy5cbmZ1bmN0aW9uIGdldFR5cGUoY3Rvcikge1xuICAgIGNvbnN0IG1hdGNoID0gY3RvciAmJiBjdG9yLnRvU3RyaW5nKCkubWF0Y2goL15cXHMqZnVuY3Rpb24gKFxcdyspLyk7XG4gICAgcmV0dXJuIG1hdGNoID8gbWF0Y2hbMV0gOiBjdG9yID09PSBudWxsID8gJ251bGwnIDogJyc7XG59XG5mdW5jdGlvbiBpc1NhbWVUeXBlKGEsIGIpIHtcbiAgICByZXR1cm4gZ2V0VHlwZShhKSA9PT0gZ2V0VHlwZShiKTtcbn1cbmZ1bmN0aW9uIGdldFR5cGVJbmRleCh0eXBlLCBleHBlY3RlZFR5cGVzKSB7XG4gICAgaWYgKGlzQXJyYXkoZXhwZWN0ZWRUeXBlcykpIHtcbiAgICAgICAgcmV0dXJuIGV4cGVjdGVkVHlwZXMuZmluZEluZGV4KHQgPT4gaXNTYW1lVHlwZSh0LCB0eXBlKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzRnVuY3Rpb24oZXhwZWN0ZWRUeXBlcykpIHtcbiAgICAgICAgcmV0dXJuIGlzU2FtZVR5cGUoZXhwZWN0ZWRUeXBlcywgdHlwZSkgPyAwIDogLTE7XG4gICAgfVxuICAgIHJldHVybiAtMTtcbn1cbi8qKlxuICogZGV2IG9ubHlcbiAqL1xuZnVuY3Rpb24gdmFsaWRhdGVQcm9wcyhyYXdQcm9wcywgcHJvcHMsIGluc3RhbmNlKSB7XG4gICAgY29uc3QgcmVzb2x2ZWRWYWx1ZXMgPSB0b1Jhdyhwcm9wcyk7XG4gICAgY29uc3Qgb3B0aW9ucyA9IGluc3RhbmNlLnByb3BzT3B0aW9uc1swXTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvcHRpb25zKSB7XG4gICAgICAgIGxldCBvcHQgPSBvcHRpb25zW2tleV07XG4gICAgICAgIGlmIChvcHQgPT0gbnVsbClcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB2YWxpZGF0ZVByb3Aoa2V5LCByZXNvbHZlZFZhbHVlc1trZXldLCBvcHQsICFoYXNPd24ocmF3UHJvcHMsIGtleSkgJiYgIWhhc093bihyYXdQcm9wcywgaHlwaGVuYXRlKGtleSkpKTtcbiAgICB9XG59XG4vKipcbiAqIGRldiBvbmx5XG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRlUHJvcChuYW1lLCB2YWx1ZSwgcHJvcCwgaXNBYnNlbnQpIHtcbiAgICBjb25zdCB7IHR5cGUsIHJlcXVpcmVkLCB2YWxpZGF0b3IgfSA9IHByb3A7XG4gICAgLy8gcmVxdWlyZWQhXG4gICAgaWYgKHJlcXVpcmVkICYmIGlzQWJzZW50KSB7XG4gICAgICAgIHdhcm4oJ01pc3NpbmcgcmVxdWlyZWQgcHJvcDogXCInICsgbmFtZSArICdcIicpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIG1pc3NpbmcgYnV0IG9wdGlvbmFsXG4gICAgaWYgKHZhbHVlID09IG51bGwgJiYgIXByb3AucmVxdWlyZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyB0eXBlIGNoZWNrXG4gICAgaWYgKHR5cGUgIT0gbnVsbCAmJiB0eXBlICE9PSB0cnVlKSB7XG4gICAgICAgIGxldCBpc1ZhbGlkID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IHR5cGVzID0gaXNBcnJheSh0eXBlKSA/IHR5cGUgOiBbdHlwZV07XG4gICAgICAgIGNvbnN0IGV4cGVjdGVkVHlwZXMgPSBbXTtcbiAgICAgICAgLy8gdmFsdWUgaXMgdmFsaWQgYXMgbG9uZyBhcyBvbmUgb2YgdGhlIHNwZWNpZmllZCB0eXBlcyBtYXRjaFxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHR5cGVzLmxlbmd0aCAmJiAhaXNWYWxpZDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCB7IHZhbGlkLCBleHBlY3RlZFR5cGUgfSA9IGFzc2VydFR5cGUodmFsdWUsIHR5cGVzW2ldKTtcbiAgICAgICAgICAgIGV4cGVjdGVkVHlwZXMucHVzaChleHBlY3RlZFR5cGUgfHwgJycpO1xuICAgICAgICAgICAgaXNWYWxpZCA9IHZhbGlkO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNWYWxpZCkge1xuICAgICAgICAgICAgd2FybihnZXRJbnZhbGlkVHlwZU1lc3NhZ2UobmFtZSwgdmFsdWUsIGV4cGVjdGVkVHlwZXMpKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBjdXN0b20gdmFsaWRhdG9yXG4gICAgaWYgKHZhbGlkYXRvciAmJiAhdmFsaWRhdG9yKHZhbHVlKSkge1xuICAgICAgICB3YXJuKCdJbnZhbGlkIHByb3A6IGN1c3RvbSB2YWxpZGF0b3IgY2hlY2sgZmFpbGVkIGZvciBwcm9wIFwiJyArIG5hbWUgKyAnXCIuJyk7XG4gICAgfVxufVxuY29uc3QgaXNTaW1wbGVUeXBlID0gLyojX19QVVJFX18qLyBtYWtlTWFwKCdTdHJpbmcsTnVtYmVyLEJvb2xlYW4sRnVuY3Rpb24sU3ltYm9sLEJpZ0ludCcpO1xuLyoqXG4gKiBkZXYgb25seVxuICovXG5mdW5jdGlvbiBhc3NlcnRUeXBlKHZhbHVlLCB0eXBlKSB7XG4gICAgbGV0IHZhbGlkO1xuICAgIGNvbnN0IGV4cGVjdGVkVHlwZSA9IGdldFR5cGUodHlwZSk7XG4gICAgaWYgKGlzU2ltcGxlVHlwZShleHBlY3RlZFR5cGUpKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0eXBlb2YgdmFsdWU7XG4gICAgICAgIHZhbGlkID0gdCA9PT0gZXhwZWN0ZWRUeXBlLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIC8vIGZvciBwcmltaXRpdmUgd3JhcHBlciBvYmplY3RzXG4gICAgICAgIGlmICghdmFsaWQgJiYgdCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIHZhbGlkID0gdmFsdWUgaW5zdGFuY2VvZiB0eXBlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGV4cGVjdGVkVHlwZSA9PT0gJ09iamVjdCcpIHtcbiAgICAgICAgdmFsaWQgPSBpc09iamVjdCh2YWx1ZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGV4cGVjdGVkVHlwZSA9PT0gJ0FycmF5Jykge1xuICAgICAgICB2YWxpZCA9IGlzQXJyYXkodmFsdWUpO1xuICAgIH1cbiAgICBlbHNlIGlmIChleHBlY3RlZFR5cGUgPT09ICdudWxsJykge1xuICAgICAgICB2YWxpZCA9IHZhbHVlID09PSBudWxsO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmFsaWQgPSB2YWx1ZSBpbnN0YW5jZW9mIHR5cGU7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHZhbGlkLFxuICAgICAgICBleHBlY3RlZFR5cGVcbiAgICB9O1xufVxuLyoqXG4gKiBkZXYgb25seVxuICovXG5mdW5jdGlvbiBnZXRJbnZhbGlkVHlwZU1lc3NhZ2UobmFtZSwgdmFsdWUsIGV4cGVjdGVkVHlwZXMpIHtcbiAgICBsZXQgbWVzc2FnZSA9IGBJbnZhbGlkIHByb3A6IHR5cGUgY2hlY2sgZmFpbGVkIGZvciBwcm9wIFwiJHtuYW1lfVwiLmAgK1xuICAgICAgICBgIEV4cGVjdGVkICR7ZXhwZWN0ZWRUeXBlcy5tYXAoY2FwaXRhbGl6ZSkuam9pbignIHwgJyl9YDtcbiAgICBjb25zdCBleHBlY3RlZFR5cGUgPSBleHBlY3RlZFR5cGVzWzBdO1xuICAgIGNvbnN0IHJlY2VpdmVkVHlwZSA9IHRvUmF3VHlwZSh2YWx1ZSk7XG4gICAgY29uc3QgZXhwZWN0ZWRWYWx1ZSA9IHN0eWxlVmFsdWUodmFsdWUsIGV4cGVjdGVkVHlwZSk7XG4gICAgY29uc3QgcmVjZWl2ZWRWYWx1ZSA9IHN0eWxlVmFsdWUodmFsdWUsIHJlY2VpdmVkVHlwZSk7XG4gICAgLy8gY2hlY2sgaWYgd2UgbmVlZCB0byBzcGVjaWZ5IGV4cGVjdGVkIHZhbHVlXG4gICAgaWYgKGV4cGVjdGVkVHlwZXMubGVuZ3RoID09PSAxICYmXG4gICAgICAgIGlzRXhwbGljYWJsZShleHBlY3RlZFR5cGUpICYmXG4gICAgICAgICFpc0Jvb2xlYW4oZXhwZWN0ZWRUeXBlLCByZWNlaXZlZFR5cGUpKSB7XG4gICAgICAgIG1lc3NhZ2UgKz0gYCB3aXRoIHZhbHVlICR7ZXhwZWN0ZWRWYWx1ZX1gO1xuICAgIH1cbiAgICBtZXNzYWdlICs9IGAsIGdvdCAke3JlY2VpdmVkVHlwZX0gYDtcbiAgICAvLyBjaGVjayBpZiB3ZSBuZWVkIHRvIHNwZWNpZnkgcmVjZWl2ZWQgdmFsdWVcbiAgICBpZiAoaXNFeHBsaWNhYmxlKHJlY2VpdmVkVHlwZSkpIHtcbiAgICAgICAgbWVzc2FnZSArPSBgd2l0aCB2YWx1ZSAke3JlY2VpdmVkVmFsdWV9LmA7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xufVxuLyoqXG4gKiBkZXYgb25seVxuICovXG5mdW5jdGlvbiBzdHlsZVZhbHVlKHZhbHVlLCB0eXBlKSB7XG4gICAgaWYgKHR5cGUgPT09ICdTdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBgXCIke3ZhbHVlfVwiYDtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSA9PT0gJ051bWJlcicpIHtcbiAgICAgICAgcmV0dXJuIGAke051bWJlcih2YWx1ZSl9YDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBgJHt2YWx1ZX1gO1xuICAgIH1cbn1cbi8qKlxuICogZGV2IG9ubHlcbiAqL1xuZnVuY3Rpb24gaXNFeHBsaWNhYmxlKHR5cGUpIHtcbiAgICBjb25zdCBleHBsaWNpdFR5cGVzID0gWydzdHJpbmcnLCAnbnVtYmVyJywgJ2Jvb2xlYW4nXTtcbiAgICByZXR1cm4gZXhwbGljaXRUeXBlcy5zb21lKGVsZW0gPT4gdHlwZS50b0xvd2VyQ2FzZSgpID09PSBlbGVtKTtcbn1cbi8qKlxuICogZGV2IG9ubHlcbiAqL1xuZnVuY3Rpb24gaXNCb29sZWFuKC4uLmFyZ3MpIHtcbiAgICByZXR1cm4gYXJncy5zb21lKGVsZW0gPT4gZWxlbS50b0xvd2VyQ2FzZSgpID09PSAnYm9vbGVhbicpO1xufVxuXG5jb25zdCBpc0ludGVybmFsS2V5ID0gKGtleSkgPT4ga2V5WzBdID09PSAnXycgfHwga2V5ID09PSAnJHN0YWJsZSc7XG5jb25zdCBub3JtYWxpemVTbG90VmFsdWUgPSAodmFsdWUpID0+IGlzQXJyYXkodmFsdWUpXG4gICAgPyB2YWx1ZS5tYXAobm9ybWFsaXplVk5vZGUpXG4gICAgOiBbbm9ybWFsaXplVk5vZGUodmFsdWUpXTtcbmNvbnN0IG5vcm1hbGl6ZVNsb3QgPSAoa2V5LCByYXdTbG90LCBjdHgpID0+IHtcbiAgICBpZiAocmF3U2xvdC5fbikge1xuICAgICAgICAvLyBhbHJlYWR5IG5vcm1hbGl6ZWQgLSAjNTM1M1xuICAgICAgICByZXR1cm4gcmF3U2xvdDtcbiAgICB9XG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IHdpdGhDdHgoKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBjdXJyZW50SW5zdGFuY2UpIHtcbiAgICAgICAgICAgIHdhcm4oYFNsb3QgXCIke2tleX1cIiBpbnZva2VkIG91dHNpZGUgb2YgdGhlIHJlbmRlciBmdW5jdGlvbjogYCArXG4gICAgICAgICAgICAgICAgYHRoaXMgd2lsbCBub3QgdHJhY2sgZGVwZW5kZW5jaWVzIHVzZWQgaW4gdGhlIHNsb3QuIGAgK1xuICAgICAgICAgICAgICAgIGBJbnZva2UgdGhlIHNsb3QgZnVuY3Rpb24gaW5zaWRlIHRoZSByZW5kZXIgZnVuY3Rpb24gaW5zdGVhZC5gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbm9ybWFsaXplU2xvdFZhbHVlKHJhd1Nsb3QoLi4uYXJncykpO1xuICAgIH0sIGN0eCk7XG4gICAgbm9ybWFsaXplZC5fYyA9IGZhbHNlO1xuICAgIHJldHVybiBub3JtYWxpemVkO1xufTtcbmNvbnN0IG5vcm1hbGl6ZU9iamVjdFNsb3RzID0gKHJhd1Nsb3RzLCBzbG90cywgaW5zdGFuY2UpID0+IHtcbiAgICBjb25zdCBjdHggPSByYXdTbG90cy5fY3R4O1xuICAgIGZvciAoY29uc3Qga2V5IGluIHJhd1Nsb3RzKSB7XG4gICAgICAgIGlmIChpc0ludGVybmFsS2V5KGtleSkpXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSByYXdTbG90c1trZXldO1xuICAgICAgICBpZiAoaXNGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICAgICAgICAgIHNsb3RzW2tleV0gPSBub3JtYWxpemVTbG90KGtleSwgdmFsdWUsIGN0eCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxuICAgICAgICAgICAgICAgICEoZmFsc2UgKSkge1xuICAgICAgICAgICAgICAgIHdhcm4oYE5vbi1mdW5jdGlvbiB2YWx1ZSBlbmNvdW50ZXJlZCBmb3Igc2xvdCBcIiR7a2V5fVwiLiBgICtcbiAgICAgICAgICAgICAgICAgICAgYFByZWZlciBmdW5jdGlvbiBzbG90cyBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZVNsb3RWYWx1ZSh2YWx1ZSk7XG4gICAgICAgICAgICBzbG90c1trZXldID0gKCkgPT4gbm9ybWFsaXplZDtcbiAgICAgICAgfVxuICAgIH1cbn07XG5jb25zdCBub3JtYWxpemVWTm9kZVNsb3RzID0gKGluc3RhbmNlLCBjaGlsZHJlbikgPT4ge1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcbiAgICAgICAgIWlzS2VlcEFsaXZlKGluc3RhbmNlLnZub2RlKSAmJlxuICAgICAgICAhKGZhbHNlICkpIHtcbiAgICAgICAgd2FybihgTm9uLWZ1bmN0aW9uIHZhbHVlIGVuY291bnRlcmVkIGZvciBkZWZhdWx0IHNsb3QuIGAgK1xuICAgICAgICAgICAgYFByZWZlciBmdW5jdGlvbiBzbG90cyBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlLmApO1xuICAgIH1cbiAgICBjb25zdCBub3JtYWxpemVkID0gbm9ybWFsaXplU2xvdFZhbHVlKGNoaWxkcmVuKTtcbiAgICBpbnN0YW5jZS5zbG90cy5kZWZhdWx0ID0gKCkgPT4gbm9ybWFsaXplZDtcbn07XG5jb25zdCBpbml0U2xvdHMgPSAoaW5zdGFuY2UsIGNoaWxkcmVuKSA9PiB7XG4gICAgaWYgKGluc3RhbmNlLnZub2RlLnNoYXBlRmxhZyAmIDMyIC8qIFNoYXBlRmxhZ3MuU0xPVFNfQ0hJTERSRU4gKi8pIHtcbiAgICAgICAgY29uc3QgdHlwZSA9IGNoaWxkcmVuLl87XG4gICAgICAgIGlmICh0eXBlKSB7XG4gICAgICAgICAgICAvLyB1c2VycyBjYW4gZ2V0IHRoZSBzaGFsbG93IHJlYWRvbmx5IHZlcnNpb24gb2YgdGhlIHNsb3RzIG9iamVjdCB0aHJvdWdoIGB0aGlzLiRzbG90c2AsXG4gICAgICAgICAgICAvLyB3ZSBzaG91bGQgYXZvaWQgdGhlIHByb3h5IG9iamVjdCBwb2xsdXRpbmcgdGhlIHNsb3RzIG9mIHRoZSBpbnRlcm5hbCBpbnN0YW5jZVxuICAgICAgICAgICAgaW5zdGFuY2Uuc2xvdHMgPSB0b1JhdyhjaGlsZHJlbik7XG4gICAgICAgICAgICAvLyBtYWtlIGNvbXBpbGVyIG1hcmtlciBub24tZW51bWVyYWJsZVxuICAgICAgICAgICAgZGVmKGNoaWxkcmVuLCAnXycsIHR5cGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbm9ybWFsaXplT2JqZWN0U2xvdHMoY2hpbGRyZW4sIChpbnN0YW5jZS5zbG90cyA9IHt9KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGluc3RhbmNlLnNsb3RzID0ge307XG4gICAgICAgIGlmIChjaGlsZHJlbikge1xuICAgICAgICAgICAgbm9ybWFsaXplVk5vZGVTbG90cyhpbnN0YW5jZSwgY2hpbGRyZW4pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRlZihpbnN0YW5jZS5zbG90cywgSW50ZXJuYWxPYmplY3RLZXksIDEpO1xufTtcbmNvbnN0IHVwZGF0ZVNsb3RzID0gKGluc3RhbmNlLCBjaGlsZHJlbiwgb3B0aW1pemVkKSA9PiB7XG4gICAgY29uc3QgeyB2bm9kZSwgc2xvdHMgfSA9IGluc3RhbmNlO1xuICAgIGxldCBuZWVkRGVsZXRpb25DaGVjayA9IHRydWU7XG4gICAgbGV0IGRlbGV0aW9uQ29tcGFyaXNvblRhcmdldCA9IEVNUFRZX09CSjtcbiAgICBpZiAodm5vZGUuc2hhcGVGbGFnICYgMzIgLyogU2hhcGVGbGFncy5TTE9UU19DSElMRFJFTiAqLykge1xuICAgICAgICBjb25zdCB0eXBlID0gY2hpbGRyZW4uXztcbiAgICAgICAgaWYgKHR5cGUpIHtcbiAgICAgICAgICAgIC8vIGNvbXBpbGVkIHNsb3RzLlxuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBpc0htclVwZGF0aW5nKSB7XG4gICAgICAgICAgICAgICAgLy8gUGFyZW50IHdhcyBITVIgdXBkYXRlZCBzbyBzbG90IGNvbnRlbnQgbWF5IGhhdmUgY2hhbmdlZC5cbiAgICAgICAgICAgICAgICAvLyBmb3JjZSB1cGRhdGUgc2xvdHMgYW5kIG1hcmsgaW5zdGFuY2UgZm9yIGhtciBhcyB3ZWxsXG4gICAgICAgICAgICAgICAgZXh0ZW5kKHNsb3RzLCBjaGlsZHJlbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChvcHRpbWl6ZWQgJiYgdHlwZSA9PT0gMSAvKiBTbG90RmxhZ3MuU1RBQkxFICovKSB7XG4gICAgICAgICAgICAgICAgLy8gY29tcGlsZWQgQU5EIHN0YWJsZS5cbiAgICAgICAgICAgICAgICAvLyBubyBuZWVkIHRvIHVwZGF0ZSwgYW5kIHNraXAgc3RhbGUgc2xvdHMgcmVtb3ZhbC5cbiAgICAgICAgICAgICAgICBuZWVkRGVsZXRpb25DaGVjayA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gY29tcGlsZWQgYnV0IGR5bmFtaWMgKHYtaWYvdi1mb3Igb24gc2xvdHMpIC0gdXBkYXRlIHNsb3RzLCBidXQgc2tpcFxuICAgICAgICAgICAgICAgIC8vIG5vcm1hbGl6YXRpb24uXG4gICAgICAgICAgICAgICAgZXh0ZW5kKHNsb3RzLCBjaGlsZHJlbik7XG4gICAgICAgICAgICAgICAgLy8gIzI4OTNcbiAgICAgICAgICAgICAgICAvLyB3aGVuIHJlbmRlcmluZyB0aGUgb3B0aW1pemVkIHNsb3RzIGJ5IG1hbnVhbGx5IHdyaXR0ZW4gcmVuZGVyIGZ1bmN0aW9uLFxuICAgICAgICAgICAgICAgIC8vIHdlIG5lZWQgdG8gZGVsZXRlIHRoZSBgc2xvdHMuX2AgZmxhZyBpZiBuZWNlc3NhcnkgdG8gbWFrZSBzdWJzZXF1ZW50IHVwZGF0ZXMgcmVsaWFibGUsXG4gICAgICAgICAgICAgICAgLy8gaS5lLiBsZXQgdGhlIGByZW5kZXJTbG90YCBjcmVhdGUgdGhlIGJhaWxlZCBGcmFnbWVudFxuICAgICAgICAgICAgICAgIGlmICghb3B0aW1pemVkICYmIHR5cGUgPT09IDEgLyogU2xvdEZsYWdzLlNUQUJMRSAqLykge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgc2xvdHMuXztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBuZWVkRGVsZXRpb25DaGVjayA9ICFjaGlsZHJlbi4kc3RhYmxlO1xuICAgICAgICAgICAgbm9ybWFsaXplT2JqZWN0U2xvdHMoY2hpbGRyZW4sIHNsb3RzKTtcbiAgICAgICAgfVxuICAgICAgICBkZWxldGlvbkNvbXBhcmlzb25UYXJnZXQgPSBjaGlsZHJlbjtcbiAgICB9XG4gICAgZWxzZSBpZiAoY2hpbGRyZW4pIHtcbiAgICAgICAgLy8gbm9uIHNsb3Qgb2JqZWN0IGNoaWxkcmVuIChkaXJlY3QgdmFsdWUpIHBhc3NlZCB0byBhIGNvbXBvbmVudFxuICAgICAgICBub3JtYWxpemVWTm9kZVNsb3RzKGluc3RhbmNlLCBjaGlsZHJlbik7XG4gICAgICAgIGRlbGV0aW9uQ29tcGFyaXNvblRhcmdldCA9IHsgZGVmYXVsdDogMSB9O1xuICAgIH1cbiAgICAvLyBkZWxldGUgc3RhbGUgc2xvdHNcbiAgICBpZiAobmVlZERlbGV0aW9uQ2hlY2spIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gc2xvdHMpIHtcbiAgICAgICAgICAgIGlmICghaXNJbnRlcm5hbEtleShrZXkpICYmICEoa2V5IGluIGRlbGV0aW9uQ29tcGFyaXNvblRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgc2xvdHNba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn07XG5cbmZ1bmN0aW9uIGNyZWF0ZUFwcENvbnRleHQoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYXBwOiBudWxsLFxuICAgICAgICBjb25maWc6IHtcbiAgICAgICAgICAgIGlzTmF0aXZlVGFnOiBOTyxcbiAgICAgICAgICAgIHBlcmZvcm1hbmNlOiBmYWxzZSxcbiAgICAgICAgICAgIGdsb2JhbFByb3BlcnRpZXM6IHt9LFxuICAgICAgICAgICAgb3B0aW9uTWVyZ2VTdHJhdGVnaWVzOiB7fSxcbiAgICAgICAgICAgIGVycm9ySGFuZGxlcjogdW5kZWZpbmVkLFxuICAgICAgICAgICAgd2FybkhhbmRsZXI6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGNvbXBpbGVyT3B0aW9uczoge31cbiAgICAgICAgfSxcbiAgICAgICAgbWl4aW5zOiBbXSxcbiAgICAgICAgY29tcG9uZW50czoge30sXG4gICAgICAgIGRpcmVjdGl2ZXM6IHt9LFxuICAgICAgICBwcm92aWRlczogT2JqZWN0LmNyZWF0ZShudWxsKSxcbiAgICAgICAgb3B0aW9uc0NhY2hlOiBuZXcgV2Vha01hcCgpLFxuICAgICAgICBwcm9wc0NhY2hlOiBuZXcgV2Vha01hcCgpLFxuICAgICAgICBlbWl0c0NhY2hlOiBuZXcgV2Vha01hcCgpXG4gICAgfTtcbn1cbmxldCB1aWQgPSAwO1xuZnVuY3Rpb24gY3JlYXRlQXBwQVBJKHJlbmRlciwgaHlkcmF0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiBjcmVhdGVBcHAocm9vdENvbXBvbmVudCwgcm9vdFByb3BzID0gbnVsbCkge1xuICAgICAgICBpZiAoIWlzRnVuY3Rpb24ocm9vdENvbXBvbmVudCkpIHtcbiAgICAgICAgICAgIHJvb3RDb21wb25lbnQgPSBPYmplY3QuYXNzaWduKHt9LCByb290Q29tcG9uZW50KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocm9vdFByb3BzICE9IG51bGwgJiYgIWlzT2JqZWN0KHJvb3RQcm9wcykpIHtcbiAgICAgICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiB3YXJuKGByb290IHByb3BzIHBhc3NlZCB0byBhcHAubW91bnQoKSBtdXN0IGJlIGFuIG9iamVjdC5gKTtcbiAgICAgICAgICAgIHJvb3RQcm9wcyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZUFwcENvbnRleHQoKTtcbiAgICAgICAgY29uc3QgaW5zdGFsbGVkUGx1Z2lucyA9IG5ldyBTZXQoKTtcbiAgICAgICAgbGV0IGlzTW91bnRlZCA9IGZhbHNlO1xuICAgICAgICBjb25zdCBhcHAgPSAoY29udGV4dC5hcHAgPSB7XG4gICAgICAgICAgICBfdWlkOiB1aWQrKyxcbiAgICAgICAgICAgIF9jb21wb25lbnQ6IHJvb3RDb21wb25lbnQsXG4gICAgICAgICAgICBfcHJvcHM6IHJvb3RQcm9wcyxcbiAgICAgICAgICAgIF9jb250YWluZXI6IG51bGwsXG4gICAgICAgICAgICBfY29udGV4dDogY29udGV4dCxcbiAgICAgICAgICAgIF9pbnN0YW5jZTogbnVsbCxcbiAgICAgICAgICAgIHZlcnNpb24sXG4gICAgICAgICAgICBnZXQgY29uZmlnKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0LmNvbmZpZztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQgY29uZmlnKHYpIHtcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYGFwcC5jb25maWcgY2Fubm90IGJlIHJlcGxhY2VkLiBNb2RpZnkgaW5kaXZpZHVhbCBvcHRpb25zIGluc3RlYWQuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHVzZShwbHVnaW4sIC4uLm9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5zdGFsbGVkUGx1Z2lucy5oYXMocGx1Z2luKSkge1xuICAgICAgICAgICAgICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgd2FybihgUGx1Z2luIGhhcyBhbHJlYWR5IGJlZW4gYXBwbGllZCB0byB0YXJnZXQgYXBwLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChwbHVnaW4gJiYgaXNGdW5jdGlvbihwbHVnaW4uaW5zdGFsbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFsbGVkUGx1Z2lucy5hZGQocGx1Z2luKTtcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luLmluc3RhbGwoYXBwLCAuLi5vcHRpb25zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNGdW5jdGlvbihwbHVnaW4pKSB7XG4gICAgICAgICAgICAgICAgICAgIGluc3RhbGxlZFBsdWdpbnMuYWRkKHBsdWdpbik7XG4gICAgICAgICAgICAgICAgICAgIHBsdWdpbihhcHAsIC4uLm9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgd2FybihgQSBwbHVnaW4gbXVzdCBlaXRoZXIgYmUgYSBmdW5jdGlvbiBvciBhbiBvYmplY3Qgd2l0aCBhbiBcImluc3RhbGxcIiBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBmdW5jdGlvbi5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFwcDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtaXhpbihtaXhpbikge1xuICAgICAgICAgICAgICAgIGlmIChfX1ZVRV9PUFRJT05TX0FQSV9fKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY29udGV4dC5taXhpbnMuaW5jbHVkZXMobWl4aW4pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0Lm1peGlucy5wdXNoKG1peGluKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm4oJ01peGluIGhhcyBhbHJlYWR5IGJlZW4gYXBwbGllZCB0byB0YXJnZXQgYXBwJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKG1peGluLm5hbWUgPyBgOiAke21peGluLm5hbWV9YCA6ICcnKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIHdhcm4oJ01peGlucyBhcmUgb25seSBhdmFpbGFibGUgaW4gYnVpbGRzIHN1cHBvcnRpbmcgT3B0aW9ucyBBUEknKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFwcDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjb21wb25lbnQobmFtZSwgY29tcG9uZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICB2YWxpZGF0ZUNvbXBvbmVudE5hbWUobmFtZSwgY29udGV4dC5jb25maWcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWNvbXBvbmVudCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC5jb21wb25lbnRzW25hbWVdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGNvbnRleHQuY29tcG9uZW50c1tuYW1lXSkge1xuICAgICAgICAgICAgICAgICAgICB3YXJuKGBDb21wb25lbnQgXCIke25hbWV9XCIgaGFzIGFscmVhZHkgYmVlbiByZWdpc3RlcmVkIGluIHRhcmdldCBhcHAuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnRleHQuY29tcG9uZW50c1tuYW1lXSA9IGNvbXBvbmVudDtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXBwO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRpcmVjdGl2ZShuYW1lLCBkaXJlY3RpdmUpIHtcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlRGlyZWN0aXZlTmFtZShuYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFkaXJlY3RpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQuZGlyZWN0aXZlc1tuYW1lXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBjb250ZXh0LmRpcmVjdGl2ZXNbbmFtZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgd2FybihgRGlyZWN0aXZlIFwiJHtuYW1lfVwiIGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZCBpbiB0YXJnZXQgYXBwLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb250ZXh0LmRpcmVjdGl2ZXNbbmFtZV0gPSBkaXJlY3RpdmU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFwcDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtb3VudChyb290Q29udGFpbmVyLCBpc0h5ZHJhdGUsIGlzU1ZHKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpc01vdW50ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gIzU1NzFcbiAgICAgICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiByb290Q29udGFpbmVyLl9fdnVlX2FwcF9fKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuKGBUaGVyZSBpcyBhbHJlYWR5IGFuIGFwcCBpbnN0YW5jZSBtb3VudGVkIG9uIHRoZSBob3N0IGNvbnRhaW5lci5cXG5gICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgIElmIHlvdSB3YW50IHRvIG1vdW50IGFub3RoZXIgYXBwIG9uIHRoZSBzYW1lIGhvc3QgY29udGFpbmVyLGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAgeW91IG5lZWQgdG8gdW5tb3VudCB0aGUgcHJldmlvdXMgYXBwIGJ5IGNhbGxpbmcgXFxgYXBwLnVubW91bnQoKVxcYCBmaXJzdC5gKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCB2bm9kZSA9IGNyZWF0ZVZOb2RlKHJvb3RDb21wb25lbnQsIHJvb3RQcm9wcyk7XG4gICAgICAgICAgICAgICAgICAgIC8vIHN0b3JlIGFwcCBjb250ZXh0IG9uIHRoZSByb290IFZOb2RlLlxuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIHdpbGwgYmUgc2V0IG9uIHRoZSByb290IGluc3RhbmNlIG9uIGluaXRpYWwgbW91bnQuXG4gICAgICAgICAgICAgICAgICAgIHZub2RlLmFwcENvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICAgICAgICAgICAgICAvLyBITVIgcm9vdCByZWxvYWRcbiAgICAgICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5yZWxvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyKGNsb25lVk5vZGUodm5vZGUpLCByb290Q29udGFpbmVyLCBpc1NWRyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0h5ZHJhdGUgJiYgaHlkcmF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaHlkcmF0ZSh2bm9kZSwgcm9vdENvbnRhaW5lcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZW5kZXIodm5vZGUsIHJvb3RDb250YWluZXIsIGlzU1ZHKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpc01vdW50ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBhcHAuX2NvbnRhaW5lciA9IHJvb3RDb250YWluZXI7XG4gICAgICAgICAgICAgICAgICAgIHJvb3RDb250YWluZXIuX192dWVfYXBwX18gPSBhcHA7XG4gICAgICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcHAuX2luc3RhbmNlID0gdm5vZGUuY29tcG9uZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgZGV2dG9vbHNJbml0QXBwKGFwcCwgdmVyc2lvbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldEV4cG9zZVByb3h5KHZub2RlLmNvbXBvbmVudCkgfHwgdm5vZGUuY29tcG9uZW50LnByb3h5O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgd2FybihgQXBwIGhhcyBhbHJlYWR5IGJlZW4gbW91bnRlZC5cXG5gICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBJZiB5b3Ugd2FudCB0byByZW1vdW50IHRoZSBzYW1lIGFwcCwgbW92ZSB5b3VyIGFwcCBjcmVhdGlvbiBsb2dpYyBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBpbnRvIGEgZmFjdG9yeSBmdW5jdGlvbiBhbmQgY3JlYXRlIGZyZXNoIGFwcCBpbnN0YW5jZXMgZm9yIGVhY2ggYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgbW91bnQgLSBlLmcuIFxcYGNvbnN0IGNyZWF0ZU15QXBwID0gKCkgPT4gY3JlYXRlQXBwKEFwcClcXGBgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdW5tb3VudCgpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNNb3VudGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcihudWxsLCBhcHAuX2NvbnRhaW5lcik7XG4gICAgICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcHAuX2luc3RhbmNlID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldnRvb2xzVW5tb3VudEFwcChhcHApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhcHAuX2NvbnRhaW5lci5fX3Z1ZV9hcHBfXztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYENhbm5vdCB1bm1vdW50IGFuIGFwcCB0aGF0IGlzIG5vdCBtb3VudGVkLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwcm92aWRlKGtleSwgdmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGtleSBpbiBjb250ZXh0LnByb3ZpZGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYEFwcCBhbHJlYWR5IHByb3ZpZGVzIHByb3BlcnR5IHdpdGgga2V5IFwiJHtTdHJpbmcoa2V5KX1cIi4gYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgSXQgd2lsbCBiZSBvdmVyd3JpdHRlbiB3aXRoIHRoZSBuZXcgdmFsdWUuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnRleHQucHJvdmlkZXNba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIHJldHVybiBhcHA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gYXBwO1xuICAgIH07XG59XG5cbi8qKlxuICogRnVuY3Rpb24gZm9yIGhhbmRsaW5nIGEgdGVtcGxhdGUgcmVmXG4gKi9cbmZ1bmN0aW9uIHNldFJlZihyYXdSZWYsIG9sZFJhd1JlZiwgcGFyZW50U3VzcGVuc2UsIHZub2RlLCBpc1VubW91bnQgPSBmYWxzZSkge1xuICAgIGlmIChpc0FycmF5KHJhd1JlZikpIHtcbiAgICAgICAgcmF3UmVmLmZvckVhY2goKHIsIGkpID0+IHNldFJlZihyLCBvbGRSYXdSZWYgJiYgKGlzQXJyYXkob2xkUmF3UmVmKSA/IG9sZFJhd1JlZltpXSA6IG9sZFJhd1JlZiksIHBhcmVudFN1c3BlbnNlLCB2bm9kZSwgaXNVbm1vdW50KSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGlzQXN5bmNXcmFwcGVyKHZub2RlKSAmJiAhaXNVbm1vdW50KSB7XG4gICAgICAgIC8vIHdoZW4gbW91bnRpbmcgYXN5bmMgY29tcG9uZW50cywgbm90aGluZyBuZWVkcyB0byBiZSBkb25lLFxuICAgICAgICAvLyBiZWNhdXNlIHRoZSB0ZW1wbGF0ZSByZWYgaXMgZm9yd2FyZGVkIHRvIGlubmVyIGNvbXBvbmVudFxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHJlZlZhbHVlID0gdm5vZGUuc2hhcGVGbGFnICYgNCAvKiBTaGFwZUZsYWdzLlNUQVRFRlVMX0NPTVBPTkVOVCAqL1xuICAgICAgICA/IGdldEV4cG9zZVByb3h5KHZub2RlLmNvbXBvbmVudCkgfHwgdm5vZGUuY29tcG9uZW50LnByb3h5XG4gICAgICAgIDogdm5vZGUuZWw7XG4gICAgY29uc3QgdmFsdWUgPSBpc1VubW91bnQgPyBudWxsIDogcmVmVmFsdWU7XG4gICAgY29uc3QgeyBpOiBvd25lciwgcjogcmVmIH0gPSByYXdSZWY7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhb3duZXIpIHtcbiAgICAgICAgd2FybihgTWlzc2luZyByZWYgb3duZXIgY29udGV4dC4gcmVmIGNhbm5vdCBiZSB1c2VkIG9uIGhvaXN0ZWQgdm5vZGVzLiBgICtcbiAgICAgICAgICAgIGBBIHZub2RlIHdpdGggcmVmIG11c3QgYmUgY3JlYXRlZCBpbnNpZGUgdGhlIHJlbmRlciBmdW5jdGlvbi5gKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBvbGRSZWYgPSBvbGRSYXdSZWYgJiYgb2xkUmF3UmVmLnI7XG4gICAgY29uc3QgcmVmcyA9IG93bmVyLnJlZnMgPT09IEVNUFRZX09CSiA/IChvd25lci5yZWZzID0ge30pIDogb3duZXIucmVmcztcbiAgICBjb25zdCBzZXR1cFN0YXRlID0gb3duZXIuc2V0dXBTdGF0ZTtcbiAgICAvLyBkeW5hbWljIHJlZiBjaGFuZ2VkLiB1bnNldCBvbGQgcmVmXG4gICAgaWYgKG9sZFJlZiAhPSBudWxsICYmIG9sZFJlZiAhPT0gcmVmKSB7XG4gICAgICAgIGlmIChpc1N0cmluZyhvbGRSZWYpKSB7XG4gICAgICAgICAgICByZWZzW29sZFJlZl0gPSBudWxsO1xuICAgICAgICAgICAgaWYgKGhhc093bihzZXR1cFN0YXRlLCBvbGRSZWYpKSB7XG4gICAgICAgICAgICAgICAgc2V0dXBTdGF0ZVtvbGRSZWZdID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc1JlZihvbGRSZWYpKSB7XG4gICAgICAgICAgICBvbGRSZWYudmFsdWUgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChpc0Z1bmN0aW9uKHJlZikpIHtcbiAgICAgICAgY2FsbFdpdGhFcnJvckhhbmRsaW5nKHJlZiwgb3duZXIsIDEyIC8qIEVycm9yQ29kZXMuRlVOQ1RJT05fUkVGICovLCBbdmFsdWUsIHJlZnNdKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IF9pc1N0cmluZyA9IGlzU3RyaW5nKHJlZik7XG4gICAgICAgIGNvbnN0IF9pc1JlZiA9IGlzUmVmKHJlZik7XG4gICAgICAgIGlmIChfaXNTdHJpbmcgfHwgX2lzUmVmKSB7XG4gICAgICAgICAgICBjb25zdCBkb1NldCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocmF3UmVmLmYpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBfaXNTdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgID8gaGFzT3duKHNldHVwU3RhdGUsIHJlZilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHNldHVwU3RhdGVbcmVmXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogcmVmc1tyZWZdXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHJlZi52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzVW5tb3VudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNBcnJheShleGlzdGluZykgJiYgcmVtb3ZlKGV4aXN0aW5nLCByZWZWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzQXJyYXkoZXhpc3RpbmcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9pc1N0cmluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZzW3JlZl0gPSBbcmVmVmFsdWVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFzT3duKHNldHVwU3RhdGUsIHJlZikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHVwU3RhdGVbcmVmXSA9IHJlZnNbcmVmXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmLnZhbHVlID0gW3JlZlZhbHVlXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJhd1JlZi5rKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmc1tyYXdSZWYua10gPSByZWYudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIWV4aXN0aW5nLmluY2x1ZGVzKHJlZlZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nLnB1c2gocmVmVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKF9pc1N0cmluZykge1xuICAgICAgICAgICAgICAgICAgICByZWZzW3JlZl0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhhc093bihzZXR1cFN0YXRlLCByZWYpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR1cFN0YXRlW3JlZl0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChfaXNSZWYpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVmLnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyYXdSZWYuaylcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZnNbcmF3UmVmLmtdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICB3YXJuKCdJbnZhbGlkIHRlbXBsYXRlIHJlZiB0eXBlOicsIHJlZiwgYCgke3R5cGVvZiByZWZ9KWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBkb1NldC5pZCA9IC0xO1xuICAgICAgICAgICAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdChkb1NldCwgcGFyZW50U3VzcGVuc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZG9TZXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgIHdhcm4oJ0ludmFsaWQgdGVtcGxhdGUgcmVmIHR5cGU6JywgcmVmLCBgKCR7dHlwZW9mIHJlZn0pYCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmxldCBoYXNNaXNtYXRjaCA9IGZhbHNlO1xuY29uc3QgaXNTVkdDb250YWluZXIgPSAoY29udGFpbmVyKSA9PiAvc3ZnLy50ZXN0KGNvbnRhaW5lci5uYW1lc3BhY2VVUkkpICYmIGNvbnRhaW5lci50YWdOYW1lICE9PSAnZm9yZWlnbk9iamVjdCc7XG5jb25zdCBpc0NvbW1lbnQgPSAobm9kZSkgPT4gbm9kZS5ub2RlVHlwZSA9PT0gOCAvKiBET01Ob2RlVHlwZXMuQ09NTUVOVCAqLztcbi8vIE5vdGU6IGh5ZHJhdGlvbiBpcyBET00tc3BlY2lmaWNcbi8vIEJ1dCB3ZSBoYXZlIHRvIHBsYWNlIGl0IGluIGNvcmUgZHVlIHRvIHRpZ2h0IGNvdXBsaW5nIHdpdGggY29yZSAtIHNwbGl0dGluZ1xuLy8gaXQgb3V0IGNyZWF0ZXMgYSB0b24gb2YgdW5uZWNlc3NhcnkgY29tcGxleGl0eS5cbi8vIEh5ZHJhdGlvbiBhbHNvIGRlcGVuZHMgb24gc29tZSByZW5kZXJlciBpbnRlcm5hbCBsb2dpYyB3aGljaCBuZWVkcyB0byBiZVxuLy8gcGFzc2VkIGluIHZpYSBhcmd1bWVudHMuXG5mdW5jdGlvbiBjcmVhdGVIeWRyYXRpb25GdW5jdGlvbnMocmVuZGVyZXJJbnRlcm5hbHMpIHtcbiAgICBjb25zdCB7IG10OiBtb3VudENvbXBvbmVudCwgcDogcGF0Y2gsIG86IHsgcGF0Y2hQcm9wLCBjcmVhdGVUZXh0LCBuZXh0U2libGluZywgcGFyZW50Tm9kZSwgcmVtb3ZlLCBpbnNlcnQsIGNyZWF0ZUNvbW1lbnQgfSB9ID0gcmVuZGVyZXJJbnRlcm5hbHM7XG4gICAgY29uc3QgaHlkcmF0ZSA9ICh2bm9kZSwgY29udGFpbmVyKSA9PiB7XG4gICAgICAgIGlmICghY29udGFpbmVyLmhhc0NoaWxkTm9kZXMoKSkge1xuICAgICAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXG4gICAgICAgICAgICAgICAgd2FybihgQXR0ZW1wdGluZyB0byBoeWRyYXRlIGV4aXN0aW5nIG1hcmt1cCBidXQgY29udGFpbmVyIGlzIGVtcHR5LiBgICtcbiAgICAgICAgICAgICAgICAgICAgYFBlcmZvcm1pbmcgZnVsbCBtb3VudCBpbnN0ZWFkLmApO1xuICAgICAgICAgICAgcGF0Y2gobnVsbCwgdm5vZGUsIGNvbnRhaW5lcik7XG4gICAgICAgICAgICBmbHVzaFBvc3RGbHVzaENicygpO1xuICAgICAgICAgICAgY29udGFpbmVyLl92bm9kZSA9IHZub2RlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGhhc01pc21hdGNoID0gZmFsc2U7XG4gICAgICAgIGh5ZHJhdGVOb2RlKGNvbnRhaW5lci5maXJzdENoaWxkLCB2bm9kZSwgbnVsbCwgbnVsbCwgbnVsbCk7XG4gICAgICAgIGZsdXNoUG9zdEZsdXNoQ2JzKCk7XG4gICAgICAgIGNvbnRhaW5lci5fdm5vZGUgPSB2bm9kZTtcbiAgICAgICAgaWYgKGhhc01pc21hdGNoICYmICFmYWxzZSkge1xuICAgICAgICAgICAgLy8gdGhpcyBlcnJvciBzaG91bGQgc2hvdyB1cCBpbiBwcm9kdWN0aW9uXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBIeWRyYXRpb24gY29tcGxldGVkIGJ1dCBjb250YWlucyBtaXNtYXRjaGVzLmApO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBoeWRyYXRlTm9kZSA9IChub2RlLCB2bm9kZSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQgPSBmYWxzZSkgPT4ge1xuICAgICAgICBjb25zdCBpc0ZyYWdtZW50U3RhcnQgPSBpc0NvbW1lbnQobm9kZSkgJiYgbm9kZS5kYXRhID09PSAnWyc7XG4gICAgICAgIGNvbnN0IG9uTWlzbWF0Y2ggPSAoKSA9PiBoYW5kbGVNaXNtYXRjaChub2RlLCB2bm9kZSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgc2xvdFNjb3BlSWRzLCBpc0ZyYWdtZW50U3RhcnQpO1xuICAgICAgICBjb25zdCB7IHR5cGUsIHJlZiwgc2hhcGVGbGFnLCBwYXRjaEZsYWcgfSA9IHZub2RlO1xuICAgICAgICBsZXQgZG9tVHlwZSA9IG5vZGUubm9kZVR5cGU7XG4gICAgICAgIHZub2RlLmVsID0gbm9kZTtcbiAgICAgICAgaWYgKHBhdGNoRmxhZyA9PT0gLTIgLyogUGF0Y2hGbGFncy5CQUlMICovKSB7XG4gICAgICAgICAgICBvcHRpbWl6ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHZub2RlLmR5bmFtaWNDaGlsZHJlbiA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG5leHROb2RlID0gbnVsbDtcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFRleHQ6XG4gICAgICAgICAgICAgICAgaWYgKGRvbVR5cGUgIT09IDMgLyogRE9NTm9kZVR5cGVzLlRFWFQgKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gIzU3MjggZW1wdHkgdGV4dCBub2RlIGluc2lkZSBhIHNsb3QgY2FuIGNhdXNlIGh5ZHJhdGlvbiBmYWlsdXJlXG4gICAgICAgICAgICAgICAgICAgIC8vIGJlY2F1c2UgdGhlIHNlcnZlciByZW5kZXJlZCBIVE1MIHdvbid0IGNvbnRhaW4gYSB0ZXh0IG5vZGVcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZub2RlLmNoaWxkcmVuID09PSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0KCh2bm9kZS5lbCA9IGNyZWF0ZVRleHQoJycpKSwgcGFyZW50Tm9kZShub2RlKSwgbm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0Tm9kZSA9IG5vZGU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0Tm9kZSA9IG9uTWlzbWF0Y2goKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUuZGF0YSAhPT0gdm5vZGUuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc01pc21hdGNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm4oYEh5ZHJhdGlvbiB0ZXh0IG1pc21hdGNoOmAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgXFxuLSBDbGllbnQ6ICR7SlNPTi5zdHJpbmdpZnkobm9kZS5kYXRhKX1gICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFxcbi0gU2VydmVyOiAke0pTT04uc3RyaW5naWZ5KHZub2RlLmNoaWxkcmVuKX1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuZGF0YSA9IHZub2RlLmNoaWxkcmVuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG5leHROb2RlID0gbmV4dFNpYmxpbmcobm9kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDb21tZW50OlxuICAgICAgICAgICAgICAgIGlmIChkb21UeXBlICE9PSA4IC8qIERPTU5vZGVUeXBlcy5DT01NRU5UICovIHx8IGlzRnJhZ21lbnRTdGFydCkge1xuICAgICAgICAgICAgICAgICAgICBuZXh0Tm9kZSA9IG9uTWlzbWF0Y2goKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5leHROb2RlID0gbmV4dFNpYmxpbmcobm9kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBTdGF0aWM6XG4gICAgICAgICAgICAgICAgaWYgKGlzRnJhZ21lbnRTdGFydCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBlbnRpcmUgdGVtcGxhdGUgaXMgc3RhdGljIGJ1dCBTU1JlZCBhcyBhIGZyYWdtZW50XG4gICAgICAgICAgICAgICAgICAgIG5vZGUgPSBuZXh0U2libGluZyhub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgZG9tVHlwZSA9IG5vZGUubm9kZVR5cGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChkb21UeXBlID09PSAxIC8qIERPTU5vZGVUeXBlcy5FTEVNRU5UICovIHx8IGRvbVR5cGUgPT09IDMgLyogRE9NTm9kZVR5cGVzLlRFWFQgKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZGV0ZXJtaW5lIGFuY2hvciwgYWRvcHQgY29udGVudFxuICAgICAgICAgICAgICAgICAgICBuZXh0Tm9kZSA9IG5vZGU7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBzdGF0aWMgdm5vZGUgaGFzIGl0cyBjb250ZW50IHN0cmlwcGVkIGR1cmluZyBidWlsZCxcbiAgICAgICAgICAgICAgICAgICAgLy8gYWRvcHQgaXQgZnJvbSB0aGUgc2VydmVyLXJlbmRlcmVkIEhUTUwuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5lZWRUb0Fkb3B0Q29udGVudCA9ICF2bm9kZS5jaGlsZHJlbi5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdm5vZGUuc3RhdGljQ291bnQ7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5lZWRUb0Fkb3B0Q29udGVudClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bm9kZS5jaGlsZHJlbiArPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0Tm9kZS5ub2RlVHlwZSA9PT0gMSAvKiBET01Ob2RlVHlwZXMuRUxFTUVOVCAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBuZXh0Tm9kZS5vdXRlckhUTUxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbmV4dE5vZGUuZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID09PSB2bm9kZS5zdGF0aWNDb3VudCAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bm9kZS5hbmNob3IgPSBuZXh0Tm9kZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHROb2RlID0gbmV4dFNpYmxpbmcobmV4dE5vZGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpc0ZyYWdtZW50U3RhcnQgPyBuZXh0U2libGluZyhuZXh0Tm9kZSkgOiBuZXh0Tm9kZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG9uTWlzbWF0Y2goKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEZyYWdtZW50OlxuICAgICAgICAgICAgICAgIGlmICghaXNGcmFnbWVudFN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgIG5leHROb2RlID0gb25NaXNtYXRjaCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbmV4dE5vZGUgPSBoeWRyYXRlRnJhZ21lbnQobm9kZSwgdm5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGlmIChzaGFwZUZsYWcgJiAxIC8qIFNoYXBlRmxhZ3MuRUxFTUVOVCAqLykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZG9tVHlwZSAhPT0gMSAvKiBET01Ob2RlVHlwZXMuRUxFTUVOVCAqLyB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgdm5vZGUudHlwZS50b0xvd2VyQ2FzZSgpICE9PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUudGFnTmFtZS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0Tm9kZSA9IG9uTWlzbWF0Y2goKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHROb2RlID0gaHlkcmF0ZUVsZW1lbnQobm9kZSwgdm5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChzaGFwZUZsYWcgJiA2IC8qIFNoYXBlRmxhZ3MuQ09NUE9ORU5UICovKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHdoZW4gc2V0dGluZyB1cCB0aGUgcmVuZGVyIGVmZmVjdCwgaWYgdGhlIGluaXRpYWwgdm5vZGUgYWxyZWFkeVxuICAgICAgICAgICAgICAgICAgICAvLyBoYXMgLmVsIHNldCwgdGhlIGNvbXBvbmVudCB3aWxsIHBlcmZvcm0gaHlkcmF0aW9uIGluc3RlYWQgb2YgbW91bnRcbiAgICAgICAgICAgICAgICAgICAgLy8gb24gaXRzIHN1Yi10cmVlLlxuICAgICAgICAgICAgICAgICAgICB2bm9kZS5zbG90U2NvcGVJZHMgPSBzbG90U2NvcGVJZHM7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHBhcmVudE5vZGUobm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIG1vdW50Q29tcG9uZW50KHZub2RlLCBjb250YWluZXIsIG51bGwsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHQ29udGFpbmVyKGNvbnRhaW5lciksIG9wdGltaXplZCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbXBvbmVudCBtYXkgYmUgYXN5bmMsIHNvIGluIHRoZSBjYXNlIG9mIGZyYWdtZW50cyB3ZSBjYW5ub3QgcmVseVxuICAgICAgICAgICAgICAgICAgICAvLyBvbiBjb21wb25lbnQncyByZW5kZXJlZCBvdXRwdXQgdG8gZGV0ZXJtaW5lIHRoZSBlbmQgb2YgdGhlIGZyYWdtZW50XG4gICAgICAgICAgICAgICAgICAgIC8vIGluc3RlYWQsIHdlIGRvIGEgbG9va2FoZWFkIHRvIGZpbmQgdGhlIGVuZCBhbmNob3Igbm9kZS5cbiAgICAgICAgICAgICAgICAgICAgbmV4dE5vZGUgPSBpc0ZyYWdtZW50U3RhcnRcbiAgICAgICAgICAgICAgICAgICAgICAgID8gbG9jYXRlQ2xvc2luZ0FzeW5jQW5jaG9yKG5vZGUpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG5leHRTaWJsaW5nKG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAvLyAjNDI5MyB0ZWxlcG9ydCBhcyBjb21wb25lbnQgcm9vdFxuICAgICAgICAgICAgICAgICAgICBpZiAobmV4dE5vZGUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQ29tbWVudChuZXh0Tm9kZSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHROb2RlLmRhdGEgPT09ICd0ZWxlcG9ydCBlbmQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0Tm9kZSA9IG5leHRTaWJsaW5nKG5leHROb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyAjMzc4N1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiBjb21wb25lbnQgaXMgYXN5bmMsIGl0IG1heSBnZXQgbW92ZWQgLyB1bm1vdW50ZWQgYmVmb3JlIGl0c1xuICAgICAgICAgICAgICAgICAgICAvLyBpbm5lciBjb21wb25lbnQgaXMgbG9hZGVkLCBzbyB3ZSBuZWVkIHRvIGdpdmUgaXQgYSBwbGFjZWhvbGRlclxuICAgICAgICAgICAgICAgICAgICAvLyB2bm9kZSB0aGF0IG1hdGNoZXMgaXRzIGFkb3B0ZWQgRE9NLlxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNBc3luY1dyYXBwZXIodm5vZGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3ViVHJlZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0ZyYWdtZW50U3RhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJUcmVlID0gY3JlYXRlVk5vZGUoRnJhZ21lbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YlRyZWUuYW5jaG9yID0gbmV4dE5vZGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBuZXh0Tm9kZS5wcmV2aW91c1NpYmxpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBjb250YWluZXIubGFzdENoaWxkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViVHJlZSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUubm9kZVR5cGUgPT09IDMgPyBjcmVhdGVUZXh0Vk5vZGUoJycpIDogY3JlYXRlVk5vZGUoJ2RpdicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgc3ViVHJlZS5lbCA9IG5vZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB2bm9kZS5jb21wb25lbnQuc3ViVHJlZSA9IHN1YlRyZWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoc2hhcGVGbGFnICYgNjQgLyogU2hhcGVGbGFncy5URUxFUE9SVCAqLykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZG9tVHlwZSAhPT0gOCAvKiBET01Ob2RlVHlwZXMuQ09NTUVOVCAqLykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dE5vZGUgPSBvbk1pc21hdGNoKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0Tm9kZSA9IHZub2RlLnR5cGUuaHlkcmF0ZShub2RlLCB2bm9kZSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIHJlbmRlcmVySW50ZXJuYWxzLCBoeWRyYXRlQ2hpbGRyZW4pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNoYXBlRmxhZyAmIDEyOCAvKiBTaGFwZUZsYWdzLlNVU1BFTlNFICovKSB7XG4gICAgICAgICAgICAgICAgICAgIG5leHROb2RlID0gdm5vZGUudHlwZS5oeWRyYXRlKG5vZGUsIHZub2RlLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWR0NvbnRhaW5lcihwYXJlbnROb2RlKG5vZGUpKSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIHJlbmRlcmVySW50ZXJuYWxzLCBoeWRyYXRlTm9kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICB3YXJuKCdJbnZhbGlkIEhvc3RWTm9kZSB0eXBlOicsIHR5cGUsIGAoJHt0eXBlb2YgdHlwZX0pYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChyZWYgIT0gbnVsbCkge1xuICAgICAgICAgICAgc2V0UmVmKHJlZiwgbnVsbCwgcGFyZW50U3VzcGVuc2UsIHZub2RlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV4dE5vZGU7XG4gICAgfTtcbiAgICBjb25zdCBoeWRyYXRlRWxlbWVudCA9IChlbCwgdm5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKSA9PiB7XG4gICAgICAgIG9wdGltaXplZCA9IG9wdGltaXplZCB8fCAhIXZub2RlLmR5bmFtaWNDaGlsZHJlbjtcbiAgICAgICAgY29uc3QgeyB0eXBlLCBwcm9wcywgcGF0Y2hGbGFnLCBzaGFwZUZsYWcsIGRpcnMgfSA9IHZub2RlO1xuICAgICAgICAvLyAjNDAwNiBmb3IgZm9ybSBlbGVtZW50cyB3aXRoIG5vbi1zdHJpbmcgdi1tb2RlbCB2YWx1ZSBiaW5kaW5nc1xuICAgICAgICAvLyBlLmcuIDxvcHRpb24gOnZhbHVlPVwib2JqXCI+LCA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgOnRydWUtdmFsdWU9XCIxXCI+XG4gICAgICAgIGNvbnN0IGZvcmNlUGF0Y2hWYWx1ZSA9ICh0eXBlID09PSAnaW5wdXQnICYmIGRpcnMpIHx8IHR5cGUgPT09ICdvcHRpb24nO1xuICAgICAgICAvLyBza2lwIHByb3BzICYgY2hpbGRyZW4gaWYgdGhpcyBpcyBob2lzdGVkIHN0YXRpYyBub2Rlc1xuICAgICAgICAvLyAjNTQwNSBpbiBkZXYsIGFsd2F5cyBoeWRyYXRlIGNoaWxkcmVuIGZvciBITVJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCBmb3JjZVBhdGNoVmFsdWUgfHwgcGF0Y2hGbGFnICE9PSAtMSAvKiBQYXRjaEZsYWdzLkhPSVNURUQgKi8pIHtcbiAgICAgICAgICAgIGlmIChkaXJzKSB7XG4gICAgICAgICAgICAgICAgaW52b2tlRGlyZWN0aXZlSG9vayh2bm9kZSwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCAnY3JlYXRlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gcHJvcHNcbiAgICAgICAgICAgIGlmIChwcm9wcykge1xuICAgICAgICAgICAgICAgIGlmIChmb3JjZVBhdGNoVmFsdWUgfHxcbiAgICAgICAgICAgICAgICAgICAgIW9wdGltaXplZCB8fFxuICAgICAgICAgICAgICAgICAgICBwYXRjaEZsYWcgJiAoMTYgLyogUGF0Y2hGbGFncy5GVUxMX1BST1BTICovIHwgMzIgLyogUGF0Y2hGbGFncy5IWURSQVRFX0VWRU5UUyAqLykpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gcHJvcHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoZm9yY2VQYXRjaFZhbHVlICYmIGtleS5lbmRzV2l0aCgndmFsdWUnKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaXNPbihrZXkpICYmICFpc1Jlc2VydmVkUHJvcChrZXkpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGNoUHJvcChlbCwga2V5LCBudWxsLCBwcm9wc1trZXldLCBmYWxzZSwgdW5kZWZpbmVkLCBwYXJlbnRDb21wb25lbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHByb3BzLm9uQ2xpY2spIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRmFzdCBwYXRoIGZvciBjbGljayBsaXN0ZW5lcnMgKHdoaWNoIGlzIG1vc3Qgb2Z0ZW4pIHRvIGF2b2lkXG4gICAgICAgICAgICAgICAgICAgIC8vIGl0ZXJhdGluZyB0aHJvdWdoIHByb3BzLlxuICAgICAgICAgICAgICAgICAgICBwYXRjaFByb3AoZWwsICdvbkNsaWNrJywgbnVsbCwgcHJvcHMub25DbGljaywgZmFsc2UsIHVuZGVmaW5lZCwgcGFyZW50Q29tcG9uZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB2bm9kZSAvIGRpcmVjdGl2ZSBob29rc1xuICAgICAgICAgICAgbGV0IHZub2RlSG9va3M7XG4gICAgICAgICAgICBpZiAoKHZub2RlSG9va3MgPSBwcm9wcyAmJiBwcm9wcy5vblZub2RlQmVmb3JlTW91bnQpKSB7XG4gICAgICAgICAgICAgICAgaW52b2tlVk5vZGVIb29rKHZub2RlSG9va3MsIHBhcmVudENvbXBvbmVudCwgdm5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRpcnMpIHtcbiAgICAgICAgICAgICAgICBpbnZva2VEaXJlY3RpdmVIb29rKHZub2RlLCBudWxsLCBwYXJlbnRDb21wb25lbnQsICdiZWZvcmVNb3VudCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCh2bm9kZUhvb2tzID0gcHJvcHMgJiYgcHJvcHMub25Wbm9kZU1vdW50ZWQpIHx8IGRpcnMpIHtcbiAgICAgICAgICAgICAgICBxdWV1ZUVmZmVjdFdpdGhTdXNwZW5zZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHZub2RlSG9va3MgJiYgaW52b2tlVk5vZGVIb29rKHZub2RlSG9va3MsIHBhcmVudENvbXBvbmVudCwgdm5vZGUpO1xuICAgICAgICAgICAgICAgICAgICBkaXJzICYmIGludm9rZURpcmVjdGl2ZUhvb2sodm5vZGUsIG51bGwsIHBhcmVudENvbXBvbmVudCwgJ21vdW50ZWQnKTtcbiAgICAgICAgICAgICAgICB9LCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBjaGlsZHJlblxuICAgICAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDE2IC8qIFNoYXBlRmxhZ3MuQVJSQVlfQ0hJTERSRU4gKi8gJiZcbiAgICAgICAgICAgICAgICAvLyBza2lwIGlmIGVsZW1lbnQgaGFzIGlubmVySFRNTCAvIHRleHRDb250ZW50XG4gICAgICAgICAgICAgICAgIShwcm9wcyAmJiAocHJvcHMuaW5uZXJIVE1MIHx8IHByb3BzLnRleHRDb250ZW50KSkpIHtcbiAgICAgICAgICAgICAgICBsZXQgbmV4dCA9IGh5ZHJhdGVDaGlsZHJlbihlbC5maXJzdENoaWxkLCB2bm9kZSwgZWwsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgICAgICBsZXQgaGFzV2FybmVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgd2hpbGUgKG5leHQpIHtcbiAgICAgICAgICAgICAgICAgICAgaGFzTWlzbWF0Y2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFoYXNXYXJuZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm4oYEh5ZHJhdGlvbiBjaGlsZHJlbiBtaXNtYXRjaCBpbiA8JHt2bm9kZS50eXBlfT46IGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBzZXJ2ZXIgcmVuZGVyZWQgZWxlbWVudCBjb250YWlucyBtb3JlIGNoaWxkIG5vZGVzIHRoYW4gY2xpZW50IHZkb20uYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNXYXJuZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSBTU1JlZCBET00gY29udGFpbnMgbW9yZSBub2RlcyB0aGFuIGl0IHNob3VsZC4gUmVtb3ZlIHRoZW0uXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1ciA9IG5leHQ7XG4gICAgICAgICAgICAgICAgICAgIG5leHQgPSBuZXh0Lm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgICAgICAgICByZW1vdmUoY3VyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzaGFwZUZsYWcgJiA4IC8qIFNoYXBlRmxhZ3MuVEVYVF9DSElMRFJFTiAqLykge1xuICAgICAgICAgICAgICAgIGlmIChlbC50ZXh0Q29udGVudCAhPT0gdm5vZGUuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgaGFzTWlzbWF0Y2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm4oYEh5ZHJhdGlvbiB0ZXh0IGNvbnRlbnQgbWlzbWF0Y2ggaW4gPCR7dm5vZGUudHlwZX0+OlxcbmAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAtIENsaWVudDogJHtlbC50ZXh0Q29udGVudH1cXG5gICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgLSBTZXJ2ZXI6ICR7dm5vZGUuY2hpbGRyZW59YCk7XG4gICAgICAgICAgICAgICAgICAgIGVsLnRleHRDb250ZW50ID0gdm5vZGUuY2hpbGRyZW47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbC5uZXh0U2libGluZztcbiAgICB9O1xuICAgIGNvbnN0IGh5ZHJhdGVDaGlsZHJlbiA9IChub2RlLCBwYXJlbnRWTm9kZSwgY29udGFpbmVyLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCkgPT4ge1xuICAgICAgICBvcHRpbWl6ZWQgPSBvcHRpbWl6ZWQgfHwgISFwYXJlbnRWTm9kZS5keW5hbWljQ2hpbGRyZW47XG4gICAgICAgIGNvbnN0IGNoaWxkcmVuID0gcGFyZW50Vk5vZGUuY2hpbGRyZW47XG4gICAgICAgIGNvbnN0IGwgPSBjaGlsZHJlbi5sZW5ndGg7XG4gICAgICAgIGxldCBoYXNXYXJuZWQgPSBmYWxzZTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHZub2RlID0gb3B0aW1pemVkXG4gICAgICAgICAgICAgICAgPyBjaGlsZHJlbltpXVxuICAgICAgICAgICAgICAgIDogKGNoaWxkcmVuW2ldID0gbm9ybWFsaXplVk5vZGUoY2hpbGRyZW5baV0pKTtcbiAgICAgICAgICAgIGlmIChub2RlKSB7XG4gICAgICAgICAgICAgICAgbm9kZSA9IGh5ZHJhdGVOb2RlKG5vZGUsIHZub2RlLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh2bm9kZS50eXBlID09PSBUZXh0ICYmICF2bm9kZS5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaGFzTWlzbWF0Y2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWhhc1dhcm5lZCkge1xuICAgICAgICAgICAgICAgICAgICB3YXJuKGBIeWRyYXRpb24gY2hpbGRyZW4gbWlzbWF0Y2ggaW4gPCR7Y29udGFpbmVyLnRhZ05hbWUudG9Mb3dlckNhc2UoKX0+OiBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBzZXJ2ZXIgcmVuZGVyZWQgZWxlbWVudCBjb250YWlucyBmZXdlciBjaGlsZCBub2RlcyB0aGFuIGNsaWVudCB2ZG9tLmApO1xuICAgICAgICAgICAgICAgICAgICBoYXNXYXJuZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyB0aGUgU1NSZWQgRE9NIGRpZG4ndCBjb250YWluIGVub3VnaCBub2Rlcy4gTW91bnQgdGhlIG1pc3Npbmcgb25lcy5cbiAgICAgICAgICAgICAgICBwYXRjaChudWxsLCB2bm9kZSwgY29udGFpbmVyLCBudWxsLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWR0NvbnRhaW5lcihjb250YWluZXIpLCBzbG90U2NvcGVJZHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIH07XG4gICAgY29uc3QgaHlkcmF0ZUZyYWdtZW50ID0gKG5vZGUsIHZub2RlLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCkgPT4ge1xuICAgICAgICBjb25zdCB7IHNsb3RTY29wZUlkczogZnJhZ21lbnRTbG90U2NvcGVJZHMgfSA9IHZub2RlO1xuICAgICAgICBpZiAoZnJhZ21lbnRTbG90U2NvcGVJZHMpIHtcbiAgICAgICAgICAgIHNsb3RTY29wZUlkcyA9IHNsb3RTY29wZUlkc1xuICAgICAgICAgICAgICAgID8gc2xvdFNjb3BlSWRzLmNvbmNhdChmcmFnbWVudFNsb3RTY29wZUlkcylcbiAgICAgICAgICAgICAgICA6IGZyYWdtZW50U2xvdFNjb3BlSWRzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHBhcmVudE5vZGUobm9kZSk7XG4gICAgICAgIGNvbnN0IG5leHQgPSBoeWRyYXRlQ2hpbGRyZW4obmV4dFNpYmxpbmcobm9kZSksIHZub2RlLCBjb250YWluZXIsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgaWYgKG5leHQgJiYgaXNDb21tZW50KG5leHQpICYmIG5leHQuZGF0YSA9PT0gJ10nKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV4dFNpYmxpbmcoKHZub2RlLmFuY2hvciA9IG5leHQpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGZyYWdtZW50IGRpZG4ndCBoeWRyYXRlIHN1Y2Nlc3NmdWxseSwgc2luY2Ugd2UgZGlkbid0IGdldCBhIGVuZCBhbmNob3JcbiAgICAgICAgICAgIC8vIGJhY2suIFRoaXMgc2hvdWxkIGhhdmUgbGVkIHRvIG5vZGUvY2hpbGRyZW4gbWlzbWF0Y2ggd2FybmluZ3MuXG4gICAgICAgICAgICBoYXNNaXNtYXRjaCA9IHRydWU7XG4gICAgICAgICAgICAvLyBzaW5jZSB0aGUgYW5jaG9yIGlzIG1pc3NpbmcsIHdlIG5lZWQgdG8gY3JlYXRlIG9uZSBhbmQgaW5zZXJ0IGl0XG4gICAgICAgICAgICBpbnNlcnQoKHZub2RlLmFuY2hvciA9IGNyZWF0ZUNvbW1lbnQoYF1gKSksIGNvbnRhaW5lciwgbmV4dCk7XG4gICAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgaGFuZGxlTWlzbWF0Y2ggPSAobm9kZSwgdm5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHNsb3RTY29wZUlkcywgaXNGcmFnbWVudCkgPT4ge1xuICAgICAgICBoYXNNaXNtYXRjaCA9IHRydWU7XG4gICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxuICAgICAgICAgICAgd2FybihgSHlkcmF0aW9uIG5vZGUgbWlzbWF0Y2g6XFxuLSBDbGllbnQgdm5vZGU6YCwgdm5vZGUudHlwZSwgYFxcbi0gU2VydmVyIHJlbmRlcmVkIERPTTpgLCBub2RlLCBub2RlLm5vZGVUeXBlID09PSAzIC8qIERPTU5vZGVUeXBlcy5URVhUICovXG4gICAgICAgICAgICAgICAgPyBgKHRleHQpYFxuICAgICAgICAgICAgICAgIDogaXNDb21tZW50KG5vZGUpICYmIG5vZGUuZGF0YSA9PT0gJ1snXG4gICAgICAgICAgICAgICAgICAgID8gYChzdGFydCBvZiBmcmFnbWVudClgXG4gICAgICAgICAgICAgICAgICAgIDogYGApO1xuICAgICAgICB2bm9kZS5lbCA9IG51bGw7XG4gICAgICAgIGlmIChpc0ZyYWdtZW50KSB7XG4gICAgICAgICAgICAvLyByZW1vdmUgZXhjZXNzaXZlIGZyYWdtZW50IG5vZGVzXG4gICAgICAgICAgICBjb25zdCBlbmQgPSBsb2NhdGVDbG9zaW5nQXN5bmNBbmNob3Iobm9kZSk7XG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5leHQgPSBuZXh0U2libGluZyhub2RlKTtcbiAgICAgICAgICAgICAgICBpZiAobmV4dCAmJiBuZXh0ICE9PSBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlKG5leHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5leHQgPSBuZXh0U2libGluZyhub2RlKTtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gcGFyZW50Tm9kZShub2RlKTtcbiAgICAgICAgcmVtb3ZlKG5vZGUpO1xuICAgICAgICBwYXRjaChudWxsLCB2bm9kZSwgY29udGFpbmVyLCBuZXh0LCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWR0NvbnRhaW5lcihjb250YWluZXIpLCBzbG90U2NvcGVJZHMpO1xuICAgICAgICByZXR1cm4gbmV4dDtcbiAgICB9O1xuICAgIGNvbnN0IGxvY2F0ZUNsb3NpbmdBc3luY0FuY2hvciA9IChub2RlKSA9PiB7XG4gICAgICAgIGxldCBtYXRjaCA9IDA7XG4gICAgICAgIHdoaWxlIChub2RlKSB7XG4gICAgICAgICAgICBub2RlID0gbmV4dFNpYmxpbmcobm9kZSk7XG4gICAgICAgICAgICBpZiAobm9kZSAmJiBpc0NvbW1lbnQobm9kZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAobm9kZS5kYXRhID09PSAnWycpXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoKys7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUuZGF0YSA9PT0gJ10nKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5leHRTaWJsaW5nKG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2gtLTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbm9kZTtcbiAgICB9O1xuICAgIHJldHVybiBbaHlkcmF0ZSwgaHlkcmF0ZU5vZGVdO1xufVxuXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1yZXN0cmljdGVkLWdsb2JhbHMgKi9cbmxldCBzdXBwb3J0ZWQ7XG5sZXQgcGVyZjtcbmZ1bmN0aW9uIHN0YXJ0TWVhc3VyZShpbnN0YW5jZSwgdHlwZSkge1xuICAgIGlmIChpbnN0YW5jZS5hcHBDb250ZXh0LmNvbmZpZy5wZXJmb3JtYW5jZSAmJiBpc1N1cHBvcnRlZCgpKSB7XG4gICAgICAgIHBlcmYubWFyayhgdnVlLSR7dHlwZX0tJHtpbnN0YW5jZS51aWR9YCk7XG4gICAgfVxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICAgIGRldnRvb2xzUGVyZlN0YXJ0KGluc3RhbmNlLCB0eXBlLCBpc1N1cHBvcnRlZCgpID8gcGVyZi5ub3coKSA6IERhdGUubm93KCkpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGVuZE1lYXN1cmUoaW5zdGFuY2UsIHR5cGUpIHtcbiAgICBpZiAoaW5zdGFuY2UuYXBwQ29udGV4dC5jb25maWcucGVyZm9ybWFuY2UgJiYgaXNTdXBwb3J0ZWQoKSkge1xuICAgICAgICBjb25zdCBzdGFydFRhZyA9IGB2dWUtJHt0eXBlfS0ke2luc3RhbmNlLnVpZH1gO1xuICAgICAgICBjb25zdCBlbmRUYWcgPSBzdGFydFRhZyArIGA6ZW5kYDtcbiAgICAgICAgcGVyZi5tYXJrKGVuZFRhZyk7XG4gICAgICAgIHBlcmYubWVhc3VyZShgPCR7Zm9ybWF0Q29tcG9uZW50TmFtZShpbnN0YW5jZSwgaW5zdGFuY2UudHlwZSl9PiAke3R5cGV9YCwgc3RhcnRUYWcsIGVuZFRhZyk7XG4gICAgICAgIHBlcmYuY2xlYXJNYXJrcyhzdGFydFRhZyk7XG4gICAgICAgIHBlcmYuY2xlYXJNYXJrcyhlbmRUYWcpO1xuICAgIH1cbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xuICAgICAgICBkZXZ0b29sc1BlcmZFbmQoaW5zdGFuY2UsIHR5cGUsIGlzU3VwcG9ydGVkKCkgPyBwZXJmLm5vdygpIDogRGF0ZS5ub3coKSk7XG4gICAgfVxufVxuZnVuY3Rpb24gaXNTdXBwb3J0ZWQoKSB7XG4gICAgaWYgKHN1cHBvcnRlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBzdXBwb3J0ZWQ7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cucGVyZm9ybWFuY2UpIHtcbiAgICAgICAgc3VwcG9ydGVkID0gdHJ1ZTtcbiAgICAgICAgcGVyZiA9IHdpbmRvdy5wZXJmb3JtYW5jZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHN1cHBvcnRlZCA9IGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gc3VwcG9ydGVkO1xufVxuXG4vKipcbiAqIFRoaXMgaXMgb25seSBjYWxsZWQgaW4gZXNtLWJ1bmRsZXIgYnVpbGRzLlxuICogSXQgaXMgY2FsbGVkIHdoZW4gYSByZW5kZXJlciBpcyBjcmVhdGVkLCBpbiBgYmFzZUNyZWF0ZVJlbmRlcmVyYCBzbyB0aGF0XG4gKiBpbXBvcnRpbmcgcnVudGltZS1jb3JlIGlzIHNpZGUtZWZmZWN0cyBmcmVlLlxuICpcbiAqIGlzdGFuYnVsLWlnbm9yZS1uZXh0XG4gKi9cbmZ1bmN0aW9uIGluaXRGZWF0dXJlRmxhZ3MoKSB7XG4gICAgY29uc3QgbmVlZFdhcm4gPSBbXTtcbiAgICBpZiAodHlwZW9mIF9fVlVFX09QVElPTlNfQVBJX18gIT09ICdib29sZWFuJykge1xuICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgbmVlZFdhcm4ucHVzaChgX19WVUVfT1BUSU9OU19BUElfX2ApO1xuICAgICAgICBnZXRHbG9iYWxUaGlzKCkuX19WVUVfT1BUSU9OU19BUElfXyA9IHRydWU7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgX19WVUVfUFJPRF9ERVZUT09MU19fICE9PSAnYm9vbGVhbicpIHtcbiAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIG5lZWRXYXJuLnB1c2goYF9fVlVFX1BST0RfREVWVE9PTFNfX2ApO1xuICAgICAgICBnZXRHbG9iYWxUaGlzKCkuX19WVUVfUFJPRF9ERVZUT09MU19fID0gZmFsc2U7XG4gICAgfVxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgbmVlZFdhcm4ubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IG11bHRpID0gbmVlZFdhcm4ubGVuZ3RoID4gMTtcbiAgICAgICAgY29uc29sZS53YXJuKGBGZWF0dXJlIGZsYWcke211bHRpID8gYHNgIDogYGB9ICR7bmVlZFdhcm4uam9pbignLCAnKX0gJHttdWx0aSA/IGBhcmVgIDogYGlzYH0gbm90IGV4cGxpY2l0bHkgZGVmaW5lZC4gWW91IGFyZSBydW5uaW5nIHRoZSBlc20tYnVuZGxlciBidWlsZCBvZiBWdWUsIGAgK1xuICAgICAgICAgICAgYHdoaWNoIGV4cGVjdHMgdGhlc2UgY29tcGlsZS10aW1lIGZlYXR1cmUgZmxhZ3MgdG8gYmUgZ2xvYmFsbHkgaW5qZWN0ZWQgYCArXG4gICAgICAgICAgICBgdmlhIHRoZSBidW5kbGVyIGNvbmZpZyBpbiBvcmRlciB0byBnZXQgYmV0dGVyIHRyZWUtc2hha2luZyBpbiB0aGUgYCArXG4gICAgICAgICAgICBgcHJvZHVjdGlvbiBidW5kbGUuXFxuXFxuYCArXG4gICAgICAgICAgICBgRm9yIG1vcmUgZGV0YWlscywgc2VlIGh0dHBzOi8vbGluay52dWVqcy5vcmcvZmVhdHVyZS1mbGFncy5gKTtcbiAgICB9XG59XG5cbmNvbnN0IHF1ZXVlUG9zdFJlbmRlckVmZmVjdCA9IHF1ZXVlRWZmZWN0V2l0aFN1c3BlbnNlXG4gICAgO1xuLyoqXG4gKiBUaGUgY3JlYXRlUmVuZGVyZXIgZnVuY3Rpb24gYWNjZXB0cyB0d28gZ2VuZXJpYyBhcmd1bWVudHM6XG4gKiBIb3N0Tm9kZSBhbmQgSG9zdEVsZW1lbnQsIGNvcnJlc3BvbmRpbmcgdG8gTm9kZSBhbmQgRWxlbWVudCB0eXBlcyBpbiB0aGVcbiAqIGhvc3QgZW52aXJvbm1lbnQuIEZvciBleGFtcGxlLCBmb3IgcnVudGltZS1kb20sIEhvc3ROb2RlIHdvdWxkIGJlIHRoZSBET01cbiAqIGBOb2RlYCBpbnRlcmZhY2UgYW5kIEhvc3RFbGVtZW50IHdvdWxkIGJlIHRoZSBET00gYEVsZW1lbnRgIGludGVyZmFjZS5cbiAqXG4gKiBDdXN0b20gcmVuZGVyZXJzIGNhbiBwYXNzIGluIHRoZSBwbGF0Zm9ybSBzcGVjaWZpYyB0eXBlcyBsaWtlIHRoaXM6XG4gKlxuICogYGBgIGpzXG4gKiBjb25zdCB7IHJlbmRlciwgY3JlYXRlQXBwIH0gPSBjcmVhdGVSZW5kZXJlcjxOb2RlLCBFbGVtZW50Pih7XG4gKiAgIHBhdGNoUHJvcCxcbiAqICAgLi4ubm9kZU9wc1xuICogfSlcbiAqIGBgYFxuICovXG5mdW5jdGlvbiBjcmVhdGVSZW5kZXJlcihvcHRpb25zKSB7XG4gICAgcmV0dXJuIGJhc2VDcmVhdGVSZW5kZXJlcihvcHRpb25zKTtcbn1cbi8vIFNlcGFyYXRlIEFQSSBmb3IgY3JlYXRpbmcgaHlkcmF0aW9uLWVuYWJsZWQgcmVuZGVyZXIuXG4vLyBIeWRyYXRpb24gbG9naWMgaXMgb25seSB1c2VkIHdoZW4gY2FsbGluZyB0aGlzIGZ1bmN0aW9uLCBtYWtpbmcgaXRcbi8vIHRyZWUtc2hha2FibGUuXG5mdW5jdGlvbiBjcmVhdGVIeWRyYXRpb25SZW5kZXJlcihvcHRpb25zKSB7XG4gICAgcmV0dXJuIGJhc2VDcmVhdGVSZW5kZXJlcihvcHRpb25zLCBjcmVhdGVIeWRyYXRpb25GdW5jdGlvbnMpO1xufVxuLy8gaW1wbGVtZW50YXRpb25cbmZ1bmN0aW9uIGJhc2VDcmVhdGVSZW5kZXJlcihvcHRpb25zLCBjcmVhdGVIeWRyYXRpb25GbnMpIHtcbiAgICAvLyBjb21waWxlLXRpbWUgZmVhdHVyZSBmbGFncyBjaGVja1xuICAgIHtcbiAgICAgICAgaW5pdEZlYXR1cmVGbGFncygpO1xuICAgIH1cbiAgICBjb25zdCB0YXJnZXQgPSBnZXRHbG9iYWxUaGlzKCk7XG4gICAgdGFyZ2V0Ll9fVlVFX18gPSB0cnVlO1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICAgIHNldERldnRvb2xzSG9vayh0YXJnZXQuX19WVUVfREVWVE9PTFNfR0xPQkFMX0hPT0tfXywgdGFyZ2V0KTtcbiAgICB9XG4gICAgY29uc3QgeyBpbnNlcnQ6IGhvc3RJbnNlcnQsIHJlbW92ZTogaG9zdFJlbW92ZSwgcGF0Y2hQcm9wOiBob3N0UGF0Y2hQcm9wLCBjcmVhdGVFbGVtZW50OiBob3N0Q3JlYXRlRWxlbWVudCwgY3JlYXRlVGV4dDogaG9zdENyZWF0ZVRleHQsIGNyZWF0ZUNvbW1lbnQ6IGhvc3RDcmVhdGVDb21tZW50LCBzZXRUZXh0OiBob3N0U2V0VGV4dCwgc2V0RWxlbWVudFRleHQ6IGhvc3RTZXRFbGVtZW50VGV4dCwgcGFyZW50Tm9kZTogaG9zdFBhcmVudE5vZGUsIG5leHRTaWJsaW5nOiBob3N0TmV4dFNpYmxpbmcsIHNldFNjb3BlSWQ6IGhvc3RTZXRTY29wZUlkID0gTk9PUCwgaW5zZXJ0U3RhdGljQ29udGVudDogaG9zdEluc2VydFN0YXRpY0NvbnRlbnQgfSA9IG9wdGlvbnM7XG4gICAgLy8gTm90ZTogZnVuY3Rpb25zIGluc2lkZSB0aGlzIGNsb3N1cmUgc2hvdWxkIHVzZSBgY29uc3QgeHh4ID0gKCkgPT4ge31gXG4gICAgLy8gc3R5bGUgaW4gb3JkZXIgdG8gcHJldmVudCBiZWluZyBpbmxpbmVkIGJ5IG1pbmlmaWVycy5cbiAgICBjb25zdCBwYXRjaCA9IChuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yID0gbnVsbCwgcGFyZW50Q29tcG9uZW50ID0gbnVsbCwgcGFyZW50U3VzcGVuc2UgPSBudWxsLCBpc1NWRyA9IGZhbHNlLCBzbG90U2NvcGVJZHMgPSBudWxsLCBvcHRpbWl6ZWQgPSAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgaXNIbXJVcGRhdGluZyA/IGZhbHNlIDogISFuMi5keW5hbWljQ2hpbGRyZW4pID0+IHtcbiAgICAgICAgaWYgKG4xID09PSBuMikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIHBhdGNoaW5nICYgbm90IHNhbWUgdHlwZSwgdW5tb3VudCBvbGQgdHJlZVxuICAgICAgICBpZiAobjEgJiYgIWlzU2FtZVZOb2RlVHlwZShuMSwgbjIpKSB7XG4gICAgICAgICAgICBhbmNob3IgPSBnZXROZXh0SG9zdE5vZGUobjEpO1xuICAgICAgICAgICAgdW5tb3VudChuMSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgdHJ1ZSk7XG4gICAgICAgICAgICBuMSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG4yLnBhdGNoRmxhZyA9PT0gLTIgLyogUGF0Y2hGbGFncy5CQUlMICovKSB7XG4gICAgICAgICAgICBvcHRpbWl6ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIG4yLmR5bmFtaWNDaGlsZHJlbiA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyB0eXBlLCByZWYsIHNoYXBlRmxhZyB9ID0gbjI7XG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgY2FzZSBUZXh0OlxuICAgICAgICAgICAgICAgIHByb2Nlc3NUZXh0KG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDb21tZW50OlxuICAgICAgICAgICAgICAgIHByb2Nlc3NDb21tZW50Tm9kZShuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgU3RhdGljOlxuICAgICAgICAgICAgICAgIGlmIChuMSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIG1vdW50U3RhdGljTm9kZShuMiwgY29udGFpbmVyLCBhbmNob3IsIGlzU1ZHKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhdGNoU3RhdGljTm9kZShuMSwgbjIsIGNvbnRhaW5lciwgaXNTVkcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgRnJhZ21lbnQ6XG4gICAgICAgICAgICAgICAgcHJvY2Vzc0ZyYWdtZW50KG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGlmIChzaGFwZUZsYWcgJiAxIC8qIFNoYXBlRmxhZ3MuRUxFTUVOVCAqLykge1xuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzRWxlbWVudChuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChzaGFwZUZsYWcgJiA2IC8qIFNoYXBlRmxhZ3MuQ09NUE9ORU5UICovKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NDb21wb25lbnQobjEsIG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoc2hhcGVGbGFnICYgNjQgLyogU2hhcGVGbGFncy5URUxFUE9SVCAqLykge1xuICAgICAgICAgICAgICAgICAgICB0eXBlLnByb2Nlc3MobjEsIG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCBpbnRlcm5hbHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChzaGFwZUZsYWcgJiAxMjggLyogU2hhcGVGbGFncy5TVVNQRU5TRSAqLykge1xuICAgICAgICAgICAgICAgICAgICB0eXBlLnByb2Nlc3MobjEsIG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCBpbnRlcm5hbHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgd2FybignSW52YWxpZCBWTm9kZSB0eXBlOicsIHR5cGUsIGAoJHt0eXBlb2YgdHlwZX0pYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIHNldCByZWZcbiAgICAgICAgaWYgKHJlZiAhPSBudWxsICYmIHBhcmVudENvbXBvbmVudCkge1xuICAgICAgICAgICAgc2V0UmVmKHJlZiwgbjEgJiYgbjEucmVmLCBwYXJlbnRTdXNwZW5zZSwgbjIgfHwgbjEsICFuMik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHByb2Nlc3NUZXh0ID0gKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IpID0+IHtcbiAgICAgICAgaWYgKG4xID09IG51bGwpIHtcbiAgICAgICAgICAgIGhvc3RJbnNlcnQoKG4yLmVsID0gaG9zdENyZWF0ZVRleHQobjIuY2hpbGRyZW4pKSwgY29udGFpbmVyLCBhbmNob3IpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZWwgPSAobjIuZWwgPSBuMS5lbCk7XG4gICAgICAgICAgICBpZiAobjIuY2hpbGRyZW4gIT09IG4xLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgaG9zdFNldFRleHQoZWwsIG4yLmNoaWxkcmVuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgcHJvY2Vzc0NvbW1lbnROb2RlID0gKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IpID0+IHtcbiAgICAgICAgaWYgKG4xID09IG51bGwpIHtcbiAgICAgICAgICAgIGhvc3RJbnNlcnQoKG4yLmVsID0gaG9zdENyZWF0ZUNvbW1lbnQobjIuY2hpbGRyZW4gfHwgJycpKSwgY29udGFpbmVyLCBhbmNob3IpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gdGhlcmUncyBubyBzdXBwb3J0IGZvciBkeW5hbWljIGNvbW1lbnRzXG4gICAgICAgICAgICBuMi5lbCA9IG4xLmVsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBtb3VudFN0YXRpY05vZGUgPSAobjIsIGNvbnRhaW5lciwgYW5jaG9yLCBpc1NWRykgPT4ge1xuICAgICAgICBbbjIuZWwsIG4yLmFuY2hvcl0gPSBob3N0SW5zZXJ0U3RhdGljQ29udGVudChuMi5jaGlsZHJlbiwgY29udGFpbmVyLCBhbmNob3IsIGlzU1ZHLCBuMi5lbCwgbjIuYW5jaG9yKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERldiAvIEhNUiBvbmx5XG4gICAgICovXG4gICAgY29uc3QgcGF0Y2hTdGF0aWNOb2RlID0gKG4xLCBuMiwgY29udGFpbmVyLCBpc1NWRykgPT4ge1xuICAgICAgICAvLyBzdGF0aWMgbm9kZXMgYXJlIG9ubHkgcGF0Y2hlZCBkdXJpbmcgZGV2IGZvciBITVJcbiAgICAgICAgaWYgKG4yLmNoaWxkcmVuICE9PSBuMS5jaGlsZHJlbikge1xuICAgICAgICAgICAgY29uc3QgYW5jaG9yID0gaG9zdE5leHRTaWJsaW5nKG4xLmFuY2hvcik7XG4gICAgICAgICAgICAvLyByZW1vdmUgZXhpc3RpbmdcbiAgICAgICAgICAgIHJlbW92ZVN0YXRpY05vZGUobjEpO1xuICAgICAgICAgICAgW24yLmVsLCBuMi5hbmNob3JdID0gaG9zdEluc2VydFN0YXRpY0NvbnRlbnQobjIuY2hpbGRyZW4sIGNvbnRhaW5lciwgYW5jaG9yLCBpc1NWRyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBuMi5lbCA9IG4xLmVsO1xuICAgICAgICAgICAgbjIuYW5jaG9yID0gbjEuYW5jaG9yO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBtb3ZlU3RhdGljTm9kZSA9ICh7IGVsLCBhbmNob3IgfSwgY29udGFpbmVyLCBuZXh0U2libGluZykgPT4ge1xuICAgICAgICBsZXQgbmV4dDtcbiAgICAgICAgd2hpbGUgKGVsICYmIGVsICE9PSBhbmNob3IpIHtcbiAgICAgICAgICAgIG5leHQgPSBob3N0TmV4dFNpYmxpbmcoZWwpO1xuICAgICAgICAgICAgaG9zdEluc2VydChlbCwgY29udGFpbmVyLCBuZXh0U2libGluZyk7XG4gICAgICAgICAgICBlbCA9IG5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgaG9zdEluc2VydChhbmNob3IsIGNvbnRhaW5lciwgbmV4dFNpYmxpbmcpO1xuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlU3RhdGljTm9kZSA9ICh7IGVsLCBhbmNob3IgfSkgPT4ge1xuICAgICAgICBsZXQgbmV4dDtcbiAgICAgICAgd2hpbGUgKGVsICYmIGVsICE9PSBhbmNob3IpIHtcbiAgICAgICAgICAgIG5leHQgPSBob3N0TmV4dFNpYmxpbmcoZWwpO1xuICAgICAgICAgICAgaG9zdFJlbW92ZShlbCk7XG4gICAgICAgICAgICBlbCA9IG5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgaG9zdFJlbW92ZShhbmNob3IpO1xuICAgIH07XG4gICAgY29uc3QgcHJvY2Vzc0VsZW1lbnQgPSAobjEsIG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKSA9PiB7XG4gICAgICAgIGlzU1ZHID0gaXNTVkcgfHwgbjIudHlwZSA9PT0gJ3N2Zyc7XG4gICAgICAgIGlmIChuMSA9PSBudWxsKSB7XG4gICAgICAgICAgICBtb3VudEVsZW1lbnQobjIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcGF0Y2hFbGVtZW50KG4xLCBuMiwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgbW91bnRFbGVtZW50ID0gKHZub2RlLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKSA9PiB7XG4gICAgICAgIGxldCBlbDtcbiAgICAgICAgbGV0IHZub2RlSG9vaztcbiAgICAgICAgY29uc3QgeyB0eXBlLCBwcm9wcywgc2hhcGVGbGFnLCB0cmFuc2l0aW9uLCBkaXJzIH0gPSB2bm9kZTtcbiAgICAgICAgZWwgPSB2bm9kZS5lbCA9IGhvc3RDcmVhdGVFbGVtZW50KHZub2RlLnR5cGUsIGlzU1ZHLCBwcm9wcyAmJiBwcm9wcy5pcywgcHJvcHMpO1xuICAgICAgICAvLyBtb3VudCBjaGlsZHJlbiBmaXJzdCwgc2luY2Ugc29tZSBwcm9wcyBtYXkgcmVseSBvbiBjaGlsZCBjb250ZW50XG4gICAgICAgIC8vIGJlaW5nIGFscmVhZHkgcmVuZGVyZWQsIGUuZy4gYDxzZWxlY3QgdmFsdWU+YFxuICAgICAgICBpZiAoc2hhcGVGbGFnICYgOCAvKiBTaGFwZUZsYWdzLlRFWFRfQ0hJTERSRU4gKi8pIHtcbiAgICAgICAgICAgIGhvc3RTZXRFbGVtZW50VGV4dChlbCwgdm5vZGUuY2hpbGRyZW4pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNoYXBlRmxhZyAmIDE2IC8qIFNoYXBlRmxhZ3MuQVJSQVlfQ0hJTERSRU4gKi8pIHtcbiAgICAgICAgICAgIG1vdW50Q2hpbGRyZW4odm5vZGUuY2hpbGRyZW4sIGVsLCBudWxsLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRyAmJiB0eXBlICE9PSAnZm9yZWlnbk9iamVjdCcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGlycykge1xuICAgICAgICAgICAgaW52b2tlRGlyZWN0aXZlSG9vayh2bm9kZSwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCAnY3JlYXRlZCcpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHByb3BzXG4gICAgICAgIGlmIChwcm9wcykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gcHJvcHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoa2V5ICE9PSAndmFsdWUnICYmICFpc1Jlc2VydmVkUHJvcChrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGhvc3RQYXRjaFByb3AoZWwsIGtleSwgbnVsbCwgcHJvcHNba2V5XSwgaXNTVkcsIHZub2RlLmNoaWxkcmVuLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCB1bm1vdW50Q2hpbGRyZW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogU3BlY2lhbCBjYXNlIGZvciBzZXR0aW5nIHZhbHVlIG9uIERPTSBlbGVtZW50czpcbiAgICAgICAgICAgICAqIC0gaXQgY2FuIGJlIG9yZGVyLXNlbnNpdGl2ZSAoZS5nLiBzaG91bGQgYmUgc2V0ICphZnRlciogbWluL21heCwgIzIzMjUsICM0MDI0KVxuICAgICAgICAgICAgICogLSBpdCBuZWVkcyB0byBiZSBmb3JjZWQgKCMxNDcxKVxuICAgICAgICAgICAgICogIzIzNTMgcHJvcG9zZXMgYWRkaW5nIGFub3RoZXIgcmVuZGVyZXIgb3B0aW9uIHRvIGNvbmZpZ3VyZSB0aGlzLCBidXRcbiAgICAgICAgICAgICAqIHRoZSBwcm9wZXJ0aWVzIGFmZmVjdHMgYXJlIHNvIGZpbml0ZSBpdCBpcyB3b3J0aCBzcGVjaWFsIGNhc2luZyBpdFxuICAgICAgICAgICAgICogaGVyZSB0byByZWR1Y2UgdGhlIGNvbXBsZXhpdHkuIChTcGVjaWFsIGNhc2luZyBpdCBhbHNvIHNob3VsZCBub3RcbiAgICAgICAgICAgICAqIGFmZmVjdCBub24tRE9NIHJlbmRlcmVycylcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgaWYgKCd2YWx1ZScgaW4gcHJvcHMpIHtcbiAgICAgICAgICAgICAgICBob3N0UGF0Y2hQcm9wKGVsLCAndmFsdWUnLCBudWxsLCBwcm9wcy52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKHZub2RlSG9vayA9IHByb3BzLm9uVm5vZGVCZWZvcmVNb3VudCkpIHtcbiAgICAgICAgICAgICAgICBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBwYXJlbnRDb21wb25lbnQsIHZub2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBzY29wZUlkXG4gICAgICAgIHNldFNjb3BlSWQoZWwsIHZub2RlLCB2bm9kZS5zY29wZUlkLCBzbG90U2NvcGVJZHMsIHBhcmVudENvbXBvbmVudCk7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZWwsICdfX3Zub2RlJywge1xuICAgICAgICAgICAgICAgIHZhbHVlOiB2bm9kZSxcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZWwsICdfX3Z1ZVBhcmVudENvbXBvbmVudCcsIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGlycykge1xuICAgICAgICAgICAgaW52b2tlRGlyZWN0aXZlSG9vayh2bm9kZSwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCAnYmVmb3JlTW91bnQnKTtcbiAgICAgICAgfVxuICAgICAgICAvLyAjMTU4MyBGb3IgaW5zaWRlIHN1c3BlbnNlICsgc3VzcGVuc2Ugbm90IHJlc29sdmVkIGNhc2UsIGVudGVyIGhvb2sgc2hvdWxkIGNhbGwgd2hlbiBzdXNwZW5zZSByZXNvbHZlZFxuICAgICAgICAvLyAjMTY4OSBGb3IgaW5zaWRlIHN1c3BlbnNlICsgc3VzcGVuc2UgcmVzb2x2ZWQgY2FzZSwganVzdCBjYWxsIGl0XG4gICAgICAgIGNvbnN0IG5lZWRDYWxsVHJhbnNpdGlvbkhvb2tzID0gKCFwYXJlbnRTdXNwZW5zZSB8fCAocGFyZW50U3VzcGVuc2UgJiYgIXBhcmVudFN1c3BlbnNlLnBlbmRpbmdCcmFuY2gpKSAmJlxuICAgICAgICAgICAgdHJhbnNpdGlvbiAmJlxuICAgICAgICAgICAgIXRyYW5zaXRpb24ucGVyc2lzdGVkO1xuICAgICAgICBpZiAobmVlZENhbGxUcmFuc2l0aW9uSG9va3MpIHtcbiAgICAgICAgICAgIHRyYW5zaXRpb24uYmVmb3JlRW50ZXIoZWwpO1xuICAgICAgICB9XG4gICAgICAgIGhvc3RJbnNlcnQoZWwsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgICAgaWYgKCh2bm9kZUhvb2sgPSBwcm9wcyAmJiBwcm9wcy5vblZub2RlTW91bnRlZCkgfHxcbiAgICAgICAgICAgIG5lZWRDYWxsVHJhbnNpdGlvbkhvb2tzIHx8XG4gICAgICAgICAgICBkaXJzKSB7XG4gICAgICAgICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHZub2RlSG9vayAmJiBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBwYXJlbnRDb21wb25lbnQsIHZub2RlKTtcbiAgICAgICAgICAgICAgICBuZWVkQ2FsbFRyYW5zaXRpb25Ib29rcyAmJiB0cmFuc2l0aW9uLmVudGVyKGVsKTtcbiAgICAgICAgICAgICAgICBkaXJzICYmIGludm9rZURpcmVjdGl2ZUhvb2sodm5vZGUsIG51bGwsIHBhcmVudENvbXBvbmVudCwgJ21vdW50ZWQnKTtcbiAgICAgICAgICAgIH0sIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgc2V0U2NvcGVJZCA9IChlbCwgdm5vZGUsIHNjb3BlSWQsIHNsb3RTY29wZUlkcywgcGFyZW50Q29tcG9uZW50KSA9PiB7XG4gICAgICAgIGlmIChzY29wZUlkKSB7XG4gICAgICAgICAgICBob3N0U2V0U2NvcGVJZChlbCwgc2NvcGVJZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNsb3RTY29wZUlkcykge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzbG90U2NvcGVJZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBob3N0U2V0U2NvcGVJZChlbCwgc2xvdFNjb3BlSWRzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyZW50Q29tcG9uZW50KSB7XG4gICAgICAgICAgICBsZXQgc3ViVHJlZSA9IHBhcmVudENvbXBvbmVudC5zdWJUcmVlO1xuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxuICAgICAgICAgICAgICAgIHN1YlRyZWUucGF0Y2hGbGFnID4gMCAmJlxuICAgICAgICAgICAgICAgIHN1YlRyZWUucGF0Y2hGbGFnICYgMjA0OCAvKiBQYXRjaEZsYWdzLkRFVl9ST09UX0ZSQUdNRU5UICovKSB7XG4gICAgICAgICAgICAgICAgc3ViVHJlZSA9XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlclNpbmdsZVJvb3Qoc3ViVHJlZS5jaGlsZHJlbikgfHwgc3ViVHJlZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2bm9kZSA9PT0gc3ViVHJlZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudFZOb2RlID0gcGFyZW50Q29tcG9uZW50LnZub2RlO1xuICAgICAgICAgICAgICAgIHNldFNjb3BlSWQoZWwsIHBhcmVudFZOb2RlLCBwYXJlbnRWTm9kZS5zY29wZUlkLCBwYXJlbnRWTm9kZS5zbG90U2NvcGVJZHMsIHBhcmVudENvbXBvbmVudC5wYXJlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBtb3VudENoaWxkcmVuID0gKGNoaWxkcmVuLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCBzdGFydCA9IDApID0+IHtcbiAgICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkID0gKGNoaWxkcmVuW2ldID0gb3B0aW1pemVkXG4gICAgICAgICAgICAgICAgPyBjbG9uZUlmTW91bnRlZChjaGlsZHJlbltpXSlcbiAgICAgICAgICAgICAgICA6IG5vcm1hbGl6ZVZOb2RlKGNoaWxkcmVuW2ldKSk7XG4gICAgICAgICAgICBwYXRjaChudWxsLCBjaGlsZCwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHBhdGNoRWxlbWVudCA9IChuMSwgbjIsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCkgPT4ge1xuICAgICAgICBjb25zdCBlbCA9IChuMi5lbCA9IG4xLmVsKTtcbiAgICAgICAgbGV0IHsgcGF0Y2hGbGFnLCBkeW5hbWljQ2hpbGRyZW4sIGRpcnMgfSA9IG4yO1xuICAgICAgICAvLyAjMTQyNiB0YWtlIHRoZSBvbGQgdm5vZGUncyBwYXRjaCBmbGFnIGludG8gYWNjb3VudCBzaW5jZSB1c2VyIG1heSBjbG9uZSBhXG4gICAgICAgIC8vIGNvbXBpbGVyLWdlbmVyYXRlZCB2bm9kZSwgd2hpY2ggZGUtb3B0cyB0byBGVUxMX1BST1BTXG4gICAgICAgIHBhdGNoRmxhZyB8PSBuMS5wYXRjaEZsYWcgJiAxNiAvKiBQYXRjaEZsYWdzLkZVTExfUFJPUFMgKi87XG4gICAgICAgIGNvbnN0IG9sZFByb3BzID0gbjEucHJvcHMgfHwgRU1QVFlfT0JKO1xuICAgICAgICBjb25zdCBuZXdQcm9wcyA9IG4yLnByb3BzIHx8IEVNUFRZX09CSjtcbiAgICAgICAgbGV0IHZub2RlSG9vaztcbiAgICAgICAgLy8gZGlzYWJsZSByZWN1cnNlIGluIGJlZm9yZVVwZGF0ZSBob29rc1xuICAgICAgICBwYXJlbnRDb21wb25lbnQgJiYgdG9nZ2xlUmVjdXJzZShwYXJlbnRDb21wb25lbnQsIGZhbHNlKTtcbiAgICAgICAgaWYgKCh2bm9kZUhvb2sgPSBuZXdQcm9wcy5vblZub2RlQmVmb3JlVXBkYXRlKSkge1xuICAgICAgICAgICAgaW52b2tlVk5vZGVIb29rKHZub2RlSG9vaywgcGFyZW50Q29tcG9uZW50LCBuMiwgbjEpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkaXJzKSB7XG4gICAgICAgICAgICBpbnZva2VEaXJlY3RpdmVIb29rKG4yLCBuMSwgcGFyZW50Q29tcG9uZW50LCAnYmVmb3JlVXBkYXRlJyk7XG4gICAgICAgIH1cbiAgICAgICAgcGFyZW50Q29tcG9uZW50ICYmIHRvZ2dsZVJlY3Vyc2UocGFyZW50Q29tcG9uZW50LCB0cnVlKTtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBpc0htclVwZGF0aW5nKSB7XG4gICAgICAgICAgICAvLyBITVIgdXBkYXRlZCwgZm9yY2UgZnVsbCBkaWZmXG4gICAgICAgICAgICBwYXRjaEZsYWcgPSAwO1xuICAgICAgICAgICAgb3B0aW1pemVkID0gZmFsc2U7XG4gICAgICAgICAgICBkeW5hbWljQ2hpbGRyZW4gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFyZUNoaWxkcmVuU1ZHID0gaXNTVkcgJiYgbjIudHlwZSAhPT0gJ2ZvcmVpZ25PYmplY3QnO1xuICAgICAgICBpZiAoZHluYW1pY0NoaWxkcmVuKSB7XG4gICAgICAgICAgICBwYXRjaEJsb2NrQ2hpbGRyZW4objEuZHluYW1pY0NoaWxkcmVuLCBkeW5hbWljQ2hpbGRyZW4sIGVsLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBhcmVDaGlsZHJlblNWRywgc2xvdFNjb3BlSWRzKTtcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgcGFyZW50Q29tcG9uZW50ICYmIHBhcmVudENvbXBvbmVudC50eXBlLl9faG1ySWQpIHtcbiAgICAgICAgICAgICAgICB0cmF2ZXJzZVN0YXRpY0NoaWxkcmVuKG4xLCBuMik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIW9wdGltaXplZCkge1xuICAgICAgICAgICAgLy8gZnVsbCBkaWZmXG4gICAgICAgICAgICBwYXRjaENoaWxkcmVuKG4xLCBuMiwgZWwsIG51bGwsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGFyZUNoaWxkcmVuU1ZHLCBzbG90U2NvcGVJZHMsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGF0Y2hGbGFnID4gMCkge1xuICAgICAgICAgICAgLy8gdGhlIHByZXNlbmNlIG9mIGEgcGF0Y2hGbGFnIG1lYW5zIHRoaXMgZWxlbWVudCdzIHJlbmRlciBjb2RlIHdhc1xuICAgICAgICAgICAgLy8gZ2VuZXJhdGVkIGJ5IHRoZSBjb21waWxlciBhbmQgY2FuIHRha2UgdGhlIGZhc3QgcGF0aC5cbiAgICAgICAgICAgIC8vIGluIHRoaXMgcGF0aCBvbGQgbm9kZSBhbmQgbmV3IG5vZGUgYXJlIGd1YXJhbnRlZWQgdG8gaGF2ZSB0aGUgc2FtZSBzaGFwZVxuICAgICAgICAgICAgLy8gKGkuZS4gYXQgdGhlIGV4YWN0IHNhbWUgcG9zaXRpb24gaW4gdGhlIHNvdXJjZSB0ZW1wbGF0ZSlcbiAgICAgICAgICAgIGlmIChwYXRjaEZsYWcgJiAxNiAvKiBQYXRjaEZsYWdzLkZVTExfUFJPUFMgKi8pIHtcbiAgICAgICAgICAgICAgICAvLyBlbGVtZW50IHByb3BzIGNvbnRhaW4gZHluYW1pYyBrZXlzLCBmdWxsIGRpZmYgbmVlZGVkXG4gICAgICAgICAgICAgICAgcGF0Y2hQcm9wcyhlbCwgbjIsIG9sZFByb3BzLCBuZXdQcm9wcywgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gY2xhc3NcbiAgICAgICAgICAgICAgICAvLyB0aGlzIGZsYWcgaXMgbWF0Y2hlZCB3aGVuIHRoZSBlbGVtZW50IGhhcyBkeW5hbWljIGNsYXNzIGJpbmRpbmdzLlxuICAgICAgICAgICAgICAgIGlmIChwYXRjaEZsYWcgJiAyIC8qIFBhdGNoRmxhZ3MuQ0xBU1MgKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9sZFByb3BzLmNsYXNzICE9PSBuZXdQcm9wcy5jbGFzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaG9zdFBhdGNoUHJvcChlbCwgJ2NsYXNzJywgbnVsbCwgbmV3UHJvcHMuY2xhc3MsIGlzU1ZHKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBzdHlsZVxuICAgICAgICAgICAgICAgIC8vIHRoaXMgZmxhZyBpcyBtYXRjaGVkIHdoZW4gdGhlIGVsZW1lbnQgaGFzIGR5bmFtaWMgc3R5bGUgYmluZGluZ3NcbiAgICAgICAgICAgICAgICBpZiAocGF0Y2hGbGFnICYgNCAvKiBQYXRjaEZsYWdzLlNUWUxFICovKSB7XG4gICAgICAgICAgICAgICAgICAgIGhvc3RQYXRjaFByb3AoZWwsICdzdHlsZScsIG9sZFByb3BzLnN0eWxlLCBuZXdQcm9wcy5zdHlsZSwgaXNTVkcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBwcm9wc1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgZmxhZyBpcyBtYXRjaGVkIHdoZW4gdGhlIGVsZW1lbnQgaGFzIGR5bmFtaWMgcHJvcC9hdHRyIGJpbmRpbmdzXG4gICAgICAgICAgICAgICAgLy8gb3RoZXIgdGhhbiBjbGFzcyBhbmQgc3R5bGUuIFRoZSBrZXlzIG9mIGR5bmFtaWMgcHJvcC9hdHRycyBhcmUgc2F2ZWQgZm9yXG4gICAgICAgICAgICAgICAgLy8gZmFzdGVyIGl0ZXJhdGlvbi5cbiAgICAgICAgICAgICAgICAvLyBOb3RlIGR5bmFtaWMga2V5cyBsaWtlIDpbZm9vXT1cImJhclwiIHdpbGwgY2F1c2UgdGhpcyBvcHRpbWl6YXRpb24gdG9cbiAgICAgICAgICAgICAgICAvLyBiYWlsIG91dCBhbmQgZ28gdGhyb3VnaCBhIGZ1bGwgZGlmZiBiZWNhdXNlIHdlIG5lZWQgdG8gdW5zZXQgdGhlIG9sZCBrZXlcbiAgICAgICAgICAgICAgICBpZiAocGF0Y2hGbGFnICYgOCAvKiBQYXRjaEZsYWdzLlBST1BTICovKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBmbGFnIGlzIHByZXNlbnQgdGhlbiBkeW5hbWljUHJvcHMgbXVzdCBiZSBub24tbnVsbFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9wc1RvVXBkYXRlID0gbjIuZHluYW1pY1Byb3BzO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByb3BzVG9VcGRhdGUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IHByb3BzVG9VcGRhdGVbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmV2ID0gb2xkUHJvcHNba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHQgPSBuZXdQcm9wc1trZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gIzE0NzEgZm9yY2UgcGF0Y2ggdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXh0ICE9PSBwcmV2IHx8IGtleSA9PT0gJ3ZhbHVlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvc3RQYXRjaFByb3AoZWwsIGtleSwgcHJldiwgbmV4dCwgaXNTVkcsIG4xLmNoaWxkcmVuLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCB1bm1vdW50Q2hpbGRyZW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gdGV4dFxuICAgICAgICAgICAgLy8gVGhpcyBmbGFnIGlzIG1hdGNoZWQgd2hlbiB0aGUgZWxlbWVudCBoYXMgb25seSBkeW5hbWljIHRleHQgY2hpbGRyZW4uXG4gICAgICAgICAgICBpZiAocGF0Y2hGbGFnICYgMSAvKiBQYXRjaEZsYWdzLlRFWFQgKi8pIHtcbiAgICAgICAgICAgICAgICBpZiAobjEuY2hpbGRyZW4gIT09IG4yLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgICAgIGhvc3RTZXRFbGVtZW50VGV4dChlbCwgbjIuY2hpbGRyZW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghb3B0aW1pemVkICYmIGR5bmFtaWNDaGlsZHJlbiA9PSBudWxsKSB7XG4gICAgICAgICAgICAvLyB1bm9wdGltaXplZCwgZnVsbCBkaWZmXG4gICAgICAgICAgICBwYXRjaFByb3BzKGVsLCBuMiwgb2xkUHJvcHMsIG5ld1Byb3BzLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCh2bm9kZUhvb2sgPSBuZXdQcm9wcy5vblZub2RlVXBkYXRlZCkgfHwgZGlycykge1xuICAgICAgICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB2bm9kZUhvb2sgJiYgaW52b2tlVk5vZGVIb29rKHZub2RlSG9vaywgcGFyZW50Q29tcG9uZW50LCBuMiwgbjEpO1xuICAgICAgICAgICAgICAgIGRpcnMgJiYgaW52b2tlRGlyZWN0aXZlSG9vayhuMiwgbjEsIHBhcmVudENvbXBvbmVudCwgJ3VwZGF0ZWQnKTtcbiAgICAgICAgICAgIH0sIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLy8gVGhlIGZhc3QgcGF0aCBmb3IgYmxvY2tzLlxuICAgIGNvbnN0IHBhdGNoQmxvY2tDaGlsZHJlbiA9IChvbGRDaGlsZHJlbiwgbmV3Q2hpbGRyZW4sIGZhbGxiYWNrQ29udGFpbmVyLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzKSA9PiB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmV3Q2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IG9sZFZOb2RlID0gb2xkQ2hpbGRyZW5baV07XG4gICAgICAgICAgICBjb25zdCBuZXdWTm9kZSA9IG5ld0NoaWxkcmVuW2ldO1xuICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIHRoZSBjb250YWluZXIgKHBhcmVudCBlbGVtZW50KSBmb3IgdGhlIHBhdGNoLlxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gXG4gICAgICAgICAgICAvLyBvbGRWTm9kZSBtYXkgYmUgYW4gZXJyb3JlZCBhc3luYyBzZXR1cCgpIGNvbXBvbmVudCBpbnNpZGUgU3VzcGVuc2VcbiAgICAgICAgICAgIC8vIHdoaWNoIHdpbGwgbm90IGhhdmUgYSBtb3VudGVkIGVsZW1lbnRcbiAgICAgICAgICAgIG9sZFZOb2RlLmVsICYmXG4gICAgICAgICAgICAgICAgLy8gLSBJbiB0aGUgY2FzZSBvZiBhIEZyYWdtZW50LCB3ZSBuZWVkIHRvIHByb3ZpZGUgdGhlIGFjdHVhbCBwYXJlbnRcbiAgICAgICAgICAgICAgICAvLyBvZiB0aGUgRnJhZ21lbnQgaXRzZWxmIHNvIGl0IGNhbiBtb3ZlIGl0cyBjaGlsZHJlbi5cbiAgICAgICAgICAgICAgICAob2xkVk5vZGUudHlwZSA9PT0gRnJhZ21lbnQgfHxcbiAgICAgICAgICAgICAgICAgICAgLy8gLSBJbiB0aGUgY2FzZSBvZiBkaWZmZXJlbnQgbm9kZXMsIHRoZXJlIGlzIGdvaW5nIHRvIGJlIGEgcmVwbGFjZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgLy8gd2hpY2ggYWxzbyByZXF1aXJlcyB0aGUgY29ycmVjdCBwYXJlbnQgY29udGFpbmVyXG4gICAgICAgICAgICAgICAgICAgICFpc1NhbWVWTm9kZVR5cGUob2xkVk5vZGUsIG5ld1ZOb2RlKSB8fFxuICAgICAgICAgICAgICAgICAgICAvLyAtIEluIHRoZSBjYXNlIG9mIGEgY29tcG9uZW50LCBpdCBjb3VsZCBjb250YWluIGFueXRoaW5nLlxuICAgICAgICAgICAgICAgICAgICBvbGRWTm9kZS5zaGFwZUZsYWcgJiAoNiAvKiBTaGFwZUZsYWdzLkNPTVBPTkVOVCAqLyB8IDY0IC8qIFNoYXBlRmxhZ3MuVEVMRVBPUlQgKi8pKVxuICAgICAgICAgICAgICAgID8gaG9zdFBhcmVudE5vZGUob2xkVk5vZGUuZWwpXG4gICAgICAgICAgICAgICAgOiAvLyBJbiBvdGhlciBjYXNlcywgdGhlIHBhcmVudCBjb250YWluZXIgaXMgbm90IGFjdHVhbGx5IHVzZWQgc28gd2VcbiAgICAgICAgICAgICAgICAgICAgLy8ganVzdCBwYXNzIHRoZSBibG9jayBlbGVtZW50IGhlcmUgdG8gYXZvaWQgYSBET00gcGFyZW50Tm9kZSBjYWxsLlxuICAgICAgICAgICAgICAgICAgICBmYWxsYmFja0NvbnRhaW5lcjtcbiAgICAgICAgICAgIHBhdGNoKG9sZFZOb2RlLCBuZXdWTm9kZSwgY29udGFpbmVyLCBudWxsLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCB0cnVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgcGF0Y2hQcm9wcyA9IChlbCwgdm5vZGUsIG9sZFByb3BzLCBuZXdQcm9wcywgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcpID0+IHtcbiAgICAgICAgaWYgKG9sZFByb3BzICE9PSBuZXdQcm9wcykge1xuICAgICAgICAgICAgaWYgKG9sZFByb3BzICE9PSBFTVBUWV9PQkopIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBvbGRQcm9wcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzUmVzZXJ2ZWRQcm9wKGtleSkgJiYgIShrZXkgaW4gbmV3UHJvcHMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBob3N0UGF0Y2hQcm9wKGVsLCBrZXksIG9sZFByb3BzW2tleV0sIG51bGwsIGlzU1ZHLCB2bm9kZS5jaGlsZHJlbiwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgdW5tb3VudENoaWxkcmVuKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG5ld1Byb3BzKSB7XG4gICAgICAgICAgICAgICAgLy8gZW1wdHkgc3RyaW5nIGlzIG5vdCB2YWxpZCBwcm9wXG4gICAgICAgICAgICAgICAgaWYgKGlzUmVzZXJ2ZWRQcm9wKGtleSkpXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5leHQgPSBuZXdQcm9wc1trZXldO1xuICAgICAgICAgICAgICAgIGNvbnN0IHByZXYgPSBvbGRQcm9wc1trZXldO1xuICAgICAgICAgICAgICAgIC8vIGRlZmVyIHBhdGNoaW5nIHZhbHVlXG4gICAgICAgICAgICAgICAgaWYgKG5leHQgIT09IHByZXYgJiYga2V5ICE9PSAndmFsdWUnKSB7XG4gICAgICAgICAgICAgICAgICAgIGhvc3RQYXRjaFByb3AoZWwsIGtleSwgcHJldiwgbmV4dCwgaXNTVkcsIHZub2RlLmNoaWxkcmVuLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCB1bm1vdW50Q2hpbGRyZW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgndmFsdWUnIGluIG5ld1Byb3BzKSB7XG4gICAgICAgICAgICAgICAgaG9zdFBhdGNoUHJvcChlbCwgJ3ZhbHVlJywgb2xkUHJvcHMudmFsdWUsIG5ld1Byb3BzLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgcHJvY2Vzc0ZyYWdtZW50ID0gKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCkgPT4ge1xuICAgICAgICBjb25zdCBmcmFnbWVudFN0YXJ0QW5jaG9yID0gKG4yLmVsID0gbjEgPyBuMS5lbCA6IGhvc3RDcmVhdGVUZXh0KCcnKSk7XG4gICAgICAgIGNvbnN0IGZyYWdtZW50RW5kQW5jaG9yID0gKG4yLmFuY2hvciA9IG4xID8gbjEuYW5jaG9yIDogaG9zdENyZWF0ZVRleHQoJycpKTtcbiAgICAgICAgbGV0IHsgcGF0Y2hGbGFnLCBkeW5hbWljQ2hpbGRyZW4sIHNsb3RTY29wZUlkczogZnJhZ21lbnRTbG90U2NvcGVJZHMgfSA9IG4yO1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXG4gICAgICAgICAgICAvLyAjNTUyMyBkZXYgcm9vdCBmcmFnbWVudCBtYXkgaW5oZXJpdCBkaXJlY3RpdmVzXG4gICAgICAgICAgICAoaXNIbXJVcGRhdGluZyB8fCBwYXRjaEZsYWcgJiAyMDQ4IC8qIFBhdGNoRmxhZ3MuREVWX1JPT1RfRlJBR01FTlQgKi8pKSB7XG4gICAgICAgICAgICAvLyBITVIgdXBkYXRlZCAvIERldiByb290IGZyYWdtZW50ICh3LyBjb21tZW50cyksIGZvcmNlIGZ1bGwgZGlmZlxuICAgICAgICAgICAgcGF0Y2hGbGFnID0gMDtcbiAgICAgICAgICAgIG9wdGltaXplZCA9IGZhbHNlO1xuICAgICAgICAgICAgZHluYW1pY0NoaWxkcmVuID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICAvLyBjaGVjayBpZiB0aGlzIGlzIGEgc2xvdCBmcmFnbWVudCB3aXRoIDpzbG90dGVkIHNjb3BlIGlkc1xuICAgICAgICBpZiAoZnJhZ21lbnRTbG90U2NvcGVJZHMpIHtcbiAgICAgICAgICAgIHNsb3RTY29wZUlkcyA9IHNsb3RTY29wZUlkc1xuICAgICAgICAgICAgICAgID8gc2xvdFNjb3BlSWRzLmNvbmNhdChmcmFnbWVudFNsb3RTY29wZUlkcylcbiAgICAgICAgICAgICAgICA6IGZyYWdtZW50U2xvdFNjb3BlSWRzO1xuICAgICAgICB9XG4gICAgICAgIGlmIChuMSA9PSBudWxsKSB7XG4gICAgICAgICAgICBob3N0SW5zZXJ0KGZyYWdtZW50U3RhcnRBbmNob3IsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgICAgICAgIGhvc3RJbnNlcnQoZnJhZ21lbnRFbmRBbmNob3IsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgICAgICAgIC8vIGEgZnJhZ21lbnQgY2FuIG9ubHkgaGF2ZSBhcnJheSBjaGlsZHJlblxuICAgICAgICAgICAgLy8gc2luY2UgdGhleSBhcmUgZWl0aGVyIGdlbmVyYXRlZCBieSB0aGUgY29tcGlsZXIsIG9yIGltcGxpY2l0bHkgY3JlYXRlZFxuICAgICAgICAgICAgLy8gZnJvbSBhcnJheXMuXG4gICAgICAgICAgICBtb3VudENoaWxkcmVuKG4yLmNoaWxkcmVuLCBjb250YWluZXIsIGZyYWdtZW50RW5kQW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHBhdGNoRmxhZyA+IDAgJiZcbiAgICAgICAgICAgICAgICBwYXRjaEZsYWcgJiA2NCAvKiBQYXRjaEZsYWdzLlNUQUJMRV9GUkFHTUVOVCAqLyAmJlxuICAgICAgICAgICAgICAgIGR5bmFtaWNDaGlsZHJlbiAmJlxuICAgICAgICAgICAgICAgIC8vICMyNzE1IHRoZSBwcmV2aW91cyBmcmFnbWVudCBjb3VsZCd2ZSBiZWVuIGEgQkFJTGVkIG9uZSBhcyBhIHJlc3VsdFxuICAgICAgICAgICAgICAgIC8vIG9mIHJlbmRlclNsb3QoKSB3aXRoIG5vIHZhbGlkIGNoaWxkcmVuXG4gICAgICAgICAgICAgICAgbjEuZHluYW1pY0NoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgLy8gYSBzdGFibGUgZnJhZ21lbnQgKHRlbXBsYXRlIHJvb3Qgb3IgPHRlbXBsYXRlIHYtZm9yPikgZG9lc24ndCBuZWVkIHRvXG4gICAgICAgICAgICAgICAgLy8gcGF0Y2ggY2hpbGRyZW4gb3JkZXIsIGJ1dCBpdCBtYXkgY29udGFpbiBkeW5hbWljQ2hpbGRyZW4uXG4gICAgICAgICAgICAgICAgcGF0Y2hCbG9ja0NoaWxkcmVuKG4xLmR5bmFtaWNDaGlsZHJlbiwgZHluYW1pY0NoaWxkcmVuLCBjb250YWluZXIsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMpO1xuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgcGFyZW50Q29tcG9uZW50ICYmIHBhcmVudENvbXBvbmVudC50eXBlLl9faG1ySWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJhdmVyc2VTdGF0aWNDaGlsZHJlbihuMSwgbjIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAvLyAjMjA4MCBpZiB0aGUgc3RhYmxlIGZyYWdtZW50IGhhcyBhIGtleSwgaXQncyBhIDx0ZW1wbGF0ZSB2LWZvcj4gdGhhdCBtYXlcbiAgICAgICAgICAgICAgICAvLyAgZ2V0IG1vdmVkIGFyb3VuZC4gTWFrZSBzdXJlIGFsbCByb290IGxldmVsIHZub2RlcyBpbmhlcml0IGVsLlxuICAgICAgICAgICAgICAgIC8vICMyMTM0IG9yIGlmIGl0J3MgYSBjb21wb25lbnQgcm9vdCwgaXQgbWF5IGFsc28gZ2V0IG1vdmVkIGFyb3VuZFxuICAgICAgICAgICAgICAgIC8vIGFzIHRoZSBjb21wb25lbnQgaXMgYmVpbmcgbW92ZWQuXG4gICAgICAgICAgICAgICAgbjIua2V5ICE9IG51bGwgfHxcbiAgICAgICAgICAgICAgICAgICAgKHBhcmVudENvbXBvbmVudCAmJiBuMiA9PT0gcGFyZW50Q29tcG9uZW50LnN1YlRyZWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyYXZlcnNlU3RhdGljQ2hpbGRyZW4objEsIG4yLCB0cnVlIC8qIHNoYWxsb3cgKi8pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGtleWVkIC8gdW5rZXllZCwgb3IgbWFudWFsIGZyYWdtZW50cy5cbiAgICAgICAgICAgICAgICAvLyBmb3Iga2V5ZWQgJiB1bmtleWVkLCBzaW5jZSB0aGV5IGFyZSBjb21waWxlciBnZW5lcmF0ZWQgZnJvbSB2LWZvcixcbiAgICAgICAgICAgICAgICAvLyBlYWNoIGNoaWxkIGlzIGd1YXJhbnRlZWQgdG8gYmUgYSBibG9jayBzbyB0aGUgZnJhZ21lbnQgd2lsbCBuZXZlclxuICAgICAgICAgICAgICAgIC8vIGhhdmUgZHluYW1pY0NoaWxkcmVuLlxuICAgICAgICAgICAgICAgIHBhdGNoQ2hpbGRyZW4objEsIG4yLCBjb250YWluZXIsIGZyYWdtZW50RW5kQW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBwcm9jZXNzQ29tcG9uZW50ID0gKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCkgPT4ge1xuICAgICAgICBuMi5zbG90U2NvcGVJZHMgPSBzbG90U2NvcGVJZHM7XG4gICAgICAgIGlmIChuMSA9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAobjIuc2hhcGVGbGFnICYgNTEyIC8qIFNoYXBlRmxhZ3MuQ09NUE9ORU5UX0tFUFRfQUxJVkUgKi8pIHtcbiAgICAgICAgICAgICAgICBwYXJlbnRDb21wb25lbnQuY3R4LmFjdGl2YXRlKG4yLCBjb250YWluZXIsIGFuY2hvciwgaXNTVkcsIG9wdGltaXplZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBtb3VudENvbXBvbmVudChuMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdXBkYXRlQ29tcG9uZW50KG4xLCBuMiwgb3B0aW1pemVkKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgbW91bnRDb21wb25lbnQgPSAoaW5pdGlhbFZOb2RlLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIG9wdGltaXplZCkgPT4ge1xuICAgICAgICBjb25zdCBpbnN0YW5jZSA9IChpbml0aWFsVk5vZGUuY29tcG9uZW50ID0gY3JlYXRlQ29tcG9uZW50SW5zdGFuY2UoaW5pdGlhbFZOb2RlLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlKSk7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgaW5zdGFuY2UudHlwZS5fX2htcklkKSB7XG4gICAgICAgICAgICByZWdpc3RlckhNUihpbnN0YW5jZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgcHVzaFdhcm5pbmdDb250ZXh0KGluaXRpYWxWTm9kZSk7XG4gICAgICAgICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGBtb3VudGApO1xuICAgICAgICB9XG4gICAgICAgIC8vIGluamVjdCByZW5kZXJlciBpbnRlcm5hbHMgZm9yIGtlZXBBbGl2ZVxuICAgICAgICBpZiAoaXNLZWVwQWxpdmUoaW5pdGlhbFZOb2RlKSkge1xuICAgICAgICAgICAgaW5zdGFuY2UuY3R4LnJlbmRlcmVyID0gaW50ZXJuYWxzO1xuICAgICAgICB9XG4gICAgICAgIC8vIHJlc29sdmUgcHJvcHMgYW5kIHNsb3RzIGZvciBzZXR1cCBjb250ZXh0XG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGBpbml0YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXR1cENvbXBvbmVudChpbnN0YW5jZSk7XG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgZW5kTWVhc3VyZShpbnN0YW5jZSwgYGluaXRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBzZXR1cCgpIGlzIGFzeW5jLiBUaGlzIGNvbXBvbmVudCByZWxpZXMgb24gYXN5bmMgbG9naWMgdG8gYmUgcmVzb2x2ZWRcbiAgICAgICAgLy8gYmVmb3JlIHByb2NlZWRpbmdcbiAgICAgICAgaWYgKGluc3RhbmNlLmFzeW5jRGVwKSB7XG4gICAgICAgICAgICBwYXJlbnRTdXNwZW5zZSAmJiBwYXJlbnRTdXNwZW5zZS5yZWdpc3RlckRlcChpbnN0YW5jZSwgc2V0dXBSZW5kZXJFZmZlY3QpO1xuICAgICAgICAgICAgLy8gR2l2ZSBpdCBhIHBsYWNlaG9sZGVyIGlmIHRoaXMgaXMgbm90IGh5ZHJhdGlvblxuICAgICAgICAgICAgLy8gVE9ETyBoYW5kbGUgc2VsZi1kZWZpbmVkIGZhbGxiYWNrXG4gICAgICAgICAgICBpZiAoIWluaXRpYWxWTm9kZS5lbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBsYWNlaG9sZGVyID0gKGluc3RhbmNlLnN1YlRyZWUgPSBjcmVhdGVWTm9kZShDb21tZW50KSk7XG4gICAgICAgICAgICAgICAgcHJvY2Vzc0NvbW1lbnROb2RlKG51bGwsIHBsYWNlaG9sZGVyLCBjb250YWluZXIsIGFuY2hvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc2V0dXBSZW5kZXJFZmZlY3QoaW5zdGFuY2UsIGluaXRpYWxWTm9kZSwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgb3B0aW1pemVkKTtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgcG9wV2FybmluZ0NvbnRleHQoKTtcbiAgICAgICAgICAgIGVuZE1lYXN1cmUoaW5zdGFuY2UsIGBtb3VudGApO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCB1cGRhdGVDb21wb25lbnQgPSAobjEsIG4yLCBvcHRpbWl6ZWQpID0+IHtcbiAgICAgICAgY29uc3QgaW5zdGFuY2UgPSAobjIuY29tcG9uZW50ID0gbjEuY29tcG9uZW50KTtcbiAgICAgICAgaWYgKHNob3VsZFVwZGF0ZUNvbXBvbmVudChuMSwgbjIsIG9wdGltaXplZCkpIHtcbiAgICAgICAgICAgIGlmIChpbnN0YW5jZS5hc3luY0RlcCAmJlxuICAgICAgICAgICAgICAgICFpbnN0YW5jZS5hc3luY1Jlc29sdmVkKSB7XG4gICAgICAgICAgICAgICAgLy8gYXN5bmMgJiBzdGlsbCBwZW5kaW5nIC0ganVzdCB1cGRhdGUgcHJvcHMgYW5kIHNsb3RzXG4gICAgICAgICAgICAgICAgLy8gc2luY2UgdGhlIGNvbXBvbmVudCdzIHJlYWN0aXZlIGVmZmVjdCBmb3IgcmVuZGVyIGlzbid0IHNldC11cCB5ZXRcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIHB1c2hXYXJuaW5nQ29udGV4dChuMik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHVwZGF0ZUNvbXBvbmVudFByZVJlbmRlcihpbnN0YW5jZSwgbjIsIG9wdGltaXplZCk7XG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICBwb3BXYXJuaW5nQ29udGV4dCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBub3JtYWwgdXBkYXRlXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UubmV4dCA9IG4yO1xuICAgICAgICAgICAgICAgIC8vIGluIGNhc2UgdGhlIGNoaWxkIGNvbXBvbmVudCBpcyBhbHNvIHF1ZXVlZCwgcmVtb3ZlIGl0IHRvIGF2b2lkXG4gICAgICAgICAgICAgICAgLy8gZG91YmxlIHVwZGF0aW5nIHRoZSBzYW1lIGNoaWxkIGNvbXBvbmVudCBpbiB0aGUgc2FtZSBmbHVzaC5cbiAgICAgICAgICAgICAgICBpbnZhbGlkYXRlSm9iKGluc3RhbmNlLnVwZGF0ZSk7XG4gICAgICAgICAgICAgICAgLy8gaW5zdGFuY2UudXBkYXRlIGlzIHRoZSByZWFjdGl2ZSBlZmZlY3QuXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UudXBkYXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBubyB1cGRhdGUgbmVlZGVkLiBqdXN0IGNvcHkgb3ZlciBwcm9wZXJ0aWVzXG4gICAgICAgICAgICBuMi5lbCA9IG4xLmVsO1xuICAgICAgICAgICAgaW5zdGFuY2Uudm5vZGUgPSBuMjtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgc2V0dXBSZW5kZXJFZmZlY3QgPSAoaW5zdGFuY2UsIGluaXRpYWxWTm9kZSwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgb3B0aW1pemVkKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudFVwZGF0ZUZuID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFpbnN0YW5jZS5pc01vdW50ZWQpIHtcbiAgICAgICAgICAgICAgICBsZXQgdm5vZGVIb29rO1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgZWwsIHByb3BzIH0gPSBpbml0aWFsVk5vZGU7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBibSwgbSwgcGFyZW50IH0gPSBpbnN0YW5jZTtcbiAgICAgICAgICAgICAgICBjb25zdCBpc0FzeW5jV3JhcHBlclZOb2RlID0gaXNBc3luY1dyYXBwZXIoaW5pdGlhbFZOb2RlKTtcbiAgICAgICAgICAgICAgICB0b2dnbGVSZWN1cnNlKGluc3RhbmNlLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgLy8gYmVmb3JlTW91bnQgaG9va1xuICAgICAgICAgICAgICAgIGlmIChibSkge1xuICAgICAgICAgICAgICAgICAgICBpbnZva2VBcnJheUZucyhibSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIG9uVm5vZGVCZWZvcmVNb3VudFxuICAgICAgICAgICAgICAgIGlmICghaXNBc3luY1dyYXBwZXJWTm9kZSAmJlxuICAgICAgICAgICAgICAgICAgICAodm5vZGVIb29rID0gcHJvcHMgJiYgcHJvcHMub25Wbm9kZUJlZm9yZU1vdW50KSkge1xuICAgICAgICAgICAgICAgICAgICBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBwYXJlbnQsIGluaXRpYWxWTm9kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRvZ2dsZVJlY3Vyc2UoaW5zdGFuY2UsIHRydWUpO1xuICAgICAgICAgICAgICAgIGlmIChlbCAmJiBoeWRyYXRlTm9kZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyB2bm9kZSBoYXMgYWRvcHRlZCBob3N0IG5vZGUgLSBwZXJmb3JtIGh5ZHJhdGlvbiBpbnN0ZWFkIG9mIG1vdW50LlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBoeWRyYXRlU3ViVHJlZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGByZW5kZXJgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLnN1YlRyZWUgPSByZW5kZXJDb21wb25lbnRSb290KGluc3RhbmNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRNZWFzdXJlKGluc3RhbmNlLCBgcmVuZGVyYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRNZWFzdXJlKGluc3RhbmNlLCBgaHlkcmF0ZWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaHlkcmF0ZU5vZGUoZWwsIGluc3RhbmNlLnN1YlRyZWUsIGluc3RhbmNlLCBwYXJlbnRTdXNwZW5zZSwgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kTWVhc3VyZShpbnN0YW5jZSwgYGh5ZHJhdGVgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzQXN5bmNXcmFwcGVyVk5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWxWTm9kZS50eXBlLl9fYXN5bmNMb2FkZXIoKS50aGVuKFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm90ZTogd2UgYXJlIG1vdmluZyB0aGUgcmVuZGVyIGNhbGwgaW50byBhbiBhc3luYyBjYWxsYmFjayxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdoaWNoIG1lYW5zIGl0IHdvbid0IHRyYWNrIGRlcGVuZGVuY2llcyAtIGJ1dCBpdCdzIG9rIGJlY2F1c2VcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGEgc2VydmVyLXJlbmRlcmVkIGFzeW5jIHdyYXBwZXIgaXMgYWxyZWFkeSBpbiByZXNvbHZlZCBzdGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIGl0IHdpbGwgbmV2ZXIgbmVlZCB0byBjaGFuZ2UuXG4gICAgICAgICAgICAgICAgICAgICAgICAoKSA9PiAhaW5zdGFuY2UuaXNVbm1vdW50ZWQgJiYgaHlkcmF0ZVN1YlRyZWUoKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoeWRyYXRlU3ViVHJlZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGByZW5kZXJgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdWJUcmVlID0gKGluc3RhbmNlLnN1YlRyZWUgPSByZW5kZXJDb21wb25lbnRSb290KGluc3RhbmNlKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZE1lYXN1cmUoaW5zdGFuY2UsIGByZW5kZXJgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGBwYXRjaGApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHBhdGNoKG51bGwsIHN1YlRyZWUsIGNvbnRhaW5lciwgYW5jaG9yLCBpbnN0YW5jZSwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5kTWVhc3VyZShpbnN0YW5jZSwgYHBhdGNoYCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbFZOb2RlLmVsID0gc3ViVHJlZS5lbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gbW91bnRlZCBob29rXG4gICAgICAgICAgICAgICAgaWYgKG0pIHtcbiAgICAgICAgICAgICAgICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KG0sIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gb25Wbm9kZU1vdW50ZWRcbiAgICAgICAgICAgICAgICBpZiAoIWlzQXN5bmNXcmFwcGVyVk5vZGUgJiZcbiAgICAgICAgICAgICAgICAgICAgKHZub2RlSG9vayA9IHByb3BzICYmIHByb3BzLm9uVm5vZGVNb3VudGVkKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzY29wZWRJbml0aWFsVk5vZGUgPSBpbml0aWFsVk5vZGU7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdCgoKSA9PiBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBwYXJlbnQsIHNjb3BlZEluaXRpYWxWTm9kZSksIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gYWN0aXZhdGVkIGhvb2sgZm9yIGtlZXAtYWxpdmUgcm9vdHMuXG4gICAgICAgICAgICAgICAgLy8gIzE3NDIgYWN0aXZhdGVkIGhvb2sgbXVzdCBiZSBhY2Nlc3NlZCBhZnRlciBmaXJzdCByZW5kZXJcbiAgICAgICAgICAgICAgICAvLyBzaW5jZSB0aGUgaG9vayBtYXkgYmUgaW5qZWN0ZWQgYnkgYSBjaGlsZCBrZWVwLWFsaXZlXG4gICAgICAgICAgICAgICAgaWYgKGluaXRpYWxWTm9kZS5zaGFwZUZsYWcgJiAyNTYgLyogU2hhcGVGbGFncy5DT01QT05FTlRfU0hPVUxEX0tFRVBfQUxJVkUgKi8gfHxcbiAgICAgICAgICAgICAgICAgICAgKHBhcmVudCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgaXNBc3luY1dyYXBwZXIocGFyZW50LnZub2RlKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LnZub2RlLnNoYXBlRmxhZyAmIDI1NiAvKiBTaGFwZUZsYWdzLkNPTVBPTkVOVF9TSE9VTERfS0VFUF9BTElWRSAqLykpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UuYSAmJiBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoaW5zdGFuY2UuYSwgcGFyZW50U3VzcGVuc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5pc01vdW50ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICAgICAgICAgICAgICAgIGRldnRvb2xzQ29tcG9uZW50QWRkZWQoaW5zdGFuY2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyAjMjQ1ODogZGVmZXJlbmNlIG1vdW50LW9ubHkgb2JqZWN0IHBhcmFtZXRlcnMgdG8gcHJldmVudCBtZW1sZWFrc1xuICAgICAgICAgICAgICAgIGluaXRpYWxWTm9kZSA9IGNvbnRhaW5lciA9IGFuY2hvciA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyB1cGRhdGVDb21wb25lbnRcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIHRyaWdnZXJlZCBieSBtdXRhdGlvbiBvZiBjb21wb25lbnQncyBvd24gc3RhdGUgKG5leHQ6IG51bGwpXG4gICAgICAgICAgICAgICAgLy8gT1IgcGFyZW50IGNhbGxpbmcgcHJvY2Vzc0NvbXBvbmVudCAobmV4dDogVk5vZGUpXG4gICAgICAgICAgICAgICAgbGV0IHsgbmV4dCwgYnUsIHUsIHBhcmVudCwgdm5vZGUgfSA9IGluc3RhbmNlO1xuICAgICAgICAgICAgICAgIGxldCBvcmlnaW5OZXh0ID0gbmV4dDtcbiAgICAgICAgICAgICAgICBsZXQgdm5vZGVIb29rO1xuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgcHVzaFdhcm5pbmdDb250ZXh0KG5leHQgfHwgaW5zdGFuY2Uudm5vZGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBEaXNhbGxvdyBjb21wb25lbnQgZWZmZWN0IHJlY3Vyc2lvbiBkdXJpbmcgcHJlLWxpZmVjeWNsZSBob29rcy5cbiAgICAgICAgICAgICAgICB0b2dnbGVSZWN1cnNlKGluc3RhbmNlLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgaWYgKG5leHQpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV4dC5lbCA9IHZub2RlLmVsO1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVDb21wb25lbnRQcmVSZW5kZXIoaW5zdGFuY2UsIG5leHQsIG9wdGltaXplZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBuZXh0ID0gdm5vZGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGJlZm9yZVVwZGF0ZSBob29rXG4gICAgICAgICAgICAgICAgaWYgKGJ1KSB7XG4gICAgICAgICAgICAgICAgICAgIGludm9rZUFycmF5Rm5zKGJ1KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gb25Wbm9kZUJlZm9yZVVwZGF0ZVxuICAgICAgICAgICAgICAgIGlmICgodm5vZGVIb29rID0gbmV4dC5wcm9wcyAmJiBuZXh0LnByb3BzLm9uVm5vZGVCZWZvcmVVcGRhdGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGludm9rZVZOb2RlSG9vayh2bm9kZUhvb2ssIHBhcmVudCwgbmV4dCwgdm5vZGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0b2dnbGVSZWN1cnNlKGluc3RhbmNlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAvLyByZW5kZXJcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0TWVhc3VyZShpbnN0YW5jZSwgYHJlbmRlcmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0VHJlZSA9IHJlbmRlckNvbXBvbmVudFJvb3QoaW5zdGFuY2UpO1xuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgZW5kTWVhc3VyZShpbnN0YW5jZSwgYHJlbmRlcmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBwcmV2VHJlZSA9IGluc3RhbmNlLnN1YlRyZWU7XG4gICAgICAgICAgICAgICAgaW5zdGFuY2Uuc3ViVHJlZSA9IG5leHRUcmVlO1xuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRNZWFzdXJlKGluc3RhbmNlLCBgcGF0Y2hgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGF0Y2gocHJldlRyZWUsIG5leHRUcmVlLCBcbiAgICAgICAgICAgICAgICAvLyBwYXJlbnQgbWF5IGhhdmUgY2hhbmdlZCBpZiBpdCdzIGluIGEgdGVsZXBvcnRcbiAgICAgICAgICAgICAgICBob3N0UGFyZW50Tm9kZShwcmV2VHJlZS5lbCksIFxuICAgICAgICAgICAgICAgIC8vIGFuY2hvciBtYXkgaGF2ZSBjaGFuZ2VkIGlmIGl0J3MgaW4gYSBmcmFnbWVudFxuICAgICAgICAgICAgICAgIGdldE5leHRIb3N0Tm9kZShwcmV2VHJlZSksIGluc3RhbmNlLCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcpO1xuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgZW5kTWVhc3VyZShpbnN0YW5jZSwgYHBhdGNoYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG5leHQuZWwgPSBuZXh0VHJlZS5lbDtcbiAgICAgICAgICAgICAgICBpZiAob3JpZ2luTmV4dCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBzZWxmLXRyaWdnZXJlZCB1cGRhdGUuIEluIGNhc2Ugb2YgSE9DLCB1cGRhdGUgcGFyZW50IGNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICAvLyB2bm9kZSBlbC4gSE9DIGlzIGluZGljYXRlZCBieSBwYXJlbnQgaW5zdGFuY2UncyBzdWJUcmVlIHBvaW50aW5nXG4gICAgICAgICAgICAgICAgICAgIC8vIHRvIGNoaWxkIGNvbXBvbmVudCdzIHZub2RlXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZUhPQ0hvc3RFbChpbnN0YW5jZSwgbmV4dFRyZWUuZWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyB1cGRhdGVkIGhvb2tcbiAgICAgICAgICAgICAgICBpZiAodSkge1xuICAgICAgICAgICAgICAgICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QodSwgcGFyZW50U3VzcGVuc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBvblZub2RlVXBkYXRlZFxuICAgICAgICAgICAgICAgIGlmICgodm5vZGVIb29rID0gbmV4dC5wcm9wcyAmJiBuZXh0LnByb3BzLm9uVm5vZGVVcGRhdGVkKSkge1xuICAgICAgICAgICAgICAgICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoKCkgPT4gaW52b2tlVk5vZGVIb29rKHZub2RlSG9vaywgcGFyZW50LCBuZXh0LCB2bm9kZSksIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pIHtcbiAgICAgICAgICAgICAgICAgICAgZGV2dG9vbHNDb21wb25lbnRVcGRhdGVkKGluc3RhbmNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICBwb3BXYXJuaW5nQ29udGV4dCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLy8gY3JlYXRlIHJlYWN0aXZlIGVmZmVjdCBmb3IgcmVuZGVyaW5nXG4gICAgICAgIGNvbnN0IGVmZmVjdCA9IChpbnN0YW5jZS5lZmZlY3QgPSBuZXcgUmVhY3RpdmVFZmZlY3QoY29tcG9uZW50VXBkYXRlRm4sICgpID0+IHF1ZXVlSm9iKHVwZGF0ZSksIGluc3RhbmNlLnNjb3BlIC8vIHRyYWNrIGl0IGluIGNvbXBvbmVudCdzIGVmZmVjdCBzY29wZVxuICAgICAgICApKTtcbiAgICAgICAgY29uc3QgdXBkYXRlID0gKGluc3RhbmNlLnVwZGF0ZSA9ICgpID0+IGVmZmVjdC5ydW4oKSk7XG4gICAgICAgIHVwZGF0ZS5pZCA9IGluc3RhbmNlLnVpZDtcbiAgICAgICAgLy8gYWxsb3dSZWN1cnNlXG4gICAgICAgIC8vICMxODAxLCAjMjA0MyBjb21wb25lbnQgcmVuZGVyIGVmZmVjdHMgc2hvdWxkIGFsbG93IHJlY3Vyc2l2ZSB1cGRhdGVzXG4gICAgICAgIHRvZ2dsZVJlY3Vyc2UoaW5zdGFuY2UsIHRydWUpO1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICBlZmZlY3Qub25UcmFjayA9IGluc3RhbmNlLnJ0Y1xuICAgICAgICAgICAgICAgID8gZSA9PiBpbnZva2VBcnJheUZucyhpbnN0YW5jZS5ydGMsIGUpXG4gICAgICAgICAgICAgICAgOiB2b2lkIDA7XG4gICAgICAgICAgICBlZmZlY3Qub25UcmlnZ2VyID0gaW5zdGFuY2UucnRnXG4gICAgICAgICAgICAgICAgPyBlID0+IGludm9rZUFycmF5Rm5zKGluc3RhbmNlLnJ0ZywgZSlcbiAgICAgICAgICAgICAgICA6IHZvaWQgMDtcbiAgICAgICAgICAgIHVwZGF0ZS5vd25lckluc3RhbmNlID0gaW5zdGFuY2U7XG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlKCk7XG4gICAgfTtcbiAgICBjb25zdCB1cGRhdGVDb21wb25lbnRQcmVSZW5kZXIgPSAoaW5zdGFuY2UsIG5leHRWTm9kZSwgb3B0aW1pemVkKSA9PiB7XG4gICAgICAgIG5leHRWTm9kZS5jb21wb25lbnQgPSBpbnN0YW5jZTtcbiAgICAgICAgY29uc3QgcHJldlByb3BzID0gaW5zdGFuY2Uudm5vZGUucHJvcHM7XG4gICAgICAgIGluc3RhbmNlLnZub2RlID0gbmV4dFZOb2RlO1xuICAgICAgICBpbnN0YW5jZS5uZXh0ID0gbnVsbDtcbiAgICAgICAgdXBkYXRlUHJvcHMoaW5zdGFuY2UsIG5leHRWTm9kZS5wcm9wcywgcHJldlByb3BzLCBvcHRpbWl6ZWQpO1xuICAgICAgICB1cGRhdGVTbG90cyhpbnN0YW5jZSwgbmV4dFZOb2RlLmNoaWxkcmVuLCBvcHRpbWl6ZWQpO1xuICAgICAgICBwYXVzZVRyYWNraW5nKCk7XG4gICAgICAgIC8vIHByb3BzIHVwZGF0ZSBtYXkgaGF2ZSB0cmlnZ2VyZWQgcHJlLWZsdXNoIHdhdGNoZXJzLlxuICAgICAgICAvLyBmbHVzaCB0aGVtIGJlZm9yZSB0aGUgcmVuZGVyIHVwZGF0ZS5cbiAgICAgICAgZmx1c2hQcmVGbHVzaENicygpO1xuICAgICAgICByZXNldFRyYWNraW5nKCk7XG4gICAgfTtcbiAgICBjb25zdCBwYXRjaENoaWxkcmVuID0gKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCA9IGZhbHNlKSA9PiB7XG4gICAgICAgIGNvbnN0IGMxID0gbjEgJiYgbjEuY2hpbGRyZW47XG4gICAgICAgIGNvbnN0IHByZXZTaGFwZUZsYWcgPSBuMSA/IG4xLnNoYXBlRmxhZyA6IDA7XG4gICAgICAgIGNvbnN0IGMyID0gbjIuY2hpbGRyZW47XG4gICAgICAgIGNvbnN0IHsgcGF0Y2hGbGFnLCBzaGFwZUZsYWcgfSA9IG4yO1xuICAgICAgICAvLyBmYXN0IHBhdGhcbiAgICAgICAgaWYgKHBhdGNoRmxhZyA+IDApIHtcbiAgICAgICAgICAgIGlmIChwYXRjaEZsYWcgJiAxMjggLyogUGF0Y2hGbGFncy5LRVlFRF9GUkFHTUVOVCAqLykge1xuICAgICAgICAgICAgICAgIC8vIHRoaXMgY291bGQgYmUgZWl0aGVyIGZ1bGx5LWtleWVkIG9yIG1peGVkIChzb21lIGtleWVkIHNvbWUgbm90KVxuICAgICAgICAgICAgICAgIC8vIHByZXNlbmNlIG9mIHBhdGNoRmxhZyBtZWFucyBjaGlsZHJlbiBhcmUgZ3VhcmFudGVlZCB0byBiZSBhcnJheXNcbiAgICAgICAgICAgICAgICBwYXRjaEtleWVkQ2hpbGRyZW4oYzEsIGMyLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChwYXRjaEZsYWcgJiAyNTYgLyogUGF0Y2hGbGFncy5VTktFWUVEX0ZSQUdNRU5UICovKSB7XG4gICAgICAgICAgICAgICAgLy8gdW5rZXllZFxuICAgICAgICAgICAgICAgIHBhdGNoVW5rZXllZENoaWxkcmVuKGMxLCBjMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGNoaWxkcmVuIGhhcyAzIHBvc3NpYmlsaXRpZXM6IHRleHQsIGFycmF5IG9yIG5vIGNoaWxkcmVuLlxuICAgICAgICBpZiAoc2hhcGVGbGFnICYgOCAvKiBTaGFwZUZsYWdzLlRFWFRfQ0hJTERSRU4gKi8pIHtcbiAgICAgICAgICAgIC8vIHRleHQgY2hpbGRyZW4gZmFzdCBwYXRoXG4gICAgICAgICAgICBpZiAocHJldlNoYXBlRmxhZyAmIDE2IC8qIFNoYXBlRmxhZ3MuQVJSQVlfQ0hJTERSRU4gKi8pIHtcbiAgICAgICAgICAgICAgICB1bm1vdW50Q2hpbGRyZW4oYzEsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGMyICE9PSBjMSkge1xuICAgICAgICAgICAgICAgIGhvc3RTZXRFbGVtZW50VGV4dChjb250YWluZXIsIGMyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChwcmV2U2hhcGVGbGFnICYgMTYgLyogU2hhcGVGbGFncy5BUlJBWV9DSElMRFJFTiAqLykge1xuICAgICAgICAgICAgICAgIC8vIHByZXYgY2hpbGRyZW4gd2FzIGFycmF5XG4gICAgICAgICAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDE2IC8qIFNoYXBlRmxhZ3MuQVJSQVlfQ0hJTERSRU4gKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gdHdvIGFycmF5cywgY2Fubm90IGFzc3VtZSBhbnl0aGluZywgZG8gZnVsbCBkaWZmXG4gICAgICAgICAgICAgICAgICAgIHBhdGNoS2V5ZWRDaGlsZHJlbihjMSwgYzIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gbm8gbmV3IGNoaWxkcmVuLCBqdXN0IHVubW91bnQgb2xkXG4gICAgICAgICAgICAgICAgICAgIHVubW91bnRDaGlsZHJlbihjMSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gcHJldiBjaGlsZHJlbiB3YXMgdGV4dCBPUiBudWxsXG4gICAgICAgICAgICAgICAgLy8gbmV3IGNoaWxkcmVuIGlzIGFycmF5IE9SIG51bGxcbiAgICAgICAgICAgICAgICBpZiAocHJldlNoYXBlRmxhZyAmIDggLyogU2hhcGVGbGFncy5URVhUX0NISUxEUkVOICovKSB7XG4gICAgICAgICAgICAgICAgICAgIGhvc3RTZXRFbGVtZW50VGV4dChjb250YWluZXIsICcnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gbW91bnQgbmV3IGlmIGFycmF5XG4gICAgICAgICAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDE2IC8qIFNoYXBlRmxhZ3MuQVJSQVlfQ0hJTERSRU4gKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgbW91bnRDaGlsZHJlbihjMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBwYXRjaFVua2V5ZWRDaGlsZHJlbiA9IChjMSwgYzIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpID0+IHtcbiAgICAgICAgYzEgPSBjMSB8fCBFTVBUWV9BUlI7XG4gICAgICAgIGMyID0gYzIgfHwgRU1QVFlfQVJSO1xuICAgICAgICBjb25zdCBvbGRMZW5ndGggPSBjMS5sZW5ndGg7XG4gICAgICAgIGNvbnN0IG5ld0xlbmd0aCA9IGMyLmxlbmd0aDtcbiAgICAgICAgY29uc3QgY29tbW9uTGVuZ3RoID0gTWF0aC5taW4ob2xkTGVuZ3RoLCBuZXdMZW5ndGgpO1xuICAgICAgICBsZXQgaTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGNvbW1vbkxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBuZXh0Q2hpbGQgPSAoYzJbaV0gPSBvcHRpbWl6ZWRcbiAgICAgICAgICAgICAgICA/IGNsb25lSWZNb3VudGVkKGMyW2ldKVxuICAgICAgICAgICAgICAgIDogbm9ybWFsaXplVk5vZGUoYzJbaV0pKTtcbiAgICAgICAgICAgIHBhdGNoKGMxW2ldLCBuZXh0Q2hpbGQsIGNvbnRhaW5lciwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob2xkTGVuZ3RoID4gbmV3TGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyByZW1vdmUgb2xkXG4gICAgICAgICAgICB1bm1vdW50Q2hpbGRyZW4oYzEsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHRydWUsIGZhbHNlLCBjb21tb25MZW5ndGgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gbW91bnQgbmV3XG4gICAgICAgICAgICBtb3VudENoaWxkcmVuKGMyLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCBjb21tb25MZW5ndGgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvLyBjYW4gYmUgYWxsLWtleWVkIG9yIG1peGVkXG4gICAgY29uc3QgcGF0Y2hLZXllZENoaWxkcmVuID0gKGMxLCBjMiwgY29udGFpbmVyLCBwYXJlbnRBbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCkgPT4ge1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIGNvbnN0IGwyID0gYzIubGVuZ3RoO1xuICAgICAgICBsZXQgZTEgPSBjMS5sZW5ndGggLSAxOyAvLyBwcmV2IGVuZGluZyBpbmRleFxuICAgICAgICBsZXQgZTIgPSBsMiAtIDE7IC8vIG5leHQgZW5kaW5nIGluZGV4XG4gICAgICAgIC8vIDEuIHN5bmMgZnJvbSBzdGFydFxuICAgICAgICAvLyAoYSBiKSBjXG4gICAgICAgIC8vIChhIGIpIGQgZVxuICAgICAgICB3aGlsZSAoaSA8PSBlMSAmJiBpIDw9IGUyKSB7XG4gICAgICAgICAgICBjb25zdCBuMSA9IGMxW2ldO1xuICAgICAgICAgICAgY29uc3QgbjIgPSAoYzJbaV0gPSBvcHRpbWl6ZWRcbiAgICAgICAgICAgICAgICA/IGNsb25lSWZNb3VudGVkKGMyW2ldKVxuICAgICAgICAgICAgICAgIDogbm9ybWFsaXplVk5vZGUoYzJbaV0pKTtcbiAgICAgICAgICAgIGlmIChpc1NhbWVWTm9kZVR5cGUobjEsIG4yKSkge1xuICAgICAgICAgICAgICAgIHBhdGNoKG4xLCBuMiwgY29udGFpbmVyLCBudWxsLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICAgICAgLy8gMi4gc3luYyBmcm9tIGVuZFxuICAgICAgICAvLyBhIChiIGMpXG4gICAgICAgIC8vIGQgZSAoYiBjKVxuICAgICAgICB3aGlsZSAoaSA8PSBlMSAmJiBpIDw9IGUyKSB7XG4gICAgICAgICAgICBjb25zdCBuMSA9IGMxW2UxXTtcbiAgICAgICAgICAgIGNvbnN0IG4yID0gKGMyW2UyXSA9IG9wdGltaXplZFxuICAgICAgICAgICAgICAgID8gY2xvbmVJZk1vdW50ZWQoYzJbZTJdKVxuICAgICAgICAgICAgICAgIDogbm9ybWFsaXplVk5vZGUoYzJbZTJdKSk7XG4gICAgICAgICAgICBpZiAoaXNTYW1lVk5vZGVUeXBlKG4xLCBuMikpIHtcbiAgICAgICAgICAgICAgICBwYXRjaChuMSwgbjIsIGNvbnRhaW5lciwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZTEtLTtcbiAgICAgICAgICAgIGUyLS07XG4gICAgICAgIH1cbiAgICAgICAgLy8gMy4gY29tbW9uIHNlcXVlbmNlICsgbW91bnRcbiAgICAgICAgLy8gKGEgYilcbiAgICAgICAgLy8gKGEgYikgY1xuICAgICAgICAvLyBpID0gMiwgZTEgPSAxLCBlMiA9IDJcbiAgICAgICAgLy8gKGEgYilcbiAgICAgICAgLy8gYyAoYSBiKVxuICAgICAgICAvLyBpID0gMCwgZTEgPSAtMSwgZTIgPSAwXG4gICAgICAgIGlmIChpID4gZTEpIHtcbiAgICAgICAgICAgIGlmIChpIDw9IGUyKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dFBvcyA9IGUyICsgMTtcbiAgICAgICAgICAgICAgICBjb25zdCBhbmNob3IgPSBuZXh0UG9zIDwgbDIgPyBjMltuZXh0UG9zXS5lbCA6IHBhcmVudEFuY2hvcjtcbiAgICAgICAgICAgICAgICB3aGlsZSAoaSA8PSBlMikge1xuICAgICAgICAgICAgICAgICAgICBwYXRjaChudWxsLCAoYzJbaV0gPSBvcHRpbWl6ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgID8gY2xvbmVJZk1vdW50ZWQoYzJbaV0pXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG5vcm1hbGl6ZVZOb2RlKGMyW2ldKSksIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIDQuIGNvbW1vbiBzZXF1ZW5jZSArIHVubW91bnRcbiAgICAgICAgLy8gKGEgYikgY1xuICAgICAgICAvLyAoYSBiKVxuICAgICAgICAvLyBpID0gMiwgZTEgPSAyLCBlMiA9IDFcbiAgICAgICAgLy8gYSAoYiBjKVxuICAgICAgICAvLyAoYiBjKVxuICAgICAgICAvLyBpID0gMCwgZTEgPSAwLCBlMiA9IC0xXG4gICAgICAgIGVsc2UgaWYgKGkgPiBlMikge1xuICAgICAgICAgICAgd2hpbGUgKGkgPD0gZTEpIHtcbiAgICAgICAgICAgICAgICB1bm1vdW50KGMxW2ldLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gNS4gdW5rbm93biBzZXF1ZW5jZVxuICAgICAgICAvLyBbaSAuLi4gZTEgKyAxXTogYSBiIFtjIGQgZV0gZiBnXG4gICAgICAgIC8vIFtpIC4uLiBlMiArIDFdOiBhIGIgW2UgZCBjIGhdIGYgZ1xuICAgICAgICAvLyBpID0gMiwgZTEgPSA0LCBlMiA9IDVcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBzMSA9IGk7IC8vIHByZXYgc3RhcnRpbmcgaW5kZXhcbiAgICAgICAgICAgIGNvbnN0IHMyID0gaTsgLy8gbmV4dCBzdGFydGluZyBpbmRleFxuICAgICAgICAgICAgLy8gNS4xIGJ1aWxkIGtleTppbmRleCBtYXAgZm9yIG5ld0NoaWxkcmVuXG4gICAgICAgICAgICBjb25zdCBrZXlUb05ld0luZGV4TWFwID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgZm9yIChpID0gczI7IGkgPD0gZTI7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5leHRDaGlsZCA9IChjMltpXSA9IG9wdGltaXplZFxuICAgICAgICAgICAgICAgICAgICA/IGNsb25lSWZNb3VudGVkKGMyW2ldKVxuICAgICAgICAgICAgICAgICAgICA6IG5vcm1hbGl6ZVZOb2RlKGMyW2ldKSk7XG4gICAgICAgICAgICAgICAgaWYgKG5leHRDaGlsZC5rZXkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGtleVRvTmV3SW5kZXhNYXAuaGFzKG5leHRDaGlsZC5rZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuKGBEdXBsaWNhdGUga2V5cyBmb3VuZCBkdXJpbmcgdXBkYXRlOmAsIEpTT04uc3RyaW5naWZ5KG5leHRDaGlsZC5rZXkpLCBgTWFrZSBzdXJlIGtleXMgYXJlIHVuaXF1ZS5gKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBrZXlUb05ld0luZGV4TWFwLnNldChuZXh0Q2hpbGQua2V5LCBpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyA1LjIgbG9vcCB0aHJvdWdoIG9sZCBjaGlsZHJlbiBsZWZ0IHRvIGJlIHBhdGNoZWQgYW5kIHRyeSB0byBwYXRjaFxuICAgICAgICAgICAgLy8gbWF0Y2hpbmcgbm9kZXMgJiByZW1vdmUgbm9kZXMgdGhhdCBhcmUgbm8gbG9uZ2VyIHByZXNlbnRcbiAgICAgICAgICAgIGxldCBqO1xuICAgICAgICAgICAgbGV0IHBhdGNoZWQgPSAwO1xuICAgICAgICAgICAgY29uc3QgdG9CZVBhdGNoZWQgPSBlMiAtIHMyICsgMTtcbiAgICAgICAgICAgIGxldCBtb3ZlZCA9IGZhbHNlO1xuICAgICAgICAgICAgLy8gdXNlZCB0byB0cmFjayB3aGV0aGVyIGFueSBub2RlIGhhcyBtb3ZlZFxuICAgICAgICAgICAgbGV0IG1heE5ld0luZGV4U29GYXIgPSAwO1xuICAgICAgICAgICAgLy8gd29ya3MgYXMgTWFwPG5ld0luZGV4LCBvbGRJbmRleD5cbiAgICAgICAgICAgIC8vIE5vdGUgdGhhdCBvbGRJbmRleCBpcyBvZmZzZXQgYnkgKzFcbiAgICAgICAgICAgIC8vIGFuZCBvbGRJbmRleCA9IDAgaXMgYSBzcGVjaWFsIHZhbHVlIGluZGljYXRpbmcgdGhlIG5ldyBub2RlIGhhc1xuICAgICAgICAgICAgLy8gbm8gY29ycmVzcG9uZGluZyBvbGQgbm9kZS5cbiAgICAgICAgICAgIC8vIHVzZWQgZm9yIGRldGVybWluaW5nIGxvbmdlc3Qgc3RhYmxlIHN1YnNlcXVlbmNlXG4gICAgICAgICAgICBjb25zdCBuZXdJbmRleFRvT2xkSW5kZXhNYXAgPSBuZXcgQXJyYXkodG9CZVBhdGNoZWQpO1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHRvQmVQYXRjaGVkOyBpKyspXG4gICAgICAgICAgICAgICAgbmV3SW5kZXhUb09sZEluZGV4TWFwW2ldID0gMDtcbiAgICAgICAgICAgIGZvciAoaSA9IHMxOyBpIDw9IGUxOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwcmV2Q2hpbGQgPSBjMVtpXTtcbiAgICAgICAgICAgICAgICBpZiAocGF0Y2hlZCA+PSB0b0JlUGF0Y2hlZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBhbGwgbmV3IGNoaWxkcmVuIGhhdmUgYmVlbiBwYXRjaGVkIHNvIHRoaXMgY2FuIG9ubHkgYmUgYSByZW1vdmFsXG4gICAgICAgICAgICAgICAgICAgIHVubW91bnQocHJldkNoaWxkLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBuZXdJbmRleDtcbiAgICAgICAgICAgICAgICBpZiAocHJldkNoaWxkLmtleSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld0luZGV4ID0ga2V5VG9OZXdJbmRleE1hcC5nZXQocHJldkNoaWxkLmtleSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBrZXktbGVzcyBub2RlLCB0cnkgdG8gbG9jYXRlIGEga2V5LWxlc3Mgbm9kZSBvZiB0aGUgc2FtZSB0eXBlXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaiA9IHMyOyBqIDw9IGUyOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdJbmRleFRvT2xkSW5kZXhNYXBbaiAtIHMyXSA9PT0gMCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzU2FtZVZOb2RlVHlwZShwcmV2Q2hpbGQsIGMyW2pdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0luZGV4ID0gajtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobmV3SW5kZXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB1bm1vdW50KHByZXZDaGlsZCwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBuZXdJbmRleFRvT2xkSW5kZXhNYXBbbmV3SW5kZXggLSBzMl0gPSBpICsgMTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld0luZGV4ID49IG1heE5ld0luZGV4U29GYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heE5ld0luZGV4U29GYXIgPSBuZXdJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwYXRjaChwcmV2Q2hpbGQsIGMyW25ld0luZGV4XSwgY29udGFpbmVyLCBudWxsLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgICAgICAgICBwYXRjaGVkKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gNS4zIG1vdmUgYW5kIG1vdW50XG4gICAgICAgICAgICAvLyBnZW5lcmF0ZSBsb25nZXN0IHN0YWJsZSBzdWJzZXF1ZW5jZSBvbmx5IHdoZW4gbm9kZXMgaGF2ZSBtb3ZlZFxuICAgICAgICAgICAgY29uc3QgaW5jcmVhc2luZ05ld0luZGV4U2VxdWVuY2UgPSBtb3ZlZFxuICAgICAgICAgICAgICAgID8gZ2V0U2VxdWVuY2UobmV3SW5kZXhUb09sZEluZGV4TWFwKVxuICAgICAgICAgICAgICAgIDogRU1QVFlfQVJSO1xuICAgICAgICAgICAgaiA9IGluY3JlYXNpbmdOZXdJbmRleFNlcXVlbmNlLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAvLyBsb29waW5nIGJhY2t3YXJkcyBzbyB0aGF0IHdlIGNhbiB1c2UgbGFzdCBwYXRjaGVkIG5vZGUgYXMgYW5jaG9yXG4gICAgICAgICAgICBmb3IgKGkgPSB0b0JlUGF0Y2hlZCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dEluZGV4ID0gczIgKyBpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5leHRDaGlsZCA9IGMyW25leHRJbmRleF07XG4gICAgICAgICAgICAgICAgY29uc3QgYW5jaG9yID0gbmV4dEluZGV4ICsgMSA8IGwyID8gYzJbbmV4dEluZGV4ICsgMV0uZWwgOiBwYXJlbnRBbmNob3I7XG4gICAgICAgICAgICAgICAgaWYgKG5ld0luZGV4VG9PbGRJbmRleE1hcFtpXSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBtb3VudCBuZXdcbiAgICAgICAgICAgICAgICAgICAgcGF0Y2gobnVsbCwgbmV4dENoaWxkLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobW92ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gbW92ZSBpZjpcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlcmUgaXMgbm8gc3RhYmxlIHN1YnNlcXVlbmNlIChlLmcuIGEgcmV2ZXJzZSlcbiAgICAgICAgICAgICAgICAgICAgLy8gT1IgY3VycmVudCBub2RlIGlzIG5vdCBhbW9uZyB0aGUgc3RhYmxlIHNlcXVlbmNlXG4gICAgICAgICAgICAgICAgICAgIGlmIChqIDwgMCB8fCBpICE9PSBpbmNyZWFzaW5nTmV3SW5kZXhTZXF1ZW5jZVtqXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbW92ZShuZXh0Q2hpbGQsIGNvbnRhaW5lciwgYW5jaG9yLCAyIC8qIE1vdmVUeXBlLlJFT1JERVIgKi8pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgai0tO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBtb3ZlID0gKHZub2RlLCBjb250YWluZXIsIGFuY2hvciwgbW92ZVR5cGUsIHBhcmVudFN1c3BlbnNlID0gbnVsbCkgPT4ge1xuICAgICAgICBjb25zdCB7IGVsLCB0eXBlLCB0cmFuc2l0aW9uLCBjaGlsZHJlbiwgc2hhcGVGbGFnIH0gPSB2bm9kZTtcbiAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDYgLyogU2hhcGVGbGFncy5DT01QT05FTlQgKi8pIHtcbiAgICAgICAgICAgIG1vdmUodm5vZGUuY29tcG9uZW50LnN1YlRyZWUsIGNvbnRhaW5lciwgYW5jaG9yLCBtb3ZlVHlwZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDEyOCAvKiBTaGFwZUZsYWdzLlNVU1BFTlNFICovKSB7XG4gICAgICAgICAgICB2bm9kZS5zdXNwZW5zZS5tb3ZlKGNvbnRhaW5lciwgYW5jaG9yLCBtb3ZlVHlwZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDY0IC8qIFNoYXBlRmxhZ3MuVEVMRVBPUlQgKi8pIHtcbiAgICAgICAgICAgIHR5cGUubW92ZSh2bm9kZSwgY29udGFpbmVyLCBhbmNob3IsIGludGVybmFscyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGUgPT09IEZyYWdtZW50KSB7XG4gICAgICAgICAgICBob3N0SW5zZXJ0KGVsLCBjb250YWluZXIsIGFuY2hvcik7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbW92ZShjaGlsZHJlbltpXSwgY29udGFpbmVyLCBhbmNob3IsIG1vdmVUeXBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGhvc3RJbnNlcnQodm5vZGUuYW5jaG9yLCBjb250YWluZXIsIGFuY2hvcik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGUgPT09IFN0YXRpYykge1xuICAgICAgICAgICAgbW92ZVN0YXRpY05vZGUodm5vZGUsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBzaW5nbGUgbm9kZXNcbiAgICAgICAgY29uc3QgbmVlZFRyYW5zaXRpb24gPSBtb3ZlVHlwZSAhPT0gMiAvKiBNb3ZlVHlwZS5SRU9SREVSICovICYmXG4gICAgICAgICAgICBzaGFwZUZsYWcgJiAxIC8qIFNoYXBlRmxhZ3MuRUxFTUVOVCAqLyAmJlxuICAgICAgICAgICAgdHJhbnNpdGlvbjtcbiAgICAgICAgaWYgKG5lZWRUcmFuc2l0aW9uKSB7XG4gICAgICAgICAgICBpZiAobW92ZVR5cGUgPT09IDAgLyogTW92ZVR5cGUuRU5URVIgKi8pIHtcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uLmJlZm9yZUVudGVyKGVsKTtcbiAgICAgICAgICAgICAgICBob3N0SW5zZXJ0KGVsLCBjb250YWluZXIsIGFuY2hvcik7XG4gICAgICAgICAgICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KCgpID0+IHRyYW5zaXRpb24uZW50ZXIoZWwpLCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGxlYXZlLCBkZWxheUxlYXZlLCBhZnRlckxlYXZlIH0gPSB0cmFuc2l0aW9uO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlbW92ZSA9ICgpID0+IGhvc3RJbnNlcnQoZWwsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwZXJmb3JtTGVhdmUgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxlYXZlKGVsLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFmdGVyTGVhdmUgJiYgYWZ0ZXJMZWF2ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmIChkZWxheUxlYXZlKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGF5TGVhdmUoZWwsIHJlbW92ZSwgcGVyZm9ybUxlYXZlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHBlcmZvcm1MZWF2ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGhvc3RJbnNlcnQoZWwsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgdW5tb3VudCA9ICh2bm9kZSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgZG9SZW1vdmUgPSBmYWxzZSwgb3B0aW1pemVkID0gZmFsc2UpID0+IHtcbiAgICAgICAgY29uc3QgeyB0eXBlLCBwcm9wcywgcmVmLCBjaGlsZHJlbiwgZHluYW1pY0NoaWxkcmVuLCBzaGFwZUZsYWcsIHBhdGNoRmxhZywgZGlycyB9ID0gdm5vZGU7XG4gICAgICAgIC8vIHVuc2V0IHJlZlxuICAgICAgICBpZiAocmVmICE9IG51bGwpIHtcbiAgICAgICAgICAgIHNldFJlZihyZWYsIG51bGwsIHBhcmVudFN1c3BlbnNlLCB2bm9kZSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDI1NiAvKiBTaGFwZUZsYWdzLkNPTVBPTkVOVF9TSE9VTERfS0VFUF9BTElWRSAqLykge1xuICAgICAgICAgICAgcGFyZW50Q29tcG9uZW50LmN0eC5kZWFjdGl2YXRlKHZub2RlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzaG91bGRJbnZva2VEaXJzID0gc2hhcGVGbGFnICYgMSAvKiBTaGFwZUZsYWdzLkVMRU1FTlQgKi8gJiYgZGlycztcbiAgICAgICAgY29uc3Qgc2hvdWxkSW52b2tlVm5vZGVIb29rID0gIWlzQXN5bmNXcmFwcGVyKHZub2RlKTtcbiAgICAgICAgbGV0IHZub2RlSG9vaztcbiAgICAgICAgaWYgKHNob3VsZEludm9rZVZub2RlSG9vayAmJlxuICAgICAgICAgICAgKHZub2RlSG9vayA9IHByb3BzICYmIHByb3BzLm9uVm5vZGVCZWZvcmVVbm1vdW50KSkge1xuICAgICAgICAgICAgaW52b2tlVk5vZGVIb29rKHZub2RlSG9vaywgcGFyZW50Q29tcG9uZW50LCB2bm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDYgLyogU2hhcGVGbGFncy5DT01QT05FTlQgKi8pIHtcbiAgICAgICAgICAgIHVubW91bnRDb21wb25lbnQodm5vZGUuY29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgZG9SZW1vdmUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDEyOCAvKiBTaGFwZUZsYWdzLlNVU1BFTlNFICovKSB7XG4gICAgICAgICAgICAgICAgdm5vZGUuc3VzcGVuc2UudW5tb3VudChwYXJlbnRTdXNwZW5zZSwgZG9SZW1vdmUpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzaG91bGRJbnZva2VEaXJzKSB7XG4gICAgICAgICAgICAgICAgaW52b2tlRGlyZWN0aXZlSG9vayh2bm9kZSwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCAnYmVmb3JlVW5tb3VudCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDY0IC8qIFNoYXBlRmxhZ3MuVEVMRVBPUlQgKi8pIHtcbiAgICAgICAgICAgICAgICB2bm9kZS50eXBlLnJlbW92ZSh2bm9kZSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgb3B0aW1pemVkLCBpbnRlcm5hbHMsIGRvUmVtb3ZlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGR5bmFtaWNDaGlsZHJlbiAmJlxuICAgICAgICAgICAgICAgIC8vICMxMTUzOiBmYXN0IHBhdGggc2hvdWxkIG5vdCBiZSB0YWtlbiBmb3Igbm9uLXN0YWJsZSAodi1mb3IpIGZyYWdtZW50c1xuICAgICAgICAgICAgICAgICh0eXBlICE9PSBGcmFnbWVudCB8fFxuICAgICAgICAgICAgICAgICAgICAocGF0Y2hGbGFnID4gMCAmJiBwYXRjaEZsYWcgJiA2NCAvKiBQYXRjaEZsYWdzLlNUQUJMRV9GUkFHTUVOVCAqLykpKSB7XG4gICAgICAgICAgICAgICAgLy8gZmFzdCBwYXRoIGZvciBibG9jayBub2Rlczogb25seSBuZWVkIHRvIHVubW91bnQgZHluYW1pYyBjaGlsZHJlbi5cbiAgICAgICAgICAgICAgICB1bm1vdW50Q2hpbGRyZW4oZHluYW1pY0NoaWxkcmVuLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBmYWxzZSwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICgodHlwZSA9PT0gRnJhZ21lbnQgJiZcbiAgICAgICAgICAgICAgICBwYXRjaEZsYWcgJlxuICAgICAgICAgICAgICAgICAgICAoMTI4IC8qIFBhdGNoRmxhZ3MuS0VZRURfRlJBR01FTlQgKi8gfCAyNTYgLyogUGF0Y2hGbGFncy5VTktFWUVEX0ZSQUdNRU5UICovKSkgfHxcbiAgICAgICAgICAgICAgICAoIW9wdGltaXplZCAmJiBzaGFwZUZsYWcgJiAxNiAvKiBTaGFwZUZsYWdzLkFSUkFZX0NISUxEUkVOICovKSkge1xuICAgICAgICAgICAgICAgIHVubW91bnRDaGlsZHJlbihjaGlsZHJlbiwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZG9SZW1vdmUpIHtcbiAgICAgICAgICAgICAgICByZW1vdmUodm5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICgoc2hvdWxkSW52b2tlVm5vZGVIb29rICYmXG4gICAgICAgICAgICAodm5vZGVIb29rID0gcHJvcHMgJiYgcHJvcHMub25Wbm9kZVVubW91bnRlZCkpIHx8XG4gICAgICAgICAgICBzaG91bGRJbnZva2VEaXJzKSB7XG4gICAgICAgICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHZub2RlSG9vayAmJiBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBwYXJlbnRDb21wb25lbnQsIHZub2RlKTtcbiAgICAgICAgICAgICAgICBzaG91bGRJbnZva2VEaXJzICYmXG4gICAgICAgICAgICAgICAgICAgIGludm9rZURpcmVjdGl2ZUhvb2sodm5vZGUsIG51bGwsIHBhcmVudENvbXBvbmVudCwgJ3VubW91bnRlZCcpO1xuICAgICAgICAgICAgfSwgcGFyZW50U3VzcGVuc2UpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCByZW1vdmUgPSB2bm9kZSA9PiB7XG4gICAgICAgIGNvbnN0IHsgdHlwZSwgZWwsIGFuY2hvciwgdHJhbnNpdGlvbiB9ID0gdm5vZGU7XG4gICAgICAgIGlmICh0eXBlID09PSBGcmFnbWVudCkge1xuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxuICAgICAgICAgICAgICAgIHZub2RlLnBhdGNoRmxhZyA+IDAgJiZcbiAgICAgICAgICAgICAgICB2bm9kZS5wYXRjaEZsYWcgJiAyMDQ4IC8qIFBhdGNoRmxhZ3MuREVWX1JPT1RfRlJBR01FTlQgKi8gJiZcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uICYmXG4gICAgICAgICAgICAgICAgIXRyYW5zaXRpb24ucGVyc2lzdGVkKSB7XG4gICAgICAgICAgICAgICAgdm5vZGUuY2hpbGRyZW4uZm9yRWFjaChjaGlsZCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZC50eXBlID09PSBDb21tZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBob3N0UmVtb3ZlKGNoaWxkLmVsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZShjaGlsZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlbW92ZUZyYWdtZW50KGVsLCBhbmNob3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlID09PSBTdGF0aWMpIHtcbiAgICAgICAgICAgIHJlbW92ZVN0YXRpY05vZGUodm5vZGUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBlcmZvcm1SZW1vdmUgPSAoKSA9PiB7XG4gICAgICAgICAgICBob3N0UmVtb3ZlKGVsKTtcbiAgICAgICAgICAgIGlmICh0cmFuc2l0aW9uICYmICF0cmFuc2l0aW9uLnBlcnNpc3RlZCAmJiB0cmFuc2l0aW9uLmFmdGVyTGVhdmUpIHtcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uLmFmdGVyTGVhdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHZub2RlLnNoYXBlRmxhZyAmIDEgLyogU2hhcGVGbGFncy5FTEVNRU5UICovICYmXG4gICAgICAgICAgICB0cmFuc2l0aW9uICYmXG4gICAgICAgICAgICAhdHJhbnNpdGlvbi5wZXJzaXN0ZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgbGVhdmUsIGRlbGF5TGVhdmUgfSA9IHRyYW5zaXRpb247XG4gICAgICAgICAgICBjb25zdCBwZXJmb3JtTGVhdmUgPSAoKSA9PiBsZWF2ZShlbCwgcGVyZm9ybVJlbW92ZSk7XG4gICAgICAgICAgICBpZiAoZGVsYXlMZWF2ZSkge1xuICAgICAgICAgICAgICAgIGRlbGF5TGVhdmUodm5vZGUuZWwsIHBlcmZvcm1SZW1vdmUsIHBlcmZvcm1MZWF2ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwZXJmb3JtTGVhdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBlcmZvcm1SZW1vdmUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlRnJhZ21lbnQgPSAoY3VyLCBlbmQpID0+IHtcbiAgICAgICAgLy8gRm9yIGZyYWdtZW50cywgZGlyZWN0bHkgcmVtb3ZlIGFsbCBjb250YWluZWQgRE9NIG5vZGVzLlxuICAgICAgICAvLyAoZnJhZ21lbnQgY2hpbGQgbm9kZXMgY2Fubm90IGhhdmUgdHJhbnNpdGlvbilcbiAgICAgICAgbGV0IG5leHQ7XG4gICAgICAgIHdoaWxlIChjdXIgIT09IGVuZCkge1xuICAgICAgICAgICAgbmV4dCA9IGhvc3ROZXh0U2libGluZyhjdXIpO1xuICAgICAgICAgICAgaG9zdFJlbW92ZShjdXIpO1xuICAgICAgICAgICAgY3VyID0gbmV4dDtcbiAgICAgICAgfVxuICAgICAgICBob3N0UmVtb3ZlKGVuZCk7XG4gICAgfTtcbiAgICBjb25zdCB1bm1vdW50Q29tcG9uZW50ID0gKGluc3RhbmNlLCBwYXJlbnRTdXNwZW5zZSwgZG9SZW1vdmUpID0+IHtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBpbnN0YW5jZS50eXBlLl9faG1ySWQpIHtcbiAgICAgICAgICAgIHVucmVnaXN0ZXJITVIoaW5zdGFuY2UpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgYnVtLCBzY29wZSwgdXBkYXRlLCBzdWJUcmVlLCB1bSB9ID0gaW5zdGFuY2U7XG4gICAgICAgIC8vIGJlZm9yZVVubW91bnQgaG9va1xuICAgICAgICBpZiAoYnVtKSB7XG4gICAgICAgICAgICBpbnZva2VBcnJheUZucyhidW0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIHN0b3AgZWZmZWN0cyBpbiBjb21wb25lbnQgc2NvcGVcbiAgICAgICAgc2NvcGUuc3RvcCgpO1xuICAgICAgICAvLyB1cGRhdGUgbWF5IGJlIG51bGwgaWYgYSBjb21wb25lbnQgaXMgdW5tb3VudGVkIGJlZm9yZSBpdHMgYXN5bmNcbiAgICAgICAgLy8gc2V0dXAgaGFzIHJlc29sdmVkLlxuICAgICAgICBpZiAodXBkYXRlKSB7XG4gICAgICAgICAgICAvLyBzbyB0aGF0IHNjaGVkdWxlciB3aWxsIG5vIGxvbmdlciBpbnZva2UgaXRcbiAgICAgICAgICAgIHVwZGF0ZS5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIHVubW91bnQoc3ViVHJlZSwgaW5zdGFuY2UsIHBhcmVudFN1c3BlbnNlLCBkb1JlbW92ZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdW5tb3VudGVkIGhvb2tcbiAgICAgICAgaWYgKHVtKSB7XG4gICAgICAgICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QodW0sIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgICAgfVxuICAgICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoKCkgPT4ge1xuICAgICAgICAgICAgaW5zdGFuY2UuaXNVbm1vdW50ZWQgPSB0cnVlO1xuICAgICAgICB9LCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICAgIC8vIEEgY29tcG9uZW50IHdpdGggYXN5bmMgZGVwIGluc2lkZSBhIHBlbmRpbmcgc3VzcGVuc2UgaXMgdW5tb3VudGVkIGJlZm9yZVxuICAgICAgICAvLyBpdHMgYXN5bmMgZGVwIHJlc29sdmVzLiBUaGlzIHNob3VsZCByZW1vdmUgdGhlIGRlcCBmcm9tIHRoZSBzdXNwZW5zZSwgYW5kXG4gICAgICAgIC8vIGNhdXNlIHRoZSBzdXNwZW5zZSB0byByZXNvbHZlIGltbWVkaWF0ZWx5IGlmIHRoYXQgd2FzIHRoZSBsYXN0IGRlcC5cbiAgICAgICAgaWYgKHBhcmVudFN1c3BlbnNlICYmXG4gICAgICAgICAgICBwYXJlbnRTdXNwZW5zZS5wZW5kaW5nQnJhbmNoICYmXG4gICAgICAgICAgICAhcGFyZW50U3VzcGVuc2UuaXNVbm1vdW50ZWQgJiZcbiAgICAgICAgICAgIGluc3RhbmNlLmFzeW5jRGVwICYmXG4gICAgICAgICAgICAhaW5zdGFuY2UuYXN5bmNSZXNvbHZlZCAmJlxuICAgICAgICAgICAgaW5zdGFuY2Uuc3VzcGVuc2VJZCA9PT0gcGFyZW50U3VzcGVuc2UucGVuZGluZ0lkKSB7XG4gICAgICAgICAgICBwYXJlbnRTdXNwZW5zZS5kZXBzLS07XG4gICAgICAgICAgICBpZiAocGFyZW50U3VzcGVuc2UuZGVwcyA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHBhcmVudFN1c3BlbnNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xuICAgICAgICAgICAgZGV2dG9vbHNDb21wb25lbnRSZW1vdmVkKGluc3RhbmNlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgdW5tb3VudENoaWxkcmVuID0gKGNoaWxkcmVuLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBkb1JlbW92ZSA9IGZhbHNlLCBvcHRpbWl6ZWQgPSBmYWxzZSwgc3RhcnQgPSAwKSA9PiB7XG4gICAgICAgIGZvciAobGV0IGkgPSBzdGFydDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB1bm1vdW50KGNoaWxkcmVuW2ldLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBkb1JlbW92ZSwgb3B0aW1pemVkKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgZ2V0TmV4dEhvc3ROb2RlID0gdm5vZGUgPT4ge1xuICAgICAgICBpZiAodm5vZGUuc2hhcGVGbGFnICYgNiAvKiBTaGFwZUZsYWdzLkNPTVBPTkVOVCAqLykge1xuICAgICAgICAgICAgcmV0dXJuIGdldE5leHRIb3N0Tm9kZSh2bm9kZS5jb21wb25lbnQuc3ViVHJlZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZub2RlLnNoYXBlRmxhZyAmIDEyOCAvKiBTaGFwZUZsYWdzLlNVU1BFTlNFICovKSB7XG4gICAgICAgICAgICByZXR1cm4gdm5vZGUuc3VzcGVuc2UubmV4dCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBob3N0TmV4dFNpYmxpbmcoKHZub2RlLmFuY2hvciB8fCB2bm9kZS5lbCkpO1xuICAgIH07XG4gICAgY29uc3QgcmVuZGVyID0gKHZub2RlLCBjb250YWluZXIsIGlzU1ZHKSA9PiB7XG4gICAgICAgIGlmICh2bm9kZSA9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoY29udGFpbmVyLl92bm9kZSkge1xuICAgICAgICAgICAgICAgIHVubW91bnQoY29udGFpbmVyLl92bm9kZSwgbnVsbCwgbnVsbCwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwYXRjaChjb250YWluZXIuX3Zub2RlIHx8IG51bGwsIHZub2RlLCBjb250YWluZXIsIG51bGwsIG51bGwsIG51bGwsIGlzU1ZHKTtcbiAgICAgICAgfVxuICAgICAgICBmbHVzaFByZUZsdXNoQ2JzKCk7XG4gICAgICAgIGZsdXNoUG9zdEZsdXNoQ2JzKCk7XG4gICAgICAgIGNvbnRhaW5lci5fdm5vZGUgPSB2bm9kZTtcbiAgICB9O1xuICAgIGNvbnN0IGludGVybmFscyA9IHtcbiAgICAgICAgcDogcGF0Y2gsXG4gICAgICAgIHVtOiB1bm1vdW50LFxuICAgICAgICBtOiBtb3ZlLFxuICAgICAgICByOiByZW1vdmUsXG4gICAgICAgIG10OiBtb3VudENvbXBvbmVudCxcbiAgICAgICAgbWM6IG1vdW50Q2hpbGRyZW4sXG4gICAgICAgIHBjOiBwYXRjaENoaWxkcmVuLFxuICAgICAgICBwYmM6IHBhdGNoQmxvY2tDaGlsZHJlbixcbiAgICAgICAgbjogZ2V0TmV4dEhvc3ROb2RlLFxuICAgICAgICBvOiBvcHRpb25zXG4gICAgfTtcbiAgICBsZXQgaHlkcmF0ZTtcbiAgICBsZXQgaHlkcmF0ZU5vZGU7XG4gICAgaWYgKGNyZWF0ZUh5ZHJhdGlvbkZucykge1xuICAgICAgICBbaHlkcmF0ZSwgaHlkcmF0ZU5vZGVdID0gY3JlYXRlSHlkcmF0aW9uRm5zKGludGVybmFscyk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHJlbmRlcixcbiAgICAgICAgaHlkcmF0ZSxcbiAgICAgICAgY3JlYXRlQXBwOiBjcmVhdGVBcHBBUEkocmVuZGVyLCBoeWRyYXRlKVxuICAgIH07XG59XG5mdW5jdGlvbiB0b2dnbGVSZWN1cnNlKHsgZWZmZWN0LCB1cGRhdGUgfSwgYWxsb3dlZCkge1xuICAgIGVmZmVjdC5hbGxvd1JlY3Vyc2UgPSB1cGRhdGUuYWxsb3dSZWN1cnNlID0gYWxsb3dlZDtcbn1cbi8qKlxuICogIzExNTZcbiAqIFdoZW4gYSBjb21wb25lbnQgaXMgSE1SLWVuYWJsZWQsIHdlIG5lZWQgdG8gbWFrZSBzdXJlIHRoYXQgYWxsIHN0YXRpYyBub2Rlc1xuICogaW5zaWRlIGEgYmxvY2sgYWxzbyBpbmhlcml0IHRoZSBET00gZWxlbWVudCBmcm9tIHRoZSBwcmV2aW91cyB0cmVlIHNvIHRoYXRcbiAqIEhNUiB1cGRhdGVzICh3aGljaCBhcmUgZnVsbCB1cGRhdGVzKSBjYW4gcmV0cmlldmUgdGhlIGVsZW1lbnQgZm9yIHBhdGNoaW5nLlxuICpcbiAqICMyMDgwXG4gKiBJbnNpZGUga2V5ZWQgYHRlbXBsYXRlYCBmcmFnbWVudCBzdGF0aWMgY2hpbGRyZW4sIGlmIGEgZnJhZ21lbnQgaXMgbW92ZWQsXG4gKiB0aGUgY2hpbGRyZW4gd2lsbCBhbHdheXMgYmUgbW92ZWQuIFRoZXJlZm9yZSwgaW4gb3JkZXIgdG8gZW5zdXJlIGNvcnJlY3QgbW92ZVxuICogcG9zaXRpb24sIGVsIHNob3VsZCBiZSBpbmhlcml0ZWQgZnJvbSBwcmV2aW91cyBub2Rlcy5cbiAqL1xuZnVuY3Rpb24gdHJhdmVyc2VTdGF0aWNDaGlsZHJlbihuMSwgbjIsIHNoYWxsb3cgPSBmYWxzZSkge1xuICAgIGNvbnN0IGNoMSA9IG4xLmNoaWxkcmVuO1xuICAgIGNvbnN0IGNoMiA9IG4yLmNoaWxkcmVuO1xuICAgIGlmIChpc0FycmF5KGNoMSkgJiYgaXNBcnJheShjaDIpKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2gxLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAvLyB0aGlzIGlzIG9ubHkgY2FsbGVkIGluIHRoZSBvcHRpbWl6ZWQgcGF0aCBzbyBhcnJheSBjaGlsZHJlbiBhcmVcbiAgICAgICAgICAgIC8vIGd1YXJhbnRlZWQgdG8gYmUgdm5vZGVzXG4gICAgICAgICAgICBjb25zdCBjMSA9IGNoMVtpXTtcbiAgICAgICAgICAgIGxldCBjMiA9IGNoMltpXTtcbiAgICAgICAgICAgIGlmIChjMi5zaGFwZUZsYWcgJiAxIC8qIFNoYXBlRmxhZ3MuRUxFTUVOVCAqLyAmJiAhYzIuZHluYW1pY0NoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgaWYgKGMyLnBhdGNoRmxhZyA8PSAwIHx8IGMyLnBhdGNoRmxhZyA9PT0gMzIgLyogUGF0Y2hGbGFncy5IWURSQVRFX0VWRU5UUyAqLykge1xuICAgICAgICAgICAgICAgICAgICBjMiA9IGNoMltpXSA9IGNsb25lSWZNb3VudGVkKGNoMltpXSk7XG4gICAgICAgICAgICAgICAgICAgIGMyLmVsID0gYzEuZWw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghc2hhbGxvdylcbiAgICAgICAgICAgICAgICAgICAgdHJhdmVyc2VTdGF0aWNDaGlsZHJlbihjMSwgYzIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gIzY4NTIgYWxzbyBpbmhlcml0IGZvciB0ZXh0IG5vZGVzXG4gICAgICAgICAgICBpZiAoYzIudHlwZSA9PT0gVGV4dCkge1xuICAgICAgICAgICAgICAgIGMyLmVsID0gYzEuZWw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBhbHNvIGluaGVyaXQgZm9yIGNvbW1lbnQgbm9kZXMsIGJ1dCBub3QgcGxhY2Vob2xkZXJzIChlLmcuIHYtaWYgd2hpY2hcbiAgICAgICAgICAgIC8vIHdvdWxkIGhhdmUgcmVjZWl2ZWQgLmVsIGR1cmluZyBibG9jayBwYXRjaClcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgYzIudHlwZSA9PT0gQ29tbWVudCAmJiAhYzIuZWwpIHtcbiAgICAgICAgICAgICAgICBjMi5lbCA9IGMxLmVsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuLy8gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTG9uZ2VzdF9pbmNyZWFzaW5nX3N1YnNlcXVlbmNlXG5mdW5jdGlvbiBnZXRTZXF1ZW5jZShhcnIpIHtcbiAgICBjb25zdCBwID0gYXJyLnNsaWNlKCk7XG4gICAgY29uc3QgcmVzdWx0ID0gWzBdO1xuICAgIGxldCBpLCBqLCB1LCB2LCBjO1xuICAgIGNvbnN0IGxlbiA9IGFyci5sZW5ndGg7XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGFyckkgPSBhcnJbaV07XG4gICAgICAgIGlmIChhcnJJICE9PSAwKSB7XG4gICAgICAgICAgICBqID0gcmVzdWx0W3Jlc3VsdC5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIGlmIChhcnJbal0gPCBhcnJJKSB7XG4gICAgICAgICAgICAgICAgcFtpXSA9IGo7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goaSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1ID0gMDtcbiAgICAgICAgICAgIHYgPSByZXN1bHQubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgIHdoaWxlICh1IDwgdikge1xuICAgICAgICAgICAgICAgIGMgPSAodSArIHYpID4+IDE7XG4gICAgICAgICAgICAgICAgaWYgKGFycltyZXN1bHRbY11dIDwgYXJySSkge1xuICAgICAgICAgICAgICAgICAgICB1ID0gYyArIDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2ID0gYztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXJySSA8IGFycltyZXN1bHRbdV1dKSB7XG4gICAgICAgICAgICAgICAgaWYgKHUgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHBbaV0gPSByZXN1bHRbdSAtIDFdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXN1bHRbdV0gPSBpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHUgPSByZXN1bHQubGVuZ3RoO1xuICAgIHYgPSByZXN1bHRbdSAtIDFdO1xuICAgIHdoaWxlICh1LS0gPiAwKSB7XG4gICAgICAgIHJlc3VsdFt1XSA9IHY7XG4gICAgICAgIHYgPSBwW3ZdO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG5jb25zdCBpc1RlbGVwb3J0ID0gKHR5cGUpID0+IHR5cGUuX19pc1RlbGVwb3J0O1xuY29uc3QgaXNUZWxlcG9ydERpc2FibGVkID0gKHByb3BzKSA9PiBwcm9wcyAmJiAocHJvcHMuZGlzYWJsZWQgfHwgcHJvcHMuZGlzYWJsZWQgPT09ICcnKTtcbmNvbnN0IGlzVGFyZ2V0U1ZHID0gKHRhcmdldCkgPT4gdHlwZW9mIFNWR0VsZW1lbnQgIT09ICd1bmRlZmluZWQnICYmIHRhcmdldCBpbnN0YW5jZW9mIFNWR0VsZW1lbnQ7XG5jb25zdCByZXNvbHZlVGFyZ2V0ID0gKHByb3BzLCBzZWxlY3QpID0+IHtcbiAgICBjb25zdCB0YXJnZXRTZWxlY3RvciA9IHByb3BzICYmIHByb3BzLnRvO1xuICAgIGlmIChpc1N0cmluZyh0YXJnZXRTZWxlY3RvcikpIHtcbiAgICAgICAgaWYgKCFzZWxlY3QpIHtcbiAgICAgICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxuICAgICAgICAgICAgICAgIHdhcm4oYEN1cnJlbnQgcmVuZGVyZXIgZG9lcyBub3Qgc3VwcG9ydCBzdHJpbmcgdGFyZ2V0IGZvciBUZWxlcG9ydHMuIGAgK1xuICAgICAgICAgICAgICAgICAgICBgKG1pc3NpbmcgcXVlcnlTZWxlY3RvciByZW5kZXJlciBvcHRpb24pYCk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IHNlbGVjdCh0YXJnZXRTZWxlY3Rvcik7XG4gICAgICAgICAgICBpZiAoIXRhcmdldCkge1xuICAgICAgICAgICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxuICAgICAgICAgICAgICAgICAgICB3YXJuKGBGYWlsZWQgdG8gbG9jYXRlIFRlbGVwb3J0IHRhcmdldCB3aXRoIHNlbGVjdG9yIFwiJHt0YXJnZXRTZWxlY3Rvcn1cIi4gYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgTm90ZSB0aGUgdGFyZ2V0IGVsZW1lbnQgbXVzdCBleGlzdCBiZWZvcmUgdGhlIGNvbXBvbmVudCBpcyBtb3VudGVkIC0gYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgaS5lLiB0aGUgdGFyZ2V0IGNhbm5vdCBiZSByZW5kZXJlZCBieSB0aGUgY29tcG9uZW50IGl0c2VsZiwgYW5kIGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYGlkZWFsbHkgc2hvdWxkIGJlIG91dHNpZGUgb2YgdGhlIGVudGlyZSBWdWUgY29tcG9uZW50IHRyZWUuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICF0YXJnZXRTZWxlY3RvciAmJiAhaXNUZWxlcG9ydERpc2FibGVkKHByb3BzKSkge1xuICAgICAgICAgICAgd2FybihgSW52YWxpZCBUZWxlcG9ydCB0YXJnZXQ6ICR7dGFyZ2V0U2VsZWN0b3J9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRhcmdldFNlbGVjdG9yO1xuICAgIH1cbn07XG5jb25zdCBUZWxlcG9ydEltcGwgPSB7XG4gICAgX19pc1RlbGVwb3J0OiB0cnVlLFxuICAgIHByb2Nlc3MobjEsIG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCBpbnRlcm5hbHMpIHtcbiAgICAgICAgY29uc3QgeyBtYzogbW91bnRDaGlsZHJlbiwgcGM6IHBhdGNoQ2hpbGRyZW4sIHBiYzogcGF0Y2hCbG9ja0NoaWxkcmVuLCBvOiB7IGluc2VydCwgcXVlcnlTZWxlY3RvciwgY3JlYXRlVGV4dCwgY3JlYXRlQ29tbWVudCB9IH0gPSBpbnRlcm5hbHM7XG4gICAgICAgIGNvbnN0IGRpc2FibGVkID0gaXNUZWxlcG9ydERpc2FibGVkKG4yLnByb3BzKTtcbiAgICAgICAgbGV0IHsgc2hhcGVGbGFnLCBjaGlsZHJlbiwgZHluYW1pY0NoaWxkcmVuIH0gPSBuMjtcbiAgICAgICAgLy8gIzMzMDJcbiAgICAgICAgLy8gSE1SIHVwZGF0ZWQsIGZvcmNlIGZ1bGwgZGlmZlxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGlzSG1yVXBkYXRpbmcpIHtcbiAgICAgICAgICAgIG9wdGltaXplZCA9IGZhbHNlO1xuICAgICAgICAgICAgZHluYW1pY0NoaWxkcmVuID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAobjEgPT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gaW5zZXJ0IGFuY2hvcnMgaW4gdGhlIG1haW4gdmlld1xuICAgICAgICAgICAgY29uc3QgcGxhY2Vob2xkZXIgPSAobjIuZWwgPSAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJylcbiAgICAgICAgICAgICAgICA/IGNyZWF0ZUNvbW1lbnQoJ3RlbGVwb3J0IHN0YXJ0JylcbiAgICAgICAgICAgICAgICA6IGNyZWF0ZVRleHQoJycpKTtcbiAgICAgICAgICAgIGNvbnN0IG1haW5BbmNob3IgPSAobjIuYW5jaG9yID0gKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpXG4gICAgICAgICAgICAgICAgPyBjcmVhdGVDb21tZW50KCd0ZWxlcG9ydCBlbmQnKVxuICAgICAgICAgICAgICAgIDogY3JlYXRlVGV4dCgnJykpO1xuICAgICAgICAgICAgaW5zZXJ0KHBsYWNlaG9sZGVyLCBjb250YWluZXIsIGFuY2hvcik7XG4gICAgICAgICAgICBpbnNlcnQobWFpbkFuY2hvciwgY29udGFpbmVyLCBhbmNob3IpO1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gKG4yLnRhcmdldCA9IHJlc29sdmVUYXJnZXQobjIucHJvcHMsIHF1ZXJ5U2VsZWN0b3IpKTtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldEFuY2hvciA9IChuMi50YXJnZXRBbmNob3IgPSBjcmVhdGVUZXh0KCcnKSk7XG4gICAgICAgICAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgaW5zZXJ0KHRhcmdldEFuY2hvciwgdGFyZ2V0KTtcbiAgICAgICAgICAgICAgICAvLyAjMjY1MiB3ZSBjb3VsZCBiZSB0ZWxlcG9ydGluZyBmcm9tIGEgbm9uLVNWRyB0cmVlIGludG8gYW4gU1ZHIHRyZWVcbiAgICAgICAgICAgICAgICBpc1NWRyA9IGlzU1ZHIHx8IGlzVGFyZ2V0U1ZHKHRhcmdldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWRpc2FibGVkKSB7XG4gICAgICAgICAgICAgICAgd2FybignSW52YWxpZCBUZWxlcG9ydCB0YXJnZXQgb24gbW91bnQ6JywgdGFyZ2V0LCBgKCR7dHlwZW9mIHRhcmdldH0pYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBtb3VudCA9IChjb250YWluZXIsIGFuY2hvcikgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFRlbGVwb3J0ICphbHdheXMqIGhhcyBBcnJheSBjaGlsZHJlbi4gVGhpcyBpcyBlbmZvcmNlZCBpbiBib3RoIHRoZVxuICAgICAgICAgICAgICAgIC8vIGNvbXBpbGVyIGFuZCB2bm9kZSBjaGlsZHJlbiBub3JtYWxpemF0aW9uLlxuICAgICAgICAgICAgICAgIGlmIChzaGFwZUZsYWcgJiAxNiAvKiBTaGFwZUZsYWdzLkFSUkFZX0NISUxEUkVOICovKSB7XG4gICAgICAgICAgICAgICAgICAgIG1vdW50Q2hpbGRyZW4oY2hpbGRyZW4sIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoZGlzYWJsZWQpIHtcbiAgICAgICAgICAgICAgICBtb3VudChjb250YWluZXIsIG1haW5BbmNob3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgbW91bnQodGFyZ2V0LCB0YXJnZXRBbmNob3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gdXBkYXRlIGNvbnRlbnRcbiAgICAgICAgICAgIG4yLmVsID0gbjEuZWw7XG4gICAgICAgICAgICBjb25zdCBtYWluQW5jaG9yID0gKG4yLmFuY2hvciA9IG4xLmFuY2hvcik7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSAobjIudGFyZ2V0ID0gbjEudGFyZ2V0KTtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldEFuY2hvciA9IChuMi50YXJnZXRBbmNob3IgPSBuMS50YXJnZXRBbmNob3IpO1xuICAgICAgICAgICAgY29uc3Qgd2FzRGlzYWJsZWQgPSBpc1RlbGVwb3J0RGlzYWJsZWQobjEucHJvcHMpO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudENvbnRhaW5lciA9IHdhc0Rpc2FibGVkID8gY29udGFpbmVyIDogdGFyZ2V0O1xuICAgICAgICAgICAgY29uc3QgY3VycmVudEFuY2hvciA9IHdhc0Rpc2FibGVkID8gbWFpbkFuY2hvciA6IHRhcmdldEFuY2hvcjtcbiAgICAgICAgICAgIGlzU1ZHID0gaXNTVkcgfHwgaXNUYXJnZXRTVkcodGFyZ2V0KTtcbiAgICAgICAgICAgIGlmIChkeW5hbWljQ2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAvLyBmYXN0IHBhdGggd2hlbiB0aGUgdGVsZXBvcnQgaGFwcGVucyB0byBiZSBhIGJsb2NrIHJvb3RcbiAgICAgICAgICAgICAgICBwYXRjaEJsb2NrQ2hpbGRyZW4objEuZHluYW1pY0NoaWxkcmVuLCBkeW5hbWljQ2hpbGRyZW4sIGN1cnJlbnRDb250YWluZXIsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMpO1xuICAgICAgICAgICAgICAgIC8vIGV2ZW4gaW4gYmxvY2sgdHJlZSBtb2RlIHdlIG5lZWQgdG8gbWFrZSBzdXJlIGFsbCByb290LWxldmVsIG5vZGVzXG4gICAgICAgICAgICAgICAgLy8gaW4gdGhlIHRlbGVwb3J0IGluaGVyaXQgcHJldmlvdXMgRE9NIHJlZmVyZW5jZXMgc28gdGhhdCB0aGV5IGNhblxuICAgICAgICAgICAgICAgIC8vIGJlIG1vdmVkIGluIGZ1dHVyZSBwYXRjaGVzLlxuICAgICAgICAgICAgICAgIHRyYXZlcnNlU3RhdGljQ2hpbGRyZW4objEsIG4yLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCFvcHRpbWl6ZWQpIHtcbiAgICAgICAgICAgICAgICBwYXRjaENoaWxkcmVuKG4xLCBuMiwgY3VycmVudENvbnRhaW5lciwgY3VycmVudEFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRpc2FibGVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF3YXNEaXNhYmxlZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBlbmFibGVkIC0+IGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgIC8vIG1vdmUgaW50byBtYWluIGNvbnRhaW5lclxuICAgICAgICAgICAgICAgICAgICBtb3ZlVGVsZXBvcnQobjIsIGNvbnRhaW5lciwgbWFpbkFuY2hvciwgaW50ZXJuYWxzLCAxIC8qIFRlbGVwb3J0TW92ZVR5cGVzLlRPR0dMRSAqLyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gdGFyZ2V0IGNoYW5nZWRcbiAgICAgICAgICAgICAgICBpZiAoKG4yLnByb3BzICYmIG4yLnByb3BzLnRvKSAhPT0gKG4xLnByb3BzICYmIG4xLnByb3BzLnRvKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXh0VGFyZ2V0ID0gKG4yLnRhcmdldCA9IHJlc29sdmVUYXJnZXQobjIucHJvcHMsIHF1ZXJ5U2VsZWN0b3IpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5leHRUYXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVUZWxlcG9ydChuMiwgbmV4dFRhcmdldCwgbnVsbCwgaW50ZXJuYWxzLCAwIC8qIFRlbGVwb3J0TW92ZVR5cGVzLlRBUkdFVF9DSEFOR0UgKi8pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2FybignSW52YWxpZCBUZWxlcG9ydCB0YXJnZXQgb24gdXBkYXRlOicsIHRhcmdldCwgYCgke3R5cGVvZiB0YXJnZXR9KWApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHdhc0Rpc2FibGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGRpc2FibGVkIC0+IGVuYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgLy8gbW92ZSBpbnRvIHRlbGVwb3J0IHRhcmdldFxuICAgICAgICAgICAgICAgICAgICBtb3ZlVGVsZXBvcnQobjIsIHRhcmdldCwgdGFyZ2V0QW5jaG9yLCBpbnRlcm5hbHMsIDEgLyogVGVsZXBvcnRNb3ZlVHlwZXMuVE9HR0xFICovKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlQ3NzVmFycyhuMik7XG4gICAgfSxcbiAgICByZW1vdmUodm5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIG9wdGltaXplZCwgeyB1bTogdW5tb3VudCwgbzogeyByZW1vdmU6IGhvc3RSZW1vdmUgfSB9LCBkb1JlbW92ZSkge1xuICAgICAgICBjb25zdCB7IHNoYXBlRmxhZywgY2hpbGRyZW4sIGFuY2hvciwgdGFyZ2V0QW5jaG9yLCB0YXJnZXQsIHByb3BzIH0gPSB2bm9kZTtcbiAgICAgICAgaWYgKHRhcmdldCkge1xuICAgICAgICAgICAgaG9zdFJlbW92ZSh0YXJnZXRBbmNob3IpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGFuIHVubW91bnRlZCB0ZWxlcG9ydCBzaG91bGQgYWx3YXlzIHJlbW92ZSBpdHMgY2hpbGRyZW4gaWYgbm90IGRpc2FibGVkXG4gICAgICAgIGlmIChkb1JlbW92ZSB8fCAhaXNUZWxlcG9ydERpc2FibGVkKHByb3BzKSkge1xuICAgICAgICAgICAgaG9zdFJlbW92ZShhbmNob3IpO1xuICAgICAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDE2IC8qIFNoYXBlRmxhZ3MuQVJSQVlfQ0hJTERSRU4gKi8pIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkID0gY2hpbGRyZW5baV07XG4gICAgICAgICAgICAgICAgICAgIHVubW91bnQoY2hpbGQsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHRydWUsICEhY2hpbGQuZHluYW1pY0NoaWxkcmVuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIG1vdmU6IG1vdmVUZWxlcG9ydCxcbiAgICBoeWRyYXRlOiBoeWRyYXRlVGVsZXBvcnRcbn07XG5mdW5jdGlvbiBtb3ZlVGVsZXBvcnQodm5vZGUsIGNvbnRhaW5lciwgcGFyZW50QW5jaG9yLCB7IG86IHsgaW5zZXJ0IH0sIG06IG1vdmUgfSwgbW92ZVR5cGUgPSAyIC8qIFRlbGVwb3J0TW92ZVR5cGVzLlJFT1JERVIgKi8pIHtcbiAgICAvLyBtb3ZlIHRhcmdldCBhbmNob3IgaWYgdGhpcyBpcyBhIHRhcmdldCBjaGFuZ2UuXG4gICAgaWYgKG1vdmVUeXBlID09PSAwIC8qIFRlbGVwb3J0TW92ZVR5cGVzLlRBUkdFVF9DSEFOR0UgKi8pIHtcbiAgICAgICAgaW5zZXJ0KHZub2RlLnRhcmdldEFuY2hvciwgY29udGFpbmVyLCBwYXJlbnRBbmNob3IpO1xuICAgIH1cbiAgICBjb25zdCB7IGVsLCBhbmNob3IsIHNoYXBlRmxhZywgY2hpbGRyZW4sIHByb3BzIH0gPSB2bm9kZTtcbiAgICBjb25zdCBpc1Jlb3JkZXIgPSBtb3ZlVHlwZSA9PT0gMiAvKiBUZWxlcG9ydE1vdmVUeXBlcy5SRU9SREVSICovO1xuICAgIC8vIG1vdmUgbWFpbiB2aWV3IGFuY2hvciBpZiB0aGlzIGlzIGEgcmUtb3JkZXIuXG4gICAgaWYgKGlzUmVvcmRlcikge1xuICAgICAgICBpbnNlcnQoZWwsIGNvbnRhaW5lciwgcGFyZW50QW5jaG9yKTtcbiAgICB9XG4gICAgLy8gaWYgdGhpcyBpcyBhIHJlLW9yZGVyIGFuZCB0ZWxlcG9ydCBpcyBlbmFibGVkIChjb250ZW50IGlzIGluIHRhcmdldClcbiAgICAvLyBkbyBub3QgbW92ZSBjaGlsZHJlbi4gU28gdGhlIG9wcG9zaXRlIGlzOiBvbmx5IG1vdmUgY2hpbGRyZW4gaWYgdGhpc1xuICAgIC8vIGlzIG5vdCBhIHJlb3JkZXIsIG9yIHRoZSB0ZWxlcG9ydCBpcyBkaXNhYmxlZFxuICAgIGlmICghaXNSZW9yZGVyIHx8IGlzVGVsZXBvcnREaXNhYmxlZChwcm9wcykpIHtcbiAgICAgICAgLy8gVGVsZXBvcnQgaGFzIGVpdGhlciBBcnJheSBjaGlsZHJlbiBvciBubyBjaGlsZHJlbi5cbiAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDE2IC8qIFNoYXBlRmxhZ3MuQVJSQVlfQ0hJTERSRU4gKi8pIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBtb3ZlKGNoaWxkcmVuW2ldLCBjb250YWluZXIsIHBhcmVudEFuY2hvciwgMiAvKiBNb3ZlVHlwZS5SRU9SREVSICovKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBtb3ZlIG1haW4gdmlldyBhbmNob3IgaWYgdGhpcyBpcyBhIHJlLW9yZGVyLlxuICAgIGlmIChpc1Jlb3JkZXIpIHtcbiAgICAgICAgaW5zZXJ0KGFuY2hvciwgY29udGFpbmVyLCBwYXJlbnRBbmNob3IpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGh5ZHJhdGVUZWxlcG9ydChub2RlLCB2bm9kZSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIHsgbzogeyBuZXh0U2libGluZywgcGFyZW50Tm9kZSwgcXVlcnlTZWxlY3RvciB9IH0sIGh5ZHJhdGVDaGlsZHJlbikge1xuICAgIGNvbnN0IHRhcmdldCA9ICh2bm9kZS50YXJnZXQgPSByZXNvbHZlVGFyZ2V0KHZub2RlLnByb3BzLCBxdWVyeVNlbGVjdG9yKSk7XG4gICAgaWYgKHRhcmdldCkge1xuICAgICAgICAvLyBpZiBtdWx0aXBsZSB0ZWxlcG9ydHMgcmVuZGVyZWQgdG8gdGhlIHNhbWUgdGFyZ2V0IGVsZW1lbnQsIHdlIG5lZWQgdG9cbiAgICAgICAgLy8gcGljayB1cCBmcm9tIHdoZXJlIHRoZSBsYXN0IHRlbGVwb3J0IGZpbmlzaGVkIGluc3RlYWQgb2YgdGhlIGZpcnN0IG5vZGVcbiAgICAgICAgY29uc3QgdGFyZ2V0Tm9kZSA9IHRhcmdldC5fbHBhIHx8IHRhcmdldC5maXJzdENoaWxkO1xuICAgICAgICBpZiAodm5vZGUuc2hhcGVGbGFnICYgMTYgLyogU2hhcGVGbGFncy5BUlJBWV9DSElMRFJFTiAqLykge1xuICAgICAgICAgICAgaWYgKGlzVGVsZXBvcnREaXNhYmxlZCh2bm9kZS5wcm9wcykpIHtcbiAgICAgICAgICAgICAgICB2bm9kZS5hbmNob3IgPSBoeWRyYXRlQ2hpbGRyZW4obmV4dFNpYmxpbmcobm9kZSksIHZub2RlLCBwYXJlbnROb2RlKG5vZGUpLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgICAgICAgICAgICAgdm5vZGUudGFyZ2V0QW5jaG9yID0gdGFyZ2V0Tm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZub2RlLmFuY2hvciA9IG5leHRTaWJsaW5nKG5vZGUpO1xuICAgICAgICAgICAgICAgIC8vIGxvb2thaGVhZCB1bnRpbCB3ZSBmaW5kIHRoZSB0YXJnZXQgYW5jaG9yXG4gICAgICAgICAgICAgICAgLy8gd2UgY2Fubm90IHJlbHkgb24gcmV0dXJuIHZhbHVlIG9mIGh5ZHJhdGVDaGlsZHJlbigpIGJlY2F1c2UgdGhlcmVcbiAgICAgICAgICAgICAgICAvLyBjb3VsZCBiZSBuZXN0ZWQgdGVsZXBvcnRzXG4gICAgICAgICAgICAgICAgbGV0IHRhcmdldEFuY2hvciA9IHRhcmdldE5vZGU7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHRhcmdldEFuY2hvcikge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRBbmNob3IgPSBuZXh0U2libGluZyh0YXJnZXRBbmNob3IpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0QW5jaG9yICYmXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRBbmNob3Iubm9kZVR5cGUgPT09IDggJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldEFuY2hvci5kYXRhID09PSAndGVsZXBvcnQgYW5jaG9yJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdm5vZGUudGFyZ2V0QW5jaG9yID0gdGFyZ2V0QW5jaG9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Ll9scGEgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZub2RlLnRhcmdldEFuY2hvciAmJiBuZXh0U2libGluZyh2bm9kZS50YXJnZXRBbmNob3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaHlkcmF0ZUNoaWxkcmVuKHRhcmdldE5vZGUsIHZub2RlLCB0YXJnZXQsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVDc3NWYXJzKHZub2RlKTtcbiAgICB9XG4gICAgcmV0dXJuIHZub2RlLmFuY2hvciAmJiBuZXh0U2libGluZyh2bm9kZS5hbmNob3IpO1xufVxuLy8gRm9yY2UtY2FzdGVkIHB1YmxpYyB0eXBpbmcgZm9yIGggYW5kIFRTWCBwcm9wcyBpbmZlcmVuY2VcbmNvbnN0IFRlbGVwb3J0ID0gVGVsZXBvcnRJbXBsO1xuZnVuY3Rpb24gdXBkYXRlQ3NzVmFycyh2bm9kZSkge1xuICAgIC8vIHByZXNlbmNlIG9mIC51dCBtZXRob2QgaW5kaWNhdGVzIG93bmVyIGNvbXBvbmVudCB1c2VzIGNzcyB2YXJzLlxuICAgIC8vIGNvZGUgcGF0aCBoZXJlIGNhbiBhc3N1bWUgYnJvd3NlciBlbnZpcm9ubWVudC5cbiAgICBjb25zdCBjdHggPSB2bm9kZS5jdHg7XG4gICAgaWYgKGN0eCAmJiBjdHgudXQpIHtcbiAgICAgICAgbGV0IG5vZGUgPSB2bm9kZS5jaGlsZHJlblswXS5lbDtcbiAgICAgICAgd2hpbGUgKG5vZGUgIT09IHZub2RlLnRhcmdldEFuY2hvcikge1xuICAgICAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IDEpXG4gICAgICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdi1vd25lcicsIGN0eC51aWQpO1xuICAgICAgICAgICAgbm9kZSA9IG5vZGUubmV4dFNpYmxpbmc7XG4gICAgICAgIH1cbiAgICAgICAgY3R4LnV0KCk7XG4gICAgfVxufVxuXG5jb25zdCBGcmFnbWVudCA9IFN5bWJvbCgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyAnRnJhZ21lbnQnIDogdW5kZWZpbmVkKTtcbmNvbnN0IFRleHQgPSBTeW1ib2woKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gJ1RleHQnIDogdW5kZWZpbmVkKTtcbmNvbnN0IENvbW1lbnQgPSBTeW1ib2woKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gJ0NvbW1lbnQnIDogdW5kZWZpbmVkKTtcbmNvbnN0IFN0YXRpYyA9IFN5bWJvbCgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyAnU3RhdGljJyA6IHVuZGVmaW5lZCk7XG4vLyBTaW5jZSB2LWlmIGFuZCB2LWZvciBhcmUgdGhlIHR3byBwb3NzaWJsZSB3YXlzIG5vZGUgc3RydWN0dXJlIGNhbiBkeW5hbWljYWxseVxuLy8gY2hhbmdlLCBvbmNlIHdlIGNvbnNpZGVyIHYtaWYgYnJhbmNoZXMgYW5kIGVhY2ggdi1mb3IgZnJhZ21lbnQgYSBibG9jaywgd2Vcbi8vIGNhbiBkaXZpZGUgYSB0ZW1wbGF0ZSBpbnRvIG5lc3RlZCBibG9ja3MsIGFuZCB3aXRoaW4gZWFjaCBibG9jayB0aGUgbm9kZVxuLy8gc3RydWN0dXJlIHdvdWxkIGJlIHN0YWJsZS4gVGhpcyBhbGxvd3MgdXMgdG8gc2tpcCBtb3N0IGNoaWxkcmVuIGRpZmZpbmdcbi8vIGFuZCBvbmx5IHdvcnJ5IGFib3V0IHRoZSBkeW5hbWljIG5vZGVzIChpbmRpY2F0ZWQgYnkgcGF0Y2ggZmxhZ3MpLlxuY29uc3QgYmxvY2tTdGFjayA9IFtdO1xubGV0IGN1cnJlbnRCbG9jayA9IG51bGw7XG4vKipcbiAqIE9wZW4gYSBibG9jay5cbiAqIFRoaXMgbXVzdCBiZSBjYWxsZWQgYmVmb3JlIGBjcmVhdGVCbG9ja2AuIEl0IGNhbm5vdCBiZSBwYXJ0IG9mIGBjcmVhdGVCbG9ja2BcbiAqIGJlY2F1c2UgdGhlIGNoaWxkcmVuIG9mIHRoZSBibG9jayBhcmUgZXZhbHVhdGVkIGJlZm9yZSBgY3JlYXRlQmxvY2tgIGl0c2VsZlxuICogaXMgY2FsbGVkLiBUaGUgZ2VuZXJhdGVkIGNvZGUgdHlwaWNhbGx5IGxvb2tzIGxpa2UgdGhpczpcbiAqXG4gKiBgYGBqc1xuICogZnVuY3Rpb24gcmVuZGVyKCkge1xuICogICByZXR1cm4gKG9wZW5CbG9jaygpLGNyZWF0ZUJsb2NrKCdkaXYnLCBudWxsLCBbLi4uXSkpXG4gKiB9XG4gKiBgYGBcbiAqIGRpc2FibGVUcmFja2luZyBpcyB0cnVlIHdoZW4gY3JlYXRpbmcgYSB2LWZvciBmcmFnbWVudCBibG9jaywgc2luY2UgYSB2LWZvclxuICogZnJhZ21lbnQgYWx3YXlzIGRpZmZzIGl0cyBjaGlsZHJlbi5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBvcGVuQmxvY2soZGlzYWJsZVRyYWNraW5nID0gZmFsc2UpIHtcbiAgICBibG9ja1N0YWNrLnB1c2goKGN1cnJlbnRCbG9jayA9IGRpc2FibGVUcmFja2luZyA/IG51bGwgOiBbXSkpO1xufVxuZnVuY3Rpb24gY2xvc2VCbG9jaygpIHtcbiAgICBibG9ja1N0YWNrLnBvcCgpO1xuICAgIGN1cnJlbnRCbG9jayA9IGJsb2NrU3RhY2tbYmxvY2tTdGFjay5sZW5ndGggLSAxXSB8fCBudWxsO1xufVxuLy8gV2hldGhlciB3ZSBzaG91bGQgYmUgdHJhY2tpbmcgZHluYW1pYyBjaGlsZCBub2RlcyBpbnNpZGUgYSBibG9jay5cbi8vIE9ubHkgdHJhY2tzIHdoZW4gdGhpcyB2YWx1ZSBpcyA+IDBcbi8vIFdlIGFyZSBub3QgdXNpbmcgYSBzaW1wbGUgYm9vbGVhbiBiZWNhdXNlIHRoaXMgdmFsdWUgbWF5IG5lZWQgdG8gYmVcbi8vIGluY3JlbWVudGVkL2RlY3JlbWVudGVkIGJ5IG5lc3RlZCB1c2FnZSBvZiB2LW9uY2UgKHNlZSBiZWxvdylcbmxldCBpc0Jsb2NrVHJlZUVuYWJsZWQgPSAxO1xuLyoqXG4gKiBCbG9jayB0cmFja2luZyBzb21ldGltZXMgbmVlZHMgdG8gYmUgZGlzYWJsZWQsIGZvciBleGFtcGxlIGR1cmluZyB0aGVcbiAqIGNyZWF0aW9uIG9mIGEgdHJlZSB0aGF0IG5lZWRzIHRvIGJlIGNhY2hlZCBieSB2LW9uY2UuIFRoZSBjb21waWxlciBnZW5lcmF0ZXNcbiAqIGNvZGUgbGlrZSB0aGlzOlxuICpcbiAqIGBgYCBqc1xuICogX2NhY2hlWzFdIHx8IChcbiAqICAgc2V0QmxvY2tUcmFja2luZygtMSksXG4gKiAgIF9jYWNoZVsxXSA9IGNyZWF0ZVZOb2RlKC4uLiksXG4gKiAgIHNldEJsb2NrVHJhY2tpbmcoMSksXG4gKiAgIF9jYWNoZVsxXVxuICogKVxuICogYGBgXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gc2V0QmxvY2tUcmFja2luZyh2YWx1ZSkge1xuICAgIGlzQmxvY2tUcmVlRW5hYmxlZCArPSB2YWx1ZTtcbn1cbmZ1bmN0aW9uIHNldHVwQmxvY2sodm5vZGUpIHtcbiAgICAvLyBzYXZlIGN1cnJlbnQgYmxvY2sgY2hpbGRyZW4gb24gdGhlIGJsb2NrIHZub2RlXG4gICAgdm5vZGUuZHluYW1pY0NoaWxkcmVuID1cbiAgICAgICAgaXNCbG9ja1RyZWVFbmFibGVkID4gMCA/IGN1cnJlbnRCbG9jayB8fCBFTVBUWV9BUlIgOiBudWxsO1xuICAgIC8vIGNsb3NlIGJsb2NrXG4gICAgY2xvc2VCbG9jaygpO1xuICAgIC8vIGEgYmxvY2sgaXMgYWx3YXlzIGdvaW5nIHRvIGJlIHBhdGNoZWQsIHNvIHRyYWNrIGl0IGFzIGEgY2hpbGQgb2YgaXRzXG4gICAgLy8gcGFyZW50IGJsb2NrXG4gICAgaWYgKGlzQmxvY2tUcmVlRW5hYmxlZCA+IDAgJiYgY3VycmVudEJsb2NrKSB7XG4gICAgICAgIGN1cnJlbnRCbG9jay5wdXNoKHZub2RlKTtcbiAgICB9XG4gICAgcmV0dXJuIHZub2RlO1xufVxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBjcmVhdGVFbGVtZW50QmxvY2sodHlwZSwgcHJvcHMsIGNoaWxkcmVuLCBwYXRjaEZsYWcsIGR5bmFtaWNQcm9wcywgc2hhcGVGbGFnKSB7XG4gICAgcmV0dXJuIHNldHVwQmxvY2soY3JlYXRlQmFzZVZOb2RlKHR5cGUsIHByb3BzLCBjaGlsZHJlbiwgcGF0Y2hGbGFnLCBkeW5hbWljUHJvcHMsIHNoYXBlRmxhZywgdHJ1ZSAvKiBpc0Jsb2NrICovKSk7XG59XG4vKipcbiAqIENyZWF0ZSBhIGJsb2NrIHJvb3Qgdm5vZGUuIFRha2VzIHRoZSBzYW1lIGV4YWN0IGFyZ3VtZW50cyBhcyBgY3JlYXRlVk5vZGVgLlxuICogQSBibG9jayByb290IGtlZXBzIHRyYWNrIG9mIGR5bmFtaWMgbm9kZXMgd2l0aGluIHRoZSBibG9jayBpbiB0aGVcbiAqIGBkeW5hbWljQ2hpbGRyZW5gIGFycmF5LlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUJsb2NrKHR5cGUsIHByb3BzLCBjaGlsZHJlbiwgcGF0Y2hGbGFnLCBkeW5hbWljUHJvcHMpIHtcbiAgICByZXR1cm4gc2V0dXBCbG9jayhjcmVhdGVWTm9kZSh0eXBlLCBwcm9wcywgY2hpbGRyZW4sIHBhdGNoRmxhZywgZHluYW1pY1Byb3BzLCB0cnVlIC8qIGlzQmxvY2s6IHByZXZlbnQgYSBibG9jayBmcm9tIHRyYWNraW5nIGl0c2VsZiAqLykpO1xufVxuZnVuY3Rpb24gaXNWTm9kZSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA/IHZhbHVlLl9fdl9pc1ZOb2RlID09PSB0cnVlIDogZmFsc2U7XG59XG5mdW5jdGlvbiBpc1NhbWVWTm9kZVR5cGUobjEsIG4yKSB7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxuICAgICAgICBuMi5zaGFwZUZsYWcgJiA2IC8qIFNoYXBlRmxhZ3MuQ09NUE9ORU5UICovICYmXG4gICAgICAgIGhtckRpcnR5Q29tcG9uZW50cy5oYXMobjIudHlwZSkpIHtcbiAgICAgICAgLy8gIzcwNDIsIGVuc3VyZSB0aGUgdm5vZGUgYmVpbmcgdW5tb3VudGVkIGR1cmluZyBITVJcbiAgICAgICAgLy8gYml0d2lzZSBvcGVyYXRpb25zIHRvIHJlbW92ZSBrZWVwIGFsaXZlIGZsYWdzXG4gICAgICAgIG4xLnNoYXBlRmxhZyAmPSB+MjU2IC8qIFNoYXBlRmxhZ3MuQ09NUE9ORU5UX1NIT1VMRF9LRUVQX0FMSVZFICovO1xuICAgICAgICBuMi5zaGFwZUZsYWcgJj0gfjUxMiAvKiBTaGFwZUZsYWdzLkNPTVBPTkVOVF9LRVBUX0FMSVZFICovO1xuICAgICAgICAvLyBITVIgb25seTogaWYgdGhlIGNvbXBvbmVudCBoYXMgYmVlbiBob3QtdXBkYXRlZCwgZm9yY2UgYSByZWxvYWQuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIG4xLnR5cGUgPT09IG4yLnR5cGUgJiYgbjEua2V5ID09PSBuMi5rZXk7XG59XG5sZXQgdm5vZGVBcmdzVHJhbnNmb3JtZXI7XG4vKipcbiAqIEludGVybmFsIEFQSSBmb3IgcmVnaXN0ZXJpbmcgYW4gYXJndW1lbnRzIHRyYW5zZm9ybSBmb3IgY3JlYXRlVk5vZGVcbiAqIHVzZWQgZm9yIGNyZWF0aW5nIHN0dWJzIGluIHRoZSB0ZXN0LXV0aWxzXG4gKiBJdCBpcyAqaW50ZXJuYWwqIGJ1dCBuZWVkcyB0byBiZSBleHBvc2VkIGZvciB0ZXN0LXV0aWxzIHRvIHBpY2sgdXAgcHJvcGVyXG4gKiB0eXBpbmdzXG4gKi9cbmZ1bmN0aW9uIHRyYW5zZm9ybVZOb2RlQXJncyh0cmFuc2Zvcm1lcikge1xuICAgIHZub2RlQXJnc1RyYW5zZm9ybWVyID0gdHJhbnNmb3JtZXI7XG59XG5jb25zdCBjcmVhdGVWTm9kZVdpdGhBcmdzVHJhbnNmb3JtID0gKC4uLmFyZ3MpID0+IHtcbiAgICByZXR1cm4gX2NyZWF0ZVZOb2RlKC4uLih2bm9kZUFyZ3NUcmFuc2Zvcm1lclxuICAgICAgICA/IHZub2RlQXJnc1RyYW5zZm9ybWVyKGFyZ3MsIGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSlcbiAgICAgICAgOiBhcmdzKSk7XG59O1xuY29uc3QgSW50ZXJuYWxPYmplY3RLZXkgPSBgX192SW50ZXJuYWxgO1xuY29uc3Qgbm9ybWFsaXplS2V5ID0gKHsga2V5IH0pID0+IGtleSAhPSBudWxsID8ga2V5IDogbnVsbDtcbmNvbnN0IG5vcm1hbGl6ZVJlZiA9ICh7IHJlZiwgcmVmX2tleSwgcmVmX2ZvciB9KSA9PiB7XG4gICAgcmV0dXJuIChyZWYgIT0gbnVsbFxuICAgICAgICA/IGlzU3RyaW5nKHJlZikgfHwgaXNSZWYocmVmKSB8fCBpc0Z1bmN0aW9uKHJlZilcbiAgICAgICAgICAgID8geyBpOiBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UsIHI6IHJlZiwgazogcmVmX2tleSwgZjogISFyZWZfZm9yIH1cbiAgICAgICAgICAgIDogcmVmXG4gICAgICAgIDogbnVsbCk7XG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVZOb2RlKHR5cGUsIHByb3BzID0gbnVsbCwgY2hpbGRyZW4gPSBudWxsLCBwYXRjaEZsYWcgPSAwLCBkeW5hbWljUHJvcHMgPSBudWxsLCBzaGFwZUZsYWcgPSB0eXBlID09PSBGcmFnbWVudCA/IDAgOiAxIC8qIFNoYXBlRmxhZ3MuRUxFTUVOVCAqLywgaXNCbG9ja05vZGUgPSBmYWxzZSwgbmVlZEZ1bGxDaGlsZHJlbk5vcm1hbGl6YXRpb24gPSBmYWxzZSkge1xuICAgIGNvbnN0IHZub2RlID0ge1xuICAgICAgICBfX3ZfaXNWTm9kZTogdHJ1ZSxcbiAgICAgICAgX192X3NraXA6IHRydWUsXG4gICAgICAgIHR5cGUsXG4gICAgICAgIHByb3BzLFxuICAgICAgICBrZXk6IHByb3BzICYmIG5vcm1hbGl6ZUtleShwcm9wcyksXG4gICAgICAgIHJlZjogcHJvcHMgJiYgbm9ybWFsaXplUmVmKHByb3BzKSxcbiAgICAgICAgc2NvcGVJZDogY3VycmVudFNjb3BlSWQsXG4gICAgICAgIHNsb3RTY29wZUlkczogbnVsbCxcbiAgICAgICAgY2hpbGRyZW4sXG4gICAgICAgIGNvbXBvbmVudDogbnVsbCxcbiAgICAgICAgc3VzcGVuc2U6IG51bGwsXG4gICAgICAgIHNzQ29udGVudDogbnVsbCxcbiAgICAgICAgc3NGYWxsYmFjazogbnVsbCxcbiAgICAgICAgZGlyczogbnVsbCxcbiAgICAgICAgdHJhbnNpdGlvbjogbnVsbCxcbiAgICAgICAgZWw6IG51bGwsXG4gICAgICAgIGFuY2hvcjogbnVsbCxcbiAgICAgICAgdGFyZ2V0OiBudWxsLFxuICAgICAgICB0YXJnZXRBbmNob3I6IG51bGwsXG4gICAgICAgIHN0YXRpY0NvdW50OiAwLFxuICAgICAgICBzaGFwZUZsYWcsXG4gICAgICAgIHBhdGNoRmxhZyxcbiAgICAgICAgZHluYW1pY1Byb3BzLFxuICAgICAgICBkeW5hbWljQ2hpbGRyZW46IG51bGwsXG4gICAgICAgIGFwcENvbnRleHQ6IG51bGwsXG4gICAgICAgIGN0eDogY3VycmVudFJlbmRlcmluZ0luc3RhbmNlXG4gICAgfTtcbiAgICBpZiAobmVlZEZ1bGxDaGlsZHJlbk5vcm1hbGl6YXRpb24pIHtcbiAgICAgICAgbm9ybWFsaXplQ2hpbGRyZW4odm5vZGUsIGNoaWxkcmVuKTtcbiAgICAgICAgLy8gbm9ybWFsaXplIHN1c3BlbnNlIGNoaWxkcmVuXG4gICAgICAgIGlmIChzaGFwZUZsYWcgJiAxMjggLyogU2hhcGVGbGFncy5TVVNQRU5TRSAqLykge1xuICAgICAgICAgICAgdHlwZS5ub3JtYWxpemUodm5vZGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGNoaWxkcmVuKSB7XG4gICAgICAgIC8vIGNvbXBpbGVkIGVsZW1lbnQgdm5vZGUgLSBpZiBjaGlsZHJlbiBpcyBwYXNzZWQsIG9ubHkgcG9zc2libGUgdHlwZXMgYXJlXG4gICAgICAgIC8vIHN0cmluZyBvciBBcnJheS5cbiAgICAgICAgdm5vZGUuc2hhcGVGbGFnIHw9IGlzU3RyaW5nKGNoaWxkcmVuKVxuICAgICAgICAgICAgPyA4IC8qIFNoYXBlRmxhZ3MuVEVYVF9DSElMRFJFTiAqL1xuICAgICAgICAgICAgOiAxNiAvKiBTaGFwZUZsYWdzLkFSUkFZX0NISUxEUkVOICovO1xuICAgIH1cbiAgICAvLyB2YWxpZGF0ZSBrZXlcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIHZub2RlLmtleSAhPT0gdm5vZGUua2V5KSB7XG4gICAgICAgIHdhcm4oYFZOb2RlIGNyZWF0ZWQgd2l0aCBpbnZhbGlkIGtleSAoTmFOKS4gVk5vZGUgdHlwZTpgLCB2bm9kZS50eXBlKTtcbiAgICB9XG4gICAgLy8gdHJhY2sgdm5vZGUgZm9yIGJsb2NrIHRyZWVcbiAgICBpZiAoaXNCbG9ja1RyZWVFbmFibGVkID4gMCAmJlxuICAgICAgICAvLyBhdm9pZCBhIGJsb2NrIG5vZGUgZnJvbSB0cmFja2luZyBpdHNlbGZcbiAgICAgICAgIWlzQmxvY2tOb2RlICYmXG4gICAgICAgIC8vIGhhcyBjdXJyZW50IHBhcmVudCBibG9ja1xuICAgICAgICBjdXJyZW50QmxvY2sgJiZcbiAgICAgICAgLy8gcHJlc2VuY2Ugb2YgYSBwYXRjaCBmbGFnIGluZGljYXRlcyB0aGlzIG5vZGUgbmVlZHMgcGF0Y2hpbmcgb24gdXBkYXRlcy5cbiAgICAgICAgLy8gY29tcG9uZW50IG5vZGVzIGFsc28gc2hvdWxkIGFsd2F5cyBiZSBwYXRjaGVkLCBiZWNhdXNlIGV2ZW4gaWYgdGhlXG4gICAgICAgIC8vIGNvbXBvbmVudCBkb2Vzbid0IG5lZWQgdG8gdXBkYXRlLCBpdCBuZWVkcyB0byBwZXJzaXN0IHRoZSBpbnN0YW5jZSBvbiB0b1xuICAgICAgICAvLyB0aGUgbmV4dCB2bm9kZSBzbyB0aGF0IGl0IGNhbiBiZSBwcm9wZXJseSB1bm1vdW50ZWQgbGF0ZXIuXG4gICAgICAgICh2bm9kZS5wYXRjaEZsYWcgPiAwIHx8IHNoYXBlRmxhZyAmIDYgLyogU2hhcGVGbGFncy5DT01QT05FTlQgKi8pICYmXG4gICAgICAgIC8vIHRoZSBFVkVOVFMgZmxhZyBpcyBvbmx5IGZvciBoeWRyYXRpb24gYW5kIGlmIGl0IGlzIHRoZSBvbmx5IGZsYWcsIHRoZVxuICAgICAgICAvLyB2bm9kZSBzaG91bGQgbm90IGJlIGNvbnNpZGVyZWQgZHluYW1pYyBkdWUgdG8gaGFuZGxlciBjYWNoaW5nLlxuICAgICAgICB2bm9kZS5wYXRjaEZsYWcgIT09IDMyIC8qIFBhdGNoRmxhZ3MuSFlEUkFURV9FVkVOVFMgKi8pIHtcbiAgICAgICAgY3VycmVudEJsb2NrLnB1c2godm5vZGUpO1xuICAgIH1cbiAgICByZXR1cm4gdm5vZGU7XG59XG5jb25zdCBjcmVhdGVWTm9kZSA9ICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyBjcmVhdGVWTm9kZVdpdGhBcmdzVHJhbnNmb3JtIDogX2NyZWF0ZVZOb2RlKTtcbmZ1bmN0aW9uIF9jcmVhdGVWTm9kZSh0eXBlLCBwcm9wcyA9IG51bGwsIGNoaWxkcmVuID0gbnVsbCwgcGF0Y2hGbGFnID0gMCwgZHluYW1pY1Byb3BzID0gbnVsbCwgaXNCbG9ja05vZGUgPSBmYWxzZSkge1xuICAgIGlmICghdHlwZSB8fCB0eXBlID09PSBOVUxMX0RZTkFNSUNfQ09NUE9ORU5UKSB7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIXR5cGUpIHtcbiAgICAgICAgICAgIHdhcm4oYEludmFsaWQgdm5vZGUgdHlwZSB3aGVuIGNyZWF0aW5nIHZub2RlOiAke3R5cGV9LmApO1xuICAgICAgICB9XG4gICAgICAgIHR5cGUgPSBDb21tZW50O1xuICAgIH1cbiAgICBpZiAoaXNWTm9kZSh0eXBlKSkge1xuICAgICAgICAvLyBjcmVhdGVWTm9kZSByZWNlaXZpbmcgYW4gZXhpc3Rpbmcgdm5vZGUuIFRoaXMgaGFwcGVucyBpbiBjYXNlcyBsaWtlXG4gICAgICAgIC8vIDxjb21wb25lbnQgOmlzPVwidm5vZGVcIi8+XG4gICAgICAgIC8vICMyMDc4IG1ha2Ugc3VyZSB0byBtZXJnZSByZWZzIGR1cmluZyB0aGUgY2xvbmUgaW5zdGVhZCBvZiBvdmVyd3JpdGluZyBpdFxuICAgICAgICBjb25zdCBjbG9uZWQgPSBjbG9uZVZOb2RlKHR5cGUsIHByb3BzLCB0cnVlIC8qIG1lcmdlUmVmOiB0cnVlICovKTtcbiAgICAgICAgaWYgKGNoaWxkcmVuKSB7XG4gICAgICAgICAgICBub3JtYWxpemVDaGlsZHJlbihjbG9uZWQsIGNoaWxkcmVuKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNCbG9ja1RyZWVFbmFibGVkID4gMCAmJiAhaXNCbG9ja05vZGUgJiYgY3VycmVudEJsb2NrKSB7XG4gICAgICAgICAgICBpZiAoY2xvbmVkLnNoYXBlRmxhZyAmIDYgLyogU2hhcGVGbGFncy5DT01QT05FTlQgKi8pIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50QmxvY2tbY3VycmVudEJsb2NrLmluZGV4T2YodHlwZSldID0gY2xvbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY3VycmVudEJsb2NrLnB1c2goY2xvbmVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjbG9uZWQucGF0Y2hGbGFnIHw9IC0yIC8qIFBhdGNoRmxhZ3MuQkFJTCAqLztcbiAgICAgICAgcmV0dXJuIGNsb25lZDtcbiAgICB9XG4gICAgLy8gY2xhc3MgY29tcG9uZW50IG5vcm1hbGl6YXRpb24uXG4gICAgaWYgKGlzQ2xhc3NDb21wb25lbnQodHlwZSkpIHtcbiAgICAgICAgdHlwZSA9IHR5cGUuX192Y2NPcHRzO1xuICAgIH1cbiAgICAvLyBjbGFzcyAmIHN0eWxlIG5vcm1hbGl6YXRpb24uXG4gICAgaWYgKHByb3BzKSB7XG4gICAgICAgIC8vIGZvciByZWFjdGl2ZSBvciBwcm94eSBvYmplY3RzLCB3ZSBuZWVkIHRvIGNsb25lIGl0IHRvIGVuYWJsZSBtdXRhdGlvbi5cbiAgICAgICAgcHJvcHMgPSBndWFyZFJlYWN0aXZlUHJvcHMocHJvcHMpO1xuICAgICAgICBsZXQgeyBjbGFzczoga2xhc3MsIHN0eWxlIH0gPSBwcm9wcztcbiAgICAgICAgaWYgKGtsYXNzICYmICFpc1N0cmluZyhrbGFzcykpIHtcbiAgICAgICAgICAgIHByb3BzLmNsYXNzID0gbm9ybWFsaXplQ2xhc3Moa2xhc3MpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc09iamVjdChzdHlsZSkpIHtcbiAgICAgICAgICAgIC8vIHJlYWN0aXZlIHN0YXRlIG9iamVjdHMgbmVlZCB0byBiZSBjbG9uZWQgc2luY2UgdGhleSBhcmUgbGlrZWx5IHRvIGJlXG4gICAgICAgICAgICAvLyBtdXRhdGVkXG4gICAgICAgICAgICBpZiAoaXNQcm94eShzdHlsZSkgJiYgIWlzQXJyYXkoc3R5bGUpKSB7XG4gICAgICAgICAgICAgICAgc3R5bGUgPSBleHRlbmQoe30sIHN0eWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByb3BzLnN0eWxlID0gbm9ybWFsaXplU3R5bGUoc3R5bGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIGVuY29kZSB0aGUgdm5vZGUgdHlwZSBpbmZvcm1hdGlvbiBpbnRvIGEgYml0bWFwXG4gICAgY29uc3Qgc2hhcGVGbGFnID0gaXNTdHJpbmcodHlwZSlcbiAgICAgICAgPyAxIC8qIFNoYXBlRmxhZ3MuRUxFTUVOVCAqL1xuICAgICAgICA6IGlzU3VzcGVuc2UodHlwZSlcbiAgICAgICAgICAgID8gMTI4IC8qIFNoYXBlRmxhZ3MuU1VTUEVOU0UgKi9cbiAgICAgICAgICAgIDogaXNUZWxlcG9ydCh0eXBlKVxuICAgICAgICAgICAgICAgID8gNjQgLyogU2hhcGVGbGFncy5URUxFUE9SVCAqL1xuICAgICAgICAgICAgICAgIDogaXNPYmplY3QodHlwZSlcbiAgICAgICAgICAgICAgICAgICAgPyA0IC8qIFNoYXBlRmxhZ3MuU1RBVEVGVUxfQ09NUE9ORU5UICovXG4gICAgICAgICAgICAgICAgICAgIDogaXNGdW5jdGlvbih0eXBlKVxuICAgICAgICAgICAgICAgICAgICAgICAgPyAyIC8qIFNoYXBlRmxhZ3MuRlVOQ1RJT05BTF9DT01QT05FTlQgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIDogMDtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIHNoYXBlRmxhZyAmIDQgLyogU2hhcGVGbGFncy5TVEFURUZVTF9DT01QT05FTlQgKi8gJiYgaXNQcm94eSh0eXBlKSkge1xuICAgICAgICB0eXBlID0gdG9SYXcodHlwZSk7XG4gICAgICAgIHdhcm4oYFZ1ZSByZWNlaXZlZCBhIENvbXBvbmVudCB3aGljaCB3YXMgbWFkZSBhIHJlYWN0aXZlIG9iamVjdC4gVGhpcyBjYW4gYCArXG4gICAgICAgICAgICBgbGVhZCB0byB1bm5lY2Vzc2FyeSBwZXJmb3JtYW5jZSBvdmVyaGVhZCwgYW5kIHNob3VsZCBiZSBhdm9pZGVkIGJ5IGAgK1xuICAgICAgICAgICAgYG1hcmtpbmcgdGhlIGNvbXBvbmVudCB3aXRoIFxcYG1hcmtSYXdcXGAgb3IgdXNpbmcgXFxgc2hhbGxvd1JlZlxcYCBgICtcbiAgICAgICAgICAgIGBpbnN0ZWFkIG9mIFxcYHJlZlxcYC5gLCBgXFxuQ29tcG9uZW50IHRoYXQgd2FzIG1hZGUgcmVhY3RpdmU6IGAsIHR5cGUpO1xuICAgIH1cbiAgICByZXR1cm4gY3JlYXRlQmFzZVZOb2RlKHR5cGUsIHByb3BzLCBjaGlsZHJlbiwgcGF0Y2hGbGFnLCBkeW5hbWljUHJvcHMsIHNoYXBlRmxhZywgaXNCbG9ja05vZGUsIHRydWUpO1xufVxuZnVuY3Rpb24gZ3VhcmRSZWFjdGl2ZVByb3BzKHByb3BzKSB7XG4gICAgaWYgKCFwcm9wcylcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIGlzUHJveHkocHJvcHMpIHx8IEludGVybmFsT2JqZWN0S2V5IGluIHByb3BzXG4gICAgICAgID8gZXh0ZW5kKHt9LCBwcm9wcylcbiAgICAgICAgOiBwcm9wcztcbn1cbmZ1bmN0aW9uIGNsb25lVk5vZGUodm5vZGUsIGV4dHJhUHJvcHMsIG1lcmdlUmVmID0gZmFsc2UpIHtcbiAgICAvLyBUaGlzIGlzIGludGVudGlvbmFsbHkgTk9UIHVzaW5nIHNwcmVhZCBvciBleHRlbmQgdG8gYXZvaWQgdGhlIHJ1bnRpbWVcbiAgICAvLyBrZXkgZW51bWVyYXRpb24gY29zdC5cbiAgICBjb25zdCB7IHByb3BzLCByZWYsIHBhdGNoRmxhZywgY2hpbGRyZW4gfSA9IHZub2RlO1xuICAgIGNvbnN0IG1lcmdlZFByb3BzID0gZXh0cmFQcm9wcyA/IG1lcmdlUHJvcHMocHJvcHMgfHwge30sIGV4dHJhUHJvcHMpIDogcHJvcHM7XG4gICAgY29uc3QgY2xvbmVkID0ge1xuICAgICAgICBfX3ZfaXNWTm9kZTogdHJ1ZSxcbiAgICAgICAgX192X3NraXA6IHRydWUsXG4gICAgICAgIHR5cGU6IHZub2RlLnR5cGUsXG4gICAgICAgIHByb3BzOiBtZXJnZWRQcm9wcyxcbiAgICAgICAga2V5OiBtZXJnZWRQcm9wcyAmJiBub3JtYWxpemVLZXkobWVyZ2VkUHJvcHMpLFxuICAgICAgICByZWY6IGV4dHJhUHJvcHMgJiYgZXh0cmFQcm9wcy5yZWZcbiAgICAgICAgICAgID8gLy8gIzIwNzggaW4gdGhlIGNhc2Ugb2YgPGNvbXBvbmVudCA6aXM9XCJ2bm9kZVwiIHJlZj1cImV4dHJhXCIvPlxuICAgICAgICAgICAgICAgIC8vIGlmIHRoZSB2bm9kZSBpdHNlbGYgYWxyZWFkeSBoYXMgYSByZWYsIGNsb25lVk5vZGUgd2lsbCBuZWVkIHRvIG1lcmdlXG4gICAgICAgICAgICAgICAgLy8gdGhlIHJlZnMgc28gdGhlIHNpbmdsZSB2bm9kZSBjYW4gYmUgc2V0IG9uIG11bHRpcGxlIHJlZnNcbiAgICAgICAgICAgICAgICBtZXJnZVJlZiAmJiByZWZcbiAgICAgICAgICAgICAgICAgICAgPyBpc0FycmF5KHJlZilcbiAgICAgICAgICAgICAgICAgICAgICAgID8gcmVmLmNvbmNhdChub3JtYWxpemVSZWYoZXh0cmFQcm9wcykpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IFtyZWYsIG5vcm1hbGl6ZVJlZihleHRyYVByb3BzKV1cbiAgICAgICAgICAgICAgICAgICAgOiBub3JtYWxpemVSZWYoZXh0cmFQcm9wcylcbiAgICAgICAgICAgIDogcmVmLFxuICAgICAgICBzY29wZUlkOiB2bm9kZS5zY29wZUlkLFxuICAgICAgICBzbG90U2NvcGVJZHM6IHZub2RlLnNsb3RTY29wZUlkcyxcbiAgICAgICAgY2hpbGRyZW46IChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBwYXRjaEZsYWcgPT09IC0xIC8qIFBhdGNoRmxhZ3MuSE9JU1RFRCAqLyAmJiBpc0FycmF5KGNoaWxkcmVuKVxuICAgICAgICAgICAgPyBjaGlsZHJlbi5tYXAoZGVlcENsb25lVk5vZGUpXG4gICAgICAgICAgICA6IGNoaWxkcmVuLFxuICAgICAgICB0YXJnZXQ6IHZub2RlLnRhcmdldCxcbiAgICAgICAgdGFyZ2V0QW5jaG9yOiB2bm9kZS50YXJnZXRBbmNob3IsXG4gICAgICAgIHN0YXRpY0NvdW50OiB2bm9kZS5zdGF0aWNDb3VudCxcbiAgICAgICAgc2hhcGVGbGFnOiB2bm9kZS5zaGFwZUZsYWcsXG4gICAgICAgIC8vIGlmIHRoZSB2bm9kZSBpcyBjbG9uZWQgd2l0aCBleHRyYSBwcm9wcywgd2UgY2FuIG5vIGxvbmdlciBhc3N1bWUgaXRzXG4gICAgICAgIC8vIGV4aXN0aW5nIHBhdGNoIGZsYWcgdG8gYmUgcmVsaWFibGUgYW5kIG5lZWQgdG8gYWRkIHRoZSBGVUxMX1BST1BTIGZsYWcuXG4gICAgICAgIC8vIG5vdGU6IHByZXNlcnZlIGZsYWcgZm9yIGZyYWdtZW50cyBzaW5jZSB0aGV5IHVzZSB0aGUgZmxhZyBmb3IgY2hpbGRyZW5cbiAgICAgICAgLy8gZmFzdCBwYXRocyBvbmx5LlxuICAgICAgICBwYXRjaEZsYWc6IGV4dHJhUHJvcHMgJiYgdm5vZGUudHlwZSAhPT0gRnJhZ21lbnRcbiAgICAgICAgICAgID8gcGF0Y2hGbGFnID09PSAtMSAvLyBob2lzdGVkIG5vZGVcbiAgICAgICAgICAgICAgICA/IDE2IC8qIFBhdGNoRmxhZ3MuRlVMTF9QUk9QUyAqL1xuICAgICAgICAgICAgICAgIDogcGF0Y2hGbGFnIHwgMTYgLyogUGF0Y2hGbGFncy5GVUxMX1BST1BTICovXG4gICAgICAgICAgICA6IHBhdGNoRmxhZyxcbiAgICAgICAgZHluYW1pY1Byb3BzOiB2bm9kZS5keW5hbWljUHJvcHMsXG4gICAgICAgIGR5bmFtaWNDaGlsZHJlbjogdm5vZGUuZHluYW1pY0NoaWxkcmVuLFxuICAgICAgICBhcHBDb250ZXh0OiB2bm9kZS5hcHBDb250ZXh0LFxuICAgICAgICBkaXJzOiB2bm9kZS5kaXJzLFxuICAgICAgICB0cmFuc2l0aW9uOiB2bm9kZS50cmFuc2l0aW9uLFxuICAgICAgICAvLyBUaGVzZSBzaG91bGQgdGVjaG5pY2FsbHkgb25seSBiZSBub24tbnVsbCBvbiBtb3VudGVkIFZOb2Rlcy4gSG93ZXZlcixcbiAgICAgICAgLy8gdGhleSAqc2hvdWxkKiBiZSBjb3BpZWQgZm9yIGtlcHQtYWxpdmUgdm5vZGVzLiBTbyB3ZSBqdXN0IGFsd2F5cyBjb3B5XG4gICAgICAgIC8vIHRoZW0gc2luY2UgdGhlbSBiZWluZyBub24tbnVsbCBkdXJpbmcgYSBtb3VudCBkb2Vzbid0IGFmZmVjdCB0aGUgbG9naWMgYXNcbiAgICAgICAgLy8gdGhleSB3aWxsIHNpbXBseSBiZSBvdmVyd3JpdHRlbi5cbiAgICAgICAgY29tcG9uZW50OiB2bm9kZS5jb21wb25lbnQsXG4gICAgICAgIHN1c3BlbnNlOiB2bm9kZS5zdXNwZW5zZSxcbiAgICAgICAgc3NDb250ZW50OiB2bm9kZS5zc0NvbnRlbnQgJiYgY2xvbmVWTm9kZSh2bm9kZS5zc0NvbnRlbnQpLFxuICAgICAgICBzc0ZhbGxiYWNrOiB2bm9kZS5zc0ZhbGxiYWNrICYmIGNsb25lVk5vZGUodm5vZGUuc3NGYWxsYmFjayksXG4gICAgICAgIGVsOiB2bm9kZS5lbCxcbiAgICAgICAgYW5jaG9yOiB2bm9kZS5hbmNob3IsXG4gICAgICAgIGN0eDogdm5vZGUuY3R4XG4gICAgfTtcbiAgICByZXR1cm4gY2xvbmVkO1xufVxuLyoqXG4gKiBEZXYgb25seSwgZm9yIEhNUiBvZiBob2lzdGVkIHZub2RlcyByZXVzZWQgaW4gdi1mb3JcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS92aXRlanMvdml0ZS9pc3N1ZXMvMjAyMlxuICovXG5mdW5jdGlvbiBkZWVwQ2xvbmVWTm9kZSh2bm9kZSkge1xuICAgIGNvbnN0IGNsb25lZCA9IGNsb25lVk5vZGUodm5vZGUpO1xuICAgIGlmIChpc0FycmF5KHZub2RlLmNoaWxkcmVuKSkge1xuICAgICAgICBjbG9uZWQuY2hpbGRyZW4gPSB2bm9kZS5jaGlsZHJlbi5tYXAoZGVlcENsb25lVk5vZGUpO1xuICAgIH1cbiAgICByZXR1cm4gY2xvbmVkO1xufVxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBjcmVhdGVUZXh0Vk5vZGUodGV4dCA9ICcgJywgZmxhZyA9IDApIHtcbiAgICByZXR1cm4gY3JlYXRlVk5vZGUoVGV4dCwgbnVsbCwgdGV4dCwgZmxhZyk7XG59XG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVN0YXRpY1ZOb2RlKGNvbnRlbnQsIG51bWJlck9mTm9kZXMpIHtcbiAgICAvLyBBIHN0YXRpYyB2bm9kZSBjYW4gY29udGFpbiBtdWx0aXBsZSBzdHJpbmdpZmllZCBlbGVtZW50cywgYW5kIHRoZSBudW1iZXJcbiAgICAvLyBvZiBlbGVtZW50cyBpcyBuZWNlc3NhcnkgZm9yIGh5ZHJhdGlvbi5cbiAgICBjb25zdCB2bm9kZSA9IGNyZWF0ZVZOb2RlKFN0YXRpYywgbnVsbCwgY29udGVudCk7XG4gICAgdm5vZGUuc3RhdGljQ291bnQgPSBudW1iZXJPZk5vZGVzO1xuICAgIHJldHVybiB2bm9kZTtcbn1cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlQ29tbWVudFZOb2RlKHRleHQgPSAnJywgXG4vLyB3aGVuIHVzZWQgYXMgdGhlIHYtZWxzZSBicmFuY2gsIHRoZSBjb21tZW50IG5vZGUgbXVzdCBiZSBjcmVhdGVkIGFzIGFcbi8vIGJsb2NrIHRvIGVuc3VyZSBjb3JyZWN0IHVwZGF0ZXMuXG5hc0Jsb2NrID0gZmFsc2UpIHtcbiAgICByZXR1cm4gYXNCbG9ja1xuICAgICAgICA/IChvcGVuQmxvY2soKSwgY3JlYXRlQmxvY2soQ29tbWVudCwgbnVsbCwgdGV4dCkpXG4gICAgICAgIDogY3JlYXRlVk5vZGUoQ29tbWVudCwgbnVsbCwgdGV4dCk7XG59XG5mdW5jdGlvbiBub3JtYWxpemVWTm9kZShjaGlsZCkge1xuICAgIGlmIChjaGlsZCA9PSBudWxsIHx8IHR5cGVvZiBjaGlsZCA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIC8vIGVtcHR5IHBsYWNlaG9sZGVyXG4gICAgICAgIHJldHVybiBjcmVhdGVWTm9kZShDb21tZW50KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNBcnJheShjaGlsZCkpIHtcbiAgICAgICAgLy8gZnJhZ21lbnRcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVZOb2RlKEZyYWdtZW50LCBudWxsLCBcbiAgICAgICAgLy8gIzM2NjYsIGF2b2lkIHJlZmVyZW5jZSBwb2xsdXRpb24gd2hlbiByZXVzaW5nIHZub2RlXG4gICAgICAgIGNoaWxkLnNsaWNlKCkpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgY2hpbGQgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIC8vIGFscmVhZHkgdm5vZGUsIHRoaXMgc2hvdWxkIGJlIHRoZSBtb3N0IGNvbW1vbiBzaW5jZSBjb21waWxlZCB0ZW1wbGF0ZXNcbiAgICAgICAgLy8gYWx3YXlzIHByb2R1Y2UgYWxsLXZub2RlIGNoaWxkcmVuIGFycmF5c1xuICAgICAgICByZXR1cm4gY2xvbmVJZk1vdW50ZWQoY2hpbGQpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gc3RyaW5ncyBhbmQgbnVtYmVyc1xuICAgICAgICByZXR1cm4gY3JlYXRlVk5vZGUoVGV4dCwgbnVsbCwgU3RyaW5nKGNoaWxkKSk7XG4gICAgfVxufVxuLy8gb3B0aW1pemVkIG5vcm1hbGl6YXRpb24gZm9yIHRlbXBsYXRlLWNvbXBpbGVkIHJlbmRlciBmbnNcbmZ1bmN0aW9uIGNsb25lSWZNb3VudGVkKGNoaWxkKSB7XG4gICAgcmV0dXJuIChjaGlsZC5lbCA9PT0gbnVsbCAmJiBjaGlsZC5wYXRjaEZsYWcgIT09IC0xIC8qIFBhdGNoRmxhZ3MuSE9JU1RFRCAqLykgfHxcbiAgICAgICAgY2hpbGQubWVtb1xuICAgICAgICA/IGNoaWxkXG4gICAgICAgIDogY2xvbmVWTm9kZShjaGlsZCk7XG59XG5mdW5jdGlvbiBub3JtYWxpemVDaGlsZHJlbih2bm9kZSwgY2hpbGRyZW4pIHtcbiAgICBsZXQgdHlwZSA9IDA7XG4gICAgY29uc3QgeyBzaGFwZUZsYWcgfSA9IHZub2RlO1xuICAgIGlmIChjaGlsZHJlbiA9PSBudWxsKSB7XG4gICAgICAgIGNoaWxkcmVuID0gbnVsbDtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNBcnJheShjaGlsZHJlbikpIHtcbiAgICAgICAgdHlwZSA9IDE2IC8qIFNoYXBlRmxhZ3MuQVJSQVlfQ0hJTERSRU4gKi87XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBjaGlsZHJlbiA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgaWYgKHNoYXBlRmxhZyAmICgxIC8qIFNoYXBlRmxhZ3MuRUxFTUVOVCAqLyB8IDY0IC8qIFNoYXBlRmxhZ3MuVEVMRVBPUlQgKi8pKSB7XG4gICAgICAgICAgICAvLyBOb3JtYWxpemUgc2xvdCB0byBwbGFpbiBjaGlsZHJlbiBmb3IgcGxhaW4gZWxlbWVudCBhbmQgVGVsZXBvcnRcbiAgICAgICAgICAgIGNvbnN0IHNsb3QgPSBjaGlsZHJlbi5kZWZhdWx0O1xuICAgICAgICAgICAgaWYgKHNsb3QpIHtcbiAgICAgICAgICAgICAgICAvLyBfYyBtYXJrZXIgaXMgYWRkZWQgYnkgd2l0aEN0eCgpIGluZGljYXRpbmcgdGhpcyBpcyBhIGNvbXBpbGVkIHNsb3RcbiAgICAgICAgICAgICAgICBzbG90Ll9jICYmIChzbG90Ll9kID0gZmFsc2UpO1xuICAgICAgICAgICAgICAgIG5vcm1hbGl6ZUNoaWxkcmVuKHZub2RlLCBzbG90KCkpO1xuICAgICAgICAgICAgICAgIHNsb3QuX2MgJiYgKHNsb3QuX2QgPSB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHR5cGUgPSAzMiAvKiBTaGFwZUZsYWdzLlNMT1RTX0NISUxEUkVOICovO1xuICAgICAgICAgICAgY29uc3Qgc2xvdEZsYWcgPSBjaGlsZHJlbi5fO1xuICAgICAgICAgICAgaWYgKCFzbG90RmxhZyAmJiAhKEludGVybmFsT2JqZWN0S2V5IGluIGNoaWxkcmVuKSkge1xuICAgICAgICAgICAgICAgIGNoaWxkcmVuLl9jdHggPSBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzbG90RmxhZyA9PT0gMyAvKiBTbG90RmxhZ3MuRk9SV0FSREVEICovICYmIGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgIC8vIGEgY2hpbGQgY29tcG9uZW50IHJlY2VpdmVzIGZvcndhcmRlZCBzbG90cyBmcm9tIHRoZSBwYXJlbnQuXG4gICAgICAgICAgICAgICAgLy8gaXRzIHNsb3QgdHlwZSBpcyBkZXRlcm1pbmVkIGJ5IGl0cyBwYXJlbnQncyBzbG90IHR5cGUuXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZS5zbG90cy5fID09PSAxIC8qIFNsb3RGbGFncy5TVEFCTEUgKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW4uXyA9IDEgLyogU2xvdEZsYWdzLlNUQUJMRSAqLztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuLl8gPSAyIC8qIFNsb3RGbGFncy5EWU5BTUlDICovO1xuICAgICAgICAgICAgICAgICAgICB2bm9kZS5wYXRjaEZsYWcgfD0gMTAyNCAvKiBQYXRjaEZsYWdzLkRZTkFNSUNfU0xPVFMgKi87XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzRnVuY3Rpb24oY2hpbGRyZW4pKSB7XG4gICAgICAgIGNoaWxkcmVuID0geyBkZWZhdWx0OiBjaGlsZHJlbiwgX2N0eDogY3VycmVudFJlbmRlcmluZ0luc3RhbmNlIH07XG4gICAgICAgIHR5cGUgPSAzMiAvKiBTaGFwZUZsYWdzLlNMT1RTX0NISUxEUkVOICovO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY2hpbGRyZW4gPSBTdHJpbmcoY2hpbGRyZW4pO1xuICAgICAgICAvLyBmb3JjZSB0ZWxlcG9ydCBjaGlsZHJlbiB0byBhcnJheSBzbyBpdCBjYW4gYmUgbW92ZWQgYXJvdW5kXG4gICAgICAgIGlmIChzaGFwZUZsYWcgJiA2NCAvKiBTaGFwZUZsYWdzLlRFTEVQT1JUICovKSB7XG4gICAgICAgICAgICB0eXBlID0gMTYgLyogU2hhcGVGbGFncy5BUlJBWV9DSElMRFJFTiAqLztcbiAgICAgICAgICAgIGNoaWxkcmVuID0gW2NyZWF0ZVRleHRWTm9kZShjaGlsZHJlbildO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdHlwZSA9IDggLyogU2hhcGVGbGFncy5URVhUX0NISUxEUkVOICovO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZub2RlLmNoaWxkcmVuID0gY2hpbGRyZW47XG4gICAgdm5vZGUuc2hhcGVGbGFnIHw9IHR5cGU7XG59XG5mdW5jdGlvbiBtZXJnZVByb3BzKC4uLmFyZ3MpIHtcbiAgICBjb25zdCByZXQgPSB7fTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgdG9NZXJnZSA9IGFyZ3NbaV07XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHRvTWVyZ2UpIHtcbiAgICAgICAgICAgIGlmIChrZXkgPT09ICdjbGFzcycpIHtcbiAgICAgICAgICAgICAgICBpZiAocmV0LmNsYXNzICE9PSB0b01lcmdlLmNsYXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldC5jbGFzcyA9IG5vcm1hbGl6ZUNsYXNzKFtyZXQuY2xhc3MsIHRvTWVyZ2UuY2xhc3NdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChrZXkgPT09ICdzdHlsZScpIHtcbiAgICAgICAgICAgICAgICByZXQuc3R5bGUgPSBub3JtYWxpemVTdHlsZShbcmV0LnN0eWxlLCB0b01lcmdlLnN0eWxlXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpc09uKGtleSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZyA9IHJldFtrZXldO1xuICAgICAgICAgICAgICAgIGNvbnN0IGluY29taW5nID0gdG9NZXJnZVtrZXldO1xuICAgICAgICAgICAgICAgIGlmIChpbmNvbWluZyAmJlxuICAgICAgICAgICAgICAgICAgICBleGlzdGluZyAhPT0gaW5jb21pbmcgJiZcbiAgICAgICAgICAgICAgICAgICAgIShpc0FycmF5KGV4aXN0aW5nKSAmJiBleGlzdGluZy5pbmNsdWRlcyhpbmNvbWluZykpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldFtrZXldID0gZXhpc3RpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgID8gW10uY29uY2F0KGV4aXN0aW5nLCBpbmNvbWluZylcbiAgICAgICAgICAgICAgICAgICAgICAgIDogaW5jb21pbmc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoa2V5ICE9PSAnJykge1xuICAgICAgICAgICAgICAgIHJldFtrZXldID0gdG9NZXJnZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59XG5mdW5jdGlvbiBpbnZva2VWTm9kZUhvb2soaG9vaywgaW5zdGFuY2UsIHZub2RlLCBwcmV2Vk5vZGUgPSBudWxsKSB7XG4gICAgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoaG9vaywgaW5zdGFuY2UsIDcgLyogRXJyb3JDb2Rlcy5WTk9ERV9IT09LICovLCBbXG4gICAgICAgIHZub2RlLFxuICAgICAgICBwcmV2Vk5vZGVcbiAgICBdKTtcbn1cblxuY29uc3QgZW1wdHlBcHBDb250ZXh0ID0gY3JlYXRlQXBwQ29udGV4dCgpO1xubGV0IHVpZCQxID0gMDtcbmZ1bmN0aW9uIGNyZWF0ZUNvbXBvbmVudEluc3RhbmNlKHZub2RlLCBwYXJlbnQsIHN1c3BlbnNlKSB7XG4gICAgY29uc3QgdHlwZSA9IHZub2RlLnR5cGU7XG4gICAgLy8gaW5oZXJpdCBwYXJlbnQgYXBwIGNvbnRleHQgLSBvciAtIGlmIHJvb3QsIGFkb3B0IGZyb20gcm9vdCB2bm9kZVxuICAgIGNvbnN0IGFwcENvbnRleHQgPSAocGFyZW50ID8gcGFyZW50LmFwcENvbnRleHQgOiB2bm9kZS5hcHBDb250ZXh0KSB8fCBlbXB0eUFwcENvbnRleHQ7XG4gICAgY29uc3QgaW5zdGFuY2UgPSB7XG4gICAgICAgIHVpZDogdWlkJDErKyxcbiAgICAgICAgdm5vZGUsXG4gICAgICAgIHR5cGUsXG4gICAgICAgIHBhcmVudCxcbiAgICAgICAgYXBwQ29udGV4dCxcbiAgICAgICAgcm9vdDogbnVsbCxcbiAgICAgICAgbmV4dDogbnVsbCxcbiAgICAgICAgc3ViVHJlZTogbnVsbCxcbiAgICAgICAgZWZmZWN0OiBudWxsLFxuICAgICAgICB1cGRhdGU6IG51bGwsXG4gICAgICAgIHNjb3BlOiBuZXcgRWZmZWN0U2NvcGUodHJ1ZSAvKiBkZXRhY2hlZCAqLyksXG4gICAgICAgIHJlbmRlcjogbnVsbCxcbiAgICAgICAgcHJveHk6IG51bGwsXG4gICAgICAgIGV4cG9zZWQ6IG51bGwsXG4gICAgICAgIGV4cG9zZVByb3h5OiBudWxsLFxuICAgICAgICB3aXRoUHJveHk6IG51bGwsXG4gICAgICAgIHByb3ZpZGVzOiBwYXJlbnQgPyBwYXJlbnQucHJvdmlkZXMgOiBPYmplY3QuY3JlYXRlKGFwcENvbnRleHQucHJvdmlkZXMpLFxuICAgICAgICBhY2Nlc3NDYWNoZTogbnVsbCxcbiAgICAgICAgcmVuZGVyQ2FjaGU6IFtdLFxuICAgICAgICAvLyBsb2NhbCByZXNvbHZlZCBhc3NldHNcbiAgICAgICAgY29tcG9uZW50czogbnVsbCxcbiAgICAgICAgZGlyZWN0aXZlczogbnVsbCxcbiAgICAgICAgLy8gcmVzb2x2ZWQgcHJvcHMgYW5kIGVtaXRzIG9wdGlvbnNcbiAgICAgICAgcHJvcHNPcHRpb25zOiBub3JtYWxpemVQcm9wc09wdGlvbnModHlwZSwgYXBwQ29udGV4dCksXG4gICAgICAgIGVtaXRzT3B0aW9uczogbm9ybWFsaXplRW1pdHNPcHRpb25zKHR5cGUsIGFwcENvbnRleHQpLFxuICAgICAgICAvLyBlbWl0XG4gICAgICAgIGVtaXQ6IG51bGwsXG4gICAgICAgIGVtaXR0ZWQ6IG51bGwsXG4gICAgICAgIC8vIHByb3BzIGRlZmF1bHQgdmFsdWVcbiAgICAgICAgcHJvcHNEZWZhdWx0czogRU1QVFlfT0JKLFxuICAgICAgICAvLyBpbmhlcml0QXR0cnNcbiAgICAgICAgaW5oZXJpdEF0dHJzOiB0eXBlLmluaGVyaXRBdHRycyxcbiAgICAgICAgLy8gc3RhdGVcbiAgICAgICAgY3R4OiBFTVBUWV9PQkosXG4gICAgICAgIGRhdGE6IEVNUFRZX09CSixcbiAgICAgICAgcHJvcHM6IEVNUFRZX09CSixcbiAgICAgICAgYXR0cnM6IEVNUFRZX09CSixcbiAgICAgICAgc2xvdHM6IEVNUFRZX09CSixcbiAgICAgICAgcmVmczogRU1QVFlfT0JKLFxuICAgICAgICBzZXR1cFN0YXRlOiBFTVBUWV9PQkosXG4gICAgICAgIHNldHVwQ29udGV4dDogbnVsbCxcbiAgICAgICAgLy8gc3VzcGVuc2UgcmVsYXRlZFxuICAgICAgICBzdXNwZW5zZSxcbiAgICAgICAgc3VzcGVuc2VJZDogc3VzcGVuc2UgPyBzdXNwZW5zZS5wZW5kaW5nSWQgOiAwLFxuICAgICAgICBhc3luY0RlcDogbnVsbCxcbiAgICAgICAgYXN5bmNSZXNvbHZlZDogZmFsc2UsXG4gICAgICAgIC8vIGxpZmVjeWNsZSBob29rc1xuICAgICAgICAvLyBub3QgdXNpbmcgZW51bXMgaGVyZSBiZWNhdXNlIGl0IHJlc3VsdHMgaW4gY29tcHV0ZWQgcHJvcGVydGllc1xuICAgICAgICBpc01vdW50ZWQ6IGZhbHNlLFxuICAgICAgICBpc1VubW91bnRlZDogZmFsc2UsXG4gICAgICAgIGlzRGVhY3RpdmF0ZWQ6IGZhbHNlLFxuICAgICAgICBiYzogbnVsbCxcbiAgICAgICAgYzogbnVsbCxcbiAgICAgICAgYm06IG51bGwsXG4gICAgICAgIG06IG51bGwsXG4gICAgICAgIGJ1OiBudWxsLFxuICAgICAgICB1OiBudWxsLFxuICAgICAgICB1bTogbnVsbCxcbiAgICAgICAgYnVtOiBudWxsLFxuICAgICAgICBkYTogbnVsbCxcbiAgICAgICAgYTogbnVsbCxcbiAgICAgICAgcnRnOiBudWxsLFxuICAgICAgICBydGM6IG51bGwsXG4gICAgICAgIGVjOiBudWxsLFxuICAgICAgICBzcDogbnVsbFxuICAgIH07XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICBpbnN0YW5jZS5jdHggPSBjcmVhdGVEZXZSZW5kZXJDb250ZXh0KGluc3RhbmNlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGluc3RhbmNlLmN0eCA9IHsgXzogaW5zdGFuY2UgfTtcbiAgICB9XG4gICAgaW5zdGFuY2Uucm9vdCA9IHBhcmVudCA/IHBhcmVudC5yb290IDogaW5zdGFuY2U7XG4gICAgaW5zdGFuY2UuZW1pdCA9IGVtaXQkMS5iaW5kKG51bGwsIGluc3RhbmNlKTtcbiAgICAvLyBhcHBseSBjdXN0b20gZWxlbWVudCBzcGVjaWFsIGhhbmRsaW5nXG4gICAgaWYgKHZub2RlLmNlKSB7XG4gICAgICAgIHZub2RlLmNlKGluc3RhbmNlKTtcbiAgICB9XG4gICAgcmV0dXJuIGluc3RhbmNlO1xufVxubGV0IGN1cnJlbnRJbnN0YW5jZSA9IG51bGw7XG5jb25zdCBnZXRDdXJyZW50SW5zdGFuY2UgPSAoKSA9PiBjdXJyZW50SW5zdGFuY2UgfHwgY3VycmVudFJlbmRlcmluZ0luc3RhbmNlO1xuY29uc3Qgc2V0Q3VycmVudEluc3RhbmNlID0gKGluc3RhbmNlKSA9PiB7XG4gICAgY3VycmVudEluc3RhbmNlID0gaW5zdGFuY2U7XG4gICAgaW5zdGFuY2Uuc2NvcGUub24oKTtcbn07XG5jb25zdCB1bnNldEN1cnJlbnRJbnN0YW5jZSA9ICgpID0+IHtcbiAgICBjdXJyZW50SW5zdGFuY2UgJiYgY3VycmVudEluc3RhbmNlLnNjb3BlLm9mZigpO1xuICAgIGN1cnJlbnRJbnN0YW5jZSA9IG51bGw7XG59O1xuY29uc3QgaXNCdWlsdEluVGFnID0gLyojX19QVVJFX18qLyBtYWtlTWFwKCdzbG90LGNvbXBvbmVudCcpO1xuZnVuY3Rpb24gdmFsaWRhdGVDb21wb25lbnROYW1lKG5hbWUsIGNvbmZpZykge1xuICAgIGNvbnN0IGFwcElzTmF0aXZlVGFnID0gY29uZmlnLmlzTmF0aXZlVGFnIHx8IE5PO1xuICAgIGlmIChpc0J1aWx0SW5UYWcobmFtZSkgfHwgYXBwSXNOYXRpdmVUYWcobmFtZSkpIHtcbiAgICAgICAgd2FybignRG8gbm90IHVzZSBidWlsdC1pbiBvciByZXNlcnZlZCBIVE1MIGVsZW1lbnRzIGFzIGNvbXBvbmVudCBpZDogJyArIG5hbWUpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGlzU3RhdGVmdWxDb21wb25lbnQoaW5zdGFuY2UpIHtcbiAgICByZXR1cm4gaW5zdGFuY2Uudm5vZGUuc2hhcGVGbGFnICYgNCAvKiBTaGFwZUZsYWdzLlNUQVRFRlVMX0NPTVBPTkVOVCAqLztcbn1cbmxldCBpc0luU1NSQ29tcG9uZW50U2V0dXAgPSBmYWxzZTtcbmZ1bmN0aW9uIHNldHVwQ29tcG9uZW50KGluc3RhbmNlLCBpc1NTUiA9IGZhbHNlKSB7XG4gICAgaXNJblNTUkNvbXBvbmVudFNldHVwID0gaXNTU1I7XG4gICAgY29uc3QgeyBwcm9wcywgY2hpbGRyZW4gfSA9IGluc3RhbmNlLnZub2RlO1xuICAgIGNvbnN0IGlzU3RhdGVmdWwgPSBpc1N0YXRlZnVsQ29tcG9uZW50KGluc3RhbmNlKTtcbiAgICBpbml0UHJvcHMoaW5zdGFuY2UsIHByb3BzLCBpc1N0YXRlZnVsLCBpc1NTUik7XG4gICAgaW5pdFNsb3RzKGluc3RhbmNlLCBjaGlsZHJlbik7XG4gICAgY29uc3Qgc2V0dXBSZXN1bHQgPSBpc1N0YXRlZnVsXG4gICAgICAgID8gc2V0dXBTdGF0ZWZ1bENvbXBvbmVudChpbnN0YW5jZSwgaXNTU1IpXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIGlzSW5TU1JDb21wb25lbnRTZXR1cCA9IGZhbHNlO1xuICAgIHJldHVybiBzZXR1cFJlc3VsdDtcbn1cbmZ1bmN0aW9uIHNldHVwU3RhdGVmdWxDb21wb25lbnQoaW5zdGFuY2UsIGlzU1NSKSB7XG4gICAgdmFyIF9hO1xuICAgIGNvbnN0IENvbXBvbmVudCA9IGluc3RhbmNlLnR5cGU7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICBpZiAoQ29tcG9uZW50Lm5hbWUpIHtcbiAgICAgICAgICAgIHZhbGlkYXRlQ29tcG9uZW50TmFtZShDb21wb25lbnQubmFtZSwgaW5zdGFuY2UuYXBwQ29udGV4dC5jb25maWcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChDb21wb25lbnQuY29tcG9uZW50cykge1xuICAgICAgICAgICAgY29uc3QgbmFtZXMgPSBPYmplY3Qua2V5cyhDb21wb25lbnQuY29tcG9uZW50cyk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5hbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFsaWRhdGVDb21wb25lbnROYW1lKG5hbWVzW2ldLCBpbnN0YW5jZS5hcHBDb250ZXh0LmNvbmZpZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKENvbXBvbmVudC5kaXJlY3RpdmVzKSB7XG4gICAgICAgICAgICBjb25zdCBuYW1lcyA9IE9iamVjdC5rZXlzKENvbXBvbmVudC5kaXJlY3RpdmVzKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmFtZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YWxpZGF0ZURpcmVjdGl2ZU5hbWUobmFtZXNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChDb21wb25lbnQuY29tcGlsZXJPcHRpb25zICYmIGlzUnVudGltZU9ubHkoKSkge1xuICAgICAgICAgICAgd2FybihgXCJjb21waWxlck9wdGlvbnNcIiBpcyBvbmx5IHN1cHBvcnRlZCB3aGVuIHVzaW5nIGEgYnVpbGQgb2YgVnVlIHRoYXQgYCArXG4gICAgICAgICAgICAgICAgYGluY2x1ZGVzIHRoZSBydW50aW1lIGNvbXBpbGVyLiBTaW5jZSB5b3UgYXJlIHVzaW5nIGEgcnVudGltZS1vbmx5IGAgK1xuICAgICAgICAgICAgICAgIGBidWlsZCwgdGhlIG9wdGlvbnMgc2hvdWxkIGJlIHBhc3NlZCB2aWEgeW91ciBidWlsZCB0b29sIGNvbmZpZyBpbnN0ZWFkLmApO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIDAuIGNyZWF0ZSByZW5kZXIgcHJveHkgcHJvcGVydHkgYWNjZXNzIGNhY2hlXG4gICAgaW5zdGFuY2UuYWNjZXNzQ2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIC8vIDEuIGNyZWF0ZSBwdWJsaWMgaW5zdGFuY2UgLyByZW5kZXIgcHJveHlcbiAgICAvLyBhbHNvIG1hcmsgaXQgcmF3IHNvIGl0J3MgbmV2ZXIgb2JzZXJ2ZWRcbiAgICBpbnN0YW5jZS5wcm94eSA9IG1hcmtSYXcobmV3IFByb3h5KGluc3RhbmNlLmN0eCwgUHVibGljSW5zdGFuY2VQcm94eUhhbmRsZXJzKSk7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICBleHBvc2VQcm9wc09uUmVuZGVyQ29udGV4dChpbnN0YW5jZSk7XG4gICAgfVxuICAgIC8vIDIuIGNhbGwgc2V0dXAoKVxuICAgIGNvbnN0IHsgc2V0dXAgfSA9IENvbXBvbmVudDtcbiAgICBpZiAoc2V0dXApIHtcbiAgICAgICAgY29uc3Qgc2V0dXBDb250ZXh0ID0gKGluc3RhbmNlLnNldHVwQ29udGV4dCA9XG4gICAgICAgICAgICBzZXR1cC5sZW5ndGggPiAxID8gY3JlYXRlU2V0dXBDb250ZXh0KGluc3RhbmNlKSA6IG51bGwpO1xuICAgICAgICBzZXRDdXJyZW50SW5zdGFuY2UoaW5zdGFuY2UpO1xuICAgICAgICBwYXVzZVRyYWNraW5nKCk7XG4gICAgICAgIGNvbnN0IHNldHVwUmVzdWx0ID0gY2FsbFdpdGhFcnJvckhhbmRsaW5nKHNldHVwLCBpbnN0YW5jZSwgMCAvKiBFcnJvckNvZGVzLlNFVFVQX0ZVTkNUSU9OICovLCBbKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gc2hhbGxvd1JlYWRvbmx5KGluc3RhbmNlLnByb3BzKSA6IGluc3RhbmNlLnByb3BzLCBzZXR1cENvbnRleHRdKTtcbiAgICAgICAgcmVzZXRUcmFja2luZygpO1xuICAgICAgICB1bnNldEN1cnJlbnRJbnN0YW5jZSgpO1xuICAgICAgICBpZiAoaXNQcm9taXNlKHNldHVwUmVzdWx0KSkge1xuICAgICAgICAgICAgc2V0dXBSZXN1bHQudGhlbih1bnNldEN1cnJlbnRJbnN0YW5jZSwgdW5zZXRDdXJyZW50SW5zdGFuY2UpO1xuICAgICAgICAgICAgaWYgKGlzU1NSKSB7XG4gICAgICAgICAgICAgICAgLy8gcmV0dXJuIHRoZSBwcm9taXNlIHNvIHNlcnZlci1yZW5kZXJlciBjYW4gd2FpdCBvbiBpdFxuICAgICAgICAgICAgICAgIHJldHVybiBzZXR1cFJlc3VsdFxuICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzb2x2ZWRSZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlU2V0dXBSZXN1bHQoaW5zdGFuY2UsIHJlc29sdmVkUmVzdWx0LCBpc1NTUik7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBoYW5kbGVFcnJvcihlLCBpbnN0YW5jZSwgMCAvKiBFcnJvckNvZGVzLlNFVFVQX0ZVTkNUSU9OICovKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGFzeW5jIHNldHVwIHJldHVybmVkIFByb21pc2UuXG4gICAgICAgICAgICAgICAgLy8gYmFpbCBoZXJlIGFuZCB3YWl0IGZvciByZS1lbnRyeS5cbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5hc3luY0RlcCA9IHNldHVwUmVzdWx0O1xuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWluc3RhbmNlLnN1c3BlbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSAoX2EgPSBDb21wb25lbnQubmFtZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJ0Fub255bW91cyc7XG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYENvbXBvbmVudCA8JHtuYW1lfT46IHNldHVwIGZ1bmN0aW9uIHJldHVybmVkIGEgcHJvbWlzZSwgYnV0IG5vIGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYDxTdXNwZW5zZT4gYm91bmRhcnkgd2FzIGZvdW5kIGluIHRoZSBwYXJlbnQgY29tcG9uZW50IHRyZWUuIGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYEEgY29tcG9uZW50IHdpdGggYXN5bmMgc2V0dXAoKSBtdXN0IGJlIG5lc3RlZCBpbiBhIDxTdXNwZW5zZT4gYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgaW4gb3JkZXIgdG8gYmUgcmVuZGVyZWQuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaGFuZGxlU2V0dXBSZXN1bHQoaW5zdGFuY2UsIHNldHVwUmVzdWx0LCBpc1NTUik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGZpbmlzaENvbXBvbmVudFNldHVwKGluc3RhbmNlLCBpc1NTUik7XG4gICAgfVxufVxuZnVuY3Rpb24gaGFuZGxlU2V0dXBSZXN1bHQoaW5zdGFuY2UsIHNldHVwUmVzdWx0LCBpc1NTUikge1xuICAgIGlmIChpc0Z1bmN0aW9uKHNldHVwUmVzdWx0KSkge1xuICAgICAgICAvLyBzZXR1cCByZXR1cm5lZCBhbiBpbmxpbmUgcmVuZGVyIGZ1bmN0aW9uXG4gICAgICAgIGlmIChpbnN0YW5jZS50eXBlLl9fc3NySW5saW5lUmVuZGVyKSB7XG4gICAgICAgICAgICAvLyB3aGVuIHRoZSBmdW5jdGlvbidzIG5hbWUgaXMgYHNzclJlbmRlcmAgKGNvbXBpbGVkIGJ5IFNGQyBpbmxpbmUgbW9kZSksXG4gICAgICAgICAgICAvLyBzZXQgaXQgYXMgc3NyUmVuZGVyIGluc3RlYWQuXG4gICAgICAgICAgICBpbnN0YW5jZS5zc3JSZW5kZXIgPSBzZXR1cFJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGluc3RhbmNlLnJlbmRlciA9IHNldHVwUmVzdWx0O1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzT2JqZWN0KHNldHVwUmVzdWx0KSkge1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGlzVk5vZGUoc2V0dXBSZXN1bHQpKSB7XG4gICAgICAgICAgICB3YXJuKGBzZXR1cCgpIHNob3VsZCBub3QgcmV0dXJuIFZOb2RlcyBkaXJlY3RseSAtIGAgK1xuICAgICAgICAgICAgICAgIGByZXR1cm4gYSByZW5kZXIgZnVuY3Rpb24gaW5zdGVhZC5gKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBzZXR1cCByZXR1cm5lZCBiaW5kaW5ncy5cbiAgICAgICAgLy8gYXNzdW1pbmcgYSByZW5kZXIgZnVuY3Rpb24gY29tcGlsZWQgZnJvbSB0ZW1wbGF0ZSBpcyBwcmVzZW50LlxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xuICAgICAgICAgICAgaW5zdGFuY2UuZGV2dG9vbHNSYXdTZXR1cFN0YXRlID0gc2V0dXBSZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgaW5zdGFuY2Uuc2V0dXBTdGF0ZSA9IHByb3h5UmVmcyhzZXR1cFJlc3VsdCk7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgIGV4cG9zZVNldHVwU3RhdGVPblJlbmRlckNvbnRleHQoaW5zdGFuY2UpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBzZXR1cFJlc3VsdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHdhcm4oYHNldHVwKCkgc2hvdWxkIHJldHVybiBhbiBvYmplY3QuIFJlY2VpdmVkOiAke3NldHVwUmVzdWx0ID09PSBudWxsID8gJ251bGwnIDogdHlwZW9mIHNldHVwUmVzdWx0fWApO1xuICAgIH1cbiAgICBmaW5pc2hDb21wb25lbnRTZXR1cChpbnN0YW5jZSwgaXNTU1IpO1xufVxubGV0IGNvbXBpbGU7XG5sZXQgaW5zdGFsbFdpdGhQcm94eTtcbi8qKlxuICogRm9yIHJ1bnRpbWUtZG9tIHRvIHJlZ2lzdGVyIHRoZSBjb21waWxlci5cbiAqIE5vdGUgdGhlIGV4cG9ydGVkIG1ldGhvZCB1c2VzIGFueSB0byBhdm9pZCBkLnRzIHJlbHlpbmcgb24gdGhlIGNvbXBpbGVyIHR5cGVzLlxuICovXG5mdW5jdGlvbiByZWdpc3RlclJ1bnRpbWVDb21waWxlcihfY29tcGlsZSkge1xuICAgIGNvbXBpbGUgPSBfY29tcGlsZTtcbiAgICBpbnN0YWxsV2l0aFByb3h5ID0gaSA9PiB7XG4gICAgICAgIGlmIChpLnJlbmRlci5fcmMpIHtcbiAgICAgICAgICAgIGkud2l0aFByb3h5ID0gbmV3IFByb3h5KGkuY3R4LCBSdW50aW1lQ29tcGlsZWRQdWJsaWNJbnN0YW5jZVByb3h5SGFuZGxlcnMpO1xuICAgICAgICB9XG4gICAgfTtcbn1cbi8vIGRldiBvbmx5XG5jb25zdCBpc1J1bnRpbWVPbmx5ID0gKCkgPT4gIWNvbXBpbGU7XG5mdW5jdGlvbiBmaW5pc2hDb21wb25lbnRTZXR1cChpbnN0YW5jZSwgaXNTU1IsIHNraXBPcHRpb25zKSB7XG4gICAgY29uc3QgQ29tcG9uZW50ID0gaW5zdGFuY2UudHlwZTtcbiAgICAvLyB0ZW1wbGF0ZSAvIHJlbmRlciBmdW5jdGlvbiBub3JtYWxpemF0aW9uXG4gICAgLy8gY291bGQgYmUgYWxyZWFkeSBzZXQgd2hlbiByZXR1cm5lZCBmcm9tIHNldHVwKClcbiAgICBpZiAoIWluc3RhbmNlLnJlbmRlcikge1xuICAgICAgICAvLyBvbmx5IGRvIG9uLXRoZS1mbHkgY29tcGlsZSBpZiBub3QgaW4gU1NSIC0gU1NSIG9uLXRoZS1mbHkgY29tcGlsYXRpb25cbiAgICAgICAgLy8gaXMgZG9uZSBieSBzZXJ2ZXItcmVuZGVyZXJcbiAgICAgICAgaWYgKCFpc1NTUiAmJiBjb21waWxlICYmICFDb21wb25lbnQucmVuZGVyKSB7XG4gICAgICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IENvbXBvbmVudC50ZW1wbGF0ZSB8fFxuICAgICAgICAgICAgICAgIHJlc29sdmVNZXJnZWRPcHRpb25zKGluc3RhbmNlKS50ZW1wbGF0ZTtcbiAgICAgICAgICAgIGlmICh0ZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRNZWFzdXJlKGluc3RhbmNlLCBgY29tcGlsZWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB7IGlzQ3VzdG9tRWxlbWVudCwgY29tcGlsZXJPcHRpb25zIH0gPSBpbnN0YW5jZS5hcHBDb250ZXh0LmNvbmZpZztcbiAgICAgICAgICAgICAgICBjb25zdCB7IGRlbGltaXRlcnMsIGNvbXBpbGVyT3B0aW9uczogY29tcG9uZW50Q29tcGlsZXJPcHRpb25zIH0gPSBDb21wb25lbnQ7XG4gICAgICAgICAgICAgICAgY29uc3QgZmluYWxDb21waWxlck9wdGlvbnMgPSBleHRlbmQoZXh0ZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgaXNDdXN0b21FbGVtZW50LFxuICAgICAgICAgICAgICAgICAgICBkZWxpbWl0ZXJzXG4gICAgICAgICAgICAgICAgfSwgY29tcGlsZXJPcHRpb25zKSwgY29tcG9uZW50Q29tcGlsZXJPcHRpb25zKTtcbiAgICAgICAgICAgICAgICBDb21wb25lbnQucmVuZGVyID0gY29tcGlsZSh0ZW1wbGF0ZSwgZmluYWxDb21waWxlck9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgZW5kTWVhc3VyZShpbnN0YW5jZSwgYGNvbXBpbGVgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaW5zdGFuY2UucmVuZGVyID0gKENvbXBvbmVudC5yZW5kZXIgfHwgTk9PUCk7XG4gICAgICAgIC8vIGZvciBydW50aW1lLWNvbXBpbGVkIHJlbmRlciBmdW5jdGlvbnMgdXNpbmcgYHdpdGhgIGJsb2NrcywgdGhlIHJlbmRlclxuICAgICAgICAvLyBwcm94eSB1c2VkIG5lZWRzIGEgZGlmZmVyZW50IGBoYXNgIGhhbmRsZXIgd2hpY2ggaXMgbW9yZSBwZXJmb3JtYW50IGFuZFxuICAgICAgICAvLyBhbHNvIG9ubHkgYWxsb3dzIGEgd2hpdGVsaXN0IG9mIGdsb2JhbHMgdG8gZmFsbHRocm91Z2guXG4gICAgICAgIGlmIChpbnN0YWxsV2l0aFByb3h5KSB7XG4gICAgICAgICAgICBpbnN0YWxsV2l0aFByb3h5KGluc3RhbmNlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBzdXBwb3J0IGZvciAyLnggb3B0aW9uc1xuICAgIGlmIChfX1ZVRV9PUFRJT05TX0FQSV9fICYmICEoZmFsc2UgKSkge1xuICAgICAgICBzZXRDdXJyZW50SW5zdGFuY2UoaW5zdGFuY2UpO1xuICAgICAgICBwYXVzZVRyYWNraW5nKCk7XG4gICAgICAgIGFwcGx5T3B0aW9ucyhpbnN0YW5jZSk7XG4gICAgICAgIHJlc2V0VHJhY2tpbmcoKTtcbiAgICAgICAgdW5zZXRDdXJyZW50SW5zdGFuY2UoKTtcbiAgICB9XG4gICAgLy8gd2FybiBtaXNzaW5nIHRlbXBsYXRlL3JlbmRlclxuICAgIC8vIHRoZSBydW50aW1lIGNvbXBpbGF0aW9uIG9mIHRlbXBsYXRlIGluIFNTUiBpcyBkb25lIGJ5IHNlcnZlci1yZW5kZXJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFDb21wb25lbnQucmVuZGVyICYmIGluc3RhbmNlLnJlbmRlciA9PT0gTk9PUCAmJiAhaXNTU1IpIHtcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICAgIGlmICghY29tcGlsZSAmJiBDb21wb25lbnQudGVtcGxhdGUpIHtcbiAgICAgICAgICAgIHdhcm4oYENvbXBvbmVudCBwcm92aWRlZCB0ZW1wbGF0ZSBvcHRpb24gYnV0IGAgK1xuICAgICAgICAgICAgICAgIGBydW50aW1lIGNvbXBpbGF0aW9uIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBidWlsZCBvZiBWdWUuYCArXG4gICAgICAgICAgICAgICAgKGAgQ29uZmlndXJlIHlvdXIgYnVuZGxlciB0byBhbGlhcyBcInZ1ZVwiIHRvIFwidnVlL2Rpc3QvdnVlLmVzbS1idW5kbGVyLmpzXCIuYFxuICAgICAgICAgICAgICAgICAgICApIC8qIHNob3VsZCBub3QgaGFwcGVuICovKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHdhcm4oYENvbXBvbmVudCBpcyBtaXNzaW5nIHRlbXBsYXRlIG9yIHJlbmRlciBmdW5jdGlvbi5gKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGNyZWF0ZUF0dHJzUHJveHkoaW5zdGFuY2UpIHtcbiAgICByZXR1cm4gbmV3IFByb3h5KGluc3RhbmNlLmF0dHJzLCAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJylcbiAgICAgICAgPyB7XG4gICAgICAgICAgICBnZXQodGFyZ2V0LCBrZXkpIHtcbiAgICAgICAgICAgICAgICBtYXJrQXR0cnNBY2Nlc3NlZCgpO1xuICAgICAgICAgICAgICAgIHRyYWNrKGluc3RhbmNlLCBcImdldFwiIC8qIFRyYWNrT3BUeXBlcy5HRVQgKi8sICckYXR0cnMnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0W2tleV07XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0KCkge1xuICAgICAgICAgICAgICAgIHdhcm4oYHNldHVwQ29udGV4dC5hdHRycyBpcyByZWFkb25seS5gKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGVsZXRlUHJvcGVydHkoKSB7XG4gICAgICAgICAgICAgICAgd2Fybihgc2V0dXBDb250ZXh0LmF0dHJzIGlzIHJlYWRvbmx5LmApO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICA6IHtcbiAgICAgICAgICAgIGdldCh0YXJnZXQsIGtleSkge1xuICAgICAgICAgICAgICAgIHRyYWNrKGluc3RhbmNlLCBcImdldFwiIC8qIFRyYWNrT3BUeXBlcy5HRVQgKi8sICckYXR0cnMnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0W2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xufVxuZnVuY3Rpb24gY3JlYXRlU2V0dXBDb250ZXh0KGluc3RhbmNlKSB7XG4gICAgY29uc3QgZXhwb3NlID0gZXhwb3NlZCA9PiB7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgaW5zdGFuY2UuZXhwb3NlZCkge1xuICAgICAgICAgICAgd2FybihgZXhwb3NlKCkgc2hvdWxkIGJlIGNhbGxlZCBvbmx5IG9uY2UgcGVyIHNldHVwKCkuYCk7XG4gICAgICAgIH1cbiAgICAgICAgaW5zdGFuY2UuZXhwb3NlZCA9IGV4cG9zZWQgfHwge307XG4gICAgfTtcbiAgICBsZXQgYXR0cnM7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAvLyBXZSB1c2UgZ2V0dGVycyBpbiBkZXYgaW4gY2FzZSBsaWJzIGxpa2UgdGVzdC11dGlscyBvdmVyd3JpdGUgaW5zdGFuY2VcbiAgICAgICAgLy8gcHJvcGVydGllcyAob3ZlcndyaXRlcyBzaG91bGQgbm90IGJlIGRvbmUgaW4gcHJvZClcbiAgICAgICAgcmV0dXJuIE9iamVjdC5mcmVlemUoe1xuICAgICAgICAgICAgZ2V0IGF0dHJzKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhdHRycyB8fCAoYXR0cnMgPSBjcmVhdGVBdHRyc1Byb3h5KGluc3RhbmNlKSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0IHNsb3RzKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzaGFsbG93UmVhZG9ubHkoaW5zdGFuY2Uuc2xvdHMpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldCBlbWl0KCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAoZXZlbnQsIC4uLmFyZ3MpID0+IGluc3RhbmNlLmVtaXQoZXZlbnQsIC4uLmFyZ3MpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGV4cG9zZVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBnZXQgYXR0cnMoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF0dHJzIHx8IChhdHRycyA9IGNyZWF0ZUF0dHJzUHJveHkoaW5zdGFuY2UpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzbG90czogaW5zdGFuY2Uuc2xvdHMsXG4gICAgICAgICAgICBlbWl0OiBpbnN0YW5jZS5lbWl0LFxuICAgICAgICAgICAgZXhwb3NlXG4gICAgICAgIH07XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0RXhwb3NlUHJveHkoaW5zdGFuY2UpIHtcbiAgICBpZiAoaW5zdGFuY2UuZXhwb3NlZCkge1xuICAgICAgICByZXR1cm4gKGluc3RhbmNlLmV4cG9zZVByb3h5IHx8XG4gICAgICAgICAgICAoaW5zdGFuY2UuZXhwb3NlUHJveHkgPSBuZXcgUHJveHkocHJveHlSZWZzKG1hcmtSYXcoaW5zdGFuY2UuZXhwb3NlZCkpLCB7XG4gICAgICAgICAgICAgICAgZ2V0KHRhcmdldCwga2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkgaW4gdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0W2tleV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoa2V5IGluIHB1YmxpY1Byb3BlcnRpZXNNYXApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwdWJsaWNQcm9wZXJ0aWVzTWFwW2tleV0oaW5zdGFuY2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBoYXModGFyZ2V0LCBrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGtleSBpbiB0YXJnZXQgfHwga2V5IGluIHB1YmxpY1Byb3BlcnRpZXNNYXA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpKTtcbiAgICB9XG59XG5jb25zdCBjbGFzc2lmeVJFID0gLyg/Ol58Wy1fXSkoXFx3KS9nO1xuY29uc3QgY2xhc3NpZnkgPSAoc3RyKSA9PiBzdHIucmVwbGFjZShjbGFzc2lmeVJFLCBjID0+IGMudG9VcHBlckNhc2UoKSkucmVwbGFjZSgvWy1fXS9nLCAnJyk7XG5mdW5jdGlvbiBnZXRDb21wb25lbnROYW1lKENvbXBvbmVudCwgaW5jbHVkZUluZmVycmVkID0gdHJ1ZSkge1xuICAgIHJldHVybiBpc0Z1bmN0aW9uKENvbXBvbmVudClcbiAgICAgICAgPyBDb21wb25lbnQuZGlzcGxheU5hbWUgfHwgQ29tcG9uZW50Lm5hbWVcbiAgICAgICAgOiBDb21wb25lbnQubmFtZSB8fCAoaW5jbHVkZUluZmVycmVkICYmIENvbXBvbmVudC5fX25hbWUpO1xufVxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmZ1bmN0aW9uIGZvcm1hdENvbXBvbmVudE5hbWUoaW5zdGFuY2UsIENvbXBvbmVudCwgaXNSb290ID0gZmFsc2UpIHtcbiAgICBsZXQgbmFtZSA9IGdldENvbXBvbmVudE5hbWUoQ29tcG9uZW50KTtcbiAgICBpZiAoIW5hbWUgJiYgQ29tcG9uZW50Ll9fZmlsZSkge1xuICAgICAgICBjb25zdCBtYXRjaCA9IENvbXBvbmVudC5fX2ZpbGUubWF0Y2goLyhbXi9cXFxcXSspXFwuXFx3KyQvKTtcbiAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICBuYW1lID0gbWF0Y2hbMV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFuYW1lICYmIGluc3RhbmNlICYmIGluc3RhbmNlLnBhcmVudCkge1xuICAgICAgICAvLyB0cnkgdG8gaW5mZXIgdGhlIG5hbWUgYmFzZWQgb24gcmV2ZXJzZSByZXNvbHV0aW9uXG4gICAgICAgIGNvbnN0IGluZmVyRnJvbVJlZ2lzdHJ5ID0gKHJlZ2lzdHJ5KSA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiByZWdpc3RyeSkge1xuICAgICAgICAgICAgICAgIGlmIChyZWdpc3RyeVtrZXldID09PSBDb21wb25lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGtleTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIG5hbWUgPVxuICAgICAgICAgICAgaW5mZXJGcm9tUmVnaXN0cnkoaW5zdGFuY2UuY29tcG9uZW50cyB8fFxuICAgICAgICAgICAgICAgIGluc3RhbmNlLnBhcmVudC50eXBlLmNvbXBvbmVudHMpIHx8IGluZmVyRnJvbVJlZ2lzdHJ5KGluc3RhbmNlLmFwcENvbnRleHQuY29tcG9uZW50cyk7XG4gICAgfVxuICAgIHJldHVybiBuYW1lID8gY2xhc3NpZnkobmFtZSkgOiBpc1Jvb3QgPyBgQXBwYCA6IGBBbm9ueW1vdXNgO1xufVxuZnVuY3Rpb24gaXNDbGFzc0NvbXBvbmVudCh2YWx1ZSkge1xuICAgIHJldHVybiBpc0Z1bmN0aW9uKHZhbHVlKSAmJiAnX192Y2NPcHRzJyBpbiB2YWx1ZTtcbn1cblxuY29uc3QgY29tcHV0ZWQgPSAoKGdldHRlck9yT3B0aW9ucywgZGVidWdPcHRpb25zKSA9PiB7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHJldHVybiBjb21wdXRlZCQxKGdldHRlck9yT3B0aW9ucywgZGVidWdPcHRpb25zLCBpc0luU1NSQ29tcG9uZW50U2V0dXApO1xufSk7XG5cbi8vIGRldiBvbmx5XG5jb25zdCB3YXJuUnVudGltZVVzYWdlID0gKG1ldGhvZCkgPT4gd2FybihgJHttZXRob2R9KCkgaXMgYSBjb21waWxlci1oaW50IGhlbHBlciB0aGF0IGlzIG9ubHkgdXNhYmxlIGluc2lkZSBgICtcbiAgICBgPHNjcmlwdCBzZXR1cD4gb2YgYSBzaW5nbGUgZmlsZSBjb21wb25lbnQuIEl0cyBhcmd1bWVudHMgc2hvdWxkIGJlIGAgK1xuICAgIGBjb21waWxlZCBhd2F5IGFuZCBwYXNzaW5nIGl0IGF0IHJ1bnRpbWUgaGFzIG5vIGVmZmVjdC5gKTtcbi8vIGltcGxlbWVudGF0aW9uXG5mdW5jdGlvbiBkZWZpbmVQcm9wcygpIHtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIHdhcm5SdW50aW1lVXNhZ2UoYGRlZmluZVByb3BzYCk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuLy8gaW1wbGVtZW50YXRpb25cbmZ1bmN0aW9uIGRlZmluZUVtaXRzKCkge1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgd2FyblJ1bnRpbWVVc2FnZShgZGVmaW5lRW1pdHNgKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG4vKipcbiAqIFZ1ZSBgPHNjcmlwdCBzZXR1cD5gIGNvbXBpbGVyIG1hY3JvIGZvciBkZWNsYXJpbmcgYSBjb21wb25lbnQncyBleHBvc2VkXG4gKiBpbnN0YW5jZSBwcm9wZXJ0aWVzIHdoZW4gaXQgaXMgYWNjZXNzZWQgYnkgYSBwYXJlbnQgY29tcG9uZW50IHZpYSB0ZW1wbGF0ZVxuICogcmVmcy5cbiAqXG4gKiBgPHNjcmlwdCBzZXR1cD5gIGNvbXBvbmVudHMgYXJlIGNsb3NlZCBieSBkZWZhdWx0IC0gaS5lLiB2YXJpYWJsZXMgaW5zaWRlXG4gKiB0aGUgYDxzY3JpcHQgc2V0dXA+YCBzY29wZSBpcyBub3QgZXhwb3NlZCB0byBwYXJlbnQgdW5sZXNzIGV4cGxpY2l0bHkgZXhwb3NlZFxuICogdmlhIGBkZWZpbmVFeHBvc2VgLlxuICpcbiAqIFRoaXMgaXMgb25seSB1c2FibGUgaW5zaWRlIGA8c2NyaXB0IHNldHVwPmAsIGlzIGNvbXBpbGVkIGF3YXkgaW4gdGhlXG4gKiBvdXRwdXQgYW5kIHNob3VsZCAqKm5vdCoqIGJlIGFjdHVhbGx5IGNhbGxlZCBhdCBydW50aW1lLlxuICovXG5mdW5jdGlvbiBkZWZpbmVFeHBvc2UoZXhwb3NlZCkge1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgd2FyblJ1bnRpbWVVc2FnZShgZGVmaW5lRXhwb3NlYCk7XG4gICAgfVxufVxuLyoqXG4gKiBWdWUgYDxzY3JpcHQgc2V0dXA+YCBjb21waWxlciBtYWNybyBmb3IgcHJvdmlkaW5nIHByb3BzIGRlZmF1bHQgdmFsdWVzIHdoZW5cbiAqIHVzaW5nIHR5cGUtYmFzZWQgYGRlZmluZVByb3BzYCBkZWNsYXJhdGlvbi5cbiAqXG4gKiBFeGFtcGxlIHVzYWdlOlxuICogYGBgdHNcbiAqIHdpdGhEZWZhdWx0cyhkZWZpbmVQcm9wczx7XG4gKiAgIHNpemU/OiBudW1iZXJcbiAqICAgbGFiZWxzPzogc3RyaW5nW11cbiAqIH0+KCksIHtcbiAqICAgc2l6ZTogMyxcbiAqICAgbGFiZWxzOiAoKSA9PiBbJ2RlZmF1bHQgbGFiZWwnXVxuICogfSlcbiAqIGBgYFxuICpcbiAqIFRoaXMgaXMgb25seSB1c2FibGUgaW5zaWRlIGA8c2NyaXB0IHNldHVwPmAsIGlzIGNvbXBpbGVkIGF3YXkgaW4gdGhlIG91dHB1dFxuICogYW5kIHNob3VsZCAqKm5vdCoqIGJlIGFjdHVhbGx5IGNhbGxlZCBhdCBydW50aW1lLlxuICovXG5mdW5jdGlvbiB3aXRoRGVmYXVsdHMocHJvcHMsIGRlZmF1bHRzKSB7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICB3YXJuUnVudGltZVVzYWdlKGB3aXRoRGVmYXVsdHNgKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiB1c2VTbG90cygpIHtcbiAgICByZXR1cm4gZ2V0Q29udGV4dCgpLnNsb3RzO1xufVxuZnVuY3Rpb24gdXNlQXR0cnMoKSB7XG4gICAgcmV0dXJuIGdldENvbnRleHQoKS5hdHRycztcbn1cbmZ1bmN0aW9uIGdldENvbnRleHQoKSB7XG4gICAgY29uc3QgaSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpO1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWkpIHtcbiAgICAgICAgd2FybihgdXNlQ29udGV4dCgpIGNhbGxlZCB3aXRob3V0IGFjdGl2ZSBpbnN0YW5jZS5gKTtcbiAgICB9XG4gICAgcmV0dXJuIGkuc2V0dXBDb250ZXh0IHx8IChpLnNldHVwQ29udGV4dCA9IGNyZWF0ZVNldHVwQ29udGV4dChpKSk7XG59XG4vKipcbiAqIFJ1bnRpbWUgaGVscGVyIGZvciBtZXJnaW5nIGRlZmF1bHQgZGVjbGFyYXRpb25zLiBJbXBvcnRlZCBieSBjb21waWxlZCBjb2RlXG4gKiBvbmx5LlxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIG1lcmdlRGVmYXVsdHMocmF3LCBkZWZhdWx0cykge1xuICAgIGNvbnN0IHByb3BzID0gaXNBcnJheShyYXcpXG4gICAgICAgID8gcmF3LnJlZHVjZSgobm9ybWFsaXplZCwgcCkgPT4gKChub3JtYWxpemVkW3BdID0ge30pLCBub3JtYWxpemVkKSwge30pXG4gICAgICAgIDogcmF3O1xuICAgIGZvciAoY29uc3Qga2V5IGluIGRlZmF1bHRzKSB7XG4gICAgICAgIGNvbnN0IG9wdCA9IHByb3BzW2tleV07XG4gICAgICAgIGlmIChvcHQpIHtcbiAgICAgICAgICAgIGlmIChpc0FycmF5KG9wdCkgfHwgaXNGdW5jdGlvbihvcHQpKSB7XG4gICAgICAgICAgICAgICAgcHJvcHNba2V5XSA9IHsgdHlwZTogb3B0LCBkZWZhdWx0OiBkZWZhdWx0c1trZXldIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBvcHQuZGVmYXVsdCA9IGRlZmF1bHRzW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3B0ID09PSBudWxsKSB7XG4gICAgICAgICAgICBwcm9wc1trZXldID0geyBkZWZhdWx0OiBkZWZhdWx0c1trZXldIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICB3YXJuKGBwcm9wcyBkZWZhdWx0IGtleSBcIiR7a2V5fVwiIGhhcyBubyBjb3JyZXNwb25kaW5nIGRlY2xhcmF0aW9uLmApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwcm9wcztcbn1cbi8qKlxuICogVXNlZCB0byBjcmVhdGUgYSBwcm94eSBmb3IgdGhlIHJlc3QgZWxlbWVudCB3aGVuIGRlc3RydWN0dXJpbmcgcHJvcHMgd2l0aFxuICogZGVmaW5lUHJvcHMoKS5cbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBjcmVhdGVQcm9wc1Jlc3RQcm94eShwcm9wcywgZXhjbHVkZWRLZXlzKSB7XG4gICAgY29uc3QgcmV0ID0ge307XG4gICAgZm9yIChjb25zdCBrZXkgaW4gcHJvcHMpIHtcbiAgICAgICAgaWYgKCFleGNsdWRlZEtleXMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHJldCwga2V5LCB7XG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBnZXQ6ICgpID0+IHByb3BzW2tleV1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59XG4vKipcbiAqIGA8c2NyaXB0IHNldHVwPmAgaGVscGVyIGZvciBwZXJzaXN0aW5nIHRoZSBjdXJyZW50IGluc3RhbmNlIGNvbnRleHQgb3ZlclxuICogYXN5bmMvYXdhaXQgZmxvd3MuXG4gKlxuICogYEB2dWUvY29tcGlsZXItc2ZjYCBjb252ZXJ0cyB0aGUgZm9sbG93aW5nOlxuICpcbiAqIGBgYHRzXG4gKiBjb25zdCB4ID0gYXdhaXQgZm9vKClcbiAqIGBgYFxuICpcbiAqIGludG86XG4gKlxuICogYGBgdHNcbiAqIGxldCBfX3RlbXAsIF9fcmVzdG9yZVxuICogY29uc3QgeCA9ICgoW19fdGVtcCwgX19yZXN0b3JlXSA9IHdpdGhBc3luY0NvbnRleHQoKCkgPT4gZm9vKCkpKSxfX3RlbXA9YXdhaXQgX190ZW1wLF9fcmVzdG9yZSgpLF9fdGVtcClcbiAqIGBgYFxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIHdpdGhBc3luY0NvbnRleHQoZ2V0QXdhaXRhYmxlKSB7XG4gICAgY29uc3QgY3R4ID0gZ2V0Q3VycmVudEluc3RhbmNlKCk7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhY3R4KSB7XG4gICAgICAgIHdhcm4oYHdpdGhBc3luY0NvbnRleHQgY2FsbGVkIHdpdGhvdXQgYWN0aXZlIGN1cnJlbnQgaW5zdGFuY2UuIGAgK1xuICAgICAgICAgICAgYFRoaXMgaXMgbGlrZWx5IGEgYnVnLmApO1xuICAgIH1cbiAgICBsZXQgYXdhaXRhYmxlID0gZ2V0QXdhaXRhYmxlKCk7XG4gICAgdW5zZXRDdXJyZW50SW5zdGFuY2UoKTtcbiAgICBpZiAoaXNQcm9taXNlKGF3YWl0YWJsZSkpIHtcbiAgICAgICAgYXdhaXRhYmxlID0gYXdhaXRhYmxlLmNhdGNoKGUgPT4ge1xuICAgICAgICAgICAgc2V0Q3VycmVudEluc3RhbmNlKGN0eCk7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIFthd2FpdGFibGUsICgpID0+IHNldEN1cnJlbnRJbnN0YW5jZShjdHgpXTtcbn1cblxuLy8gQWN0dWFsIGltcGxlbWVudGF0aW9uXG5mdW5jdGlvbiBoKHR5cGUsIHByb3BzT3JDaGlsZHJlbiwgY2hpbGRyZW4pIHtcbiAgICBjb25zdCBsID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICBpZiAobCA9PT0gMikge1xuICAgICAgICBpZiAoaXNPYmplY3QocHJvcHNPckNoaWxkcmVuKSAmJiAhaXNBcnJheShwcm9wc09yQ2hpbGRyZW4pKSB7XG4gICAgICAgICAgICAvLyBzaW5nbGUgdm5vZGUgd2l0aG91dCBwcm9wc1xuICAgICAgICAgICAgaWYgKGlzVk5vZGUocHJvcHNPckNoaWxkcmVuKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVWTm9kZSh0eXBlLCBudWxsLCBbcHJvcHNPckNoaWxkcmVuXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBwcm9wcyB3aXRob3V0IGNoaWxkcmVuXG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlVk5vZGUodHlwZSwgcHJvcHNPckNoaWxkcmVuKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIG9taXQgcHJvcHNcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVWTm9kZSh0eXBlLCBudWxsLCBwcm9wc09yQ2hpbGRyZW4pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAobCA+IDMpIHtcbiAgICAgICAgICAgIGNoaWxkcmVuID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAzICYmIGlzVk5vZGUoY2hpbGRyZW4pKSB7XG4gICAgICAgICAgICBjaGlsZHJlbiA9IFtjaGlsZHJlbl07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNyZWF0ZVZOb2RlKHR5cGUsIHByb3BzT3JDaGlsZHJlbiwgY2hpbGRyZW4pO1xuICAgIH1cbn1cblxuY29uc3Qgc3NyQ29udGV4dEtleSA9IFN5bWJvbCgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyBgc3NyQ29udGV4dGAgOiBgYCk7XG5jb25zdCB1c2VTU1JDb250ZXh0ID0gKCkgPT4ge1xuICAgIHtcbiAgICAgICAgY29uc3QgY3R4ID0gaW5qZWN0KHNzckNvbnRleHRLZXkpO1xuICAgICAgICBpZiAoIWN0eCkge1xuICAgICAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXG4gICAgICAgICAgICAgICAgd2FybihgU2VydmVyIHJlbmRlcmluZyBjb250ZXh0IG5vdCBwcm92aWRlZC4gTWFrZSBzdXJlIHRvIG9ubHkgY2FsbCBgICtcbiAgICAgICAgICAgICAgICAgICAgYHVzZVNTUkNvbnRleHQoKSBjb25kaXRpb25hbGx5IGluIHRoZSBzZXJ2ZXIgYnVpbGQuYCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGN0eDtcbiAgICB9XG59O1xuXG5mdW5jdGlvbiBpc1NoYWxsb3codmFsdWUpIHtcbiAgICByZXR1cm4gISEodmFsdWUgJiYgdmFsdWVbXCJfX3ZfaXNTaGFsbG93XCIgLyogUmVhY3RpdmVGbGFncy5JU19TSEFMTE9XICovXSk7XG59XG5cbmZ1bmN0aW9uIGluaXRDdXN0b21Gb3JtYXR0ZXIoKSB7XG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzICovXG4gICAgaWYgKCEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgdHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB2dWVTdHlsZSA9IHsgc3R5bGU6ICdjb2xvcjojM2JhNzc2JyB9O1xuICAgIGNvbnN0IG51bWJlclN0eWxlID0geyBzdHlsZTogJ2NvbG9yOiMwYjFiYzknIH07XG4gICAgY29uc3Qgc3RyaW5nU3R5bGUgPSB7IHN0eWxlOiAnY29sb3I6I2I2MmUyNCcgfTtcbiAgICBjb25zdCBrZXl3b3JkU3R5bGUgPSB7IHN0eWxlOiAnY29sb3I6IzlkMjg4YycgfTtcbiAgICAvLyBjdXN0b20gZm9ybWF0dGVyIGZvciBDaHJvbWVcbiAgICAvLyBodHRwczovL3d3dy5tYXR0emV1bmVydC5jb20vMjAxNi8wMi8xOS9jdXN0b20tY2hyb21lLWRldnRvb2xzLW9iamVjdC1mb3JtYXR0ZXJzLmh0bWxcbiAgICBjb25zdCBmb3JtYXR0ZXIgPSB7XG4gICAgICAgIGhlYWRlcihvYmopIHtcbiAgICAgICAgICAgIC8vIFRPRE8gYWxzbyBmb3JtYXQgQ29tcG9uZW50UHVibGljSW5zdGFuY2UgJiBjdHguc2xvdHMvYXR0cnMgaW4gc2V0dXBcbiAgICAgICAgICAgIGlmICghaXNPYmplY3Qob2JqKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9iai5fX2lzVnVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsnZGl2JywgdnVlU3R5bGUsIGBWdWVJbnN0YW5jZWBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNSZWYob2JqKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7fSxcbiAgICAgICAgICAgICAgICAgICAgWydzcGFuJywgdnVlU3R5bGUsIGdlblJlZkZsYWcob2JqKV0sXG4gICAgICAgICAgICAgICAgICAgICc8JyxcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0VmFsdWUob2JqLnZhbHVlKSxcbiAgICAgICAgICAgICAgICAgICAgYD5gXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzUmVhY3RpdmUob2JqKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7fSxcbiAgICAgICAgICAgICAgICAgICAgWydzcGFuJywgdnVlU3R5bGUsIGlzU2hhbGxvdyhvYmopID8gJ1NoYWxsb3dSZWFjdGl2ZScgOiAnUmVhY3RpdmUnXSxcbiAgICAgICAgICAgICAgICAgICAgJzwnLFxuICAgICAgICAgICAgICAgICAgICBmb3JtYXRWYWx1ZShvYmopLFxuICAgICAgICAgICAgICAgICAgICBgPiR7aXNSZWFkb25seShvYmopID8gYCAocmVhZG9ubHkpYCA6IGBgfWBcbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNSZWFkb25seShvYmopKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHt9LFxuICAgICAgICAgICAgICAgICAgICBbJ3NwYW4nLCB2dWVTdHlsZSwgaXNTaGFsbG93KG9iaikgPyAnU2hhbGxvd1JlYWRvbmx5JyA6ICdSZWFkb25seSddLFxuICAgICAgICAgICAgICAgICAgICAnPCcsXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdFZhbHVlKG9iaiksXG4gICAgICAgICAgICAgICAgICAgICc+J1xuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSxcbiAgICAgICAgaGFzQm9keShvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBvYmogJiYgb2JqLl9faXNWdWU7XG4gICAgICAgIH0sXG4gICAgICAgIGJvZHkob2JqKSB7XG4gICAgICAgICAgICBpZiAob2JqICYmIG9iai5fX2lzVnVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHt9LFxuICAgICAgICAgICAgICAgICAgICAuLi5mb3JtYXRJbnN0YW5jZShvYmouJClcbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBmdW5jdGlvbiBmb3JtYXRJbnN0YW5jZShpbnN0YW5jZSkge1xuICAgICAgICBjb25zdCBibG9ja3MgPSBbXTtcbiAgICAgICAgaWYgKGluc3RhbmNlLnR5cGUucHJvcHMgJiYgaW5zdGFuY2UucHJvcHMpIHtcbiAgICAgICAgICAgIGJsb2Nrcy5wdXNoKGNyZWF0ZUluc3RhbmNlQmxvY2soJ3Byb3BzJywgdG9SYXcoaW5zdGFuY2UucHJvcHMpKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluc3RhbmNlLnNldHVwU3RhdGUgIT09IEVNUFRZX09CSikge1xuICAgICAgICAgICAgYmxvY2tzLnB1c2goY3JlYXRlSW5zdGFuY2VCbG9jaygnc2V0dXAnLCBpbnN0YW5jZS5zZXR1cFN0YXRlKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluc3RhbmNlLmRhdGEgIT09IEVNUFRZX09CSikge1xuICAgICAgICAgICAgYmxvY2tzLnB1c2goY3JlYXRlSW5zdGFuY2VCbG9jaygnZGF0YScsIHRvUmF3KGluc3RhbmNlLmRhdGEpKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29tcHV0ZWQgPSBleHRyYWN0S2V5cyhpbnN0YW5jZSwgJ2NvbXB1dGVkJyk7XG4gICAgICAgIGlmIChjb21wdXRlZCkge1xuICAgICAgICAgICAgYmxvY2tzLnB1c2goY3JlYXRlSW5zdGFuY2VCbG9jaygnY29tcHV0ZWQnLCBjb21wdXRlZCkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluamVjdGVkID0gZXh0cmFjdEtleXMoaW5zdGFuY2UsICdpbmplY3QnKTtcbiAgICAgICAgaWYgKGluamVjdGVkKSB7XG4gICAgICAgICAgICBibG9ja3MucHVzaChjcmVhdGVJbnN0YW5jZUJsb2NrKCdpbmplY3RlZCcsIGluamVjdGVkKSk7XG4gICAgICAgIH1cbiAgICAgICAgYmxvY2tzLnB1c2goW1xuICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICB7fSxcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAnc3BhbicsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBzdHlsZToga2V5d29yZFN0eWxlLnN0eWxlICsgJztvcGFjaXR5OjAuNjYnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAnJCAoaW50ZXJuYWwpOiAnXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgWydvYmplY3QnLCB7IG9iamVjdDogaW5zdGFuY2UgfV1cbiAgICAgICAgXSk7XG4gICAgICAgIHJldHVybiBibG9ja3M7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNyZWF0ZUluc3RhbmNlQmxvY2sodHlwZSwgdGFyZ2V0KSB7XG4gICAgICAgIHRhcmdldCA9IGV4dGVuZCh7fSwgdGFyZ2V0KTtcbiAgICAgICAgaWYgKCFPYmplY3Qua2V5cyh0YXJnZXQpLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIFsnc3BhbicsIHt9XTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICB7IHN0eWxlOiAnbGluZS1oZWlnaHQ6MS4yNWVtO21hcmdpbi1ib3R0b206MC42ZW0nIH0sXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBzdHlsZTogJ2NvbG9yOiM0NzY1ODInXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB0eXBlXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6ICdwYWRkaW5nLWxlZnQ6MS4yNWVtJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgLi4uT2JqZWN0LmtleXModGFyZ2V0KS5tYXAoa2V5ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAge30sXG4gICAgICAgICAgICAgICAgICAgICAgICBbJ3NwYW4nLCBrZXl3b3JkU3R5bGUsIGtleSArICc6ICddLFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0VmFsdWUodGFyZ2V0W2tleV0sIGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIF07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGZvcm1hdFZhbHVlKHYsIGFzUmF3ID0gdHJ1ZSkge1xuICAgICAgICBpZiAodHlwZW9mIHYgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICByZXR1cm4gWydzcGFuJywgbnVtYmVyU3R5bGUsIHZdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiB2ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmV0dXJuIFsnc3BhbicsIHN0cmluZ1N0eWxlLCBKU09OLnN0cmluZ2lmeSh2KV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHYgPT09ICdib29sZWFuJykge1xuICAgICAgICAgICAgcmV0dXJuIFsnc3BhbicsIGtleXdvcmRTdHlsZSwgdl07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNPYmplY3QodikpIHtcbiAgICAgICAgICAgIHJldHVybiBbJ29iamVjdCcsIHsgb2JqZWN0OiBhc1JhdyA/IHRvUmF3KHYpIDogdiB9XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBbJ3NwYW4nLCBzdHJpbmdTdHlsZSwgU3RyaW5nKHYpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBleHRyYWN0S2V5cyhpbnN0YW5jZSwgdHlwZSkge1xuICAgICAgICBjb25zdCBDb21wID0gaW5zdGFuY2UudHlwZTtcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24oQ29tcCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBleHRyYWN0ZWQgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gaW5zdGFuY2UuY3R4KSB7XG4gICAgICAgICAgICBpZiAoaXNLZXlPZlR5cGUoQ29tcCwga2V5LCB0eXBlKSkge1xuICAgICAgICAgICAgICAgIGV4dHJhY3RlZFtrZXldID0gaW5zdGFuY2UuY3R4W2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV4dHJhY3RlZDtcbiAgICB9XG4gICAgZnVuY3Rpb24gaXNLZXlPZlR5cGUoQ29tcCwga2V5LCB0eXBlKSB7XG4gICAgICAgIGNvbnN0IG9wdHMgPSBDb21wW3R5cGVdO1xuICAgICAgICBpZiAoKGlzQXJyYXkob3B0cykgJiYgb3B0cy5pbmNsdWRlcyhrZXkpKSB8fFxuICAgICAgICAgICAgKGlzT2JqZWN0KG9wdHMpICYmIGtleSBpbiBvcHRzKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKENvbXAuZXh0ZW5kcyAmJiBpc0tleU9mVHlwZShDb21wLmV4dGVuZHMsIGtleSwgdHlwZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChDb21wLm1peGlucyAmJiBDb21wLm1peGlucy5zb21lKG0gPT4gaXNLZXlPZlR5cGUobSwga2V5LCB0eXBlKSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdlblJlZkZsYWcodikge1xuICAgICAgICBpZiAoaXNTaGFsbG93KHYpKSB7XG4gICAgICAgICAgICByZXR1cm4gYFNoYWxsb3dSZWZgO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2LmVmZmVjdCkge1xuICAgICAgICAgICAgcmV0dXJuIGBDb21wdXRlZFJlZmA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGBSZWZgO1xuICAgIH1cbiAgICBpZiAod2luZG93LmRldnRvb2xzRm9ybWF0dGVycykge1xuICAgICAgICB3aW5kb3cuZGV2dG9vbHNGb3JtYXR0ZXJzLnB1c2goZm9ybWF0dGVyKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHdpbmRvdy5kZXZ0b29sc0Zvcm1hdHRlcnMgPSBbZm9ybWF0dGVyXTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHdpdGhNZW1vKG1lbW8sIHJlbmRlciwgY2FjaGUsIGluZGV4KSB7XG4gICAgY29uc3QgY2FjaGVkID0gY2FjaGVbaW5kZXhdO1xuICAgIGlmIChjYWNoZWQgJiYgaXNNZW1vU2FtZShjYWNoZWQsIG1lbW8pKSB7XG4gICAgICAgIHJldHVybiBjYWNoZWQ7XG4gICAgfVxuICAgIGNvbnN0IHJldCA9IHJlbmRlcigpO1xuICAgIC8vIHNoYWxsb3cgY2xvbmVcbiAgICByZXQubWVtbyA9IG1lbW8uc2xpY2UoKTtcbiAgICByZXR1cm4gKGNhY2hlW2luZGV4XSA9IHJldCk7XG59XG5mdW5jdGlvbiBpc01lbW9TYW1lKGNhY2hlZCwgbWVtbykge1xuICAgIGNvbnN0IHByZXYgPSBjYWNoZWQubWVtbztcbiAgICBpZiAocHJldi5sZW5ndGggIT0gbWVtby5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByZXYubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGhhc0NoYW5nZWQocHJldltpXSwgbWVtb1tpXSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBtYWtlIHN1cmUgdG8gbGV0IHBhcmVudCBibG9jayB0cmFjayBpdCB3aGVuIHJldHVybmluZyBjYWNoZWRcbiAgICBpZiAoaXNCbG9ja1RyZWVFbmFibGVkID4gMCAmJiBjdXJyZW50QmxvY2spIHtcbiAgICAgICAgY3VycmVudEJsb2NrLnB1c2goY2FjaGVkKTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5cbi8vIENvcmUgQVBJIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuY29uc3QgdmVyc2lvbiA9IFwiMy4yLjQ1XCI7XG5jb25zdCBfc3NyVXRpbHMgPSB7XG4gICAgY3JlYXRlQ29tcG9uZW50SW5zdGFuY2UsXG4gICAgc2V0dXBDb21wb25lbnQsXG4gICAgcmVuZGVyQ29tcG9uZW50Um9vdCxcbiAgICBzZXRDdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UsXG4gICAgaXNWTm9kZSxcbiAgICBub3JtYWxpemVWTm9kZVxufTtcbi8qKlxuICogU1NSIHV0aWxzIGZvciBcXEB2dWUvc2VydmVyLXJlbmRlcmVyLiBPbmx5IGV4cG9zZWQgaW4gc3NyLXBvc3NpYmxlIGJ1aWxkcy5cbiAqIEBpbnRlcm5hbFxuICovXG5jb25zdCBzc3JVdGlscyA9IChfc3NyVXRpbHMgKTtcbi8qKlxuICogQGludGVybmFsIG9ubHkgZXhwb3NlZCBpbiBjb21wYXQgYnVpbGRzXG4gKi9cbmNvbnN0IHJlc29sdmVGaWx0ZXIgPSBudWxsO1xuLyoqXG4gKiBAaW50ZXJuYWwgb25seSBleHBvc2VkIGluIGNvbXBhdCBidWlsZHMuXG4gKi9cbmNvbnN0IGNvbXBhdFV0aWxzID0gKG51bGwpO1xuXG5leHBvcnQgeyBCYXNlVHJhbnNpdGlvbiwgQ29tbWVudCwgRnJhZ21lbnQsIEtlZXBBbGl2ZSwgU3RhdGljLCBTdXNwZW5zZSwgVGVsZXBvcnQsIFRleHQsIGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nLCBjYWxsV2l0aEVycm9ySGFuZGxpbmcsIGNsb25lVk5vZGUsIGNvbXBhdFV0aWxzLCBjb21wdXRlZCwgY3JlYXRlQmxvY2ssIGNyZWF0ZUNvbW1lbnRWTm9kZSwgY3JlYXRlRWxlbWVudEJsb2NrLCBjcmVhdGVCYXNlVk5vZGUgYXMgY3JlYXRlRWxlbWVudFZOb2RlLCBjcmVhdGVIeWRyYXRpb25SZW5kZXJlciwgY3JlYXRlUHJvcHNSZXN0UHJveHksIGNyZWF0ZVJlbmRlcmVyLCBjcmVhdGVTbG90cywgY3JlYXRlU3RhdGljVk5vZGUsIGNyZWF0ZVRleHRWTm9kZSwgY3JlYXRlVk5vZGUsIGRlZmluZUFzeW5jQ29tcG9uZW50LCBkZWZpbmVDb21wb25lbnQsIGRlZmluZUVtaXRzLCBkZWZpbmVFeHBvc2UsIGRlZmluZVByb3BzLCBkZXZ0b29scywgZ2V0Q3VycmVudEluc3RhbmNlLCBnZXRUcmFuc2l0aW9uUmF3Q2hpbGRyZW4sIGd1YXJkUmVhY3RpdmVQcm9wcywgaCwgaGFuZGxlRXJyb3IsIGluaXRDdXN0b21Gb3JtYXR0ZXIsIGluamVjdCwgaXNNZW1vU2FtZSwgaXNSdW50aW1lT25seSwgaXNWTm9kZSwgbWVyZ2VEZWZhdWx0cywgbWVyZ2VQcm9wcywgbmV4dFRpY2ssIG9uQWN0aXZhdGVkLCBvbkJlZm9yZU1vdW50LCBvbkJlZm9yZVVubW91bnQsIG9uQmVmb3JlVXBkYXRlLCBvbkRlYWN0aXZhdGVkLCBvbkVycm9yQ2FwdHVyZWQsIG9uTW91bnRlZCwgb25SZW5kZXJUcmFja2VkLCBvblJlbmRlclRyaWdnZXJlZCwgb25TZXJ2ZXJQcmVmZXRjaCwgb25Vbm1vdW50ZWQsIG9uVXBkYXRlZCwgb3BlbkJsb2NrLCBwb3BTY29wZUlkLCBwcm92aWRlLCBwdXNoU2NvcGVJZCwgcXVldWVQb3N0Rmx1c2hDYiwgcmVnaXN0ZXJSdW50aW1lQ29tcGlsZXIsIHJlbmRlckxpc3QsIHJlbmRlclNsb3QsIHJlc29sdmVDb21wb25lbnQsIHJlc29sdmVEaXJlY3RpdmUsIHJlc29sdmVEeW5hbWljQ29tcG9uZW50LCByZXNvbHZlRmlsdGVyLCByZXNvbHZlVHJhbnNpdGlvbkhvb2tzLCBzZXRCbG9ja1RyYWNraW5nLCBzZXREZXZ0b29sc0hvb2ssIHNldFRyYW5zaXRpb25Ib29rcywgc3NyQ29udGV4dEtleSwgc3NyVXRpbHMsIHRvSGFuZGxlcnMsIHRyYW5zZm9ybVZOb2RlQXJncywgdXNlQXR0cnMsIHVzZVNTUkNvbnRleHQsIHVzZVNsb3RzLCB1c2VUcmFuc2l0aW9uU3RhdGUsIHZlcnNpb24sIHdhcm4sIHdhdGNoLCB3YXRjaEVmZmVjdCwgd2F0Y2hQb3N0RWZmZWN0LCB3YXRjaFN5bmNFZmZlY3QsIHdpdGhBc3luY0NvbnRleHQsIHdpdGhDdHgsIHdpdGhEZWZhdWx0cywgd2l0aERpcmVjdGl2ZXMsIHdpdGhNZW1vLCB3aXRoU2NvcGVJZCB9O1xuIiwiaW1wb3J0IHsgd2FybiwgY2FtZWxpemUsIGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nLCBkZWZpbmVDb21wb25lbnQsIG5leHRUaWNrLCBjcmVhdGVWTm9kZSwgZ2V0Q3VycmVudEluc3RhbmNlLCB3YXRjaFBvc3RFZmZlY3QsIG9uTW91bnRlZCwgb25Vbm1vdW50ZWQsIEZyYWdtZW50LCBTdGF0aWMsIGgsIEJhc2VUcmFuc2l0aW9uLCB1c2VUcmFuc2l0aW9uU3RhdGUsIG9uVXBkYXRlZCwgdG9SYXcsIGdldFRyYW5zaXRpb25SYXdDaGlsZHJlbiwgc2V0VHJhbnNpdGlvbkhvb2tzLCByZXNvbHZlVHJhbnNpdGlvbkhvb2tzLCBjcmVhdGVSZW5kZXJlciwgaXNSdW50aW1lT25seSwgY3JlYXRlSHlkcmF0aW9uUmVuZGVyZXIgfSBmcm9tICdAdnVlL3J1bnRpbWUtY29yZSc7XG5leHBvcnQgKiBmcm9tICdAdnVlL3J1bnRpbWUtY29yZSc7XG5pbXBvcnQgeyBpc1N0cmluZywgaXNBcnJheSwgaHlwaGVuYXRlLCBjYXBpdGFsaXplLCBpc1NwZWNpYWxCb29sZWFuQXR0ciwgaW5jbHVkZUJvb2xlYW5BdHRyLCBpc09uLCBpc01vZGVsTGlzdGVuZXIsIGlzRnVuY3Rpb24sIGNhbWVsaXplIGFzIGNhbWVsaXplJDEsIHRvTnVtYmVyLCBleHRlbmQsIEVNUFRZX09CSiwgaXNPYmplY3QsIGludm9rZUFycmF5Rm5zLCBsb29zZUluZGV4T2YsIGlzU2V0LCBsb29zZUVxdWFsLCBpc0hUTUxUYWcsIGlzU1ZHVGFnIH0gZnJvbSAnQHZ1ZS9zaGFyZWQnO1xuXG5jb25zdCBzdmdOUyA9ICdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc7XG5jb25zdCBkb2MgPSAodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyA/IGRvY3VtZW50IDogbnVsbCk7XG5jb25zdCB0ZW1wbGF0ZUNvbnRhaW5lciA9IGRvYyAmJiAvKiNfX1BVUkVfXyovIGRvYy5jcmVhdGVFbGVtZW50KCd0ZW1wbGF0ZScpO1xuY29uc3Qgbm9kZU9wcyA9IHtcbiAgICBpbnNlcnQ6IChjaGlsZCwgcGFyZW50LCBhbmNob3IpID0+IHtcbiAgICAgICAgcGFyZW50Lmluc2VydEJlZm9yZShjaGlsZCwgYW5jaG9yIHx8IG51bGwpO1xuICAgIH0sXG4gICAgcmVtb3ZlOiBjaGlsZCA9PiB7XG4gICAgICAgIGNvbnN0IHBhcmVudCA9IGNoaWxkLnBhcmVudE5vZGU7XG4gICAgICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChjaGlsZCk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGNyZWF0ZUVsZW1lbnQ6ICh0YWcsIGlzU1ZHLCBpcywgcHJvcHMpID0+IHtcbiAgICAgICAgY29uc3QgZWwgPSBpc1NWR1xuICAgICAgICAgICAgPyBkb2MuY3JlYXRlRWxlbWVudE5TKHN2Z05TLCB0YWcpXG4gICAgICAgICAgICA6IGRvYy5jcmVhdGVFbGVtZW50KHRhZywgaXMgPyB7IGlzIH0gOiB1bmRlZmluZWQpO1xuICAgICAgICBpZiAodGFnID09PSAnc2VsZWN0JyAmJiBwcm9wcyAmJiBwcm9wcy5tdWx0aXBsZSAhPSBudWxsKSB7XG4gICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ211bHRpcGxlJywgcHJvcHMubXVsdGlwbGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbDtcbiAgICB9LFxuICAgIGNyZWF0ZVRleHQ6IHRleHQgPT4gZG9jLmNyZWF0ZVRleHROb2RlKHRleHQpLFxuICAgIGNyZWF0ZUNvbW1lbnQ6IHRleHQgPT4gZG9jLmNyZWF0ZUNvbW1lbnQodGV4dCksXG4gICAgc2V0VGV4dDogKG5vZGUsIHRleHQpID0+IHtcbiAgICAgICAgbm9kZS5ub2RlVmFsdWUgPSB0ZXh0O1xuICAgIH0sXG4gICAgc2V0RWxlbWVudFRleHQ6IChlbCwgdGV4dCkgPT4ge1xuICAgICAgICBlbC50ZXh0Q29udGVudCA9IHRleHQ7XG4gICAgfSxcbiAgICBwYXJlbnROb2RlOiBub2RlID0+IG5vZGUucGFyZW50Tm9kZSxcbiAgICBuZXh0U2libGluZzogbm9kZSA9PiBub2RlLm5leHRTaWJsaW5nLFxuICAgIHF1ZXJ5U2VsZWN0b3I6IHNlbGVjdG9yID0+IGRvYy5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKSxcbiAgICBzZXRTY29wZUlkKGVsLCBpZCkge1xuICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoaWQsICcnKTtcbiAgICB9LFxuICAgIC8vIF9fVU5TQUZFX19cbiAgICAvLyBSZWFzb246IGlubmVySFRNTC5cbiAgICAvLyBTdGF0aWMgY29udGVudCBoZXJlIGNhbiBvbmx5IGNvbWUgZnJvbSBjb21waWxlZCB0ZW1wbGF0ZXMuXG4gICAgLy8gQXMgbG9uZyBhcyB0aGUgdXNlciBvbmx5IHVzZXMgdHJ1c3RlZCB0ZW1wbGF0ZXMsIHRoaXMgaXMgc2FmZS5cbiAgICBpbnNlcnRTdGF0aWNDb250ZW50KGNvbnRlbnQsIHBhcmVudCwgYW5jaG9yLCBpc1NWRywgc3RhcnQsIGVuZCkge1xuICAgICAgICAvLyA8cGFyZW50PiBiZWZvcmUgfCBmaXJzdCAuLi4gbGFzdCB8IGFuY2hvciA8L3BhcmVudD5cbiAgICAgICAgY29uc3QgYmVmb3JlID0gYW5jaG9yID8gYW5jaG9yLnByZXZpb3VzU2libGluZyA6IHBhcmVudC5sYXN0Q2hpbGQ7XG4gICAgICAgIC8vICM1MzA4IGNhbiBvbmx5IHRha2UgY2FjaGVkIHBhdGggaWY6XG4gICAgICAgIC8vIC0gaGFzIGEgc2luZ2xlIHJvb3Qgbm9kZVxuICAgICAgICAvLyAtIG5leHRTaWJsaW5nIGluZm8gaXMgc3RpbGwgYXZhaWxhYmxlXG4gICAgICAgIGlmIChzdGFydCAmJiAoc3RhcnQgPT09IGVuZCB8fCBzdGFydC5uZXh0U2libGluZykpIHtcbiAgICAgICAgICAgIC8vIGNhY2hlZFxuICAgICAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKHN0YXJ0LmNsb25lTm9kZSh0cnVlKSwgYW5jaG9yKTtcbiAgICAgICAgICAgICAgICBpZiAoc3RhcnQgPT09IGVuZCB8fCAhKHN0YXJ0ID0gc3RhcnQubmV4dFNpYmxpbmcpKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGZyZXNoIGluc2VydFxuICAgICAgICAgICAgdGVtcGxhdGVDb250YWluZXIuaW5uZXJIVE1MID0gaXNTVkcgPyBgPHN2Zz4ke2NvbnRlbnR9PC9zdmc+YCA6IGNvbnRlbnQ7XG4gICAgICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IHRlbXBsYXRlQ29udGFpbmVyLmNvbnRlbnQ7XG4gICAgICAgICAgICBpZiAoaXNTVkcpIHtcbiAgICAgICAgICAgICAgICAvLyByZW1vdmUgb3V0ZXIgc3ZnIHdyYXBwZXJcbiAgICAgICAgICAgICAgICBjb25zdCB3cmFwcGVyID0gdGVtcGxhdGUuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgICAgICB3aGlsZSAod3JhcHBlci5maXJzdENoaWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlLmFwcGVuZENoaWxkKHdyYXBwZXIuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRlbXBsYXRlLnJlbW92ZUNoaWxkKHdyYXBwZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFyZW50Lmluc2VydEJlZm9yZSh0ZW1wbGF0ZSwgYW5jaG9yKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgLy8gZmlyc3RcbiAgICAgICAgICAgIGJlZm9yZSA/IGJlZm9yZS5uZXh0U2libGluZyA6IHBhcmVudC5maXJzdENoaWxkLFxuICAgICAgICAgICAgLy8gbGFzdFxuICAgICAgICAgICAgYW5jaG9yID8gYW5jaG9yLnByZXZpb3VzU2libGluZyA6IHBhcmVudC5sYXN0Q2hpbGRcbiAgICAgICAgXTtcbiAgICB9XG59O1xuXG4vLyBjb21waWxlciBzaG91bGQgbm9ybWFsaXplIGNsYXNzICsgOmNsYXNzIGJpbmRpbmdzIG9uIHRoZSBzYW1lIGVsZW1lbnRcbi8vIGludG8gYSBzaW5nbGUgYmluZGluZyBbJ3N0YXRpY0NsYXNzJywgZHluYW1pY11cbmZ1bmN0aW9uIHBhdGNoQ2xhc3MoZWwsIHZhbHVlLCBpc1NWRykge1xuICAgIC8vIGRpcmVjdGx5IHNldHRpbmcgY2xhc3NOYW1lIHNob3VsZCBiZSBmYXN0ZXIgdGhhbiBzZXRBdHRyaWJ1dGUgaW4gdGhlb3J5XG4gICAgLy8gaWYgdGhpcyBpcyBhbiBlbGVtZW50IGR1cmluZyBhIHRyYW5zaXRpb24sIHRha2UgdGhlIHRlbXBvcmFyeSB0cmFuc2l0aW9uXG4gICAgLy8gY2xhc3NlcyBpbnRvIGFjY291bnQuXG4gICAgY29uc3QgdHJhbnNpdGlvbkNsYXNzZXMgPSBlbC5fdnRjO1xuICAgIGlmICh0cmFuc2l0aW9uQ2xhc3Nlcykge1xuICAgICAgICB2YWx1ZSA9ICh2YWx1ZSA/IFt2YWx1ZSwgLi4udHJhbnNpdGlvbkNsYXNzZXNdIDogWy4uLnRyYW5zaXRpb25DbGFzc2VzXSkuam9pbignICcpO1xuICAgIH1cbiAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2NsYXNzJyk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzU1ZHKSB7XG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCB2YWx1ZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBlbC5jbGFzc05hbWUgPSB2YWx1ZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHBhdGNoU3R5bGUoZWwsIHByZXYsIG5leHQpIHtcbiAgICBjb25zdCBzdHlsZSA9IGVsLnN0eWxlO1xuICAgIGNvbnN0IGlzQ3NzU3RyaW5nID0gaXNTdHJpbmcobmV4dCk7XG4gICAgaWYgKG5leHQgJiYgIWlzQ3NzU3RyaW5nKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIG5leHQpIHtcbiAgICAgICAgICAgIHNldFN0eWxlKHN0eWxlLCBrZXksIG5leHRba2V5XSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByZXYgJiYgIWlzU3RyaW5nKHByZXYpKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBwcmV2KSB7XG4gICAgICAgICAgICAgICAgaWYgKG5leHRba2V5XSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldFN0eWxlKHN0eWxlLCBrZXksICcnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnREaXNwbGF5ID0gc3R5bGUuZGlzcGxheTtcbiAgICAgICAgaWYgKGlzQ3NzU3RyaW5nKSB7XG4gICAgICAgICAgICBpZiAocHJldiAhPT0gbmV4dCkge1xuICAgICAgICAgICAgICAgIHN0eWxlLmNzc1RleHQgPSBuZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHByZXYpIHtcbiAgICAgICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBpbmRpY2F0ZXMgdGhhdCB0aGUgYGRpc3BsYXlgIG9mIHRoZSBlbGVtZW50IGlzIGNvbnRyb2xsZWQgYnkgYHYtc2hvd2AsXG4gICAgICAgIC8vIHNvIHdlIGFsd2F5cyBrZWVwIHRoZSBjdXJyZW50IGBkaXNwbGF5YCB2YWx1ZSByZWdhcmRsZXNzIG9mIHRoZSBgc3R5bGVgXG4gICAgICAgIC8vIHZhbHVlLCB0aHVzIGhhbmRpbmcgb3ZlciBjb250cm9sIHRvIGB2LXNob3dgLlxuICAgICAgICBpZiAoJ192b2QnIGluIGVsKSB7XG4gICAgICAgICAgICBzdHlsZS5kaXNwbGF5ID0gY3VycmVudERpc3BsYXk7XG4gICAgICAgIH1cbiAgICB9XG59XG5jb25zdCBzZW1pY29sb25SRSA9IC9bXlxcXFxdO1xccyokLztcbmNvbnN0IGltcG9ydGFudFJFID0gL1xccyohaW1wb3J0YW50JC87XG5mdW5jdGlvbiBzZXRTdHlsZShzdHlsZSwgbmFtZSwgdmFsKSB7XG4gICAgaWYgKGlzQXJyYXkodmFsKSkge1xuICAgICAgICB2YWwuZm9yRWFjaCh2ID0+IHNldFN0eWxlKHN0eWxlLCBuYW1lLCB2KSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAodmFsID09IG51bGwpXG4gICAgICAgICAgICB2YWwgPSAnJztcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgaWYgKHNlbWljb2xvblJFLnRlc3QodmFsKSkge1xuICAgICAgICAgICAgICAgIHdhcm4oYFVuZXhwZWN0ZWQgc2VtaWNvbG9uIGF0IHRoZSBlbmQgb2YgJyR7bmFtZX0nIHN0eWxlIHZhbHVlOiAnJHt2YWx9J2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChuYW1lLnN0YXJ0c1dpdGgoJy0tJykpIHtcbiAgICAgICAgICAgIC8vIGN1c3RvbSBwcm9wZXJ0eSBkZWZpbml0aW9uXG4gICAgICAgICAgICBzdHlsZS5zZXRQcm9wZXJ0eShuYW1lLCB2YWwpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgcHJlZml4ZWQgPSBhdXRvUHJlZml4KHN0eWxlLCBuYW1lKTtcbiAgICAgICAgICAgIGlmIChpbXBvcnRhbnRSRS50ZXN0KHZhbCkpIHtcbiAgICAgICAgICAgICAgICAvLyAhaW1wb3J0YW50XG4gICAgICAgICAgICAgICAgc3R5bGUuc2V0UHJvcGVydHkoaHlwaGVuYXRlKHByZWZpeGVkKSwgdmFsLnJlcGxhY2UoaW1wb3J0YW50UkUsICcnKSwgJ2ltcG9ydGFudCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc3R5bGVbcHJlZml4ZWRdID0gdmFsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuY29uc3QgcHJlZml4ZXMgPSBbJ1dlYmtpdCcsICdNb3onLCAnbXMnXTtcbmNvbnN0IHByZWZpeENhY2hlID0ge307XG5mdW5jdGlvbiBhdXRvUHJlZml4KHN0eWxlLCByYXdOYW1lKSB7XG4gICAgY29uc3QgY2FjaGVkID0gcHJlZml4Q2FjaGVbcmF3TmFtZV07XG4gICAgaWYgKGNhY2hlZCkge1xuICAgICAgICByZXR1cm4gY2FjaGVkO1xuICAgIH1cbiAgICBsZXQgbmFtZSA9IGNhbWVsaXplKHJhd05hbWUpO1xuICAgIGlmIChuYW1lICE9PSAnZmlsdGVyJyAmJiBuYW1lIGluIHN0eWxlKSB7XG4gICAgICAgIHJldHVybiAocHJlZml4Q2FjaGVbcmF3TmFtZV0gPSBuYW1lKTtcbiAgICB9XG4gICAgbmFtZSA9IGNhcGl0YWxpemUobmFtZSk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcmVmaXhlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBwcmVmaXhlZCA9IHByZWZpeGVzW2ldICsgbmFtZTtcbiAgICAgICAgaWYgKHByZWZpeGVkIGluIHN0eWxlKSB7XG4gICAgICAgICAgICByZXR1cm4gKHByZWZpeENhY2hlW3Jhd05hbWVdID0gcHJlZml4ZWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByYXdOYW1lO1xufVxuXG5jb25zdCB4bGlua05TID0gJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnO1xuZnVuY3Rpb24gcGF0Y2hBdHRyKGVsLCBrZXksIHZhbHVlLCBpc1NWRywgaW5zdGFuY2UpIHtcbiAgICBpZiAoaXNTVkcgJiYga2V5LnN0YXJ0c1dpdGgoJ3hsaW5rOicpKSB7XG4gICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGVOUyh4bGlua05TLCBrZXkuc2xpY2UoNiwga2V5Lmxlbmd0aCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlTlMoeGxpbmtOUywga2V5LCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIG5vdGUgd2UgYXJlIG9ubHkgY2hlY2tpbmcgYm9vbGVhbiBhdHRyaWJ1dGVzIHRoYXQgZG9uJ3QgaGF2ZSBhXG4gICAgICAgIC8vIGNvcnJlc3BvbmRpbmcgZG9tIHByb3Agb2YgdGhlIHNhbWUgbmFtZSBoZXJlLlxuICAgICAgICBjb25zdCBpc0Jvb2xlYW4gPSBpc1NwZWNpYWxCb29sZWFuQXR0cihrZXkpO1xuICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCB8fCAoaXNCb29sZWFuICYmICFpbmNsdWRlQm9vbGVhbkF0dHIodmFsdWUpKSkge1xuICAgICAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoa2V5LCBpc0Jvb2xlYW4gPyAnJyA6IHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLy8gX19VTlNBRkVfX1xuLy8gZnVuY3Rpb25zLiBUaGUgdXNlciBpcyByZXNwb25zaWJsZSBmb3IgdXNpbmcgdGhlbSB3aXRoIG9ubHkgdHJ1c3RlZCBjb250ZW50LlxuZnVuY3Rpb24gcGF0Y2hET01Qcm9wKGVsLCBrZXksIHZhbHVlLCBcbi8vIHRoZSBmb2xsb3dpbmcgYXJncyBhcmUgcGFzc2VkIG9ubHkgZHVlIHRvIHBvdGVudGlhbCBpbm5lckhUTUwvdGV4dENvbnRlbnRcbi8vIG92ZXJyaWRpbmcgZXhpc3RpbmcgVk5vZGVzLCBpbiB3aGljaCBjYXNlIHRoZSBvbGQgdHJlZSBtdXN0IGJlIHByb3Blcmx5XG4vLyB1bm1vdW50ZWQuXG5wcmV2Q2hpbGRyZW4sIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHVubW91bnRDaGlsZHJlbikge1xuICAgIGlmIChrZXkgPT09ICdpbm5lckhUTUwnIHx8IGtleSA9PT0gJ3RleHRDb250ZW50Jykge1xuICAgICAgICBpZiAocHJldkNoaWxkcmVuKSB7XG4gICAgICAgICAgICB1bm1vdW50Q2hpbGRyZW4ocHJldkNoaWxkcmVuLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgICAgfVxuICAgICAgICBlbFtrZXldID0gdmFsdWUgPT0gbnVsbCA/ICcnIDogdmFsdWU7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGtleSA9PT0gJ3ZhbHVlJyAmJlxuICAgICAgICBlbC50YWdOYW1lICE9PSAnUFJPR1JFU1MnICYmXG4gICAgICAgIC8vIGN1c3RvbSBlbGVtZW50cyBtYXkgdXNlIF92YWx1ZSBpbnRlcm5hbGx5XG4gICAgICAgICFlbC50YWdOYW1lLmluY2x1ZGVzKCctJykpIHtcbiAgICAgICAgLy8gc3RvcmUgdmFsdWUgYXMgX3ZhbHVlIGFzIHdlbGwgc2luY2VcbiAgICAgICAgLy8gbm9uLXN0cmluZyB2YWx1ZXMgd2lsbCBiZSBzdHJpbmdpZmllZC5cbiAgICAgICAgZWwuX3ZhbHVlID0gdmFsdWU7XG4gICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gdmFsdWUgPT0gbnVsbCA/ICcnIDogdmFsdWU7XG4gICAgICAgIGlmIChlbC52YWx1ZSAhPT0gbmV3VmFsdWUgfHxcbiAgICAgICAgICAgIC8vICM0OTU2OiBhbHdheXMgc2V0IGZvciBPUFRJT04gZWxlbWVudHMgYmVjYXVzZSBpdHMgdmFsdWUgZmFsbHMgYmFjayB0b1xuICAgICAgICAgICAgLy8gdGV4dENvbnRlbnQgaWYgbm8gdmFsdWUgYXR0cmlidXRlIGlzIHByZXNlbnQuIEFuZCBzZXR0aW5nIC52YWx1ZSBmb3JcbiAgICAgICAgICAgIC8vIE9QVElPTiBoYXMgbm8gc2lkZSBlZmZlY3RcbiAgICAgICAgICAgIGVsLnRhZ05hbWUgPT09ICdPUFRJT04nKSB7XG4gICAgICAgICAgICBlbC52YWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoa2V5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCBuZWVkUmVtb3ZlID0gZmFsc2U7XG4gICAgaWYgKHZhbHVlID09PSAnJyB8fCB2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgIGNvbnN0IHR5cGUgPSB0eXBlb2YgZWxba2V5XTtcbiAgICAgICAgaWYgKHR5cGUgPT09ICdib29sZWFuJykge1xuICAgICAgICAgICAgLy8gZS5nLiA8c2VsZWN0IG11bHRpcGxlPiBjb21waWxlcyB0byB7IG11bHRpcGxlOiAnJyB9XG4gICAgICAgICAgICB2YWx1ZSA9IGluY2x1ZGVCb29sZWFuQXR0cih2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodmFsdWUgPT0gbnVsbCAmJiB0eXBlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgLy8gZS5nLiA8ZGl2IDppZD1cIm51bGxcIj5cbiAgICAgICAgICAgIHZhbHVlID0gJyc7XG4gICAgICAgICAgICBuZWVkUmVtb3ZlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgLy8gZS5nLiA8aW1nIDp3aWR0aD1cIm51bGxcIj5cbiAgICAgICAgICAgIHZhbHVlID0gMDtcbiAgICAgICAgICAgIG5lZWRSZW1vdmUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIHNvbWUgcHJvcGVydGllcyBwZXJmb3JtIHZhbHVlIHZhbGlkYXRpb24gYW5kIHRocm93LFxuICAgIC8vIHNvbWUgcHJvcGVydGllcyBoYXMgZ2V0dGVyLCBubyBzZXR0ZXIsIHdpbGwgZXJyb3IgaW4gJ3VzZSBzdHJpY3QnXG4gICAgLy8gZWcuIDxzZWxlY3QgOnR5cGU9XCJudWxsXCI+PC9zZWxlY3Q+IDxzZWxlY3QgOndpbGxWYWxpZGF0ZT1cIm51bGxcIj48L3NlbGVjdD5cbiAgICB0cnkge1xuICAgICAgICBlbFtrZXldID0gdmFsdWU7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIC8vIGRvIG5vdCB3YXJuIGlmIHZhbHVlIGlzIGF1dG8tY29lcmNlZCBmcm9tIG51bGxpc2ggdmFsdWVzXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIW5lZWRSZW1vdmUpIHtcbiAgICAgICAgICAgIHdhcm4oYEZhaWxlZCBzZXR0aW5nIHByb3AgXCIke2tleX1cIiBvbiA8JHtlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCl9PjogYCArXG4gICAgICAgICAgICAgICAgYHZhbHVlICR7dmFsdWV9IGlzIGludmFsaWQuYCwgZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmVlZFJlbW92ZSAmJiBlbC5yZW1vdmVBdHRyaWJ1dGUoa2V5KTtcbn1cblxuZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcihlbCwgZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpIHtcbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKTtcbn1cbmZ1bmN0aW9uIHJlbW92ZUV2ZW50TGlzdGVuZXIoZWwsIGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKSB7XG4gICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlciwgb3B0aW9ucyk7XG59XG5mdW5jdGlvbiBwYXRjaEV2ZW50KGVsLCByYXdOYW1lLCBwcmV2VmFsdWUsIG5leHRWYWx1ZSwgaW5zdGFuY2UgPSBudWxsKSB7XG4gICAgLy8gdmVpID0gdnVlIGV2ZW50IGludm9rZXJzXG4gICAgY29uc3QgaW52b2tlcnMgPSBlbC5fdmVpIHx8IChlbC5fdmVpID0ge30pO1xuICAgIGNvbnN0IGV4aXN0aW5nSW52b2tlciA9IGludm9rZXJzW3Jhd05hbWVdO1xuICAgIGlmIChuZXh0VmFsdWUgJiYgZXhpc3RpbmdJbnZva2VyKSB7XG4gICAgICAgIC8vIHBhdGNoXG4gICAgICAgIGV4aXN0aW5nSW52b2tlci52YWx1ZSA9IG5leHRWYWx1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IFtuYW1lLCBvcHRpb25zXSA9IHBhcnNlTmFtZShyYXdOYW1lKTtcbiAgICAgICAgaWYgKG5leHRWYWx1ZSkge1xuICAgICAgICAgICAgLy8gYWRkXG4gICAgICAgICAgICBjb25zdCBpbnZva2VyID0gKGludm9rZXJzW3Jhd05hbWVdID0gY3JlYXRlSW52b2tlcihuZXh0VmFsdWUsIGluc3RhbmNlKSk7XG4gICAgICAgICAgICBhZGRFdmVudExpc3RlbmVyKGVsLCBuYW1lLCBpbnZva2VyLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChleGlzdGluZ0ludm9rZXIpIHtcbiAgICAgICAgICAgIC8vIHJlbW92ZVxuICAgICAgICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihlbCwgbmFtZSwgZXhpc3RpbmdJbnZva2VyLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGludm9rZXJzW3Jhd05hbWVdID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxufVxuY29uc3Qgb3B0aW9uc01vZGlmaWVyUkUgPSAvKD86T25jZXxQYXNzaXZlfENhcHR1cmUpJC87XG5mdW5jdGlvbiBwYXJzZU5hbWUobmFtZSkge1xuICAgIGxldCBvcHRpb25zO1xuICAgIGlmIChvcHRpb25zTW9kaWZpZXJSRS50ZXN0KG5hbWUpKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgbGV0IG07XG4gICAgICAgIHdoaWxlICgobSA9IG5hbWUubWF0Y2gob3B0aW9uc01vZGlmaWVyUkUpKSkge1xuICAgICAgICAgICAgbmFtZSA9IG5hbWUuc2xpY2UoMCwgbmFtZS5sZW5ndGggLSBtWzBdLmxlbmd0aCk7XG4gICAgICAgICAgICBvcHRpb25zW21bMF0udG9Mb3dlckNhc2UoKV0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGV2ZW50ID0gbmFtZVsyXSA9PT0gJzonID8gbmFtZS5zbGljZSgzKSA6IGh5cGhlbmF0ZShuYW1lLnNsaWNlKDIpKTtcbiAgICByZXR1cm4gW2V2ZW50LCBvcHRpb25zXTtcbn1cbi8vIFRvIGF2b2lkIHRoZSBvdmVyaGVhZCBvZiByZXBlYXRlZGx5IGNhbGxpbmcgRGF0ZS5ub3coKSwgd2UgY2FjaGVcbi8vIGFuZCB1c2UgdGhlIHNhbWUgdGltZXN0YW1wIGZvciBhbGwgZXZlbnQgbGlzdGVuZXJzIGF0dGFjaGVkIGluIHRoZSBzYW1lIHRpY2suXG5sZXQgY2FjaGVkTm93ID0gMDtcbmNvbnN0IHAgPSAvKiNfX1BVUkVfXyovIFByb21pc2UucmVzb2x2ZSgpO1xuY29uc3QgZ2V0Tm93ID0gKCkgPT4gY2FjaGVkTm93IHx8IChwLnRoZW4oKCkgPT4gKGNhY2hlZE5vdyA9IDApKSwgKGNhY2hlZE5vdyA9IERhdGUubm93KCkpKTtcbmZ1bmN0aW9uIGNyZWF0ZUludm9rZXIoaW5pdGlhbFZhbHVlLCBpbnN0YW5jZSkge1xuICAgIGNvbnN0IGludm9rZXIgPSAoZSkgPT4ge1xuICAgICAgICAvLyBhc3luYyBlZGdlIGNhc2UgdnVlanMvdnVlIzY1NjZcbiAgICAgICAgLy8gaW5uZXIgY2xpY2sgZXZlbnQgdHJpZ2dlcnMgcGF0Y2gsIGV2ZW50IGhhbmRsZXJcbiAgICAgICAgLy8gYXR0YWNoZWQgdG8gb3V0ZXIgZWxlbWVudCBkdXJpbmcgcGF0Y2gsIGFuZCB0cmlnZ2VyZWQgYWdhaW4uIFRoaXNcbiAgICAgICAgLy8gaGFwcGVucyBiZWNhdXNlIGJyb3dzZXJzIGZpcmUgbWljcm90YXNrIHRpY2tzIGJldHdlZW4gZXZlbnQgcHJvcGFnYXRpb24uXG4gICAgICAgIC8vIHRoaXMgbm8gbG9uZ2VyIGhhcHBlbnMgZm9yIHRlbXBsYXRlcyBpbiBWdWUgMywgYnV0IGNvdWxkIHN0aWxsIGJlXG4gICAgICAgIC8vIHRoZW9yZXRpY2FsbHkgcG9zc2libGUgZm9yIGhhbmQtd3JpdHRlbiByZW5kZXIgZnVuY3Rpb25zLlxuICAgICAgICAvLyB0aGUgc29sdXRpb246IHdlIHNhdmUgdGhlIHRpbWVzdGFtcCB3aGVuIGEgaGFuZGxlciBpcyBhdHRhY2hlZCxcbiAgICAgICAgLy8gYW5kIGFsc28gYXR0YWNoIHRoZSB0aW1lc3RhbXAgdG8gYW55IGV2ZW50IHRoYXQgd2FzIGhhbmRsZWQgYnkgdnVlXG4gICAgICAgIC8vIGZvciB0aGUgZmlyc3QgdGltZSAodG8gYXZvaWQgaW5jb25zaXN0ZW50IGV2ZW50IHRpbWVzdGFtcCBpbXBsZW1lbnRhdGlvbnNcbiAgICAgICAgLy8gb3IgZXZlbnRzIGZpcmVkIGZyb20gaWZyYW1lcywgZS5nLiAjMjUxMylcbiAgICAgICAgLy8gVGhlIGhhbmRsZXIgd291bGQgb25seSBmaXJlIGlmIHRoZSBldmVudCBwYXNzZWQgdG8gaXQgd2FzIGZpcmVkXG4gICAgICAgIC8vIEFGVEVSIGl0IHdhcyBhdHRhY2hlZC5cbiAgICAgICAgaWYgKCFlLl92dHMpIHtcbiAgICAgICAgICAgIGUuX3Z0cyA9IERhdGUubm93KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZS5fdnRzIDw9IGludm9rZXIuYXR0YWNoZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZyhwYXRjaFN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbihlLCBpbnZva2VyLnZhbHVlKSwgaW5zdGFuY2UsIDUgLyogRXJyb3JDb2Rlcy5OQVRJVkVfRVZFTlRfSEFORExFUiAqLywgW2VdKTtcbiAgICB9O1xuICAgIGludm9rZXIudmFsdWUgPSBpbml0aWFsVmFsdWU7XG4gICAgaW52b2tlci5hdHRhY2hlZCA9IGdldE5vdygpO1xuICAgIHJldHVybiBpbnZva2VyO1xufVxuZnVuY3Rpb24gcGF0Y2hTdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oZSwgdmFsdWUpIHtcbiAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgY29uc3Qgb3JpZ2luYWxTdG9wID0gZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb247XG4gICAgICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uID0gKCkgPT4ge1xuICAgICAgICAgICAgb3JpZ2luYWxTdG9wLmNhbGwoZSk7XG4gICAgICAgICAgICBlLl9zdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHZhbHVlLm1hcChmbiA9PiAoZSkgPT4gIWUuX3N0b3BwZWQgJiYgZm4gJiYgZm4oZSkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbn1cblxuY29uc3QgbmF0aXZlT25SRSA9IC9eb25bYS16XS87XG5jb25zdCBwYXRjaFByb3AgPSAoZWwsIGtleSwgcHJldlZhbHVlLCBuZXh0VmFsdWUsIGlzU1ZHID0gZmFsc2UsIHByZXZDaGlsZHJlbiwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgdW5tb3VudENoaWxkcmVuKSA9PiB7XG4gICAgaWYgKGtleSA9PT0gJ2NsYXNzJykge1xuICAgICAgICBwYXRjaENsYXNzKGVsLCBuZXh0VmFsdWUsIGlzU1ZHKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoa2V5ID09PSAnc3R5bGUnKSB7XG4gICAgICAgIHBhdGNoU3R5bGUoZWwsIHByZXZWYWx1ZSwgbmV4dFZhbHVlKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNPbihrZXkpKSB7XG4gICAgICAgIC8vIGlnbm9yZSB2LW1vZGVsIGxpc3RlbmVyc1xuICAgICAgICBpZiAoIWlzTW9kZWxMaXN0ZW5lcihrZXkpKSB7XG4gICAgICAgICAgICBwYXRjaEV2ZW50KGVsLCBrZXksIHByZXZWYWx1ZSwgbmV4dFZhbHVlLCBwYXJlbnRDb21wb25lbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGtleVswXSA9PT0gJy4nXG4gICAgICAgID8gKChrZXkgPSBrZXkuc2xpY2UoMSkpLCB0cnVlKVxuICAgICAgICA6IGtleVswXSA9PT0gJ14nXG4gICAgICAgICAgICA/ICgoa2V5ID0ga2V5LnNsaWNlKDEpKSwgZmFsc2UpXG4gICAgICAgICAgICA6IHNob3VsZFNldEFzUHJvcChlbCwga2V5LCBuZXh0VmFsdWUsIGlzU1ZHKSkge1xuICAgICAgICBwYXRjaERPTVByb3AoZWwsIGtleSwgbmV4dFZhbHVlLCBwcmV2Q2hpbGRyZW4sIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHVubW91bnRDaGlsZHJlbik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBzcGVjaWFsIGNhc2UgZm9yIDxpbnB1dCB2LW1vZGVsIHR5cGU9XCJjaGVja2JveFwiPiB3aXRoXG4gICAgICAgIC8vIDp0cnVlLXZhbHVlICYgOmZhbHNlLXZhbHVlXG4gICAgICAgIC8vIHN0b3JlIHZhbHVlIGFzIGRvbSBwcm9wZXJ0aWVzIHNpbmNlIG5vbi1zdHJpbmcgdmFsdWVzIHdpbGwgYmVcbiAgICAgICAgLy8gc3RyaW5naWZpZWQuXG4gICAgICAgIGlmIChrZXkgPT09ICd0cnVlLXZhbHVlJykge1xuICAgICAgICAgICAgZWwuX3RydWVWYWx1ZSA9IG5leHRWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChrZXkgPT09ICdmYWxzZS12YWx1ZScpIHtcbiAgICAgICAgICAgIGVsLl9mYWxzZVZhbHVlID0gbmV4dFZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHBhdGNoQXR0cihlbCwga2V5LCBuZXh0VmFsdWUsIGlzU1ZHKTtcbiAgICB9XG59O1xuZnVuY3Rpb24gc2hvdWxkU2V0QXNQcm9wKGVsLCBrZXksIHZhbHVlLCBpc1NWRykge1xuICAgIGlmIChpc1NWRykge1xuICAgICAgICAvLyBtb3N0IGtleXMgbXVzdCBiZSBzZXQgYXMgYXR0cmlidXRlIG9uIHN2ZyBlbGVtZW50cyB0byB3b3JrXG4gICAgICAgIC8vIC4uLmV4Y2VwdCBpbm5lckhUTUwgJiB0ZXh0Q29udGVudFxuICAgICAgICBpZiAoa2V5ID09PSAnaW5uZXJIVE1MJyB8fCBrZXkgPT09ICd0ZXh0Q29udGVudCcpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIG9yIG5hdGl2ZSBvbmNsaWNrIHdpdGggZnVuY3Rpb24gdmFsdWVzXG4gICAgICAgIGlmIChrZXkgaW4gZWwgJiYgbmF0aXZlT25SRS50ZXN0KGtleSkgJiYgaXNGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gdGhlc2UgYXJlIGVudW1lcmF0ZWQgYXR0cnMsIGhvd2V2ZXIgdGhlaXIgY29ycmVzcG9uZGluZyBET00gcHJvcGVydGllc1xuICAgIC8vIGFyZSBhY3R1YWxseSBib29sZWFucyAtIHRoaXMgbGVhZHMgdG8gc2V0dGluZyBpdCB3aXRoIGEgc3RyaW5nIFwiZmFsc2VcIlxuICAgIC8vIHZhbHVlIGxlYWRpbmcgaXQgdG8gYmUgY29lcmNlZCB0byBgdHJ1ZWAsIHNvIHdlIG5lZWQgdG8gYWx3YXlzIHRyZWF0XG4gICAgLy8gdGhlbSBhcyBhdHRyaWJ1dGVzLlxuICAgIC8vIE5vdGUgdGhhdCBgY29udGVudEVkaXRhYmxlYCBkb2Vzbid0IGhhdmUgdGhpcyBwcm9ibGVtOiBpdHMgRE9NXG4gICAgLy8gcHJvcGVydHkgaXMgYWxzbyBlbnVtZXJhdGVkIHN0cmluZyB2YWx1ZXMuXG4gICAgaWYgKGtleSA9PT0gJ3NwZWxsY2hlY2snIHx8IGtleSA9PT0gJ2RyYWdnYWJsZScgfHwga2V5ID09PSAndHJhbnNsYXRlJykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vICMxNzg3LCAjMjg0MCBmb3JtIHByb3BlcnR5IG9uIGZvcm0gZWxlbWVudHMgaXMgcmVhZG9ubHkgYW5kIG11c3QgYmUgc2V0IGFzXG4gICAgLy8gYXR0cmlidXRlLlxuICAgIGlmIChrZXkgPT09ICdmb3JtJykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vICMxNTI2IDxpbnB1dCBsaXN0PiBtdXN0IGJlIHNldCBhcyBhdHRyaWJ1dGVcbiAgICBpZiAoa2V5ID09PSAnbGlzdCcgJiYgZWwudGFnTmFtZSA9PT0gJ0lOUFVUJykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vICMyNzY2IDx0ZXh0YXJlYSB0eXBlPiBtdXN0IGJlIHNldCBhcyBhdHRyaWJ1dGVcbiAgICBpZiAoa2V5ID09PSAndHlwZScgJiYgZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vIG5hdGl2ZSBvbmNsaWNrIHdpdGggc3RyaW5nIHZhbHVlLCBtdXN0IGJlIHNldCBhcyBhdHRyaWJ1dGVcbiAgICBpZiAobmF0aXZlT25SRS50ZXN0KGtleSkgJiYgaXNTdHJpbmcodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIGtleSBpbiBlbDtcbn1cblxuZnVuY3Rpb24gZGVmaW5lQ3VzdG9tRWxlbWVudChvcHRpb25zLCBoeWRyYXRlKSB7XG4gICAgY29uc3QgQ29tcCA9IGRlZmluZUNvbXBvbmVudChvcHRpb25zKTtcbiAgICBjbGFzcyBWdWVDdXN0b21FbGVtZW50IGV4dGVuZHMgVnVlRWxlbWVudCB7XG4gICAgICAgIGNvbnN0cnVjdG9yKGluaXRpYWxQcm9wcykge1xuICAgICAgICAgICAgc3VwZXIoQ29tcCwgaW5pdGlhbFByb3BzLCBoeWRyYXRlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBWdWVDdXN0b21FbGVtZW50LmRlZiA9IENvbXA7XG4gICAgcmV0dXJuIFZ1ZUN1c3RvbUVsZW1lbnQ7XG59XG5jb25zdCBkZWZpbmVTU1JDdXN0b21FbGVtZW50ID0gKChvcHRpb25zKSA9PiB7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHJldHVybiBkZWZpbmVDdXN0b21FbGVtZW50KG9wdGlvbnMsIGh5ZHJhdGUpO1xufSk7XG5jb25zdCBCYXNlQ2xhc3MgPSAodHlwZW9mIEhUTUxFbGVtZW50ICE9PSAndW5kZWZpbmVkJyA/IEhUTUxFbGVtZW50IDogY2xhc3Mge1xufSk7XG5jbGFzcyBWdWVFbGVtZW50IGV4dGVuZHMgQmFzZUNsYXNzIHtcbiAgICBjb25zdHJ1Y3RvcihfZGVmLCBfcHJvcHMgPSB7fSwgaHlkcmF0ZSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLl9kZWYgPSBfZGVmO1xuICAgICAgICB0aGlzLl9wcm9wcyA9IF9wcm9wcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5faW5zdGFuY2UgPSBudWxsO1xuICAgICAgICB0aGlzLl9jb25uZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fcmVzb2x2ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fbnVtYmVyUHJvcHMgPSBudWxsO1xuICAgICAgICBpZiAodGhpcy5zaGFkb3dSb290ICYmIGh5ZHJhdGUpIHtcbiAgICAgICAgICAgIGh5ZHJhdGUodGhpcy5fY3JlYXRlVk5vZGUoKSwgdGhpcy5zaGFkb3dSb290KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgdGhpcy5zaGFkb3dSb290KSB7XG4gICAgICAgICAgICAgICAgd2FybihgQ3VzdG9tIGVsZW1lbnQgaGFzIHByZS1yZW5kZXJlZCBkZWNsYXJhdGl2ZSBzaGFkb3cgcm9vdCBidXQgaXMgbm90IGAgK1xuICAgICAgICAgICAgICAgICAgICBgZGVmaW5lZCBhcyBoeWRyYXRhYmxlLiBVc2UgXFxgZGVmaW5lU1NSQ3VzdG9tRWxlbWVudFxcYC5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogJ29wZW4nIH0pO1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9kZWYuX19hc3luY0xvYWRlcikge1xuICAgICAgICAgICAgICAgIC8vIGZvciBzeW5jIGNvbXBvbmVudCBkZWZzIHdlIGNhbiBpbW1lZGlhdGVseSByZXNvbHZlIHByb3BzXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZVByb3BzKHRoaXMuX2RlZik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIHRoaXMuX2Nvbm5lY3RlZCA9IHRydWU7XG4gICAgICAgIGlmICghdGhpcy5faW5zdGFuY2UpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9yZXNvbHZlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZURlZigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICB0aGlzLl9jb25uZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgbmV4dFRpY2soKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9jb25uZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICByZW5kZXIobnVsbCwgdGhpcy5zaGFkb3dSb290KTtcbiAgICAgICAgICAgICAgICB0aGlzLl9pbnN0YW5jZSA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiByZXNvbHZlIGlubmVyIGNvbXBvbmVudCBkZWZpbml0aW9uIChoYW5kbGUgcG9zc2libGUgYXN5bmMgY29tcG9uZW50KVxuICAgICAqL1xuICAgIF9yZXNvbHZlRGVmKCkge1xuICAgICAgICB0aGlzLl9yZXNvbHZlZCA9IHRydWU7XG4gICAgICAgIC8vIHNldCBpbml0aWFsIGF0dHJzXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5hdHRyaWJ1dGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLl9zZXRBdHRyKHRoaXMuYXR0cmlidXRlc1tpXS5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgICAvLyB3YXRjaCBmdXR1cmUgYXR0ciBjaGFuZ2VzXG4gICAgICAgIG5ldyBNdXRhdGlvbk9ic2VydmVyKG11dGF0aW9ucyA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG0gb2YgbXV0YXRpb25zKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fc2V0QXR0cihtLmF0dHJpYnV0ZU5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KS5vYnNlcnZlKHRoaXMsIHsgYXR0cmlidXRlczogdHJ1ZSB9KTtcbiAgICAgICAgY29uc3QgcmVzb2x2ZSA9IChkZWYsIGlzQXN5bmMgPSBmYWxzZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyBwcm9wcywgc3R5bGVzIH0gPSBkZWY7XG4gICAgICAgICAgICAvLyBjYXN0IE51bWJlci10eXBlIHByb3BzIHNldCBiZWZvcmUgcmVzb2x2ZVxuICAgICAgICAgICAgbGV0IG51bWJlclByb3BzO1xuICAgICAgICAgICAgaWYgKHByb3BzICYmICFpc0FycmF5KHByb3BzKSkge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHByb3BzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdCA9IHByb3BzW2tleV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHQgPT09IE51bWJlciB8fCAob3B0ICYmIG9wdC50eXBlID09PSBOdW1iZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5IGluIHRoaXMuX3Byb3BzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcHJvcHNba2V5XSA9IHRvTnVtYmVyKHRoaXMuX3Byb3BzW2tleV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgKG51bWJlclByb3BzIHx8IChudW1iZXJQcm9wcyA9IE9iamVjdC5jcmVhdGUobnVsbCkpKVtjYW1lbGl6ZSQxKGtleSldID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX251bWJlclByb3BzID0gbnVtYmVyUHJvcHM7XG4gICAgICAgICAgICBpZiAoaXNBc3luYykge1xuICAgICAgICAgICAgICAgIC8vIGRlZmluaW5nIGdldHRlci9zZXR0ZXJzIG9uIHByb3RvdHlwZVxuICAgICAgICAgICAgICAgIC8vIGZvciBzeW5jIGRlZnMsIHRoaXMgYWxyZWFkeSBoYXBwZW5lZCBpbiB0aGUgY29uc3RydWN0b3JcbiAgICAgICAgICAgICAgICB0aGlzLl9yZXNvbHZlUHJvcHMoZGVmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGFwcGx5IENTU1xuICAgICAgICAgICAgdGhpcy5fYXBwbHlTdHlsZXMoc3R5bGVzKTtcbiAgICAgICAgICAgIC8vIGluaXRpYWwgcmVuZGVyXG4gICAgICAgICAgICB0aGlzLl91cGRhdGUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgYXN5bmNEZWYgPSB0aGlzLl9kZWYuX19hc3luY0xvYWRlcjtcbiAgICAgICAgaWYgKGFzeW5jRGVmKSB7XG4gICAgICAgICAgICBhc3luY0RlZigpLnRoZW4oZGVmID0+IHJlc29sdmUoZGVmLCB0cnVlKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXNvbHZlKHRoaXMuX2RlZik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX3Jlc29sdmVQcm9wcyhkZWYpIHtcbiAgICAgICAgY29uc3QgeyBwcm9wcyB9ID0gZGVmO1xuICAgICAgICBjb25zdCBkZWNsYXJlZFByb3BLZXlzID0gaXNBcnJheShwcm9wcykgPyBwcm9wcyA6IE9iamVjdC5rZXlzKHByb3BzIHx8IHt9KTtcbiAgICAgICAgLy8gY2hlY2sgaWYgdGhlcmUgYXJlIHByb3BzIHNldCBwcmUtdXBncmFkZSBvciBjb25uZWN0XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHRoaXMpKSB7XG4gICAgICAgICAgICBpZiAoa2V5WzBdICE9PSAnXycgJiYgZGVjbGFyZWRQcm9wS2V5cy5pbmNsdWRlcyhrZXkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fc2V0UHJvcChrZXksIHRoaXNba2V5XSwgdHJ1ZSwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGRlZmluaW5nIGdldHRlci9zZXR0ZXJzIG9uIHByb3RvdHlwZVxuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBkZWNsYXJlZFByb3BLZXlzLm1hcChjYW1lbGl6ZSQxKSkge1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIGtleSwge1xuICAgICAgICAgICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dldFByb3Aoa2V5KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNldCh2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2V0UHJvcChrZXksIHZhbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX3NldEF0dHIoa2V5KSB7XG4gICAgICAgIGxldCB2YWx1ZSA9IHRoaXMuZ2V0QXR0cmlidXRlKGtleSk7XG4gICAgICAgIGNvbnN0IGNhbWVsS2V5ID0gY2FtZWxpemUkMShrZXkpO1xuICAgICAgICBpZiAodGhpcy5fbnVtYmVyUHJvcHMgJiYgdGhpcy5fbnVtYmVyUHJvcHNbY2FtZWxLZXldKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHRvTnVtYmVyKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zZXRQcm9wKGNhbWVsS2V5LCB2YWx1ZSwgZmFsc2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBfZ2V0UHJvcChrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Byb3BzW2tleV07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIF9zZXRQcm9wKGtleSwgdmFsLCBzaG91bGRSZWZsZWN0ID0gdHJ1ZSwgc2hvdWxkVXBkYXRlID0gdHJ1ZSkge1xuICAgICAgICBpZiAodmFsICE9PSB0aGlzLl9wcm9wc1trZXldKSB7XG4gICAgICAgICAgICB0aGlzLl9wcm9wc1trZXldID0gdmFsO1xuICAgICAgICAgICAgaWYgKHNob3VsZFVwZGF0ZSAmJiB0aGlzLl9pbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gcmVmbGVjdFxuICAgICAgICAgICAgaWYgKHNob3VsZFJlZmxlY3QpIHtcbiAgICAgICAgICAgICAgICBpZiAodmFsID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKGh5cGhlbmF0ZShrZXkpLCAnJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKGh5cGhlbmF0ZShrZXkpLCB2YWwgKyAnJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCF2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUoaHlwaGVuYXRlKGtleSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBfdXBkYXRlKCkge1xuICAgICAgICByZW5kZXIodGhpcy5fY3JlYXRlVk5vZGUoKSwgdGhpcy5zaGFkb3dSb290KTtcbiAgICB9XG4gICAgX2NyZWF0ZVZOb2RlKCkge1xuICAgICAgICBjb25zdCB2bm9kZSA9IGNyZWF0ZVZOb2RlKHRoaXMuX2RlZiwgZXh0ZW5kKHt9LCB0aGlzLl9wcm9wcykpO1xuICAgICAgICBpZiAoIXRoaXMuX2luc3RhbmNlKSB7XG4gICAgICAgICAgICB2bm9kZS5jZSA9IGluc3RhbmNlID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9pbnN0YW5jZSA9IGluc3RhbmNlO1xuICAgICAgICAgICAgICAgIGluc3RhbmNlLmlzQ0UgPSB0cnVlO1xuICAgICAgICAgICAgICAgIC8vIEhNUlxuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UuY2VSZWxvYWQgPSBuZXdTdHlsZXMgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWx3YXlzIHJlc2V0IHN0eWxlc1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3N0eWxlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3N0eWxlcy5mb3JFYWNoKHMgPT4gdGhpcy5zaGFkb3dSb290LnJlbW92ZUNoaWxkKHMpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zdHlsZXMubGVuZ3RoID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2FwcGx5U3R5bGVzKG5ld1N0eWxlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9pbnN0YW5jZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgZGlzcGF0Y2ggPSAoZXZlbnQsIGFyZ3MpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChldmVudCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiBhcmdzXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIC8vIGludGVyY2VwdCBlbWl0XG4gICAgICAgICAgICAgICAgaW5zdGFuY2UuZW1pdCA9IChldmVudCwgLi4uYXJncykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBkaXNwYXRjaCBib3RoIHRoZSByYXcgYW5kIGh5cGhlbmF0ZWQgdmVyc2lvbnMgb2YgYW4gZXZlbnRcbiAgICAgICAgICAgICAgICAgICAgLy8gdG8gbWF0Y2ggVnVlIGJlaGF2aW9yXG4gICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKGV2ZW50LCBhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGh5cGhlbmF0ZShldmVudCkgIT09IGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaChoeXBoZW5hdGUoZXZlbnQpLCBhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgLy8gbG9jYXRlIG5lYXJlc3QgVnVlIGN1c3RvbSBlbGVtZW50IHBhcmVudCBmb3IgcHJvdmlkZS9pbmplY3RcbiAgICAgICAgICAgICAgICBsZXQgcGFyZW50ID0gdGhpcztcbiAgICAgICAgICAgICAgICB3aGlsZSAoKHBhcmVudCA9XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudCAmJiAocGFyZW50LnBhcmVudE5vZGUgfHwgcGFyZW50Lmhvc3QpKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50IGluc3RhbmNlb2YgVnVlRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UucGFyZW50ID0gcGFyZW50Ll9pbnN0YW5jZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLnByb3ZpZGVzID0gcGFyZW50Ll9pbnN0YW5jZS5wcm92aWRlcztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdm5vZGU7XG4gICAgfVxuICAgIF9hcHBseVN0eWxlcyhzdHlsZXMpIHtcbiAgICAgICAgaWYgKHN0eWxlcykge1xuICAgICAgICAgICAgc3R5bGVzLmZvckVhY2goY3NzID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICAgICAgICAgICAgICBzLnRleHRDb250ZW50ID0gY3NzO1xuICAgICAgICAgICAgICAgIHRoaXMuc2hhZG93Um9vdC5hcHBlbmRDaGlsZChzKTtcbiAgICAgICAgICAgICAgICAvLyByZWNvcmQgZm9yIEhNUlxuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMuX3N0eWxlcyB8fCAodGhpcy5fc3R5bGVzID0gW10pKS5wdXNoKHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiB1c2VDc3NNb2R1bGUobmFtZSA9ICckc3R5bGUnKSB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICB7XG4gICAgICAgIGNvbnN0IGluc3RhbmNlID0gZ2V0Q3VycmVudEluc3RhbmNlKCk7XG4gICAgICAgIGlmICghaW5zdGFuY2UpIHtcbiAgICAgICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiB3YXJuKGB1c2VDc3NNb2R1bGUgbXVzdCBiZSBjYWxsZWQgaW5zaWRlIHNldHVwKClgKTtcbiAgICAgICAgICAgIHJldHVybiBFTVBUWV9PQko7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbW9kdWxlcyA9IGluc3RhbmNlLnR5cGUuX19jc3NNb2R1bGVzO1xuICAgICAgICBpZiAoIW1vZHVsZXMpIHtcbiAgICAgICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiB3YXJuKGBDdXJyZW50IGluc3RhbmNlIGRvZXMgbm90IGhhdmUgQ1NTIG1vZHVsZXMgaW5qZWN0ZWQuYCk7XG4gICAgICAgICAgICByZXR1cm4gRU1QVFlfT0JKO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1vZCA9IG1vZHVsZXNbbmFtZV07XG4gICAgICAgIGlmICghbW9kKSB7XG4gICAgICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcbiAgICAgICAgICAgICAgICB3YXJuKGBDdXJyZW50IGluc3RhbmNlIGRvZXMgbm90IGhhdmUgQ1NTIG1vZHVsZSBuYW1lZCBcIiR7bmFtZX1cIi5gKTtcbiAgICAgICAgICAgIHJldHVybiBFTVBUWV9PQko7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1vZDtcbiAgICB9XG59XG5cbi8qKlxuICogUnVudGltZSBoZWxwZXIgZm9yIFNGQydzIENTUyB2YXJpYWJsZSBpbmplY3Rpb24gZmVhdHVyZS5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHVzZUNzc1ZhcnMoZ2V0dGVyKSB7XG4gICAgY29uc3QgaW5zdGFuY2UgPSBnZXRDdXJyZW50SW5zdGFuY2UoKTtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIGlmICghaW5zdGFuY2UpIHtcbiAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXG4gICAgICAgICAgICB3YXJuKGB1c2VDc3NWYXJzIGlzIGNhbGxlZCB3aXRob3V0IGN1cnJlbnQgYWN0aXZlIGNvbXBvbmVudCBpbnN0YW5jZS5gKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB1cGRhdGVUZWxlcG9ydHMgPSAoaW5zdGFuY2UudXQgPSAodmFycyA9IGdldHRlcihpbnN0YW5jZS5wcm94eSkpID0+IHtcbiAgICAgICAgQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGBbZGF0YS12LW93bmVyPVwiJHtpbnN0YW5jZS51aWR9XCJdYCkpLmZvckVhY2gobm9kZSA9PiBzZXRWYXJzT25Ob2RlKG5vZGUsIHZhcnMpKTtcbiAgICB9KTtcbiAgICBjb25zdCBzZXRWYXJzID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB2YXJzID0gZ2V0dGVyKGluc3RhbmNlLnByb3h5KTtcbiAgICAgICAgc2V0VmFyc09uVk5vZGUoaW5zdGFuY2Uuc3ViVHJlZSwgdmFycyk7XG4gICAgICAgIHVwZGF0ZVRlbGVwb3J0cyh2YXJzKTtcbiAgICB9O1xuICAgIHdhdGNoUG9zdEVmZmVjdChzZXRWYXJzKTtcbiAgICBvbk1vdW50ZWQoKCkgPT4ge1xuICAgICAgICBjb25zdCBvYiA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKHNldFZhcnMpO1xuICAgICAgICBvYi5vYnNlcnZlKGluc3RhbmNlLnN1YlRyZWUuZWwucGFyZW50Tm9kZSwgeyBjaGlsZExpc3Q6IHRydWUgfSk7XG4gICAgICAgIG9uVW5tb3VudGVkKCgpID0+IG9iLmRpc2Nvbm5lY3QoKSk7XG4gICAgfSk7XG59XG5mdW5jdGlvbiBzZXRWYXJzT25WTm9kZSh2bm9kZSwgdmFycykge1xuICAgIGlmICh2bm9kZS5zaGFwZUZsYWcgJiAxMjggLyogU2hhcGVGbGFncy5TVVNQRU5TRSAqLykge1xuICAgICAgICBjb25zdCBzdXNwZW5zZSA9IHZub2RlLnN1c3BlbnNlO1xuICAgICAgICB2bm9kZSA9IHN1c3BlbnNlLmFjdGl2ZUJyYW5jaDtcbiAgICAgICAgaWYgKHN1c3BlbnNlLnBlbmRpbmdCcmFuY2ggJiYgIXN1c3BlbnNlLmlzSHlkcmF0aW5nKSB7XG4gICAgICAgICAgICBzdXNwZW5zZS5lZmZlY3RzLnB1c2goKCkgPT4ge1xuICAgICAgICAgICAgICAgIHNldFZhcnNPblZOb2RlKHN1c3BlbnNlLmFjdGl2ZUJyYW5jaCwgdmFycyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBkcmlsbCBkb3duIEhPQ3MgdW50aWwgaXQncyBhIG5vbi1jb21wb25lbnQgdm5vZGVcbiAgICB3aGlsZSAodm5vZGUuY29tcG9uZW50KSB7XG4gICAgICAgIHZub2RlID0gdm5vZGUuY29tcG9uZW50LnN1YlRyZWU7XG4gICAgfVxuICAgIGlmICh2bm9kZS5zaGFwZUZsYWcgJiAxIC8qIFNoYXBlRmxhZ3MuRUxFTUVOVCAqLyAmJiB2bm9kZS5lbCkge1xuICAgICAgICBzZXRWYXJzT25Ob2RlKHZub2RlLmVsLCB2YXJzKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodm5vZGUudHlwZSA9PT0gRnJhZ21lbnQpIHtcbiAgICAgICAgdm5vZGUuY2hpbGRyZW4uZm9yRWFjaChjID0+IHNldFZhcnNPblZOb2RlKGMsIHZhcnMpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodm5vZGUudHlwZSA9PT0gU3RhdGljKSB7XG4gICAgICAgIGxldCB7IGVsLCBhbmNob3IgfSA9IHZub2RlO1xuICAgICAgICB3aGlsZSAoZWwpIHtcbiAgICAgICAgICAgIHNldFZhcnNPbk5vZGUoZWwsIHZhcnMpO1xuICAgICAgICAgICAgaWYgKGVsID09PSBhbmNob3IpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBlbCA9IGVsLm5leHRTaWJsaW5nO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gc2V0VmFyc09uTm9kZShlbCwgdmFycykge1xuICAgIGlmIChlbC5ub2RlVHlwZSA9PT0gMSkge1xuICAgICAgICBjb25zdCBzdHlsZSA9IGVsLnN0eWxlO1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB2YXJzKSB7XG4gICAgICAgICAgICBzdHlsZS5zZXRQcm9wZXJ0eShgLS0ke2tleX1gLCB2YXJzW2tleV0pO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5jb25zdCBUUkFOU0lUSU9OID0gJ3RyYW5zaXRpb24nO1xuY29uc3QgQU5JTUFUSU9OID0gJ2FuaW1hdGlvbic7XG4vLyBET00gVHJhbnNpdGlvbiBpcyBhIGhpZ2hlci1vcmRlci1jb21wb25lbnQgYmFzZWQgb24gdGhlIHBsYXRmb3JtLWFnbm9zdGljXG4vLyBiYXNlIFRyYW5zaXRpb24gY29tcG9uZW50LCB3aXRoIERPTS1zcGVjaWZpYyBsb2dpYy5cbmNvbnN0IFRyYW5zaXRpb24gPSAocHJvcHMsIHsgc2xvdHMgfSkgPT4gaChCYXNlVHJhbnNpdGlvbiwgcmVzb2x2ZVRyYW5zaXRpb25Qcm9wcyhwcm9wcyksIHNsb3RzKTtcblRyYW5zaXRpb24uZGlzcGxheU5hbWUgPSAnVHJhbnNpdGlvbic7XG5jb25zdCBET01UcmFuc2l0aW9uUHJvcHNWYWxpZGF0b3JzID0ge1xuICAgIG5hbWU6IFN0cmluZyxcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgY3NzOiB7XG4gICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgIGRlZmF1bHQ6IHRydWVcbiAgICB9LFxuICAgIGR1cmF0aW9uOiBbU3RyaW5nLCBOdW1iZXIsIE9iamVjdF0sXG4gICAgZW50ZXJGcm9tQ2xhc3M6IFN0cmluZyxcbiAgICBlbnRlckFjdGl2ZUNsYXNzOiBTdHJpbmcsXG4gICAgZW50ZXJUb0NsYXNzOiBTdHJpbmcsXG4gICAgYXBwZWFyRnJvbUNsYXNzOiBTdHJpbmcsXG4gICAgYXBwZWFyQWN0aXZlQ2xhc3M6IFN0cmluZyxcbiAgICBhcHBlYXJUb0NsYXNzOiBTdHJpbmcsXG4gICAgbGVhdmVGcm9tQ2xhc3M6IFN0cmluZyxcbiAgICBsZWF2ZUFjdGl2ZUNsYXNzOiBTdHJpbmcsXG4gICAgbGVhdmVUb0NsYXNzOiBTdHJpbmdcbn07XG5jb25zdCBUcmFuc2l0aW9uUHJvcHNWYWxpZGF0b3JzID0gKFRyYW5zaXRpb24ucHJvcHMgPVxuICAgIC8qI19fUFVSRV9fKi8gZXh0ZW5kKHt9LCBCYXNlVHJhbnNpdGlvbi5wcm9wcywgRE9NVHJhbnNpdGlvblByb3BzVmFsaWRhdG9ycykpO1xuLyoqXG4gKiAjMzIyNyBJbmNvbWluZyBob29rcyBtYXkgYmUgbWVyZ2VkIGludG8gYXJyYXlzIHdoZW4gd3JhcHBpbmcgVHJhbnNpdGlvblxuICogd2l0aCBjdXN0b20gSE9Dcy5cbiAqL1xuY29uc3QgY2FsbEhvb2sgPSAoaG9vaywgYXJncyA9IFtdKSA9PiB7XG4gICAgaWYgKGlzQXJyYXkoaG9vaykpIHtcbiAgICAgICAgaG9vay5mb3JFYWNoKGggPT4gaCguLi5hcmdzKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGhvb2spIHtcbiAgICAgICAgaG9vayguLi5hcmdzKTtcbiAgICB9XG59O1xuLyoqXG4gKiBDaGVjayBpZiBhIGhvb2sgZXhwZWN0cyBhIGNhbGxiYWNrICgybmQgYXJnKSwgd2hpY2ggbWVhbnMgdGhlIHVzZXJcbiAqIGludGVuZHMgdG8gZXhwbGljaXRseSBjb250cm9sIHRoZSBlbmQgb2YgdGhlIHRyYW5zaXRpb24uXG4gKi9cbmNvbnN0IGhhc0V4cGxpY2l0Q2FsbGJhY2sgPSAoaG9vaykgPT4ge1xuICAgIHJldHVybiBob29rXG4gICAgICAgID8gaXNBcnJheShob29rKVxuICAgICAgICAgICAgPyBob29rLnNvbWUoaCA9PiBoLmxlbmd0aCA+IDEpXG4gICAgICAgICAgICA6IGhvb2subGVuZ3RoID4gMVxuICAgICAgICA6IGZhbHNlO1xufTtcbmZ1bmN0aW9uIHJlc29sdmVUcmFuc2l0aW9uUHJvcHMocmF3UHJvcHMpIHtcbiAgICBjb25zdCBiYXNlUHJvcHMgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiByYXdQcm9wcykge1xuICAgICAgICBpZiAoIShrZXkgaW4gRE9NVHJhbnNpdGlvblByb3BzVmFsaWRhdG9ycykpIHtcbiAgICAgICAgICAgIGJhc2VQcm9wc1trZXldID0gcmF3UHJvcHNba2V5XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAocmF3UHJvcHMuY3NzID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gYmFzZVByb3BzO1xuICAgIH1cbiAgICBjb25zdCB7IG5hbWUgPSAndicsIHR5cGUsIGR1cmF0aW9uLCBlbnRlckZyb21DbGFzcyA9IGAke25hbWV9LWVudGVyLWZyb21gLCBlbnRlckFjdGl2ZUNsYXNzID0gYCR7bmFtZX0tZW50ZXItYWN0aXZlYCwgZW50ZXJUb0NsYXNzID0gYCR7bmFtZX0tZW50ZXItdG9gLCBhcHBlYXJGcm9tQ2xhc3MgPSBlbnRlckZyb21DbGFzcywgYXBwZWFyQWN0aXZlQ2xhc3MgPSBlbnRlckFjdGl2ZUNsYXNzLCBhcHBlYXJUb0NsYXNzID0gZW50ZXJUb0NsYXNzLCBsZWF2ZUZyb21DbGFzcyA9IGAke25hbWV9LWxlYXZlLWZyb21gLCBsZWF2ZUFjdGl2ZUNsYXNzID0gYCR7bmFtZX0tbGVhdmUtYWN0aXZlYCwgbGVhdmVUb0NsYXNzID0gYCR7bmFtZX0tbGVhdmUtdG9gIH0gPSByYXdQcm9wcztcbiAgICBjb25zdCBkdXJhdGlvbnMgPSBub3JtYWxpemVEdXJhdGlvbihkdXJhdGlvbik7XG4gICAgY29uc3QgZW50ZXJEdXJhdGlvbiA9IGR1cmF0aW9ucyAmJiBkdXJhdGlvbnNbMF07XG4gICAgY29uc3QgbGVhdmVEdXJhdGlvbiA9IGR1cmF0aW9ucyAmJiBkdXJhdGlvbnNbMV07XG4gICAgY29uc3QgeyBvbkJlZm9yZUVudGVyLCBvbkVudGVyLCBvbkVudGVyQ2FuY2VsbGVkLCBvbkxlYXZlLCBvbkxlYXZlQ2FuY2VsbGVkLCBvbkJlZm9yZUFwcGVhciA9IG9uQmVmb3JlRW50ZXIsIG9uQXBwZWFyID0gb25FbnRlciwgb25BcHBlYXJDYW5jZWxsZWQgPSBvbkVudGVyQ2FuY2VsbGVkIH0gPSBiYXNlUHJvcHM7XG4gICAgY29uc3QgZmluaXNoRW50ZXIgPSAoZWwsIGlzQXBwZWFyLCBkb25lKSA9PiB7XG4gICAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgaXNBcHBlYXIgPyBhcHBlYXJUb0NsYXNzIDogZW50ZXJUb0NsYXNzKTtcbiAgICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBpc0FwcGVhciA/IGFwcGVhckFjdGl2ZUNsYXNzIDogZW50ZXJBY3RpdmVDbGFzcyk7XG4gICAgICAgIGRvbmUgJiYgZG9uZSgpO1xuICAgIH07XG4gICAgY29uc3QgZmluaXNoTGVhdmUgPSAoZWwsIGRvbmUpID0+IHtcbiAgICAgICAgZWwuX2lzTGVhdmluZyA9IGZhbHNlO1xuICAgICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIGxlYXZlRnJvbUNsYXNzKTtcbiAgICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBsZWF2ZVRvQ2xhc3MpO1xuICAgICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIGxlYXZlQWN0aXZlQ2xhc3MpO1xuICAgICAgICBkb25lICYmIGRvbmUoKTtcbiAgICB9O1xuICAgIGNvbnN0IG1ha2VFbnRlckhvb2sgPSAoaXNBcHBlYXIpID0+IHtcbiAgICAgICAgcmV0dXJuIChlbCwgZG9uZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaG9vayA9IGlzQXBwZWFyID8gb25BcHBlYXIgOiBvbkVudGVyO1xuICAgICAgICAgICAgY29uc3QgcmVzb2x2ZSA9ICgpID0+IGZpbmlzaEVudGVyKGVsLCBpc0FwcGVhciwgZG9uZSk7XG4gICAgICAgICAgICBjYWxsSG9vayhob29rLCBbZWwsIHJlc29sdmVdKTtcbiAgICAgICAgICAgIG5leHRGcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBpc0FwcGVhciA/IGFwcGVhckZyb21DbGFzcyA6IGVudGVyRnJvbUNsYXNzKTtcbiAgICAgICAgICAgICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIGlzQXBwZWFyID8gYXBwZWFyVG9DbGFzcyA6IGVudGVyVG9DbGFzcyk7XG4gICAgICAgICAgICAgICAgaWYgKCFoYXNFeHBsaWNpdENhbGxiYWNrKGhvb2spKSB7XG4gICAgICAgICAgICAgICAgICAgIHdoZW5UcmFuc2l0aW9uRW5kcyhlbCwgdHlwZSwgZW50ZXJEdXJhdGlvbiwgcmVzb2x2ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICByZXR1cm4gZXh0ZW5kKGJhc2VQcm9wcywge1xuICAgICAgICBvbkJlZm9yZUVudGVyKGVsKSB7XG4gICAgICAgICAgICBjYWxsSG9vayhvbkJlZm9yZUVudGVyLCBbZWxdKTtcbiAgICAgICAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgZW50ZXJGcm9tQ2xhc3MpO1xuICAgICAgICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBlbnRlckFjdGl2ZUNsYXNzKTtcbiAgICAgICAgfSxcbiAgICAgICAgb25CZWZvcmVBcHBlYXIoZWwpIHtcbiAgICAgICAgICAgIGNhbGxIb29rKG9uQmVmb3JlQXBwZWFyLCBbZWxdKTtcbiAgICAgICAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgYXBwZWFyRnJvbUNsYXNzKTtcbiAgICAgICAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgYXBwZWFyQWN0aXZlQ2xhc3MpO1xuICAgICAgICB9LFxuICAgICAgICBvbkVudGVyOiBtYWtlRW50ZXJIb29rKGZhbHNlKSxcbiAgICAgICAgb25BcHBlYXI6IG1ha2VFbnRlckhvb2sodHJ1ZSksXG4gICAgICAgIG9uTGVhdmUoZWwsIGRvbmUpIHtcbiAgICAgICAgICAgIGVsLl9pc0xlYXZpbmcgPSB0cnVlO1xuICAgICAgICAgICAgY29uc3QgcmVzb2x2ZSA9ICgpID0+IGZpbmlzaExlYXZlKGVsLCBkb25lKTtcbiAgICAgICAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVGcm9tQ2xhc3MpO1xuICAgICAgICAgICAgLy8gZm9yY2UgcmVmbG93IHNvICotbGVhdmUtZnJvbSBjbGFzc2VzIGltbWVkaWF0ZWx5IHRha2UgZWZmZWN0ICgjMjU5MylcbiAgICAgICAgICAgIGZvcmNlUmVmbG93KCk7XG4gICAgICAgICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIGxlYXZlQWN0aXZlQ2xhc3MpO1xuICAgICAgICAgICAgbmV4dEZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWVsLl9pc0xlYXZpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY2FuY2VsbGVkXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBsZWF2ZUZyb21DbGFzcyk7XG4gICAgICAgICAgICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBsZWF2ZVRvQ2xhc3MpO1xuICAgICAgICAgICAgICAgIGlmICghaGFzRXhwbGljaXRDYWxsYmFjayhvbkxlYXZlKSkge1xuICAgICAgICAgICAgICAgICAgICB3aGVuVHJhbnNpdGlvbkVuZHMoZWwsIHR5cGUsIGxlYXZlRHVyYXRpb24sIHJlc29sdmUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY2FsbEhvb2sob25MZWF2ZSwgW2VsLCByZXNvbHZlXSk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uRW50ZXJDYW5jZWxsZWQoZWwpIHtcbiAgICAgICAgICAgIGZpbmlzaEVudGVyKGVsLCBmYWxzZSk7XG4gICAgICAgICAgICBjYWxsSG9vayhvbkVudGVyQ2FuY2VsbGVkLCBbZWxdKTtcbiAgICAgICAgfSxcbiAgICAgICAgb25BcHBlYXJDYW5jZWxsZWQoZWwpIHtcbiAgICAgICAgICAgIGZpbmlzaEVudGVyKGVsLCB0cnVlKTtcbiAgICAgICAgICAgIGNhbGxIb29rKG9uQXBwZWFyQ2FuY2VsbGVkLCBbZWxdKTtcbiAgICAgICAgfSxcbiAgICAgICAgb25MZWF2ZUNhbmNlbGxlZChlbCkge1xuICAgICAgICAgICAgZmluaXNoTGVhdmUoZWwpO1xuICAgICAgICAgICAgY2FsbEhvb2sob25MZWF2ZUNhbmNlbGxlZCwgW2VsXSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUR1cmF0aW9uKGR1cmF0aW9uKSB7XG4gICAgaWYgKGR1cmF0aW9uID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzT2JqZWN0KGR1cmF0aW9uKSkge1xuICAgICAgICByZXR1cm4gW051bWJlck9mKGR1cmF0aW9uLmVudGVyKSwgTnVtYmVyT2YoZHVyYXRpb24ubGVhdmUpXTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IG4gPSBOdW1iZXJPZihkdXJhdGlvbik7XG4gICAgICAgIHJldHVybiBbbiwgbl07XG4gICAgfVxufVxuZnVuY3Rpb24gTnVtYmVyT2YodmFsKSB7XG4gICAgY29uc3QgcmVzID0gdG9OdW1iZXIodmFsKTtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKVxuICAgICAgICB2YWxpZGF0ZUR1cmF0aW9uKHJlcyk7XG4gICAgcmV0dXJuIHJlcztcbn1cbmZ1bmN0aW9uIHZhbGlkYXRlRHVyYXRpb24odmFsKSB7XG4gICAgaWYgKHR5cGVvZiB2YWwgIT09ICdudW1iZXInKSB7XG4gICAgICAgIHdhcm4oYDx0cmFuc2l0aW9uPiBleHBsaWNpdCBkdXJhdGlvbiBpcyBub3QgYSB2YWxpZCBudW1iZXIgLSBgICtcbiAgICAgICAgICAgIGBnb3QgJHtKU09OLnN0cmluZ2lmeSh2YWwpfS5gKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNOYU4odmFsKSkge1xuICAgICAgICB3YXJuKGA8dHJhbnNpdGlvbj4gZXhwbGljaXQgZHVyYXRpb24gaXMgTmFOIC0gYCArXG4gICAgICAgICAgICAndGhlIGR1cmF0aW9uIGV4cHJlc3Npb24gbWlnaHQgYmUgaW5jb3JyZWN0LicpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgY2xzKSB7XG4gICAgY2xzLnNwbGl0KC9cXHMrLykuZm9yRWFjaChjID0+IGMgJiYgZWwuY2xhc3NMaXN0LmFkZChjKSk7XG4gICAgKGVsLl92dGMgfHxcbiAgICAgICAgKGVsLl92dGMgPSBuZXcgU2V0KCkpKS5hZGQoY2xzKTtcbn1cbmZ1bmN0aW9uIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgY2xzKSB7XG4gICAgY2xzLnNwbGl0KC9cXHMrLykuZm9yRWFjaChjID0+IGMgJiYgZWwuY2xhc3NMaXN0LnJlbW92ZShjKSk7XG4gICAgY29uc3QgeyBfdnRjIH0gPSBlbDtcbiAgICBpZiAoX3Z0Yykge1xuICAgICAgICBfdnRjLmRlbGV0ZShjbHMpO1xuICAgICAgICBpZiAoIV92dGMuc2l6ZSkge1xuICAgICAgICAgICAgZWwuX3Z0YyA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIG5leHRGcmFtZShjYikge1xuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShjYik7XG4gICAgfSk7XG59XG5sZXQgZW5kSWQgPSAwO1xuZnVuY3Rpb24gd2hlblRyYW5zaXRpb25FbmRzKGVsLCBleHBlY3RlZFR5cGUsIGV4cGxpY2l0VGltZW91dCwgcmVzb2x2ZSkge1xuICAgIGNvbnN0IGlkID0gKGVsLl9lbmRJZCA9ICsrZW5kSWQpO1xuICAgIGNvbnN0IHJlc29sdmVJZk5vdFN0YWxlID0gKCkgPT4ge1xuICAgICAgICBpZiAoaWQgPT09IGVsLl9lbmRJZCkge1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBpZiAoZXhwbGljaXRUaW1lb3V0KSB7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KHJlc29sdmVJZk5vdFN0YWxlLCBleHBsaWNpdFRpbWVvdXQpO1xuICAgIH1cbiAgICBjb25zdCB7IHR5cGUsIHRpbWVvdXQsIHByb3BDb3VudCB9ID0gZ2V0VHJhbnNpdGlvbkluZm8oZWwsIGV4cGVjdGVkVHlwZSk7XG4gICAgaWYgKCF0eXBlKSB7XG4gICAgICAgIHJldHVybiByZXNvbHZlKCk7XG4gICAgfVxuICAgIGNvbnN0IGVuZEV2ZW50ID0gdHlwZSArICdlbmQnO1xuICAgIGxldCBlbmRlZCA9IDA7XG4gICAgY29uc3QgZW5kID0gKCkgPT4ge1xuICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKGVuZEV2ZW50LCBvbkVuZCk7XG4gICAgICAgIHJlc29sdmVJZk5vdFN0YWxlKCk7XG4gICAgfTtcbiAgICBjb25zdCBvbkVuZCA9IChlKSA9PiB7XG4gICAgICAgIGlmIChlLnRhcmdldCA9PT0gZWwgJiYgKytlbmRlZCA+PSBwcm9wQ291bnQpIHtcbiAgICAgICAgICAgIGVuZCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaWYgKGVuZGVkIDwgcHJvcENvdW50KSB7XG4gICAgICAgICAgICBlbmQoKTtcbiAgICAgICAgfVxuICAgIH0sIHRpbWVvdXQgKyAxKTtcbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKGVuZEV2ZW50LCBvbkVuZCk7XG59XG5mdW5jdGlvbiBnZXRUcmFuc2l0aW9uSW5mbyhlbCwgZXhwZWN0ZWRUeXBlKSB7XG4gICAgY29uc3Qgc3R5bGVzID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWwpO1xuICAgIC8vIEpTRE9NIG1heSByZXR1cm4gdW5kZWZpbmVkIGZvciB0cmFuc2l0aW9uIHByb3BlcnRpZXNcbiAgICBjb25zdCBnZXRTdHlsZVByb3BlcnRpZXMgPSAoa2V5KSA9PiAoc3R5bGVzW2tleV0gfHwgJycpLnNwbGl0KCcsICcpO1xuICAgIGNvbnN0IHRyYW5zaXRpb25EZWxheXMgPSBnZXRTdHlsZVByb3BlcnRpZXMoYCR7VFJBTlNJVElPTn1EZWxheWApO1xuICAgIGNvbnN0IHRyYW5zaXRpb25EdXJhdGlvbnMgPSBnZXRTdHlsZVByb3BlcnRpZXMoYCR7VFJBTlNJVElPTn1EdXJhdGlvbmApO1xuICAgIGNvbnN0IHRyYW5zaXRpb25UaW1lb3V0ID0gZ2V0VGltZW91dCh0cmFuc2l0aW9uRGVsYXlzLCB0cmFuc2l0aW9uRHVyYXRpb25zKTtcbiAgICBjb25zdCBhbmltYXRpb25EZWxheXMgPSBnZXRTdHlsZVByb3BlcnRpZXMoYCR7QU5JTUFUSU9OfURlbGF5YCk7XG4gICAgY29uc3QgYW5pbWF0aW9uRHVyYXRpb25zID0gZ2V0U3R5bGVQcm9wZXJ0aWVzKGAke0FOSU1BVElPTn1EdXJhdGlvbmApO1xuICAgIGNvbnN0IGFuaW1hdGlvblRpbWVvdXQgPSBnZXRUaW1lb3V0KGFuaW1hdGlvbkRlbGF5cywgYW5pbWF0aW9uRHVyYXRpb25zKTtcbiAgICBsZXQgdHlwZSA9IG51bGw7XG4gICAgbGV0IHRpbWVvdXQgPSAwO1xuICAgIGxldCBwcm9wQ291bnQgPSAwO1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmIChleHBlY3RlZFR5cGUgPT09IFRSQU5TSVRJT04pIHtcbiAgICAgICAgaWYgKHRyYW5zaXRpb25UaW1lb3V0ID4gMCkge1xuICAgICAgICAgICAgdHlwZSA9IFRSQU5TSVRJT047XG4gICAgICAgICAgICB0aW1lb3V0ID0gdHJhbnNpdGlvblRpbWVvdXQ7XG4gICAgICAgICAgICBwcm9wQ291bnQgPSB0cmFuc2l0aW9uRHVyYXRpb25zLmxlbmd0aDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChleHBlY3RlZFR5cGUgPT09IEFOSU1BVElPTikge1xuICAgICAgICBpZiAoYW5pbWF0aW9uVGltZW91dCA+IDApIHtcbiAgICAgICAgICAgIHR5cGUgPSBBTklNQVRJT047XG4gICAgICAgICAgICB0aW1lb3V0ID0gYW5pbWF0aW9uVGltZW91dDtcbiAgICAgICAgICAgIHByb3BDb3VudCA9IGFuaW1hdGlvbkR1cmF0aW9ucy5sZW5ndGg7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRpbWVvdXQgPSBNYXRoLm1heCh0cmFuc2l0aW9uVGltZW91dCwgYW5pbWF0aW9uVGltZW91dCk7XG4gICAgICAgIHR5cGUgPVxuICAgICAgICAgICAgdGltZW91dCA+IDBcbiAgICAgICAgICAgICAgICA/IHRyYW5zaXRpb25UaW1lb3V0ID4gYW5pbWF0aW9uVGltZW91dFxuICAgICAgICAgICAgICAgICAgICA/IFRSQU5TSVRJT05cbiAgICAgICAgICAgICAgICAgICAgOiBBTklNQVRJT05cbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgIHByb3BDb3VudCA9IHR5cGVcbiAgICAgICAgICAgID8gdHlwZSA9PT0gVFJBTlNJVElPTlxuICAgICAgICAgICAgICAgID8gdHJhbnNpdGlvbkR1cmF0aW9ucy5sZW5ndGhcbiAgICAgICAgICAgICAgICA6IGFuaW1hdGlvbkR1cmF0aW9ucy5sZW5ndGhcbiAgICAgICAgICAgIDogMDtcbiAgICB9XG4gICAgY29uc3QgaGFzVHJhbnNmb3JtID0gdHlwZSA9PT0gVFJBTlNJVElPTiAmJlxuICAgICAgICAvXFxiKHRyYW5zZm9ybXxhbGwpKCx8JCkvLnRlc3QoZ2V0U3R5bGVQcm9wZXJ0aWVzKGAke1RSQU5TSVRJT059UHJvcGVydHlgKS50b1N0cmluZygpKTtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlLFxuICAgICAgICB0aW1lb3V0LFxuICAgICAgICBwcm9wQ291bnQsXG4gICAgICAgIGhhc1RyYW5zZm9ybVxuICAgIH07XG59XG5mdW5jdGlvbiBnZXRUaW1lb3V0KGRlbGF5cywgZHVyYXRpb25zKSB7XG4gICAgd2hpbGUgKGRlbGF5cy5sZW5ndGggPCBkdXJhdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgIGRlbGF5cyA9IGRlbGF5cy5jb25jYXQoZGVsYXlzKTtcbiAgICB9XG4gICAgcmV0dXJuIE1hdGgubWF4KC4uLmR1cmF0aW9ucy5tYXAoKGQsIGkpID0+IHRvTXMoZCkgKyB0b01zKGRlbGF5c1tpXSkpKTtcbn1cbi8vIE9sZCB2ZXJzaW9ucyBvZiBDaHJvbWl1bSAoYmVsb3cgNjEuMC4zMTYzLjEwMCkgZm9ybWF0cyBmbG9hdGluZyBwb2ludGVyXG4vLyBudW1iZXJzIGluIGEgbG9jYWxlLWRlcGVuZGVudCB3YXksIHVzaW5nIGEgY29tbWEgaW5zdGVhZCBvZiBhIGRvdC5cbi8vIElmIGNvbW1hIGlzIG5vdCByZXBsYWNlZCB3aXRoIGEgZG90LCB0aGUgaW5wdXQgd2lsbCBiZSByb3VuZGVkIGRvd25cbi8vIChpLmUuIGFjdGluZyBhcyBhIGZsb29yIGZ1bmN0aW9uKSBjYXVzaW5nIHVuZXhwZWN0ZWQgYmVoYXZpb3JzXG5mdW5jdGlvbiB0b01zKHMpIHtcbiAgICByZXR1cm4gTnVtYmVyKHMuc2xpY2UoMCwgLTEpLnJlcGxhY2UoJywnLCAnLicpKSAqIDEwMDA7XG59XG4vLyBzeW5jaHJvbm91c2x5IGZvcmNlIGxheW91dCB0byBwdXQgZWxlbWVudHMgaW50byBhIGNlcnRhaW4gc3RhdGVcbmZ1bmN0aW9uIGZvcmNlUmVmbG93KCkge1xuICAgIHJldHVybiBkb2N1bWVudC5ib2R5Lm9mZnNldEhlaWdodDtcbn1cblxuY29uc3QgcG9zaXRpb25NYXAgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgbmV3UG9zaXRpb25NYXAgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgVHJhbnNpdGlvbkdyb3VwSW1wbCA9IHtcbiAgICBuYW1lOiAnVHJhbnNpdGlvbkdyb3VwJyxcbiAgICBwcm9wczogLyojX19QVVJFX18qLyBleHRlbmQoe30sIFRyYW5zaXRpb25Qcm9wc1ZhbGlkYXRvcnMsIHtcbiAgICAgICAgdGFnOiBTdHJpbmcsXG4gICAgICAgIG1vdmVDbGFzczogU3RyaW5nXG4gICAgfSksXG4gICAgc2V0dXAocHJvcHMsIHsgc2xvdHMgfSkge1xuICAgICAgICBjb25zdCBpbnN0YW5jZSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpO1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHVzZVRyYW5zaXRpb25TdGF0ZSgpO1xuICAgICAgICBsZXQgcHJldkNoaWxkcmVuO1xuICAgICAgICBsZXQgY2hpbGRyZW47XG4gICAgICAgIG9uVXBkYXRlZCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBjaGlsZHJlbiBpcyBndWFyYW50ZWVkIHRvIGV4aXN0IGFmdGVyIGluaXRpYWwgcmVuZGVyXG4gICAgICAgICAgICBpZiAoIXByZXZDaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBtb3ZlQ2xhc3MgPSBwcm9wcy5tb3ZlQ2xhc3MgfHwgYCR7cHJvcHMubmFtZSB8fCAndid9LW1vdmVgO1xuICAgICAgICAgICAgaWYgKCFoYXNDU1NUcmFuc2Zvcm0ocHJldkNoaWxkcmVuWzBdLmVsLCBpbnN0YW5jZS52bm9kZS5lbCwgbW92ZUNsYXNzKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHdlIGRpdmlkZSB0aGUgd29yayBpbnRvIHRocmVlIGxvb3BzIHRvIGF2b2lkIG1peGluZyBET00gcmVhZHMgYW5kIHdyaXRlc1xuICAgICAgICAgICAgLy8gaW4gZWFjaCBpdGVyYXRpb24gLSB3aGljaCBoZWxwcyBwcmV2ZW50IGxheW91dCB0aHJhc2hpbmcuXG4gICAgICAgICAgICBwcmV2Q2hpbGRyZW4uZm9yRWFjaChjYWxsUGVuZGluZ0Nicyk7XG4gICAgICAgICAgICBwcmV2Q2hpbGRyZW4uZm9yRWFjaChyZWNvcmRQb3NpdGlvbik7XG4gICAgICAgICAgICBjb25zdCBtb3ZlZENoaWxkcmVuID0gcHJldkNoaWxkcmVuLmZpbHRlcihhcHBseVRyYW5zbGF0aW9uKTtcbiAgICAgICAgICAgIC8vIGZvcmNlIHJlZmxvdyB0byBwdXQgZXZlcnl0aGluZyBpbiBwb3NpdGlvblxuICAgICAgICAgICAgZm9yY2VSZWZsb3coKTtcbiAgICAgICAgICAgIG1vdmVkQ2hpbGRyZW4uZm9yRWFjaChjID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBlbCA9IGMuZWw7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3R5bGUgPSBlbC5zdHlsZTtcbiAgICAgICAgICAgICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIG1vdmVDbGFzcyk7XG4gICAgICAgICAgICAgICAgc3R5bGUudHJhbnNmb3JtID0gc3R5bGUud2Via2l0VHJhbnNmb3JtID0gc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gJyc7XG4gICAgICAgICAgICAgICAgY29uc3QgY2IgPSAoZWwuX21vdmVDYiA9IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlICYmIGUudGFyZ2V0ICE9PSBlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghZSB8fCAvdHJhbnNmb3JtJC8udGVzdChlLnByb3BlcnR5TmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCBjYik7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbC5fbW92ZUNiID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgbW92ZUNsYXNzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCBjYik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByYXdQcm9wcyA9IHRvUmF3KHByb3BzKTtcbiAgICAgICAgICAgIGNvbnN0IGNzc1RyYW5zaXRpb25Qcm9wcyA9IHJlc29sdmVUcmFuc2l0aW9uUHJvcHMocmF3UHJvcHMpO1xuICAgICAgICAgICAgbGV0IHRhZyA9IHJhd1Byb3BzLnRhZyB8fCBGcmFnbWVudDtcbiAgICAgICAgICAgIHByZXZDaGlsZHJlbiA9IGNoaWxkcmVuO1xuICAgICAgICAgICAgY2hpbGRyZW4gPSBzbG90cy5kZWZhdWx0ID8gZ2V0VHJhbnNpdGlvblJhd0NoaWxkcmVuKHNsb3RzLmRlZmF1bHQoKSkgOiBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZCA9IGNoaWxkcmVuW2ldO1xuICAgICAgICAgICAgICAgIGlmIChjaGlsZC5rZXkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBzZXRUcmFuc2l0aW9uSG9va3MoY2hpbGQsIHJlc29sdmVUcmFuc2l0aW9uSG9va3MoY2hpbGQsIGNzc1RyYW5zaXRpb25Qcm9wcywgc3RhdGUsIGluc3RhbmNlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICB3YXJuKGA8VHJhbnNpdGlvbkdyb3VwPiBjaGlsZHJlbiBtdXN0IGJlIGtleWVkLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwcmV2Q2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByZXZDaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGlsZCA9IHByZXZDaGlsZHJlbltpXTtcbiAgICAgICAgICAgICAgICAgICAgc2V0VHJhbnNpdGlvbkhvb2tzKGNoaWxkLCByZXNvbHZlVHJhbnNpdGlvbkhvb2tzKGNoaWxkLCBjc3NUcmFuc2l0aW9uUHJvcHMsIHN0YXRlLCBpbnN0YW5jZSkpO1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbk1hcC5zZXQoY2hpbGQsIGNoaWxkLmVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlVk5vZGUodGFnLCBudWxsLCBjaGlsZHJlbik7XG4gICAgICAgIH07XG4gICAgfVxufTtcbmNvbnN0IFRyYW5zaXRpb25Hcm91cCA9IFRyYW5zaXRpb25Hcm91cEltcGw7XG5mdW5jdGlvbiBjYWxsUGVuZGluZ0NicyhjKSB7XG4gICAgY29uc3QgZWwgPSBjLmVsO1xuICAgIGlmIChlbC5fbW92ZUNiKSB7XG4gICAgICAgIGVsLl9tb3ZlQ2IoKTtcbiAgICB9XG4gICAgaWYgKGVsLl9lbnRlckNiKSB7XG4gICAgICAgIGVsLl9lbnRlckNiKCk7XG4gICAgfVxufVxuZnVuY3Rpb24gcmVjb3JkUG9zaXRpb24oYykge1xuICAgIG5ld1Bvc2l0aW9uTWFwLnNldChjLCBjLmVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKTtcbn1cbmZ1bmN0aW9uIGFwcGx5VHJhbnNsYXRpb24oYykge1xuICAgIGNvbnN0IG9sZFBvcyA9IHBvc2l0aW9uTWFwLmdldChjKTtcbiAgICBjb25zdCBuZXdQb3MgPSBuZXdQb3NpdGlvbk1hcC5nZXQoYyk7XG4gICAgY29uc3QgZHggPSBvbGRQb3MubGVmdCAtIG5ld1Bvcy5sZWZ0O1xuICAgIGNvbnN0IGR5ID0gb2xkUG9zLnRvcCAtIG5ld1Bvcy50b3A7XG4gICAgaWYgKGR4IHx8IGR5KSB7XG4gICAgICAgIGNvbnN0IHMgPSBjLmVsLnN0eWxlO1xuICAgICAgICBzLnRyYW5zZm9ybSA9IHMud2Via2l0VHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgke2R4fXB4LCR7ZHl9cHgpYDtcbiAgICAgICAgcy50cmFuc2l0aW9uRHVyYXRpb24gPSAnMHMnO1xuICAgICAgICByZXR1cm4gYztcbiAgICB9XG59XG5mdW5jdGlvbiBoYXNDU1NUcmFuc2Zvcm0oZWwsIHJvb3QsIG1vdmVDbGFzcykge1xuICAgIC8vIERldGVjdCB3aGV0aGVyIGFuIGVsZW1lbnQgd2l0aCB0aGUgbW92ZSBjbGFzcyBhcHBsaWVkIGhhc1xuICAgIC8vIENTUyB0cmFuc2l0aW9ucy4gU2luY2UgdGhlIGVsZW1lbnQgbWF5IGJlIGluc2lkZSBhbiBlbnRlcmluZ1xuICAgIC8vIHRyYW5zaXRpb24gYXQgdGhpcyB2ZXJ5IG1vbWVudCwgd2UgbWFrZSBhIGNsb25lIG9mIGl0IGFuZCByZW1vdmVcbiAgICAvLyBhbGwgb3RoZXIgdHJhbnNpdGlvbiBjbGFzc2VzIGFwcGxpZWQgdG8gZW5zdXJlIG9ubHkgdGhlIG1vdmUgY2xhc3NcbiAgICAvLyBpcyBhcHBsaWVkLlxuICAgIGNvbnN0IGNsb25lID0gZWwuY2xvbmVOb2RlKCk7XG4gICAgaWYgKGVsLl92dGMpIHtcbiAgICAgICAgZWwuX3Z0Yy5mb3JFYWNoKGNscyA9PiB7XG4gICAgICAgICAgICBjbHMuc3BsaXQoL1xccysvKS5mb3JFYWNoKGMgPT4gYyAmJiBjbG9uZS5jbGFzc0xpc3QucmVtb3ZlKGMpKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG1vdmVDbGFzcy5zcGxpdCgvXFxzKy8pLmZvckVhY2goYyA9PiBjICYmIGNsb25lLmNsYXNzTGlzdC5hZGQoYykpO1xuICAgIGNsb25lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgY29uc3QgY29udGFpbmVyID0gKHJvb3Qubm9kZVR5cGUgPT09IDEgPyByb290IDogcm9vdC5wYXJlbnROb2RlKTtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY2xvbmUpO1xuICAgIGNvbnN0IHsgaGFzVHJhbnNmb3JtIH0gPSBnZXRUcmFuc2l0aW9uSW5mbyhjbG9uZSk7XG4gICAgY29udGFpbmVyLnJlbW92ZUNoaWxkKGNsb25lKTtcbiAgICByZXR1cm4gaGFzVHJhbnNmb3JtO1xufVxuXG5jb25zdCBnZXRNb2RlbEFzc2lnbmVyID0gKHZub2RlKSA9PiB7XG4gICAgY29uc3QgZm4gPSB2bm9kZS5wcm9wc1snb25VcGRhdGU6bW9kZWxWYWx1ZSddIHx8XG4gICAgICAgIChmYWxzZSApO1xuICAgIHJldHVybiBpc0FycmF5KGZuKSA/IHZhbHVlID0+IGludm9rZUFycmF5Rm5zKGZuLCB2YWx1ZSkgOiBmbjtcbn07XG5mdW5jdGlvbiBvbkNvbXBvc2l0aW9uU3RhcnQoZSkge1xuICAgIGUudGFyZ2V0LmNvbXBvc2luZyA9IHRydWU7XG59XG5mdW5jdGlvbiBvbkNvbXBvc2l0aW9uRW5kKGUpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICBpZiAodGFyZ2V0LmNvbXBvc2luZykge1xuICAgICAgICB0YXJnZXQuY29tcG9zaW5nID0gZmFsc2U7XG4gICAgICAgIHRhcmdldC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnaW5wdXQnKSk7XG4gICAgfVxufVxuLy8gV2UgYXJlIGV4cG9ydGluZyB0aGUgdi1tb2RlbCBydW50aW1lIGRpcmVjdGx5IGFzIHZub2RlIGhvb2tzIHNvIHRoYXQgaXQgY2FuXG4vLyBiZSB0cmVlLXNoYWtlbiBpbiBjYXNlIHYtbW9kZWwgaXMgbmV2ZXIgdXNlZC5cbmNvbnN0IHZNb2RlbFRleHQgPSB7XG4gICAgY3JlYXRlZChlbCwgeyBtb2RpZmllcnM6IHsgbGF6eSwgdHJpbSwgbnVtYmVyIH0gfSwgdm5vZGUpIHtcbiAgICAgICAgZWwuX2Fzc2lnbiA9IGdldE1vZGVsQXNzaWduZXIodm5vZGUpO1xuICAgICAgICBjb25zdCBjYXN0VG9OdW1iZXIgPSBudW1iZXIgfHwgKHZub2RlLnByb3BzICYmIHZub2RlLnByb3BzLnR5cGUgPT09ICdudW1iZXInKTtcbiAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcihlbCwgbGF6eSA/ICdjaGFuZ2UnIDogJ2lucHV0JywgZSA9PiB7XG4gICAgICAgICAgICBpZiAoZS50YXJnZXQuY29tcG9zaW5nKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGxldCBkb21WYWx1ZSA9IGVsLnZhbHVlO1xuICAgICAgICAgICAgaWYgKHRyaW0pIHtcbiAgICAgICAgICAgICAgICBkb21WYWx1ZSA9IGRvbVZhbHVlLnRyaW0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjYXN0VG9OdW1iZXIpIHtcbiAgICAgICAgICAgICAgICBkb21WYWx1ZSA9IHRvTnVtYmVyKGRvbVZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsLl9hc3NpZ24oZG9tVmFsdWUpO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHRyaW0pIHtcbiAgICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoZWwsICdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgZWwudmFsdWUgPSBlbC52YWx1ZS50cmltKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWxhenkpIHtcbiAgICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoZWwsICdjb21wb3NpdGlvbnN0YXJ0Jywgb25Db21wb3NpdGlvblN0YXJ0KTtcbiAgICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoZWwsICdjb21wb3NpdGlvbmVuZCcsIG9uQ29tcG9zaXRpb25FbmQpO1xuICAgICAgICAgICAgLy8gU2FmYXJpIDwgMTAuMiAmIFVJV2ViVmlldyBkb2Vzbid0IGZpcmUgY29tcG9zaXRpb25lbmQgd2hlblxuICAgICAgICAgICAgLy8gc3dpdGNoaW5nIGZvY3VzIGJlZm9yZSBjb25maXJtaW5nIGNvbXBvc2l0aW9uIGNob2ljZVxuICAgICAgICAgICAgLy8gdGhpcyBhbHNvIGZpeGVzIHRoZSBpc3N1ZSB3aGVyZSBzb21lIGJyb3dzZXJzIGUuZy4gaU9TIENocm9tZVxuICAgICAgICAgICAgLy8gZmlyZXMgXCJjaGFuZ2VcIiBpbnN0ZWFkIG9mIFwiaW5wdXRcIiBvbiBhdXRvY29tcGxldGUuXG4gICAgICAgICAgICBhZGRFdmVudExpc3RlbmVyKGVsLCAnY2hhbmdlJywgb25Db21wb3NpdGlvbkVuZCk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIC8vIHNldCB2YWx1ZSBvbiBtb3VudGVkIHNvIGl0J3MgYWZ0ZXIgbWluL21heCBmb3IgdHlwZT1cInJhbmdlXCJcbiAgICBtb3VudGVkKGVsLCB7IHZhbHVlIH0pIHtcbiAgICAgICAgZWwudmFsdWUgPSB2YWx1ZSA9PSBudWxsID8gJycgOiB2YWx1ZTtcbiAgICB9LFxuICAgIGJlZm9yZVVwZGF0ZShlbCwgeyB2YWx1ZSwgbW9kaWZpZXJzOiB7IGxhenksIHRyaW0sIG51bWJlciB9IH0sIHZub2RlKSB7XG4gICAgICAgIGVsLl9hc3NpZ24gPSBnZXRNb2RlbEFzc2lnbmVyKHZub2RlKTtcbiAgICAgICAgLy8gYXZvaWQgY2xlYXJpbmcgdW5yZXNvbHZlZCB0ZXh0LiAjMjMwMlxuICAgICAgICBpZiAoZWwuY29tcG9zaW5nKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gZWwgJiYgZWwudHlwZSAhPT0gJ3JhbmdlJykge1xuICAgICAgICAgICAgaWYgKGxhenkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHJpbSAmJiBlbC52YWx1ZS50cmltKCkgPT09IHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKChudW1iZXIgfHwgZWwudHlwZSA9PT0gJ251bWJlcicpICYmIHRvTnVtYmVyKGVsLnZhbHVlKSA9PT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmV3VmFsdWUgPSB2YWx1ZSA9PSBudWxsID8gJycgOiB2YWx1ZTtcbiAgICAgICAgaWYgKGVsLnZhbHVlICE9PSBuZXdWYWx1ZSkge1xuICAgICAgICAgICAgZWwudmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5jb25zdCB2TW9kZWxDaGVja2JveCA9IHtcbiAgICAvLyAjNDA5NiBhcnJheSBjaGVja2JveGVzIG5lZWQgdG8gYmUgZGVlcCB0cmF2ZXJzZWRcbiAgICBkZWVwOiB0cnVlLFxuICAgIGNyZWF0ZWQoZWwsIF8sIHZub2RlKSB7XG4gICAgICAgIGVsLl9hc3NpZ24gPSBnZXRNb2RlbEFzc2lnbmVyKHZub2RlKTtcbiAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcihlbCwgJ2NoYW5nZScsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG1vZGVsVmFsdWUgPSBlbC5fbW9kZWxWYWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnRWYWx1ZSA9IGdldFZhbHVlKGVsKTtcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrZWQgPSBlbC5jaGVja2VkO1xuICAgICAgICAgICAgY29uc3QgYXNzaWduID0gZWwuX2Fzc2lnbjtcbiAgICAgICAgICAgIGlmIChpc0FycmF5KG1vZGVsVmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBsb29zZUluZGV4T2YobW9kZWxWYWx1ZSwgZWxlbWVudFZhbHVlKTtcbiAgICAgICAgICAgICAgICBjb25zdCBmb3VuZCA9IGluZGV4ICE9PSAtMTtcbiAgICAgICAgICAgICAgICBpZiAoY2hlY2tlZCAmJiAhZm91bmQpIHtcbiAgICAgICAgICAgICAgICAgICAgYXNzaWduKG1vZGVsVmFsdWUuY29uY2F0KGVsZW1lbnRWYWx1ZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICghY2hlY2tlZCAmJiBmb3VuZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWx0ZXJlZCA9IFsuLi5tb2RlbFZhbHVlXTtcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyZWQuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgYXNzaWduKGZpbHRlcmVkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpc1NldChtb2RlbFZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNsb25lZCA9IG5ldyBTZXQobW9kZWxWYWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKGNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xvbmVkLmFkZChlbGVtZW50VmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2xvbmVkLmRlbGV0ZShlbGVtZW50VmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhc3NpZ24oY2xvbmVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGFzc2lnbihnZXRDaGVja2JveFZhbHVlKGVsLCBjaGVja2VkKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgLy8gc2V0IGluaXRpYWwgY2hlY2tlZCBvbiBtb3VudCB0byB3YWl0IGZvciB0cnVlLXZhbHVlL2ZhbHNlLXZhbHVlXG4gICAgbW91bnRlZDogc2V0Q2hlY2tlZCxcbiAgICBiZWZvcmVVcGRhdGUoZWwsIGJpbmRpbmcsIHZub2RlKSB7XG4gICAgICAgIGVsLl9hc3NpZ24gPSBnZXRNb2RlbEFzc2lnbmVyKHZub2RlKTtcbiAgICAgICAgc2V0Q2hlY2tlZChlbCwgYmluZGluZywgdm5vZGUpO1xuICAgIH1cbn07XG5mdW5jdGlvbiBzZXRDaGVja2VkKGVsLCB7IHZhbHVlLCBvbGRWYWx1ZSB9LCB2bm9kZSkge1xuICAgIGVsLl9tb2RlbFZhbHVlID0gdmFsdWU7XG4gICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIGVsLmNoZWNrZWQgPSBsb29zZUluZGV4T2YodmFsdWUsIHZub2RlLnByb3BzLnZhbHVlKSA+IC0xO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc1NldCh2YWx1ZSkpIHtcbiAgICAgICAgZWwuY2hlY2tlZCA9IHZhbHVlLmhhcyh2bm9kZS5wcm9wcy52YWx1ZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHZhbHVlICE9PSBvbGRWYWx1ZSkge1xuICAgICAgICBlbC5jaGVja2VkID0gbG9vc2VFcXVhbCh2YWx1ZSwgZ2V0Q2hlY2tib3hWYWx1ZShlbCwgdHJ1ZSkpO1xuICAgIH1cbn1cbmNvbnN0IHZNb2RlbFJhZGlvID0ge1xuICAgIGNyZWF0ZWQoZWwsIHsgdmFsdWUgfSwgdm5vZGUpIHtcbiAgICAgICAgZWwuY2hlY2tlZCA9IGxvb3NlRXF1YWwodmFsdWUsIHZub2RlLnByb3BzLnZhbHVlKTtcbiAgICAgICAgZWwuX2Fzc2lnbiA9IGdldE1vZGVsQXNzaWduZXIodm5vZGUpO1xuICAgICAgICBhZGRFdmVudExpc3RlbmVyKGVsLCAnY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgZWwuX2Fzc2lnbihnZXRWYWx1ZShlbCkpO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGJlZm9yZVVwZGF0ZShlbCwgeyB2YWx1ZSwgb2xkVmFsdWUgfSwgdm5vZGUpIHtcbiAgICAgICAgZWwuX2Fzc2lnbiA9IGdldE1vZGVsQXNzaWduZXIodm5vZGUpO1xuICAgICAgICBpZiAodmFsdWUgIT09IG9sZFZhbHVlKSB7XG4gICAgICAgICAgICBlbC5jaGVja2VkID0gbG9vc2VFcXVhbCh2YWx1ZSwgdm5vZGUucHJvcHMudmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxufTtcbmNvbnN0IHZNb2RlbFNlbGVjdCA9IHtcbiAgICAvLyA8c2VsZWN0IG11bHRpcGxlPiB2YWx1ZSBuZWVkIHRvIGJlIGRlZXAgdHJhdmVyc2VkXG4gICAgZGVlcDogdHJ1ZSxcbiAgICBjcmVhdGVkKGVsLCB7IHZhbHVlLCBtb2RpZmllcnM6IHsgbnVtYmVyIH0gfSwgdm5vZGUpIHtcbiAgICAgICAgY29uc3QgaXNTZXRNb2RlbCA9IGlzU2V0KHZhbHVlKTtcbiAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcihlbCwgJ2NoYW5nZScsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkVmFsID0gQXJyYXkucHJvdG90eXBlLmZpbHRlclxuICAgICAgICAgICAgICAgIC5jYWxsKGVsLm9wdGlvbnMsIChvKSA9PiBvLnNlbGVjdGVkKVxuICAgICAgICAgICAgICAgIC5tYXAoKG8pID0+IG51bWJlciA/IHRvTnVtYmVyKGdldFZhbHVlKG8pKSA6IGdldFZhbHVlKG8pKTtcbiAgICAgICAgICAgIGVsLl9hc3NpZ24oZWwubXVsdGlwbGVcbiAgICAgICAgICAgICAgICA/IGlzU2V0TW9kZWxcbiAgICAgICAgICAgICAgICAgICAgPyBuZXcgU2V0KHNlbGVjdGVkVmFsKVxuICAgICAgICAgICAgICAgICAgICA6IHNlbGVjdGVkVmFsXG4gICAgICAgICAgICAgICAgOiBzZWxlY3RlZFZhbFswXSk7XG4gICAgICAgIH0pO1xuICAgICAgICBlbC5fYXNzaWduID0gZ2V0TW9kZWxBc3NpZ25lcih2bm9kZSk7XG4gICAgfSxcbiAgICAvLyBzZXQgdmFsdWUgaW4gbW91bnRlZCAmIHVwZGF0ZWQgYmVjYXVzZSA8c2VsZWN0PiByZWxpZXMgb24gaXRzIGNoaWxkcmVuXG4gICAgLy8gPG9wdGlvbj5zLlxuICAgIG1vdW50ZWQoZWwsIHsgdmFsdWUgfSkge1xuICAgICAgICBzZXRTZWxlY3RlZChlbCwgdmFsdWUpO1xuICAgIH0sXG4gICAgYmVmb3JlVXBkYXRlKGVsLCBfYmluZGluZywgdm5vZGUpIHtcbiAgICAgICAgZWwuX2Fzc2lnbiA9IGdldE1vZGVsQXNzaWduZXIodm5vZGUpO1xuICAgIH0sXG4gICAgdXBkYXRlZChlbCwgeyB2YWx1ZSB9KSB7XG4gICAgICAgIHNldFNlbGVjdGVkKGVsLCB2YWx1ZSk7XG4gICAgfVxufTtcbmZ1bmN0aW9uIHNldFNlbGVjdGVkKGVsLCB2YWx1ZSkge1xuICAgIGNvbnN0IGlzTXVsdGlwbGUgPSBlbC5tdWx0aXBsZTtcbiAgICBpZiAoaXNNdWx0aXBsZSAmJiAhaXNBcnJheSh2YWx1ZSkgJiYgIWlzU2V0KHZhbHVlKSkge1xuICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcbiAgICAgICAgICAgIHdhcm4oYDxzZWxlY3QgbXVsdGlwbGUgdi1tb2RlbD4gZXhwZWN0cyBhbiBBcnJheSBvciBTZXQgdmFsdWUgZm9yIGl0cyBiaW5kaW5nLCBgICtcbiAgICAgICAgICAgICAgICBgYnV0IGdvdCAke09iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSkuc2xpY2UoOCwgLTEpfS5gKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMCwgbCA9IGVsLm9wdGlvbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbiA9IGVsLm9wdGlvbnNbaV07XG4gICAgICAgIGNvbnN0IG9wdGlvblZhbHVlID0gZ2V0VmFsdWUob3B0aW9uKTtcbiAgICAgICAgaWYgKGlzTXVsdGlwbGUpIHtcbiAgICAgICAgICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IGxvb3NlSW5kZXhPZih2YWx1ZSwgb3B0aW9uVmFsdWUpID4gLTE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBvcHRpb24uc2VsZWN0ZWQgPSB2YWx1ZS5oYXMob3B0aW9uVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKGxvb3NlRXF1YWwoZ2V0VmFsdWUob3B0aW9uKSwgdmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVsLnNlbGVjdGVkSW5kZXggIT09IGkpXG4gICAgICAgICAgICAgICAgICAgIGVsLnNlbGVjdGVkSW5kZXggPSBpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWlzTXVsdGlwbGUgJiYgZWwuc2VsZWN0ZWRJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgZWwuc2VsZWN0ZWRJbmRleCA9IC0xO1xuICAgIH1cbn1cbi8vIHJldHJpZXZlIHJhdyB2YWx1ZSBzZXQgdmlhIDp2YWx1ZSBiaW5kaW5nc1xuZnVuY3Rpb24gZ2V0VmFsdWUoZWwpIHtcbiAgICByZXR1cm4gJ192YWx1ZScgaW4gZWwgPyBlbC5fdmFsdWUgOiBlbC52YWx1ZTtcbn1cbi8vIHJldHJpZXZlIHJhdyB2YWx1ZSBmb3IgdHJ1ZS12YWx1ZSBhbmQgZmFsc2UtdmFsdWUgc2V0IHZpYSA6dHJ1ZS12YWx1ZSBvciA6ZmFsc2UtdmFsdWUgYmluZGluZ3NcbmZ1bmN0aW9uIGdldENoZWNrYm94VmFsdWUoZWwsIGNoZWNrZWQpIHtcbiAgICBjb25zdCBrZXkgPSBjaGVja2VkID8gJ190cnVlVmFsdWUnIDogJ19mYWxzZVZhbHVlJztcbiAgICByZXR1cm4ga2V5IGluIGVsID8gZWxba2V5XSA6IGNoZWNrZWQ7XG59XG5jb25zdCB2TW9kZWxEeW5hbWljID0ge1xuICAgIGNyZWF0ZWQoZWwsIGJpbmRpbmcsIHZub2RlKSB7XG4gICAgICAgIGNhbGxNb2RlbEhvb2soZWwsIGJpbmRpbmcsIHZub2RlLCBudWxsLCAnY3JlYXRlZCcpO1xuICAgIH0sXG4gICAgbW91bnRlZChlbCwgYmluZGluZywgdm5vZGUpIHtcbiAgICAgICAgY2FsbE1vZGVsSG9vayhlbCwgYmluZGluZywgdm5vZGUsIG51bGwsICdtb3VudGVkJyk7XG4gICAgfSxcbiAgICBiZWZvcmVVcGRhdGUoZWwsIGJpbmRpbmcsIHZub2RlLCBwcmV2Vk5vZGUpIHtcbiAgICAgICAgY2FsbE1vZGVsSG9vayhlbCwgYmluZGluZywgdm5vZGUsIHByZXZWTm9kZSwgJ2JlZm9yZVVwZGF0ZScpO1xuICAgIH0sXG4gICAgdXBkYXRlZChlbCwgYmluZGluZywgdm5vZGUsIHByZXZWTm9kZSkge1xuICAgICAgICBjYWxsTW9kZWxIb29rKGVsLCBiaW5kaW5nLCB2bm9kZSwgcHJldlZOb2RlLCAndXBkYXRlZCcpO1xuICAgIH1cbn07XG5mdW5jdGlvbiByZXNvbHZlRHluYW1pY01vZGVsKHRhZ05hbWUsIHR5cGUpIHtcbiAgICBzd2l0Y2ggKHRhZ05hbWUpIHtcbiAgICAgICAgY2FzZSAnU0VMRUNUJzpcbiAgICAgICAgICAgIHJldHVybiB2TW9kZWxTZWxlY3Q7XG4gICAgICAgIGNhc2UgJ1RFWFRBUkVBJzpcbiAgICAgICAgICAgIHJldHVybiB2TW9kZWxUZXh0O1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnY2hlY2tib3gnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdk1vZGVsQ2hlY2tib3g7XG4gICAgICAgICAgICAgICAgY2FzZSAncmFkaW8nOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdk1vZGVsUmFkaW87XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZNb2RlbFRleHQ7XG4gICAgICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gY2FsbE1vZGVsSG9vayhlbCwgYmluZGluZywgdm5vZGUsIHByZXZWTm9kZSwgaG9vaykge1xuICAgIGNvbnN0IG1vZGVsVG9Vc2UgPSByZXNvbHZlRHluYW1pY01vZGVsKGVsLnRhZ05hbWUsIHZub2RlLnByb3BzICYmIHZub2RlLnByb3BzLnR5cGUpO1xuICAgIGNvbnN0IGZuID0gbW9kZWxUb1VzZVtob29rXTtcbiAgICBmbiAmJiBmbihlbCwgYmluZGluZywgdm5vZGUsIHByZXZWTm9kZSk7XG59XG4vLyBTU1Igdm5vZGUgdHJhbnNmb3Jtcywgb25seSB1c2VkIHdoZW4gdXNlciBpbmNsdWRlcyBjbGllbnQtb3JpZW50ZWQgcmVuZGVyXG4vLyBmdW5jdGlvbiBpbiBTU1JcbmZ1bmN0aW9uIGluaXRWTW9kZWxGb3JTU1IoKSB7XG4gICAgdk1vZGVsVGV4dC5nZXRTU1JQcm9wcyA9ICh7IHZhbHVlIH0pID0+ICh7IHZhbHVlIH0pO1xuICAgIHZNb2RlbFJhZGlvLmdldFNTUlByb3BzID0gKHsgdmFsdWUgfSwgdm5vZGUpID0+IHtcbiAgICAgICAgaWYgKHZub2RlLnByb3BzICYmIGxvb3NlRXF1YWwodm5vZGUucHJvcHMudmFsdWUsIHZhbHVlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgY2hlY2tlZDogdHJ1ZSB9O1xuICAgICAgICB9XG4gICAgfTtcbiAgICB2TW9kZWxDaGVja2JveC5nZXRTU1JQcm9wcyA9ICh7IHZhbHVlIH0sIHZub2RlKSA9PiB7XG4gICAgICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgaWYgKHZub2RlLnByb3BzICYmIGxvb3NlSW5kZXhPZih2YWx1ZSwgdm5vZGUucHJvcHMudmFsdWUpID4gLTEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBjaGVja2VkOiB0cnVlIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNTZXQodmFsdWUpKSB7XG4gICAgICAgICAgICBpZiAodm5vZGUucHJvcHMgJiYgdmFsdWUuaGFzKHZub2RlLnByb3BzLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGNoZWNrZWQ6IHRydWUgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgY2hlY2tlZDogdHJ1ZSB9O1xuICAgICAgICB9XG4gICAgfTtcbiAgICB2TW9kZWxEeW5hbWljLmdldFNTUlByb3BzID0gKGJpbmRpbmcsIHZub2RlKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2Ygdm5vZGUudHlwZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtb2RlbFRvVXNlID0gcmVzb2x2ZUR5bmFtaWNNb2RlbChcbiAgICAgICAgLy8gcmVzb2x2ZUR5bmFtaWNNb2RlbCBleHBlY3RzIGFuIHVwcGVyY2FzZSB0YWcgbmFtZSwgYnV0IHZub2RlLnR5cGUgaXMgbG93ZXJjYXNlXG4gICAgICAgIHZub2RlLnR5cGUudG9VcHBlckNhc2UoKSwgdm5vZGUucHJvcHMgJiYgdm5vZGUucHJvcHMudHlwZSk7XG4gICAgICAgIGlmIChtb2RlbFRvVXNlLmdldFNTUlByb3BzKSB7XG4gICAgICAgICAgICByZXR1cm4gbW9kZWxUb1VzZS5nZXRTU1JQcm9wcyhiaW5kaW5nLCB2bm9kZSk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5jb25zdCBzeXN0ZW1Nb2RpZmllcnMgPSBbJ2N0cmwnLCAnc2hpZnQnLCAnYWx0JywgJ21ldGEnXTtcbmNvbnN0IG1vZGlmaWVyR3VhcmRzID0ge1xuICAgIHN0b3A6IGUgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSxcbiAgICBwcmV2ZW50OiBlID0+IGUucHJldmVudERlZmF1bHQoKSxcbiAgICBzZWxmOiBlID0+IGUudGFyZ2V0ICE9PSBlLmN1cnJlbnRUYXJnZXQsXG4gICAgY3RybDogZSA9PiAhZS5jdHJsS2V5LFxuICAgIHNoaWZ0OiBlID0+ICFlLnNoaWZ0S2V5LFxuICAgIGFsdDogZSA9PiAhZS5hbHRLZXksXG4gICAgbWV0YTogZSA9PiAhZS5tZXRhS2V5LFxuICAgIGxlZnQ6IGUgPT4gJ2J1dHRvbicgaW4gZSAmJiBlLmJ1dHRvbiAhPT0gMCxcbiAgICBtaWRkbGU6IGUgPT4gJ2J1dHRvbicgaW4gZSAmJiBlLmJ1dHRvbiAhPT0gMSxcbiAgICByaWdodDogZSA9PiAnYnV0dG9uJyBpbiBlICYmIGUuYnV0dG9uICE9PSAyLFxuICAgIGV4YWN0OiAoZSwgbW9kaWZpZXJzKSA9PiBzeXN0ZW1Nb2RpZmllcnMuc29tZShtID0+IGVbYCR7bX1LZXlgXSAmJiAhbW9kaWZpZXJzLmluY2x1ZGVzKG0pKVxufTtcbi8qKlxuICogQHByaXZhdGVcbiAqL1xuY29uc3Qgd2l0aE1vZGlmaWVycyA9IChmbiwgbW9kaWZpZXJzKSA9PiB7XG4gICAgcmV0dXJuIChldmVudCwgLi4uYXJncykgPT4ge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1vZGlmaWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgZ3VhcmQgPSBtb2RpZmllckd1YXJkc1ttb2RpZmllcnNbaV1dO1xuICAgICAgICAgICAgaWYgKGd1YXJkICYmIGd1YXJkKGV2ZW50LCBtb2RpZmllcnMpKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZm4oZXZlbnQsIC4uLmFyZ3MpO1xuICAgIH07XG59O1xuLy8gS2VwdCBmb3IgMi54IGNvbXBhdC5cbi8vIE5vdGU6IElFMTEgY29tcGF0IGZvciBgc3BhY2ViYXJgIGFuZCBgZGVsYCBpcyByZW1vdmVkIGZvciBub3cuXG5jb25zdCBrZXlOYW1lcyA9IHtcbiAgICBlc2M6ICdlc2NhcGUnLFxuICAgIHNwYWNlOiAnICcsXG4gICAgdXA6ICdhcnJvdy11cCcsXG4gICAgbGVmdDogJ2Fycm93LWxlZnQnLFxuICAgIHJpZ2h0OiAnYXJyb3ctcmlnaHQnLFxuICAgIGRvd246ICdhcnJvdy1kb3duJyxcbiAgICBkZWxldGU6ICdiYWNrc3BhY2UnXG59O1xuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5jb25zdCB3aXRoS2V5cyA9IChmbiwgbW9kaWZpZXJzKSA9PiB7XG4gICAgcmV0dXJuIChldmVudCkgPT4ge1xuICAgICAgICBpZiAoISgna2V5JyBpbiBldmVudCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBldmVudEtleSA9IGh5cGhlbmF0ZShldmVudC5rZXkpO1xuICAgICAgICBpZiAobW9kaWZpZXJzLnNvbWUoayA9PiBrID09PSBldmVudEtleSB8fCBrZXlOYW1lc1trXSA9PT0gZXZlbnRLZXkpKSB7XG4gICAgICAgICAgICByZXR1cm4gZm4oZXZlbnQpO1xuICAgICAgICB9XG4gICAgfTtcbn07XG5cbmNvbnN0IHZTaG93ID0ge1xuICAgIGJlZm9yZU1vdW50KGVsLCB7IHZhbHVlIH0sIHsgdHJhbnNpdGlvbiB9KSB7XG4gICAgICAgIGVsLl92b2QgPSBlbC5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScgPyAnJyA6IGVsLnN0eWxlLmRpc3BsYXk7XG4gICAgICAgIGlmICh0cmFuc2l0aW9uICYmIHZhbHVlKSB7XG4gICAgICAgICAgICB0cmFuc2l0aW9uLmJlZm9yZUVudGVyKGVsKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNldERpc3BsYXkoZWwsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgbW91bnRlZChlbCwgeyB2YWx1ZSB9LCB7IHRyYW5zaXRpb24gfSkge1xuICAgICAgICBpZiAodHJhbnNpdGlvbiAmJiB2YWx1ZSkge1xuICAgICAgICAgICAgdHJhbnNpdGlvbi5lbnRlcihlbCk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHVwZGF0ZWQoZWwsIHsgdmFsdWUsIG9sZFZhbHVlIH0sIHsgdHJhbnNpdGlvbiB9KSB7XG4gICAgICAgIGlmICghdmFsdWUgPT09ICFvbGRWYWx1ZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKHRyYW5zaXRpb24pIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHRyYW5zaXRpb24uYmVmb3JlRW50ZXIoZWwpO1xuICAgICAgICAgICAgICAgIHNldERpc3BsYXkoZWwsIHRydWUpO1xuICAgICAgICAgICAgICAgIHRyYW5zaXRpb24uZW50ZXIoZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbi5sZWF2ZShlbCwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXREaXNwbGF5KGVsLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzZXREaXNwbGF5KGVsLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGJlZm9yZVVubW91bnQoZWwsIHsgdmFsdWUgfSkge1xuICAgICAgICBzZXREaXNwbGF5KGVsLCB2YWx1ZSk7XG4gICAgfVxufTtcbmZ1bmN0aW9uIHNldERpc3BsYXkoZWwsIHZhbHVlKSB7XG4gICAgZWwuc3R5bGUuZGlzcGxheSA9IHZhbHVlID8gZWwuX3ZvZCA6ICdub25lJztcbn1cbi8vIFNTUiB2bm9kZSB0cmFuc2Zvcm1zLCBvbmx5IHVzZWQgd2hlbiB1c2VyIGluY2x1ZGVzIGNsaWVudC1vcmllbnRlZCByZW5kZXJcbi8vIGZ1bmN0aW9uIGluIFNTUlxuZnVuY3Rpb24gaW5pdFZTaG93Rm9yU1NSKCkge1xuICAgIHZTaG93LmdldFNTUlByb3BzID0gKHsgdmFsdWUgfSkgPT4ge1xuICAgICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4geyBzdHlsZTogeyBkaXNwbGF5OiAnbm9uZScgfSB9O1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuY29uc3QgcmVuZGVyZXJPcHRpb25zID0gLyojX19QVVJFX18qLyBleHRlbmQoeyBwYXRjaFByb3AgfSwgbm9kZU9wcyk7XG4vLyBsYXp5IGNyZWF0ZSB0aGUgcmVuZGVyZXIgLSB0aGlzIG1ha2VzIGNvcmUgcmVuZGVyZXIgbG9naWMgdHJlZS1zaGFrYWJsZVxuLy8gaW4gY2FzZSB0aGUgdXNlciBvbmx5IGltcG9ydHMgcmVhY3Rpdml0eSB1dGlsaXRpZXMgZnJvbSBWdWUuXG5sZXQgcmVuZGVyZXI7XG5sZXQgZW5hYmxlZEh5ZHJhdGlvbiA9IGZhbHNlO1xuZnVuY3Rpb24gZW5zdXJlUmVuZGVyZXIoKSB7XG4gICAgcmV0dXJuIChyZW5kZXJlciB8fFxuICAgICAgICAocmVuZGVyZXIgPSBjcmVhdGVSZW5kZXJlcihyZW5kZXJlck9wdGlvbnMpKSk7XG59XG5mdW5jdGlvbiBlbnN1cmVIeWRyYXRpb25SZW5kZXJlcigpIHtcbiAgICByZW5kZXJlciA9IGVuYWJsZWRIeWRyYXRpb25cbiAgICAgICAgPyByZW5kZXJlclxuICAgICAgICA6IGNyZWF0ZUh5ZHJhdGlvblJlbmRlcmVyKHJlbmRlcmVyT3B0aW9ucyk7XG4gICAgZW5hYmxlZEh5ZHJhdGlvbiA9IHRydWU7XG4gICAgcmV0dXJuIHJlbmRlcmVyO1xufVxuLy8gdXNlIGV4cGxpY2l0IHR5cGUgY2FzdHMgaGVyZSB0byBhdm9pZCBpbXBvcnQoKSBjYWxscyBpbiByb2xsZWQtdXAgZC50c1xuY29uc3QgcmVuZGVyID0gKCguLi5hcmdzKSA9PiB7XG4gICAgZW5zdXJlUmVuZGVyZXIoKS5yZW5kZXIoLi4uYXJncyk7XG59KTtcbmNvbnN0IGh5ZHJhdGUgPSAoKC4uLmFyZ3MpID0+IHtcbiAgICBlbnN1cmVIeWRyYXRpb25SZW5kZXJlcigpLmh5ZHJhdGUoLi4uYXJncyk7XG59KTtcbmNvbnN0IGNyZWF0ZUFwcCA9ICgoLi4uYXJncykgPT4ge1xuICAgIGNvbnN0IGFwcCA9IGVuc3VyZVJlbmRlcmVyKCkuY3JlYXRlQXBwKC4uLmFyZ3MpO1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgaW5qZWN0TmF0aXZlVGFnQ2hlY2soYXBwKTtcbiAgICAgICAgaW5qZWN0Q29tcGlsZXJPcHRpb25zQ2hlY2soYXBwKTtcbiAgICB9XG4gICAgY29uc3QgeyBtb3VudCB9ID0gYXBwO1xuICAgIGFwcC5tb3VudCA9IChjb250YWluZXJPclNlbGVjdG9yKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IG5vcm1hbGl6ZUNvbnRhaW5lcihjb250YWluZXJPclNlbGVjdG9yKTtcbiAgICAgICAgaWYgKCFjb250YWluZXIpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudCA9IGFwcC5fY29tcG9uZW50O1xuICAgICAgICBpZiAoIWlzRnVuY3Rpb24oY29tcG9uZW50KSAmJiAhY29tcG9uZW50LnJlbmRlciAmJiAhY29tcG9uZW50LnRlbXBsYXRlKSB7XG4gICAgICAgICAgICAvLyBfX1VOU0FGRV9fXG4gICAgICAgICAgICAvLyBSZWFzb246IHBvdGVudGlhbCBleGVjdXRpb24gb2YgSlMgZXhwcmVzc2lvbnMgaW4gaW4tRE9NIHRlbXBsYXRlLlxuICAgICAgICAgICAgLy8gVGhlIHVzZXIgbXVzdCBtYWtlIHN1cmUgdGhlIGluLURPTSB0ZW1wbGF0ZSBpcyB0cnVzdGVkLiBJZiBpdCdzXG4gICAgICAgICAgICAvLyByZW5kZXJlZCBieSB0aGUgc2VydmVyLCB0aGUgdGVtcGxhdGUgc2hvdWxkIG5vdCBjb250YWluIGFueSB1c2VyIGRhdGEuXG4gICAgICAgICAgICBjb21wb25lbnQudGVtcGxhdGUgPSBjb250YWluZXIuaW5uZXJIVE1MO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNsZWFyIGNvbnRlbnQgYmVmb3JlIG1vdW50aW5nXG4gICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgY29uc3QgcHJveHkgPSBtb3VudChjb250YWluZXIsIGZhbHNlLCBjb250YWluZXIgaW5zdGFuY2VvZiBTVkdFbGVtZW50KTtcbiAgICAgICAgaWYgKGNvbnRhaW5lciBpbnN0YW5jZW9mIEVsZW1lbnQpIHtcbiAgICAgICAgICAgIGNvbnRhaW5lci5yZW1vdmVBdHRyaWJ1dGUoJ3YtY2xvYWsnKTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ2RhdGEtdi1hcHAnLCAnJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHByb3h5O1xuICAgIH07XG4gICAgcmV0dXJuIGFwcDtcbn0pO1xuY29uc3QgY3JlYXRlU1NSQXBwID0gKCguLi5hcmdzKSA9PiB7XG4gICAgY29uc3QgYXBwID0gZW5zdXJlSHlkcmF0aW9uUmVuZGVyZXIoKS5jcmVhdGVBcHAoLi4uYXJncyk7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICBpbmplY3ROYXRpdmVUYWdDaGVjayhhcHApO1xuICAgICAgICBpbmplY3RDb21waWxlck9wdGlvbnNDaGVjayhhcHApO1xuICAgIH1cbiAgICBjb25zdCB7IG1vdW50IH0gPSBhcHA7XG4gICAgYXBwLm1vdW50ID0gKGNvbnRhaW5lck9yU2VsZWN0b3IpID0+IHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gbm9ybWFsaXplQ29udGFpbmVyKGNvbnRhaW5lck9yU2VsZWN0b3IpO1xuICAgICAgICBpZiAoY29udGFpbmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gbW91bnQoY29udGFpbmVyLCB0cnVlLCBjb250YWluZXIgaW5zdGFuY2VvZiBTVkdFbGVtZW50KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIGFwcDtcbn0pO1xuZnVuY3Rpb24gaW5qZWN0TmF0aXZlVGFnQ2hlY2soYXBwKSB7XG4gICAgLy8gSW5qZWN0IGBpc05hdGl2ZVRhZ2BcbiAgICAvLyB0aGlzIGlzIHVzZWQgZm9yIGNvbXBvbmVudCBuYW1lIHZhbGlkYXRpb24gKGRldiBvbmx5KVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhcHAuY29uZmlnLCAnaXNOYXRpdmVUYWcnLCB7XG4gICAgICAgIHZhbHVlOiAodGFnKSA9PiBpc0hUTUxUYWcodGFnKSB8fCBpc1NWR1RhZyh0YWcpLFxuICAgICAgICB3cml0YWJsZTogZmFsc2VcbiAgICB9KTtcbn1cbi8vIGRldiBvbmx5XG5mdW5jdGlvbiBpbmplY3RDb21waWxlck9wdGlvbnNDaGVjayhhcHApIHtcbiAgICBpZiAoaXNSdW50aW1lT25seSgpKSB7XG4gICAgICAgIGNvbnN0IGlzQ3VzdG9tRWxlbWVudCA9IGFwcC5jb25maWcuaXNDdXN0b21FbGVtZW50O1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoYXBwLmNvbmZpZywgJ2lzQ3VzdG9tRWxlbWVudCcsIHtcbiAgICAgICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXNDdXN0b21FbGVtZW50O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldCgpIHtcbiAgICAgICAgICAgICAgICB3YXJuKGBUaGUgXFxgaXNDdXN0b21FbGVtZW50XFxgIGNvbmZpZyBvcHRpb24gaXMgZGVwcmVjYXRlZC4gVXNlIGAgK1xuICAgICAgICAgICAgICAgICAgICBgXFxgY29tcGlsZXJPcHRpb25zLmlzQ3VzdG9tRWxlbWVudFxcYCBpbnN0ZWFkLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgY29tcGlsZXJPcHRpb25zID0gYXBwLmNvbmZpZy5jb21waWxlck9wdGlvbnM7XG4gICAgICAgIGNvbnN0IG1zZyA9IGBUaGUgXFxgY29tcGlsZXJPcHRpb25zXFxgIGNvbmZpZyBvcHRpb24gaXMgb25seSByZXNwZWN0ZWQgd2hlbiB1c2luZyBgICtcbiAgICAgICAgICAgIGBhIGJ1aWxkIG9mIFZ1ZS5qcyB0aGF0IGluY2x1ZGVzIHRoZSBydW50aW1lIGNvbXBpbGVyIChha2EgXCJmdWxsIGJ1aWxkXCIpLiBgICtcbiAgICAgICAgICAgIGBTaW5jZSB5b3UgYXJlIHVzaW5nIHRoZSBydW50aW1lLW9ubHkgYnVpbGQsIFxcYGNvbXBpbGVyT3B0aW9uc1xcYCBgICtcbiAgICAgICAgICAgIGBtdXN0IGJlIHBhc3NlZCB0byBcXGBAdnVlL2NvbXBpbGVyLWRvbVxcYCBpbiB0aGUgYnVpbGQgc2V0dXAgaW5zdGVhZC5cXG5gICtcbiAgICAgICAgICAgIGAtIEZvciB2dWUtbG9hZGVyOiBwYXNzIGl0IHZpYSB2dWUtbG9hZGVyJ3MgXFxgY29tcGlsZXJPcHRpb25zXFxgIGxvYWRlciBvcHRpb24uXFxuYCArXG4gICAgICAgICAgICBgLSBGb3IgdnVlLWNsaTogc2VlIGh0dHBzOi8vY2xpLnZ1ZWpzLm9yZy9ndWlkZS93ZWJwYWNrLmh0bWwjbW9kaWZ5aW5nLW9wdGlvbnMtb2YtYS1sb2FkZXJcXG5gICtcbiAgICAgICAgICAgIGAtIEZvciB2aXRlOiBwYXNzIGl0IHZpYSBAdml0ZWpzL3BsdWdpbi12dWUgb3B0aW9ucy4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS92aXRlanMvdml0ZS90cmVlL21haW4vcGFja2FnZXMvcGx1Z2luLXZ1ZSNleGFtcGxlLWZvci1wYXNzaW5nLW9wdGlvbnMtdG8tdnVlY29tcGlsZXItZG9tYDtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGFwcC5jb25maWcsICdjb21waWxlck9wdGlvbnMnLCB7XG4gICAgICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICAgICAgd2Fybihtc2cpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb21waWxlck9wdGlvbnM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0KCkge1xuICAgICAgICAgICAgICAgIHdhcm4obXNnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuZnVuY3Rpb24gbm9ybWFsaXplQ29udGFpbmVyKGNvbnRhaW5lcikge1xuICAgIGlmIChpc1N0cmluZyhjb250YWluZXIpKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyKTtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhcmVzKSB7XG4gICAgICAgICAgICB3YXJuKGBGYWlsZWQgdG8gbW91bnQgYXBwOiBtb3VudCB0YXJnZXQgc2VsZWN0b3IgXCIke2NvbnRhaW5lcn1cIiByZXR1cm5lZCBudWxsLmApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcbiAgICAgICAgd2luZG93LlNoYWRvd1Jvb3QgJiZcbiAgICAgICAgY29udGFpbmVyIGluc3RhbmNlb2Ygd2luZG93LlNoYWRvd1Jvb3QgJiZcbiAgICAgICAgY29udGFpbmVyLm1vZGUgPT09ICdjbG9zZWQnKSB7XG4gICAgICAgIHdhcm4oYG1vdW50aW5nIG9uIGEgU2hhZG93Um9vdCB3aXRoIFxcYHttb2RlOiBcImNsb3NlZFwifVxcYCBtYXkgbGVhZCB0byB1bnByZWRpY3RhYmxlIGJ1Z3NgKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbnRhaW5lcjtcbn1cbmxldCBzc3JEaXJlY3RpdmVJbml0aWFsaXplZCA9IGZhbHNlO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuY29uc3QgaW5pdERpcmVjdGl2ZXNGb3JTU1IgPSAoKSA9PiB7XG4gICAgICAgIGlmICghc3NyRGlyZWN0aXZlSW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgIHNzckRpcmVjdGl2ZUluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGluaXRWTW9kZWxGb3JTU1IoKTtcbiAgICAgICAgICAgIGluaXRWU2hvd0ZvclNTUigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIDtcblxuZXhwb3J0IHsgVHJhbnNpdGlvbiwgVHJhbnNpdGlvbkdyb3VwLCBWdWVFbGVtZW50LCBjcmVhdGVBcHAsIGNyZWF0ZVNTUkFwcCwgZGVmaW5lQ3VzdG9tRWxlbWVudCwgZGVmaW5lU1NSQ3VzdG9tRWxlbWVudCwgaHlkcmF0ZSwgaW5pdERpcmVjdGl2ZXNGb3JTU1IsIHJlbmRlciwgdXNlQ3NzTW9kdWxlLCB1c2VDc3NWYXJzLCB2TW9kZWxDaGVja2JveCwgdk1vZGVsRHluYW1pYywgdk1vZGVsUmFkaW8sIHZNb2RlbFNlbGVjdCwgdk1vZGVsVGV4dCwgdlNob3csIHdpdGhLZXlzLCB3aXRoTW9kaWZpZXJzIH07XG4iLCJpbXBvcnQgeyBpbml0Q3VzdG9tRm9ybWF0dGVyLCB3YXJuIH0gZnJvbSAnQHZ1ZS9ydW50aW1lLWRvbSc7XG5leHBvcnQgKiBmcm9tICdAdnVlL3J1bnRpbWUtZG9tJztcblxuZnVuY3Rpb24gaW5pdERldigpIHtcbiAgICB7XG4gICAgICAgIGluaXRDdXN0b21Gb3JtYXR0ZXIoKTtcbiAgICB9XG59XG5cbi8vIFRoaXMgZW50cnkgZXhwb3J0cyB0aGUgcnVudGltZSBvbmx5LCBhbmQgaXMgYnVpbHQgYXNcbmlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICBpbml0RGV2KCk7XG59XG5jb25zdCBjb21waWxlID0gKCkgPT4ge1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgd2FybihgUnVudGltZSBjb21waWxhdGlvbiBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnVpbGQgb2YgVnVlLmAgK1xuICAgICAgICAgICAgKGAgQ29uZmlndXJlIHlvdXIgYnVuZGxlciB0byBhbGlhcyBcInZ1ZVwiIHRvIFwidnVlL2Rpc3QvdnVlLmVzbS1idW5kbGVyLmpzXCIuYFxuICAgICAgICAgICAgICAgICkgLyogc2hvdWxkIG5vdCBoYXBwZW4gKi8pO1xuICAgIH1cbn07XG5cbmV4cG9ydCB7IGNvbXBpbGUgfTtcbiIsImltcG9ydCAqIGFzIFZ1ZSBmcm9tICd2dWUnXG5cbnZhciBpc1Z1ZTIgPSBmYWxzZVxudmFyIGlzVnVlMyA9IHRydWVcbnZhciBWdWUyID0gdW5kZWZpbmVkXG5cbmZ1bmN0aW9uIGluc3RhbGwoKSB7fVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0KHRhcmdldCwga2V5LCB2YWwpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkodGFyZ2V0KSkge1xuICAgIHRhcmdldC5sZW5ndGggPSBNYXRoLm1heCh0YXJnZXQubGVuZ3RoLCBrZXkpXG4gICAgdGFyZ2V0LnNwbGljZShrZXksIDEsIHZhbClcbiAgICByZXR1cm4gdmFsXG4gIH1cbiAgdGFyZ2V0W2tleV0gPSB2YWxcbiAgcmV0dXJuIHZhbFxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVsKHRhcmdldCwga2V5KSB7XG4gIGlmIChBcnJheS5pc0FycmF5KHRhcmdldCkpIHtcbiAgICB0YXJnZXQuc3BsaWNlKGtleSwgMSlcbiAgICByZXR1cm5cbiAgfVxuICBkZWxldGUgdGFyZ2V0W2tleV1cbn1cblxuZXhwb3J0ICogZnJvbSAndnVlJ1xuZXhwb3J0IHtcbiAgVnVlLFxuICBWdWUyLFxuICBpc1Z1ZTIsXG4gIGlzVnVlMyxcbiAgaW5zdGFsbCxcbn1cbiIsImV4cG9ydCBmdW5jdGlvbiBnZXREZXZ0b29sc0dsb2JhbEhvb2soKSB7XG4gICAgcmV0dXJuIGdldFRhcmdldCgpLl9fVlVFX0RFVlRPT0xTX0dMT0JBTF9IT09LX187XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0VGFyZ2V0KCkge1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICByZXR1cm4gKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKVxuICAgICAgICA/IHdpbmRvd1xuICAgICAgICA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgICA/IGdsb2JhbFxuICAgICAgICAgICAgOiB7fTtcbn1cbmV4cG9ydCBjb25zdCBpc1Byb3h5QXZhaWxhYmxlID0gdHlwZW9mIFByb3h5ID09PSAnZnVuY3Rpb24nO1xuIiwiZXhwb3J0IGNvbnN0IEhPT0tfU0VUVVAgPSAnZGV2dG9vbHMtcGx1Z2luOnNldHVwJztcbmV4cG9ydCBjb25zdCBIT09LX1BMVUdJTl9TRVRUSU5HU19TRVQgPSAncGx1Z2luOnNldHRpbmdzOnNldCc7XG4iLCJsZXQgc3VwcG9ydGVkO1xubGV0IHBlcmY7XG5leHBvcnQgZnVuY3Rpb24gaXNQZXJmb3JtYW5jZVN1cHBvcnRlZCgpIHtcbiAgICB2YXIgX2E7XG4gICAgaWYgKHN1cHBvcnRlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBzdXBwb3J0ZWQ7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cucGVyZm9ybWFuY2UpIHtcbiAgICAgICAgc3VwcG9ydGVkID0gdHJ1ZTtcbiAgICAgICAgcGVyZiA9IHdpbmRvdy5wZXJmb3JtYW5jZTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgJiYgKChfYSA9IGdsb2JhbC5wZXJmX2hvb2tzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucGVyZm9ybWFuY2UpKSB7XG4gICAgICAgIHN1cHBvcnRlZCA9IHRydWU7XG4gICAgICAgIHBlcmYgPSBnbG9iYWwucGVyZl9ob29rcy5wZXJmb3JtYW5jZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHN1cHBvcnRlZCA9IGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gc3VwcG9ydGVkO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG5vdygpIHtcbiAgICByZXR1cm4gaXNQZXJmb3JtYW5jZVN1cHBvcnRlZCgpID8gcGVyZi5ub3coKSA6IERhdGUubm93KCk7XG59XG4iLCJpbXBvcnQgeyBIT09LX1BMVUdJTl9TRVRUSU5HU19TRVQgfSBmcm9tICcuL2NvbnN0LmpzJztcbmltcG9ydCB7IG5vdyB9IGZyb20gJy4vdGltZS5qcyc7XG5leHBvcnQgY2xhc3MgQXBpUHJveHkge1xuICAgIGNvbnN0cnVjdG9yKHBsdWdpbiwgaG9vaykge1xuICAgICAgICB0aGlzLnRhcmdldCA9IG51bGw7XG4gICAgICAgIHRoaXMudGFyZ2V0UXVldWUgPSBbXTtcbiAgICAgICAgdGhpcy5vblF1ZXVlID0gW107XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLmhvb2sgPSBob29rO1xuICAgICAgICBjb25zdCBkZWZhdWx0U2V0dGluZ3MgPSB7fTtcbiAgICAgICAgaWYgKHBsdWdpbi5zZXR0aW5ncykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBpZCBpbiBwbHVnaW4uc2V0dGluZ3MpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtID0gcGx1Z2luLnNldHRpbmdzW2lkXTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0U2V0dGluZ3NbaWRdID0gaXRlbS5kZWZhdWx0VmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbG9jYWxTZXR0aW5nc1NhdmVJZCA9IGBfX3Z1ZS1kZXZ0b29scy1wbHVnaW4tc2V0dGluZ3NfXyR7cGx1Z2luLmlkfWA7XG4gICAgICAgIGxldCBjdXJyZW50U2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0U2V0dGluZ3MpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmF3ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0obG9jYWxTZXR0aW5nc1NhdmVJZCk7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShyYXcpO1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihjdXJyZW50U2V0dGluZ3MsIGRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBub29wXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mYWxsYmFja3MgPSB7XG4gICAgICAgICAgICBnZXRTZXR0aW5ncygpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudFNldHRpbmdzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldFNldHRpbmdzKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0obG9jYWxTZXR0aW5nc1NhdmVJZCwgSlNPTi5zdHJpbmdpZnkodmFsdWUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gbm9vcFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjdXJyZW50U2V0dGluZ3MgPSB2YWx1ZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBub3coKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vdygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGhvb2spIHtcbiAgICAgICAgICAgIGhvb2sub24oSE9PS19QTFVHSU5fU0VUVElOR1NfU0VULCAocGx1Z2luSWQsIHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHBsdWdpbklkID09PSB0aGlzLnBsdWdpbi5pZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZhbGxiYWNrcy5zZXRTZXR0aW5ncyh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcm94aWVkT24gPSBuZXcgUHJveHkoe30sIHtcbiAgICAgICAgICAgIGdldDogKF90YXJnZXQsIHByb3ApID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudGFyZ2V0Lm9uW3Byb3BdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICguLi5hcmdzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uUXVldWUucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBwcm9wLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5wcm94aWVkVGFyZ2V0ID0gbmV3IFByb3h5KHt9LCB7XG4gICAgICAgICAgICBnZXQ6IChfdGFyZ2V0LCBwcm9wKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRhcmdldFtwcm9wXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocHJvcCA9PT0gJ29uJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcm94aWVkT247XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKE9iamVjdC5rZXlzKHRoaXMuZmFsbGJhY2tzKS5pbmNsdWRlcyhwcm9wKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0UXVldWUucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBwcm9wLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZTogKCkgPT4geyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mYWxsYmFja3NbcHJvcF0oLi4uYXJncyk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcmdldFF1ZXVlLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IHByb3AsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgc2V0UmVhbFRhcmdldCh0YXJnZXQpIHtcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLm9uUXVldWUpIHtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0Lm9uW2l0ZW0ubWV0aG9kXSguLi5pdGVtLmFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLnRhcmdldFF1ZXVlKSB7XG4gICAgICAgICAgICBpdGVtLnJlc29sdmUoYXdhaXQgdGhpcy50YXJnZXRbaXRlbS5tZXRob2RdKC4uLml0ZW0uYXJncykpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgZ2V0VGFyZ2V0LCBnZXREZXZ0b29sc0dsb2JhbEhvb2ssIGlzUHJveHlBdmFpbGFibGUgfSBmcm9tICcuL2Vudi5qcyc7XG5pbXBvcnQgeyBIT09LX1NFVFVQIH0gZnJvbSAnLi9jb25zdC5qcyc7XG5pbXBvcnQgeyBBcGlQcm94eSB9IGZyb20gJy4vcHJveHkuanMnO1xuZXhwb3J0ICogZnJvbSAnLi9hcGkvaW5kZXguanMnO1xuZXhwb3J0ICogZnJvbSAnLi9wbHVnaW4uanMnO1xuZXhwb3J0ICogZnJvbSAnLi90aW1lLmpzJztcbmV4cG9ydCBmdW5jdGlvbiBzZXR1cERldnRvb2xzUGx1Z2luKHBsdWdpbkRlc2NyaXB0b3IsIHNldHVwRm4pIHtcbiAgICBjb25zdCBkZXNjcmlwdG9yID0gcGx1Z2luRGVzY3JpcHRvcjtcbiAgICBjb25zdCB0YXJnZXQgPSBnZXRUYXJnZXQoKTtcbiAgICBjb25zdCBob29rID0gZ2V0RGV2dG9vbHNHbG9iYWxIb29rKCk7XG4gICAgY29uc3QgZW5hYmxlUHJveHkgPSBpc1Byb3h5QXZhaWxhYmxlICYmIGRlc2NyaXB0b3IuZW5hYmxlRWFybHlQcm94eTtcbiAgICBpZiAoaG9vayAmJiAodGFyZ2V0Ll9fVlVFX0RFVlRPT0xTX1BMVUdJTl9BUElfQVZBSUxBQkxFX18gfHwgIWVuYWJsZVByb3h5KSkge1xuICAgICAgICBob29rLmVtaXQoSE9PS19TRVRVUCwgcGx1Z2luRGVzY3JpcHRvciwgc2V0dXBGbik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBwcm94eSA9IGVuYWJsZVByb3h5ID8gbmV3IEFwaVByb3h5KGRlc2NyaXB0b3IsIGhvb2spIDogbnVsbDtcbiAgICAgICAgY29uc3QgbGlzdCA9IHRhcmdldC5fX1ZVRV9ERVZUT09MU19QTFVHSU5TX18gPSB0YXJnZXQuX19WVUVfREVWVE9PTFNfUExVR0lOU19fIHx8IFtdO1xuICAgICAgICBsaXN0LnB1c2goe1xuICAgICAgICAgICAgcGx1Z2luRGVzY3JpcHRvcjogZGVzY3JpcHRvcixcbiAgICAgICAgICAgIHNldHVwRm4sXG4gICAgICAgICAgICBwcm94eSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChwcm94eSlcbiAgICAgICAgICAgIHNldHVwRm4ocHJveHkucHJveGllZFRhcmdldCk7XG4gICAgfVxufVxuIiwiLyohXG4gICogcGluaWEgdjIuMC4yOVxuICAqIChjKSAyMDIzIEVkdWFyZG8gU2FuIE1hcnRpbiBNb3JvdGVcbiAgKiBAbGljZW5zZSBNSVRcbiAgKi9cbmltcG9ydCB7IGdldEN1cnJlbnRJbnN0YW5jZSwgaW5qZWN0LCB0b1Jhdywgd2F0Y2gsIHVucmVmLCBtYXJrUmF3LCBlZmZlY3RTY29wZSwgcmVmLCBpc1Z1ZTIsIGlzUmVmLCBpc1JlYWN0aXZlLCBzZXQsIGdldEN1cnJlbnRTY29wZSwgb25TY29wZURpc3Bvc2UsIHJlYWN0aXZlLCB0b1JlZiwgZGVsLCBuZXh0VGljaywgY29tcHV0ZWQsIHRvUmVmcyB9IGZyb20gJ3Z1ZS1kZW1pJztcbmltcG9ydCB7IHNldHVwRGV2dG9vbHNQbHVnaW4gfSBmcm9tICdAdnVlL2RldnRvb2xzLWFwaSc7XG5cbi8qKlxyXG4gKiBzZXRBY3RpdmVQaW5pYSBtdXN0IGJlIGNhbGxlZCB0byBoYW5kbGUgU1NSIGF0IHRoZSB0b3Agb2YgZnVuY3Rpb25zIGxpa2VcclxuICogYGZldGNoYCwgYHNldHVwYCwgYHNlcnZlclByZWZldGNoYCBhbmQgb3RoZXJzXHJcbiAqL1xyXG5sZXQgYWN0aXZlUGluaWE7XHJcbi8qKlxyXG4gKiBTZXRzIG9yIHVuc2V0cyB0aGUgYWN0aXZlIHBpbmlhLiBVc2VkIGluIFNTUiBhbmQgaW50ZXJuYWxseSB3aGVuIGNhbGxpbmdcclxuICogYWN0aW9ucyBhbmQgZ2V0dGVyc1xyXG4gKlxyXG4gKiBAcGFyYW0gcGluaWEgLSBQaW5pYSBpbnN0YW5jZVxyXG4gKi9cclxuY29uc3Qgc2V0QWN0aXZlUGluaWEgPSAocGluaWEpID0+IChhY3RpdmVQaW5pYSA9IHBpbmlhKTtcclxuLyoqXHJcbiAqIEdldCB0aGUgY3VycmVudGx5IGFjdGl2ZSBwaW5pYSBpZiB0aGVyZSBpcyBhbnkuXHJcbiAqL1xyXG5jb25zdCBnZXRBY3RpdmVQaW5pYSA9ICgpID0+IChnZXRDdXJyZW50SW5zdGFuY2UoKSAmJiBpbmplY3QocGluaWFTeW1ib2wpKSB8fCBhY3RpdmVQaW5pYTtcclxuY29uc3QgcGluaWFTeW1ib2wgPSAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gU3ltYm9sKCdwaW5pYScpIDogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gU3ltYm9sKCkpO1xuXG5mdW5jdGlvbiBpc1BsYWluT2JqZWN0KFxyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG5vKSB7XHJcbiAgICByZXR1cm4gKG8gJiZcclxuICAgICAgICB0eXBlb2YgbyA9PT0gJ29iamVjdCcgJiZcclxuICAgICAgICBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykgPT09ICdbb2JqZWN0IE9iamVjdF0nICYmXHJcbiAgICAgICAgdHlwZW9mIG8udG9KU09OICE9PSAnZnVuY3Rpb24nKTtcclxufVxyXG4vLyB0eXBlIERlZXBSZWFkb25seTxUPiA9IHsgcmVhZG9ubHkgW1AgaW4ga2V5b2YgVF06IERlZXBSZWFkb25seTxUW1BdPiB9XHJcbi8vIFRPRE86IGNhbiB3ZSBjaGFuZ2UgdGhlc2UgdG8gbnVtYmVycz9cclxuLyoqXHJcbiAqIFBvc3NpYmxlIHR5cGVzIGZvciBTdWJzY3JpcHRpb25DYWxsYmFja1xyXG4gKi9cclxudmFyIE11dGF0aW9uVHlwZTtcclxuKGZ1bmN0aW9uIChNdXRhdGlvblR5cGUpIHtcclxuICAgIC8qKlxyXG4gICAgICogRGlyZWN0IG11dGF0aW9uIG9mIHRoZSBzdGF0ZTpcclxuICAgICAqXHJcbiAgICAgKiAtIGBzdG9yZS5uYW1lID0gJ25ldyBuYW1lJ2BcclxuICAgICAqIC0gYHN0b3JlLiRzdGF0ZS5uYW1lID0gJ25ldyBuYW1lJ2BcclxuICAgICAqIC0gYHN0b3JlLmxpc3QucHVzaCgnbmV3IGl0ZW0nKWBcclxuICAgICAqL1xyXG4gICAgTXV0YXRpb25UeXBlW1wiZGlyZWN0XCJdID0gXCJkaXJlY3RcIjtcclxuICAgIC8qKlxyXG4gICAgICogTXV0YXRlZCB0aGUgc3RhdGUgd2l0aCBgJHBhdGNoYCBhbmQgYW4gb2JqZWN0XHJcbiAgICAgKlxyXG4gICAgICogLSBgc3RvcmUuJHBhdGNoKHsgbmFtZTogJ25ld05hbWUnIH0pYFxyXG4gICAgICovXHJcbiAgICBNdXRhdGlvblR5cGVbXCJwYXRjaE9iamVjdFwiXSA9IFwicGF0Y2ggb2JqZWN0XCI7XHJcbiAgICAvKipcclxuICAgICAqIE11dGF0ZWQgdGhlIHN0YXRlIHdpdGggYCRwYXRjaGAgYW5kIGEgZnVuY3Rpb25cclxuICAgICAqXHJcbiAgICAgKiAtIGBzdG9yZS4kcGF0Y2goc3RhdGUgPT4gc3RhdGUubmFtZSA9ICduZXdOYW1lJylgXHJcbiAgICAgKi9cclxuICAgIE11dGF0aW9uVHlwZVtcInBhdGNoRnVuY3Rpb25cIl0gPSBcInBhdGNoIGZ1bmN0aW9uXCI7XHJcbiAgICAvLyBtYXliZSByZXNldD8gZm9yICRzdGF0ZSA9IHt9IGFuZCAkcmVzZXRcclxufSkoTXV0YXRpb25UeXBlIHx8IChNdXRhdGlvblR5cGUgPSB7fSkpO1xuXG5jb25zdCBJU19DTElFTlQgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJztcclxuLyoqXHJcbiAqIFNob3VsZCB3ZSBhZGQgdGhlIGRldnRvb2xzIHBsdWdpbnMuXHJcbiAqIC0gb25seSBpZiBkZXYgbW9kZSBvciBmb3JjZWQgdGhyb3VnaCB0aGUgcHJvZCBkZXZ0b29scyBmbGFnXHJcbiAqIC0gbm90IGluIHRlc3RcclxuICogLSBvbmx5IGlmIHdpbmRvdyBleGlzdHMgKGNvdWxkIGNoYW5nZSBpbiB0aGUgZnV0dXJlKVxyXG4gKi9cclxuY29uc3QgVVNFX0RFVlRPT0xTID0gKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCAodHlwZW9mIF9fVlVFX1BST0RfREVWVE9PTFNfXyAhPT0gJ3VuZGVmaW5lZCcgJiYgX19WVUVfUFJPRF9ERVZUT09MU19fKSkgJiYgIShwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Rlc3QnKSAmJiBJU19DTElFTlQ7XG5cbi8qXHJcbiAqIEZpbGVTYXZlci5qcyBBIHNhdmVBcygpIEZpbGVTYXZlciBpbXBsZW1lbnRhdGlvbi5cclxuICpcclxuICogT3JpZ2luYWxseSBieSBFbGkgR3JleSwgYWRhcHRlZCBhcyBhbiBFU00gbW9kdWxlIGJ5IEVkdWFyZG8gU2FuIE1hcnRpblxyXG4gKiBNb3JvdGUuXHJcbiAqXHJcbiAqIExpY2Vuc2UgOiBNSVRcclxuICovXHJcbi8vIFRoZSBvbmUgYW5kIG9ubHkgd2F5IG9mIGdldHRpbmcgZ2xvYmFsIHNjb3BlIGluIGFsbCBlbnZpcm9ubWVudHNcclxuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xLzMyNzcxODIvMTAwODk5OVxyXG5jb25zdCBfZ2xvYmFsID0gLyojX19QVVJFX18qLyAoKCkgPT4gdHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgJiYgd2luZG93LndpbmRvdyA9PT0gd2luZG93XHJcbiAgICA/IHdpbmRvd1xyXG4gICAgOiB0eXBlb2Ygc2VsZiA9PT0gJ29iamVjdCcgJiYgc2VsZi5zZWxmID09PSBzZWxmXHJcbiAgICAgICAgPyBzZWxmXHJcbiAgICAgICAgOiB0eXBlb2YgZ2xvYmFsID09PSAnb2JqZWN0JyAmJiBnbG9iYWwuZ2xvYmFsID09PSBnbG9iYWxcclxuICAgICAgICAgICAgPyBnbG9iYWxcclxuICAgICAgICAgICAgOiB0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCdcclxuICAgICAgICAgICAgICAgID8gZ2xvYmFsVGhpc1xyXG4gICAgICAgICAgICAgICAgOiB7IEhUTUxFbGVtZW50OiBudWxsIH0pKCk7XHJcbmZ1bmN0aW9uIGJvbShibG9iLCB7IGF1dG9Cb20gPSBmYWxzZSB9ID0ge30pIHtcclxuICAgIC8vIHByZXBlbmQgQk9NIGZvciBVVEYtOCBYTUwgYW5kIHRleHQvKiB0eXBlcyAoaW5jbHVkaW5nIEhUTUwpXHJcbiAgICAvLyBub3RlOiB5b3VyIGJyb3dzZXIgd2lsbCBhdXRvbWF0aWNhbGx5IGNvbnZlcnQgVVRGLTE2IFUrRkVGRiB0byBFRiBCQiBCRlxyXG4gICAgaWYgKGF1dG9Cb20gJiZcclxuICAgICAgICAvXlxccyooPzp0ZXh0XFwvXFxTKnxhcHBsaWNhdGlvblxcL3htbHxcXFMqXFwvXFxTKlxcK3htbClcXHMqOy4qY2hhcnNldFxccyo9XFxzKnV0Zi04L2kudGVzdChibG9iLnR5cGUpKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBCbG9iKFtTdHJpbmcuZnJvbUNoYXJDb2RlKDB4ZmVmZiksIGJsb2JdLCB7IHR5cGU6IGJsb2IudHlwZSB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBibG9iO1xyXG59XHJcbmZ1bmN0aW9uIGRvd25sb2FkKHVybCwgbmFtZSwgb3B0cykge1xyXG4gICAgY29uc3QgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICB4aHIub3BlbignR0VUJywgdXJsKTtcclxuICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYmxvYic7XHJcbiAgICB4aHIub25sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNhdmVBcyh4aHIucmVzcG9uc2UsIG5hbWUsIG9wdHMpO1xyXG4gICAgfTtcclxuICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ2NvdWxkIG5vdCBkb3dubG9hZCBmaWxlJyk7XHJcbiAgICB9O1xyXG4gICAgeGhyLnNlbmQoKTtcclxufVxyXG5mdW5jdGlvbiBjb3JzRW5hYmxlZCh1cmwpIHtcclxuICAgIGNvbnN0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgLy8gdXNlIHN5bmMgdG8gYXZvaWQgcG9wdXAgYmxvY2tlclxyXG4gICAgeGhyLm9wZW4oJ0hFQUQnLCB1cmwsIGZhbHNlKTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgeGhyLnNlbmQoKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7IH1cclxuICAgIHJldHVybiB4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDw9IDI5OTtcclxufVxyXG4vLyBgYS5jbGljaygpYCBkb2Vzbid0IHdvcmsgZm9yIGFsbCBicm93c2VycyAoIzQ2NSlcclxuZnVuY3Rpb24gY2xpY2sobm9kZSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBub2RlLmRpc3BhdGNoRXZlbnQobmV3IE1vdXNlRXZlbnQoJ2NsaWNrJykpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBjb25zdCBldnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnTW91c2VFdmVudHMnKTtcclxuICAgICAgICBldnQuaW5pdE1vdXNlRXZlbnQoJ2NsaWNrJywgdHJ1ZSwgdHJ1ZSwgd2luZG93LCAwLCAwLCAwLCA4MCwgMjAsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCAwLCBudWxsKTtcclxuICAgICAgICBub2RlLmRpc3BhdGNoRXZlbnQoZXZ0KTtcclxuICAgIH1cclxufVxyXG5jb25zdCBfbmF2aWdhdG9yID0gXHJcbiB0eXBlb2YgbmF2aWdhdG9yID09PSAnb2JqZWN0JyA/IG5hdmlnYXRvciA6IHsgdXNlckFnZW50OiAnJyB9O1xyXG4vLyBEZXRlY3QgV2ViVmlldyBpbnNpZGUgYSBuYXRpdmUgbWFjT1MgYXBwIGJ5IHJ1bGluZyBvdXQgYWxsIGJyb3dzZXJzXHJcbi8vIFdlIGp1c3QgbmVlZCB0byBjaGVjayBmb3IgJ1NhZmFyaScgYmVjYXVzZSBhbGwgb3RoZXIgYnJvd3NlcnMgKGJlc2lkZXMgRmlyZWZveCkgaW5jbHVkZSB0aGF0IHRvb1xyXG4vLyBodHRwczovL3d3dy53aGF0aXNteWJyb3dzZXIuY29tL2d1aWRlcy90aGUtbGF0ZXN0LXVzZXItYWdlbnQvbWFjb3NcclxuY29uc3QgaXNNYWNPU1dlYlZpZXcgPSAvKiNfX1BVUkVfXyovICgoKSA9PiAvTWFjaW50b3NoLy50ZXN0KF9uYXZpZ2F0b3IudXNlckFnZW50KSAmJlxyXG4gICAgL0FwcGxlV2ViS2l0Ly50ZXN0KF9uYXZpZ2F0b3IudXNlckFnZW50KSAmJlxyXG4gICAgIS9TYWZhcmkvLnRlc3QoX25hdmlnYXRvci51c2VyQWdlbnQpKSgpO1xyXG5jb25zdCBzYXZlQXMgPSAhSVNfQ0xJRU5UXHJcbiAgICA/ICgpID0+IHsgfSAvLyBub29wXHJcbiAgICA6IC8vIFVzZSBkb3dubG9hZCBhdHRyaWJ1dGUgZmlyc3QgaWYgcG9zc2libGUgKCMxOTMgTHVtaWEgbW9iaWxlKSB1bmxlc3MgdGhpcyBpcyBhIG1hY09TIFdlYlZpZXcgb3IgbWluaSBwcm9ncmFtXHJcbiAgICAgICAgdHlwZW9mIEhUTUxBbmNob3JFbGVtZW50ICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgICAgICAnZG93bmxvYWQnIGluIEhUTUxBbmNob3JFbGVtZW50LnByb3RvdHlwZSAmJlxyXG4gICAgICAgICAgICAhaXNNYWNPU1dlYlZpZXdcclxuICAgICAgICAgICAgPyBkb3dubG9hZFNhdmVBc1xyXG4gICAgICAgICAgICA6IC8vIFVzZSBtc1NhdmVPck9wZW5CbG9iIGFzIGEgc2Vjb25kIGFwcHJvYWNoXHJcbiAgICAgICAgICAgICAgICAnbXNTYXZlT3JPcGVuQmxvYicgaW4gX25hdmlnYXRvclxyXG4gICAgICAgICAgICAgICAgICAgID8gbXNTYXZlQXNcclxuICAgICAgICAgICAgICAgICAgICA6IC8vIEZhbGxiYWNrIHRvIHVzaW5nIEZpbGVSZWFkZXIgYW5kIGEgcG9wdXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZVNhdmVyU2F2ZUFzO1xyXG5mdW5jdGlvbiBkb3dubG9hZFNhdmVBcyhibG9iLCBuYW1lID0gJ2Rvd25sb2FkJywgb3B0cykge1xyXG4gICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAgIGEuZG93bmxvYWQgPSBuYW1lO1xyXG4gICAgYS5yZWwgPSAnbm9vcGVuZXInOyAvLyB0YWJuYWJiaW5nXHJcbiAgICAvLyBUT0RPOiBkZXRlY3QgY2hyb21lIGV4dGVuc2lvbnMgJiBwYWNrYWdlZCBhcHBzXHJcbiAgICAvLyBhLnRhcmdldCA9ICdfYmxhbmsnXHJcbiAgICBpZiAodHlwZW9mIGJsb2IgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgLy8gU3VwcG9ydCByZWd1bGFyIGxpbmtzXHJcbiAgICAgICAgYS5ocmVmID0gYmxvYjtcclxuICAgICAgICBpZiAoYS5vcmlnaW4gIT09IGxvY2F0aW9uLm9yaWdpbikge1xyXG4gICAgICAgICAgICBpZiAoY29yc0VuYWJsZWQoYS5ocmVmKSkge1xyXG4gICAgICAgICAgICAgICAgZG93bmxvYWQoYmxvYiwgbmFtZSwgb3B0cyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBhLnRhcmdldCA9ICdfYmxhbmsnO1xyXG4gICAgICAgICAgICAgICAgY2xpY2soYSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNsaWNrKGEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIC8vIFN1cHBvcnQgYmxvYnNcclxuICAgICAgICBhLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGEuaHJlZik7XHJcbiAgICAgICAgfSwgNGU0KTsgLy8gNDBzXHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNsaWNrKGEpO1xyXG4gICAgICAgIH0sIDApO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIG1zU2F2ZUFzKGJsb2IsIG5hbWUgPSAnZG93bmxvYWQnLCBvcHRzKSB7XHJcbiAgICBpZiAodHlwZW9mIGJsb2IgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgaWYgKGNvcnNFbmFibGVkKGJsb2IpKSB7XHJcbiAgICAgICAgICAgIGRvd25sb2FkKGJsb2IsIG5hbWUsIG9wdHMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAgICAgICAgICAgYS5ocmVmID0gYmxvYjtcclxuICAgICAgICAgICAgYS50YXJnZXQgPSAnX2JsYW5rJztcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBjbGljayhhKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZTogd29ya3Mgb24gd2luZG93c1xyXG4gICAgICAgIG5hdmlnYXRvci5tc1NhdmVPck9wZW5CbG9iKGJvbShibG9iLCBvcHRzKSwgbmFtZSk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZmlsZVNhdmVyU2F2ZUFzKGJsb2IsIG5hbWUsIG9wdHMsIHBvcHVwKSB7XHJcbiAgICAvLyBPcGVuIGEgcG9wdXAgaW1tZWRpYXRlbHkgZG8gZ28gYXJvdW5kIHBvcHVwIGJsb2NrZXJcclxuICAgIC8vIE1vc3RseSBvbmx5IGF2YWlsYWJsZSBvbiB1c2VyIGludGVyYWN0aW9uIGFuZCB0aGUgZmlsZVJlYWRlciBpcyBhc3luYyBzby4uLlxyXG4gICAgcG9wdXAgPSBwb3B1cCB8fCBvcGVuKCcnLCAnX2JsYW5rJyk7XHJcbiAgICBpZiAocG9wdXApIHtcclxuICAgICAgICBwb3B1cC5kb2N1bWVudC50aXRsZSA9IHBvcHVwLmRvY3VtZW50LmJvZHkuaW5uZXJUZXh0ID0gJ2Rvd25sb2FkaW5nLi4uJztcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgYmxvYiA9PT0gJ3N0cmluZycpXHJcbiAgICAgICAgcmV0dXJuIGRvd25sb2FkKGJsb2IsIG5hbWUsIG9wdHMpO1xyXG4gICAgY29uc3QgZm9yY2UgPSBibG9iLnR5cGUgPT09ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nO1xyXG4gICAgY29uc3QgaXNTYWZhcmkgPSAvY29uc3RydWN0b3IvaS50ZXN0KFN0cmluZyhfZ2xvYmFsLkhUTUxFbGVtZW50KSkgfHwgJ3NhZmFyaScgaW4gX2dsb2JhbDtcclxuICAgIGNvbnN0IGlzQ2hyb21lSU9TID0gL0NyaU9TXFwvW1xcZF0rLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xyXG4gICAgaWYgKChpc0Nocm9tZUlPUyB8fCAoZm9yY2UgJiYgaXNTYWZhcmkpIHx8IGlzTWFjT1NXZWJWaWV3KSAmJlxyXG4gICAgICAgIHR5cGVvZiBGaWxlUmVhZGVyICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIC8vIFNhZmFyaSBkb2Vzbid0IGFsbG93IGRvd25sb2FkaW5nIG9mIGJsb2IgVVJMc1xyXG4gICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcbiAgICAgICAgcmVhZGVyLm9ubG9hZGVuZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgbGV0IHVybCA9IHJlYWRlci5yZXN1bHQ7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdXJsICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgcG9wdXAgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXcm9uZyByZWFkZXIucmVzdWx0IHR5cGUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB1cmwgPSBpc0Nocm9tZUlPU1xyXG4gICAgICAgICAgICAgICAgPyB1cmxcclxuICAgICAgICAgICAgICAgIDogdXJsLnJlcGxhY2UoL15kYXRhOlteO10qOy8sICdkYXRhOmF0dGFjaG1lbnQvZmlsZTsnKTtcclxuICAgICAgICAgICAgaWYgKHBvcHVwKSB7XHJcbiAgICAgICAgICAgICAgICBwb3B1cC5sb2NhdGlvbi5ocmVmID0gdXJsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbG9jYXRpb24uYXNzaWduKHVybCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcG9wdXAgPSBudWxsOyAvLyByZXZlcnNlLXRhYm5hYmJpbmcgIzQ2MFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoYmxvYik7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xyXG4gICAgICAgIGlmIChwb3B1cClcclxuICAgICAgICAgICAgcG9wdXAubG9jYXRpb24uYXNzaWduKHVybCk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBsb2NhdGlvbi5ocmVmID0gdXJsO1xyXG4gICAgICAgIHBvcHVwID0gbnVsbDsgLy8gcmV2ZXJzZS10YWJuYWJiaW5nICM0NjBcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpO1xyXG4gICAgICAgIH0sIDRlNCk7IC8vIDQwc1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBTaG93cyBhIHRvYXN0IG9yIGNvbnNvbGUubG9nXHJcbiAqXHJcbiAqIEBwYXJhbSBtZXNzYWdlIC0gbWVzc2FnZSB0byBsb2dcclxuICogQHBhcmFtIHR5cGUgLSBkaWZmZXJlbnQgY29sb3Igb2YgdGhlIHRvb2x0aXBcclxuICovXHJcbmZ1bmN0aW9uIHRvYXN0TWVzc2FnZShtZXNzYWdlLCB0eXBlKSB7XHJcbiAgICBjb25zdCBwaW5pYU1lc3NhZ2UgPSAn8J+NjSAnICsgbWVzc2FnZTtcclxuICAgIGlmICh0eXBlb2YgX19WVUVfREVWVE9PTFNfVE9BU1RfXyA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIF9fVlVFX0RFVlRPT0xTX1RPQVNUX18ocGluaWFNZXNzYWdlLCB0eXBlKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGUgPT09ICdlcnJvcicpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKHBpbmlhTWVzc2FnZSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0eXBlID09PSAnd2FybicpIHtcclxuICAgICAgICBjb25zb2xlLndhcm4ocGluaWFNZXNzYWdlKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHBpbmlhTWVzc2FnZSk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gaXNQaW5pYShvKSB7XHJcbiAgICByZXR1cm4gJ19hJyBpbiBvICYmICdpbnN0YWxsJyBpbiBvO1xyXG59XG5cbmZ1bmN0aW9uIGNoZWNrQ2xpcGJvYXJkQWNjZXNzKCkge1xyXG4gICAgaWYgKCEoJ2NsaXBib2FyZCcgaW4gbmF2aWdhdG9yKSkge1xyXG4gICAgICAgIHRvYXN0TWVzc2FnZShgWW91ciBicm93c2VyIGRvZXNuJ3Qgc3VwcG9ydCB0aGUgQ2xpcGJvYXJkIEFQSWAsICdlcnJvcicpO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGNoZWNrTm90Rm9jdXNlZEVycm9yKGVycm9yKSB7XHJcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJlxyXG4gICAgICAgIGVycm9yLm1lc3NhZ2UudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZG9jdW1lbnQgaXMgbm90IGZvY3VzZWQnKSkge1xyXG4gICAgICAgIHRvYXN0TWVzc2FnZSgnWW91IG5lZWQgdG8gYWN0aXZhdGUgdGhlIFwiRW11bGF0ZSBhIGZvY3VzZWQgcGFnZVwiIHNldHRpbmcgaW4gdGhlIFwiUmVuZGVyaW5nXCIgcGFuZWwgb2YgZGV2dG9vbHMuJywgJ3dhcm4nKTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBhY3Rpb25HbG9iYWxDb3B5U3RhdGUocGluaWEpIHtcclxuICAgIGlmIChjaGVja0NsaXBib2FyZEFjY2VzcygpKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQoSlNPTi5zdHJpbmdpZnkocGluaWEuc3RhdGUudmFsdWUpKTtcclxuICAgICAgICB0b2FzdE1lc3NhZ2UoJ0dsb2JhbCBzdGF0ZSBjb3BpZWQgdG8gY2xpcGJvYXJkLicpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgaWYgKGNoZWNrTm90Rm9jdXNlZEVycm9yKGVycm9yKSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIHRvYXN0TWVzc2FnZShgRmFpbGVkIHRvIHNlcmlhbGl6ZSB0aGUgc3RhdGUuIENoZWNrIHRoZSBjb25zb2xlIGZvciBtb3JlIGRldGFpbHMuYCwgJ2Vycm9yJyk7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICB9XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gYWN0aW9uR2xvYmFsUGFzdGVTdGF0ZShwaW5pYSkge1xyXG4gICAgaWYgKGNoZWNrQ2xpcGJvYXJkQWNjZXNzKCkpXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBwaW5pYS5zdGF0ZS52YWx1ZSA9IEpTT04ucGFyc2UoYXdhaXQgbmF2aWdhdG9yLmNsaXBib2FyZC5yZWFkVGV4dCgpKTtcclxuICAgICAgICB0b2FzdE1lc3NhZ2UoJ0dsb2JhbCBzdGF0ZSBwYXN0ZWQgZnJvbSBjbGlwYm9hcmQuJyk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBpZiAoY2hlY2tOb3RGb2N1c2VkRXJyb3IoZXJyb3IpKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgdG9hc3RNZXNzYWdlKGBGYWlsZWQgdG8gZGVzZXJpYWxpemUgdGhlIHN0YXRlIGZyb20gY2xpcGJvYXJkLiBDaGVjayB0aGUgY29uc29sZSBmb3IgbW9yZSBkZXRhaWxzLmAsICdlcnJvcicpO1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgfVxyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIGFjdGlvbkdsb2JhbFNhdmVTdGF0ZShwaW5pYSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBzYXZlQXMobmV3IEJsb2IoW0pTT04uc3RyaW5naWZ5KHBpbmlhLnN0YXRlLnZhbHVlKV0sIHtcclxuICAgICAgICAgICAgdHlwZTogJ3RleHQvcGxhaW47Y2hhcnNldD11dGYtOCcsXHJcbiAgICAgICAgfSksICdwaW5pYS1zdGF0ZS5qc29uJyk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICB0b2FzdE1lc3NhZ2UoYEZhaWxlZCB0byBleHBvcnQgdGhlIHN0YXRlIGFzIEpTT04uIENoZWNrIHRoZSBjb25zb2xlIGZvciBtb3JlIGRldGFpbHMuYCwgJ2Vycm9yJyk7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICB9XHJcbn1cclxubGV0IGZpbGVJbnB1dDtcclxuZnVuY3Rpb24gZ2V0RmlsZU9wZW5lcigpIHtcclxuICAgIGlmICghZmlsZUlucHV0KSB7XHJcbiAgICAgICAgZmlsZUlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcclxuICAgICAgICBmaWxlSW5wdXQudHlwZSA9ICdmaWxlJztcclxuICAgICAgICBmaWxlSW5wdXQuYWNjZXB0ID0gJy5qc29uJztcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIG9wZW5GaWxlKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIGZpbGVJbnB1dC5vbmNoYW5nZSA9IGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVzID0gZmlsZUlucHV0LmZpbGVzO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFmaWxlcylcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShudWxsKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBmaWxlcy5pdGVtKDApO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFmaWxlKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKG51bGwpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoeyB0ZXh0OiBhd2FpdCBmaWxlLnRleHQoKSwgZmlsZSB9KTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZTogVE9ETzogY2hhbmdlZCBmcm9tIDQuMyB0byA0LjRcclxuICAgICAgICAgICAgZmlsZUlucHV0Lm9uY2FuY2VsID0gKCkgPT4gcmVzb2x2ZShudWxsKTtcclxuICAgICAgICAgICAgZmlsZUlucHV0Lm9uZXJyb3IgPSByZWplY3Q7XHJcbiAgICAgICAgICAgIGZpbGVJbnB1dC5jbGljaygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG9wZW5GaWxlO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIGFjdGlvbkdsb2JhbE9wZW5TdGF0ZUZpbGUocGluaWEpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3Qgb3BlbiA9IGF3YWl0IGdldEZpbGVPcGVuZXIoKTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBvcGVuKCk7XHJcbiAgICAgICAgaWYgKCFyZXN1bHQpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBjb25zdCB7IHRleHQsIGZpbGUgfSA9IHJlc3VsdDtcclxuICAgICAgICBwaW5pYS5zdGF0ZS52YWx1ZSA9IEpTT04ucGFyc2UodGV4dCk7XHJcbiAgICAgICAgdG9hc3RNZXNzYWdlKGBHbG9iYWwgc3RhdGUgaW1wb3J0ZWQgZnJvbSBcIiR7ZmlsZS5uYW1lfVwiLmApO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgdG9hc3RNZXNzYWdlKGBGYWlsZWQgdG8gZXhwb3J0IHRoZSBzdGF0ZSBhcyBKU09OLiBDaGVjayB0aGUgY29uc29sZSBmb3IgbW9yZSBkZXRhaWxzLmAsICdlcnJvcicpO1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgfVxyXG59XG5cbmZ1bmN0aW9uIGZvcm1hdERpc3BsYXkoZGlzcGxheSkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBfY3VzdG9tOiB7XHJcbiAgICAgICAgICAgIGRpc3BsYXksXHJcbiAgICAgICAgfSxcclxuICAgIH07XHJcbn1cclxuY29uc3QgUElOSUFfUk9PVF9MQUJFTCA9ICfwn42NIFBpbmlhIChyb290KSc7XHJcbmNvbnN0IFBJTklBX1JPT1RfSUQgPSAnX3Jvb3QnO1xyXG5mdW5jdGlvbiBmb3JtYXRTdG9yZUZvckluc3BlY3RvclRyZWUoc3RvcmUpIHtcclxuICAgIHJldHVybiBpc1BpbmlhKHN0b3JlKVxyXG4gICAgICAgID8ge1xyXG4gICAgICAgICAgICBpZDogUElOSUFfUk9PVF9JRCxcclxuICAgICAgICAgICAgbGFiZWw6IFBJTklBX1JPT1RfTEFCRUwsXHJcbiAgICAgICAgfVxyXG4gICAgICAgIDoge1xyXG4gICAgICAgICAgICBpZDogc3RvcmUuJGlkLFxyXG4gICAgICAgICAgICBsYWJlbDogc3RvcmUuJGlkLFxyXG4gICAgICAgIH07XHJcbn1cclxuZnVuY3Rpb24gZm9ybWF0U3RvcmVGb3JJbnNwZWN0b3JTdGF0ZShzdG9yZSkge1xyXG4gICAgaWYgKGlzUGluaWEoc3RvcmUpKSB7XHJcbiAgICAgICAgY29uc3Qgc3RvcmVOYW1lcyA9IEFycmF5LmZyb20oc3RvcmUuX3Mua2V5cygpKTtcclxuICAgICAgICBjb25zdCBzdG9yZU1hcCA9IHN0b3JlLl9zO1xyXG4gICAgICAgIGNvbnN0IHN0YXRlID0ge1xyXG4gICAgICAgICAgICBzdGF0ZTogc3RvcmVOYW1lcy5tYXAoKHN0b3JlSWQpID0+ICh7XHJcbiAgICAgICAgICAgICAgICBlZGl0YWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGtleTogc3RvcmVJZCxcclxuICAgICAgICAgICAgICAgIHZhbHVlOiBzdG9yZS5zdGF0ZS52YWx1ZVtzdG9yZUlkXSxcclxuICAgICAgICAgICAgfSkpLFxyXG4gICAgICAgICAgICBnZXR0ZXJzOiBzdG9yZU5hbWVzXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKChpZCkgPT4gc3RvcmVNYXAuZ2V0KGlkKS5fZ2V0dGVycylcclxuICAgICAgICAgICAgICAgIC5tYXAoKGlkKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdG9yZSA9IHN0b3JlTWFwLmdldChpZCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGVkaXRhYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBrZXk6IGlkLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzdG9yZS5fZ2V0dGVycy5yZWR1Y2UoKGdldHRlcnMsIGtleSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXR0ZXJzW2tleV0gPSBzdG9yZVtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0dGVycztcclxuICAgICAgICAgICAgICAgICAgICB9LCB7fSksXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBzdGF0ZTtcclxuICAgIH1cclxuICAgIGNvbnN0IHN0YXRlID0ge1xyXG4gICAgICAgIHN0YXRlOiBPYmplY3Qua2V5cyhzdG9yZS4kc3RhdGUpLm1hcCgoa2V5KSA9PiAoe1xyXG4gICAgICAgICAgICBlZGl0YWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAga2V5LFxyXG4gICAgICAgICAgICB2YWx1ZTogc3RvcmUuJHN0YXRlW2tleV0sXHJcbiAgICAgICAgfSkpLFxyXG4gICAgfTtcclxuICAgIC8vIGF2b2lkIGFkZGluZyBlbXB0eSBnZXR0ZXJzXHJcbiAgICBpZiAoc3RvcmUuX2dldHRlcnMgJiYgc3RvcmUuX2dldHRlcnMubGVuZ3RoKSB7XHJcbiAgICAgICAgc3RhdGUuZ2V0dGVycyA9IHN0b3JlLl9nZXR0ZXJzLm1hcCgoZ2V0dGVyTmFtZSkgPT4gKHtcclxuICAgICAgICAgICAgZWRpdGFibGU6IGZhbHNlLFxyXG4gICAgICAgICAgICBrZXk6IGdldHRlck5hbWUsXHJcbiAgICAgICAgICAgIHZhbHVlOiBzdG9yZVtnZXR0ZXJOYW1lXSxcclxuICAgICAgICB9KSk7XHJcbiAgICB9XHJcbiAgICBpZiAoc3RvcmUuX2N1c3RvbVByb3BlcnRpZXMuc2l6ZSkge1xyXG4gICAgICAgIHN0YXRlLmN1c3RvbVByb3BlcnRpZXMgPSBBcnJheS5mcm9tKHN0b3JlLl9jdXN0b21Qcm9wZXJ0aWVzKS5tYXAoKGtleSkgPT4gKHtcclxuICAgICAgICAgICAgZWRpdGFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIGtleSxcclxuICAgICAgICAgICAgdmFsdWU6IHN0b3JlW2tleV0sXHJcbiAgICAgICAgfSkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN0YXRlO1xyXG59XHJcbmZ1bmN0aW9uIGZvcm1hdEV2ZW50RGF0YShldmVudHMpIHtcclxuICAgIGlmICghZXZlbnRzKVxyXG4gICAgICAgIHJldHVybiB7fTtcclxuICAgIGlmIChBcnJheS5pc0FycmF5KGV2ZW50cykpIHtcclxuICAgICAgICAvLyBUT0RPOiBoYW5kbGUgYWRkIGFuZCBkZWxldGUgZm9yIGFycmF5cyBhbmQgb2JqZWN0c1xyXG4gICAgICAgIHJldHVybiBldmVudHMucmVkdWNlKChkYXRhLCBldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBkYXRhLmtleXMucHVzaChldmVudC5rZXkpO1xyXG4gICAgICAgICAgICBkYXRhLm9wZXJhdGlvbnMucHVzaChldmVudC50eXBlKTtcclxuICAgICAgICAgICAgZGF0YS5vbGRWYWx1ZVtldmVudC5rZXldID0gZXZlbnQub2xkVmFsdWU7XHJcbiAgICAgICAgICAgIGRhdGEubmV3VmFsdWVbZXZlbnQua2V5XSA9IGV2ZW50Lm5ld1ZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgIG9sZFZhbHVlOiB7fSxcclxuICAgICAgICAgICAga2V5czogW10sXHJcbiAgICAgICAgICAgIG9wZXJhdGlvbnM6IFtdLFxyXG4gICAgICAgICAgICBuZXdWYWx1ZToge30sXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBvcGVyYXRpb246IGZvcm1hdERpc3BsYXkoZXZlbnRzLnR5cGUpLFxyXG4gICAgICAgICAgICBrZXk6IGZvcm1hdERpc3BsYXkoZXZlbnRzLmtleSksXHJcbiAgICAgICAgICAgIG9sZFZhbHVlOiBldmVudHMub2xkVmFsdWUsXHJcbiAgICAgICAgICAgIG5ld1ZhbHVlOiBldmVudHMubmV3VmFsdWUsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBmb3JtYXRNdXRhdGlvblR5cGUodHlwZSkge1xyXG4gICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgY2FzZSBNdXRhdGlvblR5cGUuZGlyZWN0OlxyXG4gICAgICAgICAgICByZXR1cm4gJ211dGF0aW9uJztcclxuICAgICAgICBjYXNlIE11dGF0aW9uVHlwZS5wYXRjaEZ1bmN0aW9uOlxyXG4gICAgICAgICAgICByZXR1cm4gJyRwYXRjaCc7XHJcbiAgICAgICAgY2FzZSBNdXRhdGlvblR5cGUucGF0Y2hPYmplY3Q6XHJcbiAgICAgICAgICAgIHJldHVybiAnJHBhdGNoJztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gJ3Vua25vd24nO1xyXG4gICAgfVxyXG59XG5cbi8vIHRpbWVsaW5lIGNhbiBiZSBwYXVzZWQgd2hlbiBkaXJlY3RseSBjaGFuZ2luZyB0aGUgc3RhdGVcclxubGV0IGlzVGltZWxpbmVBY3RpdmUgPSB0cnVlO1xyXG5jb25zdCBjb21wb25lbnRTdGF0ZVR5cGVzID0gW107XHJcbmNvbnN0IE1VVEFUSU9OU19MQVlFUl9JRCA9ICdwaW5pYTptdXRhdGlvbnMnO1xyXG5jb25zdCBJTlNQRUNUT1JfSUQgPSAncGluaWEnO1xyXG4vKipcclxuICogR2V0cyB0aGUgZGlzcGxheWVkIG5hbWUgb2YgYSBzdG9yZSBpbiBkZXZ0b29sc1xyXG4gKlxyXG4gKiBAcGFyYW0gaWQgLSBpZCBvZiB0aGUgc3RvcmVcclxuICogQHJldHVybnMgYSBmb3JtYXR0ZWQgc3RyaW5nXHJcbiAqL1xyXG5jb25zdCBnZXRTdG9yZVR5cGUgPSAoaWQpID0+ICfwn42NICcgKyBpZDtcclxuLyoqXHJcbiAqIEFkZCB0aGUgcGluaWEgcGx1Z2luIHdpdGhvdXQgYW55IHN0b3JlLiBBbGxvd3MgZGlzcGxheWluZyBhIFBpbmlhIHBsdWdpbiB0YWJcclxuICogYXMgc29vbiBhcyBpdCBpcyBhZGRlZCB0byB0aGUgYXBwbGljYXRpb24uXHJcbiAqXHJcbiAqIEBwYXJhbSBhcHAgLSBWdWUgYXBwbGljYXRpb25cclxuICogQHBhcmFtIHBpbmlhIC0gcGluaWEgaW5zdGFuY2VcclxuICovXHJcbmZ1bmN0aW9uIHJlZ2lzdGVyUGluaWFEZXZ0b29scyhhcHAsIHBpbmlhKSB7XHJcbiAgICBzZXR1cERldnRvb2xzUGx1Z2luKHtcclxuICAgICAgICBpZDogJ2Rldi5lc20ucGluaWEnLFxyXG4gICAgICAgIGxhYmVsOiAnUGluaWEg8J+NjScsXHJcbiAgICAgICAgbG9nbzogJ2h0dHBzOi8vcGluaWEudnVlanMub3JnL2xvZ28uc3ZnJyxcclxuICAgICAgICBwYWNrYWdlTmFtZTogJ3BpbmlhJyxcclxuICAgICAgICBob21lcGFnZTogJ2h0dHBzOi8vcGluaWEudnVlanMub3JnJyxcclxuICAgICAgICBjb21wb25lbnRTdGF0ZVR5cGVzLFxyXG4gICAgICAgIGFwcCxcclxuICAgIH0sIChhcGkpID0+IHtcclxuICAgICAgICBpZiAodHlwZW9mIGFwaS5ub3cgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgdG9hc3RNZXNzYWdlKCdZb3Ugc2VlbSB0byBiZSB1c2luZyBhbiBvdXRkYXRlZCB2ZXJzaW9uIG9mIFZ1ZSBEZXZ0b29scy4gQXJlIHlvdSBzdGlsbCB1c2luZyB0aGUgQmV0YSByZWxlYXNlIGluc3RlYWQgb2YgdGhlIHN0YWJsZSBvbmU/IFlvdSBjYW4gZmluZCB0aGUgbGlua3MgYXQgaHR0cHM6Ly9kZXZ0b29scy52dWVqcy5vcmcvZ3VpZGUvaW5zdGFsbGF0aW9uLmh0bWwuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFwaS5hZGRUaW1lbGluZUxheWVyKHtcclxuICAgICAgICAgICAgaWQ6IE1VVEFUSU9OU19MQVlFUl9JRCxcclxuICAgICAgICAgICAgbGFiZWw6IGBQaW5pYSDwn42NYCxcclxuICAgICAgICAgICAgY29sb3I6IDB4ZTVkZjg4LFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGFwaS5hZGRJbnNwZWN0b3Ioe1xyXG4gICAgICAgICAgICBpZDogSU5TUEVDVE9SX0lELFxyXG4gICAgICAgICAgICBsYWJlbDogJ1BpbmlhIPCfjY0nLFxyXG4gICAgICAgICAgICBpY29uOiAnc3RvcmFnZScsXHJcbiAgICAgICAgICAgIHRyZWVGaWx0ZXJQbGFjZWhvbGRlcjogJ1NlYXJjaCBzdG9yZXMnLFxyXG4gICAgICAgICAgICBhY3Rpb25zOiBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2NvbnRlbnRfY29weScsXHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbkdsb2JhbENvcHlTdGF0ZShwaW5pYSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB0b29sdGlwOiAnU2VyaWFsaXplIGFuZCBjb3B5IHRoZSBzdGF0ZScsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGljb246ICdjb250ZW50X3Bhc3RlJyxcclxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYWN0aW9uR2xvYmFsUGFzdGVTdGF0ZShwaW5pYSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwaS5zZW5kSW5zcGVjdG9yVHJlZShJTlNQRUNUT1JfSUQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcGkuc2VuZEluc3BlY3RvclN0YXRlKElOU1BFQ1RPUl9JRCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB0b29sdGlwOiAnUmVwbGFjZSB0aGUgc3RhdGUgd2l0aCB0aGUgY29udGVudCBvZiB5b3VyIGNsaXBib2FyZCcsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGljb246ICdzYXZlJyxcclxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uR2xvYmFsU2F2ZVN0YXRlKHBpbmlhKTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHRvb2x0aXA6ICdTYXZlIHRoZSBzdGF0ZSBhcyBhIEpTT04gZmlsZScsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGljb246ICdmb2xkZXJfb3BlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGFjdGlvbkdsb2JhbE9wZW5TdGF0ZUZpbGUocGluaWEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcGkuc2VuZEluc3BlY3RvclRyZWUoSU5TUEVDVE9SX0lEKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXBpLnNlbmRJbnNwZWN0b3JTdGF0ZShJTlNQRUNUT1JfSUQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgdG9vbHRpcDogJ0ltcG9ydCB0aGUgc3RhdGUgZnJvbSBhIEpTT04gZmlsZScsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICBub2RlQWN0aW9uczogW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGljb246ICdyZXN0b3JlJyxcclxuICAgICAgICAgICAgICAgICAgICB0b29sdGlwOiAnUmVzZXQgdGhlIHN0YXRlIChvcHRpb24gc3RvcmUgb25seSknLFxyXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogKG5vZGVJZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdG9yZSA9IHBpbmlhLl9zLmdldChub2RlSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXN0b3JlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2FzdE1lc3NhZ2UoYENhbm5vdCByZXNldCBcIiR7bm9kZUlkfVwiIHN0b3JlIGJlY2F1c2UgaXQgd2Fzbid0IGZvdW5kLmAsICd3YXJuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIXN0b3JlLl9pc09wdGlvbnNBUEkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0TWVzc2FnZShgQ2Fubm90IHJlc2V0IFwiJHtub2RlSWR9XCIgc3RvcmUgYmVjYXVzZSBpdCdzIGEgc2V0dXAgc3RvcmUuYCwgJ3dhcm4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlLiRyZXNldCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RNZXNzYWdlKGBTdG9yZSBcIiR7bm9kZUlkfVwiIHJlc2V0LmApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXBpLm9uLmluc3BlY3RDb21wb25lbnQoKHBheWxvYWQsIGN0eCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBwcm94eSA9IChwYXlsb2FkLmNvbXBvbmVudEluc3RhbmNlICYmXHJcbiAgICAgICAgICAgICAgICBwYXlsb2FkLmNvbXBvbmVudEluc3RhbmNlLnByb3h5KTtcclxuICAgICAgICAgICAgaWYgKHByb3h5ICYmIHByb3h5Ll9wU3RvcmVzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwaW5pYVN0b3JlcyA9IHBheWxvYWQuY29tcG9uZW50SW5zdGFuY2UucHJveHkuX3BTdG9yZXM7XHJcbiAgICAgICAgICAgICAgICBPYmplY3QudmFsdWVzKHBpbmlhU3RvcmVzKS5mb3JFYWNoKChzdG9yZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQuaW5zdGFuY2VEYXRhLnN0YXRlLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBnZXRTdG9yZVR5cGUoc3RvcmUuJGlkKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiAnc3RhdGUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0YWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHN0b3JlLl9pc09wdGlvbnNBUElcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jdXN0b206IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRvUmF3KHN0b3JlLiRzdGF0ZSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbnM6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAncmVzdG9yZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHRpcDogJ1Jlc2V0IHRoZSBzdGF0ZSBvZiB0aGlzIHN0b3JlJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICgpID0+IHN0b3JlLiRyZXNldCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAvLyBOT1RFOiB3b3JrYXJvdW5kIHRvIHVud3JhcCB0cmFuc2ZlcnJlZCByZWZzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoc3RvcmUuJHN0YXRlKS5yZWR1Y2UoKHN0YXRlLCBrZXkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVba2V5XSA9IHN0b3JlLiRzdGF0ZVtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RhdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwge30pLFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdG9yZS5fZ2V0dGVycyAmJiBzdG9yZS5fZ2V0dGVycy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZC5pbnN0YW5jZURhdGEuc3RhdGUucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBnZXRTdG9yZVR5cGUoc3RvcmUuJGlkKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogJ2dldHRlcnMnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRpdGFibGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHN0b3JlLl9nZXR0ZXJzLnJlZHVjZSgoZ2V0dGVycywga2V5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0dGVyc1trZXldID0gc3RvcmVba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IHdlIGp1c3Qgd2FudCB0byBzaG93IGl0IGluIGRldnRvb2xzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldHRlcnNba2V5XSA9IGVycm9yO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0dGVycztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHt9KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBhcGkub24uZ2V0SW5zcGVjdG9yVHJlZSgocGF5bG9hZCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAocGF5bG9hZC5hcHAgPT09IGFwcCAmJiBwYXlsb2FkLmluc3BlY3RvcklkID09PSBJTlNQRUNUT1JfSUQpIHtcclxuICAgICAgICAgICAgICAgIGxldCBzdG9yZXMgPSBbcGluaWFdO1xyXG4gICAgICAgICAgICAgICAgc3RvcmVzID0gc3RvcmVzLmNvbmNhdChBcnJheS5mcm9tKHBpbmlhLl9zLnZhbHVlcygpKSk7XHJcbiAgICAgICAgICAgICAgICBwYXlsb2FkLnJvb3ROb2RlcyA9IChwYXlsb2FkLmZpbHRlclxyXG4gICAgICAgICAgICAgICAgICAgID8gc3RvcmVzLmZpbHRlcigoc3RvcmUpID0+ICckaWQnIGluIHN0b3JlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc3RvcmUuJGlkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudG9Mb3dlckNhc2UoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKHBheWxvYWQuZmlsdGVyLnRvTG93ZXJDYXNlKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogUElOSUFfUk9PVF9MQUJFTC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHBheWxvYWQuZmlsdGVyLnRvTG93ZXJDYXNlKCkpKVxyXG4gICAgICAgICAgICAgICAgICAgIDogc3RvcmVzKS5tYXAoZm9ybWF0U3RvcmVGb3JJbnNwZWN0b3JUcmVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGFwaS5vbi5nZXRJbnNwZWN0b3JTdGF0ZSgocGF5bG9hZCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAocGF5bG9hZC5hcHAgPT09IGFwcCAmJiBwYXlsb2FkLmluc3BlY3RvcklkID09PSBJTlNQRUNUT1JfSUQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGluc3BlY3RlZFN0b3JlID0gcGF5bG9hZC5ub2RlSWQgPT09IFBJTklBX1JPT1RfSURcclxuICAgICAgICAgICAgICAgICAgICA/IHBpbmlhXHJcbiAgICAgICAgICAgICAgICAgICAgOiBwaW5pYS5fcy5nZXQocGF5bG9hZC5ub2RlSWQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpbnNwZWN0ZWRTdG9yZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgY291bGQgYmUgdGhlIHNlbGVjdGVkIHN0b3JlIHJlc3RvcmVkIGZvciBhIGRpZmZlcmVudCBwcm9qZWN0XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc28gaXQncyBiZXR0ZXIgbm90IHRvIHNheSBhbnl0aGluZyBoZXJlXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGluc3BlY3RlZFN0b3JlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZC5zdGF0ZSA9IGZvcm1hdFN0b3JlRm9ySW5zcGVjdG9yU3RhdGUoaW5zcGVjdGVkU3RvcmUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXBpLm9uLmVkaXRJbnNwZWN0b3JTdGF0ZSgocGF5bG9hZCwgY3R4KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChwYXlsb2FkLmFwcCA9PT0gYXBwICYmIHBheWxvYWQuaW5zcGVjdG9ySWQgPT09IElOU1BFQ1RPUl9JRCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5zcGVjdGVkU3RvcmUgPSBwYXlsb2FkLm5vZGVJZCA9PT0gUElOSUFfUk9PVF9JRFxyXG4gICAgICAgICAgICAgICAgICAgID8gcGluaWFcclxuICAgICAgICAgICAgICAgICAgICA6IHBpbmlhLl9zLmdldChwYXlsb2FkLm5vZGVJZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWluc3BlY3RlZFN0b3JlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRvYXN0TWVzc2FnZShgc3RvcmUgXCIke3BheWxvYWQubm9kZUlkfVwiIG5vdCBmb3VuZGAsICdlcnJvcicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgeyBwYXRoIH0gPSBwYXlsb2FkO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpc1BpbmlhKGluc3BlY3RlZFN0b3JlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGFjY2VzcyBvbmx5IHRoZSBzdGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXRoLmxlbmd0aCAhPT0gMSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAhaW5zcGVjdGVkU3RvcmUuX2N1c3RvbVByb3BlcnRpZXMuaGFzKHBhdGhbMF0pIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGhbMF0gaW4gaW5zcGVjdGVkU3RvcmUuJHN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGgudW5zaGlmdCgnJHN0YXRlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUm9vdCBhY2Nlc3MsIHdlIGNhbiBvbWl0IHRoZSBgLnZhbHVlYCBiZWNhdXNlIHRoZSBkZXZ0b29scyBBUEkgZG9lcyBpdCBmb3IgdXNcclxuICAgICAgICAgICAgICAgICAgICBwYXRoLnVuc2hpZnQoJ3N0YXRlJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpc1RpbWVsaW5lQWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBwYXlsb2FkLnNldChpbnNwZWN0ZWRTdG9yZSwgcGF0aCwgcGF5bG9hZC5zdGF0ZS52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBpc1RpbWVsaW5lQWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGFwaS5vbi5lZGl0Q29tcG9uZW50U3RhdGUoKHBheWxvYWQpID0+IHtcclxuICAgICAgICAgICAgaWYgKHBheWxvYWQudHlwZS5zdGFydHNXaXRoKCfwn42NJykpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN0b3JlSWQgPSBwYXlsb2FkLnR5cGUucmVwbGFjZSgvXvCfjY1cXHMqLywgJycpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RvcmUgPSBwaW5pYS5fcy5nZXQoc3RvcmVJZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXN0b3JlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRvYXN0TWVzc2FnZShgc3RvcmUgXCIke3N0b3JlSWR9XCIgbm90IGZvdW5kYCwgJ2Vycm9yJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IHBhdGggfSA9IHBheWxvYWQ7XHJcbiAgICAgICAgICAgICAgICBpZiAocGF0aFswXSAhPT0gJ3N0YXRlJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0b2FzdE1lc3NhZ2UoYEludmFsaWQgcGF0aCBmb3Igc3RvcmUgXCIke3N0b3JlSWR9XCI6XFxuJHtwYXRofVxcbk9ubHkgc3RhdGUgY2FuIGJlIG1vZGlmaWVkLmApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gcmV3cml0ZSB0aGUgZmlyc3QgZW50cnkgdG8gYmUgYWJsZSB0byBkaXJlY3RseSBzZXQgdGhlIHN0YXRlIGFzXHJcbiAgICAgICAgICAgICAgICAvLyB3ZWxsIGFzIGFueSBvdGhlciBwYXRoXHJcbiAgICAgICAgICAgICAgICBwYXRoWzBdID0gJyRzdGF0ZSc7XHJcbiAgICAgICAgICAgICAgICBpc1RpbWVsaW5lQWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBwYXlsb2FkLnNldChzdG9yZSwgcGF0aCwgcGF5bG9hZC5zdGF0ZS52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBpc1RpbWVsaW5lQWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gYWRkU3RvcmVUb0RldnRvb2xzKGFwcCwgc3RvcmUpIHtcclxuICAgIGlmICghY29tcG9uZW50U3RhdGVUeXBlcy5pbmNsdWRlcyhnZXRTdG9yZVR5cGUoc3RvcmUuJGlkKSkpIHtcclxuICAgICAgICBjb21wb25lbnRTdGF0ZVR5cGVzLnB1c2goZ2V0U3RvcmVUeXBlKHN0b3JlLiRpZCkpO1xyXG4gICAgfVxyXG4gICAgc2V0dXBEZXZ0b29sc1BsdWdpbih7XHJcbiAgICAgICAgaWQ6ICdkZXYuZXNtLnBpbmlhJyxcclxuICAgICAgICBsYWJlbDogJ1BpbmlhIPCfjY0nLFxyXG4gICAgICAgIGxvZ286ICdodHRwczovL3BpbmlhLnZ1ZWpzLm9yZy9sb2dvLnN2ZycsXHJcbiAgICAgICAgcGFja2FnZU5hbWU6ICdwaW5pYScsXHJcbiAgICAgICAgaG9tZXBhZ2U6ICdodHRwczovL3BpbmlhLnZ1ZWpzLm9yZycsXHJcbiAgICAgICAgY29tcG9uZW50U3RhdGVUeXBlcyxcclxuICAgICAgICBhcHAsXHJcbiAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgICAgbG9nU3RvcmVDaGFuZ2VzOiB7XHJcbiAgICAgICAgICAgICAgICBsYWJlbDogJ05vdGlmeSBhYm91dCBuZXcvZGVsZXRlZCBzdG9yZXMnLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogJ2Jvb2xlYW4nLFxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiB0cnVlLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvLyB1c2VFbW9qaXM6IHtcclxuICAgICAgICAgICAgLy8gICBsYWJlbDogJ1VzZSBlbW9qaXMgaW4gbWVzc2FnZXMg4pqh77iPJyxcclxuICAgICAgICAgICAgLy8gICB0eXBlOiAnYm9vbGVhbicsXHJcbiAgICAgICAgICAgIC8vICAgZGVmYXVsdFZhbHVlOiB0cnVlLFxyXG4gICAgICAgICAgICAvLyB9LFxyXG4gICAgICAgIH0sXHJcbiAgICB9LCAoYXBpKSA9PiB7XHJcbiAgICAgICAgLy8gZ3JhY2VmdWxseSBoYW5kbGUgZXJyb3JzXHJcbiAgICAgICAgY29uc3Qgbm93ID0gdHlwZW9mIGFwaS5ub3cgPT09ICdmdW5jdGlvbicgPyBhcGkubm93LmJpbmQoYXBpKSA6IERhdGUubm93O1xyXG4gICAgICAgIHN0b3JlLiRvbkFjdGlvbigoeyBhZnRlciwgb25FcnJvciwgbmFtZSwgYXJncyB9KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGdyb3VwSWQgPSBydW5uaW5nQWN0aW9uSWQrKztcclxuICAgICAgICAgICAgYXBpLmFkZFRpbWVsaW5lRXZlbnQoe1xyXG4gICAgICAgICAgICAgICAgbGF5ZXJJZDogTVVUQVRJT05TX0xBWUVSX0lELFxyXG4gICAgICAgICAgICAgICAgZXZlbnQ6IHtcclxuICAgICAgICAgICAgICAgICAgICB0aW1lOiBub3coKSxcclxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ/Cfm6sgJyArIG5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgc3VidGl0bGU6ICdzdGFydCcsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9yZTogZm9ybWF0RGlzcGxheShzdG9yZS4kaWQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb246IGZvcm1hdERpc3BsYXkobmFtZSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBncm91cElkLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGFmdGVyKChyZXN1bHQpID0+IHtcclxuICAgICAgICAgICAgICAgIGFjdGl2ZUFjdGlvbiA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIGFwaS5hZGRUaW1lbGluZUV2ZW50KHtcclxuICAgICAgICAgICAgICAgICAgICBsYXllcklkOiBNVVRBVElPTlNfTEFZRVJfSUQsXHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZTogbm93KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn8J+brCAnICsgbmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGl0bGU6ICdlbmQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9yZTogZm9ybWF0RGlzcGxheShzdG9yZS4kaWQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBmb3JtYXREaXNwbGF5KG5hbWUpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJncyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZCxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBvbkVycm9yKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgYWN0aXZlQWN0aW9uID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgYXBpLmFkZFRpbWVsaW5lRXZlbnQoe1xyXG4gICAgICAgICAgICAgICAgICAgIGxheWVySWQ6IE1VVEFUSU9OU19MQVlFUl9JRCxcclxuICAgICAgICAgICAgICAgICAgICBldmVudDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiBub3coKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nVHlwZTogJ2Vycm9yJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfwn5KlICcgKyBuYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0aXRsZTogJ2VuZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlOiBmb3JtYXREaXNwbGF5KHN0b3JlLiRpZCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb246IGZvcm1hdERpc3BsYXkobmFtZSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LCB0cnVlKTtcclxuICAgICAgICBzdG9yZS5fY3VzdG9tUHJvcGVydGllcy5mb3JFYWNoKChuYW1lKSA9PiB7XHJcbiAgICAgICAgICAgIHdhdGNoKCgpID0+IHVucmVmKHN0b3JlW25hbWVdKSwgKG5ld1ZhbHVlLCBvbGRWYWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgYXBpLm5vdGlmeUNvbXBvbmVudFVwZGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgYXBpLnNlbmRJbnNwZWN0b3JTdGF0ZShJTlNQRUNUT1JfSUQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzVGltZWxpbmVBY3RpdmUpIHtcclxuICAgICAgICAgICAgICAgICAgICBhcGkuYWRkVGltZWxpbmVFdmVudCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVySWQ6IE1VVEFUSU9OU19MQVlFUl9JRCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IG5vdygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdDaGFuZ2UnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VidGl0bGU6IG5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkVmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZDogYWN0aXZlQWN0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCB7IGRlZXA6IHRydWUgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc3RvcmUuJHN1YnNjcmliZSgoeyBldmVudHMsIHR5cGUgfSwgc3RhdGUpID0+IHtcclxuICAgICAgICAgICAgYXBpLm5vdGlmeUNvbXBvbmVudFVwZGF0ZSgpO1xyXG4gICAgICAgICAgICBhcGkuc2VuZEluc3BlY3RvclN0YXRlKElOU1BFQ1RPUl9JRCk7XHJcbiAgICAgICAgICAgIGlmICghaXNUaW1lbGluZUFjdGl2ZSlcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgLy8gcm9vdFN0b3JlLnN0YXRlW3N0b3JlLmlkXSA9IHN0YXRlXHJcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50RGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIHRpbWU6IG5vdygpLFxyXG4gICAgICAgICAgICAgICAgdGl0bGU6IGZvcm1hdE11dGF0aW9uVHlwZSh0eXBlKSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICBzdG9yZTogZm9ybWF0RGlzcGxheShzdG9yZS4kaWQpLFxyXG4gICAgICAgICAgICAgICAgICAgIC4uLmZvcm1hdEV2ZW50RGF0YShldmVudHMpLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGdyb3VwSWQ6IGFjdGl2ZUFjdGlvbixcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgLy8gcmVzZXQgZm9yIHRoZSBuZXh0IG11dGF0aW9uXHJcbiAgICAgICAgICAgIGFjdGl2ZUFjdGlvbiA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgaWYgKHR5cGUgPT09IE11dGF0aW9uVHlwZS5wYXRjaEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBldmVudERhdGEuc3VidGl0bGUgPSAn4qS177iPJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlID09PSBNdXRhdGlvblR5cGUucGF0Y2hPYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIGV2ZW50RGF0YS5zdWJ0aXRsZSA9ICfwn6epJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChldmVudHMgJiYgIUFycmF5LmlzQXJyYXkoZXZlbnRzKSkge1xyXG4gICAgICAgICAgICAgICAgZXZlbnREYXRhLnN1YnRpdGxlID0gZXZlbnRzLnR5cGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGV2ZW50cykge1xyXG4gICAgICAgICAgICAgICAgZXZlbnREYXRhLmRhdGFbJ3Jhd0V2ZW50KHMpJ10gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2N1c3RvbToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiAnRGVidWdnZXJFdmVudCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdvYmplY3QnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sdGlwOiAncmF3IERlYnVnZ2VyRXZlbnRbXScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBldmVudHMsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXBpLmFkZFRpbWVsaW5lRXZlbnQoe1xyXG4gICAgICAgICAgICAgICAgbGF5ZXJJZDogTVVUQVRJT05TX0xBWUVSX0lELFxyXG4gICAgICAgICAgICAgICAgZXZlbnQ6IGV2ZW50RGF0YSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSwgeyBkZXRhY2hlZDogdHJ1ZSwgZmx1c2g6ICdzeW5jJyB9KTtcclxuICAgICAgICBjb25zdCBob3RVcGRhdGUgPSBzdG9yZS5faG90VXBkYXRlO1xyXG4gICAgICAgIHN0b3JlLl9ob3RVcGRhdGUgPSBtYXJrUmF3KChuZXdTdG9yZSkgPT4ge1xyXG4gICAgICAgICAgICBob3RVcGRhdGUobmV3U3RvcmUpO1xyXG4gICAgICAgICAgICBhcGkuYWRkVGltZWxpbmVFdmVudCh7XHJcbiAgICAgICAgICAgICAgICBsYXllcklkOiBNVVRBVElPTlNfTEFZRVJfSUQsXHJcbiAgICAgICAgICAgICAgICBldmVudDoge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IG5vdygpLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn8J+UpSAnICsgc3RvcmUuJGlkLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1YnRpdGxlOiAnSE1SIHVwZGF0ZScsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9yZTogZm9ybWF0RGlzcGxheShzdG9yZS4kaWQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmZvOiBmb3JtYXREaXNwbGF5KGBITVIgdXBkYXRlYCksXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyB1cGRhdGUgdGhlIGRldnRvb2xzIHRvb1xyXG4gICAgICAgICAgICBhcGkubm90aWZ5Q29tcG9uZW50VXBkYXRlKCk7XHJcbiAgICAgICAgICAgIGFwaS5zZW5kSW5zcGVjdG9yVHJlZShJTlNQRUNUT1JfSUQpO1xyXG4gICAgICAgICAgICBhcGkuc2VuZEluc3BlY3RvclN0YXRlKElOU1BFQ1RPUl9JRCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgeyAkZGlzcG9zZSB9ID0gc3RvcmU7XHJcbiAgICAgICAgc3RvcmUuJGRpc3Bvc2UgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICRkaXNwb3NlKCk7XHJcbiAgICAgICAgICAgIGFwaS5ub3RpZnlDb21wb25lbnRVcGRhdGUoKTtcclxuICAgICAgICAgICAgYXBpLnNlbmRJbnNwZWN0b3JUcmVlKElOU1BFQ1RPUl9JRCk7XHJcbiAgICAgICAgICAgIGFwaS5zZW5kSW5zcGVjdG9yU3RhdGUoSU5TUEVDVE9SX0lEKTtcclxuICAgICAgICAgICAgYXBpLmdldFNldHRpbmdzKCkubG9nU3RvcmVDaGFuZ2VzICYmXHJcbiAgICAgICAgICAgICAgICB0b2FzdE1lc3NhZ2UoYERpc3Bvc2VkIFwiJHtzdG9yZS4kaWR9XCIgc3RvcmUg8J+XkWApO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8gdHJpZ2dlciBhbiB1cGRhdGUgc28gaXQgY2FuIGRpc3BsYXkgbmV3IHJlZ2lzdGVyZWQgc3RvcmVzXHJcbiAgICAgICAgYXBpLm5vdGlmeUNvbXBvbmVudFVwZGF0ZSgpO1xyXG4gICAgICAgIGFwaS5zZW5kSW5zcGVjdG9yVHJlZShJTlNQRUNUT1JfSUQpO1xyXG4gICAgICAgIGFwaS5zZW5kSW5zcGVjdG9yU3RhdGUoSU5TUEVDVE9SX0lEKTtcclxuICAgICAgICBhcGkuZ2V0U2V0dGluZ3MoKS5sb2dTdG9yZUNoYW5nZXMgJiZcclxuICAgICAgICAgICAgdG9hc3RNZXNzYWdlKGBcIiR7c3RvcmUuJGlkfVwiIHN0b3JlIGluc3RhbGxlZCDwn4aVYCk7XHJcbiAgICB9KTtcclxufVxyXG5sZXQgcnVubmluZ0FjdGlvbklkID0gMDtcclxubGV0IGFjdGl2ZUFjdGlvbjtcclxuLyoqXHJcbiAqIFBhdGNoZXMgYSBzdG9yZSB0byBlbmFibGUgYWN0aW9uIGdyb3VwaW5nIGluIGRldnRvb2xzIGJ5IHdyYXBwaW5nIHRoZSBzdG9yZSB3aXRoIGEgUHJveHkgdGhhdCBpcyBwYXNzZWQgYXMgdGhlXHJcbiAqIGNvbnRleHQgb2YgYWxsIGFjdGlvbnMsIGFsbG93aW5nIHVzIHRvIHNldCBgcnVubmluZ0FjdGlvbmAgb24gZWFjaCBhY2Nlc3MgYW5kIGVmZmVjdGl2ZWx5IGFzc29jaWF0aW5nIGFueSBzdGF0ZVxyXG4gKiBtdXRhdGlvbiB0byB0aGUgYWN0aW9uLlxyXG4gKlxyXG4gKiBAcGFyYW0gc3RvcmUgLSBzdG9yZSB0byBwYXRjaFxyXG4gKiBAcGFyYW0gYWN0aW9uTmFtZXMgLSBsaXN0IG9mIGFjdGlvbnN0IHRvIHBhdGNoXHJcbiAqL1xyXG5mdW5jdGlvbiBwYXRjaEFjdGlvbkZvckdyb3VwaW5nKHN0b3JlLCBhY3Rpb25OYW1lcykge1xyXG4gICAgLy8gb3JpZ2luYWwgYWN0aW9ucyBvZiB0aGUgc3RvcmUgYXMgdGhleSBhcmUgZ2l2ZW4gYnkgcGluaWEuIFdlIGFyZSBnb2luZyB0byBvdmVycmlkZSB0aGVtXHJcbiAgICBjb25zdCBhY3Rpb25zID0gYWN0aW9uTmFtZXMucmVkdWNlKChzdG9yZUFjdGlvbnMsIGFjdGlvbk5hbWUpID0+IHtcclxuICAgICAgICAvLyB1c2UgdG9SYXcgdG8gYXZvaWQgdHJhY2tpbmcgIzU0MVxyXG4gICAgICAgIHN0b3JlQWN0aW9uc1thY3Rpb25OYW1lXSA9IHRvUmF3KHN0b3JlKVthY3Rpb25OYW1lXTtcclxuICAgICAgICByZXR1cm4gc3RvcmVBY3Rpb25zO1xyXG4gICAgfSwge30pO1xyXG4gICAgZm9yIChjb25zdCBhY3Rpb25OYW1lIGluIGFjdGlvbnMpIHtcclxuICAgICAgICBzdG9yZVthY3Rpb25OYW1lXSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gc2V0QWN0aXZlUGluaWEoc3RvcmUuX3ApXHJcbiAgICAgICAgICAgIC8vIHRoZSBydW5uaW5nIGFjdGlvbiBpZCBpcyBpbmNyZW1lbnRlZCBpbiBhIGJlZm9yZSBhY3Rpb24gaG9va1xyXG4gICAgICAgICAgICBjb25zdCBfYWN0aW9uSWQgPSBydW5uaW5nQWN0aW9uSWQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHRyYWNrZWRTdG9yZSA9IG5ldyBQcm94eShzdG9yZSwge1xyXG4gICAgICAgICAgICAgICAgZ2V0KC4uLmFyZ3MpIHtcclxuICAgICAgICAgICAgICAgICAgICBhY3RpdmVBY3Rpb24gPSBfYWN0aW9uSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJlZmxlY3QuZ2V0KC4uLmFyZ3MpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHNldCguLi5hcmdzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlQWN0aW9uID0gX2FjdGlvbklkO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBSZWZsZWN0LnNldCguLi5hcmdzKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gYWN0aW9uc1thY3Rpb25OYW1lXS5hcHBseSh0cmFja2VkU3RvcmUsIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogcGluaWEudXNlKGRldnRvb2xzUGx1Z2luKVxyXG4gKi9cclxuZnVuY3Rpb24gZGV2dG9vbHNQbHVnaW4oeyBhcHAsIHN0b3JlLCBvcHRpb25zIH0pIHtcclxuICAgIC8vIEhNUiBtb2R1bGVcclxuICAgIGlmIChzdG9yZS4kaWQuc3RhcnRzV2l0aCgnX19ob3Q6JykpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICAvLyBkZXRlY3Qgb3B0aW9uIGFwaSB2cyBzZXR1cCBhcGlcclxuICAgIGlmIChvcHRpb25zLnN0YXRlKSB7XHJcbiAgICAgICAgc3RvcmUuX2lzT3B0aW9uc0FQSSA9IHRydWU7XHJcbiAgICB9XHJcbiAgICAvLyBvbmx5IHdyYXAgYWN0aW9ucyBpbiBvcHRpb24tZGVmaW5lZCBzdG9yZXMgYXMgdGhpcyB0ZWNobmlxdWUgcmVsaWVzIG9uXHJcbiAgICAvLyB3cmFwcGluZyB0aGUgY29udGV4dCBvZiB0aGUgYWN0aW9uIHdpdGggYSBwcm94eVxyXG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLnN0YXRlID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgcGF0Y2hBY3Rpb25Gb3JHcm91cGluZyhcclxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiBjYW4gY2FzdCB0aGUgc3RvcmUuLi5cclxuICAgICAgICBzdG9yZSwgT2JqZWN0LmtleXMob3B0aW9ucy5hY3Rpb25zKSk7XHJcbiAgICAgICAgY29uc3Qgb3JpZ2luYWxIb3RVcGRhdGUgPSBzdG9yZS5faG90VXBkYXRlO1xyXG4gICAgICAgIC8vIFVwZ3JhZGUgdGhlIEhNUiB0byBhbHNvIHVwZGF0ZSB0aGUgbmV3IGFjdGlvbnNcclxuICAgICAgICB0b1JhdyhzdG9yZSkuX2hvdFVwZGF0ZSA9IGZ1bmN0aW9uIChuZXdTdG9yZSkge1xyXG4gICAgICAgICAgICBvcmlnaW5hbEhvdFVwZGF0ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgICAgICAgICBwYXRjaEFjdGlvbkZvckdyb3VwaW5nKHN0b3JlLCBPYmplY3Qua2V5cyhuZXdTdG9yZS5faG1yUGF5bG9hZC5hY3Rpb25zKSk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIGFkZFN0b3JlVG9EZXZ0b29scyhhcHAsIFxyXG4gICAgLy8gRklYTUU6IGlzIHRoZXJlIGEgd2F5IHRvIGFsbG93IHRoZSBhc3NpZ25tZW50IGZyb20gU3RvcmU8SWQsIFMsIEcsIEE+IHRvIFN0b3JlR2VuZXJpYz9cclxuICAgIHN0b3JlKTtcclxufVxuXG4vKipcclxuICogQ3JlYXRlcyBhIFBpbmlhIGluc3RhbmNlIHRvIGJlIHVzZWQgYnkgdGhlIGFwcGxpY2F0aW9uXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVQaW5pYSgpIHtcclxuICAgIGNvbnN0IHNjb3BlID0gZWZmZWN0U2NvcGUodHJ1ZSk7XHJcbiAgICAvLyBOT1RFOiBoZXJlIHdlIGNvdWxkIGNoZWNrIHRoZSB3aW5kb3cgb2JqZWN0IGZvciBhIHN0YXRlIGFuZCBkaXJlY3RseSBzZXQgaXRcclxuICAgIC8vIGlmIHRoZXJlIGlzIGFueXRoaW5nIGxpa2UgaXQgd2l0aCBWdWUgMyBTU1JcclxuICAgIGNvbnN0IHN0YXRlID0gc2NvcGUucnVuKCgpID0+IHJlZih7fSkpO1xyXG4gICAgbGV0IF9wID0gW107XHJcbiAgICAvLyBwbHVnaW5zIGFkZGVkIGJlZm9yZSBjYWxsaW5nIGFwcC51c2UocGluaWEpXHJcbiAgICBsZXQgdG9CZUluc3RhbGxlZCA9IFtdO1xyXG4gICAgY29uc3QgcGluaWEgPSBtYXJrUmF3KHtcclxuICAgICAgICBpbnN0YWxsKGFwcCkge1xyXG4gICAgICAgICAgICAvLyB0aGlzIGFsbG93cyBjYWxsaW5nIHVzZVN0b3JlKCkgb3V0c2lkZSBvZiBhIGNvbXBvbmVudCBzZXR1cCBhZnRlclxyXG4gICAgICAgICAgICAvLyBpbnN0YWxsaW5nIHBpbmlhJ3MgcGx1Z2luXHJcbiAgICAgICAgICAgIHNldEFjdGl2ZVBpbmlhKHBpbmlhKTtcclxuICAgICAgICAgICAgaWYgKCFpc1Z1ZTIpIHtcclxuICAgICAgICAgICAgICAgIHBpbmlhLl9hID0gYXBwO1xyXG4gICAgICAgICAgICAgICAgYXBwLnByb3ZpZGUocGluaWFTeW1ib2wsIHBpbmlhKTtcclxuICAgICAgICAgICAgICAgIGFwcC5jb25maWcuZ2xvYmFsUHJvcGVydGllcy4kcGluaWEgPSBwaW5pYTtcclxuICAgICAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXHJcbiAgICAgICAgICAgICAgICBpZiAoVVNFX0RFVlRPT0xTKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJQaW5pYURldnRvb2xzKGFwcCwgcGluaWEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdG9CZUluc3RhbGxlZC5mb3JFYWNoKChwbHVnaW4pID0+IF9wLnB1c2gocGx1Z2luKSk7XHJcbiAgICAgICAgICAgICAgICB0b0JlSW5zdGFsbGVkID0gW107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHVzZShwbHVnaW4pIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLl9hICYmICFpc1Z1ZTIpIHtcclxuICAgICAgICAgICAgICAgIHRvQmVJbnN0YWxsZWQucHVzaChwbHVnaW4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX3AucHVzaChwbHVnaW4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgX3AsXHJcbiAgICAgICAgLy8gaXQncyBhY3R1YWxseSB1bmRlZmluZWQgaGVyZVxyXG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcclxuICAgICAgICBfYTogbnVsbCxcclxuICAgICAgICBfZTogc2NvcGUsXHJcbiAgICAgICAgX3M6IG5ldyBNYXAoKSxcclxuICAgICAgICBzdGF0ZSxcclxuICAgIH0pO1xyXG4gICAgLy8gcGluaWEgZGV2dG9vbHMgcmVseSBvbiBkZXYgb25seSBmZWF0dXJlcyBzbyB0aGV5IGNhbm5vdCBiZSBmb3JjZWQgdW5sZXNzXHJcbiAgICAvLyB0aGUgZGV2IGJ1aWxkIG9mIFZ1ZSBpcyB1c2VkLiBBdm9pZCBvbGQgYnJvd3NlcnMgbGlrZSBJRTExLlxyXG4gICAgaWYgKFVTRV9ERVZUT09MUyAmJiB0eXBlb2YgUHJveHkgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcGluaWEudXNlKGRldnRvb2xzUGx1Z2luKTtcclxuICAgIH1cclxuICAgIHJldHVybiBwaW5pYTtcclxufVxuXG4vKipcclxuICogQ2hlY2tzIGlmIGEgZnVuY3Rpb24gaXMgYSBgU3RvcmVEZWZpbml0aW9uYC5cclxuICpcclxuICogQHBhcmFtIGZuIC0gb2JqZWN0IHRvIHRlc3RcclxuICogQHJldHVybnMgdHJ1ZSBpZiBgZm5gIGlzIGEgU3RvcmVEZWZpbml0aW9uXHJcbiAqL1xyXG5jb25zdCBpc1VzZVN0b3JlID0gKGZuKSA9PiB7XHJcbiAgICByZXR1cm4gdHlwZW9mIGZuID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBmbi4kaWQgPT09ICdzdHJpbmcnO1xyXG59O1xyXG4vKipcclxuICogTXV0YXRlcyBpbiBwbGFjZSBgbmV3U3RhdGVgIHdpdGggYG9sZFN0YXRlYCB0byBfaG90IHVwZGF0ZV8gaXQuIEl0IHdpbGxcclxuICogcmVtb3ZlIGFueSBrZXkgbm90IGV4aXN0aW5nIGluIGBuZXdTdGF0ZWAgYW5kIHJlY3Vyc2l2ZWx5IG1lcmdlIHBsYWluXHJcbiAqIG9iamVjdHMuXHJcbiAqXHJcbiAqIEBwYXJhbSBuZXdTdGF0ZSAtIG5ldyBzdGF0ZSBvYmplY3QgdG8gYmUgcGF0Y2hlZFxyXG4gKiBAcGFyYW0gb2xkU3RhdGUgLSBvbGQgc3RhdGUgdGhhdCBzaG91bGQgYmUgdXNlZCB0byBwYXRjaCBuZXdTdGF0ZVxyXG4gKiBAcmV0dXJucyAtIG5ld1N0YXRlXHJcbiAqL1xyXG5mdW5jdGlvbiBwYXRjaE9iamVjdChuZXdTdGF0ZSwgb2xkU3RhdGUpIHtcclxuICAgIC8vIG5vIG5lZWQgdG8gZ28gdGhyb3VnaCBzeW1ib2xzIGJlY2F1c2UgdGhleSBjYW5ub3QgYmUgc2VyaWFsaXplZCBhbnl3YXlcclxuICAgIGZvciAoY29uc3Qga2V5IGluIG9sZFN0YXRlKSB7XHJcbiAgICAgICAgY29uc3Qgc3ViUGF0Y2ggPSBvbGRTdGF0ZVtrZXldO1xyXG4gICAgICAgIC8vIHNraXAgdGhlIHdob2xlIHN1YiB0cmVlXHJcbiAgICAgICAgaWYgKCEoa2V5IGluIG5ld1N0YXRlKSkge1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0VmFsdWUgPSBuZXdTdGF0ZVtrZXldO1xyXG4gICAgICAgIGlmIChpc1BsYWluT2JqZWN0KHRhcmdldFZhbHVlKSAmJlxyXG4gICAgICAgICAgICBpc1BsYWluT2JqZWN0KHN1YlBhdGNoKSAmJlxyXG4gICAgICAgICAgICAhaXNSZWYoc3ViUGF0Y2gpICYmXHJcbiAgICAgICAgICAgICFpc1JlYWN0aXZlKHN1YlBhdGNoKSkge1xyXG4gICAgICAgICAgICBuZXdTdGF0ZVtrZXldID0gcGF0Y2hPYmplY3QodGFyZ2V0VmFsdWUsIHN1YlBhdGNoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIG9iamVjdHMgYXJlIGVpdGhlciBhIGJpdCBtb3JlIGNvbXBsZXggKGUuZy4gcmVmcykgb3IgcHJpbWl0aXZlcywgc28gd2VcclxuICAgICAgICAgICAgLy8ganVzdCBzZXQgdGhlIHdob2xlIHRoaW5nXHJcbiAgICAgICAgICAgIGlmIChpc1Z1ZTIpIHtcclxuICAgICAgICAgICAgICAgIHNldChuZXdTdGF0ZSwga2V5LCBzdWJQYXRjaCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBuZXdTdGF0ZVtrZXldID0gc3ViUGF0Y2g7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV3U3RhdGU7XHJcbn1cclxuLyoqXHJcbiAqIENyZWF0ZXMgYW4gX2FjY2VwdF8gZnVuY3Rpb24gdG8gcGFzcyB0byBgaW1wb3J0Lm1ldGEuaG90YCBpbiBWaXRlIGFwcGxpY2F0aW9ucy5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBganNcclxuICogY29uc3QgdXNlVXNlciA9IGRlZmluZVN0b3JlKC4uLilcclxuICogaWYgKGltcG9ydC5tZXRhLmhvdCkge1xyXG4gKiAgIGltcG9ydC5tZXRhLmhvdC5hY2NlcHQoYWNjZXB0SE1SVXBkYXRlKHVzZVVzZXIsIGltcG9ydC5tZXRhLmhvdCkpXHJcbiAqIH1cclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSBpbml0aWFsVXNlU3RvcmUgLSByZXR1cm4gb2YgdGhlIGRlZmluZVN0b3JlIHRvIGhvdCB1cGRhdGVcclxuICogQHBhcmFtIGhvdCAtIGBpbXBvcnQubWV0YS5ob3RgXHJcbiAqL1xyXG5mdW5jdGlvbiBhY2NlcHRITVJVcGRhdGUoaW5pdGlhbFVzZVN0b3JlLCBob3QpIHtcclxuICAgIC8vIHN0cmlwIGFzIG11Y2ggYXMgcG9zc2libGUgZnJvbSBpaWZlLnByb2RcclxuICAgIGlmICghKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgcmV0dXJuICgpID0+IHsgfTtcclxuICAgIH1cclxuICAgIHJldHVybiAobmV3TW9kdWxlKSA9PiB7XHJcbiAgICAgICAgY29uc3QgcGluaWEgPSBob3QuZGF0YS5waW5pYSB8fCBpbml0aWFsVXNlU3RvcmUuX3BpbmlhO1xyXG4gICAgICAgIGlmICghcGluaWEpIHtcclxuICAgICAgICAgICAgLy8gdGhpcyBzdG9yZSBpcyBzdGlsbCBub3QgdXNlZFxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHByZXNlcnZlIHRoZSBwaW5pYSBpbnN0YW5jZSBhY3Jvc3MgbG9hZHNcclxuICAgICAgICBob3QuZGF0YS5waW5pYSA9IHBpbmlhO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdnb3QgZGF0YScsIG5ld1N0b3JlKVxyXG4gICAgICAgIGZvciAoY29uc3QgZXhwb3J0TmFtZSBpbiBuZXdNb2R1bGUpIHtcclxuICAgICAgICAgICAgY29uc3QgdXNlU3RvcmUgPSBuZXdNb2R1bGVbZXhwb3J0TmFtZV07XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdjaGVja2luZyBmb3InLCBleHBvcnROYW1lKVxyXG4gICAgICAgICAgICBpZiAoaXNVc2VTdG9yZSh1c2VTdG9yZSkgJiYgcGluaWEuX3MuaGFzKHVzZVN0b3JlLiRpZCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdBY2NlcHRpbmcgdXBkYXRlIGZvcicsIHVzZVN0b3JlLiRpZClcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlkID0gdXNlU3RvcmUuJGlkO1xyXG4gICAgICAgICAgICAgICAgaWYgKGlkICE9PSBpbml0aWFsVXNlU3RvcmUuJGlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBUaGUgaWQgb2YgdGhlIHN0b3JlIGNoYW5nZWQgZnJvbSBcIiR7aW5pdGlhbFVzZVN0b3JlLiRpZH1cIiB0byBcIiR7aWR9XCIuIFJlbG9hZGluZy5gKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm4gaW1wb3J0Lm1ldGEuaG90LmludmFsaWRhdGUoKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBob3QuaW52YWxpZGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdTdG9yZSA9IHBpbmlhLl9zLmdldChpZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWV4aXN0aW5nU3RvcmUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgW1BpbmlhXTogc2tpcHBpbmcgaG1yIGJlY2F1c2Ugc3RvcmUgZG9lc24ndCBleGlzdCB5ZXRgKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB1c2VTdG9yZShwaW5pYSwgZXhpc3RpbmdTdG9yZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XG5cbmNvbnN0IG5vb3AgPSAoKSA9PiB7IH07XHJcbmZ1bmN0aW9uIGFkZFN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb25zLCBjYWxsYmFjaywgZGV0YWNoZWQsIG9uQ2xlYW51cCA9IG5vb3ApIHtcclxuICAgIHN1YnNjcmlwdGlvbnMucHVzaChjYWxsYmFjayk7XHJcbiAgICBjb25zdCByZW1vdmVTdWJzY3JpcHRpb24gPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgaWR4ID0gc3Vic2NyaXB0aW9ucy5pbmRleE9mKGNhbGxiYWNrKTtcclxuICAgICAgICBpZiAoaWR4ID4gLTEpIHtcclxuICAgICAgICAgICAgc3Vic2NyaXB0aW9ucy5zcGxpY2UoaWR4LCAxKTtcclxuICAgICAgICAgICAgb25DbGVhbnVwKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGlmICghZGV0YWNoZWQgJiYgZ2V0Q3VycmVudFNjb3BlKCkpIHtcclxuICAgICAgICBvblNjb3BlRGlzcG9zZShyZW1vdmVTdWJzY3JpcHRpb24pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlbW92ZVN1YnNjcmlwdGlvbjtcclxufVxyXG5mdW5jdGlvbiB0cmlnZ2VyU3Vic2NyaXB0aW9ucyhzdWJzY3JpcHRpb25zLCAuLi5hcmdzKSB7XHJcbiAgICBzdWJzY3JpcHRpb25zLnNsaWNlKCkuZm9yRWFjaCgoY2FsbGJhY2spID0+IHtcclxuICAgICAgICBjYWxsYmFjayguLi5hcmdzKTtcclxuICAgIH0pO1xyXG59XG5cbmZ1bmN0aW9uIG1lcmdlUmVhY3RpdmVPYmplY3RzKHRhcmdldCwgcGF0Y2hUb0FwcGx5KSB7XHJcbiAgICAvLyBIYW5kbGUgTWFwIGluc3RhbmNlc1xyXG4gICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIE1hcCAmJiBwYXRjaFRvQXBwbHkgaW5zdGFuY2VvZiBNYXApIHtcclxuICAgICAgICBwYXRjaFRvQXBwbHkuZm9yRWFjaCgodmFsdWUsIGtleSkgPT4gdGFyZ2V0LnNldChrZXksIHZhbHVlKSk7XHJcbiAgICB9XHJcbiAgICAvLyBIYW5kbGUgU2V0IGluc3RhbmNlc1xyXG4gICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIFNldCAmJiBwYXRjaFRvQXBwbHkgaW5zdGFuY2VvZiBTZXQpIHtcclxuICAgICAgICBwYXRjaFRvQXBwbHkuZm9yRWFjaCh0YXJnZXQuYWRkLCB0YXJnZXQpO1xyXG4gICAgfVxyXG4gICAgLy8gbm8gbmVlZCB0byBnbyB0aHJvdWdoIHN5bWJvbHMgYmVjYXVzZSB0aGV5IGNhbm5vdCBiZSBzZXJpYWxpemVkIGFueXdheVxyXG4gICAgZm9yIChjb25zdCBrZXkgaW4gcGF0Y2hUb0FwcGx5KSB7XHJcbiAgICAgICAgaWYgKCFwYXRjaFRvQXBwbHkuaGFzT3duUHJvcGVydHkoa2V5KSlcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgY29uc3Qgc3ViUGF0Y2ggPSBwYXRjaFRvQXBwbHlba2V5XTtcclxuICAgICAgICBjb25zdCB0YXJnZXRWYWx1ZSA9IHRhcmdldFtrZXldO1xyXG4gICAgICAgIGlmIChpc1BsYWluT2JqZWN0KHRhcmdldFZhbHVlKSAmJlxyXG4gICAgICAgICAgICBpc1BsYWluT2JqZWN0KHN1YlBhdGNoKSAmJlxyXG4gICAgICAgICAgICB0YXJnZXQuaGFzT3duUHJvcGVydHkoa2V5KSAmJlxyXG4gICAgICAgICAgICAhaXNSZWYoc3ViUGF0Y2gpICYmXHJcbiAgICAgICAgICAgICFpc1JlYWN0aXZlKHN1YlBhdGNoKSkge1xyXG4gICAgICAgICAgICAvLyBOT1RFOiBoZXJlIEkgd2FudGVkIHRvIHdhcm4gYWJvdXQgaW5jb25zaXN0ZW50IHR5cGVzIGJ1dCBpdCdzIG5vdCBwb3NzaWJsZSBiZWNhdXNlIGluIHNldHVwIHN0b3JlcyBvbmUgbWlnaHRcclxuICAgICAgICAgICAgLy8gc3RhcnQgdGhlIHZhbHVlIG9mIGEgcHJvcGVydHkgYXMgYSBjZXJ0YWluIHR5cGUgZS5nLiBhIE1hcCwgYW5kIHRoZW4gZm9yIHNvbWUgcmVhc29uLCBkdXJpbmcgU1NSLCBjaGFuZ2UgdGhhdFxyXG4gICAgICAgICAgICAvLyB0byBgdW5kZWZpbmVkYC4gV2hlbiB0cnlpbmcgdG8gaHlkcmF0ZSwgd2Ugd2FudCB0byBvdmVycmlkZSB0aGUgTWFwIHdpdGggYHVuZGVmaW5lZGAuXHJcbiAgICAgICAgICAgIHRhcmdldFtrZXldID0gbWVyZ2VSZWFjdGl2ZU9iamVjdHModGFyZ2V0VmFsdWUsIHN1YlBhdGNoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IHN1YlBhdGNoIGlzIGEgdmFsaWQgdmFsdWVcclxuICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSBzdWJQYXRjaDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGFyZ2V0O1xyXG59XHJcbmNvbnN0IHNraXBIeWRyYXRlU3ltYm9sID0gKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpXHJcbiAgICA/IFN5bWJvbCgncGluaWE6c2tpcEh5ZHJhdGlvbicpXHJcbiAgICA6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIFN5bWJvbCgpO1xyXG5jb25zdCBza2lwSHlkcmF0ZU1hcCA9IC8qI19fUFVSRV9fKi8gbmV3IFdlYWtNYXAoKTtcclxuLyoqXHJcbiAqIFRlbGxzIFBpbmlhIHRvIHNraXAgdGhlIGh5ZHJhdGlvbiBwcm9jZXNzIG9mIGEgZ2l2ZW4gb2JqZWN0LiBUaGlzIGlzIHVzZWZ1bCBpbiBzZXR1cCBzdG9yZXMgKG9ubHkpIHdoZW4geW91IHJldHVybiBhXHJcbiAqIHN0YXRlZnVsIG9iamVjdCBpbiB0aGUgc3RvcmUgYnV0IGl0IGlzbid0IHJlYWxseSBzdGF0ZS4gZS5nLiByZXR1cm5pbmcgYSByb3V0ZXIgaW5zdGFuY2UgaW4gYSBzZXR1cCBzdG9yZS5cclxuICpcclxuICogQHBhcmFtIG9iaiAtIHRhcmdldCBvYmplY3RcclxuICogQHJldHVybnMgb2JqXHJcbiAqL1xyXG5mdW5jdGlvbiBza2lwSHlkcmF0ZShvYmopIHtcclxuICAgIHJldHVybiBpc1Z1ZTJcclxuICAgICAgICA/IC8vIGluIEB2dWUvY29tcG9zaXRpb24tYXBpLCB0aGUgcmVmcyBhcmUgc2VhbGVkIHNvIGRlZmluZVByb3BlcnR5IGRvZXNuJ3Qgd29yay4uLlxyXG4gICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBza2lwSHlkcmF0ZU1hcC5zZXQob2JqLCAxKSAmJiBvYmpcclxuICAgICAgICA6IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIHNraXBIeWRyYXRlU3ltYm9sLCB7fSk7XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgd2hldGhlciBhIHZhbHVlIHNob3VsZCBiZSBoeWRyYXRlZFxyXG4gKlxyXG4gKiBAcGFyYW0gb2JqIC0gdGFyZ2V0IHZhcmlhYmxlXHJcbiAqIEByZXR1cm5zIHRydWUgaWYgYG9iamAgc2hvdWxkIGJlIGh5ZHJhdGVkXHJcbiAqL1xyXG5mdW5jdGlvbiBzaG91bGRIeWRyYXRlKG9iaikge1xyXG4gICAgcmV0dXJuIGlzVnVlMlxyXG4gICAgICAgID8gLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gIXNraXBIeWRyYXRlTWFwLmhhcyhvYmopXHJcbiAgICAgICAgOiAhaXNQbGFpbk9iamVjdChvYmopIHx8ICFvYmouaGFzT3duUHJvcGVydHkoc2tpcEh5ZHJhdGVTeW1ib2wpO1xyXG59XHJcbmNvbnN0IHsgYXNzaWduIH0gPSBPYmplY3Q7XHJcbmZ1bmN0aW9uIGlzQ29tcHV0ZWQobykge1xyXG4gICAgcmV0dXJuICEhKGlzUmVmKG8pICYmIG8uZWZmZWN0KTtcclxufVxyXG5mdW5jdGlvbiBjcmVhdGVPcHRpb25zU3RvcmUoaWQsIG9wdGlvbnMsIHBpbmlhLCBob3QpIHtcclxuICAgIGNvbnN0IHsgc3RhdGUsIGFjdGlvbnMsIGdldHRlcnMgfSA9IG9wdGlvbnM7XHJcbiAgICBjb25zdCBpbml0aWFsU3RhdGUgPSBwaW5pYS5zdGF0ZS52YWx1ZVtpZF07XHJcbiAgICBsZXQgc3RvcmU7XHJcbiAgICBmdW5jdGlvbiBzZXR1cCgpIHtcclxuICAgICAgICBpZiAoIWluaXRpYWxTdGF0ZSAmJiAoIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCAhaG90KSkge1xyXG4gICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cclxuICAgICAgICAgICAgaWYgKGlzVnVlMikge1xyXG4gICAgICAgICAgICAgICAgc2V0KHBpbmlhLnN0YXRlLnZhbHVlLCBpZCwgc3RhdGUgPyBzdGF0ZSgpIDoge30pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcGluaWEuc3RhdGUudmFsdWVbaWRdID0gc3RhdGUgPyBzdGF0ZSgpIDoge307XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gYXZvaWQgY3JlYXRpbmcgYSBzdGF0ZSBpbiBwaW5pYS5zdGF0ZS52YWx1ZVxyXG4gICAgICAgIGNvbnN0IGxvY2FsU3RhdGUgPSAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgaG90XHJcbiAgICAgICAgICAgID8gLy8gdXNlIHJlZigpIHRvIHVud3JhcCByZWZzIGluc2lkZSBzdGF0ZSBUT0RPOiBjaGVjayBpZiB0aGlzIGlzIHN0aWxsIG5lY2Vzc2FyeVxyXG4gICAgICAgICAgICAgICAgdG9SZWZzKHJlZihzdGF0ZSA/IHN0YXRlKCkgOiB7fSkudmFsdWUpXHJcbiAgICAgICAgICAgIDogdG9SZWZzKHBpbmlhLnN0YXRlLnZhbHVlW2lkXSk7XHJcbiAgICAgICAgcmV0dXJuIGFzc2lnbihsb2NhbFN0YXRlLCBhY3Rpb25zLCBPYmplY3Qua2V5cyhnZXR0ZXJzIHx8IHt9KS5yZWR1Y2UoKGNvbXB1dGVkR2V0dGVycywgbmFtZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIG5hbWUgaW4gbG9jYWxTdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBb8J+NjV06IEEgZ2V0dGVyIGNhbm5vdCBoYXZlIHRoZSBzYW1lIG5hbWUgYXMgYW5vdGhlciBzdGF0ZSBwcm9wZXJ0eS4gUmVuYW1lIG9uZSBvZiB0aGVtLiBGb3VuZCB3aXRoIFwiJHtuYW1lfVwiIGluIHN0b3JlIFwiJHtpZH1cIi5gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb21wdXRlZEdldHRlcnNbbmFtZV0gPSBtYXJrUmF3KGNvbXB1dGVkKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHNldEFjdGl2ZVBpbmlhKHBpbmlhKTtcclxuICAgICAgICAgICAgICAgIC8vIGl0IHdhcyBjcmVhdGVkIGp1c3QgYmVmb3JlXHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdG9yZSA9IHBpbmlhLl9zLmdldChpZCk7XHJcbiAgICAgICAgICAgICAgICAvLyBhbGxvdyBjcm9zcyB1c2luZyBzdG9yZXNcclxuICAgICAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXHJcbiAgICAgICAgICAgICAgICBpZiAoaXNWdWUyICYmICFzdG9yZS5fcilcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXHJcbiAgICAgICAgICAgICAgICAvLyByZXR1cm4gZ2V0dGVycyFbbmFtZV0uY2FsbChjb250ZXh0LCBjb250ZXh0KVxyXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogYXZvaWQgcmVhZGluZyB0aGUgZ2V0dGVyIHdoaWxlIGFzc2lnbmluZyB3aXRoIGEgZ2xvYmFsIHZhcmlhYmxlXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0dGVyc1tuYW1lXS5jYWxsKHN0b3JlLCBzdG9yZSk7XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbXB1dGVkR2V0dGVycztcclxuICAgICAgICB9LCB7fSkpO1xyXG4gICAgfVxyXG4gICAgc3RvcmUgPSBjcmVhdGVTZXR1cFN0b3JlKGlkLCBzZXR1cCwgb3B0aW9ucywgcGluaWEsIGhvdCwgdHJ1ZSk7XHJcbiAgICBzdG9yZS4kcmVzZXQgPSBmdW5jdGlvbiAkcmVzZXQoKSB7XHJcbiAgICAgICAgY29uc3QgbmV3U3RhdGUgPSBzdGF0ZSA/IHN0YXRlKCkgOiB7fTtcclxuICAgICAgICAvLyB3ZSB1c2UgYSBwYXRjaCB0byBncm91cCBhbGwgY2hhbmdlcyBpbnRvIG9uZSBzaW5nbGUgc3Vic2NyaXB0aW9uXHJcbiAgICAgICAgdGhpcy4kcGF0Y2goKCRzdGF0ZSkgPT4ge1xyXG4gICAgICAgICAgICBhc3NpZ24oJHN0YXRlLCBuZXdTdGF0ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHN0b3JlO1xyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZVNldHVwU3RvcmUoJGlkLCBzZXR1cCwgb3B0aW9ucyA9IHt9LCBwaW5pYSwgaG90LCBpc09wdGlvbnNTdG9yZSkge1xyXG4gICAgbGV0IHNjb3BlO1xyXG4gICAgY29uc3Qgb3B0aW9uc0ZvclBsdWdpbiA9IGFzc2lnbih7IGFjdGlvbnM6IHt9IH0sIG9wdGlvbnMpO1xyXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXHJcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiBhY3RpdmUgaXMgYW4gaW50ZXJuYWwgcHJvcGVydHlcclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIXBpbmlhLl9lLmFjdGl2ZSkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUGluaWEgZGVzdHJveWVkJyk7XHJcbiAgICB9XHJcbiAgICAvLyB3YXRjaGVyIG9wdGlvbnMgZm9yICRzdWJzY3JpYmVcclxuICAgIGNvbnN0ICRzdWJzY3JpYmVPcHRpb25zID0ge1xyXG4gICAgICAgIGRlZXA6IHRydWUsXHJcbiAgICAgICAgLy8gZmx1c2g6ICdwb3N0JyxcclxuICAgIH07XHJcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhaXNWdWUyKSB7XHJcbiAgICAgICAgJHN1YnNjcmliZU9wdGlvbnMub25UcmlnZ2VyID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXHJcbiAgICAgICAgICAgIGlmIChpc0xpc3RlbmluZykge1xyXG4gICAgICAgICAgICAgICAgZGVidWdnZXJFdmVudHMgPSBldmVudDtcclxuICAgICAgICAgICAgICAgIC8vIGF2b2lkIHRyaWdnZXJpbmcgdGhpcyB3aGlsZSB0aGUgc3RvcmUgaXMgYmVpbmcgYnVpbHQgYW5kIHRoZSBzdGF0ZSBpcyBiZWluZyBzZXQgaW4gcGluaWFcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChpc0xpc3RlbmluZyA9PSBmYWxzZSAmJiAhc3RvcmUuX2hvdFVwZGF0aW5nKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBsZXQgcGF0Y2ggc2VuZCBhbGwgdGhlIGV2ZW50cyB0b2dldGhlciBsYXRlclxyXG4gICAgICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cclxuICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRlYnVnZ2VyRXZlbnRzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlYnVnZ2VyRXZlbnRzLnB1c2goZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcign8J+NjSBkZWJ1Z2dlckV2ZW50cyBzaG91bGQgYmUgYW4gYXJyYXkuIFRoaXMgaXMgbW9zdCBsaWtlbHkgYW4gaW50ZXJuYWwgUGluaWEgYnVnLicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIC8vIGludGVybmFsIHN0YXRlXHJcbiAgICBsZXQgaXNMaXN0ZW5pbmc7IC8vIHNldCB0byB0cnVlIGF0IHRoZSBlbmRcclxuICAgIGxldCBpc1N5bmNMaXN0ZW5pbmc7IC8vIHNldCB0byB0cnVlIGF0IHRoZSBlbmRcclxuICAgIGxldCBzdWJzY3JpcHRpb25zID0gbWFya1JhdyhbXSk7XHJcbiAgICBsZXQgYWN0aW9uU3Vic2NyaXB0aW9ucyA9IG1hcmtSYXcoW10pO1xyXG4gICAgbGV0IGRlYnVnZ2VyRXZlbnRzO1xyXG4gICAgY29uc3QgaW5pdGlhbFN0YXRlID0gcGluaWEuc3RhdGUudmFsdWVbJGlkXTtcclxuICAgIC8vIGF2b2lkIHNldHRpbmcgdGhlIHN0YXRlIGZvciBvcHRpb24gc3RvcmVzIGlmIGl0IGlzIHNldFxyXG4gICAgLy8gYnkgdGhlIHNldHVwXHJcbiAgICBpZiAoIWlzT3B0aW9uc1N0b3JlICYmICFpbml0aWFsU3RhdGUgJiYgKCEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgIWhvdCkpIHtcclxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cclxuICAgICAgICBpZiAoaXNWdWUyKSB7XHJcbiAgICAgICAgICAgIHNldChwaW5pYS5zdGF0ZS52YWx1ZSwgJGlkLCB7fSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBwaW5pYS5zdGF0ZS52YWx1ZVskaWRdID0ge307XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgaG90U3RhdGUgPSByZWYoe30pO1xyXG4gICAgLy8gYXZvaWQgdHJpZ2dlcmluZyB0b28gbWFueSBsaXN0ZW5lcnNcclxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy9waW5pYS9pc3N1ZXMvMTEyOVxyXG4gICAgbGV0IGFjdGl2ZUxpc3RlbmVyO1xyXG4gICAgZnVuY3Rpb24gJHBhdGNoKHBhcnRpYWxTdGF0ZU9yTXV0YXRvcikge1xyXG4gICAgICAgIGxldCBzdWJzY3JpcHRpb25NdXRhdGlvbjtcclxuICAgICAgICBpc0xpc3RlbmluZyA9IGlzU3luY0xpc3RlbmluZyA9IGZhbHNlO1xyXG4gICAgICAgIC8vIHJlc2V0IHRoZSBkZWJ1Z2dlciBldmVudHMgc2luY2UgcGF0Y2hlcyBhcmUgc3luY1xyXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICBkZWJ1Z2dlckV2ZW50cyA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZW9mIHBhcnRpYWxTdGF0ZU9yTXV0YXRvciA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICBwYXJ0aWFsU3RhdGVPck11dGF0b3IocGluaWEuc3RhdGUudmFsdWVbJGlkXSk7XHJcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbk11dGF0aW9uID0ge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogTXV0YXRpb25UeXBlLnBhdGNoRnVuY3Rpb24sXHJcbiAgICAgICAgICAgICAgICBzdG9yZUlkOiAkaWQsXHJcbiAgICAgICAgICAgICAgICBldmVudHM6IGRlYnVnZ2VyRXZlbnRzLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgbWVyZ2VSZWFjdGl2ZU9iamVjdHMocGluaWEuc3RhdGUudmFsdWVbJGlkXSwgcGFydGlhbFN0YXRlT3JNdXRhdG9yKTtcclxuICAgICAgICAgICAgc3Vic2NyaXB0aW9uTXV0YXRpb24gPSB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBNdXRhdGlvblR5cGUucGF0Y2hPYmplY3QsXHJcbiAgICAgICAgICAgICAgICBwYXlsb2FkOiBwYXJ0aWFsU3RhdGVPck11dGF0b3IsXHJcbiAgICAgICAgICAgICAgICBzdG9yZUlkOiAkaWQsXHJcbiAgICAgICAgICAgICAgICBldmVudHM6IGRlYnVnZ2VyRXZlbnRzLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBteUxpc3RlbmVySWQgPSAoYWN0aXZlTGlzdGVuZXIgPSBTeW1ib2woKSk7XHJcbiAgICAgICAgbmV4dFRpY2soKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgaWYgKGFjdGl2ZUxpc3RlbmVyID09PSBteUxpc3RlbmVySWQpIHtcclxuICAgICAgICAgICAgICAgIGlzTGlzdGVuaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlzU3luY0xpc3RlbmluZyA9IHRydWU7XHJcbiAgICAgICAgLy8gYmVjYXVzZSB3ZSBwYXVzZWQgdGhlIHdhdGNoZXIsIHdlIG5lZWQgdG8gbWFudWFsbHkgY2FsbCB0aGUgc3Vic2NyaXB0aW9uc1xyXG4gICAgICAgIHRyaWdnZXJTdWJzY3JpcHRpb25zKHN1YnNjcmlwdGlvbnMsIHN1YnNjcmlwdGlvbk11dGF0aW9uLCBwaW5pYS5zdGF0ZS52YWx1ZVskaWRdKTtcclxuICAgIH1cclxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXHJcbiAgICBjb25zdCAkcmVzZXQgPSAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJylcclxuICAgICAgICA/ICgpID0+IHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGDwn42NOiBTdG9yZSBcIiR7JGlkfVwiIGlzIGJ1aWx0IHVzaW5nIHRoZSBzZXR1cCBzeW50YXggYW5kIGRvZXMgbm90IGltcGxlbWVudCAkcmVzZXQoKS5gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgOiBub29wO1xyXG4gICAgZnVuY3Rpb24gJGRpc3Bvc2UoKSB7XHJcbiAgICAgICAgc2NvcGUuc3RvcCgpO1xyXG4gICAgICAgIHN1YnNjcmlwdGlvbnMgPSBbXTtcclxuICAgICAgICBhY3Rpb25TdWJzY3JpcHRpb25zID0gW107XHJcbiAgICAgICAgcGluaWEuX3MuZGVsZXRlKCRpZCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFdyYXBzIGFuIGFjdGlvbiB0byBoYW5kbGUgc3Vic2NyaXB0aW9ucy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbmFtZSAtIG5hbWUgb2YgdGhlIGFjdGlvblxyXG4gICAgICogQHBhcmFtIGFjdGlvbiAtIGFjdGlvbiB0byB3cmFwXHJcbiAgICAgKiBAcmV0dXJucyBhIHdyYXBwZWQgYWN0aW9uIHRvIGhhbmRsZSBzdWJzY3JpcHRpb25zXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHdyYXBBY3Rpb24obmFtZSwgYWN0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2V0QWN0aXZlUGluaWEocGluaWEpO1xyXG4gICAgICAgICAgICBjb25zdCBhcmdzID0gQXJyYXkuZnJvbShhcmd1bWVudHMpO1xyXG4gICAgICAgICAgICBjb25zdCBhZnRlckNhbGxiYWNrTGlzdCA9IFtdO1xyXG4gICAgICAgICAgICBjb25zdCBvbkVycm9yQ2FsbGJhY2tMaXN0ID0gW107XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGFmdGVyKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICBhZnRlckNhbGxiYWNrTGlzdC5wdXNoKGNhbGxiYWNrKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmdW5jdGlvbiBvbkVycm9yKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICBvbkVycm9yQ2FsbGJhY2tMaXN0LnB1c2goY2FsbGJhY2spO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcclxuICAgICAgICAgICAgdHJpZ2dlclN1YnNjcmlwdGlvbnMoYWN0aW9uU3Vic2NyaXB0aW9ucywge1xyXG4gICAgICAgICAgICAgICAgYXJncyxcclxuICAgICAgICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICAgICAgICBzdG9yZSxcclxuICAgICAgICAgICAgICAgIGFmdGVyLFxyXG4gICAgICAgICAgICAgICAgb25FcnJvcixcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGxldCByZXQ7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICByZXQgPSBhY3Rpb24uYXBwbHkodGhpcyAmJiB0aGlzLiRpZCA9PT0gJGlkID8gdGhpcyA6IHN0b3JlLCBhcmdzKTtcclxuICAgICAgICAgICAgICAgIC8vIGhhbmRsZSBzeW5jIGVycm9yc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgdHJpZ2dlclN1YnNjcmlwdGlvbnMob25FcnJvckNhbGxiYWNrTGlzdCwgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHJldCBpbnN0YW5jZW9mIFByb21pc2UpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXRcclxuICAgICAgICAgICAgICAgICAgICAudGhlbigodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyU3Vic2NyaXB0aW9ucyhhZnRlckNhbGxiYWNrTGlzdCwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyaWdnZXJTdWJzY3JpcHRpb25zKG9uRXJyb3JDYWxsYmFja0xpc3QsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gYWxsb3cgdGhlIGFmdGVyQ2FsbGJhY2sgdG8gb3ZlcnJpZGUgdGhlIHJldHVybiB2YWx1ZVxyXG4gICAgICAgICAgICB0cmlnZ2VyU3Vic2NyaXB0aW9ucyhhZnRlckNhbGxiYWNrTGlzdCwgcmV0KTtcclxuICAgICAgICAgICAgcmV0dXJuIHJldDtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgY29uc3QgX2htclBheWxvYWQgPSAvKiNfX1BVUkVfXyovIG1hcmtSYXcoe1xyXG4gICAgICAgIGFjdGlvbnM6IHt9LFxyXG4gICAgICAgIGdldHRlcnM6IHt9LFxyXG4gICAgICAgIHN0YXRlOiBbXSxcclxuICAgICAgICBob3RTdGF0ZSxcclxuICAgIH0pO1xyXG4gICAgY29uc3QgcGFydGlhbFN0b3JlID0ge1xyXG4gICAgICAgIF9wOiBwaW5pYSxcclxuICAgICAgICAvLyBfczogc2NvcGUsXHJcbiAgICAgICAgJGlkLFxyXG4gICAgICAgICRvbkFjdGlvbjogYWRkU3Vic2NyaXB0aW9uLmJpbmQobnVsbCwgYWN0aW9uU3Vic2NyaXB0aW9ucyksXHJcbiAgICAgICAgJHBhdGNoLFxyXG4gICAgICAgICRyZXNldCxcclxuICAgICAgICAkc3Vic2NyaWJlKGNhbGxiYWNrLCBvcHRpb25zID0ge30pIHtcclxuICAgICAgICAgICAgY29uc3QgcmVtb3ZlU3Vic2NyaXB0aW9uID0gYWRkU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbnMsIGNhbGxiYWNrLCBvcHRpb25zLmRldGFjaGVkLCAoKSA9PiBzdG9wV2F0Y2hlcigpKTtcclxuICAgICAgICAgICAgY29uc3Qgc3RvcFdhdGNoZXIgPSBzY29wZS5ydW4oKCkgPT4gd2F0Y2goKCkgPT4gcGluaWEuc3RhdGUudmFsdWVbJGlkXSwgKHN0YXRlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5mbHVzaCA9PT0gJ3N5bmMnID8gaXNTeW5jTGlzdGVuaW5nIDogaXNMaXN0ZW5pbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlSWQ6ICRpZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogTXV0YXRpb25UeXBlLmRpcmVjdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRzOiBkZWJ1Z2dlckV2ZW50cyxcclxuICAgICAgICAgICAgICAgICAgICB9LCBzdGF0ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGFzc2lnbih7fSwgJHN1YnNjcmliZU9wdGlvbnMsIG9wdGlvbnMpKSk7XHJcbiAgICAgICAgICAgIHJldHVybiByZW1vdmVTdWJzY3JpcHRpb247XHJcbiAgICAgICAgfSxcclxuICAgICAgICAkZGlzcG9zZSxcclxuICAgIH07XHJcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cclxuICAgIGlmIChpc1Z1ZTIpIHtcclxuICAgICAgICAvLyBzdGFydCBhcyBub24gcmVhZHlcclxuICAgICAgICBwYXJ0aWFsU3RvcmUuX3IgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIGNvbnN0IHN0b3JlID0gcmVhY3RpdmUoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8IFVTRV9ERVZUT09MU1xyXG4gICAgICAgID8gYXNzaWduKHtcclxuICAgICAgICAgICAgX2htclBheWxvYWQsXHJcbiAgICAgICAgICAgIF9jdXN0b21Qcm9wZXJ0aWVzOiBtYXJrUmF3KG5ldyBTZXQoKSksIC8vIGRldnRvb2xzIGN1c3RvbSBwcm9wZXJ0aWVzXHJcbiAgICAgICAgfSwgcGFydGlhbFN0b3JlXHJcbiAgICAgICAgLy8gbXVzdCBiZSBhZGRlZCBsYXRlclxyXG4gICAgICAgIC8vIHNldHVwU3RvcmVcclxuICAgICAgICApXHJcbiAgICAgICAgOiBwYXJ0aWFsU3RvcmUpO1xyXG4gICAgLy8gc3RvcmUgdGhlIHBhcnRpYWwgc3RvcmUgbm93IHNvIHRoZSBzZXR1cCBvZiBzdG9yZXMgY2FuIGluc3RhbnRpYXRlIGVhY2ggb3RoZXIgYmVmb3JlIHRoZXkgYXJlIGZpbmlzaGVkIHdpdGhvdXRcclxuICAgIC8vIGNyZWF0aW5nIGluZmluaXRlIGxvb3BzLlxyXG4gICAgcGluaWEuX3Muc2V0KCRpZCwgc3RvcmUpO1xyXG4gICAgLy8gVE9ETzogaWRlYSBjcmVhdGUgc2tpcFNlcmlhbGl6ZSB0aGF0IG1hcmtzIHByb3BlcnRpZXMgYXMgbm9uIHNlcmlhbGl6YWJsZSBhbmQgdGhleSBhcmUgc2tpcHBlZFxyXG4gICAgY29uc3Qgc2V0dXBTdG9yZSA9IHBpbmlhLl9lLnJ1bigoKSA9PiB7XHJcbiAgICAgICAgc2NvcGUgPSBlZmZlY3RTY29wZSgpO1xyXG4gICAgICAgIHJldHVybiBzY29wZS5ydW4oKCkgPT4gc2V0dXAoKSk7XHJcbiAgICB9KTtcclxuICAgIC8vIG92ZXJ3cml0ZSBleGlzdGluZyBhY3Rpb25zIHRvIHN1cHBvcnQgJG9uQWN0aW9uXHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBzZXR1cFN0b3JlKSB7XHJcbiAgICAgICAgY29uc3QgcHJvcCA9IHNldHVwU3RvcmVba2V5XTtcclxuICAgICAgICBpZiAoKGlzUmVmKHByb3ApICYmICFpc0NvbXB1dGVkKHByb3ApKSB8fCBpc1JlYWN0aXZlKHByb3ApKSB7XHJcbiAgICAgICAgICAgIC8vIG1hcmsgaXQgYXMgYSBwaWVjZSBvZiBzdGF0ZSB0byBiZSBzZXJpYWxpemVkXHJcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgaG90KSB7XHJcbiAgICAgICAgICAgICAgICBzZXQoaG90U3RhdGUudmFsdWUsIGtleSwgdG9SZWYoc2V0dXBTdG9yZSwga2V5KSk7XHJcbiAgICAgICAgICAgICAgICAvLyBjcmVhdGVPcHRpb25TdG9yZSBkaXJlY3RseSBzZXRzIHRoZSBzdGF0ZSBpbiBwaW5pYS5zdGF0ZS52YWx1ZSBzbyB3ZVxyXG4gICAgICAgICAgICAgICAgLy8gY2FuIGp1c3Qgc2tpcCB0aGF0XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoIWlzT3B0aW9uc1N0b3JlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBpbiBzZXR1cCBzdG9yZXMgd2UgbXVzdCBoeWRyYXRlIHRoZSBzdGF0ZSBhbmQgc3luYyBwaW5pYSBzdGF0ZSB0cmVlIHdpdGggdGhlIHJlZnMgdGhlIHVzZXIganVzdCBjcmVhdGVkXHJcbiAgICAgICAgICAgICAgICBpZiAoaW5pdGlhbFN0YXRlICYmIHNob3VsZEh5ZHJhdGUocHJvcCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNSZWYocHJvcCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcC52YWx1ZSA9IGluaXRpYWxTdGF0ZVtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHJvYmFibHkgYSByZWFjdGl2ZSBvYmplY3QsIGxldHMgcmVjdXJzaXZlbHkgYXNzaWduXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IHByb3AgaXMgdW5rbm93blxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXJnZVJlYWN0aXZlT2JqZWN0cyhwcm9wLCBpbml0aWFsU3RhdGVba2V5XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gdHJhbnNmZXIgdGhlIHJlZiB0byB0aGUgcGluaWEgc3RhdGUgdG8ga2VlcCBldmVyeXRoaW5nIGluIHN5bmNcclxuICAgICAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzVnVlMikge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldChwaW5pYS5zdGF0ZS52YWx1ZVskaWRdLCBrZXksIHByb3ApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGluaWEuc3RhdGUudmFsdWVbJGlkXVtrZXldID0gcHJvcDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xyXG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICBfaG1yUGF5bG9hZC5zdGF0ZS5wdXNoKGtleSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gYWN0aW9uXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBwcm9wID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IHdlIGFyZSBvdmVycmlkaW5nIHRoZSBmdW5jdGlvbiB3ZSBhdm9pZCB3cmFwcGluZyBpZlxyXG4gICAgICAgICAgICBjb25zdCBhY3Rpb25WYWx1ZSA9IChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBob3QgPyBwcm9wIDogd3JhcEFjdGlvbihrZXksIHByb3ApO1xyXG4gICAgICAgICAgICAvLyB0aGlzIGEgaG90IG1vZHVsZSByZXBsYWNlbWVudCBzdG9yZSBiZWNhdXNlIHRoZSBob3RVcGRhdGUgbWV0aG9kIG5lZWRzXHJcbiAgICAgICAgICAgIC8vIHRvIGRvIGl0IHdpdGggdGhlIHJpZ2h0IGNvbnRleHRcclxuICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXHJcbiAgICAgICAgICAgIGlmIChpc1Z1ZTIpIHtcclxuICAgICAgICAgICAgICAgIHNldChzZXR1cFN0b3JlLCBrZXksIGFjdGlvblZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcclxuICAgICAgICAgICAgICAgIHNldHVwU3RvcmVba2V5XSA9IGFjdGlvblZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXHJcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgIF9obXJQYXlsb2FkLmFjdGlvbnNba2V5XSA9IHByb3A7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gbGlzdCBhY3Rpb25zIHNvIHRoZXkgY2FuIGJlIHVzZWQgaW4gcGx1Z2luc1xyXG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXHJcbiAgICAgICAgICAgIG9wdGlvbnNGb3JQbHVnaW4uYWN0aW9uc1trZXldID0gcHJvcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgIC8vIGFkZCBnZXR0ZXJzIGZvciBkZXZ0b29sc1xyXG4gICAgICAgICAgICBpZiAoaXNDb21wdXRlZChwcm9wKSkge1xyXG4gICAgICAgICAgICAgICAgX2htclBheWxvYWQuZ2V0dGVyc1trZXldID0gaXNPcHRpb25zU3RvcmVcclxuICAgICAgICAgICAgICAgICAgICA/IC8vIEB0cy1leHBlY3QtZXJyb3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5nZXR0ZXJzW2tleV1cclxuICAgICAgICAgICAgICAgICAgICA6IHByb3A7XHJcbiAgICAgICAgICAgICAgICBpZiAoSVNfQ0xJRU5UKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZ2V0dGVycyA9IHNldHVwU3RvcmUuX2dldHRlcnMgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogc2FtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoc2V0dXBTdG9yZS5fZ2V0dGVycyA9IG1hcmtSYXcoW10pKTtcclxuICAgICAgICAgICAgICAgICAgICBnZXR0ZXJzLnB1c2goa2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIGFkZCB0aGUgc3RhdGUsIGdldHRlcnMsIGFuZCBhY3Rpb24gcHJvcGVydGllc1xyXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXHJcbiAgICBpZiAoaXNWdWUyKSB7XHJcbiAgICAgICAgT2JqZWN0LmtleXMoc2V0dXBTdG9yZSkuZm9yRWFjaCgoa2V5KSA9PiB7XHJcbiAgICAgICAgICAgIHNldChzdG9yZSwga2V5LCBzZXR1cFN0b3JlW2tleV0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgYXNzaWduKHN0b3JlLCBzZXR1cFN0b3JlKTtcclxuICAgICAgICAvLyBhbGxvd3MgcmV0cmlldmluZyByZWFjdGl2ZSBvYmplY3RzIHdpdGggYHN0b3JlVG9SZWZzKClgLiBNdXN0IGJlIGNhbGxlZCBhZnRlciBhc3NpZ25pbmcgdG8gdGhlIHJlYWN0aXZlIG9iamVjdC5cclxuICAgICAgICAvLyBNYWtlIGBzdG9yZVRvUmVmcygpYCB3b3JrIHdpdGggYHJlYWN0aXZlKClgICM3OTlcclxuICAgICAgICBhc3NpZ24odG9SYXcoc3RvcmUpLCBzZXR1cFN0b3JlKTtcclxuICAgIH1cclxuICAgIC8vIHVzZSB0aGlzIGluc3RlYWQgb2YgYSBjb21wdXRlZCB3aXRoIHNldHRlciB0byBiZSBhYmxlIHRvIGNyZWF0ZSBpdCBhbnl3aGVyZVxyXG4gICAgLy8gd2l0aG91dCBsaW5raW5nIHRoZSBjb21wdXRlZCBsaWZlc3BhbiB0byB3aGVyZXZlciB0aGUgc3RvcmUgaXMgZmlyc3RcclxuICAgIC8vIGNyZWF0ZWQuXHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc3RvcmUsICckc3RhdGUnLCB7XHJcbiAgICAgICAgZ2V0OiAoKSA9PiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGhvdCA/IGhvdFN0YXRlLnZhbHVlIDogcGluaWEuc3RhdGUudmFsdWVbJGlkXSksXHJcbiAgICAgICAgc2V0OiAoc3RhdGUpID0+IHtcclxuICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXHJcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgaG90KSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2Nhbm5vdCBzZXQgaG90U3RhdGUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkcGF0Y2goKCRzdGF0ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgYXNzaWduKCRzdGF0ZSwgc3RhdGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgfSk7XHJcbiAgICAvLyBhZGQgdGhlIGhvdFVwZGF0ZSBiZWZvcmUgcGx1Z2lucyB0byBhbGxvdyB0aGVtIHRvIG92ZXJyaWRlIGl0XHJcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgIHN0b3JlLl9ob3RVcGRhdGUgPSBtYXJrUmF3KChuZXdTdG9yZSkgPT4ge1xyXG4gICAgICAgICAgICBzdG9yZS5faG90VXBkYXRpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICBuZXdTdG9yZS5faG1yUGF5bG9hZC5zdGF0ZS5mb3JFYWNoKChzdGF0ZUtleSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlS2V5IGluIHN0b3JlLiRzdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1N0YXRlVGFyZ2V0ID0gbmV3U3RvcmUuJHN0YXRlW3N0YXRlS2V5XTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBvbGRTdGF0ZVNvdXJjZSA9IHN0b3JlLiRzdGF0ZVtzdGF0ZUtleV07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBuZXdTdGF0ZVRhcmdldCA9PT0gJ29iamVjdCcgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNQbGFpbk9iamVjdChuZXdTdGF0ZVRhcmdldCkgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNQbGFpbk9iamVjdChvbGRTdGF0ZVNvdXJjZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0Y2hPYmplY3QobmV3U3RhdGVUYXJnZXQsIG9sZFN0YXRlU291cmNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyYW5zZmVyIHRoZSByZWZcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3U3RvcmUuJHN0YXRlW3N0YXRlS2V5XSA9IG9sZFN0YXRlU291cmNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIHBhdGNoIGRpcmVjdCBhY2Nlc3MgcHJvcGVydGllcyB0byBhbGxvdyBzdG9yZS5zdGF0ZVByb3BlcnR5IHRvIHdvcmsgYXNcclxuICAgICAgICAgICAgICAgIC8vIHN0b3JlLiRzdGF0ZS5zdGF0ZVByb3BlcnR5XHJcbiAgICAgICAgICAgICAgICBzZXQoc3RvcmUsIHN0YXRlS2V5LCB0b1JlZihuZXdTdG9yZS4kc3RhdGUsIHN0YXRlS2V5KSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyByZW1vdmUgZGVsZXRlZCBzdGF0ZSBwcm9wZXJ0aWVzXHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHN0b3JlLiRzdGF0ZSkuZm9yRWFjaCgoc3RhdGVLZXkpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghKHN0YXRlS2V5IGluIG5ld1N0b3JlLiRzdGF0ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWwoc3RvcmUsIHN0YXRlS2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIGF2b2lkIGRldnRvb2xzIGxvZ2dpbmcgdGhpcyBhcyBhIG11dGF0aW9uXHJcbiAgICAgICAgICAgIGlzTGlzdGVuaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlzU3luY0xpc3RlbmluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICBwaW5pYS5zdGF0ZS52YWx1ZVskaWRdID0gdG9SZWYobmV3U3RvcmUuX2htclBheWxvYWQsICdob3RTdGF0ZScpO1xyXG4gICAgICAgICAgICBpc1N5bmNMaXN0ZW5pbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICBuZXh0VGljaygpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaXNMaXN0ZW5pbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBhY3Rpb25OYW1lIGluIG5ld1N0b3JlLl9obXJQYXlsb2FkLmFjdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFjdGlvbiA9IG5ld1N0b3JlW2FjdGlvbk5hbWVdO1xyXG4gICAgICAgICAgICAgICAgc2V0KHN0b3JlLCBhY3Rpb25OYW1lLCB3cmFwQWN0aW9uKGFjdGlvbk5hbWUsIGFjdGlvbikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFRPRE86IGRvZXMgdGhpcyB3b3JrIGluIGJvdGggc2V0dXAgYW5kIG9wdGlvbiBzdG9yZT9cclxuICAgICAgICAgICAgZm9yIChjb25zdCBnZXR0ZXJOYW1lIGluIG5ld1N0b3JlLl9obXJQYXlsb2FkLmdldHRlcnMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGdldHRlciA9IG5ld1N0b3JlLl9obXJQYXlsb2FkLmdldHRlcnNbZ2V0dGVyTmFtZV07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBnZXR0ZXJWYWx1ZSA9IGlzT3B0aW9uc1N0b3JlXHJcbiAgICAgICAgICAgICAgICAgICAgPyAvLyBzcGVjaWFsIGhhbmRsaW5nIG9mIG9wdGlvbnMgYXBpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXB1dGVkKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEFjdGl2ZVBpbmlhKHBpbmlhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXR0ZXIuY2FsbChzdG9yZSwgc3RvcmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIDogZ2V0dGVyO1xyXG4gICAgICAgICAgICAgICAgc2V0KHN0b3JlLCBnZXR0ZXJOYW1lLCBnZXR0ZXJWYWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gcmVtb3ZlIGRlbGV0ZWQgZ2V0dGVyc1xyXG4gICAgICAgICAgICBPYmplY3Qua2V5cyhzdG9yZS5faG1yUGF5bG9hZC5nZXR0ZXJzKS5mb3JFYWNoKChrZXkpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghKGtleSBpbiBuZXdTdG9yZS5faG1yUGF5bG9hZC5nZXR0ZXJzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbChzdG9yZSwga2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIHJlbW92ZSBvbGQgYWN0aW9uc1xyXG4gICAgICAgICAgICBPYmplY3Qua2V5cyhzdG9yZS5faG1yUGF5bG9hZC5hY3Rpb25zKS5mb3JFYWNoKChrZXkpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghKGtleSBpbiBuZXdTdG9yZS5faG1yUGF5bG9hZC5hY3Rpb25zKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbChzdG9yZSwga2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgdmFsdWVzIHVzZWQgaW4gZGV2dG9vbHMgYW5kIHRvIGFsbG93IGRlbGV0aW5nIG5ldyBwcm9wZXJ0aWVzIGxhdGVyIG9uXHJcbiAgICAgICAgICAgIHN0b3JlLl9obXJQYXlsb2FkID0gbmV3U3RvcmUuX2htclBheWxvYWQ7XHJcbiAgICAgICAgICAgIHN0b3JlLl9nZXR0ZXJzID0gbmV3U3RvcmUuX2dldHRlcnM7XHJcbiAgICAgICAgICAgIHN0b3JlLl9ob3RVcGRhdGluZyA9IGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKFVTRV9ERVZUT09MUykge1xyXG4gICAgICAgIGNvbnN0IG5vbkVudW1lcmFibGUgPSB7XHJcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIC8vIGF2b2lkIHdhcm5pbmcgb24gZGV2dG9vbHMgdHJ5aW5nIHRvIGRpc3BsYXkgdGhpcyBwcm9wZXJ0eVxyXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIFsnX3AnLCAnX2htclBheWxvYWQnLCAnX2dldHRlcnMnLCAnX2N1c3RvbVByb3BlcnRpZXMnXS5mb3JFYWNoKChwKSA9PiB7XHJcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzdG9yZSwgcCwge1xyXG4gICAgICAgICAgICAgICAgdmFsdWU6IHN0b3JlW3BdLFxyXG4gICAgICAgICAgICAgICAgLi4ubm9uRW51bWVyYWJsZSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cclxuICAgIGlmIChpc1Z1ZTIpIHtcclxuICAgICAgICAvLyBtYXJrIHRoZSBzdG9yZSBhcyByZWFkeSBiZWZvcmUgcGx1Z2luc1xyXG4gICAgICAgIHN0b3JlLl9yID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIC8vIGFwcGx5IGFsbCBwbHVnaW5zXHJcbiAgICBwaW5pYS5fcC5mb3JFYWNoKChleHRlbmRlcikgPT4ge1xyXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXHJcbiAgICAgICAgaWYgKFVTRV9ERVZUT09MUykge1xyXG4gICAgICAgICAgICBjb25zdCBleHRlbnNpb25zID0gc2NvcGUucnVuKCgpID0+IGV4dGVuZGVyKHtcclxuICAgICAgICAgICAgICAgIHN0b3JlLFxyXG4gICAgICAgICAgICAgICAgYXBwOiBwaW5pYS5fYSxcclxuICAgICAgICAgICAgICAgIHBpbmlhLFxyXG4gICAgICAgICAgICAgICAgb3B0aW9uczogb3B0aW9uc0ZvclBsdWdpbixcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICBPYmplY3Qua2V5cyhleHRlbnNpb25zIHx8IHt9KS5mb3JFYWNoKChrZXkpID0+IHN0b3JlLl9jdXN0b21Qcm9wZXJ0aWVzLmFkZChrZXkpKTtcclxuICAgICAgICAgICAgYXNzaWduKHN0b3JlLCBleHRlbnNpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGFzc2lnbihzdG9yZSwgc2NvcGUucnVuKCgpID0+IGV4dGVuZGVyKHtcclxuICAgICAgICAgICAgICAgIHN0b3JlLFxyXG4gICAgICAgICAgICAgICAgYXBwOiBwaW5pYS5fYSxcclxuICAgICAgICAgICAgICAgIHBpbmlhLFxyXG4gICAgICAgICAgICAgICAgb3B0aW9uczogb3B0aW9uc0ZvclBsdWdpbixcclxuICAgICAgICAgICAgfSkpKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcclxuICAgICAgICBzdG9yZS4kc3RhdGUgJiZcclxuICAgICAgICB0eXBlb2Ygc3RvcmUuJHN0YXRlID09PSAnb2JqZWN0JyAmJlxyXG4gICAgICAgIHR5cGVvZiBzdG9yZS4kc3RhdGUuY29uc3RydWN0b3IgPT09ICdmdW5jdGlvbicgJiZcclxuICAgICAgICAhc3RvcmUuJHN0YXRlLmNvbnN0cnVjdG9yLnRvU3RyaW5nKCkuaW5jbHVkZXMoJ1tuYXRpdmUgY29kZV0nKSkge1xyXG4gICAgICAgIGNvbnNvbGUud2FybihgW/CfjY1dOiBUaGUgXCJzdGF0ZVwiIG11c3QgYmUgYSBwbGFpbiBvYmplY3QuIEl0IGNhbm5vdCBiZVxcbmAgK1xyXG4gICAgICAgICAgICBgXFx0c3RhdGU6ICgpID0+IG5ldyBNeUNsYXNzKClcXG5gICtcclxuICAgICAgICAgICAgYEZvdW5kIGluIHN0b3JlIFwiJHtzdG9yZS4kaWR9XCIuYCk7XHJcbiAgICB9XHJcbiAgICAvLyBvbmx5IGFwcGx5IGh5ZHJhdGUgdG8gb3B0aW9uIHN0b3JlcyB3aXRoIGFuIGluaXRpYWwgc3RhdGUgaW4gcGluaWFcclxuICAgIGlmIChpbml0aWFsU3RhdGUgJiZcclxuICAgICAgICBpc09wdGlvbnNTdG9yZSAmJlxyXG4gICAgICAgIG9wdGlvbnMuaHlkcmF0ZSkge1xyXG4gICAgICAgIG9wdGlvbnMuaHlkcmF0ZShzdG9yZS4kc3RhdGUsIGluaXRpYWxTdGF0ZSk7XHJcbiAgICB9XHJcbiAgICBpc0xpc3RlbmluZyA9IHRydWU7XHJcbiAgICBpc1N5bmNMaXN0ZW5pbmcgPSB0cnVlO1xyXG4gICAgcmV0dXJuIHN0b3JlO1xyXG59XHJcbmZ1bmN0aW9uIGRlZmluZVN0b3JlKFxyXG4vLyBUT0RPOiBhZGQgcHJvcGVyIHR5cGVzIGZyb20gYWJvdmVcclxuaWRPck9wdGlvbnMsIHNldHVwLCBzZXR1cE9wdGlvbnMpIHtcclxuICAgIGxldCBpZDtcclxuICAgIGxldCBvcHRpb25zO1xyXG4gICAgY29uc3QgaXNTZXR1cFN0b3JlID0gdHlwZW9mIHNldHVwID09PSAnZnVuY3Rpb24nO1xyXG4gICAgaWYgKHR5cGVvZiBpZE9yT3B0aW9ucyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICBpZCA9IGlkT3JPcHRpb25zO1xyXG4gICAgICAgIC8vIHRoZSBvcHRpb24gc3RvcmUgc2V0dXAgd2lsbCBjb250YWluIHRoZSBhY3R1YWwgb3B0aW9ucyBpbiB0aGlzIGNhc2VcclxuICAgICAgICBvcHRpb25zID0gaXNTZXR1cFN0b3JlID8gc2V0dXBPcHRpb25zIDogc2V0dXA7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBvcHRpb25zID0gaWRPck9wdGlvbnM7XHJcbiAgICAgICAgaWQgPSBpZE9yT3B0aW9ucy5pZDtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHVzZVN0b3JlKHBpbmlhLCBob3QpIHtcclxuICAgICAgICBjb25zdCBjdXJyZW50SW5zdGFuY2UgPSBnZXRDdXJyZW50SW5zdGFuY2UoKTtcclxuICAgICAgICBwaW5pYSA9XHJcbiAgICAgICAgICAgIC8vIGluIHRlc3QgbW9kZSwgaWdub3JlIHRoZSBhcmd1bWVudCBwcm92aWRlZCBhcyB3ZSBjYW4gYWx3YXlzIHJldHJpZXZlIGFcclxuICAgICAgICAgICAgLy8gcGluaWEgaW5zdGFuY2Ugd2l0aCBnZXRBY3RpdmVQaW5pYSgpXHJcbiAgICAgICAgICAgICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICd0ZXN0JykgJiYgYWN0aXZlUGluaWEgJiYgYWN0aXZlUGluaWEuX3Rlc3RpbmcgPyBudWxsIDogcGluaWEpIHx8XHJcbiAgICAgICAgICAgICAgICAoY3VycmVudEluc3RhbmNlICYmIGluamVjdChwaW5pYVN5bWJvbCwgbnVsbCkpO1xyXG4gICAgICAgIGlmIChwaW5pYSlcclxuICAgICAgICAgICAgc2V0QWN0aXZlUGluaWEocGluaWEpO1xyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWFjdGl2ZVBpbmlhKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgW/CfjY1dOiBnZXRBY3RpdmVQaW5pYSB3YXMgY2FsbGVkIHdpdGggbm8gYWN0aXZlIFBpbmlhLiBEaWQgeW91IGZvcmdldCB0byBpbnN0YWxsIHBpbmlhP1xcbmAgK1xyXG4gICAgICAgICAgICAgICAgYFxcdGNvbnN0IHBpbmlhID0gY3JlYXRlUGluaWEoKVxcbmAgK1xyXG4gICAgICAgICAgICAgICAgYFxcdGFwcC51c2UocGluaWEpXFxuYCArXHJcbiAgICAgICAgICAgICAgICBgVGhpcyB3aWxsIGZhaWwgaW4gcHJvZHVjdGlvbi5gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcGluaWEgPSBhY3RpdmVQaW5pYTtcclxuICAgICAgICBpZiAoIXBpbmlhLl9zLmhhcyhpZCkpIHtcclxuICAgICAgICAgICAgLy8gY3JlYXRpbmcgdGhlIHN0b3JlIHJlZ2lzdGVycyBpdCBpbiBgcGluaWEuX3NgXHJcbiAgICAgICAgICAgIGlmIChpc1NldHVwU3RvcmUpIHtcclxuICAgICAgICAgICAgICAgIGNyZWF0ZVNldHVwU3RvcmUoaWQsIHNldHVwLCBvcHRpb25zLCBwaW5pYSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjcmVhdGVPcHRpb25zU3RvcmUoaWQsIG9wdGlvbnMsIHBpbmlhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xyXG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiBub3QgdGhlIHJpZ2h0IGluZmVycmVkIHR5cGVcclxuICAgICAgICAgICAgICAgIHVzZVN0b3JlLl9waW5pYSA9IHBpbmlhO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHN0b3JlID0gcGluaWEuX3MuZ2V0KGlkKTtcclxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGhvdCkge1xyXG4gICAgICAgICAgICBjb25zdCBob3RJZCA9ICdfX2hvdDonICsgaWQ7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1N0b3JlID0gaXNTZXR1cFN0b3JlXHJcbiAgICAgICAgICAgICAgICA/IGNyZWF0ZVNldHVwU3RvcmUoaG90SWQsIHNldHVwLCBvcHRpb25zLCBwaW5pYSwgdHJ1ZSlcclxuICAgICAgICAgICAgICAgIDogY3JlYXRlT3B0aW9uc1N0b3JlKGhvdElkLCBhc3NpZ24oe30sIG9wdGlvbnMpLCBwaW5pYSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIGhvdC5faG90VXBkYXRlKG5ld1N0b3JlKTtcclxuICAgICAgICAgICAgLy8gY2xlYW51cCB0aGUgc3RhdGUgcHJvcGVydGllcyBhbmQgdGhlIHN0b3JlIGZyb20gdGhlIGNhY2hlXHJcbiAgICAgICAgICAgIGRlbGV0ZSBwaW5pYS5zdGF0ZS52YWx1ZVtob3RJZF07XHJcbiAgICAgICAgICAgIHBpbmlhLl9zLmRlbGV0ZShob3RJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHNhdmUgc3RvcmVzIGluIGluc3RhbmNlcyB0byBhY2Nlc3MgdGhlbSBkZXZ0b29sc1xyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcclxuICAgICAgICAgICAgSVNfQ0xJRU5UICYmXHJcbiAgICAgICAgICAgIGN1cnJlbnRJbnN0YW5jZSAmJlxyXG4gICAgICAgICAgICBjdXJyZW50SW5zdGFuY2UucHJveHkgJiZcclxuICAgICAgICAgICAgLy8gYXZvaWQgYWRkaW5nIHN0b3JlcyB0aGF0IGFyZSBqdXN0IGJ1aWx0IGZvciBob3QgbW9kdWxlIHJlcGxhY2VtZW50XHJcbiAgICAgICAgICAgICFob3QpIHtcclxuICAgICAgICAgICAgY29uc3Qgdm0gPSBjdXJyZW50SW5zdGFuY2UucHJveHk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlID0gJ19wU3RvcmVzJyBpbiB2bSA/IHZtLl9wU3RvcmVzIDogKHZtLl9wU3RvcmVzID0ge30pO1xyXG4gICAgICAgICAgICBjYWNoZVtpZF0gPSBzdG9yZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gU3RvcmVHZW5lcmljIGNhbm5vdCBiZSBjYXN0ZWQgdG93YXJkcyBTdG9yZVxyXG4gICAgICAgIHJldHVybiBzdG9yZTtcclxuICAgIH1cclxuICAgIHVzZVN0b3JlLiRpZCA9IGlkO1xyXG4gICAgcmV0dXJuIHVzZVN0b3JlO1xyXG59XG5cbmxldCBtYXBTdG9yZVN1ZmZpeCA9ICdTdG9yZSc7XHJcbi8qKlxyXG4gKiBDaGFuZ2VzIHRoZSBzdWZmaXggYWRkZWQgYnkgYG1hcFN0b3JlcygpYC4gQ2FuIGJlIHNldCB0byBhbiBlbXB0eSBzdHJpbmcuXHJcbiAqIERlZmF1bHRzIHRvIGBcIlN0b3JlXCJgLiBNYWtlIHN1cmUgdG8gZXh0ZW5kIHRoZSBNYXBTdG9yZXNDdXN0b21pemF0aW9uXHJcbiAqIGludGVyZmFjZSBpZiB5b3UgYXJlIHVzaW5nIFR5cGVTY3JpcHQuXHJcbiAqXHJcbiAqIEBwYXJhbSBzdWZmaXggLSBuZXcgc3VmZml4XHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRNYXBTdG9yZVN1ZmZpeChzdWZmaXggLy8gY291bGQgYmUgJ1N0b3JlJyBidXQgdGhhdCB3b3VsZCBiZSBhbm5veWluZyBmb3IgSlNcclxuKSB7XHJcbiAgICBtYXBTdG9yZVN1ZmZpeCA9IHN1ZmZpeDtcclxufVxyXG4vKipcclxuICogQWxsb3dzIHVzaW5nIHN0b3JlcyB3aXRob3V0IHRoZSBjb21wb3NpdGlvbiBBUEkgKGBzZXR1cCgpYCkgYnkgZ2VuZXJhdGluZyBhblxyXG4gKiBvYmplY3QgdG8gYmUgc3ByZWFkIGluIHRoZSBgY29tcHV0ZWRgIGZpZWxkIG9mIGEgY29tcG9uZW50LiBJdCBhY2NlcHRzIGEgbGlzdFxyXG4gKiBvZiBzdG9yZSBkZWZpbml0aW9ucy5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBganNcclxuICogZXhwb3J0IGRlZmF1bHQge1xyXG4gKiAgIGNvbXB1dGVkOiB7XHJcbiAqICAgICAvLyBvdGhlciBjb21wdXRlZCBwcm9wZXJ0aWVzXHJcbiAqICAgICAuLi5tYXBTdG9yZXModXNlVXNlclN0b3JlLCB1c2VDYXJ0U3RvcmUpXHJcbiAqICAgfSxcclxuICpcclxuICogICBjcmVhdGVkKCkge1xyXG4gKiAgICAgdGhpcy51c2VyU3RvcmUgLy8gc3RvcmUgd2l0aCBpZCBcInVzZXJcIlxyXG4gKiAgICAgdGhpcy5jYXJ0U3RvcmUgLy8gc3RvcmUgd2l0aCBpZCBcImNhcnRcIlxyXG4gKiAgIH1cclxuICogfVxyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIHN0b3JlcyAtIGxpc3Qgb2Ygc3RvcmVzIHRvIG1hcCB0byBhbiBvYmplY3RcclxuICovXHJcbmZ1bmN0aW9uIG1hcFN0b3JlcyguLi5zdG9yZXMpIHtcclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgQXJyYXkuaXNBcnJheShzdG9yZXNbMF0pKSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKGBb8J+NjV06IERpcmVjdGx5IHBhc3MgYWxsIHN0b3JlcyB0byBcIm1hcFN0b3JlcygpXCIgd2l0aG91dCBwdXR0aW5nIHRoZW0gaW4gYW4gYXJyYXk6XFxuYCArXHJcbiAgICAgICAgICAgIGBSZXBsYWNlXFxuYCArXHJcbiAgICAgICAgICAgIGBcXHRtYXBTdG9yZXMoW3VzZUF1dGhTdG9yZSwgdXNlQ2FydFN0b3JlXSlcXG5gICtcclxuICAgICAgICAgICAgYHdpdGhcXG5gICtcclxuICAgICAgICAgICAgYFxcdG1hcFN0b3Jlcyh1c2VBdXRoU3RvcmUsIHVzZUNhcnRTdG9yZSlcXG5gICtcclxuICAgICAgICAgICAgYFRoaXMgd2lsbCBmYWlsIGluIHByb2R1Y3Rpb24gaWYgbm90IGZpeGVkLmApO1xyXG4gICAgICAgIHN0b3JlcyA9IHN0b3Jlc1swXTtcclxuICAgIH1cclxuICAgIHJldHVybiBzdG9yZXMucmVkdWNlKChyZWR1Y2VkLCB1c2VTdG9yZSkgPT4ge1xyXG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6ICRpZCBpcyBhZGRlZCBieSBkZWZpbmVTdG9yZVxyXG4gICAgICAgIHJlZHVjZWRbdXNlU3RvcmUuJGlkICsgbWFwU3RvcmVTdWZmaXhdID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdXNlU3RvcmUodGhpcy4kcGluaWEpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHJlZHVjZWQ7XHJcbiAgICB9LCB7fSk7XHJcbn1cclxuLyoqXHJcbiAqIEFsbG93cyB1c2luZyBzdGF0ZSBhbmQgZ2V0dGVycyBmcm9tIG9uZSBzdG9yZSB3aXRob3V0IHVzaW5nIHRoZSBjb21wb3NpdGlvblxyXG4gKiBBUEkgKGBzZXR1cCgpYCkgYnkgZ2VuZXJhdGluZyBhbiBvYmplY3QgdG8gYmUgc3ByZWFkIGluIHRoZSBgY29tcHV0ZWRgIGZpZWxkXHJcbiAqIG9mIGEgY29tcG9uZW50LlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlU3RvcmUgLSBzdG9yZSB0byBtYXAgZnJvbVxyXG4gKiBAcGFyYW0ga2V5c09yTWFwcGVyIC0gYXJyYXkgb3Igb2JqZWN0XHJcbiAqL1xyXG5mdW5jdGlvbiBtYXBTdGF0ZSh1c2VTdG9yZSwga2V5c09yTWFwcGVyKSB7XHJcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShrZXlzT3JNYXBwZXIpXHJcbiAgICAgICAgPyBrZXlzT3JNYXBwZXIucmVkdWNlKChyZWR1Y2VkLCBrZXkpID0+IHtcclxuICAgICAgICAgICAgcmVkdWNlZFtrZXldID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVzZVN0b3JlKHRoaXMuJHBpbmlhKVtrZXldO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXR1cm4gcmVkdWNlZDtcclxuICAgICAgICB9LCB7fSlcclxuICAgICAgICA6IE9iamVjdC5rZXlzKGtleXNPck1hcHBlcikucmVkdWNlKChyZWR1Y2VkLCBrZXkpID0+IHtcclxuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxyXG4gICAgICAgICAgICByZWR1Y2VkW2tleV0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdG9yZSA9IHVzZVN0b3JlKHRoaXMuJHBpbmlhKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN0b3JlS2V5ID0ga2V5c09yTWFwcGVyW2tleV07XHJcbiAgICAgICAgICAgICAgICAvLyBmb3Igc29tZSByZWFzb24gVFMgaXMgdW5hYmxlIHRvIGluZmVyIHRoZSB0eXBlIG9mIHN0b3JlS2V5IHRvIGJlIGFcclxuICAgICAgICAgICAgICAgIC8vIGZ1bmN0aW9uXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZW9mIHN0b3JlS2V5ID09PSAnZnVuY3Rpb24nXHJcbiAgICAgICAgICAgICAgICAgICAgPyBzdG9yZUtleS5jYWxsKHRoaXMsIHN0b3JlKVxyXG4gICAgICAgICAgICAgICAgICAgIDogc3RvcmVbc3RvcmVLZXldO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXR1cm4gcmVkdWNlZDtcclxuICAgICAgICB9LCB7fSk7XHJcbn1cclxuLyoqXHJcbiAqIEFsaWFzIGZvciBgbWFwU3RhdGUoKWAuIFlvdSBzaG91bGQgdXNlIGBtYXBTdGF0ZSgpYCBpbnN0ZWFkLlxyXG4gKiBAZGVwcmVjYXRlZCB1c2UgYG1hcFN0YXRlKClgIGluc3RlYWQuXHJcbiAqL1xyXG5jb25zdCBtYXBHZXR0ZXJzID0gbWFwU3RhdGU7XHJcbi8qKlxyXG4gKiBBbGxvd3MgZGlyZWN0bHkgdXNpbmcgYWN0aW9ucyBmcm9tIHlvdXIgc3RvcmUgd2l0aG91dCB1c2luZyB0aGUgY29tcG9zaXRpb25cclxuICogQVBJIChgc2V0dXAoKWApIGJ5IGdlbmVyYXRpbmcgYW4gb2JqZWN0IHRvIGJlIHNwcmVhZCBpbiB0aGUgYG1ldGhvZHNgIGZpZWxkXHJcbiAqIG9mIGEgY29tcG9uZW50LlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlU3RvcmUgLSBzdG9yZSB0byBtYXAgZnJvbVxyXG4gKiBAcGFyYW0ga2V5c09yTWFwcGVyIC0gYXJyYXkgb3Igb2JqZWN0XHJcbiAqL1xyXG5mdW5jdGlvbiBtYXBBY3Rpb25zKHVzZVN0b3JlLCBrZXlzT3JNYXBwZXIpIHtcclxuICAgIHJldHVybiBBcnJheS5pc0FycmF5KGtleXNPck1hcHBlcilcclxuICAgICAgICA/IGtleXNPck1hcHBlci5yZWR1Y2UoKHJlZHVjZWQsIGtleSkgPT4ge1xyXG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXHJcbiAgICAgICAgICAgIHJlZHVjZWRba2V5XSA9IGZ1bmN0aW9uICguLi5hcmdzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdXNlU3RvcmUodGhpcy4kcGluaWEpW2tleV0oLi4uYXJncyk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJldHVybiByZWR1Y2VkO1xyXG4gICAgICAgIH0sIHt9KVxyXG4gICAgICAgIDogT2JqZWN0LmtleXMoa2V5c09yTWFwcGVyKS5yZWR1Y2UoKHJlZHVjZWQsIGtleSkgPT4ge1xyXG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXHJcbiAgICAgICAgICAgIHJlZHVjZWRba2V5XSA9IGZ1bmN0aW9uICguLi5hcmdzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdXNlU3RvcmUodGhpcy4kcGluaWEpW2tleXNPck1hcHBlcltrZXldXSguLi5hcmdzKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlZHVjZWQ7XHJcbiAgICAgICAgfSwge30pO1xyXG59XHJcbi8qKlxyXG4gKiBBbGxvd3MgdXNpbmcgc3RhdGUgYW5kIGdldHRlcnMgZnJvbSBvbmUgc3RvcmUgd2l0aG91dCB1c2luZyB0aGUgY29tcG9zaXRpb25cclxuICogQVBJIChgc2V0dXAoKWApIGJ5IGdlbmVyYXRpbmcgYW4gb2JqZWN0IHRvIGJlIHNwcmVhZCBpbiB0aGUgYGNvbXB1dGVkYCBmaWVsZFxyXG4gKiBvZiBhIGNvbXBvbmVudC5cclxuICpcclxuICogQHBhcmFtIHVzZVN0b3JlIC0gc3RvcmUgdG8gbWFwIGZyb21cclxuICogQHBhcmFtIGtleXNPck1hcHBlciAtIGFycmF5IG9yIG9iamVjdFxyXG4gKi9cclxuZnVuY3Rpb24gbWFwV3JpdGFibGVTdGF0ZSh1c2VTdG9yZSwga2V5c09yTWFwcGVyKSB7XHJcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShrZXlzT3JNYXBwZXIpXHJcbiAgICAgICAgPyBrZXlzT3JNYXBwZXIucmVkdWNlKChyZWR1Y2VkLCBrZXkpID0+IHtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICByZWR1Y2VkW2tleV0gPSB7XHJcbiAgICAgICAgICAgICAgICBnZXQoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVzZVN0b3JlKHRoaXMuJHBpbmlhKVtrZXldO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHNldCh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGl0J3MgZWFzaWVyIHRvIHR5cGUgaXQgaGVyZSBhcyBhbnlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHVzZVN0b3JlKHRoaXMuJHBpbmlhKVtrZXldID0gdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlZHVjZWQ7XHJcbiAgICAgICAgfSwge30pXHJcbiAgICAgICAgOiBPYmplY3Qua2V5cyhrZXlzT3JNYXBwZXIpLnJlZHVjZSgocmVkdWNlZCwga2V5KSA9PiB7XHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgcmVkdWNlZFtrZXldID0ge1xyXG4gICAgICAgICAgICAgICAgZ2V0KCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1c2VTdG9yZSh0aGlzLiRwaW5pYSlba2V5c09yTWFwcGVyW2tleV1dO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHNldCh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGl0J3MgZWFzaWVyIHRvIHR5cGUgaXQgaGVyZSBhcyBhbnlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHVzZVN0b3JlKHRoaXMuJHBpbmlhKVtrZXlzT3JNYXBwZXJba2V5XV0gPSB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXR1cm4gcmVkdWNlZDtcclxuICAgICAgICB9LCB7fSk7XHJcbn1cblxuLyoqXHJcbiAqIENyZWF0ZXMgYW4gb2JqZWN0IG9mIHJlZmVyZW5jZXMgd2l0aCBhbGwgdGhlIHN0YXRlLCBnZXR0ZXJzLCBhbmQgcGx1Z2luLWFkZGVkXHJcbiAqIHN0YXRlIHByb3BlcnRpZXMgb2YgdGhlIHN0b3JlLiBTaW1pbGFyIHRvIGB0b1JlZnMoKWAgYnV0IHNwZWNpZmljYWxseVxyXG4gKiBkZXNpZ25lZCBmb3IgUGluaWEgc3RvcmVzIHNvIG1ldGhvZHMgYW5kIG5vbiByZWFjdGl2ZSBwcm9wZXJ0aWVzIGFyZVxyXG4gKiBjb21wbGV0ZWx5IGlnbm9yZWQuXHJcbiAqXHJcbiAqIEBwYXJhbSBzdG9yZSAtIHN0b3JlIHRvIGV4dHJhY3QgdGhlIHJlZnMgZnJvbVxyXG4gKi9cclxuZnVuY3Rpb24gc3RvcmVUb1JlZnMoc3RvcmUpIHtcclxuICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdnVlanMvcGluaWEvaXNzdWVzLzg1MlxyXG4gICAgLy8gSXQncyBlYXNpZXIgdG8ganVzdCB1c2UgdG9SZWZzKCkgZXZlbiBpZiBpdCBpbmNsdWRlcyBtb3JlIHN0dWZmXHJcbiAgICBpZiAoaXNWdWUyKSB7XHJcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogdG9SZWZzIGluY2x1ZGUgbWV0aG9kcyBhbmQgb3RoZXJzXHJcbiAgICAgICAgcmV0dXJuIHRvUmVmcyhzdG9yZSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBzdG9yZSA9IHRvUmF3KHN0b3JlKTtcclxuICAgICAgICBjb25zdCByZWZzID0ge307XHJcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gc3RvcmUpIHtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBzdG9yZVtrZXldO1xyXG4gICAgICAgICAgICBpZiAoaXNSZWYodmFsdWUpIHx8IGlzUmVhY3RpdmUodmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiB0aGUga2V5IGlzIHN0YXRlIG9yIGdldHRlclxyXG4gICAgICAgICAgICAgICAgcmVmc1trZXldID1cclxuICAgICAgICAgICAgICAgICAgICAvLyAtLS1cclxuICAgICAgICAgICAgICAgICAgICB0b1JlZihzdG9yZSwga2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVmcztcclxuICAgIH1cclxufVxuXG4vKipcclxuICogVnVlIDIgUGx1Z2luIHRoYXQgbXVzdCBiZSBpbnN0YWxsZWQgZm9yIHBpbmlhIHRvIHdvcmsuIE5vdGUgKip5b3UgZG9uJ3QgbmVlZFxyXG4gKiB0aGlzIHBsdWdpbiBpZiB5b3UgYXJlIHVzaW5nIE51eHQuanMqKi4gVXNlIHRoZSBgYnVpbGRNb2R1bGVgIGluc3RlYWQ6XHJcbiAqIGh0dHBzOi8vcGluaWEudnVlanMub3JnL3Nzci9udXh0Lmh0bWwuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGpzXHJcbiAqIGltcG9ydCBWdWUgZnJvbSAndnVlJ1xyXG4gKiBpbXBvcnQgeyBQaW5pYVZ1ZVBsdWdpbiwgY3JlYXRlUGluaWEgfSBmcm9tICdwaW5pYSdcclxuICpcclxuICogVnVlLnVzZShQaW5pYVZ1ZVBsdWdpbilcclxuICogY29uc3QgcGluaWEgPSBjcmVhdGVQaW5pYSgpXHJcbiAqXHJcbiAqIG5ldyBWdWUoe1xyXG4gKiAgIGVsOiAnI2FwcCcsXHJcbiAqICAgLy8gLi4uXHJcbiAqICAgcGluaWEsXHJcbiAqIH0pXHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gX1Z1ZSAtIGBWdWVgIGltcG9ydGVkIGZyb20gJ3Z1ZScuXHJcbiAqL1xyXG5jb25zdCBQaW5pYVZ1ZVBsdWdpbiA9IGZ1bmN0aW9uIChfVnVlKSB7XHJcbiAgICAvLyBFcXVpdmFsZW50IG9mXHJcbiAgICAvLyBhcHAuY29uZmlnLmdsb2JhbFByb3BlcnRpZXMuJHBpbmlhID0gcGluaWFcclxuICAgIF9WdWUubWl4aW4oe1xyXG4gICAgICAgIGJlZm9yZUNyZWF0ZSgpIHtcclxuICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnM7XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnBpbmlhKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwaW5pYSA9IG9wdGlvbnMucGluaWE7XHJcbiAgICAgICAgICAgICAgICAvLyBIQUNLOiB0YWtlbiBmcm9tIHByb3ZpZGUoKTogaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL2NvbXBvc2l0aW9uLWFwaS9ibG9iL21haW4vc3JjL2FwaXMvaW5qZWN0LnRzI0wzMVxyXG4gICAgICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5fcHJvdmlkZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm92aWRlQ2FjaGUgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ19wcm92aWRlZCcsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0OiAoKSA9PiBwcm92aWRlQ2FjaGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldDogKHYpID0+IE9iamVjdC5hc3NpZ24ocHJvdmlkZUNhY2hlLCB2KSxcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuX3Byb3ZpZGVkW3BpbmlhU3ltYm9sXSA9IHBpbmlhO1xyXG4gICAgICAgICAgICAgICAgLy8gcHJvcGFnYXRlIHRoZSBwaW5pYSBpbnN0YW5jZSBpbiBhbiBTU1IgZnJpZW5kbHkgd2F5XHJcbiAgICAgICAgICAgICAgICAvLyBhdm9pZCBhZGRpbmcgaXQgdG8gbnV4dCB0d2ljZVxyXG4gICAgICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy4kcGluaWEpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLiRwaW5pYSA9IHBpbmlhO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcGluaWEuX2EgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgaWYgKElTX0NMSUVOVCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgYWxsb3dzIGNhbGxpbmcgdXNlU3RvcmUoKSBvdXRzaWRlIG9mIGEgY29tcG9uZW50IHNldHVwIGFmdGVyXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaW5zdGFsbGluZyBwaW5pYSdzIHBsdWdpblxyXG4gICAgICAgICAgICAgICAgICAgIHNldEFjdGl2ZVBpbmlhKHBpbmlhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChVU0VfREVWVE9PTFMpIHtcclxuICAgICAgICAgICAgICAgICAgICByZWdpc3RlclBpbmlhRGV2dG9vbHMocGluaWEuX2EsIHBpbmlhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICghdGhpcy4kcGluaWEgJiYgb3B0aW9ucy5wYXJlbnQgJiYgb3B0aW9ucy5wYXJlbnQuJHBpbmlhKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLiRwaW5pYSA9IG9wdGlvbnMucGFyZW50LiRwaW5pYTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZGVzdHJveWVkKCkge1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5fcFN0b3JlcztcclxuICAgICAgICB9LFxyXG4gICAgfSk7XHJcbn07XG5cbmV4cG9ydCB7IE11dGF0aW9uVHlwZSwgUGluaWFWdWVQbHVnaW4sIGFjY2VwdEhNUlVwZGF0ZSwgY3JlYXRlUGluaWEsIGRlZmluZVN0b3JlLCBnZXRBY3RpdmVQaW5pYSwgbWFwQWN0aW9ucywgbWFwR2V0dGVycywgbWFwU3RhdGUsIG1hcFN0b3JlcywgbWFwV3JpdGFibGVTdGF0ZSwgc2V0QWN0aXZlUGluaWEsIHNldE1hcFN0b3JlU3VmZml4LCBza2lwSHlkcmF0ZSwgc3RvcmVUb1JlZnMgfTtcbiIsImltcG9ydCB7IFN1Ym1pdHRlZERhdGEgfSBmcm9tIFwiLi9TdWJtaXR0ZWREYXRhXCI7XG5pbXBvcnQgeyBFbnRyeSB9IGZyb20gXCIuL21vZGVsL0VudHJ5XCI7XG5cbmV4cG9ydCBjbGFzcyBTYXZlU3RhdGUge1xuICAgIG9yaWdpbmFsRW50cnk/OiBFbnRyeTtcbiAgICBuZXdFbnRyeTogRW50cnkgPSBuZXcgRW50cnkoe30pO1xuICAgIHRpdGxlUmVzZXRWYWx1ZTogc3RyaW5nO1xuICAgIHN1Ym1pdHRlZERhdGE/OiBTdWJtaXR0ZWREYXRhO1xuICAgIGxhc3RBY3RpdmVBdD86IERhdGU7XG4gICAgc2hvd1VSTE1pc21hdGNoV2FybmluZzogYm9vbGVhbjtcbiAgICBmYXZpY29uPzogc3RyaW5nO1xufVxuIiwiaW1wb3J0IHsgRGF0YWJhc2UgfSBmcm9tIFwiLi4vY29tbW9uL21vZGVsL0RhdGFiYXNlXCI7XG5pbXBvcnQgeyBQYXNzd29yZFByb2ZpbGUgfSBmcm9tIFwiLi4vY29tbW9uL21vZGVsL1Bhc3N3b3JkUHJvZmlsZVwiO1xuaW1wb3J0IHsgS2VlTm90aWZpY2F0aW9uIH0gZnJvbSBcIi4uL2NvbW1vbi9LZWVOb3RpZmljYXRpb25cIjtcbmltcG9ydCB7IEVudHJ5U3VtbWFyeSB9IGZyb20gXCIuLi9jb21tb24vbW9kZWwvRW50cnlTdW1tYXJ5XCI7XG5pbXBvcnQgeyBTYXZlU3RhdGUgfSBmcm9tIFwiLi4vY29tbW9uL1NhdmVTdGF0ZVwiO1xuaW1wb3J0IHsgU2F2ZUVudHJ5UmVzdWx0IH0gZnJvbSBcIi4uL2NvbW1vbi9TYXZlRW50cnlSZXN1bHRcIjtcblxuZXhwb3J0IGludGVyZmFjZSBLZWVTdGF0ZSB7XG4gICAgbGF0ZXN0Q29ubmVjdGlvbkVycm9yOiBzdHJpbmc7XG4gICAgbGFzdEtlZVBhc3NSUENSZWZyZXNoOiBudW1iZXI7XG4gICAgQWN0aXZlS2VlUGFzc0RhdGFiYXNlSW5kZXg6IG51bWJlcjtcbiAgICBLZWVQYXNzRGF0YWJhc2VzOiBEYXRhYmFzZVtdO1xuICAgIFBhc3N3b3JkUHJvZmlsZXM6IFBhc3N3b3JkUHJvZmlsZVtdO1xuICAgIG5vdGlmaWNhdGlvbnM6IEtlZU5vdGlmaWNhdGlvbltdO1xuICAgIGNvbm5lY3RlZDogYm9vbGVhbjtcbiAgICBjb25uZWN0ZWRXZWJzb2NrZXQ6IGJvb2xlYW47XG4gICAgY3VycmVudFNlYXJjaFRlcm06IHN0cmluZztcbiAgICBsb2dpbnNGb3VuZDogYm9vbGVhbjtcbiAgICBzZWFyY2hSZXN1bHRzOiBFbnRyeVN1bW1hcnlbXTtcbiAgICBzYXZlU3RhdGU6IFNhdmVTdGF0ZTtcbiAgICBnZW5lcmF0ZWRQYXNzd29yZDogc3RyaW5nO1xuICAgIHNhdmVFbnRyeVJlc3VsdDogU2F2ZUVudHJ5UmVzdWx0O1xuICAgIGVudHJ5VXBkYXRlU3RhcnRlZEF0VGltZXN0YW1wOiBudW1iZXI7XG59XG5cbmV4cG9ydCBjb25zdCBkZWZhdWx0cyA9IHtcbiAgICBsYXRlc3RDb25uZWN0aW9uRXJyb3I6IFwiXCIsXG4gICAgbGFzdEtlZVBhc3NSUENSZWZyZXNoOiAwLFxuICAgIEFjdGl2ZUtlZVBhc3NEYXRhYmFzZUluZGV4OiAtMSxcbiAgICBLZWVQYXNzRGF0YWJhc2VzOiBbXSxcbiAgICBQYXNzd29yZFByb2ZpbGVzOiBbXSxcbiAgICBub3RpZmljYXRpb25zOiBbXSxcbiAgICBjb25uZWN0ZWQ6IGZhbHNlLFxuICAgIGNvbm5lY3RlZFdlYnNvY2tldDogZmFsc2UsXG4gICAgY3VycmVudFNlYXJjaFRlcm06IG51bGwsXG4gICAgbG9naW5zRm91bmQ6IGZhbHNlLFxuICAgIHNlYXJjaFJlc3VsdHM6IG51bGwsXG4gICAgc2F2ZVN0YXRlOiBuZXcgU2F2ZVN0YXRlKCksXG4gICAgZ2VuZXJhdGVkUGFzc3dvcmQ6IFwiXCIsXG4gICAgc2F2ZUVudHJ5UmVzdWx0OiB7XG4gICAgICAgIHJlc3VsdDogbnVsbCxcbiAgICAgICAgcmVjZWl2ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgZmlsZU5hbWU6IG51bGwsXG4gICAgICAgIHV1aWQ6IG51bGxcbiAgICB9LFxuICAgIGVudHJ5VXBkYXRlU3RhcnRlZEF0VGltZXN0YW1wOiAwXG59O1xuIiwiZXhwb3J0IGVudW0gU2Vzc2lvblR5cGUge1xuICAgIEV2ZW50ID0gXCJldmVudFwiLFxuICAgIFdlYnNvY2tldCA9IFwid2Vic29ja2V0XCJcbn1cbiIsImltcG9ydCB7IGNyZWF0ZVBpbmlhLCBkZWZpbmVTdG9yZSwgRGVmaW5lU3RvcmVPcHRpb25zLCBQaW5pYSwgU3RhdGVUcmVlLCBTdG9yZURlZmluaXRpb24sIF9HZXR0ZXJzVHJlZSB9IGZyb20gXCJwaW5pYVwiO1xuXG5pbXBvcnQgeyBLZWVTdGF0ZSwgZGVmYXVsdHMgfSBmcm9tIFwiLi9LZWVTdGF0ZVwiO1xuaW1wb3J0IHsgU2F2ZVN0YXRlIH0gZnJvbSBcIi4uL2NvbW1vbi9TYXZlU3RhdGVcIjtcbmltcG9ydCB7IFNlc3Npb25UeXBlIH0gZnJvbSBcIi4uL2NvbW1vbi9TZXNzaW9uVHlwZVwiO1xuaW1wb3J0IHsgRmllbGQgfSBmcm9tIFwiLi4vY29tbW9uL21vZGVsL0ZpZWxkXCI7XG5pbXBvcnQgeyBBcHAgfSBmcm9tIFwidnVlXCI7XG5cbi8qKlxuICogQSByZXBsYWNlbWVudCBmb3IgYGRlZmluZVN0b3JlYCB3aGljaCBtYWtlcyBhbGwgc3RhdGUgcHJvcGVydGllcyByZWFkb25seVxuICogdG8gcHJldmVudCBtdXRhdGlvbnMgb3V0c2lkZSBvZiBhY3Rpb25zLlxuICovXG5mdW5jdGlvbiBkZWZpbmVJbW11dGFibGVTdG9yZTxJZCBleHRlbmRzIHN0cmluZywgUyBleHRlbmRzIFN0YXRlVHJlZSA9IGFueSwgRyBleHRlbmRzIF9HZXR0ZXJzVHJlZTxTPiA9IGFueSwgQSA9IGFueT4oXG4gICAgaWQ6IElkLFxuICAgIG9wdGlvbnM6IE9taXQ8RGVmaW5lU3RvcmVPcHRpb25zPElkLCBTLCBHLCBBPiwgXCJpZFwiPlxuICApOiBTdG9yZURlZmluaXRpb248SWQsIFJlYWRvbmx5PFM+LCBHLCBBPiB7XG4gICAgcmV0dXJuIGRlZmluZVN0b3JlKGlkLCBvcHRpb25zKTtcbiAgfVxuXG5jb25zdCB1c2VTdG9yZSA9IGRlZmluZUltbXV0YWJsZVN0b3JlKFwia2VlXCIsIHtcbiAgICBzdGF0ZTogKCk6IEtlZVN0YXRlID0+IChkZWZhdWx0cyksXG4gICAgZ2V0dGVyczoge1xuICAgICAgICBzaG93R2VuZXJhdGVQYXNzd29yZExpbms6IChzdGF0ZTogS2VlU3RhdGUpID0+IHN0YXRlLmNvbm5lY3RlZCxcbiAgICAgICAgc2hvd01hdGNoZWRMb2dpbnM6IChzdGF0ZTogS2VlU3RhdGUpID0+ICEhc3RhdGUubG9naW5zRm91bmQsXG4gICAgICAgIHNob3dOb3RpZmljYXRpb25zOiAoc3RhdGU6IEtlZVN0YXRlKSA9PlxuICAgICAgICAgICAgc3RhdGUubm90aWZpY2F0aW9ucyAmJiAhIXN0YXRlLm5vdGlmaWNhdGlvbnMubGVuZ3RoLFxuICAgICAgICBkYXRhYmFzZUlzT3BlbjogKHN0YXRlOiBLZWVTdGF0ZSkgPT5cbiAgICAgICAgICAgIHN0YXRlLmNvbm5lY3RlZCAmJiAhIXN0YXRlLktlZVBhc3NEYXRhYmFzZXMubGVuZ3RoLFxuXG4gICAgICAgIGRhdGFiYXNlTmFtZTogKHN0YXRlOiBLZWVTdGF0ZSkgPT4ge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIHN0YXRlLktlZVBhc3NEYXRhYmFzZXMgJiZcbiAgICAgICAgICAgICAgICBzdGF0ZS5LZWVQYXNzRGF0YWJhc2VzLmxlbmd0aCAmJlxuICAgICAgICAgICAgICAgIHN0YXRlLkFjdGl2ZUtlZVBhc3NEYXRhYmFzZUluZGV4ID49IDBcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRiID0gc3RhdGUuS2VlUGFzc0RhdGFiYXNlc1tzdGF0ZS5BY3RpdmVLZWVQYXNzRGF0YWJhc2VJbmRleF07XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRiLm5hbWUgPyBkYi5uYW1lIDogZGIuZmlsZU5hbWUucmVwbGFjZSgvXi4qW1xcXFwvXS8sIFwiXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgIH0sXG4gICAgICAgIGNvbm5lY3Rpb25TdGF0dXMoc3RhdGU6IEtlZVN0YXRlKTogc3RyaW5nIHtcbiAgICAgICAgICAgIGlmIChzdGF0ZS5jb25uZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUuS2VlUGFzc0RhdGFiYXNlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkU1RSRihcIm11bHRpcGxlUGFzc3dvcmRTb3VyY2VzRW5hYmxlZFwiLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5LZWVQYXNzRGF0YWJhc2VzLmxlbmd0aC50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdGUuS2VlUGFzc0RhdGFiYXNlcy5sZW5ndGggPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhYmFzZU5hbWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRTVFIoXCJub3RpZnlCYXJMb2dpblRvS2VlUGFzc0J1dHRvbl90aXBcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJFNUUihcIm5vdGlmeUJhckxhdW5jaEtlZVBhc3NCdXR0b25fdGlwXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBjb25uZWN0aW9uU3RhdHVzRGV0YWlsKHN0YXRlOiBLZWVTdGF0ZSk6IHN0cmluZyB7XG4gICAgICAgICAgICBpZiAoc3RhdGUuY29ubmVjdGVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlLktlZVBhc3NEYXRhYmFzZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJFNUUkYoXCJsb2dnZWRJbk11bHRpcGxlX3RpcFwiLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5LZWVQYXNzRGF0YWJhc2VzLmxlbmd0aC50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhYmFzZU5hbWVcbiAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzdGF0ZS5LZWVQYXNzRGF0YWJhc2VzLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkU1RSRihcImxvZ2dlZEluX3RpcFwiLCB0aGlzLmRhdGFiYXNlTmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICRTVFIoXCJub3RpZnlCYXJMYXVuY2hLZWVQYXNzX2xhYmVsXCIpO1xuICAgICAgICB9LFxuICAgICAgICBzaG93T3BlbktlZVBhc3NCdXR0b246IChzdGF0ZTogS2VlU3RhdGUpID0+IHtcbiAgICAgICAgICAgIGlmIChzdGF0ZS5jb25uZWN0ZWRXZWJzb2NrZXQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBoYXNXZWJzb2NrZXREQnMgPSBzdGF0ZS5LZWVQYXNzRGF0YWJhc2VzLnNvbWUoXG4gICAgICAgICAgICAgICAgICAgIGRiID0+IGRiLnNlc3Npb25UeXBlID09PSBTZXNzaW9uVHlwZS5XZWJzb2NrZXRcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGNvbnN0IHN1cHBvcnRzV2Vic29ja2V0Rm9jdXMgPSBzdGF0ZS5LZWVQYXNzRGF0YWJhc2VzLnNvbWUoXG4gICAgICAgICAgICAgICAgICAgIGRiID0+XG4gICAgICAgICAgICAgICAgICAgICAgICBkYi5zZXNzaW9uVHlwZSA9PT0gU2Vzc2lvblR5cGUuV2Vic29ja2V0ICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBkYi5zZXNzaW9uRmVhdHVyZXMuaW5kZXhPZihcIktQUlBDX09QRU5fQU5EX0ZPQ1VTX0RBVEFCQVNFXCIpID49IDBcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGlmICghaGFzV2Vic29ja2V0REJzIHx8IHN1cHBvcnRzV2Vic29ja2V0Rm9jdXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbiAgICBhY3Rpb25zOiB7XG4gICAgICAgIHVwZGF0ZUFjdGl2ZUtlZVBhc3NEYXRhYmFzZUluZGV4KHBheWxvYWQpIHtcbiAgICAgICAgICAgIHRoaXMuJHBhdGNoKHtBY3RpdmVLZWVQYXNzRGF0YWJhc2VJbmRleDogcGF5bG9hZH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIHVwZGF0ZUNvbm5lY3RlZChwYXlsb2FkKSB7XG4gICAgICAgICAgICB0aGlzLiRwYXRjaCh7Y29ubmVjdGVkOiBwYXlsb2FkfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdXBkYXRlQ29ubmVjdGVkV2Vic29ja2V0KHBheWxvYWQpIHtcbiAgICAgICAgICAgIHRoaXMuJHBhdGNoKHtjb25uZWN0ZWRXZWJzb2NrZXQ6IHBheWxvYWR9KTtcbiAgICAgICAgfSxcblxuICAgICAgICB1cGRhdGVDdXJyZW50U2VhcmNoVGVybShwYXlsb2FkKSB7XG4gICAgICAgICAgICB0aGlzLiRwYXRjaCh7Y3VycmVudFNlYXJjaFRlcm06IHBheWxvYWR9KTtcbiAgICAgICAgfSxcblxuICAgICAgICB1cGRhdGVLZWVQYXNzRGF0YWJhc2VzKHBheWxvYWQpIHtcbiAgICAgICAgICAgIHRoaXMuJHBhdGNoKHtLZWVQYXNzRGF0YWJhc2VzOiBwYXlsb2FkfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdXBkYXRlTGFzdEtlZVBhc3NSUENSZWZyZXNoKHBheWxvYWQpIHtcbiAgICAgICAgICAgIHRoaXMuJHBhdGNoKHtsYXN0S2VlUGFzc1JQQ1JlZnJlc2g6IHBheWxvYWR9KTtcbiAgICAgICAgfSxcblxuICAgICAgICB1cGRhdGVMYXRlc3RDb25uZWN0aW9uRXJyb3IocGF5bG9hZCkge1xuICAgICAgICAgICAgdGhpcy4kcGF0Y2goe2xhdGVzdENvbm5lY3Rpb25FcnJvcjogcGF5bG9hZH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIHVwZGF0ZUxvZ2luc0ZvdW5kKHBheWxvYWQpIHtcbiAgICAgICAgICAgIHRoaXMuJHBhdGNoKHtsb2dpbnNGb3VuZDogcGF5bG9hZCB8fCBmYWxzZX0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIHVwZGF0ZU5vdGlmaWNhdGlvbnMocGF5bG9hZCkge1xuICAgICAgICAgICAgdGhpcy4kcGF0Y2goe25vdGlmaWNhdGlvbnM6IHBheWxvYWR9KTtcbiAgICAgICAgfSxcblxuICAgICAgICB1cGRhdGVQYXNzd29yZFByb2ZpbGVzKHBheWxvYWQpIHtcbiAgICAgICAgICAgIHRoaXMuJHBhdGNoKHtQYXNzd29yZFByb2ZpbGVzOiBwYXlsb2FkfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdXBkYXRlR2VuZXJhdGVkUGFzc3dvcmQocGF5bG9hZCkge1xuICAgICAgICAgICAgdGhpcy4kcGF0Y2goe2dlbmVyYXRlZFBhc3N3b3JkOiBwYXlsb2FkfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdXBkYXRlU3VibWl0dGVkRGF0YShwYXlsb2FkKSB7XG4gICAgICAgICAgICBjb25zdCBwYXRjaCA9IHRoaXMuc2F2ZVN0YXRlID8ge30gOiBuZXcgU2F2ZVN0YXRlKCk7XG4gICAgICAgICAgICB0aGlzLiRwYXRjaCh7c2F2ZVN0YXRlOiB7XG4gICAgICAgICAgICAgICAgc3VibWl0dGVkRGF0YTogcGF5bG9hZCB8fCBudWxsXG4gICAgICAgICAgICB9fSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdXBkYXRlU2F2ZVN0YXRlKHBheWxvYWQpIHtcbiAgICAgICAgICAgIHRoaXMuJHBhdGNoKHtzYXZlU3RhdGU6IHBheWxvYWQgfHwgbnVsbH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIHVwZGF0ZVNlYXJjaFJlc3VsdHMocGF5bG9hZCkge1xuICAgICAgICAgICAgdGhpcy4kcGF0Y2goe3NlYXJjaFJlc3VsdHM6IHBheWxvYWQgfHwgbnVsbH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIHVwZGF0ZVNlYXJjaFJlc3VsdFdpdGhGdWxsRGV0YWlscyhwYXlsb2FkKSB7XG4gICAgICAgICAgICAvL1RPRE86IG5lZWRzICRwYXRjaCB3cml0dGVuXG4gICAgICAgICAgICBjb25zdCBpZCA9IHBheWxvYWQudXVpZDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcyBvZiB0aGlzLnNlYXJjaFJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAocy51dWlkID09PSBpZCkge1xuICAgICAgICAgICAgICAgICAgICBzLmZ1bGxEZXRhaWxzID0gcGF5bG9hZCB8fCBudWxsO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgYWRkTm90aWZpY2F0aW9uKHBheWxvYWQpIHtcbiAgICAgICAgICAgIC8vVE9ETzogbmVlZHMgJHBhdGNoP1xuICAgICAgICAgICAgdGhpcy5ub3RpZmljYXRpb25zLnB1c2gocGF5bG9hZCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdXBkYXRlU2F2ZUVudHJ5UmVzdWx0KHBheWxvYWQpIHtcbiAgICAgICAgICAgIHRoaXMuJHBhdGNoKHtzYXZlRW50cnlSZXN1bHQ6IHBheWxvYWQgfHwgbnVsbH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlbW92ZUZpZWxkRnJvbUFjdGl2ZUVudHJ5KHBheWxvYWQpIHtcblxuICAgICAgICAgICAgLy9UT0RPOiBuZWVkcyAkcGF0Y2ggd3JpdHRlblxuICAgICAgICAgICAgY29uc3QgZmlyc3RUZXh0RmllbGRJbmRleCA9IHRoaXMuc2F2ZVN0YXRlLm5ld0VudHJ5LmZpZWxkcy5maW5kSW5kZXgoXG4gICAgICAgICAgICAgICAgZiA9PiBmLnR5cGUgPT09IFwidGV4dFwiXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY29uc3QgZmlyc3RQYXNzd29yZEZpZWxkSW5kZXggPSB0aGlzLnNhdmVTdGF0ZS5uZXdFbnRyeS5maWVsZHMuZmluZEluZGV4KFxuICAgICAgICAgICAgICAgIGYgPT4gZi50eXBlID09PSBcInBhc3N3b3JkXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCBvcmlnaW5hbEZpZWxkSW5kZXggPSB0aGlzLnNhdmVTdGF0ZS5uZXdFbnRyeS5maWVsZHMuZmluZEluZGV4KFxuICAgICAgICAgICAgICAgIGYgPT4gZi51dWlkID09PSAocGF5bG9hZCB8fCBudWxsKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRoaXMuc2F2ZVN0YXRlLm5ld0VudHJ5LmZpZWxkcy5zcGxpY2Uob3JpZ2luYWxGaWVsZEluZGV4LCAxKTtcblxuICAgICAgICAgICAgaWYgKG9yaWdpbmFsRmllbGRJbmRleCA9PT0gZmlyc3RUZXh0RmllbGRJbmRleCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1VzZXJuYW1lSW5kZXggPSB0aGlzLnNhdmVTdGF0ZS5uZXdFbnRyeS5maWVsZHMuZmluZEluZGV4KFxuICAgICAgICAgICAgICAgICAgICBmID0+IGYudHlwZSA9PT0gXCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGlmIChuZXdVc2VybmFtZUluZGV4IDwgMCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1VzZXJuYW1lID0gdGhpcy5zYXZlU3RhdGUubmV3RW50cnkuZmllbGRzLnNwbGljZShuZXdVc2VybmFtZUluZGV4LCAxKVswXTtcbiAgICAgICAgICAgICAgICB0aGlzLnNhdmVTdGF0ZS5uZXdFbnRyeS5maWVsZHMuc3BsaWNlKFxuICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbEZpZWxkSW5kZXgsXG4gICAgICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgICAgIG5ldyBGaWVsZCh7IC4uLm5ld1VzZXJuYW1lLCBuYW1lOiBcIktlZVBhc3MgdXNlcm5hbWVcIiB9KVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG9yaWdpbmFsRmllbGRJbmRleCA9PT0gZmlyc3RQYXNzd29yZEZpZWxkSW5kZXgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdQYXNzd29yZEluZGV4ID0gdGhpcy5zYXZlU3RhdGUubmV3RW50cnkuZmllbGRzLmZpbmRJbmRleChcbiAgICAgICAgICAgICAgICAgICAgZiA9PiBmLnR5cGUgPT09IFwicGFzc3dvcmRcIlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgaWYgKG5ld1Bhc3N3b3JkSW5kZXggPCAwKSByZXR1cm47XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3UGFzc3dvcmQgPSB0aGlzLnNhdmVTdGF0ZS5uZXdFbnRyeS5maWVsZHMuc3BsaWNlKG5ld1Bhc3N3b3JkSW5kZXgsIDEpWzBdO1xuICAgICAgICAgICAgICAgIHRoaXMuc2F2ZVN0YXRlLm5ld0VudHJ5LmZpZWxkcy5zcGxpY2UoXG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsRmllbGRJbmRleCxcbiAgICAgICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAgICAgbmV3IEZpZWxkKHsgLi4ubmV3UGFzc3dvcmQsIG5hbWU6IFwiS2VlUGFzcyBwYXNzd29yZFwiIH0pXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICB1cGRhdGVFbnRyeVVwZGF0ZVN0YXJ0ZWRBdFRpbWVzdGFtcChwYXlsb2FkKSB7XG4gICAgICAgICAgICB0aGlzLiRwYXRjaCh7ZW50cnlVcGRhdGVTdGFydGVkQXRUaW1lc3RhbXA6IHBheWxvYWQgfHwgbnVsbH0pO1xuICAgICAgICB9XG5cbiAgICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgdXNlU3RvcmU7XG5cbmV4cG9ydCB0eXBlIEtlZVN0b3JlID0gT21pdDxcbiAgICBSZXR1cm5UeXBlPHR5cGVvZiB1c2VTdG9yZT4sXG4gICAga2V5b2YgUmV0dXJuVHlwZTx0eXBlb2YgZGVmaW5lU3RvcmU+XG4+O1xuXG5cbi8vVE9ETzogRG9lcyB0aGlzIGNyZWF0ZSBhIHN1aXRhYmxlIHN0dWIgVnVlIGluc3RhbmNlIGZvciBQaW5pYSB0byB3b3JrIHdpdGggTVYyP1xubGV0IHN0dWJWdWVBcHA6IEFwcDxFbGVtZW50PjtcbmxldCBzdHViUGluaWE6IFBpbmlhO1xuZXhwb3J0IGZ1bmN0aW9uIHVzZVN0dWJTdG9yZSgpIHtcbiAgICBpZiAoIXN0dWJQaW5pYSkge1xuICAgICAgICBzdHViUGluaWEgPSBjcmVhdGVQaW5pYSgpO1xuICAgIH1cbiAgICBpZiAoIXN0dWJWdWVBcHApIHtcbiAgICAgICAgc3R1YlZ1ZUFwcCA9IGNyZWF0ZUFwcChkZWZpbmVDb21wb25lbnQpO1xuICAgICAgICBzdHViVnVlQXBwLnVzZShzdHViUGluaWEpO1xuICAgIH1cbiAgICByZXR1cm4gdXNlU3RvcmUoKTtcbn1cbiIsImltcG9ydCB7IEZpbGxlZEZpZWxkIH0gZnJvbSBcIi4vRmlsbGVkRmllbGRcIjtcbmltcG9ydCB7IFBhbmVsU3R1YiwgUGFuZWxTdHViT3B0aW9ucyB9IGZyb20gXCIuL1BhbmVsU3R1YlwiO1xuaW1wb3J0IHsgRm9ybVV0aWxzIH0gZnJvbSBcIi4vZm9ybXNVdGlsc1wiO1xuaW1wb3J0IHsgRm9ybVNhdmluZyB9IGZyb20gXCIuL2Zvcm1TYXZpbmdcIjtcbmltcG9ydCB7IEtlZUZpZWxkSWNvbiB9IGZyb20gXCIuL2tlZUZpZWxkSWNvblwiO1xuaW1wb3J0IHsgTWF0Y2hSZXN1bHQgfSBmcm9tIFwiLi9NYXRjaFJlc3VsdFwiO1xuaW1wb3J0IHsgRmluZE1hdGNoZXNCZWhhdmlvdXIgfSBmcm9tIFwiLi9maW5kTWF0Y2hlc0JlaGF2aW91clwiO1xuaW1wb3J0IHsgS2VlTG9nZ2VyLCBLZWVMb2cgfSBmcm9tIFwiLi4vY29tbW9uL0xvZ2dlclwiO1xuaW1wb3J0IHsgQ29uZmlnIH0gZnJvbSBcIi4uL2NvbW1vbi9jb25maWdcIjtcbmltcG9ydCB7IGNvbmZpZ01hbmFnZXIgfSBmcm9tIFwiLi4vY29tbW9uL0NvbmZpZ01hbmFnZXJcIjtcbmltcG9ydCB7IE1hdGNoZWRGaWVsZCB9IGZyb20gXCIuL01hdGNoZWRGaWVsZFwiO1xuaW1wb3J0IHsgRmllbGQgfSBmcm9tIFwiLi4vY29tbW9uL21vZGVsL0ZpZWxkXCI7XG5pbXBvcnQgeyBFbnRyeSB9IGZyb20gXCIuLi9jb21tb24vbW9kZWwvRW50cnlcIjtcbmltcG9ydCB1c2VTdG9yZSBmcm9tIFwiLi4vc3RvcmVcIjtcblxuY29uc3Qgc3RvcmUgPSB1c2VTdG9yZSgpO1xuXG5pbnRlcmZhY2UgU2NvcmVNYXRyaXgge1xuICAgIHNjb3JlOiBudW1iZXI7XG4gICAgZm9ybUZpZWxkSW5kZXg6IG51bWJlcjtcbiAgICBkYXRhRmllbGRJbmRleDogbnVtYmVyO1xufVxuXG5kZWNsYXJlIGNvbnN0IHB1bnljb2RlO1xuXG5jbGFzcyBGaWxsQW5kU3VibWl0QWN0aW9uIHtcbiAgICBmaWxsOiBib29sZWFuO1xuICAgIHN1Ym1pdDogYm9vbGVhbjtcbn1cblxuY2xhc3MgU3VibWl0Q2FuZGlkYXRlIHtcbiAgICBkaXN0YW5jZTogbnVtYmVyO1xuICAgIGVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuICAgIHNjb3JlOiBudW1iZXI7XG59XG5cbmNsYXNzIEZpZWxkTWF0Y2hTY29yZUNvbmZpZyB7XG4gICAgcHVuaXNoV3JvbmdJREFuZE5hbWU6IGJvb2xlYW47XG59XG5cbmNsYXNzIFZpc2libGVGaWVsZENhY2hlIHtcbiAgICBwYXNzd29yZDogYm9vbGVhbltdO1xuICAgIG90aGVyOiBib29sZWFuW107XG59XG5cbmV4cG9ydCBjbGFzcyBGb3JtRmlsbGluZyB7XG4gICAgcHJpdmF0ZSBmaW5kTG9naW5PcDogYW55ID0ge307XG4gICAgcHJpdmF0ZSBtYXRjaFJlc3VsdDogTWF0Y2hSZXN1bHQgPSBuZXcgTWF0Y2hSZXN1bHQoKTtcbiAgICBwcml2YXRlIGtlZUZpZWxkSWNvbjogS2VlRmllbGRJY29uO1xuXG4gICAgcHVibGljIG1hdGNoZWRMb2dpbnNQYW5lbFN0dWI6IFBhbmVsU3R1YjtcbiAgICBwcml2YXRlIG1hdGNoZWRMb2dpbnNQYW5lbFN0dWJSYWY6IG51bWJlcjtcblxuICAgIC8vIFNob3VsZCByZWFsbHkgbWFrZSB0aGlzIHByaXZhdGUgYW5kIGNhbGwgaW5kaXJlY3RseSBidXQgSSdtIHdhcnkgb2YgYWxsIHBlcmZvcm1hbmNlIG92ZXJoZWFkcyB3cnQgRE9NIG11dGF0aW9uIG9ic2VydmVyc1xuICAgIHB1YmxpYyBmb3JtRmluZGVyVGltZXI6IG51bWJlciA9IG51bGw7XG5cbiAgICBwcml2YXRlIHNlbWFudGljV2hpdGVsaXN0Q2FjaGU7XG4gICAgcHJpdmF0ZSBzZW1hbnRpY0JsYWNrbGlzdENhY2hlO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgbXlQb3J0OiBicm93c2VyLnJ1bnRpbWUuUG9ydCxcbiAgICAgICAgcHJpdmF0ZSBwYXJlbnRGcmFtZUlkOiBudW1iZXIsXG4gICAgICAgIHByaXZhdGUgZm9ybVV0aWxzOiBGb3JtVXRpbHMsXG4gICAgICAgIHByaXZhdGUgZm9ybVNhdmluZzogRm9ybVNhdmluZyxcbiAgICAgICAgcHJpdmF0ZSBMb2dnZXI6IEtlZUxvZ2dlcixcbiAgICAgICAgcHJpdmF0ZSBjb25maWc6IENvbmZpZyxcbiAgICAgICAgcHJpdmF0ZSBtYXRjaEZpbmRlcjogeyAodXJpOiBzdHJpbmcpOiB2b2lkIH1cbiAgICApIHtcbiAgICAgICAgdGhpcy5rZWVGaWVsZEljb24gPSBuZXcgS2VlRmllbGRJY29uKFxuICAgICAgICAgICAgbXlQb3J0LFxuICAgICAgICAgICAgcGFyZW50RnJhbWVJZCxcbiAgICAgICAgICAgIGZvcm1VdGlscyxcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlTWF0Y2hlZExvZ2luc1BhbmVsTmVhck5vZGUuYmluZCh0aGlzKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBleGVjdXRlUHJpbWFyeUFjdGlvbigpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5tYXRjaFJlc3VsdC5lbnRyaWVzICYmXG4gICAgICAgICAgICB0aGlzLm1hdGNoUmVzdWx0LmVudHJpZXMubGVuZ3RoID4gMCAmJlxuICAgICAgICAgICAgdGhpcy5tYXRjaFJlc3VsdC5tb3N0UmVsZXZhbnRGb3JtSW5kZXggIT0gbnVsbCAmJlxuICAgICAgICAgICAgdGhpcy5tYXRjaFJlc3VsdC5tb3N0UmVsZXZhbnRGb3JtSW5kZXggPj0gMFxuICAgICAgICApIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm1hdGNoUmVzdWx0LmVudHJpZXNbdGhpcy5tYXRjaFJlc3VsdC5tb3N0UmVsZXZhbnRGb3JtSW5kZXhdLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maWxsQW5kU3VibWl0KGZhbHNlLCB0aGlzLm1hdGNoUmVzdWx0Lm1vc3RSZWxldmFudEZvcm1JbmRleCwgMCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZU1hdGNoZWRMb2dpbnNQYW5lbCgpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICB0aGlzLm1hdGNoUmVzdWx0LmVudHJpZXNbdGhpcy5tYXRjaFJlc3VsdC5tb3N0UmVsZXZhbnRGb3JtSW5kZXhdLmxlbmd0aCA+IDFcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VNYXRjaGVkTG9naW5zUGFuZWwoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1hdGNoZWRMb2dpbnNQYW5lbFN0dWIgPSBuZXcgUGFuZWxTdHViKFxuICAgICAgICAgICAgICAgICAgICBQYW5lbFN0dWJPcHRpb25zLk1hdGNoZWRMb2dpbnMsXG4gICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50RnJhbWVJZFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXRjaGVkTG9naW5zUGFuZWxTdHViLmNyZWF0ZVBhbmVsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgY3JlYXRlTWF0Y2hlZExvZ2luc1BhbmVsSW5DZW50ZXIoc3BlY2lmaWNGcmFtZUlkOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5jbG9zZU1hdGNoZWRMb2dpbnNQYW5lbCgpO1xuICAgICAgICB0aGlzLm1hdGNoZWRMb2dpbnNQYW5lbFN0dWIgPSBuZXcgUGFuZWxTdHViKFxuICAgICAgICAgICAgUGFuZWxTdHViT3B0aW9ucy5NYXRjaGVkTG9naW5zLFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIHNwZWNpZmljRnJhbWVJZFxuICAgICAgICApO1xuICAgICAgICB0aGlzLm1hdGNoZWRMb2dpbnNQYW5lbFN0dWIuY3JlYXRlUGFuZWwoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY3JlYXRlTWF0Y2hlZExvZ2luc1BhbmVsTmVhck5vZGUodGFyZ2V0OiBIVE1MRWxlbWVudCkge1xuICAgICAgICB0aGlzLmNsb3NlTWF0Y2hlZExvZ2luc1BhbmVsKCk7XG4gICAgICAgIHRoaXMubWF0Y2hlZExvZ2luc1BhbmVsU3R1YiA9IG5ldyBQYW5lbFN0dWIoXG4gICAgICAgICAgICBQYW5lbFN0dWJPcHRpb25zLk1hdGNoZWRMb2dpbnMsXG4gICAgICAgICAgICB0YXJnZXQsXG4gICAgICAgICAgICB0aGlzLnBhcmVudEZyYW1lSWRcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5tYXRjaGVkTG9naW5zUGFuZWxTdHViLmNyZWF0ZVBhbmVsKCk7XG4gICAgICAgIHRoaXMubWF0Y2hlZExvZ2luc1BhbmVsU3R1YlJhZiA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PlxuICAgICAgICAgICAgdGhpcy51cGRhdGVNYXRjaGVkTG9naW5zUGFuZWxQb3NpdGlvbigpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIGNsb3NlTWF0Y2hlZExvZ2luc1BhbmVsKCkge1xuICAgICAgICBpZiAodGhpcy5tYXRjaGVkTG9naW5zUGFuZWxTdHViKSB0aGlzLm1hdGNoZWRMb2dpbnNQYW5lbFN0dWIuY2xvc2VQYW5lbCgpO1xuICAgICAgICB0aGlzLm1hdGNoZWRMb2dpbnNQYW5lbFN0dWIgPSBudWxsO1xuICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLm1hdGNoZWRMb2dpbnNQYW5lbFN0dWJSYWYpO1xuICAgIH1cblxuICAgIHB1YmxpYyB1cGRhdGVNYXRjaGVkTG9naW5zUGFuZWxQb3NpdGlvbigpIHtcbiAgICAgICAgdGhpcy5tYXRjaGVkTG9naW5zUGFuZWxTdHViLnVwZGF0ZUJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICB0aGlzLm1hdGNoZWRMb2dpbnNQYW5lbFN0dWJSYWYgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT5cbiAgICAgICAgICAgIHRoaXMudXBkYXRlTWF0Y2hlZExvZ2luc1BhbmVsUG9zaXRpb24oKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8vIFJlcXVpcmVzIEtlZVBhc3NSUEMgIzEwMVxuICAgIC8vIHByaXZhdGUgY2FsY3VsYXRlTGFiZWxNYXRjaFNjb3JlKG1hdGNoZWRGaWVsZDogTWF0Y2hlZEZpZWxkLCBkYXRhRmllbGQ6IEZpZWxkKSB7XG4gICAgLy8gICAgIGlmICghbWF0Y2hlZEZpZWxkLmZpZWxkLm5hbWUgfHwgIWRhdGFGaWVsZC5uYW1lKSByZXR1cm4gMDtcblxuICAgIC8vICAgICAvLyBXZSBvbmx5IHBlcnNpc3QgYSBzaW5nbGUgXCJsYWJlbFwiIHZhbHVlLCBpbXBsaWNpdGx5IHZpYSB0aGUgZGlzcGxheSBuYW1lXG4gICAgLy8gICAgIC8vIGZpZWxkLiBDb3VsZCBjaGFuZ2UgdGhpcyBpbiBmdXR1cmUgd2l0aCBhZGRpdGlvbmFsIGZlYXR1cmVzIGFkZGVkIHRvIHRoZVxuICAgIC8vICAgICAvLyBLZWVQYXNzUlBDIGxpYnJhcmllcy5cbiAgICAvLyAgICAgaWYgKFxuICAgIC8vICAgICAgICAgbWF0Y2hlZEZpZWxkLmZpZWxkLmxvY2F0b3JzWzBdLmxhYmVscy5zb21lKFxuICAgIC8vICAgICAgICAgICAgIG1hdGNoZWRGaWVsZExhYmVsID0+XG4gICAgLy8gICAgICAgICAgICAgICAgIG1hdGNoZWRGaWVsZExhYmVsLnRvTG93ZXJDYXNlKCkgPT09IGRhdGFGaWVsZC5uYW1lLnRvTG93ZXJDYXNlKClcbiAgICAvLyAgICAgICAgIClcbiAgICAvLyAgICAgKSB7XG4gICAgLy8gICAgICAgICByZXR1cm4gMTAwO1xuICAgIC8vICAgICB9XG5cbiAgICAvLyAgICAgY29uc3Qgd2Vha01hdGNoTGFiZWxzID0gW2RhdGFGaWVsZC5uYW1lLnRvTG93ZXJDYXNlKCldO1xuICAgIC8vICAgICBpZiAoZGF0YUZpZWxkLm5hbWUgIT09IGRhdGFGaWVsZC5sb2NhdG9yc1swXS5uYW1lKSB7XG4gICAgLy8gICAgICAgICB3ZWFrTWF0Y2hMYWJlbHMucHVzaChkYXRhRmllbGQubG9jYXRvcnNbMF0ubmFtZS50b0xvd2VyQ2FzZSgpKTtcbiAgICAvLyAgICAgfVxuXG4gICAgLy8gICAgIGlmIChcbiAgICAvLyAgICAgICAgIG1hdGNoZWRGaWVsZC5maWVsZC5sb2NhdG9yc1swXS5sYWJlbHMuc29tZShtYXRjaGVkRmllbGRMYWJlbCA9PiB7XG4gICAgLy8gICAgICAgICAgICAgd2Vha01hdGNoTGFiZWxzLnNvbWUoXG4gICAgLy8gICAgICAgICAgICAgICAgIGRhdGFMYWJlbCA9PiBtYXRjaGVkRmllbGRMYWJlbC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoZGF0YUxhYmVsKSA+PSAwXG4gICAgLy8gICAgICAgICAgICAgKTtcbiAgICAvLyAgICAgICAgIH0pXG4gICAgLy8gICAgICkge1xuICAgIC8vICAgICAgICAgcmV0dXJuIDMwO1xuICAgIC8vICAgICB9XG4gICAgLy8gICAgIHJldHVybiAwO1xuICAgIC8vIH1cblxuICAgIHByaXZhdGUgY2FsY3VsYXRlRmllbGRNYXRjaFNjb3JlKFxuICAgICAgICBtYXRjaGVkRmllbGQ6IE1hdGNoZWRGaWVsZCxcbiAgICAgICAgZGF0YUZpZWxkOiBGaWVsZCxcbiAgICAgICAgX2N1cnJlbnRQYWdlLCAvL1RPRE86NDogcmVtb3ZlIHBhcmFtXG4gICAgICAgIGNvbmZpZzogRmllbGRNYXRjaFNjb3JlQ29uZmlnLFxuICAgICAgICBpc1Zpc2libGU/OiBib29sZWFuXG4gICAgKSB7XG4gICAgICAgIGNvbnN0IGZvcm1GaWVsZCA9IG1hdGNoZWRGaWVsZC5maWVsZDtcbiAgICAgICAgLy8gRGVmYXVsdCBzY29yZSBpcyAxIHNvIHRoYXQgYmFkIG1hdGNoZXMgd2hpY2ggYXJlIGF0IGxlYXN0IHRoZSBjb3JyZWN0IHR5cGVcbiAgICAgICAgLy8gaGF2ZSBhIGNoYW5jZSBvZiBiZWluZyBzZWxlY3RlZCBpZiBubyBnb29kIG1hdGNoZXMgYXJlIGZvdW5kXG4gICAgICAgIGxldCBzY29yZSA9IDE7XG5cbiAgICAgICAgLy8gRG8gbm90IGFsbG93IGFueSBtYXRjaCBpZiBmaWVsZCB0eXBlcyBhcmUgc2lnbmlmaWNhbnRseSBtaXNtYXRjaGVkIChlLmcuIGNoZWNrYm94IHZzIHRleHQgZmllbGQpXG4gICAgICAgIGlmIChmb3JtRmllbGQudHlwZSAhPT0gZGF0YUZpZWxkLnR5cGUpIHJldHVybiAwO1xuXG4gICAgICAgIC8vIHNjb3JlICs9IHRoaXMuY2FsY3VsYXRlTGFiZWxNYXRjaFNjb3JlKG1hdGNoZWRGaWVsZCwgZGF0YUZpZWxkKTtcblxuICAgICAgICAvLyBJZiBmaWVsZCBJRHMgbWF0Y2ggKysrKytcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgZm9ybUZpZWxkLmxvY2F0b3JzWzBdLmlkICE9IG51bGwgJiZcbiAgICAgICAgICAgIGZvcm1GaWVsZC5sb2NhdG9yc1swXS5pZCAhPSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIGZvcm1GaWVsZC5sb2NhdG9yc1swXS5pZCAhPSBcIlwiICYmXG4gICAgICAgICAgICBmb3JtRmllbGQubG9jYXRvcnNbMF0uaWQgPT0gZGF0YUZpZWxkLmxvY2F0b3JzWzBdLmlkXG4gICAgICAgICkge1xuICAgICAgICAgICAgc2NvcmUgKz0gNTA7XG4gICAgICAgIH0gZWxzZSBpZiAoY29uZmlnLnB1bmlzaFdyb25nSURBbmROYW1lICYmIGRhdGFGaWVsZC5sb2NhdG9yc1swXS5pZCkge1xuICAgICAgICAgICAgc2NvcmUgLT0gNTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIGZpZWxkIG5hbWVzIG1hdGNoICsrKytcbiAgICAgICAgLy8gKFdlIGRvIG5vdCB0cmVhdCBJRCBhbmQgTkFNRSBhcyBtdXR1YWxseSBleGNsdXNpdmUgYmVjYXVzZSBzb21lIGJhZGx5IHdyaXR0ZW5cbiAgICAgICAgLy8gd2Vic2l0ZXMgbWlnaHQgaGF2ZSBkdXBsaWNhdGUgSURzIGJ1dCBkaWZmZXJlbnQgbmFtZXMgc28gdGhpcyBjb21iaW5lZCBhcHByb2FjaFxuICAgICAgICAvLyBtaWdodCBhbGxvdyB0aGVtIHRvIHdvcmsgY29ycmVjdGx5KVxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBmb3JtRmllbGQubG9jYXRvcnNbMF0ubmFtZSAhPSBudWxsICYmXG4gICAgICAgICAgICBmb3JtRmllbGQubG9jYXRvcnNbMF0ubmFtZSAhPSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIGZvcm1GaWVsZC5sb2NhdG9yc1swXS5uYW1lICE9IFwiXCIgJiZcbiAgICAgICAgICAgIGZvcm1GaWVsZC5sb2NhdG9yc1swXS5uYW1lID09IGRhdGFGaWVsZC5sb2NhdG9yc1swXS5uYW1lXG4gICAgICAgICkge1xuICAgICAgICAgICAgc2NvcmUgKz0gNDA7XG4gICAgICAgIH0gZWxzZSBpZiAoY29uZmlnLnB1bmlzaFdyb25nSURBbmROYW1lICYmIGRhdGFGaWVsZC5sb2NhdG9yc1swXS5uYW1lKSB7XG4gICAgICAgICAgICBzY29yZSAtPSA1O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmFkaW8gYnV0dG9ucyBoYXZlIHRoZWlyIHZhbHVlcyBzZXQgYnkgdGhlIHdlYnNpdGUgYW5kIGhlbmNlIGNhbiBwcm92aWRlXG4gICAgICAgIC8vIGEgdXNlZnVsIGN1ZSB3aGVuIGJvdGggaWQgYW5kIG5hbWUgbWF0Y2hpbmcgZmFpbHNcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgZm9ybUZpZWxkLmxvY2F0b3JzWzBdLnR5cGUgPT09IFwicmFkaW9cIiAmJlxuICAgICAgICAgICAgZm9ybUZpZWxkLnZhbHVlICE9IG51bGwgJiZcbiAgICAgICAgICAgIGZvcm1GaWVsZC52YWx1ZSAhPSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIGZvcm1GaWVsZC52YWx1ZSAhPSBcIlwiICYmXG4gICAgICAgICAgICBmb3JtRmllbGQudmFsdWUgPT0gZGF0YUZpZWxkLnZhbHVlXG4gICAgICAgICkge1xuICAgICAgICAgICAgc2NvcmUgKz0gMzA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBpc1Zpc2libGUgPT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgdGhpcy5mb3JtVXRpbHMuaXNET01FbGVtZW50VmlzaWJsZShtYXRjaGVkRmllbGQuRE9NZWxlbWVudClcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBpc1Zpc2libGUgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgc2NvcmUgKz0gaXNWaXNpYmxlID8gMzUgOiAwO1xuXG4gICAgICAgIHJldHVybiBzY29yZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGZpbGxNYXRjaGVkRmllbGRzKFxuICAgICAgICBmaWVsZFNjb3JlTWF0cml4OiBTY29yZU1hdHJpeFtdLFxuICAgICAgICBkYXRhRmllbGRzOiBGaWVsZFtdLFxuICAgICAgICBmb3JtRmllbGRzOiBNYXRjaGVkRmllbGRbXSxcbiAgICAgICAgYXV0b21hdGVkOiBib29sZWFuXG4gICAgKSB7XG4gICAgICAgIC8vIFdlIHdhbnQgdG8gbWFrZSBzdXJlIGVhY2ggZGF0YSBmaWVsZCBpcyBtYXRjaGVkIHRvIG9ubHkgb25lIGZvcm0gZmllbGQgYnV0IHdlXG4gICAgICAgIC8vIGRvbid0IGtub3cgd2hpY2ggZmllbGQgd2lsbCBiZSB0aGUgYmVzdCBtYXRjaCBhbmQgd2UgZG9uJ3Qgd2FudCB0byBpZ25vcmVcbiAgICAgICAgLy8gbGVzcyBhY2N1cmF0ZSBtYXRjaGVzIGp1c3QgYmVjYXVzZSB0aGV5IGhhcHBlbiB0byBhcHBlYXIgbGF0ZXIuXG5cbiAgICAgICAgLy8gV2UgaGF2ZSBhIG1hdHJpeCBvZiBvYmplY3RzIHJlcHJlc2VudGluZyBlYWNoIHBvc3NpYmxlIGNvbWJpbmF0aW9uIG9mIGRhdGEgZmllbGRcbiAgICAgICAgLy8gYW5kIGZvcm0gZmllbGQgYW5kIHRoZSBzY29yZSBmb3IgdGhhdCBtYXRjaC5cbiAgICAgICAgLy8gV2UgY2hvb3NlIHdoYXQgdG8gZmlsbCBieSBzb3J0aW5nIHRoYXQgbGlzdCBieSBzY29yZS5cbiAgICAgICAgLy8gQWZ0ZXIgZmlsbGluZyBhIGZpZWxkIHdlIHJlbW92ZSBhbGwgb2JqZWN0cyBmcm9tIHRoZSBsaXN0IHdoaWNoIGFyZSBmb3IgdGhlXG4gICAgICAgIC8vIGRhdGEgZmllbGQgd2UganVzdCBmaWxsZWQgaW4gYW5kIHRoZSBmb3JtIGZpZWxkIHdlIGZpbGxlZCBpbi5cblxuICAgICAgICAvLyBUaGlzIG1lYW5zIHdlIGFsd2F5cyBmaWxsIGVhY2ggZm9ybSBmaWVsZCBvbmx5IG9uY2UsIHdpdGggdGhlIGJlc3QgbWF0Y2hcbiAgICAgICAgLy8gc2VsZWN0ZWQgZnJvbSBhbGwgZGF0YSBmaWVsZHMgdGhhdCBoYXZlbid0IGFscmVhZHkgYmVlbiBzZWxlY3RlZCBmb3IgYW5vdGhlciBmb3JtIGZpZWxkXG5cbiAgICAgICAgLy8gVGhlIGFib3ZlIGFsZ29yaXRobSBjb3VsZCBtYXliZSBiZSB0d2Vha2VkIHNsaWdodGx5IGluIG9yZGVyIHRvIGF1dG8tZmlsbFxuICAgICAgICAvLyBhIFwiY2hhbmdlIHBhc3N3b3JkXCIgZm9ybSBpZiB3ZSBldmVyIG1hbmFnZSB0byBtYWtlIHRoYXQgYXV0b21hdGVkXG5cbiAgICAgICAgLy8gKHNjb3JlIGlzIHJlZHVjZWQgYnkgb25lIGZvciBlYWNoIHBvc2l0aW9uIHdlIGZpbmQgaW4gdGhlIGZvcm0gLSB0aGlzIGdpdmVzXG4gICAgICAgIC8vIGEgc2xpZ2h0IHByaW9yaXR5IHRvIGZpZWxkcyBhdCB0aGUgdG9wIG9mIGEgZm9ybSB3aGljaCBjYW4gYmUgdXNlZnVsIG9jY2FzaW9uYWxseSlcblxuICAgICAgICBmaWVsZFNjb3JlTWF0cml4LnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgIHJldHVybiBiLnNjb3JlIC0gYS5zY29yZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gUmVtZW1iZXIgd2hhdCB3ZSd2ZSBmaWxsZWQgaW4gc28gd2UgY2FuIG1ha2UgbW9yZSBhY2N1cmF0ZSBkZWNpc2lvbnMgd2hlblxuICAgICAgICAvLyB0aGUgZm9ybSBpcyBzdWJtaXR0ZWQgbGF0ZXIuIFdlIHJlc2lzdCB0aGUgdXJnZSB0aGUgaW5kZXggYnkgZWxlbWVudCBJRCBvclxuICAgICAgICAvLyB0aGUgRE9NZWxlbWVudCBpdHNlbGYgYmVjYXVzZSBzb21lIHdlYnNpdGVzIGRvIG5vdCBzcGVjaWZ5IGFuIElEIGFuZCBzb21lXG4gICAgICAgIC8vIG1heSByZW1vdmUgdGhlIERPTWVsZW1lbnQgYmVmb3JlIHdlIHN1Ym1pdCB0aGUgZm9ybSAoc29tZXRpbWVzIHVuZGVyIHVzZXJcbiAgICAgICAgLy8gZGlyZWN0aW9uIGJ1dCBvY2Nhc2lvbmFsbHkgYXV0b21hdGljYWxseSB0b28pXG4gICAgICAgIGNvbnN0IGZpbGxlZEZpZWxkczogRmlsbGVkRmllbGRbXSA9IFtdO1xuXG4gICAgICAgIC8vIEtlZXAgZmlsbGluZyBpbiBmaWVsZHMgdW50aWwgd2UgZmluZCBubyBtb3JlIHdpdGggYSBwb3NpdGl2ZSBzY29yZVxuICAgICAgICB3aGlsZSAoZmllbGRTY29yZU1hdHJpeC5sZW5ndGggPiAwICYmIGZpZWxkU2NvcmVNYXRyaXhbMF0uc2NvcmUgPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBmZmkgPSBmaWVsZFNjb3JlTWF0cml4WzBdLmZvcm1GaWVsZEluZGV4O1xuICAgICAgICAgICAgY29uc3QgZGZpID0gZmllbGRTY29yZU1hdHJpeFswXS5kYXRhRmllbGRJbmRleDtcbiAgICAgICAgICAgIGNvbnN0IGZvcm1GaWVsZCA9IGZvcm1GaWVsZHNbZmZpXTtcbiAgICAgICAgICAgIGNvbnN0IGRhdGFGaWVsZCA9IGRhdGFGaWVsZHNbZGZpXTtcbiAgICAgICAgICAgIGNvbnN0IGRvbUVsZW1lbnQgPSBmb3JtRmllbGQuRE9NZWxlbWVudDtcblxuICAgICAgICAgICAgY29uc3QgY3VycmVudFZhbHVlID0gdGhpcy5nZXRGb3JtRmllbGRDdXJyZW50VmFsdWUoXG4gICAgICAgICAgICAgICAgZG9tRWxlbWVudCxcbiAgICAgICAgICAgICAgICBmb3JtRmllbGQuZmllbGQubG9jYXRvcnNbMF0udHlwZVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGF1dG9tYXRlZCAmJlxuICAgICAgICAgICAgICAgIGN1cnJlbnRWYWx1ZSAmJlxuICAgICAgICAgICAgICAgIGN1cnJlbnRWYWx1ZSAhPT0gKGRvbUVsZW1lbnQgYXMgYW55KS5rZWVJbml0aWFsRGV0ZWN0ZWRWYWx1ZVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5Mb2dnZXIuaW5mbyhcbiAgICAgICAgICAgICAgICAgICAgXCJOb3QgZmlsbGluZyBmaWVsZCBiZWNhdXNlIGl0J3Mgbm90IGVtcHR5IGFuZCB3YXMgZWRpdGVkIGJ5IHVzZXIgc2luY2UgbGFzdCBsb2FkL2ZpbGxcIlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgIGF1dG9tYXRlZCAmJlxuICAgICAgICAgICAgICAgIGN1cnJlbnRWYWx1ZSAmJlxuICAgICAgICAgICAgICAgICFjb25maWdNYW5hZ2VyLmN1cnJlbnQuYXV0b0ZpbGxGaWVsZHNXaXRoRXhpc3RpbmdWYWx1ZVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5Mb2dnZXIuaW5mbyhcbiAgICAgICAgICAgICAgICAgICAgXCJOb3QgZmlsbGluZyBmaWVsZCBiZWNhdXNlIGl0J3Mgbm90IGVtcHR5IGFuZCB1c2VyIHByZWZlcmVuY2UgaXMgdG8gcHJldmVudCBhdXRvbWF0aWMgZmlsbFwiXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5Mb2dnZXIuaW5mbyhcbiAgICAgICAgICAgICAgICAgICAgXCJXZSB3aWxsIHBvcHVsYXRlIGZpZWxkIFwiICsgZmZpICsgXCIgKGlkOlwiICsgZm9ybUZpZWxkLmZpZWxkLmxvY2F0b3JzWzBdLmlkICsgXCIpXCJcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHRoaXMuZmlsbEFTaW5nbGVGaWVsZChcbiAgICAgICAgICAgICAgICAgICAgZG9tRWxlbWVudCxcbiAgICAgICAgICAgICAgICAgICAgZm9ybUZpZWxkLmZpZWxkLmxvY2F0b3JzWzBdLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgIGRhdGFGaWVsZC52YWx1ZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZpbGxlZEZpZWxkcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBpZDogZm9ybUZpZWxkLmZpZWxkLmxvY2F0b3JzWzBdLmlkLFxuICAgICAgICAgICAgICAgIERPTWVsZW1lbnQ6IGRvbUVsZW1lbnQsXG4gICAgICAgICAgICAgICAgbmFtZTogZm9ybUZpZWxkLmZpZWxkLmxvY2F0b3JzWzBdLm5hbWUsXG4gICAgICAgICAgICAgICAgdmFsdWU6IGRhdGFGaWVsZC52YWx1ZVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGZpZWxkU2NvcmVNYXRyaXggPSBmaWVsZFNjb3JlTWF0cml4LmZpbHRlcihmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmRhdGFGaWVsZEluZGV4ICE9IGRmaSAmJiBlbGVtZW50LmZvcm1GaWVsZEluZGV4ICE9IGZmaTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBmaWVsZFNjb3JlTWF0cml4LnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYi5zY29yZSAtIGEuc2NvcmU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmlsbGVkRmllbGRzO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0Rm9ybUZpZWxkQ3VycmVudFZhbHVlKFxuICAgICAgICBkb21FbGVtZW50OiBIVE1MSW5wdXRFbGVtZW50IHwgSFRNTFNlbGVjdEVsZW1lbnQsXG4gICAgICAgIGZpZWxkVHlwZTogc3RyaW5nXG4gICAgKSB7XG4gICAgICAgIGxldCBjdXJyZW50VmFsdWUgPSBkb21FbGVtZW50LnZhbHVlO1xuICAgICAgICBpZiAoZG9tRWxlbWVudCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQgJiYgZmllbGRUeXBlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgIGlmIChkb21FbGVtZW50LmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50VmFsdWUgPSBcIktFRUZPWF9DSEVDS0VEX0ZMQUdfVFJVRVwiO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50VmFsdWUgPSBcIktFRUZPWF9DSEVDS0VEX0ZMQUdfRkFMU0VcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY3VycmVudFZhbHVlO1xuICAgIH1cblxuICAgIHByaXZhdGUgZmlsbEFTaW5nbGVGaWVsZChcbiAgICAgICAgZG9tRWxlbWVudDogSFRNTElucHV0RWxlbWVudCB8IEhUTUxTZWxlY3RFbGVtZW50LFxuICAgICAgICBmaWVsZFR5cGU6IHN0cmluZyxcbiAgICAgICAgdmFsdWU6IHN0cmluZ1xuICAgICkge1xuICAgICAgICBpZiAoZmllbGRUeXBlID09IFwic2VsZWN0LW9uZVwiKSB7XG4gICAgICAgICAgICBkb21FbGVtZW50LnZhbHVlID0gdmFsdWU7XG4gICAgICAgIH0gZWxzZSBpZiAoZG9tRWxlbWVudCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQgJiYgZmllbGRUeXBlID09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgaWYgKHZhbHVlID09IFwiS0VFRk9YX0NIRUNLRURfRkxBR19UUlVFXCIpIGRvbUVsZW1lbnQuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgICBlbHNlIGRvbUVsZW1lbnQuY2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICB9IGVsc2UgaWYgKGRvbUVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50ICYmIGZpZWxkVHlwZSA9PSBcInJhZGlvXCIpIHtcbiAgICAgICAgICAgIGRvbUVsZW1lbnQuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkb21FbGVtZW50LnZhbHVlID0gdmFsdWU7XG4gICAgICAgIH1cblxuICAgICAgICAvL1RPRE86NDogSW52ZXN0aWdhdGUgYW5kIGRvY3VtZW50IHdoeSB3ZSdyZSBub3QgdXNpbmcgZGF0YSBhdHRyaWJ1dGVzIHRvIHN0b3JlIHRoaXMgc3RyaW5nIGluIHRoZSBET01cbiAgICAgICAgKGRvbUVsZW1lbnQgYXMgYW55KS5rZWVJbml0aWFsRGV0ZWN0ZWRWYWx1ZSA9IHZhbHVlO1xuXG4gICAgICAgIGRvbUVsZW1lbnQuZGlzcGF0Y2hFdmVudChcbiAgICAgICAgICAgIG5ldyBVSUV2ZW50KFwiaW5wdXRcIiwge1xuICAgICAgICAgICAgICAgIHZpZXc6IHdpbmRvdyxcbiAgICAgICAgICAgICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgICAgICAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICAgIGRvbUVsZW1lbnQuZGlzcGF0Y2hFdmVudChcbiAgICAgICAgICAgIG5ldyBVSUV2ZW50KFwiY2hhbmdlXCIsIHtcbiAgICAgICAgICAgICAgICB2aWV3OiB3aW5kb3csXG4gICAgICAgICAgICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgZmlsbE1hbnlGb3JtRmllbGRzKFxuICAgICAgICBmb3JtRmllbGRzOiBNYXRjaGVkRmllbGRbXSxcbiAgICAgICAgZGF0YUZpZWxkczogRmllbGRbXSxcbiAgICAgICAgY3VycmVudFBhZ2UsXG4gICAgICAgIHNjb3JlQ29uZmlnOiBGaWVsZE1hdGNoU2NvcmVDb25maWcsXG4gICAgICAgIGF1dG9tYXRlZDogYm9vbGVhblxuICAgICkge1xuICAgICAgICB0aGlzLkxvZ2dlci5kZWJ1ZyhcIl9maWxsTWFueUZvcm1GaWVsZHMgc3RhcnRlZFwiKTtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBmb3JtRmllbGRzID09IG51bGwgfHxcbiAgICAgICAgICAgIGZvcm1GaWVsZHMgPT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICBkYXRhRmllbGRzID09IG51bGwgfHxcbiAgICAgICAgICAgIGRhdGFGaWVsZHMgPT0gdW5kZWZpbmVkXG4gICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5Mb2dnZXIuZGVidWcoXCJXZSd2ZSByZWNlaXZlZCB0aGUgZGF0YSB3ZSBuZWVkXCIpO1xuXG4gICAgICAgIHRoaXMuTG9nZ2VyLmluZm8oXCJGaWxsaW5nIGZvcm0gZmllbGRzIGZvciBwYWdlIFwiICsgY3VycmVudFBhZ2UpO1xuXG4gICAgICAgIC8vIHdlIHRyeSB0byBmaWxsIGV2ZXJ5IGZvcm0gZmllbGQuIFdlIHRyeSB0byBtYXRjaCBieSBpZCBmaXJzdCBhbmQgdGhlbiBuYW1lIGJlZm9yZSBqdXN0IGd1ZXNzaW5nLlxuICAgICAgICAvLyBHZW5lcmFsbHkgd2UnbGwgb25seSBmaWxsIGlmIHRoZSBtYXRjaGVkIGZpZWxkIGlzIG9mIHRoZSBzYW1lIHR5cGUgYXMgdGhlIGZvcm0gZmllbGQgYnV0XG4gICAgICAgIC8vIHdlIGFyZSBmbGV4aWJsZSBSRSB0ZXh0IGFuZCB1c2VybmFtZSBmaWVsZHMgYmVjYXVzZSB0aGF0J3MgYW4gYXJ0aWZpY2lhbCBkaWZmZXJlbmNlXG4gICAgICAgIC8vIGZvciB0aGUgc2FrZSBvZiB0aGUgS2VlIHBhc3N3b3JkIG1hbmFnZW1lbnQgc29mdHdhcmUuIEhvd2V2ZXIsIHVzZXJuYW1lcyB3aWxsIGJlIGNob3NlbiBhYm92ZVxuICAgICAgICAvLyB0ZXh0IGZpZWxkcyBpZiBhbGwgZWxzZSBpcyBlcXVhbFxuICAgICAgICBjb25zdCBmaWVsZFNjb3JlTWF0cml4ID0gW107XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmb3JtRmllbGRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGRhdGFGaWVsZHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzY29yZSA9IHRoaXMuY2FsY3VsYXRlRmllbGRNYXRjaFNjb3JlKFxuICAgICAgICAgICAgICAgICAgICBmb3JtRmllbGRzW2ldLFxuICAgICAgICAgICAgICAgICAgICBkYXRhRmllbGRzW2pdLFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50UGFnZSxcbiAgICAgICAgICAgICAgICAgICAgc2NvcmVDb25maWdcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHRoaXMuTG9nZ2VyLmRlYnVnKFxuICAgICAgICAgICAgICAgICAgICBcIlN1aXRhYmlsaXR5IG9mIHB1dHRpbmcgZGF0YSBmaWVsZCBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBqICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiIGludG8gZm9ybSBmaWVsZCBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBpICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiIChpZDogXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUZpZWxkc1tpXS5maWVsZC5sb2NhdG9yc1swXS5pZCArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIikgaXMgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcmVcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGZpZWxkU2NvcmVNYXRyaXgucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHNjb3JlOiBzY29yZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YUZpZWxkSW5kZXg6IGosXG4gICAgICAgICAgICAgICAgICAgIGZvcm1GaWVsZEluZGV4OiBpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5maWxsTWF0Y2hlZEZpZWxkcyhmaWVsZFNjb3JlTWF0cml4LCBkYXRhRmllbGRzLCBmb3JtRmllbGRzLCBhdXRvbWF0ZWQpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdE1hdGNoUmVzdWx0KGJlaGF2aW91cjogRmluZE1hdGNoZXNCZWhhdmlvdXIpIHtcbiAgICAgICAgLy9UT0RPOjQ6ICM2IGNyZWF0ZSBuZXcgb2JqZWN0IG1pZ2h0IGNhdXNlIGlzc3VlcyB3aXRoIG11bHRpLXBhZ2Ugb3Igc3VibWl0IGJlaGF2aW91cj8gaWYgbm90LCB0aGlzIHdvdWxkIGJlIG5lYXRlcjpcbiAgICAgICAgLy8gbWF0Y2hSZXN1bHQgPSBuZXcgTWF0Y2hSZXN1bHQoKTtcbiAgICAgICAgdGhpcy5tYXRjaFJlc3VsdC5VVUlEID0gXCJcIjtcbiAgICAgICAgdGhpcy5tYXRjaFJlc3VsdC5lbnRyaWVzID0gW107XG4gICAgICAgIHRoaXMubWF0Y2hSZXN1bHQubW9zdFJlbGV2YW50Rm9ybUluZGV4ID0gbnVsbDtcblxuICAgICAgICB0aGlzLm1hdGNoUmVzdWx0Lm11c3RBdXRvRmlsbEZvcm0gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5tYXRjaFJlc3VsdC5jYW5ub3RBdXRvRmlsbEZvcm0gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5tYXRjaFJlc3VsdC5tdXN0QXV0b1N1Ym1pdEZvcm0gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5tYXRjaFJlc3VsdC5jYW5ub3RBdXRvU3VibWl0Rm9ybSA9IGZhbHNlO1xuXG4gICAgICAgIGlmIChiZWhhdmlvdXIuVVVJRCAhPSB1bmRlZmluZWQgJiYgYmVoYXZpb3VyLlVVSUQgIT0gbnVsbCAmJiBiZWhhdmlvdXIuVVVJRCAhPSBcIlwiKSB7XG4gICAgICAgICAgICAvLyBLZWVwIGEgcmVjb3JkIG9mIHRoZSBzcGVjaWZpYyBlbnRyeSB3ZSBhcmUgZ29pbmcgdG8gc2VhcmNoIGZvciAod2UgZGVsZXRlXG4gICAgICAgICAgICAvLyB0aGUgdGFic3RhdGUgYmVsb3cgYW5kIHJlLWNyZWF0ZSBpdCBkdXJpbmcgZm9ybSBmaWxsKVxuICAgICAgICAgICAgdGhpcy5tYXRjaFJlc3VsdC5VVUlEID0gYmVoYXZpb3VyLlVVSUQ7XG4gICAgICAgICAgICB0aGlzLm1hdGNoUmVzdWx0LmRiRmlsZU5hbWUgPSBiZWhhdmlvdXIuZGJGaWxlTmFtZTtcblxuICAgICAgICAgICAgLy8gd2Ugd2FudCB0byBmaWxsIHRoZSBmb3JtIHdpdGggdGhpcyBkYXRhXG4gICAgICAgICAgICB0aGlzLm1hdGNoUmVzdWx0Lm11c3RBdXRvRmlsbEZvcm0gPSB0cnVlO1xuXG4gICAgICAgICAgICBpZiAoYmVoYXZpb3VyLm11c3RBdXRvU3VibWl0Rm9ybSkgdGhpcy5tYXRjaFJlc3VsdC5tdXN0QXV0b1N1Ym1pdEZvcm0gPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5tYXRjaFJlc3VsdC5kb2MgPSB3aW5kb3cuZG9jdW1lbnQ7XG5cbiAgICAgICAgdGhpcy5tYXRjaFJlc3VsdC5mb3JtUmVhZHlGb3JTdWJtaXQgPSBmYWxzZTsgLy8gdHJhY2tzIHdoZXRoZXIgd2UgYWN0dWFsbHkgYXV0by1maWxsIG9uIHRoaXMgcGFnZVxuICAgICAgICB0aGlzLm1hdGNoUmVzdWx0LmF1dG9maWxsT25TdWNjZXNzID0gYmVoYXZpb3VyLmF1dG9maWxsT25TdWNjZXNzO1xuICAgICAgICB0aGlzLm1hdGNoUmVzdWx0LmF1dG9zdWJtaXRPblN1Y2Nlc3MgPSBiZWhhdmlvdXIuYXV0b3N1Ym1pdE9uU3VjY2VzcztcbiAgICAgICAgdGhpcy5tYXRjaFJlc3VsdC5ub3RpZnlVc2VyT25TdWNjZXNzID0gYmVoYXZpb3VyLm5vdGlmeVVzZXJPblN1Y2Nlc3M7XG4gICAgICAgIHRoaXMubWF0Y2hSZXN1bHQud3JhcHBlcnMgPSBbXTtcbiAgICAgICAgdGhpcy5tYXRjaFJlc3VsdC5hbGxNYXRjaGluZ0xvZ2lucyA9IFtdO1xuICAgICAgICB0aGlzLm1hdGNoUmVzdWx0LmZvcm1SZWxldmFuY2VTY29yZXMgPSBbXTtcbiAgICAgICAgdGhpcy5tYXRjaFJlc3VsdC5zdWJtaXRUYXJnZXRzID0gW107XG4gICAgICAgIHRoaXMubWF0Y2hSZXN1bHQudXNlcm5hbWVJbmRleEFycmF5ID0gW107XG4gICAgICAgIHRoaXMubWF0Y2hSZXN1bHQucGFzc3dvcmRGaWVsZHNBcnJheSA9IFtdO1xuICAgICAgICB0aGlzLm1hdGNoUmVzdWx0Lm90aGVyRmllbGRzQXJyYXkgPSBbXTtcbiAgICAgICAgdGhpcy5tYXRjaFJlc3VsdC5yZXF1ZXN0Q291bnQgPSAwO1xuICAgICAgICB0aGlzLm1hdGNoUmVzdWx0LnJlc3BvbnNlQ291bnQgPSAwO1xuICAgICAgICB0aGlzLm1hdGNoUmVzdWx0LnJlcXVlc3RJZHMgPSBbXTsgLy8gdGhlIEpTT05SUEMgcmVxdWVzdCBJZHMgdGhhdCByZWZlcmVuY2UgdGhpcyBtYXRjaFJlc3VsdCBvYmplY3QgKHRvIGFsbG93IGRlbGV0aW9uIGFmdGVyIGFzeW5jIGNhbGxiYWNrIHByb2Nlc3NpbmcpXG4gICAgfVxuXG4gICAgLyogRXhwZWN0cyB0aGlzIGRhdGEgb2JqZWN0OlxuICAgIHtcbiAgICAgICAgYXV0b2ZpbGxPblN1Y2Nlc3M6IHRydWUsIC8vIFRoaXMgd29uJ3Qgb3ZlcnJpZGUgb3RoZXIgY29uZmlndXJhdGlvbiBvcHRpb25zIGlmIHRydWUgYnV0IGlmIGZhbHNlIGl0IHdpbGwuXG4gICAgICAgIGF1dG9zdWJtaXRPblN1Y2Nlc3M6IHRydWUsIC8vIFRoaXMgd29uJ3Qgb3ZlcnJpZGUgb3RoZXIgY29uZmlndXJhdGlvbiBvcHRpb25zIGlmIHRydWUgYnV0IGlmIGZhbHNlIGl0IHdpbGwuXG4gICAgICAgIG5vdGlmeVVzZXJPblN1Y2Nlc3M6IHRydWUsIC8vIGUuZy4gdXNlZCB3aGVuIHBlcmlvZGljIGZvcm0gcG9sbGluZyBmaW5kcyBhIGZvcm0gYWZ0ZXIgdGhlIHBhZ2UgaGFzIGxvYWRlZC5cbiAgICAgICAgLi4uIG90aGVyc1xuICAgIH1cbiAgICAqL1xuICAgIHB1YmxpYyBmaW5kTWF0Y2hlc0luVGhpc0ZyYW1lKGJlaGF2aW91cjogRmluZE1hdGNoZXNCZWhhdmlvdXIgPSB7fSkge1xuICAgICAgICB0aGlzLnNlbWFudGljV2hpdGVsaXN0Q2FjaGUgPSB7fTtcbiAgICAgICAgdGhpcy5zZW1hbnRpY0JsYWNrbGlzdENhY2hlID0ge307XG5cbiAgICAgICAgLy8gV2hldGhlciBvciBub3QgdGhpcyB3YXMgaW52b2tlZCBhcyBhIHJlc3VsdCBvZiBhIERPTSBtdXRhdGlvbiwgd2Ugd29uJ3QgbmVlZCB0aGUgdGltZXIgdG8gZmlyZSBhbnltb3JlXG4gICAgICAgIGlmICh0aGlzLmZvcm1GaW5kZXJUaW1lciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZm9ybUZpbmRlclRpbWVyKTtcbiAgICAgICAgICAgIHRoaXMuZm9ybUZpbmRlclRpbWVyID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh3aW5kb3cuZG9jdW1lbnQuZm9ybXMubGVuZ3RoID4gNTApIHtcbiAgICAgICAgICAgIHRoaXMuTG9nZ2VyLmRlYnVnKFxuICAgICAgICAgICAgICAgIFwiVG9vIG1hbnkgZm9ybXMgb24gdGhpcyBwYWdlLiBBc3N1bWluZyBpdCBpcyBub3QgYSBsb2dpbiBwYWdlXCIgK1xuICAgICAgICAgICAgICAgICAgICBcIiBhbmQgYXZvaWRpbmcgbG9va2luZyBmb3IgbG9naW4gZm9ybXMgaW4gb3JkZXIgdG8gYXZvaWQgcGVyZm9ybWFuY2UgaW1wYWN0LlwiXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2FuJ3QgYXBwZW5kIHRvIGEgSFRNTENvbGxlY3Rpb24gYnV0IGFsbCB3ZSByZWFsbHkgdXNlIGl0IGZvciBpcyBpdGVyYXRpb25cbiAgICAgICAgLy8gYW5kIGxlbmd0aCBzbyBjb252ZXJ0aW5nIHRvIGFuIGFycmF5IHNvbWV0aW1lcyB3aWxsIGNhdXNlIG5vIGlzc3Vlc1xuICAgICAgICBsZXQgZm9ybXMgPSBuZXcgQXJyYXk8SFRNTEZvcm1FbGVtZW50PigpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdpbmRvdy5kb2N1bWVudC5mb3Jtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZm9ybXMucHVzaCh3aW5kb3cuZG9jdW1lbnQuZm9ybXMuaXRlbShpKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBGb3JjaW5nIGEgc2NhbiBmb3Igb3JwaGFuZWQgZmllbGRzIG9uIGFsbCBwYWdlcy4gTWF5IG5lZWQgdG8gY2hhbmdlXG4gICAgICAgIC8vIHRoaXMgaWYgcmVhbCB3b3JsZCBwZXJmb3JtYW5jZSBpcyB0b28gc2xvdy5cbiAgICAgICAgY29uc3QgcHNldWRvRm9ybSA9IHRoaXMuc2NhbkZvck9ycGhhbmVkRmllbGRzKHdpbmRvdy5kb2N1bWVudCk7XG4gICAgICAgIGlmIChwc2V1ZG9Gb3JtKSB7XG4gICAgICAgICAgICBmb3JtcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZvcm1zKTtcbiAgICAgICAgICAgIGZvcm1zLnB1c2gocHNldWRvRm9ybSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWZvcm1zIHx8IGZvcm1zLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICB0aGlzLkxvZ2dlci5pbmZvKFwiTm8gZm9ybXMgZm91bmQgb24gdGhpcyBwYWdlLlwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwod2luZG93LmRvY3VtZW50LlVSTCk7XG4gICAgICAgIHVybC5ob3N0bmFtZSA9IHB1bnljb2RlLnRvVW5pY29kZSh1cmwuaG9zdG5hbWUpO1xuXG4gICAgICAgIHRoaXMuTG9nZ2VyLmluZm8oXG4gICAgICAgICAgICBcIkZpbmRpbmcgbWF0Y2hlcyBpbiBhIGRvY3VtZW50LiByZWFkeVN0YXRlOiBcIiArIHdpbmRvdy5kb2N1bWVudC5yZWFkeVN0YXRlXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5pbml0TWF0Y2hSZXN1bHQoYmVoYXZpb3VyKTtcbiAgICAgICAgdGhpcy5tYXRjaFJlc3VsdC5mb3JtcyA9IGZvcm1zO1xuXG4gICAgICAgIGNvbnN0IGNvbmYgPSBjb25maWdNYW5hZ2VyLnNpdGVDb25maWdGb3IodXJsLmhyZWYpO1xuXG4gICAgICAgIHRoaXMuTG9nZ2VyLmRlYnVnKFwiZmluZE1hdGNoZXMgcHJvY2Vzc2luZyBcIiArIGZvcm1zLmxlbmd0aCArIFwiIGZvcm1zXCIpO1xuXG4gICAgICAgIGxldCBzZWFyY2hTZW50VG9LZWVQYXNzID0gZmFsc2U7XG5cbiAgICAgICAgLy8gRm9yIGV2ZXJ5IGZvcm0sIGluY2x1ZGluZyBhbnkgcHNldWRvIGZvcm1zIHdlIGNyZWF0ZWQgZWFybGllclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZvcm1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBmb3JtID0gZm9ybXNbaV07XG4gICAgICAgICAgICB0aGlzLm1hdGNoUmVzdWx0LmVudHJpZXNbaV0gPSBbXTtcblxuICAgICAgICAgICAgLy8gdGhlIG92ZXJhbGwgcmVsZXZhbmNlIG9mIHRoaXMgZm9ybSBpcyB0aGUgbWF4aW11bSBvZiBpdCdzXG4gICAgICAgICAgICAvLyBtYXRjaGluZyBlbnRyaWVzIChzbyB3ZSBmaWxsIHRoZSBtb3N0IHJlbGV2YW50IGZvcm0pXG4gICAgICAgICAgICB0aGlzLm1hdGNoUmVzdWx0LmZvcm1SZWxldmFuY2VTY29yZXNbaV0gPSAwO1xuXG4gICAgICAgICAgICB0aGlzLkxvZ2dlci5kZWJ1ZyhcImFib3V0IHRvIGdldCBmb3JtIGZpZWxkc1wiKTtcbiAgICAgICAgICAgIGxldCBzY2FuUmVzdWx0OiB7XG4gICAgICAgICAgICAgICAgb3RoZXJGaWVsZHM6IE1hdGNoZWRGaWVsZFtdO1xuICAgICAgICAgICAgICAgIGFjdHVhbFVzZXJuYW1lSW5kZXg/OiBudW1iZXI7XG4gICAgICAgICAgICAgICAgcHdGaWVsZHM/OiBNYXRjaGVkRmllbGRbXTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHNjYW5SZXN1bHQgPSB0aGlzLmZvcm1VdGlscy5nZXRGb3JtRmllbGRzKGZvcm0sIGZhbHNlLCA1MCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5Mb2dnZXIuZGVidWcoXCJMb3N0IGludGVyZXN0IGluIHRoaXMgZm9ybSBhZnRlciBmaW5kaW5nIHRvbyBtYW55IGZpZWxkc1wiICsgZSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VybmFtZUluZGV4ID0gc2NhblJlc3VsdC5hY3R1YWxVc2VybmFtZUluZGV4O1xuICAgICAgICAgICAgY29uc3QgcGFzc3dvcmRGaWVsZHMgPSBzY2FuUmVzdWx0LnB3RmllbGRzO1xuICAgICAgICAgICAgY29uc3Qgb3RoZXJGaWVsZHMgPSBzY2FuUmVzdWx0Lm90aGVyRmllbGRzO1xuXG4gICAgICAgICAgICAvLyBXZSB3YW50IHRvIGZpbGwgaW4gdGhpcyBmb3JtIGlmIHdlIGZpbmQgYSBwYXNzd29yZCBmaWVsZCBidXQgZmlyc3RcbiAgICAgICAgICAgIC8vIHdlIGNoZWNrIHdoZXRoZXIgYW55IHdoaXRlbGlzdCBvciBibGFja2xpc3QgZW50cmllcyBtdXN0IG92ZXJyaWRlIHRoYXQgYmVoYXZpb3VyXG4gICAgICAgICAgICBsZXQgaW50ZXJlc3RpbmdGb3JtOiBib29sZWFuID0gbnVsbDtcblxuICAgICAgICAgICAgaW50ZXJlc3RpbmdGb3JtID0gY29uZmlnTWFuYWdlci5pc0Zvcm1JbnRlcmVzdGluZyhcbiAgICAgICAgICAgICAgICBmb3JtLFxuICAgICAgICAgICAgICAgIGNvbmYsXG4gICAgICAgICAgICAgICAgb3RoZXJGaWVsZHMubWFwKGYgPT4gZi5maWVsZClcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGlmIChpbnRlcmVzdGluZ0Zvcm0gPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5Mb2dnZXIuZGVidWcoXG4gICAgICAgICAgICAgICAgICAgIFwiTG9zdCBpbnRlcmVzdCBpbiB0aGlzIGZvcm0gYWZ0ZXIgaW5zcGVjdGluZyBmaWVsZCBuYW1lcyBhbmQgSURzXCJcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBub1Bhc3N3b3JkRmllbGQgPVxuICAgICAgICAgICAgICAgIHBhc3N3b3JkRmllbGRzID09IG51bGwgfHwgcGFzc3dvcmRGaWVsZHMubGVuZ3RoIDw9IDAgfHwgcGFzc3dvcmRGaWVsZHNbMF0gPT0gbnVsbDtcbiAgICAgICAgICAgIGNvbnN0IG5vT3RoZXJGaWVsZCA9XG4gICAgICAgICAgICAgICAgdXNlcm5hbWVJbmRleCA8IDAgfHxcbiAgICAgICAgICAgICAgICBvdGhlckZpZWxkcyA9PSBudWxsIHx8XG4gICAgICAgICAgICAgICAgb3RoZXJGaWVsZHMubGVuZ3RoIDw9IDAgfHxcbiAgICAgICAgICAgICAgICBvdGhlckZpZWxkc1t1c2VybmFtZUluZGV4XSA9PSBudWxsO1xuXG4gICAgICAgICAgICBpZiAobm9QYXNzd29yZEZpZWxkICYmIChub090aGVyRmllbGQgfHwgaW50ZXJlc3RpbmdGb3JtICE9PSB0cnVlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuTG9nZ2VyLmRlYnVnKFxuICAgICAgICAgICAgICAgICAgICBcIk5vIHBhc3N3b3JkIGZpZWxkIGZvdW5kIGluIHRoaXMgZm9ybSBhbmQgZWl0aGVyIHRoZXJlIGFyZSBubyBvdGhlclwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiIGZpZWxkcyBvciBubyB3aGl0ZWxpc3RlZCB0ZXh0IGZpZWxkIG9yIGZvcm0gZWxlbWVudFwiXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IHN1Ym1pdFRhcmdldE5laWdoYm91cjogSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgICBpZiAobm9QYXNzd29yZEZpZWxkKSB7XG4gICAgICAgICAgICAgICAgc3VibWl0VGFyZ2V0TmVpZ2hib3VyID0gb3RoZXJGaWVsZHNbdXNlcm5hbWVJbmRleF0uRE9NZWxlbWVudDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc3VibWl0VGFyZ2V0TmVpZ2hib3VyID0gcGFzc3dvcmRGaWVsZHNbMF0uRE9NZWxlbWVudDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5hdHRhY2hTdWJtaXRIYW5kbGVycyhmb3JtLCBzdWJtaXRUYXJnZXROZWlnaGJvdXIsIGkpO1xuXG4gICAgICAgICAgICB0aGlzLm1hdGNoUmVzdWx0LnVzZXJuYW1lSW5kZXhBcnJheVtpXSA9IHVzZXJuYW1lSW5kZXg7XG4gICAgICAgICAgICB0aGlzLm1hdGNoUmVzdWx0LnBhc3N3b3JkRmllbGRzQXJyYXlbaV0gPSBwYXNzd29yZEZpZWxkcztcbiAgICAgICAgICAgIHRoaXMubWF0Y2hSZXN1bHQub3RoZXJGaWVsZHNBcnJheVtpXSA9IG90aGVyRmllbGRzO1xuICAgICAgICAgICAgdGhpcy5tYXRjaFJlc3VsdC5zdWJtaXRUYXJnZXRzW2ldID0gc3VibWl0VGFyZ2V0TmVpZ2hib3VyO1xuXG4gICAgICAgICAgICAvLyBUaGUgZW50cmllcyByZXR1cm5lZCBmcm9tIEtlZVBhc3MgZm9yIGV2ZXJ5IGZvcm0gd2lsbCBiZSBpZGVudGljYWwgKGJhc2VkIG9uIHRhYi9mcmFtZSBVUkwpXG4gICAgICAgICAgICBpZiAoIXNlYXJjaFNlbnRUb0tlZVBhc3MpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmRMb2dpbk9wLmZvcm1zID0gZm9ybXM7XG4gICAgICAgICAgICAgICAgdGhpcy5maW5kTG9naW5PcC5mb3JtSW5kZXhlcyA9IFtpXTtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmRMb2dpbk9wLndyYXBwZWRCeSA9IHRoaXMubWF0Y2hSZXN1bHQ7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXRjaFJlc3VsdC53cmFwcGVyc1tpXSA9IHRoaXMuZmluZExvZ2luT3A7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXRjaFJlc3VsdC5yZXF1ZXN0Q291bnQrKztcblxuICAgICAgICAgICAgICAgIC8vIFNlYXJjaCBmb3IgbWF0Y2hpbmcgZW50cmllcyBmb3IgdGhlIHJlbGV2YW50IFVSTC4gVGhpcyByZXF1ZXN0IGlzIGFzeW5jaHJvbm91cy5cbiAgICAgICAgICAgICAgICB0aGlzLm1hdGNoRmluZGVyKHVybC5ocmVmKTtcbiAgICAgICAgICAgICAgICBzZWFyY2hTZW50VG9LZWVQYXNzID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5Mb2dnZXIuZGVidWcoXCJmb3JtW1wiICsgaSArIFwiXTogcmV1c2luZyBlbnRyaWVzIGZyb20gbGFzdCBmb3JtLlwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmRMb2dpbk9wLmZvcm1JbmRleGVzLnB1c2goaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gLy8gZW5kIG9mIGZvcm0gZm9yIGxvb3BcbiAgICB9XG5cbiAgICAvLyBJdCdzIE9LIGZvciB0aGlzIHRvIHRha2UgYSBmZXcgc2Vjb25kcyAtIGh1bWFucyBjYW4ndCB0eXBlIHRoYXQgZmFzdC5cbiAgICAvLyBCeSBtYWtpbmcgdGhpcyBhc3luYyB3ZSBhbGxvdyB0aGUgc2VhcmNoIGZvciBlbnRyaWVzIHRvIGJlZ2luIGVhcmxpZXJcbiAgICAvLyBhbmQgcmVkdWNlIHBlcmNlaXZlZCBpbXBhY3Qgb24gcGFnZSBsb2FkIHRpbWVcbiAgICBwcml2YXRlIGFzeW5jIGF0dGFjaFN1Ym1pdEhhbmRsZXJzKFxuICAgICAgICBmb3JtOiBIVE1MRm9ybUVsZW1lbnQsXG4gICAgICAgIHN1Ym1pdFRhcmdldE5laWdoYm91cjogSFRNTEVsZW1lbnQsXG4gICAgICAgIGZvcm1OdW1iZXI6IG51bWJlclxuICAgICkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICBjb25zdCBzdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgICAgICAgY29uc3Qgc3VibWl0VGFyZ2V0ID0gdGhpcy5maW5kU3VibWl0QnV0dG9uKGZvcm0sIHN1Ym1pdFRhcmdldE5laWdoYm91cik7XG4gICAgICAgICAgICB0aGlzLmZvcm1TYXZpbmcuYWRkU3VibWl0SGFuZGxlcihzdWJtaXRUYXJnZXQsIGZvcm0pO1xuICAgICAgICAgICAgS2VlTG9nLmluZm8oXG4gICAgICAgICAgICAgICAgXCJTdWJtaXQgaGFuZGxlcnMgYXR0YWNoZWQgYXN5bmNocm9ub3VzbHkgdG8gZm9ybSBcIiArXG4gICAgICAgICAgICAgICAgICAgIGZvcm1OdW1iZXIgK1xuICAgICAgICAgICAgICAgICAgICBcIiBpbiBcIiArXG4gICAgICAgICAgICAgICAgICAgIChwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0KSArXG4gICAgICAgICAgICAgICAgICAgIFwibXNcIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgS2VlTG9nLndhcm4oXCJFeGNlcHRpb24gd2hpbGUgYWRkaW5nIHN1Ym1pdCBoYW5kbGVyLiBNZXNzYWdlOiBcIiArIGUubWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHNjYW5Gb3JPcnBoYW5lZEZpZWxkcyhkb2MpIHtcbiAgICAgICAgY29uc3QgdCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICBjb25zdCBvcnBoYW5lZEZpZWxkcyA9IFtdO1xuICAgICAgICBsZXQgcHNldWRvRm9ybSA9IG51bGw7XG5cbiAgICAgICAgLy8gbXVjaCBmYXN0ZXIgdGhhbiBxdWVyeVNlbGVjdG9yQWxsXG4gICAgICAgIGNvbnN0IGl0ZW1zID0gZG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaW5wdXRcIik7XG4gICAgICAgIGZvciAoY29uc3QgdGFnIG9mIGl0ZW1zKSB7XG4gICAgICAgICAgICBpZiAoIXRhZy5mb3JtKSBvcnBoYW5lZEZpZWxkcy5wdXNoKHRhZyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3JwaGFuZWRGaWVsZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcHNldWRvRm9ybSA9IHtcbiAgICAgICAgICAgICAgICBlbGVtZW50czogb3JwaGFuZWRGaWVsZHMsXG4gICAgICAgICAgICAgICAgaWQ6IFwiS2VlLXBzZXVkby1mb3JtXCIsXG4gICAgICAgICAgICAgICAgbmFtZTogXCJLZWUtcHNldWRvLWZvcm1cIixcbiAgICAgICAgICAgICAgICBvd25lckRvY3VtZW50OiBkb2MsXG4gICAgICAgICAgICAgICAgZ2V0RWxlbWVudHNCeVRhZ05hbWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudHM7XG4gICAgICAgICAgICAgICAgfSwgLy8gT25seSB1c2UgaXMgZm9yIGxpc3RpbmcgaW5wdXQgZWxlbWVudHNcbiAgICAgICAgICAgICAgICBxdWVyeVNlbGVjdG9yQWxsOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgICAgICB9LCAvLyBPbmx5IHVzZSBpcyBmb3IgbGlzdGluZyBidXR0b24gZWxlbWVudHNcbiAgICAgICAgICAgICAgICBzdWJtaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH0sIC8vIE5vdCBwb3NzaWJsZSB0byBzdWJtaXQgYSBwc2V1ZG8gZm9ybSB1bmxlc3MgYSBidXR0b24gd2l0aCBjdXN0b20gSlMgaGFzIGFscmVhZHkgYmVlbiBmb3VuZFxuICAgICAgICAgICAgICAgIG9mZnNldFBhcmVudDogdHJ1ZSwgLy8gVGhpcyB0cmlja3MgZWxlbWVudCB2aXNpYmlsaXR5IGNoZWNrcyBpbnRvIHRyZWF0aW5nIHRoaXMgYXMgdmlzaWJsZSB0byB0aGUgdXNlclxuICAgICAgICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH0sIC8vVE9ETzo0OiBob29rIHVwIHRvIHRoZSBzdWJtaXQgZnVuY3Rpb24gdG8gc2ltdWxhdGUgcmVhbCBmb3JtIHN1Ym1pc3Npb25cbiAgICAgICAgICAgICAgICByZW1vdmVFdmVudExpc3RlbmVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdG4gPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgdGhpcy5Mb2dnZXIuZGVidWcoXCJzY2FuRm9yT3JwaGFuZWRGaWVsZHMgdG9vazogXCIgKyAodG4gLSB0KSk7XG5cbiAgICAgICAgcmV0dXJuIHBzZXVkb0Zvcm07XG4gICAgfVxuXG4gICAgcHVibGljIGZpbmRMb2dpbnNSZXN1bHRIYW5kbGVyKGVudHJpZXM6IEVudHJ5W10pIHtcbiAgICAgICAgaWYgKCFlbnRyaWVzKSByZXR1cm47XG4gICAgICAgIGNvbnN0IHZhbGlkRW50cmllcyA9IGVudHJpZXMuZmlsdGVyKFxuICAgICAgICAgICAgZSA9PiBFbnRyeS5nZXRVc2VybmFtZUZpZWxkKGUpIHx8IEVudHJ5LmdldFBhc3N3b3JkRmllbGQoZSlcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLm1hdGNoUmVzdWx0ID0gdGhpcy5nZXRSZWxldmFuY2VPZkxvZ2luTWF0Y2hlc0FnYWluc3RBbGxGb3JtcyhcbiAgICAgICAgICAgIHZhbGlkRW50cmllcyxcbiAgICAgICAgICAgIHRoaXMuZmluZExvZ2luT3AsXG4gICAgICAgICAgICB0aGlzLm1hdGNoUmVzdWx0XG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5maWxsQW5kU3VibWl0KHRydWUpO1xuICAgIH1cblxuICAgIGdldFJlbGV2YW5jZU9mTG9naW5NYXRjaGVzQWdhaW5zdEFsbEZvcm1zKFxuICAgICAgICBlbnRyaWVzOiBFbnRyeVtdLFxuICAgICAgICBmaW5kTG9naW5PcCxcbiAgICAgICAgbWF0Y2hSZXN1bHQ6IE1hdGNoUmVzdWx0XG4gICAgKSB7XG4gICAgICAgIGNvbnN0IGNyU3RyaW5nID0gSlNPTi5zdHJpbmdpZnkoZW50cmllcyk7XG4gICAgICAgIGxldCBmaXJzdE1hdGNoUHJvY2Vzc2VkID0gZmFsc2U7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaW5kTG9naW5PcC5mb3Jtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgLy8gU2tpcCBhbnkgZm9ybSB0aGF0IHdlIGRvbid0IHdhbnQgdG8gbWF0Y2ggYWdhaW5zdCB0aGlzIHNldCBvZiBlbnRyaWVzXG4gICAgICAgICAgICBpZiAoZmluZExvZ2luT3AuZm9ybUluZGV4ZXMuaW5kZXhPZihpKSA9PSAtMSkgY29udGludWU7XG5cbiAgICAgICAgICAgIC8vIGlmIHRoZXJlIGlzIG1vcmUgdGhhbiBvbmUgZm9ybSwgd2UgaGF2ZSB0byB3b3JrIHdpdGggY2xvbmVzIG9mIHRoZSBlbnRyeSBzb1xuICAgICAgICAgICAgLy8gdGhhdCB3ZSBjYW4gbWFuaXB1bGF0ZSB0aGUgcmVsZXZhbmN5IHNjb3JlcywgZXRjLiBpbmRlcGVuZGVudGx5IGZvciBlYWNoXG4gICAgICAgICAgICAvLyBmb3JtIGFuZCBlbnRyeSBjb21iaW5hdGlvbi4gV2UgY291bGQgYmUgbW9yZSBlZmZpY2llbnQgZm9yIHRoZSBjb21tb24gY2FzZSBvZiAxIGZvcm1cbiAgICAgICAgICAgIC8vIGJ5IGF2b2lkaW5nIHRoZSBjbG9uZSB0aGVuIGJ1dCBrZWVwaW5nIHRoZSBzYW1lIGJlaGF2aW91ciBnaXZlcyB1cyBhIGhpZ2hlciBjaGFuY2VcbiAgICAgICAgICAgIC8vIG9mIG5vdGljaW5nIGJ1Z3MuXG4gICAgICAgICAgICBtYXRjaFJlc3VsdC5lbnRyaWVzW2ldID0gSlNPTi5wYXJzZShjclN0cmluZyk7IC8vVE9ETzo0OiBmYXN0ZXIgY2xvbmU/IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0d1aWRlL0FQSS9ET00vVGhlX3N0cnVjdHVyZWRfY2xvbmVfYWxnb3JpdGhtID9cblxuICAgICAgICAgICAgLy8gTm90aGluZyB0byBkbyBpZiB3ZSBoYXZlIG5vIG1hdGNoaW5nIGVudHJpZXMgYXZhaWxhYmxlLlxuICAgICAgICAgICAgaWYgKG1hdGNoUmVzdWx0LmVudHJpZXNbaV0ubGVuZ3RoID09IDApIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICB0aGlzLkxvZ2dlci5pbmZvKFwibWF0Y2ggZm91bmQhXCIpO1xuXG4gICAgICAgICAgICBjb25zdCBmb3JtVmlzaWJsZSA9IHRoaXMuZm9ybVV0aWxzLmlzRE9NRWxlbWVudFZpc2libGUobWF0Y2hSZXN1bHQuc3VibWl0VGFyZ2V0c1tpXSk7XG4gICAgICAgICAgICB0aGlzLkxvZ2dlci5kZWJ1ZyhcImZvcm1WaXNpYmxlOiBcIiArIGZvcm1WaXNpYmxlKTtcblxuICAgICAgICAgICAgY29uc3QgdmlzaWJsZUZpZWxkQ2FjaGUgPSB7XG4gICAgICAgICAgICAgICAgb3RoZXI6IG1hdGNoUmVzdWx0Lm90aGVyRmllbGRzQXJyYXlbaV0ubWFwKGYgPT5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtVXRpbHMuaXNET01FbGVtZW50VmlzaWJsZShmLkRPTWVsZW1lbnQpXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBwYXNzd29yZDogbWF0Y2hSZXN1bHQucGFzc3dvcmRGaWVsZHNBcnJheVtpXS5tYXAoZiA9PlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1VdGlscy5pc0RPTUVsZW1lbnRWaXNpYmxlKGYuRE9NZWxlbWVudClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyBkZXRlcm1pbmUgdGhlIHJlbGV2YW5jZSBvZiBlYWNoIGVudHJ5IHRvIHRoaXMgZm9ybVxuICAgICAgICAgICAgLy8gd2UgY291bGQgc2tpcCB0aGlzIHdoZW4gYXV0b2ZpbGxpbmcgYmFzZWQgb24gdXVpZCBidXQgd2Ugd291bGQgaGF2ZSB0byBjaGVjayBmb3JcbiAgICAgICAgICAgIC8vIG1hdGNoZXMgZmlyc3Qgb3IgZWxzZSB3ZSByaXNrIG5vIG1hdGNoIGFuZCBubyBhbHRlcm5hdGl2ZSBtYXRjaGluZyBlbnRyaWVzIG9uIHRoZSBtYWluVUlcbiAgICAgICAgICAgIC8vIGFuZCB3ZSBhbHNvIG5vdyBjb25zaWRlciB0aGUgdG90YWxpdHkgb2YgcG9zc2libGUgbWF0Y2hlcyBhZ2FpbnN0IGEgZmllbGQgaW4gb3JkZXJcbiAgICAgICAgICAgIC8vIHRvIGxpbWl0IHdoaWNoIGZpZWxkcyB3ZSBzaG92ZSBhIEtlZSBpY29uIGludG8uXG4gICAgICAgICAgICBmb3IgKGxldCB2ID0gMDsgdiA8IG1hdGNoUmVzdWx0LmVudHJpZXNbaV0ubGVuZ3RoOyB2KyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmZWF0dXJlcyA9IHN0b3JlLktlZVBhc3NEYXRhYmFzZXMuZmluZChcbiAgICAgICAgICAgICAgICAgICAgZGIgPT4gZGIuZmlsZU5hbWUgPT09IG1hdGNoUmVzdWx0LmVudHJpZXNbaV1bdl0uZGF0YWJhc2UuZmlsZU5hbWVcbiAgICAgICAgICAgICAgICApLnNlc3Npb25GZWF0dXJlcztcbiAgICAgICAgICAgICAgICBjb25zdCBmaWVsZE1hdGNoU2NvcmVDb25maWc6IEZpZWxkTWF0Y2hTY29yZUNvbmZpZyA9IHtcbiAgICAgICAgICAgICAgICAgICAgcHVuaXNoV3JvbmdJREFuZE5hbWU6XG4gICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlcy5pbmRleE9mKFwiS1BSUENfRklFTERfREVGQVVMVF9OQU1FX0FORF9JRF9FTVBUWVwiKSA+PSAwXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHNjb3JlLCBsb3dGaWVsZE1hdGNoUmF0aW8gfSA9IHRoaXMuY2FsY3VsYXRlUmVsZXZhbmNlU2NvcmUoXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoUmVzdWx0LmVudHJpZXNbaV1bdl0sXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoUmVzdWx0LnBhc3N3b3JkRmllbGRzQXJyYXlbaV0sXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoUmVzdWx0Lm90aGVyRmllbGRzQXJyYXlbaV0sXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoUmVzdWx0LmN1cnJlbnRQYWdlLFxuICAgICAgICAgICAgICAgICAgICBmb3JtVmlzaWJsZSxcbiAgICAgICAgICAgICAgICAgICAgZmllbGRNYXRjaFNjb3JlQ29uZmlnLFxuICAgICAgICAgICAgICAgICAgICB2aXNpYmxlRmllbGRDYWNoZVxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAvLyBjaG9vc2luZyBiZXN0IGZvcm0gc2hvdWxkIG5vdCBiZSBhZmZlY3RlZCBieSBsb3dGaWVsZE1hdGNoUmF0aW8gZW50cnkgc2NvcmVcbiAgICAgICAgICAgICAgICAvLyBidXQgd2hlbiB3ZSBjb21lIHRvIGZpbGwgdGhlIGZvcm0gd2UgY2FuIGZvcmNlIG91cnNlbHZlcyBpbnRvIGEgbm8tYXV0by1maWxsIGJlaGF2aW91ci5cbiAgICAgICAgICAgICAgICBtYXRjaFJlc3VsdC5lbnRyaWVzW2ldW3ZdLnJlbGV2YW5jZVNjb3JlID0gc2NvcmU7XG4gICAgICAgICAgICAgICAgbWF0Y2hSZXN1bHQuZW50cmllc1tpXVt2XS5sb3dGaWVsZE1hdGNoUmF0aW8gPSBsb3dGaWVsZE1hdGNoUmF0aW87XG5cbiAgICAgICAgICAgICAgICAvLyBhbHNvIHNldCB0aGUgZm9ybSBpbmRleCBhbmQgZW50cnkgaW5kZXggb24gdGhlIGludGVybmFsIGVudHJ5IG9iamVjdCBzb1xuICAgICAgICAgICAgICAgIC8vIGl0IHdpbGwgcGVyc2lzdCB3aGVuIGxhdGVyIHBhc3NlZCB0byB0aGUgVUkgYW5kIHdlIGNhbiB1bHRpbWF0ZWx5XG4gICAgICAgICAgICAgICAgLy8gZmluZCB0aGUgc2FtZSBlbnRyeSBvYmplY3Qgd2hlbiBwcm9jZXNzaW5nIGEgbWF0Y2hlZCBlbnRyeVxuICAgICAgICAgICAgICAgIG1hdGNoUmVzdWx0LmVudHJpZXNbaV1bdl0uZm9ybUluZGV4ID0gaTtcbiAgICAgICAgICAgICAgICBtYXRjaFJlc3VsdC5lbnRyaWVzW2ldW3ZdLmVudHJ5SW5kZXggPSB2O1xuXG4gICAgICAgICAgICAgICAgLy8gUmVtZW1iZXIgdGhlIGJlc3QgZm9ybSBmb3IgZWFjaCBlbnRyeVxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgIWZpcnN0TWF0Y2hQcm9jZXNzZWQgfHxcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hSZXN1bHQuZW50cmllc1tpXVt2XS5yZWxldmFuY2VTY29yZSA+XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaFJlc3VsdC5hbGxNYXRjaGluZ0xvZ2luc1t2XS5yZWxldmFuY2VTY29yZVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLkxvZ2dlci5kZWJ1ZyhcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiSGlnaGVyIHJlbGV2YW5jZSBzY29yZSBmb3VuZCBmb3IgZW50cnkgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiIHdpdGggZm9ybUluZGV4IFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaFJlc3VsdC5lbnRyaWVzW2ldW3ZdLmZvcm1JbmRleCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIgKFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5kTG9naW5PcC5mb3Jtc1tpXS5pZCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIpXCJcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hSZXN1bHQuYWxsTWF0Y2hpbmdMb2dpbnNbdl0gPSBtYXRjaFJlc3VsdC5lbnRyaWVzW2ldW3ZdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpcnN0TWF0Y2hQcm9jZXNzZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICAvLyBGaW5kIHRoZSBiZXN0IGVudHJ5IGZvciB0aGlzIGZvcm1cbiAgICAgICAgICAgIG1hdGNoUmVzdWx0LmVudHJpZXNbaV0uZm9yRWFjaChmdW5jdGlvbiAoYykge1xuICAgICAgICAgICAgICAgIGlmIChjLnJlbGV2YW5jZVNjb3JlID4gbWF0Y2hSZXN1bHQuZm9ybVJlbGV2YW5jZVNjb3Jlc1tpXSkge1xuICAgICAgICAgICAgICAgICAgICBtYXRjaFJlc3VsdC5mb3JtUmVsZXZhbmNlU2NvcmVzW2ldID0gYy5yZWxldmFuY2VTY29yZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5Mb2dnZXIuZGVidWcoXG4gICAgICAgICAgICAgICAgXCJSZWxldmFuY2Ugb2YgZm9ybSBcIiArXG4gICAgICAgICAgICAgICAgICAgIGkgK1xuICAgICAgICAgICAgICAgICAgICBcIiAoXCIgK1xuICAgICAgICAgICAgICAgICAgICBmaW5kTG9naW5PcC5mb3Jtc1tpXS5pZCArXG4gICAgICAgICAgICAgICAgICAgIFwiKSBpcyBcIiArXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoUmVzdWx0LmZvcm1SZWxldmFuY2VTY29yZXNbaV1cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1hdGNoUmVzdWx0O1xuICAgIH1cblxuICAgIGdldE1vc3RSZWxldmFudEZvcm0oZm9ybUluZGV4PzogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IGZpbmRNYXRjaGVzUmVzdWx0ID0gdGhpcy5tYXRjaFJlc3VsdDtcblxuICAgICAgICAvLyBUaGVyZSBtYXkgYmUgbm8gcmVzdWx0cyBmb3IgdGhpcyBmcmFtZSAoZS5nLiBubyBmb3JtcyBmb3VuZCwgc2VhcmNoIGZhaWxlZCwgZXRjLilcbiAgICAgICAgaWYgKCFmaW5kTWF0Y2hlc1Jlc3VsdCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBiZXN0Rm9ybUluZGV4OiAwLFxuICAgICAgICAgICAgICAgIGJlc3RSZWxldmFuY2VTY29yZTogMCxcbiAgICAgICAgICAgICAgICBiZXN0RmluZE1hdGNoZXNSZXN1bHQ6IHVuZGVmaW5lZFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBtb3N0UmVsZXZhbnRGb3JtSW5kZXggPSAwO1xuXG4gICAgICAgIGlmIChmb3JtSW5kZXggPj0gMCkgbW9zdFJlbGV2YW50Rm9ybUluZGV4ID0gZm9ybUluZGV4O1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZpbmRNYXRjaGVzUmVzdWx0LmZvcm1SZWxldmFuY2VTY29yZXMuZm9yRWFjaCgoYywgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLkxvZ2dlci5kZWJ1ZyhcIlJlbGV2YW5jZSBvZiBmb3JtIGlzIFwiICsgYyk7XG4gICAgICAgICAgICAgICAgaWYgKGMgPiBmaW5kTWF0Y2hlc1Jlc3VsdC5mb3JtUmVsZXZhbmNlU2NvcmVzW21vc3RSZWxldmFudEZvcm1JbmRleF0pIHtcbiAgICAgICAgICAgICAgICAgICAgbW9zdFJlbGV2YW50Rm9ybUluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLkxvZ2dlci5kZWJ1ZyhcIlRoZSBtb3N0IHJlbGV2YW50IGZvcm0gaXMgI1wiICsgbW9zdFJlbGV2YW50Rm9ybUluZGV4KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGJlc3RGb3JtSW5kZXg6IG1vc3RSZWxldmFudEZvcm1JbmRleCxcbiAgICAgICAgICAgIGJlc3RSZWxldmFuY2VTY29yZTogZmluZE1hdGNoZXNSZXN1bHQuZm9ybVJlbGV2YW5jZVNjb3Jlc1ttb3N0UmVsZXZhbnRGb3JtSW5kZXhdLFxuICAgICAgICAgICAgYmVzdEZpbmRNYXRjaGVzUmVzdWx0OiBmaW5kTWF0Y2hlc1Jlc3VsdFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIGF1dG9tYXRlZCBjb3VsZCBiZSBvbiBwYWdlIGxvYWQgb3IgcmVzdWx0aW5nIGZyb20gb3RoZXIgbm9uLXVzZXItaW50ZXJhY3Rpb24uXG4gICAgLy8gSXQncyBwb3NzaWJsZSB0byBmaWxsIGFuZCBzdWJtaXQgYSBlbnRyeSB3aXRoIGEgc3BlY2lmaWMgdXVpZCBidXRcbiAgICAvLyB0aGF0IHByb2Nlc3MgaXMgbm93IGNlbnRlcmVkIG9uIHRoZSBmaW5kTWF0Y2hlcyBmdW5jdGlvbi4gVGhpcyBmdW5jdGlvbiBqdXN0XG4gICAgLy8gdGFrZXMgdGhlIHJlc3VsdHMgb2YgdGhhdCAod2hpY2ggbWF5IGluY2x1ZGUgYSBzcGVjaWZpYyBlbnRyeSB0byBmaWxsIGFuZCBzdWJtaXQgdG8gYSBzcGVjaWZpYyBmb3JtKVxuICAgIGZpbGxBbmRTdWJtaXQoYXV0b21hdGVkOiBib29sZWFuLCBmb3JtSW5kZXg/OiBudW1iZXIsIGVudHJ5SW5kZXg/OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5Mb2dnZXIuZGVidWcoXG4gICAgICAgICAgICBcImZpbGxBbmRTdWJtaXQgc3RhcnRlZC4gYXV0b21hdGVkOiBcIiArXG4gICAgICAgICAgICAgICAgYXV0b21hdGVkICtcbiAgICAgICAgICAgICAgICBcIiwgZm9ybUluZGV4OiBcIiArXG4gICAgICAgICAgICAgICAgZm9ybUluZGV4ICtcbiAgICAgICAgICAgICAgICBcIiwgZW50cnlJbmRleDogXCIgK1xuICAgICAgICAgICAgICAgIGVudHJ5SW5kZXhcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBtYXRjaFJlc3VsdCA9IHRoaXMubWF0Y2hSZXN1bHQ7XG4gICAgICAgIGxldCBzdWJtaXRUYXJnZXROZWlnaGJvdXI7XG5cbiAgICAgICAgLy8gR2l2ZSB1cCBpZiB3ZSBoYXZlIG5vIHJlc3VsdHMgZm9yIHRoaXMgZnJhbWUgKGkuZS4gdGhlcmUgd2VyZSBubyBmb3JtcyB0byBmaWxsKVxuICAgICAgICBpZiAoIW1hdGNoUmVzdWx0KSByZXR1cm47XG5cbiAgICAgICAgLy8gV2UgZG8gc29tZSB0aGluZ3MgZGlmZmVyZW50bHkgaWYgd2UncmUgYmVpbmcgbWFudWFsbHkgYXNrZWQgdG8gZmlsbCBhbmRcbiAgICAgICAgLy8gc3VibWl0IGEgc3BlY2lmaWMgbWF0Y2hlZCBlbnRyeVxuICAgICAgICBjb25zdCBpc01hdGNoZWRMb2dpblJlcXVlc3QgPVxuICAgICAgICAgICAgIWF1dG9tYXRlZCAmJlxuICAgICAgICAgICAgKChtYXRjaFJlc3VsdC5tb3N0UmVsZXZhbnRGb3JtSW5kZXggIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgICBtYXRjaFJlc3VsdC5tb3N0UmVsZXZhbnRGb3JtSW5kZXggPj0gMCkgfHxcbiAgICAgICAgICAgICAgICB0eXBlb2YgZm9ybUluZGV4ICE9IFwidW5kZWZpbmVkXCIpICYmXG4gICAgICAgICAgICB0eXBlb2YgZW50cnlJbmRleCAhPSBcInVuZGVmaW5lZFwiO1xuXG4gICAgICAgIGlmICghaXNNYXRjaGVkTG9naW5SZXF1ZXN0KSB7XG4gICAgICAgICAgICBtYXRjaFJlc3VsdC5tb3N0UmVsZXZhbnRGb3JtSW5kZXggPSB0aGlzLmdldE1vc3RSZWxldmFudEZvcm0oKS5iZXN0Rm9ybUluZGV4O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU3VwcGxpZWQgZm9ybUlEIG92ZXJyaWRlcyBhbnkgdGhhdCB3ZSBqdXN0IGF1dG9tYXRpY2FsbHkgY2FsY3VsYXRlZCBhYm92ZVxuICAgICAgICBpZiAoZm9ybUluZGV4ICE9PSBudWxsICYmIGZvcm1JbmRleCA+PSAwKSBtYXRjaFJlc3VsdC5tb3N0UmVsZXZhbnRGb3JtSW5kZXggPSBmb3JtSW5kZXg7XG5cbiAgICAgICAgLy8gZnJvbSBub3cgb24gd2UgY29uY2VudHJhdGUgb24ganVzdCB0aGUgbW9zdCByZWxldmFudCBmb3JtIGFuZCB0aGUgZmllbGRzIHdlIGZvdW5kIGVhcmxpZXJcbiAgICAgICAgY29uc3QgZm9ybSA9IG1hdGNoUmVzdWx0LmZvcm1zW21hdGNoUmVzdWx0Lm1vc3RSZWxldmFudEZvcm1JbmRleF07XG4gICAgICAgIGNvbnN0IHBhc3N3b3JkRmllbGRzID0gbWF0Y2hSZXN1bHQucGFzc3dvcmRGaWVsZHNBcnJheVttYXRjaFJlc3VsdC5tb3N0UmVsZXZhbnRGb3JtSW5kZXhdO1xuICAgICAgICBjb25zdCBvdGhlckZpZWxkcyA9IG1hdGNoUmVzdWx0Lm90aGVyRmllbGRzQXJyYXlbbWF0Y2hSZXN1bHQubW9zdFJlbGV2YW50Rm9ybUluZGV4XTtcblxuICAgICAgICBjb25zdCBvcmRlcmVkRW50cmllcyA9IHRoaXMuc29ydE1hdGNoZWRFbnRyaWVzKFxuICAgICAgICAgICAgbWF0Y2hSZXN1bHQuZW50cmllc1ttYXRjaFJlc3VsdC5tb3N0UmVsZXZhbnRGb3JtSW5kZXhdXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IG9yZGVyZWRFbnRyaWVzV2l0aFByZWZlcmVuY2UgPSB0aGlzLmZsYWdVc2VyUHJlZmVycmVkRW50cnkob3JkZXJlZEVudHJpZXMpO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICFpc01hdGNoZWRMb2dpblJlcXVlc3QgJiZcbiAgICAgICAgICAgIG1hdGNoUmVzdWx0LmVudHJpZXNbbWF0Y2hSZXN1bHQubW9zdFJlbGV2YW50Rm9ybUluZGV4XS5sZW5ndGggPiAwXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5teVBvcnQucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgIGVudHJpZXM6IG9yZGVyZWRFbnRyaWVzV2l0aFByZWZlcmVuY2VcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBHaXZlIHRoZSB1c2VyIGEgd2F5IHRvIGNob29zZSBhbiBlbnRyeSBpbnRlcmFjdGl2ZWx5XG4gICAgICAgICAgICB0aGlzLmtlZUZpZWxkSWNvbi5hZGRLZWVJY29uVG9GaWVsZHMoXG4gICAgICAgICAgICAgICAgcGFzc3dvcmRGaWVsZHMsXG4gICAgICAgICAgICAgICAgb3RoZXJGaWVsZHMsXG4gICAgICAgICAgICAgICAgb3JkZXJlZEVudHJpZXNXaXRoUHJlZmVyZW5jZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHRoaXMgcmVjb3JkcyB0aGUgZW50cnkgdGhhdCB3ZSBldmVudHVhbGx5IGNob29zZSBhcyB0aGUgb25lIHRvIGZpbGwgdGhlIGNob3NlbiBmb3JtIHdpdGhcbiAgICAgICAgbGV0IG1hdGNoaW5nTG9naW46IEVudHJ5ID0gbnVsbDtcbiAgICAgICAgbGV0IGFjdGlvbjogRmlsbEFuZFN1Ym1pdEFjdGlvbiA9IHsgZmlsbDogZmFsc2UsIHN1Ym1pdDogZmFsc2UgfTtcbiAgICAgICAgbGV0IG11bHRpcGxlTWF0Y2hlcyA9IGZhbHNlO1xuXG4gICAgICAgIC8vIElmIHdlIHN0YXJ0ZWQgdGhpcyBmaWxsL3N1Ym1pdCBhdHRlbXB0IGZyb20gY2VydGFpbiBjb250ZXh0cywgd2Ugd2lsbCBoYXZlXG4gICAgICAgIC8vIGJlZW4gdG9sZCB0byBlbnN1cmUgd2UgZG8gbm90IHBlcmZvcm0gYXV0by1maWxsIG9yIHN1Ym1pdCBhbmQgd2UnbGwgaW5zdGVhZFxuICAgICAgICAvLyBqdXN0IHRlbGwgdGhlIFVJIHRvIG5vdGlmeSB0aGUgdXNlciBhYm91dCBhbnkgbWF0Y2hlcyB3ZSBmb3VuZC4gQWx0aG91Z2hcbiAgICAgICAgLy8gd2UgaWdub3JlIHRoaXMgcnVsZSBpZiB0aGUgdXNlciBpbml0aWF0ZWQgdGhlIGZpbGwvc3VibWl0LlxuICAgICAgICBtYXRjaFJlc3VsdC5jYW5ub3RBdXRvRmlsbEZvcm0gPSBmYWxzZTtcbiAgICAgICAgbWF0Y2hSZXN1bHQuY2Fubm90QXV0b1N1Ym1pdEZvcm0gPSBmYWxzZTtcblxuICAgICAgICBpZiAoYXV0b21hdGVkICYmIG1hdGNoUmVzdWx0LmF1dG9maWxsT25TdWNjZXNzID09PSBmYWxzZSkge1xuICAgICAgICAgICAgbWF0Y2hSZXN1bHQuY2Fubm90QXV0b0ZpbGxGb3JtID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXV0b21hdGVkICYmIG1hdGNoUmVzdWx0LmF1dG9zdWJtaXRPblN1Y2Nlc3MgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBtYXRjaFJlc3VsdC5jYW5ub3RBdXRvU3VibWl0Rm9ybSA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBObyBwb2ludCBsb29raW5nIGF0IGVudHJ5IHNwZWNpZmljIHByZWZlcmVuY2VzIGlmIHdlIGFyZSBub3QgYWxsb3dlZCB0byBhdXRvLWZpbGxcbiAgICAgICAgaWYgKCFtYXRjaFJlc3VsdC5jYW5ub3RBdXRvRmlsbEZvcm0pIHtcbiAgICAgICAgICAgIHRoaXMuTG9nZ2VyLmRlYnVnKFwiV2UgYXJlIGFsbG93ZWQgdG8gYXV0by1maWxsIHRoaXMgZm9ybS5cIik7XG5cbiAgICAgICAgICAgIC8vIElmIHdlJ3ZlIGJlZW4gaW5zdHJ1Y3RlZCB0byBmaWxsIGEgc3BlY2lmaWMgZW50cnksIHdlIG5lZWQgdG8gc2VsZWN0IHRoYXRcbiAgICAgICAgICAgIC8vIGVudHJ5IGFuZCBjbGVhciBhbnkgcHJldmlvdXNseSBzZXQgaW5mb3JtYXRpb24gYWJvdXQgYW4gYXV0by1maWxsZWQgZW50cnlcbiAgICAgICAgICAgIC8vIHNvIGl0IGNhbiBiZSBzZXQgY29ycmVjdGx5IGxhdGVyXG4gICAgICAgICAgICBpZiAoZW50cnlJbmRleCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgbWF0Y2hpbmdMb2dpbiA9IG1hdGNoUmVzdWx0LmVudHJpZXNbbWF0Y2hSZXN1bHQubW9zdFJlbGV2YW50Rm9ybUluZGV4XVtlbnRyeUluZGV4XTtcbiAgICAgICAgICAgICAgICBtYXRjaFJlc3VsdC5VVUlEID0gbnVsbDtcbiAgICAgICAgICAgICAgICBtYXRjaFJlc3VsdC5kYkZpbGVOYW1lID0gbnVsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IGNoZWNrTWF0Y2hpbmdMb2dpblJlbGV2YW5jZVRocmVzaG9sZCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIG1hdGNoaW5nTG9naW4gPT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgIG1hdGNoUmVzdWx0LmVudHJpZXNbbWF0Y2hSZXN1bHQubW9zdFJlbGV2YW50Rm9ybUluZGV4XS5sZW5ndGggPT0gMVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgbWF0Y2hpbmdMb2dpbiA9IG1hdGNoUmVzdWx0LmVudHJpZXNbbWF0Y2hSZXN1bHQubW9zdFJlbGV2YW50Rm9ybUluZGV4XVswXTtcbiAgICAgICAgICAgICAgICBjaGVja01hdGNoaW5nTG9naW5SZWxldmFuY2VUaHJlc2hvbGQgPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICBtYXRjaFJlc3VsdC5VVUlEICE9IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgIG1hdGNoUmVzdWx0LlVVSUQgIT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgIG1hdGNoUmVzdWx0LlVVSUQgIT0gXCJcIlxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgLy8gU2tpcCB0aGUgcmVsZXZhbmNlIHRlc3RzIGlmIHdlIGhhdmUgYmVlbiB0b2xkIHRvIHVzZSBhIHNwZWNpZmljIFVVSURcbiAgICAgICAgICAgICAgICB0aGlzLkxvZ2dlci5kZWJ1ZyhcbiAgICAgICAgICAgICAgICAgICAgXCJXZSd2ZSBiZWVuIHRvbGQgdG8gdXNlIGFuIGVudHJ5IHdpdGggdGhpcyBVVUlEOiBcIiArIG1hdGNoUmVzdWx0LlVVSURcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGZvciAoXG4gICAgICAgICAgICAgICAgICAgIGxldCBjb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGNvdW50IDwgbWF0Y2hSZXN1bHQuZW50cmllc1ttYXRjaFJlc3VsdC5tb3N0UmVsZXZhbnRGb3JtSW5kZXhdLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgY291bnQrK1xuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaFJlc3VsdC5lbnRyaWVzW21hdGNoUmVzdWx0Lm1vc3RSZWxldmFudEZvcm1JbmRleF1bY291bnRdLnV1aWQgPT1cbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoUmVzdWx0LlVVSURcbiAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGluZ0xvZ2luID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaFJlc3VsdC5lbnRyaWVzW21hdGNoUmVzdWx0Lm1vc3RSZWxldmFudEZvcm1JbmRleF1bY291bnRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoaW5nTG9naW4gPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLkxvZ2dlci53YXJuKFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJDb3VsZCBub3QgZmluZCB0aGUgcmVxdWlyZWQgS2VlUGFzcyBlbnRyeS4gTWF5YmUgdGhlIHdlYnNpdGUgcmVkaXJlY3RlZCB5b3UgdG8gYSBkaWZmZXJlbnQgZG9tYWluIG9yIGhvc3RuYW1lP1wiXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICBtYXRjaGluZ0xvZ2luID09IG51bGwgJiZcbiAgICAgICAgICAgICAgICAoIW1hdGNoUmVzdWx0LmVudHJpZXNbbWF0Y2hSZXN1bHQubW9zdFJlbGV2YW50Rm9ybUluZGV4XSB8fFxuICAgICAgICAgICAgICAgICAgICAhbWF0Y2hSZXN1bHQuZW50cmllc1ttYXRjaFJlc3VsdC5tb3N0UmVsZXZhbnRGb3JtSW5kZXhdLmxlbmd0aClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHRoaXMuTG9nZ2VyLmRlYnVnKFwiTm8gZW50cmllcyBmb3IgZm9ybS5cIik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG1hdGNoaW5nTG9naW4gPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuTG9nZ2VyLmRlYnVnKFxuICAgICAgICAgICAgICAgICAgICBcIk11bHRpcGxlIGVudHJpZXMgZm9yIGZvcm0sIHNvIHVzaW5nIHByZWZlcnJlZCBvciBtb3N0IHJlbGV2YW50LlwiXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBtYXRjaGluZ0xvZ2luID1cbiAgICAgICAgICAgICAgICAgICAgb3JkZXJlZEVudHJpZXNXaXRoUHJlZmVyZW5jZS5maW5kKGUgPT4gZS5pc1ByZWZlcnJlZE1hdGNoKSB8fFxuICAgICAgICAgICAgICAgICAgICBvcmRlcmVkRW50cmllc1dpdGhQcmVmZXJlbmNlWzBdO1xuICAgICAgICAgICAgICAgIG11bHRpcGxlTWF0Y2hlcyA9IHRydWU7XG4gICAgICAgICAgICAgICAgY2hlY2tNYXRjaGluZ0xvZ2luUmVsZXZhbmNlVGhyZXNob2xkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGF1dG9tYXRlZCAmJiBjaGVja01hdGNoaW5nTG9naW5SZWxldmFuY2VUaHJlc2hvbGQgJiYgbWF0Y2hpbmdMb2dpbiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoaW5nTG9naW4ucmVsZXZhbmNlU2NvcmUgPCAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuTG9nZ2VyLmluZm8oXG4gICAgICAgICAgICAgICAgICAgICAgICBcIk91ciBzZWxlY3RlZCBlbnRyeSBpcyBub3QgcmVsZXZhbnQgZW5vdWdoIHRvIGV4Y2VlZCBvdXIgdGhyZXNob2xkIHNvIHdpbGwgbm90IGJlIGF1dG8tZmlsbGVkLlwiXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIG1hdGNoaW5nTG9naW4gPSBudWxsO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobWF0Y2hpbmdMb2dpbi5sb3dGaWVsZE1hdGNoUmF0aW8pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5Mb2dnZXIuaW5mbyhcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiT3VyIHNlbGVjdGVkIGVudHJ5IGhhcyBhIGxvdyBmaWVsZCBtYXRjaCByYXRpbyBzbyB3aWxsIG5vdCBiZSBhdXRvLWZpbGxlZC5cIlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICBtYXRjaGluZ0xvZ2luID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChtYXRjaGluZ0xvZ2luICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAvL1RPRE86NDogIzYgbXVsdGktcGFnZVxuICAgICAgICAgICAgICAgIC8vIC8vIHJlY29yZCAvIHVwZGF0ZSB0aGUgaW5mbyBhdHRhY2hlZCB0byB0aGlzIHRhYiByZWdhcmRpbmdcbiAgICAgICAgICAgICAgICAvLyAvLyB0aGUgbnVtYmVyIG9mIHBhZ2VzIG9mIGZvcm1zIHdlIHdhbnQgdG8gZmlsbCBpblxuICAgICAgICAgICAgICAgIC8vIC8vIE5COiB3ZSBkbyB0aGlzIGV2ZW4gaWYgd2Uga25vdyB0aGlzIGlzIGEgc2luZ2xlIGZvcm1cbiAgICAgICAgICAgICAgICAvLyAvLyBzdWJtaXNzaW9uIGJlY2F1YXNlIHRoZW4gaWYgdGhlIHVzZXIgZ2V0cyBkdW1wZWRcbiAgICAgICAgICAgICAgICAvLyAvLyBiYWNrIHRvIHRoZSBmb3JtIChwYXNzd29yZCBlcnJvcj8pIHRoZW4gd2Uga25vdyBub3RcbiAgICAgICAgICAgICAgICAvLyAvLyB0byBhdXRvLXN1Ym1pdCBhZ2FpbiAodG8gYXZvaWQgZ2V0dGluZyBzdHVjayBpbiBhIGxvb3ApXG5cbiAgICAgICAgICAgICAgICAvLyBpZiAodGFiU3RhdGUuY3VycmVudFBhZ2UgPiB0YWJTdGF0ZS5tYXhpbXVtUGFnZSlcbiAgICAgICAgICAgICAgICAvLyB7XG4gICAgICAgICAgICAgICAgLy8gICAgIC8vIEkgZG9uJ3QgdGhpbmsgdGhpcyBzaG91bGQgZXZlciBoYXBwZW4gYmVjYXVzZSBpdCdzIHJlc2V0IG9uRm9ybVN1Ym1pdFxuICAgICAgICAgICAgICAgIC8vICAgICAvLyBiZWZvcmUgdGhpcyBwYWdlIGhhcyBsb2FkZWQuXG5cbiAgICAgICAgICAgICAgICAvLyAgICAgdGFiU3RhdGUuY3VycmVudFBhZ2UgPSAwO1xuICAgICAgICAgICAgICAgIC8vICAgICB0YWJTdGF0ZS5tYXhpbXVtUGFnZSA9IDA7XG4gICAgICAgICAgICAgICAgLy8gICAgIHRhYlN0YXRlLmZvcmNlQXV0b1N1Ym1pdCA9IG51bGw7XG4gICAgICAgICAgICAgICAgLy8gICAgIG1hdGNoUmVzdWx0LmNhbm5vdEF1dG9TdWJtaXRGb3JtID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAvLyAgICAgdGhpcy5Mb2dnZXIuaW5mbyhcIkV4Y2VlZGVkIGV4cGVjdGVkIG51bWJlciBvZiBwYWdlcyBkdXJpbmcgdGhpcyBmb3JtLWZpbGxpbmcgc2Vzc2lvbi4gTm90IGF1dG8tc3VibWl0aW5nIHRoaXMgZm9ybS5cIik7XG4gICAgICAgICAgICAgICAgLy8gfVxuXG4gICAgICAgICAgICAgICAgLy8gLy8gSWYgdGhlIHVzZXIgbWFudWFsbHkgcmVxdWVzdGVkIHRoaXMgdG8gYmUgZmlsbGVkIGluIG9yIHRoZSBjdXJyZW50IHBhZ2UgaXMgdW5rbm93blxuICAgICAgICAgICAgICAgIC8vIGlmICghYXV0b21hdGVkKS8vVE9ETzo0OiAjNiBtdWx0aS1wYWdlIHx8IHRhYlN0YXRlLmN1cnJlbnRQYWdlIDw9IDApXG4gICAgICAgICAgICAgICAgLy8ge1xuICAgICAgICAgICAgICAgIC8vICAgICBsZXQgbWF4aW11bVBhZ2VDb3VudCA9IDE7XG4gICAgICAgICAgICAgICAgLy8gICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWF0Y2hpbmdMb2dpbi5wYXNzd29yZHMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICAgICAgLy8gICAgIHtcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIGNvbnN0IHBhc3NGaWVsZCA9IG1hdGNoaW5nTG9naW4ucGFzc3dvcmRzW2ldO1xuICAgICAgICAgICAgICAgIC8vICAgICAgICAgaWYgKHBhc3NGaWVsZC5mb3JtRmllbGRQYWdlID4gbWF4aW11bVBhZ2VDb3VudClcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBtYXhpbXVtUGFnZUNvdW50ID0gcGFzc0ZpZWxkLmZvcm1GaWVsZFBhZ2U7XG4gICAgICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgICAgICAvLyAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXRjaGluZ0xvZ2luLm90aGVyRmllbGRzLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgICAgIC8vICAgICB7XG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBjb25zdCBvdGhlckZpZWxkID0gbWF0Y2hpbmdMb2dpbi5vdGhlckZpZWxkc1tpXTtcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIGlmIChvdGhlckZpZWxkLmZvcm1GaWVsZFBhZ2UgPiBtYXhpbXVtUGFnZUNvdW50KVxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIG1heGltdW1QYWdlQ291bnQgPSBvdGhlckZpZWxkLmZvcm1GaWVsZFBhZ2U7XG4gICAgICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgICAgICAvLyAgICAgLy9UT0RPOjQ6ICM2OiBtdWx0aS1wYWdlXG4gICAgICAgICAgICAgICAgLy8gICAgIC8vIC8vIGFsd2F5cyBhc3N1bWUgcGFnZSAxICh2ZXJ5IHJhcmUgY2FzZXMgd2lsbCBnbyB3cm9uZyAtIHNlZSBnaXRodWIgS2VlRm94ICM0MTEgZm9yIHJlbGV2YW50IGVuaGFuY2VtZW50IHJlcXVlc3QpXG4gICAgICAgICAgICAgICAgLy8gICAgIC8vIC8vIFBvc3NpYmxlIHJlZ3Jlc3Npb24gc2luY2UgdjEuNDogV2UgdXNlZCB0byBpZ25vcmUgY3VycmVudFBhZ2UgZW50aXJlbHkgZm9yIHRoZSBmaXJzdFxuICAgICAgICAgICAgICAgIC8vICAgICAvLyAvLyBwYWdlIG9mIGEgc3VibWlzc2lvbiwgbm93IHdlIG1pZ2h0IHRyeSB0byBnaXZlIHByZWZlcmVuY2UgdG8gcGFnZSAxIGZpZWxkcyAodGhvdWdoIHRvdGFsXG4gICAgICAgICAgICAgICAgLy8gICAgIC8vIC8vIHJlbGV2YW5jZSBzY29yZSBzaG91bGRuJ3QgYmUgc2hpZnRlZCBieSBlbm91Z2ggdG8gYWZmZWN0IG90aGVyd2lzZSB3ZWxsLW1hdGNoZWQgZmllbGRzKVxuICAgICAgICAgICAgICAgIC8vICAgICAvLyB0YWJTdGF0ZS5jdXJyZW50UGFnZSA9IDE7XG4gICAgICAgICAgICAgICAgLy8gICAgIC8vIHRhYlN0YXRlLm1heGltdW1QYWdlID0gbWF4aW11bVBhZ2VDb3VudDtcbiAgICAgICAgICAgICAgICAvLyAgICAgLy8gdGhpcy5Mb2dnZXIuZGVidWcoXCJjdXJyZW50UGFnZSBpczogXCIgKyB0YWJTdGF0ZS5jdXJyZW50UGFnZSk7XG4gICAgICAgICAgICAgICAgLy8gICAgIC8vIHRoaXMuTG9nZ2VyLmRlYnVnKFwibWF4aW11bVBhZ2UgaXM6IFwiICsgdGFiU3RhdGUubWF4aW11bVBhZ2UpO1xuICAgICAgICAgICAgICAgIC8vIH1cblxuICAgICAgICAgICAgICAgIC8vIERlZmF1bHQgYXV0by1maWxsIGJlaGF2aW91ciBkZXBlbmRzIHVwb24gd2hldGhlciB0aGlzIGlzIGF1dG9tYXRpYyBvclxuICAgICAgICAgICAgICAgIC8vIG1hbnVhbCwgdGhlIGNvcnJlc3BvbmRpbmcgdXNlciBcImF1dG9tYXRpY1wiIG9wdGlvbiwgaWYgdGhlcmUgYXJlIG9uZSBvciBtYW55IG1hdGNoZXNcbiAgICAgICAgICAgICAgICAvLyBhbmQgdGhlIHVzZXIgb3B0aW9uIHRvIHByZXZlbnQgYXV0b21hdGljIGZpbGwgZHVlIHRvIG11bHRpcGxlIG1hdGNoZXNcbiAgICAgICAgICAgICAgICBjb25zdCBhdXRvRmlsbEVuYWJsZWQgPVxuICAgICAgICAgICAgICAgICAgICBpc01hdGNoZWRMb2dpblJlcXVlc3QgfHxcbiAgICAgICAgICAgICAgICAgICAgKGF1dG9tYXRlZCAmJiBtdWx0aXBsZU1hdGNoZXMgJiYgIXRoaXMuY29uZmlnLmF1dG9GaWxsRm9ybXNXaXRoTXVsdGlwbGVNYXRjaGVzXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuY29uZmlnLmF1dG9GaWxsRm9ybXMpO1xuXG4gICAgICAgICAgICAgICAgLy8gRGVmYXVsdCBhdXRvLXN1Ym1pdCBiZWhhdmlvdXIgZGVwZW5kcyB1cG9uIHdoZXRoZXIgdGhpcyBpcyBhdXRvbWF0aWMgb3IgbWFudWFsIGFuZCB0aGUgY29ycmVzcG9uZGluZyB1c2VyIG9wdGlvblxuICAgICAgICAgICAgICAgIGNvbnN0IGF1dG9TdWJtaXRFbmFibGVkID0gaXNNYXRjaGVkTG9naW5SZXF1ZXN0XG4gICAgICAgICAgICAgICAgICAgID8gdGhpcy5jb25maWcuYXV0b1N1Ym1pdE1hdGNoZWRGb3Jtc1xuICAgICAgICAgICAgICAgICAgICA6IHRoaXMuY29uZmlnLmF1dG9TdWJtaXRGb3JtcztcblxuICAgICAgICAgICAgICAgIGFjdGlvbiA9IHsgZmlsbDogYXV0b0ZpbGxFbmFibGVkLCBzdWJtaXQ6IGF1dG9TdWJtaXRFbmFibGVkIH07XG5cbiAgICAgICAgICAgICAgICAvLyBPdmVycmlkZSBmaWxsIHByZWZlcmVuY2VzIGZyb20gcGVyLWVudHJ5IGNvbmZpZ3VyYXRpb24gb3B0aW9uc1xuICAgICAgICAgICAgICAgIC8vIHVubGVzcyB1c2VyIGV4cGxpY2l0eSBzZWxlY3RlZCB0aGUgbWF0Y2hlZCBlbnRyeVxuICAgICAgICAgICAgICAgIGlmICghaXNNYXRjaGVkTG9naW5SZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaGluZ0xvZ2luLmFsd2F5c0F1dG9GaWxsKSBhY3Rpb24uZmlsbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaGluZ0xvZ2luLm5ldmVyQXV0b0ZpbGwpIGFjdGlvbi5maWxsID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gT3ZlcnJpZGUgc3VibWl0IHByZWZlcmVuY2VzIGZyb20gcGVyLWVudHJ5IGNvbmZpZ3VyYXRpb24gb3B0aW9uc1xuICAgICAgICAgICAgICAgIGlmICghaXNNYXRjaGVkTG9naW5SZXF1ZXN0IHx8ICF0aGlzLmNvbmZpZy5tYW51YWxTdWJtaXRPdmVycmlkZVByb2hpYml0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoaW5nTG9naW4uYWx3YXlzQXV0b1N1Ym1pdCkgYWN0aW9uLnN1Ym1pdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaGluZ0xvZ2luLm5ldmVyQXV0b1N1Ym1pdCkgYWN0aW9uLnN1Ym1pdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChhY3Rpb24uZmlsbCB8fCBtYXRjaFJlc3VsdC5tdXN0QXV0b0ZpbGxGb3JtKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuTG9nZ2VyLmRlYnVnKFwiR29pbmcgdG8gYXV0by1maWxsIGEgZm9ybVwiKTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmZWF0dXJlcyA9IHN0b3JlLktlZVBhc3NEYXRhYmFzZXMuZmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgIGRiID0+IGRiLmZpbGVOYW1lID09PSBtYXRjaGluZ0xvZ2luLmRhdGFiYXNlLmZpbGVOYW1lXG4gICAgICAgICAgICAgICAgICAgICkuc2Vzc2lvbkZlYXR1cmVzO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzY29yZUNvbmZpZzogRmllbGRNYXRjaFNjb3JlQ29uZmlnID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHVuaXNoV3JvbmdJREFuZE5hbWU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZXMuaW5kZXhPZihcIktQUlBDX0ZJRUxEX0RFRkFVTFRfTkFNRV9BTkRfSURfRU1QVFlcIikgPj0gMFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXN0RmlsbGVkT3RoZXIgPSB0aGlzLmZpbGxNYW55Rm9ybUZpZWxkcyhcbiAgICAgICAgICAgICAgICAgICAgICAgIG90aGVyRmllbGRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hpbmdMb2dpbi5maWVsZHMuZmlsdGVyKGYgPT4gZi50eXBlICE9PSBcInBhc3N3b3JkXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgLTEsXG4gICAgICAgICAgICAgICAgICAgICAgICBzY29yZUNvbmZpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9tYXRlZFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXN0RmlsbGVkUGFzc3dvcmRzID0gdGhpcy5maWxsTWFueUZvcm1GaWVsZHMoXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZEZpZWxkcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoaW5nTG9naW4uZmllbGRzLmZpbHRlcihmID0+IGYudHlwZSA9PT0gXCJwYXNzd29yZFwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC0xLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcmVDb25maWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRvbWF0ZWRcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hSZXN1bHQuZm9ybVJlYWR5Rm9yU3VibWl0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hSZXN1bHQubGFzdEZpbGxlZFBhc3N3b3JkcyA9IGxhc3RGaWxsZWRQYXNzd29yZHM7XG4gICAgICAgICAgICAgICAgICAgIG1hdGNoUmVzdWx0Lmxhc3RGaWxsZWRPdGhlciA9IGxhc3RGaWxsZWRPdGhlcjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxhc3RGaWxsZWRQYXNzd29yZHMgJiYgbGFzdEZpbGxlZFBhc3N3b3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJtaXRUYXJnZXROZWlnaGJvdXIgPSBsYXN0RmlsbGVkUGFzc3dvcmRzWzBdLkRPTWVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobGFzdEZpbGxlZE90aGVyICYmIGxhc3RGaWxsZWRPdGhlci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJtaXRUYXJnZXROZWlnaGJvdXIgPSBsYXN0RmlsbGVkT3RoZXJbMF0uRE9NZWxlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1TYXZpbmcudXBkYXRlTWF0Y2hSZXN1bHQobWF0Y2hSZXN1bHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFdlIG9ubHkgZG8gdGhpcyBpZiBhbnkgZm9ybXMgd2VyZSBhdXRvLWZpbGxlZCBzdWNjZXNzZnVsbHlcbiAgICAgICAgaWYgKG1hdGNoUmVzdWx0LmZvcm1SZWFkeUZvclN1Ym1pdCkge1xuICAgICAgICAgICAgLy8gaWYgd2UgZGlkbid0IGFscmVhZHkgZGVmaW5lIGEgdXVpZCwgd2Ugc2V0IGl0IHVwIG5vd1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIG1hdGNoUmVzdWx0LlVVSUQgPT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICAgICAgbWF0Y2hSZXN1bHQuVVVJRCA9PSBudWxsIHx8XG4gICAgICAgICAgICAgICAgbWF0Y2hSZXN1bHQuVVVJRCA9PSBcIlwiXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICB0aGlzLkxvZ2dlci5kZWJ1ZyhcIlN5bmNpbmcgVVVJRCB0bzogXCIgKyBtYXRjaGluZ0xvZ2luLnV1aWQpO1xuICAgICAgICAgICAgICAgIG1hdGNoUmVzdWx0LlVVSUQgPSBtYXRjaGluZ0xvZ2luLnV1aWQ7XG4gICAgICAgICAgICAgICAgbWF0Y2hSZXN1bHQuZGJGaWxlTmFtZSA9IG1hdGNoaW5nTG9naW4uZGF0YWJhc2UuZmlsZU5hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiB0aGlzIGZvcm0gZmlsbCBpcyB0aGUgbm9uLWZpbmFsIHBhZ2Ugb2YgYSBtdWx0aS1wYWdlIGxvZ2luIHByb2Nlc3Mgd2UgcmVjb3JkIHRoZVxuICAgICAgICAvLyBVVUlEIGFuZCBkYkZpbGVuYW1lLiBXZSBhbHNvIGVuYWJsZSBhdXRvLXN1Ym1pdCBpbiBzb21lIGNpcmN1bXN0YW5jZXNcbiAgICAgICAgLy9UT0RPOjQ6ICM2OiBtdWx0aS1wYWdlXG4gICAgICAgIC8vIGlmIChtYXRjaFJlc3VsdC5VVUlEICE9IHVuZGVmaW5lZCAmJiBtYXRjaFJlc3VsdC5VVUlEICE9IG51bGwgJiYgbWF0Y2hSZXN1bHQuVVVJRCAhPSBcIlwiKVxuICAgICAgICAvLyB7XG4gICAgICAgIC8vICAgICBpZiAodGFiU3RhdGUuY3VycmVudFBhZ2UgPiAwICYmIHRhYlN0YXRlLmN1cnJlbnRQYWdlIDwgdGFiU3RhdGUubWF4aW11bVBhZ2UpXG4gICAgICAgIC8vICAgICB7XG4gICAgICAgIC8vICAgICAgICAgaWYgKG1hdGNoUmVzdWx0LlVVSUQpXG4gICAgICAgIC8vICAgICAgICAge1xuICAgICAgICAvLyAgICAgICAgICAgICB0aGlzLkxvZ2dlci5kZWJ1ZyhcIlNldHRpbmcgVVVJRCB0bzogXCIgKyBtYXRjaFJlc3VsdC5VVUlEKTtcbiAgICAgICAgLy8gICAgICAgICAgICAgdGFiU3RhdGUuVVVJRCA9IG1hdGNoUmVzdWx0LlVVSUQ7XG4gICAgICAgIC8vICAgICAgICAgfVxuICAgICAgICAvLyAgICAgICAgIGlmIChtYXRjaFJlc3VsdC5kYkZpbGVOYW1lKVxuICAgICAgICAvLyAgICAgICAgIHtcbiAgICAgICAgLy8gICAgICAgICAgICAgdGhpcy5Mb2dnZXIuZGVidWcoXCJTZXR0aW5nIGRiRmlsZU5hbWUgdG86IFwiICsgbWF0Y2hSZXN1bHQuZGJGaWxlTmFtZSk7XG4gICAgICAgIC8vICAgICAgICAgICAgIHRhYlN0YXRlLmRiRmlsZU5hbWUgPSBtYXRjaFJlc3VsdC5kYkZpbGVOYW1lO1xuICAgICAgICAvLyAgICAgICAgIH1cblxuICAgICAgICAvLyAgICAgICAgIC8vIFdlIGZvcmNlIGF1dG8gc3VibWl0IGZvciBhbGwgbXVsdGktcGFnZSBlbnRyaWVzIHRoYXQgaGF2ZSBiZWVuIHRyaWdnZXJlZFxuICAgICAgICAvLyAgICAgICAgIC8vIGJ5IGEgb25lLWNsaWNrIG9yIG1hdGNoZWQgbG9naW4gdXNlciBzZWxlY3Rpb24sIHByb3ZpZGVkIHRoYXQgb3BlcmF0aW9uXG4gICAgICAgIC8vICAgICAgICAgLy8gaGFzIG5vdCBhbHJlYWR5IGJlZW4gbWFya2VkIGNvbXBsZXRlIGJ5IHRoZSBvbkZvcm1TdWJtaXRIYW5kbGVyIGluIGZvcm1zU2F2ZVRhYi5qc1xuICAgICAgICAvLyAgICAgICAgIGlmICh0YWJTdGF0ZS51c2VyUmVjZW50bHlEZW1hbmRlZEF1dG9TdWJtaXQpXG4gICAgICAgIC8vICAgICAgICAge1xuICAgICAgICAvLyAgICAgICAgICAgICB0YWJTdGF0ZS5mb3JjZUF1dG9TdWJtaXQgPSB0cnVlO1xuICAgICAgICAvLyAgICAgICAgICAgICB0aGlzLkxvZ2dlci5kZWJ1ZyhcIlNldCBmb3JjZUF1dG9TdWJtaXQgdG86IHRydWVcIik7XG4gICAgICAgIC8vICAgICAgICAgfVxuICAgICAgICAvLyAgICAgfVxuICAgICAgICAvLyB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgIW1hdGNoUmVzdWx0LmNhbm5vdEF1dG9TdWJtaXRGb3JtICYmXG4gICAgICAgICAgICAoYWN0aW9uLnN1Ym1pdCB8fCBtYXRjaFJlc3VsdC5tdXN0QXV0b1N1Ym1pdEZvcm0pICYmXG4gICAgICAgICAgICBtYXRjaFJlc3VsdC5mb3JtUmVhZHlGb3JTdWJtaXRcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLkxvZ2dlci5pbmZvKFwiQXV0by1zdWJtaXR0aW5nIGZvcm0uLi5cIik7XG4gICAgICAgICAgICB0aGlzLnN1Ym1pdEZvcm0oZm9ybSwgc3VibWl0VGFyZ2V0TmVpZ2hib3VyKTtcbiAgICAgICAgfSBlbHNlIGlmIChpc01hdGNoZWRMb2dpblJlcXVlc3QpIHtcbiAgICAgICAgICAgIHRoaXMuTG9nZ2VyLmRlYnVnKFwiTWF0Y2hlZCBlbnRyeSByZXF1ZXN0IGlzIG5vdCBiZWluZyBhdXRvLXN1Ym1pdHRlZC5cIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy5tYXRjaFJlc3VsdC5hbGxNYXRjaGluZ0xvZ2lucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKGF1dG9tYXRlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLkxvZ2dlci5kZWJ1ZyhcIkF1dG9tYXRpYyBmb3JtIGZpbGwgY29tcGxldGUuXCIpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuTG9nZ2VyLmRlYnVnKFwiTWFudWFsIGZvcm0gZmlsbCBjb21wbGV0ZS5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLkxvZ2dlci5pbmZvKFwiTm90aGluZyB0byBmaWxsLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNvcnRNYXRjaGVkRW50cmllcyhlbnRyaWVzOiBFbnRyeVtdKTogRW50cnlbXSB7XG4gICAgICAgIHJldHVybiBlbnRyaWVzXG4gICAgICAgICAgICAubWFwKGUgPT4gbmV3IEVudHJ5KHsgLi4uZSB9KSlcbiAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBiLnJlbGV2YW5jZVNjb3JlIC0gYS5yZWxldmFuY2VTY29yZSk7XG4gICAgfVxuXG4gICAgZmxhZ1VzZXJQcmVmZXJyZWRFbnRyeShvcmRlcmVkRW50cmllczogRW50cnlbXSk6IEVudHJ5W10ge1xuICAgICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHdpbmRvdy5kb2N1bWVudC5VUkwpO1xuICAgICAgICB1cmwuaG9zdG5hbWUgPSBwdW55Y29kZS50b1VuaWNvZGUodXJsLmhvc3RuYW1lKTtcbiAgICAgICAgY29uc3QgY29uZiA9IGNvbmZpZ01hbmFnZXIuc2l0ZUNvbmZpZ0Zvcih1cmwuaHJlZik7XG4gICAgICAgIHJldHVybiBvcmRlcmVkRW50cmllcy5tYXAoXG4gICAgICAgICAgICBlID0+XG4gICAgICAgICAgICAgICAgbmV3IEVudHJ5KHtcbiAgICAgICAgICAgICAgICAgICAgLi4uZSxcbiAgICAgICAgICAgICAgICAgICAgaXNQcmVmZXJyZWRNYXRjaDogY29uZi5wcmVmZXJyZWRFbnRyeVV1aWQgPT09IGUudXVpZCA/IHRydWUgOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmaW5kU3VibWl0QnV0dG9uKGZvcm06IEhUTUxGb3JtRWxlbWVudCwgc3VibWl0VGFyZ2V0TmVpZ2hib3VyOiBIVE1MRWxlbWVudCkge1xuICAgICAgICBjb25zdCBjYW5kaWRhdGVzOiBTdWJtaXRDYW5kaWRhdGVbXSA9IFtdO1xuICAgICAgICBjb25zdCBESVNUQU5DRV9NQVhfU0NPUkUgPSAxMDA7XG4gICAgICAgIGNvbnN0IERJU1RBTkNFX0RJRkZFUkVOQ0VfRkFDVE9SID0gMjA7XG4gICAgICAgIGNvbnN0IFZJU0lCTEVfU0NPUkUgPSA2MDtcbiAgICAgICAgY29uc3QgQ0FUX0JVVFRPTklORk9STV9TQ09SRSA9IDYwO1xuICAgICAgICBjb25zdCBDQVRfU1VCTUlUSU5QVVRJTkZPUk1fU0NPUkUgPSA1MDtcbiAgICAgICAgY29uc3QgQ0FUX0JVVFRPTk9VVFNJREVGT1JNX1NDT1JFID0gNDA7XG4gICAgICAgIGNvbnN0IENBVF9JTUFHRUlOUFVUSU5GT1JNX1NDT1JFID0gNDA7XG4gICAgICAgIGNvbnN0IENBVF9CVVRUT05JTlBVVElORk9STV9TQ09SRSA9IDMwO1xuICAgICAgICBjb25zdCBDQVRfQlVUVE9OUk9MRUlORk9STV9TQ09SRSA9IDIwO1xuICAgICAgICBjb25zdCBDQVRfQlVUVE9OUk9MRU9VVFNJREVGT1JNX1NDT1JFID0gMTA7XG4gICAgICAgIGxldCBtaW5TY29yZVRvV2luID0gMDtcbiAgICAgICAgY29uc3QgZGlzdGFuY2VDYWxjID0gKHYsIHQpID0+IHRoaXMuY29tbW9uQW5jZXN0b3JEaXN0YW5jZSh2LCB0LCBkaXN0YW5jZU1hcCk7XG4gICAgICAgIGNvbnN0IGRpc3RhbmNlTWFwID0gbmV3IE1hcDxOb2RlLCBudW1iZXI+KCk7XG4gICAgICAgIGNvbnN0IGZVdGlscyA9IHRoaXMuZm9ybVV0aWxzO1xuXG4gICAgICAgIGZ1bmN0aW9uIHZlcmlmeVBvdGVudGlhbENhbmRpZGF0ZSh2YWx1ZTogSFRNTEVsZW1lbnQsIHNjb3JlOiBudW1iZXIpIHtcbiAgICAgICAgICAgIC8vIGFib3J0IGVhcmx5IGlmIHdlIGNhbid0IHdpbiBldmVuIHdpdGggYSBwZXJmZWN0IHZpc2liaWxpdHkgYW5kIGRpc3RhbmNlIHNjb3JlXG4gICAgICAgICAgICBpZiAobWluU2NvcmVUb1dpbiA+IHNjb3JlICsgVklTSUJMRV9TQ09SRSArIERJU1RBTkNFX01BWF9TQ09SRSkgcmV0dXJuO1xuXG4gICAgICAgICAgICBjb25zdCBpc1Zpc2libGUgPSBmVXRpbHMuaXNET01FbGVtZW50VmlzaWJsZSh2YWx1ZSk7XG5cbiAgICAgICAgICAgIC8vIFNvbWUgZm9ybXMgYXJlIGhpZGRlbiAoZS5nLiBUd2l0dGVyKSBhbmQgc2ltcGx5IHJldmVhbGVkIHRvIHRoZSB1c2VyIGF0IGEgbGF0ZXIgdGltZVxuICAgICAgICAgICAgLy8gVGhlcmVmb3JlIHdlIHNob3VsZCBvbmx5IHB1bmlzaCBiYXNlZCBvbiB2aXNpYmlsaXR5IGlmIHRoZSBmb3JtIHN1Ym1pdFRhcmdldE5laWdoYm91ciBpcyB2aXNpYmxlLlxuICAgICAgICAgICAgaWYgKGlzVmlzaWJsZSB8fCAhZlV0aWxzLmlzRE9NRWxlbWVudFZpc2libGUoc3VibWl0VGFyZ2V0TmVpZ2hib3VyKSkge1xuICAgICAgICAgICAgICAgIHNjb3JlICs9IFZJU0lCTEVfU0NPUkU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGFib3J0IGVhcmx5IGlmIHdlIGNhbid0IHdpbiBldmVuIHdpdGggYSBwZXJmZWN0IHZpc2liaWxpdHkgYW5kIGRpc3RhbmNlIHNjb3JlXG4gICAgICAgICAgICBpZiAobWluU2NvcmVUb1dpbiA+IHNjb3JlICsgRElTVEFOQ0VfTUFYX1NDT1JFKSByZXR1cm47XG5cbiAgICAgICAgICAgIGNhbmRpZGF0ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgZGlzdGFuY2U6IGRpc3RhbmNlQ2FsYyh2YWx1ZSwgc3VibWl0VGFyZ2V0TmVpZ2hib3VyKSxcbiAgICAgICAgICAgICAgICBlbGVtZW50OiB2YWx1ZSxcbiAgICAgICAgICAgICAgICBzY29yZTogc2NvcmVcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBtaW5TY29yZVRvV2luID0gc2NvcmU7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiByZXNvbHZlQXJpYUxhYmVsVmFsdWVzKGVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgICAgICBjb25zdCBsYWJlbHMgPSBbXTtcbiAgICAgICAgICAgIGlmIChlbGVtZW50Lmhhc0F0dHJpYnV0ZShcImFyaWEtbGFiZWxcIikpIHtcbiAgICAgICAgICAgICAgICBsYWJlbHMucHVzaChlbGVtZW50LmdldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIikudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbGVtZW50XG4gICAgICAgICAgICAgICAgLmdldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxsZWRieVwiKVxuICAgICAgICAgICAgICAgID8udHJpbSgpXG4gICAgICAgICAgICAgICAgLnNwbGl0KFwiIFwiKVxuICAgICAgICAgICAgICAgIC5mb3JFYWNoKGlkID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsYWJlbEVsZW1lbnQgPSBmb3JtLm93bmVyRG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxhYmVsRWxlbWVudCAmJiBsYWJlbEVsZW1lbnQuaW5uZXJUZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWxzLnB1c2gobGFiZWxFbGVtZW50LmlubmVyVGV4dC50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gbGFiZWxzO1xuICAgICAgICB9XG5cbiAgICAgICAgLypcbiAgICAgICAgICAgIEluIEZpcmVmb3ggQXJyYXkuZnJvbS4uLmZvcmVhY2ggaXMgYWJvdXQgNTAlIGZhc3RlciB0aGFuIHRoZSBhbHRlcm5hdGl2ZSBpbiB0aGlzIGNvbW1lbnQgYmVsb3cuLi4gYnV0IDIwJSBzbG93ZXIgaW4gQ2hyb21lLlxuICAgICAgICAgICAgY29uc3QgYnV0dG9ucyA9IGZvcm0ub3duZXJEb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJ1dHRvblwiKTtcbiAgICAgICAgICAgIGZvciAobGV0IGk9MDsgaTxidXR0b25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBidXR0b25zW2ldO1xuICAgICAgICAgICAgICAgIC4uLlxuICAgICAgICAgICAgKi9cbiAgICAgICAgQXJyYXkuZnJvbShmb3JtLm93bmVyRG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJidXR0b25cIikpLmZvckVhY2godmFsdWUgPT4ge1xuICAgICAgICAgICAgaWYgKCF2YWx1ZS5pc0Nvbm5lY3RlZCkgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKCF2YWx1ZS50eXBlIHx8IHZhbHVlLnR5cGUgIT0gXCJyZXNldFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VtYW50aWNWYWx1ZXM6IHN0cmluZ1tdID0gW107XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlLm5hbWUpIHNlbWFudGljVmFsdWVzLnB1c2godmFsdWUubmFtZS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUudGV4dENvbnRlbnQpIHNlbWFudGljVmFsdWVzLnB1c2godmFsdWUudGV4dENvbnRlbnQudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlLnZhbHVlKSBzZW1hbnRpY1ZhbHVlcy5wdXNoKHZhbHVlLnZhbHVlLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICAgICAgICAgIHNlbWFudGljVmFsdWVzLnB1c2goLi4ucmVzb2x2ZUFyaWFMYWJlbFZhbHVlcyh2YWx1ZSkpO1xuXG4gICAgICAgICAgICAgICAgbGV0IHNjb3JlID0gdGhpcy5zY29yZUFkanVzdG1lbnRGb3JNYWdpY1dvcmRzKFxuICAgICAgICAgICAgICAgICAgICBzZW1hbnRpY1ZhbHVlcyxcbiAgICAgICAgICAgICAgICAgICAgNTAsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VtYW50aWNXaGl0ZWxpc3RDYWNoZSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZW1hbnRpY0JsYWNrbGlzdENhY2hlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBzY29yZSArPVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZS5mb3JtICYmIHZhbHVlLmZvcm0gPT0gZm9ybVxuICAgICAgICAgICAgICAgICAgICAgICAgPyBDQVRfQlVUVE9OSU5GT1JNX1NDT1JFXG4gICAgICAgICAgICAgICAgICAgICAgICA6IENBVF9CVVRUT05PVVRTSURFRk9STV9TQ09SRTtcblxuICAgICAgICAgICAgICAgIHZlcmlmeVBvdGVudGlhbENhbmRpZGF0ZSh2YWx1ZSwgc2NvcmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBBcnJheS5mcm9tKGZvcm0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJpbnB1dFwiKSkuZm9yRWFjaCh2YWx1ZSA9PiB7XG4gICAgICAgICAgICBpZiAoIXZhbHVlLmlzQ29ubmVjdGVkKSByZXR1cm47XG4gICAgICAgICAgICBpZiAodmFsdWUudHlwZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbGV0IHNlbWFudGljU2NvcmUgPSAwO1xuXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlLnR5cGUgPT0gXCJzdWJtaXRcIiB8fCB2YWx1ZS50eXBlID09IFwiYnV0dG9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLm5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbWFudGljU2NvcmUgKz0gdGhpcy5zY29yZUFkanVzdG1lbnRGb3JNYWdpY1dvcmRzKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFt2YWx1ZS5uYW1lLnRvTG93ZXJDYXNlKCldLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDUwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VtYW50aWNXaGl0ZWxpc3RDYWNoZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbWFudGljQmxhY2tsaXN0Q2FjaGVcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBOYW1lcyBhcmUgbW9yZSBpbXBvcnRhbnQgYnV0IHNvbWV0aW1lcyB0aGV5IGRvbid0IGV4aXN0IG9yIGFyZSByYW5kb21cbiAgICAgICAgICAgICAgICAgICAgLy8gc28gY2hlY2sgd2hhdCBpcyBhY3R1YWxseSBkaXNwbGF5ZWQgdG8gdGhlIHVzZXJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VtYW50aWNWYWx1ZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZW1hbnRpY1ZhbHVlcy5wdXNoKHZhbHVlLnZhbHVlLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNlbWFudGljVmFsdWVzLnB1c2goLi4ucmVzb2x2ZUFyaWFMYWJlbFZhbHVlcyh2YWx1ZSkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VtYW50aWNWYWx1ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VtYW50aWNTY29yZSArPSB0aGlzLnNjb3JlQWRqdXN0bWVudEZvck1hZ2ljV29yZHMoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VtYW50aWNWYWx1ZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgNDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZW1hbnRpY1doaXRlbGlzdENhY2hlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VtYW50aWNCbGFja2xpc3RDYWNoZVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VtYW50aWNTY29yZSArPSB0aGlzLnNjb3JlQWRqdXN0bWVudEZvck1hZ2ljV29yZHMoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW3ZhbHVlLmlkLnRvTG93ZXJDYXNlKCldLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDIwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VtYW50aWNXaGl0ZWxpc3RDYWNoZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbWFudGljQmxhY2tsaXN0Q2FjaGVcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodmFsdWUudHlwZSA9PSBcInN1Ym1pdFwiIHx8IHZhbHVlLnR5cGUgPT0gXCJidXR0b25cIiB8fCB2YWx1ZS50eXBlID09IFwiaW1hZ2VcIikge1xuICAgICAgICAgICAgICAgICAgICBsZXQgc2NvcmUgPSBzZW1hbnRpY1Njb3JlO1xuICAgICAgICAgICAgICAgICAgICBzY29yZSArPVxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUudHlwZSA9PSBcImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBDQVRfQlVUVE9OSU5QVVRJTkZPUk1fU0NPUkVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHZhbHVlLnR5cGUgPT0gXCJpbWFnZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBDQVRfSU1BR0VJTlBVVElORk9STV9TQ09SRVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogQ0FUX1NVQk1JVElOUFVUSU5GT1JNX1NDT1JFO1xuICAgICAgICAgICAgICAgICAgICB2ZXJpZnlQb3RlbnRpYWxDYW5kaWRhdGUodmFsdWUsIHNjb3JlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIEFycmF5LmZyb20oZm9ybS5vd25lckRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbcm9sZT1idXR0b25dOm5vdChidXR0b24pXCIpKS5mb3JFYWNoKFxuICAgICAgICAgICAgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXZhbHVlLmlzQ29ubmVjdGVkKSByZXR1cm47XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VtYW50aWNWYWx1ZXM6IHN0cmluZ1tdID0gW107XG5cbiAgICAgICAgICAgICAgICAvLyB0ZWNobmljYWxcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUubmFtZSkgc2VtYW50aWNWYWx1ZXMucHVzaCh2YWx1ZS5uYW1lLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5pZCkgc2VtYW50aWNWYWx1ZXMucHVzaCh2YWx1ZS5pZC50b0xvd2VyQ2FzZSgpKTtcblxuICAgICAgICAgICAgICAgIC8vIHVzZXIgdmlzaWJsZVxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZS50aXRsZSkgc2VtYW50aWNWYWx1ZXMucHVzaCh2YWx1ZS50aXRsZS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUuaW5uZXJUZXh0KSBzZW1hbnRpY1ZhbHVlcy5wdXNoKHZhbHVlLmlubmVyVGV4dC50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUuZGF0YVNldCAmJiB2YWx1ZS5kYXRhU2V0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLmRhdGFTZXQudG9vbHRpcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VtYW50aWNWYWx1ZXMucHVzaCh2YWx1ZS5kYXRhU2V0LnRvb2x0aXAudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2VtYW50aWNWYWx1ZXMucHVzaCguLi5yZXNvbHZlQXJpYUxhYmVsVmFsdWVzKHZhbHVlKSk7XG5cbiAgICAgICAgICAgICAgICBsZXQgc2NvcmUgPSB0aGlzLnNjb3JlQWRqdXN0bWVudEZvck1hZ2ljV29yZHMoXG4gICAgICAgICAgICAgICAgICAgIHNlbWFudGljVmFsdWVzLFxuICAgICAgICAgICAgICAgICAgICA1MCxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZW1hbnRpY1doaXRlbGlzdENhY2hlLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbWFudGljQmxhY2tsaXN0Q2FjaGVcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHNjb3JlICs9XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLmZvcm0gJiYgdmFsdWUuZm9ybSA9PSBmb3JtXG4gICAgICAgICAgICAgICAgICAgICAgICA/IENBVF9CVVRUT05ST0xFSU5GT1JNX1NDT1JFXG4gICAgICAgICAgICAgICAgICAgICAgICA6IENBVF9CVVRUT05ST0xFT1VUU0lERUZPUk1fU0NPUkU7XG4gICAgICAgICAgICAgICAgdmVyaWZ5UG90ZW50aWFsQ2FuZGlkYXRlKHZhbHVlLCBzY29yZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKGNhbmRpZGF0ZXMubGVuZ3RoIDw9IDApIHJldHVybiBudWxsO1xuICAgICAgICBpZiAoY2FuZGlkYXRlcy5sZW5ndGggPT09IDEpIHJldHVybiBjYW5kaWRhdGVzWzBdLmVsZW1lbnQ7XG5cbiAgICAgICAgY29uc3Qgc3VibWl0RWxlbWVudHMgPSBjYW5kaWRhdGVzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgIGlmIChhLmRpc3RhbmNlID4gYi5kaXN0YW5jZSkgcmV0dXJuIC0xO1xuICAgICAgICAgICAgaWYgKGEuZGlzdGFuY2UgPCBiLmRpc3RhbmNlKSByZXR1cm4gMTtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBtYXhEaXN0YW5jZURpZmZlcmVuY2UgPVxuICAgICAgICAgICAgc3VibWl0RWxlbWVudHNbMF0uZGlzdGFuY2UgLSBzdWJtaXRFbGVtZW50c1tzdWJtaXRFbGVtZW50cy5sZW5ndGggLSAxXS5kaXN0YW5jZTtcbiAgICAgICAgY29uc3QgZGlzdGFuY2VTY29yZSA9IE1hdGgubWluKFxuICAgICAgICAgICAgRElTVEFOQ0VfTUFYX1NDT1JFLFxuICAgICAgICAgICAgRElTVEFOQ0VfRElGRkVSRU5DRV9GQUNUT1IgKiBtYXhEaXN0YW5jZURpZmZlcmVuY2VcbiAgICAgICAgKTtcbiAgICAgICAgbGV0IGRpc3RhbmNlRmFjdG9yID0gMSAvIHN1Ym1pdEVsZW1lbnRzLmxlbmd0aDtcbiAgICAgICAgbGV0IGxhc3REaXN0YW5jZSA9IHN1Ym1pdEVsZW1lbnRzWzBdLmRpc3RhbmNlO1xuICAgICAgICBzdWJtaXRFbGVtZW50cy5mb3JFYWNoKChjYW5kaWRhdGUsIGluZGV4LCBlbGVtZW50cykgPT4ge1xuICAgICAgICAgICAgaWYgKGNhbmRpZGF0ZS5kaXN0YW5jZSA8IGxhc3REaXN0YW5jZSkge1xuICAgICAgICAgICAgICAgIGRpc3RhbmNlRmFjdG9yID0gKGluZGV4ICsgMSkgLyBlbGVtZW50cy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgbGFzdERpc3RhbmNlID0gY2FuZGlkYXRlLmRpc3RhbmNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FuZGlkYXRlLnNjb3JlICs9IGRpc3RhbmNlRmFjdG9yICogZGlzdGFuY2VTY29yZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy9UT0RPOjQ6IG1vcmUgYWNjdXJhdGUgc2VhcmNoaW5nIG9mIHN1Ym1pdCBidXR0b25zLCBldGMuIHRvIGF2b2lkIHBhc3N3b3JkIHJlc2V0cyBpZiBwb3NzaWJsZVxuICAgICAgICAvLyBtYXliZSBzcGVjaWFsIGNhc2VzIGZvciBjb21tb24gSFRNTCBvdXRwdXQgcGF0dGVybnMgKGUuZy4gamF2YXNjcmlwdC1vbmx5IEFTUC5ORVQgZm9ybXMpXG5cbiAgICAgICAgbGV0IG1heFNjb3JlID0gc3VibWl0RWxlbWVudHNbMF0uc2NvcmU7XG4gICAgICAgIGxldCBtYXhTY29yZUVsZW1lbnQgPSBzdWJtaXRFbGVtZW50c1swXS5lbGVtZW50O1xuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHN1Ym1pdEVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoc3VibWl0RWxlbWVudHNbaV0uc2NvcmUgPiBtYXhTY29yZSkge1xuICAgICAgICAgICAgICAgIG1heFNjb3JlID0gc3VibWl0RWxlbWVudHNbaV0uc2NvcmU7XG4gICAgICAgICAgICAgICAgbWF4U2NvcmVFbGVtZW50ID0gc3VibWl0RWxlbWVudHNbaV0uZWxlbWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWF4U2NvcmVFbGVtZW50O1xuICAgIH1cblxuICAgIHByaXZhdGUgc2NvcmVBZGp1c3RtZW50Rm9yTWFnaWNXb3JkcyhcbiAgICAgICAgc2VtYW50aWNWYWx1ZXM6IHN0cmluZ1tdLFxuICAgICAgICBmYWN0b3I6IG51bWJlcixcbiAgICAgICAgc2VtYW50aWNXaGl0ZWxpc3RDYWNoZSxcbiAgICAgICAgc2VtYW50aWNCbGFja2xpc3RDYWNoZVxuICAgICkge1xuICAgICAgICAvL1RPRE86NDogb3RoZXIgbGFuZ3VhZ2VzXG4gICAgICAgIGNvbnN0IGdvb2RXb3JkcyA9IFtcbiAgICAgICAgICAgIFwic3VibWl0XCIsXG4gICAgICAgICAgICBcImxvZ2luXCIsXG4gICAgICAgICAgICBcImVudGVyXCIsXG4gICAgICAgICAgICBcImxvZyBpblwiLFxuICAgICAgICAgICAgXCJzaWduaW5cIixcbiAgICAgICAgICAgIFwic2lnbiBpblwiLFxuICAgICAgICAgICAgXCJuZXh0XCIsXG4gICAgICAgICAgICBcImNvbnRpbnVlXCJcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgYmFkV29yZHMgPSBbXG4gICAgICAgICAgICBcInJlc2V0XCIsXG4gICAgICAgICAgICBcImNhbmNlbFwiLFxuICAgICAgICAgICAgXCJiYWNrXCIsXG4gICAgICAgICAgICBcImFib3J0XCIsXG4gICAgICAgICAgICBcInVuZG9cIixcbiAgICAgICAgICAgIFwiZXhpdFwiLFxuICAgICAgICAgICAgXCJlbXB0eVwiLFxuICAgICAgICAgICAgXCJjbGVhclwiLFxuICAgICAgICAgICAgXCJjYXB0Y2hhXCIsXG4gICAgICAgICAgICBcInRvdHBcIixcbiAgICAgICAgICAgIFwiZm9yZ290XCIsXG4gICAgICAgICAgICBcImRpc21pc3NcIixcbiAgICAgICAgICAgIFwiZGVsZXRlXCIsXG4gICAgICAgICAgICBcInNob3dcIixcbiAgICAgICAgICAgIFwicmV2ZWFsXCJcbiAgICAgICAgXTtcbiAgICAgICAgbGV0IGdvb2RTY29yZSA9IGZhbHNlO1xuICAgICAgICBsZXQgYmFkU2NvcmUgPSBmYWxzZTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlbWFudGljVmFsdWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoZ29vZFNjb3JlKSBicmVhaztcbiAgICAgICAgICAgIGlmICghc2VtYW50aWNWYWx1ZXNbaV0pIGNvbnRpbnVlO1xuICAgICAgICAgICAgY29uc3Qgc2VtYW50aWNWYWx1ZSA9IHNlbWFudGljVmFsdWVzW2ldLnRyaW0oKTtcbiAgICAgICAgICAgIGlmICghc2VtYW50aWNWYWx1ZSkgY29udGludWU7XG5cbiAgICAgICAgICAgIGlmIChzZW1hbnRpY1doaXRlbGlzdENhY2hlW3NlbWFudGljVmFsdWVdID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgZ29vZFNjb3JlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzZW1hbnRpY1doaXRlbGlzdENhY2hlW3NlbWFudGljVmFsdWVdID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBnb29kV29yZHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoc2VtYW50aWNWYWx1ZS5pbmRleE9mKGdvb2RXb3Jkc1tqXSkgPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICBnb29kU2NvcmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBzZW1hbnRpY1doaXRlbGlzdENhY2hlW3NlbWFudGljVmFsdWVdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2VtYW50aWNXaGl0ZWxpc3RDYWNoZVtzZW1hbnRpY1ZhbHVlXSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlbWFudGljVmFsdWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoYmFkU2NvcmUpIGJyZWFrO1xuICAgICAgICAgICAgaWYgKCFzZW1hbnRpY1ZhbHVlc1tpXSkgY29udGludWU7XG4gICAgICAgICAgICBjb25zdCBzZW1hbnRpY1ZhbHVlID0gc2VtYW50aWNWYWx1ZXNbaV0udHJpbSgpO1xuICAgICAgICAgICAgaWYgKCFzZW1hbnRpY1ZhbHVlKSBjb250aW51ZTtcblxuICAgICAgICAgICAgaWYgKHNlbWFudGljQmxhY2tsaXN0Q2FjaGVbc2VtYW50aWNWYWx1ZV0gPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBiYWRTY29yZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2VtYW50aWNCbGFja2xpc3RDYWNoZVtzZW1hbnRpY1ZhbHVlXSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgYmFkV29yZHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoc2VtYW50aWNWYWx1ZS5pbmRleE9mKGJhZFdvcmRzW2pdKSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGJhZFNjb3JlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgc2VtYW50aWNCbGFja2xpc3RDYWNoZVtzZW1hbnRpY1ZhbHVlXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbWFudGljQmxhY2tsaXN0Q2FjaGVbc2VtYW50aWNWYWx1ZV0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZ29vZFNjb3JlICYmIGJhZFNjb3JlKSByZXR1cm4gMDtcbiAgICAgICAgaWYgKGJhZFNjb3JlKSByZXR1cm4gLTEgKiBmYWN0b3I7XG4gICAgICAgIGlmIChnb29kU2NvcmUpIHJldHVybiBmYWN0b3I7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIHByaXZhdGUgY29tbW9uQW5jZXN0b3JEaXN0YW5jZShub2RlQTogTm9kZSwgbm9kZUI6IE5vZGUsIGRpc3RhbmNlTWFwOiBNYXA8Tm9kZSwgbnVtYmVyPikge1xuICAgICAgICBsZXQgZGlzdGFuY2UgPSAxO1xuICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTtcbiAgICAgICAgY29uc3QgcGVuZGluZ01hcDogQXJyYXk8Tm9kZT4gPSBbXTtcbiAgICAgICAgbGV0IHBlbmRpbmdNYXBTdGFydERpc3RhbmNlID0gMDtcblxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uZC1hc3NpZ25cbiAgICAgICAgd2hpbGUgKChub2RlQSA9IG5vZGVBLnBhcmVudEVsZW1lbnQpKSB7XG4gICAgICAgICAgICBjb25zdCBjYWNoZWROb2RlRGlzdGFuY2UgPSBkaXN0YW5jZU1hcC5nZXQobm9kZUEpO1xuXG4gICAgICAgICAgICAvLyBJZiB3ZSBhbHJlYWR5IGtub3cgaG93IGZhciB0aGUgcGFyZW50IGlzIHdlIGNhbiByZXR1cm4gZWFybHkgYnV0IHdlIG1heSBoYXZlIGxlYXJudCBhYm91dCBtb3JlIG5vZGVzIG9uIG91ciB3YXlcbiAgICAgICAgICAgIGlmIChjYWNoZWROb2RlRGlzdGFuY2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGRpc3RhbmNlICs9IGNhY2hlZE5vZGVEaXN0YW5jZTtcbiAgICAgICAgICAgICAgICBwZW5kaW5nTWFwU3RhcnREaXN0YW5jZSA9IGNhY2hlZE5vZGVEaXN0YW5jZSArIDE7XG4gICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyB3ZSBrbm93IHdlIGRvbid0IGtub3cgaG93IGZhciB0aGlzIG5vZGUgaXMgc28gbGV0cyBpbXBsaWNpdGx5IHN0b3JlIGhvdyBmYXIgd2UgaGF2ZSBnb3Qgc28gZmFyXG4gICAgICAgICAgICBwZW5kaW5nTWFwLnB1c2gobm9kZUEpO1xuXG4gICAgICAgICAgICBpZiAobm9kZUEuY29udGFpbnMobm9kZUIpKSB7XG4gICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGlzdGFuY2UrKztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmb3VuZCkge1xuICAgICAgICAgICAgLy8gZWFjaCBub2RlIHRoYXQgd2UgY2FtZSBhY3Jvc3Mgb24gb3VyIGpvdXJuZXkgY2FuIGJlIGFzc2lnbmVkIGEgdmFsdWUgb2YgaG93IGZhciBpdCBpcyBmcm9tIHRoZSBjb21tb24gcGFyZW50XG4gICAgICAgICAgICBpZiAocGVuZGluZ01hcC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IHBlbmRpbmdNYXBTdGFydERpc3RhbmNlOyBpIDwgZGlzdGFuY2UgJiYgcGVuZGluZ01hcC5sZW5ndGggPiAwOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm9kZSA9IHBlbmRpbmdNYXAucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlTWFwLnNldChub2RlLCBpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZGlzdGFuY2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBEaXNjb25uZWN0ZWQgbm9kZSAoSSBndWVzcyAtIHByb2JhYmx5IHdvbid0IGV2ZXIgaGFwcGVuKVxuICAgICAgICAgICAgcmV0dXJuIDkwMDcxOTkyNTQ3NDA5OTE7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTdWJtaXQgYSBmb3JtXG4gICAgcHJpdmF0ZSBzdWJtaXRGb3JtKGZvcm06IEhUTUxGb3JtRWxlbWVudCwgc3VibWl0VGFyZ2V0TmVpZ2hib3VyOiBIVE1MRWxlbWVudCkge1xuICAgICAgICBjb25zdCBzdWJtaXRFbGVtZW50ID0gdGhpcy5maW5kU3VibWl0QnV0dG9uKGZvcm0sIHN1Ym1pdFRhcmdldE5laWdoYm91cik7XG5cbiAgICAgICAgLy8gQXZvaWQgc2VhcmNoaW5nIGZvciBtYXRjaGluZyBwYXNzd29yZHMgdXBvbiBhdXRvLXN1Ym1pc3Npb25cbiAgICAgICAgdGhpcy5mb3JtU2F2aW5nLnJlbW92ZUFsbFN1Ym1pdEhhbmRsZXJzKCk7XG5cbiAgICAgICAgLy8gSWYgd2UndmUgZm91bmQgYSBidXR0b24gdG8gY2xpY2ssIHVzZSB0aGF0OyBpZiBub3QsIGp1c3Qgc3VibWl0IHRoZSBmb3JtLlxuICAgICAgICBpZiAoc3VibWl0RWxlbWVudCAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLkxvZ2dlci5kZWJ1ZyhcbiAgICAgICAgICAgICAgICBcIlN1Ym1pdGluZyB1c2luZyBlbGVtZW50OiBcIiArIChzdWJtaXRFbGVtZW50IGFzIGFueSkubmFtZSArIFwiOiBcIiArIHN1Ym1pdEVsZW1lbnQuaWRcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBzdWJtaXRFbGVtZW50LmNsaWNrKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLkxvZ2dlci5kZWJ1ZyhcIlN1Ym1pdGluZyB1c2luZyBmb3JtXCIpO1xuICAgICAgICAgICAgZm9ybS5zdWJtaXQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vVE9ETzo0OiBtYXliZSBzb21ldGhpbmcgbGlrZSB0aGlzIG1pZ2h0IGJlIHVzZWZ1bD8gRHVubm8gd2h5IGEgY2xpY2soKVxuICAgICAgICAvLyBhYm92ZSB3b3VsZG4ndCBiZSBzdWZmaWNpZW50IGJ1dCBtYXliZSBzb21lIGN1c3RvbSBldmVudCByYWlzaW5nIG1pZ2h0IGJlIGhhbmR5Li4uXG4gICAgICAgIC8qXG4gICAgICAgIGZ1bmN0aW9uIHNpbXVsYXRlQ2xpY2soKSB7XG4gICAgICAgIHZhciBldnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudChcIk1vdXNlRXZlbnRzXCIpO1xuICAgICAgICBldnQuaW5pdE1vdXNlRXZlbnQoXCJjbGlja1wiLCB0cnVlLCB0cnVlLCB3aW5kb3csXG4gICAgICAgICAgICAwLCAwLCAwLCAwLCAwLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgMCwgbnVsbCk7XG4gICAgICAgIHZhciBjYiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2hlY2tib3hcIik7XG4gICAgICAgIHZhciBjYW5jZWxlZCA9ICFjYi5kaXNwYXRjaEV2ZW50KGV2dCk7XG4gICAgICAgIGlmKGNhbmNlbGVkKSB7XG4gICAgICAgICAgICAvLyBBIGhhbmRsZXIgY2FsbGVkIHByZXZlbnREZWZhdWx0XG4gICAgICAgICAgICBhbGVydChcImNhbmNlbGVkXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gTm9uZSBvZiB0aGUgaGFuZGxlcnMgY2FsbGVkIHByZXZlbnREZWZhdWx0XG4gICAgICAgICAgICBhbGVydChcIm5vdCBjYW5jZWxlZFwiKTtcbiAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgICovXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjYWxjdWxhdGVSZWxldmFuY2VTY29yZShcbiAgICAgICAgZW50cnk6IEVudHJ5LFxuICAgICAgICBwYXNzd29yZEZpZWxkczogTWF0Y2hlZEZpZWxkW10sXG4gICAgICAgIG90aGVyRmllbGRzOiBNYXRjaGVkRmllbGRbXSxcbiAgICAgICAgY3VycmVudFBhZ2U6IG51bWJlcixcbiAgICAgICAgZm9ybVZpc2libGU6IGJvb2xlYW4sXG4gICAgICAgIHNjb3JlQ29uZmlnOiBGaWVsZE1hdGNoU2NvcmVDb25maWcsXG4gICAgICAgIHZpc2libGVGaWVsZENhY2hlOiBWaXNpYmxlRmllbGRDYWNoZVxuICAgICkge1xuICAgICAgICBsZXQgc2NvcmUgPSAwO1xuICAgICAgICBsZXQgbG93RmllbGRNYXRjaFJhdGlvID0gZmFsc2U7XG5cbiAgICAgICAgLy8gS2VlIDMuNCsgbm8gbG9uZ2VyIGNvbnNpZGVycyBwcmlvcml0eSBvdmVycmlkZXMgYmVjYXVzZSB0aGV5IHdlcmVcbiAgICAgICAgLy8gY29tcGxpY2F0ZWQgYW5kIHVucmVsaWFibGUgZXZlbiB3aGVuIGZ1bGx5IHVuZGVyc3Rvb2QuXG5cbiAgICAgICAgLy8gS2VlIDEuNSsgbm8gbG9uZ2VyIGNvbnNpZGVycyBhY3Rpb24gVVJMcyBpbiByZWxldmFuY2Ugd2VpZ2h0aW5nLiBTaW5jZSB0aGUgb25seVxuICAgICAgICAvLyBlbnRyeSBlbnRyaWVzIG9mIGludGVyZXN0IGFyZSBhbHJlYWR5IHByZS1tYXRjaGVkIGJ5IEtlZVBhc3MsIHRoaXMgc2hvdWxkIGhhdmUgYmVlblxuICAgICAgICAvLyBhZGRpbmcgbmVnbGlnYWJsZSBhY2N1cmFjeSB0byB0aGUgZm9ybSBtYXRjaGluZy5cblxuICAgICAgICBzY29yZSArPSBlbnRyeS5tYXRjaEFjY3VyYWN5O1xuXG4gICAgICAgIC8vIFB1bmlzaCBidXQgZG9uJ3QgZW50aXJlbHkgZXhjbHVkZSBtYXRjaGVzIGFnYWluc3QgaW52aXNpYmxlIGZvcm1zXG4gICAgICAgIC8vIFRoaXMgaXMgaW4gYWRkaXRpb24gdG8gdGhlIG1heGltdW0gc2NvcmUgb2YgaW52aXNpYmxlIGZpZWxkcyBiZWluZyBsaW1pdGVkXG4gICAgICAgIC8vIHNvIHRoYXQgZm9ybXMgd2l0aCBzb21lIHZpc2libGUgZmllbGRzIGJ1dCBpbnZpc2libGUgdXNlcm5hbWUvcGFzc3dvcmRcbiAgICAgICAgLy8gZmllbGRzIChvciBvdXIgYmVzdCBndWVzcyBhdCB0aGVtIGFueXdheSkgYXJlIGNvbnNpZGVyZWQgYSBsZXNzIGxpa2VseSBtYXRjaFxuICAgICAgICBpZiAoIWZvcm1WaXNpYmxlKSBzY29yZSAtPSAyMDtcblxuICAgICAgICAvLyBUaGlzIGlzIHNpbWlsYXIgdG8gX2ZpbGxNYW55Rm9ybUZpZWxkcyBzbyBtaWdodCBiZSBhYmxlIHRvIHJldXNlIHRoZSByZXN1bHRzIGluIGZ1dHVyZVxuICAgICAgICAvLyAoYnV0IG5lZWQgdG8gd2F0Y2ggZm9yIGNoYW5nZXMgdGhhdCBpbnZhbGlkYXRlIHRoZSBlYXJsaWVyIGNhbGN1bGF0aW9ucykuXG5cbiAgICAgICAgLy8gUmVxdWlyZSBhdCBsZWFzdCBhIHR5cGUgbWF0Y2ggZm9yIDItZmllbGQgZm9ybXMgKGUuZy4gdXNlci9wYXNzKTsgMSBtaXNzaW5nXG4gICAgICAgIC8vIG1hdGNoIGZvciAzIG9yIDQgZmllbGQgZm9ybXM7IGV0Yy5cbiAgICAgICAgY29uc3QgbWluTWF0Y2hlZEZpZWxkQ291bnRSYXRpbyA9IDAuNTAxO1xuXG4gICAgICAgIGNvbnN0IFtvdGhlclJlbGV2YW5jZVNjb3JlLCBvdGhlckZpZWxkTWF0Y2hTdWNjZXNzZXNdID0gdGhpcy5kZXRlcm1pbmVSZWxldmFuY2VTY29yZXMoXG4gICAgICAgICAgICBcIm90aGVyXCIsXG4gICAgICAgICAgICBvdGhlckZpZWxkcyxcbiAgICAgICAgICAgIGVudHJ5LmZpZWxkcy5maWx0ZXIoZiA9PiBmLnR5cGUgIT09IFwicGFzc3dvcmRcIiksXG4gICAgICAgICAgICBjdXJyZW50UGFnZSxcbiAgICAgICAgICAgIHNjb3JlQ29uZmlnLFxuICAgICAgICAgICAgdmlzaWJsZUZpZWxkQ2FjaGUub3RoZXJcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgW3Bhc3N3b3JkUmVsZXZhbmNlU2NvcmUsIHBhc3N3b3JkRmllbGRNYXRjaFN1Y2Nlc3Nlc10gPSB0aGlzLmRldGVybWluZVJlbGV2YW5jZVNjb3JlcyhcbiAgICAgICAgICAgIFwicGFzc3dvcmRcIixcbiAgICAgICAgICAgIHBhc3N3b3JkRmllbGRzLFxuICAgICAgICAgICAgZW50cnkuZmllbGRzLmZpbHRlcihmID0+IGYudHlwZSA9PT0gXCJwYXNzd29yZFwiKSxcbiAgICAgICAgICAgIGN1cnJlbnRQYWdlLFxuICAgICAgICAgICAgc2NvcmVDb25maWcsXG4gICAgICAgICAgICB2aXNpYmxlRmllbGRDYWNoZS5wYXNzd29yZFxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IHRvdGFsUmVsZXZhbmNlU2NvcmUgPSBvdGhlclJlbGV2YW5jZVNjb3JlICsgcGFzc3dvcmRSZWxldmFuY2VTY29yZTtcblxuICAgICAgICAvLyBPbmx5IGNvbnNpZGVyIGZpZWxkcyB0aGF0IGNhbiBldmVyIG1hdGNoIGFib3ZlIHRoZSBtaW5pbXVtIChlc3NlbnRpYWxseVxuICAgICAgICAvLyBpZ25vcmUgZW1wdHkgZm9ybSBvciBlbnRyeSBmaWVsZHMpLiBXaWxsIHVuZGVyZXN0aW1hdGUgbnVtYmVyIG9mIGZvcm1cbiAgICAgICAgLy8gZmllbGRzLCByZXN1bHRpbmcgaW4gaW5jcmVhc2VkIG1hdGNoIHJhdGlvIGFuZCBsZXNzIGFjY3VyYXRlIHJlbGV2YW5jeVxuICAgICAgICAvLyBzY29yZXMgZm9yIGZvcm1zIHRoYXQgY29udGFpbiBhIHVzZXJuYW1lL3Bhc3N3b3JkIGZpZWxkIHdpdGggbm8gbmFtZVxuICAgICAgICAvLyBvciBpZCBhdHRyaWJ1dGVzLiBObyBpZGVhIGlmIHRoaXMgd2lsbCBjYXVzZSBhIHByb2JsZW0uIFNlZW1zIHRvLlxuICAgICAgICAvLyBNaXRpZ2F0aW5nIGJ5IGFkanVzdGluZyBtaW4gcmVsZXZhbmN5IHZhbHVlcywgZXRjLiBzbyBjYW4gcmVtb3ZlXG4gICAgICAgIC8vIHRoaXMgY29tbWVudCBpbiBhIGZldyB2ZXJzaW9ucyBpZiBhbGwgaXMgZ29vZC5cbiAgICAgICAgLy8gdjMuNSBzdGlsbCBub3QgZ29vZC4gSGF2ZSBmaXhlZCBhIHZpc2liaWxpdHkgYnVnLCB3aGljaCBleGFjZXJiYXRlc1xuICAgICAgICAvLyBzb21lIG90aGVyIGJ1Z3MuIFdpbGwgdHJ5IGlnbm9yaW5nIG5vbi10ZXh0L3Bhc3N3b3JkIGZpZWxkcyBpbiByYXRpb1xuICAgICAgICAvLyBjYWxjdWxhdGlvbiBmb3IgYXV0b2ZpbGwgKGNhbiBleHRlbmQgdG8gZm9ybSBzZWxlY3Rpb24gY2FsY3VsYXRpb24gbGF0ZXIgaWYgZ29vZClcbiAgICAgICAgY29uc3QgZm9ybUZpZWxkQ291bnQgPSBwYXNzd29yZEZpZWxkc1xuICAgICAgICAgICAgLmNvbmNhdChvdGhlckZpZWxkcylcbiAgICAgICAgICAgIC5maWx0ZXIoZiA9PiBmLmZpZWxkLmxvY2F0b3JzWzBdLmlkIHx8IGYuZmllbGQubG9jYXRvcnNbMF0ubmFtZSB8fCBmLmZpZWxkLnZhbHVlKVxuICAgICAgICAgICAgLmxlbmd0aDtcbiAgICAgICAgY29uc3QgbG9naW5GaWVsZENvdW50ID0gZW50cnkuZmllbGRzLmZpbHRlcihcbiAgICAgICAgICAgIGYgPT4gZi5sb2NhdG9yc1swXS5pZCB8fCBmLmxvY2F0b3JzWzBdLm5hbWUgfHwgZi52YWx1ZVxuICAgICAgICApLmxlbmd0aDtcbiAgICAgICAgY29uc3QgZm9ybUZpZWxkQ291bnRGb3JBdXRvZmlsbCA9IHBhc3N3b3JkRmllbGRzXG4gICAgICAgICAgICAuY29uY2F0KG90aGVyRmllbGRzKVxuICAgICAgICAgICAgLmZpbHRlcihcbiAgICAgICAgICAgICAgICBmID0+XG4gICAgICAgICAgICAgICAgICAgIChmLmZpZWxkLnR5cGUgPT09IFwicGFzc3dvcmRcIiB8fCBmLmZpZWxkLnR5cGUgPT09IFwidGV4dFwiKSAmJlxuICAgICAgICAgICAgICAgICAgICAoZi5maWVsZC5sb2NhdG9yc1swXS5pZCB8fCBmLmZpZWxkLmxvY2F0b3JzWzBdLm5hbWUpXG4gICAgICAgICAgICApLmxlbmd0aDtcbiAgICAgICAgY29uc3QgbG9naW5GaWVsZENvdW50Rm9yQXV0b2ZpbGwgPSBlbnRyeS5maWVsZHMuZmlsdGVyKFxuICAgICAgICAgICAgZiA9PlxuICAgICAgICAgICAgICAgIChmLnR5cGUgPT09IFwicGFzc3dvcmRcIiB8fCBmLnR5cGUgPT09IFwidGV4dFwiKSAmJlxuICAgICAgICAgICAgICAgIChmLmxvY2F0b3JzWzBdLmlkIHx8IGYubG9jYXRvcnNbMF0ubmFtZSB8fCBmLnZhbHVlKVxuICAgICAgICApLmxlbmd0aDtcblxuICAgICAgICBjb25zdCBmb3JtTWF0Y2hlZEZpZWxkQ291bnRGb3JBdXRvZmlsbCA9XG4gICAgICAgICAgICBvdGhlckZpZWxkTWF0Y2hTdWNjZXNzZXMuZmlsdGVyKHMgPT4gcyA9PT0gdHJ1ZSkubGVuZ3RoICtcbiAgICAgICAgICAgIHBhc3N3b3JkRmllbGRNYXRjaFN1Y2Nlc3Nlcy5maWx0ZXIocyA9PiBzID09PSB0cnVlKS5sZW5ndGg7XG5cbiAgICAgICAgY29uc3QgbnVtYmVyT2ZOZXdQYXNzd29yZEZpZWxkcyA9IHBhc3N3b3JkRmllbGRzLmZpbHRlcihmID0+XG4gICAgICAgICAgICBmLmZpZWxkLmxvY2F0b3JzWzBdLmF1dG9jb21wbGV0ZVZhbHVlcz8uc29tZSh2ID0+IHYgPT09IFwibmV3LXBhc3N3b3JkXCIpXG4gICAgICAgICkubGVuZ3RoO1xuXG4gICAgICAgIC8vIExpbWl0aW5nIHRvIG51bWJlciBvZiBlbnRyeSBmaWVsZHMgd2lsbCByZWR1Y2UgZmFsc2UgcG9zaXRpdmVzIGJ1dFxuICAgICAgICAvL2luY3JlYXNlIGNoYW5jZSBvZiBhIHZhbGlkIGZvcm0gYmVpbmcgbWlzc2VkLlxuICAgICAgICAvLyBUbyBoZWxwIHdpdGggcGFzc3dvcmQgY2hhbmdpbmcsIHdlIHRyZWF0IGFueSBrbm93biBcIm5ldyBwYXNzd29yZFwiIGZpZWxkcyBhcyBhbiBhdXRvbWF0aWMgbWF0Y2hcbiAgICAgICAgY29uc3QgZmllbGRNYXRjaFJhdGlvRm9yQXV0b2ZpbGwgPVxuICAgICAgICAgICAgTWF0aC5taW4oXG4gICAgICAgICAgICAgICAgbG9naW5GaWVsZENvdW50Rm9yQXV0b2ZpbGwgKyBudW1iZXJPZk5ld1Bhc3N3b3JkRmllbGRzLFxuICAgICAgICAgICAgICAgIGZvcm1NYXRjaGVkRmllbGRDb3VudEZvckF1dG9maWxsXG4gICAgICAgICAgICApIC8gTWF0aC5tYXgoMSwgZm9ybUZpZWxkQ291bnRGb3JBdXRvZmlsbCk7XG5cbiAgICAgICAgdGhpcy5Mb2dnZXIuZGVidWcoXG4gICAgICAgICAgICBcImZvcm1GaWVsZENvdW50OiBcIiArXG4gICAgICAgICAgICAgICAgZm9ybUZpZWxkQ291bnQgK1xuICAgICAgICAgICAgICAgIFwiLCBsb2dpbkZpZWxkQ291bnQ6IFwiICtcbiAgICAgICAgICAgICAgICBsb2dpbkZpZWxkQ291bnQgK1xuICAgICAgICAgICAgICAgIFwiLCBsb2dpbkZpZWxkQ291bnRGb3JBdXRvZmlsbDogXCIgK1xuICAgICAgICAgICAgICAgIGxvZ2luRmllbGRDb3VudEZvckF1dG9maWxsICtcbiAgICAgICAgICAgICAgICBcIiwgZm9ybUZpZWxkQ291bnRGb3JBdXRvZmlsbDogXCIgK1xuICAgICAgICAgICAgICAgIGZvcm1GaWVsZENvdW50Rm9yQXV0b2ZpbGwgK1xuICAgICAgICAgICAgICAgIFwiLCBmb3JtTWF0Y2hlZEZpZWxkQ291bnRGb3JBdXRvZmlsbDogXCIgK1xuICAgICAgICAgICAgICAgIGZvcm1NYXRjaGVkRmllbGRDb3VudEZvckF1dG9maWxsICtcbiAgICAgICAgICAgICAgICBcIiwgbnVtYmVyT2ZOZXdQYXNzd29yZEZpZWxkczogXCIgK1xuICAgICAgICAgICAgICAgIG51bWJlck9mTmV3UGFzc3dvcmRGaWVsZHMgK1xuICAgICAgICAgICAgICAgIFwiLCBmaWVsZE1hdGNoUmF0aW86IFwiICtcbiAgICAgICAgICAgICAgICBmaWVsZE1hdGNoUmF0aW9Gb3JBdXRvZmlsbFxuICAgICAgICApO1xuXG4gICAgICAgIGlmIChmaWVsZE1hdGNoUmF0aW9Gb3JBdXRvZmlsbCA8IG1pbk1hdGNoZWRGaWVsZENvdW50UmF0aW8pIHtcbiAgICAgICAgICAgIHRoaXMuTG9nZ2VyLmluZm8oXG4gICAgICAgICAgICAgICAgZW50cnkudXVpZCArXG4gICAgICAgICAgICAgICAgICAgIFwiIHdpbGwgYmUgZm9yY2VkIHRvIG5vdCBhdXRvLWZpbGwgYmVjYXVzZSB0aGUgZm9ybSBmaWVsZCBtYXRjaCByYXRpbyAoXCIgK1xuICAgICAgICAgICAgICAgICAgICBmaWVsZE1hdGNoUmF0aW9Gb3JBdXRvZmlsbCArXG4gICAgICAgICAgICAgICAgICAgIFwiKSBpcyBub3QgaGlnaCBlbm91Z2guXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBsb3dGaWVsZE1hdGNoUmF0aW8gPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYXZlcmFnZUZpZWxkUmVsZXZhbmNlID1cbiAgICAgICAgICAgIHRvdGFsUmVsZXZhbmNlU2NvcmUgLyBNYXRoLm1heChmb3JtRmllbGRDb3VudCwgbG9naW5GaWVsZENvdW50KTtcbiAgICAgICAgY29uc3QgYWRqdXN0ZWRSZWxldmFuY2UgPVxuICAgICAgICAgICAgYXZlcmFnZUZpZWxkUmVsZXZhbmNlIC8gKE1hdGguYWJzKGZvcm1GaWVsZENvdW50IC0gbG9naW5GaWVsZENvdW50KSArIDEpO1xuXG4gICAgICAgIHNjb3JlICs9IGFkanVzdGVkUmVsZXZhbmNlO1xuXG4gICAgICAgIHRoaXMuTG9nZ2VyLmluZm8oXCJSZWxldmFuY2UgZm9yIFwiICsgZW50cnkudXVpZCArIFwiIGlzOiBcIiArIHNjb3JlKTtcbiAgICAgICAgcmV0dXJuIHsgc2NvcmU6IHNjb3JlLCBsb3dGaWVsZE1hdGNoUmF0aW86IGxvd0ZpZWxkTWF0Y2hSYXRpbyB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgZGV0ZXJtaW5lUmVsZXZhbmNlU2NvcmVzKFxuICAgICAgICBkZWJ1Z05hbWU6IHN0cmluZyxcbiAgICAgICAgbWF0Y2hlZEZpZWxkczogTWF0Y2hlZEZpZWxkW10sXG4gICAgICAgIGVudHJ5RmllbGRzOiBGaWVsZFtdLFxuICAgICAgICBjdXJyZW50UGFnZTogbnVtYmVyLFxuICAgICAgICBzY29yZUNvbmZpZzogRmllbGRNYXRjaFNjb3JlQ29uZmlnLFxuICAgICAgICB2aXNpYmxlRmllbGRNYXA6IGJvb2xlYW5bXVxuICAgICk6IFtudW1iZXIsIGJvb2xlYW5bXV0ge1xuICAgICAgICBsZXQgdG90YWxSZWxldmFuY2VTY29yZSA9IDA7XG4gICAgICAgIGNvbnN0IG1pbkZpZWxkUmVsZXZhbmNlID0gMTtcbiAgICAgICAgY29uc3QgZmllbGRNYXRjaFN1Y2Nlc3NlczogYm9vbGVhbltdID0gW107XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXRjaGVkRmllbGRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgbW9zdFJlbGV2YW50U2NvcmUgPSAwO1xuICAgICAgICAgICAgY29uc3QgZm9ybUZpZWxkID0gbWF0Y2hlZEZpZWxkc1tpXS5maWVsZDtcblxuICAgICAgICAgICAgaWYgKGZvcm1GaWVsZC5sb2NhdG9yc1swXS5hdXRvY29tcGxldGVWYWx1ZXM/LnNvbWUodiA9PiB2ID09PSBcIm5ldy1wYXNzd29yZFwiKSkge1xuICAgICAgICAgICAgICAgIC8vIFJlY29yZCBhcyBhIHN1Y2Nlc3NmdWwgbWF0Y2ggZm9yIHRoZSBwdXJwb3NlcyBvZiBtYXRjaCByYXRpbyBjYWxjdWxhdGlvbnNcbiAgICAgICAgICAgICAgICAvLyBpZiB0aGlzIGlzIGEgbmV3IHBhc3N3b3JkIGZpZWxkIGFzIHBhcnQgb2YgYSBjaGFuZ2UgcGFzc3dvcmQgZm9ybS4gU28gd2VcbiAgICAgICAgICAgICAgICAvLyBkb24ndCBhZmZlY3QgdGhlIHNlbGVjdGlvbiBvZiB0aGUgZm9ybSBvciBlbnRyeSB0byBmaWxsIGJ1dCB3aGVuIGFsbFxuICAgICAgICAgICAgICAgIC8vIGVsc2UgaXMgZXF1YWwsIHdlIHdpbGwgaGF2ZSBhIGhpZ2hlciBjaGFuY2Ugb2YgYXV0by1maWxsaW5nIHRoZSBleGlzdGluZ1xuICAgICAgICAgICAgICAgIC8vIHVzZXIgbmFtZSBhbmQgcGFzc3dvcmQgZmllbGRzLlxuICAgICAgICAgICAgICAgIGZpZWxkTWF0Y2hTdWNjZXNzZXNbaV0gPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGVudHJ5RmllbGRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZm1TY29yZSA9IHRoaXMuY2FsY3VsYXRlRmllbGRNYXRjaFNjb3JlKFxuICAgICAgICAgICAgICAgICAgICBtYXRjaGVkRmllbGRzW2ldLFxuICAgICAgICAgICAgICAgICAgICBlbnRyeUZpZWxkc1tqXSxcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFBhZ2UsXG4gICAgICAgICAgICAgICAgICAgIHNjb3JlQ29uZmlnLFxuICAgICAgICAgICAgICAgICAgICB2aXNpYmxlRmllbGRNYXBbaV1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHRoaXMuTG9nZ2VyLmRlYnVnKFxuICAgICAgICAgICAgICAgICAgICBcIlN1aXRhYmlsaXR5IG9mIHB1dHRpbmcgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdOYW1lICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiIGZpZWxkIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGogK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCIgaW50byBmb3JtIGZpZWxkIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCIgKGlkOiBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtRmllbGQubG9jYXRvcnNbMF0uaWQgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCIpIGlzIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZtU2NvcmVcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGlmIChmbVNjb3JlID4gbW9zdFJlbGV2YW50U2NvcmUpIHtcbiAgICAgICAgICAgICAgICAgICAgbW9zdFJlbGV2YW50U2NvcmUgPSBmbVNjb3JlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBmbVNjb3JlRm9yUmF0aW8gPSBmbVNjb3JlIC0gKHZpc2libGVGaWVsZE1hcFtpXSA/IDAgOiAxMCk7XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAoZm9ybUZpZWxkLnR5cGUgPT09IFwidGV4dFwiIHx8IGZvcm1GaWVsZC50eXBlID09PSBcInBhc3N3b3JkXCIpICYmXG4gICAgICAgICAgICAgICAgICAgIGZtU2NvcmVGb3JSYXRpbyA+PSBtaW5GaWVsZFJlbGV2YW5jZSAmJlxuICAgICAgICAgICAgICAgICAgICBlbnRyeUZpZWxkc1tqXS52YWx1ZSAmJlxuICAgICAgICAgICAgICAgICAgICAhZmllbGRNYXRjaFN1Y2Nlc3Nlc1tpXVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZE1hdGNoU3VjY2Vzc2VzW2ldID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBtYXRjaGVkRmllbGRzW2ldLmhpZ2hlc3RTY29yZSA9PSBudWxsIHx8XG4gICAgICAgICAgICAgICAgICAgIGZtU2NvcmUgPiBtYXRjaGVkRmllbGRzW2ldLmhpZ2hlc3RTY29yZVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICBtYXRjaGVkRmllbGRzW2ldLmhpZ2hlc3RTY29yZSA9IGZtU2NvcmU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdG90YWxSZWxldmFuY2VTY29yZSArPSBtb3N0UmVsZXZhbnRTY29yZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW3RvdGFsUmVsZXZhbmNlU2NvcmUsIGZpZWxkTWF0Y2hTdWNjZXNzZXNdO1xuICAgIH1cblxuICAgIHB1YmxpYyByZW1vdmVLZWVJY29uRnJvbUFsbEZpZWxkcygpIHtcbiAgICAgICAgdGhpcy5rZWVGaWVsZEljb24ucmVtb3ZlS2VlSWNvbkZyb21BbGxGaWVsZHMoKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBGaWVsZCB9IGZyb20gXCIuLi9jb21tb24vbW9kZWwvRmllbGRcIjtcblxuZXhwb3J0IGNsYXNzIE1hdGNoZWRGaWVsZCB7XG4gICAgZmllbGQ6IEZpZWxkO1xuICAgIERPTWVsZW1lbnQ6IEhUTUxJbnB1dEVsZW1lbnQgfCBIVE1MU2VsZWN0RWxlbWVudDtcbiAgICBoaWdoZXN0U2NvcmU6IG51bWJlcjtcbn1cbiIsImltcG9ydCB7IEtlZUxvZ2dlciB9IGZyb20gXCIuLi9jb21tb24vTG9nZ2VyXCI7XG5pbXBvcnQgeyBNYXRjaGVkRmllbGQgfSBmcm9tIFwiLi9NYXRjaGVkRmllbGRcIjtcbmltcG9ydCB7IEZpZWxkIH0gZnJvbSBcIi4uL2NvbW1vbi9tb2RlbC9GaWVsZFwiO1xuXG4vKlxuICBUaGlzIGNvbnRhaW5zIGNvZGUgcmVsYXRlZCB0byB0aGUgbWFuYWdlbWVudCBhbmQgbWFuaXB1bGF0aW9uIG9mIGZvcm1zIGFuZCBmb3JtIGZpZWxkcy5cbiovXG5cbmV4cG9ydCBjbGFzcyBGb3JtVXRpbHMge1xuICAgIGZpbmRMb2dpbk9wcyA9IFtdO1xuICAgIG1hdGNoUmVzdWx0cyA9IFtdO1xuICAgIExvZ2dlcjogS2VlTG9nZ2VyO1xuXG4gICAgY29uc3RydWN0b3IobG9nZ2VyOiBLZWVMb2dnZXIpIHtcbiAgICAgICAgdGhpcy5Mb2dnZXIgPSBsb2dnZXI7XG4gICAgfVxuXG4gICAgY291bnRBbGxEb2N1bWVudHMoZnJhbWU6IFdpbmRvdykge1xuICAgICAgICBpZiAoIXRoaXMuaXNVcmlXZUNhbkZpbGwoZnJhbWUubG9jYXRpb24pKSByZXR1cm4gMDtcblxuICAgICAgICBsZXQgbG9jYWxEb2NDb3VudCA9IDE7XG5cbiAgICAgICAgaWYgKGZyYW1lLmZyYW1lcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBmcmFtZXMgPSBmcmFtZS5mcmFtZXM7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZyYW1lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGxvY2FsRG9jQ291bnQgKz0gdGhpcy5jb3VudEFsbERvY3VtZW50cyhmcmFtZXNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsb2NhbERvY0NvdW50O1xuICAgIH1cblxuICAgIGlzVXJpV2VDYW5GaWxsKHVyaSkge1xuICAgICAgICBpZiAodXJpLnByb3RvY29sID09IFwiaHR0cDpcIiB8fCB1cmkucHJvdG9jb2wgPT0gXCJodHRwczpcIiB8fCB1cmkucHJvdG9jb2wgPT0gXCJmaWxlOlwiKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaXNBVGV4dEZvcm1GaWVsZFR5cGUodHlwZSkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICB0eXBlID09IFwiY2hlY2tib3hcIiB8fFxuICAgICAgICAgICAgdHlwZSA9PSBcInNlbGVjdC1vbmVcIiB8fFxuICAgICAgICAgICAgdHlwZSA9PSBcInJhZGlvXCIgfHxcbiAgICAgICAgICAgIHR5cGUgPT0gXCJwYXNzd29yZFwiIHx8XG4gICAgICAgICAgICB0eXBlID09IFwiaGlkZGVuXCIgfHxcbiAgICAgICAgICAgIHR5cGUgPT0gXCJzdWJtaXRcIiB8fFxuICAgICAgICAgICAgdHlwZSA9PSBcImJ1dHRvblwiIHx8XG4gICAgICAgICAgICB0eXBlID09IFwiZmlsZVwiIHx8XG4gICAgICAgICAgICB0eXBlID09IFwiaW1hZ2VcIiB8fFxuICAgICAgICAgICAgdHlwZSA9PSBcInJlc2V0XCJcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzQUtub3duVXNlcm5hbWVTdHJpbmcoZmllbGROYW1lSW4pIHtcbiAgICAgICAgY29uc3QgZmllbGROYW1lID0gZmllbGROYW1lSW4udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgZmllbGROYW1lID09IFwidXNlcm5hbWVcIiB8fFxuICAgICAgICAgICAgZmllbGROYW1lID09IFwial91c2VybmFtZVwiIHx8XG4gICAgICAgICAgICBmaWVsZE5hbWUgPT0gXCJ1c2VyX25hbWVcIiB8fFxuICAgICAgICAgICAgZmllbGROYW1lID09IFwidXNlclwiIHx8XG4gICAgICAgICAgICBmaWVsZE5hbWUgPT0gXCJ1c2VyLW5hbWVcIiB8fFxuICAgICAgICAgICAgZmllbGROYW1lID09IFwibG9naW5cIiB8fFxuICAgICAgICAgICAgZmllbGROYW1lID09IFwidmJfbG9naW5fdXNlcm5hbWVcIiB8fFxuICAgICAgICAgICAgZmllbGROYW1lID09IFwibmFtZVwiIHx8XG4gICAgICAgICAgICBmaWVsZE5hbWUgPT0gXCJ1c2VyIG5hbWVcIiB8fFxuICAgICAgICAgICAgZmllbGROYW1lID09IFwidXNlciBpZFwiIHx8XG4gICAgICAgICAgICBmaWVsZE5hbWUgPT0gXCJ1c2VyLWlkXCIgfHxcbiAgICAgICAgICAgIGZpZWxkTmFtZSA9PSBcInVzZXJpZFwiIHx8XG4gICAgICAgICAgICBmaWVsZE5hbWUgPT0gXCJlbWFpbFwiIHx8XG4gICAgICAgICAgICBmaWVsZE5hbWUgPT0gXCJlLW1haWxcIiB8fFxuICAgICAgICAgICAgZmllbGROYW1lID09IFwiaWRcIiB8fFxuICAgICAgICAgICAgZmllbGROYW1lID09IFwiZm9ybV9sb2dpbm5hbWVcIiB8fFxuICAgICAgICAgICAgZmllbGROYW1lID09IFwid3BuYW1lXCIgfHxcbiAgICAgICAgICAgIGZpZWxkTmFtZSA9PSBcIm1haWxcIiB8fFxuICAgICAgICAgICAgZmllbGROYW1lID09IFwibG9naW5pZFwiIHx8XG4gICAgICAgICAgICBmaWVsZE5hbWUgPT0gXCJsb2dpbiBpZFwiIHx8XG4gICAgICAgICAgICBmaWVsZE5hbWUgPT0gXCJsb2dpbl9uYW1lXCIgfHxcbiAgICAgICAgICAgIGZpZWxkTmFtZSA9PSBcIm9wZW5pZF9pZGVudGlmaWVyXCIgfHxcbiAgICAgICAgICAgIGZpZWxkTmFtZSA9PSBcImF1dGhlbnRpY2F0aW9uX2VtYWlsXCIgfHxcbiAgICAgICAgICAgIGZpZWxkTmFtZSA9PSBcIm9wZW5pZFwiIHx8XG4gICAgICAgICAgICBmaWVsZE5hbWUgPT0gXCJhdXRoX2VtYWlsXCIgfHxcbiAgICAgICAgICAgIGZpZWxkTmFtZSA9PSBcImF1dGhfaWRcIiB8fFxuICAgICAgICAgICAgZmllbGROYW1lID09IFwiYXV0aGVudGljYXRpb25faWRlbnRpZmllclwiIHx8XG4gICAgICAgICAgICBmaWVsZE5hbWUgPT0gXCJhdXRoZW50aWNhdGlvbl9pZFwiIHx8XG4gICAgICAgICAgICBmaWVsZE5hbWUgPT0gXCJjdXN0b21lcl9udW1iZXJcIiB8fFxuICAgICAgICAgICAgZmllbGROYW1lID09IFwiY3VzdG9tZXJudW1iZXJcIiB8fFxuICAgICAgICAgICAgZmllbGROYW1lID09IFwib25saW5laWRcIlxuICAgICAgICApIHtcbiAgICAgICAgICAgIC8vIGV0Yy4gZXRjLlxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8qXG4gICAgICogZ2V0Rm9ybUZpZWxkc1xuICAgICAqXG4gICAgICogUmV0dXJucyB0aGUgdXNlcm5hbWVJbmRleCBhbmQgcGFzc3dvcmQgZmllbGRzIGZvdW5kIGluIHRoZSBmb3JtLlxuICAgICAqIENhbiBoYW5kbGUgY29tcGxleCBmb3JtcyBieSB0cnlpbmcgdG8gZmlndXJlIG91dCB3aGF0IHRoZVxuICAgICAqIHJlbGV2YW50IGZpZWxkcyBhcmUuXG4gICAgICpcbiAgICAgKiBSZXR1cm5zOiBbdXNlcm5hbWVJbmRleCwgcGFzc3dvcmRzLCAuLi5dXG4gICAgICogYWxsIGFycmF5cyBhcmUgc3RhbmRhcmQgamF2YXNjcmlwdCBhcnJheXNcbiAgICAgKiB1c2VybmFtZUZpZWxkIG1heSBiZSBudWxsLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRGb3JtRmllbGRzKGZvcm0sIGlzU3VibWlzc2lvbjogYm9vbGVhbiwgbWF4aW11bUZpZWxkQ291bnQ6IG51bWJlcikge1xuICAgICAgICBjb25zdCBwd0ZpZWxkczogTWF0Y2hlZEZpZWxkW10gPSBbXTtcbiAgICAgICAgY29uc3Qgb3RoZXJGaWVsZHM6IE1hdGNoZWRGaWVsZFtdID0gW107XG4gICAgICAgIGNvbnN0IGFsbEZpZWxkczoge1xuICAgICAgICAgICAgaW5kZXg6IG51bWJlcjtcbiAgICAgICAgICAgIGVsZW1lbnQ6IE1hdGNoZWRGaWVsZDtcbiAgICAgICAgICAgIHR5cGU6IHN0cmluZztcbiAgICAgICAgfVtdID0gW107XG4gICAgICAgIGxldCBmaXJzdFBhc3N3b3JkSW5kZXggPSAtMTtcbiAgICAgICAgbGV0IGZpcnN0UG9zc2libGVVc2VybmFtZUluZGV4ID0gLTE7XG4gICAgICAgIGxldCB1c2VybmFtZUluZGV4ID0gLTE7XG5cbiAgICAgICAgLy8gc2VhcmNoIHRoZSBET00gZm9yIGFueSBmb3JtIGZpZWxkcyB3ZSBtaWdodCBiZSBpbnRlcmVzdGVkIGluXG4gICAgICAgIGNvbnN0IHRvdGFsRWxlbWVudHMgPSBmb3JtLmVsZW1lbnRzLmxlbmd0aDtcbiAgICAgICAgY29uc3QgZWxlbWVudExpbWl0ID0gdG90YWxFbGVtZW50cyA8IDIwMDAgPyB0b3RhbEVsZW1lbnRzIDogMjAwMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbGVtZW50TGltaXQ7IGkrKykge1xuICAgICAgICAgICAgaWYgKGFsbEZpZWxkcy5sZW5ndGggPiBtYXhpbXVtRmllbGRDb3VudCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRvbyBtYW55IGZpZWxkc1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBmb3JtLmVsZW1lbnRzW2ldLmxvY2FsTmFtZS50b0xvd2VyQ2FzZSgpID09IFwib2JqZWN0XCIgfHxcbiAgICAgICAgICAgICAgICBmb3JtLmVsZW1lbnRzW2ldLmxvY2FsTmFtZS50b0xvd2VyQ2FzZSgpID09IFwia2V5Z2VuXCIgfHxcbiAgICAgICAgICAgICAgICBmb3JtLmVsZW1lbnRzW2ldLmxvY2FsTmFtZS50b0xvd2VyQ2FzZSgpID09IFwib3V0cHV0XCIgfHxcbiAgICAgICAgICAgICAgICAoZm9ybS5lbGVtZW50c1tpXS5sb2NhbE5hbWUudG9Mb3dlckNhc2UoKSAhPSBcImlucHV0XCIgJiZcbiAgICAgICAgICAgICAgICAgICAgKGZvcm0uZWxlbWVudHNbaV0udHlwZSA9PSB1bmRlZmluZWQgfHwgZm9ybS5lbGVtZW50c1tpXS50eXBlID09IG51bGwpKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7IC8vIG1heWJlIGl0J3Mgc29tZXRoaW5nIHVuLWludGVyZXN0aW5nXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGRvbVR5cGU6IHN0cmluZyA9IGZvcm0uZWxlbWVudHNbaV0udHlwZS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgICAgICBpZiAoZG9tVHlwZSA9PSBcImZpZWxkc2V0XCIpIGNvbnRpbnVlOyAvLyBub3QgaW50ZXJlc3RlZCBpbiBmaWVsZHNldHNcblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGRvbVR5cGUgIT0gXCJwYXNzd29yZFwiICYmXG4gICAgICAgICAgICAgICAgIXRoaXMuaXNBVGV4dEZvcm1GaWVsZFR5cGUoZG9tVHlwZSkgJiZcbiAgICAgICAgICAgICAgICBkb21UeXBlICE9IFwiY2hlY2tib3hcIiAmJlxuICAgICAgICAgICAgICAgIGRvbVR5cGUgIT0gXCJyYWRpb1wiICYmXG4gICAgICAgICAgICAgICAgZG9tVHlwZSAhPSBcInNlbGVjdC1vbmVcIlxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7IC8vIGlnbm9yaW5nIG90aGVyIGZvcm0gdHlwZXNcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGRvbVR5cGUgPT0gXCJyYWRpb1wiICYmIGlzU3VibWlzc2lvbiAmJiBmb3JtLmVsZW1lbnRzW2ldLmNoZWNrZWQgPT0gZmFsc2UpIGNvbnRpbnVlO1xuICAgICAgICAgICAgaWYgKGRvbVR5cGUgPT0gXCJwYXNzd29yZFwiICYmIGlzU3VibWlzc2lvbiAmJiAhZm9ybS5lbGVtZW50c1tpXS52YWx1ZSkgY29udGludWU7XG4gICAgICAgICAgICBpZiAoZG9tVHlwZSA9PSBcInNlbGVjdC1vbmVcIiAmJiBpc1N1Ym1pc3Npb24gJiYgIWZvcm0uZWxlbWVudHNbaV0udmFsdWUpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICB0aGlzLkxvZ2dlci5kZWJ1ZyhgcHJvY2Vzc2luZyBmaWVsZCB3aXRoIGRvbXR5cGUgJHtkb21UeXBlfS4uLmApO1xuICAgICAgICAgICAgYWxsRmllbGRzW2FsbEZpZWxkcy5sZW5ndGhdID0ge1xuICAgICAgICAgICAgICAgIGluZGV4OiBpLFxuICAgICAgICAgICAgICAgIGVsZW1lbnQ6IG5ldyBNYXRjaGVkRmllbGQoKSxcbiAgICAgICAgICAgICAgICB0eXBlOiBkb21UeXBlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgbGV0IGZpZWxkVmFsdWUgPSBmb3JtLmVsZW1lbnRzW2ldLnZhbHVlO1xuICAgICAgICAgICAgaWYgKGRvbVR5cGUgPT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZvcm0uZWxlbWVudHNbaV0uY2hlY2tlZCkgZmllbGRWYWx1ZSA9IFwiS0VFRk9YX0NIRUNLRURfRkxBR19UUlVFXCI7XG4gICAgICAgICAgICAgICAgZWxzZSBmaWVsZFZhbHVlID0gXCJLRUVGT1hfQ0hFQ0tFRF9GTEFHX0ZBTFNFXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBmaWVsZCA9IEZpZWxkLmZyb21ET00oZm9ybS5lbGVtZW50c1tpXSwgZG9tVHlwZSwgZmllbGRWYWx1ZSk7XG4gICAgICAgICAgICBhbGxGaWVsZHNbYWxsRmllbGRzLmxlbmd0aCAtIDFdLmVsZW1lbnQuZmllbGQgPSBmaWVsZDtcbiAgICAgICAgICAgIGFsbEZpZWxkc1thbGxGaWVsZHMubGVuZ3RoIC0gMV0uZWxlbWVudC5ET01lbGVtZW50ID0gZm9ybS5lbGVtZW50c1tpXTtcblxuICAgICAgICAgICAgaWYgKGRvbVR5cGUgPT0gXCJwYXNzd29yZFwiICYmIGZpcnN0UGFzc3dvcmRJbmRleCA9PSAtMSkge1xuICAgICAgICAgICAgICAgIGZpcnN0UGFzc3dvcmRJbmRleCA9IGFsbEZpZWxkcy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgdGhpcy5pc0FUZXh0Rm9ybUZpZWxkVHlwZShkb21UeXBlKSAmJlxuICAgICAgICAgICAgICAgIGZpcnN0UG9zc2libGVVc2VybmFtZUluZGV4ID09IC0xICYmXG4gICAgICAgICAgICAgICAgKHRoaXMuaXNBS25vd25Vc2VybmFtZVN0cmluZyhmb3JtLmVsZW1lbnRzW2ldLm5hbWUpIHx8XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkLmxvY2F0b3JzWzBdLmxhYmVscz8uc29tZShsYWJlbCA9PiB0aGlzLmlzQUtub3duVXNlcm5hbWVTdHJpbmcobGFiZWwpKSlcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGZpcnN0UG9zc2libGVVc2VybmFtZUluZGV4ID0gYWxsRmllbGRzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChmb3JtLmVsZW1lbnRzW2ldLmtlZUluaXRpYWxEZXRlY3RlZFZhbHVlID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBmb3JtLmVsZW1lbnRzW2ldLmtlZUluaXRpYWxEZXRlY3RlZFZhbHVlID0gZmllbGRWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFdvcmsgb3V0IHdoaWNoIERPTSBmb3JtIGVsZW1lbnQgaXMgbW9zdCBsaWtlbHkgdG8gYmUgdGhlIHVzZXJuYW1lIGZpZWxkLlxuICAgICAgICAvLyBUaGlzIGluZm9ybWF0aW9uIGlzIG9ubHkgdXNlZCB0byBkaXNwbGF5IHRoZSB1c2VybmFtZSB0byB0aGUgdXNlciBzbyBhbiBpbmFjY3VyYXRlXG4gICAgICAgIC8vIGNob2ljZSB3b24ndCBpbXBhY3QgdGhlIGZvcm0gZGV0ZWN0aW9uIG9yIGZpbGxpbmcgYmVoYXZpb3VyLlxuICAgICAgICAvL1RPRE86NDogRXh0ZW5kIHRoaXMgdG8gaW5zcGVjdCBtb3JlIHRoYW4ganVzdCB0aGUgbmFtZSBvZiB0aGUgZmllbGQuIEUuZy4gbWF4IGxlbmd0aD9cbiAgICAgICAgLy9UT0RPOjQ6IEZvciBmb3JtIGZpbGxpbmcgKG5vdCBzdWJtaXR0aW5nKSB3ZSBtaWdodCB3YW50IHRvIHNlbGVjdCBiYXNlZCB1cG9uIGZvdW5kIGRhdGEgaW4gS2VlUGFzcz9cbiAgICAgICAgaWYgKGZpcnN0UG9zc2libGVVc2VybmFtZUluZGV4ICE9IC0xKSB1c2VybmFtZUluZGV4ID0gZmlyc3RQb3NzaWJsZVVzZXJuYW1lSW5kZXg7XG4gICAgICAgIGVsc2UgaWYgKGZpcnN0UGFzc3dvcmRJbmRleCA+IDApIHVzZXJuYW1lSW5kZXggPSBmaXJzdFBhc3N3b3JkSW5kZXggLSAxO1xuICAgICAgICB0aGlzLkxvZ2dlci5kZWJ1ZyhcInVzZXJuYW1lSW5kZXg6IFwiICsgdXNlcm5hbWVJbmRleCk7XG5cbiAgICAgICAgbGV0IG90aGVyQ291bnQgPSAwO1xuICAgICAgICBsZXQgYWN0dWFsVXNlcm5hbWVJbmRleCA9IDA7XG5cbiAgICAgICAgLy8gc2VwYXJhdGUgdGhlIGZpZWxkIGRhdGEgaW50byBhcHByb3ByaWF0ZSB2YXJpYWJsZXNcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbGxGaWVsZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChhbGxGaWVsZHNbaV0udHlwZSA9PSBcInBhc3N3b3JkXCIpIHB3RmllbGRzW3B3RmllbGRzLmxlbmd0aF0gPSBhbGxGaWVsZHNbaV0uZWxlbWVudDtcbiAgICAgICAgICAgIGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgIHRoaXMuaXNBVGV4dEZvcm1GaWVsZFR5cGUoYWxsRmllbGRzW2ldLnR5cGUpIHx8XG4gICAgICAgICAgICAgICAgYWxsRmllbGRzW2ldLnR5cGUgPT0gXCJjaGVja2JveFwiIHx8XG4gICAgICAgICAgICAgICAgYWxsRmllbGRzW2ldLnR5cGUgPT0gXCJyYWRpb1wiIHx8XG4gICAgICAgICAgICAgICAgYWxsRmllbGRzW2ldLnR5cGUgPT0gXCJzZWxlY3Qtb25lXCJcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIG90aGVyRmllbGRzW290aGVyRmllbGRzLmxlbmd0aF0gPSBhbGxGaWVsZHNbaV0uZWxlbWVudDtcbiAgICAgICAgICAgICAgICBpZiAoaSA9PSB1c2VybmFtZUluZGV4KSBhY3R1YWxVc2VybmFtZUluZGV4ID0gb3RoZXJDb3VudDtcbiAgICAgICAgICAgICAgICBlbHNlIG90aGVyQ291bnQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuTG9nZ2VyLmRlYnVnKFwiYWN0dWFsVXNlcm5hbWVJbmRleDogXCIgKyBhY3R1YWxVc2VybmFtZUluZGV4KTtcbiAgICAgICAgdGhpcy5Mb2dnZXIuZGVidWcoXCJvdGhlckZpZWxkcy5sZW5ndGg6XCIgKyBvdGhlckZpZWxkcy5sZW5ndGgpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhY3R1YWxVc2VybmFtZUluZGV4LFxuICAgICAgICAgICAgcHdGaWVsZHMsXG4gICAgICAgICAgICBvdGhlckZpZWxkc1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIEEgYmFzaWMsIHNsaWdodGx5IGZsYXdlZCBidXQgZmFzdCB2aXNpYmlsaXR5IHRlc3RcbiAgICBwdWJsaWMgaXNET01FbGVtZW50VmlzaWJsZShlbGVtZW50OiBIVE1MRWxlbWVudCkge1xuICAgICAgICBpZiAoIWVsZW1lbnQub2Zmc2V0UGFyZW50ICYmIGVsZW1lbnQub2Zmc2V0SGVpZ2h0ID09PSAwICYmIGVsZW1lbnQub2Zmc2V0V2lkdGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyAvLyB1c2VkIGZvciBtdWx0aXBhZ2Ugc3R1ZmYgdGhhdCB3ZSBtaWdodCBub3QgYmUgYWJsZSB0byBzdXBwb3J0IHlldCBpbiB3ZWJleHRlbnNpb25zXG4gICAgLy8gcmVzZXRGb3JtRmlsbFNlc3Npb24gKCkge1xuICAgIC8vICAgICBpZiAocmVzZXRGb3JtRmlsbFRpbWVyICE9IG51bGwpIHtcbiAgICAvLyAgICAgICAgIGNsZWFyVGltZW91dChyZXNldEZvcm1GaWxsVGltZXIpO1xuICAgIC8vICAgICAgICAgcmVzZXRGb3JtRmlsbFRpbWVyID0gbnVsbDtcbiAgICAvLyAgICAgfVxuICAgIC8vICAgICB0YWJTdGF0ZS5jdXJyZW50UGFnZSA9IDA7XG4gICAgLy8gICAgIHRhYlN0YXRlLm1heGltdW1QYWdlID0gMDtcbiAgICAvLyAgICAgdGFiU3RhdGUuZm9yY2VBdXRvU3VibWl0ID0gbnVsbDtcbiAgICAvLyAgICAgdGFiU3RhdGUudXNlclJlY2VudGx5RGVtYW5kZWRBdXRvU3VibWl0ID0gZmFsc2U7XG4gICAgLy8gICAgIExvZ2dlci5kZWJ1ZyhcIlJlc2V0IGZvcm0tZmlsbGluZyBzZXNzaW9uIChwYWdlID0gMCBhbmQgY2FuY2VsbGVkIGFueSBmb3JjZWQgYXV0b3N1Ym1pdCkuXCIpO1xuICAgIC8vIH07XG4gICAgLy92YXIgcmVzZXRGb3JtRmlsbFRpbWVyID0gbnVsbDtcbn1cbiIsImltcG9ydCB7IEZvcm1VdGlscyB9IGZyb20gXCIuL2Zvcm1zVXRpbHNcIjtcbmltcG9ydCB7IE1hdGNoUmVzdWx0IH0gZnJvbSBcIi4vTWF0Y2hSZXN1bHRcIjtcbmltcG9ydCB7IEZpbGxlZEZpZWxkIH0gZnJvbSBcIi4vRmlsbGVkRmllbGRcIjtcbmltcG9ydCB7IEtlZUxvZ2dlciB9IGZyb20gXCIuLi9jb21tb24vTG9nZ2VyXCI7XG5pbXBvcnQgeyBjb25maWdNYW5hZ2VyIH0gZnJvbSBcIi4uL2NvbW1vbi9Db25maWdNYW5hZ2VyXCI7XG5pbXBvcnQgeyBBZGRvbk1lc3NhZ2UgfSBmcm9tIFwiLi4vY29tbW9uL0FkZG9uTWVzc2FnZVwiO1xuaW1wb3J0IHsgTWF0Y2hlZEZpZWxkIH0gZnJvbSBcIi4vTWF0Y2hlZEZpZWxkXCI7XG5pbXBvcnQgeyBGaWVsZCB9IGZyb20gXCIuLi9jb21tb24vbW9kZWwvRmllbGRcIjtcblxuZGVjbGFyZSBjb25zdCBwdW55Y29kZTtcblxuaW50ZXJmYWNlIFN1Ym1pdEhhbmRsZXJBdHRhY2htZW50IHtcbiAgICB0YXJnZXQ6IEhUTUxFbGVtZW50O1xuICAgIGhhbmRsZXI6IChlOiBFdmVudCkgPT4gdm9pZDtcbiAgICBmb3JtOiBIVE1MRm9ybUVsZW1lbnQ7XG59XG5cbmV4cG9ydCBjbGFzcyBGb3JtU2F2aW5nIHtcbiAgICBwcml2YXRlIExvZ2dlcjogS2VlTG9nZ2VyO1xuICAgIHByaXZhdGUgZm9ybVV0aWxzOiBGb3JtVXRpbHM7XG4gICAgcHJpdmF0ZSBTdWJtaXRIYW5kbGVyQXR0YWNobWVudHM6IFN1Ym1pdEhhbmRsZXJBdHRhY2htZW50W10gPSBbXTtcbiAgICBwcml2YXRlIG1hdGNoUmVzdWx0OiBNYXRjaFJlc3VsdDsgLy9UT0RPOjQ6IE1heSBiZSBvdmVya2lsbCB0byBoYXZlIGFsbCB0aGlzIGRhdGEgYXZhaWxhYmxlIGZvciBzYXZpbmdcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgbXlQb3J0OiBicm93c2VyLnJ1bnRpbWUuUG9ydCwgbG9nZ2VyOiBLZWVMb2dnZXIsIGZvcm1VdGlsczogRm9ybVV0aWxzKSB7XG4gICAgICAgIHRoaXMuTG9nZ2VyID0gbG9nZ2VyO1xuICAgICAgICB0aGlzLmZvcm1VdGlscyA9IGZvcm1VdGlscztcbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkU3VibWl0SGFuZGxlcih0YXJnZXQ6IEhUTUxFbGVtZW50LCBmb3JtVG9TdWJtaXQ6IEhUTUxGb3JtRWxlbWVudCkge1xuICAgICAgICBjb25zdCBoYW5kbGVyID0gKGU6IEV2ZW50KSA9PiB0aGlzLnN1Ym1pdEhhbmRsZXIoZSwgZm9ybVRvU3VibWl0KTtcbiAgICAgICAgdGhpcy5TdWJtaXRIYW5kbGVyQXR0YWNobWVudHMucHVzaCh7XG4gICAgICAgICAgICB0YXJnZXQ6IHRhcmdldCxcbiAgICAgICAgICAgIGZvcm06IGZvcm1Ub1N1Ym1pdCxcbiAgICAgICAgICAgIGhhbmRsZXI6IGhhbmRsZXJcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh0YXJnZXQpIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlcik7XG4gICAgICAgIGZvcm1Ub1N1Ym1pdC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZXIpO1xuICAgIH1cblxuICAgIHB1YmxpYyByZW1vdmVBbGxTdWJtaXRIYW5kbGVycygpIHtcbiAgICAgICAgdGhpcy5TdWJtaXRIYW5kbGVyQXR0YWNobWVudHMuZm9yRWFjaChhdHRhY2htZW50ID0+IHtcbiAgICAgICAgICAgIGlmIChhdHRhY2htZW50LnRhcmdldCkge1xuICAgICAgICAgICAgICAgIGF0dGFjaG1lbnQudGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhdHRhY2htZW50LmhhbmRsZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXR0YWNobWVudC5mb3JtLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgYXR0YWNobWVudC5oYW5kbGVyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuU3VibWl0SGFuZGxlckF0dGFjaG1lbnRzID0gW107XG4gICAgfVxuXG4gICAgcHVibGljIHVwZGF0ZU1hdGNoUmVzdWx0KG1hdGNoUmVzdWx0OiBNYXRjaFJlc3VsdCkge1xuICAgICAgICB0aGlzLm1hdGNoUmVzdWx0ID0gbWF0Y2hSZXN1bHQ7XG4gICAgfVxuXG4gICAgLy8gVGhpcyB3b24ndCBhbHdheXMgYmUgY2FsbGVkIGJlZm9yZSBhbGwgZXZlbnQgaGFuZGxlcnMgb24gdGhlIHdlYiBwYWdlIHNvIG9uXG4gICAgLy8gc29tZSBzaXRlcyB3ZSB3aWxsIHN0b3JlIGludmFsaWQgZGF0YSAoaW4gY2FzZXMgd2hlcmUgdGhlIGxvZ2luIHNjcmlwdHNcbiAgICAvLyBtYW5nbGUgdGhlIGNvbnRlbnRzIG9mIHRoZSBmaWVsZHMgYmVmb3JlIHN1Ym1pdHRpbmcgdGhlbSkuXG4gICAgLy9UT0RPOjQ6IFBvc3NpYmx5IGNvdWxkIHNsaWdodGx5IHJlZHVjZSBpbmNpZGVuY2Ugb2YgdGhpcyBwcm9ibGVtIGJ5IGxpc3RlbmluZ1xuICAgIC8vIHRvIGV2ZXJ5IGNsaWNrIG9uIHRoZSBkb2N1bWVudCBib2R5IG9yIHRyYWNraW5nIGFsbCBpbnB1dCBldmVudHMgYnV0IHBlcmZvcm1hbmNlP1xuICAgIHByaXZhdGUgc3VibWl0SGFuZGxlcihfZTogRXZlbnQsIGZvcm06IEhUTUxGb3JtRWxlbWVudCkge1xuICAgICAgICB0aGlzLkxvZ2dlci5kZWJ1ZyhcInN1Ym1pdEhhbmRsZXIgY2FsbGVkXCIpO1xuXG4gICAgICAgIC8vIFVudGlsIHRoZSBuZXh0IHRpbWUgd2UgaGF2ZSBzZWFyY2hlZCBmb3IgZm9ybXMgaW4gdGhpcyBwYWdlLFxuICAgICAgICAvLyBkb24ndCByZXNwb25kIHRvIGFueSBmb3JtIHN1Ym1pc3Npb24gcmVsYXRlZCBldmVudHNcbiAgICAgICAgdGhpcy5yZW1vdmVBbGxTdWJtaXRIYW5kbGVycygpO1xuXG4gICAgICAgIGNvbnN0IGRvYyA9IGZvcm0ub3duZXJEb2N1bWVudDtcbiAgICAgICAgY29uc3QgdXJsID0gbmV3IFVSTChkb2MuVVJMKTtcbiAgICAgICAgdXJsLmhvc3RuYW1lID0gcHVueWNvZGUudG9Vbmljb2RlKHVybC5ob3N0bmFtZSk7XG5cbiAgICAgICAgY29uc3QgY29uZiA9IGNvbmZpZ01hbmFnZXIuc2l0ZUNvbmZpZ0Zvcih1cmwuaHJlZik7XG4gICAgICAgIGlmIChjb25mLnByZXZlbnRTYXZlTm90aWZpY2F0aW9uKSByZXR1cm47XG5cbiAgICAgICAgbGV0IGlzUGFzc3dvcmRDaGFuZ2VGb3JtID0gZmFsc2U7XG4gICAgICAgIGxldCBpc1JlZ2lzdHJhdGlvbkZvcm0gPSBmYWxzZTtcblxuICAgICAgICAvLyBHZXQgdGhlIGFwcHJvcHJpYXRlIGZpZWxkcyBmcm9tIHRoZSBmb3JtLlxuICAgICAgICBjb25zdCBwYXNzd29yZEZpZWxkczogTWF0Y2hlZEZpZWxkW10gPSBbXTtcbiAgICAgICAgbGV0IHNjYW5SZXN1bHQ6IHtcbiAgICAgICAgICAgIG90aGVyRmllbGRzOiBNYXRjaGVkRmllbGRbXTtcbiAgICAgICAgICAgIGFjdHVhbFVzZXJuYW1lSW5kZXg/OiBudW1iZXI7XG4gICAgICAgICAgICBwd0ZpZWxkcz86IE1hdGNoZWRGaWVsZFtdO1xuICAgICAgICB9O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgc2NhblJlc3VsdCA9IHRoaXMuZm9ybVV0aWxzLmdldEZvcm1GaWVsZHMoZm9ybSwgdHJ1ZSwgNTApO1xuICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgICAgdGhpcy5Mb2dnZXIud2FybihcIkxvc3QgaW50ZXJlc3QgaW4gdGhpcyBmb3JtIGFmdGVyIGZpbmRpbmcgdG9vIG1hbnkgZmllbGRzXCIgKyBleCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdXNlcm5hbWVJbmRleCA9IHNjYW5SZXN1bHQuYWN0dWFsVXNlcm5hbWVJbmRleDtcbiAgICAgICAgY29uc3QgcGFzc3dvcmRzID0gc2NhblJlc3VsdC5wd0ZpZWxkcztcbiAgICAgICAgY29uc3Qgb3RoZXJGaWVsZHMgPSBzY2FuUmVzdWx0Lm90aGVyRmllbGRzO1xuXG4gICAgICAgIGlmIChwYXNzd29yZHMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgLy8gY291bGQgYmUgcGFzc3dvcmQgY2hhbmdlIGZvcm0gb3IgbXVsdGktcGFzc3dvcmQgbG9naW4gZm9ybSBvciBzaWduIHVwIGZvcm1cbiAgICAgICAgICAgIC8vIG5haXZlIGR1cGxpY2F0ZSBmaW5kZXIgLSBtb3JlIHRoYW4gc3VmZmljaWVudCBmb3IgdGhlIG51bWJlciBvZiBwYXNzd29yZHMgcGVyIGRvbWFpblxuICAgICAgICAgICAgbGV0IHR3b1Bhc3N3b3Jkc01hdGNoSW5kZXggPSAtMTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFzc3dvcmRzLmxlbmd0aCAmJiB0d29QYXNzd29yZHNNYXRjaEluZGV4ID09IC0xOyBpKyspIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gaSArIDE7IGogPCBwYXNzd29yZHMubGVuZ3RoICYmIHR3b1Bhc3N3b3Jkc01hdGNoSW5kZXggPT0gLTE7IGorKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocGFzc3dvcmRzW2pdLmZpZWxkLnZhbHVlID09IHBhc3N3b3Jkc1tpXS5maWVsZC52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHdvUGFzc3dvcmRzTWF0Y2hJbmRleCA9IGo7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0d29QYXNzd29yZHNNYXRjaEluZGV4ID09IC0xKSB7XG4gICAgICAgICAgICAgICAgLy8gZWl0aGVyIG1pcy10eXBlZCBwYXNzd29yZCBjaGFuZ2UgZm9ybSwgc2luZ2xlIHBhc3N3b3JkIGNoYW5nZSBib3ggZm9ybSBvciBtdWx0aS1wYXNzd29yZCBsb2dpbi9zaWdudXAsIGFzc3VtaW5nIGxhdHRlci5cbiAgICAgICAgICAgICAgICB0aGlzLkxvZ2dlci5kZWJ1ZyhcIm11bHRpcGxlIHBhc3N3b3JkcyBmb3VuZCAod2l0aCBubyBpZGVudGljYWwgdmFsdWVzKVwiKTtcblxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFzc3dvcmRzLmxlbmd0aDsgaSsrKSBwYXNzd29yZEZpZWxkcy5wdXNoKHBhc3N3b3Jkc1tpXSk7XG5cbiAgICAgICAgICAgICAgICAvL1RPRE86NDogdHJ5IHRvIGRpc3Rpbmd1aXNoIGJldHdlZW4gbXVsdGktcGFzc3dvcmQgbG9naW4vc2lnbnVwIGFuZCB0eXBvLiBtYXliZTogaWYgdXNlcm5hbWUgZXhpc3RzIGFuZCBtYXRjaGVzIGV4aXN0aW5nIHBhc3N3b3JkIGl0IGlzIGEgdHlwbywgZWxzZSBtdWx0aS1wYXNzd29yZFxuICAgICAgICAgICAgICAgIC8vcmV0dXJuO1xuICAgICAgICAgICAgfSAvLyBpdCdzIHByb2JhYmx5IGEgcGFzc3dvcmQgY2hhbmdlIGZvcm0sIGJ1dCBtYXkgYmUgYSBzaWduLXVwIGZvcm1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIHdlIG5lZWQgdG8gaWdub3JlIGFueSBmaWVsZHMgdGhhdCB3ZXJlIHByZXNlbnRlZCB0byB0aGVcbiAgICAgICAgICAgICAgICAvLyB1c2VyIGFzIGVpdGhlciBcIm9sZCBwYXNzd29yZFwiIG9yIFwicmV0eXBlIG5ldyBwYXNzd29yZFwiXG5cbiAgICAgICAgICAgICAgICB0aGlzLkxvZ2dlci5kZWJ1ZyhcbiAgICAgICAgICAgICAgICAgICAgXCJMb29rcyBsaWtlIGEgcGFzc3dvcmQgY2hhbmdlIGZvcm0gb3IgbmV3IHJlZ2lzdHJhdGlvbiBmb3JtIGhhcyBiZWVuIHN1Ym1pdHRlZFwiXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAvLyB0aGVyZSBtYXkgYmUgbW9yZSB0aGFuIG9uZSBwYWlyIG9mIG1hdGNoZXMgLSB0aG91Z2gsIHdlJ3JlIHBsdWNraW5nIGZvciB0aGUgZmlyc3Qgb25lXG4gICAgICAgICAgICAgICAgLy8gd2Uga25vdyB0aGUgaW5kZXggb2Ygb25lIG1hdGNoaW5nIHBhc3N3b3JkXG5cbiAgICAgICAgICAgICAgICAvLyBpZiB0aGVyZSBhcmUgb25seSB0d28gcGFzc3dvcmRzIHdlIGFscmVhZHkga25vdyB0aGF0IHRoZXkgbWF0Y2hcbiAgICAgICAgICAgICAgICBpZiAocGFzc3dvcmRzLmxlbmd0aCA9PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkRmllbGRzLnB1c2gocGFzc3dvcmRzWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgLy9UT0RPOjQ6IGl0IGlzIGFsc28gcmVhc29uYWJseSBsaWtlbHkgdGhhdCB0aGlzIGluZGljYXRlcyBhXG4gICAgICAgICAgICAgICAgICAgIC8vIHNpZ24tdXAgZm9ybSByYXRoZXIgdGhhbiBhIHBhc3N3b3JkIGNoYW5nZSBmb3JtLiBkZWNpZGVcbiAgICAgICAgICAgICAgICAgICAgLy8gd2hpY2ggaGVyZSBhbmQgZmxhZyB3aGljaCBvbmUgaXQgaXMuIGZvciBub3csIHdlIGp1c3QgYXNzdW1lXG4gICAgICAgICAgICAgICAgICAgIC8vIGl0J3MgYSBzaWduLXVwIGZvcm0gYmVjdWFzZSB0aGF0IGlzIG1vcmUgdXNlZnVsIGZvciB0aGUgdXNlciBpbiBtYW55IGNhc2VzXG4gICAgICAgICAgICAgICAgICAgIGlzUGFzc3dvcmRDaGFuZ2VGb3JtID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGlzUmVnaXN0cmF0aW9uRm9ybSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSGVyZSB3ZSBhc3N1bWUgdGhhdCBhbnkgZm9ybSB3aXRoIDMgcGFzc3dvcmRzIG9uIGl0XG4gICAgICAgICAgICAgICAgICAgIC8vIGlzIG11Y2ggbW9yZSBsaWtlbHkgdG8gYmUgYSBjaGFuZ2UgcGFzc3dvcmQgZm9ybSB0aGFuXG4gICAgICAgICAgICAgICAgICAgIC8vIGEgc2lnbi11cCBmb3JtIChvYnZpb3VzbHkgdGhlcmUgd2lsbCBiZSBleGNlcHRpb25zIGJ1dFxuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIGlzIHRoZSBiZXN0IHdlIGNhbiBkbyBmb3Igbm93KVxuICAgICAgICAgICAgICAgICAgICAvLyBCVVQ6IGhhdmUgbm90IHlldCBpbXBsZW1lbnRlZCByZWxpYWJsZSBwYXNzd29yZCBjaGFuZ2UgZmVhdHVyZS4uLlxuICAgICAgICAgICAgICAgICAgICBpc1Bhc3N3b3JkQ2hhbmdlRm9ybSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBpc1JlZ2lzdHJhdGlvbkZvcm0gPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICBwYXNzd29yZEZpZWxkcy5wdXNoKHBhc3N3b3Jkc1t0d29QYXNzd29yZHNNYXRjaEluZGV4XSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHBhc3N3b3JkcyAhPSBudWxsICYmIHBhc3N3b3Jkc1swXSAhPSBudWxsICYmIHBhc3N3b3Jkc1swXSAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHBhc3N3b3JkRmllbGRzLnB1c2gocGFzc3dvcmRzWzBdKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBhdCB0aGlzIHBvaW50LCBhdCBsZWFzdCBvbmUgcGFzc3dvcmRGaWVsZCBoYXMgYmVlbiBjaG9zZW4gYW5kIGFuXG4gICAgICAgIC8vIG9sZFBhc3N3b3JkRmllbGQgaGFzIGJlZW4gY2hvc2VuIGlmIGFwcGxpY2FibGUuXG4gICAgICAgIC8vIHdlIGhhdmUgYWxzbyBkZXRlcm1pbmVkIHdoZXRoZXIgdGhpcyBmb3JtIGZpbGwgaXMgbGlrZWx5IHRvXG4gICAgICAgIC8vIGJlIGEgbmV3IHJlZ2lzdHJhdGlvbiBmb3JtIG9yIHBhc3N3b3JkIGNoYW5nZSBmb3JtXG5cbiAgICAgICAgY29uc3Qgbm9uRW1wdHlQYXNzd29yZEZpZWxkcyA9IHRoaXMucmVtb3ZlRW1wdHlGaWVsZHMocGFzc3dvcmRGaWVsZHMpO1xuICAgICAgICBjb25zdCBub25FbXB0eU90aGVyRmllbGRzID0gdGhpcy5yZW1vdmVFbXB0eUZpZWxkcyhvdGhlckZpZWxkcyk7XG5cbiAgICAgICAgLy8gRmluZCB0aGUgZmlyc3QgZmlsbGVkIHBhc3N3b3JkIHRoYXQgaXMgbm90IGJlaW5nIHN1Ym1pdHRlZCBvciBoYXMgYSBjaGFuZ2VkIHZhbHVlXG4gICAgICAgIGNvbnN0IGRpZmZlcmVudFBhc3N3b3JkID1cbiAgICAgICAgICAgICF0aGlzLm1hdGNoUmVzdWx0IHx8XG4gICAgICAgICAgICAhdGhpcy5tYXRjaFJlc3VsdC5sYXN0RmlsbGVkUGFzc3dvcmRzIHx8XG4gICAgICAgICAgICB0aGlzLmhhc0ZpZWxkQmVlbk1vZGlmaWVkKG5vbkVtcHR5UGFzc3dvcmRGaWVsZHMsIHRoaXMubWF0Y2hSZXN1bHQubGFzdEZpbGxlZFBhc3N3b3Jkcyk7XG5cbiAgICAgICAgLy8gRmluZCB0aGUgZmlyc3QgZmlsbGVkIG90aGVyIGZpZWxkIHRoYXQgaXMgbm90IGJlaW5nIHN1Ym1pdHRlZCBvciBoYXMgYSBjaGFuZ2VkIHZhbHVlXG4gICAgICAgIGNvbnN0IGRpZmZlcmVudE90aGVyID1cbiAgICAgICAgICAgICF0aGlzLm1hdGNoUmVzdWx0IHx8XG4gICAgICAgICAgICAhdGhpcy5tYXRjaFJlc3VsdC5sYXN0RmlsbGVkT3RoZXIgfHxcbiAgICAgICAgICAgIHRoaXMuaGFzRmllbGRCZWVuTW9kaWZpZWQobm9uRW1wdHlPdGhlckZpZWxkcywgdGhpcy5tYXRjaFJlc3VsdC5sYXN0RmlsbGVkT3RoZXIpO1xuXG4gICAgICAgIGlmIChkaWZmZXJlbnRQYXNzd29yZCB8fCBkaWZmZXJlbnRPdGhlcikge1xuICAgICAgICAgICAgY29uc3Qgc3VibWl0dGVkRGF0YSA9IHtcbiAgICAgICAgICAgICAgICB1cmw6IHVybC5ocmVmLFxuICAgICAgICAgICAgICAgIGZpZWxkczogRmllbGQuY29tYmluZURvbUZpZWxkTGlzdHMoXG4gICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lSW5kZXgsXG4gICAgICAgICAgICAgICAgICAgIG5vbkVtcHR5T3RoZXJGaWVsZHMubWFwKGYgPT4gZi5maWVsZCksXG4gICAgICAgICAgICAgICAgICAgIG5vbkVtcHR5UGFzc3dvcmRGaWVsZHMubWFwKGYgPT4gZi5maWVsZClcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBkb2MudGl0bGUgfHwgdXJsLmhvc3RuYW1lLFxuICAgICAgICAgICAgICAgIGlzUGFzc3dvcmRDaGFuZ2VGb3JtLFxuICAgICAgICAgICAgICAgIGlzUmVnaXN0cmF0aW9uRm9ybVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5teVBvcnQucG9zdE1lc3NhZ2UoeyBzdWJtaXR0ZWREYXRhIH0gYXMgQWRkb25NZXNzYWdlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgcmVtb3ZlRW1wdHlGaWVsZHMoZmllbGRzOiBNYXRjaGVkRmllbGRbXSkge1xuICAgICAgICByZXR1cm4gZmllbGRzLmZpbHRlcihmID0+IGYuZmllbGQudmFsdWUgfHwgZi5maWVsZC50eXBlID09PSBcImJvb2xlYW5cIik7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYXNGaWVsZEJlZW5Nb2RpZmllZChcbiAgICAgICAgbmV3bHlTdWJtaXR0ZWRGaWVsZHM6IE1hdGNoZWRGaWVsZFtdLFxuICAgICAgICBwcmV2aW91c2x5RmlsbGVkRmllbGRzOiBGaWxsZWRGaWVsZFtdXG4gICAgKSB7XG4gICAgICAgIHJldHVybiAhIXByZXZpb3VzbHlGaWxsZWRGaWVsZHMuZmluZChmaWxsZWRGaWVsZCA9PiB7XG4gICAgICAgICAgICBjb25zdCBzdWJtaXR0ZWRGaWVsZCA9IG5ld2x5U3VibWl0dGVkRmllbGRzLmZpbmQoXG4gICAgICAgICAgICAgICAgZiA9PiBmaWxsZWRGaWVsZC5ET01lbGVtZW50ID09IGYuRE9NZWxlbWVudFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgLy8gSWYgd2UgaGF2ZW4ndCBzdWJtaXR0ZWQgdGhlIHNhbWUgRE9NIGVsZW1lbnQgd2UgZmlsbGVkIGluXG4gICAgICAgICAgICBpZiAoIXN1Ym1pdHRlZEZpZWxkKSByZXR1cm4gdHJ1ZTtcblxuICAgICAgICAgICAgaWYgKHN1Ym1pdHRlZEZpZWxkLmZpZWxkLnZhbHVlICE9IGZpbGxlZEZpZWxkLnZhbHVlKSByZXR1cm4gdHJ1ZTtcblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBQYW5lbFN0dWIsIFBhbmVsU3R1Yk9wdGlvbnMgfSBmcm9tIFwiLi9QYW5lbFN0dWJcIjtcblxuLy9jb25zdCBwYW5lbE9wdGlvbnMgPSBQYW5lbFN0dWJPcHRpb25zLkdlbmVyYXRlUGFzc3dvcmRMZWdhY3k7XG5jb25zdCBwYW5lbE9wdGlvbnMgPSBQYW5lbFN0dWJPcHRpb25zLkdlbmVyYXRlUGFzc3dvcmQ7XG5cbmV4cG9ydCBjbGFzcyBQYXNzd29yZEdlbmVyYXRvciB7XG4gICAgcHVibGljIGdlbmVyYXRlUGFzc3dvcmRQYW5lbFN0dWI6IFBhbmVsU3R1YjtcbiAgICBwcml2YXRlIGdlbmVyYXRlUGFzc3dvcmRQYW5lbFN0dWJSYWY6IG51bWJlcjtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgcGFyZW50RnJhbWVJZDogbnVtYmVyKSB7fVxuXG4gICAgcHVibGljIGNyZWF0ZUdlbmVyYXRlUGFzc3dvcmRQYW5lbCgpIHtcbiAgICAgICAgdGhpcy5jbG9zZUdlbmVyYXRlUGFzc3dvcmRQYW5lbCgpO1xuICAgICAgICB0aGlzLmdlbmVyYXRlUGFzc3dvcmRQYW5lbFN0dWIgPSBuZXcgUGFuZWxTdHViKHBhbmVsT3B0aW9ucywgbnVsbCwgdGhpcy5wYXJlbnRGcmFtZUlkKTtcbiAgICAgICAgdGhpcy5nZW5lcmF0ZVBhc3N3b3JkUGFuZWxTdHViLmNyZWF0ZVBhbmVsKCk7XG4gICAgfVxuXG4gICAgcHVibGljIGNyZWF0ZUdlbmVyYXRlUGFzc3dvcmRQYW5lbE5lYXJOb2RlKHRhcmdldDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5jbG9zZUdlbmVyYXRlUGFzc3dvcmRQYW5lbCgpO1xuICAgICAgICB0aGlzLmdlbmVyYXRlUGFzc3dvcmRQYW5lbFN0dWIgPSBuZXcgUGFuZWxTdHViKHBhbmVsT3B0aW9ucywgdGFyZ2V0LCB0aGlzLnBhcmVudEZyYW1lSWQpO1xuICAgICAgICB0aGlzLmdlbmVyYXRlUGFzc3dvcmRQYW5lbFN0dWIuY3JlYXRlUGFuZWwoKTtcbiAgICAgICAgdGhpcy5nZW5lcmF0ZVBhc3N3b3JkUGFuZWxTdHViUmFmID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUdlbmVyYXRlUGFzc3dvcmRQYW5lbFBvc2l0aW9uKClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY2xvc2VHZW5lcmF0ZVBhc3N3b3JkUGFuZWwoKSB7XG4gICAgICAgIGlmICh0aGlzLmdlbmVyYXRlUGFzc3dvcmRQYW5lbFN0dWIpIHRoaXMuZ2VuZXJhdGVQYXNzd29yZFBhbmVsU3R1Yi5jbG9zZVBhbmVsKCk7XG4gICAgICAgIHRoaXMuZ2VuZXJhdGVQYXNzd29yZFBhbmVsU3R1YiA9IG51bGw7XG4gICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuZ2VuZXJhdGVQYXNzd29yZFBhbmVsU3R1YlJhZik7XG4gICAgfVxuXG4gICAgcHVibGljIHVwZGF0ZUdlbmVyYXRlUGFzc3dvcmRQYW5lbFBvc2l0aW9uKCkge1xuICAgICAgICB0aGlzLmdlbmVyYXRlUGFzc3dvcmRQYW5lbFN0dWIudXBkYXRlQm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHRoaXMuZ2VuZXJhdGVQYXNzd29yZFBhbmVsU3R1YlJhZiA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PlxuICAgICAgICAgICAgdGhpcy51cGRhdGVHZW5lcmF0ZVBhc3N3b3JkUGFuZWxQb3NpdGlvbigpXG4gICAgICAgICk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgTXV0YXRpb25UeXBlIH0gZnJvbSBcInBpbmlhXCI7XG5pbXBvcnQgeyBkZWVwRXF1YWwgfSBmcm9tIFwifi9jb21tb24vdXRpbHNcIjtcbmltcG9ydCB7IEtlZVN0b3JlIH0gZnJvbSBcIi5cIjtcbmltcG9ydCB7IEtlZVN0YXRlIH0gZnJvbSBcIi4vS2VlU3RhdGVcIjtcbmltcG9ydCB7IE11dGF0aW9uLCBNdXRhdGlvblBheWxvYWQgfSBmcm9tIFwiLi9zeW5jQmFja2dyb3VuZFwiO1xuXG5leHBvcnQgY2xhc3MgU3luY0NvbnRlbnQge1xuICAgIHByaXZhdGUgc3RvcmU6IEtlZVN0b3JlO1xuICAgIGluaXRpYWxpemVkOiBib29sZWFuO1xuICAgIHJlY2VpdmVkUGF5bG9hZHM6IE11dGF0aW9uUGF5bG9hZFtdO1xuICAgIHBlbmRpbmdNdXRhdGlvbnM6IE11dGF0aW9uW107XG4gICAgcHJpdmF0ZSBzZW5kTXV0YXRpb25QYXlsb2FkOiAobXV0YXRpb246IE11dGF0aW9uUGF5bG9hZCkgPT4gdm9pZDtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnJlY2VpdmVkUGF5bG9hZHMgPSBbXTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnBlbmRpbmdNdXRhdGlvbnMgPSBbXTtcbiAgICB9XG5cbiAgICBpbml0KHN0b3JlOiBLZWVTdG9yZSwgaW5pdGlhbFN0YXRlOiBLZWVTdGF0ZSwgc2VuZE11dGF0aW9uOiAobXV0YXRpb246IE11dGF0aW9uUGF5bG9hZCkgPT4gdm9pZCwgdnVlTW91bnQ/KSB7XG4gICAgICAgIHRoaXMuc3RvcmUgPSBzdG9yZTtcbiAgICAgICAgdGhpcy5zdG9yZS4kc3Vic2NyaWJlKG11dGF0aW9uID0+IHtcbiAgICAgICAgICAgIGlmIChtdXRhdGlvbi50eXBlID09IE11dGF0aW9uVHlwZS5wYXRjaE9iamVjdCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlTG9jYWxseUdlbmVyYXRlZE11dGF0aW9uKG11dGF0aW9uKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQaW5pYSBnZW5lcmF0ZWQgYSBub24tb2JqZWN0IG11dGF0aW9uLiBXZSBkb24ndCB0aGluayB3ZSBjYW4gc3VwcG9ydCB0aGlzIGFuZCBuZWVkIHRvIGtub3cgdGhhdCBpdCBpcyBwb3NzaWJsZSBmb3IgaXQgdG8gaGFwcGVuISBUZWxsIHVzIG5vdyBvciB3ZWlyZCB0aGluZ3Mgd2lsbCBoYXBwZW4uXCIpO1xuICAgICAgICAgICAgICAgIH0gLy8gJ2RpcmVjdCcgfCAncGF0Y2ggb2JqZWN0JyB8ICdwYXRjaCBmdW5jdGlvbidcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc2VuZE11dGF0aW9uUGF5bG9hZCA9IHNlbmRNdXRhdGlvbjtcblxuICAgICAgICB0aGlzLnN0b3JlLiRwYXRjaChpbml0aWFsU3RhdGUpO1xuICAgICAgICB0aGlzLmluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5wcm9jZXNzUGVuZGluZ0xvY2FsbHlTb3VyY2VkTXV0YXRpb25zKCk7XG5cbiAgICAgICAgaWYgKHZ1ZU1vdW50KSB2dWVNb3VudCgpO1xuICAgICAgICAvLyBtb3ZlIHN0b3JlIHN1YnNjcmlwdGlvbiBhbmQgaW5pdGlhbCBzdGF0ZSBwYXRjaCB0byBoZXJlLCBhZnRlciBjcmVhdGluZyBpdCBhbmQgcmV0dXJuaW5nIGZyb20gdnVld0luaXQoKVxuICAgICAgICAvLyB3aWxsIG1lYW4gc2xvd2VyIGluaXRpYWwgc3VwcG9ydCBmb3IgcmVjZWl2aW5nIG11dGF0aW9ucy4uLiB3aGljaCBpcyBmdWNrZWQ/IGNvcyB3ZSBtYXkgd2lsbCBkZWNpZGUgdG8gc2VuZCB0aGVtIGJlZm9yZSBiYWNrZ3JvdW5kIGhhcyByZXNwb25kZWQgd2l0aCB0aGUgc3RvcmUgaW5pdGlhbCBzdGF0ZS5cbiAgICAgICAgLy8gU29tZSB3YXkgdG8gdXNlIGEgdGVtcG9yYXJ5IHN0b3JlIG9uIGEgdGVtcG9yYXJ5IHBpbmlhIGluc3RhbmNlIG9uIGEgdGVtcG9yYXJ5IHZ1ZSBpbnN0YW5jZT9cbiAgICAgICAgLy8gQ2FuIGFkZCB0byBwZW5kaW5nTXV0YXRpb25zIG5vIG1hdHRlciB3aGljaCBzdG9yZSBpdCBpcyBmcm9tXG4gICAgICAgIC8vIGNvdWxkIGdldCByZW1vdGVtdXRhdGlvbnMgYmVmb3JlIHdlIGFyZSByZWFkeSBidXQgbWF5YmUgT0sgdG8ganVzdCBpZ25vcmUgdGhlbSBsaWtlIHdlIGRvIGN1cnJlbnRseS5cbiAgICAgICAgLy8gU28sIHRoZXJlZm9yZSB3ZSBoYXZlIHRvIGluaXRpYWxpc2UgdnVlIGJlZm9yZSB3ZSBoYXZlIGhlYXJkIGJhY2sgd2hhdCB0aGUgaW5pdGlhbCBzdG9yZSBzdGF0ZSBzaG91bGQgYmUuIG1pZ2h0IGp1c3Qgd29yayBidXQgbWF5YmUgbmVlZCB0byBhZGQgYSBcImxvYWRpbmdcIiBzdGF0dXMgdG8gVnVlXG4gICAgICAgIC8vaW50aWFpbGx5LCBvciBtYXliZSB3ZSBjYW4gZ2V0IGF3YXkgd2l0aG91dCBjYWxsaW5nIG1vdW50KCkgdW50aWwgYWZ0ZXIgdGhlIHN0YXRlIGhhcyBiZWVuIHJlY2VpdmVkLlxuICAgICAgICAvLyBDb3VsZCB3b3JrLi4uIHNvIHRoZW4gd2UgZG9uJ3QgbmVlZCB0byBzdXBwbHkgdGhlIHN0b3JlIG9yIHN0YXRlIGJlZm9yZSB0aGUgc3RvcmUgY2FuIGJlIGluaXRpYWxpYXNlZCB1c2luZyB0aGUgbmV3IHZ1ZSBpbnN0YW5jZS5cbiAgICB9XG5cbiAgICByZXNldChuZXdTdGF0ZTogS2VlU3RhdGUpIHtcbiAgICAgICAgdGhpcy5zdG9yZS4kcGF0Y2gobmV3U3RhdGUpO1xuICAgIH1cblxuICAgIHB1YmxpYyBvblJlbW90ZU11dGF0aW9uUGF5bG9hZChwYXlsb2FkOiBNdXRhdGlvblBheWxvYWQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmluaXRpYWxpemVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlY2VpdmVkUGF5bG9hZHMucHVzaChwYXlsb2FkKTtcbiAgICAgICAgdGhpcy5zdG9yZS4kcGF0Y2gocGF5bG9hZCk7XG4gICAgfVxuXG4gICAgaGFuZGxlTG9jYWxseUdlbmVyYXRlZE11dGF0aW9uKG11dGF0aW9uOiBNdXRhdGlvbikge1xuICAgICAgICBpZiAoIXRoaXMuaW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBlbmRpbmdNdXRhdGlvbnMucHVzaChtdXRhdGlvbik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMucmVjZWl2ZWRQYXlsb2Fkcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbmRNdXRhdGlvblBheWxvYWQobXV0YXRpb24ucGF5bG9hZCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGVjayBpZiBpdCdzIHJlY2VpdmVkIG11dGF0aW9uLCBpZiBpdCdzIGp1c3QgaWdub3JlIGl0LCBpZiBub3Qgc2VuZCB0byBiYWNrZ3JvdW5kXG4gICAgICAgIGZvciAobGV0IGkgPSB0aGlzLnJlY2VpdmVkUGF5bG9hZHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBkZWVwRXF1YWwodGhpcy5yZWNlaXZlZFBheWxvYWRzW2ldLCBtdXRhdGlvbi5wYXlsb2FkKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWNlaXZlZFBheWxvYWRzLnNwbGljZShpLCAxKTtcblxuICAgICAgICAgICAgICAgIC8vIE11bHRpcGxlIG11dGF0aW9ucyBjYW4gYmUgaW4gdGhlIHJlY2VpdmVkIHF1ZXVlIHNvIHdlIGhhdmUgdG8gYnJlYWssXG4gICAgICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIGR1cGxpY2F0ZSByZWNlaXZlZCBtdXRhdGlvbnMgd2lsbCByZXN1bHQgaW4gc29tZSBiZWluZyBzZW50XG4gICAgICAgICAgICAgICAgLy8gdG8gdGhlIGJhY2tncm91bmQgdGhyZWFkLCBsZWFkaW5nIHRvIGFuIGluZmluaXRlIGxvb3AuXG4gICAgICAgICAgICAgICAgLy8gVGhlIGV4YWN0IG1lY2hhbmlzbSBieSB3aGljaCB0aGlzIGNhbiBoYXBwZW4gaXMgdW5jbGVhciBhbmQgaXRcbiAgICAgICAgICAgICAgICAvLyBtYXkgYmUgYSBidWcgb3IgbXV0YWJsZSBpbXBsZW1lbnRhdGlvbiBkZXRhaWwgb2YgVnVlWC4gSSBoeXBvdGhlc2lzZVxuICAgICAgICAgICAgICAgIC8vIHRoYXQgbXVsdGlwbGUgbXV0YXRpb25zIGFycml2aW5nIGluIGEgc2hvcnQgcGVyaW9kIG9mIHRpbWUgY2FuIGdldFxuICAgICAgICAgICAgICAgIC8vIGJhdGNoZWQgdG9nZXRoZXIgaW4gYSB3YXkgdGhhdCBhbGxvd3MgbXVsdGlwbGUgaG9va3MgdG8gcXVldWUgdXBcbiAgICAgICAgICAgICAgICAvLyBiZWZvcmUgYmVpbmcgaW52b2tlZC4gVGh1cyB0aGUgZmlyc3QgdGltZSB0aGF0IHRoaXMgbG9vcCBpcyBjcmVhdGVkXG4gICAgICAgICAgICAgICAgLy8gaXQgc2V0cyB1cCBhIGhpZ2hlciBjaGFuY2UgdGhhdCB0aGUgbG9vcCB3aWxsIHJlcGVhdCBhZ2FpbiwgdW50aWxcbiAgICAgICAgICAgICAgICAvLyBzdWNoIHRpbWUgYXMgdGhlIGJhdGNoaW5nIGJlaGF2aW91ciBpcyBhbGwgYnV0IGd1YXJhbnRlZWQgYW5kIHRoZVxuICAgICAgICAgICAgICAgIC8vIGxvb3AgY2FuIG5ldmVyIGVuZC5cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kTXV0YXRpb25QYXlsb2FkKG11dGF0aW9uLnBheWxvYWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJvY2Vzc1BlbmRpbmdMb2NhbGx5U291cmNlZE11dGF0aW9ucygpIHtcbiAgICAgICAgaWYgKCF0aGlzLnBlbmRpbmdNdXRhdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucGVuZGluZ011dGF0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5zZW5kTXV0YXRpb25QYXlsb2FkKHRoaXMucGVuZGluZ011dGF0aW9uc1tpXS5wYXlsb2FkKTtcbiAgICAgICAgICAgIHRoaXMucGVuZGluZ011dGF0aW9ucy5zcGxpY2UoaSwgMSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBBZGRvbk1lc3NhZ2UgfSBmcm9tIFwiLi9BZGRvbk1lc3NhZ2VcIjtcbmltcG9ydCB7IFZhdWx0TWVzc2FnZSB9IGZyb20gXCIuL1ZhdWx0TWVzc2FnZVwiO1xuXG5jbGFzcyBDb250ZW50UG9ydE1hbmFnZXIge1xuICAgIHByaXZhdGUgcG9ydDogYnJvd3Nlci5ydW50aW1lLlBvcnQ7XG5cbiAgICAvLyBwdWJsaWMgbWl4aW4gPSB7XG4gICAgLy8gICAgIG1ldGhvZHM6IHtcbiAgICAvLyAgICAgICAgIHBvc3RNZXNzYWdlOiBtc2cgPT4ge1xuICAgIC8vICAgICAgICAgICAgIHRoaXMucG9ydC5wb3N0TWVzc2FnZShtc2cpO1xuICAgIC8vICAgICAgICAgfVxuICAgIC8vICAgICB9XG4gICAgLy8gfTtcblxuICAgIHB1YmxpYyBwb3N0TWVzc2FnZShtc2c6IEFkZG9uTWVzc2FnZSB8IFZhdWx0TWVzc2FnZSkge1xuICAgICAgICB0aGlzLnBvcnQucG9zdE1lc3NhZ2UobXNnKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhcnR1cChuYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5wb3J0ID0gYnJvd3Nlci5ydW50aW1lLmNvbm5lY3QoeyBuYW1lIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBzaHV0ZG93bigpIHtcbiAgICAgICAgdGhpcy5wb3J0ID0gbnVsbDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0IHJhdygpOiBicm93c2VyLnJ1bnRpbWUuUG9ydCB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvcnQ7XG4gICAgfVxufVxuXG5leHBvcnQgY29uc3QgUG9ydCA9IG5ldyBDb250ZW50UG9ydE1hbmFnZXIoKTtcbiIsIi8qIGVzbGludC1kaXNhYmxlIG5vLWlubmVyLWRlY2xhcmF0aW9ucyAqL1xuaW1wb3J0IHsgRm9ybUZpbGxpbmcgfSBmcm9tIFwiLi9mb3JtRmlsbGluZ1wiO1xuaW1wb3J0IHsgRm9ybVV0aWxzIH0gZnJvbSBcIi4vZm9ybXNVdGlsc1wiO1xuaW1wb3J0IHsgRm9ybVNhdmluZyB9IGZyb20gXCIuL2Zvcm1TYXZpbmdcIjtcbmltcG9ydCB7IFBhc3N3b3JkR2VuZXJhdG9yIH0gZnJvbSBcIi4vUGFzc3dvcmRHZW5lcmF0b3JcIjtcbmltcG9ydCB7IEtlZUxvZyB9IGZyb20gXCIuLi9jb21tb24vTG9nZ2VyXCI7XG5pbXBvcnQgeyBjb25maWdNYW5hZ2VyIH0gZnJvbSBcIi4uL2NvbW1vbi9Db25maWdNYW5hZ2VyXCI7XG5pbXBvcnQgeyBBZGRvbk1lc3NhZ2UgfSBmcm9tIFwiLi4vY29tbW9uL0FkZG9uTWVzc2FnZVwiO1xuaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSBcIi4uL2NvbW1vbi9BY3Rpb25cIjtcbmltcG9ydCB1c2VTdG9yZSwgeyB1c2VTdHViU3RvcmUgfSBmcm9tIFwiLi4vc3RvcmVcIjtcbmltcG9ydCB7IFN5bmNDb250ZW50IH0gZnJvbSBcIi4uL3N0b3JlL3N5bmNDb250ZW50XCI7XG5pbXBvcnQgeyBQb3J0IH0gZnJvbSBcIi4uL2NvbW1vbi9wb3J0XCI7XG5pbXBvcnQgeyBjcmVhdGVQaW5pYSB9IGZyb20gXCJwaW5pYVwiO1xuaW1wb3J0IHsgTXV0YXRpb24gfSBmcm9tIFwiLi4vc3RvcmUvc3luY0JhY2tncm91bmRcIjtcblxuLyogVGhpcyBvcmNoZXN0cmF0ZXMgdGhlIG1haW4gZnVuY3Rpb25zIG9mIHRoZSBhZGQtb25cbm9uIGFsbCB3ZWJzaXRlIHBhZ2VzIGV4Y2VwdCB0aG9zZSBjb250YWluaW5nIGEgS1BSUEMgc2VydmVyICovXG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby12YXJcbnZhciBrZWVEdXBsaWNhdGlvbkNvdW50O1xuXG5pZiAoa2VlRHVwbGljYXRpb25Db3VudCkge1xuICAgIGlmIChLZWVMb2cgJiYgS2VlTG9nLmVycm9yKSB7XG4gICAgICAgIEtlZUxvZy5lcnJvcihcbiAgICAgICAgICAgIFwiRHVwbGljYXRlIEtlZSBjb250ZW50IHNjcmlwdCBpbnN0YW5jZSBkZXRlY3RlZCEgRm91bmQgdGhpcyBtYW55IG90aGVyIGluc3RhbmNlczogXCIgK1xuICAgICAgICAgICAgICAgIGtlZUR1cGxpY2F0aW9uQ291bnRcbiAgICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgXCJEdXBsaWNhdGUgS2VlIGNvbnRlbnQgc2NyaXB0IGluc3RhbmNlIGRldGVjdGVkISBGb3VuZCB0aGlzIG1hbnkgb3RoZXIgaW5zdGFuY2VzOiBcIiArXG4gICAgICAgICAgICAgICAga2VlRHVwbGljYXRpb25Db3VudFxuICAgICAgICApO1xuICAgIH1cbn0gZWxzZSB7XG4gICAga2VlRHVwbGljYXRpb25Db3VudCA9IDA7XG59XG5rZWVEdXBsaWNhdGlvbkNvdW50ICs9IDE7XG5cbmxldCBmb3JtVXRpbHM6IEZvcm1VdGlscztcbmxldCBmb3JtRmlsbGluZzogRm9ybUZpbGxpbmc7XG5sZXQgZm9ybVNhdmluZzogRm9ybVNhdmluZztcbmxldCBwYXNzd29yZEdlbmVyYXRvcjogUGFzc3dvcmRHZW5lcmF0b3I7XG5sZXQgZnJhbWVJZDogbnVtYmVyO1xubGV0IHN5bmNDb250ZW50OiBTeW5jQ29udGVudDtcbmxldCBjb25uZWN0ZWQgPSBmYWxzZTtcbmxldCBtZXNzYWdpbmdQb3J0Q29ubmVjdGlvblJldHJ5VGltZXI6IG51bWJlcjtcbmxldCBwYWdlU2hvd0ZpcmVkID0gZmFsc2U7XG5sZXQgY29uZmlnUmVhZHkgPSBmYWxzZTtcbmxldCBtaXNzaW5nUGFnZVNob3dUaW1lcjogbnVtYmVyO1xuXG5sZXQgaW5wdXRzT2JzZXJ2ZXI6IE11dGF0aW9uT2JzZXJ2ZXI7XG5cbmNvbnN0IHN0b3JlID0gdXNlU3R1YlN0b3JlKCk7XG5cbi8vIENvbnRlbnQgc2NyaXB0cyBhcmUgaW5qZWN0ZWQgaW50byBub24tSFRNTCBkb2N1bWVudHMgc3VjaCBhcyBTVkdzLlxuLy8gV2UgaGF2ZSBubyBpbnRlcmVzdCBpbiB0aGlzIGRvY3VtZW50IGlmIGl0IGhhcyBubyBib2R5IE5vZGVcbmlmIChkb2N1bWVudC5ib2R5KSB7XG4gICAgaW5wdXRzT2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihtdXRhdGlvbnMgPT4ge1xuICAgICAgICAvLyBJZiB3ZSBoYXZlIGFscmVhZHkgc2NoZWR1bGVkIGEgcmVzY2FuIHJlY2VudGx5LCBubyBmdXJ0aGVyIGFjdGlvbiByZXF1aXJlZFxuICAgICAgICBpZiAoZm9ybUZpbGxpbmcuZm9ybUZpbmRlclRpbWVyICE9PSBudWxsKSByZXR1cm47XG5cbiAgICAgICAgLy8gT25seSBwcm9jZWVkIGlmIHdlIGhhdmUgYSBEQiB0byBzZWFyY2hcbiAgICAgICAgaWYgKCFzdG9yZS5jb25uZWN0ZWQgfHwgc3RvcmUuQWN0aXZlS2VlUGFzc0RhdGFiYXNlSW5kZXggPCAwKSByZXR1cm47XG5cbiAgICAgICAgbGV0IHJlc2NhbiA9IGZhbHNlO1xuICAgICAgICBjb25zdCBpbnRlcmVzdGluZ05vZGVzID0gW1wiZm9ybVwiLCBcImlucHV0XCIsIFwic2VsZWN0XCJdO1xuICAgICAgICBtdXRhdGlvbnMuZm9yRWFjaChtdXRhdGlvbiA9PiB7XG4gICAgICAgICAgICBpZiAocmVzY2FuKSByZXR1cm47XG4gICAgICAgICAgICBpZiAobXV0YXRpb24udHlwZSA9PT0gXCJjaGlsZExpc3RcIiAmJiBtdXRhdGlvbi5hZGRlZE5vZGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG5vZGUgb2YgbXV0YXRpb24uYWRkZWROb2Rlcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzY2FuKSBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnRlcmVzdGluZ05vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gbm9kZSBhcyBFbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQucXVlcnlTZWxlY3RvciAmJiBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoaW50ZXJlc3RpbmdOb2Rlc1tpXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNjYW4gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBTY2hlZHVsZSBhIHJlc2NhbiBzb29uLiBOb3QgaW1tZWRpYXRlbHksIGluIGNhc2UgYSBiYXRjaCBvZiBtdXRhdGlvbnMgYXJlIGFib3V0IHRvIGJlIHRyaWdnZXJlZC5cbiAgICAgICAgaWYgKHJlc2Nhbikge1xuICAgICAgICAgICAgZm9ybUZpbGxpbmcuZm9ybUZpbmRlclRpbWVyID0gd2luZG93LnNldFRpbWVvdXQoXG4gICAgICAgICAgICAgICAgZm9ybUZpbGxpbmcuZmluZE1hdGNoZXNJblRoaXNGcmFtZS5iaW5kKGZvcm1GaWxsaW5nKSxcbiAgICAgICAgICAgICAgICA1MDBcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIG1hdGNoRmluZGVyKHVyaTogc3RyaW5nKSB7XG4gICAgICAgIFBvcnQucG9zdE1lc3NhZ2UoeyBmaW5kTWF0Y2hlczogeyB1cmkgfSB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0dXRvcmlhbEludGVncmF0aW9uKCkge1xuICAgICAgICBpZiAod2luZG93LmxvY2F0aW9uLmhvc3RuYW1lLmVuZHNXaXRoKFwidHV0b3JpYWwtYWRkb24ua2VlLnBtXCIpKSB7XG4gICAgICAgICAgICBjb25zdCB0cmFuc2ZlckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiS2VlRm94QWRkb25TdGF0ZVRyYW5zZmVyRWxlbWVudFwiKTtcbiAgICAgICAgICAgIHRyYW5zZmVyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXG4gICAgICAgICAgICAgICAgXCJzdGF0ZVwiLFxuICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGVkOiBzdG9yZS5jb25uZWN0ZWQsXG4gICAgICAgICAgICAgICAgICAgIHZlcnNpb246IGJyb3dzZXIucnVudGltZS5nZXRNYW5pZmVzdCgpLnZlcnNpb24sXG4gICAgICAgICAgICAgICAgICAgIGRiTG9hZGVkOiBzdG9yZS5LZWVQYXNzRGF0YWJhc2VzLmxlbmd0aCA+IDAsXG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25OYW1lczogc3RvcmUuS2VlUGFzc0RhdGFiYXNlcy5tYXAoZGIgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgIGRiLnNlc3Npb25UeXBlLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgKS5maWx0ZXIoKHYsIGksIGEpID0+IGEuaW5kZXhPZih2KSA9PT0gaSlcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZCh0cmFuc2ZlckVsZW1lbnQpO1xuXG4gICAgICAgICAgICBjb25zdCBldmVudCA9IG5ldyBFdmVudChcIktlZUZveEFkZG9uU3RhdGVUcmFuc2ZlckV2ZW50XCIsIHtcbiAgICAgICAgICAgICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgICAgICAgICAgIGNhbmNlbGFibGU6IGZhbHNlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRyYW5zZmVyRWxlbWVudC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uRmlyc3RDb25uZWN0KG15RnJhbWVJZDogbnVtYmVyKSB7XG4gICAgICAgIGZyYW1lSWQgPSBteUZyYW1lSWQ7XG5cbiAgICAgICAgS2VlTG9nLmF0dGFjaENvbmZpZyhjb25maWdNYW5hZ2VyLmN1cnJlbnQpO1xuICAgICAgICBmb3JtVXRpbHMgPSBuZXcgRm9ybVV0aWxzKEtlZUxvZyk7XG4gICAgICAgIGZvcm1TYXZpbmcgPSBuZXcgRm9ybVNhdmluZyhQb3J0LnJhdywgS2VlTG9nLCBmb3JtVXRpbHMpO1xuICAgICAgICBmb3JtRmlsbGluZyA9IG5ldyBGb3JtRmlsbGluZyhcbiAgICAgICAgICAgIFBvcnQucmF3LFxuICAgICAgICAgICAgZnJhbWVJZCxcbiAgICAgICAgICAgIGZvcm1VdGlscyxcbiAgICAgICAgICAgIGZvcm1TYXZpbmcsXG4gICAgICAgICAgICBLZWVMb2csXG4gICAgICAgICAgICBjb25maWdNYW5hZ2VyLmN1cnJlbnQsXG4gICAgICAgICAgICBtYXRjaEZpbmRlclxuICAgICAgICApO1xuICAgICAgICBwYXNzd29yZEdlbmVyYXRvciA9IG5ldyBQYXNzd29yZEdlbmVyYXRvcihmcmFtZUlkKTtcblxuICAgICAgICBpbnB1dHNPYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHsgY2hpbGRMaXN0OiB0cnVlLCBzdWJ0cmVlOiB0cnVlIH0pO1xuXG4gICAgICAgIHR1dG9yaWFsSW50ZWdyYXRpb24oKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzdGFydHVwKCkge1xuICAgICAgICBLZWVMb2cuZGVidWcoXCJjb250ZW50IHBhZ2Ugc3RhcnRpbmdcIik7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm5lY3RUb01lc3NhZ2luZ1BvcnQoKTtcbiAgICAgICAgICAgIGlmIChQb3J0LnJhdyA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgS2VlTG9nLndhcm4oXCJGYWlsZWQgdG8gY29ubmVjdCB0byBtZXNzYWdpbmcgcG9ydC4gV2UnbGwgdHJ5IGFnYWluIGxhdGVyLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgIEtlZUxvZy53YXJuKFxuICAgICAgICAgICAgICAgIFwiRmFpbGVkIHRvIGNvbm5lY3QgdG8gbWVzc2FnaW5nIHBvcnQuIFdlJ2xsIHRyeSBhZ2FpbiBsYXRlci4gRXhjZXB0aW9uIG1lc3NhZ2U6IFwiICtcbiAgICAgICAgICAgICAgICAgICAgZXgubWVzc2FnZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG1lc3NhZ2luZ1BvcnRDb25uZWN0aW9uUmV0cnlUaW1lciA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAoUG9ydC5yYXcgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIEtlZUxvZy5pbmZvKFwiTWVzc2FnaW5nIHBvcnQgd2FzIG5vdCBlc3RhYmxpc2hlZCBhdCBwYWdlIHN0YXJ0dXAuIFJldHJ5aW5nIG5vdy4uLlwiKTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25uZWN0VG9NZXNzYWdpbmdQb3J0KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChQb3J0LnJhdyA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBLZWVMb2cud2FybihcIkZhaWxlZCB0byBjb25uZWN0IHRvIG1lc3NhZ2luZyBwb3J0LiBXZSdsbCB0cnkgYWdhaW4gbGF0ZXIuXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgS2VlTG9nLndhcm4oXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkZhaWxlZCB0byBjb25uZWN0IHRvIG1lc3NhZ2luZyBwb3J0LiBXZSdsbCB0cnkgYWdhaW4gbGF0ZXIuIEV4Y2VwdGlvbiBtZXNzYWdlOiBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXgubWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChtZXNzYWdpbmdQb3J0Q29ubmVjdGlvblJldHJ5VGltZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCA1MDAwKTtcblxuICAgICAgICBLZWVMb2cuZGVidWcoXCJjb250ZW50IHBhZ2UgcmVhZHlcIik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY29ubmVjdFRvTWVzc2FnaW5nUG9ydCgpIHtcbiAgICAgICAgaWYgKFBvcnQucmF3KSB7XG4gICAgICAgICAgICBLZWVMb2cud2FybihcbiAgICAgICAgICAgICAgICBcInBvcnQgYWxyZWFkeSBzZXQgdG8gJ1wiICtcbiAgICAgICAgICAgICAgICAgICAgUG9ydC5yYXcubmFtZSArXG4gICAgICAgICAgICAgICAgICAgIFwiJy4gU2tpcHBpbmcgc3RhcnR1cCBiZWNhdXNlIGl0IHNob3VsZCBhbHJlYWR5IGJlIHVuZGVyd2F5IGJ1dCBpcyB0YWtpbmcgYSBsb25nIHRpbWUuXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc3luY0NvbnRlbnQgPSBuZXcgU3luY0NvbnRlbnQoc3RvcmUpO1xuICAgICAgICBQb3J0LnN0YXJ0dXAoXCJwYWdlXCIpO1xuXG4gICAgICAgIFBvcnQucmF3Lm9uTWVzc2FnZS5hZGRMaXN0ZW5lcihmdW5jdGlvbiAobTogQWRkb25NZXNzYWdlKSB7XG4gICAgICAgICAgICBLZWVMb2cuZGVidWcoXCJJbiBicm93c2VyIGNvbnRlbnQgcGFnZSBzY3JpcHQsIHJlY2VpdmVkIG1lc3NhZ2UgZnJvbSBiYWNrZ3JvdW5kIHNjcmlwdFwiKTtcblxuICAgICAgICAgICAgaWYgKG0uaW5pdGlhbFN0YXRlKSB7XG4gICAgICAgICAgICAgICAgc3luY0NvbnRlbnQuaW5pdChtLmluaXRpYWxTdGF0ZSwgKG11dGF0aW9uOiBNdXRhdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBQb3J0LnBvc3RNZXNzYWdlKHsgbXV0YXRpb24gfSBhcyBBZGRvbk1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG0ubXV0YXRpb24pIHtcbiAgICAgICAgICAgICAgICBzeW5jQ29udGVudC5vblJlbW90ZU11dGF0aW9uKG0ubXV0YXRpb24pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFjb25uZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICBvbkZpcnN0Q29ubmVjdChtLmZyYW1lSWQpO1xuICAgICAgICAgICAgICAgIGZvcm1GaWxsaW5nLmZpbmRNYXRjaGVzSW5UaGlzRnJhbWUoKTtcbiAgICAgICAgICAgICAgICBjb25uZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChtLmFjdGlvbiA9PSBBY3Rpb24uRGV0ZWN0Rm9ybXMpIHtcbiAgICAgICAgICAgICAgICBpZiAobS5yZXNldFN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFNvbWV0aW1lcyB0aGUgcGFnZSdzIFZ1ZXggc3RhdGUgY2FuIGJlIG91dCBvZiBzeW5jIHdpdGggdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIGJhY2tncm91bmQgLSBlLmcuIHdoZW4gdGhlIHRhYiBoYXMgYmVlbiBpbmFjdGl2ZSBmb3Igc29tZVxuICAgICAgICAgICAgICAgICAgICAvLyB0aW1lLiBJbiB0aGVzZSBjYXNlcywgd2UgbXVzdCBzdXBwbHkgdGhlIGZ1bGwgc3RhdGUgYWdhaW5cbiAgICAgICAgICAgICAgICAgICAgLy8gYmVmb3JlIGxvb2tpbmcgZm9yIG1hdGNoaW5nIGVudHJpZXMuXG4gICAgICAgICAgICAgICAgICAgIHN5bmNDb250ZW50LnJlc2V0KG0ucmVzZXRTdGF0ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvcm1GaWxsaW5nLnJlbW92ZUtlZUljb25Gcm9tQWxsRmllbGRzKCk7XG4gICAgICAgICAgICAgICAgZm9ybVNhdmluZy5yZW1vdmVBbGxTdWJtaXRIYW5kbGVycygpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHN0b3JlLmVudHJ5VXBkYXRlU3RhcnRlZEF0VGltZXN0YW1wID49IERhdGUubm93KCkgLSAyMDAwMCkge1xuICAgICAgICAgICAgICAgICAgICBmb3JtRmlsbGluZy5maW5kTWF0Y2hlc0luVGhpc0ZyYW1lKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9maWxsT25TdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9zdWJtaXRPblN1Y2Nlc3M6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1GaWxsaW5nLmZpbmRNYXRjaGVzSW5UaGlzRnJhbWUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChtLmZpbmRNYXRjaGVzUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgZm9ybUZpbGxpbmcuZmluZExvZ2luc1Jlc3VsdEhhbmRsZXIobS5maW5kTWF0Y2hlc1Jlc3VsdCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChtLmFjdGlvbiA9PSBBY3Rpb24uTWFudWFsRmlsbCAmJiBtLnNlbGVjdGVkRW50cnlJbmRleCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgZm9ybUZpbGxpbmcuY2xvc2VNYXRjaGVkTG9naW5zUGFuZWwoKTtcbiAgICAgICAgICAgICAgICBmb3JtRmlsbGluZy5maWxsQW5kU3VibWl0KGZhbHNlLCBudWxsLCBtLnNlbGVjdGVkRW50cnlJbmRleCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChtLmFjdGlvbiA9PSBBY3Rpb24uUmVzZXRGb3Jtcykge1xuICAgICAgICAgICAgICAgIGZvcm1GaWxsaW5nLnJlbW92ZUtlZUljb25Gcm9tQWxsRmllbGRzKCk7XG4gICAgICAgICAgICAgICAgZm9ybVNhdmluZy5yZW1vdmVBbGxTdWJtaXRIYW5kbGVycygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobS5hY3Rpb24gPT0gQWN0aW9uLlByaW1hcnkpIHtcbiAgICAgICAgICAgICAgICBmb3JtRmlsbGluZy5leGVjdXRlUHJpbWFyeUFjdGlvbigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobS5hY3Rpb24gPT0gQWN0aW9uLkdlbmVyYXRlUGFzc3dvcmQpIHtcbiAgICAgICAgICAgICAgICBwYXNzd29yZEdlbmVyYXRvci5jcmVhdGVHZW5lcmF0ZVBhc3N3b3JkUGFuZWwoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG0uYWN0aW9uID09IEFjdGlvbi5DbG9zZUFsbFBhbmVscykge1xuICAgICAgICAgICAgICAgIHBhc3N3b3JkR2VuZXJhdG9yLmNsb3NlR2VuZXJhdGVQYXNzd29yZFBhbmVsKCk7XG4gICAgICAgICAgICAgICAgZm9ybUZpbGxpbmcuY2xvc2VNYXRjaGVkTG9naW5zUGFuZWwoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG0uYWN0aW9uID09IEFjdGlvbi5TaG93TWF0Y2hlZExvZ2luc1BhbmVsKSB7XG4gICAgICAgICAgICAgICAgZm9ybUZpbGxpbmcuY3JlYXRlTWF0Y2hlZExvZ2luc1BhbmVsSW5DZW50ZXIobS5mcmFtZUlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwYWdlc2hvd1wiLCAoKSA9PiB7XG4gICAgICAgIHBhZ2VTaG93RmlyZWQgPSB0cnVlO1xuICAgICAgICBjbGVhclRpbWVvdXQobWlzc2luZ1BhZ2VTaG93VGltZXIpO1xuICAgICAgICBpZiAoY29uZmlnUmVhZHkpIHtcbiAgICAgICAgICAgIHN0YXJ0dXAoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicGFnZWhpZGVcIiwgKCkgPT4ge1xuICAgICAgICBpbnB1dHNPYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICAgIGlmIChQb3J0LnJhdykgUG9ydC5wb3N0TWVzc2FnZSh7IGFjdGlvbjogQWN0aW9uLlBhZ2VIaWRlIH0pO1xuICAgICAgICBmb3JtRmlsbGluZy5yZW1vdmVLZWVJY29uRnJvbUFsbEZpZWxkcygpO1xuICAgICAgICBQb3J0LnNodXRkb3duKCk7XG4gICAgICAgIGNvbm5lY3RlZCA9IGZhbHNlO1xuICAgICAgICBmcmFtZUlkID0gdW5kZWZpbmVkO1xuICAgICAgICBmb3JtVXRpbHMgPSB1bmRlZmluZWQ7XG4gICAgICAgIGZvcm1TYXZpbmcgPSB1bmRlZmluZWQ7XG4gICAgICAgIGZvcm1GaWxsaW5nID0gdW5kZWZpbmVkO1xuICAgICAgICBwYXNzd29yZEdlbmVyYXRvciA9IHVuZGVmaW5lZDtcbiAgICB9KTtcblxuICAgIC8vIExvYWQgb3VyIGNvbmZpZ1xuICAgIGNvbmZpZ01hbmFnZXIubG9hZCgoKSA9PiB7XG4gICAgICAgIGNvbmZpZ1JlYWR5ID0gdHJ1ZTtcbiAgICAgICAgaWYgKHBhZ2VTaG93RmlyZWQpIHtcbiAgICAgICAgICAgIHN0YXJ0dXAoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFBhZ2Ugc2hvdyBkb2VzIG5vdCBhbHdheXMgZmlyZSAoZS5nLiBvbiBmaXJzdCBpbnN0YWxsIG9mIHRoZSBleHRlbnNpb24pXG4gICAgICAgICAgICAvLyBzbyB3ZSB3b24ndCB3YWl0IGFyb3VuZCBmb3JldmVyLCBhdCB0aGUgY29zdCBvZiBvY2Nhc2lvbmFsIGR1cGxpY2F0ZVxuICAgICAgICAgICAgLy8gc3RhcnR1cCBjb2RlIC0gYnJvYWRseSBsaW1pdGVkIHRvIGRpc2NvdmVyaW5nIHRoYXQgdGhlIG1lc3NhZ2UgcG9ydFxuICAgICAgICAgICAgLy8gaXMgYWxyZWFkeSBlc3RhYmxpc2hlZC5cbiAgICAgICAgICAgIG1pc3NpbmdQYWdlU2hvd1RpbWVyID0gd2luZG93LnNldFRpbWVvdXQoc3RhcnR1cCwgMTUwMCk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbiJdLCJuYW1lcyI6WyJnbG9iYWwiLCJmYWN0b3J5IiwibW9kdWxlIiwidGhpcyIsIl9iIiwiX2EiLCJDSFJPTUVfU0VORF9NRVNTQUdFX0NBTExCQUNLX05PX1JFU1BPTlNFX01FU1NBR0UiLCJ3cmFwQVBJcyIsImV4dGVuc2lvbkFQSXMiLCJhcGlNZXRhZGF0YSIsIkRlZmF1bHRXZWFrTWFwIiwiY3JlYXRlSXRlbSIsIml0ZW1zIiwia2V5IiwiaXNUaGVuYWJsZSIsInZhbHVlIiwibWFrZUNhbGxiYWNrIiwicHJvbWlzZSIsIm1ldGFkYXRhIiwiY2FsbGJhY2tBcmdzIiwicGx1cmFsaXplQXJndW1lbnRzIiwibnVtQXJncyIsIndyYXBBc3luY0Z1bmN0aW9uIiwibmFtZSIsInRhcmdldCIsImFyZ3MiLCJyZXNvbHZlIiwicmVqZWN0IiwiY2JFcnJvciIsIndyYXBNZXRob2QiLCJtZXRob2QiLCJ3cmFwcGVyIiwidGFyZ2V0TWV0aG9kIiwidGhpc09iaiIsImhhc093blByb3BlcnR5Iiwid3JhcE9iamVjdCIsIndyYXBwZXJzIiwiY2FjaGUiLCJoYW5kbGVycyIsInByb3h5VGFyZ2V0IiwicHJvcCIsInJlY2VpdmVyIiwiZGVzYyIsIndyYXBFdmVudCIsIndyYXBwZXJNYXAiLCJsaXN0ZW5lciIsIm9uUmVxdWVzdEZpbmlzaGVkV3JhcHBlcnMiLCJyZXEiLCJ3cmFwcGVkUmVxIiwib25NZXNzYWdlV3JhcHBlcnMiLCJtZXNzYWdlIiwic2VuZGVyIiwic2VuZFJlc3BvbnNlIiwiZGlkQ2FsbFNlbmRSZXNwb25zZSIsIndyYXBwZWRTZW5kUmVzcG9uc2UiLCJzZW5kUmVzcG9uc2VQcm9taXNlIiwicmVzcG9uc2UiLCJyZXN1bHQiLCJlcnIiLCJpc1Jlc3VsdFRoZW5hYmxlIiwic2VuZFByb21pc2VkUmVzdWx0IiwibXNnIiwiZXJyb3IiLCJ3cmFwcGVkU2VuZE1lc3NhZ2VDYWxsYmFjayIsInJlcGx5Iiwid3JhcHBlZFNlbmRNZXNzYWdlIiwiYXBpTmFtZXNwYWNlT2JqIiwid3JhcHBlZENiIiwic3RhdGljV3JhcHBlcnMiLCJzZXR0aW5nTWV0YWRhdGEiLCJTaXRlQ29uZmlnIiwiU2l0ZUNvbmZpZ0xvb2t1cCIsIlNpdGVDb25maWdJbmRleCIsIkNvbmZpZyIsImRlZmF1bHRTaXRlQ29uZmlnIiwiQ29uZmlnTWlncmF0aW9ucyIsImN1cnJlbnQiLCJuZXdMb2dMZXZlbCIsIm5ld1NpdGVDb25maWciLCJpIiwidXJsIiwid2l0aG91dFByb3RvY29sIiwibmV3Q29uZmlnIiwicGF0aEluZGV4IiwiaG9zdCIsIndlaWdodCIsInBhZ2VQcmVmaXgiLCJvbGRDb25maWciLCJzYyIsIlV0aWxzIiwidmVyc2lvbkFycmF5IiwidmVyc2lvbkludCIsImJ5dGVBcnJheSIsImJ5dGUiLCJjaGFyQ29kZSIsImJ5dGVDb3VudCIsImJ5dGVzIiwiaGV4IiwiZGF0YSIsIm91dEZvcm1hdCIsImFsZ29yaXRobSIsImluQnVmZmVyIiwib3V0QnVmZmVyIiwidXRpbHMiLCJpbnQiLCJpbmRleCIsImludEFycmF5IiwiaiIsInN0ciIsImlucHV0IiwiZXh0cmFMZW5ndGgiLCJ2aWV3IiwiYmluYXJ5IiwibGVuIiwib2Zmc2V0IiwiYnVmZmVyIiwiYXJyYXlCdWZmZXIiLCJiYXNlNjQiLCJlbmNvZGluZ3MiLCJieXRlTGVuZ3RoIiwiYnl0ZVJlbWFpbmRlciIsIm1haW5MZW5ndGgiLCJhIiwiYiIsImMiLCJkIiwiY2h1bmsiLCJoZXhTdHJpbmciLCJudW1CeXRlcyIsImx1dCIsImR2YWxzIiwiZDAiLCJkMSIsImQyIiwiZDMiLCJkZWVwRXF1YWwiLCJsZW5ndGgiLCJrZXlzIiwibGlzdCIsImNvbnN0cnVjdG9yIiwiZXJyb3JDb25zdHJ1Y3RvcnMiLCJjb21tb25Qcm9wZXJ0aWVzIiwidG9Kc29uV2FzQ2FsbGVkIiwidG9KU09OIiwiZnJvbSIsImpzb24iLCJnZXRFcnJvckNvbnN0cnVjdG9yIiwiZGVzdHJveUNpcmN1bGFyIiwic2VlbiIsInRvIiwiZm9yY2VFbnVtZXJhYmxlIiwibWF4RGVwdGgiLCJkZXB0aCIsInVzZVRvSlNPTiIsInNlcmlhbGl6ZSIsImlzRXJyb3JMaWtlIiwiRXJyb3IiLCJjb250aW51ZURlc3Ryb3lDaXJjdWxhciIsInByb3BlcnR5IiwiZW51bWVyYWJsZSIsInNlcmlhbGl6ZUVycm9yIiwib3B0aW9ucyIsIktlZUxvZ2dlciIsImNvbmZpZyIsImUiLCJsb2dMZXZlbCIsIktlZUxvZyIsIkxBVEVTVF9WRVJTSU9OIiwiZGVmYXVsdENvbmZpZyIsIkNvbmZpZ01hbmFnZXIiLCJicm93c2VyLnN0b3JhZ2UiLCJjaGFuZ2VzIiwiYXJlYSIsImNvbmZpZ01hbmFnZXIiLCJ2YWx1ZXMiLCJudW1QYWdlcyIsInBhZ2VzIiwibyIsImNvbmZpZ1N0cmluZyIsImNvbmZpZ1ZhbHVlcyIsIm9uTG9hZGVkIiwicGFnZUNvdW50IiwibmV4dFBhZ2UiLCJvbGRQYWdlQ291bnQiLCJzYXZlTmVlZGVkIiwibWlncmF0aW9ucyIsIm1hdGNoZWRDb25maWdOb2RlcyIsIm5vZGUxIiwibm9kZTIiLCJ1cmxTdHJpbmciLCJwYWdlIiwiZG9tYWluIiwibWF0Y2hlZENvbmZpZ05vZGVzQW5kSW5kZXhlcyIsImRlcml2ZWRDb25maWciLCJub2RlIiwiaWMiLCJmb3JtIiwiY29uZiIsIm90aGVyRmllbGRzIiwiZmllbGRJZHMiLCJmaWVsZCIsImZpZWxkTmFtZXMiLCJmb3JtSWQiLCJmb3JtTmFtZSIsImV4Y2x1ZGVGb3JtSWRzIiwieCIsImV4Y2x1ZGVGb3JtTmFtZXMiLCJfZCIsIl9jIiwiZXhjbHVkZUZpZWxkSWRzIiwiX2YiLCJfZSIsImV4Y2x1ZGVGaWVsZE5hbWVzIiwiX2giLCJfZyIsImlkIiwibiIsImluY2x1ZGVGb3JtSWRzIiwiX2oiLCJfaSIsImluY2x1ZGVGb3JtTmFtZXMiLCJfbCIsIl9rIiwiaW5jbHVkZUZpZWxkSWRzIiwiX24iLCJfbSIsImluY2x1ZGVGaWVsZE5hbWVzIiwiX3AiLCJfbyIsInV1aWQiLCJjb25maWd1cmVkVGFyZ2V0IiwiYWxsQ29uZmlnTm9kZXNBbmRMb29rdXBzIiwiY3VycmVudFByZWZlcnJlZFV1aWQiLCJjbmwiLCJsb29rdXAiLCJ0MSIsInQyIiwicGFydGlhbENvbmZpZyIsInNvdXJjZSIsImNvbmZpZ0xvb2t1cCIsIlBhbmVsU3R1Yk9wdGlvbnMiLCJQYW5lbFN0dWIiLCJwYXJlbnRGcmFtZUlkIiwic2hhZG93Iiwic3R5bGUiLCJpZnJhbWUiLCJ0ZW1wbGF0ZSIsImJyb3dzZXIuZXh0ZW5zaW9uIiwiYm9keUVsZW1lbnRzIiwiZnJhbWVzZXRFbGVtZW50cyIsIm9sZFJlY3QiLCJwcmVmZXJyZWRDb250YWluZXJIZWlnaHQiLCJjb250YWluZXJIZWlnaHQiLCJjb250YWluZXJXaWR0aCIsInBvc2l0aW9uQWJvdmUiLCJ0YXJnZXRUb3AiLCJ0YXJnZXRCb3R0b20iLCJwcmVmZXJyZWRBcnJvd1hDb29yZCIsInByZWZlcnJlZEJvdHRvbSIsInByZWZlcnJlZFRvcCIsIm92ZXJmbG93Qm90dG9tIiwib3ZlcmZsb3dUb3AiLCJ0YXJnZXRXaWR0aCIsInJlbGF0aXZlTGVmdCIsInRvcCIsImxlZnQiLCJwYW5lbCIsIkFjdGlvbiIsIktlZUZpZWxkSWNvbiIsIm15UG9ydCIsImZvcm1VdGlscyIsImNyZWF0ZU1hdGNoZWRMb2dpbnNQYW5lbE5lYXJOb2RlIiwiZWxlbWVudCIsInBhc3N3b3JkRmllbGRzIiwiZW50cmllcyIsImltYWdlIiwidHJhbnNpdGlvbkNvbmZpZyIsInZhbCIsImZpZWxkcyIsImYiLCJmaWVsZFNldDEiLCJmaWVsZFNldDIiLCJjdXJyZW50U3R5bGUiLCJzaGFkb3dzIiwicyIsImJjcmVjdCIsImxlZnRMaW1pdCIsInRleHQiLCJjYW52YXMiLCJpbWciLCJjb250ZXh0IiwiTWF0Y2hSZXN1bHQiLCJTZXNzaW9uVHlwZSIsIkVudHJ5U3VtbWFyeSIsImVudHJ5IiwiRW50cnkiLCJlbnRyeVN1bW1hcnlEdG8iLCJwYXRoIiwiZGJGaWxlTmFtZSIsIkdyb3VwIiwiZyIsImdyb3VwRHRvIiwiY2hpbGRMaWdodEVudHJ5IiwiY2hpbGRHcm91cCIsImdyb3VwIiwiRGF0YWJhc2UiLCJkYiIsImR0byIsInNlc3Npb25UeXBlIiwic2Vzc2lvbkZlYXR1cmVzIiwiJFNUUiIsImJyb3dzZXIuaTE4biIsIiRTVFJGIiwic3VicyIsIkxvY2F0b3IiLCJsb2NhdG9yIiwiRW50cnlEdG8iLCJGb3JtRmllbGRUeXBlRFRPIiwiRmllbGQiLCJyZXZlYWxQYXNzd29yZHMiLCJyZXBsYWNlbWVudElmUHJvdGVjdGVkIiwiZG9tVHlwZSIsInVzZXJuYW1lSW5kZXgiLCJwYXNzd29yZHMiLCJsYWJlbHMiLCJjb2xsZWN0TGFiZWxzIiwiY29sbGVjdEF1dG9jb21wbGV0ZVZhbHVlcyIsInR5cGUiLCJsb2NhdG9yVHlwZSIsImlzVXNlcm5hbWUiLCJmZnQiLCJsYWJlbHNDb3VudCIsImxhYmVsIiwiYXJpYUxhYmVsIiwiYXJpYUxhYmVsSWRzIiwibGFiZWxFbGVtZW50IiwidiIsIkdyb3VwU3VtbWFyeSIsImdyb3VwU3VtbWFyeUR0byIsImVudHJ5RHRvIiwic29ydGVkRmllbGRzIiwibWF4aW11bVBhZ2UiLCJ1bnNvcnRlZEZpZWxkcyIsImZpcnN0UGFzc3dvcmRJbmRleCIsIm1ha2VNYXAiLCJleHBlY3RzTG93ZXJDYXNlIiwibWFwIiwibm9ybWFsaXplU3R5bGUiLCJpc0FycmF5IiwicmVzIiwiaXRlbSIsIm5vcm1hbGl6ZWQiLCJpc1N0cmluZyIsInBhcnNlU3RyaW5nU3R5bGUiLCJpc09iamVjdCIsImxpc3REZWxpbWl0ZXJSRSIsInByb3BlcnR5RGVsaW1pdGVyUkUiLCJzdHlsZUNvbW1lbnRSRSIsImNzc1RleHQiLCJyZXQiLCJ0bXAiLCJub3JtYWxpemVDbGFzcyIsIkhUTUxfVEFHUyIsIlNWR19UQUdTIiwiaXNIVE1MVGFnIiwiaXNTVkdUYWciLCJpc1NwZWNpYWxCb29sZWFuQXR0ciIsImluY2x1ZGVCb29sZWFuQXR0ciIsIkVNUFRZX09CSiIsIkVNUFRZX0FSUiIsIk5PT1AiLCJOTyIsIm9uUkUiLCJpc09uIiwiaXNNb2RlbExpc3RlbmVyIiwiZXh0ZW5kIiwicmVtb3ZlIiwiYXJyIiwiZWwiLCJoYXNPd24iLCJpc01hcCIsInRvVHlwZVN0cmluZyIsImlzU2V0IiwiaXNGdW5jdGlvbiIsImlzU3ltYm9sIiwiaXNQcm9taXNlIiwib2JqZWN0VG9TdHJpbmciLCJ0b1Jhd1R5cGUiLCJpc1BsYWluT2JqZWN0IiwiaXNJbnRlZ2VyS2V5IiwiaXNSZXNlcnZlZFByb3AiLCJpc0J1aWx0SW5EaXJlY3RpdmUiLCJjYWNoZVN0cmluZ0Z1bmN0aW9uIiwiZm4iLCJjYW1lbGl6ZVJFIiwiY2FtZWxpemUiLCJfIiwiaHlwaGVuYXRlUkUiLCJoeXBoZW5hdGUiLCJjYXBpdGFsaXplIiwidG9IYW5kbGVyS2V5IiwiaGFzQ2hhbmdlZCIsIm9sZFZhbHVlIiwiaW52b2tlQXJyYXlGbnMiLCJmbnMiLCJhcmciLCJkZWYiLCJvYmoiLCJ0b051bWJlciIsIl9nbG9iYWxUaGlzIiwiZ2V0R2xvYmFsVGhpcyIsIndhcm4iLCJhY3RpdmVFZmZlY3RTY29wZSIsIkVmZmVjdFNjb3BlIiwiZGV0YWNoZWQiLCJjdXJyZW50RWZmZWN0U2NvcGUiLCJmcm9tUGFyZW50IiwibCIsImxhc3QiLCJlZmZlY3RTY29wZSIsInJlY29yZEVmZmVjdFNjb3BlIiwiZWZmZWN0Iiwic2NvcGUiLCJnZXRDdXJyZW50U2NvcGUiLCJvblNjb3BlRGlzcG9zZSIsImNyZWF0ZURlcCIsImVmZmVjdHMiLCJkZXAiLCJ3YXNUcmFja2VkIiwidHJhY2tPcEJpdCIsIm5ld1RyYWNrZWQiLCJpbml0RGVwTWFya2VycyIsImRlcHMiLCJmaW5hbGl6ZURlcE1hcmtlcnMiLCJwdHIiLCJ0YXJnZXRNYXAiLCJlZmZlY3RUcmFja0RlcHRoIiwibWF4TWFya2VyQml0cyIsImFjdGl2ZUVmZmVjdCIsIklURVJBVEVfS0VZIiwiTUFQX0tFWV9JVEVSQVRFX0tFWSIsIlJlYWN0aXZlRWZmZWN0Iiwic2NoZWR1bGVyIiwicGFyZW50IiwibGFzdFNob3VsZFRyYWNrIiwic2hvdWxkVHJhY2siLCJjbGVhbnVwRWZmZWN0IiwidHJhY2tTdGFjayIsInBhdXNlVHJhY2tpbmciLCJyZXNldFRyYWNraW5nIiwidHJhY2siLCJkZXBzTWFwIiwidHJhY2tFZmZlY3RzIiwiZGVidWdnZXJFdmVudEV4dHJhSW5mbyIsInRyaWdnZXIiLCJuZXdWYWx1ZSIsIm9sZFRhcmdldCIsIm5ld0xlbmd0aCIsImV2ZW50SW5mbyIsInRyaWdnZXJFZmZlY3RzIiwidHJpZ2dlckVmZmVjdCIsImlzTm9uVHJhY2thYmxlS2V5cyIsImJ1aWx0SW5TeW1ib2xzIiwiZ2V0IiwiY3JlYXRlR2V0dGVyIiwic2hhbGxvd0dldCIsInJlYWRvbmx5R2V0Iiwic2hhbGxvd1JlYWRvbmx5R2V0IiwiYXJyYXlJbnN0cnVtZW50YXRpb25zIiwiY3JlYXRlQXJyYXlJbnN0cnVtZW50YXRpb25zIiwiaW5zdHJ1bWVudGF0aW9ucyIsInRvUmF3IiwiaXNSZWFkb25seSIsInNoYWxsb3ciLCJzaGFsbG93UmVhZG9ubHlNYXAiLCJyZWFkb25seU1hcCIsInNoYWxsb3dSZWFjdGl2ZU1hcCIsInJlYWN0aXZlTWFwIiwidGFyZ2V0SXNBcnJheSIsImlzUmVmIiwicmVhZG9ubHkiLCJyZWFjdGl2ZSIsInNldCIsImNyZWF0ZVNldHRlciIsInNoYWxsb3dTZXQiLCJpc1NoYWxsb3ciLCJoYWRLZXkiLCJkZWxldGVQcm9wZXJ0eSIsImhhcyIsIm93bktleXMiLCJtdXRhYmxlSGFuZGxlcnMiLCJyZWFkb25seUhhbmRsZXJzIiwic2hhbGxvd1JlYWN0aXZlSGFuZGxlcnMiLCJzaGFsbG93UmVhZG9ubHlIYW5kbGVycyIsInRvU2hhbGxvdyIsImdldFByb3RvIiwiZ2V0JDEiLCJyYXdUYXJnZXQiLCJyYXdLZXkiLCJ3cmFwIiwidG9SZWFkb25seSIsInRvUmVhY3RpdmUiLCJoYXMkMSIsInNpemUiLCJhZGQiLCJzZXQkMSIsImNoZWNrSWRlbnRpdHlLZXlzIiwiZGVsZXRlRW50cnkiLCJjbGVhciIsImhhZEl0ZW1zIiwiY3JlYXRlRm9yRWFjaCIsImNhbGxiYWNrIiwidGhpc0FyZyIsIm9ic2VydmVkIiwiY3JlYXRlSXRlcmFibGVNZXRob2QiLCJ0YXJnZXRJc01hcCIsImlzUGFpciIsImlzS2V5T25seSIsImlubmVySXRlcmF0b3IiLCJkb25lIiwiY3JlYXRlUmVhZG9ubHlNZXRob2QiLCJjcmVhdGVJbnN0cnVtZW50YXRpb25zIiwibXV0YWJsZUluc3RydW1lbnRhdGlvbnMiLCJzaGFsbG93SW5zdHJ1bWVudGF0aW9ucyIsInJlYWRvbmx5SW5zdHJ1bWVudGF0aW9ucyIsInNoYWxsb3dSZWFkb25seUluc3RydW1lbnRhdGlvbnMiLCJjcmVhdGVJbnN0cnVtZW50YXRpb25HZXR0ZXIiLCJtdXRhYmxlQ29sbGVjdGlvbkhhbmRsZXJzIiwic2hhbGxvd0NvbGxlY3Rpb25IYW5kbGVycyIsInJlYWRvbmx5Q29sbGVjdGlvbkhhbmRsZXJzIiwic2hhbGxvd1JlYWRvbmx5Q29sbGVjdGlvbkhhbmRsZXJzIiwidGFyZ2V0VHlwZU1hcCIsInJhd1R5cGUiLCJnZXRUYXJnZXRUeXBlIiwiY3JlYXRlUmVhY3RpdmVPYmplY3QiLCJzaGFsbG93UmVhY3RpdmUiLCJzaGFsbG93UmVhZG9ubHkiLCJiYXNlSGFuZGxlcnMiLCJjb2xsZWN0aW9uSGFuZGxlcnMiLCJwcm94eU1hcCIsImV4aXN0aW5nUHJveHkiLCJ0YXJnZXRUeXBlIiwicHJveHkiLCJpc1JlYWN0aXZlIiwiaXNQcm94eSIsInJhdyIsIm1hcmtSYXciLCJ0cmFja1JlZlZhbHVlIiwicmVmIiwidHJpZ2dlclJlZlZhbHVlIiwibmV3VmFsIiwiciIsImNyZWF0ZVJlZiIsInJhd1ZhbHVlIiwiUmVmSW1wbCIsIl9fdl9pc1NoYWxsb3ciLCJ1c2VEaXJlY3RWYWx1ZSIsInVucmVmIiwic2hhbGxvd1Vud3JhcEhhbmRsZXJzIiwicHJveHlSZWZzIiwib2JqZWN0V2l0aFJlZnMiLCJ0b1JlZnMiLCJvYmplY3QiLCJ0b1JlZiIsIk9iamVjdFJlZkltcGwiLCJfb2JqZWN0IiwiX2tleSIsIl9kZWZhdWx0VmFsdWUiLCJkZWZhdWx0VmFsdWUiLCJDb21wdXRlZFJlZkltcGwiLCJnZXR0ZXIiLCJfc2V0dGVyIiwiaXNTU1IiLCJzZWxmIiwiY29tcHV0ZWQiLCJnZXR0ZXJPck9wdGlvbnMiLCJkZWJ1Z09wdGlvbnMiLCJzZXR0ZXIiLCJvbmx5R2V0dGVyIiwiY1JlZiIsInN0YWNrIiwicHVzaFdhcm5pbmdDb250ZXh0Iiwidm5vZGUiLCJwb3BXYXJuaW5nQ29udGV4dCIsImluc3RhbmNlIiwiYXBwV2FybkhhbmRsZXIiLCJ0cmFjZSIsImdldENvbXBvbmVudFRyYWNlIiwiY2FsbFdpdGhFcnJvckhhbmRsaW5nIiwiZm9ybWF0Q29tcG9uZW50TmFtZSIsIndhcm5BcmdzIiwiZm9ybWF0VHJhY2UiLCJjdXJyZW50Vk5vZGUiLCJub3JtYWxpemVkU3RhY2siLCJwYXJlbnRJbnN0YW5jZSIsImxvZ3MiLCJmb3JtYXRUcmFjZUVudHJ5IiwicmVjdXJzZUNvdW50IiwicG9zdGZpeCIsImlzUm9vdCIsIm9wZW4iLCJjbG9zZSIsImZvcm1hdFByb3BzIiwicHJvcHMiLCJmb3JtYXRQcm9wIiwiRXJyb3JUeXBlU3RyaW5ncyIsImhhbmRsZUVycm9yIiwiY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmciLCJ0aHJvd0luRGV2IiwiY29udGV4dFZOb2RlIiwiY3VyIiwiZXhwb3NlZEluc3RhbmNlIiwiZXJyb3JJbmZvIiwiZXJyb3JDYXB0dXJlZEhvb2tzIiwiYXBwRXJyb3JIYW5kbGVyIiwibG9nRXJyb3IiLCJpbmZvIiwiaXNGbHVzaGluZyIsImlzRmx1c2hQZW5kaW5nIiwicXVldWUiLCJmbHVzaEluZGV4IiwicGVuZGluZ1Bvc3RGbHVzaENicyIsImFjdGl2ZVBvc3RGbHVzaENicyIsInBvc3RGbHVzaEluZGV4IiwicmVzb2x2ZWRQcm9taXNlIiwiY3VycmVudEZsdXNoUHJvbWlzZSIsIlJFQ1VSU0lPTl9MSU1JVCIsIm5leHRUaWNrIiwicCIsImZpbmRJbnNlcnRpb25JbmRleCIsInN0YXJ0IiwiZW5kIiwibWlkZGxlIiwiZ2V0SWQiLCJxdWV1ZUpvYiIsImpvYiIsInF1ZXVlRmx1c2giLCJmbHVzaEpvYnMiLCJpbnZhbGlkYXRlSm9iIiwicXVldWVQb3N0Rmx1c2hDYiIsImNiIiwiZmx1c2hQcmVGbHVzaENicyIsImNoZWNrUmVjdXJzaXZlVXBkYXRlcyIsImZsdXNoUG9zdEZsdXNoQ2JzIiwiZGVkdXBlZCIsImNvbXBhcmF0b3IiLCJkaWZmIiwiY2hlY2siLCJjb3VudCIsImNvbXBvbmVudE5hbWUiLCJnZXRDb21wb25lbnROYW1lIiwiaXNIbXJVcGRhdGluZyIsImhtckRpcnR5Q29tcG9uZW50cyIsInRyeVdyYXAiLCJjcmVhdGVSZWNvcmQiLCJyZXJlbmRlciIsInJlbG9hZCIsInJlZ2lzdGVySE1SIiwicmVjb3JkIiwidW5yZWdpc3RlckhNUiIsImluaXRpYWxEZWYiLCJub3JtYWxpemVDbGFzc0NvbXBvbmVudCIsImNvbXBvbmVudCIsImlzQ2xhc3NDb21wb25lbnQiLCJuZXdSZW5kZXIiLCJuZXdDb21wIiwidXBkYXRlQ29tcG9uZW50RGVmIiwiaW5zdGFuY2VzIiwib2xkQ29tcCIsImRldnRvb2xzIiwiZGV2dG9vbHNOb3RJbnN0YWxsZWQiLCJlbWl0IiwiZXZlbnQiLCJzZXREZXZ0b29sc0hvb2siLCJob29rIiwibmV3SG9vayIsImRldnRvb2xzSW5pdEFwcCIsImFwcCIsInZlcnNpb24iLCJGcmFnbWVudCIsIlRleHQiLCJDb21tZW50IiwiU3RhdGljIiwiZGV2dG9vbHNVbm1vdW50QXBwIiwiZGV2dG9vbHNDb21wb25lbnRBZGRlZCIsImNyZWF0ZURldnRvb2xzQ29tcG9uZW50SG9vayIsImRldnRvb2xzQ29tcG9uZW50VXBkYXRlZCIsIl9kZXZ0b29sc0NvbXBvbmVudFJlbW92ZWQiLCJkZXZ0b29sc0NvbXBvbmVudFJlbW92ZWQiLCJkZXZ0b29sc1BlcmZTdGFydCIsImNyZWF0ZURldnRvb2xzUGVyZm9ybWFuY2VIb29rIiwiZGV2dG9vbHNQZXJmRW5kIiwidGltZSIsImRldnRvb2xzQ29tcG9uZW50RW1pdCIsInBhcmFtcyIsImVtaXQkMSIsInJhd0FyZ3MiLCJlbWl0c09wdGlvbnMiLCJwcm9wc09wdGlvbnMiLCJ2YWxpZGF0b3IiLCJtb2RlbEFyZyIsIm1vZGlmaWVyc0tleSIsIm51bWJlciIsInRyaW0iLCJsb3dlckNhc2VFdmVudCIsImhhbmRsZXJOYW1lIiwiaGFuZGxlciIsIm9uY2VIYW5kbGVyIiwibm9ybWFsaXplRW1pdHNPcHRpb25zIiwiY29tcCIsImFwcENvbnRleHQiLCJhc01peGluIiwiY2FjaGVkIiwiaGFzRXh0ZW5kcyIsImV4dGVuZEVtaXRzIiwibm9ybWFsaXplZEZyb21FeHRlbmQiLCJpc0VtaXRMaXN0ZW5lciIsImN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSIsImN1cnJlbnRTY29wZUlkIiwic2V0Q3VycmVudFJlbmRlcmluZ0luc3RhbmNlIiwicHJldiIsIndpdGhDdHgiLCJjdHgiLCJpc05vblNjb3BlZFNsb3QiLCJyZW5kZXJGbldpdGhDb250ZXh0Iiwic2V0QmxvY2tUcmFja2luZyIsInByZXZJbnN0YW5jZSIsImFjY2Vzc2VkQXR0cnMiLCJtYXJrQXR0cnNBY2Nlc3NlZCIsInJlbmRlckNvbXBvbmVudFJvb3QiLCJDb21wb25lbnQiLCJ3aXRoUHJveHkiLCJzbG90cyIsImF0dHJzIiwicmVuZGVyIiwicmVuZGVyQ2FjaGUiLCJzZXR1cFN0YXRlIiwiaW5oZXJpdEF0dHJzIiwiZmFsbHRocm91Z2hBdHRycyIsInByb3h5VG9Vc2UiLCJub3JtYWxpemVWTm9kZSIsImdldEZ1bmN0aW9uYWxGYWxsdGhyb3VnaCIsImNyZWF0ZVZOb2RlIiwicm9vdCIsInNldFJvb3QiLCJnZXRDaGlsZFJvb3QiLCJzaGFwZUZsYWciLCJmaWx0ZXJNb2RlbExpc3RlbmVycyIsImNsb25lVk5vZGUiLCJhbGxBdHRycyIsImV2ZW50QXR0cnMiLCJleHRyYUF0dHJzIiwiaXNFbGVtZW50Um9vdCIsInJhd0NoaWxkcmVuIiwiZHluYW1pY0NoaWxkcmVuIiwiY2hpbGRSb290IiwiZmlsdGVyU2luZ2xlUm9vdCIsImR5bmFtaWNJbmRleCIsInVwZGF0ZWRSb290IiwiY2hpbGRyZW4iLCJzaW5nbGVSb290IiwiY2hpbGQiLCJpc1ZOb2RlIiwic2hvdWxkVXBkYXRlQ29tcG9uZW50IiwicHJldlZOb2RlIiwibmV4dFZOb2RlIiwib3B0aW1pemVkIiwicHJldlByb3BzIiwicHJldkNoaWxkcmVuIiwibmV4dFByb3BzIiwibmV4dENoaWxkcmVuIiwicGF0Y2hGbGFnIiwiZW1pdHMiLCJoYXNQcm9wc0NoYW5nZWQiLCJkeW5hbWljUHJvcHMiLCJuZXh0S2V5cyIsInVwZGF0ZUhPQ0hvc3RFbCIsImlzU3VzcGVuc2UiLCJxdWV1ZUVmZmVjdFdpdGhTdXNwZW5zZSIsInN1c3BlbnNlIiwicHJvdmlkZSIsImN1cnJlbnRJbnN0YW5jZSIsInByb3ZpZGVzIiwicGFyZW50UHJvdmlkZXMiLCJpbmplY3QiLCJ0cmVhdERlZmF1bHRBc0ZhY3RvcnkiLCJJTklUSUFMX1dBVENIRVJfVkFMVUUiLCJ3YXRjaCIsImRvV2F0Y2giLCJpbW1lZGlhdGUiLCJkZWVwIiwiZmx1c2giLCJvblRyYWNrIiwib25UcmlnZ2VyIiwid2FybkludmFsaWRTb3VyY2UiLCJmb3JjZVRyaWdnZXIiLCJpc011bHRpU291cmNlIiwiaXNTaGFsbG93JDEiLCJ0cmF2ZXJzZSIsImNsZWFudXAiLCJvbkNsZWFudXAiLCJiYXNlR2V0dGVyIiwic3NyQ2xlYW51cCIsImlzSW5TU1JDb21wb25lbnRTZXR1cCIsInVzZVNTUkNvbnRleHQiLCJxdWV1ZVBvc3RSZW5kZXJFZmZlY3QiLCJ1bndhdGNoIiwiaW5zdGFuY2VXYXRjaCIsInB1YmxpY1RoaXMiLCJjcmVhdGVQYXRoR2V0dGVyIiwic2V0Q3VycmVudEluc3RhbmNlIiwidW5zZXRDdXJyZW50SW5zdGFuY2UiLCJzZWdtZW50cyIsImRlZmluZUNvbXBvbmVudCIsImlzQXN5bmNXcmFwcGVyIiwiaXNLZWVwQWxpdmUiLCJvbkFjdGl2YXRlZCIsInJlZ2lzdGVyS2VlcEFsaXZlSG9vayIsIm9uRGVhY3RpdmF0ZWQiLCJ3cmFwcGVkSG9vayIsImluamVjdEhvb2siLCJpbmplY3RUb0tlZXBBbGl2ZVJvb3QiLCJrZWVwQWxpdmVSb290IiwiaW5qZWN0ZWQiLCJvblVubW91bnRlZCIsInByZXBlbmQiLCJob29rcyIsImFwaU5hbWUiLCJjcmVhdGVIb29rIiwibGlmZWN5Y2xlIiwib25CZWZvcmVNb3VudCIsIm9uTW91bnRlZCIsIm9uQmVmb3JlVXBkYXRlIiwib25VcGRhdGVkIiwib25CZWZvcmVVbm1vdW50Iiwib25TZXJ2ZXJQcmVmZXRjaCIsIm9uUmVuZGVyVHJpZ2dlcmVkIiwib25SZW5kZXJUcmFja2VkIiwib25FcnJvckNhcHR1cmVkIiwidmFsaWRhdGVEaXJlY3RpdmVOYW1lIiwiaW52b2tlRGlyZWN0aXZlSG9vayIsImJpbmRpbmdzIiwib2xkQmluZGluZ3MiLCJiaW5kaW5nIiwiTlVMTF9EWU5BTUlDX0NPTVBPTkVOVCIsImdldFB1YmxpY0luc3RhbmNlIiwiaXNTdGF0ZWZ1bENvbXBvbmVudCIsImdldEV4cG9zZVByb3h5IiwicHVibGljUHJvcGVydGllc01hcCIsInJlc29sdmVNZXJnZWRPcHRpb25zIiwiaXNSZXNlcnZlZFByZWZpeCIsImhhc1NldHVwQmluZGluZyIsInN0YXRlIiwiUHVibGljSW5zdGFuY2VQcm94eUhhbmRsZXJzIiwiYWNjZXNzQ2FjaGUiLCJub3JtYWxpemVkUHJvcHMiLCJzaG91bGRDYWNoZUFjY2VzcyIsInB1YmxpY0dldHRlciIsImNzc01vZHVsZSIsImdsb2JhbFByb3BlcnRpZXMiLCJkZXNjcmlwdG9yIiwiY3JlYXRlRGV2UmVuZGVyQ29udGV4dCIsImV4cG9zZVByb3BzT25SZW5kZXJDb250ZXh0IiwiZXhwb3NlU2V0dXBTdGF0ZU9uUmVuZGVyQ29udGV4dCIsImNyZWF0ZUR1cGxpY2F0ZUNoZWNrZXIiLCJhcHBseU9wdGlvbnMiLCJjYWxsSG9vayIsImRhdGFPcHRpb25zIiwiY29tcHV0ZWRPcHRpb25zIiwibWV0aG9kcyIsIndhdGNoT3B0aW9ucyIsInByb3ZpZGVPcHRpb25zIiwiaW5qZWN0T3B0aW9ucyIsImNyZWF0ZWQiLCJiZWZvcmVNb3VudCIsIm1vdW50ZWQiLCJiZWZvcmVVcGRhdGUiLCJ1cGRhdGVkIiwiYWN0aXZhdGVkIiwiZGVhY3RpdmF0ZWQiLCJiZWZvcmVEZXN0cm95IiwiYmVmb3JlVW5tb3VudCIsImRlc3Ryb3llZCIsInVubW91bnRlZCIsInJlbmRlclRyYWNrZWQiLCJyZW5kZXJUcmlnZ2VyZWQiLCJlcnJvckNhcHR1cmVkIiwic2VydmVyUHJlZmV0Y2giLCJleHBvc2UiLCJjb21wb25lbnRzIiwiZGlyZWN0aXZlcyIsImZpbHRlcnMiLCJjaGVja0R1cGxpY2F0ZVByb3BlcnRpZXMiLCJyZXNvbHZlSW5qZWN0aW9ucyIsIm1ldGhvZEhhbmRsZXIiLCJvcHQiLCJjcmVhdGVXYXRjaGVyIiwicmVnaXN0ZXJMaWZlY3ljbGVIb29rIiwicmVnaXN0ZXIiLCJfaG9vayIsImV4cG9zZWQiLCJ1bndyYXBSZWYiLCJub3JtYWxpemVJbmplY3QiLCJoIiwiYmFzZSIsIm1peGlucyIsImV4dGVuZHNPcHRpb25zIiwiZ2xvYmFsTWl4aW5zIiwib3B0aW9uTWVyZ2VTdHJhdGVnaWVzIiwicmVzb2x2ZWQiLCJtIiwibWVyZ2VPcHRpb25zIiwic3RyYXRzIiwic3RyYXQiLCJpbnRlcm5hbE9wdGlvbk1lcmdlU3RyYXRzIiwibWVyZ2VEYXRhRm4iLCJtZXJnZU9iamVjdE9wdGlvbnMiLCJtZXJnZUFzQXJyYXkiLCJtZXJnZVdhdGNoT3B0aW9ucyIsIm1lcmdlSW5qZWN0IiwibWVyZ2VkIiwiaW5pdFByb3BzIiwicmF3UHJvcHMiLCJpc1N0YXRlZnVsIiwiSW50ZXJuYWxPYmplY3RLZXkiLCJzZXRGdWxsUHJvcHMiLCJ2YWxpZGF0ZVByb3BzIiwiaXNJbkhtckNvbnRleHQiLCJ1cGRhdGVQcm9wcyIsInJhd1ByZXZQcm9wcyIsInJhd0N1cnJlbnRQcm9wcyIsImhhc0F0dHJzQ2hhbmdlZCIsInByb3BzVG9VcGRhdGUiLCJjYW1lbGl6ZWRLZXkiLCJyZXNvbHZlUHJvcFZhbHVlIiwia2ViYWJLZXkiLCJuZWVkQ2FzdEtleXMiLCJyYXdDYXN0VmFsdWVzIiwiY2FtZWxLZXkiLCJjYXN0VmFsdWVzIiwiaXNBYnNlbnQiLCJoYXNEZWZhdWx0IiwicHJvcHNEZWZhdWx0cyIsIm5vcm1hbGl6ZVByb3BzT3B0aW9ucyIsImV4dGVuZFByb3BzIiwibm9ybWFsaXplZEtleSIsInZhbGlkYXRlUHJvcE5hbWUiLCJib29sZWFuSW5kZXgiLCJnZXRUeXBlSW5kZXgiLCJzdHJpbmdJbmRleCIsImdldFR5cGUiLCJjdG9yIiwibWF0Y2giLCJpc1NhbWVUeXBlIiwiZXhwZWN0ZWRUeXBlcyIsInQiLCJyZXNvbHZlZFZhbHVlcyIsInZhbGlkYXRlUHJvcCIsInJlcXVpcmVkIiwiaXNWYWxpZCIsInR5cGVzIiwidmFsaWQiLCJleHBlY3RlZFR5cGUiLCJhc3NlcnRUeXBlIiwiZ2V0SW52YWxpZFR5cGVNZXNzYWdlIiwiaXNTaW1wbGVUeXBlIiwicmVjZWl2ZWRUeXBlIiwiZXhwZWN0ZWRWYWx1ZSIsInN0eWxlVmFsdWUiLCJyZWNlaXZlZFZhbHVlIiwiaXNFeHBsaWNhYmxlIiwiaXNCb29sZWFuIiwiZWxlbSIsImlzSW50ZXJuYWxLZXkiLCJub3JtYWxpemVTbG90VmFsdWUiLCJub3JtYWxpemVTbG90IiwicmF3U2xvdCIsIm5vcm1hbGl6ZU9iamVjdFNsb3RzIiwicmF3U2xvdHMiLCJub3JtYWxpemVWTm9kZVNsb3RzIiwiaW5pdFNsb3RzIiwidXBkYXRlU2xvdHMiLCJuZWVkRGVsZXRpb25DaGVjayIsImRlbGV0aW9uQ29tcGFyaXNvblRhcmdldCIsImNyZWF0ZUFwcENvbnRleHQiLCJ1aWQiLCJjcmVhdGVBcHBBUEkiLCJoeWRyYXRlIiwicm9vdENvbXBvbmVudCIsInJvb3RQcm9wcyIsImluc3RhbGxlZFBsdWdpbnMiLCJpc01vdW50ZWQiLCJwbHVnaW4iLCJtaXhpbiIsInZhbGlkYXRlQ29tcG9uZW50TmFtZSIsImRpcmVjdGl2ZSIsInJvb3RDb250YWluZXIiLCJpc0h5ZHJhdGUiLCJpc1NWRyIsInNldFJlZiIsInJhd1JlZiIsIm9sZFJhd1JlZiIsInBhcmVudFN1c3BlbnNlIiwiaXNVbm1vdW50IiwicmVmVmFsdWUiLCJvd25lciIsIm9sZFJlZiIsInJlZnMiLCJfaXNTdHJpbmciLCJfaXNSZWYiLCJkb1NldCIsImV4aXN0aW5nIiwic3VwcG9ydGVkIiwicGVyZiIsInN0YXJ0TWVhc3VyZSIsImlzU3VwcG9ydGVkIiwiZW5kTWVhc3VyZSIsInN0YXJ0VGFnIiwiZW5kVGFnIiwiaW5pdEZlYXR1cmVGbGFncyIsIm5lZWRXYXJuIiwibXVsdGkiLCJjcmVhdGVSZW5kZXJlciIsImJhc2VDcmVhdGVSZW5kZXJlciIsImNyZWF0ZUh5ZHJhdGlvbkZucyIsImhvc3RJbnNlcnQiLCJob3N0UmVtb3ZlIiwiaG9zdFBhdGNoUHJvcCIsImhvc3RDcmVhdGVFbGVtZW50IiwiaG9zdENyZWF0ZVRleHQiLCJob3N0Q3JlYXRlQ29tbWVudCIsImhvc3RTZXRUZXh0IiwiaG9zdFNldEVsZW1lbnRUZXh0IiwiaG9zdFBhcmVudE5vZGUiLCJob3N0TmV4dFNpYmxpbmciLCJob3N0U2V0U2NvcGVJZCIsImhvc3RJbnNlcnRTdGF0aWNDb250ZW50IiwicGF0Y2giLCJuMSIsIm4yIiwiY29udGFpbmVyIiwiYW5jaG9yIiwicGFyZW50Q29tcG9uZW50Iiwic2xvdFNjb3BlSWRzIiwiaXNTYW1lVk5vZGVUeXBlIiwiZ2V0TmV4dEhvc3ROb2RlIiwidW5tb3VudCIsInByb2Nlc3NUZXh0IiwicHJvY2Vzc0NvbW1lbnROb2RlIiwibW91bnRTdGF0aWNOb2RlIiwicGF0Y2hTdGF0aWNOb2RlIiwicHJvY2Vzc0ZyYWdtZW50IiwicHJvY2Vzc0VsZW1lbnQiLCJwcm9jZXNzQ29tcG9uZW50IiwiaW50ZXJuYWxzIiwicmVtb3ZlU3RhdGljTm9kZSIsIm1vdmVTdGF0aWNOb2RlIiwibmV4dFNpYmxpbmciLCJuZXh0IiwibW91bnRFbGVtZW50IiwicGF0Y2hFbGVtZW50Iiwidm5vZGVIb29rIiwidHJhbnNpdGlvbiIsImRpcnMiLCJtb3VudENoaWxkcmVuIiwidW5tb3VudENoaWxkcmVuIiwiaW52b2tlVk5vZGVIb29rIiwic2V0U2NvcGVJZCIsIm5lZWRDYWxsVHJhbnNpdGlvbkhvb2tzIiwic2NvcGVJZCIsInN1YlRyZWUiLCJwYXJlbnRWTm9kZSIsImNsb25lSWZNb3VudGVkIiwib2xkUHJvcHMiLCJuZXdQcm9wcyIsInRvZ2dsZVJlY3Vyc2UiLCJhcmVDaGlsZHJlblNWRyIsInBhdGNoQmxvY2tDaGlsZHJlbiIsInRyYXZlcnNlU3RhdGljQ2hpbGRyZW4iLCJwYXRjaENoaWxkcmVuIiwicGF0Y2hQcm9wcyIsIm9sZENoaWxkcmVuIiwibmV3Q2hpbGRyZW4iLCJmYWxsYmFja0NvbnRhaW5lciIsIm9sZFZOb2RlIiwibmV3Vk5vZGUiLCJmcmFnbWVudFN0YXJ0QW5jaG9yIiwiZnJhZ21lbnRFbmRBbmNob3IiLCJmcmFnbWVudFNsb3RTY29wZUlkcyIsIm1vdW50Q29tcG9uZW50IiwidXBkYXRlQ29tcG9uZW50IiwiaW5pdGlhbFZOb2RlIiwiY3JlYXRlQ29tcG9uZW50SW5zdGFuY2UiLCJzZXR1cENvbXBvbmVudCIsInNldHVwUmVuZGVyRWZmZWN0IiwicGxhY2Vob2xkZXIiLCJ1cGRhdGVDb21wb25lbnRQcmVSZW5kZXIiLCJjb21wb25lbnRVcGRhdGVGbiIsImJ1IiwidSIsIm9yaWdpbk5leHQiLCJuZXh0VHJlZSIsInByZXZUcmVlIiwiYm0iLCJpc0FzeW5jV3JhcHBlclZOb2RlIiwiaHlkcmF0ZU5vZGUiLCJoeWRyYXRlU3ViVHJlZSIsInNjb3BlZEluaXRpYWxWTm9kZSIsInVwZGF0ZSIsImMxIiwicHJldlNoYXBlRmxhZyIsImMyIiwicGF0Y2hLZXllZENoaWxkcmVuIiwicGF0Y2hVbmtleWVkQ2hpbGRyZW4iLCJvbGRMZW5ndGgiLCJjb21tb25MZW5ndGgiLCJuZXh0Q2hpbGQiLCJwYXJlbnRBbmNob3IiLCJsMiIsImUxIiwiZTIiLCJuZXh0UG9zIiwiczEiLCJzMiIsImtleVRvTmV3SW5kZXhNYXAiLCJwYXRjaGVkIiwidG9CZVBhdGNoZWQiLCJtb3ZlZCIsIm1heE5ld0luZGV4U29GYXIiLCJuZXdJbmRleFRvT2xkSW5kZXhNYXAiLCJwcmV2Q2hpbGQiLCJuZXdJbmRleCIsImluY3JlYXNpbmdOZXdJbmRleFNlcXVlbmNlIiwiZ2V0U2VxdWVuY2UiLCJuZXh0SW5kZXgiLCJtb3ZlIiwibW92ZVR5cGUiLCJsZWF2ZSIsImRlbGF5TGVhdmUiLCJhZnRlckxlYXZlIiwicGVyZm9ybUxlYXZlIiwiZG9SZW1vdmUiLCJzaG91bGRJbnZva2VEaXJzIiwic2hvdWxkSW52b2tlVm5vZGVIb29rIiwidW5tb3VudENvbXBvbmVudCIsInJlbW92ZUZyYWdtZW50IiwicGVyZm9ybVJlbW92ZSIsImJ1bSIsInVtIiwiYWxsb3dlZCIsImNoMSIsImNoMiIsImFyckkiLCJpc1RlbGVwb3J0IiwiY3VycmVudEJsb2NrIiwiaXNCbG9ja1RyZWVFbmFibGVkIiwiY3JlYXRlVk5vZGVXaXRoQXJnc1RyYW5zZm9ybSIsIl9jcmVhdGVWTm9kZSIsIm5vcm1hbGl6ZUtleSIsIm5vcm1hbGl6ZVJlZiIsInJlZl9rZXkiLCJyZWZfZm9yIiwiY3JlYXRlQmFzZVZOb2RlIiwiaXNCbG9ja05vZGUiLCJuZWVkRnVsbENoaWxkcmVuTm9ybWFsaXphdGlvbiIsIm5vcm1hbGl6ZUNoaWxkcmVuIiwiY2xvbmVkIiwiZ3VhcmRSZWFjdGl2ZVByb3BzIiwia2xhc3MiLCJleHRyYVByb3BzIiwibWVyZ2VSZWYiLCJtZXJnZWRQcm9wcyIsIm1lcmdlUHJvcHMiLCJkZWVwQ2xvbmVWTm9kZSIsImNyZWF0ZVRleHRWTm9kZSIsImZsYWciLCJzbG90Iiwic2xvdEZsYWciLCJ0b01lcmdlIiwiaW5jb21pbmciLCJlbXB0eUFwcENvbnRleHQiLCJ1aWQkMSIsImdldEN1cnJlbnRJbnN0YW5jZSIsImlzQnVpbHRJblRhZyIsImFwcElzTmF0aXZlVGFnIiwic2V0dXBSZXN1bHQiLCJzZXR1cFN0YXRlZnVsQ29tcG9uZW50IiwibmFtZXMiLCJpc1J1bnRpbWVPbmx5Iiwic2V0dXAiLCJzZXR1cENvbnRleHQiLCJjcmVhdGVTZXR1cENvbnRleHQiLCJyZXNvbHZlZFJlc3VsdCIsImhhbmRsZVNldHVwUmVzdWx0IiwiZmluaXNoQ29tcG9uZW50U2V0dXAiLCJjb21waWxlIiwic2tpcE9wdGlvbnMiLCJpc0N1c3RvbUVsZW1lbnQiLCJjb21waWxlck9wdGlvbnMiLCJkZWxpbWl0ZXJzIiwiY29tcG9uZW50Q29tcGlsZXJPcHRpb25zIiwiZmluYWxDb21waWxlck9wdGlvbnMiLCJjcmVhdGVBdHRyc1Byb3h5IiwiY2xhc3NpZnlSRSIsImNsYXNzaWZ5IiwiaW5jbHVkZUluZmVycmVkIiwiaW5mZXJGcm9tUmVnaXN0cnkiLCJyZWdpc3RyeSIsImNvbXB1dGVkJDEiLCJzc3JDb250ZXh0S2V5IiwiaW5pdEN1c3RvbUZvcm1hdHRlciIsInZ1ZVN0eWxlIiwibnVtYmVyU3R5bGUiLCJzdHJpbmdTdHlsZSIsImtleXdvcmRTdHlsZSIsImZvcm1hdHRlciIsImdlblJlZkZsYWciLCJmb3JtYXRWYWx1ZSIsImZvcm1hdEluc3RhbmNlIiwiYmxvY2tzIiwiY3JlYXRlSW5zdGFuY2VCbG9jayIsImV4dHJhY3RLZXlzIiwiYXNSYXciLCJDb21wIiwiZXh0cmFjdGVkIiwiaXNLZXlPZlR5cGUiLCJvcHRzIiwic3ZnTlMiLCJkb2MiLCJ0ZW1wbGF0ZUNvbnRhaW5lciIsIm5vZGVPcHMiLCJ0YWciLCJpcyIsInNlbGVjdG9yIiwiY29udGVudCIsImJlZm9yZSIsInBhdGNoQ2xhc3MiLCJ0cmFuc2l0aW9uQ2xhc3NlcyIsInBhdGNoU3R5bGUiLCJpc0Nzc1N0cmluZyIsInNldFN0eWxlIiwiY3VycmVudERpc3BsYXkiLCJzZW1pY29sb25SRSIsImltcG9ydGFudFJFIiwicHJlZml4ZWQiLCJhdXRvUHJlZml4IiwicHJlZml4ZXMiLCJwcmVmaXhDYWNoZSIsInJhd05hbWUiLCJ4bGlua05TIiwicGF0Y2hBdHRyIiwicGF0Y2hET01Qcm9wIiwibmVlZFJlbW92ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicGF0Y2hFdmVudCIsInByZXZWYWx1ZSIsIm5leHRWYWx1ZSIsImludm9rZXJzIiwiZXhpc3RpbmdJbnZva2VyIiwicGFyc2VOYW1lIiwiaW52b2tlciIsImNyZWF0ZUludm9rZXIiLCJvcHRpb25zTW9kaWZpZXJSRSIsImNhY2hlZE5vdyIsImdldE5vdyIsImluaXRpYWxWYWx1ZSIsInBhdGNoU3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uIiwib3JpZ2luYWxTdG9wIiwibmF0aXZlT25SRSIsInBhdGNoUHJvcCIsInNob3VsZFNldEFzUHJvcCIsInJlbmRlcmVyT3B0aW9ucyIsInJlbmRlcmVyIiwiZW5zdXJlUmVuZGVyZXIiLCJjcmVhdGVBcHAiLCJpbmplY3ROYXRpdmVUYWdDaGVjayIsImluamVjdENvbXBpbGVyT3B0aW9uc0NoZWNrIiwibW91bnQiLCJjb250YWluZXJPclNlbGVjdG9yIiwibm9ybWFsaXplQ29udGFpbmVyIiwiaW5pdERldiIsImlzVnVlMiIsImRlbCIsImdldERldnRvb2xzR2xvYmFsSG9vayIsImdldFRhcmdldCIsImlzUHJveHlBdmFpbGFibGUiLCJIT09LX1NFVFVQIiwiSE9PS19QTFVHSU5fU0VUVElOR1NfU0VUIiwiaXNQZXJmb3JtYW5jZVN1cHBvcnRlZCIsIm5vdyIsIkFwaVByb3h5IiwiZGVmYXVsdFNldHRpbmdzIiwibG9jYWxTZXR0aW5nc1NhdmVJZCIsImN1cnJlbnRTZXR0aW5ncyIsInBsdWdpbklkIiwiX3RhcmdldCIsInNldHVwRGV2dG9vbHNQbHVnaW4iLCJwbHVnaW5EZXNjcmlwdG9yIiwic2V0dXBGbiIsImVuYWJsZVByb3h5IiwiYWN0aXZlUGluaWEiLCJzZXRBY3RpdmVQaW5pYSIsInBpbmlhIiwicGluaWFTeW1ib2wiLCJNdXRhdGlvblR5cGUiLCJJU19DTElFTlQiLCJVU0VfREVWVE9PTFMiLCJfZ2xvYmFsIiwiYm9tIiwiYmxvYiIsImF1dG9Cb20iLCJkb3dubG9hZCIsInhociIsInNhdmVBcyIsImNvcnNFbmFibGVkIiwiY2xpY2siLCJldnQiLCJfbmF2aWdhdG9yIiwiaXNNYWNPU1dlYlZpZXciLCJkb3dubG9hZFNhdmVBcyIsIm1zU2F2ZUFzIiwiZmlsZVNhdmVyU2F2ZUFzIiwicG9wdXAiLCJmb3JjZSIsImlzU2FmYXJpIiwiaXNDaHJvbWVJT1MiLCJyZWFkZXIiLCJ0b2FzdE1lc3NhZ2UiLCJwaW5pYU1lc3NhZ2UiLCJpc1BpbmlhIiwiY2hlY2tDbGlwYm9hcmRBY2Nlc3MiLCJjaGVja05vdEZvY3VzZWRFcnJvciIsImFjdGlvbkdsb2JhbENvcHlTdGF0ZSIsImFjdGlvbkdsb2JhbFBhc3RlU3RhdGUiLCJhY3Rpb25HbG9iYWxTYXZlU3RhdGUiLCJmaWxlSW5wdXQiLCJnZXRGaWxlT3BlbmVyIiwib3BlbkZpbGUiLCJmaWxlcyIsImZpbGUiLCJhY3Rpb25HbG9iYWxPcGVuU3RhdGVGaWxlIiwiZm9ybWF0RGlzcGxheSIsImRpc3BsYXkiLCJQSU5JQV9ST09UX0xBQkVMIiwiUElOSUFfUk9PVF9JRCIsImZvcm1hdFN0b3JlRm9ySW5zcGVjdG9yVHJlZSIsInN0b3JlIiwiZm9ybWF0U3RvcmVGb3JJbnNwZWN0b3JTdGF0ZSIsInN0b3JlTmFtZXMiLCJzdG9yZU1hcCIsInN0b3JlSWQiLCJnZXR0ZXJzIiwiZ2V0dGVyTmFtZSIsImZvcm1hdEV2ZW50RGF0YSIsImV2ZW50cyIsImZvcm1hdE11dGF0aW9uVHlwZSIsImlzVGltZWxpbmVBY3RpdmUiLCJjb21wb25lbnRTdGF0ZVR5cGVzIiwiTVVUQVRJT05TX0xBWUVSX0lEIiwiSU5TUEVDVE9SX0lEIiwiZ2V0U3RvcmVUeXBlIiwicmVnaXN0ZXJQaW5pYURldnRvb2xzIiwiYXBpIiwibm9kZUlkIiwicGF5bG9hZCIsInBpbmlhU3RvcmVzIiwic3RvcmVzIiwiaW5zcGVjdGVkU3RvcmUiLCJhZGRTdG9yZVRvRGV2dG9vbHMiLCJhZnRlciIsIm9uRXJyb3IiLCJncm91cElkIiwicnVubmluZ0FjdGlvbklkIiwiYWN0aXZlQWN0aW9uIiwiZXZlbnREYXRhIiwiaG90VXBkYXRlIiwibmV3U3RvcmUiLCIkZGlzcG9zZSIsInBhdGNoQWN0aW9uRm9yR3JvdXBpbmciLCJhY3Rpb25OYW1lcyIsImFjdGlvbnMiLCJzdG9yZUFjdGlvbnMiLCJhY3Rpb25OYW1lIiwiX2FjdGlvbklkIiwidHJhY2tlZFN0b3JlIiwiZGV2dG9vbHNQbHVnaW4iLCJvcmlnaW5hbEhvdFVwZGF0ZSIsImNyZWF0ZVBpbmlhIiwidG9CZUluc3RhbGxlZCIsInBhdGNoT2JqZWN0IiwibmV3U3RhdGUiLCJvbGRTdGF0ZSIsInN1YlBhdGNoIiwidGFyZ2V0VmFsdWUiLCJub29wIiwiYWRkU3Vic2NyaXB0aW9uIiwic3Vic2NyaXB0aW9ucyIsInJlbW92ZVN1YnNjcmlwdGlvbiIsImlkeCIsInRyaWdnZXJTdWJzY3JpcHRpb25zIiwibWVyZ2VSZWFjdGl2ZU9iamVjdHMiLCJwYXRjaFRvQXBwbHkiLCJza2lwSHlkcmF0ZVN5bWJvbCIsInNob3VsZEh5ZHJhdGUiLCJhc3NpZ24iLCJpc0NvbXB1dGVkIiwiY3JlYXRlT3B0aW9uc1N0b3JlIiwiaG90IiwiaW5pdGlhbFN0YXRlIiwibG9jYWxTdGF0ZSIsImNvbXB1dGVkR2V0dGVycyIsImNyZWF0ZVNldHVwU3RvcmUiLCIkc3RhdGUiLCIkaWQiLCJpc09wdGlvbnNTdG9yZSIsIm9wdGlvbnNGb3JQbHVnaW4iLCIkc3Vic2NyaWJlT3B0aW9ucyIsImlzTGlzdGVuaW5nIiwiZGVidWdnZXJFdmVudHMiLCJpc1N5bmNMaXN0ZW5pbmciLCJhY3Rpb25TdWJzY3JpcHRpb25zIiwiaG90U3RhdGUiLCJhY3RpdmVMaXN0ZW5lciIsIiRwYXRjaCIsInBhcnRpYWxTdGF0ZU9yTXV0YXRvciIsInN1YnNjcmlwdGlvbk11dGF0aW9uIiwibXlMaXN0ZW5lcklkIiwiJHJlc2V0Iiwid3JhcEFjdGlvbiIsImFjdGlvbiIsImFmdGVyQ2FsbGJhY2tMaXN0Iiwib25FcnJvckNhbGxiYWNrTGlzdCIsIl9obXJQYXlsb2FkIiwicGFydGlhbFN0b3JlIiwic3RvcFdhdGNoZXIiLCJzZXR1cFN0b3JlIiwiYWN0aW9uVmFsdWUiLCJzdGF0ZUtleSIsIm5ld1N0YXRlVGFyZ2V0Iiwib2xkU3RhdGVTb3VyY2UiLCJnZXR0ZXJWYWx1ZSIsIm5vbkVudW1lcmFibGUiLCJleHRlbmRlciIsImV4dGVuc2lvbnMiLCJkZWZpbmVTdG9yZSIsImlkT3JPcHRpb25zIiwic2V0dXBPcHRpb25zIiwiaXNTZXR1cFN0b3JlIiwidXNlU3RvcmUiLCJob3RJZCIsInZtIiwiU2F2ZVN0YXRlIiwiZGVmYXVsdHMiLCJkZWZpbmVJbW11dGFibGVTdG9yZSIsImhhc1dlYnNvY2tldERCcyIsInN1cHBvcnRzV2Vic29ja2V0Rm9jdXMiLCJmaXJzdFRleHRGaWVsZEluZGV4IiwiZmlyc3RQYXNzd29yZEZpZWxkSW5kZXgiLCJvcmlnaW5hbEZpZWxkSW5kZXgiLCJuZXdVc2VybmFtZUluZGV4IiwibmV3VXNlcm5hbWUiLCJuZXdQYXNzd29yZEluZGV4IiwibmV3UGFzc3dvcmQiLCJzdHViVnVlQXBwIiwic3R1YlBpbmlhIiwidXNlU3R1YlN0b3JlIiwiRm9ybUZpbGxpbmciLCJmb3JtU2F2aW5nIiwiTG9nZ2VyIiwibWF0Y2hGaW5kZXIiLCJzcGVjaWZpY0ZyYW1lSWQiLCJtYXRjaGVkRmllbGQiLCJkYXRhRmllbGQiLCJfY3VycmVudFBhZ2UiLCJpc1Zpc2libGUiLCJmb3JtRmllbGQiLCJzY29yZSIsImZpZWxkU2NvcmVNYXRyaXgiLCJkYXRhRmllbGRzIiwiZm9ybUZpZWxkcyIsImF1dG9tYXRlZCIsImZpbGxlZEZpZWxkcyIsImZmaSIsImRmaSIsImRvbUVsZW1lbnQiLCJjdXJyZW50VmFsdWUiLCJmaWVsZFR5cGUiLCJjdXJyZW50UGFnZSIsInNjb3JlQ29uZmlnIiwiYmVoYXZpb3VyIiwiZm9ybXMiLCJwc2V1ZG9Gb3JtIiwic2VhcmNoU2VudFRvS2VlUGFzcyIsInNjYW5SZXN1bHQiLCJpbnRlcmVzdGluZ0Zvcm0iLCJub1Bhc3N3b3JkRmllbGQiLCJub090aGVyRmllbGQiLCJzdWJtaXRUYXJnZXROZWlnaGJvdXIiLCJmb3JtTnVtYmVyIiwic3VibWl0VGFyZ2V0Iiwib3JwaGFuZWRGaWVsZHMiLCJ0biIsInZhbGlkRW50cmllcyIsImZpbmRMb2dpbk9wIiwibWF0Y2hSZXN1bHQiLCJjclN0cmluZyIsImZpcnN0TWF0Y2hQcm9jZXNzZWQiLCJmb3JtVmlzaWJsZSIsInZpc2libGVGaWVsZENhY2hlIiwiZmllbGRNYXRjaFNjb3JlQ29uZmlnIiwibG93RmllbGRNYXRjaFJhdGlvIiwiZm9ybUluZGV4IiwiZmluZE1hdGNoZXNSZXN1bHQiLCJtb3N0UmVsZXZhbnRGb3JtSW5kZXgiLCJlbnRyeUluZGV4IiwiaXNNYXRjaGVkTG9naW5SZXF1ZXN0Iiwib3JkZXJlZEVudHJpZXMiLCJvcmRlcmVkRW50cmllc1dpdGhQcmVmZXJlbmNlIiwibWF0Y2hpbmdMb2dpbiIsIm11bHRpcGxlTWF0Y2hlcyIsImNoZWNrTWF0Y2hpbmdMb2dpblJlbGV2YW5jZVRocmVzaG9sZCIsImF1dG9GaWxsRW5hYmxlZCIsImF1dG9TdWJtaXRFbmFibGVkIiwibGFzdEZpbGxlZE90aGVyIiwibGFzdEZpbGxlZFBhc3N3b3JkcyIsImNhbmRpZGF0ZXMiLCJtaW5TY29yZVRvV2luIiwiZGlzdGFuY2VDYWxjIiwiZGlzdGFuY2VNYXAiLCJmVXRpbHMiLCJ2ZXJpZnlQb3RlbnRpYWxDYW5kaWRhdGUiLCJyZXNvbHZlQXJpYUxhYmVsVmFsdWVzIiwic2VtYW50aWNWYWx1ZXMiLCJzZW1hbnRpY1Njb3JlIiwic3VibWl0RWxlbWVudHMiLCJtYXhEaXN0YW5jZURpZmZlcmVuY2UiLCJkaXN0YW5jZVNjb3JlIiwiZGlzdGFuY2VGYWN0b3IiLCJsYXN0RGlzdGFuY2UiLCJjYW5kaWRhdGUiLCJlbGVtZW50cyIsIm1heFNjb3JlIiwibWF4U2NvcmVFbGVtZW50IiwiZmFjdG9yIiwic2VtYW50aWNXaGl0ZWxpc3RDYWNoZSIsInNlbWFudGljQmxhY2tsaXN0Q2FjaGUiLCJnb29kV29yZHMiLCJiYWRXb3JkcyIsImdvb2RTY29yZSIsImJhZFNjb3JlIiwic2VtYW50aWNWYWx1ZSIsIm5vZGVBIiwibm9kZUIiLCJkaXN0YW5jZSIsImZvdW5kIiwicGVuZGluZ01hcCIsInBlbmRpbmdNYXBTdGFydERpc3RhbmNlIiwiY2FjaGVkTm9kZURpc3RhbmNlIiwic3VibWl0RWxlbWVudCIsIm1pbk1hdGNoZWRGaWVsZENvdW50UmF0aW8iLCJvdGhlclJlbGV2YW5jZVNjb3JlIiwib3RoZXJGaWVsZE1hdGNoU3VjY2Vzc2VzIiwicGFzc3dvcmRSZWxldmFuY2VTY29yZSIsInBhc3N3b3JkRmllbGRNYXRjaFN1Y2Nlc3NlcyIsInRvdGFsUmVsZXZhbmNlU2NvcmUiLCJmb3JtRmllbGRDb3VudCIsImxvZ2luRmllbGRDb3VudCIsImZvcm1GaWVsZENvdW50Rm9yQXV0b2ZpbGwiLCJsb2dpbkZpZWxkQ291bnRGb3JBdXRvZmlsbCIsImZvcm1NYXRjaGVkRmllbGRDb3VudEZvckF1dG9maWxsIiwibnVtYmVyT2ZOZXdQYXNzd29yZEZpZWxkcyIsImZpZWxkTWF0Y2hSYXRpb0ZvckF1dG9maWxsIiwiYWRqdXN0ZWRSZWxldmFuY2UiLCJkZWJ1Z05hbWUiLCJtYXRjaGVkRmllbGRzIiwiZW50cnlGaWVsZHMiLCJ2aXNpYmxlRmllbGRNYXAiLCJtaW5GaWVsZFJlbGV2YW5jZSIsImZpZWxkTWF0Y2hTdWNjZXNzZXMiLCJtb3N0UmVsZXZhbnRTY29yZSIsImZtU2NvcmUiLCJmbVNjb3JlRm9yUmF0aW8iLCJNYXRjaGVkRmllbGQiLCJGb3JtVXRpbHMiLCJsb2dnZXIiLCJmcmFtZSIsImxvY2FsRG9jQ291bnQiLCJmcmFtZXMiLCJ1cmkiLCJmaWVsZE5hbWVJbiIsImZpZWxkTmFtZSIsImlzU3VibWlzc2lvbiIsIm1heGltdW1GaWVsZENvdW50IiwicHdGaWVsZHMiLCJhbGxGaWVsZHMiLCJmaXJzdFBvc3NpYmxlVXNlcm5hbWVJbmRleCIsInRvdGFsRWxlbWVudHMiLCJlbGVtZW50TGltaXQiLCJmaWVsZFZhbHVlIiwib3RoZXJDb3VudCIsImFjdHVhbFVzZXJuYW1lSW5kZXgiLCJGb3JtU2F2aW5nIiwiZm9ybVRvU3VibWl0IiwiYXR0YWNobWVudCIsImlzUGFzc3dvcmRDaGFuZ2VGb3JtIiwiaXNSZWdpc3RyYXRpb25Gb3JtIiwiZXgiLCJ0d29QYXNzd29yZHNNYXRjaEluZGV4Iiwibm9uRW1wdHlQYXNzd29yZEZpZWxkcyIsIm5vbkVtcHR5T3RoZXJGaWVsZHMiLCJkaWZmZXJlbnRQYXNzd29yZCIsImRpZmZlcmVudE90aGVyIiwic3VibWl0dGVkRGF0YSIsIm5ld2x5U3VibWl0dGVkRmllbGRzIiwicHJldmlvdXNseUZpbGxlZEZpZWxkcyIsImZpbGxlZEZpZWxkIiwic3VibWl0dGVkRmllbGQiLCJwYW5lbE9wdGlvbnMiLCJQYXNzd29yZEdlbmVyYXRvciIsIlN5bmNDb250ZW50Iiwic2VuZE11dGF0aW9uIiwidnVlTW91bnQiLCJtdXRhdGlvbiIsIkNvbnRlbnRQb3J0TWFuYWdlciIsImJyb3dzZXIucnVudGltZSIsIlBvcnQiLCJrZWVEdXBsaWNhdGlvbkNvdW50IiwiZm9ybUZpbGxpbmciLCJwYXNzd29yZEdlbmVyYXRvciIsImZyYW1lSWQiLCJzeW5jQ29udGVudCIsImNvbm5lY3RlZCIsIm1lc3NhZ2luZ1BvcnRDb25uZWN0aW9uUmV0cnlUaW1lciIsInBhZ2VTaG93RmlyZWQiLCJjb25maWdSZWFkeSIsIm1pc3NpbmdQYWdlU2hvd1RpbWVyIiwiaW5wdXRzT2JzZXJ2ZXIiLCJ0dXRvcmlhbEludGVncmF0aW9uIiwidHJhbnNmZXJFbGVtZW50Iiwib25GaXJzdENvbm5lY3QiLCJteUZyYW1lSWQiLCJzdGFydHVwIiwiY29ubmVjdFRvTWVzc2FnaW5nUG9ydCIsIm11dGF0aW9ucyIsInJlc2NhbiIsImludGVyZXN0aW5nTm9kZXMiXSwibWFwcGluZ3MiOiJvTkFBQyxTQUFVQSxFQUFRQyxFQUFTLENBSXhCQSxFQUFRQyxDQUFNLENBUWxCLEdBQUcsT0FBTyxXQUFlLElBQWMsV0FBYSxPQUFPLEtBQVMsSUFBYyxLQUFPQyxHQUFNLFNBQVVELEVBQVEsU0FZL0csR0FBSSxHQUFDRSxHQUFBQyxFQUFBLFdBQVcsU0FBWCxZQUFBQSxFQUFtQixVQUFuQixNQUFBRCxFQUE0QixJQUMvQixNQUFNLElBQUksTUFBTSwyREFBMkQsRUFHN0UsR0FBSSxPQUFPLFdBQVcsUUFBWSxLQUFlLE9BQU8sZUFBZSxXQUFXLE9BQU8sSUFBTSxPQUFPLFVBQVcsQ0FDL0csTUFBTUUsRUFBbUQsMERBTW5EQyxFQUFXQyxHQUFpQixDQUloQyxNQUFNQyxFQUFjLENBQ2xCLE9BQVUsQ0FDUixNQUFTLENBQ1AsUUFBVyxFQUNYLFFBQVcsQ0FDWixFQUNELFNBQVksQ0FDVixRQUFXLEVBQ1gsUUFBVyxDQUNaLEVBQ0QsSUFBTyxDQUNMLFFBQVcsRUFDWCxRQUFXLENBQ1osRUFDRCxPQUFVLENBQ1IsUUFBVyxFQUNYLFFBQVcsQ0FDWixDQUNGLEVBQ0QsVUFBYSxDQUNYLE9BQVUsQ0FDUixRQUFXLEVBQ1gs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QSxPQUFBLFNBQ0lELEVBQUEsVUFBQSxPQUFBLFNBQ0lBLEVBQUEsVUFBQSxLQUFBLElBRUpDLEVBQUEsT0FBQSxVQUFBLEtBQUEsTUFBQSxRQUNJRCxFQUFBLFVBQUEsS0FBQSxNQUFBLFNBQ0lBLEVBQUEsVUFBQSxLQUFBLElBQUFDLEVBQUEsT0FBQSxVQUFBLEtBQUEsS0FHUkEsRUFBQSxPQUFBLFVBQUEsS0FBQSxRQUFBLFFBQ0lELEVBQUEsVUFBQSxLQUFBLFFBQUEsU0FDSUEsRUFBQSxVQUFBLEtBQUEsTUFBQUMsRUFBQSxPQUFBLFVBQUEsS0FBQSxRQUlaQSxFQUFBLE9BQUEsVUFBQSxTQUFBLFNBQ0lELEVBQUEsVUFBQSxTQUFBLFNBQ0lBLEVBQUEsVUFBQSxPQUFBLElBRUpDLEVBQUEsT0FBQSxVQUFBLE9BQUEsTUFBQSxRQUNJRCxFQUFBLFVBQUEsT0FBQSxNQUFBLFNBQ0lBLEVBQUEsVUFBQSxPQUFBLElBQUFDLEVBQUEsT0FBQSxVQUFBLE9BQUEsS0FHUkEsRUFBQSxPQUFBLFVBQUEsT0FBQSxRQUFBLFFBQ0lELEVBQUEsVUFBQSxPQUFBLFFBQUEsU0FDSUEsRUFBQSxVQUFBLE9BQUEsTUFBQUMsRUFBQSxPQUFBLFVBQUEsT0FBQSxTQU9oQkEsRUFBQSxPQUFBLFlBQUEsU0FDSUQsRUFBQSxZQUFBLFNBQ0lBLEVBQUEsVUFBQSxJQUVKQyxFQUFBLE9BQUEsVUFBQSxPQUFBLFNBQ0lELEVBQUEsVUFBQSxPQUFBLFNBQ0lBLEVBQUEsVUFBQSxLQUFBLElBRUpDLEVBQUEsT0FBQSxVQUFBLEtBQUEsTUFBQSxRQUNJRCxFQUFBLFVBQUEsS0FBQSxNQUFBLFNBQ0lBLEVBQUEsVUFBQSxLQUFBLElBQUFDLEVBQUEsT0FBQSxVQUFBLEtBQUEsS0FHUkEsRUFBQSxPQUFBLFVBQUEsS0FBQSxRQUFBLFFBQ0lELEVBQUEsVUFBQSxLQUFBLFFBQUEsU0FDSUEsRUFBQSxVQUFBLEtBQUEsTUFBQUMsRUFBQSxPQUFBLFVBQUEsS0FBQSxRQUlaQSxFQUFBLE9BQUEsVUFBQSxTQUFBLFNBQ0lELEVBQUEs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
