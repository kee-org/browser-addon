(function(){"use strict";var Jo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Oe={},zo={get exports(){return Oe},set exports(t){Oe=t}};(function(t,e){(function(n,s){s(t)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:Jo,function(n){var s,i;if(!((i=(s=globalThis.chrome)==null?void 0:s.runtime)!=null&&i.id))throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const r="The message port closed before a response was received.",o=a=>{const l={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(l).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class c extends WeakMap{constructor(m,y=void 0){super(y),this.createItem=m}get(m){return this.has(m)||this.set(m,this.createItem(m)),super.get(m)}}const d=L=>L&&typeof L=="object"&&typeof L.then=="function",f=(L,m)=>(...y)=>{a.runtime.lastError?L.reject(new Error(a.runtime.lastError.message)):m.singleCallbackArg||y.length<=1&&m.singleCallbackArg!==!1?L.resolve(y[0]):L.resolve(y)},g=L=>L==1?"argument":"arguments",w=(L,m)=>function(p,...E){if(E.length<m.minArgs)throw new Error(`Expected at least ${m.minArgs} ${g(m.minArgs)} for ${L}(), got ${E.length}`);if(E.length>m.maxArgs)throw new Error(`Expected at most ${m.maxArgs} ${g(m.maxArgs)} for ${L}(), got ${E.length}`);return new Promise((H,ce)=>{if(m.fallbackToNoCallback)try{p[L](...E,f({resolve:H,reject:ce},m))}catch(j){console.warn(`${L} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,j),p[L](...E),m.fallbackToNoCallback=!1,m.noCallback=!0,H()}else m.noCallback?(p[L](...E),H()):p[L](...E,f({resolve:H,reject:ce},m))})},I=(L,m,y)=>new Proxy(m,{apply(p,E,H){return y.call(E,L,...H)}});let v=Function.call.bind(Object.prototype.hasOwnProperty);const O=(L,m={},y={})=>{let p=Object.create(null),E={has(ce,j){return j in L||j in p},get(ce,j,Z){if(j in p)return p[j];if(!(j in L))return;let T=L[j];if(typeof T=="function")if(typeof m[j]=="function")T=I(L,L[j],m[j]);else if(v(y,j)){let X=w(j,y[j]);T=I(L,L[j],X)}else T=T.bind(L);else if(typeof T=="object"&&T!==null&&(v(m,j)||v(y,j)))T=O(T,m[j],y[j]);else if(v(y,"*"))T=O(T,m[j],y["*"]);else return Object.defineProperty(p,j,{configurable:!0,enumerable:!0,get(){return L[j]},set(X){L[j]=X}}),T;return p[j]=T,T},set(ce,j,Z,T){return j in p?p[j]=Z:L[j]=Z,!0},defineProperty(ce,j,Z){return Reflect.defineProperty(p,j,Z)},deleteProperty(ce,j){return Reflect.deleteProperty(p,j)}},H=Object.create(L);return new Proxy(H,E)},$=L=>({addListener(m,y,...p){m.addListener(L.get(y),...p)},hasListener(m,y){return m.hasListener(L.get(y))},removeListener(m,y){m.removeListener(L.get(y))}}),K=new c(L=>typeof L!="function"?L:function(y){const p=O(y,{},{getContent:{minArgs:0,maxArgs:0}});L(p)}),W=new c(L=>typeof L!="function"?L:function(y,p,E){let H=!1,ce,j=new Promise(V=>{ce=function(te){H=!0,V(te)}}),Z;try{Z=L(y,p,ce)}catch(V){Z=Promise.reject(V)}const T=Z!==!0&&d(Z);if(Z!==!0&&!T&&!H)return!1;const X=V=>{V.then(te=>{E(te)},te=>{let Ae;te&&(te instanceof Error||typeof te.message=="string")?Ae=te.message:Ae="An unexpected error occurred",E({__mozWebExtensionPolyfillReject__:!0,message:Ae})}).catch(te=>{console.error("Failed to send onMessage rejected reply",te)})};return X(T?Z:j),!0}),k=({reject:L,resolve:m},y)=>{a.runtime.lastError?a.runtime.lastError.message===r?m():L(new Error(a.runtime.lastError.message)):y&&y.__mozWebExtensionPolyfillReject__?L(new Error(y.message)):m(y)},Y=(L,m,y,...p)=>{if(p.length<m.minArgs)throw new Error(`Expected at least ${m.minArgs} ${g(m.minArgs)} for ${L}(), got ${p.length}`);if(p.length>m.maxArgs)throw new Error(`Expected at most ${m.maxArgs} ${g(m.maxArgs)} for ${L}(), got ${p.length}`);return new Promise((E,H)=>{const ce=k.bind(null,{resolve:E,reject:H});p.push(ce),y.sendMessage(...p)})},re={devtools:{network:{onRequestFinished:$(K)}},runtime:{onMessage:$(W),onMessageExternal:$(W),sendMessage:Y.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:Y.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},N={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return l.privacy={network:{"*":N},services:{"*":N},websites:{"*":N}},O(a,re,l)};n.exports=o(chrome)}else n.exports=globalThis.browser})})(zo);class Oi{}class Ce{}class Ti{}class Xo{}const yn=new Ti;yn.pageRegex=new Ce,yn.pageRegex["^.*$"]={config:{preventSaveNotification:!1,listMatchingCaseSensitive:!1,blackList:{form:{names:["search"],ids:["search"]},fields:{names:["search","q","query"],ids:["search","q"]}},whiteList:{form:{names:["login"],ids:["login"]},fields:{names:["username","j_username","user_name","user","user-name","login","vb_login_username","name","user name","user id","user-id","userid","email","e-mail","id","form_loginname","wpname","mail","loginid","login id","login_name","openid_identifier","authentication_email","openid","auth_email","auth_id","authentication_identifier","authentication_id","customer_number","customernumber","onlineid"],ids:["username","j_username","user_name","user","user-name","login","vb_login_username","name","user-id","userid","email","e-mail","id","form_loginname","wpname","mail","loginid","login_name","openid_identifier","authentication_email","openid","auth_email","auth_id","authentication_identifier","authentication_id","customer_number","customernumber","onlineid"]}},preferredEntryUuid:null},matchWeight:0,source:"Default"};class Mi{migrateToVersion8(e){Object.assign(e,{overWriteFieldsAutomatically:!1,version:8})}migrateToVersion7(e){e.notificationCountSavePassword>6?Object.assign(e,{notificationCountSavePassword:6,version:7}):Object.assign(e,{version:7})}migrateToVersion6(e){Object.assign(e,{animateWhenOfferingSave:!0,version:6})}migrateToVersion5(e){Object.assign(e,{notifyPasswordAvailableForPaste:!0,version:5})}migrateToVersion4(e){let n=2;e.logLevel===1&&(n=1),Object.assign(e,{logLevel:n,version:4})}migrateToVersion3(e){e.notificationCountGeneric==null&&(e.notificationCountGeneric=0),e.notificationCountSavePassword==null&&(e.notificationCountSavePassword=0),Object.assign(e,{currentSearchTermTimeout:30,version:3})}migrateToVersion2(e){let n=new Ti;if(!e.config||e.config.length==0){n=yn;return}n.pageRegex=new Ce,n.hostExact=new Ce,n.pagePrefix=new Ce,n.pageRegex["^.*$"]={matchWeight:0,config:this.migrateIndividualSiteConfigSettingsToV2(e.config[0].config),source:"Migration"};for(let s=1;s<e.config.length;s++){const i=e.config[s].url;if(i.indexOf("://")==-1)continue;const r=i.substr(i.indexOf("://")+3);if(r.length<=1)continue;const o=this.migrateIndividualSiteConfigSettingsToV2(e.config[s].config),a=r.indexOf("/");if(a>-1||a==r.lastIndexOf("/")){const l=a>-1?r.substr(0,a):r;n.hostExact[l]={config:o,matchWeight:100,source:"Migration"}}else{let l=200;for(const c in n.pagePrefix)r.startsWith(c)&&l++;n.pagePrefix[r]={config:o,matchWeight:l,source:"Migration"}}}Object.assign(e,{siteConfig:n,config:null,version:2})}migrateIndividualSiteConfigSettingsToV2(e){const n=new Oi;return e.preventSaveNotification==null&&(n.preventSaveNotification=e.preventSaveNotification),e.interestingForms&&(e.interestingForms.name_w&&(n.whiteList?n.whiteList.form?n.whiteList.form.names||(n.whiteList.form.names=[]):n.whiteList.form={names:[]}:n.whiteList={form:{names:[]}},n.whiteList.form.names=e.interestingForms.name_w),e.interestingForms.id_w&&(n.whiteList?n.whiteList.form?n.whiteList.form.ids||(n.whiteList.form.ids=[]):n.whiteList.form={ids:[]}:n.whiteList={form:{ids:[]}},n.whiteList.form.ids=e.interestingForms.id_w),e.interestingForms.name_b&&(n.blackList?n.blackList.form?n.blackList.form.names||(n.blackList.form.names=[]):n.blackList.form={names:[]}:n.blackList={form:{names:[]}},n.blackList.form.names=e.interestingForms.name_b),e.interestingForms.id_b&&(n.blackList?n.blackList.form?n.blackList.form.ids||(n.blackList.form.ids=[]):n.blackList.form={ids:[]}:n.blackList={form:{ids:[]}},n.blackList.form.ids=e.interestingForms.id_b),e.interestingForms.f_name_w&&(n.whiteList?n.whiteList.fields?n.whiteList.fields.names||(n.whiteList.fields.names=[]):n.whiteList.fields={names:[]}:n.whiteList={fields:{names:[]}},n.whiteList.fields.names=e.interestingForms.f_name_w),e.interestingForms.f_id_w&&(n.whiteList?n.whiteList.fields?n.whiteList.fields.ids||(n.whiteList.fields.ids=[]):n.whiteList.fields={ids:[]}:n.whiteList={fields:{ids:[]}},n.whiteList.fields.ids=e.interestingForms.f_id_w),e.interestingForms.f_name_b&&(n.blackList?n.blackList.fields?n.blackList.fields.names||(n.blackList.fields.names=[]):n.blackList.fields={names:[]}:n.blackList={fields:{names:[]}},n.blackList.fields.names=e.interestingForms.f_name_b),e.interestingForms.f_id_b&&(n.blackList?n.blackList.fields?n.blackList.fields.ids||(n.blackList.fields.ids=[]):n.blackList.fields={ids:[]}:n.blackList={fields:{ids:[]}},n.blackList.fields.ids=e.interestingForms.f_id_b)),n}}class Yo{constructor(){this.pslInitialised=!1}versionAsInt(e){let n=0;for(let s=0;s<e.length;s++)n=n*256+e[s];return n}versionAsArray(e){const n=[0,0,0];for(let s=n.length-1;s>=0;s--){const i=e&255;n[s]=i,e=(e-i)/256}return n}versionAsString(e){let n="";const s=this.versionAsArray(e);for(let i=0;i<s.length;i++)i>0&&(n+="."),n+=s[i].toString();return n}toHexString(e){return("0"+e.toString(16)).slice(-2)}BigIntFromRandom(e){const n=new Uint8Array(e);window.crypto.getRandomValues(n);const s=Array.from(n).map(this.toHexString).join("");return BigInteger.parse(s,16)}hash(e,n="hex",s="SHA-256"){let i;return typeof e=="string"?i=new TextEncoder().encode(e):i=e,crypto.subtle.digest({name:s},i).then(r=>n=="base64"?Te.byteArrayToBase64(r):Array.from(new Uint8Array(r)).map(this.toHexString).join(""))}intToByteArray(e){const n=[0,0,0,0];for(let s=n.length-1;s>=0;s--){const i=e&255;n[s]=i,e=(e-i)/256}return n}intArrayToByteArray(e){const n=new Array(e.length*4);for(let s=0;s<e.length;s++){let i=e[s];for(let r=3;r>=0;r--){const o=i&255;n[s*4+r]=o,i=(i-o)/256}}return n}stringToByteArray(e){return new TextEncoder().encode(e)}base64toByteArrayForHMAC(e,n,s=null){const i=atob(e),r=i.length;let o=0;if(!s){const a=new ArrayBuffer(r+n);s=new Uint8Array(a),o=20}for(let a=0;a<r;a++)s[a+o]=i.charCodeAt(a);return s}base64toByteArray(e){const n=atob(e),s=n.length,i=new ArrayBuffer(s),r=new Uint8Array(i);for(let o=0;o<s;o++)r[o]=n.charCodeAt(o);return r}byteArrayToBase64(e){let n="";const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=new Uint8Array(e),r=i.byteLength,o=r%3,a=r-o;let l,c,d,f,g;for(let w=0;w<a;w=w+3)g=i[w]<<16|i[w+1]<<8|i[w+2],l=(g&16515072)>>18,c=(g&258048)>>12,d=(g&4032)>>6,f=g&63,n+=s[l]+s[c]+s[d]+s[f];return o==1?(g=i[a],l=(g&252)>>2,c=(g&3)<<4,n+=s[l]+s[c]+"=="):o==2&&(g=i[a]<<8|i[a+1],l=(g&64512)>>10,c=(g&1008)>>4,d=(g&15)<<2,n+=s[l]+s[c]+s[d]+"="),n}hexStringToByteArray(e,n=null){if(e.length%2!==0)throw Error("Must have an even number of hex digits to convert to bytes");const s=e.length/2;n||(n=new Uint8Array(s));for(let i=0;i<s;i++)n[i]=parseInt(e.substr(i*2,2),16);return n}newGUID(){const e=[];for(let a=0;a<256;a++)e[a]=(a<16?"0":"")+a.toString(16);const n=new Uint32Array(4);window.crypto.getRandomValues(n);const s=n[0],i=n[1],r=n[2],o=n[3];return e[s&255]+e[s>>8&255]+e[s>>16&255]+e[s>>24&255]+"-"+e[i&255]+e[i>>8&255]+"-"+e[i>>16&15|64]+e[i>>24&255]+"-"+e[r&63|128]+e[r>>8&255]+"-"+e[r>>16&255]+e[r>>24&255]+e[o&255]+e[o>>8&255]+e[o>>16&255]+e[o>>24&255]}base64urlDecode(e){return atob(e.replace(/-/g,"+").replace(/_/g,"/"))}binaryToByteArray(e){const n=e.length,s=new ArrayBuffer(n),i=new Uint8Array(s);for(let r=0;r<n;r++)i[r]=e.charCodeAt(r);return i}base64urltoByteArray(e){const n=this.base64urlDecode(e);return this.binaryToByteArray(n)}get psl(){if(!publicSuffixList)throw new Error("publicSuffixList library not present");return this.pslInitialised||(publicSuffixList.parse(pslData.text,punycode.toASCII),this.pslInitialised=!0),publicSuffixList}}function bs(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,s;if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(s=n;s--!==0;)if(!bs(t[s],e[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const i=Object.keys(t);if(n=i.length,n!==Object.keys(e).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(e,i[s]))return!1;for(s=n;s--!==0;){const r=i[s];if(!bs(t[r],e[r]))return!1}return!0}return t!==t&&e!==e}const Te=new Yo,Qo=[EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,globalThis.DOMException,globalThis.AssertionError,globalThis.SystemError].filter(Boolean).map(t=>[t.name,t]),Zo=new Map(Qo),ea=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0},{property:"cause",enumerable:!1}],ws=Symbol(".toJSON was called"),ta=t=>{t[ws]=!0;const e=t.toJSON();return delete t[ws],e},na=t=>Zo.get(t)??Error,ki=({from:t,seen:e,to:n,forceEnumerable:s,maxDepth:i,depth:r,useToJSON:o,serialize:a})=>{if(!n)if(Array.isArray(t))n=[];else if(!a&&Di(t)){const c=na(t.name);n=new c}else n={};if(e.push(t),r>=i)return n;if(o&&typeof t.toJSON=="function"&&t[ws]!==!0)return ta(t);const l=c=>ki({from:c,seen:[...e],forceEnumerable:s,maxDepth:i,depth:r,useToJSON:o,serialize:a});for(const[c,d]of Object.entries(t)){if(typeof Buffer=="function"&&Buffer.isBuffer(d)){n[c]="[object Buffer]";continue}if(d!==null&&typeof d=="object"&&typeof d.pipe=="function"){n[c]="[object Stream]";continue}if(typeof d!="function"){if(!d||typeof d!="object"){n[c]=d;continue}if(!e.includes(t[c])){r++,n[c]=l(t[c]);continue}n[c]="[Circular]"}}for(const{property:c,enumerable:d}of ea)typeof t[c]<"u"&&t[c]!==null&&Object.defineProperty(n,c,{value:Di(t[c])?l(t[c]):t[c],enumerable:s?!0:d,configurable:!0,writable:!0});return n};function sa(t,e={}){const{maxDepth:n=Number.POSITIVE_INFINITY,useToJSON:s=!0}=e;return typeof t=="object"&&t!==null?ki({from:t,seen:[],forceEnumerable:!0,maxDepth:n,depth:0,useToJSON:s,serialize:!0}):typeof t=="function"?`[Function: ${t.name??"anonymous"}]`:t}function Di(t){return Boolean(t)&&typeof t=="object"&&"name"in t&&"message"in t&&"stack"in t}class ia{constructor(){this.defaultLevel=4,this.outputStarted=!1,this.config={logLevel:this.defaultLevel}}attachConfig(e){this.debug("Logging system config updated at "+Date()),this.config=e}formatMessage(e,n){return!e&&!n?"":(this.outputStarted||(e="* "+e,this.outputStarted=!0),n&&(e+=` Error: ${JSON.stringify(sa(n))}`),e)}debug(e){this.config.logLevel>=4&&(e=this.formatMessage(e),e.length>0&&(console.debug(e),this.config.logLevel>=4&&this.send(4,e)))}info(e){this.config.logLevel>=3&&(e=this.formatMessage(e),e.length>0&&(console.info(e),this.config.logLevel>=4&&this.send(3,e)))}warn(e){this.config.logLevel>=2&&(e=this.formatMessage(e),e.length>0&&(console.warn(e),this.config.logLevel>=4&&this.send(2,e)))}error(e,n){this.config.logLevel>=1&&(e=this.formatMessage(e,n),e.length>0&&(console.error(e),this.config.logLevel>=4&&this.send(1,e)))}send(e,n){}stackTrace(){console.groupCollapsed("%c Stack Trace","color:cream; font-style: normal;"),console.debug(new Error().stack),console.groupEnd()}}const le=new ia,ys=8,B=new Xo;B.autoFillDialogs=!1,B.autoFillForms=!0,B.autoFillFormsWithMultipleMatches=!1,B.autoSubmitForms=!1,B.autoSubmitDialogs=!1,B.autoSubmitMatchedForms=!1,B.connSLClient=2,B.connSLServerMin=2,B.keePassDBToOpen="",B.keePassMRUDB="",B.KeePassRPCWebSocketPort=12546,B.KPRPCUsername="",B.KPRPCStoredKeys={},B.lastConnectedToKeePass="",B.listAllOpenDBs=!0,B.logLevel=le.defaultLevel,B.logMethodConsole=!1,B.logMethodFile=!1,B.logSensitiveData=!1,B.metricsUsageDisabled=!1,B.metricsUserId="",B.notifyWhenEntryUpdated=!0,B.notifyWhenLateDiscovery=!1,B.notifyWhenLoggedOut=!1,B.overWriteFieldsAutomatically=!1,B.rememberMRUDB=!0,B.rememberMRUGroup=!0,B.saveFavicons=!0,B.searchAllOpenDBs=!0,B.config=null,B.siteConfig=yn,B.tutorialProgress="",B.version=ys,B.triggerChangeInputEventAfterFill=!1,B.autoSubmitNetworkAuthWithSingleMatch=!1,B.searchNetworkAuth=!0,B.notificationCountGeneric=0,B.notificationCountSavePassword=0,B.currentSearchTermTimeout=30,B.notifyPasswordAvailableForPaste=!0,B.animateWhenOfferingSave=!0,B.keeVaultLaunchMessageDismissed=!1,B.keeVaultLaunchStart=864e13,B.keeVaultLaunchEnd=864e13,B.manualSubmitOverrideProhibited=!1,B.theme=null,B.hideConfirmationAfterSave=!1,B.mustShowReleaseNotesAtStartup=!1,B.autoFillFieldsWithExistingValue=!1;class ra{constructor(){this.maxCharsPerPage=1e4,this._listeners=[],this.current=B,Oe.storage.onChanged.addListener((e,n)=>this.reloadOnStorageChange(e,n))}addChangeListener(e){this._listeners.push(e)}reloadOnStorageChange(e,n){Ie.reload(()=>this._listeners.forEach(s=>s(e,n)))}async setASAP(e){Object.assign(this.current,e),await this.save()}splitStringToPages(e){const n=Math.ceil(e.length/this.maxCharsPerPage),s=new Array(n);for(let i=0,r=0;i<n;++i,r+=this.maxCharsPerPage)s[i]=e.substr(r,this.maxCharsPerPage);return s}async save(){const e=JSON.stringify(this.current),n=this.splitStringToPages(e),s={};s.keeConfigPageCount=n.length;for(let i=0;i<n.length;i++)s["keeConfigPage"+i]=n[i];await Oe.storage.local.set(s)}load(e){Oe.storage.local.get().then(n=>{const s=n.keeConfigPageCount;if(s){let i="";for(let r=0;r<s;r++){const o=n["keeConfigPage"+r];o&&(i+=o)}i&&(this.current=JSON.parse(i))}else{const i=n.keefoxConfigPageCount;if(i){let r="";for(let o=0;o<i;o++){const a=n["keefoxConfigPage"+o];a&&(r+=a)}r&&(this.current=JSON.parse(r))}}this.fixInvalidConfigData(),this.migrateToLatestVersion(),e()})}fixInvalidConfigData(){let e=!1;this.current.KPRPCStoredKeys==null&&(this.current.KPRPCStoredKeys={},e=!0),e&&this.save()}migrateToLatestVersion(){if(this.current.version>=ys)return;const e=new Mi;switch(this.current.version){case 1:e.migrateToVersion2(this.current);case 2:e.migrateToVersion3(this.current);case 3:e.migrateToVersion4(this.current);case 4:e.migrateToVersion5(this.current);case 5:e.migrateToVersion6(this.current);case 6:e.migrateToVersion7(this.current);case 7:e.migrateToVersion8(this.current)}this.save()}migrateFromRemoteToLatestVersion(){if(this.current.version>=ys)return;const e=new Mi;switch(this.current.version){case 5:e.migrateToVersion6(this.current);case 6:e.migrateToVersion7(this.current)}this.save()}reload(e){Oe.storage.local.get().then(n=>{const s=n.keeConfigPageCount;if(s){let i="";for(let r=0;r<s;r++){const o=n["keeConfigPage"+r];o&&(i+=o)}i&&(this.current=Object.assign(this.current,JSON.parse(i)))}e&&e()})}siteConfigLookupFor(e,n){if(e=="Domain"){if(n=="Exact")return this.current.siteConfig.domainExact||(this.current.siteConfig.domainExact=new Ce),this.current.siteConfig.domainExact;if(n=="Prefix")return this.current.siteConfig.domainPrefix||(this.current.siteConfig.domainPrefix=new Ce),this.current.siteConfig.domainPrefix;if(n=="Regex")return this.current.siteConfig.domainRegex||(this.current.siteConfig.domainRegex=new Ce),this.current.siteConfig.domainRegex}else if(e=="Host"){if(n=="Exact")return this.current.siteConfig.hostExact||(this.current.siteConfig.hostExact=new Ce),this.current.siteConfig.hostExact;if(n=="Prefix")return this.current.siteConfig.hostPrefix||(this.current.siteConfig.hostPrefix=new Ce),this.current.siteConfig.hostPrefix;if(n=="Regex")return this.current.siteConfig.hostRegex||(this.current.siteConfig.hostRegex=new Ce),this.current.siteConfig.hostRegex}else if(e=="Page"){if(n=="Exact")return this.current.siteConfig.pageExact||(this.current.siteConfig.pageExact=new Ce),this.current.siteConfig.pageExact;if(n=="Prefix")return this.current.siteConfig.pagePrefix||(this.current.siteConfig.pagePrefix=new Ce),this.current.siteConfig.pagePrefix;if(n=="Regex")return this.current.siteConfig.pageRegex||(this.current.siteConfig.pageRegex=new Ce),this.current.siteConfig.pageRegex}return null}siteConfigFor(e){const n=this.findAllConfigsFor(e);return n.sort((s,i)=>i.matchWeight-s.matchWeight),this.deriveConfigFromMatches(n)}findAllConfigsFor(e){const n=[],s=new URL(e),i=s.host,r=i+s.pathname,o=Te.psl.getDomain(i);for(const a in this.current.siteConfig.domainExact)a===o&&n.push(this.current.siteConfig.domainExact[a]);for(const a in this.current.siteConfig.hostExact)a===i&&n.push(this.current.siteConfig.hostExact[a]);for(const a in this.current.siteConfig.pageExact)a===r&&n.push(this.current.siteConfig.pageExact[a]);for(const a in this.current.siteConfig.domainPrefix)o.startsWith(a)&&n.push(this.current.siteConfig.domainPrefix[a]);for(const a in this.current.siteConfig.hostPrefix)i.startsWith(a)&&n.push(this.current.siteConfig.hostPrefix[a]);for(const a in this.current.siteConfig.pagePrefix)r.startsWith(a)&&n.push(this.current.siteConfig.pagePrefix[a]);for(const a in this.current.siteConfig.domainRegex)new RegExp(a).test(o)&&n.push(this.current.siteConfig.domainRegex[a]);for(const a in this.current.siteConfig.hostRegex)new RegExp(a).test(i)&&n.push(this.current.siteConfig.hostRegex[a]);for(const a in this.current.siteConfig.pageRegex)new RegExp(a).test(r)&&n.push(this.current.siteConfig.pageRegex[a]);return n}findAllConfigsAndIndexFor(e){const n=[],s=new URL(e),i=s.host,r=i+s.pathname,o=Te.psl.getDomain(i);for(const a in this.current.siteConfig.domainExact)a===o&&n.push({node:this.current.siteConfig.domainExact[a],target:"Domain",method:"Exact",lookupValue:a});for(const a in this.current.siteConfig.hostExact)a===i&&n.push({node:this.current.siteConfig.hostExact[a],target:"Host",method:"Exact",lookupValue:a});for(const a in this.current.siteConfig.pageExact)a===r&&n.push({node:this.current.siteConfig.pageExact[a],target:"Page",method:"Exact",lookupValue:a});for(const a in this.current.siteConfig.domainPrefix)o.startsWith(a)&&n.push({node:this.current.siteConfig.domainPrefix[a],target:"Domain",method:"Prefix",lookupValue:a});for(const a in this.current.siteConfig.hostPrefix)i.startsWith(a)&&n.push({node:this.current.siteConfig.hostPrefix[a],target:"Host",method:"Prefix",lookupValue:a});for(const a in this.current.siteConfig.pagePrefix)r.startsWith(a)&&n.push({node:this.current.siteConfig.pagePrefix[a],target:"Page",method:"Prefix",lookupValue:a});for(const a in this.current.siteConfig.domainRegex)new RegExp(a).test(o)&&n.push({node:this.current.siteConfig.domainRegex[a],target:"Domain",method:"Regex",lookupValue:a});for(const a in this.current.siteConfig.hostRegex)new RegExp(a).test(i)&&n.push({node:this.current.siteConfig.hostRegex[a],target:"Host",method:"Regex",lookupValue:a});for(const a in this.current.siteConfig.pageRegex)new RegExp(a).test(r)&&n.push({node:this.current.siteConfig.pageRegex[a],target:"Page",method:"Regex",lookupValue:a});return n}deriveConfigFromMatches(e){const n={};return e.forEach(s=>{s.config.preventSaveNotification!==void 0&&n.preventSaveNotification==null&&(n.preventSaveNotification=s.config.preventSaveNotification),s.config.listMatchingCaseSensitive!==void 0&&n.listMatchingCaseSensitive==null&&(n.listMatchingCaseSensitive=s.config.listMatchingCaseSensitive),s.config.blackList!==void 0&&(n.blackList===void 0&&(n.blackList={}),s.config.blackList.form!==void 0&&(n.blackList.form===void 0&&(n.blackList.form={}),s.config.blackList.form.ids!==void 0&&n.blackList.form.ids===void 0&&(n.blackList.form.ids=s.config.blackList.form.ids),s.config.blackList.form.names!==void 0&&n.blackList.form.names===void 0&&(n.blackList.form.names=s.config.blackList.form.names)),s.config.blackList.fields!==void 0&&(n.blackList.fields===void 0&&(n.blackList.fields={}),s.config.blackList.fields.ids!==void 0&&n.blackList.fields.ids===void 0&&(n.blackList.fields.ids=s.config.blackList.fields.ids),s.config.blackList.fields.names!==void 0&&n.blackList.fields.names===void 0&&(n.blackList.fields.names=s.config.blackList.fields.names))),s.config.whiteList!==void 0&&(n.whiteList===void 0&&(n.whiteList={}),s.config.whiteList.form!==void 0&&(n.whiteList.form===void 0&&(n.whiteList.form={}),s.config.whiteList.form.ids!==void 0&&n.whiteList.form.ids===void 0&&(n.whiteList.form.ids=s.config.whiteList.form.ids),s.config.whiteList.form.names!==void 0&&n.whiteList.form.names===void 0&&(n.whiteList.form.names=s.config.whiteList.form.names)),s.config.whiteList.fields!==void 0&&(n.whiteList.fields===void 0&&(n.whiteList.fields={}),s.config.whiteList.fields.ids!==void 0&&n.whiteList.fields.ids===void 0&&(n.whiteList.fields.ids=s.config.whiteList.fields.ids),s.config.whiteList.fields.names!==void 0&&n.whiteList.fields.names===void 0&&(n.whiteList.fields.names=s.config.whiteList.fields.names))),s.config.preferredEntryUuid!==void 0&&n.preferredEntryUuid==null&&(n.preferredEntryUuid=s.config.preferredEntryUuid)}),n}normalizeFormProperty(e,n){return typeof e!="string"?null:n?e.toLowerCase():e}isFormInteresting(e,n,s){var W,k,Y,re,N,L,m,y,p,E,H,ce,j,Z,T,X;const i=n.listMatchingCaseSensitive!==!0,r=s.map(V=>{var te,Ae;return i?(te=V.locators[0])==null?void 0:te.id.toLowerCase():(Ae=V.locators[0])==null?void 0:Ae.id}).filter(Boolean),o=s.map(V=>{var te,Ae;return i?(te=V.locators[0])==null?void 0:te.name.toLowerCase():(Ae=V.locators[0])==null?void 0:Ae.name}).filter(Boolean),a=this.normalizeFormProperty(e.id,i),l=this.normalizeFormProperty(e.name,i),c=(((k=(W=n==null?void 0:n.blackList)==null?void 0:W.form)==null?void 0:k.ids)||[]).map(V=>i?V==null?void 0:V.toLowerCase():V).filter(Boolean),d=(((re=(Y=n==null?void 0:n.blackList)==null?void 0:Y.form)==null?void 0:re.names)||[]).map(V=>i?V==null?void 0:V.toLowerCase():V).filter(Boolean),f=(((L=(N=n==null?void 0:n.blackList)==null?void 0:N.fields)==null?void 0:L.ids)||[]).map(V=>i?V==null?void 0:V.toLowerCase():V).filter(Boolean),g=(((y=(m=n==null?void 0:n.blackList)==null?void 0:m.fields)==null?void 0:y.names)||[]).map(V=>i?V==null?void 0:V.toLowerCase():V).filter(Boolean);if(c.indexOf(a)>=0||d.indexOf(l)>=0||f.some(V=>r.find(te=>V===te)!==void 0)||g.some(V=>o.find(te=>V===te)!==void 0))return!1;const I=((E=(p=n==null?void 0:n.whiteList)==null?void 0:p.form)==null?void 0:E.ids)||[],v=((ce=(H=n==null?void 0:n.whiteList)==null?void 0:H.form)==null?void 0:ce.names)||[],O=((Z=(j=n==null?void 0:n.whiteList)==null?void 0:j.fields)==null?void 0:Z.ids)||[],$=((X=(T=n==null?void 0:n.whiteList)==null?void 0:T.fields)==null?void 0:X.names)||[];return I.indexOf(a)>=0||v.indexOf(l)>=0||O.some(V=>r.find(te=>V===te)!==void 0)||$.some(V=>o.find(te=>V===te)!==void 0)?!0:null}get activeTheme(){return this.current.theme||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}togglePreferredEntryUuid(e,n){let s;try{s=new URL(n)}catch{le.error("Invalid URL supplied to togglePreferredEntryUuid. Preferred entry will not be altered.");return}const i="Domain",r=this.findAllConfigsAndIndexFor(n),a=this.siteConfigFor(n).preferredEntryUuid;a===e?r.forEach(l=>{l.node.config.preferredEntryUuid===e&&this.removePreferredEntryUuid(l)}):(r.forEach(l=>{l.node.config.preferredEntryUuid===a&&this.leastSpecificTarget(i,l.target)===i&&this.removePreferredEntryUuid(l)}),this.addSiteConfigParameters({preferredEntryUuid:e},s,i,"Exact","Auto")),this.save()}removePreferredEntryUuid(e){if(e.node.config.preferredEntryUuid=null,e.node.source==="Auto"&&this.equalsDefaultSiteConfig(e.node.config)){const n=this.siteConfigLookupFor(e.target,e.method);delete n[e.lookupValue]}}equalsDefaultSiteConfig(e){return!(typeof e.preferredEntryUuid=="boolean"||typeof e.preventSaveNotification=="boolean"||typeof e.listMatchingCaseSensitive=="boolean"||e.whiteList||e.blackList)}leastSpecificTarget(e,n){return e==="Domain"||n==="Domain"?"Domain":e==="Host"||n==="Host"?"Host":"Page"}valueFromUrl(e,n){const s=e.host;if(n==="Host")return s;if(n==="Page")return s+e.pathname;if(n==="Domain")return Te.psl.getDomain(s)}addSiteConfigParameters(e,n,s,i,r){const o=this.valueFromUrl(n,s),a=Ie.siteConfigLookupFor(s,i);a[o]||(a[o]={config:new Oi,source:r,matchWeight:100}),Object.assign(a[o].config,e)}}const Ie=new ra;class pt{}pt.MatchedLogins={id:"KeeAddonPanelMatchedLogins",height:300,width:400,name:"matchedLoginsLegacy",autoCloseTime:0,legacy:!0},pt.GeneratePasswordLegacy={id:"KeeAddonPanelGeneratePassword",height:300,width:400,name:"generatePasswordLegacy",autoCloseTime:0,legacy:!0},pt.GeneratePassword={id:"KeeAddonPanelGeneratePassword",height:500,width:450,name:"generatePassword",autoCloseTime:0,legacy:!1};class zt{constructor(e,n,s){this.target=n,this.options=e,this.parentFrameId=s}createPanel(){this.options.name=="generatePassword"&&(this.elementToRefocus=document.activeElement),this.container=document.createElement("div");const e=this.container.attachShadow({mode:"closed"});this.container.id=this.options.id;const n=document.createElement("style");n.textContent=`:host(div) {
            display: block !important;
            position: absolute !important;
            z-index: 2147483647 !important;
        }`,e.appendChild(n),this.target?(this.targetRelativeRect=this.target.getBoundingClientRect(),this.positionPanel()):(this.container.style.setProperty("width",this.options.width+"px","important"),this.container.style.setProperty("height",this.options.height+"px","important"),this.container.style.setProperty("top",(window.innerHeight-this.options.height)/2+window.scrollY+"px","important"),this.container.style.setProperty("left",(window.innerWidth-this.options.width)/2+window.scrollX+"px","important"));const s=document.createElement("iframe");s.setAttribute("sandbox","allow-scripts allow-same-origin"),s.setAttribute("allow",""),s.style.setProperty("width","100%","important"),s.style.setProperty("height","100%","important"),s.style.setProperty("visibility","visible","important"),s.style.setProperty("display","block","important"),s.style.setProperty("position","relative","important"),s.style.setProperty("background-color",Ie.activeTheme==="dark"?"#1e1e1e":"#ffffff","important"),s.setAttribute("scrolling","no"),this.options.legacy?s.style.setProperty("border","none","important"):(s.style.setProperty("border","2px solid #1a466b","important"),s.style.setProperty("border-radius","8px","important")),e.appendChild(s);const i=Oe.extension.getURL(`panels/panels${this.options.legacy?"Legacy":""}.html`);s.src=`${i}?parentFrameId=${this.parentFrameId}&autoCloseTime=${this.options.autoCloseTime}&panel=${this.options.name}&theme=${Ie.activeTheme}`;const r=document.getElementsByTagName("body");if(r&&r.length>0)r[0].appendChild(this.container);else{const o=document.getElementsByTagName("frameset");o&&o.length>0&&o[0].insertAdjacentElement("afterend",this.container)}}updateBoundingClientRect(){const e=this.targetRelativeRect;this.targetRelativeRect=this.target.getBoundingClientRect(),(e.top!=this.targetRelativeRect.top||e.bottom!=this.targetRelativeRect.bottom||e.left!=this.targetRelativeRect.left||e.right!=this.targetRelativeRect.right)&&this.positionPanel()}positionPanel(){const e=this.options.height;let n=e;const s=this.options.width;let i=!1;const r=this.targetRelativeRect.top+window.scrollY,o=this.targetRelativeRect.bottom+window.scrollY,a=this.targetRelativeRect.right-12,l=this.targetRelativeRect.bottom+e;if(l>window.innerHeight){const w=this.targetRelativeRect.top-e;if(w>=0)i=!0;else{const I=l-window.innerHeight,v=-w;I>v?(i=!0,n=e-v):n=e-I}}const c=a-this.targetRelativeRect.left;let d;c<s?d=Math.min(this.targetRelativeRect.left,window.innerWidth-s):d=a-s;const f=i?r-n:o,g=d+window.scrollX;this.container.style.setProperty("width",s+"px","important"),this.container.style.setProperty("height",n+"px","important"),this.container.style.setProperty("top",f+"px","important"),this.container.style.setProperty("left",g+"px","important")}closePanel(){const e=document.getElementById(this.options.id);if(e&&e.parentNode.removeChild(e),this.elementToRefocus)try{this.elementToRefocus.focus()}catch{}}}var Ve=(t=>(t.CloseAllPanels="closeAllPanels",t.DetectForms="detectForms",t.ResetForms="resetForms",t.GetPasswordProfiles="getPasswordProfiles",t.GeneratePassword="generatePassword",t.ManualFill="manualFill",t.Primary="primary",t.ShowMatchedLoginsPanel="showMatchedLoginsPanel",t.PageHide="pageHide",t.OpenKeePass="openkeepass",t.CreateEntry="createEntry",t.UpdateEntry="updateEntry",t))(Ve||{});class oa{constructor(e,n,s,i){this.myPort=e,this.parentFrameId=n,this.formUtils=s,this.createMatchedLoginsPanelNearNode=i,this.fieldsWithIcons=[],this.KEEFOX_ICON_16="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAA7AAAAOwBeShxvQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAOdEVYdFRpdGxlAEtlZSBsb2dvN59B9AAAABB0RVh0QXV0aG9yAEtlZSBWYXVsdGXwy5UAAAH8SURBVDiNhZDfS1NhGMc/z3vOEHea0lgXrkisvArWTUSlF9XFIKj/waugtP+hey/M5vpFN0Eg4UVB0WARSglC0IX2AwwtzdywppYsz862875dzLmDbfTcvd/n8/0+X16JX74Sxgt9AHrYmYhVfTbZ88Z6/SeWVEC/szF1brGvVDT2JRqzVLLUCTl28Xrbtq8LwL76JtU1axLhLTm/2A/A1JFp5txOM5RPSCBgM2ypLrWQSXkID+tqd8jljLMpjvgMRFcY2P+NsPI57WxId8gN+HmwkEl5NoBUuWUsrgIqZnu7xLXol6CBmF1mudIOUDU2aQAFsPoq/RkjGYB5L4KnFXvH04p5zwHAwNP8i/TybgAAYkYBitpieL0XP2D2geH1XorarqG6xgIEP0XiycH3wHGAU+0b3D44h6sthvIJZt3OOvYulx07WTcFuxojjeSlSq3u13KYT6VIAwowewOwttoeIRSC2sx2lIqpY5KPdhx43DLg+8yIK3A/qJ111gmJrtmNvvNx4ka5ZQCA0pIGKho0QET5AAYoVUXf+4ffK6y8HMsBEyVtuQC/dQgfMRjG17J3f/w3AEArc7Oo7fD4r0OMFI6ijShRarQZK81EgHhycBro23lO5rLpC824pg0AxEjjotD0OoDdarFaiT053Lb2VhB/uePn81bcX+xXu7resl9RAAAAAElFTkSuQmCC"}removeKeeIconFromAllFields(){for(const e of this.fieldsWithIcons){const n=e.DOMelement;n&&(n.removeEventListener("click",this),n.removeEventListener("mousemove",this),n.style.setProperty("background-image",""),n.style.setProperty("background-repeat",""),n.style.setProperty("background-attachment",""),n.style.setProperty("background-size",""),n.style.setProperty("background-position",""))}this.fieldsWithIcons=[],this.passwordFields=null,this.otherFields=null}addKeeIconToFields(e,n,s){this.passwordFields=e,this.otherFields=n,s.length>1?this.getLabelledIcon(s.length.toString()):this.afterImageLoaded(this.KEEFOX_ICON_16)}skipField(e){return!this.formUtils.isATextFormFieldType(e.field.type)&&e.field.type!="password"||!e.DOMelement||e.DOMelement instanceof HTMLSelectElement||!e.DOMelement.isConnected||e.DOMelement.maxLength>0&&e.DOMelement.maxLength<=3||e.DOMelement.offsetWidth<50}addIcon(e,n){this.fieldsWithIcons.push(e);const s=e.DOMelement;s.addEventListener("click",this),s.addEventListener("mousemove",this),s.style.setProperty("background-image","url('"+n+"')","important"),s.style.setProperty("background-repeat","no-repeat","important"),s.style.setProperty("background-attachment","scroll","important"),s.style.setProperty("background-size","16px 16px","important"),s.style.setProperty("background-position","calc(100% - 4px) 50%","important"),s.style.setProperty("cursor","auto");const i=window.getComputedStyle(e.DOMelement).getPropertyValue("transition-property");["all","background"].some(r=>i.includes(r))&&e.DOMelement.style.setProperty("transition","none","important"),this.overrideBoxShadows(s)}handleEvent(e){e.type==="click"&&this.showMatchedLoginsPanel(e),e.type==="mousemove"&&this.hoverOverInput(e)}limitFields(e){return e.filter(s=>!this.skipField(s)).sort((s,i)=>s.highestScore===i.highestScore?0:s.highestScore<i.highestScore?1:-1).slice(0,2)}afterImageLoaded(e){const n=this.limitFields(this.passwordFields),s=this.limitFields(this.otherFields);for(const i of n.concat(s))this.addIcon(i,e)}overrideBoxShadows(e){const n=window.getComputedStyle(e);if(n){const s=[];s.push(n.getPropertyValue("box-shadow")),s.push(n.getPropertyValue("-webkit-box-shadow")),s.push(n.getPropertyValue("-moz-box-shadow")),s.some(i=>i.indexOf("inset"))&&(e.style.setProperty("box-shadow","initial","important"),e.style.setProperty("-webkit-box-shadow","initial","important"),e.style.setProperty("-moz-box-shadow","initial","important"))}}showMatchedLoginsPanel(e){const n=e.target.getBoundingClientRect(),s=n.left+n.width-22;e.clientX>s&&n.top<=e.clientY&&e.clientY<=n.bottom&&(this.parentFrameId!==0?this.myPort.postMessage({action:Ve.ShowMatchedLoginsPanel}):this.createMatchedLoginsPanelNearNode(e.target))}hoverOverInput(e){if(e.target.disabled)return;const n=e.target.getBoundingClientRect(),s=n.left+n.width-22;if(e.clientX>s){e.target.style.setProperty("cursor","pointer","important");return}e.target.style.setProperty("cursor","auto")}getLabelledIcon(e){const n=document.createElement("canvas");n.height=16,n.width=16;const s=document.createElement("img");s.addEventListener("load",()=>{const i=n.getContext("2d");i.drawImage(s,0,0),i.fillStyle="white",i.fillRect(6,8,10,8),i.fillStyle="red",i.font="8px Arial",i.fillText(e,7,15),this.afterImageLoaded(n.toDataURL())}),s.src=this.KEEFOX_ICON_16}}class aa{}var Ni=(t=>(t.Event="event",t.Websocket="websocket",t))(Ni||{});class An{constructor(e){this.icon=e.icon||{version:1,iconImageData:""},this.usernameValue=e.usernameValue||"<no username>",this.usernameName=e.usernameName||"<no username>",this.path=e.path||"UNKNOWN PATH",this.title=e.title||"",this.uRLs=e.uRLs||[],this.url=(e==null?void 0:e.url)||"",this.uuid=e.uuid||Te.newGUID(),this.dbFileName=e.dbFileName||"",this.relevanceScore=e.relevanceScore,this.fullDetails=e.fullDetails,this.isPreferredMatch=e.isPreferredMatch}static fromEntry(e){var n,s;return new An({icon:e.icon,usernameValue:(n=Ye.getUsernameField(e))==null?void 0:n.value,usernameName:(s=Ye.getUsernameField(e))==null?void 0:s.name,title:e.title,uRLs:e.URLs,url:e==null?void 0:e.URLs[0],uuid:e.uuid,dbFileName:e.database.fileName,fullDetails:e,isPreferredMatch:e.isPreferredMatch})}static fromKPRPCEntrySummaryDTO(e,n,s){return new An({icon:{version:1,iconImageData:e.iconImageData},usernameValue:e.usernameValue,usernameName:e.usernameName,path:n,title:e.title,uRLs:e.uRLs,url:e==null?void 0:e.uRLs[0],uuid:e.uniqueID,dbFileName:s})}}class Xt{constructor(e){this.title=e.title||"",this.uuid=e.uuid||Te.newGUID(),this.icon=e.icon||{version:1,iconImageData:""},this.path=e.path||"UNKNOWN PATH",this.entrySummaries=e.entrySummaries||[],this.groups=e.groups||[]}static fromKPRPCGroupDTO(e,n){return new Xt({title:e.title,uuid:e.uniqueID,icon:{version:1,iconImageData:e.iconImageData},path:e.path,entrySummaries:e.childLightEntries.map(s=>An.fromKPRPCEntrySummaryDTO(s,e.path,n)),groups:e.childGroups.map(s=>this.fromKPRPCGroupDTO(s,n))})}static containsId(e,n){return!!(e.uuid===n||e.groups&&e.groups.some(s=>Xt.containsId(s,n)))}}class As{constructor(e){this.name=e.name||"",this.fileName=e.fileName||"",this.icon=e.icon||{version:1,iconImageData:""},this.root=e.root||new Xt({}),this.active=e.active||!1,this.sessionType=e.sessionType||Ni.Event,this.sessionFeatures=e.sessionFeatures||[""]}static fromKPRPCDatabaseDTO(e,n,s){return new As({name:e.name,fileName:e.fileName,icon:{version:1,iconImageData:e.iconImageData},root:Xt.fromKPRPCGroupDTO(e.root,e.fileName),active:e.active,sessionType:n,sessionFeatures:s})}}function Xe(t){return Oe.i18n.getMessage(t)||t}function vs(t,e){return Oe.i18n.getMessage(t,e)||t}class Ui{constructor(e){this.id=e.id||"",this.name=e.name||"",this.type=e.type||"",this.query=e.query,this.labels=e.labels,this.autocompleteValues=e.autocompleteValues}}class la{}var xe=(t=>(t.radio="FFTradio",t.username="FFTusername",t.text="FFTtext",t.password="FFTpassword",t.select="FFTselect",t.checkbox="FFTcheckbox",t))(xe||{});class Fe{constructor(e){this.name=e.name||"",this.value=e.value||"",this.resetValue=e.resetValue||"",this.uuid=e.uuid||Te.newGUID(),this.type=e.type||"text",this.locators=e.locators||[]}static getDisplayValueInternal(e,n,s){return e.type==="boolean"?e.value==="KEEFOX_CHECKED_FLAG_TRUE"?Xe("enabled"):Xe("disabled"):e.type==="password"&&!n?s:e.value}static getDisplayValue(e,n){return Fe.getDisplayValueInternal(e,n,"*".repeat(e.value.length))}static getDisplayName(e){return e.name==="KeePass username"?Xe("username"):e.name==="KeePass password"?Xe("password"):e.name?e.name:"[ "+Xe("no_name")+" ]"}static getDisplayTooltip(e,n){return Fe.getDisplayName(e)+": "+Fe.getDisplayValueInternal(e,n,Xe("click_to_reveal_hide"))}static typeFromDOMtype(e){switch(e){case"password":return"password";case"radio":return"existing";case"checkbox":return"boolean";case"select-one":return"existing";default:return"text"}}static combineDomFieldLists(e,n,s){const i=[];return e>=0&&n[e]&&i.push(n[e]),s.forEach(r=>{i.push(r)}),n.forEach((r,o)=>{o!==e&&i.push(r)}),i}static fromDOM(e,n,s){const i=ca(e);return new Fe({uuid:Te.newGUID(),name:i&&i.length?i[0]:e.name,locators:[new Ui({name:e.name,id:e.id,type:n,labels:i,autocompleteValues:ua(e)})],value:s,type:Fe.typeFromDOMtype(n)})}static fromKPRPCFieldDTO(e){let n="text",s="text";switch(e.type){case xe.password:n="password",s="password";break;case xe.radio:n="existing",s="radio";break;case xe.checkbox:n="boolean",s="checkbox";break;case xe.select:n="existing",s="select";break;case xe.username:n="text",s="text";break;case xe.text:n="text",s="text";break}return new Fe({name:e.displayName||e.name,uuid:Te.newGUID(),value:e.value,resetValue:e.value,type:n,locators:[new Ui({id:e.id,name:e.name,type:s})]})}static toKPRPCFieldDTO(e,n){let s;switch(e.locators[0].type){case"password":s=xe.password;break;case"radio":s=xe.radio;break;case"checkbox":s=xe.checkbox;break;case"select-one":s=xe.select;break;default:s=n?xe.username:xe.text;break}return{displayName:e.name,id:e.locators[0].id,name:e.locators[0].name,type:s,value:e.value,page:-1}}}function ca(t){var r,o,a,l;const e=[],n=((r=t.labels)==null?void 0:r.length)||0;for(let c=0;c<n;c++){const d=t.labels[c];d!=null&&d.innerText&&e.push(d.innerText)}const s=(o=t.getAttribute("aria-label"))==null?void 0:o.toLowerCase();s&&e.push(s);const i=[];return(a=t.getAttribute("aria-labelledby"))==null||a.trim().split(" ").forEach(c=>{c&&i.push(c)}),(l=t.getAttribute("aria-describedby"))==null||l.trim().split(" ").forEach(c=>{c&&i.push(c)}),i.forEach(c=>{const d=document.getElementById(c);d!=null&&d.innerText&&e.push(d.innerText)}),e.length?e:void 0}function ua(t){var n,s;const e=[];return(s=(n=t.attributes.autocomplete)==null?void 0:n.value)==null||s.trim().split(" ").forEach(i=>{i&&e.push(i.toLowerCase())}),e.length?e:void 0}class vn{constructor(e){this.title=e.title||"",this.uuid=e.uuid||Te.newGUID(),this.icon=e.icon||{version:1,iconImageData:""},this.path=e.path||"UNKNOWN PATH"}static fromKPRPCGroupSummaryDTO(e){return new vn({title:e.title,uuid:e.uniqueID,icon:{version:1,iconImageData:e.iconImageData},path:e.path})}static fromGroup(e){return new vn({title:e.title,uuid:e.uuid,icon:e.icon,path:e.path})}}class Ye{constructor(e){this.alwaysAutoFill=e.alwaysAutoFill||!1,this.alwaysAutoSubmit=e.alwaysAutoSubmit||!1,this.neverAutoFill=e.neverAutoFill||!1,this.neverAutoSubmit=e.neverAutoSubmit||!1,this.URLs=e.URLs||[],this.fields=e.fields||[],this.httpRealm=e.httpRealm||"",this.parentGroup=e.parentGroup||null,this.uuid=e.uuid||Te.newGUID(),this.title=e.title||"",this.matchAccuracy=e.matchAccuracy||0,this.icon=e.icon||{version:1,iconImageData:""},this.database=e.database||new As({}),this.relevanceScore=e.relevanceScore,this.lowFieldMatchRatio=e.lowFieldMatchRatio,this.formIndex=e.formIndex,this.entryIndex=e.entryIndex,this.isPreferredMatch=e.isPreferredMatch}static getUsernameField(e){return e.fields.find(n=>n.type==="text")}static getPasswordField(e){return e.fields.find(n=>n.type==="password")}static fromKPRPCEntryDTO(e,n){const s=[];let i=1;const r=e.formFieldList.findIndex(c=>c.type===xe.username),o=e.formFieldList.map(c=>(c.page>i&&(i=c.page),Fe.fromKPRPCFieldDTO(c))),a=o.findIndex(c=>c.type==="password");return r>-1&&s.push(o[r]),a>-1&&s.push(o[a]),o.forEach((c,d)=>{d!==r&&d!==a&&s.push(c)}),new Ye({URLs:e.uRLs,neverAutoFill:e.neverAutoFill,alwaysAutoFill:e.alwaysAutoFill,neverAutoSubmit:e.neverAutoSubmit,alwaysAutoSubmit:e.alwaysAutoSubmit,icon:{version:1,iconImageData:e.iconImageData},parentGroup:vn.fromKPRPCGroupSummaryDTO(e.parent),database:n,matchAccuracy:e.matchAccuracy,httpRealm:e.hTTPRealm,uuid:e.uniqueID,title:e.title,fields:s})}static toKPRPCEntryDTO(e){const n=new la;return n.alwaysAutoFill=e.alwaysAutoFill,n.alwaysAutoSubmit=e.alwaysAutoSubmit,n.formFieldList=e.fields.map((s,i)=>Fe.toKPRPCFieldDTO(s,i===0)),n.hTTPRealm=e.httpRealm,n.iconImageData=e.icon.iconImageData,n.neverAutoFill=e.neverAutoFill,n.neverAutoSubmit=e.neverAutoSubmit,n.title=e.title,n.uRLs=e.URLs,n}}function rt(t,e){const n=Object.create(null),s=t.split(",");for(let i=0;i<s.length;i++)n[s[i]]=!0;return e?i=>!!n[i.toLowerCase()]:i=>!!n[i]}function xs(t){if(G(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],i=fe(s)?ga(s):xs(s);if(i)for(const r in i)e[r]=i[r]}return e}else{if(fe(t))return t;if(oe(t))return t}}const fa=/;(?![^(]*\))/g,da=/:([^]+)/,ha=/\/\*.*?\*\//gs;function ga(t){const e={};return t.replace(ha,"").split(fa).forEach(n=>{if(n){const s=n.split(da);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function _s(t){let e="";if(fe(t))e=t;else if(G(t))for(let n=0;n<t.length;n++){const s=_s(t[n]);s&&(e+=s+" ")}else if(oe(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const ma="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",pa="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistanceLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",ba=rt(ma),wa=rt(pa),ya=rt("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function $i(t){return!!t||t===""}const se=Object.freeze({}),Yt=Object.freeze([]),_e=()=>{},ji=()=>!1,Aa=/^on[^a-z]/,Qt=t=>Aa.test(t),xn=t=>t.startsWith("onUpdate:"),ue=Object.assign,Ps=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},va=Object.prototype.hasOwnProperty,Q=(t,e)=>va.call(t,e),G=Array.isArray,kt=t=>_n(t)==="[object Map]",xa=t=>_n(t)==="[object Set]",q=t=>typeof t=="function",fe=t=>typeof t=="string",Ss=t=>typeof t=="symbol",oe=t=>t!==null&&typeof t=="object",Cs=t=>oe(t)&&q(t.then)&&q(t.catch),_a=Object.prototype.toString,_n=t=>_a.call(t),Fs=t=>_n(t).slice(8,-1),Pa=t=>_n(t)==="[object Object]",Es=t=>fe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Pn=rt(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Sa=rt("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),Sn=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},Ca=/-(\w)/g,Dt=Sn(t=>t.replace(Ca,(e,n)=>n?n.toUpperCase():"")),Fa=/\B([A-Z])/g,ot=Sn(t=>t.replace(Fa,"-$1").toLowerCase()),Cn=Sn(t=>t.charAt(0).toUpperCase()+t.slice(1)),bt=Sn(t=>t?`on${Cn(t)}`:""),Zt=(t,e)=>!Object.is(t,e),en=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},Fn=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},Bi=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Vi;const Ki=()=>Vi||(Vi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function En(t,...e){console.warn(`[Vue warn] ${t}`,...e)}let Ee;class Hi{constructor(e=!1){this.detached=e,this.active=!0,this.effects=[],this.cleanups=[],this.parent=Ee,!e&&Ee&&(this.index=(Ee.scopes||(Ee.scopes=[])).push(this)-1)}run(e){if(this.active){const n=Ee;try{return Ee=this,e()}finally{Ee=n}}else En("cannot run an inactive effect scope.")}on(){Ee=this}off(){Ee=this.parent}stop(e){if(this.active){let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this.active=!1}}}function Wi(t){return new Hi(t)}function Ea(t,e=Ee){e&&e.active&&e.effects.push(t)}function La(){return Ee}function Ra(t){Ee?Ee.cleanups.push(t):En("onScopeDispose() is called when there is no active effect scope to be associated with.")}const Ls=t=>{const e=new Set(t);return e.w=0,e.n=0,e},Gi=t=>(t.w&at)>0,qi=t=>(t.n&at)>0,Ia=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=at},Oa=t=>{const{deps:e}=t;if(e.length){let n=0;for(let s=0;s<e.length;s++){const i=e[s];Gi(i)&&!qi(i)?i.delete(t):e[n++]=i,i.w&=~at,i.n&=~at}e.length=n}},Rs=new WeakMap;let tn=0,at=1;const Is=30;let we;const wt=Symbol("iterate"),Os=Symbol("Map key iterate");class Ts{constructor(e,n=null,s){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,Ea(this,s)}run(){if(!this.active)return this.fn();let e=we,n=lt;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=we,we=this,lt=!0,at=1<<++tn,tn<=Is?Ia(this):Ji(this),this.fn()}finally{tn<=Is&&Oa(this),at=1<<--tn,we=this.parent,lt=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){we===this?this.deferStop=!0:this.active&&(Ji(this),this.onStop&&this.onStop(),this.active=!1)}}function Ji(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let lt=!0;const zi=[];function yt(){zi.push(lt),lt=!1}function At(){const t=zi.pop();lt=t===void 0?!0:t}function Le(t,e,n){if(lt&&we){let s=Rs.get(t);s||Rs.set(t,s=new Map);let i=s.get(n);i||s.set(n,i=Ls()),Xi(i,{effect:we,target:t,type:e,key:n})}}function Xi(t,e){let n=!1;tn<=Is?qi(t)||(t.n|=at,n=!Gi(t)):n=!t.has(we),n&&(t.add(we),we.deps.push(t),we.onTrack&&we.onTrack(Object.assign({effect:we},e)))}function Qe(t,e,n,s,i,r){const o=Rs.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&G(t)){const c=Bi(s);o.forEach((d,f)=>{(f==="length"||f>=c)&&a.push(d)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":G(t)?Es(n)&&a.push(o.get("length")):(a.push(o.get(wt)),kt(t)&&a.push(o.get(Os)));break;case"delete":G(t)||(a.push(o.get(wt)),kt(t)&&a.push(o.get(Os)));break;case"set":kt(t)&&a.push(o.get(wt));break}const l={target:t,type:e,key:n,newValue:s,oldValue:i,oldTarget:r};if(a.length===1)a[0]&&Ms(a[0],l);else{const c=[];for(const d of a)d&&c.push(...d);Ms(Ls(c),l)}}function Ms(t,e){const n=G(t)?t:[...t];for(const s of n)s.computed&&Yi(s,e);for(const s of n)s.computed||Yi(s,e)}function Yi(t,e){(t!==we||t.allowRecurse)&&(t.onTrigger&&t.onTrigger(ue({effect:t},e)),t.scheduler?t.scheduler():t.run())}const Ta=rt("__proto__,__v_isRef,__isVue"),Qi=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Ss)),Ma=Ln(),ka=Ln(!1,!0),Da=Ln(!0),Na=Ln(!0,!0),Zi=Ua();function Ua(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const s=J(this);for(let r=0,o=this.length;r<o;r++)Le(s,"get",r+"");const i=s[e](...n);return i===-1||i===!1?s[e](...n.map(J)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){yt();const s=J(this)[e].apply(this,n);return At(),s}}),t}function Ln(t=!1,e=!1){return function(s,i,r){if(i==="__v_isReactive")return!t;if(i==="__v_isReadonly")return t;if(i==="__v_isShallow")return e;if(i==="__v_raw"&&r===(t?e?fr:ur:e?cr:lr).get(s))return s;const o=G(s);if(!t&&o&&Q(Zi,i))return Reflect.get(Zi,i,r);const a=Reflect.get(s,i,r);return(Ss(i)?Qi.has(i):Ta(i))||(t||Le(s,"get",i),e)?a:ae(a)?o&&Es(i)?a:a.value:oe(a)?t?dr(a):Nn(a):a}}const $a=er(),ja=er(!0);function er(t=!1){return function(n,s,i,r){let o=n[s];if(ut(o)&&ae(o)&&!ae(i))return!1;if(!t&&(!$n(i)&&!ut(i)&&(o=J(o),i=J(i)),!G(n)&&ae(o)&&!ae(i)))return o.value=i,!0;const a=G(n)&&Es(s)?Number(s)<n.length:Q(n,s),l=Reflect.set(n,s,i,r);return n===J(r)&&(a?Zt(i,o)&&Qe(n,"set",s,i,o):Qe(n,"add",s,i)),l}}function Ba(t,e){const n=Q(t,e),s=t[e],i=Reflect.deleteProperty(t,e);return i&&n&&Qe(t,"delete",e,void 0,s),i}function Va(t,e){const n=Reflect.has(t,e);return(!Ss(e)||!Qi.has(e))&&Le(t,"has",e),n}function Ka(t){return Le(t,"iterate",G(t)?"length":wt),Reflect.ownKeys(t)}const tr={get:Ma,set:$a,deleteProperty:Ba,has:Va,ownKeys:Ka},nr={get:Da,set(t,e){return En(`Set operation on key "${String(e)}" failed: target is readonly.`,t),!0},deleteProperty(t,e){return En(`Delete operation on key "${String(e)}" failed: target is readonly.`,t),!0}},Ha=ue({},tr,{get:ka,set:ja}),Wa=ue({},nr,{get:Na}),ks=t=>t,Rn=t=>Reflect.getPrototypeOf(t);function In(t,e,n=!1,s=!1){t=t.__v_raw;const i=J(t),r=J(e);n||(e!==r&&Le(i,"get",e),Le(i,"get",r));const{has:o}=Rn(i),a=s?ks:n?Ds:nn;if(o.call(i,e))return a(t.get(e));if(o.call(i,r))return a(t.get(r));t!==i&&t.get(e)}function On(t,e=!1){const n=this.__v_raw,s=J(n),i=J(t);return e||(t!==i&&Le(s,"has",t),Le(s,"has",i)),t===i?n.has(t):n.has(t)||n.has(i)}function Tn(t,e=!1){return t=t.__v_raw,!e&&Le(J(t),"iterate",wt),Reflect.get(t,"size",t)}function sr(t){t=J(t);const e=J(this);return Rn(e).has.call(e,t)||(e.add(t),Qe(e,"add",t,t)),this}function ir(t,e){e=J(e);const n=J(this),{has:s,get:i}=Rn(n);let r=s.call(n,t);r?ar(n,s,t):(t=J(t),r=s.call(n,t));const o=i.call(n,t);return n.set(t,e),r?Zt(e,o)&&Qe(n,"set",t,e,o):Qe(n,"add",t,e),this}function rr(t){const e=J(this),{has:n,get:s}=Rn(e);let i=n.call(e,t);i?ar(e,n,t):(t=J(t),i=n.call(e,t));const r=s?s.call(e,t):void 0,o=e.delete(t);return i&&Qe(e,"delete",t,void 0,r),o}function or(){const t=J(this),e=t.size!==0,n=kt(t)?new Map(t):new Set(t),s=t.clear();return e&&Qe(t,"clear",void 0,void 0,n),s}function Mn(t,e){return function(s,i){const r=this,o=r.__v_raw,a=J(o),l=e?ks:t?Ds:nn;return!t&&Le(a,"iterate",wt),o.forEach((c,d)=>s.call(i,l(c),l(d),r))}}function kn(t,e,n){return function(...s){const i=this.__v_raw,r=J(i),o=kt(r),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=i[t](...s),d=n?ks:e?Ds:nn;return!e&&Le(r,"iterate",l?Os:wt),{next(){const{value:f,done:g}=c.next();return g?{value:f,done:g}:{value:a?[d(f[0]),d(f[1])]:d(f),done:g}},[Symbol.iterator](){return this}}}}function ct(t){return function(...e){{const n=e[0]?`on key "${e[0]}" `:"";console.warn(`${Cn(t)} operation ${n}failed: target is readonly.`,J(this))}return t==="delete"?!1:this}}function Ga(){const t={get(r){return In(this,r)},get size(){return Tn(this)},has:On,add:sr,set:ir,delete:rr,clear:or,forEach:Mn(!1,!1)},e={get(r){return In(this,r,!1,!0)},get size(){return Tn(this)},has:On,add:sr,set:ir,delete:rr,clear:or,forEach:Mn(!1,!0)},n={get(r){return In(this,r,!0)},get size(){return Tn(this,!0)},has(r){return On.call(this,r,!0)},add:ct("add"),set:ct("set"),delete:ct("delete"),clear:ct("clear"),forEach:Mn(!0,!1)},s={get(r){return In(this,r,!0,!0)},get size(){return Tn(this,!0)},has(r){return On.call(this,r,!0)},add:ct("add"),set:ct("set"),delete:ct("delete"),clear:ct("clear"),forEach:Mn(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{t[r]=kn(r,!1,!1),n[r]=kn(r,!0,!1),e[r]=kn(r,!1,!0),s[r]=kn(r,!0,!0)}),[t,n,e,s]}const[qa,Ja,za,Xa]=Ga();function Dn(t,e){const n=e?t?Xa:za:t?Ja:qa;return(s,i,r)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?s:Reflect.get(Q(n,i)&&i in s?n:s,i,r)}const Ya={get:Dn(!1,!1)},Qa={get:Dn(!1,!0)},Za={get:Dn(!0,!1)},el={get:Dn(!0,!0)};function ar(t,e,n){const s=J(n);if(s!==n&&e.call(t,s)){const i=Fs(t);console.warn(`Reactive ${i} contains both the raw and reactive versions of the same object${i==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}const lr=new WeakMap,cr=new WeakMap,ur=new WeakMap,fr=new WeakMap;function tl(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function nl(t){return t.__v_skip||!Object.isExtensible(t)?0:tl(Fs(t))}function Nn(t){return ut(t)?t:Un(t,!1,tr,Ya,lr)}function sl(t){return Un(t,!1,Ha,Qa,cr)}function dr(t){return Un(t,!0,nr,Za,ur)}function Nt(t){return Un(t,!0,Wa,el,fr)}function Un(t,e,n,s,i){if(!oe(t))return console.warn(`value cannot be made reactive: ${String(t)}`),t;if(t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=i.get(t);if(r)return r;const o=nl(t);if(o===0)return t;const a=new Proxy(t,o===2?s:n);return i.set(t,a),a}function Ke(t){return ut(t)?Ke(t.__v_raw):!!(t&&t.__v_isReactive)}function ut(t){return!!(t&&t.__v_isReadonly)}function $n(t){return!!(t&&t.__v_isShallow)}function jn(t){return Ke(t)||ut(t)}function J(t){const e=t&&t.__v_raw;return e?J(e):t}function Me(t){return Fn(t,"__v_skip",!0),t}const nn=t=>oe(t)?Nn(t):t,Ds=t=>oe(t)?dr(t):t;function hr(t){lt&&we&&(t=J(t),Xi(t.dep||(t.dep=Ls()),{target:t,type:"get",key:"value"}))}function gr(t,e){t=J(t),t.dep&&Ms(t.dep,{target:t,type:"set",key:"value",newValue:e})}function ae(t){return!!(t&&t.__v_isRef===!0)}function Ns(t){return il(t,!1)}function il(t,e){return ae(t)?t:new rl(t,e)}class rl{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:J(e),this._value=n?e:nn(e)}get value(){return hr(this),this._value}set value(e){const n=this.__v_isShallow||$n(e)||ut(e);e=n?e:J(e),Zt(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:nn(e),gr(this,e))}}function mr(t){return ae(t)?t.value:t}const ol={get:(t,e,n)=>mr(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const i=t[e];return ae(i)&&!ae(n)?(i.value=n,!0):Reflect.set(t,e,n,s)}};function pr(t){return Ke(t)?t:new Proxy(t,ol)}function br(t){jn(t)||console.warn("toRefs() expects a reactive object but received a plain one.");const e=G(t)?new Array(t.length):{};for(const n in t)e[n]=Bn(t,n);return e}class al{constructor(e,n,s){this._object=e,this._key=n,this._defaultValue=s,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}}function Bn(t,e,n){const s=t[e];return ae(s)?s:new al(t,e,n)}var wr;class ll{constructor(e,n,s,i){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[wr]=!1,this._dirty=!0,this.effect=new Ts(e,()=>{this._dirty||(this._dirty=!0,gr(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=s}get value(){const e=J(this);return hr(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}wr="__v_isReadonly";function cl(t,e,n=!1){let s,i;const r=q(t);r?(s=t,i=()=>{console.warn("Write operation failed: computed value is readonly")}):(s=t.get,i=t.set);const o=new ll(s,i,r||!i,n);return e&&!n&&(o.effect.onTrack=e.onTrack,o.effect.onTrigger=e.onTrigger),o}const vt=[];function Vn(t){vt.push(t)}function Kn(){vt.pop()}function C(t,...e){yt();const n=vt.length?vt[vt.length-1].component:null,s=n&&n.appContext.config.warnHandler,i=ul();if(s)Ze(s,n,11,[t+e.join(""),n&&n.proxy,i.map(({vnode:r})=>`at <${is(n,r.type)}>`).join(`
`),i]);else{const r=[`[Vue warn]: ${t}`,...e];i.length&&r.push(`
`,...fl(i)),console.warn(...r)}At()}function ul(){let t=vt[vt.length-1];if(!t)return[];const e=[];for(;t;){const n=e[0];n&&n.vnode===t?n.recurseCount++:e.push({vnode:t,recurseCount:0});const s=t.component&&t.component.parent;t=s&&s.vnode}return e}function fl(t){const e=[];return t.forEach((n,s)=>{e.push(...s===0?[]:[`
`],...dl(n))}),e}function dl({vnode:t,recurseCount:e}){const n=e>0?`... (${e} recursive calls)`:"",s=t.component?t.component.parent==null:!1,i=` at <${is(t.component,t.type,s)}`,r=">"+n;return t.props?[i,...hl(t.props),r]:[i+r]}function hl(t){const e=[],n=Object.keys(t);return n.slice(0,3).forEach(s=>{e.push(...yr(s,t[s]))}),n.length>3&&e.push(" ..."),e}function yr(t,e,n){return fe(e)?(e=JSON.stringify(e),n?e:[`${t}=${e}`]):typeof e=="number"||typeof e=="boolean"||e==null?n?e:[`${t}=${e}`]:ae(e)?(e=yr(t,J(e.value),!0),n?e:[`${t}=Ref<`,e,">"]):q(e)?[`${t}=fn${e.name?`<${e.name}>`:""}`]:(e=J(e),n?e:[`${t}=`,e])}const Us={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",[0]:"setup function",[1]:"render function",[2]:"watcher getter",[3]:"watcher callback",[4]:"watcher cleanup function",[5]:"native event handler",[6]:"component event handler",[7]:"vnode hook",[8]:"directive hook",[9]:"transition hook",[10]:"app errorHandler",[11]:"app warnHandler",[12]:"ref function",[13]:"async component loader",[14]:"scheduler flush. This is likely a Vue internals bug. Please open an issue at https://new-issue.vuejs.org/?repo=vuejs/core"};function Ze(t,e,n,s){let i;try{i=s?t(...s):t()}catch(r){Hn(r,e,n)}return i}function ke(t,e,n,s){if(q(t)){const r=Ze(t,e,n,s);return r&&Cs(r)&&r.catch(o=>{Hn(o,e,n)}),r}const i=[];for(let r=0;r<t.length;r++)i.push(ke(t[r],e,n,s));return i}function Hn(t,e,n,s=!0){const i=e?e.vnode:null;if(e){let r=e.parent;const o=e.proxy,a=Us[n];for(;r;){const c=r.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](t,o,a)===!1)return}r=r.parent}const l=e.appContext.config.errorHandler;if(l){Ze(l,null,10,[t,o,a]);return}}gl(t,n,i,s)}function gl(t,e,n,s=!0){{const i=Us[e];if(n&&Vn(n),C(`Unhandled error${i?` during execution of ${i}`:""}`),n&&Kn(),s)throw t;console.error(t)}}let sn=!1,$s=!1;const pe=[];let He=0;const Ut=[];let We=null,ft=0;const Ar=Promise.resolve();let js=null;const ml=100;function Bs(t){const e=js||Ar;return t?e.then(this?t.bind(this):t):e}function pl(t){let e=He+1,n=pe.length;for(;e<n;){const s=e+n>>>1;rn(pe[s])<t?e=s+1:n=s}return e}function Wn(t){(!pe.length||!pe.includes(t,sn&&t.allowRecurse?He+1:He))&&(t.id==null?pe.push(t):pe.splice(pl(t.id),0,t),vr())}function vr(){!sn&&!$s&&($s=!0,js=Ar.then(Sr))}function bl(t){const e=pe.indexOf(t);e>He&&pe.splice(e,1)}function xr(t){G(t)?Ut.push(...t):(!We||!We.includes(t,t.allowRecurse?ft+1:ft))&&Ut.push(t),vr()}function _r(t,e=sn?He+1:0){for(t=t||new Map;e<pe.length;e++){const n=pe[e];if(n&&n.pre){if(Vs(t,n))continue;pe.splice(e,1),e--,n()}}}function Pr(t){if(Ut.length){const e=[...new Set(Ut)];if(Ut.length=0,We){We.push(...e);return}for(We=e,t=t||new Map,We.sort((n,s)=>rn(n)-rn(s)),ft=0;ft<We.length;ft++)Vs(t,We[ft])||We[ft]();We=null,ft=0}}const rn=t=>t.id==null?1/0:t.id,wl=(t,e)=>{const n=rn(t)-rn(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function Sr(t){$s=!1,sn=!0,t=t||new Map,pe.sort(wl);const e=n=>Vs(t,n);try{for(He=0;He<pe.length;He++){const n=pe[He];if(n&&n.active!==!1){if(e(n))continue;Ze(n,null,14)}}}finally{He=0,pe.length=0,Pr(t),sn=!1,js=null,(pe.length||Ut.length)&&Sr(t)}}function Vs(t,e){if(!t.has(e))t.set(e,1);else{const n=t.get(e);if(n>ml){const s=e.ownerInstance,i=s&&co(s.type);return C(`Maximum recursive updates exceeded${i?` in component <${i}>`:""}. This means you have a reactive effect that is mutating its own dependencies and thus recursively triggering itself. Possible sources include component template, render function, updated hook or watcher source function.`),!0}else t.set(e,n+1)}}let xt=!1;const $t=new Set;Ki().__VUE_HMR_RUNTIME__={createRecord:Ks(Cr),rerender:Ks(vl),reload:Ks(xl)};const _t=new Map;function yl(t){const e=t.type.__hmrId;let n=_t.get(e);n||(Cr(e,t.type),n=_t.get(e)),n.instances.add(t)}function Al(t){_t.get(t.type.__hmrId).instances.delete(t)}function Cr(t,e){return _t.has(t)?!1:(_t.set(t,{initialDef:on(e),instances:new Set}),!0)}function on(t){return uo(t)?t.__vccOpts:t}function vl(t,e){const n=_t.get(t);n&&(n.initialDef.render=e,[...n.instances].forEach(s=>{e&&(s.render=e,on(s.type).render=e),s.renderCache=[],xt=!0,s.update(),xt=!1}))}function xl(t,e){const n=_t.get(t);if(!n)return;e=on(e),Fr(n.initialDef,e);const s=[...n.instances];for(const i of s){const r=on(i.type);$t.has(r)||(r!==n.initialDef&&Fr(r,e),$t.add(r)),i.appContext.optionsCache.delete(i.type),i.ceReload?($t.add(r),i.ceReload(e.styles),$t.delete(r)):i.parent?Wn(i.parent.update):i.appContext.reload?i.appContext.reload():typeof window<"u"?window.location.reload():console.warn("[HMR] Root or manually mounted instance modified. Full reload required.")}xr(()=>{for(const i of s)$t.delete(on(i.type))})}function Fr(t,e){ue(t,e);for(const n in t)n!=="__file"&&!(n in e)&&delete t[n]}function Ks(t){return(e,n)=>{try{return t(e,n)}catch(s){console.error(s),console.warn("[HMR] Something went wrong during Vue component hot-reload. Full reload required.")}}}let Ge,an=[],Hs=!1;function ln(t,...e){Ge?Ge.emit(t,...e):Hs||an.push({event:t,args:e})}function Er(t,e){var n,s;Ge=t,Ge?(Ge.enabled=!0,an.forEach(({event:i,args:r})=>Ge.emit(i,...r)),an=[]):typeof window<"u"&&window.HTMLElement&&!(!((s=(n=window.navigator)===null||n===void 0?void 0:n.userAgent)===null||s===void 0)&&s.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(r=>{Er(r,e)}),setTimeout(()=>{Ge||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,Hs=!0,an=[])},3e3)):(Hs=!0,an=[])}function _l(t,e){ln("app:init",t,e,{Fragment:qe,Text:dn,Comment:De,Static:ts})}function Pl(t){ln("app:unmount",t)}const Sl=Ws("component:added"),Lr=Ws("component:updated"),Cl=Ws("component:removed"),Fl=t=>{Ge&&typeof Ge.cleanupBuffer=="function"&&!Ge.cleanupBuffer(t)&&Cl(t)};function Ws(t){return e=>{ln(t,e.appContext.app,e.uid,e.parent?e.parent.uid:void 0,e)}}const El=Rr("perf:start"),Ll=Rr("perf:end");function Rr(t){return(e,n,s)=>{ln(t,e.appContext.app,e.uid,e,n,s)}}function Rl(t,e,n){ln("component:emit",t.appContext.app,t,e,n)}function Il(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||se;{const{emitsOptions:d,propsOptions:[f]}=t;if(d)if(!(e in d))(!f||!(bt(e)in f))&&C(`Component emitted event "${e}" but it is neither declared in the emits option nor as an "${bt(e)}" prop.`);else{const g=d[e];q(g)&&(g(...n)||C(`Invalid event arguments: event validation failed for event "${e}".`))}}let i=n;const r=e.startsWith("update:"),o=r&&e.slice(7);if(o&&o in s){const d=`${o==="modelValue"?"model":o}Modifiers`,{number:f,trim:g}=s[d]||se;g&&(i=n.map(w=>fe(w)?w.trim():w)),f&&(i=n.map(Bi))}Rl(t,e,i);{const d=e.toLowerCase();d!==e&&s[bt(d)]&&C(`Event "${d}" is emitted in component ${is(t,t.type)} but the handler is registered for "${e}". Note that HTML attributes are case-insensitive and you cannot use v-on to listen to camelCase events when using in-DOM templates. You should probably use "${ot(e)}" instead of "${e}".`)}let a,l=s[a=bt(e)]||s[a=bt(Dt(e))];!l&&r&&(l=s[a=bt(ot(e))]),l&&ke(l,t,6,i);const c=s[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,ke(c,t,6,i)}}function Ir(t,e,n=!1){const s=e.emitsCache,i=s.get(t);if(i!==void 0)return i;const r=t.emits;let o={},a=!1;if(!q(t)){const l=c=>{const d=Ir(c,e,!0);d&&(a=!0,ue(o,d))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!r&&!a?(oe(t)&&s.set(t,null),null):(G(r)?r.forEach(l=>o[l]=null):ue(o,r),oe(t)&&s.set(t,o),o)}function Gn(t,e){return!t||!Qt(e)?!1:(e=e.slice(2).replace(/Once$/,""),Q(t,e[0].toLowerCase()+e.slice(1))||Q(t,ot(e))||Q(t,e))}let Re=null,Or=null;function qn(t){const e=Re;return Re=t,Or=t&&t.type.__scopeId||null,e}function Ol(t,e=Re,n){if(!e||t._n)return t;const s=(...i)=>{s._d&&so(-1);const r=qn(e);let o;try{o=t(...i)}finally{qn(r),s._d&&so(1)}return Lr(e),o};return s._n=!0,s._c=!0,s._d=!0,s}let Gs=!1;function Jn(){Gs=!0}function qs(t){const{type:e,vnode:n,proxy:s,withProxy:i,props:r,propsOptions:[o],slots:a,attrs:l,emit:c,render:d,renderCache:f,data:g,setupState:w,ctx:I,inheritAttrs:v}=t;let O,$;const K=qn(t);Gs=!1;try{if(n.shapeFlag&4){const Y=i||s;O=Ne(d.call(Y,Y,f,r,w,g,I)),$=l}else{const Y=e;l===r&&Jn(),O=Ne(Y.length>1?Y(r,{get attrs(){return Jn(),l},slots:a,emit:c}):Y(r,null)),$=e.props?l:Ml(l)}}catch(Y){Hn(Y,t,1),O=Et(De)}let W=O,k;if(O.patchFlag>0&&O.patchFlag&2048&&([W,k]=Tl(O)),$&&v!==!1){const Y=Object.keys($),{shapeFlag:re}=W;if(Y.length){if(re&7)o&&Y.some(xn)&&($=kl($,o)),W=ht(W,$);else if(!Gs&&W.type!==De){const N=Object.keys(l),L=[],m=[];for(let y=0,p=N.length;y<p;y++){const E=N[y];Qt(E)?xn(E)||L.push(E[2].toLowerCase()+E.slice(3)):m.push(E)}m.length&&C(`Extraneous non-props attributes (${m.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text root nodes.`),L.length&&C(`Extraneous non-emits event listeners (${L.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text root nodes. If the listener is intended to be a component custom event listener only, declare it using the "emits" option.`)}}}return n.dirs&&(Mr(W)||C("Runtime directive used on component with non-element root node. The directives will not function as intended."),W=ht(W),W.dirs=W.dirs?W.dirs.concat(n.dirs):n.dirs),n.transition&&(Mr(W)||C("Component inside <Transition> renders non-element root node that cannot be animated."),W.transition=n.transition),k?k(W):O=W,qn(K),O}const Tl=t=>{const e=t.children,n=t.dynamicChildren,s=Tr(e);if(!s)return[t,void 0];const i=e.indexOf(s),r=n?n.indexOf(s):-1,o=a=>{e[i]=a,n&&(r>-1?n[r]=a:a.patchFlag>0&&(t.dynamicChildren=[...n,a]))};return[Ne(s),o]};function Tr(t){let e;for(let n=0;n<t.length;n++){const s=t[n];if(oi(s)){if(s.type!==De||s.children==="v-if"){if(e)return;e=s}}else return}return e}const Ml=t=>{let e;for(const n in t)(n==="class"||n==="style"||Qt(n))&&((e||(e={}))[n]=t[n]);return e},kl=(t,e)=>{const n={};for(const s in t)(!xn(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n},Mr=t=>t.shapeFlag&7||t.type===De;function Dl(t,e,n){const{props:s,children:i,component:r}=t,{props:o,children:a,patchFlag:l}=e,c=r.emitsOptions;if((i||a)&&xt||e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?kr(s,o,c):!!o;if(l&8){const d=e.dynamicProps;for(let f=0;f<d.length;f++){const g=d[f];if(o[g]!==s[g]&&!Gn(c,g))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?kr(s,o,c):!0:!!o;return!1}function kr(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let i=0;i<s.length;i++){const r=s[i];if(e[r]!==t[r]&&!Gn(n,r))return!0}return!1}function Nl({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const Ul=t=>t.__isSuspense;function $l(t,e){e&&e.pendingBranch?G(t)?e.effects.push(...t):e.effects.push(t):xr(t)}function jl(t,e){if(!he)C("provide() can only be used inside setup().");else{let n=he.provides;const s=he.parent&&he.parent.provides;s===n&&(n=he.provides=Object.create(s)),n[t]=e}}function cn(t,e,n=!1){const s=he||Re;if(s){const i=s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&q(e)?e.call(s.proxy):e;C(`injection "${String(t)}" not found.`)}else C("inject() can only be used inside setup() or functional components.")}const zn={};function un(t,e,n){return q(e)||C("`watch(fn, options?)` signature has been moved to a separate API. Use `watchEffect(fn, options?)` instead. `watch` now only supports `watch(source, cb, options?) signature."),Dr(t,e,n)}function Dr(t,e,{immediate:n,deep:s,flush:i,onTrack:r,onTrigger:o}=se){e||(n!==void 0&&C('watch() "immediate" option is only respected when using the watch(source, callback, options?) signature.'),s!==void 0&&C('watch() "deep" option is only respected when using the watch(source, callback, options?) signature.'));const a=k=>{C("Invalid watch source: ",k,"A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.")},l=he;let c,d=!1,f=!1;if(ae(t)?(c=()=>t.value,d=$n(t)):Ke(t)?(c=()=>t,s=!0):G(t)?(f=!0,d=t.some(k=>Ke(k)||$n(k)),c=()=>t.map(k=>{if(ae(k))return k.value;if(Ke(k))return jt(k);if(q(k))return Ze(k,l,2);a(k)})):q(t)?e?c=()=>Ze(t,l,2):c=()=>{if(!(l&&l.isUnmounted))return g&&g(),ke(t,l,3,[w])}:(c=_e,a(t)),e&&s){const k=c;c=()=>jt(k())}let g,w=k=>{g=K.onStop=()=>{Ze(k,l,4)}},I;if(gn)if(w=_e,e?n&&ke(e,l,3,[c(),f?[]:void 0,w]):c(),i==="sync"){const k=Jc();I=k.__watcherHandles||(k.__watcherHandles=[])}else return _e;let v=f?new Array(t.length).fill(zn):zn;const O=()=>{if(K.active)if(e){const k=K.run();(s||d||(f?k.some((Y,re)=>Zt(Y,v[re])):Zt(k,v)))&&(g&&g(),ke(e,l,3,[k,v===zn?void 0:f&&v[0]===zn?[]:v,w]),v=k)}else K.run()};O.allowRecurse=!!e;let $;i==="sync"?$=O:i==="post"?$=()=>Pe(O,l&&l.suspense):(O.pre=!0,l&&(O.id=l.uid),$=()=>Wn(O));const K=new Ts(c,$);K.onTrack=r,K.onTrigger=o,e?n?O():v=K.run():i==="post"?Pe(K.run.bind(K),l&&l.suspense):K.run();const W=()=>{K.stop(),l&&l.scope&&Ps(l.scope.effects,K)};return I&&I.push(W),W}function Bl(t,e,n){const s=this.proxy,i=fe(t)?t.includes(".")?Nr(s,t):()=>s[t]:t.bind(s,s);let r;q(e)?r=e:(r=e.handler,n=e);const o=he;Vt(this);const a=Dr(i,r.bind(s),n);return o?Vt(o):Lt(),a}function Nr(t,e){const n=e.split(".");return()=>{let s=t;for(let i=0;i<n.length&&s;i++)s=s[n[i]];return s}}function jt(t,e){if(!oe(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),ae(t))jt(t.value,e);else if(G(t))for(let n=0;n<t.length;n++)jt(t[n],e);else if(xa(t)||kt(t))t.forEach(n=>{jt(n,e)});else if(Pa(t))for(const n in t)jt(t[n],e);return t}function Vl(t){return q(t)?{setup:t,name:t.name}:t}const Xn=t=>!!t.type.__asyncLoader,Js=t=>t.type.__isKeepAlive;function Kl(t,e){Ur(t,"a",e)}function Hl(t,e){Ur(t,"da",e)}function Ur(t,e,n=he){const s=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Yn(e,s,n),n){let i=n.parent;for(;i&&i.parent;)Js(i.parent.vnode)&&Wl(s,e,n,i),i=i.parent}}function Wl(t,e,n,s){const i=Yn(e,t,s,!0);$r(()=>{Ps(s[e],i)},n)}function Yn(t,e,n=he,s=!1){if(n){const i=n[t]||(n[t]=[]),r=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;yt(),Vt(n);const a=ke(e,n,t,o);return Lt(),At(),a});return s?i.unshift(r):i.push(r),r}else{const i=bt(Us[t].replace(/ hook$/,""));C(`${i} is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.`)}}const et=t=>(e,n=he)=>(!gn||t==="sp")&&Yn(t,(...s)=>e(...s),n),Gl=et("bm"),ql=et("m"),Jl=et("bu"),zl=et("u"),Xl=et("bum"),$r=et("um"),Yl=et("sp"),Ql=et("rtg"),Zl=et("rtc");function ec(t,e=he){Yn("ec",t,e)}function jr(t){Sa(t)&&C("Do not use built-in directive ids as custom directive id: "+t)}function Pt(t,e,n,s){const i=t.dirs,r=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];r&&(a.oldValue=r[o].value);let l=a.dir[s];l&&(yt(),ke(l,n,8,[t.el,a,t,e]),At())}}const tc=Symbol(),zs=t=>t?oo(t)?ui(t)||t.proxy:zs(t.parent):null,St=ue(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>Nt(t.props),$attrs:t=>Nt(t.attrs),$slots:t=>Nt(t.slots),$refs:t=>Nt(t.refs),$parent:t=>zs(t.parent),$root:t=>zs(t.root),$emit:t=>t.emit,$options:t=>Zs(t),$forceUpdate:t=>t.f||(t.f=()=>Wn(t.update)),$nextTick:t=>t.n||(t.n=Bs.bind(t.proxy)),$watch:t=>Bl.bind(t)}),Xs=t=>t==="_"||t==="$",Ys=(t,e)=>t!==se&&!t.__isScriptSetup&&Q(t,e),Br={get({_:t},e){const{ctx:n,setupState:s,data:i,props:r,accessCache:o,type:a,appContext:l}=t;if(e==="__isVue")return!0;let c;if(e[0]!=="$"){const w=o[e];if(w!==void 0)switch(w){case 1:return s[e];case 2:return i[e];case 4:return n[e];case 3:return r[e]}else{if(Ys(s,e))return o[e]=1,s[e];if(i!==se&&Q(i,e))return o[e]=2,i[e];if((c=t.propsOptions[0])&&Q(c,e))return o[e]=3,r[e];if(n!==se&&Q(n,e))return o[e]=4,n[e];Qs&&(o[e]=0)}}const d=St[e];let f,g;if(d)return e==="$attrs"&&(Le(t,"get",e),Jn()),d(t);if((f=a.__cssModules)&&(f=f[e]))return f;if(n!==se&&Q(n,e))return o[e]=4,n[e];if(g=l.config.globalProperties,Q(g,e))return g[e];Re&&(!fe(e)||e.indexOf("__v")!==0)&&(i!==se&&Xs(e[0])&&Q(i,e)?C(`Property ${JSON.stringify(e)} must be accessed via $data because it starts with a reserved character ("$" or "_") and is not proxied on the render context.`):t===Re&&C(`Property ${JSON.stringify(e)} was accessed during render but is not defined on instance.`))},set({_:t},e,n){const{data:s,setupState:i,ctx:r}=t;return Ys(i,e)?(i[e]=n,!0):i.__isScriptSetup&&Q(i,e)?(C(`Cannot mutate <script setup> binding "${e}" from Options API.`),!1):s!==se&&Q(s,e)?(s[e]=n,!0):Q(t.props,e)?(C(`Attempting to mutate prop "${e}". Props are readonly.`),!1):e[0]==="$"&&e.slice(1)in t?(C(`Attempting to mutate public property "${e}". Properties starting with $ are reserved and readonly.`),!1):(e in t.appContext.config.globalProperties?Object.defineProperty(r,e,{enumerable:!0,configurable:!0,value:n}):r[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:i,propsOptions:r}},o){let a;return!!n[o]||t!==se&&Q(t,o)||Ys(e,o)||(a=r[0])&&Q(a,o)||Q(s,o)||Q(St,o)||Q(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Q(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};Br.ownKeys=t=>(C("Avoid app logic that relies on enumerating keys on a component instance. The keys will be empty in production mode to avoid performance overhead."),Reflect.ownKeys(t));function nc(t){const e={};return Object.defineProperty(e,"_",{configurable:!0,enumerable:!1,get:()=>t}),Object.keys(St).forEach(n=>{Object.defineProperty(e,n,{configurable:!0,enumerable:!1,get:()=>St[n](t),set:_e})}),e}function sc(t){const{ctx:e,propsOptions:[n]}=t;n&&Object.keys(n).forEach(s=>{Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>t.props[s],set:_e})})}function ic(t){const{ctx:e,setupState:n}=t;Object.keys(J(n)).forEach(s=>{if(!n.__isScriptSetup){if(Xs(s[0])){C(`setup() return property ${JSON.stringify(s)} should not start with "$" or "_" which are reserved prefixes for Vue internals.`);return}Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>n[s],set:_e})}})}function rc(){const t=Object.create(null);return(e,n)=>{t[n]?C(`${e} property "${n}" is already defined in ${t[n]}.`):t[n]=e}}let Qs=!0;function oc(t){const e=Zs(t),n=t.proxy,s=t.ctx;Qs=!1,e.beforeCreate&&Vr(e.beforeCreate,t,"bc");const{data:i,computed:r,methods:o,watch:a,provide:l,inject:c,created:d,beforeMount:f,mounted:g,beforeUpdate:w,updated:I,activated:v,deactivated:O,beforeDestroy:$,beforeUnmount:K,destroyed:W,unmounted:k,render:Y,renderTracked:re,renderTriggered:N,errorCaptured:L,serverPrefetch:m,expose:y,inheritAttrs:p,components:E,directives:H,filters:ce}=e,j=rc();{const[T]=t.propsOptions;if(T)for(const X in T)j("Props",X)}if(c&&ac(c,s,j,t.appContext.config.unwrapInjectedRef),o)for(const T in o){const X=o[T];q(X)?(Object.defineProperty(s,T,{value:X.bind(n),configurable:!0,enumerable:!0,writable:!0}),j("Methods",T)):C(`Method "${T}" has type "${typeof X}" in the component definition. Did you reference the function correctly?`)}if(i){q(i)||C("The data option must be a function. Plain object usage is no longer supported.");const T=i.call(n,n);if(Cs(T)&&C("data() returned a Promise - note data() cannot be async; If you intend to perform data fetching before component renders, use async setup() + <Suspense>."),!oe(T))C("data() should return an object.");else{t.data=Nn(T);for(const X in T)j("Data",X),Xs(X[0])||Object.defineProperty(s,X,{configurable:!0,enumerable:!0,get:()=>T[X],set:_e})}}if(Qs=!0,r)for(const T in r){const X=r[T],V=q(X)?X.bind(n,n):q(X.get)?X.get.bind(n,n):_e;V===_e&&C(`Computed property "${T}" has no getter.`);const te=!q(X)&&q(X.set)?X.set.bind(n):()=>{C(`Write operation failed: computed property "${T}" is readonly.`)},Ae=fi({get:V,set:te});Object.defineProperty(s,T,{enumerable:!0,configurable:!0,get:()=>Ae.value,set:Gt=>Ae.value=Gt}),j("Computed",T)}if(a)for(const T in a)Kr(a[T],s,n,T);if(l){const T=q(l)?l.call(n):l;Reflect.ownKeys(T).forEach(X=>{jl(X,T[X])})}d&&Vr(d,t,"c");function Z(T,X){G(X)?X.forEach(V=>T(V.bind(n))):X&&T(X.bind(n))}if(Z(Gl,f),Z(ql,g),Z(Jl,w),Z(zl,I),Z(Kl,v),Z(Hl,O),Z(ec,L),Z(Zl,re),Z(Ql,N),Z(Xl,K),Z($r,k),Z(Yl,m),G(y))if(y.length){const T=t.exposed||(t.exposed={});y.forEach(X=>{Object.defineProperty(T,X,{get:()=>n[X],set:V=>n[X]=V})})}else t.exposed||(t.exposed={});Y&&t.render===_e&&(t.render=Y),p!=null&&(t.inheritAttrs=p),E&&(t.components=E),H&&(t.directives=H)}function ac(t,e,n=_e,s=!1){G(t)&&(t=ei(t));for(const i in t){const r=t[i];let o;oe(r)?"default"in r?o=cn(r.from||i,r.default,!0):o=cn(r.from||i):o=cn(r),ae(o)?s?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):(C(`injected property "${i}" is a ref and will be auto-unwrapped and no longer needs \`.value\` in the next minor release. To opt-in to the new behavior now, set \`app.config.unwrapInjectedRef = true\` (this config is temporary and will not be needed in the future.)`),e[i]=o):e[i]=o,n("Inject",i)}}function Vr(t,e,n){ke(G(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function Kr(t,e,n,s){const i=s.includes(".")?Nr(n,s):()=>n[s];if(fe(t)){const r=e[t];q(r)?un(i,r):C(`Invalid watch handler specified by key "${t}"`,r)}else if(q(t))un(i,t.bind(n));else if(oe(t))if(G(t))t.forEach(r=>Kr(r,e,n,s));else{const r=q(t.handler)?t.handler.bind(n):e[t.handler];q(r)?un(i,r,t):C(`Invalid watch handler specified by key "${t.handler}"`,r)}else C(`Invalid watch option: "${s}"`,t)}function Zs(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=t.appContext,a=r.get(e);let l;return a?l=a:!i.length&&!n&&!s?l=e:(l={},i.length&&i.forEach(c=>Qn(l,c,o,!0)),Qn(l,e,o)),oe(e)&&r.set(e,l),l}function Qn(t,e,n,s=!1){const{mixins:i,extends:r}=e;r&&Qn(t,r,n,!0),i&&i.forEach(o=>Qn(t,o,n,!0));for(const o in e)if(s&&o==="expose")C('"expose" option is ignored when declared in mixins or extends. It should only be declared in the base component itself.');else{const a=lc[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const lc={data:Hr,props:Ct,emits:Ct,methods:Ct,computed:Ct,beforeCreate:ye,created:ye,beforeMount:ye,mounted:ye,beforeUpdate:ye,updated:ye,beforeDestroy:ye,beforeUnmount:ye,destroyed:ye,unmounted:ye,activated:ye,deactivated:ye,errorCaptured:ye,serverPrefetch:ye,components:Ct,directives:Ct,watch:uc,provide:Hr,inject:cc};function Hr(t,e){return e?t?function(){return ue(q(t)?t.call(this,this):t,q(e)?e.call(this,this):e)}:e:t}function cc(t,e){return Ct(ei(t),ei(e))}function ei(t){if(G(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function ye(t,e){return t?[...new Set([].concat(t,e))]:e}function Ct(t,e){return t?ue(ue(Object.create(null),t),e):e}function uc(t,e){if(!t)return e;if(!e)return t;const n=ue(Object.create(null),t);for(const s in e)n[s]=ye(t[s],e[s]);return n}function fc(t,e,n,s=!1){const i={},r={};Fn(r,ns,1),t.propsDefaults=Object.create(null),Wr(t,e,i,r);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);Xr(e||{},i,t),n?t.props=s?i:sl(i):t.type.props?t.props=i:t.props=r,t.attrs=r}function dc(t){for(;t;){if(t.type.__hmrId)return!0;t=t.parent}}function hc(t,e,n,s){const{props:i,attrs:r,vnode:{patchFlag:o}}=t,a=J(i),[l]=t.propsOptions;let c=!1;if(!dc(t)&&(s||o>0)&&!(o&16)){if(o&8){const d=t.vnode.dynamicProps;for(let f=0;f<d.length;f++){let g=d[f];if(Gn(t.emitsOptions,g))continue;const w=e[g];if(l)if(Q(r,g))w!==r[g]&&(r[g]=w,c=!0);else{const I=Dt(g);i[I]=ti(l,a,I,w,t,!1)}else w!==r[g]&&(r[g]=w,c=!0)}}}else{Wr(t,e,i,r)&&(c=!0);let d;for(const f in a)(!e||!Q(e,f)&&((d=ot(f))===f||!Q(e,d)))&&(l?n&&(n[f]!==void 0||n[d]!==void 0)&&(i[f]=ti(l,a,f,void 0,t,!0)):delete i[f]);if(r!==a)for(const f in r)(!e||!Q(e,f))&&(delete r[f],c=!0)}c&&Qe(t,"set","$attrs"),Xr(e||{},i,t)}function Wr(t,e,n,s){const[i,r]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(Pn(l))continue;const c=e[l];let d;i&&Q(i,d=Dt(l))?!r||!r.includes(d)?n[d]=c:(a||(a={}))[d]=c:Gn(t.emitsOptions,l)||(!(l in s)||c!==s[l])&&(s[l]=c,o=!0)}if(r){const l=J(n),c=a||se;for(let d=0;d<r.length;d++){const f=r[d];n[f]=ti(i,l,f,c[f],t,!Q(c,f))}}return o}function ti(t,e,n,s,i,r){const o=t[n];if(o!=null){const a=Q(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&q(l)){const{propsDefaults:c}=i;n in c?s=c[n]:(Vt(i),s=c[n]=l.call(null,e),Lt())}else s=l}o[0]&&(r&&!a?s=!1:o[1]&&(s===""||s===ot(n))&&(s=!0))}return s}function Gr(t,e,n=!1){const s=e.propsCache,i=s.get(t);if(i)return i;const r=t.props,o={},a=[];let l=!1;if(!q(t)){const d=f=>{l=!0;const[g,w]=Gr(f,e,!0);ue(o,g),w&&a.push(...w)};!n&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!r&&!l)return oe(t)&&s.set(t,Yt),Yt;if(G(r))for(let d=0;d<r.length;d++){fe(r[d])||C("props must be strings when using array syntax.",r[d]);const f=Dt(r[d]);qr(f)&&(o[f]=se)}else if(r){oe(r)||C("invalid props options",r);for(const d in r){const f=Dt(d);if(qr(f)){const g=r[d],w=o[f]=G(g)||q(g)?{type:g}:Object.assign({},g);if(w){const I=zr(Boolean,w.type),v=zr(String,w.type);w[0]=I>-1,w[1]=v<0||I<v,(I>-1||Q(w,"default"))&&a.push(f)}}}}const c=[o,a];return oe(t)&&s.set(t,c),c}function qr(t){return t[0]!=="$"?!0:(C(`Invalid prop name: "${t}" is a reserved property.`),!1)}function ni(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function Jr(t,e){return ni(t)===ni(e)}function zr(t,e){return G(e)?e.findIndex(n=>Jr(n,t)):q(e)&&Jr(e,t)?0:-1}function Xr(t,e,n){const s=J(e),i=n.propsOptions[0];for(const r in i){let o=i[r];o!=null&&gc(r,s[r],o,!Q(t,r)&&!Q(t,ot(r)))}}function gc(t,e,n,s){const{type:i,required:r,validator:o}=n;if(r&&s){C('Missing required prop: "'+t+'"');return}if(!(e==null&&!n.required)){if(i!=null&&i!==!0){let a=!1;const l=G(i)?i:[i],c=[];for(let d=0;d<l.length&&!a;d++){const{valid:f,expectedType:g}=pc(e,l[d]);c.push(g||""),a=f}if(!a){C(bc(t,e,c));return}}o&&!o(e)&&C('Invalid prop: custom validator check failed for prop "'+t+'".')}}const mc=rt("String,Number,Boolean,Function,Symbol,BigInt");function pc(t,e){let n;const s=ni(e);if(mc(s)){const i=typeof t;n=i===s.toLowerCase(),!n&&i==="object"&&(n=t instanceof e)}else s==="Object"?n=oe(t):s==="Array"?n=G(t):s==="null"?n=t===null:n=t instanceof e;return{valid:n,expectedType:s}}function bc(t,e,n){let s=`Invalid prop: type check failed for prop "${t}". Expected ${n.map(Cn).join(" | ")}`;const i=n[0],r=Fs(e),o=Yr(e,i),a=Yr(e,r);return n.length===1&&Qr(i)&&!wc(i,r)&&(s+=` with value ${o}`),s+=`, got ${r} `,Qr(r)&&(s+=`with value ${a}.`),s}function Yr(t,e){return e==="String"?`"${t}"`:e==="Number"?`${Number(t)}`:`${t}`}function Qr(t){return["string","number","boolean"].some(n=>t.toLowerCase()===n)}function wc(...t){return t.some(e=>e.toLowerCase()==="boolean")}const Zr=t=>t[0]==="_"||t==="$stable",si=t=>G(t)?t.map(Ne):[Ne(t)],yc=(t,e,n)=>{if(e._n)return e;const s=Ol((...i)=>(he&&C(`Slot "${t}" invoked outside of the render function: this will not track dependencies used in the slot. Invoke the slot function inside the render function instead.`),si(e(...i))),n);return s._c=!1,s},eo=(t,e,n)=>{const s=t._ctx;for(const i in t){if(Zr(i))continue;const r=t[i];if(q(r))e[i]=yc(i,r,s);else if(r!=null){C(`Non-function value encountered for slot "${i}". Prefer function slots for better performance.`);const o=si(r);e[i]=()=>o}}},to=(t,e)=>{Js(t.vnode)||C("Non-function value encountered for default slot. Prefer function slots for better performance.");const n=si(e);t.slots.default=()=>n},Ac=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=J(e),Fn(e,"_",n)):eo(e,t.slots={})}else t.slots={},e&&to(t,e);Fn(t.slots,ns,1)},vc=(t,e,n)=>{const{vnode:s,slots:i}=t;let r=!0,o=se;if(s.shapeFlag&32){const a=e._;a?xt?ue(i,e):n&&a===1?r=!1:(ue(i,e),!n&&a===1&&delete i._):(r=!e.$stable,eo(e,i)),o=e}else e&&(to(t,e),o={default:1});if(r)for(const a in i)!Zr(a)&&!(a in o)&&delete i[a]};function no(){return{app:null,config:{isNativeTag:ji,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let xc=0;function _c(t,e){return function(s,i=null){q(s)||(s=Object.assign({},s)),i!=null&&!oe(i)&&(C("root props passed to app.mount() must be an object."),i=null);const r=no(),o=new Set;let a=!1;const l=r.app={_uid:xc++,_component:s,_props:i,_container:null,_context:r,_instance:null,version:fo,get config(){return r.config},set config(c){C("app.config cannot be replaced. Modify individual options instead.")},use(c,...d){return o.has(c)?C("Plugin has already been applied to target app."):c&&q(c.install)?(o.add(c),c.install(l,...d)):q(c)?(o.add(c),c(l,...d)):C('A plugin must either be a function or an object with an "install" function.'),l},mixin(c){return r.mixins.includes(c)?C("Mixin has already been applied to target app"+(c.name?`: ${c.name}`:"")):r.mixins.push(c),l},component(c,d){return li(c,r.config),d?(r.components[c]&&C(`Component "${c}" has already been registered in target app.`),r.components[c]=d,l):r.components[c]},directive(c,d){return jr(c),d?(r.directives[c]&&C(`Directive "${c}" has already been registered in target app.`),r.directives[c]=d,l):r.directives[c]},mount(c,d,f){if(a)C("App has already been mounted.\nIf you want to remount the same app, move your app creation logic into a factory function and create fresh app instances for each mount - e.g. `const createMyApp = () => createApp(App)`");else{c.__vue_app__&&C("There is already an app instance mounted on the host container.\n If you want to mount another app on the same host container, you need to unmount the previous app by calling `app.unmount()` first.");const g=Et(s,i);return g.appContext=r,r.reload=()=>{t(ht(g),c,f)},d&&e?e(g,c):t(g,c,f),a=!0,l._container=c,c.__vue_app__=l,l._instance=g.component,_l(l,fo),ui(g.component)||g.component.proxy}},unmount(){a?(t(null,l._container),l._instance=null,Pl(l),delete l._container.__vue_app__):C("Cannot unmount an app that is not mounted.")},provide(c,d){return c in r.provides&&C(`App already provides property with key "${String(c)}". It will be overwritten with the new value.`),r.provides[c]=d,l}};return l}}function ii(t,e,n,s,i=!1){if(G(t)){t.forEach((g,w)=>ii(g,e&&(G(e)?e[w]:e),n,s,i));return}if(Xn(s)&&!i)return;const r=s.shapeFlag&4?ui(s.component)||s.component.proxy:s.el,o=i?null:r,{i:a,r:l}=t;if(!a){C("Missing ref owner context. ref cannot be used on hoisted vnodes. A vnode with ref must be created inside the render function.");return}const c=e&&e.r,d=a.refs===se?a.refs={}:a.refs,f=a.setupState;if(c!=null&&c!==l&&(fe(c)?(d[c]=null,Q(f,c)&&(f[c]=null)):ae(c)&&(c.value=null)),q(l))Ze(l,a,12,[o,d]);else{const g=fe(l),w=ae(l);if(g||w){const I=()=>{if(t.f){const v=g?Q(f,l)?f[l]:d[l]:l.value;i?G(v)&&Ps(v,r):G(v)?v.includes(r)||v.push(r):g?(d[l]=[r],Q(f,l)&&(f[l]=d[l])):(l.value=[r],t.k&&(d[t.k]=l.value))}else g?(d[l]=o,Q(f,l)&&(f[l]=o)):w?(l.value=o,t.k&&(d[t.k]=o)):C("Invalid template ref type:",l,`(${typeof l})`)};o?(I.id=-1,Pe(I,n)):I()}else C("Invalid template ref type:",l,`(${typeof l})`)}}let fn,dt;function tt(t,e){t.appContext.config.performance&&Zn()&&dt.mark(`vue-${e}-${t.uid}`),El(t,e,Zn()?dt.now():Date.now())}function nt(t,e){if(t.appContext.config.performance&&Zn()){const n=`vue-${e}-${t.uid}`,s=n+":end";dt.mark(s),dt.measure(`<${is(t,t.type)}> ${e}`,n,s),dt.clearMarks(n),dt.clearMarks(s)}Ll(t,e,Zn()?dt.now():Date.now())}function Zn(){return fn!==void 0||(typeof window<"u"&&window.performance?(fn=!0,dt=window.performance):fn=!1),fn}function Pc(){const t=[];if(t.length){const e=t.length>1;console.warn(`Feature flag${e?"s":""} ${t.join(", ")} ${e?"are":"is"} not explicitly defined. You are running the esm-bundler build of Vue, which expects these compile-time feature flags to be globally injected via the bundler config in order to get better tree-shaking in the production bundle.

For more details, see https://link.vuejs.org/feature-flags.`)}}const Pe=$l;function Sc(t){return Cc(t)}function Cc(t,e){Pc();const n=Ki();n.__VUE__=!0,Er(n.__VUE_DEVTOOLS_GLOBAL_HOOK__,n);const{insert:s,remove:i,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:d,parentNode:f,nextSibling:g,setScopeId:w=_e,insertStaticContent:I}=t,v=(u,h,b,x=null,A=null,S=null,R=!1,P=null,F=xt?!1:!!h.dynamicChildren)=>{if(u===h)return;u&&!hn(u,h)&&(x=ps(u),mt(u,A,S,!0),u=null),h.patchFlag===-2&&(F=!1,h.dynamicChildren=null);const{type:_,ref:D,shapeFlag:M}=h;switch(_){case dn:O(u,h,b,x);break;case De:$(u,h,b,x);break;case ts:u==null?K(h,b,x,R):W(u,h,b,R);break;case qe:H(u,h,b,x,A,S,R,P,F);break;default:M&1?re(u,h,b,x,A,S,R,P,F):M&6?ce(u,h,b,x,A,S,R,P,F):M&64||M&128?_.process(u,h,b,x,A,S,R,P,F,qt):C("Invalid VNode type:",_,`(${typeof _})`)}D!=null&&A&&ii(D,u&&u.ref,S,h||u,!h)},O=(u,h,b,x)=>{if(u==null)s(h.el=a(h.children),b,x);else{const A=h.el=u.el;h.children!==u.children&&c(A,h.children)}},$=(u,h,b,x)=>{u==null?s(h.el=l(h.children||""),b,x):h.el=u.el},K=(u,h,b,x)=>{[u.el,u.anchor]=I(u.children,h,b,x,u.el,u.anchor)},W=(u,h,b,x)=>{if(h.children!==u.children){const A=g(u.anchor);Y(u),[h.el,h.anchor]=I(h.children,b,A,x)}else h.el=u.el,h.anchor=u.anchor},k=({el:u,anchor:h},b,x)=>{let A;for(;u&&u!==h;)A=g(u),s(u,b,x),u=A;s(h,b,x)},Y=({el:u,anchor:h})=>{let b;for(;u&&u!==h;)b=g(u),i(u),u=b;i(h)},re=(u,h,b,x,A,S,R,P,F)=>{R=R||h.type==="svg",u==null?N(h,b,x,A,S,R,P,F):y(u,h,A,S,R,P,F)},N=(u,h,b,x,A,S,R,P)=>{let F,_;const{type:D,props:M,shapeFlag:U,transition:z,dirs:ee}=u;if(F=u.el=o(u.type,S,M&&M.is,M),U&8?d(F,u.children):U&16&&m(u.children,F,null,x,A,S&&D!=="foreignObject",R,P),ee&&Pt(u,null,x,"created"),M){for(const ne in M)ne!=="value"&&!Pn(ne)&&r(F,ne,null,M[ne],S,u.children,x,A,it);"value"in M&&r(F,"value",null,M.value),(_=M.onVnodeBeforeMount)&&Je(_,x,u)}L(F,u,u.scopeId,R,x),Object.defineProperty(F,"__vnode",{value:u,enumerable:!1}),Object.defineProperty(F,"__vueParentComponent",{value:x,enumerable:!1}),ee&&Pt(u,null,x,"beforeMount");const ie=(!A||A&&!A.pendingBranch)&&z&&!z.persisted;ie&&z.beforeEnter(F),s(F,h,b),((_=M&&M.onVnodeMounted)||ie||ee)&&Pe(()=>{_&&Je(_,x,u),ie&&z.enter(F),ee&&Pt(u,null,x,"mounted")},A)},L=(u,h,b,x,A)=>{if(b&&w(u,b),x)for(let S=0;S<x.length;S++)w(u,x[S]);if(A){let S=A.subTree;if(S.patchFlag>0&&S.patchFlag&2048&&(S=Tr(S.children)||S),h===S){const R=A.vnode;L(u,R,R.scopeId,R.slotScopeIds,A.parent)}}},m=(u,h,b,x,A,S,R,P,F=0)=>{for(let _=F;_<u.length;_++){const D=u[_]=P?gt(u[_]):Ne(u[_]);v(null,D,h,b,x,A,S,R,P)}},y=(u,h,b,x,A,S,R)=>{const P=h.el=u.el;let{patchFlag:F,dynamicChildren:_,dirs:D}=h;F|=u.patchFlag&16;const M=u.props||se,U=h.props||se;let z;b&&Ft(b,!1),(z=U.onVnodeBeforeUpdate)&&Je(z,b,h,u),D&&Pt(h,u,b,"beforeUpdate"),b&&Ft(b,!0),xt&&(F=0,R=!1,_=null);const ee=A&&h.type!=="foreignObject";if(_?(p(u.dynamicChildren,_,P,b,x,ee,S),b&&b.type.__hmrId&&es(u,h)):R||V(u,h,P,null,b,x,ee,S,!1),F>0){if(F&16)E(P,h,M,U,b,x,A);else if(F&2&&M.class!==U.class&&r(P,"class",null,U.class,A),F&4&&r(P,"style",M.style,U.style,A),F&8){const ie=h.dynamicProps;for(let ne=0;ne<ie.length;ne++){const de=ie[ne],Be=M[de],Jt=U[de];(Jt!==Be||de==="value")&&r(P,de,Be,Jt,A,u.children,b,x,it)}}F&1&&u.children!==h.children&&d(P,h.children)}else!R&&_==null&&E(P,h,M,U,b,x,A);((z=U.onVnodeUpdated)||D)&&Pe(()=>{z&&Je(z,b,h,u),D&&Pt(h,u,b,"updated")},x)},p=(u,h,b,x,A,S,R)=>{for(let P=0;P<h.length;P++){const F=u[P],_=h[P],D=F.el&&(F.type===qe||!hn(F,_)||F.shapeFlag&70)?f(F.el):b;v(F,_,D,null,x,A,S,R,!0)}},E=(u,h,b,x,A,S,R)=>{if(b!==x){if(b!==se)for(const P in b)!Pn(P)&&!(P in x)&&r(u,P,b[P],null,R,h.children,A,S,it);for(const P in x){if(Pn(P))continue;const F=x[P],_=b[P];F!==_&&P!=="value"&&r(u,P,_,F,R,h.children,A,S,it)}"value"in x&&r(u,"value",b.value,x.value)}},H=(u,h,b,x,A,S,R,P,F)=>{const _=h.el=u?u.el:a(""),D=h.anchor=u?u.anchor:a("");let{patchFlag:M,dynamicChildren:U,slotScopeIds:z}=h;(xt||M&2048)&&(M=0,F=!1,U=null),z&&(P=P?P.concat(z):z),u==null?(s(_,b,x),s(D,b,x),m(h.children,b,D,A,S,R,P,F)):M>0&&M&64&&U&&u.dynamicChildren?(p(u.dynamicChildren,U,b,A,S,R,P),A&&A.type.__hmrId?es(u,h):(h.key!=null||A&&h===A.subTree)&&es(u,h,!0)):V(u,h,b,D,A,S,R,P,F)},ce=(u,h,b,x,A,S,R,P,F)=>{h.slotScopeIds=P,u==null?h.shapeFlag&512?A.ctx.activate(h,b,x,R,F):j(h,b,x,A,S,R,F):Z(u,h,F)},j=(u,h,b,x,A,S,R)=>{const P=u.component=Nc(u,x,A);if(P.type.__hmrId&&yl(P),Vn(u),tt(P,"mount"),Js(u)&&(P.ctx.renderer=qt),tt(P,"init"),jc(P),nt(P,"init"),P.asyncDep){if(A&&A.registerDep(P,T),!u.el){const F=P.subTree=Et(De);$(null,F,h,b)}return}T(P,u,h,b,A,S,R),Kn(),nt(P,"mount")},Z=(u,h,b)=>{const x=h.component=u.component;if(Dl(u,h,b))if(x.asyncDep&&!x.asyncResolved){Vn(h),X(x,h,b),Kn();return}else x.next=h,bl(x.update),x.update();else h.el=u.el,x.vnode=h},T=(u,h,b,x,A,S,R)=>{const P=()=>{if(u.isMounted){let{next:D,bu:M,u:U,parent:z,vnode:ee}=u,ie=D,ne;Vn(D||u.vnode),Ft(u,!1),D?(D.el=ee.el,X(u,D,R)):D=ee,M&&en(M),(ne=D.props&&D.props.onVnodeBeforeUpdate)&&Je(ne,z,D,ee),Ft(u,!0),tt(u,"render");const de=qs(u);nt(u,"render");const Be=u.subTree;u.subTree=de,tt(u,"patch"),v(Be,de,f(Be.el),ps(Be),u,A,S),nt(u,"patch"),D.el=de.el,ie===null&&Nl(u,de.el),U&&Pe(U,A),(ne=D.props&&D.props.onVnodeUpdated)&&Pe(()=>Je(ne,z,D,ee),A),Lr(u),Kn()}else{let D;const{el:M,props:U}=h,{bm:z,m:ee,parent:ie}=u,ne=Xn(h);if(Ft(u,!1),z&&en(z),!ne&&(D=U&&U.onVnodeBeforeMount)&&Je(D,ie,h),Ft(u,!0),M&&Ii){const de=()=>{tt(u,"render"),u.subTree=qs(u),nt(u,"render"),tt(u,"hydrate"),Ii(M,u.subTree,u,A,null),nt(u,"hydrate")};ne?h.type.__asyncLoader().then(()=>!u.isUnmounted&&de()):de()}else{tt(u,"render");const de=u.subTree=qs(u);nt(u,"render"),tt(u,"patch"),v(null,de,b,x,u,A,S),nt(u,"patch"),h.el=de.el}if(ee&&Pe(ee,A),!ne&&(D=U&&U.onVnodeMounted)){const de=h;Pe(()=>Je(D,ie,de),A)}(h.shapeFlag&256||ie&&Xn(ie.vnode)&&ie.vnode.shapeFlag&256)&&u.a&&Pe(u.a,A),u.isMounted=!0,Sl(u),h=b=x=null}},F=u.effect=new Ts(P,()=>Wn(_),u.scope),_=u.update=()=>F.run();_.id=u.uid,Ft(u,!0),F.onTrack=u.rtc?D=>en(u.rtc,D):void 0,F.onTrigger=u.rtg?D=>en(u.rtg,D):void 0,_.ownerInstance=u,_()},X=(u,h,b)=>{h.component=u;const x=u.vnode.props;u.vnode=h,u.next=null,hc(u,h.props,x,b),vc(u,h.children,b),yt(),_r(),At()},V=(u,h,b,x,A,S,R,P,F=!1)=>{const _=u&&u.children,D=u?u.shapeFlag:0,M=h.children,{patchFlag:U,shapeFlag:z}=h;if(U>0){if(U&128){Ae(_,M,b,x,A,S,R,P,F);return}else if(U&256){te(_,M,b,x,A,S,R,P,F);return}}z&8?(D&16&&it(_,A,S),M!==_&&d(b,M)):D&16?z&16?Ae(_,M,b,x,A,S,R,P,F):it(_,A,S,!0):(D&8&&d(b,""),z&16&&m(M,b,x,A,S,R,P,F))},te=(u,h,b,x,A,S,R,P,F)=>{u=u||Yt,h=h||Yt;const _=u.length,D=h.length,M=Math.min(_,D);let U;for(U=0;U<M;U++){const z=h[U]=F?gt(h[U]):Ne(h[U]);v(u[U],z,b,null,A,S,R,P,F)}_>D?it(u,A,S,!0,!1,M):m(h,b,x,A,S,R,P,F,M)},Ae=(u,h,b,x,A,S,R,P,F)=>{let _=0;const D=h.length;let M=u.length-1,U=D-1;for(;_<=M&&_<=U;){const z=u[_],ee=h[_]=F?gt(h[_]):Ne(h[_]);if(hn(z,ee))v(z,ee,b,null,A,S,R,P,F);else break;_++}for(;_<=M&&_<=U;){const z=u[M],ee=h[U]=F?gt(h[U]):Ne(h[U]);if(hn(z,ee))v(z,ee,b,null,A,S,R,P,F);else break;M--,U--}if(_>M){if(_<=U){const z=U+1,ee=z<D?h[z].el:x;for(;_<=U;)v(null,h[_]=F?gt(h[_]):Ne(h[_]),b,ee,A,S,R,P,F),_++}}else if(_>U)for(;_<=M;)mt(u[_],A,S,!0),_++;else{const z=_,ee=_,ie=new Map;for(_=ee;_<=U;_++){const ve=h[_]=F?gt(h[_]):Ne(h[_]);ve.key!=null&&(ie.has(ve.key)&&C("Duplicate keys found during update:",JSON.stringify(ve.key),"Make sure keys are unique."),ie.set(ve.key,_))}let ne,de=0;const Be=U-ee+1;let Jt=!1,Wo=0;const wn=new Array(Be);for(_=0;_<Be;_++)wn[_]=0;for(_=z;_<=M;_++){const ve=u[_];if(de>=Be){mt(ve,A,S,!0);continue}let ze;if(ve.key!=null)ze=ie.get(ve.key);else for(ne=ee;ne<=U;ne++)if(wn[ne-ee]===0&&hn(ve,h[ne])){ze=ne;break}ze===void 0?mt(ve,A,S,!0):(wn[ze-ee]=_+1,ze>=Wo?Wo=ze:Jt=!0,v(ve,h[ze],b,null,A,S,R,P,F),de++)}const Go=Jt?Fc(wn):Yt;for(ne=Go.length-1,_=Be-1;_>=0;_--){const ve=ee+_,ze=h[ve],qo=ve+1<D?h[ve+1].el:x;wn[_]===0?v(null,ze,b,qo,A,S,R,P,F):Jt&&(ne<0||_!==Go[ne]?Gt(ze,b,qo,2):ne--)}}},Gt=(u,h,b,x,A=null)=>{const{el:S,type:R,transition:P,children:F,shapeFlag:_}=u;if(_&6){Gt(u.component.subTree,h,b,x);return}if(_&128){u.suspense.move(h,b,x);return}if(_&64){R.move(u,h,b,qt);return}if(R===qe){s(S,h,b);for(let M=0;M<F.length;M++)Gt(F[M],h,b,x);s(u.anchor,h,b);return}if(R===ts){k(u,h,b);return}if(x!==2&&_&1&&P)if(x===0)P.beforeEnter(S),s(S,h,b),Pe(()=>P.enter(S),A);else{const{leave:M,delayLeave:U,afterLeave:z}=P,ee=()=>s(S,h,b),ie=()=>{M(S,()=>{ee(),z&&z()})};U?U(S,ee,ie):ie()}else s(S,h,b)},mt=(u,h,b,x=!1,A=!1)=>{const{type:S,props:R,ref:P,children:F,dynamicChildren:_,shapeFlag:D,patchFlag:M,dirs:U}=u;if(P!=null&&ii(P,null,b,u,!0),D&256){h.ctx.deactivate(u);return}const z=D&1&&U,ee=!Xn(u);let ie;if(ee&&(ie=R&&R.onVnodeBeforeUnmount)&&Je(ie,h,u),D&6)lf(u.component,b,x);else{if(D&128){u.suspense.unmount(b,x);return}z&&Pt(u,null,h,"beforeUnmount"),D&64?u.type.remove(u,h,b,A,qt,x):_&&(S!==qe||M>0&&M&64)?it(_,h,b,!1,!0):(S===qe&&M&384||!A&&D&16)&&it(F,h,b),x&&Li(u)}(ee&&(ie=R&&R.onVnodeUnmounted)||z)&&Pe(()=>{ie&&Je(ie,h,u),z&&Pt(u,null,h,"unmounted")},b)},Li=u=>{const{type:h,el:b,anchor:x,transition:A}=u;if(h===qe){u.patchFlag>0&&u.patchFlag&2048&&A&&!A.persisted?u.children.forEach(R=>{R.type===De?i(R.el):Li(R)}):af(b,x);return}if(h===ts){Y(u);return}const S=()=>{i(b),A&&!A.persisted&&A.afterLeave&&A.afterLeave()};if(u.shapeFlag&1&&A&&!A.persisted){const{leave:R,delayLeave:P}=A,F=()=>R(b,S);P?P(u.el,S,F):F()}else S()},af=(u,h)=>{let b;for(;u!==h;)b=g(u),i(u),u=b;i(h)},lf=(u,h,b)=>{u.type.__hmrId&&Al(u);const{bum:x,scope:A,update:S,subTree:R,um:P}=u;x&&en(x),A.stop(),S&&(S.active=!1,mt(R,u,h,b)),P&&Pe(P,h),Pe(()=>{u.isUnmounted=!0},h),h&&h.pendingBranch&&!h.isUnmounted&&u.asyncDep&&!u.asyncResolved&&u.suspenseId===h.pendingId&&(h.deps--,h.deps===0&&h.resolve()),Fl(u)},it=(u,h,b,x=!1,A=!1,S=0)=>{for(let R=S;R<u.length;R++)mt(u[R],h,b,x,A)},ps=u=>u.shapeFlag&6?ps(u.component.subTree):u.shapeFlag&128?u.suspense.next():g(u.anchor||u.el),Ho=(u,h,b)=>{u==null?h._vnode&&mt(h._vnode,null,null,!0):v(h._vnode||null,u,h,null,null,null,b),_r(),Pr(),h._vnode=u},qt={p:v,um:mt,m:Gt,r:Li,mt:j,mc:m,pc:V,pbc:p,n:ps,o:t};let Ri,Ii;return e&&([Ri,Ii]=e(qt)),{render:Ho,hydrate:Ri,createApp:_c(Ho,Ri)}}function Ft({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function es(t,e,n=!1){const s=t.children,i=e.children;if(G(s)&&G(i))for(let r=0;r<s.length;r++){const o=s[r];let a=i[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[r]=gt(i[r]),a.el=o.el),n||es(o,a)),a.type===dn&&(a.el=o.el),a.type===De&&!a.el&&(a.el=o.el)}}function Fc(t){const e=t.slice(),n=[0];let s,i,r,o,a;const l=t.length;for(s=0;s<l;s++){const c=t[s];if(c!==0){if(i=n[n.length-1],t[i]<c){e[s]=i,n.push(s);continue}for(r=0,o=n.length-1;r<o;)a=r+o>>1,t[n[a]]<c?r=a+1:o=a;c<t[n[r]]&&(r>0&&(e[s]=n[r-1]),n[r]=s)}}for(r=n.length,o=n[r-1];r-- >0;)n[r]=o,o=e[o];return n}const Ec=t=>t.__isTeleport,qe=Symbol("Fragment"),dn=Symbol("Text"),De=Symbol("Comment"),ts=Symbol("Static");let Bt=null,ri=1;function so(t){ri+=t}function oi(t){return t?t.__v_isVNode===!0:!1}function hn(t,e){return e.shapeFlag&6&&$t.has(e.type)?(t.shapeFlag&=-257,e.shapeFlag&=-513,!1):t.type===e.type&&t.key===e.key}const Lc=(...t)=>Ic(...t),ns="__vInternal",io=({key:t})=>t??null,ss=({ref:t,ref_key:e,ref_for:n})=>t!=null?fe(t)||ae(t)||q(t)?{i:Re,r:t,k:e,f:!!n}:t:null;function Rc(t,e=null,n=null,s=0,i=null,r=t===qe?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&io(e),ref:e&&ss(e),scopeId:Or,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Re};return a?(ai(l,n),r&128&&t.normalize(l)):n&&(l.shapeFlag|=fe(n)?8:16),l.key!==l.key&&C("VNode created with invalid key (NaN). VNode type:",l.type),ri>0&&!o&&Bt&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&Bt.push(l),l}const Et=Lc;function Ic(t,e=null,n=null,s=0,i=null,r=!1){if((!t||t===tc)&&(t||C(`Invalid vnode type when creating vnode: ${t}.`),t=De),oi(t)){const a=ht(t,e,!0);return n&&ai(a,n),ri>0&&!r&&Bt&&(a.shapeFlag&6?Bt[Bt.indexOf(t)]=a:Bt.push(a)),a.patchFlag|=-2,a}if(uo(t)&&(t=t.__vccOpts),e){e=Oc(e);let{class:a,style:l}=e;a&&!fe(a)&&(e.class=_s(a)),oe(l)&&(jn(l)&&!G(l)&&(l=ue({},l)),e.style=xs(l))}const o=fe(t)?1:Ul(t)?128:Ec(t)?64:oe(t)?4:q(t)?2:0;return o&4&&jn(t)&&(t=J(t),C("Vue received a Component which was made a reactive object. This can lead to unnecessary performance overhead, and should be avoided by marking the component with `markRaw` or using `shallowRef` instead of `ref`.",`
Component that was made reactive: `,t)),Rc(t,e,n,s,i,o,r,!0)}function Oc(t){return t?jn(t)||ns in t?ue({},t):t:null}function ht(t,e,n=!1){const{props:s,ref:i,patchFlag:r,children:o}=t,a=e?Mc(s||{},e):s;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&io(a),ref:e&&e.ref?n&&i?G(i)?i.concat(ss(e)):[i,ss(e)]:ss(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:r===-1&&G(o)?o.map(ro):o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==qe?r===-1?16:r|16:r,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&ht(t.ssContent),ssFallback:t.ssFallback&&ht(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx}}function ro(t){const e=ht(t);return G(t.children)&&(e.children=t.children.map(ro)),e}function Tc(t=" ",e=0){return Et(dn,null,t,e)}function Ne(t){return t==null||typeof t=="boolean"?Et(De):G(t)?Et(qe,null,t.slice()):typeof t=="object"?gt(t):Et(dn,null,String(t))}function gt(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:ht(t)}function ai(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(G(e))n=16;else if(typeof e=="object")if(s&65){const i=e.default;i&&(i._c&&(i._d=!1),ai(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!(ns in e)?e._ctx=Re:i===3&&Re&&(Re.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else q(e)?(e={default:e,_ctx:Re},n=32):(e=String(e),s&64?(n=16,e=[Tc(e)]):n=8);t.children=e,t.shapeFlag|=n}function Mc(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const i in s)if(i==="class")e.class!==s.class&&(e.class=_s([e.class,s.class]));else if(i==="style")e.style=xs([e.style,s.style]);else if(Qt(i)){const r=e[i],o=s[i];o&&r!==o&&!(G(r)&&r.includes(o))&&(e[i]=r?[].concat(r,o):o)}else i!==""&&(e[i]=s[i])}return e}function Je(t,e,n,s=null){ke(t,e,7,[n,s])}const kc=no();let Dc=0;function Nc(t,e,n){const s=t.type,i=(e?e.appContext:t.appContext)||kc,r={uid:Dc++,vnode:t,type:s,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new Hi(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Gr(s,i),emitsOptions:Ir(s,i),emit:null,emitted:null,propsDefaults:se,inheritAttrs:s.inheritAttrs,ctx:se,data:se,props:se,attrs:se,slots:se,refs:se,setupState:se,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx=nc(r),r.root=e?e.root:r,r.emit=Il.bind(null,r),t.ce&&t.ce(r),r}let he=null;const Uc=()=>he||Re,Vt=t=>{he=t,t.scope.on()},Lt=()=>{he&&he.scope.off(),he=null},$c=rt("slot,component");function li(t,e){const n=e.isNativeTag||ji;($c(t)||n(t))&&C("Do not use built-in or reserved HTML elements as component id: "+t)}function oo(t){return t.vnode.shapeFlag&4}let gn=!1;function jc(t,e=!1){gn=e;const{props:n,children:s}=t.vnode,i=oo(t);fc(t,n,i,e),Ac(t,s);const r=i?Bc(t,e):void 0;return gn=!1,r}function Bc(t,e){var n;const s=t.type;{if(s.name&&li(s.name,t.appContext.config),s.components){const r=Object.keys(s.components);for(let o=0;o<r.length;o++)li(r[o],t.appContext.config)}if(s.directives){const r=Object.keys(s.directives);for(let o=0;o<r.length;o++)jr(r[o])}s.compilerOptions&&Vc()&&C('"compilerOptions" is only supported when using a build of Vue that includes the runtime compiler. Since you are using a runtime-only build, the options should be passed via your build tool config instead.')}t.accessCache=Object.create(null),t.proxy=Me(new Proxy(t.ctx,Br)),sc(t);const{setup:i}=s;if(i){const r=t.setupContext=i.length>1?Hc(t):null;Vt(t),yt();const o=Ze(i,t,0,[Nt(t.props),r]);if(At(),Lt(),Cs(o)){if(o.then(Lt,Lt),e)return o.then(a=>{ao(t,a,e)}).catch(a=>{Hn(a,t,0)});if(t.asyncDep=o,!t.suspense){const a=(n=s.name)!==null&&n!==void 0?n:"Anonymous";C(`Component <${a}>: setup function returned a promise, but no <Suspense> boundary was found in the parent component tree. A component with async setup() must be nested in a <Suspense> in order to be rendered.`)}}else ao(t,o,e)}else lo(t,e)}function ao(t,e,n){q(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:oe(e)?(oi(e)&&C("setup() should not return VNodes directly - return a render function instead."),t.devtoolsRawSetupState=e,t.setupState=pr(e),ic(t)):e!==void 0&&C(`setup() should return an object. Received: ${e===null?"null":typeof e}`),lo(t,n)}let ci;const Vc=()=>!ci;function lo(t,e,n){const s=t.type;if(!t.render){if(!e&&ci&&!s.render){const i=s.template||Zs(t).template;if(i){tt(t,"compile");const{isCustomElement:r,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=s,c=ue(ue({isCustomElement:r,delimiters:a},o),l);s.render=ci(i,c),nt(t,"compile")}}t.render=s.render||_e}Vt(t),yt(),oc(t),At(),Lt(),!s.render&&t.render===_e&&!e&&(s.template?C('Component provided template option but runtime compilation is not supported in this build of Vue. Configure your bundler to alias "vue" to "vue/dist/vue.esm-bundler.js".'):C("Component is missing template or render function."))}function Kc(t){return new Proxy(t.attrs,{get(e,n){return Jn(),Le(t,"get","$attrs"),e[n]},set(){return C("setupContext.attrs is readonly."),!1},deleteProperty(){return C("setupContext.attrs is readonly."),!1}})}function Hc(t){const e=s=>{t.exposed&&C("expose() should be called only once per setup()."),t.exposed=s||{}};let n;return Object.freeze({get attrs(){return n||(n=Kc(t))},get slots(){return Nt(t.slots)},get emit(){return(s,...i)=>t.emit(s,...i)},expose:e})}function ui(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(pr(Me(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in St)return St[n](t)},has(e,n){return n in e||n in St}}))}const Wc=/(?:^|[-_])(\w)/g,Gc=t=>t.replace(Wc,e=>e.toUpperCase()).replace(/[-_]/g,"");function co(t,e=!0){return q(t)?t.displayName||t.name:t.name||e&&t.__name}function is(t,e,n=!1){let s=co(e);if(!s&&e.__file){const i=e.__file.match(/([^/\\]+)\.\w+$/);i&&(s=i[1])}if(!s&&t&&t.parent){const i=r=>{for(const o in r)if(r[o]===e)return o};s=i(t.components||t.parent.type.components)||i(t.appContext.components)}return s?Gc(s):n?"App":"Anonymous"}function uo(t){return q(t)&&"__vccOpts"in t}const fi=(t,e)=>cl(t,e,gn),qc=Symbol("ssrContext"),Jc=()=>{{const t=cn(qc);return t||C("Server rendering context not provided. Make sure to only call useSSRContext() conditionally in the server build."),t}};function di(t){return!!(t&&t.__v_isShallow)}function zc(){if(typeof window>"u")return;const t={style:"color:#3ba776"},e={style:"color:#0b1bc9"},n={style:"color:#b62e24"},s={style:"color:#9d288c"},i={header(f){return oe(f)?f.__isVue?["div",t,"VueInstance"]:ae(f)?["div",{},["span",t,d(f)],"<",a(f.value),">"]:Ke(f)?["div",{},["span",t,di(f)?"ShallowReactive":"Reactive"],"<",a(f),`>${ut(f)?" (readonly)":""}`]:ut(f)?["div",{},["span",t,di(f)?"ShallowReadonly":"Readonly"],"<",a(f),">"]:null:null},hasBody(f){return f&&f.__isVue},body(f){if(f&&f.__isVue)return["div",{},...r(f.$)]}};function r(f){const g=[];f.type.props&&f.props&&g.push(o("props",J(f.props))),f.setupState!==se&&g.push(o("setup",f.setupState)),f.data!==se&&g.push(o("data",J(f.data)));const w=l(f,"computed");w&&g.push(o("computed",w));const I=l(f,"inject");return I&&g.push(o("injected",I)),g.push(["div",{},["span",{style:s.style+";opacity:0.66"},"$ (internal): "],["object",{object:f}]]),g}function o(f,g){return g=ue({},g),Object.keys(g).length?["div",{style:"line-height:1.25em;margin-bottom:0.6em"},["div",{style:"color:#476582"},f],["div",{style:"padding-left:1.25em"},...Object.keys(g).map(w=>["div",{},["span",s,w+": "],a(g[w],!1)])]]:["span",{}]}function a(f,g=!0){return typeof f=="number"?["span",e,f]:typeof f=="string"?["span",n,JSON.stringify(f)]:typeof f=="boolean"?["span",s,f]:oe(f)?["object",{object:g?J(f):f}]:["span",n,String(f)]}function l(f,g){const w=f.type;if(q(w))return;const I={};for(const v in f.ctx)c(w,v,g)&&(I[v]=f.ctx[v]);return I}function c(f,g,w){const I=f[w];if(G(I)&&I.includes(g)||oe(I)&&g in I||f.extends&&c(f.extends,g,w)||f.mixins&&f.mixins.some(v=>c(v,g,w)))return!0}function d(f){return di(f)?"ShallowRef":f.effect?"ComputedRef":"Ref"}window.devtoolsFormatters?window.devtoolsFormatters.push(i):window.devtoolsFormatters=[i]}const fo="3.2.45",Xc="http://www.w3.org/2000/svg",Rt=typeof document<"u"?document:null,ho=Rt&&Rt.createElement("template"),Yc={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const i=e?Rt.createElementNS(Xc,t):Rt.createElement(t,n?{is:n}:void 0);return t==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:t=>Rt.createTextNode(t),createComment:t=>Rt.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Rt.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,i,r){const o=n?n.previousSibling:e.lastChild;if(i&&(i===r||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===r||!(i=i.nextSibling)););else{ho.innerHTML=s?`<svg>${t}</svg>`:t;const a=ho.content;if(s){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function Qc(t,e,n){const s=t._vtc;s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function Zc(t,e,n){const s=t.style,i=fe(n);if(n&&!i){for(const r in n)hi(s,r,n[r]);if(e&&!fe(e))for(const r in e)n[r]==null&&hi(s,r,"")}else{const r=s.display;i?e!==n&&(s.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(s.display=r)}}const eu=/[^\\];\s*$/,go=/\s*!important$/;function hi(t,e,n){if(G(n))n.forEach(s=>hi(t,e,s));else if(n==null&&(n=""),eu.test(n)&&C(`Unexpected semicolon at the end of '${e}' style value: '${n}'`),e.startsWith("--"))t.setProperty(e,n);else{const s=tu(t,e);go.test(n)?t.setProperty(ot(s),n.replace(go,""),"important"):t[s]=n}}const mo=["Webkit","Moz","ms"],gi={};function tu(t,e){const n=gi[e];if(n)return n;let s=Dt(e);if(s!=="filter"&&s in t)return gi[e]=s;s=Cn(s);for(let i=0;i<mo.length;i++){const r=mo[i]+s;if(r in t)return gi[e]=r}return e}const po="http://www.w3.org/1999/xlink";function nu(t,e,n,s,i){if(s&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(po,e.slice(6,e.length)):t.setAttributeNS(po,e,n);else{const r=ya(e);n==null||r&&!$i(n)?t.removeAttribute(e):t.setAttribute(e,r?"":n)}}function su(t,e,n,s,i,r,o){if(e==="innerHTML"||e==="textContent"){s&&o(s,i,r),t[e]=n??"";return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=n;const l=n??"";(t.value!==l||t.tagName==="OPTION")&&(t.value=l),n==null&&t.removeAttribute(e);return}let a=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=$i(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{t[e]=n}catch(l){a||C(`Failed setting prop "${e}" on <${t.tagName.toLowerCase()}>: value ${n} is invalid.`,l)}a&&t.removeAttribute(e)}function iu(t,e,n,s){t.addEventListener(e,n,s)}function ru(t,e,n,s){t.removeEventListener(e,n,s)}function ou(t,e,n,s,i=null){const r=t._vei||(t._vei={}),o=r[e];if(s&&o)o.value=s;else{const[a,l]=au(e);if(s){const c=r[e]=uu(s,i);iu(t,a,c,l)}else o&&(ru(t,a,o,l),r[e]=void 0)}}const bo=/(?:Once|Passive|Capture)$/;function au(t){let e;if(bo.test(t)){e={};let s;for(;s=t.match(bo);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):ot(t.slice(2)),e]}let mi=0;const lu=Promise.resolve(),cu=()=>mi||(lu.then(()=>mi=0),mi=Date.now());function uu(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;ke(fu(s,n.value),e,5,[s])};return n.value=t,n.attached=cu(),n}function fu(t,e){if(G(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>i=>!i._stopped&&s&&s(i))}else return e}const wo=/^on[a-z]/,du=(t,e,n,s,i=!1,r,o,a,l)=>{e==="class"?Qc(t,s,i):e==="style"?Zc(t,n,s):Qt(e)?xn(e)||ou(t,e,n,s,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):hu(t,e,s,i))?su(t,e,s,r,o,a,l):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),nu(t,e,s,i))};function hu(t,e,n,s){return s?!!(e==="innerHTML"||e==="textContent"||e in t&&wo.test(e)&&q(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||wo.test(e)&&fe(n)?!1:e in t}const gu=ue({patchProp:du},Yc);let yo;function mu(){return yo||(yo=Sc(gu))}const pu=(...t)=>{const e=mu().createApp(...t);bu(e),wu(e);const{mount:n}=e;return e.mount=s=>{const i=yu(s);if(!i)return;const r=e._component;!q(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.innerHTML="";const o=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function bu(t){Object.defineProperty(t.config,"isNativeTag",{value:e=>ba(e)||wa(e),writable:!1})}function wu(t){{const e=t.config.isCustomElement;Object.defineProperty(t.config,"isCustomElement",{get(){return e},set(){C("The `isCustomElement` config option is deprecated. Use `compilerOptions.isCustomElement` instead.")}});const n=t.config.compilerOptions,s='The `compilerOptions` config option is only respected when using a build of Vue.js that includes the runtime compiler (aka "full build"). Since you are using the runtime-only build, `compilerOptions` must be passed to `@vue/compiler-dom` in the build setup instead.\n- For vue-loader: pass it via vue-loader\'s `compilerOptions` loader option.\n- For vue-cli: see https://cli.vuejs.org/guide/webpack.html#modifying-options-of-a-loader\n- For vite: pass it via @vitejs/plugin-vue options. See https://github.com/vitejs/vite/tree/main/packages/plugin-vue#example-for-passing-options-to-vuecompiler-dom';Object.defineProperty(t.config,"compilerOptions",{get(){return C(s),n},set(){C(s)}})}}function yu(t){if(fe(t)){const e=document.querySelector(t);return e||C(`Failed to mount app: mount target selector "${t}" returned null.`),e}return window.ShadowRoot&&t instanceof window.ShadowRoot&&t.mode==="closed"&&C('mounting on a ShadowRoot with `{mode: "closed"}` may lead to unpredictable bugs'),t}function Au(){zc()}Au();var vu=!1;function rs(t,e,n){return Array.isArray(t)?(t.length=Math.max(t.length,e),t.splice(e,1,n),n):(t[e]=n,n)}function pi(t,e){if(Array.isArray(t)){t.splice(e,1);return}delete t[e]}function xu(){return Ao().__VUE_DEVTOOLS_GLOBAL_HOOK__}function Ao(){return typeof navigator<"u"&&typeof window<"u"?window:typeof global<"u"?global:{}}const _u=typeof Proxy=="function",Pu="devtools-plugin:setup",Su="plugin:settings:set";let Kt,bi;function Cu(){var t;return Kt!==void 0||(typeof window<"u"&&window.performance?(Kt=!0,bi=window.performance):typeof global<"u"&&(!((t=global.perf_hooks)===null||t===void 0)&&t.performance)?(Kt=!0,bi=global.perf_hooks.performance):Kt=!1),Kt}function Fu(){return Cu()?bi.now():Date.now()}class Eu{constructor(e,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=n;const s={};if(e.settings)for(const o in e.settings){const a=e.settings[o];s[o]=a.defaultValue}const i=`__vue-devtools-plugin-settings__${e.id}`;let r=Object.assign({},s);try{const o=localStorage.getItem(i),a=JSON.parse(o);Object.assign(r,a)}catch{}this.fallbacks={getSettings(){return r},setSettings(o){try{localStorage.setItem(i,JSON.stringify(o))}catch{}r=o},now(){return Fu()}},n&&n.on(Su,(o,a)=>{o===this.plugin.id&&this.fallbacks.setSettings(a)}),this.proxiedOn=new Proxy({},{get:(o,a)=>this.target?this.target.on[a]:(...l)=>{this.onQueue.push({method:a,args:l})}}),this.proxiedTarget=new Proxy({},{get:(o,a)=>this.target?this.target[a]:a==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(a)?(...l)=>(this.targetQueue.push({method:a,args:l,resolve:()=>{}}),this.fallbacks[a](...l)):(...l)=>new Promise(c=>{this.targetQueue.push({method:a,args:l,resolve:c})})})}async setRealTarget(e){this.target=e;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function vo(t,e){const n=t,s=Ao(),i=xu(),r=_u&&n.enableEarlyProxy;if(i&&(s.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!r))i.emit(Pu,t,e);else{const o=r?new Eu(n,i):null;(s.__VUE_DEVTOOLS_PLUGINS__=s.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:e,proxy:o}),o&&e(o.proxiedTarget)}}/*!
  * pinia v2.0.29
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */let wi;const mn=t=>wi=t,xo=Symbol("pinia");function It(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Ue;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Ue||(Ue={}));const os=typeof window<"u",as=os,_o=(()=>typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:typeof globalThis=="object"?globalThis:{HTMLElement:null})();function Lu(t,{autoBom:e=!1}={}){return e&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t}function yi(t,e,n){const s=new XMLHttpRequest;s.open("GET",t),s.responseType="blob",s.onload=function(){Co(s.response,e,n)},s.onerror=function(){console.error("could not download file")},s.send()}function Po(t){const e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function ls(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{const n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}const cs=typeof navigator=="object"?navigator:{userAgent:""},So=(()=>/Macintosh/.test(cs.userAgent)&&/AppleWebKit/.test(cs.userAgent)&&!/Safari/.test(cs.userAgent))(),Co=os?typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype&&!So?Ru:"msSaveOrOpenBlob"in cs?Iu:Ou:()=>{};function Ru(t,e="download",n){const s=document.createElement("a");s.download=e,s.rel="noopener",typeof t=="string"?(s.href=t,s.origin!==location.origin?Po(s.href)?yi(t,e,n):(s.target="_blank",ls(s)):ls(s)):(s.href=URL.createObjectURL(t),setTimeout(function(){URL.revokeObjectURL(s.href)},4e4),setTimeout(function(){ls(s)},0))}function Iu(t,e="download",n){if(typeof t=="string")if(Po(t))yi(t,e,n);else{const s=document.createElement("a");s.href=t,s.target="_blank",setTimeout(function(){ls(s)})}else navigator.msSaveOrOpenBlob(Lu(t,n),e)}function Ou(t,e,n,s){if(s=s||open("","_blank"),s&&(s.document.title=s.document.body.innerText="downloading..."),typeof t=="string")return yi(t,e,n);const i=t.type==="application/octet-stream",r=/constructor/i.test(String(_o.HTMLElement))||"safari"in _o,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&r||So)&&typeof FileReader<"u"){const a=new FileReader;a.onloadend=function(){let l=a.result;if(typeof l!="string")throw s=null,new Error("Wrong reader.result type");l=o?l:l.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=l:location.assign(l),s=null},a.readAsDataURL(t)}else{const a=URL.createObjectURL(t);s?s.location.assign(a):location.href=a,s=null,setTimeout(function(){URL.revokeObjectURL(a)},4e4)}}function ge(t,e){const n="🍍 "+t;typeof __VUE_DEVTOOLS_TOAST__=="function"?__VUE_DEVTOOLS_TOAST__(n,e):e==="error"?console.error(n):e==="warn"?console.warn(n):console.log(n)}function Ai(t){return"_a"in t&&"install"in t}function Fo(){if(!("clipboard"in navigator))return ge("Your browser doesn't support the Clipboard API","error"),!0}function Eo(t){return t instanceof Error&&t.message.toLowerCase().includes("document is not focused")?(ge('You need to activate the "Emulate a focused page" setting in the "Rendering" panel of devtools.',"warn"),!0):!1}async function Tu(t){if(!Fo())try{await navigator.clipboard.writeText(JSON.stringify(t.state.value)),ge("Global state copied to clipboard.")}catch(e){if(Eo(e))return;ge("Failed to serialize the state. Check the console for more details.","error"),console.error(e)}}async function Mu(t){if(!Fo())try{t.state.value=JSON.parse(await navigator.clipboard.readText()),ge("Global state pasted from clipboard.")}catch(e){if(Eo(e))return;ge("Failed to deserialize the state from clipboard. Check the console for more details.","error"),console.error(e)}}async function ku(t){try{Co(new Blob([JSON.stringify(t.state.value)],{type:"text/plain;charset=utf-8"}),"pinia-state.json")}catch(e){ge("Failed to export the state as JSON. Check the console for more details.","error"),console.error(e)}}let st;function Du(){st||(st=document.createElement("input"),st.type="file",st.accept=".json");function t(){return new Promise((e,n)=>{st.onchange=async()=>{const s=st.files;if(!s)return e(null);const i=s.item(0);return e(i?{text:await i.text(),file:i}:null)},st.oncancel=()=>e(null),st.onerror=n,st.click()})}return t}async function Nu(t){try{const n=await(await Du())();if(!n)return;const{text:s,file:i}=n;t.state.value=JSON.parse(s),ge(`Global state imported from "${i.name}".`)}catch(e){ge("Failed to export the state as JSON. Check the console for more details.","error"),console.error(e)}}function $e(t){return{_custom:{display:t}}}const Lo="🍍 Pinia (root)",vi="_root";function Uu(t){return Ai(t)?{id:vi,label:Lo}:{id:t.$id,label:t.$id}}function $u(t){if(Ai(t)){const n=Array.from(t._s.keys()),s=t._s;return{state:n.map(r=>({editable:!0,key:r,value:t.state.value[r]})),getters:n.filter(r=>s.get(r)._getters).map(r=>{const o=s.get(r);return{editable:!1,key:r,value:o._getters.reduce((a,l)=>(a[l]=o[l],a),{})}})}}const e={state:Object.keys(t.$state).map(n=>({editable:!0,key:n,value:t.$state[n]}))};return t._getters&&t._getters.length&&(e.getters=t._getters.map(n=>({editable:!1,key:n,value:t[n]}))),t._customProperties.size&&(e.customProperties=Array.from(t._customProperties).map(n=>({editable:!0,key:n,value:t[n]}))),e}function ju(t){return t?Array.isArray(t)?t.reduce((e,n)=>(e.keys.push(n.key),e.operations.push(n.type),e.oldValue[n.key]=n.oldValue,e.newValue[n.key]=n.newValue,e),{oldValue:{},keys:[],operations:[],newValue:{}}):{operation:$e(t.type),key:$e(t.key),oldValue:t.oldValue,newValue:t.newValue}:{}}function Bu(t){switch(t){case Ue.direct:return"mutation";case Ue.patchFunction:return"$patch";case Ue.patchObject:return"$patch";default:return"unknown"}}let Ht=!0;const us=[],Ot="pinia:mutations",be="pinia",fs=t=>"🍍 "+t;function Vu(t,e){vo({id:"dev.esm.pinia",label:"Pinia 🍍",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:us,app:t},n=>{typeof n.now!="function"&&ge("You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),n.addTimelineLayer({id:Ot,label:"Pinia 🍍",color:15064968}),n.addInspector({id:be,label:"Pinia 🍍",icon:"storage",treeFilterPlaceholder:"Search stores",actions:[{icon:"content_copy",action:()=>{Tu(e)},tooltip:"Serialize and copy the state"},{icon:"content_paste",action:async()=>{await Mu(e),n.sendInspectorTree(be),n.sendInspectorState(be)},tooltip:"Replace the state with the content of your clipboard"},{icon:"save",action:()=>{ku(e)},tooltip:"Save the state as a JSON file"},{icon:"folder_open",action:async()=>{await Nu(e),n.sendInspectorTree(be),n.sendInspectorState(be)},tooltip:"Import the state from a JSON file"}],nodeActions:[{icon:"restore",tooltip:"Reset the state (option store only)",action:s=>{const i=e._s.get(s);i?i._isOptionsAPI?(i.$reset(),ge(`Store "${s}" reset.`)):ge(`Cannot reset "${s}" store because it's a setup store.`,"warn"):ge(`Cannot reset "${s}" store because it wasn't found.`,"warn")}}]}),n.on.inspectComponent((s,i)=>{const r=s.componentInstance&&s.componentInstance.proxy;if(r&&r._pStores){const o=s.componentInstance.proxy._pStores;Object.values(o).forEach(a=>{s.instanceData.state.push({type:fs(a.$id),key:"state",editable:!0,value:a._isOptionsAPI?{_custom:{value:J(a.$state),actions:[{icon:"restore",tooltip:"Reset the state of this store",action:()=>a.$reset()}]}}:Object.keys(a.$state).reduce((l,c)=>(l[c]=a.$state[c],l),{})}),a._getters&&a._getters.length&&s.instanceData.state.push({type:fs(a.$id),key:"getters",editable:!1,value:a._getters.reduce((l,c)=>{try{l[c]=a[c]}catch(d){l[c]=d}return l},{})})})}}),n.on.getInspectorTree(s=>{if(s.app===t&&s.inspectorId===be){let i=[e];i=i.concat(Array.from(e._s.values())),s.rootNodes=(s.filter?i.filter(r=>"$id"in r?r.$id.toLowerCase().includes(s.filter.toLowerCase()):Lo.toLowerCase().includes(s.filter.toLowerCase())):i).map(Uu)}}),n.on.getInspectorState(s=>{if(s.app===t&&s.inspectorId===be){const i=s.nodeId===vi?e:e._s.get(s.nodeId);if(!i)return;i&&(s.state=$u(i))}}),n.on.editInspectorState((s,i)=>{if(s.app===t&&s.inspectorId===be){const r=s.nodeId===vi?e:e._s.get(s.nodeId);if(!r)return ge(`store "${s.nodeId}" not found`,"error");const{path:o}=s;Ai(r)?o.unshift("state"):(o.length!==1||!r._customProperties.has(o[0])||o[0]in r.$state)&&o.unshift("$state"),Ht=!1,s.set(r,o,s.state.value),Ht=!0}}),n.on.editComponentState(s=>{if(s.type.startsWith("🍍")){const i=s.type.replace(/^🍍\s*/,""),r=e._s.get(i);if(!r)return ge(`store "${i}" not found`,"error");const{path:o}=s;if(o[0]!=="state")return ge(`Invalid path for store "${i}":
${o}
Only state can be modified.`);o[0]="$state",Ht=!1,s.set(r,o,s.state.value),Ht=!0}})})}function Ku(t,e){us.includes(fs(e.$id))||us.push(fs(e.$id)),vo({id:"dev.esm.pinia",label:"Pinia 🍍",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:us,app:t,settings:{logStoreChanges:{label:"Notify about new/deleted stores",type:"boolean",defaultValue:!0}}},n=>{const s=typeof n.now=="function"?n.now.bind(n):Date.now;e.$onAction(({after:o,onError:a,name:l,args:c})=>{const d=Ro++;n.addTimelineEvent({layerId:Ot,event:{time:s(),title:"🛫 "+l,subtitle:"start",data:{store:$e(e.$id),action:$e(l),args:c},groupId:d}}),o(f=>{Tt=void 0,n.addTimelineEvent({layerId:Ot,event:{time:s(),title:"🛬 "+l,subtitle:"end",data:{store:$e(e.$id),action:$e(l),args:c,result:f},groupId:d}})}),a(f=>{Tt=void 0,n.addTimelineEvent({layerId:Ot,event:{time:s(),logType:"error",title:"💥 "+l,subtitle:"end",data:{store:$e(e.$id),action:$e(l),args:c,error:f},groupId:d}})})},!0),e._customProperties.forEach(o=>{un(()=>mr(e[o]),(a,l)=>{n.notifyComponentUpdate(),n.sendInspectorState(be),Ht&&n.addTimelineEvent({layerId:Ot,event:{time:s(),title:"Change",subtitle:o,data:{newValue:a,oldValue:l},groupId:Tt}})},{deep:!0})}),e.$subscribe(({events:o,type:a},l)=>{if(n.notifyComponentUpdate(),n.sendInspectorState(be),!Ht)return;const c={time:s(),title:Bu(a),data:{store:$e(e.$id),...ju(o)},groupId:Tt};Tt=void 0,a===Ue.patchFunction?c.subtitle="⤵️":a===Ue.patchObject?c.subtitle="🧩":o&&!Array.isArray(o)&&(c.subtitle=o.type),o&&(c.data["rawEvent(s)"]={_custom:{display:"DebuggerEvent",type:"object",tooltip:"raw DebuggerEvent[]",value:o}}),n.addTimelineEvent({layerId:Ot,event:c})},{detached:!0,flush:"sync"});const i=e._hotUpdate;e._hotUpdate=Me(o=>{i(o),n.addTimelineEvent({layerId:Ot,event:{time:s(),title:"🔥 "+e.$id,subtitle:"HMR update",data:{store:$e(e.$id),info:$e("HMR update")}}}),n.notifyComponentUpdate(),n.sendInspectorTree(be),n.sendInspectorState(be)});const{$dispose:r}=e;e.$dispose=()=>{r(),n.notifyComponentUpdate(),n.sendInspectorTree(be),n.sendInspectorState(be),n.getSettings().logStoreChanges&&ge(`Disposed "${e.$id}" store 🗑`)},n.notifyComponentUpdate(),n.sendInspectorTree(be),n.sendInspectorState(be),n.getSettings().logStoreChanges&&ge(`"${e.$id}" store installed 🆕`)})}let Ro=0,Tt;function Io(t,e){const n=e.reduce((s,i)=>(s[i]=J(t)[i],s),{});for(const s in n)t[s]=function(){const i=Ro,r=new Proxy(t,{get(...o){return Tt=i,Reflect.get(...o)},set(...o){return Tt=i,Reflect.set(...o)}});return n[s].apply(r,arguments)}}function Hu({app:t,store:e,options:n}){if(!e.$id.startsWith("__hot:")){if(n.state&&(e._isOptionsAPI=!0),typeof n.state=="function"){Io(e,Object.keys(n.actions));const s=e._hotUpdate;J(e)._hotUpdate=function(i){s.apply(this,arguments),Io(e,Object.keys(i._hmrPayload.actions))}}Ku(t,e)}}function Wu(){const t=Wi(!0),e=t.run(()=>Ns({}));let n=[],s=[];const i=Me({install(r){mn(i),i._a=r,r.provide(xo,i),r.config.globalProperties.$pinia=i,as&&Vu(r,i),s.forEach(o=>n.push(o)),s=[]},use(r){return!this._a&&!vu?s.push(r):n.push(r),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return as&&typeof Proxy<"u"&&i.use(Hu),i}function Oo(t,e){for(const n in e){const s=e[n];if(!(n in t))continue;const i=t[n];It(i)&&It(s)&&!ae(s)&&!Ke(s)?t[n]=Oo(i,s):t[n]=s}return t}const Gu=()=>{};function To(t,e,n,s=Gu){t.push(e);const i=()=>{const r=t.indexOf(e);r>-1&&(t.splice(r,1),s())};return!n&&La()&&Ra(i),i}function Wt(t,...e){t.slice().forEach(n=>{n(...e)})}function xi(t,e){t instanceof Map&&e instanceof Map&&e.forEach((n,s)=>t.set(s,n)),t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const s=e[n],i=t[n];It(i)&&It(s)&&t.hasOwnProperty(n)&&!ae(s)&&!Ke(s)?t[n]=xi(i,s):t[n]=s}return t}const qu=Symbol("pinia:skipHydration");function Ju(t){return!It(t)||!t.hasOwnProperty(qu)}const{assign:je}=Object;function Mo(t){return!!(ae(t)&&t.effect)}function ko(t,e,n,s){const{state:i,actions:r,getters:o}=e,a=n.state.value[t];let l;function c(){!a&&!s&&(n.state.value[t]=i?i():{});const d=br(s?Ns(i?i():{}).value:n.state.value[t]);return je(d,r,Object.keys(o||{}).reduce((f,g)=>(g in d&&console.warn(`[🍍]: A getter cannot have the same name as another state property. Rename one of them. Found with "${g}" in store "${t}".`),f[g]=Me(fi(()=>{mn(n);const w=n._s.get(t);return o[g].call(w,w)})),f),{}))}return l=_i(t,c,e,n,s,!0),l.$reset=function(){const f=i?i():{};this.$patch(g=>{je(g,f)})},l}function _i(t,e,n={},s,i,r){let o;const a=je({actions:{}},n);if(!s._e.active)throw new Error("Pinia destroyed");const l={deep:!0};l.onTrigger=m=>{c?w=m:c==!1&&!N._hotUpdating&&(Array.isArray(w)?w.push(m):console.error("🍍 debuggerEvents should be an array. This is most likely an internal Pinia bug."))};let c,d,f=Me([]),g=Me([]),w;const I=s.state.value[t];!r&&!I&&!i&&(s.state.value[t]={});const v=Ns({});let O;function $(m){let y;c=d=!1,w=[],typeof m=="function"?(m(s.state.value[t]),y={type:Ue.patchFunction,storeId:t,events:w}):(xi(s.state.value[t],m),y={type:Ue.patchObject,payload:m,storeId:t,events:w});const p=O=Symbol();Bs().then(()=>{O===p&&(c=!0)}),d=!0,Wt(f,y,s.state.value[t])}const K=()=>{throw new Error(`🍍: Store "${t}" is built using the setup syntax and does not implement $reset().`)};function W(){o.stop(),f=[],g=[],s._s.delete(t)}function k(m,y){return function(){mn(s);const p=Array.from(arguments),E=[],H=[];function ce(T){E.push(T)}function j(T){H.push(T)}Wt(g,{args:p,name:m,store:N,after:ce,onError:j});let Z;try{Z=y.apply(this&&this.$id===t?this:N,p)}catch(T){throw Wt(H,T),T}return Z instanceof Promise?Z.then(T=>(Wt(E,T),T)).catch(T=>(Wt(H,T),Promise.reject(T))):(Wt(E,Z),Z)}}const Y=Me({actions:{},getters:{},state:[],hotState:v}),re={_p:s,$id:t,$onAction:To.bind(null,g),$patch:$,$reset:K,$subscribe(m,y={}){const p=To(f,m,y.detached,()=>E()),E=o.run(()=>un(()=>s.state.value[t],H=>{(y.flush==="sync"?d:c)&&m({storeId:t,type:Ue.direct,events:w},H)},je({},l,y)));return p},$dispose:W},N=Nn(je({_hmrPayload:Y,_customProperties:Me(new Set)},re));s._s.set(t,N);const L=s._e.run(()=>(o=Wi(),o.run(()=>e())));for(const m in L){const y=L[m];if(ae(y)&&!Mo(y)||Ke(y))i?rs(v.value,m,Bn(L,m)):r||(I&&Ju(y)&&(ae(y)?y.value=I[m]:xi(y,I[m])),s.state.value[t][m]=y),Y.state.push(m);else if(typeof y=="function"){const p=i?y:k(m,y);L[m]=p,Y.actions[m]=y,a.actions[m]=y}else Mo(y)&&(Y.getters[m]=r?n.getters[m]:y,os&&(L._getters||(L._getters=Me([]))).push(m))}if(je(N,L),je(J(N),L),Object.defineProperty(N,"$state",{get:()=>i?v.value:s.state.value[t],set:m=>{if(i)throw new Error("cannot set hotState");$(y=>{je(y,m)})}}),N._hotUpdate=Me(m=>{N._hotUpdating=!0,m._hmrPayload.state.forEach(y=>{if(y in N.$state){const p=m.$state[y],E=N.$state[y];typeof p=="object"&&It(p)&&It(E)?Oo(p,E):m.$state[y]=E}rs(N,y,Bn(m.$state,y))}),Object.keys(N.$state).forEach(y=>{y in m.$state||pi(N,y)}),c=!1,d=!1,s.state.value[t]=Bn(m._hmrPayload,"hotState"),d=!0,Bs().then(()=>{c=!0});for(const y in m._hmrPayload.actions){const p=m[y];rs(N,y,k(y,p))}for(const y in m._hmrPayload.getters){const p=m._hmrPayload.getters[y],E=r?fi(()=>(mn(s),p.call(N,N))):p;rs(N,y,E)}Object.keys(N._hmrPayload.getters).forEach(y=>{y in m._hmrPayload.getters||pi(N,y)}),Object.keys(N._hmrPayload.actions).forEach(y=>{y in m._hmrPayload.actions||pi(N,y)}),N._hmrPayload=m._hmrPayload,N._getters=m._getters,N._hotUpdating=!1}),as){const m={writable:!0,configurable:!0,enumerable:!1};["_p","_hmrPayload","_getters","_customProperties"].forEach(y=>{Object.defineProperty(N,y,{value:N[y],...m})})}return s._p.forEach(m=>{if(as){const y=o.run(()=>m({store:N,app:s._a,pinia:s,options:a}));Object.keys(y||{}).forEach(p=>N._customProperties.add(p)),je(N,y)}else je(N,o.run(()=>m({store:N,app:s._a,pinia:s,options:a})))}),N.$state&&typeof N.$state=="object"&&typeof N.$state.constructor=="function"&&!N.$state.constructor.toString().includes("[native code]")&&console.warn(`[🍍]: The "state" must be a plain object. It cannot be
	state: () => new MyClass()
Found in store "${N.$id}".`),I&&r&&n.hydrate&&n.hydrate(N.$state,I),c=!0,d=!0,N}function zu(t,e,n){let s,i;const r=typeof e=="function";typeof t=="string"?(s=t,i=r?n:e):(i=t,s=t.id);function o(a,l){const c=Uc();if(a=a||c&&cn(xo,null),a&&mn(a),!wi)throw new Error(`[🍍]: getActivePinia was called with no active Pinia. Did you forget to install pinia?
	const pinia = createPinia()
	app.use(pinia)
This will fail in production.`);a=wi,a._s.has(s)||(r?_i(s,e,i,a):ko(s,i,a),o._pinia=a);const d=a._s.get(s);if(l){const f="__hot:"+s,g=r?_i(f,e,i,a,!0):ko(f,je({},i),a,!0);l._hotUpdate(g),delete a.state.value[f],a._s.delete(f)}if(os&&c&&c.proxy&&!l){const f=c.proxy,g="_pStores"in f?f._pStores:f._pStores={};g[s]=d}return d}return o.$id=s,o}class Do{constructor(){this.newEntry=new Ye({})}}const Xu={latestConnectionError:"",lastKeePassRPCRefresh:0,ActiveKeePassDatabaseIndex:-1,KeePassDatabases:[],PasswordProfiles:[],notifications:[],connected:!1,connectedWebsocket:!1,currentSearchTerm:null,loginsFound:!1,searchResults:null,saveState:new Do,generatedPassword:"",saveEntryResult:{result:null,receivedAt:new Date,fileName:null,uuid:null},entryUpdateStartedAtTimestamp:0};var Pi=(t=>(t.Event="event",t.Websocket="websocket",t))(Pi||{});function Yu(t,e){return zu(t,e)}const No=Yu("kee",{state:()=>Xu,getters:{showGeneratePasswordLink:t=>t.connected,showMatchedLogins:t=>!!t.loginsFound,showNotifications:t=>t.notifications&&!!t.notifications.length,databaseIsOpen:t=>t.connected&&!!t.KeePassDatabases.length,databaseName:t=>{if(t.KeePassDatabases&&t.KeePassDatabases.length&&t.ActiveKeePassDatabaseIndex>=0){const e=t.KeePassDatabases[t.ActiveKeePassDatabaseIndex];return e.name?e.name:e.fileName.replace(/^.*[\\/]/,"")}return""},connectionStatus(t){return t.connected?t.KeePassDatabases.length>1?vs("multiplePasswordSourcesEnabled",[t.KeePassDatabases.length.toString()]):t.KeePassDatabases.length==1?this.databaseName:Xe("notifyBarLoginToKeePassButton_tip"):Xe("notifyBarLaunchKeePassButton_tip")},connectionStatusDetail(t){if(t.connected){if(t.KeePassDatabases.length>1)return vs("loggedInMultiple_tip",[t.KeePassDatabases.length.toString(),this.databaseName]);if(t.KeePassDatabases.length==1)return vs("loggedIn_tip",this.databaseName)}return Xe("notifyBarLaunchKeePass_label")},showOpenKeePassButton:t=>{if(t.connectedWebsocket){const e=t.KeePassDatabases.some(s=>s.sessionType===Pi.Websocket),n=t.KeePassDatabases.some(s=>s.sessionType===Pi.Websocket&&s.sessionFeatures.indexOf("KPRPC_OPEN_AND_FOCUS_DATABASE")>=0);return!!(!e||n)}else return!1}},actions:{updateActiveKeePassDatabaseIndex(t){this.$patch({ActiveKeePassDatabaseIndex:t})},updateConnected(t){this.$patch({connected:t})},updateConnectedWebsocket(t){this.$patch({connectedWebsocket:t})},updateCurrentSearchTerm(t){this.$patch({currentSearchTerm:t})},updateKeePassDatabases(t){this.$patch({KeePassDatabases:t})},updateLastKeePassRPCRefresh(t){this.$patch({lastKeePassRPCRefresh:t})},updateLatestConnectionError(t){this.$patch({latestConnectionError:t})},updateLoginsFound(t){this.$patch({loginsFound:t||!1})},updateNotifications(t){this.$patch({notifications:t})},updatePasswordProfiles(t){this.$patch({PasswordProfiles:t})},updateGeneratedPassword(t){this.$patch({generatedPassword:t})},updateSubmittedData(t){this.saveState||new Do,this.$patch({saveState:{submittedData:t||null}})},updateSaveState(t){this.$patch({saveState:t||null})},updateSearchResults(t){this.$patch({searchResults:t||null})},updateSearchResultWithFullDetails(t){const e=JSON.parse(JSON.stringify(this.searchResults)),n=t.uuid;for(const s of e)if(s.uuid===n){s.fullDetails=t||null;break}this.$patch({searchResults:e})},addNotification(t){const e=JSON.parse(JSON.stringify(this.notifications));e.push(t),this.$patch({notifications:e})},updateSaveEntryResult(t){this.$patch({saveEntryResult:t||null})},removeFieldFromActiveEntry(t){const e=JSON.parse(JSON.stringify(this.saveState.newEntry.fields)),n=e.findIndex(r=>r.type==="text"),s=e.findIndex(r=>r.type==="password"),i=e.findIndex(r=>r.uuid===(t||null));if(e.splice(i,1),i===n){const r=e.findIndex(a=>a.type==="text");if(r<0)return;const o=e.splice(r,1)[0];e.splice(i,0,new Fe({...o,name:"KeePass username"}))}else if(i===s){const r=e.findIndex(a=>a.type==="password");if(r<0)return;const o=e.splice(r,1)[0];e.splice(i,0,new Fe({...o,name:"KeePass password"}))}this.$patch({saveState:{newEntry:{fields:e}}})},updateEntryUpdateStartedAtTimestamp(t){this.$patch({entryUpdateStartedAtTimestamp:t||null})}}});let Si,Ci;function Qu(){return Ci||(Ci=Wu()),Si||(Si=pu(Vl),Si.use(Ci)),No()}const Uo=No();class Zu{constructor(e,n,s,i,r,o,a){this.myPort=e,this.parentFrameId=n,this.formUtils=s,this.formSaving=i,this.Logger=r,this.config=o,this.matchFinder=a,this.findLoginOp={},this.matchResult=new aa,this.formFinderTimer=null,this.keeFieldIcon=new oa(e,n,s,this.createMatchedLoginsPanelNearNode.bind(this))}executePrimaryAction(){this.matchResult.entries&&this.matchResult.entries.length>0&&this.matchResult.mostRelevantFormIndex!=null&&this.matchResult.mostRelevantFormIndex>=0&&(this.matchResult.entries[this.matchResult.mostRelevantFormIndex].length==1?(this.fillAndSubmit(!1,this.matchResult.mostRelevantFormIndex,0),this.closeMatchedLoginsPanel()):this.matchResult.entries[this.matchResult.mostRelevantFormIndex].length>1&&(this.closeMatchedLoginsPanel(),this.matchedLoginsPanelStub=new zt(pt.MatchedLogins,null,this.parentFrameId),this.matchedLoginsPanelStub.createPanel()))}createMatchedLoginsPanelInCenter(e){this.closeMatchedLoginsPanel(),this.matchedLoginsPanelStub=new zt(pt.MatchedLogins,null,e),this.matchedLoginsPanelStub.createPanel()}createMatchedLoginsPanelNearNode(e){this.closeMatchedLoginsPanel(),this.matchedLoginsPanelStub=new zt(pt.MatchedLogins,e,this.parentFrameId),this.matchedLoginsPanelStub.createPanel(),this.matchedLoginsPanelStubRaf=requestAnimationFrame(()=>this.updateMatchedLoginsPanelPosition())}closeMatchedLoginsPanel(){this.matchedLoginsPanelStub&&this.matchedLoginsPanelStub.closePanel(),this.matchedLoginsPanelStub=null,cancelAnimationFrame(this.matchedLoginsPanelStubRaf)}updateMatchedLoginsPanelPosition(){this.matchedLoginsPanelStub.updateBoundingClientRect(),this.matchedLoginsPanelStubRaf=requestAnimationFrame(()=>this.updateMatchedLoginsPanelPosition())}calculateFieldMatchScore(e,n,s,i,r){const o=e.field;let a=1;return o.type!==n.type?0:(o.locators[0].id!=null&&o.locators[0].id!=null&&o.locators[0].id!=""&&o.locators[0].id==n.locators[0].id?a+=50:i.punishWrongIDAndName&&n.locators[0].id&&(a-=5),o.locators[0].name!=null&&o.locators[0].name!=null&&o.locators[0].name!=""&&o.locators[0].name==n.locators[0].name?a+=40:i.punishWrongIDAndName&&n.locators[0].name&&(a-=5),o.locators[0].type==="radio"&&o.value!=null&&o.value!=null&&o.value!=""&&o.value==n.value&&(a+=30),r===void 0&&this.formUtils.isDOMElementVisible(e.DOMelement)&&(r=!0),a+=r?35:0,a)}fillMatchedFields(e,n,s,i){e.sort(function(o,a){return a.score-o.score});const r=[];for(;e.length>0&&e[0].score>0;){const o=e[0].formFieldIndex,a=e[0].dataFieldIndex,l=s[o],c=n[a],d=l.DOMelement,f=this.getFormFieldCurrentValue(d,l.field.locators[0].type);i&&f&&f!==d.keeInitialDetectedValue?this.Logger.info("Not filling field because it's not empty and was edited by user since last load/fill"):i&&f&&!Ie.current.autoFillFieldsWithExistingValue?this.Logger.info("Not filling field because it's not empty and user preference is to prevent automatic fill"):(this.Logger.info("We will populate field "+o+" (id:"+l.field.locators[0].id+")"),this.fillASingleField(d,l.field.locators[0].type,c.value)),r.push({id:l.field.locators[0].id,DOMelement:d,name:l.field.locators[0].name,value:c.value}),e=e.filter(function(g){return g.dataFieldIndex!=a&&g.formFieldIndex!=o}),e.sort(function(g,w){return w.score-g.score})}return r}getFormFieldCurrentValue(e,n){let s=e.value;return e instanceof HTMLInputElement&&n==="checkbox"&&(e.checked?s="KEEFOX_CHECKED_FLAG_TRUE":s="KEEFOX_CHECKED_FLAG_FALSE"),s}fillASingleField(e,n,s){n=="select-one"?e.value=s:e instanceof HTMLInputElement&&n=="checkbox"?s=="KEEFOX_CHECKED_FLAG_TRUE"?e.checked=!0:e.checked=!1:e instanceof HTMLInputElement&&n=="radio"?e.checked=!0:e.value=s,e.keeInitialDetectedValue=s,e.dispatchEvent(new UIEvent("input",{view:window,bubbles:!0,cancelable:!0})),e.dispatchEvent(new UIEvent("change",{view:window,bubbles:!0,cancelable:!0}))}fillManyFormFields(e,n,s,i,r){if(this.Logger.debug("_fillManyFormFields started"),e==null||e==null||n==null||n==null)return;this.Logger.debug("We've received the data we need"),this.Logger.info("Filling form fields for page "+s);const o=[];for(let a=0;a<e.length;a++)for(let l=0;l<n.length;l++){const c=this.calculateFieldMatchScore(e[a],n[l],s,i);this.Logger.debug("Suitability of putting data field "+l+" into form field "+a+" (id: "+e[a].field.locators[0].id+") is "+c),o.push({score:c,dataFieldIndex:l,formFieldIndex:a})}return this.fillMatchedFields(o,n,e,r)}initMatchResult(e){this.matchResult.UUID="",this.matchResult.entries=[],this.matchResult.mostRelevantFormIndex=null,this.matchResult.mustAutoFillForm=!1,this.matchResult.cannotAutoFillForm=!1,this.matchResult.mustAutoSubmitForm=!1,this.matchResult.cannotAutoSubmitForm=!1,e.UUID!=null&&e.UUID!=null&&e.UUID!=""&&(this.matchResult.UUID=e.UUID,this.matchResult.dbFileName=e.dbFileName,this.matchResult.mustAutoFillForm=!0,e.mustAutoSubmitForm&&(this.matchResult.mustAutoSubmitForm=!0)),this.matchResult.doc=window.document,this.matchResult.formReadyForSubmit=!1,this.matchResult.autofillOnSuccess=e.autofillOnSuccess,this.matchResult.autosubmitOnSuccess=e.autosubmitOnSuccess,this.matchResult.notifyUserOnSuccess=e.notifyUserOnSuccess,this.matchResult.wrappers=[],this.matchResult.allMatchingLogins=[],this.matchResult.formRelevanceScores=[],this.matchResult.submitTargets=[],this.matchResult.usernameIndexArray=[],this.matchResult.passwordFieldsArray=[],this.matchResult.otherFieldsArray=[],this.matchResult.requestCount=0,this.matchResult.responseCount=0,this.matchResult.requestIds=[]}findMatchesInThisFrame(e={}){this.semanticWhitelistCache={},this.semanticBlacklistCache={},this.formFinderTimer!==null&&(clearTimeout(this.formFinderTimer),this.formFinderTimer=null),window.document.forms.length>50&&this.Logger.debug("Too many forms on this page. Assuming it is not a login page and avoiding looking for login forms in order to avoid performance impact.");let n=new Array;for(let a=0;a<window.document.forms.length;a++)n.push(window.document.forms.item(a));const s=this.scanForOrphanedFields(window.document);if(s&&(n=Array.prototype.slice.call(n),n.push(s)),!n||n.length==0){this.Logger.info("No forms found on this page.");return}const i=new URL(window.document.URL);i.hostname=punycode.toUnicode(i.hostname),this.Logger.info("Finding matches in a document. readyState: "+window.document.readyState),this.initMatchResult(e),this.matchResult.forms=n;const r=Ie.siteConfigFor(i.href);this.Logger.debug("findMatches processing "+n.length+" forms");let o=!1;for(let a=0;a<n.length;a++){const l=n[a];this.matchResult.entries[a]=[],this.matchResult.formRelevanceScores[a]=0,this.Logger.debug("about to get form fields");let c;try{c=this.formUtils.getFormFields(l,!1,50)}catch($){this.Logger.debug("Lost interest in this form after finding too many fields"+$);continue}const d=c.actualUsernameIndex,f=c.pwFields,g=c.otherFields;let w=null;if(w=Ie.isFormInteresting(l,r,g.map($=>$.field)),w===!1){this.Logger.debug("Lost interest in this form after inspecting field names and IDs");continue}const I=f==null||f.length<=0||f[0]==null,v=d<0||g==null||g.length<=0||g[d]==null;if(I&&(v||w!==!0)){this.Logger.debug("No password field found in this form and either there are no other fields or no whitelisted text field or form element");continue}let O;I?O=g[d].DOMelement:O=f[0].DOMelement,this.attachSubmitHandlers(l,O,a),this.matchResult.usernameIndexArray[a]=d,this.matchResult.passwordFieldsArray[a]=f,this.matchResult.otherFieldsArray[a]=g,this.matchResult.submitTargets[a]=O,o?(this.Logger.debug("form["+a+"]: reusing entries from last form."),this.findLoginOp.formIndexes.push(a)):(this.findLoginOp.forms=n,this.findLoginOp.formIndexes=[a],this.findLoginOp.wrappedBy=this.matchResult,this.matchResult.wrappers[a]=this.findLoginOp,this.matchResult.requestCount++,this.matchFinder(i.href),o=!0)}}async attachSubmitHandlers(e,n,s){try{await Promise.resolve();const i=performance.now(),r=this.findSubmitButton(e,n);this.formSaving.addSubmitHandler(r,e),le.info("Submit handlers attached asynchronously to form "+s+" in "+(performance.now()-i)+"ms")}catch(i){le.warn("Exception while adding submit handler. Message: "+i.message)}}scanForOrphanedFields(e){const n=new Date().getTime(),s=[];let i=null;const r=e.getElementsByTagName("input");for(const a of r)a.form||s.push(a);s.length>0&&(i={elements:s,id:"Kee-pseudo-form",name:"Kee-pseudo-form",ownerDocument:e,getElementsByTagName:function(){return this.elements},querySelectorAll:function(){return[]},submit:function(){},offsetParent:!0,addEventListener:function(){},removeEventListener:function(){}});const o=new Date().getTime();return this.Logger.debug("scanForOrphanedFields took: "+(o-n)),i}findLoginsResultHandler(e){if(!e)return;const n=e.filter(s=>Ye.getUsernameField(s)||Ye.getPasswordField(s));this.matchResult=this.getRelevanceOfLoginMatchesAgainstAllForms(n,this.findLoginOp,this.matchResult),this.fillAndSubmit(!0)}getRelevanceOfLoginMatchesAgainstAllForms(e,n,s){const i=JSON.stringify(e);let r=!1;for(let o=0;o<n.forms.length;o++){if(n.formIndexes.indexOf(o)==-1||(s.entries[o]=JSON.parse(i),s.entries[o].length==0))continue;this.Logger.info("match found!");const a=this.formUtils.isDOMElementVisible(s.submitTargets[o]);this.Logger.debug("formVisible: "+a);const l={other:s.otherFieldsArray[o].map(c=>this.formUtils.isDOMElementVisible(c.DOMelement)),password:s.passwordFieldsArray[o].map(c=>this.formUtils.isDOMElementVisible(c.DOMelement))};for(let c=0;c<s.entries[o].length;c++){const f={punishWrongIDAndName:Uo.KeePassDatabases.find(I=>I.fileName===s.entries[o][c].database.fileName).sessionFeatures.indexOf("KPRPC_FIELD_DEFAULT_NAME_AND_ID_EMPTY")>=0},{score:g,lowFieldMatchRatio:w}=this.calculateRelevanceScore(s.entries[o][c],s.passwordFieldsArray[o],s.otherFieldsArray[o],s.currentPage,a,f,l);s.entries[o][c].relevanceScore=g,s.entries[o][c].lowFieldMatchRatio=w,s.entries[o][c].formIndex=o,s.entries[o][c].entryIndex=c,(!r||s.entries[o][c].relevanceScore>s.allMatchingLogins[c].relevanceScore)&&(this.Logger.debug("Higher relevance score found for entry "+c+" with formIndex "+s.entries[o][c].formIndex+" ("+n.forms[o].id+")"),s.allMatchingLogins[c]=s.entries[o][c])}r=!0,s.entries[o].forEach(function(c){c.relevanceScore>s.formRelevanceScores[o]&&(s.formRelevanceScores[o]=c.relevanceScore)}),this.Logger.debug("Relevance of form "+o+" ("+n.forms[o].id+") is "+s.formRelevanceScores[o])}return s}getMostRelevantForm(e){const n=this.matchResult;if(!n)return{bestFormIndex:0,bestRelevanceScore:0,bestFindMatchesResult:void 0};let s=0;return e>=0?s=e:n.formRelevanceScores.forEach((i,r)=>{this.Logger.debug("Relevance of form is "+i),i>n.formRelevanceScores[s]&&(s=r)}),this.Logger.debug("The most relevant form is #"+s),{bestFormIndex:s,bestRelevanceScore:n.formRelevanceScores[s],bestFindMatchesResult:n}}fillAndSubmit(e,n,s){this.Logger.debug("fillAndSubmit started. automated: "+e+", formIndex: "+n+", entryIndex: "+s);const i=this.matchResult;let r;if(!i)return;const o=!e&&(i.mostRelevantFormIndex!==null&&i.mostRelevantFormIndex>=0||typeof n<"u")&&typeof s<"u";o||(i.mostRelevantFormIndex=this.getMostRelevantForm().bestFormIndex),n!==null&&n>=0&&(i.mostRelevantFormIndex=n);const a=i.forms[i.mostRelevantFormIndex],l=i.passwordFieldsArray[i.mostRelevantFormIndex],c=i.otherFieldsArray[i.mostRelevantFormIndex],d=this.sortMatchedEntries(i.entries[i.mostRelevantFormIndex]),f=this.flagUserPreferredEntry(d);!o&&i.entries[i.mostRelevantFormIndex].length>0&&(this.myPort.postMessage({entries:f}),this.keeFieldIcon.addKeeIconToFields(l,c,f));let g=null,w={fill:!1,submit:!1},I=!1;if(i.cannotAutoFillForm=!1,i.cannotAutoSubmitForm=!1,e&&i.autofillOnSuccess===!1&&(i.cannotAutoFillForm=!0),e&&i.autosubmitOnSuccess===!1&&(i.cannotAutoSubmitForm=!0),!i.cannotAutoFillForm){this.Logger.debug("We are allowed to auto-fill this form."),s>=0&&(g=i.entries[i.mostRelevantFormIndex][s],i.UUID=null,i.dbFileName=null);let v=!1;if(g==null&&i.entries[i.mostRelevantFormIndex].length==1)g=i.entries[i.mostRelevantFormIndex][0],v=!0;else if(i.UUID!=null&&i.UUID!=null&&i.UUID!=""){this.Logger.debug("We've been told to use an entry with this UUID: "+i.UUID);for(let O=0;O<i.entries[i.mostRelevantFormIndex].length;O++)if(i.entries[i.mostRelevantFormIndex][O].uuid==i.UUID){g=i.entries[i.mostRelevantFormIndex][O];break}g==null&&this.Logger.warn("Could not find the required KeePass entry. Maybe the website redirected you to a different domain or hostname?")}else g==null&&(!i.entries[i.mostRelevantFormIndex]||!i.entries[i.mostRelevantFormIndex].length)?this.Logger.debug("No entries for form."):g==null&&(this.Logger.debug("Multiple entries for form, so using preferred or most relevant."),g=f.find(O=>O.isPreferredMatch)||f[0],I=!0,v=!0);if(e&&v&&g!=null&&(g.relevanceScore<1?(this.Logger.info("Our selected entry is not relevant enough to exceed our threshold so will not be auto-filled."),g=null):g.lowFieldMatchRatio&&(this.Logger.info("Our selected entry has a low field match ratio so will not be auto-filled."),g=null)),g!=null){const O=o||(e&&I&&!this.config.autoFillFormsWithMultipleMatches?!1:this.config.autoFillForms),$=o?this.config.autoSubmitMatchedForms:this.config.autoSubmitForms;if(w={fill:O,submit:$},o||(g.alwaysAutoFill&&(w.fill=!0),g.neverAutoFill&&(w.fill=!1)),(!o||!this.config.manualSubmitOverrideProhibited)&&(g.alwaysAutoSubmit&&(w.submit=!0),g.neverAutoSubmit&&(w.submit=!1)),w.fill||i.mustAutoFillForm){this.Logger.debug("Going to auto-fill a form");const W={punishWrongIDAndName:Uo.KeePassDatabases.find(re=>re.fileName===g.database.fileName).sessionFeatures.indexOf("KPRPC_FIELD_DEFAULT_NAME_AND_ID_EMPTY")>=0},k=this.fillManyFormFields(c,g.fields.filter(re=>re.type!=="password"),-1,W,e),Y=this.fillManyFormFields(l,g.fields.filter(re=>re.type==="password"),-1,W,e);i.formReadyForSubmit=!0,i.lastFilledPasswords=Y,i.lastFilledOther=k,Y&&Y.length>0?r=Y[0].DOMelement:k&&k.length>0&&(r=k[0].DOMelement),this.formSaving.updateMatchResult(i)}}}i.formReadyForSubmit&&(i.UUID==null||i.UUID==null||i.UUID=="")&&(this.Logger.debug("Syncing UUID to: "+g.uuid),i.UUID=g.uuid,i.dbFileName=g.database.fileName),!i.cannotAutoSubmitForm&&(w.submit||i.mustAutoSubmitForm)&&i.formReadyForSubmit?(this.Logger.info("Auto-submitting form..."),this.submitForm(a,r)):o?this.Logger.debug("Matched entry request is not being auto-submitted."):this.matchResult.allMatchingLogins.length>0?e?this.Logger.debug("Automatic form fill complete."):this.Logger.debug("Manual form fill complete."):this.Logger.info("Nothing to fill.")}sortMatchedEntries(e){return e.map(n=>new Ye({...n})).sort((n,s)=>s.relevanceScore-n.relevanceScore)}flagUserPreferredEntry(e){const n=new URL(window.document.URL);n.hostname=punycode.toUnicode(n.hostname);const s=Ie.siteConfigFor(n.href);return e.map(i=>new Ye({...i,isPreferredMatch:s.preferredEntryUuid===i.uuid}))}findSubmitButton(e,n){const s=[];let I=0;const v=(p,E)=>this.commonAncestorDistance(p,E,O),O=new Map,$=this.formUtils;function K(p,E){I>E+60+100||(($.isDOMElementVisible(p)||!$.isDOMElementVisible(n))&&(E+=60),I>E+100)||(s.push({distance:v(p,n),element:p,score:E}),I=E)}function W(p){var H;const E=[];return p.hasAttribute("aria-label")&&E.push(p.getAttribute("aria-label").toLowerCase()),(H=p.getAttribute("aria-labelledby"))==null||H.trim().split(" ").forEach(ce=>{if(ce){const j=e.ownerDocument.getElementById(ce);j&&j.innerText&&E.push(j.innerText.toLowerCase())}}),E}if(Array.from(e.ownerDocument.getElementsByTagName("button")).forEach(p=>{if(p.isConnected&&(!p.type||p.type!="reset")){const E=[];p.name&&E.push(p.name.toLowerCase()),p.textContent&&E.push(p.textContent.toLowerCase()),p.value&&E.push(p.value.toLowerCase()),E.push(...W(p));let H=this.scoreAdjustmentForMagicWords(E,50,this.semanticWhitelistCache,this.semanticBlacklistCache);H+=p.form&&p.form==e?60:40,K(p,H)}}),Array.from(e.getElementsByTagName("input")).forEach(p=>{if(p.isConnected&&p.type!=null){let E=0;if(p.type=="submit"||p.type=="button"){p.name&&(E+=this.scoreAdjustmentForMagicWords([p.name.toLowerCase()],50,this.semanticWhitelistCache,this.semanticBlacklistCache));const H=[];p.value&&H.push(p.value.toLowerCase()),H.push(...W(p)),H.length>0&&(E+=this.scoreAdjustmentForMagicWords(H,40,this.semanticWhitelistCache,this.semanticBlacklistCache)),p.id&&(E+=this.scoreAdjustmentForMagicWords([p.id.toLowerCase()],20,this.semanticWhitelistCache,this.semanticBlacklistCache))}if(p.type=="submit"||p.type=="button"||p.type=="image"){let H=E;H+=p.type=="button"?30:p.type=="image"?40:50,K(p,H)}}}),Array.from(e.ownerDocument.querySelectorAll("[role=button]:not(button)")).forEach(p=>{if(!p.isConnected)return;const E=[];p.name&&E.push(p.name.toLowerCase()),p.id&&E.push(p.id.toLowerCase()),p.title&&E.push(p.title.toLowerCase()),p.innerText&&E.push(p.innerText.toLowerCase()),p.dataSet&&p.dataSet.length>0&&p.dataSet.tooltip&&E.push(p.dataSet.tooltip.toLowerCase()),E.push(...W(p));let H=this.scoreAdjustmentForMagicWords(E,50,this.semanticWhitelistCache,this.semanticBlacklistCache);H+=p.form&&p.form==e?20:10,K(p,H)}),s.length<=0)return null;if(s.length===1)return s[0].element;const k=s.sort((p,E)=>p.distance>E.distance?-1:p.distance<E.distance?1:0),Y=k[0].distance-k[k.length-1].distance,re=Math.min(100,20*Y);let N=1/k.length,L=k[0].distance;k.forEach((p,E,H)=>{p.distance<L&&(N=(E+1)/H.length,L=p.distance),p.score+=N*re});let m=k[0].score,y=k[0].element;for(let p=1;p<k.length;p++)k[p].score>m&&(m=k[p].score,y=k[p].element);return y}scoreAdjustmentForMagicWords(e,n,s,i){const r=["submit","login","enter","log in","signin","sign in","next","continue"],o=["reset","cancel","back","abort","undo","exit","empty","clear","captcha","totp","forgot","dismiss","delete","show","reveal"];let a=!1,l=!1;for(let c=0;c<e.length&&!a;c++){if(!e[c])continue;const d=e[c].trim();if(d){if(s[d]===!0){a=!0;break}if(s[d]!==!1)for(let f=0;f<r.length;f++)if(d.indexOf(r[f])>=0){a=!0,s[d]=!0;break}else s[d]=!1}}for(let c=0;c<e.length&&!l;c++){if(!e[c])continue;const d=e[c].trim();if(d){if(i[d]===!0){l=!0;break}if(i[d]!==!1)for(let f=0;f<o.length;f++)if(d.indexOf(o[f])>=0){l=!0,i[d]=!0;break}else i[d]=!1}}return a&&l?0:l?-1*n:a?n:0}commonAncestorDistance(e,n,s){let i=1,r=!1;const o=[];let a=0;for(;e=e.parentElement;){const l=s.get(e);if(l!==void 0){i+=l,a=l+1,r=!0;break}if(o.push(e),e.contains(n)){r=!0;break}i++}if(r){if(o.length>0)for(let l=a;l<i&&o.length>0;l++){const c=o.pop();s.set(c,l)}return i}else return 9007199254740991}submitForm(e,n){const s=this.findSubmitButton(e,n);this.formSaving.removeAllSubmitHandlers(),s!=null?(this.Logger.debug("Submiting using element: "+s.name+": "+s.id),s.click()):(this.Logger.debug("Submiting using form"),e.submit())}calculateRelevanceScore(e,n,s,i,r,o,a){let l=0,c=!1;l+=e.matchAccuracy,r||(l-=20);const d=.501,[f,g]=this.determineRelevanceScores("other",s,e.fields.filter(m=>m.type!=="password"),i,o,a.other),[w,I]=this.determineRelevanceScores("password",n,e.fields.filter(m=>m.type==="password"),i,o,a.password),v=f+w,O=n.concat(s).filter(m=>m.field.locators[0].id||m.field.locators[0].name||m.field.value).length,$=e.fields.filter(m=>m.locators[0].id||m.locators[0].name||m.value).length,K=n.concat(s).filter(m=>(m.field.type==="password"||m.field.type==="text")&&(m.field.locators[0].id||m.field.locators[0].name)).length,W=e.fields.filter(m=>(m.type==="password"||m.type==="text")&&(m.locators[0].id||m.locators[0].name||m.value)).length,k=g.filter(m=>m===!0).length+I.filter(m=>m===!0).length,Y=n.filter(m=>{var y;return(y=m.field.locators[0].autocompleteValues)==null?void 0:y.some(p=>p==="new-password")}).length,re=Math.min(W+Y,k)/Math.max(1,K);this.Logger.debug("formFieldCount: "+O+", loginFieldCount: "+$+", loginFieldCountForAutofill: "+W+", formFieldCountForAutofill: "+K+", formMatchedFieldCountForAutofill: "+k+", numberOfNewPasswordFields: "+Y+", fieldMatchRatio: "+re),re<d&&(this.Logger.info(e.uuid+" will be forced to not auto-fill because the form field match ratio ("+re+") is not high enough."),c=!0);const L=v/Math.max(O,$)/(Math.abs(O-$)+1);return l+=L,this.Logger.info("Relevance for "+e.uuid+" is: "+l),{score:l,lowFieldMatchRatio:c}}determineRelevanceScores(e,n,s,i,r,o){var d;let a=0;const l=1,c=[];for(let f=0;f<n.length;f++){let g=0;const w=n[f].field;(d=w.locators[0].autocompleteValues)!=null&&d.some(I=>I==="new-password")&&(c[f]=!0);for(let I=0;I<s.length;I++){const v=this.calculateFieldMatchScore(n[f],s[I],i,r,o[f]);this.Logger.debug("Suitability of putting "+e+" field "+I+" into form field "+f+" (id: "+w.locators[0].id+") is "+v),v>g&&(g=v);const O=v-(o[f]?0:10);(w.type==="text"||w.type==="password")&&O>=l&&s[I].value&&!c[f]&&(c[f]=!0),(n[f].highestScore==null||v>n[f].highestScore)&&(n[f].highestScore=v)}a+=g}return[a,c]}removeKeeIconFromAllFields(){this.keeFieldIcon.removeKeeIconFromAllFields()}}class ef{}class tf{constructor(e){this.findLoginOps=[],this.matchResults=[],this.Logger=e}countAllDocuments(e){if(!this.isUriWeCanFill(e.location))return 0;let n=1;if(e.frames.length>0){const s=e.frames;for(let i=0;i<s.length;i++)n+=this.countAllDocuments(s[i])}return n}isUriWeCanFill(e){return e.protocol=="http:"||e.protocol=="https:"||e.protocol=="file:"}isATextFormFieldType(e){return!(e=="checkbox"||e=="select-one"||e=="radio"||e=="password"||e=="hidden"||e=="submit"||e=="button"||e=="file"||e=="image"||e=="reset")}isAKnownUsernameString(e){const n=e.toLowerCase();return n=="username"||n=="j_username"||n=="user_name"||n=="user"||n=="user-name"||n=="login"||n=="vb_login_username"||n=="name"||n=="user name"||n=="user id"||n=="user-id"||n=="userid"||n=="email"||n=="e-mail"||n=="id"||n=="form_loginname"||n=="wpname"||n=="mail"||n=="loginid"||n=="login id"||n=="login_name"||n=="openid_identifier"||n=="authentication_email"||n=="openid"||n=="auth_email"||n=="auth_id"||n=="authentication_identifier"||n=="authentication_id"||n=="customer_number"||n=="customernumber"||n=="onlineid"}getFormFields(e,n,s){var I;const i=[],r=[],o=[];let a=-1,l=-1,c=-1;const d=e.elements.length,f=d<2e3?d:2e3;for(let v=0;v<f;v++){if(o.length>s)throw new Error("Too many fields");if(e.elements[v].localName.toLowerCase()=="object"||e.elements[v].localName.toLowerCase()=="keygen"||e.elements[v].localName.toLowerCase()=="output"||e.elements[v].localName.toLowerCase()!="input"&&(e.elements[v].type==null||e.elements[v].type==null))continue;const O=e.elements[v].type.toLowerCase();if(O=="fieldset"||O!="password"&&!this.isATextFormFieldType(O)&&O!="checkbox"&&O!="radio"&&O!="select-one"||O=="radio"&&n&&e.elements[v].checked==!1||O=="password"&&n&&!e.elements[v].value||O=="select-one"&&n&&!e.elements[v].value)continue;this.Logger.debug(`processing field with domtype ${O}...`),o[o.length]={index:v,element:new ef,type:O};let $=e.elements[v].value;O=="checkbox"&&(e.elements[v].checked?$="KEEFOX_CHECKED_FLAG_TRUE":$="KEEFOX_CHECKED_FLAG_FALSE");const K=Fe.fromDOM(e.elements[v],O,$);o[o.length-1].element.field=K,o[o.length-1].element.DOMelement=e.elements[v],O=="password"&&a==-1&&(a=o.length-1),this.isATextFormFieldType(O)&&l==-1&&(this.isAKnownUsernameString(e.elements[v].name)||(I=K.locators[0].labels)!=null&&I.some(W=>this.isAKnownUsernameString(W)))&&(l=o.length-1),e.elements[v].keeInitialDetectedValue==null&&(e.elements[v].keeInitialDetectedValue=$)}l!=-1?c=l:a>0&&(c=a-1),this.Logger.debug("usernameIndex: "+c);let g=0,w=0;for(let v=0;v<o.length;v++)o[v].type=="password"?i[i.length]=o[v].element:(this.isATextFormFieldType(o[v].type)||o[v].type=="checkbox"||o[v].type=="radio"||o[v].type=="select-one")&&(r[r.length]=o[v].element,v==c?w=g:g++);return this.Logger.debug("actualUsernameIndex: "+w),this.Logger.debug("otherFields.length:"+r.length),{actualUsernameIndex:w,pwFields:i,otherFields:r}}isDOMElementVisible(e){return!(!e.offsetParent&&e.offsetHeight===0&&e.offsetWidth===0)}}class nf{constructor(e,n,s){this.myPort=e,this.SubmitHandlerAttachments=[],this.Logger=n,this.formUtils=s}addSubmitHandler(e,n){const s=i=>this.submitHandler(i,n);this.SubmitHandlerAttachments.push({target:e,form:n,handler:s}),e&&e.addEventListener("click",s),n.addEventListener("submit",s)}removeAllSubmitHandlers(){this.SubmitHandlerAttachments.forEach(e=>{e.target&&e.target.removeEventListener("click",e.handler),e.form.removeEventListener("submit",e.handler)}),this.SubmitHandlerAttachments=[]}updateMatchResult(e){this.matchResult=e}submitHandler(e,n){this.Logger.debug("submitHandler called"),this.removeAllSubmitHandlers();const s=n.ownerDocument,i=new URL(s.URL);if(i.hostname=punycode.toUnicode(i.hostname),Ie.siteConfigFor(i.href).preventSaveNotification)return;let o=!1,a=!1;const l=[];let c;try{c=this.formUtils.getFormFields(n,!0,50)}catch($){this.Logger.warn("Lost interest in this form after finding too many fields"+$);return}const d=c.actualUsernameIndex,f=c.pwFields,g=c.otherFields;if(f.length>1){let $=-1;for(let K=0;K<f.length&&$==-1;K++)for(let W=K+1;W<f.length&&$==-1;W++)f[W].field.value==f[K].field.value&&($=W);if($==-1){this.Logger.debug("multiple passwords found (with no identical values)");for(let K=0;K<f.length;K++)l.push(f[K])}else this.Logger.debug("Looks like a password change form or new registration form has been submitted"),f.length==2?(l.push(f[0]),o=!1,a=!0):(o=!1,a=!1,l.push(f[$]))}else f!=null&&f[0]!=null&&f[0]!=null&&l.push(f[0]);const w=this.removeEmptyFields(l),I=this.removeEmptyFields(g),v=!this.matchResult||!this.matchResult.lastFilledPasswords||this.hasFieldBeenModified(w,this.matchResult.lastFilledPasswords),O=!this.matchResult||!this.matchResult.lastFilledOther||this.hasFieldBeenModified(I,this.matchResult.lastFilledOther);if(v||O){const $={url:i.href,fields:Fe.combineDomFieldLists(d,I.map(K=>K.field),w.map(K=>K.field)),title:s.title||i.hostname,isPasswordChangeForm:o,isRegistrationForm:a};this.myPort.postMessage({submittedData:$})}}removeEmptyFields(e){return e.filter(n=>n.field.value||n.field.type==="boolean")}hasFieldBeenModified(e,n){return!!n.find(s=>{const i=e.find(r=>s.DOMelement==r.DOMelement);return!i||i.field.value!=s.value})}}const $o=pt.GeneratePassword;class sf{constructor(e){this.parentFrameId=e}createGeneratePasswordPanel(){this.closeGeneratePasswordPanel(),this.generatePasswordPanelStub=new zt($o,null,this.parentFrameId),this.generatePasswordPanelStub.createPanel()}createGeneratePasswordPanelNearNode(e){this.closeGeneratePasswordPanel(),this.generatePasswordPanelStub=new zt($o,e,this.parentFrameId),this.generatePasswordPanelStub.createPanel(),this.generatePasswordPanelStubRaf=requestAnimationFrame(()=>this.updateGeneratePasswordPanelPosition())}closeGeneratePasswordPanel(){this.generatePasswordPanelStub&&this.generatePasswordPanelStub.closePanel(),this.generatePasswordPanelStub=null,cancelAnimationFrame(this.generatePasswordPanelStubRaf)}updateGeneratePasswordPanelPosition(){this.generatePasswordPanelStub.updateBoundingClientRect(),this.generatePasswordPanelStubRaf=requestAnimationFrame(()=>this.updateGeneratePasswordPanelPosition())}}class rf{constructor(){this.receivedPayloads=[],this.initialized=!1,this.pendingMutations=[]}init(e,n,s,i){this.store=e,this.store.$subscribe(r=>{if(r.type==Ue.patchObject)this.handleLocallyGeneratedMutation(r);else throw new Error("Pinia generated a non-object mutation. We don't think we can support this and need to know that it is possible for it to happen! Tell us now or weird things will happen.")}),this.sendMutationPayload=s,this.store.$patch(n),this.initialized=!0,this.processPendingLocallySourcedMutations(),i&&i()}reset(e){this.store.$patch(e)}onRemoteMutationPayload(e){this.initialized&&(le.warn("processing payload: "+JSON.stringify(e)),this.receivedPayloads.push(e),this.store.$patch(e))}handleLocallyGeneratedMutation(e){if(!this.initialized)return this.pendingMutations.push(e);if(!this.receivedPayloads.length)return this.sendMutationPayload(e.payload);for(let n=this.receivedPayloads.length-1;n>=0;n--)if(bs(this.receivedPayloads[n],e.payload)){le.debug("payload is deepequal"),this.receivedPayloads.splice(n,1);break}else n==0&&(le.debug("payload is not deepequal to any remotely received payload so will send"),this.sendMutationPayload(e.payload))}processPendingLocallySourcedMutations(){if(this.pendingMutations.length)for(let e=0;e<this.pendingMutations.length;e++)this.sendMutationPayload(this.pendingMutations[e].payload),this.pendingMutations.splice(e,1)}}class of{postMessage(e){this.port.postMessage(e)}startup(e){this.port=Oe.runtime.connect({name:e})}shutdown(){this.port=null}get raw(){return this.port}}const Se=new of;var pn;pn?le&&le.error?le.error("Duplicate Kee content script instance detected! Found this many other instances: "+pn):console.error("Duplicate Kee content script instance detected! Found this many other instances: "+pn):pn=0,pn+=1;let ds,me,bn,hs,gs,ms,Fi=!1,jo,Bo=!1,Vo=!1,Ko,Ei;const Mt=Qu();if(document.body){let t=function(r){Se.postMessage({findMatches:{uri:r}})},e=function(){if(window.location.hostname.endsWith("tutorial-addon.kee.pm")){const r=document.createElement("KeeFoxAddonStateTransferElement");r.setAttribute("state",JSON.stringify({connected:Mt.connected,version:Oe.runtime.getManifest().version,dbLoaded:Mt.KeePassDatabases.length>0,sessionNames:Mt.KeePassDatabases.map(a=>a.sessionType.toString()).filter((a,l,c)=>c.indexOf(a)===l)})),document.documentElement.appendChild(r);const o=new Event("KeeFoxAddonStateTransferEvent",{bubbles:!0,cancelable:!1});r.dispatchEvent(o)}},n=function(r){gs=r,le.attachConfig(Ie.current),ds=new tf(le),bn=new nf(Se.raw,le,ds),me=new Zu(Se.raw,gs,ds,bn,le,Ie.current,t),hs=new sf(gs),Ei.observe(document.body,{childList:!0,subtree:!0}),e()},s=function(){le.debug("content page starting");try{i(),Se.raw==null&&le.warn("Failed to connect to messaging port. We'll try again later.")}catch(r){le.warn("Failed to connect to messaging port. We'll try again later. Exception message: "+r.message)}jo=window.setInterval(()=>{if(Se.raw==null){le.info("Messaging port was not established at page startup. Retrying now...");try{i(),Se.raw==null&&le.warn("Failed to connect to messaging port. We'll try again later.")}catch(r){le.warn("Failed to connect to messaging port. We'll try again later. Exception message: "+r.message)}}else clearInterval(jo)},5e3),le.debug("content page ready")},i=function(){if(Se.raw){le.warn("port already set to '"+Se.raw.name+"'. Skipping startup because it should already be underway but is taking a long time.");return}ms=new rf(Mt),Se.startup("page"),Se.raw.onMessage.addListener(function(r){if(le.debug("In browser content page script, received message from background script"),r.initialState&&ms.init(r.initialState,o=>{Se.postMessage({mutation:o})}),r.mutation){ms.onRemoteMutation(r.mutation);return}Fi?r.action==Ve.DetectForms&&(r.resetState&&ms.reset(r.resetState),me.removeKeeIconFromAllFields(),bn.removeAllSubmitHandlers(),Mt.entryUpdateStartedAtTimestamp>=Date.now()-2e4?me.findMatchesInThisFrame({autofillOnSuccess:!1,autosubmitOnSuccess:!1}):me.findMatchesInThisFrame()):(n(r.frameId),me.findMatchesInThisFrame(),Fi=!0),r.findMatchesResult&&me.findLoginsResultHandler(r.findMatchesResult),r.action==Ve.ManualFill&&r.selectedEntryIndex!=null&&(me.closeMatchedLoginsPanel(),me.fillAndSubmit(!1,null,r.selectedEntryIndex)),r.action==Ve.ResetForms&&(me.removeKeeIconFromAllFields(),bn.removeAllSubmitHandlers()),r.action==Ve.Primary&&me.executePrimaryAction(),r.action==Ve.GeneratePassword&&hs.createGeneratePasswordPanel(),r.action==Ve.CloseAllPanels&&(hs.closeGeneratePasswordPanel(),me.closeMatchedLoginsPanel()),r.action==Ve.ShowMatchedLoginsPanel&&me.createMatchedLoginsPanelInCenter(r.frameId)})};Ei=new MutationObserver(r=>{if(me.formFinderTimer!==null||!Mt.connected||Mt.ActiveKeePassDatabaseIndex<0)return;let o=!1;const a=["form","input","select"];r.forEach(l=>{if(!o&&l.type==="childList"&&l.addedNodes.length>0)for(const c of l.addedNodes){if(o)break;for(let d=0;d<a.length;d++){const f=c;if(f.querySelector&&f.querySelector(a[d])){o=!0;break}}}}),o&&(me.formFinderTimer=window.setTimeout(me.findMatchesInThisFrame.bind(me),500))}),window.addEventListener("pageshow",()=>{Bo=!0,clearTimeout(Ko),Vo&&s()}),window.addEventListener("pagehide",()=>{Ei.disconnect(),Se.raw&&Se.postMessage({action:Ve.PageHide}),me.removeKeeIconFromAllFields(),Se.shutdown(),Fi=!1,gs=void 0,ds=void 0,bn=void 0,me=void 0,hs=void 0}),Ie.load(()=>{Vo=!0,Bo?s():Ko=window.setTimeout(s,1500)})}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguZ2xvYmFsLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi9ub2RlX21vZHVsZXMvd2ViZXh0ZW5zaW9uLXBvbHlmaWxsL2Rpc3QvYnJvd3Nlci1wb2x5ZmlsbC5qcyIsIi4uLy4uLy4uL3NyYy9jb21tb24vY29uZmlnLnRzIiwiLi4vLi4vLi4vc3JjL2NvbW1vbi9EZWZhdWx0U2l0ZUNvbmZpZy50cyIsIi4uLy4uLy4uL3NyYy9jb21tb24vQ29uZmlnTWlncmF0aW9ucy50cyIsIi4uLy4uLy4uL3NyYy9jb21tb24vdXRpbHMudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvc2VyaWFsaXplLWVycm9yL2Vycm9yLWNvbnN0cnVjdG9ycy5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9zZXJpYWxpemUtZXJyb3IvaW5kZXguanMiLCIuLi8uLi8uLi9zcmMvY29tbW9uL0xvZ2dlci50cyIsIi4uLy4uLy4uL3NyYy9jb21tb24vQ29uZmlnTWFuYWdlci50cyIsIi4uLy4uLy4uL3NyYy9wYWdlL1BhbmVsU3R1Yi50cyIsIi4uLy4uLy4uL3NyYy9jb21tb24vQWN0aW9uLnRzIiwiLi4vLi4vLi4vc3JjL3BhZ2Uva2VlRmllbGRJY29uLnRzIiwiLi4vLi4vLi4vc3JjL3BhZ2UvTWF0Y2hSZXN1bHQudHMiLCIuLi8uLi8uLi9zcmMvY29tbW9uL21vZGVsL1Nlc3Npb25UeXBlLnRzIiwiLi4vLi4vLi4vc3JjL2NvbW1vbi9tb2RlbC9FbnRyeVN1bW1hcnkudHMiLCIuLi8uLi8uLi9zcmMvY29tbW9uL21vZGVsL0dyb3VwLnRzIiwiLi4vLi4vLi4vc3JjL2NvbW1vbi9tb2RlbC9EYXRhYmFzZS50cyIsIi4uLy4uLy4uL3NyYy9jb21tb24vRG9sbGFyUG9seWZpbGxzLnRzIiwiLi4vLi4vLi4vc3JjL2NvbW1vbi9tb2RlbC9Mb2NhdG9yLnRzIiwiLi4vLi4vLi4vc3JjL2NvbW1vbi9tb2RlbC9LUFJQQ0RUT3MudHMiLCIuLi8uLi8uLi9zcmMvY29tbW9uL21vZGVsL0ZpZWxkLnRzIiwiLi4vLi4vLi4vc3JjL2NvbW1vbi9tb2RlbC9Hcm91cFN1bW1hcnkudHMiLCIuLi8uLi8uLi9zcmMvY29tbW9uL21vZGVsL0VudHJ5LnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B2dWUvc2hhcmVkL2Rpc3Qvc2hhcmVkLmVzbS1idW5kbGVyLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B2dWUvcmVhY3Rpdml0eS9kaXN0L3JlYWN0aXZpdHkuZXNtLWJ1bmRsZXIuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS9ydW50aW1lLWNvcmUvZGlzdC9ydW50aW1lLWNvcmUuZXNtLWJ1bmRsZXIuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS9ydW50aW1lLWRvbS9kaXN0L3J1bnRpbWUtZG9tLmVzbS1idW5kbGVyLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS9kaXN0L3Z1ZS5ydW50aW1lLmVzbS1idW5kbGVyLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1kZW1pL2xpYi9pbmRleC5tanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS9kZXZ0b29scy1hcGkvbGliL2VzbS9lbnYuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS9kZXZ0b29scy1hcGkvbGliL2VzbS9jb25zdC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdnVlL2RldnRvb2xzLWFwaS9saWIvZXNtL3RpbWUuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS9kZXZ0b29scy1hcGkvbGliL2VzbS9wcm94eS5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdnVlL2RldnRvb2xzLWFwaS9saWIvZXNtL2luZGV4LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3BpbmlhL2Rpc3QvcGluaWEubWpzIiwiLi4vLi4vLi4vc3JjL2NvbW1vbi9TYXZlU3RhdGUudHMiLCIuLi8uLi8uLi9zcmMvc3RvcmUvS2VlU3RhdGUudHMiLCIuLi8uLi8uLi9zcmMvY29tbW9uL1Nlc3Npb25UeXBlLnRzIiwiLi4vLi4vLi4vc3JjL3N0b3JlL2luZGV4LnRzIiwiLi4vLi4vLi4vc3JjL3BhZ2UvZm9ybUZpbGxpbmcudHMiLCIuLi8uLi8uLi9zcmMvcGFnZS9NYXRjaGVkRmllbGQudHMiLCIuLi8uLi8uLi9zcmMvcGFnZS9mb3Jtc1V0aWxzLnRzIiwiLi4vLi4vLi4vc3JjL3BhZ2UvZm9ybVNhdmluZy50cyIsIi4uLy4uLy4uL3NyYy9wYWdlL1Bhc3N3b3JkR2VuZXJhdG9yLnRzIiwiLi4vLi4vLi4vc3JjL3N0b3JlL3N5bmNDb250ZW50LnRzIiwiLi4vLi4vLi4vc3JjL2NvbW1vbi9wb3J0LnRzIiwiLi4vLi4vLi4vc3JjL3BhZ2UvcGFnZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoXCJ3ZWJleHRlbnNpb24tcG9seWZpbGxcIiwgW1wibW9kdWxlXCJdLCBmYWN0b3J5KTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIGZhY3RvcnkobW9kdWxlKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgbW9kID0ge1xuICAgICAgZXhwb3J0czoge31cbiAgICB9O1xuICAgIGZhY3RvcnkobW9kKTtcbiAgICBnbG9iYWwuYnJvd3NlciA9IG1vZC5leHBvcnRzO1xuICB9XG59KSh0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0aGlzLCBmdW5jdGlvbiAobW9kdWxlKSB7XG4gIC8qIHdlYmV4dGVuc2lvbi1wb2x5ZmlsbCAtIHYwLjEwLjAgLSBGcmkgQXVnIDEyIDIwMjIgMTk6NDI6NDQgKi9cblxuICAvKiAtKi0gTW9kZTogaW5kZW50LXRhYnMtbW9kZTogbmlsOyBqcy1pbmRlbnQtbGV2ZWw6IDIgLSotICovXG5cbiAgLyogdmltOiBzZXQgc3RzPTIgc3c9MiBldCB0dz04MDogKi9cblxuICAvKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gICAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXNcbiAgICogZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy4gKi9cbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgaWYgKCFnbG9iYWxUaGlzLmNocm9tZT8ucnVudGltZT8uaWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIHNjcmlwdCBzaG91bGQgb25seSBiZSBsb2FkZWQgaW4gYSBicm93c2VyIGV4dGVuc2lvbi5cIik7XG4gIH1cblxuICBpZiAodHlwZW9mIGdsb2JhbFRoaXMuYnJvd3NlciA9PT0gXCJ1bmRlZmluZWRcIiB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZ2xvYmFsVGhpcy5icm93c2VyKSAhPT0gT2JqZWN0LnByb3RvdHlwZSkge1xuICAgIGNvbnN0IENIUk9NRV9TRU5EX01FU1NBR0VfQ0FMTEJBQ0tfTk9fUkVTUE9OU0VfTUVTU0FHRSA9IFwiVGhlIG1lc3NhZ2UgcG9ydCBjbG9zZWQgYmVmb3JlIGEgcmVzcG9uc2Ugd2FzIHJlY2VpdmVkLlwiOyAvLyBXcmFwcGluZyB0aGUgYnVsayBvZiB0aGlzIHBvbHlmaWxsIGluIGEgb25lLXRpbWUtdXNlIGZ1bmN0aW9uIGlzIGEgbWlub3JcbiAgICAvLyBvcHRpbWl6YXRpb24gZm9yIEZpcmVmb3guIFNpbmNlIFNwaWRlcm1vbmtleSBkb2VzIG5vdCBmdWxseSBwYXJzZSB0aGVcbiAgICAvLyBjb250ZW50cyBvZiBhIGZ1bmN0aW9uIHVudGlsIHRoZSBmaXJzdCB0aW1lIGl0J3MgY2FsbGVkLCBhbmQgc2luY2UgaXQgd2lsbFxuICAgIC8vIG5ldmVyIGFjdHVhbGx5IG5lZWQgdG8gYmUgY2FsbGVkLCB0aGlzIGFsbG93cyB0aGUgcG9seWZpbGwgdG8gYmUgaW5jbHVkZWRcbiAgICAvLyBpbiBGaXJlZm94IG5lYXJseSBmb3IgZnJlZS5cblxuICAgIGNvbnN0IHdyYXBBUElzID0gZXh0ZW5zaW9uQVBJcyA9PiB7XG4gICAgICAvLyBOT1RFOiBhcGlNZXRhZGF0YSBpcyBhc3NvY2lhdGVkIHRvIHRoZSBjb250ZW50IG9mIHRoZSBhcGktbWV0YWRhdGEuanNvbiBmaWxlXG4gICAgICAvLyBhdCBidWlsZCB0aW1lIGJ5IHJlcGxhY2luZyB0aGUgZm9sbG93aW5nIFwiaW5jbHVkZVwiIHdpdGggdGhlIGNvbnRlbnQgb2YgdGhlXG4gICAgICAvLyBKU09OIGZpbGUuXG4gICAgICBjb25zdCBhcGlNZXRhZGF0YSA9IHtcbiAgICAgICAgXCJhbGFybXNcIjoge1xuICAgICAgICAgIFwiY2xlYXJcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJjbGVhckFsbFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldEFsbFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcImJvb2ttYXJrc1wiOiB7XG4gICAgICAgICAgXCJjcmVhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRDaGlsZHJlblwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldFJlY2VudFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldFN1YlRyZWVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRUcmVlXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAwLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDBcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwibW92ZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMixcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAyXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlbW92ZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlbW92ZVRyZWVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJzZWFyY2hcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJ1cGRhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDIsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJicm93c2VyQWN0aW9uXCI6IHtcbiAgICAgICAgICBcImRpc2FibGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwiZmFsbGJhY2tUb05vQ2FsbGJhY2tcIjogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJlbmFibGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwiZmFsbGJhY2tUb05vQ2FsbGJhY2tcIjogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRCYWRnZUJhY2tncm91bmRDb2xvclwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldEJhZGdlVGV4dFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldFBvcHVwXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiZ2V0VGl0bGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJvcGVuUG9wdXBcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMFxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJzZXRCYWRnZUJhY2tncm91bmRDb2xvclwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJmYWxsYmFja1RvTm9DYWxsYmFja1wiOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInNldEJhZGdlVGV4dFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJmYWxsYmFja1RvTm9DYWxsYmFja1wiOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInNldEljb25cIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJzZXRQb3B1cFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJmYWxsYmFja1RvTm9DYWxsYmFja1wiOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInNldFRpdGxlXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDEsXG4gICAgICAgICAgICBcImZhbGxiYWNrVG9Ob0NhbGxiYWNrXCI6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwiYnJvd3NpbmdEYXRhXCI6IHtcbiAgICAgICAgICBcInJlbW92ZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMixcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAyXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlbW92ZUNhY2hlXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwicmVtb3ZlQ29va2llc1wiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlbW92ZURvd25sb2Fkc1wiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlbW92ZUZvcm1EYXRhXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwicmVtb3ZlSGlzdG9yeVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlbW92ZUxvY2FsU3RvcmFnZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlbW92ZVBhc3N3b3Jkc1wiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlbW92ZVBsdWdpbkRhdGFcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJzZXR0aW5nc1wiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcImNvbW1hbmRzXCI6IHtcbiAgICAgICAgICBcImdldEFsbFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcImNvbnRleHRNZW51c1wiOiB7XG4gICAgICAgICAgXCJyZW1vdmVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJyZW1vdmVBbGxcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMFxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJ1cGRhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDIsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJjb29raWVzXCI6IHtcbiAgICAgICAgICBcImdldFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldEFsbFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldEFsbENvb2tpZVN0b3Jlc1wiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlbW92ZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInNldFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcImRldnRvb2xzXCI6IHtcbiAgICAgICAgICBcImluc3BlY3RlZFdpbmRvd1wiOiB7XG4gICAgICAgICAgICBcImV2YWxcIjoge1xuICAgICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDIsXG4gICAgICAgICAgICAgIFwic2luZ2xlQ2FsbGJhY2tBcmdcIjogZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIFwicGFuZWxzXCI6IHtcbiAgICAgICAgICAgIFwiY3JlYXRlXCI6IHtcbiAgICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDMsXG4gICAgICAgICAgICAgIFwibWF4QXJnc1wiOiAzLFxuICAgICAgICAgICAgICBcInNpbmdsZUNhbGxiYWNrQXJnXCI6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcImVsZW1lbnRzXCI6IHtcbiAgICAgICAgICAgICAgXCJjcmVhdGVTaWRlYmFyUGFuZVwiOiB7XG4gICAgICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJkb3dubG9hZHNcIjoge1xuICAgICAgICAgIFwiY2FuY2VsXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiZG93bmxvYWRcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJlcmFzZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldEZpbGVJY29uXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDJcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwib3BlblwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJmYWxsYmFja1RvTm9DYWxsYmFja1wiOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInBhdXNlXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwicmVtb3ZlRmlsZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlc3VtZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInNlYXJjaFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInNob3dcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwiZmFsbGJhY2tUb05vQ2FsbGJhY2tcIjogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJleHRlbnNpb25cIjoge1xuICAgICAgICAgIFwiaXNBbGxvd2VkRmlsZVNjaGVtZUFjY2Vzc1wiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImlzQWxsb3dlZEluY29nbml0b0FjY2Vzc1wiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcImhpc3RvcnlcIjoge1xuICAgICAgICAgIFwiYWRkVXJsXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiZGVsZXRlQWxsXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAwLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDBcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiZGVsZXRlUmFuZ2VcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJkZWxldGVVcmxcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRWaXNpdHNcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJzZWFyY2hcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJpMThuXCI6IHtcbiAgICAgICAgICBcImRldGVjdExhbmd1YWdlXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiZ2V0QWNjZXB0TGFuZ3VhZ2VzXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAwLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDBcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwiaWRlbnRpdHlcIjoge1xuICAgICAgICAgIFwibGF1bmNoV2ViQXV0aEZsb3dcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJpZGxlXCI6IHtcbiAgICAgICAgICBcInF1ZXJ5U3RhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJtYW5hZ2VtZW50XCI6IHtcbiAgICAgICAgICBcImdldFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldEFsbFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldFNlbGZcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMFxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJzZXRFbmFibGVkXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAyLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDJcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwidW5pbnN0YWxsU2VsZlwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcIm5vdGlmaWNhdGlvbnNcIjoge1xuICAgICAgICAgIFwiY2xlYXJcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJjcmVhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRBbGxcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMFxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRQZXJtaXNzaW9uTGV2ZWxcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMFxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJ1cGRhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDIsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJwYWdlQWN0aW9uXCI6IHtcbiAgICAgICAgICBcImdldFBvcHVwXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiZ2V0VGl0bGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJoaWRlXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDEsXG4gICAgICAgICAgICBcImZhbGxiYWNrVG9Ob0NhbGxiYWNrXCI6IHRydWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwic2V0SWNvblwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInNldFBvcHVwXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDEsXG4gICAgICAgICAgICBcImZhbGxiYWNrVG9Ob0NhbGxiYWNrXCI6IHRydWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwic2V0VGl0bGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwiZmFsbGJhY2tUb05vQ2FsbGJhY2tcIjogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJzaG93XCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDEsXG4gICAgICAgICAgICBcImZhbGxiYWNrVG9Ob0NhbGxiYWNrXCI6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwicGVybWlzc2lvbnNcIjoge1xuICAgICAgICAgIFwiY29udGFpbnNcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRBbGxcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMFxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJyZW1vdmVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJyZXF1ZXN0XCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwicnVudGltZVwiOiB7XG4gICAgICAgICAgXCJnZXRCYWNrZ3JvdW5kUGFnZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldFBsYXRmb3JtSW5mb1wiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcIm9wZW5PcHRpb25zUGFnZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlcXVlc3RVcGRhdGVDaGVja1wiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInNlbmRNZXNzYWdlXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDNcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwic2VuZE5hdGl2ZU1lc3NhZ2VcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDIsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJzZXRVbmluc3RhbGxVUkxcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJzZXNzaW9uc1wiOiB7XG4gICAgICAgICAgXCJnZXREZXZpY2VzXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAwLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiZ2V0UmVjZW50bHlDbG9zZWRcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJyZXN0b3JlXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAwLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwic3RvcmFnZVwiOiB7XG4gICAgICAgICAgXCJsb2NhbFwiOiB7XG4gICAgICAgICAgICBcImNsZWFyXCI6IHtcbiAgICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJnZXRcIjoge1xuICAgICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcImdldEJ5dGVzSW5Vc2VcIjoge1xuICAgICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcInJlbW92ZVwiOiB7XG4gICAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwic2V0XCI6IHtcbiAgICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBcIm1hbmFnZWRcIjoge1xuICAgICAgICAgICAgXCJnZXRcIjoge1xuICAgICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcImdldEJ5dGVzSW5Vc2VcIjoge1xuICAgICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIFwic3luY1wiOiB7XG4gICAgICAgICAgICBcImNsZWFyXCI6IHtcbiAgICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJnZXRcIjoge1xuICAgICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcImdldEJ5dGVzSW5Vc2VcIjoge1xuICAgICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcInJlbW92ZVwiOiB7XG4gICAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwic2V0XCI6IHtcbiAgICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcInRhYnNcIjoge1xuICAgICAgICAgIFwiY2FwdHVyZVZpc2libGVUYWJcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJjcmVhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJkZXRlY3RMYW5ndWFnZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImRpc2NhcmRcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJkdXBsaWNhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJleGVjdXRlU2NyaXB0XCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDJcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiZ2V0XCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiZ2V0Q3VycmVudFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldFpvb21cIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRab29tU2V0dGluZ3NcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnb0JhY2tcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnb0ZvcndhcmRcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJoaWdobGlnaHRcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJpbnNlcnRDU1NcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJtb3ZlXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAyLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDJcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwicXVlcnlcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJyZWxvYWRcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJyZW1vdmVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJyZW1vdmVDU1NcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJzZW5kTWVzc2FnZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMixcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAzXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInNldFpvb21cIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJzZXRab29tU2V0dGluZ3NcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJ1cGRhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJ0b3BTaXRlc1wiOiB7XG4gICAgICAgICAgXCJnZXRcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMFxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJ3ZWJOYXZpZ2F0aW9uXCI6IHtcbiAgICAgICAgICBcImdldEFsbEZyYW1lc1wiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldEZyYW1lXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwid2ViUmVxdWVzdFwiOiB7XG4gICAgICAgICAgXCJoYW5kbGVyQmVoYXZpb3JDaGFuZ2VkXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAwLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDBcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwid2luZG93c1wiOiB7XG4gICAgICAgICAgXCJjcmVhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRBbGxcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRDdXJyZW50XCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAwLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiZ2V0TGFzdEZvY3VzZWRcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJyZW1vdmVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJ1cGRhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDIsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgaWYgKE9iamVjdC5rZXlzKGFwaU1ldGFkYXRhKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYXBpLW1ldGFkYXRhLmpzb24gaGFzIG5vdCBiZWVuIGluY2x1ZGVkIGluIGJyb3dzZXItcG9seWZpbGxcIik7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIEEgV2Vha01hcCBzdWJjbGFzcyB3aGljaCBjcmVhdGVzIGFuZCBzdG9yZXMgYSB2YWx1ZSBmb3IgYW55IGtleSB3aGljaCBkb2VzXG4gICAgICAgKiBub3QgZXhpc3Qgd2hlbiBhY2Nlc3NlZCwgYnV0IGJlaGF2ZXMgZXhhY3RseSBhcyBhbiBvcmRpbmFyeSBXZWFrTWFwXG4gICAgICAgKiBvdGhlcndpc2UuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtmdW5jdGlvbn0gY3JlYXRlSXRlbVxuICAgICAgICogICAgICAgIEEgZnVuY3Rpb24gd2hpY2ggd2lsbCBiZSBjYWxsZWQgaW4gb3JkZXIgdG8gY3JlYXRlIHRoZSB2YWx1ZSBmb3IgYW55XG4gICAgICAgKiAgICAgICAga2V5IHdoaWNoIGRvZXMgbm90IGV4aXN0LCB0aGUgZmlyc3QgdGltZSBpdCBpcyBhY2Nlc3NlZC4gVGhlXG4gICAgICAgKiAgICAgICAgZnVuY3Rpb24gcmVjZWl2ZXMsIGFzIGl0cyBvbmx5IGFyZ3VtZW50LCB0aGUga2V5IGJlaW5nIGNyZWF0ZWQuXG4gICAgICAgKi9cblxuXG4gICAgICBjbGFzcyBEZWZhdWx0V2Vha01hcCBleHRlbmRzIFdlYWtNYXAge1xuICAgICAgICBjb25zdHJ1Y3RvcihjcmVhdGVJdGVtLCBpdGVtcyA9IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHN1cGVyKGl0ZW1zKTtcbiAgICAgICAgICB0aGlzLmNyZWF0ZUl0ZW0gPSBjcmVhdGVJdGVtO1xuICAgICAgICB9XG5cbiAgICAgICAgZ2V0KGtleSkge1xuICAgICAgICAgIGlmICghdGhpcy5oYXMoa2V5KSkge1xuICAgICAgICAgICAgdGhpcy5zZXQoa2V5LCB0aGlzLmNyZWF0ZUl0ZW0oa2V5KSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHN1cGVyLmdldChrZXkpO1xuICAgICAgICB9XG5cbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBvYmplY3QgaXMgYW4gb2JqZWN0IHdpdGggYSBgdGhlbmAgbWV0aG9kLCBhbmQgY2FuXG4gICAgICAgKiB0aGVyZWZvcmUgYmUgYXNzdW1lZCB0byBiZWhhdmUgYXMgYSBQcm9taXNlLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHRlc3QuXG4gICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgdmFsdWUgaXMgdGhlbmFibGUuXG4gICAgICAgKi9cblxuXG4gICAgICBjb25zdCBpc1RoZW5hYmxlID0gdmFsdWUgPT4ge1xuICAgICAgICByZXR1cm4gdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiB2YWx1ZS50aGVuID09PSBcImZ1bmN0aW9uXCI7XG4gICAgICB9O1xuICAgICAgLyoqXG4gICAgICAgKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgZnVuY3Rpb24gd2hpY2gsIHdoZW4gY2FsbGVkLCB3aWxsIHJlc29sdmUgb3IgcmVqZWN0XG4gICAgICAgKiB0aGUgZ2l2ZW4gcHJvbWlzZSBiYXNlZCBvbiBob3cgaXQgaXMgY2FsbGVkOlxuICAgICAgICpcbiAgICAgICAqIC0gSWYsIHdoZW4gY2FsbGVkLCBgY2hyb21lLnJ1bnRpbWUubGFzdEVycm9yYCBjb250YWlucyBhIG5vbi1udWxsIG9iamVjdCxcbiAgICAgICAqICAgdGhlIHByb21pc2UgaXMgcmVqZWN0ZWQgd2l0aCB0aGF0IHZhbHVlLlxuICAgICAgICogLSBJZiB0aGUgZnVuY3Rpb24gaXMgY2FsbGVkIHdpdGggZXhhY3RseSBvbmUgYXJndW1lbnQsIHRoZSBwcm9taXNlIGlzXG4gICAgICAgKiAgIHJlc29sdmVkIHRvIHRoYXQgdmFsdWUuXG4gICAgICAgKiAtIE90aGVyd2lzZSwgdGhlIHByb21pc2UgaXMgcmVzb2x2ZWQgdG8gYW4gYXJyYXkgY29udGFpbmluZyBhbGwgb2YgdGhlXG4gICAgICAgKiAgIGZ1bmN0aW9uJ3MgYXJndW1lbnRzLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBwcm9taXNlXG4gICAgICAgKiAgICAgICAgQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHJlc29sdXRpb24gYW5kIHJlamVjdGlvbiBmdW5jdGlvbnMgb2YgYVxuICAgICAgICogICAgICAgIHByb21pc2UuXG4gICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBwcm9taXNlLnJlc29sdmVcbiAgICAgICAqICAgICAgICBUaGUgcHJvbWlzZSdzIHJlc29sdXRpb24gZnVuY3Rpb24uXG4gICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBwcm9taXNlLnJlamVjdFxuICAgICAgICogICAgICAgIFRoZSBwcm9taXNlJ3MgcmVqZWN0aW9uIGZ1bmN0aW9uLlxuICAgICAgICogQHBhcmFtIHtvYmplY3R9IG1ldGFkYXRhXG4gICAgICAgKiAgICAgICAgTWV0YWRhdGEgYWJvdXQgdGhlIHdyYXBwZWQgbWV0aG9kIHdoaWNoIGhhcyBjcmVhdGVkIHRoZSBjYWxsYmFjay5cbiAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gbWV0YWRhdGEuc2luZ2xlQ2FsbGJhY2tBcmdcbiAgICAgICAqICAgICAgICBXaGV0aGVyIG9yIG5vdCB0aGUgcHJvbWlzZSBpcyByZXNvbHZlZCB3aXRoIG9ubHkgdGhlIGZpcnN0XG4gICAgICAgKiAgICAgICAgYXJndW1lbnQgb2YgdGhlIGNhbGxiYWNrLCBhbHRlcm5hdGl2ZWx5IGFuIGFycmF5IG9mIGFsbCB0aGVcbiAgICAgICAqICAgICAgICBjYWxsYmFjayBhcmd1bWVudHMgaXMgcmVzb2x2ZWQuIEJ5IGRlZmF1bHQsIGlmIHRoZSBjYWxsYmFja1xuICAgICAgICogICAgICAgIGZ1bmN0aW9uIGlzIGludm9rZWQgd2l0aCBvbmx5IGEgc2luZ2xlIGFyZ3VtZW50LCB0aGF0IHdpbGwgYmVcbiAgICAgICAqICAgICAgICByZXNvbHZlZCB0byB0aGUgcHJvbWlzZSwgd2hpbGUgYWxsIGFyZ3VtZW50cyB3aWxsIGJlIHJlc29sdmVkIGFzXG4gICAgICAgKiAgICAgICAgYW4gYXJyYXkgaWYgbXVsdGlwbGUgYXJlIGdpdmVuLlxuICAgICAgICpcbiAgICAgICAqIEByZXR1cm5zIHtmdW5jdGlvbn1cbiAgICAgICAqICAgICAgICBUaGUgZ2VuZXJhdGVkIGNhbGxiYWNrIGZ1bmN0aW9uLlxuICAgICAgICovXG5cblxuICAgICAgY29uc3QgbWFrZUNhbGxiYWNrID0gKHByb21pc2UsIG1ldGFkYXRhKSA9PiB7XG4gICAgICAgIHJldHVybiAoLi4uY2FsbGJhY2tBcmdzKSA9PiB7XG4gICAgICAgICAgaWYgKGV4dGVuc2lvbkFQSXMucnVudGltZS5sYXN0RXJyb3IpIHtcbiAgICAgICAgICAgIHByb21pc2UucmVqZWN0KG5ldyBFcnJvcihleHRlbnNpb25BUElzLnJ1bnRpbWUubGFzdEVycm9yLm1lc3NhZ2UpKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKG1ldGFkYXRhLnNpbmdsZUNhbGxiYWNrQXJnIHx8IGNhbGxiYWNrQXJncy5sZW5ndGggPD0gMSAmJiBtZXRhZGF0YS5zaW5nbGVDYWxsYmFja0FyZyAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHByb21pc2UucmVzb2x2ZShjYWxsYmFja0FyZ3NbMF0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwcm9taXNlLnJlc29sdmUoY2FsbGJhY2tBcmdzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9O1xuXG4gICAgICBjb25zdCBwbHVyYWxpemVBcmd1bWVudHMgPSBudW1BcmdzID0+IG51bUFyZ3MgPT0gMSA/IFwiYXJndW1lbnRcIiA6IFwiYXJndW1lbnRzXCI7XG4gICAgICAvKipcbiAgICAgICAqIENyZWF0ZXMgYSB3cmFwcGVyIGZ1bmN0aW9uIGZvciBhIG1ldGhvZCB3aXRoIHRoZSBnaXZlbiBuYW1lIGFuZCBtZXRhZGF0YS5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgICAgICogICAgICAgIFRoZSBuYW1lIG9mIHRoZSBtZXRob2Qgd2hpY2ggaXMgYmVpbmcgd3JhcHBlZC5cbiAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBtZXRhZGF0YVxuICAgICAgICogICAgICAgIE1ldGFkYXRhIGFib3V0IHRoZSBtZXRob2QgYmVpbmcgd3JhcHBlZC5cbiAgICAgICAqIEBwYXJhbSB7aW50ZWdlcn0gbWV0YWRhdGEubWluQXJnc1xuICAgICAgICogICAgICAgIFRoZSBtaW5pbXVtIG51bWJlciBvZiBhcmd1bWVudHMgd2hpY2ggbXVzdCBiZSBwYXNzZWQgdG8gdGhlXG4gICAgICAgKiAgICAgICAgZnVuY3Rpb24uIElmIGNhbGxlZCB3aXRoIGZld2VyIHRoYW4gdGhpcyBudW1iZXIgb2YgYXJndW1lbnRzLCB0aGVcbiAgICAgICAqICAgICAgICB3cmFwcGVyIHdpbGwgcmFpc2UgYW4gZXhjZXB0aW9uLlxuICAgICAgICogQHBhcmFtIHtpbnRlZ2VyfSBtZXRhZGF0YS5tYXhBcmdzXG4gICAgICAgKiAgICAgICAgVGhlIG1heGltdW0gbnVtYmVyIG9mIGFyZ3VtZW50cyB3aGljaCBtYXkgYmUgcGFzc2VkIHRvIHRoZVxuICAgICAgICogICAgICAgIGZ1bmN0aW9uLiBJZiBjYWxsZWQgd2l0aCBtb3JlIHRoYW4gdGhpcyBudW1iZXIgb2YgYXJndW1lbnRzLCB0aGVcbiAgICAgICAqICAgICAgICB3cmFwcGVyIHdpbGwgcmFpc2UgYW4gZXhjZXB0aW9uLlxuICAgICAgICogQHBhcmFtIHtib29sZWFufSBtZXRhZGF0YS5zaW5nbGVDYWxsYmFja0FyZ1xuICAgICAgICogICAgICAgIFdoZXRoZXIgb3Igbm90IHRoZSBwcm9taXNlIGlzIHJlc29sdmVkIHdpdGggb25seSB0aGUgZmlyc3RcbiAgICAgICAqICAgICAgICBhcmd1bWVudCBvZiB0aGUgY2FsbGJhY2ssIGFsdGVybmF0aXZlbHkgYW4gYXJyYXkgb2YgYWxsIHRoZVxuICAgICAgICogICAgICAgIGNhbGxiYWNrIGFyZ3VtZW50cyBpcyByZXNvbHZlZC4gQnkgZGVmYXVsdCwgaWYgdGhlIGNhbGxiYWNrXG4gICAgICAgKiAgICAgICAgZnVuY3Rpb24gaXMgaW52b2tlZCB3aXRoIG9ubHkgYSBzaW5nbGUgYXJndW1lbnQsIHRoYXQgd2lsbCBiZVxuICAgICAgICogICAgICAgIHJlc29sdmVkIHRvIHRoZSBwcm9taXNlLCB3aGlsZSBhbGwgYXJndW1lbnRzIHdpbGwgYmUgcmVzb2x2ZWQgYXNcbiAgICAgICAqICAgICAgICBhbiBhcnJheSBpZiBtdWx0aXBsZSBhcmUgZ2l2ZW4uXG4gICAgICAgKlxuICAgICAgICogQHJldHVybnMge2Z1bmN0aW9uKG9iamVjdCwgLi4uKil9XG4gICAgICAgKiAgICAgICBUaGUgZ2VuZXJhdGVkIHdyYXBwZXIgZnVuY3Rpb24uXG4gICAgICAgKi9cblxuXG4gICAgICBjb25zdCB3cmFwQXN5bmNGdW5jdGlvbiA9IChuYW1lLCBtZXRhZGF0YSkgPT4ge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gYXN5bmNGdW5jdGlvbldyYXBwZXIodGFyZ2V0LCAuLi5hcmdzKSB7XG4gICAgICAgICAgaWYgKGFyZ3MubGVuZ3RoIDwgbWV0YWRhdGEubWluQXJncykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCBhdCBsZWFzdCAke21ldGFkYXRhLm1pbkFyZ3N9ICR7cGx1cmFsaXplQXJndW1lbnRzKG1ldGFkYXRhLm1pbkFyZ3MpfSBmb3IgJHtuYW1lfSgpLCBnb3QgJHthcmdzLmxlbmd0aH1gKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoYXJncy5sZW5ndGggPiBtZXRhZGF0YS5tYXhBcmdzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIGF0IG1vc3QgJHttZXRhZGF0YS5tYXhBcmdzfSAke3BsdXJhbGl6ZUFyZ3VtZW50cyhtZXRhZGF0YS5tYXhBcmdzKX0gZm9yICR7bmFtZX0oKSwgZ290ICR7YXJncy5sZW5ndGh9YCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGlmIChtZXRhZGF0YS5mYWxsYmFja1RvTm9DYWxsYmFjaykge1xuICAgICAgICAgICAgICAvLyBUaGlzIEFQSSBtZXRob2QgaGFzIGN1cnJlbnRseSBubyBjYWxsYmFjayBvbiBDaHJvbWUsIGJ1dCBpdCByZXR1cm4gYSBwcm9taXNlIG9uIEZpcmVmb3gsXG4gICAgICAgICAgICAgIC8vIGFuZCBzbyB0aGUgcG9seWZpbGwgd2lsbCB0cnkgdG8gY2FsbCBpdCB3aXRoIGEgY2FsbGJhY2sgZmlyc3QsIGFuZCBpdCB3aWxsIGZhbGxiYWNrXG4gICAgICAgICAgICAgIC8vIHRvIG5vdCBwYXNzaW5nIHRoZSBjYWxsYmFjayBpZiB0aGUgZmlyc3QgY2FsbCBmYWlscy5cbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0YXJnZXRbbmFtZV0oLi4uYXJncywgbWFrZUNhbGxiYWNrKHtcbiAgICAgICAgICAgICAgICAgIHJlc29sdmUsXG4gICAgICAgICAgICAgICAgICByZWplY3RcbiAgICAgICAgICAgICAgICB9LCBtZXRhZGF0YSkpO1xuICAgICAgICAgICAgICB9IGNhdGNoIChjYkVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGAke25hbWV9IEFQSSBtZXRob2QgZG9lc24ndCBzZWVtIHRvIHN1cHBvcnQgdGhlIGNhbGxiYWNrIHBhcmFtZXRlciwgYCArIFwiZmFsbGluZyBiYWNrIHRvIGNhbGwgaXQgd2l0aG91dCBhIGNhbGxiYWNrOiBcIiwgY2JFcnJvcik7XG4gICAgICAgICAgICAgICAgdGFyZ2V0W25hbWVdKC4uLmFyZ3MpOyAvLyBVcGRhdGUgdGhlIEFQSSBtZXRob2QgbWV0YWRhdGEsIHNvIHRoYXQgdGhlIG5leHQgQVBJIGNhbGxzIHdpbGwgbm90IHRyeSB0b1xuICAgICAgICAgICAgICAgIC8vIHVzZSB0aGUgdW5zdXBwb3J0ZWQgY2FsbGJhY2sgYW55bW9yZS5cblxuICAgICAgICAgICAgICAgIG1ldGFkYXRhLmZhbGxiYWNrVG9Ob0NhbGxiYWNrID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgbWV0YWRhdGEubm9DYWxsYmFjayA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG1ldGFkYXRhLm5vQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgdGFyZ2V0W25hbWVdKC4uLmFyZ3MpO1xuICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0YXJnZXRbbmFtZV0oLi4uYXJncywgbWFrZUNhbGxiYWNrKHtcbiAgICAgICAgICAgICAgICByZXNvbHZlLFxuICAgICAgICAgICAgICAgIHJlamVjdFxuICAgICAgICAgICAgICB9LCBtZXRhZGF0YSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICAgIC8qKlxuICAgICAgICogV3JhcHMgYW4gZXhpc3RpbmcgbWV0aG9kIG9mIHRoZSB0YXJnZXQgb2JqZWN0LCBzbyB0aGF0IGNhbGxzIHRvIGl0IGFyZVxuICAgICAgICogaW50ZXJjZXB0ZWQgYnkgdGhlIGdpdmVuIHdyYXBwZXIgZnVuY3Rpb24uIFRoZSB3cmFwcGVyIGZ1bmN0aW9uIHJlY2VpdmVzLFxuICAgICAgICogYXMgaXRzIGZpcnN0IGFyZ3VtZW50LCB0aGUgb3JpZ2luYWwgYHRhcmdldGAgb2JqZWN0LCBmb2xsb3dlZCBieSBlYWNoIG9mXG4gICAgICAgKiB0aGUgYXJndW1lbnRzIHBhc3NlZCB0byB0aGUgb3JpZ2luYWwgbWV0aG9kLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSB0YXJnZXRcbiAgICAgICAqICAgICAgICBUaGUgb3JpZ2luYWwgdGFyZ2V0IG9iamVjdCB0aGF0IHRoZSB3cmFwcGVkIG1ldGhvZCBiZWxvbmdzIHRvLlxuICAgICAgICogQHBhcmFtIHtmdW5jdGlvbn0gbWV0aG9kXG4gICAgICAgKiAgICAgICAgVGhlIG1ldGhvZCBiZWluZyB3cmFwcGVkLiBUaGlzIGlzIHVzZWQgYXMgdGhlIHRhcmdldCBvZiB0aGUgUHJveHlcbiAgICAgICAqICAgICAgICBvYmplY3Qgd2hpY2ggaXMgY3JlYXRlZCB0byB3cmFwIHRoZSBtZXRob2QuXG4gICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSB3cmFwcGVyXG4gICAgICAgKiAgICAgICAgVGhlIHdyYXBwZXIgZnVuY3Rpb24gd2hpY2ggaXMgY2FsbGVkIGluIHBsYWNlIG9mIGEgZGlyZWN0IGludm9jYXRpb25cbiAgICAgICAqICAgICAgICBvZiB0aGUgd3JhcHBlZCBtZXRob2QuXG4gICAgICAgKlxuICAgICAgICogQHJldHVybnMge1Byb3h5PGZ1bmN0aW9uPn1cbiAgICAgICAqICAgICAgICBBIFByb3h5IG9iamVjdCBmb3IgdGhlIGdpdmVuIG1ldGhvZCwgd2hpY2ggaW52b2tlcyB0aGUgZ2l2ZW4gd3JhcHBlclxuICAgICAgICogICAgICAgIG1ldGhvZCBpbiBpdHMgcGxhY2UuXG4gICAgICAgKi9cblxuXG4gICAgICBjb25zdCB3cmFwTWV0aG9kID0gKHRhcmdldCwgbWV0aG9kLCB3cmFwcGVyKSA9PiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJveHkobWV0aG9kLCB7XG4gICAgICAgICAgYXBwbHkodGFyZ2V0TWV0aG9kLCB0aGlzT2JqLCBhcmdzKSB7XG4gICAgICAgICAgICByZXR1cm4gd3JhcHBlci5jYWxsKHRoaXNPYmosIHRhcmdldCwgLi4uYXJncyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgbGV0IGhhc093blByb3BlcnR5ID0gRnVuY3Rpb24uY2FsbC5iaW5kKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkpO1xuICAgICAgLyoqXG4gICAgICAgKiBXcmFwcyBhbiBvYmplY3QgaW4gYSBQcm94eSB3aGljaCBpbnRlcmNlcHRzIGFuZCB3cmFwcyBjZXJ0YWluIG1ldGhvZHNcbiAgICAgICAqIGJhc2VkIG9uIHRoZSBnaXZlbiBgd3JhcHBlcnNgIGFuZCBgbWV0YWRhdGFgIG9iamVjdHMuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtvYmplY3R9IHRhcmdldFxuICAgICAgICogICAgICAgIFRoZSB0YXJnZXQgb2JqZWN0IHRvIHdyYXAuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtvYmplY3R9IFt3cmFwcGVycyA9IHt9XVxuICAgICAgICogICAgICAgIEFuIG9iamVjdCB0cmVlIGNvbnRhaW5pbmcgd3JhcHBlciBmdW5jdGlvbnMgZm9yIHNwZWNpYWwgY2FzZXMuIEFueVxuICAgICAgICogICAgICAgIGZ1bmN0aW9uIHByZXNlbnQgaW4gdGhpcyBvYmplY3QgdHJlZSBpcyBjYWxsZWQgaW4gcGxhY2Ugb2YgdGhlXG4gICAgICAgKiAgICAgICAgbWV0aG9kIGluIHRoZSBzYW1lIGxvY2F0aW9uIGluIHRoZSBgdGFyZ2V0YCBvYmplY3QgdHJlZS4gVGhlc2VcbiAgICAgICAqICAgICAgICB3cmFwcGVyIG1ldGhvZHMgYXJlIGludm9rZWQgYXMgZGVzY3JpYmVkIGluIHtAc2VlIHdyYXBNZXRob2R9LlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbbWV0YWRhdGEgPSB7fV1cbiAgICAgICAqICAgICAgICBBbiBvYmplY3QgdHJlZSBjb250YWluaW5nIG1ldGFkYXRhIHVzZWQgdG8gYXV0b21hdGljYWxseSBnZW5lcmF0ZVxuICAgICAgICogICAgICAgIFByb21pc2UtYmFzZWQgd3JhcHBlciBmdW5jdGlvbnMgZm9yIGFzeW5jaHJvbm91cy4gQW55IGZ1bmN0aW9uIGluXG4gICAgICAgKiAgICAgICAgdGhlIGB0YXJnZXRgIG9iamVjdCB0cmVlIHdoaWNoIGhhcyBhIGNvcnJlc3BvbmRpbmcgbWV0YWRhdGEgb2JqZWN0XG4gICAgICAgKiAgICAgICAgaW4gdGhlIHNhbWUgbG9jYXRpb24gaW4gdGhlIGBtZXRhZGF0YWAgdHJlZSBpcyByZXBsYWNlZCB3aXRoIGFuXG4gICAgICAgKiAgICAgICAgYXV0b21hdGljYWxseS1nZW5lcmF0ZWQgd3JhcHBlciBmdW5jdGlvbiwgYXMgZGVzY3JpYmVkIGluXG4gICAgICAgKiAgICAgICAge0BzZWUgd3JhcEFzeW5jRnVuY3Rpb259XG4gICAgICAgKlxuICAgICAgICogQHJldHVybnMge1Byb3h5PG9iamVjdD59XG4gICAgICAgKi9cblxuICAgICAgY29uc3Qgd3JhcE9iamVjdCA9ICh0YXJnZXQsIHdyYXBwZXJzID0ge30sIG1ldGFkYXRhID0ge30pID0+IHtcbiAgICAgICAgbGV0IGNhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgbGV0IGhhbmRsZXJzID0ge1xuICAgICAgICAgIGhhcyhwcm94eVRhcmdldCwgcHJvcCkge1xuICAgICAgICAgICAgcmV0dXJuIHByb3AgaW4gdGFyZ2V0IHx8IHByb3AgaW4gY2FjaGU7XG4gICAgICAgICAgfSxcblxuICAgICAgICAgIGdldChwcm94eVRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpIHtcbiAgICAgICAgICAgIGlmIChwcm9wIGluIGNhY2hlKSB7XG4gICAgICAgICAgICAgIHJldHVybiBjYWNoZVtwcm9wXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCEocHJvcCBpbiB0YXJnZXQpKSB7XG4gICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCB2YWx1ZSA9IHRhcmdldFtwcm9wXTtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBtZXRob2Qgb24gdGhlIHVuZGVybHlpbmcgb2JqZWN0LiBDaGVjayBpZiB3ZSBuZWVkIHRvIGRvXG4gICAgICAgICAgICAgIC8vIGFueSB3cmFwcGluZy5cbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiB3cmFwcGVyc1twcm9wXSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgLy8gV2UgaGF2ZSBhIHNwZWNpYWwtY2FzZSB3cmFwcGVyIGZvciB0aGlzIG1ldGhvZC5cbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHdyYXBNZXRob2QodGFyZ2V0LCB0YXJnZXRbcHJvcF0sIHdyYXBwZXJzW3Byb3BdKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChoYXNPd25Qcm9wZXJ0eShtZXRhZGF0YSwgcHJvcCkpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGFuIGFzeW5jIG1ldGhvZCB0aGF0IHdlIGhhdmUgbWV0YWRhdGEgZm9yLiBDcmVhdGUgYVxuICAgICAgICAgICAgICAgIC8vIFByb21pc2Ugd3JhcHBlciBmb3IgaXQuXG4gICAgICAgICAgICAgICAgbGV0IHdyYXBwZXIgPSB3cmFwQXN5bmNGdW5jdGlvbihwcm9wLCBtZXRhZGF0YVtwcm9wXSk7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSB3cmFwTWV0aG9kKHRhcmdldCwgdGFyZ2V0W3Byb3BdLCB3cmFwcGVyKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGEgbWV0aG9kIHRoYXQgd2UgZG9uJ3Qga25vdyBvciBjYXJlIGFib3V0LiBSZXR1cm4gdGhlXG4gICAgICAgICAgICAgICAgLy8gb3JpZ2luYWwgbWV0aG9kLCBib3VuZCB0byB0aGUgdW5kZXJseWluZyBvYmplY3QuXG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5iaW5kKHRhcmdldCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmIHZhbHVlICE9PSBudWxsICYmIChoYXNPd25Qcm9wZXJ0eSh3cmFwcGVycywgcHJvcCkgfHwgaGFzT3duUHJvcGVydHkobWV0YWRhdGEsIHByb3ApKSkge1xuICAgICAgICAgICAgICAvLyBUaGlzIGlzIGFuIG9iamVjdCB0aGF0IHdlIG5lZWQgdG8gZG8gc29tZSB3cmFwcGluZyBmb3IgdGhlIGNoaWxkcmVuXG4gICAgICAgICAgICAgIC8vIG9mLiBDcmVhdGUgYSBzdWItb2JqZWN0IHdyYXBwZXIgZm9yIGl0IHdpdGggdGhlIGFwcHJvcHJpYXRlIGNoaWxkXG4gICAgICAgICAgICAgIC8vIG1ldGFkYXRhLlxuICAgICAgICAgICAgICB2YWx1ZSA9IHdyYXBPYmplY3QodmFsdWUsIHdyYXBwZXJzW3Byb3BdLCBtZXRhZGF0YVtwcm9wXSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGhhc093blByb3BlcnR5KG1ldGFkYXRhLCBcIipcIikpIHtcbiAgICAgICAgICAgICAgLy8gV3JhcCBhbGwgcHJvcGVydGllcyBpbiAqIG5hbWVzcGFjZS5cbiAgICAgICAgICAgICAgdmFsdWUgPSB3cmFwT2JqZWN0KHZhbHVlLCB3cmFwcGVyc1twcm9wXSwgbWV0YWRhdGFbXCIqXCJdKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIFdlIGRvbid0IG5lZWQgdG8gZG8gYW55IHdyYXBwaW5nIGZvciB0aGlzIHByb3BlcnR5LFxuICAgICAgICAgICAgICAvLyBzbyBqdXN0IGZvcndhcmQgYWxsIGFjY2VzcyB0byB0aGUgdW5kZXJseWluZyBvYmplY3QuXG4gICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjYWNoZSwgcHJvcCwge1xuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXG4gICAgICAgICAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldFtwcm9wXTtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgc2V0KHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICB0YXJnZXRbcHJvcF0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2FjaGVbcHJvcF0gPSB2YWx1ZTtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICB9LFxuXG4gICAgICAgICAgc2V0KHByb3h5VGFyZ2V0LCBwcm9wLCB2YWx1ZSwgcmVjZWl2ZXIpIHtcbiAgICAgICAgICAgIGlmIChwcm9wIGluIGNhY2hlKSB7XG4gICAgICAgICAgICAgIGNhY2hlW3Byb3BdID0gdmFsdWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0YXJnZXRbcHJvcF0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfSxcblxuICAgICAgICAgIGRlZmluZVByb3BlcnR5KHByb3h5VGFyZ2V0LCBwcm9wLCBkZXNjKSB7XG4gICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5kZWZpbmVQcm9wZXJ0eShjYWNoZSwgcHJvcCwgZGVzYyk7XG4gICAgICAgICAgfSxcblxuICAgICAgICAgIGRlbGV0ZVByb3BlcnR5KHByb3h5VGFyZ2V0LCBwcm9wKSB7XG4gICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5kZWxldGVQcm9wZXJ0eShjYWNoZSwgcHJvcCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgIH07IC8vIFBlciBjb250cmFjdCBvZiB0aGUgUHJveHkgQVBJLCB0aGUgXCJnZXRcIiBwcm94eSBoYW5kbGVyIG11c3QgcmV0dXJuIHRoZVxuICAgICAgICAvLyBvcmlnaW5hbCB2YWx1ZSBvZiB0aGUgdGFyZ2V0IGlmIHRoYXQgdmFsdWUgaXMgZGVjbGFyZWQgcmVhZC1vbmx5IGFuZFxuICAgICAgICAvLyBub24tY29uZmlndXJhYmxlLiBGb3IgdGhpcyByZWFzb24sIHdlIGNyZWF0ZSBhbiBvYmplY3Qgd2l0aCB0aGVcbiAgICAgICAgLy8gcHJvdG90eXBlIHNldCB0byBgdGFyZ2V0YCBpbnN0ZWFkIG9mIHVzaW5nIGB0YXJnZXRgIGRpcmVjdGx5LlxuICAgICAgICAvLyBPdGhlcndpc2Ugd2UgY2Fubm90IHJldHVybiBhIGN1c3RvbSBvYmplY3QgZm9yIEFQSXMgdGhhdFxuICAgICAgICAvLyBhcmUgZGVjbGFyZWQgcmVhZC1vbmx5IGFuZCBub24tY29uZmlndXJhYmxlLCBzdWNoIGFzIGBjaHJvbWUuZGV2dG9vbHNgLlxuICAgICAgICAvL1xuICAgICAgICAvLyBUaGUgcHJveHkgaGFuZGxlcnMgdGhlbXNlbHZlcyB3aWxsIHN0aWxsIHVzZSB0aGUgb3JpZ2luYWwgYHRhcmdldGBcbiAgICAgICAgLy8gaW5zdGVhZCBvZiB0aGUgYHByb3h5VGFyZ2V0YCwgc28gdGhhdCB0aGUgbWV0aG9kcyBhbmQgcHJvcGVydGllcyBhcmVcbiAgICAgICAgLy8gZGVyZWZlcmVuY2VkIHZpYSB0aGUgb3JpZ2luYWwgdGFyZ2V0cy5cblxuICAgICAgICBsZXQgcHJveHlUYXJnZXQgPSBPYmplY3QuY3JlYXRlKHRhcmdldCk7XG4gICAgICAgIHJldHVybiBuZXcgUHJveHkocHJveHlUYXJnZXQsIGhhbmRsZXJzKTtcbiAgICAgIH07XG4gICAgICAvKipcbiAgICAgICAqIENyZWF0ZXMgYSBzZXQgb2Ygd3JhcHBlciBmdW5jdGlvbnMgZm9yIGFuIGV2ZW50IG9iamVjdCwgd2hpY2ggaGFuZGxlc1xuICAgICAgICogd3JhcHBpbmcgb2YgbGlzdGVuZXIgZnVuY3Rpb25zIHRoYXQgdGhvc2UgbWVzc2FnZXMgYXJlIHBhc3NlZC5cbiAgICAgICAqXG4gICAgICAgKiBBIHNpbmdsZSB3cmFwcGVyIGlzIGNyZWF0ZWQgZm9yIGVhY2ggbGlzdGVuZXIgZnVuY3Rpb24sIGFuZCBzdG9yZWQgaW4gYVxuICAgICAgICogbWFwLiBTdWJzZXF1ZW50IGNhbGxzIHRvIGBhZGRMaXN0ZW5lcmAsIGBoYXNMaXN0ZW5lcmAsIG9yIGByZW1vdmVMaXN0ZW5lcmBcbiAgICAgICAqIHJldHJpZXZlIHRoZSBvcmlnaW5hbCB3cmFwcGVyLCBzbyB0aGF0ICBhdHRlbXB0cyB0byByZW1vdmUgYVxuICAgICAgICogcHJldmlvdXNseS1hZGRlZCBsaXN0ZW5lciB3b3JrIGFzIGV4cGVjdGVkLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7RGVmYXVsdFdlYWtNYXA8ZnVuY3Rpb24sIGZ1bmN0aW9uPn0gd3JhcHBlck1hcFxuICAgICAgICogICAgICAgIEEgRGVmYXVsdFdlYWtNYXAgb2JqZWN0IHdoaWNoIHdpbGwgY3JlYXRlIHRoZSBhcHByb3ByaWF0ZSB3cmFwcGVyXG4gICAgICAgKiAgICAgICAgZm9yIGEgZ2l2ZW4gbGlzdGVuZXIgZnVuY3Rpb24gd2hlbiBvbmUgZG9lcyBub3QgZXhpc3QsIGFuZCByZXRyaWV2ZVxuICAgICAgICogICAgICAgIGFuIGV4aXN0aW5nIG9uZSB3aGVuIGl0IGRvZXMuXG4gICAgICAgKlxuICAgICAgICogQHJldHVybnMge29iamVjdH1cbiAgICAgICAqL1xuXG5cbiAgICAgIGNvbnN0IHdyYXBFdmVudCA9IHdyYXBwZXJNYXAgPT4gKHtcbiAgICAgICAgYWRkTGlzdGVuZXIodGFyZ2V0LCBsaXN0ZW5lciwgLi4uYXJncykge1xuICAgICAgICAgIHRhcmdldC5hZGRMaXN0ZW5lcih3cmFwcGVyTWFwLmdldChsaXN0ZW5lciksIC4uLmFyZ3MpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGhhc0xpc3RlbmVyKHRhcmdldCwgbGlzdGVuZXIpIHtcbiAgICAgICAgICByZXR1cm4gdGFyZ2V0Lmhhc0xpc3RlbmVyKHdyYXBwZXJNYXAuZ2V0KGxpc3RlbmVyKSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVtb3ZlTGlzdGVuZXIodGFyZ2V0LCBsaXN0ZW5lcikge1xuICAgICAgICAgIHRhcmdldC5yZW1vdmVMaXN0ZW5lcih3cmFwcGVyTWFwLmdldChsaXN0ZW5lcikpO1xuICAgICAgICB9XG5cbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBvblJlcXVlc3RGaW5pc2hlZFdyYXBwZXJzID0gbmV3IERlZmF1bHRXZWFrTWFwKGxpc3RlbmVyID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lciAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgcmV0dXJuIGxpc3RlbmVyO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXcmFwcyBhbiBvblJlcXVlc3RGaW5pc2hlZCBsaXN0ZW5lciBmdW5jdGlvbiBzbyB0aGF0IGl0IHdpbGwgcmV0dXJuIGFcbiAgICAgICAgICogYGdldENvbnRlbnQoKWAgcHJvcGVydHkgd2hpY2ggcmV0dXJucyBhIGBQcm9taXNlYCByYXRoZXIgdGhhbiB1c2luZyBhXG4gICAgICAgICAqIGNhbGxiYWNrIEFQSS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IHJlcVxuICAgICAgICAgKiAgICAgICAgVGhlIEhBUiBlbnRyeSBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBuZXR3b3JrIHJlcXVlc3QuXG4gICAgICAgICAqL1xuXG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIG9uUmVxdWVzdEZpbmlzaGVkKHJlcSkge1xuICAgICAgICAgIGNvbnN0IHdyYXBwZWRSZXEgPSB3cmFwT2JqZWN0KHJlcSwge31cbiAgICAgICAgICAvKiB3cmFwcGVycyAqL1xuICAgICAgICAgICwge1xuICAgICAgICAgICAgZ2V0Q29udGVudDoge1xuICAgICAgICAgICAgICBtaW5BcmdzOiAwLFxuICAgICAgICAgICAgICBtYXhBcmdzOiAwXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgbGlzdGVuZXIod3JhcHBlZFJlcSk7XG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICAgIGNvbnN0IG9uTWVzc2FnZVdyYXBwZXJzID0gbmV3IERlZmF1bHRXZWFrTWFwKGxpc3RlbmVyID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lciAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgcmV0dXJuIGxpc3RlbmVyO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXcmFwcyBhIG1lc3NhZ2UgbGlzdGVuZXIgZnVuY3Rpb24gc28gdGhhdCBpdCBtYXkgc2VuZCByZXNwb25zZXMgYmFzZWQgb25cbiAgICAgICAgICogaXRzIHJldHVybiB2YWx1ZSwgcmF0aGVyIHRoYW4gYnkgcmV0dXJuaW5nIGEgc2VudGluZWwgdmFsdWUgYW5kIGNhbGxpbmcgYVxuICAgICAgICAgKiBjYWxsYmFjay4gSWYgdGhlIGxpc3RlbmVyIGZ1bmN0aW9uIHJldHVybnMgYSBQcm9taXNlLCB0aGUgcmVzcG9uc2UgaXNcbiAgICAgICAgICogc2VudCB3aGVuIHRoZSBwcm9taXNlIGVpdGhlciByZXNvbHZlcyBvciByZWplY3RzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0geyp9IG1lc3NhZ2VcbiAgICAgICAgICogICAgICAgIFRoZSBtZXNzYWdlIHNlbnQgYnkgdGhlIG90aGVyIGVuZCBvZiB0aGUgY2hhbm5lbC5cbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IHNlbmRlclxuICAgICAgICAgKiAgICAgICAgRGV0YWlscyBhYm91dCB0aGUgc2VuZGVyIG9mIHRoZSBtZXNzYWdlLlxuICAgICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCopfSBzZW5kUmVzcG9uc2VcbiAgICAgICAgICogICAgICAgIEEgY2FsbGJhY2sgd2hpY2gsIHdoZW4gY2FsbGVkIHdpdGggYW4gYXJiaXRyYXJ5IGFyZ3VtZW50LCBzZW5kc1xuICAgICAgICAgKiAgICAgICAgdGhhdCB2YWx1ZSBhcyBhIHJlc3BvbnNlLlxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgICAgICogICAgICAgIFRydWUgaWYgdGhlIHdyYXBwZWQgbGlzdGVuZXIgcmV0dXJuZWQgYSBQcm9taXNlLCB3aGljaCB3aWxsIGxhdGVyXG4gICAgICAgICAqICAgICAgICB5aWVsZCBhIHJlc3BvbnNlLiBGYWxzZSBvdGhlcndpc2UuXG4gICAgICAgICAqL1xuXG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIG9uTWVzc2FnZShtZXNzYWdlLCBzZW5kZXIsIHNlbmRSZXNwb25zZSkge1xuICAgICAgICAgIGxldCBkaWRDYWxsU2VuZFJlc3BvbnNlID0gZmFsc2U7XG4gICAgICAgICAgbGV0IHdyYXBwZWRTZW5kUmVzcG9uc2U7XG4gICAgICAgICAgbGV0IHNlbmRSZXNwb25zZVByb21pc2UgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICAgIHdyYXBwZWRTZW5kUmVzcG9uc2UgPSBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgZGlkQ2FsbFNlbmRSZXNwb25zZSA9IHRydWU7XG4gICAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBsZXQgcmVzdWx0O1xuXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IGxpc3RlbmVyKG1lc3NhZ2UsIHNlbmRlciwgd3JhcHBlZFNlbmRSZXNwb25zZSk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICByZXN1bHQgPSBQcm9taXNlLnJlamVjdChlcnIpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGlzUmVzdWx0VGhlbmFibGUgPSByZXN1bHQgIT09IHRydWUgJiYgaXNUaGVuYWJsZShyZXN1bHQpOyAvLyBJZiB0aGUgbGlzdGVuZXIgZGlkbid0IHJldHVybmVkIHRydWUgb3IgYSBQcm9taXNlLCBvciBjYWxsZWRcbiAgICAgICAgICAvLyB3cmFwcGVkU2VuZFJlc3BvbnNlIHN5bmNocm9ub3VzbHksIHdlIGNhbiBleGl0IGVhcmxpZXJcbiAgICAgICAgICAvLyBiZWNhdXNlIHRoZXJlIHdpbGwgYmUgbm8gcmVzcG9uc2Ugc2VudCBmcm9tIHRoaXMgbGlzdGVuZXIuXG5cbiAgICAgICAgICBpZiAocmVzdWx0ICE9PSB0cnVlICYmICFpc1Jlc3VsdFRoZW5hYmxlICYmICFkaWRDYWxsU2VuZFJlc3BvbnNlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfSAvLyBBIHNtYWxsIGhlbHBlciB0byBzZW5kIHRoZSBtZXNzYWdlIGlmIHRoZSBwcm9taXNlIHJlc29sdmVzXG4gICAgICAgICAgLy8gYW5kIGFuIGVycm9yIGlmIHRoZSBwcm9taXNlIHJlamVjdHMgKGEgd3JhcHBlZCBzZW5kTWVzc2FnZSBoYXNcbiAgICAgICAgICAvLyB0byB0cmFuc2xhdGUgdGhlIG1lc3NhZ2UgaW50byBhIHJlc29sdmVkIHByb21pc2Ugb3IgYSByZWplY3RlZFxuICAgICAgICAgIC8vIHByb21pc2UpLlxuXG5cbiAgICAgICAgICBjb25zdCBzZW5kUHJvbWlzZWRSZXN1bHQgPSBwcm9taXNlID0+IHtcbiAgICAgICAgICAgIHByb21pc2UudGhlbihtc2cgPT4ge1xuICAgICAgICAgICAgICAvLyBzZW5kIHRoZSBtZXNzYWdlIHZhbHVlLlxuICAgICAgICAgICAgICBzZW5kUmVzcG9uc2UobXNnKTtcbiAgICAgICAgICAgIH0sIGVycm9yID0+IHtcbiAgICAgICAgICAgICAgLy8gU2VuZCBhIEpTT04gcmVwcmVzZW50YXRpb24gb2YgdGhlIGVycm9yIGlmIHRoZSByZWplY3RlZCB2YWx1ZVxuICAgICAgICAgICAgICAvLyBpcyBhbiBpbnN0YW5jZSBvZiBlcnJvciwgb3IgdGhlIG9iamVjdCBpdHNlbGYgb3RoZXJ3aXNlLlxuICAgICAgICAgICAgICBsZXQgbWVzc2FnZTtcblxuICAgICAgICAgICAgICBpZiAoZXJyb3IgJiYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgfHwgdHlwZW9mIGVycm9yLm1lc3NhZ2UgPT09IFwic3RyaW5nXCIpKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IFwiQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZFwiO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgc2VuZFJlc3BvbnNlKHtcbiAgICAgICAgICAgICAgICBfX21veldlYkV4dGVuc2lvblBvbHlmaWxsUmVqZWN0X186IHRydWUsXG4gICAgICAgICAgICAgICAgbWVzc2FnZVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgICAgIC8vIFByaW50IGFuIGVycm9yIG9uIHRoZSBjb25zb2xlIGlmIHVuYWJsZSB0byBzZW5kIHRoZSByZXNwb25zZS5cbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBzZW5kIG9uTWVzc2FnZSByZWplY3RlZCByZXBseVwiLCBlcnIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfTsgLy8gSWYgdGhlIGxpc3RlbmVyIHJldHVybmVkIGEgUHJvbWlzZSwgc2VuZCB0aGUgcmVzb2x2ZWQgdmFsdWUgYXMgYVxuICAgICAgICAgIC8vIHJlc3VsdCwgb3RoZXJ3aXNlIHdhaXQgdGhlIHByb21pc2UgcmVsYXRlZCB0byB0aGUgd3JhcHBlZFNlbmRSZXNwb25zZVxuICAgICAgICAgIC8vIGNhbGxiYWNrIHRvIHJlc29sdmUgYW5kIHNlbmQgaXQgYXMgYSByZXNwb25zZS5cblxuXG4gICAgICAgICAgaWYgKGlzUmVzdWx0VGhlbmFibGUpIHtcbiAgICAgICAgICAgIHNlbmRQcm9taXNlZFJlc3VsdChyZXN1bHQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZW5kUHJvbWlzZWRSZXN1bHQoc2VuZFJlc3BvbnNlUHJvbWlzZSk7XG4gICAgICAgICAgfSAvLyBMZXQgQ2hyb21lIGtub3cgdGhhdCB0aGUgbGlzdGVuZXIgaXMgcmVwbHlpbmcuXG5cblxuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9O1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHdyYXBwZWRTZW5kTWVzc2FnZUNhbGxiYWNrID0gKHtcbiAgICAgICAgcmVqZWN0LFxuICAgICAgICByZXNvbHZlXG4gICAgICB9LCByZXBseSkgPT4ge1xuICAgICAgICBpZiAoZXh0ZW5zaW9uQVBJcy5ydW50aW1lLmxhc3RFcnJvcikge1xuICAgICAgICAgIC8vIERldGVjdCB3aGVuIG5vbmUgb2YgdGhlIGxpc3RlbmVycyByZXBsaWVkIHRvIHRoZSBzZW5kTWVzc2FnZSBjYWxsIGFuZCByZXNvbHZlXG4gICAgICAgICAgLy8gdGhlIHByb21pc2UgdG8gdW5kZWZpbmVkIGFzIGluIEZpcmVmb3guXG4gICAgICAgICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9tb3ppbGxhL3dlYmV4dGVuc2lvbi1wb2x5ZmlsbC9pc3N1ZXMvMTMwXG4gICAgICAgICAgaWYgKGV4dGVuc2lvbkFQSXMucnVudGltZS5sYXN0RXJyb3IubWVzc2FnZSA9PT0gQ0hST01FX1NFTkRfTUVTU0FHRV9DQUxMQkFDS19OT19SRVNQT05TRV9NRVNTQUdFKSB7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoZXh0ZW5zaW9uQVBJcy5ydW50aW1lLmxhc3RFcnJvci5tZXNzYWdlKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHJlcGx5ICYmIHJlcGx5Ll9fbW96V2ViRXh0ZW5zaW9uUG9seWZpbGxSZWplY3RfXykge1xuICAgICAgICAgIC8vIENvbnZlcnQgYmFjayB0aGUgSlNPTiByZXByZXNlbnRhdGlvbiBvZiB0aGUgZXJyb3IgaW50b1xuICAgICAgICAgIC8vIGFuIEVycm9yIGluc3RhbmNlLlxuICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IocmVwbHkubWVzc2FnZSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc29sdmUocmVwbHkpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBjb25zdCB3cmFwcGVkU2VuZE1lc3NhZ2UgPSAobmFtZSwgbWV0YWRhdGEsIGFwaU5hbWVzcGFjZU9iaiwgLi4uYXJncykgPT4ge1xuICAgICAgICBpZiAoYXJncy5sZW5ndGggPCBtZXRhZGF0YS5taW5BcmdzKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCBhdCBsZWFzdCAke21ldGFkYXRhLm1pbkFyZ3N9ICR7cGx1cmFsaXplQXJndW1lbnRzKG1ldGFkYXRhLm1pbkFyZ3MpfSBmb3IgJHtuYW1lfSgpLCBnb3QgJHthcmdzLmxlbmd0aH1gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhcmdzLmxlbmd0aCA+IG1ldGFkYXRhLm1heEFyZ3MpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIGF0IG1vc3QgJHttZXRhZGF0YS5tYXhBcmdzfSAke3BsdXJhbGl6ZUFyZ3VtZW50cyhtZXRhZGF0YS5tYXhBcmdzKX0gZm9yICR7bmFtZX0oKSwgZ290ICR7YXJncy5sZW5ndGh9YCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHdyYXBwZWRDYiA9IHdyYXBwZWRTZW5kTWVzc2FnZUNhbGxiYWNrLmJpbmQobnVsbCwge1xuICAgICAgICAgICAgcmVzb2x2ZSxcbiAgICAgICAgICAgIHJlamVjdFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGFyZ3MucHVzaCh3cmFwcGVkQ2IpO1xuICAgICAgICAgIGFwaU5hbWVzcGFjZU9iai5zZW5kTWVzc2FnZSguLi5hcmdzKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICBjb25zdCBzdGF0aWNXcmFwcGVycyA9IHtcbiAgICAgICAgZGV2dG9vbHM6IHtcbiAgICAgICAgICBuZXR3b3JrOiB7XG4gICAgICAgICAgICBvblJlcXVlc3RGaW5pc2hlZDogd3JhcEV2ZW50KG9uUmVxdWVzdEZpbmlzaGVkV3JhcHBlcnMpXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBydW50aW1lOiB7XG4gICAgICAgICAgb25NZXNzYWdlOiB3cmFwRXZlbnQob25NZXNzYWdlV3JhcHBlcnMpLFxuICAgICAgICAgIG9uTWVzc2FnZUV4dGVybmFsOiB3cmFwRXZlbnQob25NZXNzYWdlV3JhcHBlcnMpLFxuICAgICAgICAgIHNlbmRNZXNzYWdlOiB3cmFwcGVkU2VuZE1lc3NhZ2UuYmluZChudWxsLCBcInNlbmRNZXNzYWdlXCIsIHtcbiAgICAgICAgICAgIG1pbkFyZ3M6IDEsXG4gICAgICAgICAgICBtYXhBcmdzOiAzXG4gICAgICAgICAgfSlcbiAgICAgICAgfSxcbiAgICAgICAgdGFiczoge1xuICAgICAgICAgIHNlbmRNZXNzYWdlOiB3cmFwcGVkU2VuZE1lc3NhZ2UuYmluZChudWxsLCBcInNlbmRNZXNzYWdlXCIsIHtcbiAgICAgICAgICAgIG1pbkFyZ3M6IDIsXG4gICAgICAgICAgICBtYXhBcmdzOiAzXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGNvbnN0IHNldHRpbmdNZXRhZGF0YSA9IHtcbiAgICAgICAgY2xlYXI6IHtcbiAgICAgICAgICBtaW5BcmdzOiAxLFxuICAgICAgICAgIG1heEFyZ3M6IDFcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0OiB7XG4gICAgICAgICAgbWluQXJnczogMSxcbiAgICAgICAgICBtYXhBcmdzOiAxXG4gICAgICAgIH0sXG4gICAgICAgIHNldDoge1xuICAgICAgICAgIG1pbkFyZ3M6IDEsXG4gICAgICAgICAgbWF4QXJnczogMVxuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgYXBpTWV0YWRhdGEucHJpdmFjeSA9IHtcbiAgICAgICAgbmV0d29yazoge1xuICAgICAgICAgIFwiKlwiOiBzZXR0aW5nTWV0YWRhdGFcbiAgICAgICAgfSxcbiAgICAgICAgc2VydmljZXM6IHtcbiAgICAgICAgICBcIipcIjogc2V0dGluZ01ldGFkYXRhXG4gICAgICAgIH0sXG4gICAgICAgIHdlYnNpdGVzOiB7XG4gICAgICAgICAgXCIqXCI6IHNldHRpbmdNZXRhZGF0YVxuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgcmV0dXJuIHdyYXBPYmplY3QoZXh0ZW5zaW9uQVBJcywgc3RhdGljV3JhcHBlcnMsIGFwaU1ldGFkYXRhKTtcbiAgICB9OyAvLyBUaGUgYnVpbGQgcHJvY2VzcyBhZGRzIGEgVU1EIHdyYXBwZXIgYXJvdW5kIHRoaXMgZmlsZSwgd2hpY2ggbWFrZXMgdGhlXG4gICAgLy8gYG1vZHVsZWAgdmFyaWFibGUgYXZhaWxhYmxlLlxuXG5cbiAgICBtb2R1bGUuZXhwb3J0cyA9IHdyYXBBUElzKGNocm9tZSk7XG4gIH0gZWxzZSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBnbG9iYWxUaGlzLmJyb3dzZXI7XG4gIH1cbn0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YnJvd3Nlci1wb2x5ZmlsbC5qcy5tYXBcbiIsImV4cG9ydCB0eXBlIFNpdGVDb25maWdNZXRob2QgPSBcIkV4YWN0XCIgfCBcIlByZWZpeFwiIHwgXCJSZWdleFwiO1xuZXhwb3J0IHR5cGUgU2l0ZUNvbmZpZ1RhcmdldCA9IFwiRG9tYWluXCIgfCBcIkhvc3RcIiB8IFwiUGFnZVwiO1xuZXhwb3J0IHR5cGUgU2l0ZUNvbmZpZ05vZGVUeXBlID0gXCJNaWdyYXRpb25cIiB8IFwiVXNlclwiIHwgXCJEZWZhdWx0XCIgfCBcIkF1dG9cIjtcblxuZXhwb3J0IGNsYXNzIEZvcm1NYXRjaENvbmZpZyB7XG4gICAgZm9ybT86IHtcbiAgICAgICAgbmFtZXM/OiBzdHJpbmdbXTtcbiAgICAgICAgaWRzPzogc3RyaW5nW107XG4gICAgfTtcbiAgICBmaWVsZHM/OiB7XG4gICAgICAgIG5hbWVzPzogc3RyaW5nW107XG4gICAgICAgIGlkcz86IHN0cmluZ1tdO1xuICAgIH07XG4gICAgcXVlcnlTZWxlY3RvcnM/OiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGNsYXNzIFNpdGVDb25maWcge1xuICAgIHdoaXRlTGlzdD86IEZvcm1NYXRjaENvbmZpZztcbiAgICBibGFja0xpc3Q/OiBGb3JtTWF0Y2hDb25maWc7XG4gICAgcHJldmVudFNhdmVOb3RpZmljYXRpb24/OiBib29sZWFuO1xuICAgIGxpc3RNYXRjaGluZ0Nhc2VTZW5zaXRpdmU/OiBib29sZWFuO1xuICAgIHByZWZlcnJlZEVudHJ5VXVpZD86IHN0cmluZztcbn1cblxuZXhwb3J0IGNsYXNzIFNpdGVDb25maWdOb2RlIHtcbiAgICBjb25maWc6IFNpdGVDb25maWc7XG4gICAgbWF0Y2hXZWlnaHQ6IG51bWJlcjsgLy8gaGVscCB0byBkZWNpZGUgd2hpY2ggY29uZmlnIHRvIHVzZSB3aGVuIG1vcmUgdGhhbiBvbmUgbWF0Y2hlcyBjdXJyZW50IFVSTFxuICAgIHNvdXJjZTogU2l0ZUNvbmZpZ05vZGVUeXBlO1xufVxuXG5leHBvcnQgY2xhc3MgU2l0ZUNvbmZpZ0xvb2t1cCB7XG4gICAgW2tleTogc3RyaW5nXTogU2l0ZUNvbmZpZ05vZGU7XG59XG5cbmV4cG9ydCBjbGFzcyBTaXRlQ29uZmlnSW5kZXgge1xuICAgIGRvbWFpblJlZ2V4PzogU2l0ZUNvbmZpZ0xvb2t1cDtcbiAgICBkb21haW5FeGFjdD86IFNpdGVDb25maWdMb29rdXA7XG4gICAgZG9tYWluUHJlZml4PzogU2l0ZUNvbmZpZ0xvb2t1cDtcbiAgICBob3N0UmVnZXg/OiBTaXRlQ29uZmlnTG9va3VwO1xuICAgIGhvc3RFeGFjdD86IFNpdGVDb25maWdMb29rdXA7XG4gICAgaG9zdFByZWZpeD86IFNpdGVDb25maWdMb29rdXA7XG4gICAgcGFnZVJlZ2V4PzogU2l0ZUNvbmZpZ0xvb2t1cDtcbiAgICBwYWdlRXhhY3Q/OiBTaXRlQ29uZmlnTG9va3VwO1xuICAgIHBhZ2VQcmVmaXg6IFNpdGVDb25maWdMb29rdXA7XG59XG5cbmV4cG9ydCBjbGFzcyBDb25maWcge1xuICAgIGF1dG9GaWxsRGlhbG9nczogYm9vbGVhbjtcbiAgICBhdXRvRmlsbEZvcm1zOiBib29sZWFuO1xuICAgIGF1dG9GaWxsRm9ybXNXaXRoTXVsdGlwbGVNYXRjaGVzOiBib29sZWFuO1xuICAgIGF1dG9TdWJtaXRGb3JtczogYm9vbGVhbjtcbiAgICBhdXRvU3VibWl0RGlhbG9nczogYm9vbGVhbjtcbiAgICBhdXRvU3VibWl0TWF0Y2hlZEZvcm1zOiBib29sZWFuO1xuICAgIGNvbm5TTENsaWVudDogbnVtYmVyO1xuICAgIGNvbm5TTFNlcnZlck1pbjogbnVtYmVyO1xuICAgIGtlZVBhc3NEQlRvT3Blbjogc3RyaW5nO1xuICAgIGtlZVBhc3NNUlVEQjogc3RyaW5nO1xuICAgIEtlZVBhc3NSUENXZWJTb2NrZXRQb3J0OiBudW1iZXI7XG4gICAgS1BSUENVc2VybmFtZTogc3RyaW5nO1xuICAgIEtQUlBDU3RvcmVkS2V5czogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfTtcbiAgICBsYXN0Q29ubmVjdGVkVG9LZWVQYXNzOiBzdHJpbmc7XG4gICAgbGlzdEFsbE9wZW5EQnM6IGJvb2xlYW47XG4gICAgbG9nTGV2ZWw6IG51bWJlcjtcbiAgICBsb2dNZXRob2RDb25zb2xlOiBib29sZWFuO1xuICAgIGxvZ01ldGhvZEZpbGU6IGJvb2xlYW47XG4gICAgbG9nU2Vuc2l0aXZlRGF0YTogYm9vbGVhbjtcbiAgICBtZXRyaWNzVXNhZ2VEaXNhYmxlZDogYm9vbGVhbjtcbiAgICBtZXRyaWNzVXNlcklkOiBzdHJpbmc7XG4gICAgbXJ1R3JvdXA6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH07XG4gICAgbm90aWZ5V2hlbkVudHJ5VXBkYXRlZDogYm9vbGVhbjtcbiAgICBub3RpZnlXaGVuTGF0ZURpc2NvdmVyeTogYm9vbGVhbjtcbiAgICBub3RpZnlXaGVuTG9nZ2VkT3V0OiBib29sZWFuO1xuICAgIG92ZXJXcml0ZUZpZWxkc0F1dG9tYXRpY2FsbHk6IGJvb2xlYW47IC8vIGRlcHJlY2F0ZWRcbiAgICByZW1lbWJlck1SVURCOiBib29sZWFuO1xuICAgIHJlbWVtYmVyTVJVR3JvdXA6IGJvb2xlYW47XG4gICAgc2F2ZUZhdmljb25zOiBib29sZWFuO1xuICAgIHNlYXJjaEFsbE9wZW5EQnM6IGJvb2xlYW47XG4gICAgc2l0ZUNvbmZpZzogU2l0ZUNvbmZpZ0luZGV4O1xuICAgIGNvbmZpZzogeyB1cmw6IHN0cmluZzsgY29uZmlnOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB9W107XG4gICAgdHV0b3JpYWxQcm9ncmVzczogc3RyaW5nO1xuICAgIHZlcnNpb246IG51bWJlcjsgLy8gZGVmYXVsdCBpcyBpbmNyZW1lbnRlZCB3aGVuIGNoYW5nZXMgYXJlIGludHJvZHVjZWQgdGhhdCByZXF1aXJlIGRhdGEgbWlncmF0aW9uXG4gICAgdHJpZ2dlckNoYW5nZUlucHV0RXZlbnRBZnRlckZpbGw6IGJvb2xlYW47XG4gICAgYXV0b1N1Ym1pdE5ldHdvcmtBdXRoV2l0aFNpbmdsZU1hdGNoOiBib29sZWFuO1xuICAgIHNlYXJjaE5ldHdvcmtBdXRoOiBib29sZWFuO1xuICAgIHBvcnRDb25uZWN0aW9uRGVsYXk6IG51bWJlcjsgLy8gZGVwcmVjYXRlZFxuICAgIG5vdGlmaWNhdGlvbkNvdW50R2VuZXJpYzogbnVtYmVyO1xuICAgIG5vdGlmaWNhdGlvbkNvdW50U2F2ZVBhc3N3b3JkOiBudW1iZXI7XG4gICAgY3VycmVudFNlYXJjaFRlcm1UaW1lb3V0OiBudW1iZXI7XG4gICAgbm90aWZ5UGFzc3dvcmRBdmFpbGFibGVGb3JQYXN0ZTogYm9vbGVhbjtcbiAgICBhbmltYXRlV2hlbk9mZmVyaW5nU2F2ZTogYm9vbGVhbjtcbiAgICBrZWVWYXVsdExhdW5jaE1lc3NhZ2VEaXNtaXNzZWQ6IGJvb2xlYW47XG4gICAga2VlVmF1bHRMYXVuY2hTdGFydDogbnVtYmVyO1xuICAgIGtlZVZhdWx0TGF1bmNoRW5kOiBudW1iZXI7XG4gICAgbWFudWFsU3VibWl0T3ZlcnJpZGVQcm9oaWJpdGVkOiBib29sZWFuO1xuICAgIHRoZW1lOiBzdHJpbmc7XG4gICAgaGlkZUNvbmZpcm1hdGlvbkFmdGVyU2F2ZTogYm9vbGVhbjtcbiAgICBtdXN0U2hvd1JlbGVhc2VOb3Rlc0F0U3RhcnR1cDogYm9vbGVhbjtcbiAgICBhdXRvRmlsbEZpZWxkc1dpdGhFeGlzdGluZ1ZhbHVlOiBib29sZWFuO1xufVxuIiwiaW1wb3J0IHsgU2l0ZUNvbmZpZ0luZGV4LCBTaXRlQ29uZmlnTG9va3VwIH0gZnJvbSBcIi4vY29uZmlnXCI7XG5cbmV4cG9ydCBjb25zdCBkZWZhdWx0U2l0ZUNvbmZpZyA9IG5ldyBTaXRlQ29uZmlnSW5kZXgoKTtcbmRlZmF1bHRTaXRlQ29uZmlnLnBhZ2VSZWdleCA9IG5ldyBTaXRlQ29uZmlnTG9va3VwKCk7XG5cbmRlZmF1bHRTaXRlQ29uZmlnLnBhZ2VSZWdleFtcIl4uKiRcIl0gPSB7XG4gICAgY29uZmlnOiB7XG4gICAgICAgIC8qIFRPRE86NDogPyBJbiBmdXR1cmUgd2UgY2FuIGdpdmUgZmluZXIgY29udHJvbCBvZiBmb3JtIHJlc2Nhbm5pbmcgYmVoYXZpb3VyIGZyb20gaGVyZVxuICAgICAgICAgICAgcmVzY2FuRE9NZXZlbnRzOlxuICAgICAgICAgICAgW3tcblxuICAgICAgICAgICAgICAgIC8vIC9odG1sL2JvZHkvZGl2WzNdL2Rpdi9oMS9zbWFsbFxuXG4gICAgICAgICAgICAgICAgdHlwZTogXCJjbGlja1wiIHwgXCJtdXRhdGlvblwiIHwgXCJob3ZlclwiIHwgZXRjLFxuICAgICAgICAgICAgICAgIHhwYXRoOiBcIi9odG1sL2JvZHkvZGl2WzNdL2Rpdi9oMS9zbWFsbFwiLCAvLyB3ZSBzaG91bGQgZG8gYSBzYW5pdHkgY2hlY2sgb24gcmV0dXJuZWQgaXRlbXMgYW5kIGxpbWl0IHRvIG1heCBvZiB+YSBodW5kcmVkIERPTSBub2Rlc1xuICAgICAgICAgICAgICAgIGlkOiBcInNvbWVJRFwiLFxuICAgICAgICAgICAgICAgIC8vc29tZXRoaW5nIGVsc2UgdG8gbGltaXQgbXV0YXRpb24gZXZlbnRzIHRvIGNyZWF0ZSBvbmUgKGUuZy4gY3JlYXRpb24gb2YgbmV3IGNoaWxkIGl0ZW0gbWF0Y2hpbmcgY2VydGFpbiB4cGF0aD8gZXRjLilcbiAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgKi9cblxuICAgICAgICBwcmV2ZW50U2F2ZU5vdGlmaWNhdGlvbjogZmFsc2UsXG4gICAgICAgIGxpc3RNYXRjaGluZ0Nhc2VTZW5zaXRpdmU6IGZhbHNlLFxuXG4gICAgICAgIC8qXG4gICAgICAgICAgICAgICAgRm9ybXMgd2lsbCBiZSBzY2FubmVkIGlmZiB0aGV5IGhhdmUgYSBwYXNzd29yZCAodHlwZSkgZmllbGRcbiAgICAgICAgICAgICAgICBVTkxFU1Mgb25lIG9mIHRoZSBpbnRlcmVzdGluZ0Zvcm1zIGFycmF5cyBtYXRjaGVzIHRoZSBmb3JtIGluIHF1ZXN0aW9uLlxuICAgICAgICAgICAgICAgIEFsbCAodyloaXRlbGlzdHMgd2lsbCBmb3JjZSB0aGUgZm9ybSB0byBiZSBzY2FubmVkIGZvciBtYXRjaGluZyBwYXNzd29yZHMuXG4gICAgICAgICAgICAgICAgKGIpbGFja2xpc3RzIHdpbGwgcHJldmVudCB0aGUgZm9ybSBiZWluZyBzY2FubmVkLlxuICAgICAgICAgICAgICAgIChiKWxhY2tsaXN0cyBoYXZlIHByaW9yaXR5IG92ZXIgd2hpdGVsaXN0cyBvZiB0aGUgc2FtZSB0eXBlIGJ1dCB0aGUgcHJpb3JpdGllc1xuICAgICAgICAgICAgICAgIG9mIGRpZmZlcmVudCB0eXBlcyBvZiBjaGVjayBhcmUgdW5kZWZpbmVkIGhlcmUgLSB5b3UnbGwgaGF2ZSB0byBsb29rIGF0IHRoZVxuICAgICAgICAgICAgICAgIGJlaGF2aW91ciBvZiB0aGUgZm9ybSBtYXRjaGluZyBjb2RlIHdoaWNoIGlzIHN1YmplY3QgdG8gY2hhbmdlLlxuICAgICAgICAgICAgICAgICovXG4gICAgICAgIGJsYWNrTGlzdDoge1xuICAgICAgICAgICAgZm9ybTogeyBuYW1lczogW1wic2VhcmNoXCJdLCBpZHM6IFtcInNlYXJjaFwiXSB9LFxuICAgICAgICAgICAgZmllbGRzOiB7IG5hbWVzOiBbXCJzZWFyY2hcIiwgXCJxXCIsIFwicXVlcnlcIl0sIGlkczogW1wic2VhcmNoXCIsIFwicVwiXSB9XG4gICAgICAgIH0sXG4gICAgICAgIHdoaXRlTGlzdDoge1xuICAgICAgICAgICAgZm9ybTogeyBuYW1lczogW1wibG9naW5cIl0sIGlkczogW1wibG9naW5cIl0gfSxcbiAgICAgICAgICAgIGZpZWxkczoge1xuICAgICAgICAgICAgICAgIG5hbWVzOiBbXG4gICAgICAgICAgICAgICAgICAgIFwidXNlcm5hbWVcIixcbiAgICAgICAgICAgICAgICAgICAgXCJqX3VzZXJuYW1lXCIsXG4gICAgICAgICAgICAgICAgICAgIFwidXNlcl9uYW1lXCIsXG4gICAgICAgICAgICAgICAgICAgIFwidXNlclwiLFxuICAgICAgICAgICAgICAgICAgICBcInVzZXItbmFtZVwiLFxuICAgICAgICAgICAgICAgICAgICBcImxvZ2luXCIsXG4gICAgICAgICAgICAgICAgICAgIFwidmJfbG9naW5fdXNlcm5hbWVcIixcbiAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCIsXG4gICAgICAgICAgICAgICAgICAgIFwidXNlciBuYW1lXCIsXG4gICAgICAgICAgICAgICAgICAgIFwidXNlciBpZFwiLFxuICAgICAgICAgICAgICAgICAgICBcInVzZXItaWRcIixcbiAgICAgICAgICAgICAgICAgICAgXCJ1c2VyaWRcIixcbiAgICAgICAgICAgICAgICAgICAgXCJlbWFpbFwiLFxuICAgICAgICAgICAgICAgICAgICBcImUtbWFpbFwiLFxuICAgICAgICAgICAgICAgICAgICBcImlkXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiZm9ybV9sb2dpbm5hbWVcIixcbiAgICAgICAgICAgICAgICAgICAgXCJ3cG5hbWVcIixcbiAgICAgICAgICAgICAgICAgICAgXCJtYWlsXCIsXG4gICAgICAgICAgICAgICAgICAgIFwibG9naW5pZFwiLFxuICAgICAgICAgICAgICAgICAgICBcImxvZ2luIGlkXCIsXG4gICAgICAgICAgICAgICAgICAgIFwibG9naW5fbmFtZVwiLFxuICAgICAgICAgICAgICAgICAgICBcIm9wZW5pZF9pZGVudGlmaWVyXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiYXV0aGVudGljYXRpb25fZW1haWxcIixcbiAgICAgICAgICAgICAgICAgICAgXCJvcGVuaWRcIixcbiAgICAgICAgICAgICAgICAgICAgXCJhdXRoX2VtYWlsXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiYXV0aF9pZFwiLFxuICAgICAgICAgICAgICAgICAgICBcImF1dGhlbnRpY2F0aW9uX2lkZW50aWZpZXJcIixcbiAgICAgICAgICAgICAgICAgICAgXCJhdXRoZW50aWNhdGlvbl9pZFwiLFxuICAgICAgICAgICAgICAgICAgICBcImN1c3RvbWVyX251bWJlclwiLFxuICAgICAgICAgICAgICAgICAgICBcImN1c3RvbWVybnVtYmVyXCIsXG4gICAgICAgICAgICAgICAgICAgIFwib25saW5laWRcIlxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgaWRzOiBbXG4gICAgICAgICAgICAgICAgICAgIFwidXNlcm5hbWVcIixcbiAgICAgICAgICAgICAgICAgICAgXCJqX3VzZXJuYW1lXCIsXG4gICAgICAgICAgICAgICAgICAgIFwidXNlcl9uYW1lXCIsXG4gICAgICAgICAgICAgICAgICAgIFwidXNlclwiLFxuICAgICAgICAgICAgICAgICAgICBcInVzZXItbmFtZVwiLFxuICAgICAgICAgICAgICAgICAgICBcImxvZ2luXCIsXG4gICAgICAgICAgICAgICAgICAgIFwidmJfbG9naW5fdXNlcm5hbWVcIixcbiAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCIsXG4gICAgICAgICAgICAgICAgICAgIFwidXNlci1pZFwiLFxuICAgICAgICAgICAgICAgICAgICBcInVzZXJpZFwiLFxuICAgICAgICAgICAgICAgICAgICBcImVtYWlsXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiZS1tYWlsXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiaWRcIixcbiAgICAgICAgICAgICAgICAgICAgXCJmb3JtX2xvZ2lubmFtZVwiLFxuICAgICAgICAgICAgICAgICAgICBcIndwbmFtZVwiLFxuICAgICAgICAgICAgICAgICAgICBcIm1haWxcIixcbiAgICAgICAgICAgICAgICAgICAgXCJsb2dpbmlkXCIsXG4gICAgICAgICAgICAgICAgICAgIFwibG9naW5fbmFtZVwiLFxuICAgICAgICAgICAgICAgICAgICBcIm9wZW5pZF9pZGVudGlmaWVyXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiYXV0aGVudGljYXRpb25fZW1haWxcIixcbiAgICAgICAgICAgICAgICAgICAgXCJvcGVuaWRcIixcbiAgICAgICAgICAgICAgICAgICAgXCJhdXRoX2VtYWlsXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiYXV0aF9pZFwiLFxuICAgICAgICAgICAgICAgICAgICBcImF1dGhlbnRpY2F0aW9uX2lkZW50aWZpZXJcIixcbiAgICAgICAgICAgICAgICAgICAgXCJhdXRoZW50aWNhdGlvbl9pZFwiLFxuICAgICAgICAgICAgICAgICAgICBcImN1c3RvbWVyX251bWJlclwiLFxuICAgICAgICAgICAgICAgICAgICBcImN1c3RvbWVybnVtYmVyXCIsXG4gICAgICAgICAgICAgICAgICAgIFwib25saW5laWRcIlxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcHJlZmVycmVkRW50cnlVdWlkOiBudWxsXG4gICAgfSxcbiAgICBtYXRjaFdlaWdodDogMCxcbiAgICBzb3VyY2U6IFwiRGVmYXVsdFwiXG59O1xuIiwiaW1wb3J0IHsgU2l0ZUNvbmZpZywgQ29uZmlnLCBTaXRlQ29uZmlnTG9va3VwLCBTaXRlQ29uZmlnSW5kZXggfSBmcm9tIFwiLi9jb25maWdcIjtcbmltcG9ydCB7IGRlZmF1bHRTaXRlQ29uZmlnIH0gZnJvbSBcIi4vRGVmYXVsdFNpdGVDb25maWdcIjtcblxuZXhwb3J0IGNsYXNzIENvbmZpZ01pZ3JhdGlvbnMge1xuICAgIHB1YmxpYyBtaWdyYXRlVG9WZXJzaW9uOChjdXJyZW50OiBDb25maWcpIHtcbiAgICAgICAgLy8gVGhpcyBpc24ndCByZWxpYWJsZSBkdWUgdG8gc3luYyBzbyB3ZSd2ZSBkZXByZWNhdGVkIHRoZSBzZXR0aW5nXG4gICAgICAgIC8vIGFuZCBjcmVhdGVkIGEgbmV3IG9uZSB0aGF0IHJlcXVpcmVzIG5vIG1pZ3JhdGlvblxuICAgICAgICBPYmplY3QuYXNzaWduKGN1cnJlbnQsIHtcbiAgICAgICAgICAgIG92ZXJXcml0ZUZpZWxkc0F1dG9tYXRpY2FsbHk6IGZhbHNlLFxuICAgICAgICAgICAgdmVyc2lvbjogOFxuICAgICAgICB9IGFzIFBhcnRpYWw8Q29uZmlnPik7XG4gICAgfVxuXG4gICAgcHVibGljIG1pZ3JhdGVUb1ZlcnNpb243KGN1cnJlbnQ6IENvbmZpZykge1xuICAgICAgICBpZiAoY3VycmVudC5ub3RpZmljYXRpb25Db3VudFNhdmVQYXNzd29yZCA+IDYpIHtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oY3VycmVudCwge1xuICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbkNvdW50U2F2ZVBhc3N3b3JkOiA2LFxuICAgICAgICAgICAgICAgIHZlcnNpb246IDdcbiAgICAgICAgICAgIH0gYXMgUGFydGlhbDxDb25maWc+KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oY3VycmVudCwgeyB2ZXJzaW9uOiA3IH0gYXMgUGFydGlhbDxDb25maWc+KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBtaWdyYXRlVG9WZXJzaW9uNihjdXJyZW50OiBDb25maWcpIHtcbiAgICAgICAgT2JqZWN0LmFzc2lnbihjdXJyZW50LCB7XG4gICAgICAgICAgICBhbmltYXRlV2hlbk9mZmVyaW5nU2F2ZTogdHJ1ZSxcbiAgICAgICAgICAgIHZlcnNpb246IDZcbiAgICAgICAgfSBhcyBQYXJ0aWFsPENvbmZpZz4pO1xuICAgIH1cblxuICAgIHB1YmxpYyBtaWdyYXRlVG9WZXJzaW9uNShjdXJyZW50OiBDb25maWcpIHtcbiAgICAgICAgT2JqZWN0LmFzc2lnbihjdXJyZW50LCB7XG4gICAgICAgICAgICBub3RpZnlQYXNzd29yZEF2YWlsYWJsZUZvclBhc3RlOiB0cnVlLFxuICAgICAgICAgICAgdmVyc2lvbjogNVxuICAgICAgICB9IGFzIFBhcnRpYWw8Q29uZmlnPik7XG4gICAgfVxuXG4gICAgcHVibGljIG1pZ3JhdGVUb1ZlcnNpb240KGN1cnJlbnQ6IENvbmZpZykge1xuICAgICAgICBsZXQgbmV3TG9nTGV2ZWwgPSAyO1xuICAgICAgICBpZiAoY3VycmVudC5sb2dMZXZlbCA9PT0gMSkge1xuICAgICAgICAgICAgbmV3TG9nTGV2ZWwgPSAxO1xuICAgICAgICB9XG5cbiAgICAgICAgT2JqZWN0LmFzc2lnbihjdXJyZW50LCB7IGxvZ0xldmVsOiBuZXdMb2dMZXZlbCwgdmVyc2lvbjogNCB9IGFzIFBhcnRpYWw8Q29uZmlnPik7XG4gICAgfVxuXG4gICAgcHVibGljIG1pZ3JhdGVUb1ZlcnNpb24zKGN1cnJlbnQ6IENvbmZpZykge1xuICAgICAgICBpZiAoY3VycmVudC5ub3RpZmljYXRpb25Db3VudEdlbmVyaWMgPT0gbnVsbCkge1xuICAgICAgICAgICAgY3VycmVudC5ub3RpZmljYXRpb25Db3VudEdlbmVyaWMgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdXJyZW50Lm5vdGlmaWNhdGlvbkNvdW50U2F2ZVBhc3N3b3JkID09IG51bGwpIHtcbiAgICAgICAgICAgIGN1cnJlbnQubm90aWZpY2F0aW9uQ291bnRTYXZlUGFzc3dvcmQgPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgT2JqZWN0LmFzc2lnbihjdXJyZW50LCB7XG4gICAgICAgICAgICBjdXJyZW50U2VhcmNoVGVybVRpbWVvdXQ6IDMwLFxuICAgICAgICAgICAgdmVyc2lvbjogM1xuICAgICAgICB9IGFzIFBhcnRpYWw8Q29uZmlnPik7XG4gICAgfVxuXG4gICAgcHVibGljIG1pZ3JhdGVUb1ZlcnNpb24yKGN1cnJlbnQ6IENvbmZpZykge1xuICAgICAgICBsZXQgbmV3U2l0ZUNvbmZpZyA9IG5ldyBTaXRlQ29uZmlnSW5kZXgoKTtcblxuICAgICAgICBpZiAoIWN1cnJlbnQuY29uZmlnIHx8IGN1cnJlbnQuY29uZmlnLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICBuZXdTaXRlQ29uZmlnID0gZGVmYXVsdFNpdGVDb25maWc7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbmV3U2l0ZUNvbmZpZy5wYWdlUmVnZXggPSBuZXcgU2l0ZUNvbmZpZ0xvb2t1cCgpO1xuICAgICAgICBuZXdTaXRlQ29uZmlnLmhvc3RFeGFjdCA9IG5ldyBTaXRlQ29uZmlnTG9va3VwKCk7XG4gICAgICAgIG5ld1NpdGVDb25maWcucGFnZVByZWZpeCA9IG5ldyBTaXRlQ29uZmlnTG9va3VwKCk7XG5cbiAgICAgICAgbmV3U2l0ZUNvbmZpZy5wYWdlUmVnZXhbXCJeLiokXCJdID0ge1xuICAgICAgICAgICAgbWF0Y2hXZWlnaHQ6IDAsXG4gICAgICAgICAgICBjb25maWc6IHRoaXMubWlncmF0ZUluZGl2aWR1YWxTaXRlQ29uZmlnU2V0dGluZ3NUb1YyKGN1cnJlbnQuY29uZmlnWzBdLmNvbmZpZyksXG4gICAgICAgICAgICBzb3VyY2U6IFwiTWlncmF0aW9uXCJcbiAgICAgICAgfTtcblxuICAgICAgICBmb3IgKFxuICAgICAgICAgICAgbGV0IGkgPSAxO1xuICAgICAgICAgICAgaSA8IGN1cnJlbnQuY29uZmlnLmxlbmd0aDtcbiAgICAgICAgICAgIGkrKyAvLyBza2lwIGZpcnN0IHdoaWNoIGlzIGFsd2F5cyBcIipcIlxuICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnN0IHVybCA9IGN1cnJlbnQuY29uZmlnW2ldLnVybDtcbiAgICAgICAgICAgIGlmICh1cmwuaW5kZXhPZihcIjovL1wiKSA9PSAtMSkgY29udGludWU7IC8vIGludmFsaWQgZGF0YSBmcm9tIG9sZCBjb25maWdcbiAgICAgICAgICAgIGNvbnN0IHdpdGhvdXRQcm90b2NvbCA9IHVybC5zdWJzdHIodXJsLmluZGV4T2YoXCI6Ly9cIikgKyAzKTtcbiAgICAgICAgICAgIGlmICh3aXRob3V0UHJvdG9jb2wubGVuZ3RoIDw9IDEpIGNvbnRpbnVlOyAvLyBpbnZhbGlkIGRhdGEgZnJvbSBvbGQgY29uZmlnXG5cbiAgICAgICAgICAgIGNvbnN0IG5ld0NvbmZpZyA9IHRoaXMubWlncmF0ZUluZGl2aWR1YWxTaXRlQ29uZmlnU2V0dGluZ3NUb1YyKFxuICAgICAgICAgICAgICAgIGN1cnJlbnQuY29uZmlnW2ldLmNvbmZpZ1xuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgY29uc3QgcGF0aEluZGV4ID0gd2l0aG91dFByb3RvY29sLmluZGV4T2YoXCIvXCIpO1xuXG4gICAgICAgICAgICBpZiAocGF0aEluZGV4ID4gLTEgfHwgcGF0aEluZGV4ID09IHdpdGhvdXRQcm90b2NvbC5sYXN0SW5kZXhPZihcIi9cIikpIHtcbiAgICAgICAgICAgICAgICAvLyByZW1vdmluZyB0cmFpbGluZyBzbGFzaCBpZiB3ZSBoYXZlIG9ubHkgYSBob3N0IG5hbWVcbiAgICAgICAgICAgICAgICBjb25zdCBob3N0ID1cbiAgICAgICAgICAgICAgICAgICAgcGF0aEluZGV4ID4gLTEgPyB3aXRob3V0UHJvdG9jb2wuc3Vic3RyKDAsIHBhdGhJbmRleCkgOiB3aXRob3V0UHJvdG9jb2w7XG5cbiAgICAgICAgICAgICAgICAvLyBVc2VyIG1heSBoYXZlIGNvbmZpZ3VyZWQgYSBwcmVmaXggbWF0Y2ggaW4gS2VlRm94IDEueCBidXQgaXQncyBub3QgYW4gZXNwZWNpYWxseSB1c2VmdWxcbiAgICAgICAgICAgICAgICAvLyBiZWhhdmlvdXIgYW5kIGhhcyBwb3RlbnRpYWwgdG8gYmUgdW5zYWZlIGluIGZ1dHVyZSBzbyB3ZSBjb252ZXJ0IGFsbCB0byBleGFjdCBtYXRjaGVzIG5vd1xuICAgICAgICAgICAgICAgIG5ld1NpdGVDb25maWcuaG9zdEV4YWN0W2hvc3RdID0ge1xuICAgICAgICAgICAgICAgICAgICBjb25maWc6IG5ld0NvbmZpZyxcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hXZWlnaHQ6IDEwMCxcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiBcIk1pZ3JhdGlvblwiXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8ga2VlcCBpbmNyZWFzaW5nIHdlaWdodCB1bnRpbCB3ZSBmaW5kIG5vIG90aGVyIHNob3J0ZXIgZXhpc3RpbmcgZW50cmllcy4gVGhpcyBhc3N1bWVzIG9yZGVyaW5nIGJ5IGxlbmd0aFxuICAgICAgICAgICAgICAgIC8vIGluIHRoZSBvcmlnaW5hbCBkYXRhIHNvIHRoYXQgaXQgY2FuIGJlIHRyYW5zZmVycmVkIHRvIHRoZSBuZXcgY29uZmlnIGluIHNhbWUgb3JkZXJcbiAgICAgICAgICAgICAgICAvLyB3aGljaCBpc24ndCBjb21wbGV0ZWx5IHNhZmUgYnV0IG9ubHkgYmVjYXVzZSBvZiBidWdzIGluIEtlZUZveCAxLnggd2hpY2ggbWF5IGhhdmUgYWZmZWN0ZWQgZGF0YSBpbnRlZ3JpdHlcbiAgICAgICAgICAgICAgICAvLyBpbiBvbmUgb3IgdHdvIHJhcmUgY2FzZXMgYW5kIHdoaWNoIHdlIGNhbiBubyBsb25nZXIgZml4IHJlbGlhYmx5IGFueXdheS5cbiAgICAgICAgICAgICAgICBsZXQgd2VpZ2h0ID0gMjAwO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcGFnZVByZWZpeCBpbiBuZXdTaXRlQ29uZmlnLnBhZ2VQcmVmaXgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHdpdGhvdXRQcm90b2NvbC5zdGFydHNXaXRoKHBhZ2VQcmVmaXgpKSB3ZWlnaHQrKztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBuZXdTaXRlQ29uZmlnLnBhZ2VQcmVmaXhbd2l0aG91dFByb3RvY29sXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnOiBuZXdDb25maWcsXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoV2VpZ2h0OiB3ZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogXCJNaWdyYXRpb25cIlxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBPYmplY3QuYXNzaWduKGN1cnJlbnQsIHtcbiAgICAgICAgICAgIHNpdGVDb25maWc6IG5ld1NpdGVDb25maWcsXG4gICAgICAgICAgICBjb25maWc6IG51bGwsXG4gICAgICAgICAgICB2ZXJzaW9uOiAyXG4gICAgICAgIH0gYXMgUGFydGlhbDxDb25maWc+KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG1pZ3JhdGVJbmRpdmlkdWFsU2l0ZUNvbmZpZ1NldHRpbmdzVG9WMihvbGRDb25maWc6IGFueSk6IFNpdGVDb25maWcge1xuICAgICAgICBjb25zdCBzYyA9IG5ldyBTaXRlQ29uZmlnKCk7XG4gICAgICAgIGlmIChvbGRDb25maWcucHJldmVudFNhdmVOb3RpZmljYXRpb24gPT0gbnVsbCkge1xuICAgICAgICAgICAgc2MucHJldmVudFNhdmVOb3RpZmljYXRpb24gPSBvbGRDb25maWcucHJldmVudFNhdmVOb3RpZmljYXRpb247XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9sZENvbmZpZy5pbnRlcmVzdGluZ0Zvcm1zKSB7XG4gICAgICAgICAgICBpZiAob2xkQ29uZmlnLmludGVyZXN0aW5nRm9ybXMubmFtZV93KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzYy53aGl0ZUxpc3QpIHNjLndoaXRlTGlzdCA9IHsgZm9ybTogeyBuYW1lczogW10gfSB9O1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFzYy53aGl0ZUxpc3QuZm9ybSkgc2Mud2hpdGVMaXN0LmZvcm0gPSB7IG5hbWVzOiBbXSB9O1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFzYy53aGl0ZUxpc3QuZm9ybS5uYW1lcykgc2Mud2hpdGVMaXN0LmZvcm0ubmFtZXMgPSBbXTtcbiAgICAgICAgICAgICAgICBzYy53aGl0ZUxpc3QuZm9ybS5uYW1lcyA9IG9sZENvbmZpZy5pbnRlcmVzdGluZ0Zvcm1zLm5hbWVfdztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvbGRDb25maWcuaW50ZXJlc3RpbmdGb3Jtcy5pZF93KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzYy53aGl0ZUxpc3QpIHNjLndoaXRlTGlzdCA9IHsgZm9ybTogeyBpZHM6IFtdIH0gfTtcbiAgICAgICAgICAgICAgICBlbHNlIGlmICghc2Mud2hpdGVMaXN0LmZvcm0pIHNjLndoaXRlTGlzdC5mb3JtID0geyBpZHM6IFtdIH07XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIXNjLndoaXRlTGlzdC5mb3JtLmlkcykgc2Mud2hpdGVMaXN0LmZvcm0uaWRzID0gW107XG4gICAgICAgICAgICAgICAgc2Mud2hpdGVMaXN0LmZvcm0uaWRzID0gb2xkQ29uZmlnLmludGVyZXN0aW5nRm9ybXMuaWRfdztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvbGRDb25maWcuaW50ZXJlc3RpbmdGb3Jtcy5uYW1lX2IpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXNjLmJsYWNrTGlzdCkgc2MuYmxhY2tMaXN0ID0geyBmb3JtOiB7IG5hbWVzOiBbXSB9IH07XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIXNjLmJsYWNrTGlzdC5mb3JtKSBzYy5ibGFja0xpc3QuZm9ybSA9IHsgbmFtZXM6IFtdIH07XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIXNjLmJsYWNrTGlzdC5mb3JtLm5hbWVzKSBzYy5ibGFja0xpc3QuZm9ybS5uYW1lcyA9IFtdO1xuICAgICAgICAgICAgICAgIHNjLmJsYWNrTGlzdC5mb3JtLm5hbWVzID0gb2xkQ29uZmlnLmludGVyZXN0aW5nRm9ybXMubmFtZV9iO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9sZENvbmZpZy5pbnRlcmVzdGluZ0Zvcm1zLmlkX2IpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXNjLmJsYWNrTGlzdCkgc2MuYmxhY2tMaXN0ID0geyBmb3JtOiB7IGlkczogW10gfSB9O1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFzYy5ibGFja0xpc3QuZm9ybSkgc2MuYmxhY2tMaXN0LmZvcm0gPSB7IGlkczogW10gfTtcbiAgICAgICAgICAgICAgICBlbHNlIGlmICghc2MuYmxhY2tMaXN0LmZvcm0uaWRzKSBzYy5ibGFja0xpc3QuZm9ybS5pZHMgPSBbXTtcbiAgICAgICAgICAgICAgICBzYy5ibGFja0xpc3QuZm9ybS5pZHMgPSBvbGRDb25maWcuaW50ZXJlc3RpbmdGb3Jtcy5pZF9iO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9sZENvbmZpZy5pbnRlcmVzdGluZ0Zvcm1zLmZfbmFtZV93KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzYy53aGl0ZUxpc3QpIHNjLndoaXRlTGlzdCA9IHsgZmllbGRzOiB7IG5hbWVzOiBbXSB9IH07XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIXNjLndoaXRlTGlzdC5maWVsZHMpIHNjLndoaXRlTGlzdC5maWVsZHMgPSB7IG5hbWVzOiBbXSB9O1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFzYy53aGl0ZUxpc3QuZmllbGRzLm5hbWVzKSBzYy53aGl0ZUxpc3QuZmllbGRzLm5hbWVzID0gW107XG4gICAgICAgICAgICAgICAgc2Mud2hpdGVMaXN0LmZpZWxkcy5uYW1lcyA9IG9sZENvbmZpZy5pbnRlcmVzdGluZ0Zvcm1zLmZfbmFtZV93O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9sZENvbmZpZy5pbnRlcmVzdGluZ0Zvcm1zLmZfaWRfdykge1xuICAgICAgICAgICAgICAgIGlmICghc2Mud2hpdGVMaXN0KSBzYy53aGl0ZUxpc3QgPSB7IGZpZWxkczogeyBpZHM6IFtdIH0gfTtcbiAgICAgICAgICAgICAgICBlbHNlIGlmICghc2Mud2hpdGVMaXN0LmZpZWxkcykgc2Mud2hpdGVMaXN0LmZpZWxkcyA9IHsgaWRzOiBbXSB9O1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFzYy53aGl0ZUxpc3QuZmllbGRzLmlkcykgc2Mud2hpdGVMaXN0LmZpZWxkcy5pZHMgPSBbXTtcbiAgICAgICAgICAgICAgICBzYy53aGl0ZUxpc3QuZmllbGRzLmlkcyA9IG9sZENvbmZpZy5pbnRlcmVzdGluZ0Zvcm1zLmZfaWRfdztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvbGRDb25maWcuaW50ZXJlc3RpbmdGb3Jtcy5mX25hbWVfYikge1xuICAgICAgICAgICAgICAgIGlmICghc2MuYmxhY2tMaXN0KSBzYy5ibGFja0xpc3QgPSB7IGZpZWxkczogeyBuYW1lczogW10gfSB9O1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFzYy5ibGFja0xpc3QuZmllbGRzKSBzYy5ibGFja0xpc3QuZmllbGRzID0geyBuYW1lczogW10gfTtcbiAgICAgICAgICAgICAgICBlbHNlIGlmICghc2MuYmxhY2tMaXN0LmZpZWxkcy5uYW1lcykgc2MuYmxhY2tMaXN0LmZpZWxkcy5uYW1lcyA9IFtdO1xuICAgICAgICAgICAgICAgIHNjLmJsYWNrTGlzdC5maWVsZHMubmFtZXMgPSBvbGRDb25maWcuaW50ZXJlc3RpbmdGb3Jtcy5mX25hbWVfYjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvbGRDb25maWcuaW50ZXJlc3RpbmdGb3Jtcy5mX2lkX2IpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXNjLmJsYWNrTGlzdCkgc2MuYmxhY2tMaXN0ID0geyBmaWVsZHM6IHsgaWRzOiBbXSB9IH07XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIXNjLmJsYWNrTGlzdC5maWVsZHMpIHNjLmJsYWNrTGlzdC5maWVsZHMgPSB7IGlkczogW10gfTtcbiAgICAgICAgICAgICAgICBlbHNlIGlmICghc2MuYmxhY2tMaXN0LmZpZWxkcy5pZHMpIHNjLmJsYWNrTGlzdC5maWVsZHMuaWRzID0gW107XG4gICAgICAgICAgICAgICAgc2MuYmxhY2tMaXN0LmZpZWxkcy5pZHMgPSBvbGRDb25maWcuaW50ZXJlc3RpbmdGb3Jtcy5mX2lkX2I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNjO1xuICAgIH1cbn1cbiIsImRlY2xhcmUgY29uc3QgcHVibGljU3VmZml4TGlzdDtcbmRlY2xhcmUgY29uc3QgcHVueWNvZGU7XG5kZWNsYXJlIGNvbnN0IHBzbERhdGE7XG5cbmV4cG9ydCBjbGFzcyBVdGlscyB7XG4gICAgcHJpdmF0ZSBwc2xJbml0aWFsaXNlZCA9IGZhbHNlO1xuXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAvIEdlbmVyYWwgdXRpbGl0eSBmdW5jdGlvbnNcbiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAgIHZlcnNpb25Bc0ludCh2ZXJzaW9uQXJyYXkpIHtcbiAgICAgICAgbGV0IHZhbHVlID0gMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2ZXJzaW9uQXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUgKiAyNTYgKyB2ZXJzaW9uQXJyYXlbaV07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuXG4gICAgdmVyc2lvbkFzQXJyYXkodmVyc2lvbkludCkge1xuICAgICAgICBjb25zdCBieXRlQXJyYXkgPSBbMCwgMCwgMF07XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IGJ5dGVBcnJheS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgY29uc3QgYnl0ZSA9IHZlcnNpb25JbnQgJiAweGZmO1xuICAgICAgICAgICAgYnl0ZUFycmF5W2ldID0gYnl0ZTtcbiAgICAgICAgICAgIHZlcnNpb25JbnQgPSAodmVyc2lvbkludCAtIGJ5dGUpIC8gMjU2O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGJ5dGVBcnJheTtcbiAgICB9XG5cbiAgICB2ZXJzaW9uQXNTdHJpbmcodmVyc2lvbkludCkge1xuICAgICAgICBsZXQgdmFsdWUgPSBcIlwiO1xuICAgICAgICBjb25zdCB2ZXJzaW9uQXJyYXkgPSB0aGlzLnZlcnNpb25Bc0FycmF5KHZlcnNpb25JbnQpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZlcnNpb25BcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGkgPiAwKSB2YWx1ZSArPSBcIi5cIjtcbiAgICAgICAgICAgIHZhbHVlICs9IHZlcnNpb25BcnJheVtpXS50b1N0cmluZygpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIC8vIHJldHVybiB0aGUgdHdvLWRpZ2l0IGhleGFkZWNpbWFsIGNvZGUgZm9yIGEgYnl0ZVxuICAgIHRvSGV4U3RyaW5nKGNoYXJDb2RlKSB7XG4gICAgICAgIHJldHVybiAoXCIwXCIgKyBjaGFyQ29kZS50b1N0cmluZygxNikpLnNsaWNlKC0yKTtcbiAgICB9XG5cbiAgICBCaWdJbnRGcm9tUmFuZG9tKGJ5dGVDb3VudCkge1xuICAgICAgICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KGJ5dGVDb3VudCk7XG4gICAgICAgIHdpbmRvdy5jcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKGJ5dGVzKTtcbiAgICAgICAgY29uc3QgaGV4ID0gQXJyYXkuZnJvbShieXRlcykubWFwKHRoaXMudG9IZXhTdHJpbmcpLmpvaW4oXCJcIik7XG4gICAgICAgIHJldHVybiBCaWdJbnRlZ2VyLnBhcnNlKGhleCwgMTYpO1xuICAgICAgICAvL1RPRE86NDogc3dpdGNoIHRvIG5hdGl2ZSBiaWdpbnRcbiAgICAgICAgLy8gICAgICAgIHJldHVybiBCaWdJbnQoYDB4JHtoZXh9YCk7XG4gICAgfVxuXG4gICAgLy8gaW5wdXQgY2FuIGJlIGVpdGhlciBVVEY4IGZvcm1hdHRlZCBzdHJpbmcgb3IgYSBieXRlIGFycmF5XG4gICAgaGFzaDxUIGV4dGVuZHMgc3RyaW5nIHwgVWludDhBcnJheT4oZGF0YTogVCwgb3V0Rm9ybWF0ID0gXCJoZXhcIiwgYWxnb3JpdGhtID0gXCJTSEEtMjU2XCIpIHtcbiAgICAgICAgbGV0IGluQnVmZmVyOiBhbnk7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBkYXRhID09IFwic3RyaW5nXCIpIGluQnVmZmVyID0gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKGRhdGEpO1xuICAgICAgICBlbHNlIGluQnVmZmVyID0gZGF0YTtcblxuICAgICAgICByZXR1cm4gY3J5cHRvLnN1YnRsZS5kaWdlc3QoeyBuYW1lOiBhbGdvcml0aG0gfSwgaW5CdWZmZXIpLnRoZW4ob3V0QnVmZmVyID0+IHtcbiAgICAgICAgICAgIGlmIChvdXRGb3JtYXQgPT0gXCJiYXNlNjRcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiB1dGlscy5ieXRlQXJyYXlUb0Jhc2U2NChvdXRCdWZmZXIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShuZXcgVWludDhBcnJheShvdXRCdWZmZXIpKS5tYXAodGhpcy50b0hleFN0cmluZykuam9pbihcIlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgaW50VG9CeXRlQXJyYXkoaW50KSB7XG4gICAgICAgIGNvbnN0IGJ5dGVBcnJheSA9IFswLCAwLCAwLCAwXTtcblxuICAgICAgICBmb3IgKGxldCBpbmRleCA9IGJ5dGVBcnJheS5sZW5ndGggLSAxOyBpbmRleCA+PSAwOyBpbmRleC0tKSB7XG4gICAgICAgICAgICBjb25zdCBieXRlID0gaW50ICYgMHhmZjtcbiAgICAgICAgICAgIGJ5dGVBcnJheVtpbmRleF0gPSBieXRlO1xuICAgICAgICAgICAgaW50ID0gKGludCAtIGJ5dGUpIC8gMjU2O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGJ5dGVBcnJheTtcbiAgICB9XG5cbiAgICBpbnRBcnJheVRvQnl0ZUFycmF5KGludEFycmF5KSB7XG4gICAgICAgIGNvbnN0IGJ5dGVBcnJheSA9IG5ldyBBcnJheShpbnRBcnJheS5sZW5ndGggKiA0KTtcblxuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgaW50QXJyYXkubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICBsZXQgaW50ID0gaW50QXJyYXlbaW5kZXhdO1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDM7IGogPj0gMDsgai0tKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYnl0ZSA9IGludCAmIDB4ZmY7XG4gICAgICAgICAgICAgICAgYnl0ZUFycmF5W2luZGV4ICogNCArIGpdID0gYnl0ZTtcbiAgICAgICAgICAgICAgICBpbnQgPSAoaW50IC0gYnl0ZSkgLyAyNTY7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYnl0ZUFycmF5O1xuICAgIH1cblxuICAgIHN0cmluZ1RvQnl0ZUFycmF5KHN0cikge1xuICAgICAgICBjb25zdCBlID0gbmV3IFRleHRFbmNvZGVyKCk7XG4gICAgICAgIHJldHVybiBlLmVuY29kZShzdHIpO1xuICAgIH1cblxuICAgIC8vIEEgdmFyaWF0aW9uIG9mIGJhc2U2NHRvQnl0ZUFycmF5IHdoaWNoIGFsbG93cyB1cyB0byBjYWxjdWxhdGUgYSBITUFDIGZhclxuICAgIC8vIG1vcmUgZWZmaWNpZW50bHkgdGhhbiB3aXRoIHNlcGVyYXRlIG1lbW9yeSBidWZmZXJzXG4gICAgYmFzZTY0dG9CeXRlQXJyYXlGb3JITUFDKGlucHV0LCBleHRyYUxlbmd0aCwgdmlldyA9IG51bGwpIHtcbiAgICAgICAgY29uc3QgYmluYXJ5ID0gYXRvYihpbnB1dCk7XG4gICAgICAgIGNvbnN0IGxlbiA9IGJpbmFyeS5sZW5ndGg7XG4gICAgICAgIGxldCBvZmZzZXQgPSAwO1xuICAgICAgICBpZiAoIXZpZXcpIHtcbiAgICAgICAgICAgIGNvbnN0IGJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihsZW4gKyBleHRyYUxlbmd0aCk7XG4gICAgICAgICAgICB2aWV3ID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKTtcbiAgICAgICAgICAgIG9mZnNldCA9IDIwO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIHZpZXdbaSArIG9mZnNldF0gPSBiaW5hcnkuY2hhckNvZGVBdChpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmlldztcbiAgICB9XG5cbiAgICBiYXNlNjR0b0J5dGVBcnJheShpbnB1dCkge1xuICAgICAgICBjb25zdCBiaW5hcnkgPSBhdG9iKGlucHV0KTtcbiAgICAgICAgY29uc3QgbGVuID0gYmluYXJ5Lmxlbmd0aDtcbiAgICAgICAgY29uc3QgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKGxlbik7XG4gICAgICAgIGNvbnN0IHZpZXcgPSBuZXcgVWludDhBcnJheShidWZmZXIpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2aWV3W2ldID0gYmluYXJ5LmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZpZXc7XG4gICAgfVxuXG4gICAgYnl0ZUFycmF5VG9CYXNlNjQoYXJyYXlCdWZmZXIpOiBzdHJpbmcge1xuICAgICAgICBsZXQgYmFzZTY0ID0gXCJcIjtcbiAgICAgICAgY29uc3QgZW5jb2RpbmdzID0gXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvXCI7XG4gICAgICAgIGNvbnN0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWZmZXIpO1xuICAgICAgICBjb25zdCBieXRlTGVuZ3RoID0gYnl0ZXMuYnl0ZUxlbmd0aDtcbiAgICAgICAgY29uc3QgYnl0ZVJlbWFpbmRlciA9IGJ5dGVMZW5ndGggJSAzO1xuICAgICAgICBjb25zdCBtYWluTGVuZ3RoID0gYnl0ZUxlbmd0aCAtIGJ5dGVSZW1haW5kZXI7XG4gICAgICAgIGxldCBhO1xuICAgICAgICBsZXQgYjtcbiAgICAgICAgbGV0IGM7XG4gICAgICAgIGxldCBkO1xuICAgICAgICBsZXQgY2h1bms7XG5cbiAgICAgICAgLy8gTWFpbiBsb29wIGRlYWxzIHdpdGggYnl0ZXMgaW4gY2h1bmtzIG9mIDNcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYWluTGVuZ3RoOyBpID0gaSArIDMpIHtcbiAgICAgICAgICAgIC8vIENvbWJpbmUgaW50byBhIHNpbmdsZSBpbnRlZ2VyXG4gICAgICAgICAgICBjaHVuayA9IChieXRlc1tpXSA8PCAxNikgfCAoYnl0ZXNbaSArIDFdIDw8IDgpIHwgYnl0ZXNbaSArIDJdO1xuXG4gICAgICAgICAgICAvLyBVc2UgYml0bWFza3MgdG8gZXh0cmFjdCA2LWJpdCBzZWdtZW50cyBmcm9tIHRoZSB0cmlwbGV0XG4gICAgICAgICAgICBhID0gKGNodW5rICYgMTY1MTUwNzIpID4+IDE4OyAvLyAxNjUxNTA3MiA9ICgyXjYgLSAxKSA8PCAxOFxuICAgICAgICAgICAgYiA9IChjaHVuayAmIDI1ODA0OCkgPj4gMTI7IC8vIDI1ODA0OCA9ICgyXjYgLSAxKSA8PCAxMlxuICAgICAgICAgICAgYyA9IChjaHVuayAmIDQwMzIpID4+IDY7IC8vIDQwMzIgPSAoMl42IC0gMSkgPDwgNlxuICAgICAgICAgICAgZCA9IGNodW5rICYgNjM7IC8vIDYzID0gMl42IC0gMVxuXG4gICAgICAgICAgICAvLyBDb252ZXJ0IHRoZSByYXcgYmluYXJ5IHNlZ21lbnRzIHRvIHRoZSBhcHByb3ByaWF0ZSBBU0NJSSBlbmNvZGluZ1xuICAgICAgICAgICAgYmFzZTY0ICs9IGVuY29kaW5nc1thXSArIGVuY29kaW5nc1tiXSArIGVuY29kaW5nc1tjXSArIGVuY29kaW5nc1tkXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIERlYWwgd2l0aCB0aGUgcmVtYWluaW5nIGJ5dGVzIGFuZCBwYWRkaW5nXG4gICAgICAgIGlmIChieXRlUmVtYWluZGVyID09IDEpIHtcbiAgICAgICAgICAgIGNodW5rID0gYnl0ZXNbbWFpbkxlbmd0aF07XG5cbiAgICAgICAgICAgIGEgPSAoY2h1bmsgJiAyNTIpID4+IDI7IC8vIDI1MiA9ICgyXjYgLSAxKSA8PCAyXG5cbiAgICAgICAgICAgIC8vIFNldCB0aGUgNCBsZWFzdCBzaWduaWZpY2FudCBiaXRzIHRvIHplcm9cbiAgICAgICAgICAgIGIgPSAoY2h1bmsgJiAzKSA8PCA0OyAvLyAzID0gMl4yIC0gMVxuXG4gICAgICAgICAgICBiYXNlNjQgKz0gZW5jb2RpbmdzW2FdICsgZW5jb2RpbmdzW2JdICsgXCI9PVwiO1xuICAgICAgICB9IGVsc2UgaWYgKGJ5dGVSZW1haW5kZXIgPT0gMikge1xuICAgICAgICAgICAgY2h1bmsgPSAoYnl0ZXNbbWFpbkxlbmd0aF0gPDwgOCkgfCBieXRlc1ttYWluTGVuZ3RoICsgMV07XG5cbiAgICAgICAgICAgIGEgPSAoY2h1bmsgJiA2NDUxMikgPj4gMTA7IC8vIDY0NTEyID0gKDJeNiAtIDEpIDw8IDEwXG4gICAgICAgICAgICBiID0gKGNodW5rICYgMTAwOCkgPj4gNDsgLy8gMTAwOCAgPSAoMl42IC0gMSkgPDwgNFxuXG4gICAgICAgICAgICAvLyBTZXQgdGhlIDIgbGVhc3Qgc2lnbmlmaWNhbnQgYml0cyB0byB6ZXJvXG4gICAgICAgICAgICBjID0gKGNodW5rICYgMTUpIDw8IDI7IC8vIDE1ID0gMl40IC0gMVxuXG4gICAgICAgICAgICBiYXNlNjQgKz0gZW5jb2RpbmdzW2FdICsgZW5jb2RpbmdzW2JdICsgZW5jb2RpbmdzW2NdICsgXCI9XCI7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYmFzZTY0O1xuICAgIH1cblxuICAgIGhleFN0cmluZ1RvQnl0ZUFycmF5KGhleFN0cmluZywgYnl0ZUFycmF5ID0gbnVsbCkge1xuICAgICAgICBpZiAoaGV4U3RyaW5nLmxlbmd0aCAlIDIgIT09IDApIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKFwiTXVzdCBoYXZlIGFuIGV2ZW4gbnVtYmVyIG9mIGhleCBkaWdpdHMgdG8gY29udmVydCB0byBieXRlc1wiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBudW1CeXRlcyA9IGhleFN0cmluZy5sZW5ndGggLyAyO1xuICAgICAgICBpZiAoIWJ5dGVBcnJheSkgYnl0ZUFycmF5ID0gbmV3IFVpbnQ4QXJyYXkobnVtQnl0ZXMpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUJ5dGVzOyBpKyspIHtcbiAgICAgICAgICAgIGJ5dGVBcnJheVtpXSA9IHBhcnNlSW50KGhleFN0cmluZy5zdWJzdHIoaSAqIDIsIDIpLCAxNik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJ5dGVBcnJheTtcbiAgICB9XG5cbiAgICBuZXdHVUlEKCkge1xuICAgICAgICBjb25zdCBsdXQgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAyNTY7IGkrKykge1xuICAgICAgICAgICAgbHV0W2ldID0gKGkgPCAxNiA/IFwiMFwiIDogXCJcIikgKyBpLnRvU3RyaW5nKDE2KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGR2YWxzID0gbmV3IFVpbnQzMkFycmF5KDQpO1xuICAgICAgICB3aW5kb3cuY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhkdmFscyk7XG4gICAgICAgIGNvbnN0IGQwID0gZHZhbHNbMF07XG4gICAgICAgIGNvbnN0IGQxID0gZHZhbHNbMV07XG4gICAgICAgIGNvbnN0IGQyID0gZHZhbHNbMl07XG4gICAgICAgIGNvbnN0IGQzID0gZHZhbHNbM107XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICBsdXRbZDAgJiAweGZmXSArXG4gICAgICAgICAgICBsdXRbKGQwID4+IDgpICYgMHhmZl0gK1xuICAgICAgICAgICAgbHV0WyhkMCA+PiAxNikgJiAweGZmXSArXG4gICAgICAgICAgICBsdXRbKGQwID4+IDI0KSAmIDB4ZmZdICtcbiAgICAgICAgICAgIFwiLVwiICtcbiAgICAgICAgICAgIGx1dFtkMSAmIDB4ZmZdICtcbiAgICAgICAgICAgIGx1dFsoZDEgPj4gOCkgJiAweGZmXSArXG4gICAgICAgICAgICBcIi1cIiArXG4gICAgICAgICAgICBsdXRbKChkMSA+PiAxNikgJiAweDBmKSB8IDB4NDBdICtcbiAgICAgICAgICAgIGx1dFsoZDEgPj4gMjQpICYgMHhmZl0gK1xuICAgICAgICAgICAgXCItXCIgK1xuICAgICAgICAgICAgbHV0WyhkMiAmIDB4M2YpIHwgMHg4MF0gK1xuICAgICAgICAgICAgbHV0WyhkMiA+PiA4KSAmIDB4ZmZdICtcbiAgICAgICAgICAgIFwiLVwiICtcbiAgICAgICAgICAgIGx1dFsoZDIgPj4gMTYpICYgMHhmZl0gK1xuICAgICAgICAgICAgbHV0WyhkMiA+PiAyNCkgJiAweGZmXSArXG4gICAgICAgICAgICBsdXRbZDMgJiAweGZmXSArXG4gICAgICAgICAgICBsdXRbKGQzID4+IDgpICYgMHhmZl0gK1xuICAgICAgICAgICAgbHV0WyhkMyA+PiAxNikgJiAweGZmXSArXG4gICAgICAgICAgICBsdXRbKGQzID4+IDI0KSAmIDB4ZmZdXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgYmFzZTY0dXJsRGVjb2RlKGlucHV0OiBzdHJpbmcpIHtcbiAgICAgICAgLy8gSSBkb24ndCBzZWUgd2h5IHdlIGRvIGFueSByZXBsYWNlbWVudHMgaGVyZS4gU2VlbXMgYSBwb2ludGxlc3Mgd2FzdGUgb2YgY3ljbGVzLiBOZWVkcyB0ZXN0aW5nIGFuZCByZW1vdmFsIGlmIEknbSByaWdodC5cbiAgICAgICAgcmV0dXJuIGF0b2IoaW5wdXQucmVwbGFjZSgvLS9nLCBcIitcIikucmVwbGFjZSgvXy9nLCBcIi9cIikpO1xuICAgIH1cblxuICAgIGJpbmFyeVRvQnl0ZUFycmF5KGJpbmFyeTogc3RyaW5nKTogVWludDhBcnJheSB7XG4gICAgICAgIGNvbnN0IGxlbiA9IGJpbmFyeS5sZW5ndGg7XG4gICAgICAgIGNvbnN0IGJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihsZW4pO1xuICAgICAgICBjb25zdCB2aWV3ID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgdmlld1tpXSA9IGJpbmFyeS5jaGFyQ29kZUF0KGkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2aWV3O1xuICAgIH1cblxuICAgIGJhc2U2NHVybHRvQnl0ZUFycmF5KGlucHV0OiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgYmluYXJ5ID0gdGhpcy5iYXNlNjR1cmxEZWNvZGUoaW5wdXQpO1xuICAgICAgICByZXR1cm4gdGhpcy5iaW5hcnlUb0J5dGVBcnJheShiaW5hcnkpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQgcHNsKCkge1xuICAgICAgICBpZiAoIXB1YmxpY1N1ZmZpeExpc3QpIHRocm93IG5ldyBFcnJvcihcInB1YmxpY1N1ZmZpeExpc3QgbGlicmFyeSBub3QgcHJlc2VudFwiKTtcbiAgICAgICAgaWYgKCF0aGlzLnBzbEluaXRpYWxpc2VkKSB7XG4gICAgICAgICAgICBwdWJsaWNTdWZmaXhMaXN0LnBhcnNlKHBzbERhdGEudGV4dCwgcHVueWNvZGUudG9BU0NJSSk7XG4gICAgICAgICAgICB0aGlzLnBzbEluaXRpYWxpc2VkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcHVibGljU3VmZml4TGlzdDtcbiAgICB9XG59XG5cbi8vIEJhc2VkIG9uIHRoZSBmYXN0LWRlZXAtZXF1YWwgcGFja2FnZVxuZXhwb3J0IGZ1bmN0aW9uIGRlZXBFcXVhbChhOiBhbnksIGI6IGFueSk6IGJvb2xlYW4ge1xuICAgIGlmIChhID09PSBiKSByZXR1cm4gdHJ1ZTtcblxuICAgIGlmIChhICYmIGIgJiYgdHlwZW9mIGEgPT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgYiA9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIGlmIChhLmNvbnN0cnVjdG9yICE9PSBiLmNvbnN0cnVjdG9yKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgbGV0IGxlbmd0aDtcbiAgICAgICAgbGV0IGk7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGEpKSB7XG4gICAgICAgICAgICBsZW5ndGggPSBhLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChsZW5ndGggIT09IGIubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBmb3IgKGkgPSBsZW5ndGg7IGktLSAhPT0gMDspXG4gICAgICAgICAgICAgICAge2lmICghZGVlcEVxdWFsKGFbaV0sIGJbaV0pKSByZXR1cm4gZmFsc2U7fVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGlmIChhLmNvbnN0cnVjdG9yID09PSBSZWdFeHApIHJldHVybiBhLnNvdXJjZSA9PT0gYi5zb3VyY2UgJiYgYS5mbGFncyA9PT0gYi5mbGFncztcbiAgICAgICAgaWYgKGEudmFsdWVPZiAhPT0gT2JqZWN0LnByb3RvdHlwZS52YWx1ZU9mKSByZXR1cm4gYS52YWx1ZU9mKCkgPT09IGIudmFsdWVPZigpO1xuICAgICAgICBpZiAoYS50b1N0cmluZyAhPT0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZykgcmV0dXJuIGEudG9TdHJpbmcoKSA9PT0gYi50b1N0cmluZygpO1xuXG4gICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhhKTtcbiAgICAgICAgbGVuZ3RoID0ga2V5cy5sZW5ndGg7XG4gICAgICAgIGlmIChsZW5ndGggIT09IE9iamVjdC5rZXlzKGIpLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgIGZvciAoaSA9IGxlbmd0aDsgaS0tICE9PSAwOylcbiAgICAgICAgICAgIHtpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBrZXlzW2ldKSkgcmV0dXJuIGZhbHNlO31cblxuICAgICAgICBmb3IgKGkgPSBsZW5ndGg7IGktLSAhPT0gMDspIHtcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IGtleXNbaV07XG4gICAgICAgICAgICBpZiAoIWRlZXBFcXVhbChhW2tleV0sIGJba2V5XSkpIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIHRydWUgaWYgYm90aCBOYU4sIGZhbHNlIG90aGVyd2lzZVxuICAgIHJldHVybiBhICE9PSBhICYmIGIgIT09IGI7XG59XG5cbmV4cG9ydCBjb25zdCB1dGlscyA9IG5ldyBVdGlscygpO1xuIiwiY29uc3QgbGlzdCA9IFtcblx0Ly8gTmF0aXZlIEVTIGVycm9ycyBodHRwczovLzI2Mi5lY21hLWludGVybmF0aW9uYWwub3JnLzEyLjAvI3NlYy13ZWxsLWtub3duLWludHJpbnNpYy1vYmplY3RzXG5cdEV2YWxFcnJvcixcblx0UmFuZ2VFcnJvcixcblx0UmVmZXJlbmNlRXJyb3IsXG5cdFN5bnRheEVycm9yLFxuXHRUeXBlRXJyb3IsXG5cdFVSSUVycm9yLFxuXG5cdC8vIEJ1aWx0LWluIGVycm9yc1xuXHRnbG9iYWxUaGlzLkRPTUV4Y2VwdGlvbixcblxuXHQvLyBOb2RlLXNwZWNpZmljIGVycm9yc1xuXHQvLyBodHRwczovL25vZGVqcy5vcmcvYXBpL2Vycm9ycy5odG1sXG5cdGdsb2JhbFRoaXMuQXNzZXJ0aW9uRXJyb3IsXG5cdGdsb2JhbFRoaXMuU3lzdGVtRXJyb3IsXG5dXG5cdC8vIE5vbi1uYXRpdmUgRXJyb3JzIGFyZSB1c2VkIHdpdGggYGdsb2JhbFRoaXNgIGJlY2F1c2UgdGhleSBtaWdodCBiZSBtaXNzaW5nLiBUaGlzIGZpbHRlciBkcm9wcyB0aGVtIHdoZW4gdW5kZWZpbmVkLlxuXHQuZmlsdGVyKEJvb2xlYW4pXG5cdC5tYXAoXG5cdFx0Y29uc3RydWN0b3IgPT4gW2NvbnN0cnVjdG9yLm5hbWUsIGNvbnN0cnVjdG9yXSxcblx0KTtcblxuY29uc3QgZXJyb3JDb25zdHJ1Y3RvcnMgPSBuZXcgTWFwKGxpc3QpO1xuXG5leHBvcnQgZGVmYXVsdCBlcnJvckNvbnN0cnVjdG9ycztcbiIsImltcG9ydCBlcnJvckNvbnN0cnVjdG9ycyBmcm9tICcuL2Vycm9yLWNvbnN0cnVjdG9ycy5qcyc7XG5cbmV4cG9ydCBjbGFzcyBOb25FcnJvciBleHRlbmRzIEVycm9yIHtcblx0bmFtZSA9ICdOb25FcnJvcic7XG5cblx0Y29uc3RydWN0b3IobWVzc2FnZSkge1xuXHRcdHN1cGVyKE5vbkVycm9yLl9wcmVwYXJlU3VwZXJNZXNzYWdlKG1lc3NhZ2UpKTtcblx0fVxuXG5cdHN0YXRpYyBfcHJlcGFyZVN1cGVyTWVzc2FnZShtZXNzYWdlKSB7XG5cdFx0dHJ5IHtcblx0XHRcdHJldHVybiBKU09OLnN0cmluZ2lmeShtZXNzYWdlKTtcblx0XHR9IGNhdGNoIHtcblx0XHRcdHJldHVybiBTdHJpbmcobWVzc2FnZSk7XG5cdFx0fVxuXHR9XG59XG5cbmNvbnN0IGNvbW1vblByb3BlcnRpZXMgPSBbXG5cdHtcblx0XHRwcm9wZXJ0eTogJ25hbWUnLFxuXHRcdGVudW1lcmFibGU6IGZhbHNlLFxuXHR9LFxuXHR7XG5cdFx0cHJvcGVydHk6ICdtZXNzYWdlJyxcblx0XHRlbnVtZXJhYmxlOiBmYWxzZSxcblx0fSxcblx0e1xuXHRcdHByb3BlcnR5OiAnc3RhY2snLFxuXHRcdGVudW1lcmFibGU6IGZhbHNlLFxuXHR9LFxuXHR7XG5cdFx0cHJvcGVydHk6ICdjb2RlJyxcblx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHR9LFxuXHR7XG5cdFx0cHJvcGVydHk6ICdjYXVzZScsXG5cdFx0ZW51bWVyYWJsZTogZmFsc2UsXG5cdH0sXG5dO1xuXG5jb25zdCB0b0pzb25XYXNDYWxsZWQgPSBTeW1ib2woJy50b0pTT04gd2FzIGNhbGxlZCcpO1xuXG5jb25zdCB0b0pTT04gPSBmcm9tID0+IHtcblx0ZnJvbVt0b0pzb25XYXNDYWxsZWRdID0gdHJ1ZTtcblx0Y29uc3QganNvbiA9IGZyb20udG9KU09OKCk7XG5cdGRlbGV0ZSBmcm9tW3RvSnNvbldhc0NhbGxlZF07XG5cdHJldHVybiBqc29uO1xufTtcblxuY29uc3QgZ2V0RXJyb3JDb25zdHJ1Y3RvciA9IG5hbWUgPT4gZXJyb3JDb25zdHJ1Y3RvcnMuZ2V0KG5hbWUpID8/IEVycm9yO1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tcGxleGl0eVxuY29uc3QgZGVzdHJveUNpcmN1bGFyID0gKHtcblx0ZnJvbSxcblx0c2Vlbixcblx0dG8sXG5cdGZvcmNlRW51bWVyYWJsZSxcblx0bWF4RGVwdGgsXG5cdGRlcHRoLFxuXHR1c2VUb0pTT04sXG5cdHNlcmlhbGl6ZSxcbn0pID0+IHtcblx0aWYgKCF0bykge1xuXHRcdGlmIChBcnJheS5pc0FycmF5KGZyb20pKSB7XG5cdFx0XHR0byA9IFtdO1xuXHRcdH0gZWxzZSBpZiAoIXNlcmlhbGl6ZSAmJiBpc0Vycm9yTGlrZShmcm9tKSkge1xuXHRcdFx0Y29uc3QgRXJyb3IgPSBnZXRFcnJvckNvbnN0cnVjdG9yKGZyb20ubmFtZSk7XG5cdFx0XHR0byA9IG5ldyBFcnJvcigpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0byA9IHt9O1xuXHRcdH1cblx0fVxuXG5cdHNlZW4ucHVzaChmcm9tKTtcblxuXHRpZiAoZGVwdGggPj0gbWF4RGVwdGgpIHtcblx0XHRyZXR1cm4gdG87XG5cdH1cblxuXHRpZiAodXNlVG9KU09OICYmIHR5cGVvZiBmcm9tLnRvSlNPTiA9PT0gJ2Z1bmN0aW9uJyAmJiBmcm9tW3RvSnNvbldhc0NhbGxlZF0gIT09IHRydWUpIHtcblx0XHRyZXR1cm4gdG9KU09OKGZyb20pO1xuXHR9XG5cblx0Y29uc3QgY29udGludWVEZXN0cm95Q2lyY3VsYXIgPSB2YWx1ZSA9PiBkZXN0cm95Q2lyY3VsYXIoe1xuXHRcdGZyb206IHZhbHVlLFxuXHRcdHNlZW46IFsuLi5zZWVuXSxcblx0XHRmb3JjZUVudW1lcmFibGUsXG5cdFx0bWF4RGVwdGgsXG5cdFx0ZGVwdGgsXG5cdFx0dXNlVG9KU09OLFxuXHRcdHNlcmlhbGl6ZSxcblx0fSk7XG5cblx0Zm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZnJvbSkpIHtcblx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm9kZS9wcmVmZXItZ2xvYmFsL2J1ZmZlclxuXHRcdGlmICh0eXBlb2YgQnVmZmVyID09PSAnZnVuY3Rpb24nICYmIEJ1ZmZlci5pc0J1ZmZlcih2YWx1ZSkpIHtcblx0XHRcdHRvW2tleV0gPSAnW29iamVjdCBCdWZmZXJdJztcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdC8vIFRPRE86IFVzZSBgc3RyZWFtLmlzUmVhZGFibGUoKWAgd2hlbiB0YXJnZXRpbmcgTm9kZS5qcyAxOC5cblx0XHRpZiAodmFsdWUgIT09IG51bGwgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgdmFsdWUucGlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0dG9ba2V5XSA9ICdbb2JqZWN0IFN0cmVhbV0nO1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0aWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0aWYgKCF2YWx1ZSB8fCB0eXBlb2YgdmFsdWUgIT09ICdvYmplY3QnKSB7XG5cdFx0XHR0b1trZXldID0gdmFsdWU7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHRpZiAoIXNlZW4uaW5jbHVkZXMoZnJvbVtrZXldKSkge1xuXHRcdFx0ZGVwdGgrKztcblx0XHRcdHRvW2tleV0gPSBjb250aW51ZURlc3Ryb3lDaXJjdWxhcihmcm9tW2tleV0pO1xuXG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHR0b1trZXldID0gJ1tDaXJjdWxhcl0nO1xuXHR9XG5cblx0Zm9yIChjb25zdCB7cHJvcGVydHksIGVudW1lcmFibGV9IG9mIGNvbW1vblByb3BlcnRpZXMpIHtcblx0XHRpZiAodHlwZW9mIGZyb21bcHJvcGVydHldICE9PSAndW5kZWZpbmVkJyAmJiBmcm9tW3Byb3BlcnR5XSAhPT0gbnVsbCkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KHRvLCBwcm9wZXJ0eSwge1xuXHRcdFx0XHR2YWx1ZTogaXNFcnJvckxpa2UoZnJvbVtwcm9wZXJ0eV0pID8gY29udGludWVEZXN0cm95Q2lyY3VsYXIoZnJvbVtwcm9wZXJ0eV0pIDogZnJvbVtwcm9wZXJ0eV0sXG5cdFx0XHRcdGVudW1lcmFibGU6IGZvcmNlRW51bWVyYWJsZSA/IHRydWUgOiBlbnVtZXJhYmxlLFxuXHRcdFx0XHRjb25maWd1cmFibGU6IHRydWUsXG5cdFx0XHRcdHdyaXRhYmxlOiB0cnVlLFxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHRvO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIHNlcmlhbGl6ZUVycm9yKHZhbHVlLCBvcHRpb25zID0ge30pIHtcblx0Y29uc3Qge1xuXHRcdG1heERlcHRoID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLFxuXHRcdHVzZVRvSlNPTiA9IHRydWUsXG5cdH0gPSBvcHRpb25zO1xuXG5cdGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICE9PSBudWxsKSB7XG5cdFx0cmV0dXJuIGRlc3Ryb3lDaXJjdWxhcih7XG5cdFx0XHRmcm9tOiB2YWx1ZSxcblx0XHRcdHNlZW46IFtdLFxuXHRcdFx0Zm9yY2VFbnVtZXJhYmxlOiB0cnVlLFxuXHRcdFx0bWF4RGVwdGgsXG5cdFx0XHRkZXB0aDogMCxcblx0XHRcdHVzZVRvSlNPTixcblx0XHRcdHNlcmlhbGl6ZTogdHJ1ZSxcblx0XHR9KTtcblx0fVxuXG5cdC8vIFBlb3BsZSBzb21ldGltZXMgdGhyb3cgdGhpbmdzIGJlc2lkZXMgRXJyb3Igb2JqZWN0c+KAplxuXHRpZiAodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0Ly8gYEpTT04uc3RyaW5naWZ5KClgIGRpc2NhcmRzIGZ1bmN0aW9ucy4gV2UgZG8gdG9vLCB1bmxlc3MgYSBmdW5jdGlvbiBpcyB0aHJvd24gZGlyZWN0bHkuXG5cdFx0cmV0dXJuIGBbRnVuY3Rpb246ICR7dmFsdWUubmFtZSA/PyAnYW5vbnltb3VzJ31dYDtcblx0fVxuXG5cdHJldHVybiB2YWx1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlc2VyaWFsaXplRXJyb3IodmFsdWUsIG9wdGlvbnMgPSB7fSkge1xuXHRjb25zdCB7bWF4RGVwdGggPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFl9ID0gb3B0aW9ucztcblxuXHRpZiAodmFsdWUgaW5zdGFuY2VvZiBFcnJvcikge1xuXHRcdHJldHVybiB2YWx1ZTtcblx0fVxuXG5cdGlmIChpc01pbmltdW1WaWFibGVTZXJpYWxpemVkRXJyb3IodmFsdWUpKSB7XG5cdFx0Y29uc3QgRXJyb3IgPSBnZXRFcnJvckNvbnN0cnVjdG9yKHZhbHVlLm5hbWUpO1xuXHRcdHJldHVybiBkZXN0cm95Q2lyY3VsYXIoe1xuXHRcdFx0ZnJvbTogdmFsdWUsXG5cdFx0XHRzZWVuOiBbXSxcblx0XHRcdHRvOiBuZXcgRXJyb3IoKSxcblx0XHRcdG1heERlcHRoLFxuXHRcdFx0ZGVwdGg6IDAsXG5cdFx0XHRzZXJpYWxpemU6IGZhbHNlLFxuXHRcdH0pO1xuXHR9XG5cblx0cmV0dXJuIG5ldyBOb25FcnJvcih2YWx1ZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0Vycm9yTGlrZSh2YWx1ZSkge1xuXHRyZXR1cm4gQm9vbGVhbih2YWx1ZSlcblx0JiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0J1xuXHQmJiAnbmFtZScgaW4gdmFsdWVcblx0JiYgJ21lc3NhZ2UnIGluIHZhbHVlXG5cdCYmICdzdGFjaycgaW4gdmFsdWU7XG59XG5cbmZ1bmN0aW9uIGlzTWluaW11bVZpYWJsZVNlcmlhbGl6ZWRFcnJvcih2YWx1ZSkge1xuXHRyZXR1cm4gQm9vbGVhbih2YWx1ZSlcblx0JiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0J1xuXHQmJiAnbWVzc2FnZScgaW4gdmFsdWVcblx0JiYgIUFycmF5LmlzQXJyYXkodmFsdWUpO1xufVxuXG5leHBvcnQge2RlZmF1bHQgYXMgZXJyb3JDb25zdHJ1Y3RvcnN9IGZyb20gJy4vZXJyb3ItY29uc3RydWN0b3JzLmpzJztcbiIsIi8qXG4gIFRoZXJlIGFyZSBmb3VyIGN1bXVsYXRpdmUgbG9nIGxldmVscy5cblxuICBFcnJvciA9IDFcbiAgV2FybiA9IDJcbiAgSW5mbyA9IDNcbiAgRGVidWcgPSA0XG5cbiAgVGhlIGRlZmF1bHQgbGV2ZWwgKFdhcm4pIHdpbGwgYmUgc2V0IGFzIHBhcnQgb2YgdGhlIGluc3RhbGxhdGlvbiBwcm9jZXNzLlxuXG4gIElmIERlYnVnIGxldmVsIGlzIHNlbGVjdGVkLCBhIFBlcnNpc3RlbnRMb2dnZXIgb2JqZWN0IGluIHRoZSBiYWNrZ3JvdW5kXG4gIHByb2Nlc3Mgd2lsbCBzdG9yZSB0aGUgbG9nIGVudHJpZXMgaW4gbG9jYWxTdG9yYWdlIG9uIGEgcmVndWxhciBiYXNpcy4gQnV0XG4gIG9ubHkgaWYgeW91IGVkaXQgdGhlIGNvZGUgdG8gZW5hYmxlIHRoaXMgZmVhdHVyZSBiZWNhdXNlIGl0IGlzIHZlcnkgcmVzb3VyY2UtaHVuZ3J5XG5cbiovXG5pbXBvcnQgeyBzZXJpYWxpemVFcnJvciB9IGZyb20gXCJzZXJpYWxpemUtZXJyb3JcIjtcblxuZXhwb3J0IGNsYXNzIEtlZUxvZ2dlciB7XG4gICAgcHVibGljIGRlZmF1bHRMZXZlbCA9IDQ7XG4gICAgcHJpdmF0ZSBvdXRwdXRTdGFydGVkID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBjb25maWcgPSB7IGxvZ0xldmVsOiB0aGlzLmRlZmF1bHRMZXZlbCB9O1xuXG4gICAgYXR0YWNoQ29uZmlnKGNvbmZpZzogeyBsb2dMZXZlbDogbnVtYmVyIH0pIHtcbiAgICAgICAgdGhpcy5kZWJ1ZyhcIkxvZ2dpbmcgc3lzdGVtIGNvbmZpZyB1cGRhdGVkIGF0IFwiICsgRGF0ZSgpKTtcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmb3JtYXRNZXNzYWdlKG1lc3NhZ2UsIGU/OiBFcnJvcikge1xuICAgICAgICBpZiAoIW1lc3NhZ2UgJiYgIWUpIHJldHVybiBcIlwiO1xuXG4gICAgICAgIGlmICghdGhpcy5vdXRwdXRTdGFydGVkKSB7XG4gICAgICAgICAgICBtZXNzYWdlID0gXCIqIFwiICsgbWVzc2FnZTtcbiAgICAgICAgICAgIHRoaXMub3V0cHV0U3RhcnRlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUpIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgKz0gYCBFcnJvcjogJHtKU09OLnN0cmluZ2lmeShzZXJpYWxpemVFcnJvcihlKSl9YDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH1cblxuICAgIGRlYnVnKG1lc3NhZ2U6IHN0cmluZykge1xuICAgICAgICBpZiAodGhpcy5jb25maWcubG9nTGV2ZWwgPj0gNCkge1xuICAgICAgICAgICAgbWVzc2FnZSA9IHRoaXMuZm9ybWF0TWVzc2FnZShtZXNzYWdlKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmxvZ0xldmVsID49IDQgJiYgdGhpcy5zZW5kKDQsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgaW5mbyhtZXNzYWdlOiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmxvZ0xldmVsID49IDMpIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgPSB0aGlzLmZvcm1hdE1lc3NhZ2UobWVzc2FnZSk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmxvZ0xldmVsID49IDQgJiYgdGhpcy5zZW5kKDMsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgd2FybihtZXNzYWdlOiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmxvZ0xldmVsID49IDIpIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgPSB0aGlzLmZvcm1hdE1lc3NhZ2UobWVzc2FnZSk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmxvZ0xldmVsID49IDQgJiYgdGhpcy5zZW5kKDIsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZXJyb3IobWVzc2FnZTogc3RyaW5nLCBlPzogRXJyb3IpIHtcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmxvZ0xldmVsID49IDEpIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgPSB0aGlzLmZvcm1hdE1lc3NhZ2UobWVzc2FnZSwgZSk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5sb2dMZXZlbCA+PSA0ICYmIHRoaXMuc2VuZCgxLCBtZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcbiAgICBzZW5kKGxvZ0xldmVsOiAxIHwgMiB8IDMgfCA0LCBtZXNzYWdlOiBzdHJpbmcpIHtcbiAgICAgICAgLy8gRG8gbm90aGluZy5cbiAgICAgICAgLy8gRm9yIGFkdmFuY2VkIGRlYnVnZ2luZywgZXNwZWNpYWxseSBhY3Jvc3MgYnJvd3NlciByZXN0YXJ0cyxcbiAgICAgICAgLy8gZW5hYmxlIHRoZSBjb2RlIGJlbG93IGFuZCB0aGUgcmVsZXZhbnQgUGVyc2lzdGVudExvZ2dlciBsaW5lc1xuICAgICAgICAvLyBpbiBiYWNrZ3JvdW5kLnRzXG4gICAgICAgIC8vIGNvbnN0IGxvZ0VudHJ5ID0ge2xvZ0xldmVsLCB0aW1lc3RhbXA6IERhdGUubm93KCksIG1lc3NhZ2V9O1xuICAgICAgICAvLyBpZiAod2luZG93LktlZVBlcnNpc3RlbnRMb2dnZXIpIHtcbiAgICAgICAgLy8gICAgIC8vIFdpbGwgb25seSBiZSB0cnVlIGluIHRoZSBiYWNrZ3JvdW5kIHByb2Nlc3NcbiAgICAgICAgLy8gICAgIHdpbmRvdy5LZWVQZXJzaXN0ZW50TG9nZ2VyLmVtaXQobG9nRW50cnkpO1xuICAgICAgICAvLyB9IGVsc2Uge1xuICAgICAgICAvLyAgICAgYnJvd3Nlci5ydW50aW1lLnNlbmRNZXNzYWdlKGxvZ0VudHJ5KTtcbiAgICAgICAgLy8gfVxuICAgIH1cblxuICAgIHN0YWNrVHJhY2UoKSB7XG4gICAgICAgIGNvbnNvbGUuZ3JvdXBDb2xsYXBzZWQoXCIlYyBTdGFjayBUcmFjZVwiLCBcImNvbG9yOmNyZWFtOyBmb250LXN0eWxlOiBub3JtYWw7XCIpO1xuICAgICAgICBjb25zb2xlLmRlYnVnKG5ldyBFcnJvcigpLnN0YWNrKTtcbiAgICAgICAgY29uc29sZS5ncm91cEVuZCgpO1xuICAgIH1cbn1cblxuZXhwb3J0IGNvbnN0IEtlZUxvZyA9IG5ldyBLZWVMb2dnZXIoKTtcbiIsImltcG9ydCB7XG4gICAgQ29uZmlnLFxuICAgIFNpdGVDb25maWcsXG4gICAgU2l0ZUNvbmZpZ0xvb2t1cCxcbiAgICBTaXRlQ29uZmlnTWV0aG9kLFxuICAgIFNpdGVDb25maWdOb2RlLFxuICAgIFNpdGVDb25maWdOb2RlVHlwZSxcbiAgICBTaXRlQ29uZmlnVGFyZ2V0XG59IGZyb20gXCIuL2NvbmZpZ1wiO1xuaW1wb3J0IHsgQ29uZmlnTWlncmF0aW9ucyB9IGZyb20gXCIuL0NvbmZpZ01pZ3JhdGlvbnNcIjtcbmltcG9ydCB7IGRlZmF1bHRTaXRlQ29uZmlnIH0gZnJvbSBcIi4vRGVmYXVsdFNpdGVDb25maWdcIjtcbmltcG9ydCB7IHV0aWxzIH0gZnJvbSBcIi4vdXRpbHNcIjtcbmltcG9ydCB7IEZpZWxkIH0gZnJvbSBcIi4vbW9kZWwvRmllbGRcIjtcbmltcG9ydCB7IEtlZUxvZyB9IGZyb20gXCIuL0xvZ2dlclwiO1xuXG50eXBlIFNpdGVDb25maWdOb2RlQW5kSW5kZXggPSB7XG4gICAgbm9kZTogU2l0ZUNvbmZpZ05vZGU7XG4gICAgdGFyZ2V0OiBTaXRlQ29uZmlnVGFyZ2V0O1xuICAgIG1ldGhvZDogU2l0ZUNvbmZpZ01ldGhvZDtcbiAgICBsb29rdXBWYWx1ZTogc3RyaW5nO1xufTtcblxuLypcbiAgRW50cnktc3BlY2lmaWMgY29uZmlndXJhdGlvbiBpcyBzdG9yZWQgaW4gS2VlUGFzcyBidXQgaW4gZnV0dXJlIG1heWJlXG4gIHdlJ2xsIHN0aWxsIG1ha2UgaXQgYXZhaWxhYmxlIGZyb20gdGhpcyBpbnRlcmZhY2UuXG4qL1xuXG4vLyBQcmV0ZW5kIGJyb3dzZXIgKFdlYkV4dGVuc2lvbnMpIGlzIGNocm9tZSAod2UgaW5jbHVkZSBhXG4vLyBwb2x5ZmlsbCBmcm9tIE1vemlsbGEgYnV0IGl0IGRvZXNuJ3Qgd29yayBpbiBzb21lIGNhc2VzKVxuZGVjbGFyZSBjb25zdCBjaHJvbWU7XG5cbi8vIGluY3JlbWVudCB3aGVuIGNoYW5nZXMgYXJlIGludHJvZHVjZWQgdGhhdCByZXF1aXJlIGRhdGEgbWlncmF0aW9uXG5leHBvcnQgY29uc3QgTEFURVNUX1ZFUlNJT04gPSA4O1xuXG5leHBvcnQgY29uc3QgZGVmYXVsdENvbmZpZyA9IG5ldyBDb25maWcoKTtcbmRlZmF1bHRDb25maWcuYXV0b0ZpbGxEaWFsb2dzID0gZmFsc2U7XG5kZWZhdWx0Q29uZmlnLmF1dG9GaWxsRm9ybXMgPSB0cnVlO1xuZGVmYXVsdENvbmZpZy5hdXRvRmlsbEZvcm1zV2l0aE11bHRpcGxlTWF0Y2hlcyA9IGZhbHNlO1xuZGVmYXVsdENvbmZpZy5hdXRvU3VibWl0Rm9ybXMgPSBmYWxzZTtcbmRlZmF1bHRDb25maWcuYXV0b1N1Ym1pdERpYWxvZ3MgPSBmYWxzZTtcbmRlZmF1bHRDb25maWcuYXV0b1N1Ym1pdE1hdGNoZWRGb3JtcyA9IGZhbHNlO1xuZGVmYXVsdENvbmZpZy5jb25uU0xDbGllbnQgPSAyO1xuZGVmYXVsdENvbmZpZy5jb25uU0xTZXJ2ZXJNaW4gPSAyO1xuZGVmYXVsdENvbmZpZy5rZWVQYXNzREJUb09wZW4gPSBcIlwiO1xuZGVmYXVsdENvbmZpZy5rZWVQYXNzTVJVREIgPSBcIlwiO1xuZGVmYXVsdENvbmZpZy5LZWVQYXNzUlBDV2ViU29ja2V0UG9ydCA9IDEyNTQ2O1xuZGVmYXVsdENvbmZpZy5LUFJQQ1VzZXJuYW1lID0gXCJcIjtcbmRlZmF1bHRDb25maWcuS1BSUENTdG9yZWRLZXlzID0ge307XG5kZWZhdWx0Q29uZmlnLmxhc3RDb25uZWN0ZWRUb0tlZVBhc3MgPSBcIlwiO1xuZGVmYXVsdENvbmZpZy5saXN0QWxsT3BlbkRCcyA9IHRydWU7XG5kZWZhdWx0Q29uZmlnLmxvZ0xldmVsID0gS2VlTG9nLmRlZmF1bHRMZXZlbDtcbmRlZmF1bHRDb25maWcubG9nTWV0aG9kQ29uc29sZSA9IGZhbHNlO1xuZGVmYXVsdENvbmZpZy5sb2dNZXRob2RGaWxlID0gZmFsc2U7XG5kZWZhdWx0Q29uZmlnLmxvZ1NlbnNpdGl2ZURhdGEgPSBmYWxzZTtcbmRlZmF1bHRDb25maWcubWV0cmljc1VzYWdlRGlzYWJsZWQgPSBmYWxzZTtcbmRlZmF1bHRDb25maWcubWV0cmljc1VzZXJJZCA9IFwiXCI7XG5kZWZhdWx0Q29uZmlnLm5vdGlmeVdoZW5FbnRyeVVwZGF0ZWQgPSB0cnVlO1xuZGVmYXVsdENvbmZpZy5ub3RpZnlXaGVuTGF0ZURpc2NvdmVyeSA9IGZhbHNlO1xuZGVmYXVsdENvbmZpZy5ub3RpZnlXaGVuTG9nZ2VkT3V0ID0gZmFsc2U7XG5kZWZhdWx0Q29uZmlnLm92ZXJXcml0ZUZpZWxkc0F1dG9tYXRpY2FsbHkgPSBmYWxzZTtcbmRlZmF1bHRDb25maWcucmVtZW1iZXJNUlVEQiA9IHRydWU7XG5kZWZhdWx0Q29uZmlnLnJlbWVtYmVyTVJVR3JvdXAgPSB0cnVlO1xuZGVmYXVsdENvbmZpZy5zYXZlRmF2aWNvbnMgPSB0cnVlO1xuZGVmYXVsdENvbmZpZy5zZWFyY2hBbGxPcGVuREJzID0gdHJ1ZTtcbmRlZmF1bHRDb25maWcuY29uZmlnID0gbnVsbDtcbmRlZmF1bHRDb25maWcuc2l0ZUNvbmZpZyA9IGRlZmF1bHRTaXRlQ29uZmlnO1xuZGVmYXVsdENvbmZpZy50dXRvcmlhbFByb2dyZXNzID0gXCJcIjtcbmRlZmF1bHRDb25maWcudmVyc2lvbiA9IExBVEVTVF9WRVJTSU9OO1xuZGVmYXVsdENvbmZpZy50cmlnZ2VyQ2hhbmdlSW5wdXRFdmVudEFmdGVyRmlsbCA9IGZhbHNlO1xuZGVmYXVsdENvbmZpZy5hdXRvU3VibWl0TmV0d29ya0F1dGhXaXRoU2luZ2xlTWF0Y2ggPSBmYWxzZTtcbmRlZmF1bHRDb25maWcuc2VhcmNoTmV0d29ya0F1dGggPSB0cnVlO1xuZGVmYXVsdENvbmZpZy5ub3RpZmljYXRpb25Db3VudEdlbmVyaWMgPSAwO1xuZGVmYXVsdENvbmZpZy5ub3RpZmljYXRpb25Db3VudFNhdmVQYXNzd29yZCA9IDA7XG5kZWZhdWx0Q29uZmlnLmN1cnJlbnRTZWFyY2hUZXJtVGltZW91dCA9IDMwO1xuZGVmYXVsdENvbmZpZy5ub3RpZnlQYXNzd29yZEF2YWlsYWJsZUZvclBhc3RlID0gdHJ1ZTtcbmRlZmF1bHRDb25maWcuYW5pbWF0ZVdoZW5PZmZlcmluZ1NhdmUgPSB0cnVlO1xuZGVmYXVsdENvbmZpZy5rZWVWYXVsdExhdW5jaE1lc3NhZ2VEaXNtaXNzZWQgPSBmYWxzZTtcbmRlZmF1bHRDb25maWcua2VlVmF1bHRMYXVuY2hTdGFydCA9IDg2NDAwMDAwMDAwMDAwMDA7XG5kZWZhdWx0Q29uZmlnLmtlZVZhdWx0TGF1bmNoRW5kID0gODY0MDAwMDAwMDAwMDAwMDtcbmRlZmF1bHRDb25maWcubWFudWFsU3VibWl0T3ZlcnJpZGVQcm9oaWJpdGVkID0gZmFsc2U7XG5kZWZhdWx0Q29uZmlnLnRoZW1lID0gbnVsbDtcbmRlZmF1bHRDb25maWcuaGlkZUNvbmZpcm1hdGlvbkFmdGVyU2F2ZSA9IGZhbHNlO1xuZGVmYXVsdENvbmZpZy5tdXN0U2hvd1JlbGVhc2VOb3Rlc0F0U3RhcnR1cCA9IGZhbHNlO1xuZGVmYXVsdENvbmZpZy5hdXRvRmlsbEZpZWxkc1dpdGhFeGlzdGluZ1ZhbHVlID0gZmFsc2U7XG5cbmV4cG9ydCBjbGFzcyBDb25maWdNYW5hZ2VyIHtcbiAgICBwdWJsaWMgY3VycmVudDogQ29uZmlnO1xuICAgIHByaXZhdGUgcmVhZG9ubHkgbWF4Q2hhcnNQZXJQYWdlOiBudW1iZXIgPSAxMDAwMDtcbiAgICBwcml2YXRlIF9saXN0ZW5lcnMgPSBbXTtcblxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50ID0gZGVmYXVsdENvbmZpZztcbiAgICAgICAgYnJvd3Nlci5zdG9yYWdlLm9uQ2hhbmdlZC5hZGRMaXN0ZW5lcigoYSwgYikgPT4gdGhpcy5yZWxvYWRPblN0b3JhZ2VDaGFuZ2UoYSwgYikpO1xuICAgIH1cblxuICAgIC8vIFNvbWUgcHJvY2Vzc2VzIG1heSB3YW50IHRvIHRha2UgYWN0aW9uIHdoZW4gc2V0dGluZ3MgYXJlIGNoYW5nZWQgKGUuZy4gdGhlIGJhY2tncm91bmRcbiAgICAvLyBwcm9jZXNzIHRvIG5vdGlmeSB0aGUgS1BSUEMgc2VydmVyKS4gVXNpbmcgdGhpcyByYXRoZXIgdGhhbiBicm93c2VyLnN0b3JhZ2Uub25DaGFuZ2VkLmFkZExpc3RlbmVyXG4gICAgLy8gZW5zdXJlcyB0aGF0IG91ciBjb25maWdNYW5hZ2VyIGRhdGEgaXMgY29uc2lzdGVudCB3aXRoIHRoZSB1bmRlcmx5aW5nIHN0b3JhZ2VcbiAgICBwdWJsaWMgYWRkQ2hhbmdlTGlzdGVuZXIobGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy5fbGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVsb2FkT25TdG9yYWdlQ2hhbmdlKGNoYW5nZXM6IGJyb3dzZXIuc3RvcmFnZS5TdG9yYWdlQ2hhbmdlLCBhcmVhOiBzdHJpbmcpIHtcbiAgICAgICAgLy8gV2UgYXNzdW1lIGV2ZXJ5IGNoYW5nZSByZXF1aXJlcyBhIHJlbG9hZCBvZiB0aGUgY29uZmlnIGRhdGEuIFNpbmNlIHdlIGJhdGNoIGFuZFxuICAgICAgICAvLyBwYWdlIHRoZSBkYXRhIHRvIGVuYWJsZSBlbm91Z2ggc3RvcmFnZSBzcGFjZSB0aGlzIGlzIGxpa2xleSBzYWZlIGZvciB0aGVcbiAgICAgICAgLy8gbG9uZy10ZXJtIGJ1dCBwZXJoYXBzIHBlcmZvcm1hbmNlIGdhaW5zIGNvdWxkIGJlIGZvdW5kIGFyb3VuZCBoZXJlIG9uZSBkYXkuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFdlIGFsc28gcmVsb2FkIGFmdGVyIGV2ZXJ5IHNhdmUgd2hpY2ggaXMgaG9ycmlibHkgaW5lZmZpY2llbnQgYnV0IHRoZSBhbHRlcm5hdGl2ZVxuICAgICAgICAvLyBpcyBmaW5kaW5nIGEgcmVsaWFibGUgY3Jvc3MtcHJvY2VzcyBsb2NraW5nIG1lY2hhbmlzbSB0byBlbnN1cmUgd2Ugb25seSBkaXNhYmxlXG4gICAgICAgIC8vIHJlbG9hZGluZyBkdXJpbmcgYW4gYXN5bmMgc2F2ZSBvcGVyYXRpb24gYW5kIG5vdCBmb3IgYSBtb21lbnQgbG9uZ2VyLiBUaGF0J3MganVzdFxuICAgICAgICAvLyBub3Qgd29ydGggdGhlIHJpc2sgb2YgbWlzc2luZyBhIGNoYW5nZSBmcm9tIGFub3RoZXIgcHJvY2Vzcy5cblxuICAgICAgICBjb25maWdNYW5hZ2VyLnJlbG9hZCgoKSA9PiB0aGlzLl9saXN0ZW5lcnMuZm9yRWFjaChsaXN0ZW5lciA9PiBsaXN0ZW5lcihjaGFuZ2VzLCBhcmVhKSkpO1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBzZXRBU0FQKHZhbHVlczogUGFydGlhbDxDb25maWc+KSB7XG4gICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5jdXJyZW50LCB2YWx1ZXMpO1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmUoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3BsaXRTdHJpbmdUb1BhZ2VzKHN0cjogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IG51bVBhZ2VzID0gTWF0aC5jZWlsKHN0ci5sZW5ndGggLyB0aGlzLm1heENoYXJzUGVyUGFnZSk7XG4gICAgICAgIGNvbnN0IHBhZ2VzID0gbmV3IEFycmF5KG51bVBhZ2VzKTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMCwgbyA9IDA7IGkgPCBudW1QYWdlczsgKytpLCBvICs9IHRoaXMubWF4Q2hhcnNQZXJQYWdlKSB7XG4gICAgICAgICAgICBwYWdlc1tpXSA9IHN0ci5zdWJzdHIobywgdGhpcy5tYXhDaGFyc1BlclBhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYWdlcztcbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgc2F2ZSgpIHtcbiAgICAgICAgY29uc3QgY29uZmlnU3RyaW5nID0gSlNPTi5zdHJpbmdpZnkodGhpcy5jdXJyZW50KTtcbiAgICAgICAgY29uc3QgcGFnZXMgPSB0aGlzLnNwbGl0U3RyaW5nVG9QYWdlcyhjb25maWdTdHJpbmcpO1xuICAgICAgICBjb25zdCBjb25maWdWYWx1ZXM6IGFueSA9IHt9O1xuXG4gICAgICAgIGNvbmZpZ1ZhbHVlcy5rZWVDb25maWdQYWdlQ291bnQgPSBwYWdlcy5sZW5ndGg7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYWdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uZmlnVmFsdWVzW1wia2VlQ29uZmlnUGFnZVwiICsgaV0gPSBwYWdlc1tpXTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBicm93c2VyLnN0b3JhZ2UubG9jYWwuc2V0KGNvbmZpZ1ZhbHVlcyk7XG4gICAgfVxuXG4gICAgcHVibGljIGxvYWQob25Mb2FkZWQpIHtcbiAgICAgICAgLy8gV2UgY29tcGxldGVseSByZXBsYWNlIGN1cnJlbnQgY29uZmlnIHdpdGggd2hhdCB3ZSBsb2FkIGJlY2F1c2Ugd2VcbiAgICAgICAgLy8gZG9uJ3Qga25vdyB0aGF0IGFwcGx5aW5nIG9udG8gdGhlIGRlZmF1bHRzIHdpbGwgcmVzdWx0IGluIGEgc2FmZVxuICAgICAgICAvLyBtaWdyYXRpb24gZnJvbSBhbnkgb2xkIHZlcnNpb24gdGhhdCB3ZSBsb2FkLiBJdCB3b3VsZCBwcm9iYWJseSBiZVxuICAgICAgICAvLyBmaW5lIGJ1dCBtaWdodCByZXF1aXJlIHZlcnNpb24gY29tcGFyaXNvbnMuLi4gaW4gd2hpY2ggY2FzZSB3ZSBtaWdodFxuICAgICAgICAvLyBhcyB3ZWxsIGp1c3QgaW5jcmVtZW50IHRoZSB2ZXJzaW9uIG51bWJlciBhbmQgcnVuIGEgbWlncmF0aW9uIG9uY2VcbiAgICAgICAgLy8gcmF0aGVyIHRoYW4gaW5jdXIgaW5jcmVhc2VkIG9uZ29pbmcgbG9hZCBjb3N0cy5cbiAgICAgICAgYnJvd3Nlci5zdG9yYWdlLmxvY2FsLmdldCgpLnRoZW4oY29uZmlnID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHBhZ2VDb3VudCA9IGNvbmZpZ1tcImtlZUNvbmZpZ1BhZ2VDb3VudFwiXTtcblxuICAgICAgICAgICAgaWYgKHBhZ2VDb3VudCkge1xuICAgICAgICAgICAgICAgIGxldCBjb25maWdTdHJpbmcgPSBcIlwiO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFnZUNvdW50OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dFBhZ2UgPSBjb25maWdbXCJrZWVDb25maWdQYWdlXCIgKyBpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5leHRQYWdlKSBjb25maWdTdHJpbmcgKz0gbmV4dFBhZ2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjb25maWdTdHJpbmcpIHRoaXMuY3VycmVudCA9IEpTT04ucGFyc2UoY29uZmlnU3RyaW5nKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb2xkUGFnZUNvdW50ID0gY29uZmlnW1wia2VlZm94Q29uZmlnUGFnZUNvdW50XCJdO1xuXG4gICAgICAgICAgICAgICAgaWYgKG9sZFBhZ2VDb3VudCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgY29uZmlnU3RyaW5nID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvbGRQYWdlQ291bnQ7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dFBhZ2UgPSBjb25maWdbXCJrZWVmb3hDb25maWdQYWdlXCIgKyBpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXh0UGFnZSkgY29uZmlnU3RyaW5nICs9IG5leHRQYWdlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25maWdTdHJpbmcpIHRoaXMuY3VycmVudCA9IEpTT04ucGFyc2UoY29uZmlnU3RyaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgLy9UT0RPOjQ6IERlbGV0ZSB0aGUgb2xkIGtlZWZveCBwcmVmaXhlZCBkYXRhIHRvIHNhdmUgc3BhY2VcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmZpeEludmFsaWRDb25maWdEYXRhKCk7XG4gICAgICAgICAgICB0aGlzLm1pZ3JhdGVUb0xhdGVzdFZlcnNpb24oKTtcbiAgICAgICAgICAgIG9uTG9hZGVkKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFRoaXMgaXMgdHlwaWNhbGx5IGludmFsaWQgZHVlIHRvIHRoZSBwcmV2aW91cyBleGVjdXRpb24gb2YgYWxwaGEgYW5kIGJldGEgY29kZVxuICAgIC8vIG9uIHRoZSB1c2VyJ3Mgc3lzdGVtIGJ1dCB3aGF0ZXZlciB0aGUgcmVhc29uLCB0aGUgaXRlbXMgaGVyZSBhcmUgZXNwZWNpYWxseSBoYXJkXG4gICAgLy8gdG8gZml4IHRocm91Z2ggdGhlIFVJIGFuZCBjcml0aWNhbCB0byBLZWUgZnVuY3Rpb25hbGl0eSBzbyB3ZSB0YWtlIG5vIGNoYW5jZXNcbiAgICBwcml2YXRlIGZpeEludmFsaWRDb25maWdEYXRhKCkge1xuICAgICAgICBsZXQgc2F2ZU5lZWRlZCA9IGZhbHNlO1xuICAgICAgICBpZiAodGhpcy5jdXJyZW50LktQUlBDU3RvcmVkS2V5cyA9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnQuS1BSUENTdG9yZWRLZXlzID0ge307XG4gICAgICAgICAgICBzYXZlTmVlZGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2F2ZU5lZWRlZCkgdGhpcy5zYXZlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBtaWdyYXRlVG9MYXRlc3RWZXJzaW9uKCkge1xuICAgICAgICBpZiAodGhpcy5jdXJyZW50LnZlcnNpb24gPj0gTEFURVNUX1ZFUlNJT04pIHJldHVybjtcbiAgICAgICAgY29uc3QgbWlncmF0aW9ucyA9IG5ldyBDb25maWdNaWdyYXRpb25zKCk7XG4gICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWZhbGx0aHJvdWdoICovXG4gICAgICAgIHN3aXRjaCAodGhpcy5jdXJyZW50LnZlcnNpb24pIHtcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICBtaWdyYXRpb25zLm1pZ3JhdGVUb1ZlcnNpb24yKHRoaXMuY3VycmVudCk7XG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgbWlncmF0aW9ucy5taWdyYXRlVG9WZXJzaW9uMyh0aGlzLmN1cnJlbnQpO1xuICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgIG1pZ3JhdGlvbnMubWlncmF0ZVRvVmVyc2lvbjQodGhpcy5jdXJyZW50KTtcbiAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICBtaWdyYXRpb25zLm1pZ3JhdGVUb1ZlcnNpb241KHRoaXMuY3VycmVudCk7XG4gICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgbWlncmF0aW9ucy5taWdyYXRlVG9WZXJzaW9uNih0aGlzLmN1cnJlbnQpO1xuICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgIG1pZ3JhdGlvbnMubWlncmF0ZVRvVmVyc2lvbjcodGhpcy5jdXJyZW50KTtcbiAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICBtaWdyYXRpb25zLm1pZ3JhdGVUb1ZlcnNpb244KHRoaXMuY3VycmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgLyogZXNsaW50LWVuYWJsZSBuby1mYWxsdGhyb3VnaCAqL1xuICAgICAgICB0aGlzLnNhdmUoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgbWlncmF0ZUZyb21SZW1vdGVUb0xhdGVzdFZlcnNpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnQudmVyc2lvbiA+PSBMQVRFU1RfVkVSU0lPTikgcmV0dXJuO1xuICAgICAgICBjb25zdCBtaWdyYXRpb25zID0gbmV3IENvbmZpZ01pZ3JhdGlvbnMoKTtcbiAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tZmFsbHRocm91Z2ggKi9cbiAgICAgICAgc3dpdGNoICh0aGlzLmN1cnJlbnQudmVyc2lvbikge1xuICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgIG1pZ3JhdGlvbnMubWlncmF0ZVRvVmVyc2lvbjYodGhpcy5jdXJyZW50KTtcbiAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICBtaWdyYXRpb25zLm1pZ3JhdGVUb1ZlcnNpb243KHRoaXMuY3VycmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgLyogZXNsaW50LWVuYWJsZSBuby1mYWxsdGhyb3VnaCAqL1xuICAgICAgICB0aGlzLnNhdmUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbG9hZChvbkxvYWRlZD8pIHtcbiAgICAgICAgYnJvd3Nlci5zdG9yYWdlLmxvY2FsLmdldCgpLnRoZW4oY29uZmlnID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHBhZ2VDb3VudCA9IGNvbmZpZ1tcImtlZUNvbmZpZ1BhZ2VDb3VudFwiXTtcblxuICAgICAgICAgICAgaWYgKHBhZ2VDb3VudCkge1xuICAgICAgICAgICAgICAgIGxldCBjb25maWdTdHJpbmcgPSBcIlwiO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFnZUNvdW50OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dFBhZ2UgPSBjb25maWdbXCJrZWVDb25maWdQYWdlXCIgKyBpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5leHRQYWdlKSBjb25maWdTdHJpbmcgKz0gbmV4dFBhZ2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjb25maWdTdHJpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50ID0gT2JqZWN0LmFzc2lnbih0aGlzLmN1cnJlbnQsIEpTT04ucGFyc2UoY29uZmlnU3RyaW5nKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9uTG9hZGVkKSBvbkxvYWRlZCgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2l0ZUNvbmZpZ0xvb2t1cEZvcih0YXJnZXQ6IFNpdGVDb25maWdUYXJnZXQsIG1ldGhvZDogU2l0ZUNvbmZpZ01ldGhvZCkge1xuICAgICAgICBpZiAodGFyZ2V0ID09IFwiRG9tYWluXCIpIHtcbiAgICAgICAgICAgIGlmIChtZXRob2QgPT0gXCJFeGFjdFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5kb21haW5FeGFjdCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5kb21haW5FeGFjdCA9IG5ldyBTaXRlQ29uZmlnTG9va3VwKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5kb21haW5FeGFjdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXRob2QgPT0gXCJQcmVmaXhcIikge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5jdXJyZW50LnNpdGVDb25maWcuZG9tYWluUHJlZml4KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudC5zaXRlQ29uZmlnLmRvbWFpblByZWZpeCA9IG5ldyBTaXRlQ29uZmlnTG9va3VwKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5kb21haW5QcmVmaXg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWV0aG9kID09IFwiUmVnZXhcIikge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5jdXJyZW50LnNpdGVDb25maWcuZG9tYWluUmVnZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50LnNpdGVDb25maWcuZG9tYWluUmVnZXggPSBuZXcgU2l0ZUNvbmZpZ0xvb2t1cCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50LnNpdGVDb25maWcuZG9tYWluUmVnZXg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodGFyZ2V0ID09IFwiSG9zdFwiKSB7XG4gICAgICAgICAgICBpZiAobWV0aG9kID09IFwiRXhhY3RcIikge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5jdXJyZW50LnNpdGVDb25maWcuaG9zdEV4YWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudC5zaXRlQ29uZmlnLmhvc3RFeGFjdCA9IG5ldyBTaXRlQ29uZmlnTG9va3VwKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5ob3N0RXhhY3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWV0aG9kID09IFwiUHJlZml4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY3VycmVudC5zaXRlQ29uZmlnLmhvc3RQcmVmaXgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50LnNpdGVDb25maWcuaG9zdFByZWZpeCA9IG5ldyBTaXRlQ29uZmlnTG9va3VwKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5ob3N0UHJlZml4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1ldGhvZCA9PSBcIlJlZ2V4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY3VycmVudC5zaXRlQ29uZmlnLmhvc3RSZWdleCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5ob3N0UmVnZXggPSBuZXcgU2l0ZUNvbmZpZ0xvb2t1cCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50LnNpdGVDb25maWcuaG9zdFJlZ2V4O1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRhcmdldCA9PSBcIlBhZ2VcIikge1xuICAgICAgICAgICAgaWYgKG1ldGhvZCA9PSBcIkV4YWN0XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY3VycmVudC5zaXRlQ29uZmlnLnBhZ2VFeGFjdCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5wYWdlRXhhY3QgPSBuZXcgU2l0ZUNvbmZpZ0xvb2t1cCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50LnNpdGVDb25maWcucGFnZUV4YWN0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1ldGhvZCA9PSBcIlByZWZpeFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5wYWdlUHJlZml4KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudC5zaXRlQ29uZmlnLnBhZ2VQcmVmaXggPSBuZXcgU2l0ZUNvbmZpZ0xvb2t1cCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50LnNpdGVDb25maWcucGFnZVByZWZpeDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXRob2QgPT0gXCJSZWdleFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5wYWdlUmVnZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50LnNpdGVDb25maWcucGFnZVJlZ2V4ID0gbmV3IFNpdGVDb25maWdMb29rdXAoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudC5zaXRlQ29uZmlnLnBhZ2VSZWdleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2l0ZUNvbmZpZ0Zvcih1cmw6IHN0cmluZyk6IFNpdGVDb25maWcge1xuICAgICAgICBjb25zdCBtYXRjaGVkQ29uZmlnTm9kZXMgPSB0aGlzLmZpbmRBbGxDb25maWdzRm9yKHVybCk7XG4gICAgICAgIG1hdGNoZWRDb25maWdOb2Rlcy5zb3J0KChub2RlMSwgbm9kZTIpID0+IG5vZGUyLm1hdGNoV2VpZ2h0IC0gbm9kZTEubWF0Y2hXZWlnaHQpO1xuICAgICAgICByZXR1cm4gdGhpcy5kZXJpdmVDb25maWdGcm9tTWF0Y2hlcyhtYXRjaGVkQ29uZmlnTm9kZXMpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZmluZEFsbENvbmZpZ3NGb3IodXJsU3RyaW5nOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgbWF0Y2hlZENvbmZpZ05vZGVzOiBTaXRlQ29uZmlnTm9kZVtdID0gW107XG4gICAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwodXJsU3RyaW5nKTtcbiAgICAgICAgY29uc3QgaG9zdCA9IHVybC5ob3N0O1xuICAgICAgICBjb25zdCBwYWdlID0gaG9zdCArIHVybC5wYXRobmFtZTtcbiAgICAgICAgY29uc3QgZG9tYWluID0gdXRpbHMucHNsLmdldERvbWFpbihob3N0KTtcblxuICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIGluIHRoaXMuY3VycmVudC5zaXRlQ29uZmlnLmRvbWFpbkV4YWN0KSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IGRvbWFpbikge1xuICAgICAgICAgICAgICAgIG1hdGNoZWRDb25maWdOb2Rlcy5wdXNoKHRoaXMuY3VycmVudC5zaXRlQ29uZmlnLmRvbWFpbkV4YWN0W3ZhbHVlXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBpbiB0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5ob3N0RXhhY3QpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gaG9zdCkge1xuICAgICAgICAgICAgICAgIG1hdGNoZWRDb25maWdOb2Rlcy5wdXNoKHRoaXMuY3VycmVudC5zaXRlQ29uZmlnLmhvc3RFeGFjdFt2YWx1ZV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgdmFsdWUgaW4gdGhpcy5jdXJyZW50LnNpdGVDb25maWcucGFnZUV4YWN0KSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IHBhZ2UpIHtcbiAgICAgICAgICAgICAgICBtYXRjaGVkQ29uZmlnTm9kZXMucHVzaCh0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5wYWdlRXhhY3RbdmFsdWVdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIGluIHRoaXMuY3VycmVudC5zaXRlQ29uZmlnLmRvbWFpblByZWZpeCkge1xuICAgICAgICAgICAgaWYgKGRvbWFpbi5zdGFydHNXaXRoKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIG1hdGNoZWRDb25maWdOb2Rlcy5wdXNoKHRoaXMuY3VycmVudC5zaXRlQ29uZmlnLmRvbWFpblByZWZpeFt2YWx1ZV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgdmFsdWUgaW4gdGhpcy5jdXJyZW50LnNpdGVDb25maWcuaG9zdFByZWZpeCkge1xuICAgICAgICAgICAgaWYgKGhvc3Quc3RhcnRzV2l0aCh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBtYXRjaGVkQ29uZmlnTm9kZXMucHVzaCh0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5ob3N0UHJlZml4W3ZhbHVlXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBpbiB0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5wYWdlUHJlZml4KSB7XG4gICAgICAgICAgICBpZiAocGFnZS5zdGFydHNXaXRoKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIG1hdGNoZWRDb25maWdOb2Rlcy5wdXNoKHRoaXMuY3VycmVudC5zaXRlQ29uZmlnLnBhZ2VQcmVmaXhbdmFsdWVdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIGluIHRoaXMuY3VycmVudC5zaXRlQ29uZmlnLmRvbWFpblJlZ2V4KSB7XG4gICAgICAgICAgICBpZiAobmV3IFJlZ0V4cCh2YWx1ZSkudGVzdChkb21haW4pKSB7XG4gICAgICAgICAgICAgICAgbWF0Y2hlZENvbmZpZ05vZGVzLnB1c2godGhpcy5jdXJyZW50LnNpdGVDb25maWcuZG9tYWluUmVnZXhbdmFsdWVdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIGluIHRoaXMuY3VycmVudC5zaXRlQ29uZmlnLmhvc3RSZWdleCkge1xuICAgICAgICAgICAgaWYgKG5ldyBSZWdFeHAodmFsdWUpLnRlc3QoaG9zdCkpIHtcbiAgICAgICAgICAgICAgICBtYXRjaGVkQ29uZmlnTm9kZXMucHVzaCh0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5ob3N0UmVnZXhbdmFsdWVdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIGluIHRoaXMuY3VycmVudC5zaXRlQ29uZmlnLnBhZ2VSZWdleCkge1xuICAgICAgICAgICAgaWYgKG5ldyBSZWdFeHAodmFsdWUpLnRlc3QocGFnZSkpIHtcbiAgICAgICAgICAgICAgICBtYXRjaGVkQ29uZmlnTm9kZXMucHVzaCh0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5wYWdlUmVnZXhbdmFsdWVdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBtYXRjaGVkQ29uZmlnTm9kZXM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmaW5kQWxsQ29uZmlnc0FuZEluZGV4Rm9yKHVybFN0cmluZzogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IG1hdGNoZWRDb25maWdOb2Rlc0FuZEluZGV4ZXM6IFNpdGVDb25maWdOb2RlQW5kSW5kZXhbXSA9IFtdO1xuICAgICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHVybFN0cmluZyk7XG4gICAgICAgIGNvbnN0IGhvc3QgPSB1cmwuaG9zdDtcbiAgICAgICAgY29uc3QgcGFnZSA9IGhvc3QgKyB1cmwucGF0aG5hbWU7XG4gICAgICAgIGNvbnN0IGRvbWFpbiA9IHV0aWxzLnBzbC5nZXREb21haW4oaG9zdCk7XG5cbiAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBpbiB0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5kb21haW5FeGFjdCkge1xuICAgICAgICAgICAgaWYgKHZhbHVlID09PSBkb21haW4pIHtcbiAgICAgICAgICAgICAgICBtYXRjaGVkQ29uZmlnTm9kZXNBbmRJbmRleGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBub2RlOiB0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5kb21haW5FeGFjdFt2YWx1ZV0sXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogXCJEb21haW5cIixcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBcIkV4YWN0XCIsXG4gICAgICAgICAgICAgICAgICAgIGxvb2t1cFZhbHVlOiB2YWx1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgdmFsdWUgaW4gdGhpcy5jdXJyZW50LnNpdGVDb25maWcuaG9zdEV4YWN0KSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IGhvc3QpIHtcbiAgICAgICAgICAgICAgICBtYXRjaGVkQ29uZmlnTm9kZXNBbmRJbmRleGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBub2RlOiB0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5ob3N0RXhhY3RbdmFsdWVdLFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IFwiSG9zdFwiLFxuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IFwiRXhhY3RcIixcbiAgICAgICAgICAgICAgICAgICAgbG9va3VwVmFsdWU6IHZhbHVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBpbiB0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5wYWdlRXhhY3QpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gcGFnZSkge1xuICAgICAgICAgICAgICAgIG1hdGNoZWRDb25maWdOb2Rlc0FuZEluZGV4ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG5vZGU6IHRoaXMuY3VycmVudC5zaXRlQ29uZmlnLnBhZ2VFeGFjdFt2YWx1ZV0sXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogXCJQYWdlXCIsXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogXCJFeGFjdFwiLFxuICAgICAgICAgICAgICAgICAgICBsb29rdXBWYWx1ZTogdmFsdWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIGluIHRoaXMuY3VycmVudC5zaXRlQ29uZmlnLmRvbWFpblByZWZpeCkge1xuICAgICAgICAgICAgaWYgKGRvbWFpbi5zdGFydHNXaXRoKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIG1hdGNoZWRDb25maWdOb2Rlc0FuZEluZGV4ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG5vZGU6IHRoaXMuY3VycmVudC5zaXRlQ29uZmlnLmRvbWFpblByZWZpeFt2YWx1ZV0sXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogXCJEb21haW5cIixcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBcIlByZWZpeFwiLFxuICAgICAgICAgICAgICAgICAgICBsb29rdXBWYWx1ZTogdmFsdWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIGluIHRoaXMuY3VycmVudC5zaXRlQ29uZmlnLmhvc3RQcmVmaXgpIHtcbiAgICAgICAgICAgIGlmIChob3N0LnN0YXJ0c1dpdGgodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgbWF0Y2hlZENvbmZpZ05vZGVzQW5kSW5kZXhlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZTogdGhpcy5jdXJyZW50LnNpdGVDb25maWcuaG9zdFByZWZpeFt2YWx1ZV0sXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogXCJIb3N0XCIsXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQcmVmaXhcIixcbiAgICAgICAgICAgICAgICAgICAgbG9va3VwVmFsdWU6IHZhbHVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBpbiB0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5wYWdlUHJlZml4KSB7XG4gICAgICAgICAgICBpZiAocGFnZS5zdGFydHNXaXRoKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIG1hdGNoZWRDb25maWdOb2Rlc0FuZEluZGV4ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG5vZGU6IHRoaXMuY3VycmVudC5zaXRlQ29uZmlnLnBhZ2VQcmVmaXhbdmFsdWVdLFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IFwiUGFnZVwiLFxuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUHJlZml4XCIsXG4gICAgICAgICAgICAgICAgICAgIGxvb2t1cFZhbHVlOiB2YWx1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgdmFsdWUgaW4gdGhpcy5jdXJyZW50LnNpdGVDb25maWcuZG9tYWluUmVnZXgpIHtcbiAgICAgICAgICAgIGlmIChuZXcgUmVnRXhwKHZhbHVlKS50ZXN0KGRvbWFpbikpIHtcbiAgICAgICAgICAgICAgICBtYXRjaGVkQ29uZmlnTm9kZXNBbmRJbmRleGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBub2RlOiB0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5kb21haW5SZWdleFt2YWx1ZV0sXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogXCJEb21haW5cIixcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBcIlJlZ2V4XCIsXG4gICAgICAgICAgICAgICAgICAgIGxvb2t1cFZhbHVlOiB2YWx1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgdmFsdWUgaW4gdGhpcy5jdXJyZW50LnNpdGVDb25maWcuaG9zdFJlZ2V4KSB7XG4gICAgICAgICAgICBpZiAobmV3IFJlZ0V4cCh2YWx1ZSkudGVzdChob3N0KSkge1xuICAgICAgICAgICAgICAgIG1hdGNoZWRDb25maWdOb2Rlc0FuZEluZGV4ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG5vZGU6IHRoaXMuY3VycmVudC5zaXRlQ29uZmlnLmhvc3RSZWdleFt2YWx1ZV0sXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogXCJIb3N0XCIsXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogXCJSZWdleFwiLFxuICAgICAgICAgICAgICAgICAgICBsb29rdXBWYWx1ZTogdmFsdWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIGluIHRoaXMuY3VycmVudC5zaXRlQ29uZmlnLnBhZ2VSZWdleCkge1xuICAgICAgICAgICAgaWYgKG5ldyBSZWdFeHAodmFsdWUpLnRlc3QocGFnZSkpIHtcbiAgICAgICAgICAgICAgICBtYXRjaGVkQ29uZmlnTm9kZXNBbmRJbmRleGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBub2RlOiB0aGlzLmN1cnJlbnQuc2l0ZUNvbmZpZy5wYWdlUmVnZXhbdmFsdWVdLFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IFwiUGFnZVwiLFxuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUmVnZXhcIixcbiAgICAgICAgICAgICAgICAgICAgbG9va3VwVmFsdWU6IHZhbHVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbWF0Y2hlZENvbmZpZ05vZGVzQW5kSW5kZXhlcztcbiAgICB9XG5cbiAgICBwcml2YXRlIGRlcml2ZUNvbmZpZ0Zyb21NYXRjaGVzKG1hdGNoZWRDb25maWdOb2RlczogU2l0ZUNvbmZpZ05vZGVbXSkge1xuICAgICAgICBjb25zdCBkZXJpdmVkQ29uZmlnOiBTaXRlQ29uZmlnID0ge307XG4gICAgICAgIG1hdGNoZWRDb25maWdOb2Rlcy5mb3JFYWNoKG5vZGUgPT4ge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIG5vZGUuY29uZmlnLnByZXZlbnRTYXZlTm90aWZpY2F0aW9uICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICBkZXJpdmVkQ29uZmlnLnByZXZlbnRTYXZlTm90aWZpY2F0aW9uID09IG51bGxcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGRlcml2ZWRDb25maWcucHJldmVudFNhdmVOb3RpZmljYXRpb24gPSBub2RlLmNvbmZpZy5wcmV2ZW50U2F2ZU5vdGlmaWNhdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBub2RlLmNvbmZpZy5saXN0TWF0Y2hpbmdDYXNlU2Vuc2l0aXZlICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICBkZXJpdmVkQ29uZmlnLmxpc3RNYXRjaGluZ0Nhc2VTZW5zaXRpdmUgPT0gbnVsbFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgZGVyaXZlZENvbmZpZy5saXN0TWF0Y2hpbmdDYXNlU2Vuc2l0aXZlID0gbm9kZS5jb25maWcubGlzdE1hdGNoaW5nQ2FzZVNlbnNpdGl2ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG5vZGUuY29uZmlnLmJsYWNrTGlzdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRlcml2ZWRDb25maWcuYmxhY2tMaXN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVyaXZlZENvbmZpZy5ibGFja0xpc3QgPSB7fTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUuY29uZmlnLmJsYWNrTGlzdC5mb3JtICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlcml2ZWRDb25maWcuYmxhY2tMaXN0LmZvcm0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVyaXZlZENvbmZpZy5ibGFja0xpc3QuZm9ybSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChub2RlLmNvbmZpZy5ibGFja0xpc3QuZm9ybS5pZHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlcml2ZWRDb25maWcuYmxhY2tMaXN0LmZvcm0uaWRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXJpdmVkQ29uZmlnLmJsYWNrTGlzdC5mb3JtLmlkcyA9IG5vZGUuY29uZmlnLmJsYWNrTGlzdC5mb3JtLmlkcztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZS5jb25maWcuYmxhY2tMaXN0LmZvcm0ubmFtZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlcml2ZWRDb25maWcuYmxhY2tMaXN0LmZvcm0ubmFtZXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlcml2ZWRDb25maWcuYmxhY2tMaXN0LmZvcm0ubmFtZXMgPSBub2RlLmNvbmZpZy5ibGFja0xpc3QuZm9ybS5uYW1lcztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobm9kZS5jb25maWcuYmxhY2tMaXN0LmZpZWxkcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkZXJpdmVkQ29uZmlnLmJsYWNrTGlzdC5maWVsZHMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVyaXZlZENvbmZpZy5ibGFja0xpc3QuZmllbGRzID0ge307XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUuY29uZmlnLmJsYWNrTGlzdC5maWVsZHMuaWRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZXJpdmVkQ29uZmlnLmJsYWNrTGlzdC5maWVsZHMuaWRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXJpdmVkQ29uZmlnLmJsYWNrTGlzdC5maWVsZHMuaWRzID0gbm9kZS5jb25maWcuYmxhY2tMaXN0LmZpZWxkcy5pZHM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUuY29uZmlnLmJsYWNrTGlzdC5maWVsZHMubmFtZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlcml2ZWRDb25maWcuYmxhY2tMaXN0LmZpZWxkcy5uYW1lcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVyaXZlZENvbmZpZy5ibGFja0xpc3QuZmllbGRzLm5hbWVzID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5jb25maWcuYmxhY2tMaXN0LmZpZWxkcy5uYW1lcztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG5vZGUuY29uZmlnLndoaXRlTGlzdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRlcml2ZWRDb25maWcud2hpdGVMaXN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVyaXZlZENvbmZpZy53aGl0ZUxpc3QgPSB7fTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUuY29uZmlnLndoaXRlTGlzdC5mb3JtICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlcml2ZWRDb25maWcud2hpdGVMaXN0LmZvcm0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVyaXZlZENvbmZpZy53aGl0ZUxpc3QuZm9ybSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChub2RlLmNvbmZpZy53aGl0ZUxpc3QuZm9ybS5pZHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlcml2ZWRDb25maWcud2hpdGVMaXN0LmZvcm0uaWRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXJpdmVkQ29uZmlnLndoaXRlTGlzdC5mb3JtLmlkcyA9IG5vZGUuY29uZmlnLndoaXRlTGlzdC5mb3JtLmlkcztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZS5jb25maWcud2hpdGVMaXN0LmZvcm0ubmFtZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlcml2ZWRDb25maWcud2hpdGVMaXN0LmZvcm0ubmFtZXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlcml2ZWRDb25maWcud2hpdGVMaXN0LmZvcm0ubmFtZXMgPSBub2RlLmNvbmZpZy53aGl0ZUxpc3QuZm9ybS5uYW1lcztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobm9kZS5jb25maWcud2hpdGVMaXN0LmZpZWxkcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkZXJpdmVkQ29uZmlnLndoaXRlTGlzdC5maWVsZHMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVyaXZlZENvbmZpZy53aGl0ZUxpc3QuZmllbGRzID0ge307XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUuY29uZmlnLndoaXRlTGlzdC5maWVsZHMuaWRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZXJpdmVkQ29uZmlnLndoaXRlTGlzdC5maWVsZHMuaWRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXJpdmVkQ29uZmlnLndoaXRlTGlzdC5maWVsZHMuaWRzID0gbm9kZS5jb25maWcud2hpdGVMaXN0LmZpZWxkcy5pZHM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUuY29uZmlnLndoaXRlTGlzdC5maWVsZHMubmFtZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlcml2ZWRDb25maWcud2hpdGVMaXN0LmZpZWxkcy5uYW1lcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVyaXZlZENvbmZpZy53aGl0ZUxpc3QuZmllbGRzLm5hbWVzID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5jb25maWcud2hpdGVMaXN0LmZpZWxkcy5uYW1lcztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIG5vZGUuY29uZmlnLnByZWZlcnJlZEVudHJ5VXVpZCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgZGVyaXZlZENvbmZpZy5wcmVmZXJyZWRFbnRyeVV1aWQgPT0gbnVsbFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgZGVyaXZlZENvbmZpZy5wcmVmZXJyZWRFbnRyeVV1aWQgPSBub2RlLmNvbmZpZy5wcmVmZXJyZWRFbnRyeVV1aWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZGVyaXZlZENvbmZpZztcbiAgICB9XG5cbiAgICBwcml2YXRlIG5vcm1hbGl6ZUZvcm1Qcm9wZXJ0eShpbnB1dDogdW5rbm93biwgaWM6IGJvb2xlYW4pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dCAhPT0gXCJzdHJpbmdcIikgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiBpYyA/IGlucHV0LnRvTG93ZXJDYXNlKCkgOiBpbnB1dDtcbiAgICB9XG5cbiAgICBwdWJsaWMgaXNGb3JtSW50ZXJlc3RpbmcoZm9ybTogSFRNTEZvcm1FbGVtZW50LCBjb25mOiBTaXRlQ29uZmlnLCBvdGhlckZpZWxkczogRmllbGRbXSkge1xuICAgICAgICBjb25zdCBpYyA9IGNvbmYubGlzdE1hdGNoaW5nQ2FzZVNlbnNpdGl2ZSAhPT0gdHJ1ZTtcbiAgICAgICAgY29uc3QgZmllbGRJZHMgPSBvdGhlckZpZWxkc1xuICAgICAgICAgICAgLm1hcChmaWVsZCA9PiAoaWMgPyBmaWVsZC5sb2NhdG9yc1swXT8uaWQudG9Mb3dlckNhc2UoKSA6IGZpZWxkLmxvY2F0b3JzWzBdPy5pZCkpXG4gICAgICAgICAgICAuZmlsdGVyKEJvb2xlYW4pO1xuICAgICAgICBjb25zdCBmaWVsZE5hbWVzID0gb3RoZXJGaWVsZHNcbiAgICAgICAgICAgIC5tYXAoZmllbGQgPT4gKGljID8gZmllbGQubG9jYXRvcnNbMF0/Lm5hbWUudG9Mb3dlckNhc2UoKSA6IGZpZWxkLmxvY2F0b3JzWzBdPy5uYW1lKSlcbiAgICAgICAgICAgIC5maWx0ZXIoQm9vbGVhbik7XG4gICAgICAgIGNvbnN0IGZvcm1JZCA9IHRoaXMubm9ybWFsaXplRm9ybVByb3BlcnR5KGZvcm0uaWQsIGljKTtcbiAgICAgICAgY29uc3QgZm9ybU5hbWUgPSB0aGlzLm5vcm1hbGl6ZUZvcm1Qcm9wZXJ0eShmb3JtLm5hbWUsIGljKTtcbiAgICAgICAgY29uc3QgZXhjbHVkZUZvcm1JZHMgPSAoY29uZj8uYmxhY2tMaXN0Py5mb3JtPy5pZHMgfHwgW10pXG4gICAgICAgICAgICAubWFwKHggPT4gKGljID8geD8udG9Mb3dlckNhc2UoKSA6IHgpKVxuICAgICAgICAgICAgLmZpbHRlcihCb29sZWFuKTtcbiAgICAgICAgY29uc3QgZXhjbHVkZUZvcm1OYW1lcyA9IChjb25mPy5ibGFja0xpc3Q/LmZvcm0/Lm5hbWVzIHx8IFtdKVxuICAgICAgICAgICAgLm1hcCh4ID0+IChpYyA/IHg/LnRvTG93ZXJDYXNlKCkgOiB4KSlcbiAgICAgICAgICAgIC5maWx0ZXIoQm9vbGVhbik7XG4gICAgICAgIGNvbnN0IGV4Y2x1ZGVGaWVsZElkcyA9IChjb25mPy5ibGFja0xpc3Q/LmZpZWxkcz8uaWRzIHx8IFtdKVxuICAgICAgICAgICAgLm1hcCh4ID0+IChpYyA/IHg/LnRvTG93ZXJDYXNlKCkgOiB4KSlcbiAgICAgICAgICAgIC5maWx0ZXIoQm9vbGVhbik7XG4gICAgICAgIGNvbnN0IGV4Y2x1ZGVGaWVsZE5hbWVzID0gKGNvbmY/LmJsYWNrTGlzdD8uZmllbGRzPy5uYW1lcyB8fCBbXSlcbiAgICAgICAgICAgIC5tYXAoeCA9PiAoaWMgPyB4Py50b0xvd2VyQ2FzZSgpIDogeCkpXG4gICAgICAgICAgICAuZmlsdGVyKEJvb2xlYW4pO1xuXG4gICAgICAgIGNvbnN0IGV4Y2x1ZGVkID1cbiAgICAgICAgICAgIGV4Y2x1ZGVGb3JtSWRzLmluZGV4T2YoZm9ybUlkKSA+PSAwIHx8XG4gICAgICAgICAgICBleGNsdWRlRm9ybU5hbWVzLmluZGV4T2YoZm9ybU5hbWUpID49IDAgfHxcbiAgICAgICAgICAgIGV4Y2x1ZGVGaWVsZElkcy5zb21lKGlkID0+IGZpZWxkSWRzLmZpbmQoaSA9PiBpZCA9PT0gaSkgIT09IHVuZGVmaW5lZCkgfHxcbiAgICAgICAgICAgIGV4Y2x1ZGVGaWVsZE5hbWVzLnNvbWUobmFtZSA9PiBmaWVsZE5hbWVzLmZpbmQobiA9PiBuYW1lID09PSBuKSAhPT0gdW5kZWZpbmVkKTtcblxuICAgICAgICBpZiAoZXhjbHVkZWQpIHJldHVybiBmYWxzZTtcblxuICAgICAgICBjb25zdCBpbmNsdWRlRm9ybUlkcyA9IGNvbmY/LndoaXRlTGlzdD8uZm9ybT8uaWRzIHx8IFtdO1xuICAgICAgICBjb25zdCBpbmNsdWRlRm9ybU5hbWVzID0gY29uZj8ud2hpdGVMaXN0Py5mb3JtPy5uYW1lcyB8fCBbXTtcbiAgICAgICAgY29uc3QgaW5jbHVkZUZpZWxkSWRzID0gY29uZj8ud2hpdGVMaXN0Py5maWVsZHM/LmlkcyB8fCBbXTtcbiAgICAgICAgY29uc3QgaW5jbHVkZUZpZWxkTmFtZXMgPSBjb25mPy53aGl0ZUxpc3Q/LmZpZWxkcz8ubmFtZXMgfHwgW107XG5cbiAgICAgICAgY29uc3QgaW5jbHVkZWQgPVxuICAgICAgICAgICAgaW5jbHVkZUZvcm1JZHMuaW5kZXhPZihmb3JtSWQpID49IDAgfHxcbiAgICAgICAgICAgIGluY2x1ZGVGb3JtTmFtZXMuaW5kZXhPZihmb3JtTmFtZSkgPj0gMCB8fFxuICAgICAgICAgICAgaW5jbHVkZUZpZWxkSWRzLnNvbWUoaWQgPT4gZmllbGRJZHMuZmluZChpID0+IGlkID09PSBpKSAhPT0gdW5kZWZpbmVkKSB8fFxuICAgICAgICAgICAgaW5jbHVkZUZpZWxkTmFtZXMuc29tZShuYW1lID0+IGZpZWxkTmFtZXMuZmluZChuID0+IG5hbWUgPT09IG4pICE9PSB1bmRlZmluZWQpO1xuXG4gICAgICAgIGlmIChpbmNsdWRlZCkgcmV0dXJuIHRydWU7XG5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcHVibGljIGdldCBhY3RpdmVUaGVtZSgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgdGhpcy5jdXJyZW50LnRoZW1lIHx8XG4gICAgICAgICAgICAod2luZG93Lm1hdGNoTWVkaWEoXCIocHJlZmVycy1jb2xvci1zY2hlbWU6IGRhcmspXCIpLm1hdGNoZXMgPyBcImRhcmtcIiA6IFwibGlnaHRcIilcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdG9nZ2xlUHJlZmVycmVkRW50cnlVdWlkKHV1aWQ6IHN0cmluZywgdXJsU3RyaW5nOiBzdHJpbmcpIHtcbiAgICAgICAgbGV0IHVybDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHVybCA9IG5ldyBVUkwodXJsU3RyaW5nKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgS2VlTG9nLmVycm9yKFxuICAgICAgICAgICAgICAgIFwiSW52YWxpZCBVUkwgc3VwcGxpZWQgdG8gdG9nZ2xlUHJlZmVycmVkRW50cnlVdWlkLiBQcmVmZXJyZWQgZW50cnkgd2lsbCBub3QgYmUgYWx0ZXJlZC5cIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb25maWd1cmVkVGFyZ2V0OiBTaXRlQ29uZmlnVGFyZ2V0ID0gXCJEb21haW5cIjtcbiAgICAgICAgY29uc3QgYWxsQ29uZmlnTm9kZXNBbmRMb29rdXBzID0gdGhpcy5maW5kQWxsQ29uZmlnc0FuZEluZGV4Rm9yKHVybFN0cmluZyk7XG4gICAgICAgIGNvbnN0IGRlcml2ZWRDb25maWcgPSB0aGlzLnNpdGVDb25maWdGb3IodXJsU3RyaW5nKTtcbiAgICAgICAgY29uc3QgY3VycmVudFByZWZlcnJlZFV1aWQgPSBkZXJpdmVkQ29uZmlnLnByZWZlcnJlZEVudHJ5VXVpZDtcblxuICAgICAgICBpZiAoY3VycmVudFByZWZlcnJlZFV1aWQgPT09IHV1aWQpIHtcbiAgICAgICAgICAgIGFsbENvbmZpZ05vZGVzQW5kTG9va3Vwcy5mb3JFYWNoKGNubCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGNubC5ub2RlLmNvbmZpZy5wcmVmZXJyZWRFbnRyeVV1aWQgPT09IHV1aWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVQcmVmZXJyZWRFbnRyeVV1aWQoY25sKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFsbENvbmZpZ05vZGVzQW5kTG9va3Vwcy5mb3JFYWNoKGNubCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBjbmwubm9kZS5jb25maWcucHJlZmVycmVkRW50cnlVdWlkID09PSBjdXJyZW50UHJlZmVycmVkVXVpZCAmJlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxlYXN0U3BlY2lmaWNUYXJnZXQoY29uZmlndXJlZFRhcmdldCwgY25sLnRhcmdldCkgPT09IGNvbmZpZ3VyZWRUYXJnZXRcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVQcmVmZXJyZWRFbnRyeVV1aWQoY25sKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5hZGRTaXRlQ29uZmlnUGFyYW1ldGVycyhcbiAgICAgICAgICAgICAgICB7IHByZWZlcnJlZEVudHJ5VXVpZDogdXVpZCB9IGFzIFNpdGVDb25maWcsXG4gICAgICAgICAgICAgICAgdXJsLFxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyZWRUYXJnZXQsXG4gICAgICAgICAgICAgICAgXCJFeGFjdFwiLFxuICAgICAgICAgICAgICAgIFwiQXV0b1wiXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2F2ZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVtb3ZlUHJlZmVycmVkRW50cnlVdWlkKGNubDogU2l0ZUNvbmZpZ05vZGVBbmRJbmRleCkge1xuICAgICAgICBjbmwubm9kZS5jb25maWcucHJlZmVycmVkRW50cnlVdWlkID0gbnVsbDtcblxuICAgICAgICAvLyBVbmxlc3MgdGhlIHVzZXIgaGFzIG1hbnVhbGx5IG1vZGlmaWVkIHRoZSBwZXItc2l0ZSBjb25maWcgZm9yIHRoaXMgc2l0ZVxuICAgICAgICAvLyB3ZSBjYW4gdGlkeSB1cCB0aGlzIHVubmVjZXNzYXJ5IGRhdGFcbiAgICAgICAgaWYgKGNubC5ub2RlLnNvdXJjZSA9PT0gXCJBdXRvXCIgJiYgdGhpcy5lcXVhbHNEZWZhdWx0U2l0ZUNvbmZpZyhjbmwubm9kZS5jb25maWcpKSB7XG4gICAgICAgICAgICBjb25zdCBsb29rdXAgPSB0aGlzLnNpdGVDb25maWdMb29rdXBGb3IoY25sLnRhcmdldCwgY25sLm1ldGhvZCk7XG4gICAgICAgICAgICBkZWxldGUgbG9va3VwW2NubC5sb29rdXBWYWx1ZV07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGVxdWFsc0RlZmF1bHRTaXRlQ29uZmlnKGNvbmZpZzogU2l0ZUNvbmZpZykge1xuICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy5wcmVmZXJyZWRFbnRyeVV1aWQgPT09IFwiYm9vbGVhblwiKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICh0eXBlb2YgY29uZmlnLnByZXZlbnRTYXZlTm90aWZpY2F0aW9uID09PSBcImJvb2xlYW5cIikgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy5saXN0TWF0Y2hpbmdDYXNlU2Vuc2l0aXZlID09PSBcImJvb2xlYW5cIikgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoY29uZmlnLndoaXRlTGlzdCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoY29uZmlnLmJsYWNrTGlzdCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGxlYXN0U3BlY2lmaWNUYXJnZXQodDE6IFNpdGVDb25maWdUYXJnZXQsIHQyOiBTaXRlQ29uZmlnVGFyZ2V0KTogU2l0ZUNvbmZpZ1RhcmdldCB7XG4gICAgICAgIGlmICh0MSA9PT0gXCJEb21haW5cIiB8fCB0MiA9PT0gXCJEb21haW5cIikge1xuICAgICAgICAgICAgcmV0dXJuIFwiRG9tYWluXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHQxID09PSBcIkhvc3RcIiB8fCB0MiA9PT0gXCJIb3N0XCIpIHtcbiAgICAgICAgICAgIHJldHVybiBcIkhvc3RcIjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gXCJQYWdlXCI7XG4gICAgfVxuXG4gICAgcHVibGljIHZhbHVlRnJvbVVybCh1cmw6IFVSTCwgdGFyZ2V0OiBTaXRlQ29uZmlnVGFyZ2V0KTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgaG9zdCA9IHVybC5ob3N0O1xuICAgICAgICBpZiAodGFyZ2V0ID09PSBcIkhvc3RcIikgcmV0dXJuIGhvc3Q7XG4gICAgICAgIGlmICh0YXJnZXQgPT09IFwiUGFnZVwiKSByZXR1cm4gaG9zdCArIHVybC5wYXRobmFtZTtcbiAgICAgICAgaWYgKHRhcmdldCA9PT0gXCJEb21haW5cIikgcmV0dXJuIHV0aWxzLnBzbC5nZXREb21haW4oaG9zdCk7XG4gICAgfVxuXG4gICAgcHVibGljIGFkZFNpdGVDb25maWdQYXJhbWV0ZXJzKFxuICAgICAgICBwYXJ0aWFsQ29uZmlnOiBQYXJ0aWFsPFNpdGVDb25maWc+LFxuICAgICAgICB1cmw6IFVSTCxcbiAgICAgICAgdGFyZ2V0OiBTaXRlQ29uZmlnVGFyZ2V0LFxuICAgICAgICBtZXRob2Q6IFNpdGVDb25maWdNZXRob2QsXG4gICAgICAgIHNvdXJjZTogU2l0ZUNvbmZpZ05vZGVUeXBlXG4gICAgKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy52YWx1ZUZyb21VcmwodXJsLCB0YXJnZXQpO1xuICAgICAgICBjb25zdCBjb25maWdMb29rdXAgPSBjb25maWdNYW5hZ2VyLnNpdGVDb25maWdMb29rdXBGb3IodGFyZ2V0LCBtZXRob2QpO1xuICAgICAgICBpZiAoIWNvbmZpZ0xvb2t1cFt2YWx1ZV0pIHtcbiAgICAgICAgICAgIGNvbmZpZ0xvb2t1cFt2YWx1ZV0gPSB7IGNvbmZpZzogbmV3IFNpdGVDb25maWcoKSwgc291cmNlLCBtYXRjaFdlaWdodDogMTAwIH07XG4gICAgICAgIH1cbiAgICAgICAgT2JqZWN0LmFzc2lnbihjb25maWdMb29rdXBbdmFsdWVdLmNvbmZpZywgcGFydGlhbENvbmZpZyk7XG4gICAgfVxufVxuXG5leHBvcnQgY29uc3QgY29uZmlnTWFuYWdlciA9IG5ldyBDb25maWdNYW5hZ2VyKCk7XG4iLCJpbXBvcnQgeyBjb25maWdNYW5hZ2VyIH0gZnJvbSBcIi4uL2NvbW1vbi9Db25maWdNYW5hZ2VyXCI7XG5cbmV4cG9ydCBjbGFzcyBQYW5lbFN0dWJPcHRpb25zIHtcbiAgICBpZDogc3RyaW5nO1xuICAgIGhlaWdodDogbnVtYmVyO1xuICAgIHdpZHRoOiBudW1iZXI7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIGF1dG9DbG9zZVRpbWU6IG51bWJlcjtcbiAgICBsZWdhY3k6IGJvb2xlYW47XG5cbiAgICBwdWJsaWMgc3RhdGljIE1hdGNoZWRMb2dpbnM6IFBhbmVsU3R1Yk9wdGlvbnMgPSB7XG4gICAgICAgIGlkOiBcIktlZUFkZG9uUGFuZWxNYXRjaGVkTG9naW5zXCIsXG4gICAgICAgIGhlaWdodDogMzAwLFxuICAgICAgICB3aWR0aDogNDAwLFxuICAgICAgICBuYW1lOiBcIm1hdGNoZWRMb2dpbnNMZWdhY3lcIixcbiAgICAgICAgYXV0b0Nsb3NlVGltZTogMCxcbiAgICAgICAgbGVnYWN5OiB0cnVlXG4gICAgfTtcblxuICAgIHB1YmxpYyBzdGF0aWMgR2VuZXJhdGVQYXNzd29yZExlZ2FjeTogUGFuZWxTdHViT3B0aW9ucyA9IHtcbiAgICAgICAgaWQ6IFwiS2VlQWRkb25QYW5lbEdlbmVyYXRlUGFzc3dvcmRcIixcbiAgICAgICAgaGVpZ2h0OiAzMDAsXG4gICAgICAgIHdpZHRoOiA0MDAsXG4gICAgICAgIG5hbWU6IFwiZ2VuZXJhdGVQYXNzd29yZExlZ2FjeVwiLFxuICAgICAgICBhdXRvQ2xvc2VUaW1lOiAwLFxuICAgICAgICBsZWdhY3k6IHRydWVcbiAgICB9O1xuXG4gICAgcHVibGljIHN0YXRpYyBHZW5lcmF0ZVBhc3N3b3JkOiBQYW5lbFN0dWJPcHRpb25zID0ge1xuICAgICAgICBpZDogXCJLZWVBZGRvblBhbmVsR2VuZXJhdGVQYXNzd29yZFwiLFxuICAgICAgICBoZWlnaHQ6IDUwMCxcbiAgICAgICAgd2lkdGg6IDQ1MCxcbiAgICAgICAgbmFtZTogXCJnZW5lcmF0ZVBhc3N3b3JkXCIsXG4gICAgICAgIGF1dG9DbG9zZVRpbWU6IDAsXG4gICAgICAgIGxlZ2FjeTogZmFsc2VcbiAgICB9O1xufVxuXG5leHBvcnQgY2xhc3MgUGFuZWxTdHViIHtcbiAgICBwcml2YXRlIHRhcmdldDogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBjb250YWluZXI6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgdGFyZ2V0UmVsYXRpdmVSZWN0OiBDbGllbnRSZWN0O1xuICAgIHByaXZhdGUgb3B0aW9uczogUGFuZWxTdHViT3B0aW9ucztcbiAgICBwcml2YXRlIHBhcmVudEZyYW1lSWQ6IG51bWJlcjtcbiAgICBwcml2YXRlIGVsZW1lbnRUb1JlZm9jdXM6IEVsZW1lbnQ7XG5cbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zOiBQYW5lbFN0dWJPcHRpb25zLCB0YXJnZXQ6IEhUTUxFbGVtZW50LCBwYXJlbnRGcmFtZUlkOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMucGFyZW50RnJhbWVJZCA9IHBhcmVudEZyYW1lSWQ7XG4gICAgfVxuXG4gICAgcHVibGljIGNyZWF0ZVBhbmVsKCkge1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLm5hbWUgPT0gXCJnZW5lcmF0ZVBhc3N3b3JkXCIpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudFRvUmVmb2N1cyA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBjb25zdCBzaGFkb3cgPSB0aGlzLmNvbnRhaW5lci5hdHRhY2hTaGFkb3coeyBtb2RlOiBcImNsb3NlZFwiIH0pO1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5pZCA9IHRoaXMub3B0aW9ucy5pZDtcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG4gICAgICAgIHN0eWxlLnRleHRDb250ZW50ID0gYDpob3N0KGRpdikge1xuICAgICAgICAgICAgZGlzcGxheTogYmxvY2sgIWltcG9ydGFudDtcbiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgei1pbmRleDogMjE0NzQ4MzY0NyAhaW1wb3J0YW50O1xuICAgICAgICB9YDtcbiAgICAgICAgc2hhZG93LmFwcGVuZENoaWxkKHN0eWxlKTtcblxuICAgICAgICBpZiAodGhpcy50YXJnZXQpIHtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0UmVsYXRpdmVSZWN0ID0gdGhpcy50YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uUGFuZWwoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLnNldFByb3BlcnR5KFwid2lkdGhcIiwgdGhpcy5vcHRpb25zLndpZHRoICsgXCJweFwiLCBcImltcG9ydGFudFwiKTtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLnNldFByb3BlcnR5KFwiaGVpZ2h0XCIsIHRoaXMub3B0aW9ucy5oZWlnaHQgKyBcInB4XCIsIFwiaW1wb3J0YW50XCIpO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUuc2V0UHJvcGVydHkoXG4gICAgICAgICAgICAgICAgXCJ0b3BcIixcbiAgICAgICAgICAgICAgICAod2luZG93LmlubmVySGVpZ2h0IC0gdGhpcy5vcHRpb25zLmhlaWdodCkgLyAyICsgd2luZG93LnNjcm9sbFkgKyBcInB4XCIsXG4gICAgICAgICAgICAgICAgXCJpbXBvcnRhbnRcIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLnNldFByb3BlcnR5KFxuICAgICAgICAgICAgICAgIFwibGVmdFwiLFxuICAgICAgICAgICAgICAgICh3aW5kb3cuaW5uZXJXaWR0aCAtIHRoaXMub3B0aW9ucy53aWR0aCkgLyAyICsgd2luZG93LnNjcm9sbFggKyBcInB4XCIsXG4gICAgICAgICAgICAgICAgXCJpbXBvcnRhbnRcIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIik7XG4gICAgICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoXCJzYW5kYm94XCIsIFwiYWxsb3ctc2NyaXB0cyBhbGxvdy1zYW1lLW9yaWdpblwiKTtcbiAgICAgICAgaWZyYW1lLnNldEF0dHJpYnV0ZShcImFsbG93XCIsIFwiXCIpO1xuICAgICAgICBpZnJhbWUuc3R5bGUuc2V0UHJvcGVydHkoXCJ3aWR0aFwiLCBcIjEwMCVcIiwgXCJpbXBvcnRhbnRcIik7XG4gICAgICAgIGlmcmFtZS5zdHlsZS5zZXRQcm9wZXJ0eShcImhlaWdodFwiLCBcIjEwMCVcIiwgXCJpbXBvcnRhbnRcIik7XG4gICAgICAgIGlmcmFtZS5zdHlsZS5zZXRQcm9wZXJ0eShcInZpc2liaWxpdHlcIiwgXCJ2aXNpYmxlXCIsIFwiaW1wb3J0YW50XCIpO1xuICAgICAgICBpZnJhbWUuc3R5bGUuc2V0UHJvcGVydHkoXCJkaXNwbGF5XCIsIFwiYmxvY2tcIiwgXCJpbXBvcnRhbnRcIik7XG4gICAgICAgIGlmcmFtZS5zdHlsZS5zZXRQcm9wZXJ0eShcInBvc2l0aW9uXCIsIFwicmVsYXRpdmVcIiwgXCJpbXBvcnRhbnRcIik7XG4gICAgICAgIGlmcmFtZS5zdHlsZS5zZXRQcm9wZXJ0eShcbiAgICAgICAgICAgIFwiYmFja2dyb3VuZC1jb2xvclwiLFxuICAgICAgICAgICAgY29uZmlnTWFuYWdlci5hY3RpdmVUaGVtZSA9PT0gXCJkYXJrXCIgPyBcIiMxZTFlMWVcIiA6IFwiI2ZmZmZmZlwiLFxuICAgICAgICAgICAgXCJpbXBvcnRhbnRcIlxuICAgICAgICApO1xuICAgICAgICBpZnJhbWUuc2V0QXR0cmlidXRlKFwic2Nyb2xsaW5nXCIsIFwibm9cIik7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMubGVnYWN5KSB7XG4gICAgICAgICAgICBpZnJhbWUuc3R5bGUuc2V0UHJvcGVydHkoXCJib3JkZXJcIiwgXCJub25lXCIsIFwiaW1wb3J0YW50XCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWZyYW1lLnN0eWxlLnNldFByb3BlcnR5KFwiYm9yZGVyXCIsIFwiMnB4IHNvbGlkICMxYTQ2NmJcIiwgXCJpbXBvcnRhbnRcIik7XG4gICAgICAgICAgICBpZnJhbWUuc3R5bGUuc2V0UHJvcGVydHkoXCJib3JkZXItcmFkaXVzXCIsIFwiOHB4XCIsIFwiaW1wb3J0YW50XCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgc2hhZG93LmFwcGVuZENoaWxkKGlmcmFtZSk7XG4gICAgICAgIGNvbnN0IHRlbXBsYXRlID0gYnJvd3Nlci5leHRlbnNpb24uZ2V0VVJMKFxuICAgICAgICAgICAgYHBhbmVscy9wYW5lbHMke3RoaXMub3B0aW9ucy5sZWdhY3kgPyBcIkxlZ2FjeVwiIDogXCJcIn0uaHRtbGBcbiAgICAgICAgKTtcbiAgICAgICAgaWZyYW1lLnNyYyA9IGAke3RlbXBsYXRlfT9wYXJlbnRGcmFtZUlkPSR7dGhpcy5wYXJlbnRGcmFtZUlkfSZhdXRvQ2xvc2VUaW1lPSR7dGhpcy5vcHRpb25zLmF1dG9DbG9zZVRpbWV9JnBhbmVsPSR7dGhpcy5vcHRpb25zLm5hbWV9JnRoZW1lPSR7Y29uZmlnTWFuYWdlci5hY3RpdmVUaGVtZX1gO1xuXG4gICAgICAgIGNvbnN0IGJvZHlFbGVtZW50cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKTtcbiAgICAgICAgaWYgKGJvZHlFbGVtZW50cyAmJiBib2R5RWxlbWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgYm9keUVsZW1lbnRzWzBdLmFwcGVuZENoaWxkKHRoaXMuY29udGFpbmVyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGZyYW1lc2V0RWxlbWVudHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImZyYW1lc2V0XCIpO1xuICAgICAgICAgICAgaWYgKGZyYW1lc2V0RWxlbWVudHMgJiYgZnJhbWVzZXRFbGVtZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZnJhbWVzZXRFbGVtZW50c1swXS5pbnNlcnRBZGphY2VudEVsZW1lbnQoXCJhZnRlcmVuZFwiLCB0aGlzLmNvbnRhaW5lcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgdXBkYXRlQm91bmRpbmdDbGllbnRSZWN0KCkge1xuICAgICAgICBjb25zdCBvbGRSZWN0ID0gdGhpcy50YXJnZXRSZWxhdGl2ZVJlY3Q7XG4gICAgICAgIHRoaXMudGFyZ2V0UmVsYXRpdmVSZWN0ID0gdGhpcy50YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgb2xkUmVjdC50b3AgIT0gdGhpcy50YXJnZXRSZWxhdGl2ZVJlY3QudG9wIHx8XG4gICAgICAgICAgICBvbGRSZWN0LmJvdHRvbSAhPSB0aGlzLnRhcmdldFJlbGF0aXZlUmVjdC5ib3R0b20gfHxcbiAgICAgICAgICAgIG9sZFJlY3QubGVmdCAhPSB0aGlzLnRhcmdldFJlbGF0aXZlUmVjdC5sZWZ0IHx8XG4gICAgICAgICAgICBvbGRSZWN0LnJpZ2h0ICE9IHRoaXMudGFyZ2V0UmVsYXRpdmVSZWN0LnJpZ2h0XG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5wb3NpdGlvblBhbmVsKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHBvc2l0aW9uUGFuZWwoKSB7XG4gICAgICAgIGNvbnN0IHByZWZlcnJlZENvbnRhaW5lckhlaWdodCA9IHRoaXMub3B0aW9ucy5oZWlnaHQ7XG4gICAgICAgIGxldCBjb250YWluZXJIZWlnaHQgPSBwcmVmZXJyZWRDb250YWluZXJIZWlnaHQ7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lcldpZHRoID0gdGhpcy5vcHRpb25zLndpZHRoO1xuICAgICAgICBsZXQgcG9zaXRpb25BYm92ZSA9IGZhbHNlO1xuXG4gICAgICAgIGNvbnN0IHRhcmdldFRvcCA9IHRoaXMudGFyZ2V0UmVsYXRpdmVSZWN0LnRvcCArIHdpbmRvdy5zY3JvbGxZO1xuICAgICAgICBjb25zdCB0YXJnZXRCb3R0b20gPSB0aGlzLnRhcmdldFJlbGF0aXZlUmVjdC5ib3R0b20gKyB3aW5kb3cuc2Nyb2xsWTtcbiAgICAgICAgY29uc3QgcHJlZmVycmVkQXJyb3dYQ29vcmQgPSB0aGlzLnRhcmdldFJlbGF0aXZlUmVjdC5yaWdodCAtIDEyO1xuXG4gICAgICAgIGNvbnN0IHByZWZlcnJlZEJvdHRvbSA9IHRoaXMudGFyZ2V0UmVsYXRpdmVSZWN0LmJvdHRvbSArIHByZWZlcnJlZENvbnRhaW5lckhlaWdodDtcbiAgICAgICAgaWYgKHByZWZlcnJlZEJvdHRvbSA+IHdpbmRvdy5pbm5lckhlaWdodCkge1xuICAgICAgICAgICAgY29uc3QgcHJlZmVycmVkVG9wID0gdGhpcy50YXJnZXRSZWxhdGl2ZVJlY3QudG9wIC0gcHJlZmVycmVkQ29udGFpbmVySGVpZ2h0O1xuICAgICAgICAgICAgaWYgKHByZWZlcnJlZFRvcCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb25BYm92ZSA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IG92ZXJmbG93Qm90dG9tID0gcHJlZmVycmVkQm90dG9tIC0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgICAgICAgICAgICAgIGNvbnN0IG92ZXJmbG93VG9wID0gLXByZWZlcnJlZFRvcDtcbiAgICAgICAgICAgICAgICBpZiAob3ZlcmZsb3dCb3R0b20gPiBvdmVyZmxvd1RvcCkge1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbkFib3ZlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVySGVpZ2h0ID0gcHJlZmVycmVkQ29udGFpbmVySGVpZ2h0IC0gb3ZlcmZsb3dUb3A7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVySGVpZ2h0ID0gcHJlZmVycmVkQ29udGFpbmVySGVpZ2h0IC0gb3ZlcmZsb3dCb3R0b207XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gTW92ZSBhcyBmYXIgbGVmdCBhcyBwb3NzaWJsZSB3aGlsZSBrZWVwaW5nIHRoZSBLZWUgaWNvbiBhYm92ZSB0aGUgY29udGFpbmVyIGFuZCBub3RcbiAgICAgICAgLy8gZ29pbmcgYmV5b25kIHRoZSBsZWZ0IGVkZ2Ugb2YgdGhlIHRhcmdldC4gV2UgYXNzdW1lIHRoZSBLZWUgaWNvbiBpcyBhbHdheXMgdmlzaWJsZSBiZWNhdXNlXG4gICAgICAgIC8vIHRoZSB1c2VyIGhhcyBoYWQgdG8gaW50ZXJhY3Qgd2l0aCB0aGUgYnV0dG9uIGluaXRpYWxseS4gVGhhdCBhc3N1bXB0aW9uIHdvbid0IGFsd2F5cyBob2xkXG4gICAgICAgIC8vIC0gZS5nLiBpbiB2ZXJ5IG5hcnJvdyBzY3JlZW5zIHdpdGgga2V5Ym9hcmQgYWN0aXZhdGlvbiBvciBzb21lIGxhdGVyIHdpbmRvdyBvciBET00gYWRqdXN0bWVudHMgYnV0IHRoaXMgc2hvdWxkXG4gICAgICAgIC8vIGJlIGFuIGVkZ2UgY2FzZSB0aGF0IHVzZXJzIGNhbiB3b3JrIGFyb3VuZCB1bnRpbCB3ZSBoYXZlIG1vcmUgdGltZSB0byBleHRlbmQgc3VwcG9ydCB0byB0aG9zZSBzY2VuYXJpb3MuXG4gICAgICAgIGNvbnN0IHRhcmdldFdpZHRoID0gcHJlZmVycmVkQXJyb3dYQ29vcmQgLSB0aGlzLnRhcmdldFJlbGF0aXZlUmVjdC5sZWZ0O1xuICAgICAgICBsZXQgcmVsYXRpdmVMZWZ0OiBudW1iZXI7XG4gICAgICAgIGlmICh0YXJnZXRXaWR0aCA8IGNvbnRhaW5lcldpZHRoKSB7XG4gICAgICAgICAgICByZWxhdGl2ZUxlZnQgPSBNYXRoLm1pbihcbiAgICAgICAgICAgICAgICB0aGlzLnRhcmdldFJlbGF0aXZlUmVjdC5sZWZ0LFxuICAgICAgICAgICAgICAgIHdpbmRvdy5pbm5lcldpZHRoIC0gY29udGFpbmVyV2lkdGhcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZWxhdGl2ZUxlZnQgPSBwcmVmZXJyZWRBcnJvd1hDb29yZCAtIGNvbnRhaW5lcldpZHRoO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdG9wID0gcG9zaXRpb25BYm92ZSA/IHRhcmdldFRvcCAtIGNvbnRhaW5lckhlaWdodCA6IHRhcmdldEJvdHRvbTtcbiAgICAgICAgY29uc3QgbGVmdCA9IHJlbGF0aXZlTGVmdCArIHdpbmRvdy5zY3JvbGxYO1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS5zZXRQcm9wZXJ0eShcIndpZHRoXCIsIGNvbnRhaW5lcldpZHRoICsgXCJweFwiLCBcImltcG9ydGFudFwiKTtcbiAgICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUuc2V0UHJvcGVydHkoXCJoZWlnaHRcIiwgY29udGFpbmVySGVpZ2h0ICsgXCJweFwiLCBcImltcG9ydGFudFwiKTtcbiAgICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUuc2V0UHJvcGVydHkoXCJ0b3BcIiwgdG9wICsgXCJweFwiLCBcImltcG9ydGFudFwiKTtcbiAgICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUuc2V0UHJvcGVydHkoXCJsZWZ0XCIsIGxlZnQgKyBcInB4XCIsIFwiaW1wb3J0YW50XCIpO1xuICAgIH1cblxuICAgIHB1YmxpYyBjbG9zZVBhbmVsKCkge1xuICAgICAgICBjb25zdCBwYW5lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMub3B0aW9ucy5pZCk7XG4gICAgICAgIGlmIChwYW5lbCkgcGFuZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChwYW5lbCk7XG4gICAgICAgIGlmICh0aGlzLmVsZW1lbnRUb1JlZm9jdXMpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgKHRoaXMuZWxlbWVudFRvUmVmb2N1cyBhcyBIVE1MRWxlbWVudCkuZm9jdXMoKTtcbiAgICAgICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgICAgIC8vIEV4cGVjdGVkIGlmIGFjdGl2ZUVsZW1lbnQgd2FzIG5vdCBhY3R1YWxseSBhbiBIVE1MRWxlbWVudFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuIiwiZXhwb3J0IGNvbnN0IGVudW0gQWN0aW9uIHtcbiAgICBDbG9zZUFsbFBhbmVscyA9IFwiY2xvc2VBbGxQYW5lbHNcIixcbiAgICBEZXRlY3RGb3JtcyA9IFwiZGV0ZWN0Rm9ybXNcIixcbiAgICBSZXNldEZvcm1zID0gXCJyZXNldEZvcm1zXCIsXG4gICAgR2V0UGFzc3dvcmRQcm9maWxlcyA9IFwiZ2V0UGFzc3dvcmRQcm9maWxlc1wiLFxuICAgIEdlbmVyYXRlUGFzc3dvcmQgPSBcImdlbmVyYXRlUGFzc3dvcmRcIixcbiAgICBNYW51YWxGaWxsID0gXCJtYW51YWxGaWxsXCIsXG4gICAgUHJpbWFyeSA9IFwicHJpbWFyeVwiLFxuICAgIFNob3dNYXRjaGVkTG9naW5zUGFuZWwgPSBcInNob3dNYXRjaGVkTG9naW5zUGFuZWxcIixcbiAgICBQYWdlSGlkZSA9IFwicGFnZUhpZGVcIixcbiAgICBPcGVuS2VlUGFzcyA9IFwib3BlbmtlZXBhc3NcIixcbiAgICBDcmVhdGVFbnRyeSA9IFwiY3JlYXRlRW50cnlcIixcbiAgICBVcGRhdGVFbnRyeSA9IFwidXBkYXRlRW50cnlcIlxufVxuIiwiaW1wb3J0IHsgRm9ybVV0aWxzIH0gZnJvbSBcIi4vZm9ybXNVdGlsc1wiO1xuaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSBcIi4uL2NvbW1vbi9BY3Rpb25cIjtcbmltcG9ydCB7IEFkZG9uTWVzc2FnZSB9IGZyb20gXCIuLi9jb21tb24vQWRkb25NZXNzYWdlXCI7XG5pbXBvcnQgeyBNYXRjaGVkRmllbGQgfSBmcm9tIFwiLi9NYXRjaGVkRmllbGRcIjtcbmltcG9ydCB7IEVudHJ5IH0gZnJvbSBcIi4uL2NvbW1vbi9tb2RlbC9FbnRyeVwiO1xuXG5leHBvcnQgY2xhc3MgS2VlRmllbGRJY29uIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBteVBvcnQ6IGJyb3dzZXIucnVudGltZS5Qb3J0LFxuICAgICAgICBwcml2YXRlIHBhcmVudEZyYW1lSWQ6IG51bWJlcixcbiAgICAgICAgcHJpdmF0ZSBmb3JtVXRpbHM6IEZvcm1VdGlscyxcbiAgICAgICAgcHJpdmF0ZSBjcmVhdGVNYXRjaGVkTG9naW5zUGFuZWxOZWFyTm9kZTogKGU6IEhUTUxFbGVtZW50KSA9PiB2b2lkXG4gICAgKSB7fVxuXG4gICAgcHJpdmF0ZSBmaWVsZHNXaXRoSWNvbnM6IE1hdGNoZWRGaWVsZFtdID0gW107XG4gICAgcHJpdmF0ZSBwYXNzd29yZEZpZWxkczogTWF0Y2hlZEZpZWxkW107XG4gICAgcHJpdmF0ZSBvdGhlckZpZWxkczogTWF0Y2hlZEZpZWxkW107XG5cbiAgICBwdWJsaWMgcmVtb3ZlS2VlSWNvbkZyb21BbGxGaWVsZHMoKSB7XG4gICAgICAgIGZvciAoY29uc3QgZmllbGQgb2YgdGhpcy5maWVsZHNXaXRoSWNvbnMpIHtcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQ6IEhUTUxFbGVtZW50ID0gZmllbGQuRE9NZWxlbWVudDtcbiAgICAgICAgICAgIGlmICghZWxlbWVudCkgY29udGludWU7XG4gICAgICAgICAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzKTtcbiAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB0aGlzKTtcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoXCJiYWNrZ3JvdW5kLWltYWdlXCIsIFwiXCIpO1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShcImJhY2tncm91bmQtcmVwZWF0XCIsIFwiXCIpO1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShcImJhY2tncm91bmQtYXR0YWNobWVudFwiLCBcIlwiKTtcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoXCJiYWNrZ3JvdW5kLXNpemVcIiwgXCJcIik7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KFwiYmFja2dyb3VuZC1wb3NpdGlvblwiLCBcIlwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZpZWxkc1dpdGhJY29ucyA9IFtdO1xuICAgICAgICB0aGlzLnBhc3N3b3JkRmllbGRzID0gbnVsbDtcbiAgICAgICAgdGhpcy5vdGhlckZpZWxkcyA9IG51bGw7XG4gICAgfVxuXG4gICAgcHVibGljIGFkZEtlZUljb25Ub0ZpZWxkcyhcbiAgICAgICAgcGFzc3dvcmRGaWVsZHM6IE1hdGNoZWRGaWVsZFtdLFxuICAgICAgICBvdGhlckZpZWxkczogTWF0Y2hlZEZpZWxkW10sXG4gICAgICAgIGVudHJpZXM6IEVudHJ5W11cbiAgICApIHtcbiAgICAgICAgdGhpcy5wYXNzd29yZEZpZWxkcyA9IHBhc3N3b3JkRmllbGRzO1xuICAgICAgICB0aGlzLm90aGVyRmllbGRzID0gb3RoZXJGaWVsZHM7XG5cbiAgICAgICAgaWYgKGVudHJpZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgdGhpcy5nZXRMYWJlbGxlZEljb24oZW50cmllcy5sZW5ndGgudG9TdHJpbmcoKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmFmdGVySW1hZ2VMb2FkZWQodGhpcy5LRUVGT1hfSUNPTl8xNik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHNraXBGaWVsZChmaWVsZDogTWF0Y2hlZEZpZWxkKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICF0aGlzLmZvcm1VdGlscy5pc0FUZXh0Rm9ybUZpZWxkVHlwZShmaWVsZC5maWVsZC50eXBlKSAmJlxuICAgICAgICAgICAgZmllbGQuZmllbGQudHlwZSAhPSBcInBhc3N3b3JkXCJcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgICAhZmllbGQuRE9NZWxlbWVudCB8fFxuICAgICAgICAgICAgZmllbGQuRE9NZWxlbWVudCBpbnN0YW5jZW9mIEhUTUxTZWxlY3RFbGVtZW50IHx8XG4gICAgICAgICAgICAhZmllbGQuRE9NZWxlbWVudC5pc0Nvbm5lY3RlZFxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmaWVsZC5ET01lbGVtZW50Lm1heExlbmd0aCA+IDAgJiYgZmllbGQuRE9NZWxlbWVudC5tYXhMZW5ndGggPD0gMykgcmV0dXJuIHRydWU7XG4gICAgICAgIGlmIChmaWVsZC5ET01lbGVtZW50Lm9mZnNldFdpZHRoIDwgNTApIHJldHVybiB0cnVlO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhZGRJY29uKGZpZWxkOiBNYXRjaGVkRmllbGQsIGltYWdlOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5maWVsZHNXaXRoSWNvbnMucHVzaChmaWVsZCk7XG5cbiAgICAgICAgY29uc3QgZWxlbWVudDogSFRNTEVsZW1lbnQgPSBmaWVsZC5ET01lbGVtZW50O1xuICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzKTtcbiAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMpO1xuXG4gICAgICAgIGVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoXCJiYWNrZ3JvdW5kLWltYWdlXCIsIFwidXJsKCdcIiArIGltYWdlICsgXCInKVwiLCBcImltcG9ydGFudFwiKTtcbiAgICAgICAgZWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShcImJhY2tncm91bmQtcmVwZWF0XCIsIFwibm8tcmVwZWF0XCIsIFwiaW1wb3J0YW50XCIpO1xuICAgICAgICBlbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KFwiYmFja2dyb3VuZC1hdHRhY2htZW50XCIsIFwic2Nyb2xsXCIsIFwiaW1wb3J0YW50XCIpO1xuICAgICAgICBlbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KFwiYmFja2dyb3VuZC1zaXplXCIsIFwiMTZweCAxNnB4XCIsIFwiaW1wb3J0YW50XCIpO1xuICAgICAgICBlbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KFwiYmFja2dyb3VuZC1wb3NpdGlvblwiLCBcImNhbGMoMTAwJSAtIDRweCkgNTAlXCIsIFwiaW1wb3J0YW50XCIpO1xuICAgICAgICBlbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KFwiY3Vyc29yXCIsIFwiYXV0b1wiKTtcblxuICAgICAgICBjb25zdCB0cmFuc2l0aW9uQ29uZmlnID0gd2luZG93XG4gICAgICAgICAgICAuZ2V0Q29tcHV0ZWRTdHlsZShmaWVsZC5ET01lbGVtZW50KVxuICAgICAgICAgICAgLmdldFByb3BlcnR5VmFsdWUoXCJ0cmFuc2l0aW9uLXByb3BlcnR5XCIpO1xuICAgICAgICBpZiAoW1wiYWxsXCIsIFwiYmFja2dyb3VuZFwiXS5zb21lKHZhbCA9PiB0cmFuc2l0aW9uQ29uZmlnLmluY2x1ZGVzKHZhbCkpKSB7XG4gICAgICAgICAgICBmaWVsZC5ET01lbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KFwidHJhbnNpdGlvblwiLCBcIm5vbmVcIiwgXCJpbXBvcnRhbnRcIik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm92ZXJyaWRlQm94U2hhZG93cyhlbGVtZW50KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgaGFuZGxlRXZlbnQoZTogRXZlbnQpIHtcbiAgICAgICAgaWYgKGUudHlwZSA9PT0gXCJjbGlja1wiKSB0aGlzLnNob3dNYXRjaGVkTG9naW5zUGFuZWwoZSk7XG4gICAgICAgIGlmIChlLnR5cGUgPT09IFwibW91c2Vtb3ZlXCIpIHRoaXMuaG92ZXJPdmVySW5wdXQoZSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBsaW1pdEZpZWxkcyhmaWVsZHM6IE1hdGNoZWRGaWVsZFtdKSB7XG4gICAgICAgIGNvbnN0IG9yZGVyZWRGaWVsZHMgPSBmaWVsZHNcbiAgICAgICAgICAgIC5maWx0ZXIoZiA9PiAhdGhpcy5za2lwRmllbGQoZikpXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChhLmhpZ2hlc3RTY29yZSA9PT0gYi5oaWdoZXN0U2NvcmUpIHJldHVybiAwO1xuICAgICAgICAgICAgICAgIHJldHVybiBhLmhpZ2hlc3RTY29yZSA8IGIuaGlnaGVzdFNjb3JlID8gMSA6IC0xO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBvcmRlcmVkRmllbGRzLnNsaWNlKDAsIDIpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYWZ0ZXJJbWFnZUxvYWRlZChpbWFnZTogc3RyaW5nKSB7XG4gICAgICAgIC8vIFB1dCBpY29ucyBpbiBvbmx5IHRoZSB0b3AgMiBtYXRjaGluZyBwYXNzd29yZCBhbmQgdGV4dCBmaWVsZHNcbiAgICAgICAgY29uc3QgZmllbGRTZXQxID0gdGhpcy5saW1pdEZpZWxkcyh0aGlzLnBhc3N3b3JkRmllbGRzKTtcbiAgICAgICAgY29uc3QgZmllbGRTZXQyID0gdGhpcy5saW1pdEZpZWxkcyh0aGlzLm90aGVyRmllbGRzKTtcbiAgICAgICAgZm9yIChjb25zdCBmaWVsZCBvZiBmaWVsZFNldDEuY29uY2F0KGZpZWxkU2V0MikpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkSWNvbihmaWVsZCwgaW1hZ2UpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvdmVycmlkZUJveFNoYWRvd3MoZWxlbWVudDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgY3VycmVudFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudCk7XG4gICAgICAgIGlmIChjdXJyZW50U3R5bGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHNoYWRvd3MgPSBbXTtcbiAgICAgICAgICAgIHNoYWRvd3MucHVzaChjdXJyZW50U3R5bGUuZ2V0UHJvcGVydHlWYWx1ZShcImJveC1zaGFkb3dcIikpO1xuICAgICAgICAgICAgc2hhZG93cy5wdXNoKGN1cnJlbnRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKFwiLXdlYmtpdC1ib3gtc2hhZG93XCIpKTtcbiAgICAgICAgICAgIHNoYWRvd3MucHVzaChjdXJyZW50U3R5bGUuZ2V0UHJvcGVydHlWYWx1ZShcIi1tb3otYm94LXNoYWRvd1wiKSk7XG4gICAgICAgICAgICBpZiAoc2hhZG93cy5zb21lKHMgPT4gcy5pbmRleE9mKFwiaW5zZXRcIikpKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShcImJveC1zaGFkb3dcIiwgXCJpbml0aWFsXCIsIFwiaW1wb3J0YW50XCIpO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoXCItd2Via2l0LWJveC1zaGFkb3dcIiwgXCJpbml0aWFsXCIsIFwiaW1wb3J0YW50XCIpO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoXCItbW96LWJveC1zaGFkb3dcIiwgXCJpbml0aWFsXCIsIFwiaW1wb3J0YW50XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzaG93TWF0Y2hlZExvZ2luc1BhbmVsKGUpIHtcbiAgICAgICAgY29uc3QgYmNyZWN0ID0gZS50YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGNvbnN0IGxlZnRMaW1pdCA9IGJjcmVjdC5sZWZ0ICsgYmNyZWN0LndpZHRoIC0gMjI7XG4gICAgICAgIGlmIChlLmNsaWVudFggPiBsZWZ0TGltaXQgJiYgYmNyZWN0LnRvcCA8PSBlLmNsaWVudFkgJiYgZS5jbGllbnRZIDw9IGJjcmVjdC5ib3R0b20pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudEZyYW1lSWQgIT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLm15UG9ydC5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogQWN0aW9uLlNob3dNYXRjaGVkTG9naW5zUGFuZWxcbiAgICAgICAgICAgICAgICB9IGFzIEFkZG9uTWVzc2FnZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlTWF0Y2hlZExvZ2luc1BhbmVsTmVhck5vZGUoZS50YXJnZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBob3Zlck92ZXJJbnB1dChlKSB7XG4gICAgICAgIGlmIChlLnRhcmdldC5kaXNhYmxlZCkgcmV0dXJuO1xuICAgICAgICBjb25zdCBiY3JlY3QgPSBlLnRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgY29uc3QgbGVmdExpbWl0ID0gYmNyZWN0LmxlZnQgKyBiY3JlY3Qud2lkdGggLSAyMjtcbiAgICAgICAgaWYgKGUuY2xpZW50WCA+IGxlZnRMaW1pdCkge1xuICAgICAgICAgICAgZS50YXJnZXQuc3R5bGUuc2V0UHJvcGVydHkoXCJjdXJzb3JcIiwgXCJwb2ludGVyXCIsIFwiaW1wb3J0YW50XCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGUudGFyZ2V0LnN0eWxlLnNldFByb3BlcnR5KFwiY3Vyc29yXCIsIFwiYXV0b1wiKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldExhYmVsbGVkSWNvbih0ZXh0OiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IDE2O1xuICAgICAgICBjYW52YXMud2lkdGggPSAxNjtcbiAgICAgICAgY29uc3QgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgICAgICAgaW1nLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgICAgICAgY29udGV4dC5kcmF3SW1hZ2UoaW1nLCAwLCAwKTtcbiAgICAgICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gXCJ3aGl0ZVwiO1xuICAgICAgICAgICAgY29udGV4dC5maWxsUmVjdCg2LCA4LCAxMCwgOCk7XG4gICAgICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IFwicmVkXCI7XG4gICAgICAgICAgICBjb250ZXh0LmZvbnQgPSBcIjhweCBBcmlhbFwiO1xuICAgICAgICAgICAgY29udGV4dC5maWxsVGV4dCh0ZXh0LCA3LCAxNSk7XG4gICAgICAgICAgICB0aGlzLmFmdGVySW1hZ2VMb2FkZWQoY2FudmFzLnRvRGF0YVVSTCgpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGltZy5zcmMgPSB0aGlzLktFRUZPWF9JQ09OXzE2O1xuICAgIH1cblxuICAgIHJlYWRvbmx5IEtFRUZPWF9JQ09OXzE2ID1cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG1heC1sZW5cbiAgICAgICAgXCJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJBQUFBQVFDQVlBQUFBZjgvOWhBQUFBQkhOQ1NWUUlDQWdJZkFoa2lBQUFBQWx3U0ZsekFBQUE3QUFBQU93QmVTaHh2UUFBQUJsMFJWaDBVMjltZEhkaGNtVUFkM2QzTG1sdWEzTmpZWEJsTG05eVo1dnVQQm9BQUFBT2RFVllkRlJwZEd4bEFFdGxaU0JzYjJkdk41OUI5QUFBQUJCMFJWaDBRWFYwYUc5eUFFdGxaU0JXWVhWc2RHWHd5NVVBQUFIOFNVUkJWRGlOaFpEZlMxTmhHTWMvejN2T0VIZWEwbGdYcmtpc3ZBcldUVVNsRjlYRklLai93YXVndFAraGV5L001dnBGTjBFZzRVVkIwV0FSU2dsQzBJWDJBd3d0emR5d3BwWXN6ODYyODc1ZHpMbURiZlRjdmQvbjgvMCtYMTZKWDc0U3hndDlBSHJZbVloVmZUYlo4OFo2L1NlV1ZFQy9zekYxYnJHdlZEVDJKUnF6VkxMVUNUbDI4WHJidHE4THdMNzZKdFUxYXhMaExUbS8yQS9BMUpGcDV0eE9NNVJQU0NCZ00yeXBMcldRU1hrSUQrdHFkOGpsakxNcGp2Z01SRmNZMlArTnNQSTU3V3hJZDhnTitIbXdrRWw1Tm9CVXVXVXNyZ0lxWm51N3hMWG9sNkNCbUYxbXVkSU9VRFUyYVFBRnNQb3EvUmtqR1lCNUw0S25GWHZIMDRwNXp3SEF3TlA4aS9UeWJnQUFZa1lCaXRwaWVMMFhQMkQyZ2VIMVhvcmFycUc2eGdJRVAwWGl5Y0gzd0hHQVUrMGIzRDQ0aDZzdGh2SUpadDNPT3ZZdWx4MDdXVGNGdXhvamplU2xTcTN1MTNLWVQ2VklBd293ZXdPd3R0b2VJUlNDMnN4MmxJcXBZNUtQZGh4NDNETGcrOHlJSzNBL3FKMTExZ21KcnRtTnZ2Tng0a2E1WlFDQTBwSUdLaG8wUUVUNUFBWW9WVVhmKzRmZks2eThITXNCRXlWdHVRQy9kUWdmTVJqRzE3SjNmL3czQUVBcmM3T283ZkQ0cjBPTUZJNmlqU2hSYXJRWks4MUVnSGh5Y0JybzIzbE81ckxwQzgyNHBnMEF4RWpqb3REME9vRGRhckZhaVQwNTNMYjJWaEIvdWVQbjgxYmNYK3hYdTdyZXNsOVJBQUFBQUVsRlRrU3VRbUNDXCI7XG59XG4iLCJpbXBvcnQgeyBGaWxsZWRGaWVsZCB9IGZyb20gXCIuL0ZpbGxlZEZpZWxkXCI7XG5pbXBvcnQgeyBFbnRyeSB9IGZyb20gXCIuLi9jb21tb24vbW9kZWwvRW50cnlcIjtcbmltcG9ydCB7IE1hdGNoZWRGaWVsZCB9IGZyb20gXCIuL01hdGNoZWRGaWVsZFwiO1xuXG5leHBvcnQgY2xhc3MgTWF0Y2hSZXN1bHQge1xuICAgIGVudHJpZXM6IEVudHJ5W11bXTtcbiAgICBzdWJtaXRUYXJnZXRzOiBIVE1MRWxlbWVudFtdO1xuICAgIHVzZXJuYW1lSW5kZXhBcnJheTogbnVtYmVyW107XG4gICAgcGFzc3dvcmRGaWVsZHNBcnJheTogTWF0Y2hlZEZpZWxkW11bXTtcbiAgICBvdGhlckZpZWxkc0FycmF5OiBNYXRjaGVkRmllbGRbXVtdO1xuICAgIGN1cnJlbnRQYWdlOiBudW1iZXI7XG4gICAgYWxsTWF0Y2hpbmdMb2dpbnM6IGFueVtdO1xuICAgIGZvcm1SZWxldmFuY2VTY29yZXM6IG51bWJlcltdO1xuICAgIFVVSUQ6IHN0cmluZztcbiAgICBtdXN0QXV0b0ZpbGxGb3JtOiBib29sZWFuO1xuICAgIGNhbm5vdEF1dG9GaWxsRm9ybTogYm9vbGVhbjtcbiAgICBtdXN0QXV0b1N1Ym1pdEZvcm06IGJvb2xlYW47XG4gICAgY2Fubm90QXV0b1N1Ym1pdEZvcm06IGJvb2xlYW47XG4gICAgZGJGaWxlTmFtZTogc3RyaW5nO1xuICAgIGRvYzogRG9jdW1lbnQ7XG4gICAgZm9ybXM6IEhUTUxGb3JtRWxlbWVudFtdO1xuICAgIGZvcm1SZWFkeUZvclN1Ym1pdDogYm9vbGVhbjtcbiAgICBhdXRvZmlsbE9uU3VjY2VzczogYm9vbGVhbjtcbiAgICBhdXRvc3VibWl0T25TdWNjZXNzOiBib29sZWFuO1xuICAgIG5vdGlmeVVzZXJPblN1Y2Nlc3M6IGJvb2xlYW47XG4gICAgd3JhcHBlcnM6IGFueVtdO1xuICAgIHJlcXVlc3RDb3VudDogbnVtYmVyO1xuICAgIHJlc3BvbnNlQ291bnQ6IG51bWJlcjtcbiAgICByZXF1ZXN0SWRzOiBhbnlbXTtcbiAgICBtb3N0UmVsZXZhbnRGb3JtSW5kZXg/OiBudW1iZXI7XG4gICAgbGFzdEZpbGxlZE90aGVyOiBGaWxsZWRGaWVsZFtdO1xuICAgIGxhc3RGaWxsZWRQYXNzd29yZHM6IEZpbGxlZEZpZWxkW107XG59XG4iLCJleHBvcnQgZW51bSBTZXNzaW9uVHlwZSB7XG4gICAgRXZlbnQgPSBcImV2ZW50XCIsXG4gICAgV2Vic29ja2V0ID0gXCJ3ZWJzb2NrZXRcIlxufVxuIiwiaW1wb3J0IHsgRW50cnkgfSBmcm9tIFwiLi9FbnRyeVwiO1xuaW1wb3J0IHsgSWNvbiB9IGZyb20gXCIuL0ljb25cIjtcbmltcG9ydCB7IHV0aWxzIH0gZnJvbSBcIi4uL3V0aWxzXCI7XG5pbXBvcnQgeyBFbnRyeVN1bW1hcnlEdG8gfSBmcm9tIFwiLi9LUFJQQ0RUT3NcIjtcblxuZXhwb3J0IGNsYXNzIEVudHJ5U3VtbWFyeSB7XG4gICAgaWNvbjogSWNvbjtcbiAgICB1c2VybmFtZVZhbHVlOiBzdHJpbmc7XG4gICAgdXNlcm5hbWVOYW1lOiBzdHJpbmc7XG4gICAgcGF0aDogc3RyaW5nO1xuICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgdVJMczogc3RyaW5nW107XG4gICAgdXJsOiBzdHJpbmc7XG4gICAgdXVpZDogc3RyaW5nO1xuICAgIGRiRmlsZU5hbWU6IHN0cmluZztcbiAgICByZWxldmFuY2VTY29yZTogbnVtYmVyO1xuICAgIGZ1bGxEZXRhaWxzPzogRW50cnk7IC8vVE9ETzo0OiByZW1vdmUgY2lyY3VsYXIgcmVmZXJlbmNlIGJ5IG1haW50YWluaW5nIGluZGVwZW5kZW50IEVudHJ5IGxvb2t1cCBieSB1dWlkP1xuICAgIGlzUHJlZmVycmVkTWF0Y2g/OiBib29sZWFuO1xuXG4gICAgY29uc3RydWN0b3IoZTogUGFydGlhbDxFbnRyeVN1bW1hcnk+KSB7XG4gICAgICAgIHRoaXMuaWNvbiA9IGUuaWNvbiB8fCB7IHZlcnNpb246IDEsIGljb25JbWFnZURhdGE6IFwiXCIgfTtcbiAgICAgICAgdGhpcy51c2VybmFtZVZhbHVlID0gZS51c2VybmFtZVZhbHVlIHx8IFwiPG5vIHVzZXJuYW1lPlwiO1xuICAgICAgICB0aGlzLnVzZXJuYW1lTmFtZSA9IGUudXNlcm5hbWVOYW1lIHx8IFwiPG5vIHVzZXJuYW1lPlwiO1xuICAgICAgICB0aGlzLnBhdGggPSBlLnBhdGggfHwgXCJVTktOT1dOIFBBVEhcIjtcbiAgICAgICAgdGhpcy50aXRsZSA9IGUudGl0bGUgfHwgXCJcIjtcbiAgICAgICAgdGhpcy51UkxzID0gZS51UkxzIHx8IFtdO1xuICAgICAgICB0aGlzLnVybCA9IGU/LnVybCB8fCBcIlwiO1xuICAgICAgICB0aGlzLnV1aWQgPSBlLnV1aWQgfHwgdXRpbHMubmV3R1VJRCgpO1xuICAgICAgICB0aGlzLmRiRmlsZU5hbWUgPSBlLmRiRmlsZU5hbWUgfHwgXCJcIjtcbiAgICAgICAgdGhpcy5yZWxldmFuY2VTY29yZSA9IGUucmVsZXZhbmNlU2NvcmU7XG4gICAgICAgIHRoaXMuZnVsbERldGFpbHMgPSBlLmZ1bGxEZXRhaWxzO1xuICAgICAgICB0aGlzLmlzUHJlZmVycmVkTWF0Y2ggPSBlLmlzUHJlZmVycmVkTWF0Y2g7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBmcm9tRW50cnkoZW50cnk6IEVudHJ5KSB7XG4gICAgICAgIHJldHVybiBuZXcgRW50cnlTdW1tYXJ5KHtcbiAgICAgICAgICAgIGljb246IGVudHJ5Lmljb24sXG4gICAgICAgICAgICB1c2VybmFtZVZhbHVlOiBFbnRyeS5nZXRVc2VybmFtZUZpZWxkKGVudHJ5KT8udmFsdWUsXG4gICAgICAgICAgICB1c2VybmFtZU5hbWU6IEVudHJ5LmdldFVzZXJuYW1lRmllbGQoZW50cnkpPy5uYW1lLFxuICAgICAgICAgICAgdGl0bGU6IGVudHJ5LnRpdGxlLFxuICAgICAgICAgICAgdVJMczogZW50cnkuVVJMcyxcbiAgICAgICAgICAgIHVybDogZW50cnk/LlVSTHNbMF0sXG4gICAgICAgICAgICB1dWlkOiBlbnRyeS51dWlkLFxuICAgICAgICAgICAgZGJGaWxlTmFtZTogZW50cnkuZGF0YWJhc2UuZmlsZU5hbWUsXG4gICAgICAgICAgICBmdWxsRGV0YWlsczogZW50cnksXG4gICAgICAgICAgICBpc1ByZWZlcnJlZE1hdGNoOiBlbnRyeS5pc1ByZWZlcnJlZE1hdGNoXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZnJvbUtQUlBDRW50cnlTdW1tYXJ5RFRPKFxuICAgICAgICBlbnRyeVN1bW1hcnlEdG86IEVudHJ5U3VtbWFyeUR0byxcbiAgICAgICAgcGF0aDogc3RyaW5nLFxuICAgICAgICBkYkZpbGVOYW1lOiBzdHJpbmdcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIG5ldyBFbnRyeVN1bW1hcnkoe1xuICAgICAgICAgICAgaWNvbjogeyB2ZXJzaW9uOiAxLCBpY29uSW1hZ2VEYXRhOiBlbnRyeVN1bW1hcnlEdG8uaWNvbkltYWdlRGF0YSB9LFxuICAgICAgICAgICAgdXNlcm5hbWVWYWx1ZTogZW50cnlTdW1tYXJ5RHRvLnVzZXJuYW1lVmFsdWUsXG4gICAgICAgICAgICB1c2VybmFtZU5hbWU6IGVudHJ5U3VtbWFyeUR0by51c2VybmFtZU5hbWUsXG4gICAgICAgICAgICBwYXRoLFxuICAgICAgICAgICAgdGl0bGU6IGVudHJ5U3VtbWFyeUR0by50aXRsZSxcbiAgICAgICAgICAgIHVSTHM6IGVudHJ5U3VtbWFyeUR0by51UkxzLFxuICAgICAgICAgICAgdXJsOiBlbnRyeVN1bW1hcnlEdG8/LnVSTHNbMF0sXG4gICAgICAgICAgICB1dWlkOiBlbnRyeVN1bW1hcnlEdG8udW5pcXVlSUQsXG4gICAgICAgICAgICBkYkZpbGVOYW1lXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IEVudHJ5U3VtbWFyeSB9IGZyb20gXCIuL0VudHJ5U3VtbWFyeVwiO1xuaW1wb3J0IHsgSWNvbiB9IGZyb20gXCIuL0ljb25cIjtcbmltcG9ydCB7IHV0aWxzIH0gZnJvbSBcIi4uL3V0aWxzXCI7XG5pbXBvcnQgeyBHcm91cER0byB9IGZyb20gXCIuL0tQUlBDRFRPc1wiO1xuXG5leHBvcnQgY2xhc3MgR3JvdXAge1xuICAgIHJlYWRvbmx5IHRpdGxlOiBzdHJpbmc7XG4gICAgcmVhZG9ubHkgdXVpZDogc3RyaW5nO1xuICAgIHJlYWRvbmx5IGljb246IEljb247XG4gICAgcmVhZG9ubHkgcGF0aDogc3RyaW5nO1xuICAgIHJlYWRvbmx5IGVudHJ5U3VtbWFyaWVzOiBFbnRyeVN1bW1hcnlbXTtcbiAgICByZWFkb25seSBncm91cHM6IEdyb3VwW107XG4gICAgLy9jaGlsZEVudHJpZXM6IEVudHJ5W10gLSB0aGlzIGlzIG9ubHkgbmVlZGVkIGlmIHdlIGV2ZXIgcmVxdWVzdCBHZXRBbGxEYXRhYmFzZXModHJ1ZSkgYnV0IEtlZSBjdXJyZW50bHkgaGFzIG5vIG5lZWQgZm9yIHRoaXMgS1BSUEMgZmVhdHVyZVxuXG4gICAgY29uc3RydWN0b3IoZzogUGFydGlhbDxHcm91cD4pIHtcbiAgICAgICAgdGhpcy50aXRsZSA9IGcudGl0bGUgfHwgXCJcIjtcbiAgICAgICAgdGhpcy51dWlkID0gZy51dWlkIHx8IHV0aWxzLm5ld0dVSUQoKTtcbiAgICAgICAgdGhpcy5pY29uID0gZy5pY29uIHx8IHsgdmVyc2lvbjogMSwgaWNvbkltYWdlRGF0YTogXCJcIiB9O1xuICAgICAgICB0aGlzLnBhdGggPSBnLnBhdGggfHwgXCJVTktOT1dOIFBBVEhcIjtcbiAgICAgICAgdGhpcy5lbnRyeVN1bW1hcmllcyA9IGcuZW50cnlTdW1tYXJpZXMgfHwgW107XG4gICAgICAgIHRoaXMuZ3JvdXBzID0gZy5ncm91cHMgfHwgW107XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBmcm9tS1BSUENHcm91cERUTyhncm91cER0bzogR3JvdXBEdG8sIGRiRmlsZU5hbWU6IHN0cmluZykge1xuICAgICAgICByZXR1cm4gbmV3IEdyb3VwKHtcbiAgICAgICAgICAgIHRpdGxlOiBncm91cER0by50aXRsZSxcbiAgICAgICAgICAgIHV1aWQ6IGdyb3VwRHRvLnVuaXF1ZUlELFxuICAgICAgICAgICAgaWNvbjogeyB2ZXJzaW9uOiAxLCBpY29uSW1hZ2VEYXRhOiBncm91cER0by5pY29uSW1hZ2VEYXRhIH0sXG4gICAgICAgICAgICBwYXRoOiBncm91cER0by5wYXRoLFxuICAgICAgICAgICAgZW50cnlTdW1tYXJpZXM6IGdyb3VwRHRvLmNoaWxkTGlnaHRFbnRyaWVzLm1hcChjaGlsZExpZ2h0RW50cnkgPT5cbiAgICAgICAgICAgICAgICBFbnRyeVN1bW1hcnkuZnJvbUtQUlBDRW50cnlTdW1tYXJ5RFRPKGNoaWxkTGlnaHRFbnRyeSwgZ3JvdXBEdG8ucGF0aCwgZGJGaWxlTmFtZSlcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBncm91cHM6IGdyb3VwRHRvLmNoaWxkR3JvdXBzLm1hcChjaGlsZEdyb3VwID0+XG4gICAgICAgICAgICAgICAgdGhpcy5mcm9tS1BSUENHcm91cERUTyhjaGlsZEdyb3VwLCBkYkZpbGVOYW1lKVxuICAgICAgICAgICAgKVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGNvbnRhaW5zSWQoZ3JvdXA6IEdyb3VwLCBpZDogc3RyaW5nKSB7XG4gICAgICAgIGlmIChncm91cC51dWlkID09PSBpZCkgcmV0dXJuIHRydWU7XG4gICAgICAgIGlmIChncm91cC5ncm91cHMgJiYgZ3JvdXAuZ3JvdXBzLnNvbWUoZyA9PiBHcm91cC5jb250YWluc0lkKGcsIGlkKSkpIHJldHVybiB0cnVlO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgU2Vzc2lvblR5cGUgfSBmcm9tIFwiLi9TZXNzaW9uVHlwZVwiO1xuaW1wb3J0IHsgRGF0YWJhc2VEdG8gfSBmcm9tIFwiLi9LUFJQQ0RUT3NcIjtcbmltcG9ydCB7IEljb24gfSBmcm9tIFwiLi9JY29uXCI7XG5pbXBvcnQgeyBHcm91cCB9IGZyb20gXCIuL0dyb3VwXCI7XG5cbmV4cG9ydCBjbGFzcyBEYXRhYmFzZSB7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIGZpbGVOYW1lOiBzdHJpbmc7XG4gICAgaWNvbjogSWNvbjtcbiAgICByb290OiBHcm91cDtcbiAgICBhY3RpdmU6IGJvb2xlYW47XG4gICAgc2Vzc2lvblR5cGU6IFNlc3Npb25UeXBlO1xuICAgIHNlc3Npb25GZWF0dXJlczogc3RyaW5nW107XG5cbiAgICBjb25zdHJ1Y3RvcihkYjogUGFydGlhbDxEYXRhYmFzZT4pIHtcbiAgICAgICAgdGhpcy5uYW1lID0gZGIubmFtZSB8fCBcIlwiO1xuICAgICAgICB0aGlzLmZpbGVOYW1lID0gZGIuZmlsZU5hbWUgfHwgXCJcIjtcbiAgICAgICAgdGhpcy5pY29uID0gZGIuaWNvbiB8fCB7IHZlcnNpb246IDEsIGljb25JbWFnZURhdGE6IFwiXCIgfTtcbiAgICAgICAgdGhpcy5yb290ID0gZGIucm9vdCB8fCBuZXcgR3JvdXAoe30pO1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IGRiLmFjdGl2ZSB8fCBmYWxzZTtcbiAgICAgICAgdGhpcy5zZXNzaW9uVHlwZSA9IGRiLnNlc3Npb25UeXBlIHx8IFNlc3Npb25UeXBlLkV2ZW50O1xuICAgICAgICB0aGlzLnNlc3Npb25GZWF0dXJlcyA9IGRiLnNlc3Npb25GZWF0dXJlcyB8fCBbXCJcIl07XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBmcm9tS1BSUENEYXRhYmFzZURUTyhcbiAgICAgICAgZHRvOiBEYXRhYmFzZUR0byxcbiAgICAgICAgc2Vzc2lvblR5cGU6IFNlc3Npb25UeXBlLFxuICAgICAgICBzZXNzaW9uRmVhdHVyZXM6IHN0cmluZ1tdXG4gICAgKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0YWJhc2Uoe1xuICAgICAgICAgICAgbmFtZTogZHRvLm5hbWUsXG4gICAgICAgICAgICBmaWxlTmFtZTogZHRvLmZpbGVOYW1lLFxuICAgICAgICAgICAgaWNvbjogeyB2ZXJzaW9uOiAxLCBpY29uSW1hZ2VEYXRhOiBkdG8uaWNvbkltYWdlRGF0YSB9LFxuICAgICAgICAgICAgcm9vdDogR3JvdXAuZnJvbUtQUlBDR3JvdXBEVE8oZHRvLnJvb3QsIGR0by5maWxlTmFtZSksXG4gICAgICAgICAgICBhY3RpdmU6IGR0by5hY3RpdmUsXG4gICAgICAgICAgICBzZXNzaW9uVHlwZSxcbiAgICAgICAgICAgIHNlc3Npb25GZWF0dXJlc1xuICAgICAgICB9KTtcbiAgICB9XG59XG4iLCJleHBvcnQgZnVuY3Rpb24gJChzZWxlY3RvcjogYW55LCBlbD86IERvY3VtZW50KSB7XG4gICAgaWYgKCFlbCkgZWwgPSBkb2N1bWVudDtcbiAgICByZXR1cm4gZWwucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG59XG5leHBvcnQgZnVuY3Rpb24gJCQoc2VsZWN0b3I6IGFueSwgZWw/OiBEb2N1bWVudCkge1xuICAgIGlmICghZWwpIGVsID0gZG9jdW1lbnQ7XG4gICAgcmV0dXJuIGVsLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xufVxuZXhwb3J0IGZ1bmN0aW9uICRTVFIoc3RyOiBzdHJpbmcpIHtcbiAgICBjb25zdCBtc2cgPSBicm93c2VyLmkxOG4uZ2V0TWVzc2FnZShzdHIpO1xuICAgIHJldHVybiBtc2cgfHwgc3RyO1xufVxuZXhwb3J0IGZ1bmN0aW9uICRTVFJGKHN0cjogc3RyaW5nLCBzdWJzOiBhbnkpIHtcbiAgICBjb25zdCBtc2cgPSBicm93c2VyLmkxOG4uZ2V0TWVzc2FnZShzdHIsIHN1YnMpO1xuICAgIHJldHVybiBtc2cgfHwgc3RyO1xufVxuIiwiZXhwb3J0IGNsYXNzIExvY2F0b3Ige1xuICAgIC8vIEhUTUwgaWQgYXR0cmlidXRlXG4gICAgaWQ6IHN0cmluZztcblxuICAgIC8vIEhUTUwgbmFtZSBhdHRyaWJ1dGVcbiAgICBuYW1lOiBzdHJpbmc7XG5cbiAgICAvLyBIVE1MIGlucHV0IHR5cGVcbiAgICB0eXBlOiBzdHJpbmc7XG5cbiAgICAvLyBIVE1MIERPTSBzZWxlY3QgcXVlcnlcbiAgICBxdWVyeT86IHN0cmluZztcblxuICAgIC8vIFZpc2libGUgYW5kIGFjY2Vzc2liaWxpdHkgbGFiZWxzXG4gICAgbGFiZWxzPzogc3RyaW5nW107XG5cbiAgICAvLyBBbnkgYXV0b2NvbXBsZXRlIHZhbHVlcyB3ZSBmb3VuZCwgb3IgcmVxdWlyZSwgaW4gdGhlIERPTVxuICAgIGF1dG9jb21wbGV0ZVZhbHVlcz86IHN0cmluZ1tdO1xuXG4gICAgY29uc3RydWN0b3IobG9jYXRvcjogUGFydGlhbDxMb2NhdG9yPikge1xuICAgICAgICB0aGlzLmlkID0gbG9jYXRvci5pZCB8fCBcIlwiO1xuICAgICAgICB0aGlzLm5hbWUgPSBsb2NhdG9yLm5hbWUgfHwgXCJcIjtcbiAgICAgICAgdGhpcy50eXBlID0gbG9jYXRvci50eXBlIHx8IFwiXCI7XG4gICAgICAgIHRoaXMucXVlcnkgPSBsb2NhdG9yLnF1ZXJ5O1xuICAgICAgICB0aGlzLmxhYmVscyA9IGxvY2F0b3IubGFiZWxzO1xuICAgICAgICB0aGlzLmF1dG9jb21wbGV0ZVZhbHVlcyA9IGxvY2F0b3IuYXV0b2NvbXBsZXRlVmFsdWVzO1xuICAgIH1cblxuICAgIC8vVE9ETzo0OiBUaGluZ3MgbGlrZSBNYXhMZW5ndGggdGhhdCBjYW4gYmUgdXNlZCB0byBib3RoIGhlbHAgaWRlbnRpZnkgdGhlIGZpZWxkIGFuZCBnZW5lcmF0ZSBuZXcgdmFsdWVzL3Bhc3N3b3Jkc1xufVxuIiwiaW1wb3J0IHsgU2Vzc2lvblR5cGUgfSBmcm9tIFwiLi9TZXNzaW9uVHlwZVwiO1xuXG5leHBvcnQgY2xhc3MgUGFzc3dvcmRQcm9maWxlRHRvIHtcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgc2Vzc2lvblR5cGU6IFNlc3Npb25UeXBlO1xufVxuXG5leHBvcnQgY2xhc3MgRGF0YWJhc2VEdG8ge1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBmaWxlTmFtZT86IHN0cmluZztcbiAgICBpY29uSW1hZ2VEYXRhOiBzdHJpbmc7XG4gICAgcm9vdDogR3JvdXBEdG87XG4gICAgYWN0aXZlPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNsYXNzIERhdGFiYXNlU3VtbWFyeUR0byB7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIGZpbGVOYW1lPzogc3RyaW5nO1xuICAgIGljb25JbWFnZURhdGE6IHN0cmluZztcbiAgICByb290OiBHcm91cFN1bW1hcnlEdG87XG4gICAgYWN0aXZlPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNsYXNzIEdyb3VwU3VtbWFyeUR0byB7XG4gICAgdGl0bGU6IHN0cmluZztcbiAgICB1bmlxdWVJRDogc3RyaW5nO1xuICAgIGljb25JbWFnZURhdGE6IHN0cmluZztcbiAgICBwYXRoOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBHcm91cER0byB7XG4gICAgdGl0bGU6IHN0cmluZztcbiAgICB1bmlxdWVJRDogc3RyaW5nO1xuICAgIGljb25JbWFnZURhdGE6IHN0cmluZztcbiAgICBwYXRoOiBzdHJpbmc7XG4gICAgY2hpbGRMaWdodEVudHJpZXM6IEVudHJ5U3VtbWFyeUR0b1tdO1xuICAgIGNoaWxkR3JvdXBzOiBHcm91cER0b1tdO1xuICAgIC8vY2hpbGRFbnRyaWVzOiBFbnRyeUR0b1tdIC0gdGhpcyBpcyBvbmx5IG5lZWRlZCBpZiB3ZSBldmVyIHJlcXVlc3QgR2V0QWxsRGF0YWJhc2VzKHRydWUpIGJ1dCBLZWUgY3VycmVudGx5IGhhcyBubyBuZWVkIGZvciB0aGlzIEtQUlBDIGZlYXR1cmVcbn1cblxuZXhwb3J0IGVudW0gUGxhY2Vob2xkZXJIYW5kbGluZyB7XG4gICAgRGVmYXVsdCA9IFwiRGVmYXVsdFwiLFxuICAgIEVuYWJsZWQgPSBcIkVuYWJsZWRcIixcbiAgICBEaXNhYmxlZCA9IFwiRGlzYWJsZWRcIlxufVxuXG5leHBvcnQgZW51bSBNYXRjaEFjY3VyYWN5RW51bSB7XG4gICAgLy8gQmVzdCA9IE5vbi1VUkwgbWF0Y2ggKGkuZS4gd2UgbWF0Y2hlZCBieSBVVUlEIGluc3RlYWQpXG4gICAgLy8gQmVzdCA9IFJlZ2V4IG1hdGNoIChpdCBpcyBpbXBvc3NpYmxlIGZvciB1cyB0byBpbmZlciBob3dcbiAgICAvLyBhY2N1cmF0ZSBhIHJlZ2V4IG1hdGNoIGlzIGluIGNvbXBhcmlzb24gd2l0aCBvdGhlciBjbGFzc2VzXG4gICAgLy8gb2YgbWF0Y2ggc28gd2UgYWx3YXlzIHRyZWF0IGl0IGFzIHRoZSBiZXN0IHBvc3NpYmxlIG1hdGNoXG4gICAgLy8gZXZlbiBpZiB0aGUgcmVnZXggaXRzZWxmIGlzIHZlcnkgbG9vc2UpXG4gICAgLy8gQmVzdCA9IFNhbWUgVVJMIGluY2x1ZGluZyBxdWVyeSBzdHJpbmdcblxuICAgIC8vIENsb3NlID0gU2FtZSBVUkwgZXhjbHVkaW5nIHF1ZXJ5IHN0cmluZ1xuXG4gICAgLy8gSG9zdG5hbWVBbmRQb3J0ID0gU2FtZSBob3N0bmFtZSBhbmQgcG9ydFxuXG4gICAgLy8gSG9zdG5hbWUgPSBTYW1lIGhvc3RuYW1lIChkb21haW4gKyBzdWJkb21haW5zKVxuXG4gICAgLy8gRG9tYWluID0gU2FtZSBkb21haW5cblxuICAgIC8vIE5vbmUgPSBObyBtYXRjaCAoZS5nLiB3aGVuIHdlIGFyZSBiZWluZyBhc2tlZCB0byByZXR1cm4gYWxsIGVudHJpZXMpXG5cbiAgICBCZXN0ID0gNTAsXG4gICAgQ2xvc2UgPSA0MCxcbiAgICBIb3N0bmFtZUFuZFBvcnQgPSAzMCxcbiAgICBIb3N0bmFtZSA9IDIwLFxuICAgIERvbWFpbiA9IDEwLFxuICAgIE5vbmUgPSAwXG59XG5cbmV4cG9ydCBjbGFzcyBFbnRyeUR0byB7XG4gICAgZGI6IERhdGFiYXNlRHRvO1xuICAgIHBhcmVudDogR3JvdXBTdW1tYXJ5RHRvO1xuICAgIGljb25JbWFnZURhdGE6IHN0cmluZztcbiAgICBhbHdheXNBdXRvRmlsbDogYm9vbGVhbjtcbiAgICBhbHdheXNBdXRvU3VibWl0OiBib29sZWFuO1xuICAgIG5ldmVyQXV0b0ZpbGw6IGJvb2xlYW47XG4gICAgbmV2ZXJBdXRvU3VibWl0OiBib29sZWFuO1xuICAgIHByaW9yaXR5OiBudW1iZXI7XG4gICAgdVJMczogc3RyaW5nW107XG4gICAgbWF0Y2hBY2N1cmFjeTogbnVtYmVyO1xuICAgIGhUVFBSZWFsbTogc3RyaW5nO1xuICAgIHVuaXF1ZUlEOiBzdHJpbmc7XG4gICAgdGl0bGU6IHN0cmluZztcbiAgICBmb3JtRmllbGRMaXN0OiBGaWVsZER0b1tdO1xufVxuXG5leHBvcnQgY2xhc3MgRW50cnlTdW1tYXJ5RHRvIHtcbiAgICBpY29uSW1hZ2VEYXRhOiBzdHJpbmc7XG4gICAgdVJMczogc3RyaW5nW107XG4gICAgdW5pcXVlSUQ6IHN0cmluZztcbiAgICB0aXRsZTogc3RyaW5nO1xuICAgIHVzZXJuYW1lVmFsdWU6IHN0cmluZztcbiAgICB1c2VybmFtZU5hbWU6IHN0cmluZztcbn1cblxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOmNsYXNzLW5hbWVcbmV4cG9ydCBjbGFzcyBGaWVsZER0byB7XG4gICAgZGlzcGxheU5hbWU6IHN0cmluZztcblxuICAgIC8vIFwibmFtZVwiIGF0dHJpYnV0ZSBvbiB0aGUgSFRNTCBmb3JtIGVsZW1lbnRcbiAgICBuYW1lOiBzdHJpbmc7XG5cbiAgICAvLyBcInZhbHVlXCIgYXR0cmlidXRlIG9uIHRoZSBIVE1MIGZvcm0gZWxlbWVudFxuICAgIHZhbHVlOiBzdHJpbmc7XG5cbiAgICAvLyBcImlkXCIgYXR0cmlidXRlIG9uIHRoZSBIVE1MIGZvcm0gZWxlbWVudFxuICAgIGlkOiBzdHJpbmc7XG5cbiAgICAvLyBcInR5cGVcIiBhdHRyaWJ1dGUgb24gdGhlIEhUTUwgZm9ybSBlbGVtZW50XG4gICAgdHlwZTogRm9ybUZpZWxkVHlwZURUTztcblxuICAgIHBhZ2U6IG51bWJlcjtcbn1cblxuZXhwb3J0IGVudW0gRm9ybUZpZWxkVHlwZURUTyB7XG4gICAgcmFkaW8gPSBcIkZGVHJhZGlvXCIsXG4gICAgdXNlcm5hbWUgPSBcIkZGVHVzZXJuYW1lXCIsXG4gICAgdGV4dCA9IFwiRkZUdGV4dFwiLFxuICAgIHBhc3N3b3JkID0gXCJGRlRwYXNzd29yZFwiLFxuICAgIHNlbGVjdCA9IFwiRkZUc2VsZWN0XCIsXG4gICAgY2hlY2tib3ggPSBcIkZGVGNoZWNrYm94XCJcbn1cbiIsImltcG9ydCB7IHV0aWxzIH0gZnJvbSBcIi4uL3V0aWxzXCI7XG5pbXBvcnQgeyBMb2NhdG9yIH0gZnJvbSBcIi4vTG9jYXRvclwiO1xuaW1wb3J0IHsgRmllbGREdG8sIEZvcm1GaWVsZFR5cGVEVE8gfSBmcm9tIFwiLi9LUFJQQ0RUT3NcIjtcblxuZXhwb3J0IHR5cGUgRmllbGRUeXBlID0gXCJwYXNzd29yZFwiIHwgXCJ0ZXh0XCIgfCBcImV4aXN0aW5nXCIgfCBcImJvb2xlYW5cIiB8IFwib3RwXCIgfCBcInNvbWUtY2hhcnNcIjtcblxuZXhwb3J0IGNsYXNzIEZpZWxkIHtcbiAgICAvLyBVbmlxdWUgSUQgdGhhdCB3ZSBjYW4gdXNlIHRvIGhlbHAgVUkgb3BlcmF0aW9ucyBhbmQgaWRlbnRpZmljYXRpb24gd2hlbiB0aGVyZSBpcyBubyBrbm93biBuYW1lIGZvciB0aGlzIGZpZWxkLlxuICAgIC8vIEFsc28gbWF5IGJlIHVzZWZ1bCBpbiBmdXR1cmUgZm9yIG11bHRpcGxlLXBhZ2UgcmVjb25maWd1cmF0aW9uIG9yIHBlci1icm93c2VyIGZpZWxkIGNvbmZpZ3VyYXRpb24gb3ZlcnJpZGVzP1xuICAgIHJlYWRvbmx5IHV1aWQ6IHN0cmluZztcblxuICAgIC8vIHZpc3VhbCBpZGVudGlmaWVyIGZvciB0aGUgZmllbGQuIE1heSBiZSBzcGVjaWZpZWQgYnkgdGhlIHVzZXIgb3IgaW5mZXJyZWQgZnJvbVxuICAgIC8vIGVpdGhlciBkZWZhdWx0IEVudHJ5IGRhdGEgKHVzZXJuYW1lL3Bhc3N3b3JkL09UUCkgb3IgZm9ybSBmaWVsZCBsYWJlbCBvciBuYW1lIGF0dHJpYnV0ZVxuICAgIHJlYWRvbmx5IG5hbWU6IHN0cmluZztcblxuICAgIC8vIFRoZSB2YWx1ZSB3ZSdsbCBmaWxsIGludG8gdGhlIGZvcm0uXG4gICAgLy8gRm9yIGV4aXN0aW5nIGRldGVybWluZXMgd2hpY2ggb3B0aW9uIHRvIGFjdGl2YXRlLlxuICAgIC8vIEZvciBib29sZWFuIGRldGVybWluZXMgd2hldGhlciB0byBhY3RpdmF0ZSBvciBkZWFjdGl2YXRlICh0byBpZ25vcmUsIGRlbGV0ZSB0aGUgZmllbGQgcmVjb3JkKVxuICAgIC8vIEZvciBPVFAsIG5lZWQgdG8gd29yayBvdXQgd2hldGhlciB3ZSB3aWxsIGhhdmUgdG8gdHJhbnNmZXIgdGhlIHNlY3JldHMgYW5kIHJlY2FsY3VsYXRlIGluIHRoZSBicm93c2VyIG9yIGp1c3QgdHJlYXQgYXMgc3RhbmRhcmQgdmFsdWVcbiAgICByZWFkb25seSB2YWx1ZTogc3RyaW5nO1xuXG4gICAgLy8gdHlwZSBvZiBkYXRhIHRoaXMgZmllbGQgcmVwcmVzZW50cy4gVGhlcmUncyBubyAxMDAlIHdheSB0byBtYXRjaCB0aGlzIHRvIHRoZSB0eXBlIG9mIEhUTUwgZm9ybSBlbGVtZW50IGJ1dCBpdCdzIG9mdGVuIGxvZ2ljYWwuXG4gICAgLy8gRS5nLiBwYXNzd29yZCBnb2VzIGludG8gcGFzc3dvcmQgZmllbGRzIHVubGVzcyB1c2VyIGV4cGxpY2l0bHkgcmUtY29uZmlndXJlcyB0aGF0OyBleGlzdGluZyB3b3VsZCB0eXBpY2FsbHkgbWF0Y2ggc29tZXRoaW5nXG4gICAgLy8gbGlrZSBhIHJhZGlvIGJ1dHRvbiBvciBzZWxlY3Qgb3B0aW9uIGFscmVhZHkgcHJlc2VudCBvbiB0aGUgSFRNTCBmb3JtOyBib29sZWFuIHdvdWxkIG1hdGNoIGEgY2hlY2tib3guXG4gICAgcmVhZG9ubHkgdHlwZTogRmllbGRUeXBlO1xuXG4gICAgLy8gSG93IHdlIGNhbiBmaW5kIHRoZSBjb3JyZWN0IHRhcmdldCBpbiB0aGUgSFRNTC5cbiAgICByZWFkb25seSBsb2NhdG9yczogTG9jYXRvcltdO1xuXG4gICAgLy8gdHJhY2tzIHRoZSBtb3N0IHJlY2VudCB2YWx1ZSB3ZSB3YW50IHRvIHJlc2V0IHRvIGluIGNhc2VzIHdoZXJlIHRoZSB1c2VyIGhhcyB0aGF0IHBvc3NpYmlsaXR5XG4gICAgcmVhZG9ubHkgcmVzZXRWYWx1ZTogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IoZmllbGQ6IFBhcnRpYWw8RmllbGQ+KSB7XG4gICAgICAgIHRoaXMubmFtZSA9IGZpZWxkLm5hbWUgfHwgXCJcIjtcbiAgICAgICAgdGhpcy52YWx1ZSA9IGZpZWxkLnZhbHVlIHx8IFwiXCI7XG4gICAgICAgIHRoaXMucmVzZXRWYWx1ZSA9IGZpZWxkLnJlc2V0VmFsdWUgfHwgXCJcIjtcbiAgICAgICAgdGhpcy51dWlkID0gZmllbGQudXVpZCB8fCB1dGlscy5uZXdHVUlEKCk7XG4gICAgICAgIHRoaXMudHlwZSA9IGZpZWxkLnR5cGUgfHwgXCJ0ZXh0XCI7XG4gICAgICAgIHRoaXMubG9jYXRvcnMgPSBmaWVsZC5sb2NhdG9ycyB8fCBbXTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHN0YXRpYyBnZXREaXNwbGF5VmFsdWVJbnRlcm5hbChcbiAgICAgICAgZmllbGQ6IEZpZWxkLFxuICAgICAgICByZXZlYWxQYXNzd29yZHM6IGJvb2xlYW4sXG4gICAgICAgIHJlcGxhY2VtZW50SWZQcm90ZWN0ZWQ6IHN0cmluZ1xuICAgICkge1xuICAgICAgICBpZiAoZmllbGQudHlwZSA9PT0gXCJib29sZWFuXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBmaWVsZC52YWx1ZSA9PT0gXCJLRUVGT1hfQ0hFQ0tFRF9GTEFHX1RSVUVcIiA/ICRTVFIoXCJlbmFibGVkXCIpIDogJFNUUihcImRpc2FibGVkXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZpZWxkLnR5cGUgPT09IFwicGFzc3dvcmRcIiAmJiAhcmV2ZWFsUGFzc3dvcmRzXG4gICAgICAgICAgICAgICAgPyByZXBsYWNlbWVudElmUHJvdGVjdGVkXG4gICAgICAgICAgICAgICAgOiBmaWVsZC52YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyBnZXREaXNwbGF5VmFsdWUoZmllbGQ6IEZpZWxkLCByZXZlYWxQYXNzd29yZHM6IGJvb2xlYW4pIHtcbiAgICAgICAgcmV0dXJuIEZpZWxkLmdldERpc3BsYXlWYWx1ZUludGVybmFsKFxuICAgICAgICAgICAgZmllbGQsXG4gICAgICAgICAgICByZXZlYWxQYXNzd29yZHMsXG4gICAgICAgICAgICBcIipcIi5yZXBlYXQoZmllbGQudmFsdWUubGVuZ3RoKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXREaXNwbGF5TmFtZShmaWVsZDogRmllbGQpIHtcbiAgICAgICAgaWYgKGZpZWxkLm5hbWUgPT09IFwiS2VlUGFzcyB1c2VybmFtZVwiKSB7XG4gICAgICAgICAgICByZXR1cm4gJFNUUihcInVzZXJuYW1lXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKGZpZWxkLm5hbWUgPT09IFwiS2VlUGFzcyBwYXNzd29yZFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gJFNUUihcInBhc3N3b3JkXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZpZWxkLm5hbWUgPyBmaWVsZC5uYW1lIDogXCJbIFwiICsgJFNUUihcIm5vX25hbWVcIikgKyBcIiBdXCI7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0RGlzcGxheVRvb2x0aXAoZmllbGQ6IEZpZWxkLCByZXZlYWxQYXNzd29yZHM6IGJvb2xlYW4pIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIEZpZWxkLmdldERpc3BsYXlOYW1lKGZpZWxkKSArXG4gICAgICAgICAgICBcIjogXCIgK1xuICAgICAgICAgICAgRmllbGQuZ2V0RGlzcGxheVZhbHVlSW50ZXJuYWwoZmllbGQsIHJldmVhbFBhc3N3b3JkcywgJFNUUihcImNsaWNrX3RvX3JldmVhbF9oaWRlXCIpKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHN0YXRpYyB0eXBlRnJvbURPTXR5cGUoZG9tVHlwZTogc3RyaW5nKTogRmllbGRUeXBlIHtcbiAgICAgICAgLy8gV2UgY2FuJ3Qga25vdyBldmVyeSB0eXBlIHRoYXQgbWF5IGV4aXN0IGluIGZ1dHVyZSBzbyBhc3N1bWU6XG4gICAgICAgIC8vIDEuIHVua25vd24gdHlwZXMgbXVzdCBiZSB0ZXh0XG4gICAgICAgIC8vIDIuIHdlIHdvbid0IGJlIGFza2VkIHRvIGhhbmRsZSB0eXBlcyBmb3IgaXJyZWxldmFudCBlbGVtZW50cyBzdWNoIGFzIGJ1dHRvbnNcbiAgICAgICAgc3dpdGNoIChkb21UeXBlKSB7XG4gICAgICAgICAgICBjYXNlIFwicGFzc3dvcmRcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJwYXNzd29yZFwiO1xuICAgICAgICAgICAgY2FzZSBcInJhZGlvXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiZXhpc3RpbmdcIjtcbiAgICAgICAgICAgIGNhc2UgXCJjaGVja2JveFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcImJvb2xlYW5cIjtcbiAgICAgICAgICAgIGNhc2UgXCJzZWxlY3Qtb25lXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiZXhpc3RpbmdcIjtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwidGV4dFwiO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gQnkgY29udmVudGlvbiB0aGUgZmlyc3Qgbm9uLXBhc3N3b3JkIGl0ZW0gd2lsbCBiZSB0aGUgdXNlcm5hbWUgYW5kIHRoZSBwYXNzd29yZCB3aWxsIGJlIGVpdGhlciAxc3Qgb3IgMm5kIGluIHRoZSBsaXN0XG4gICAgc3RhdGljIGNvbWJpbmVEb21GaWVsZExpc3RzKHVzZXJuYW1lSW5kZXg6IG51bWJlciwgb3RoZXJGaWVsZHM6IEZpZWxkW10sIHBhc3N3b3JkczogRmllbGRbXSkge1xuICAgICAgICBjb25zdCBmaWVsZHM6IEZpZWxkW10gPSBbXTtcbiAgICAgICAgaWYgKHVzZXJuYW1lSW5kZXggPj0gMCAmJiBvdGhlckZpZWxkc1t1c2VybmFtZUluZGV4XSkge1xuICAgICAgICAgICAgZmllbGRzLnB1c2gob3RoZXJGaWVsZHNbdXNlcm5hbWVJbmRleF0pO1xuICAgICAgICB9XG4gICAgICAgIHBhc3N3b3Jkcy5mb3JFYWNoKGYgPT4ge1xuICAgICAgICAgICAgZmllbGRzLnB1c2goZik7XG4gICAgICAgIH0pO1xuICAgICAgICBvdGhlckZpZWxkcy5mb3JFYWNoKChmLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgaWYgKGluZGV4ICE9PSB1c2VybmFtZUluZGV4KSB7XG4gICAgICAgICAgICAgICAgZmllbGRzLnB1c2goZik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZmllbGRzO1xuICAgIH1cblxuICAgIHN0YXRpYyBmcm9tRE9NKGVsZW1lbnQ6IGFueSwgZG9tVHlwZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IGxhYmVscyA9IGNvbGxlY3RMYWJlbHMoZWxlbWVudCk7XG4gICAgICAgIHJldHVybiBuZXcgRmllbGQoe1xuICAgICAgICAgICAgdXVpZDogdXRpbHMubmV3R1VJRCgpLFxuICAgICAgICAgICAgbmFtZTogbGFiZWxzICYmIGxhYmVscy5sZW5ndGggPyBsYWJlbHNbMF0gOiBlbGVtZW50Lm5hbWUsXG4gICAgICAgICAgICBsb2NhdG9yczogW1xuICAgICAgICAgICAgICAgIG5ldyBMb2NhdG9yKHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogZWxlbWVudC5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC5pZCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogZG9tVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgbGFiZWxzLFxuICAgICAgICAgICAgICAgICAgICBhdXRvY29tcGxldGVWYWx1ZXM6IGNvbGxlY3RBdXRvY29tcGxldGVWYWx1ZXMoZWxlbWVudClcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgdHlwZTogRmllbGQudHlwZUZyb21ET010eXBlKGRvbVR5cGUpXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHN0YXRpYyBmcm9tS1BSUENGaWVsZERUTyhmOiBGaWVsZER0bykge1xuICAgICAgICBsZXQgdHlwZTogRmllbGRUeXBlID0gXCJ0ZXh0XCI7XG4gICAgICAgIGxldCBsb2NhdG9yVHlwZSA9IFwidGV4dFwiO1xuXG4gICAgICAgIHN3aXRjaCAoZi50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIEZvcm1GaWVsZFR5cGVEVE8ucGFzc3dvcmQ6XG4gICAgICAgICAgICAgICAgdHlwZSA9IFwicGFzc3dvcmRcIjtcbiAgICAgICAgICAgICAgICBsb2NhdG9yVHlwZSA9IFwicGFzc3dvcmRcIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgRm9ybUZpZWxkVHlwZURUTy5yYWRpbzpcbiAgICAgICAgICAgICAgICB0eXBlID0gXCJleGlzdGluZ1wiO1xuICAgICAgICAgICAgICAgIGxvY2F0b3JUeXBlID0gXCJyYWRpb1wiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBGb3JtRmllbGRUeXBlRFRPLmNoZWNrYm94OlxuICAgICAgICAgICAgICAgIHR5cGUgPSBcImJvb2xlYW5cIjtcbiAgICAgICAgICAgICAgICBsb2NhdG9yVHlwZSA9IFwiY2hlY2tib3hcIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgRm9ybUZpZWxkVHlwZURUTy5zZWxlY3Q6XG4gICAgICAgICAgICAgICAgdHlwZSA9IFwiZXhpc3RpbmdcIjtcbiAgICAgICAgICAgICAgICBsb2NhdG9yVHlwZSA9IFwic2VsZWN0XCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEZvcm1GaWVsZFR5cGVEVE8udXNlcm5hbWU6XG4gICAgICAgICAgICAgICAgdHlwZSA9IFwidGV4dFwiO1xuICAgICAgICAgICAgICAgIGxvY2F0b3JUeXBlID0gXCJ0ZXh0XCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEZvcm1GaWVsZFR5cGVEVE8udGV4dDpcbiAgICAgICAgICAgICAgICB0eXBlID0gXCJ0ZXh0XCI7XG4gICAgICAgICAgICAgICAgbG9jYXRvclR5cGUgPSBcInRleHRcIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXcgRmllbGQoe1xuICAgICAgICAgICAgbmFtZTogZi5kaXNwbGF5TmFtZSB8fCBmLm5hbWUsXG4gICAgICAgICAgICB1dWlkOiB1dGlscy5uZXdHVUlEKCksXG4gICAgICAgICAgICB2YWx1ZTogZi52YWx1ZSxcbiAgICAgICAgICAgIHJlc2V0VmFsdWU6IGYudmFsdWUsXG4gICAgICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICAgICAgbG9jYXRvcnM6IFtcbiAgICAgICAgICAgICAgICBuZXcgTG9jYXRvcih7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBmLmlkLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBmLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGxvY2F0b3JUeXBlXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc3RhdGljIHRvS1BSUENGaWVsZERUTyhmOiBGaWVsZCwgaXNVc2VybmFtZTogYm9vbGVhbikge1xuICAgICAgICBsZXQgZmZ0OiBGb3JtRmllbGRUeXBlRFRPO1xuXG4gICAgICAgIHN3aXRjaCAoZi5sb2NhdG9yc1swXS50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFwicGFzc3dvcmRcIjpcbiAgICAgICAgICAgICAgICBmZnQgPSBGb3JtRmllbGRUeXBlRFRPLnBhc3N3b3JkO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInJhZGlvXCI6XG4gICAgICAgICAgICAgICAgZmZ0ID0gRm9ybUZpZWxkVHlwZURUTy5yYWRpbztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJjaGVja2JveFwiOlxuICAgICAgICAgICAgICAgIGZmdCA9IEZvcm1GaWVsZFR5cGVEVE8uY2hlY2tib3g7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwic2VsZWN0LW9uZVwiOlxuICAgICAgICAgICAgICAgIGZmdCA9IEZvcm1GaWVsZFR5cGVEVE8uc2VsZWN0O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBmZnQgPSBpc1VzZXJuYW1lID8gRm9ybUZpZWxkVHlwZURUTy51c2VybmFtZSA6IEZvcm1GaWVsZFR5cGVEVE8udGV4dDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkaXNwbGF5TmFtZTogZi5uYW1lLFxuICAgICAgICAgICAgaWQ6IGYubG9jYXRvcnNbMF0uaWQsXG4gICAgICAgICAgICBuYW1lOiBmLmxvY2F0b3JzWzBdLm5hbWUsXG4gICAgICAgICAgICB0eXBlOiBmZnQsXG4gICAgICAgICAgICB2YWx1ZTogZi52YWx1ZSxcbiAgICAgICAgICAgIHBhZ2U6IC0xXG4gICAgICAgIH0gYXMgRmllbGREdG87XG4gICAgfVxufVxuXG4vLyBNaWdodCBiZSBvdGhlciBlbGVtZW50IHR5cGVzIGJ1dCBtYWluIHRoaW5nIGlzIHRoZXkgaGF2ZSB0aGUgbGFiZWxzIHByb3BlcnR5XG5mdW5jdGlvbiBjb2xsZWN0TGFiZWxzKGVsZW1lbnQ6IEhUTUxJbnB1dEVsZW1lbnQgfCBIVE1MU2VsZWN0RWxlbWVudCkge1xuICAgIGNvbnN0IGxhYmVsczogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCBsYWJlbHNDb3VudCA9IGVsZW1lbnQubGFiZWxzPy5sZW5ndGggfHwgMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxhYmVsc0NvdW50OyBpKyspIHtcbiAgICAgICAgY29uc3QgbGFiZWwgPSBlbGVtZW50LmxhYmVsc1tpXTtcbiAgICAgICAgaWYgKGxhYmVsPy5pbm5lclRleHQpIGxhYmVscy5wdXNoKGxhYmVsLmlubmVyVGV4dCk7XG4gICAgfVxuICAgIGNvbnN0IGFyaWFMYWJlbCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiKT8udG9Mb3dlckNhc2UoKTtcbiAgICBpZiAoYXJpYUxhYmVsKSBsYWJlbHMucHVzaChhcmlhTGFiZWwpO1xuICAgIGNvbnN0IGFyaWFMYWJlbElkczogc3RyaW5nW10gPSBbXTtcbiAgICBlbGVtZW50XG4gICAgICAgIC5nZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsbGVkYnlcIilcbiAgICAgICAgPy50cmltKClcbiAgICAgICAgLnNwbGl0KFwiIFwiKVxuICAgICAgICAuZm9yRWFjaChpZCA9PiB7XG4gICAgICAgICAgICBpZiAoaWQpIGFyaWFMYWJlbElkcy5wdXNoKGlkKTtcbiAgICAgICAgfSk7XG4gICAgZWxlbWVudFxuICAgICAgICAuZ2V0QXR0cmlidXRlKFwiYXJpYS1kZXNjcmliZWRieVwiKVxuICAgICAgICA/LnRyaW0oKVxuICAgICAgICAuc3BsaXQoXCIgXCIpXG4gICAgICAgIC5mb3JFYWNoKGlkID0+IHtcbiAgICAgICAgICAgIGlmIChpZCkgYXJpYUxhYmVsSWRzLnB1c2goaWQpO1xuICAgICAgICB9KTtcbiAgICBhcmlhTGFiZWxJZHMuZm9yRWFjaChpZCA9PiB7XG4gICAgICAgIGNvbnN0IGxhYmVsRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcbiAgICAgICAgaWYgKGxhYmVsRWxlbWVudD8uaW5uZXJUZXh0KSBsYWJlbHMucHVzaChsYWJlbEVsZW1lbnQuaW5uZXJUZXh0KTtcbiAgICB9KTtcbiAgICByZXR1cm4gbGFiZWxzLmxlbmd0aCA/IGxhYmVscyA6IHVuZGVmaW5lZDtcbn1cblxuZnVuY3Rpb24gY29sbGVjdEF1dG9jb21wbGV0ZVZhbHVlcyhlbGVtZW50OiBIVE1MSW5wdXRFbGVtZW50IHwgSFRNTFNlbGVjdEVsZW1lbnQpIHtcbiAgICBjb25zdCB2YWx1ZXM6IHN0cmluZ1tdID0gW107XG4gICAgZWxlbWVudC5hdHRyaWJ1dGVzW1wiYXV0b2NvbXBsZXRlXCJdPy52YWx1ZVxuICAgICAgICA/LnRyaW0oKVxuICAgICAgICAuc3BsaXQoXCIgXCIpXG4gICAgICAgIC5mb3JFYWNoKHYgPT4ge1xuICAgICAgICAgICAgaWYgKHYpIHZhbHVlcy5wdXNoKHYudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgIH0pO1xuICAgIHJldHVybiB2YWx1ZXMubGVuZ3RoID8gdmFsdWVzIDogdW5kZWZpbmVkO1xufVxuIiwiaW1wb3J0IHsgSWNvbiB9IGZyb20gXCIuL0ljb25cIjtcbmltcG9ydCB7IHV0aWxzIH0gZnJvbSBcIi4uL3V0aWxzXCI7XG5pbXBvcnQgeyBHcm91cFN1bW1hcnlEdG8gfSBmcm9tIFwiLi9LUFJQQ0RUT3NcIjtcbmltcG9ydCB7IEdyb3VwIH0gZnJvbSBcIi4vR3JvdXBcIjtcblxuZXhwb3J0IGNsYXNzIEdyb3VwU3VtbWFyeSB7XG4gICAgcmVhZG9ubHkgdGl0bGU6IHN0cmluZztcbiAgICByZWFkb25seSB1dWlkOiBzdHJpbmc7XG4gICAgcmVhZG9ubHkgaWNvbjogSWNvbjtcbiAgICByZWFkb25seSBwYXRoOiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihnOiBQYXJ0aWFsPEdyb3VwU3VtbWFyeT4pIHtcbiAgICAgICAgdGhpcy50aXRsZSA9IGcudGl0bGUgfHwgXCJcIjtcbiAgICAgICAgdGhpcy51dWlkID0gZy51dWlkIHx8IHV0aWxzLm5ld0dVSUQoKTtcbiAgICAgICAgdGhpcy5pY29uID0gZy5pY29uIHx8IHsgdmVyc2lvbjogMSwgaWNvbkltYWdlRGF0YTogXCJcIiB9O1xuICAgICAgICB0aGlzLnBhdGggPSBnLnBhdGggfHwgXCJVTktOT1dOIFBBVEhcIjtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGZyb21LUFJQQ0dyb3VwU3VtbWFyeURUTyhncm91cFN1bW1hcnlEdG86IEdyb3VwU3VtbWFyeUR0bykge1xuICAgICAgICByZXR1cm4gbmV3IEdyb3VwU3VtbWFyeSh7XG4gICAgICAgICAgICB0aXRsZTogZ3JvdXBTdW1tYXJ5RHRvLnRpdGxlLFxuICAgICAgICAgICAgdXVpZDogZ3JvdXBTdW1tYXJ5RHRvLnVuaXF1ZUlELFxuICAgICAgICAgICAgaWNvbjogeyB2ZXJzaW9uOiAxLCBpY29uSW1hZ2VEYXRhOiBncm91cFN1bW1hcnlEdG8uaWNvbkltYWdlRGF0YSB9LFxuICAgICAgICAgICAgcGF0aDogZ3JvdXBTdW1tYXJ5RHRvLnBhdGhcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBmcm9tR3JvdXAoZ3JvdXA6IEdyb3VwKSB7XG4gICAgICAgIHJldHVybiBuZXcgR3JvdXBTdW1tYXJ5KHtcbiAgICAgICAgICAgIHRpdGxlOiBncm91cC50aXRsZSxcbiAgICAgICAgICAgIHV1aWQ6IGdyb3VwLnV1aWQsXG4gICAgICAgICAgICBpY29uOiBncm91cC5pY29uLFxuICAgICAgICAgICAgcGF0aDogZ3JvdXAucGF0aFxuICAgICAgICB9KTtcbiAgICB9XG59XG5cbmV4cG9ydCBjb25zdCBUZW1wb3JhcnlJRFN0cmluZyA9XG4gICAgXCJURU1QT1JBUlkgSUQgVE8gSURFTlRJRlkgVEhJUyBBUyBBIERJUlRZIEVOVFJZIFRIQVQgRE9FU04nVCBFWElTVCBJTiBTT1VSQ0UgREFUQUJBU0UgWUVUXCI7XG4iLCJpbXBvcnQgeyBJY29uIH0gZnJvbSBcIi4vSWNvblwiO1xuaW1wb3J0IHsgRGF0YWJhc2UgfSBmcm9tIFwiLi9EYXRhYmFzZVwiO1xuaW1wb3J0IHsgdXRpbHMgfSBmcm9tIFwiLi4vdXRpbHNcIjtcbmltcG9ydCB7IEZpZWxkIH0gZnJvbSBcIi4vRmllbGRcIjtcbmltcG9ydCB7IEVudHJ5RHRvLCBGb3JtRmllbGRUeXBlRFRPIH0gZnJvbSBcIi4vS1BSUENEVE9zXCI7XG5pbXBvcnQgeyBEYXRhYmFzZVN1bW1hcnkgfSBmcm9tIFwiLi9EYXRhYmFzZVN1bW1hcnlcIjtcbmltcG9ydCB7IEdyb3VwU3VtbWFyeSB9IGZyb20gXCIuL0dyb3VwU3VtbWFyeVwiO1xuXG4vLyBBbHRob3VnaCB3ZSB1c2UgdXVpZHMgZm9yIEZpZWxkcyBhbmQgcG9zc2libHkgTG9jYXRvcnMsIHdlIGRvbid0IGFsbG93IHRoZW0gdG8gZXhpc3Qgb3V0c2lkZSBvZiB0aGVpciBwYXJlbnQgZW50cnkuXG5cbmV4cG9ydCBjbGFzcyBFbnRyeSB7XG4gICAgLy8gYXJyYXkgb2YgVVJMIHN0cmluZ3MgKG5vcm1hbGx5IGp1c3Qgb25lIGlzIG5lZWRlZFxuICAgIC8vIGJ1dCBhIGdpdmVuIGVudHJ5IGNhbiBiZSBhc3NvY2lhdGVkIHdpdGggbW9yZSB0aGFuIG9uZSBzaXRlXG4gICAgLy8gb3Igd2l0aCBtdWx0aXBsZSBwYWdlcyBvbiB0aGF0IHNpdGUpXG4gICAgcmVhZG9ubHkgVVJMczogc3RyaW5nW107XG5cbiAgICAvLyBIb3cgYWNjdXJhdGUgaXMgdGhlIGJlc3QgVVJMIG1hdGNoIGZvciB0aGlzIGVudHJ5IChvbmx5IHNldCBpZiBlbnRyeVxuICAgIC8vIHdhcyBzdXBwbGllZCBpbiByZXNwb25zZSB0byBjZXJ0YWluIHNlYXJjaCByZXF1ZXN0cykuIEhpZ2hlciA9IGNsb3NlciBtYXRjaFxuICAgIHJlYWRvbmx5IG1hdGNoQWNjdXJhY3k6IG51bWJlcjtcblxuICAgIC8vIFRoZSByZWFsbSBvZiBhIEhUVFAgYXV0aGVudGljYXRpb24gcmVxdWVzdFxuICAgIHJlYWRvbmx5IGh0dHBSZWFsbTogc3RyaW5nO1xuXG4gICAgLy8gVGhlIGluZGV4IG9mIHRoZSBvdGhlckZpZWxkIHdoaWNoIHdlIHdpbGwgdHJlYXQgYXMgdGhlIHVzZXJuYW1lIGluIEtlZVBhc3NcbiAgICAvLyByZWFkb25seSB1c2VybmFtZUluZGV4OiBudW1iZXI7XG5cbiAgICByZWFkb25seSBmaWVsZHM6IEZpZWxkW107XG5cbiAgICAvLyBUaGUgS2VlUGFzcyBlbnRyeSdzIHVuaXF1ZUlEIChpZiBrbm93bilcbiAgICByZWFkb25seSB1dWlkOiBzdHJpbmc7XG5cbiAgICAvLyBUaGUgdGl0bGUgb2YgdGhlIEtlZVBhc3MgZW50cnkgKGF1dG8tZ2VuZXJhdGVkIGZyb20gdGhlIHBhZ2UgdGl0bGUgYnkgZGVmYXVsdCxcbiAgICAvLyBvciB0aGUgcGFnZSBVUkwncyBob3N0bmFtZSBpZiBubyB0aXRsZSBpcyBzZXQpXG4gICAgcmVhZG9ubHkgdGl0bGU6IHN0cmluZztcblxuICAgIHJlYWRvbmx5IGljb246IEljb247XG5cbiAgICByZWFkb25seSBwYXJlbnRHcm91cDogR3JvdXBTdW1tYXJ5O1xuXG4gICAgcmVhZG9ubHkgYWx3YXlzQXV0b0ZpbGw6IGJvb2xlYW47XG4gICAgcmVhZG9ubHkgYWx3YXlzQXV0b1N1Ym1pdDogYm9vbGVhbjtcbiAgICByZWFkb25seSBuZXZlckF1dG9GaWxsOiBib29sZWFuO1xuICAgIHJlYWRvbmx5IG5ldmVyQXV0b1N1Ym1pdDogYm9vbGVhbjtcblxuICAgIHJlYWRvbmx5IGRhdGFiYXNlOiBEYXRhYmFzZVN1bW1hcnk7XG5cbiAgICAvLyBIb3cgcmVsZXZhbnQgdGhpcyBlbnRyeSBpcyB0byB0aGUgY3VycmVudCBmb3JtIGluXG4gICAgLy8gdGhlIGJyb3dzZXIgLSB0cmFuc2llbnQgKG5vdCBzdG9yZWQgaW4gS2VlUGFzcylcbiAgICAvL1RPRE86NCBwdXQgYWxsIG1hdGNoIGRhdGEgaW50byBhIG5ldyBvYmplY3Q/XG4gICAgcmVsZXZhbmNlU2NvcmU6IG51bWJlcjtcbiAgICBsb3dGaWVsZE1hdGNoUmF0aW86IGFueTtcbiAgICBmb3JtSW5kZXg6IG51bWJlcjtcbiAgICBlbnRyeUluZGV4OiBudW1iZXI7XG4gICAgaXNQcmVmZXJyZWRNYXRjaD86IGJvb2xlYW47XG5cbiAgICBjb25zdHJ1Y3RvcihlOiBQYXJ0aWFsPEVudHJ5Pikge1xuICAgICAgICB0aGlzLmFsd2F5c0F1dG9GaWxsID0gZS5hbHdheXNBdXRvRmlsbCB8fCBmYWxzZTtcbiAgICAgICAgdGhpcy5hbHdheXNBdXRvU3VibWl0ID0gZS5hbHdheXNBdXRvU3VibWl0IHx8IGZhbHNlO1xuICAgICAgICB0aGlzLm5ldmVyQXV0b0ZpbGwgPSBlLm5ldmVyQXV0b0ZpbGwgfHwgZmFsc2U7XG4gICAgICAgIHRoaXMubmV2ZXJBdXRvU3VibWl0ID0gZS5uZXZlckF1dG9TdWJtaXQgfHwgZmFsc2U7XG4gICAgICAgIHRoaXMuVVJMcyA9IGUuVVJMcyB8fCBbXTtcbiAgICAgICAgdGhpcy5maWVsZHMgPSBlLmZpZWxkcyB8fCBbXTtcbiAgICAgICAgdGhpcy5odHRwUmVhbG0gPSBlLmh0dHBSZWFsbSB8fCBcIlwiO1xuICAgICAgICB0aGlzLnBhcmVudEdyb3VwID0gZS5wYXJlbnRHcm91cCB8fCBudWxsO1xuICAgICAgICB0aGlzLnV1aWQgPSBlLnV1aWQgfHwgdXRpbHMubmV3R1VJRCgpO1xuICAgICAgICB0aGlzLnRpdGxlID0gZS50aXRsZSB8fCBcIlwiO1xuICAgICAgICB0aGlzLm1hdGNoQWNjdXJhY3kgPSBlLm1hdGNoQWNjdXJhY3kgfHwgMDtcbiAgICAgICAgdGhpcy5pY29uID0gZS5pY29uIHx8IHsgdmVyc2lvbjogMSwgaWNvbkltYWdlRGF0YTogXCJcIiB9O1xuICAgICAgICB0aGlzLmRhdGFiYXNlID0gZS5kYXRhYmFzZSB8fCBuZXcgRGF0YWJhc2Uoe30pO1xuICAgICAgICB0aGlzLnJlbGV2YW5jZVNjb3JlID0gZS5yZWxldmFuY2VTY29yZTtcbiAgICAgICAgdGhpcy5sb3dGaWVsZE1hdGNoUmF0aW8gPSBlLmxvd0ZpZWxkTWF0Y2hSYXRpbztcbiAgICAgICAgdGhpcy5mb3JtSW5kZXggPSBlLmZvcm1JbmRleDtcbiAgICAgICAgdGhpcy5lbnRyeUluZGV4ID0gZS5lbnRyeUluZGV4O1xuICAgICAgICB0aGlzLmlzUHJlZmVycmVkTWF0Y2ggPSBlLmlzUHJlZmVycmVkTWF0Y2g7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBnZXRVc2VybmFtZUZpZWxkKGVudHJ5OiBFbnRyeSkge1xuICAgICAgICByZXR1cm4gZW50cnkuZmllbGRzLmZpbmQoZiA9PiBmLnR5cGUgPT09IFwidGV4dFwiKTtcbiAgICB9XG4gICAgcHVibGljIHN0YXRpYyBnZXRQYXNzd29yZEZpZWxkKGVudHJ5OiBFbnRyeSkge1xuICAgICAgICByZXR1cm4gZW50cnkuZmllbGRzLmZpbmQoZiA9PiBmLnR5cGUgPT09IFwicGFzc3dvcmRcIik7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBmcm9tS1BSUENFbnRyeURUTyhlbnRyeUR0bzogRW50cnlEdG8sIGRiOiBEYXRhYmFzZVN1bW1hcnkpIHtcbiAgICAgICAgY29uc3Qgc29ydGVkRmllbGRzOiBGaWVsZFtdID0gW107XG4gICAgICAgIGxldCBtYXhpbXVtUGFnZSA9IDE7XG4gICAgICAgIGNvbnN0IHVzZXJuYW1lSW5kZXggPSBlbnRyeUR0by5mb3JtRmllbGRMaXN0LmZpbmRJbmRleChcbiAgICAgICAgICAgIGYgPT4gZi50eXBlID09PSBGb3JtRmllbGRUeXBlRFRPLnVzZXJuYW1lXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgdW5zb3J0ZWRGaWVsZHMgPSBlbnRyeUR0by5mb3JtRmllbGRMaXN0Lm1hcChmID0+IHtcbiAgICAgICAgICAgIGlmIChmLnBhZ2UgPiBtYXhpbXVtUGFnZSkgbWF4aW11bVBhZ2UgPSBmLnBhZ2U7XG5cbiAgICAgICAgICAgIHJldHVybiBGaWVsZC5mcm9tS1BSUENGaWVsZERUTyhmKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGZpcnN0UGFzc3dvcmRJbmRleCA9IHVuc29ydGVkRmllbGRzLmZpbmRJbmRleChmID0+IGYudHlwZSA9PT0gXCJwYXNzd29yZFwiKTtcblxuICAgICAgICBpZiAodXNlcm5hbWVJbmRleCA+IC0xKSB7XG4gICAgICAgICAgICBzb3J0ZWRGaWVsZHMucHVzaCh1bnNvcnRlZEZpZWxkc1t1c2VybmFtZUluZGV4XSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpcnN0UGFzc3dvcmRJbmRleCA+IC0xKSB7XG4gICAgICAgICAgICBzb3J0ZWRGaWVsZHMucHVzaCh1bnNvcnRlZEZpZWxkc1tmaXJzdFBhc3N3b3JkSW5kZXhdKTtcbiAgICAgICAgfVxuICAgICAgICB1bnNvcnRlZEZpZWxkcy5mb3JFYWNoKChmLCBpKSA9PiB7XG4gICAgICAgICAgICBpZiAoaSAhPT0gdXNlcm5hbWVJbmRleCAmJiBpICE9PSBmaXJzdFBhc3N3b3JkSW5kZXgpIHtcbiAgICAgICAgICAgICAgICBzb3J0ZWRGaWVsZHMucHVzaChmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgZW50cnkgPSBuZXcgRW50cnkoe1xuICAgICAgICAgICAgVVJMczogZW50cnlEdG8udVJMcyxcbiAgICAgICAgICAgIG5ldmVyQXV0b0ZpbGw6IGVudHJ5RHRvLm5ldmVyQXV0b0ZpbGwsXG4gICAgICAgICAgICBhbHdheXNBdXRvRmlsbDogZW50cnlEdG8uYWx3YXlzQXV0b0ZpbGwsXG4gICAgICAgICAgICBuZXZlckF1dG9TdWJtaXQ6IGVudHJ5RHRvLm5ldmVyQXV0b1N1Ym1pdCxcbiAgICAgICAgICAgIGFsd2F5c0F1dG9TdWJtaXQ6IGVudHJ5RHRvLmFsd2F5c0F1dG9TdWJtaXQsXG4gICAgICAgICAgICBpY29uOiB7IHZlcnNpb246IDEsIGljb25JbWFnZURhdGE6IGVudHJ5RHRvLmljb25JbWFnZURhdGEgfSxcbiAgICAgICAgICAgIHBhcmVudEdyb3VwOiBHcm91cFN1bW1hcnkuZnJvbUtQUlBDR3JvdXBTdW1tYXJ5RFRPKGVudHJ5RHRvLnBhcmVudCksXG4gICAgICAgICAgICBkYXRhYmFzZTogZGIsXG4gICAgICAgICAgICBtYXRjaEFjY3VyYWN5OiBlbnRyeUR0by5tYXRjaEFjY3VyYWN5LFxuICAgICAgICAgICAgaHR0cFJlYWxtOiBlbnRyeUR0by5oVFRQUmVhbG0sXG4gICAgICAgICAgICB1dWlkOiBlbnRyeUR0by51bmlxdWVJRCxcbiAgICAgICAgICAgIHRpdGxlOiBlbnRyeUR0by50aXRsZSxcbiAgICAgICAgICAgIGZpZWxkczogc29ydGVkRmllbGRzXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBlbnRyeTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHRvS1BSUENFbnRyeURUTyhlbnRyeTogRW50cnkpIHtcbiAgICAgICAgY29uc3QgZW50cnlEdG8gPSBuZXcgRW50cnlEdG8oKTtcbiAgICAgICAgZW50cnlEdG8uYWx3YXlzQXV0b0ZpbGwgPSBlbnRyeS5hbHdheXNBdXRvRmlsbDtcbiAgICAgICAgZW50cnlEdG8uYWx3YXlzQXV0b1N1Ym1pdCA9IGVudHJ5LmFsd2F5c0F1dG9TdWJtaXQ7XG4gICAgICAgIGVudHJ5RHRvLmZvcm1GaWVsZExpc3QgPSBlbnRyeS5maWVsZHMubWFwKChmLCBpKSA9PiBGaWVsZC50b0tQUlBDRmllbGREVE8oZiwgaSA9PT0gMCkpO1xuICAgICAgICBlbnRyeUR0by5oVFRQUmVhbG0gPSBlbnRyeS5odHRwUmVhbG07XG4gICAgICAgIGVudHJ5RHRvLmljb25JbWFnZURhdGEgPSBlbnRyeS5pY29uLmljb25JbWFnZURhdGE7XG4gICAgICAgIGVudHJ5RHRvLm5ldmVyQXV0b0ZpbGwgPSBlbnRyeS5uZXZlckF1dG9GaWxsO1xuICAgICAgICBlbnRyeUR0by5uZXZlckF1dG9TdWJtaXQgPSBlbnRyeS5uZXZlckF1dG9TdWJtaXQ7XG4gICAgICAgIGVudHJ5RHRvLnRpdGxlID0gZW50cnkudGl0bGU7XG4gICAgICAgIGVudHJ5RHRvLnVSTHMgPSBlbnRyeS5VUkxzO1xuICAgICAgICByZXR1cm4gZW50cnlEdG87XG4gICAgfVxufVxuIiwiLyoqXG4gKiBNYWtlIGEgbWFwIGFuZCByZXR1cm4gYSBmdW5jdGlvbiBmb3IgY2hlY2tpbmcgaWYgYSBrZXlcbiAqIGlzIGluIHRoYXQgbWFwLlxuICogSU1QT1JUQU5UOiBhbGwgY2FsbHMgb2YgdGhpcyBmdW5jdGlvbiBtdXN0IGJlIHByZWZpeGVkIHdpdGhcbiAqIFxcL1xcKiNcXF9cXF9QVVJFXFxfXFxfXFwqXFwvXG4gKiBTbyB0aGF0IHJvbGx1cCBjYW4gdHJlZS1zaGFrZSB0aGVtIGlmIG5lY2Vzc2FyeS5cbiAqL1xuZnVuY3Rpb24gbWFrZU1hcChzdHIsIGV4cGVjdHNMb3dlckNhc2UpIHtcbiAgICBjb25zdCBtYXAgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIGNvbnN0IGxpc3QgPSBzdHIuc3BsaXQoJywnKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbWFwW2xpc3RbaV1dID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGV4cGVjdHNMb3dlckNhc2UgPyB2YWwgPT4gISFtYXBbdmFsLnRvTG93ZXJDYXNlKCldIDogdmFsID0+ICEhbWFwW3ZhbF07XG59XG5cbi8qKlxuICogZGV2IG9ubHkgZmxhZyAtPiBuYW1lIG1hcHBpbmdcbiAqL1xuY29uc3QgUGF0Y2hGbGFnTmFtZXMgPSB7XG4gICAgWzEgLyogUGF0Y2hGbGFncy5URVhUICovXTogYFRFWFRgLFxuICAgIFsyIC8qIFBhdGNoRmxhZ3MuQ0xBU1MgKi9dOiBgQ0xBU1NgLFxuICAgIFs0IC8qIFBhdGNoRmxhZ3MuU1RZTEUgKi9dOiBgU1RZTEVgLFxuICAgIFs4IC8qIFBhdGNoRmxhZ3MuUFJPUFMgKi9dOiBgUFJPUFNgLFxuICAgIFsxNiAvKiBQYXRjaEZsYWdzLkZVTExfUFJPUFMgKi9dOiBgRlVMTF9QUk9QU2AsXG4gICAgWzMyIC8qIFBhdGNoRmxhZ3MuSFlEUkFURV9FVkVOVFMgKi9dOiBgSFlEUkFURV9FVkVOVFNgLFxuICAgIFs2NCAvKiBQYXRjaEZsYWdzLlNUQUJMRV9GUkFHTUVOVCAqL106IGBTVEFCTEVfRlJBR01FTlRgLFxuICAgIFsxMjggLyogUGF0Y2hGbGFncy5LRVlFRF9GUkFHTUVOVCAqL106IGBLRVlFRF9GUkFHTUVOVGAsXG4gICAgWzI1NiAvKiBQYXRjaEZsYWdzLlVOS0VZRURfRlJBR01FTlQgKi9dOiBgVU5LRVlFRF9GUkFHTUVOVGAsXG4gICAgWzUxMiAvKiBQYXRjaEZsYWdzLk5FRURfUEFUQ0ggKi9dOiBgTkVFRF9QQVRDSGAsXG4gICAgWzEwMjQgLyogUGF0Y2hGbGFncy5EWU5BTUlDX1NMT1RTICovXTogYERZTkFNSUNfU0xPVFNgLFxuICAgIFsyMDQ4IC8qIFBhdGNoRmxhZ3MuREVWX1JPT1RfRlJBR01FTlQgKi9dOiBgREVWX1JPT1RfRlJBR01FTlRgLFxuICAgIFstMSAvKiBQYXRjaEZsYWdzLkhPSVNURUQgKi9dOiBgSE9JU1RFRGAsXG4gICAgWy0yIC8qIFBhdGNoRmxhZ3MuQkFJTCAqL106IGBCQUlMYFxufTtcblxuLyoqXG4gKiBEZXYgb25seVxuICovXG5jb25zdCBzbG90RmxhZ3NUZXh0ID0ge1xuICAgIFsxIC8qIFNsb3RGbGFncy5TVEFCTEUgKi9dOiAnU1RBQkxFJyxcbiAgICBbMiAvKiBTbG90RmxhZ3MuRFlOQU1JQyAqL106ICdEWU5BTUlDJyxcbiAgICBbMyAvKiBTbG90RmxhZ3MuRk9SV0FSREVEICovXTogJ0ZPUldBUkRFRCdcbn07XG5cbmNvbnN0IEdMT0JBTFNfV0hJVEVfTElTVEVEID0gJ0luZmluaXR5LHVuZGVmaW5lZCxOYU4saXNGaW5pdGUsaXNOYU4scGFyc2VGbG9hdCxwYXJzZUludCxkZWNvZGVVUkksJyArXG4gICAgJ2RlY29kZVVSSUNvbXBvbmVudCxlbmNvZGVVUkksZW5jb2RlVVJJQ29tcG9uZW50LE1hdGgsTnVtYmVyLERhdGUsQXJyYXksJyArXG4gICAgJ09iamVjdCxCb29sZWFuLFN0cmluZyxSZWdFeHAsTWFwLFNldCxKU09OLEludGwsQmlnSW50JztcbmNvbnN0IGlzR2xvYmFsbHlXaGl0ZWxpc3RlZCA9IC8qI19fUFVSRV9fKi8gbWFrZU1hcChHTE9CQUxTX1dISVRFX0xJU1RFRCk7XG5cbmNvbnN0IHJhbmdlID0gMjtcbmZ1bmN0aW9uIGdlbmVyYXRlQ29kZUZyYW1lKHNvdXJjZSwgc3RhcnQgPSAwLCBlbmQgPSBzb3VyY2UubGVuZ3RoKSB7XG4gICAgLy8gU3BsaXQgdGhlIGNvbnRlbnQgaW50byBpbmRpdmlkdWFsIGxpbmVzIGJ1dCBjYXB0dXJlIHRoZSBuZXdsaW5lIHNlcXVlbmNlXG4gICAgLy8gdGhhdCBzZXBhcmF0ZWQgZWFjaCBsaW5lLiBUaGlzIGlzIGltcG9ydGFudCBiZWNhdXNlIHRoZSBhY3R1YWwgc2VxdWVuY2UgaXNcbiAgICAvLyBuZWVkZWQgdG8gcHJvcGVybHkgdGFrZSBpbnRvIGFjY291bnQgdGhlIGZ1bGwgbGluZSBsZW5ndGggZm9yIG9mZnNldFxuICAgIC8vIGNvbXBhcmlzb25cbiAgICBsZXQgbGluZXMgPSBzb3VyY2Uuc3BsaXQoLyhcXHI/XFxuKS8pO1xuICAgIC8vIFNlcGFyYXRlIHRoZSBsaW5lcyBhbmQgbmV3bGluZSBzZXF1ZW5jZXMgaW50byBzZXBhcmF0ZSBhcnJheXMgZm9yIGVhc2llciByZWZlcmVuY2luZ1xuICAgIGNvbnN0IG5ld2xpbmVTZXF1ZW5jZXMgPSBsaW5lcy5maWx0ZXIoKF8sIGlkeCkgPT4gaWR4ICUgMiA9PT0gMSk7XG4gICAgbGluZXMgPSBsaW5lcy5maWx0ZXIoKF8sIGlkeCkgPT4gaWR4ICUgMiA9PT0gMCk7XG4gICAgbGV0IGNvdW50ID0gMDtcbiAgICBjb25zdCByZXMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvdW50ICs9XG4gICAgICAgICAgICBsaW5lc1tpXS5sZW5ndGggK1xuICAgICAgICAgICAgICAgICgobmV3bGluZVNlcXVlbmNlc1tpXSAmJiBuZXdsaW5lU2VxdWVuY2VzW2ldLmxlbmd0aCkgfHwgMCk7XG4gICAgICAgIGlmIChjb3VudCA+PSBzdGFydCkge1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IGkgLSByYW5nZTsgaiA8PSBpICsgcmFuZ2UgfHwgZW5kID4gY291bnQ7IGorKykge1xuICAgICAgICAgICAgICAgIGlmIChqIDwgMCB8fCBqID49IGxpbmVzLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgY29uc3QgbGluZSA9IGogKyAxO1xuICAgICAgICAgICAgICAgIHJlcy5wdXNoKGAke2xpbmV9JHsnICcucmVwZWF0KE1hdGgubWF4KDMgLSBTdHJpbmcobGluZSkubGVuZ3RoLCAwKSl9fCAgJHtsaW5lc1tqXX1gKTtcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5lTGVuZ3RoID0gbGluZXNbal0ubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0xpbmVTZXFMZW5ndGggPSAobmV3bGluZVNlcXVlbmNlc1tqXSAmJiBuZXdsaW5lU2VxdWVuY2VzW2pdLmxlbmd0aCkgfHwgMDtcbiAgICAgICAgICAgICAgICBpZiAoaiA9PT0gaSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBwdXNoIHVuZGVybGluZVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYWQgPSBzdGFydCAtIChjb3VudCAtIChsaW5lTGVuZ3RoICsgbmV3TGluZVNlcUxlbmd0aCkpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsZW5ndGggPSBNYXRoLm1heCgxLCBlbmQgPiBjb3VudCA/IGxpbmVMZW5ndGggLSBwYWQgOiBlbmQgLSBzdGFydCk7XG4gICAgICAgICAgICAgICAgICAgIHJlcy5wdXNoKGAgICB8ICBgICsgJyAnLnJlcGVhdChwYWQpICsgJ14nLnJlcGVhdChsZW5ndGgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaiA+IGkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVuZCA+IGNvdW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsZW5ndGggPSBNYXRoLm1heChNYXRoLm1pbihlbmQgLSBjb3VudCwgbGluZUxlbmd0aCksIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnB1c2goYCAgIHwgIGAgKyAnXicucmVwZWF0KGxlbmd0aCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvdW50ICs9IGxpbmVMZW5ndGggKyBuZXdMaW5lU2VxTGVuZ3RoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXMuam9pbignXFxuJyk7XG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZVN0eWxlKHZhbHVlKSB7XG4gICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IHt9O1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBpdGVtID0gdmFsdWVbaV07XG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkID0gaXNTdHJpbmcoaXRlbSlcbiAgICAgICAgICAgICAgICA/IHBhcnNlU3RyaW5nU3R5bGUoaXRlbSlcbiAgICAgICAgICAgICAgICA6IG5vcm1hbGl6ZVN0eWxlKGl0ZW0pO1xuICAgICAgICAgICAgaWYgKG5vcm1hbGl6ZWQpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBub3JtYWxpemVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc1trZXldID0gbm9ybWFsaXplZFtrZXldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc1N0cmluZyh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc09iamVjdCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbn1cbmNvbnN0IGxpc3REZWxpbWl0ZXJSRSA9IC87KD8hW14oXSpcXCkpL2c7XG5jb25zdCBwcm9wZXJ0eURlbGltaXRlclJFID0gLzooW15dKykvO1xuY29uc3Qgc3R5bGVDb21tZW50UkUgPSAvXFwvXFwqLio/XFwqXFwvL2dzO1xuZnVuY3Rpb24gcGFyc2VTdHJpbmdTdHlsZShjc3NUZXh0KSB7XG4gICAgY29uc3QgcmV0ID0ge307XG4gICAgY3NzVGV4dFxuICAgICAgICAucmVwbGFjZShzdHlsZUNvbW1lbnRSRSwgJycpXG4gICAgICAgIC5zcGxpdChsaXN0RGVsaW1pdGVyUkUpXG4gICAgICAgIC5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICBpZiAoaXRlbSkge1xuICAgICAgICAgICAgY29uc3QgdG1wID0gaXRlbS5zcGxpdChwcm9wZXJ0eURlbGltaXRlclJFKTtcbiAgICAgICAgICAgIHRtcC5sZW5ndGggPiAxICYmIChyZXRbdG1wWzBdLnRyaW0oKV0gPSB0bXBbMV0udHJpbSgpKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiByZXQ7XG59XG5mdW5jdGlvbiBzdHJpbmdpZnlTdHlsZShzdHlsZXMpIHtcbiAgICBsZXQgcmV0ID0gJyc7XG4gICAgaWYgKCFzdHlsZXMgfHwgaXNTdHJpbmcoc3R5bGVzKSkge1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGtleSBpbiBzdHlsZXMpIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBzdHlsZXNba2V5XTtcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZEtleSA9IGtleS5zdGFydHNXaXRoKGAtLWApID8ga2V5IDogaHlwaGVuYXRlKGtleSk7XG4gICAgICAgIGlmIChpc1N0cmluZyh2YWx1ZSkgfHwgdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgLy8gb25seSByZW5kZXIgdmFsaWQgdmFsdWVzXG4gICAgICAgICAgICByZXQgKz0gYCR7bm9ybWFsaXplZEtleX06JHt2YWx1ZX07YDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufVxuZnVuY3Rpb24gbm9ybWFsaXplQ2xhc3ModmFsdWUpIHtcbiAgICBsZXQgcmVzID0gJyc7XG4gICAgaWYgKGlzU3RyaW5nKHZhbHVlKSkge1xuICAgICAgICByZXMgPSB2YWx1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZUNsYXNzKHZhbHVlW2ldKTtcbiAgICAgICAgICAgIGlmIChub3JtYWxpemVkKSB7XG4gICAgICAgICAgICAgICAgcmVzICs9IG5vcm1hbGl6ZWQgKyAnICc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgICAgIGZvciAoY29uc3QgbmFtZSBpbiB2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlW25hbWVdKSB7XG4gICAgICAgICAgICAgICAgcmVzICs9IG5hbWUgKyAnICc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcy50cmltKCk7XG59XG5mdW5jdGlvbiBub3JtYWxpemVQcm9wcyhwcm9wcykge1xuICAgIGlmICghcHJvcHMpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIGxldCB7IGNsYXNzOiBrbGFzcywgc3R5bGUgfSA9IHByb3BzO1xuICAgIGlmIChrbGFzcyAmJiAhaXNTdHJpbmcoa2xhc3MpKSB7XG4gICAgICAgIHByb3BzLmNsYXNzID0gbm9ybWFsaXplQ2xhc3Moa2xhc3MpO1xuICAgIH1cbiAgICBpZiAoc3R5bGUpIHtcbiAgICAgICAgcHJvcHMuc3R5bGUgPSBub3JtYWxpemVTdHlsZShzdHlsZSk7XG4gICAgfVxuICAgIHJldHVybiBwcm9wcztcbn1cblxuLy8gVGhlc2UgdGFnIGNvbmZpZ3MgYXJlIHNoYXJlZCBiZXR3ZWVuIGNvbXBpbGVyLWRvbSBhbmQgcnVudGltZS1kb20sIHNvIHRoZXlcbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUTUwvRWxlbWVudFxuY29uc3QgSFRNTF9UQUdTID0gJ2h0bWwsYm9keSxiYXNlLGhlYWQsbGluayxtZXRhLHN0eWxlLHRpdGxlLGFkZHJlc3MsYXJ0aWNsZSxhc2lkZSxmb290ZXIsJyArXG4gICAgJ2hlYWRlcixoMSxoMixoMyxoNCxoNSxoNixuYXYsc2VjdGlvbixkaXYsZGQsZGwsZHQsZmlnY2FwdGlvbiwnICtcbiAgICAnZmlndXJlLHBpY3R1cmUsaHIsaW1nLGxpLG1haW4sb2wscCxwcmUsdWwsYSxiLGFiYnIsYmRpLGJkbyxicixjaXRlLGNvZGUsJyArXG4gICAgJ2RhdGEsZGZuLGVtLGksa2JkLG1hcmsscSxycCxydCxydWJ5LHMsc2FtcCxzbWFsbCxzcGFuLHN0cm9uZyxzdWIsc3VwLCcgK1xuICAgICd0aW1lLHUsdmFyLHdicixhcmVhLGF1ZGlvLG1hcCx0cmFjayx2aWRlbyxlbWJlZCxvYmplY3QscGFyYW0sc291cmNlLCcgK1xuICAgICdjYW52YXMsc2NyaXB0LG5vc2NyaXB0LGRlbCxpbnMsY2FwdGlvbixjb2wsY29sZ3JvdXAsdGFibGUsdGhlYWQsdGJvZHksdGQsJyArXG4gICAgJ3RoLHRyLGJ1dHRvbixkYXRhbGlzdCxmaWVsZHNldCxmb3JtLGlucHV0LGxhYmVsLGxlZ2VuZCxtZXRlcixvcHRncm91cCwnICtcbiAgICAnb3B0aW9uLG91dHB1dCxwcm9ncmVzcyxzZWxlY3QsdGV4dGFyZWEsZGV0YWlscyxkaWFsb2csbWVudSwnICtcbiAgICAnc3VtbWFyeSx0ZW1wbGF0ZSxibG9ja3F1b3RlLGlmcmFtZSx0Zm9vdCc7XG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9TVkcvRWxlbWVudFxuY29uc3QgU1ZHX1RBR1MgPSAnc3ZnLGFuaW1hdGUsYW5pbWF0ZU1vdGlvbixhbmltYXRlVHJhbnNmb3JtLGNpcmNsZSxjbGlwUGF0aCxjb2xvci1wcm9maWxlLCcgK1xuICAgICdkZWZzLGRlc2MsZGlzY2FyZCxlbGxpcHNlLGZlQmxlbmQsZmVDb2xvck1hdHJpeCxmZUNvbXBvbmVudFRyYW5zZmVyLCcgK1xuICAgICdmZUNvbXBvc2l0ZSxmZUNvbnZvbHZlTWF0cml4LGZlRGlmZnVzZUxpZ2h0aW5nLGZlRGlzcGxhY2VtZW50TWFwLCcgK1xuICAgICdmZURpc3RhbmNlTGlnaHQsZmVEcm9wU2hhZG93LGZlRmxvb2QsZmVGdW5jQSxmZUZ1bmNCLGZlRnVuY0csZmVGdW5jUiwnICtcbiAgICAnZmVHYXVzc2lhbkJsdXIsZmVJbWFnZSxmZU1lcmdlLGZlTWVyZ2VOb2RlLGZlTW9ycGhvbG9neSxmZU9mZnNldCwnICtcbiAgICAnZmVQb2ludExpZ2h0LGZlU3BlY3VsYXJMaWdodGluZyxmZVNwb3RMaWdodCxmZVRpbGUsZmVUdXJidWxlbmNlLGZpbHRlciwnICtcbiAgICAnZm9yZWlnbk9iamVjdCxnLGhhdGNoLGhhdGNocGF0aCxpbWFnZSxsaW5lLGxpbmVhckdyYWRpZW50LG1hcmtlcixtYXNrLCcgK1xuICAgICdtZXNoLG1lc2hncmFkaWVudCxtZXNocGF0Y2gsbWVzaHJvdyxtZXRhZGF0YSxtcGF0aCxwYXRoLHBhdHRlcm4sJyArXG4gICAgJ3BvbHlnb24scG9seWxpbmUscmFkaWFsR3JhZGllbnQscmVjdCxzZXQsc29saWRjb2xvcixzdG9wLHN3aXRjaCxzeW1ib2wsJyArXG4gICAgJ3RleHQsdGV4dFBhdGgsdGl0bGUsdHNwYW4sdW5rbm93bix1c2Usdmlldyc7XG5jb25zdCBWT0lEX1RBR1MgPSAnYXJlYSxiYXNlLGJyLGNvbCxlbWJlZCxocixpbWcsaW5wdXQsbGluayxtZXRhLHBhcmFtLHNvdXJjZSx0cmFjayx3YnInO1xuLyoqXG4gKiBDb21waWxlciBvbmx5LlxuICogRG8gTk9UIHVzZSBpbiBydW50aW1lIGNvZGUgcGF0aHMgdW5sZXNzIGJlaGluZCBgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpYCBmbGFnLlxuICovXG5jb25zdCBpc0hUTUxUYWcgPSAvKiNfX1BVUkVfXyovIG1ha2VNYXAoSFRNTF9UQUdTKTtcbi8qKlxuICogQ29tcGlsZXIgb25seS5cbiAqIERvIE5PVCB1c2UgaW4gcnVudGltZSBjb2RlIHBhdGhzIHVubGVzcyBiZWhpbmQgYChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKWAgZmxhZy5cbiAqL1xuY29uc3QgaXNTVkdUYWcgPSAvKiNfX1BVUkVfXyovIG1ha2VNYXAoU1ZHX1RBR1MpO1xuLyoqXG4gKiBDb21waWxlciBvbmx5LlxuICogRG8gTk9UIHVzZSBpbiBydW50aW1lIGNvZGUgcGF0aHMgdW5sZXNzIGJlaGluZCBgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpYCBmbGFnLlxuICovXG5jb25zdCBpc1ZvaWRUYWcgPSAvKiNfX1BVUkVfXyovIG1ha2VNYXAoVk9JRF9UQUdTKTtcblxuLyoqXG4gKiBPbiB0aGUgY2xpZW50IHdlIG9ubHkgbmVlZCB0byBvZmZlciBzcGVjaWFsIGNhc2VzIGZvciBib29sZWFuIGF0dHJpYnV0ZXMgdGhhdFxuICogaGF2ZSBkaWZmZXJlbnQgbmFtZXMgZnJvbSB0aGVpciBjb3JyZXNwb25kaW5nIGRvbSBwcm9wZXJ0aWVzOlxuICogLSBpdGVtc2NvcGUgLT4gTi9BXG4gKiAtIGFsbG93ZnVsbHNjcmVlbiAtPiBhbGxvd0Z1bGxzY3JlZW5cbiAqIC0gZm9ybW5vdmFsaWRhdGUgLT4gZm9ybU5vVmFsaWRhdGVcbiAqIC0gaXNtYXAgLT4gaXNNYXBcbiAqIC0gbm9tb2R1bGUgLT4gbm9Nb2R1bGVcbiAqIC0gbm92YWxpZGF0ZSAtPiBub1ZhbGlkYXRlXG4gKiAtIHJlYWRvbmx5IC0+IHJlYWRPbmx5XG4gKi9cbmNvbnN0IHNwZWNpYWxCb29sZWFuQXR0cnMgPSBgaXRlbXNjb3BlLGFsbG93ZnVsbHNjcmVlbixmb3Jtbm92YWxpZGF0ZSxpc21hcCxub21vZHVsZSxub3ZhbGlkYXRlLHJlYWRvbmx5YDtcbmNvbnN0IGlzU3BlY2lhbEJvb2xlYW5BdHRyID0gLyojX19QVVJFX18qLyBtYWtlTWFwKHNwZWNpYWxCb29sZWFuQXR0cnMpO1xuLyoqXG4gKiBUaGUgZnVsbCBsaXN0IGlzIG5lZWRlZCBkdXJpbmcgU1NSIHRvIHByb2R1Y2UgdGhlIGNvcnJlY3QgaW5pdGlhbCBtYXJrdXAuXG4gKi9cbmNvbnN0IGlzQm9vbGVhbkF0dHIgPSAvKiNfX1BVUkVfXyovIG1ha2VNYXAoc3BlY2lhbEJvb2xlYW5BdHRycyArXG4gICAgYCxhc3luYyxhdXRvZm9jdXMsYXV0b3BsYXksY29udHJvbHMsZGVmYXVsdCxkZWZlcixkaXNhYmxlZCxoaWRkZW4sYCArXG4gICAgYGxvb3Asb3BlbixyZXF1aXJlZCxyZXZlcnNlZCxzY29wZWQsc2VhbWxlc3MsYCArXG4gICAgYGNoZWNrZWQsbXV0ZWQsbXVsdGlwbGUsc2VsZWN0ZWRgKTtcbi8qKlxuICogQm9vbGVhbiBhdHRyaWJ1dGVzIHNob3VsZCBiZSBpbmNsdWRlZCBpZiB0aGUgdmFsdWUgaXMgdHJ1dGh5IG9yICcnLlxuICogZS5nLiBgPHNlbGVjdCBtdWx0aXBsZT5gIGNvbXBpbGVzIHRvIGB7IG11bHRpcGxlOiAnJyB9YFxuICovXG5mdW5jdGlvbiBpbmNsdWRlQm9vbGVhbkF0dHIodmFsdWUpIHtcbiAgICByZXR1cm4gISF2YWx1ZSB8fCB2YWx1ZSA9PT0gJyc7XG59XG5jb25zdCB1bnNhZmVBdHRyQ2hhclJFID0gL1s+Lz1cIidcXHUwMDA5XFx1MDAwYVxcdTAwMGNcXHUwMDIwXS87XG5jb25zdCBhdHRyVmFsaWRhdGlvbkNhY2hlID0ge307XG5mdW5jdGlvbiBpc1NTUlNhZmVBdHRyTmFtZShuYW1lKSB7XG4gICAgaWYgKGF0dHJWYWxpZGF0aW9uQ2FjaGUuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgcmV0dXJuIGF0dHJWYWxpZGF0aW9uQ2FjaGVbbmFtZV07XG4gICAgfVxuICAgIGNvbnN0IGlzVW5zYWZlID0gdW5zYWZlQXR0ckNoYXJSRS50ZXN0KG5hbWUpO1xuICAgIGlmIChpc1Vuc2FmZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKGB1bnNhZmUgYXR0cmlidXRlIG5hbWU6ICR7bmFtZX1gKTtcbiAgICB9XG4gICAgcmV0dXJuIChhdHRyVmFsaWRhdGlvbkNhY2hlW25hbWVdID0gIWlzVW5zYWZlKTtcbn1cbmNvbnN0IHByb3BzVG9BdHRyTWFwID0ge1xuICAgIGFjY2VwdENoYXJzZXQ6ICdhY2NlcHQtY2hhcnNldCcsXG4gICAgY2xhc3NOYW1lOiAnY2xhc3MnLFxuICAgIGh0bWxGb3I6ICdmb3InLFxuICAgIGh0dHBFcXVpdjogJ2h0dHAtZXF1aXYnXG59O1xuLyoqXG4gKiBLbm93biBhdHRyaWJ1dGVzLCB0aGlzIGlzIHVzZWQgZm9yIHN0cmluZ2lmaWNhdGlvbiBvZiBydW50aW1lIHN0YXRpYyBub2Rlc1xuICogc28gdGhhdCB3ZSBkb24ndCBzdHJpbmdpZnkgYmluZGluZ3MgdGhhdCBjYW5ub3QgYmUgc2V0IGZyb20gSFRNTC5cbiAqIERvbid0IGFsc28gZm9yZ2V0IHRvIGFsbG93IGBkYXRhLSpgIGFuZCBgYXJpYS0qYCFcbiAqIEdlbmVyYXRlZCBmcm9tIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUTUwvQXR0cmlidXRlc1xuICovXG5jb25zdCBpc0tub3duSHRtbEF0dHIgPSAvKiNfX1BVUkVfXyovIG1ha2VNYXAoYGFjY2VwdCxhY2NlcHQtY2hhcnNldCxhY2Nlc3NrZXksYWN0aW9uLGFsaWduLGFsbG93LGFsdCxhc3luYyxgICtcbiAgICBgYXV0b2NhcGl0YWxpemUsYXV0b2NvbXBsZXRlLGF1dG9mb2N1cyxhdXRvcGxheSxiYWNrZ3JvdW5kLGJnY29sb3IsYCArXG4gICAgYGJvcmRlcixidWZmZXJlZCxjYXB0dXJlLGNoYWxsZW5nZSxjaGFyc2V0LGNoZWNrZWQsY2l0ZSxjbGFzcyxjb2RlLGAgK1xuICAgIGBjb2RlYmFzZSxjb2xvcixjb2xzLGNvbHNwYW4sY29udGVudCxjb250ZW50ZWRpdGFibGUsY29udGV4dG1lbnUsY29udHJvbHMsYCArXG4gICAgYGNvb3Jkcyxjcm9zc29yaWdpbixjc3AsZGF0YSxkYXRldGltZSxkZWNvZGluZyxkZWZhdWx0LGRlZmVyLGRpcixkaXJuYW1lLGAgK1xuICAgIGBkaXNhYmxlZCxkb3dubG9hZCxkcmFnZ2FibGUsZHJvcHpvbmUsZW5jdHlwZSxlbnRlcmtleWhpbnQsZm9yLGZvcm0sYCArXG4gICAgYGZvcm1hY3Rpb24sZm9ybWVuY3R5cGUsZm9ybW1ldGhvZCxmb3Jtbm92YWxpZGF0ZSxmb3JtdGFyZ2V0LGhlYWRlcnMsYCArXG4gICAgYGhlaWdodCxoaWRkZW4saGlnaCxocmVmLGhyZWZsYW5nLGh0dHAtZXF1aXYsaWNvbixpZCxpbXBvcnRhbmNlLGludGVncml0eSxgICtcbiAgICBgaXNtYXAsaXRlbXByb3Asa2V5dHlwZSxraW5kLGxhYmVsLGxhbmcsbGFuZ3VhZ2UsbG9hZGluZyxsaXN0LGxvb3AsbG93LGAgK1xuICAgIGBtYW5pZmVzdCxtYXgsbWF4bGVuZ3RoLG1pbmxlbmd0aCxtZWRpYSxtaW4sbXVsdGlwbGUsbXV0ZWQsbmFtZSxub3ZhbGlkYXRlLGAgK1xuICAgIGBvcGVuLG9wdGltdW0scGF0dGVybixwaW5nLHBsYWNlaG9sZGVyLHBvc3RlcixwcmVsb2FkLHJhZGlvZ3JvdXAscmVhZG9ubHksYCArXG4gICAgYHJlZmVycmVycG9saWN5LHJlbCxyZXF1aXJlZCxyZXZlcnNlZCxyb3dzLHJvd3NwYW4sc2FuZGJveCxzY29wZSxzY29wZWQsYCArXG4gICAgYHNlbGVjdGVkLHNoYXBlLHNpemUsc2l6ZXMsc2xvdCxzcGFuLHNwZWxsY2hlY2ssc3JjLHNyY2RvYyxzcmNsYW5nLHNyY3NldCxgICtcbiAgICBgc3RhcnQsc3RlcCxzdHlsZSxzdW1tYXJ5LHRhYmluZGV4LHRhcmdldCx0aXRsZSx0cmFuc2xhdGUsdHlwZSx1c2VtYXAsYCArXG4gICAgYHZhbHVlLHdpZHRoLHdyYXBgKTtcbi8qKlxuICogR2VuZXJhdGVkIGZyb20gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvU1ZHL0F0dHJpYnV0ZVxuICovXG5jb25zdCBpc0tub3duU3ZnQXR0ciA9IC8qI19fUFVSRV9fKi8gbWFrZU1hcChgeG1sbnMsYWNjZW50LWhlaWdodCxhY2N1bXVsYXRlLGFkZGl0aXZlLGFsaWdubWVudC1iYXNlbGluZSxhbHBoYWJldGljLGFtcGxpdHVkZSxgICtcbiAgICBgYXJhYmljLWZvcm0sYXNjZW50LGF0dHJpYnV0ZU5hbWUsYXR0cmlidXRlVHlwZSxhemltdXRoLGJhc2VGcmVxdWVuY3ksYCArXG4gICAgYGJhc2VsaW5lLXNoaWZ0LGJhc2VQcm9maWxlLGJib3gsYmVnaW4sYmlhcyxieSxjYWxjTW9kZSxjYXAtaGVpZ2h0LGNsYXNzLGAgK1xuICAgIGBjbGlwLGNsaXBQYXRoVW5pdHMsY2xpcC1wYXRoLGNsaXAtcnVsZSxjb2xvcixjb2xvci1pbnRlcnBvbGF0aW9uLGAgK1xuICAgIGBjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnMsY29sb3ItcHJvZmlsZSxjb2xvci1yZW5kZXJpbmcsYCArXG4gICAgYGNvbnRlbnRTY3JpcHRUeXBlLGNvbnRlbnRTdHlsZVR5cGUsY3Jvc3NvcmlnaW4sY3Vyc29yLGN4LGN5LGQsZGVjZWxlcmF0ZSxgICtcbiAgICBgZGVzY2VudCxkaWZmdXNlQ29uc3RhbnQsZGlyZWN0aW9uLGRpc3BsYXksZGl2aXNvcixkb21pbmFudC1iYXNlbGluZSxkdXIsZHgsYCArXG4gICAgYGR5LGVkZ2VNb2RlLGVsZXZhdGlvbixlbmFibGUtYmFja2dyb3VuZCxlbmQsZXhwb25lbnQsZmlsbCxmaWxsLW9wYWNpdHksYCArXG4gICAgYGZpbGwtcnVsZSxmaWx0ZXIsZmlsdGVyUmVzLGZpbHRlclVuaXRzLGZsb29kLWNvbG9yLGZsb29kLW9wYWNpdHksYCArXG4gICAgYGZvbnQtZmFtaWx5LGZvbnQtc2l6ZSxmb250LXNpemUtYWRqdXN0LGZvbnQtc3RyZXRjaCxmb250LXN0eWxlLGAgK1xuICAgIGBmb250LXZhcmlhbnQsZm9udC13ZWlnaHQsZm9ybWF0LGZyb20sZnIsZngsZnksZzEsZzIsZ2x5cGgtbmFtZSxgICtcbiAgICBgZ2x5cGgtb3JpZW50YXRpb24taG9yaXpvbnRhbCxnbHlwaC1vcmllbnRhdGlvbi12ZXJ0aWNhbCxnbHlwaFJlZixgICtcbiAgICBgZ3JhZGllbnRUcmFuc2Zvcm0sZ3JhZGllbnRVbml0cyxoYW5naW5nLGhlaWdodCxocmVmLGhyZWZsYW5nLGhvcml6LWFkdi14LGAgK1xuICAgIGBob3Jpei1vcmlnaW4teCxpZCxpZGVvZ3JhcGhpYyxpbWFnZS1yZW5kZXJpbmcsaW4saW4yLGludGVyY2VwdCxrLGsxLGsyLGszLGAgK1xuICAgIGBrNCxrZXJuZWxNYXRyaXgsa2VybmVsVW5pdExlbmd0aCxrZXJuaW5nLGtleVBvaW50cyxrZXlTcGxpbmVzLGtleVRpbWVzLGAgK1xuICAgIGBsYW5nLGxlbmd0aEFkanVzdCxsZXR0ZXItc3BhY2luZyxsaWdodGluZy1jb2xvcixsaW1pdGluZ0NvbmVBbmdsZSxsb2NhbCxgICtcbiAgICBgbWFya2VyLWVuZCxtYXJrZXItbWlkLG1hcmtlci1zdGFydCxtYXJrZXJIZWlnaHQsbWFya2VyVW5pdHMsbWFya2VyV2lkdGgsYCArXG4gICAgYG1hc2ssbWFza0NvbnRlbnRVbml0cyxtYXNrVW5pdHMsbWF0aGVtYXRpY2FsLG1heCxtZWRpYSxtZXRob2QsbWluLG1vZGUsYCArXG4gICAgYG5hbWUsbnVtT2N0YXZlcyxvZmZzZXQsb3BhY2l0eSxvcGVyYXRvcixvcmRlcixvcmllbnQsb3JpZW50YXRpb24sb3JpZ2luLGAgK1xuICAgIGBvdmVyZmxvdyxvdmVybGluZS1wb3NpdGlvbixvdmVybGluZS10aGlja25lc3MscGFub3NlLTEscGFpbnQtb3JkZXIscGF0aCxgICtcbiAgICBgcGF0aExlbmd0aCxwYXR0ZXJuQ29udGVudFVuaXRzLHBhdHRlcm5UcmFuc2Zvcm0scGF0dGVyblVuaXRzLHBpbmcsYCArXG4gICAgYHBvaW50ZXItZXZlbnRzLHBvaW50cyxwb2ludHNBdFgscG9pbnRzQXRZLHBvaW50c0F0WixwcmVzZXJ2ZUFscGhhLGAgK1xuICAgIGBwcmVzZXJ2ZUFzcGVjdFJhdGlvLHByaW1pdGl2ZVVuaXRzLHIscmFkaXVzLHJlZmVycmVyUG9saWN5LHJlZlgscmVmWSxyZWwsYCArXG4gICAgYHJlbmRlcmluZy1pbnRlbnQscmVwZWF0Q291bnQscmVwZWF0RHVyLHJlcXVpcmVkRXh0ZW5zaW9ucyxyZXF1aXJlZEZlYXR1cmVzLGAgK1xuICAgIGByZXN0YXJ0LHJlc3VsdCxyb3RhdGUscngscnksc2NhbGUsc2VlZCxzaGFwZS1yZW5kZXJpbmcsc2xvcGUsc3BhY2luZyxgICtcbiAgICBgc3BlY3VsYXJDb25zdGFudCxzcGVjdWxhckV4cG9uZW50LHNwZWVkLHNwcmVhZE1ldGhvZCxzdGFydE9mZnNldCxgICtcbiAgICBgc3RkRGV2aWF0aW9uLHN0ZW1oLHN0ZW12LHN0aXRjaFRpbGVzLHN0b3AtY29sb3Isc3RvcC1vcGFjaXR5LGAgK1xuICAgIGBzdHJpa2V0aHJvdWdoLXBvc2l0aW9uLHN0cmlrZXRocm91Z2gtdGhpY2tuZXNzLHN0cmluZyxzdHJva2UsYCArXG4gICAgYHN0cm9rZS1kYXNoYXJyYXksc3Ryb2tlLWRhc2hvZmZzZXQsc3Ryb2tlLWxpbmVjYXAsc3Ryb2tlLWxpbmVqb2luLGAgK1xuICAgIGBzdHJva2UtbWl0ZXJsaW1pdCxzdHJva2Utb3BhY2l0eSxzdHJva2Utd2lkdGgsc3R5bGUsc3VyZmFjZVNjYWxlLGAgK1xuICAgIGBzeXN0ZW1MYW5ndWFnZSx0YWJpbmRleCx0YWJsZVZhbHVlcyx0YXJnZXQsdGFyZ2V0WCx0YXJnZXRZLHRleHQtYW5jaG9yLGAgK1xuICAgIGB0ZXh0LWRlY29yYXRpb24sdGV4dC1yZW5kZXJpbmcsdGV4dExlbmd0aCx0byx0cmFuc2Zvcm0sdHJhbnNmb3JtLW9yaWdpbixgICtcbiAgICBgdHlwZSx1MSx1Mix1bmRlcmxpbmUtcG9zaXRpb24sdW5kZXJsaW5lLXRoaWNrbmVzcyx1bmljb2RlLHVuaWNvZGUtYmlkaSxgICtcbiAgICBgdW5pY29kZS1yYW5nZSx1bml0cy1wZXItZW0sdi1hbHBoYWJldGljLHYtaGFuZ2luZyx2LWlkZW9ncmFwaGljLGAgK1xuICAgIGB2LW1hdGhlbWF0aWNhbCx2YWx1ZXMsdmVjdG9yLWVmZmVjdCx2ZXJzaW9uLHZlcnQtYWR2LXksdmVydC1vcmlnaW4teCxgICtcbiAgICBgdmVydC1vcmlnaW4teSx2aWV3Qm94LHZpZXdUYXJnZXQsdmlzaWJpbGl0eSx3aWR0aCx3aWR0aHMsd29yZC1zcGFjaW5nLGAgK1xuICAgIGB3cml0aW5nLW1vZGUseCx4LWhlaWdodCx4MSx4Mix4Q2hhbm5lbFNlbGVjdG9yLHhsaW5rOmFjdHVhdGUseGxpbms6YXJjcm9sZSxgICtcbiAgICBgeGxpbms6aHJlZix4bGluazpyb2xlLHhsaW5rOnNob3cseGxpbms6dGl0bGUseGxpbms6dHlwZSx4bWw6YmFzZSx4bWw6bGFuZyxgICtcbiAgICBgeG1sOnNwYWNlLHkseTEseTIseUNoYW5uZWxTZWxlY3Rvcix6LHpvb21BbmRQYW5gKTtcblxuY29uc3QgZXNjYXBlUkUgPSAvW1wiJyY8Pl0vO1xuZnVuY3Rpb24gZXNjYXBlSHRtbChzdHJpbmcpIHtcbiAgICBjb25zdCBzdHIgPSAnJyArIHN0cmluZztcbiAgICBjb25zdCBtYXRjaCA9IGVzY2FwZVJFLmV4ZWMoc3RyKTtcbiAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgIHJldHVybiBzdHI7XG4gICAgfVxuICAgIGxldCBodG1sID0gJyc7XG4gICAgbGV0IGVzY2FwZWQ7XG4gICAgbGV0IGluZGV4O1xuICAgIGxldCBsYXN0SW5kZXggPSAwO1xuICAgIGZvciAoaW5kZXggPSBtYXRjaC5pbmRleDsgaW5kZXggPCBzdHIubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgIHN3aXRjaCAoc3RyLmNoYXJDb2RlQXQoaW5kZXgpKSB7XG4gICAgICAgICAgICBjYXNlIDM0OiAvLyBcIlxuICAgICAgICAgICAgICAgIGVzY2FwZWQgPSAnJnF1b3Q7JztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMzg6IC8vICZcbiAgICAgICAgICAgICAgICBlc2NhcGVkID0gJyZhbXA7JztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMzk6IC8vICdcbiAgICAgICAgICAgICAgICBlc2NhcGVkID0gJyYjMzk7JztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNjA6IC8vIDxcbiAgICAgICAgICAgICAgICBlc2NhcGVkID0gJyZsdDsnO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA2MjogLy8gPlxuICAgICAgICAgICAgICAgIGVzY2FwZWQgPSAnJmd0Oyc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsYXN0SW5kZXggIT09IGluZGV4KSB7XG4gICAgICAgICAgICBodG1sICs9IHN0ci5zbGljZShsYXN0SW5kZXgsIGluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICBsYXN0SW5kZXggPSBpbmRleCArIDE7XG4gICAgICAgIGh0bWwgKz0gZXNjYXBlZDtcbiAgICB9XG4gICAgcmV0dXJuIGxhc3RJbmRleCAhPT0gaW5kZXggPyBodG1sICsgc3RyLnNsaWNlKGxhc3RJbmRleCwgaW5kZXgpIDogaHRtbDtcbn1cbi8vIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sNTIvc3ludGF4Lmh0bWwjY29tbWVudHNcbmNvbnN0IGNvbW1lbnRTdHJpcFJFID0gL14tPz58PCEtLXwtLT58LS0hPnw8IS0kL2c7XG5mdW5jdGlvbiBlc2NhcGVIdG1sQ29tbWVudChzcmMpIHtcbiAgICByZXR1cm4gc3JjLnJlcGxhY2UoY29tbWVudFN0cmlwUkUsICcnKTtcbn1cblxuZnVuY3Rpb24gbG9vc2VDb21wYXJlQXJyYXlzKGEsIGIpIHtcbiAgICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgbGV0IGVxdWFsID0gdHJ1ZTtcbiAgICBmb3IgKGxldCBpID0gMDsgZXF1YWwgJiYgaSA8IGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZXF1YWwgPSBsb29zZUVxdWFsKGFbaV0sIGJbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gZXF1YWw7XG59XG5mdW5jdGlvbiBsb29zZUVxdWFsKGEsIGIpIHtcbiAgICBpZiAoYSA9PT0gYilcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgbGV0IGFWYWxpZFR5cGUgPSBpc0RhdGUoYSk7XG4gICAgbGV0IGJWYWxpZFR5cGUgPSBpc0RhdGUoYik7XG4gICAgaWYgKGFWYWxpZFR5cGUgfHwgYlZhbGlkVHlwZSkge1xuICAgICAgICByZXR1cm4gYVZhbGlkVHlwZSAmJiBiVmFsaWRUeXBlID8gYS5nZXRUaW1lKCkgPT09IGIuZ2V0VGltZSgpIDogZmFsc2U7XG4gICAgfVxuICAgIGFWYWxpZFR5cGUgPSBpc1N5bWJvbChhKTtcbiAgICBiVmFsaWRUeXBlID0gaXNTeW1ib2woYik7XG4gICAgaWYgKGFWYWxpZFR5cGUgfHwgYlZhbGlkVHlwZSkge1xuICAgICAgICByZXR1cm4gYSA9PT0gYjtcbiAgICB9XG4gICAgYVZhbGlkVHlwZSA9IGlzQXJyYXkoYSk7XG4gICAgYlZhbGlkVHlwZSA9IGlzQXJyYXkoYik7XG4gICAgaWYgKGFWYWxpZFR5cGUgfHwgYlZhbGlkVHlwZSkge1xuICAgICAgICByZXR1cm4gYVZhbGlkVHlwZSAmJiBiVmFsaWRUeXBlID8gbG9vc2VDb21wYXJlQXJyYXlzKGEsIGIpIDogZmFsc2U7XG4gICAgfVxuICAgIGFWYWxpZFR5cGUgPSBpc09iamVjdChhKTtcbiAgICBiVmFsaWRUeXBlID0gaXNPYmplY3QoYik7XG4gICAgaWYgKGFWYWxpZFR5cGUgfHwgYlZhbGlkVHlwZSkge1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWY6IHRoaXMgaWYgd2lsbCBwcm9iYWJseSBuZXZlciBiZSBjYWxsZWQgKi9cbiAgICAgICAgaWYgKCFhVmFsaWRUeXBlIHx8ICFiVmFsaWRUeXBlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYUtleXNDb3VudCA9IE9iamVjdC5rZXlzKGEpLmxlbmd0aDtcbiAgICAgICAgY29uc3QgYktleXNDb3VudCA9IE9iamVjdC5rZXlzKGIpLmxlbmd0aDtcbiAgICAgICAgaWYgKGFLZXlzQ291bnQgIT09IGJLZXlzQ291bnQpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBhKSB7XG4gICAgICAgICAgICBjb25zdCBhSGFzS2V5ID0gYS5oYXNPd25Qcm9wZXJ0eShrZXkpO1xuICAgICAgICAgICAgY29uc3QgYkhhc0tleSA9IGIuaGFzT3duUHJvcGVydHkoa2V5KTtcbiAgICAgICAgICAgIGlmICgoYUhhc0tleSAmJiAhYkhhc0tleSkgfHxcbiAgICAgICAgICAgICAgICAoIWFIYXNLZXkgJiYgYkhhc0tleSkgfHxcbiAgICAgICAgICAgICAgICAhbG9vc2VFcXVhbChhW2tleV0sIGJba2V5XSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFN0cmluZyhhKSA9PT0gU3RyaW5nKGIpO1xufVxuZnVuY3Rpb24gbG9vc2VJbmRleE9mKGFyciwgdmFsKSB7XG4gICAgcmV0dXJuIGFyci5maW5kSW5kZXgoaXRlbSA9PiBsb29zZUVxdWFsKGl0ZW0sIHZhbCkpO1xufVxuXG4vKipcbiAqIEZvciBjb252ZXJ0aW5nIHt7IGludGVycG9sYXRpb24gfX0gdmFsdWVzIHRvIGRpc3BsYXllZCBzdHJpbmdzLlxuICogQHByaXZhdGVcbiAqL1xuY29uc3QgdG9EaXNwbGF5U3RyaW5nID0gKHZhbCkgPT4ge1xuICAgIHJldHVybiBpc1N0cmluZyh2YWwpXG4gICAgICAgID8gdmFsXG4gICAgICAgIDogdmFsID09IG51bGxcbiAgICAgICAgICAgID8gJydcbiAgICAgICAgICAgIDogaXNBcnJheSh2YWwpIHx8XG4gICAgICAgICAgICAgICAgKGlzT2JqZWN0KHZhbCkgJiZcbiAgICAgICAgICAgICAgICAgICAgKHZhbC50b1N0cmluZyA9PT0gb2JqZWN0VG9TdHJpbmcgfHwgIWlzRnVuY3Rpb24odmFsLnRvU3RyaW5nKSkpXG4gICAgICAgICAgICAgICAgPyBKU09OLnN0cmluZ2lmeSh2YWwsIHJlcGxhY2VyLCAyKVxuICAgICAgICAgICAgICAgIDogU3RyaW5nKHZhbCk7XG59O1xuY29uc3QgcmVwbGFjZXIgPSAoX2tleSwgdmFsKSA9PiB7XG4gICAgLy8gY2FuJ3QgdXNlIGlzUmVmIGhlcmUgc2luY2UgQHZ1ZS9zaGFyZWQgaGFzIG5vIGRlcHNcbiAgICBpZiAodmFsICYmIHZhbC5fX3ZfaXNSZWYpIHtcbiAgICAgICAgcmV0dXJuIHJlcGxhY2VyKF9rZXksIHZhbC52YWx1ZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzTWFwKHZhbCkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFtgTWFwKCR7dmFsLnNpemV9KWBdOiBbLi4udmFsLmVudHJpZXMoKV0ucmVkdWNlKChlbnRyaWVzLCBba2V5LCB2YWxdKSA9PiB7XG4gICAgICAgICAgICAgICAgZW50cmllc1tgJHtrZXl9ID0+YF0gPSB2YWw7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVudHJpZXM7XG4gICAgICAgICAgICB9LCB7fSlcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNTZXQodmFsKSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgW2BTZXQoJHt2YWwuc2l6ZX0pYF06IFsuLi52YWwudmFsdWVzKCldXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzT2JqZWN0KHZhbCkgJiYgIWlzQXJyYXkodmFsKSAmJiAhaXNQbGFpbk9iamVjdCh2YWwpKSB7XG4gICAgICAgIHJldHVybiBTdHJpbmcodmFsKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbDtcbn07XG5cbmNvbnN0IEVNUFRZX09CSiA9IChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKVxuICAgID8gT2JqZWN0LmZyZWV6ZSh7fSlcbiAgICA6IHt9O1xuY29uc3QgRU1QVFlfQVJSID0gKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gT2JqZWN0LmZyZWV6ZShbXSkgOiBbXTtcbmNvbnN0IE5PT1AgPSAoKSA9PiB7IH07XG4vKipcbiAqIEFsd2F5cyByZXR1cm4gZmFsc2UuXG4gKi9cbmNvbnN0IE5PID0gKCkgPT4gZmFsc2U7XG5jb25zdCBvblJFID0gL15vblteYS16XS87XG5jb25zdCBpc09uID0gKGtleSkgPT4gb25SRS50ZXN0KGtleSk7XG5jb25zdCBpc01vZGVsTGlzdGVuZXIgPSAoa2V5KSA9PiBrZXkuc3RhcnRzV2l0aCgnb25VcGRhdGU6Jyk7XG5jb25zdCBleHRlbmQgPSBPYmplY3QuYXNzaWduO1xuY29uc3QgcmVtb3ZlID0gKGFyciwgZWwpID0+IHtcbiAgICBjb25zdCBpID0gYXJyLmluZGV4T2YoZWwpO1xuICAgIGlmIChpID4gLTEpIHtcbiAgICAgICAgYXJyLnNwbGljZShpLCAxKTtcbiAgICB9XG59O1xuY29uc3QgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuY29uc3QgaGFzT3duID0gKHZhbCwga2V5KSA9PiBoYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbCwga2V5KTtcbmNvbnN0IGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuY29uc3QgaXNNYXAgPSAodmFsKSA9PiB0b1R5cGVTdHJpbmcodmFsKSA9PT0gJ1tvYmplY3QgTWFwXSc7XG5jb25zdCBpc1NldCA9ICh2YWwpID0+IHRvVHlwZVN0cmluZyh2YWwpID09PSAnW29iamVjdCBTZXRdJztcbmNvbnN0IGlzRGF0ZSA9ICh2YWwpID0+IHRvVHlwZVN0cmluZyh2YWwpID09PSAnW29iamVjdCBEYXRlXSc7XG5jb25zdCBpc0Z1bmN0aW9uID0gKHZhbCkgPT4gdHlwZW9mIHZhbCA9PT0gJ2Z1bmN0aW9uJztcbmNvbnN0IGlzU3RyaW5nID0gKHZhbCkgPT4gdHlwZW9mIHZhbCA9PT0gJ3N0cmluZyc7XG5jb25zdCBpc1N5bWJvbCA9ICh2YWwpID0+IHR5cGVvZiB2YWwgPT09ICdzeW1ib2wnO1xuY29uc3QgaXNPYmplY3QgPSAodmFsKSA9PiB2YWwgIT09IG51bGwgJiYgdHlwZW9mIHZhbCA9PT0gJ29iamVjdCc7XG5jb25zdCBpc1Byb21pc2UgPSAodmFsKSA9PiB7XG4gICAgcmV0dXJuIGlzT2JqZWN0KHZhbCkgJiYgaXNGdW5jdGlvbih2YWwudGhlbikgJiYgaXNGdW5jdGlvbih2YWwuY2F0Y2gpO1xufTtcbmNvbnN0IG9iamVjdFRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcbmNvbnN0IHRvVHlwZVN0cmluZyA9ICh2YWx1ZSkgPT4gb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSk7XG5jb25zdCB0b1Jhd1R5cGUgPSAodmFsdWUpID0+IHtcbiAgICAvLyBleHRyYWN0IFwiUmF3VHlwZVwiIGZyb20gc3RyaW5ncyBsaWtlIFwiW29iamVjdCBSYXdUeXBlXVwiXG4gICAgcmV0dXJuIHRvVHlwZVN0cmluZyh2YWx1ZSkuc2xpY2UoOCwgLTEpO1xufTtcbmNvbnN0IGlzUGxhaW5PYmplY3QgPSAodmFsKSA9PiB0b1R5cGVTdHJpbmcodmFsKSA9PT0gJ1tvYmplY3QgT2JqZWN0XSc7XG5jb25zdCBpc0ludGVnZXJLZXkgPSAoa2V5KSA9PiBpc1N0cmluZyhrZXkpICYmXG4gICAga2V5ICE9PSAnTmFOJyAmJlxuICAgIGtleVswXSAhPT0gJy0nICYmXG4gICAgJycgKyBwYXJzZUludChrZXksIDEwKSA9PT0ga2V5O1xuY29uc3QgaXNSZXNlcnZlZFByb3AgPSAvKiNfX1BVUkVfXyovIG1ha2VNYXAoXG4vLyB0aGUgbGVhZGluZyBjb21tYSBpcyBpbnRlbnRpb25hbCBzbyBlbXB0eSBzdHJpbmcgXCJcIiBpcyBhbHNvIGluY2x1ZGVkXG4nLGtleSxyZWYscmVmX2ZvcixyZWZfa2V5LCcgK1xuICAgICdvblZub2RlQmVmb3JlTW91bnQsb25Wbm9kZU1vdW50ZWQsJyArXG4gICAgJ29uVm5vZGVCZWZvcmVVcGRhdGUsb25Wbm9kZVVwZGF0ZWQsJyArXG4gICAgJ29uVm5vZGVCZWZvcmVVbm1vdW50LG9uVm5vZGVVbm1vdW50ZWQnKTtcbmNvbnN0IGlzQnVpbHRJbkRpcmVjdGl2ZSA9IC8qI19fUFVSRV9fKi8gbWFrZU1hcCgnYmluZCxjbG9hayxlbHNlLWlmLGVsc2UsZm9yLGh0bWwsaWYsbW9kZWwsb24sb25jZSxwcmUsc2hvdyxzbG90LHRleHQsbWVtbycpO1xuY29uc3QgY2FjaGVTdHJpbmdGdW5jdGlvbiA9IChmbikgPT4ge1xuICAgIGNvbnN0IGNhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICByZXR1cm4gKChzdHIpID0+IHtcbiAgICAgICAgY29uc3QgaGl0ID0gY2FjaGVbc3RyXTtcbiAgICAgICAgcmV0dXJuIGhpdCB8fCAoY2FjaGVbc3RyXSA9IGZuKHN0cikpO1xuICAgIH0pO1xufTtcbmNvbnN0IGNhbWVsaXplUkUgPSAvLShcXHcpL2c7XG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmNvbnN0IGNhbWVsaXplID0gY2FjaGVTdHJpbmdGdW5jdGlvbigoc3RyKSA9PiB7XG4gICAgcmV0dXJuIHN0ci5yZXBsYWNlKGNhbWVsaXplUkUsIChfLCBjKSA9PiAoYyA/IGMudG9VcHBlckNhc2UoKSA6ICcnKSk7XG59KTtcbmNvbnN0IGh5cGhlbmF0ZVJFID0gL1xcQihbQS1aXSkvZztcbi8qKlxuICogQHByaXZhdGVcbiAqL1xuY29uc3QgaHlwaGVuYXRlID0gY2FjaGVTdHJpbmdGdW5jdGlvbigoc3RyKSA9PiBzdHIucmVwbGFjZShoeXBoZW5hdGVSRSwgJy0kMScpLnRvTG93ZXJDYXNlKCkpO1xuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5jb25zdCBjYXBpdGFsaXplID0gY2FjaGVTdHJpbmdGdW5jdGlvbigoc3RyKSA9PiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSkpO1xuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5jb25zdCB0b0hhbmRsZXJLZXkgPSBjYWNoZVN0cmluZ0Z1bmN0aW9uKChzdHIpID0+IHN0ciA/IGBvbiR7Y2FwaXRhbGl6ZShzdHIpfWAgOiBgYCk7XG4vLyBjb21wYXJlIHdoZXRoZXIgYSB2YWx1ZSBoYXMgY2hhbmdlZCwgYWNjb3VudGluZyBmb3IgTmFOLlxuY29uc3QgaGFzQ2hhbmdlZCA9ICh2YWx1ZSwgb2xkVmFsdWUpID0+ICFPYmplY3QuaXModmFsdWUsIG9sZFZhbHVlKTtcbmNvbnN0IGludm9rZUFycmF5Rm5zID0gKGZucywgYXJnKSA9PiB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZm5zW2ldKGFyZyk7XG4gICAgfVxufTtcbmNvbnN0IGRlZiA9IChvYmosIGtleSwgdmFsdWUpID0+IHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgdmFsdWVcbiAgICB9KTtcbn07XG5jb25zdCB0b051bWJlciA9ICh2YWwpID0+IHtcbiAgICBjb25zdCBuID0gcGFyc2VGbG9hdCh2YWwpO1xuICAgIHJldHVybiBpc05hTihuKSA/IHZhbCA6IG47XG59O1xubGV0IF9nbG9iYWxUaGlzO1xuY29uc3QgZ2V0R2xvYmFsVGhpcyA9ICgpID0+IHtcbiAgICByZXR1cm4gKF9nbG9iYWxUaGlzIHx8XG4gICAgICAgIChfZ2xvYmFsVGhpcyA9XG4gICAgICAgICAgICB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgICAgICA/IGdsb2JhbFRoaXNcbiAgICAgICAgICAgICAgICA6IHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICAgICAgICAgICAgICA/IHNlbGZcbiAgICAgICAgICAgICAgICAgICAgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICAgICAgICAgICAgICAgICAgPyB3aW5kb3dcbiAgICAgICAgICAgICAgICAgICAgICAgIDogdHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGdsb2JhbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDoge30pKTtcbn07XG5jb25zdCBpZGVudFJFID0gL15bXyRhLXpBLVpcXHhBMC1cXHVGRkZGXVtfJGEtekEtWjAtOVxceEEwLVxcdUZGRkZdKiQvO1xuZnVuY3Rpb24gZ2VuUHJvcHNBY2Nlc3NFeHAobmFtZSkge1xuICAgIHJldHVybiBpZGVudFJFLnRlc3QobmFtZSlcbiAgICAgICAgPyBgX19wcm9wcy4ke25hbWV9YFxuICAgICAgICA6IGBfX3Byb3BzWyR7SlNPTi5zdHJpbmdpZnkobmFtZSl9XWA7XG59XG5cbmV4cG9ydCB7IEVNUFRZX0FSUiwgRU1QVFlfT0JKLCBOTywgTk9PUCwgUGF0Y2hGbGFnTmFtZXMsIGNhbWVsaXplLCBjYXBpdGFsaXplLCBkZWYsIGVzY2FwZUh0bWwsIGVzY2FwZUh0bWxDb21tZW50LCBleHRlbmQsIGdlblByb3BzQWNjZXNzRXhwLCBnZW5lcmF0ZUNvZGVGcmFtZSwgZ2V0R2xvYmFsVGhpcywgaGFzQ2hhbmdlZCwgaGFzT3duLCBoeXBoZW5hdGUsIGluY2x1ZGVCb29sZWFuQXR0ciwgaW52b2tlQXJyYXlGbnMsIGlzQXJyYXksIGlzQm9vbGVhbkF0dHIsIGlzQnVpbHRJbkRpcmVjdGl2ZSwgaXNEYXRlLCBpc0Z1bmN0aW9uLCBpc0dsb2JhbGx5V2hpdGVsaXN0ZWQsIGlzSFRNTFRhZywgaXNJbnRlZ2VyS2V5LCBpc0tub3duSHRtbEF0dHIsIGlzS25vd25TdmdBdHRyLCBpc01hcCwgaXNNb2RlbExpc3RlbmVyLCBpc09iamVjdCwgaXNPbiwgaXNQbGFpbk9iamVjdCwgaXNQcm9taXNlLCBpc1Jlc2VydmVkUHJvcCwgaXNTU1JTYWZlQXR0ck5hbWUsIGlzU1ZHVGFnLCBpc1NldCwgaXNTcGVjaWFsQm9vbGVhbkF0dHIsIGlzU3RyaW5nLCBpc1N5bWJvbCwgaXNWb2lkVGFnLCBsb29zZUVxdWFsLCBsb29zZUluZGV4T2YsIG1ha2VNYXAsIG5vcm1hbGl6ZUNsYXNzLCBub3JtYWxpemVQcm9wcywgbm9ybWFsaXplU3R5bGUsIG9iamVjdFRvU3RyaW5nLCBwYXJzZVN0cmluZ1N0eWxlLCBwcm9wc1RvQXR0ck1hcCwgcmVtb3ZlLCBzbG90RmxhZ3NUZXh0LCBzdHJpbmdpZnlTdHlsZSwgdG9EaXNwbGF5U3RyaW5nLCB0b0hhbmRsZXJLZXksIHRvTnVtYmVyLCB0b1Jhd1R5cGUsIHRvVHlwZVN0cmluZyB9O1xuIiwiaW1wb3J0IHsgZXh0ZW5kLCBpc0FycmF5LCB0b051bWJlciwgaXNNYXAsIGlzSW50ZWdlcktleSwgaGFzT3duLCBpc1N5bWJvbCwgaXNPYmplY3QsIGhhc0NoYW5nZWQsIG1ha2VNYXAsIGNhcGl0YWxpemUsIHRvUmF3VHlwZSwgZGVmLCBpc0Z1bmN0aW9uLCBOT09QIH0gZnJvbSAnQHZ1ZS9zaGFyZWQnO1xuXG5mdW5jdGlvbiB3YXJuKG1zZywgLi4uYXJncykge1xuICAgIGNvbnNvbGUud2FybihgW1Z1ZSB3YXJuXSAke21zZ31gLCAuLi5hcmdzKTtcbn1cblxubGV0IGFjdGl2ZUVmZmVjdFNjb3BlO1xuY2xhc3MgRWZmZWN0U2NvcGUge1xuICAgIGNvbnN0cnVjdG9yKGRldGFjaGVkID0gZmFsc2UpIHtcbiAgICAgICAgdGhpcy5kZXRhY2hlZCA9IGRldGFjaGVkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZWZmZWN0cyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNsZWFudXBzID0gW107XG4gICAgICAgIHRoaXMucGFyZW50ID0gYWN0aXZlRWZmZWN0U2NvcGU7XG4gICAgICAgIGlmICghZGV0YWNoZWQgJiYgYWN0aXZlRWZmZWN0U2NvcGUpIHtcbiAgICAgICAgICAgIHRoaXMuaW5kZXggPVxuICAgICAgICAgICAgICAgIChhY3RpdmVFZmZlY3RTY29wZS5zY29wZXMgfHwgKGFjdGl2ZUVmZmVjdFNjb3BlLnNjb3BlcyA9IFtdKSkucHVzaCh0aGlzKSAtIDE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcnVuKGZuKSB7XG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZSkge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudEVmZmVjdFNjb3BlID0gYWN0aXZlRWZmZWN0U2NvcGU7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGFjdGl2ZUVmZmVjdFNjb3BlID0gdGhpcztcbiAgICAgICAgICAgICAgICByZXR1cm4gZm4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIGFjdGl2ZUVmZmVjdFNjb3BlID0gY3VycmVudEVmZmVjdFNjb3BlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgd2FybihgY2Fubm90IHJ1biBhbiBpbmFjdGl2ZSBlZmZlY3Qgc2NvcGUuYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBzaG91bGQgb25seSBiZSBjYWxsZWQgb24gbm9uLWRldGFjaGVkIHNjb3Blc1xuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIG9uKCkge1xuICAgICAgICBhY3RpdmVFZmZlY3RTY29wZSA9IHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIG9uIG5vbi1kZXRhY2hlZCBzY29wZXNcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBvZmYoKSB7XG4gICAgICAgIGFjdGl2ZUVmZmVjdFNjb3BlID0gdGhpcy5wYXJlbnQ7XG4gICAgfVxuICAgIHN0b3AoZnJvbVBhcmVudCkge1xuICAgICAgICBpZiAodGhpcy5hY3RpdmUpIHtcbiAgICAgICAgICAgIGxldCBpLCBsO1xuICAgICAgICAgICAgZm9yIChpID0gMCwgbCA9IHRoaXMuZWZmZWN0cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVmZmVjdHNbaV0uc3RvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChpID0gMCwgbCA9IHRoaXMuY2xlYW51cHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhbnVwc1tpXSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuc2NvcGVzKSB7XG4gICAgICAgICAgICAgICAgZm9yIChpID0gMCwgbCA9IHRoaXMuc2NvcGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNjb3Blc1tpXS5zdG9wKHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIG5lc3RlZCBzY29wZSwgZGVyZWZlcmVuY2UgZnJvbSBwYXJlbnQgdG8gYXZvaWQgbWVtb3J5IGxlYWtzXG4gICAgICAgICAgICBpZiAoIXRoaXMuZGV0YWNoZWQgJiYgdGhpcy5wYXJlbnQgJiYgIWZyb21QYXJlbnQpIHtcbiAgICAgICAgICAgICAgICAvLyBvcHRpbWl6ZWQgTygxKSByZW1vdmFsXG4gICAgICAgICAgICAgICAgY29uc3QgbGFzdCA9IHRoaXMucGFyZW50LnNjb3Blcy5wb3AoKTtcbiAgICAgICAgICAgICAgICBpZiAobGFzdCAmJiBsYXN0ICE9PSB0aGlzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnNjb3Blc1t0aGlzLmluZGV4XSA9IGxhc3Q7XG4gICAgICAgICAgICAgICAgICAgIGxhc3QuaW5kZXggPSB0aGlzLmluZGV4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGVmZmVjdFNjb3BlKGRldGFjaGVkKSB7XG4gICAgcmV0dXJuIG5ldyBFZmZlY3RTY29wZShkZXRhY2hlZCk7XG59XG5mdW5jdGlvbiByZWNvcmRFZmZlY3RTY29wZShlZmZlY3QsIHNjb3BlID0gYWN0aXZlRWZmZWN0U2NvcGUpIHtcbiAgICBpZiAoc2NvcGUgJiYgc2NvcGUuYWN0aXZlKSB7XG4gICAgICAgIHNjb3BlLmVmZmVjdHMucHVzaChlZmZlY3QpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldEN1cnJlbnRTY29wZSgpIHtcbiAgICByZXR1cm4gYWN0aXZlRWZmZWN0U2NvcGU7XG59XG5mdW5jdGlvbiBvblNjb3BlRGlzcG9zZShmbikge1xuICAgIGlmIChhY3RpdmVFZmZlY3RTY29wZSkge1xuICAgICAgICBhY3RpdmVFZmZlY3RTY29wZS5jbGVhbnVwcy5wdXNoKGZuKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIHdhcm4oYG9uU2NvcGVEaXNwb3NlKCkgaXMgY2FsbGVkIHdoZW4gdGhlcmUgaXMgbm8gYWN0aXZlIGVmZmVjdCBzY29wZWAgK1xuICAgICAgICAgICAgYCB0byBiZSBhc3NvY2lhdGVkIHdpdGguYCk7XG4gICAgfVxufVxuXG5jb25zdCBjcmVhdGVEZXAgPSAoZWZmZWN0cykgPT4ge1xuICAgIGNvbnN0IGRlcCA9IG5ldyBTZXQoZWZmZWN0cyk7XG4gICAgZGVwLncgPSAwO1xuICAgIGRlcC5uID0gMDtcbiAgICByZXR1cm4gZGVwO1xufTtcbmNvbnN0IHdhc1RyYWNrZWQgPSAoZGVwKSA9PiAoZGVwLncgJiB0cmFja09wQml0KSA+IDA7XG5jb25zdCBuZXdUcmFja2VkID0gKGRlcCkgPT4gKGRlcC5uICYgdHJhY2tPcEJpdCkgPiAwO1xuY29uc3QgaW5pdERlcE1hcmtlcnMgPSAoeyBkZXBzIH0pID0+IHtcbiAgICBpZiAoZGVwcy5sZW5ndGgpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkZXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBkZXBzW2ldLncgfD0gdHJhY2tPcEJpdDsgLy8gc2V0IHdhcyB0cmFja2VkXG4gICAgICAgIH1cbiAgICB9XG59O1xuY29uc3QgZmluYWxpemVEZXBNYXJrZXJzID0gKGVmZmVjdCkgPT4ge1xuICAgIGNvbnN0IHsgZGVwcyB9ID0gZWZmZWN0O1xuICAgIGlmIChkZXBzLmxlbmd0aCkge1xuICAgICAgICBsZXQgcHRyID0gMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkZXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBkZXAgPSBkZXBzW2ldO1xuICAgICAgICAgICAgaWYgKHdhc1RyYWNrZWQoZGVwKSAmJiAhbmV3VHJhY2tlZChkZXApKSB7XG4gICAgICAgICAgICAgICAgZGVwLmRlbGV0ZShlZmZlY3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZGVwc1twdHIrK10gPSBkZXA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBjbGVhciBiaXRzXG4gICAgICAgICAgICBkZXAudyAmPSB+dHJhY2tPcEJpdDtcbiAgICAgICAgICAgIGRlcC5uICY9IH50cmFja09wQml0O1xuICAgICAgICB9XG4gICAgICAgIGRlcHMubGVuZ3RoID0gcHRyO1xuICAgIH1cbn07XG5cbmNvbnN0IHRhcmdldE1hcCA9IG5ldyBXZWFrTWFwKCk7XG4vLyBUaGUgbnVtYmVyIG9mIGVmZmVjdHMgY3VycmVudGx5IGJlaW5nIHRyYWNrZWQgcmVjdXJzaXZlbHkuXG5sZXQgZWZmZWN0VHJhY2tEZXB0aCA9IDA7XG5sZXQgdHJhY2tPcEJpdCA9IDE7XG4vKipcbiAqIFRoZSBiaXR3aXNlIHRyYWNrIG1hcmtlcnMgc3VwcG9ydCBhdCBtb3N0IDMwIGxldmVscyBvZiByZWN1cnNpb24uXG4gKiBUaGlzIHZhbHVlIGlzIGNob3NlbiB0byBlbmFibGUgbW9kZXJuIEpTIGVuZ2luZXMgdG8gdXNlIGEgU01JIG9uIGFsbCBwbGF0Zm9ybXMuXG4gKiBXaGVuIHJlY3Vyc2lvbiBkZXB0aCBpcyBncmVhdGVyLCBmYWxsIGJhY2sgdG8gdXNpbmcgYSBmdWxsIGNsZWFudXAuXG4gKi9cbmNvbnN0IG1heE1hcmtlckJpdHMgPSAzMDtcbmxldCBhY3RpdmVFZmZlY3Q7XG5jb25zdCBJVEVSQVRFX0tFWSA9IFN5bWJvbCgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyAnaXRlcmF0ZScgOiAnJyk7XG5jb25zdCBNQVBfS0VZX0lURVJBVEVfS0VZID0gU3ltYm9sKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/ICdNYXAga2V5IGl0ZXJhdGUnIDogJycpO1xuY2xhc3MgUmVhY3RpdmVFZmZlY3Qge1xuICAgIGNvbnN0cnVjdG9yKGZuLCBzY2hlZHVsZXIgPSBudWxsLCBzY29wZSkge1xuICAgICAgICB0aGlzLmZuID0gZm47XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgIHRoaXMuZGVwcyA9IFtdO1xuICAgICAgICB0aGlzLnBhcmVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgcmVjb3JkRWZmZWN0U2NvcGUodGhpcywgc2NvcGUpO1xuICAgIH1cbiAgICBydW4oKSB7XG4gICAgICAgIGlmICghdGhpcy5hY3RpdmUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZuKCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHBhcmVudCA9IGFjdGl2ZUVmZmVjdDtcbiAgICAgICAgbGV0IGxhc3RTaG91bGRUcmFjayA9IHNob3VsZFRyYWNrO1xuICAgICAgICB3aGlsZSAocGFyZW50KSB7XG4gICAgICAgICAgICBpZiAocGFyZW50ID09PSB0aGlzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBhY3RpdmVFZmZlY3Q7XG4gICAgICAgICAgICBhY3RpdmVFZmZlY3QgPSB0aGlzO1xuICAgICAgICAgICAgc2hvdWxkVHJhY2sgPSB0cnVlO1xuICAgICAgICAgICAgdHJhY2tPcEJpdCA9IDEgPDwgKytlZmZlY3RUcmFja0RlcHRoO1xuICAgICAgICAgICAgaWYgKGVmZmVjdFRyYWNrRGVwdGggPD0gbWF4TWFya2VyQml0cykge1xuICAgICAgICAgICAgICAgIGluaXREZXBNYXJrZXJzKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY2xlYW51cEVmZmVjdCh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZuKCk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBpZiAoZWZmZWN0VHJhY2tEZXB0aCA8PSBtYXhNYXJrZXJCaXRzKSB7XG4gICAgICAgICAgICAgICAgZmluYWxpemVEZXBNYXJrZXJzKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJhY2tPcEJpdCA9IDEgPDwgLS1lZmZlY3RUcmFja0RlcHRoO1xuICAgICAgICAgICAgYWN0aXZlRWZmZWN0ID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBzaG91bGRUcmFjayA9IGxhc3RTaG91bGRUcmFjaztcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgaWYgKHRoaXMuZGVmZXJTdG9wKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RvcCgpIHtcbiAgICAgICAgLy8gc3RvcHBlZCB3aGlsZSBydW5uaW5nIGl0c2VsZiAtIGRlZmVyIHRoZSBjbGVhbnVwXG4gICAgICAgIGlmIChhY3RpdmVFZmZlY3QgPT09IHRoaXMpIHtcbiAgICAgICAgICAgIHRoaXMuZGVmZXJTdG9wID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmFjdGl2ZSkge1xuICAgICAgICAgICAgY2xlYW51cEVmZmVjdCh0aGlzKTtcbiAgICAgICAgICAgIGlmICh0aGlzLm9uU3RvcCkge1xuICAgICAgICAgICAgICAgIHRoaXMub25TdG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gY2xlYW51cEVmZmVjdChlZmZlY3QpIHtcbiAgICBjb25zdCB7IGRlcHMgfSA9IGVmZmVjdDtcbiAgICBpZiAoZGVwcy5sZW5ndGgpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkZXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBkZXBzW2ldLmRlbGV0ZShlZmZlY3QpO1xuICAgICAgICB9XG4gICAgICAgIGRlcHMubGVuZ3RoID0gMDtcbiAgICB9XG59XG5mdW5jdGlvbiBlZmZlY3QoZm4sIG9wdGlvbnMpIHtcbiAgICBpZiAoZm4uZWZmZWN0KSB7XG4gICAgICAgIGZuID0gZm4uZWZmZWN0LmZuO1xuICAgIH1cbiAgICBjb25zdCBfZWZmZWN0ID0gbmV3IFJlYWN0aXZlRWZmZWN0KGZuKTtcbiAgICBpZiAob3B0aW9ucykge1xuICAgICAgICBleHRlbmQoX2VmZmVjdCwgb3B0aW9ucyk7XG4gICAgICAgIGlmIChvcHRpb25zLnNjb3BlKVxuICAgICAgICAgICAgcmVjb3JkRWZmZWN0U2NvcGUoX2VmZmVjdCwgb3B0aW9ucy5zY29wZSk7XG4gICAgfVxuICAgIGlmICghb3B0aW9ucyB8fCAhb3B0aW9ucy5sYXp5KSB7XG4gICAgICAgIF9lZmZlY3QucnVuKCk7XG4gICAgfVxuICAgIGNvbnN0IHJ1bm5lciA9IF9lZmZlY3QucnVuLmJpbmQoX2VmZmVjdCk7XG4gICAgcnVubmVyLmVmZmVjdCA9IF9lZmZlY3Q7XG4gICAgcmV0dXJuIHJ1bm5lcjtcbn1cbmZ1bmN0aW9uIHN0b3AocnVubmVyKSB7XG4gICAgcnVubmVyLmVmZmVjdC5zdG9wKCk7XG59XG5sZXQgc2hvdWxkVHJhY2sgPSB0cnVlO1xuY29uc3QgdHJhY2tTdGFjayA9IFtdO1xuZnVuY3Rpb24gcGF1c2VUcmFja2luZygpIHtcbiAgICB0cmFja1N0YWNrLnB1c2goc2hvdWxkVHJhY2spO1xuICAgIHNob3VsZFRyYWNrID0gZmFsc2U7XG59XG5mdW5jdGlvbiBlbmFibGVUcmFja2luZygpIHtcbiAgICB0cmFja1N0YWNrLnB1c2goc2hvdWxkVHJhY2spO1xuICAgIHNob3VsZFRyYWNrID0gdHJ1ZTtcbn1cbmZ1bmN0aW9uIHJlc2V0VHJhY2tpbmcoKSB7XG4gICAgY29uc3QgbGFzdCA9IHRyYWNrU3RhY2sucG9wKCk7XG4gICAgc2hvdWxkVHJhY2sgPSBsYXN0ID09PSB1bmRlZmluZWQgPyB0cnVlIDogbGFzdDtcbn1cbmZ1bmN0aW9uIHRyYWNrKHRhcmdldCwgdHlwZSwga2V5KSB7XG4gICAgaWYgKHNob3VsZFRyYWNrICYmIGFjdGl2ZUVmZmVjdCkge1xuICAgICAgICBsZXQgZGVwc01hcCA9IHRhcmdldE1hcC5nZXQodGFyZ2V0KTtcbiAgICAgICAgaWYgKCFkZXBzTWFwKSB7XG4gICAgICAgICAgICB0YXJnZXRNYXAuc2V0KHRhcmdldCwgKGRlcHNNYXAgPSBuZXcgTWFwKCkpKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZGVwID0gZGVwc01hcC5nZXQoa2V5KTtcbiAgICAgICAgaWYgKCFkZXApIHtcbiAgICAgICAgICAgIGRlcHNNYXAuc2V0KGtleSwgKGRlcCA9IGNyZWF0ZURlcCgpKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZXZlbnRJbmZvID0gKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpXG4gICAgICAgICAgICA/IHsgZWZmZWN0OiBhY3RpdmVFZmZlY3QsIHRhcmdldCwgdHlwZSwga2V5IH1cbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICB0cmFja0VmZmVjdHMoZGVwLCBldmVudEluZm8pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHRyYWNrRWZmZWN0cyhkZXAsIGRlYnVnZ2VyRXZlbnRFeHRyYUluZm8pIHtcbiAgICBsZXQgc2hvdWxkVHJhY2sgPSBmYWxzZTtcbiAgICBpZiAoZWZmZWN0VHJhY2tEZXB0aCA8PSBtYXhNYXJrZXJCaXRzKSB7XG4gICAgICAgIGlmICghbmV3VHJhY2tlZChkZXApKSB7XG4gICAgICAgICAgICBkZXAubiB8PSB0cmFja09wQml0OyAvLyBzZXQgbmV3bHkgdHJhY2tlZFxuICAgICAgICAgICAgc2hvdWxkVHJhY2sgPSAhd2FzVHJhY2tlZChkZXApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBGdWxsIGNsZWFudXAgbW9kZS5cbiAgICAgICAgc2hvdWxkVHJhY2sgPSAhZGVwLmhhcyhhY3RpdmVFZmZlY3QpO1xuICAgIH1cbiAgICBpZiAoc2hvdWxkVHJhY2spIHtcbiAgICAgICAgZGVwLmFkZChhY3RpdmVFZmZlY3QpO1xuICAgICAgICBhY3RpdmVFZmZlY3QuZGVwcy5wdXNoKGRlcCk7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgYWN0aXZlRWZmZWN0Lm9uVHJhY2spIHtcbiAgICAgICAgICAgIGFjdGl2ZUVmZmVjdC5vblRyYWNrKE9iamVjdC5hc3NpZ24oeyBlZmZlY3Q6IGFjdGl2ZUVmZmVjdCB9LCBkZWJ1Z2dlckV2ZW50RXh0cmFJbmZvKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiB0cmlnZ2VyKHRhcmdldCwgdHlwZSwga2V5LCBuZXdWYWx1ZSwgb2xkVmFsdWUsIG9sZFRhcmdldCkge1xuICAgIGNvbnN0IGRlcHNNYXAgPSB0YXJnZXRNYXAuZ2V0KHRhcmdldCk7XG4gICAgaWYgKCFkZXBzTWFwKSB7XG4gICAgICAgIC8vIG5ldmVyIGJlZW4gdHJhY2tlZFxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCBkZXBzID0gW107XG4gICAgaWYgKHR5cGUgPT09IFwiY2xlYXJcIiAvKiBUcmlnZ2VyT3BUeXBlcy5DTEVBUiAqLykge1xuICAgICAgICAvLyBjb2xsZWN0aW9uIGJlaW5nIGNsZWFyZWRcbiAgICAgICAgLy8gdHJpZ2dlciBhbGwgZWZmZWN0cyBmb3IgdGFyZ2V0XG4gICAgICAgIGRlcHMgPSBbLi4uZGVwc01hcC52YWx1ZXMoKV07XG4gICAgfVxuICAgIGVsc2UgaWYgKGtleSA9PT0gJ2xlbmd0aCcgJiYgaXNBcnJheSh0YXJnZXQpKSB7XG4gICAgICAgIGNvbnN0IG5ld0xlbmd0aCA9IHRvTnVtYmVyKG5ld1ZhbHVlKTtcbiAgICAgICAgZGVwc01hcC5mb3JFYWNoKChkZXAsIGtleSkgPT4ge1xuICAgICAgICAgICAgaWYgKGtleSA9PT0gJ2xlbmd0aCcgfHwga2V5ID49IG5ld0xlbmd0aCkge1xuICAgICAgICAgICAgICAgIGRlcHMucHVzaChkZXApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIHNjaGVkdWxlIHJ1bnMgZm9yIFNFVCB8IEFERCB8IERFTEVURVxuICAgICAgICBpZiAoa2V5ICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgIGRlcHMucHVzaChkZXBzTWFwLmdldChrZXkpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBhbHNvIHJ1biBmb3IgaXRlcmF0aW9uIGtleSBvbiBBREQgfCBERUxFVEUgfCBNYXAuU0VUXG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgY2FzZSBcImFkZFwiIC8qIFRyaWdnZXJPcFR5cGVzLkFERCAqLzpcbiAgICAgICAgICAgICAgICBpZiAoIWlzQXJyYXkodGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgICAgICBkZXBzLnB1c2goZGVwc01hcC5nZXQoSVRFUkFURV9LRVkpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzTWFwKHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlcHMucHVzaChkZXBzTWFwLmdldChNQVBfS0VZX0lURVJBVEVfS0VZKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNJbnRlZ2VyS2V5KGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gbmV3IGluZGV4IGFkZGVkIHRvIGFycmF5IC0+IGxlbmd0aCBjaGFuZ2VzXG4gICAgICAgICAgICAgICAgICAgIGRlcHMucHVzaChkZXBzTWFwLmdldCgnbGVuZ3RoJykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJkZWxldGVcIiAvKiBUcmlnZ2VyT3BUeXBlcy5ERUxFVEUgKi86XG4gICAgICAgICAgICAgICAgaWYgKCFpc0FycmF5KHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVwcy5wdXNoKGRlcHNNYXAuZ2V0KElURVJBVEVfS0VZKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc01hcCh0YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXBzLnB1c2goZGVwc01hcC5nZXQoTUFQX0tFWV9JVEVSQVRFX0tFWSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInNldFwiIC8qIFRyaWdnZXJPcFR5cGVzLlNFVCAqLzpcbiAgICAgICAgICAgICAgICBpZiAoaXNNYXAodGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgICAgICBkZXBzLnB1c2goZGVwc01hcC5nZXQoSVRFUkFURV9LRVkpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgZXZlbnRJbmZvID0gKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpXG4gICAgICAgID8geyB0YXJnZXQsIHR5cGUsIGtleSwgbmV3VmFsdWUsIG9sZFZhbHVlLCBvbGRUYXJnZXQgfVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICBpZiAoZGVwcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgaWYgKGRlcHNbMF0pIHtcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICB0cmlnZ2VyRWZmZWN0cyhkZXBzWzBdLCBldmVudEluZm8pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdHJpZ2dlckVmZmVjdHMoZGVwc1swXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IGVmZmVjdHMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBkZXAgb2YgZGVwcykge1xuICAgICAgICAgICAgaWYgKGRlcCkge1xuICAgICAgICAgICAgICAgIGVmZmVjdHMucHVzaCguLi5kZXApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgIHRyaWdnZXJFZmZlY3RzKGNyZWF0ZURlcChlZmZlY3RzKSwgZXZlbnRJbmZvKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRyaWdnZXJFZmZlY3RzKGNyZWF0ZURlcChlZmZlY3RzKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiB0cmlnZ2VyRWZmZWN0cyhkZXAsIGRlYnVnZ2VyRXZlbnRFeHRyYUluZm8pIHtcbiAgICAvLyBzcHJlYWQgaW50byBhcnJheSBmb3Igc3RhYmlsaXphdGlvblxuICAgIGNvbnN0IGVmZmVjdHMgPSBpc0FycmF5KGRlcCkgPyBkZXAgOiBbLi4uZGVwXTtcbiAgICBmb3IgKGNvbnN0IGVmZmVjdCBvZiBlZmZlY3RzKSB7XG4gICAgICAgIGlmIChlZmZlY3QuY29tcHV0ZWQpIHtcbiAgICAgICAgICAgIHRyaWdnZXJFZmZlY3QoZWZmZWN0LCBkZWJ1Z2dlckV2ZW50RXh0cmFJbmZvKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGVmZmVjdCBvZiBlZmZlY3RzKSB7XG4gICAgICAgIGlmICghZWZmZWN0LmNvbXB1dGVkKSB7XG4gICAgICAgICAgICB0cmlnZ2VyRWZmZWN0KGVmZmVjdCwgZGVidWdnZXJFdmVudEV4dHJhSW5mbyk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiB0cmlnZ2VyRWZmZWN0KGVmZmVjdCwgZGVidWdnZXJFdmVudEV4dHJhSW5mbykge1xuICAgIGlmIChlZmZlY3QgIT09IGFjdGl2ZUVmZmVjdCB8fCBlZmZlY3QuYWxsb3dSZWN1cnNlKSB7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgZWZmZWN0Lm9uVHJpZ2dlcikge1xuICAgICAgICAgICAgZWZmZWN0Lm9uVHJpZ2dlcihleHRlbmQoeyBlZmZlY3QgfSwgZGVidWdnZXJFdmVudEV4dHJhSW5mbykpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlZmZlY3Quc2NoZWR1bGVyKSB7XG4gICAgICAgICAgICBlZmZlY3Quc2NoZWR1bGVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBlZmZlY3QucnVuKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmNvbnN0IGlzTm9uVHJhY2thYmxlS2V5cyA9IC8qI19fUFVSRV9fKi8gbWFrZU1hcChgX19wcm90b19fLF9fdl9pc1JlZixfX2lzVnVlYCk7XG5jb25zdCBidWlsdEluU3ltYm9scyA9IG5ldyBTZXQoXG4vKiNfX1BVUkVfXyovXG5PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhTeW1ib2wpXG4gICAgLy8gaW9zMTAueCBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhTeW1ib2wpIGNhbiBlbnVtZXJhdGUgJ2FyZ3VtZW50cycgYW5kICdjYWxsZXInXG4gICAgLy8gYnV0IGFjY2Vzc2luZyB0aGVtIG9uIFN5bWJvbCBsZWFkcyB0byBUeXBlRXJyb3IgYmVjYXVzZSBTeW1ib2wgaXMgYSBzdHJpY3QgbW9kZVxuICAgIC8vIGZ1bmN0aW9uXG4gICAgLmZpbHRlcihrZXkgPT4ga2V5ICE9PSAnYXJndW1lbnRzJyAmJiBrZXkgIT09ICdjYWxsZXInKVxuICAgIC5tYXAoa2V5ID0+IFN5bWJvbFtrZXldKVxuICAgIC5maWx0ZXIoaXNTeW1ib2wpKTtcbmNvbnN0IGdldCA9IC8qI19fUFVSRV9fKi8gY3JlYXRlR2V0dGVyKCk7XG5jb25zdCBzaGFsbG93R2V0ID0gLyojX19QVVJFX18qLyBjcmVhdGVHZXR0ZXIoZmFsc2UsIHRydWUpO1xuY29uc3QgcmVhZG9ubHlHZXQgPSAvKiNfX1BVUkVfXyovIGNyZWF0ZUdldHRlcih0cnVlKTtcbmNvbnN0IHNoYWxsb3dSZWFkb25seUdldCA9IC8qI19fUFVSRV9fKi8gY3JlYXRlR2V0dGVyKHRydWUsIHRydWUpO1xuY29uc3QgYXJyYXlJbnN0cnVtZW50YXRpb25zID0gLyojX19QVVJFX18qLyBjcmVhdGVBcnJheUluc3RydW1lbnRhdGlvbnMoKTtcbmZ1bmN0aW9uIGNyZWF0ZUFycmF5SW5zdHJ1bWVudGF0aW9ucygpIHtcbiAgICBjb25zdCBpbnN0cnVtZW50YXRpb25zID0ge307XG4gICAgWydpbmNsdWRlcycsICdpbmRleE9mJywgJ2xhc3RJbmRleE9mJ10uZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICBpbnN0cnVtZW50YXRpb25zW2tleV0gPSBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICAgICAgY29uc3QgYXJyID0gdG9SYXcodGhpcyk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IHRoaXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdHJhY2soYXJyLCBcImdldFwiIC8qIFRyYWNrT3BUeXBlcy5HRVQgKi8sIGkgKyAnJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB3ZSBydW4gdGhlIG1ldGhvZCB1c2luZyB0aGUgb3JpZ2luYWwgYXJncyBmaXJzdCAod2hpY2ggbWF5IGJlIHJlYWN0aXZlKVxuICAgICAgICAgICAgY29uc3QgcmVzID0gYXJyW2tleV0oLi4uYXJncyk7XG4gICAgICAgICAgICBpZiAocmVzID09PSAtMSB8fCByZXMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgLy8gaWYgdGhhdCBkaWRuJ3Qgd29yaywgcnVuIGl0IGFnYWluIHVzaW5nIHJhdyB2YWx1ZXMuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFycltrZXldKC4uLmFyZ3MubWFwKHRvUmF3KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0pO1xuICAgIFsncHVzaCcsICdwb3AnLCAnc2hpZnQnLCAndW5zaGlmdCcsICdzcGxpY2UnXS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgIGluc3RydW1lbnRhdGlvbnNba2V5XSA9IGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICBwYXVzZVRyYWNraW5nKCk7XG4gICAgICAgICAgICBjb25zdCByZXMgPSB0b1Jhdyh0aGlzKVtrZXldLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgICAgICAgICAgcmVzZXRUcmFja2luZygpO1xuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfTtcbiAgICB9KTtcbiAgICByZXR1cm4gaW5zdHJ1bWVudGF0aW9ucztcbn1cbmZ1bmN0aW9uIGNyZWF0ZUdldHRlcihpc1JlYWRvbmx5ID0gZmFsc2UsIHNoYWxsb3cgPSBmYWxzZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiBnZXQodGFyZ2V0LCBrZXksIHJlY2VpdmVyKSB7XG4gICAgICAgIGlmIChrZXkgPT09IFwiX192X2lzUmVhY3RpdmVcIiAvKiBSZWFjdGl2ZUZsYWdzLklTX1JFQUNUSVZFICovKSB7XG4gICAgICAgICAgICByZXR1cm4gIWlzUmVhZG9ubHk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoa2V5ID09PSBcIl9fdl9pc1JlYWRvbmx5XCIgLyogUmVhY3RpdmVGbGFncy5JU19SRUFET05MWSAqLykge1xuICAgICAgICAgICAgcmV0dXJuIGlzUmVhZG9ubHk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoa2V5ID09PSBcIl9fdl9pc1NoYWxsb3dcIiAvKiBSZWFjdGl2ZUZsYWdzLklTX1NIQUxMT1cgKi8pIHtcbiAgICAgICAgICAgIHJldHVybiBzaGFsbG93O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGtleSA9PT0gXCJfX3ZfcmF3XCIgLyogUmVhY3RpdmVGbGFncy5SQVcgKi8gJiZcbiAgICAgICAgICAgIHJlY2VpdmVyID09PVxuICAgICAgICAgICAgICAgIChpc1JlYWRvbmx5XG4gICAgICAgICAgICAgICAgICAgID8gc2hhbGxvd1xuICAgICAgICAgICAgICAgICAgICAgICAgPyBzaGFsbG93UmVhZG9ubHlNYXBcbiAgICAgICAgICAgICAgICAgICAgICAgIDogcmVhZG9ubHlNYXBcbiAgICAgICAgICAgICAgICAgICAgOiBzaGFsbG93XG4gICAgICAgICAgICAgICAgICAgICAgICA/IHNoYWxsb3dSZWFjdGl2ZU1hcFxuICAgICAgICAgICAgICAgICAgICAgICAgOiByZWFjdGl2ZU1hcCkuZ2V0KHRhcmdldCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdGFyZ2V0SXNBcnJheSA9IGlzQXJyYXkodGFyZ2V0KTtcbiAgICAgICAgaWYgKCFpc1JlYWRvbmx5ICYmIHRhcmdldElzQXJyYXkgJiYgaGFzT3duKGFycmF5SW5zdHJ1bWVudGF0aW9ucywga2V5KSkge1xuICAgICAgICAgICAgcmV0dXJuIFJlZmxlY3QuZ2V0KGFycmF5SW5zdHJ1bWVudGF0aW9ucywga2V5LCByZWNlaXZlcik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzID0gUmVmbGVjdC5nZXQodGFyZ2V0LCBrZXksIHJlY2VpdmVyKTtcbiAgICAgICAgaWYgKGlzU3ltYm9sKGtleSkgPyBidWlsdEluU3ltYm9scy5oYXMoa2V5KSA6IGlzTm9uVHJhY2thYmxlS2V5cyhrZXkpKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNSZWFkb25seSkge1xuICAgICAgICAgICAgdHJhY2sodGFyZ2V0LCBcImdldFwiIC8qIFRyYWNrT3BUeXBlcy5HRVQgKi8sIGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNoYWxsb3cpIHtcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzUmVmKHJlcykpIHtcbiAgICAgICAgICAgIC8vIHJlZiB1bndyYXBwaW5nIC0gc2tpcCB1bndyYXAgZm9yIEFycmF5ICsgaW50ZWdlciBrZXkuXG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0SXNBcnJheSAmJiBpc0ludGVnZXJLZXkoa2V5KSA/IHJlcyA6IHJlcy52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNPYmplY3QocmVzKSkge1xuICAgICAgICAgICAgLy8gQ29udmVydCByZXR1cm5lZCB2YWx1ZSBpbnRvIGEgcHJveHkgYXMgd2VsbC4gd2UgZG8gdGhlIGlzT2JqZWN0IGNoZWNrXG4gICAgICAgICAgICAvLyBoZXJlIHRvIGF2b2lkIGludmFsaWQgdmFsdWUgd2FybmluZy4gQWxzbyBuZWVkIHRvIGxhenkgYWNjZXNzIHJlYWRvbmx5XG4gICAgICAgICAgICAvLyBhbmQgcmVhY3RpdmUgaGVyZSB0byBhdm9pZCBjaXJjdWxhciBkZXBlbmRlbmN5LlxuICAgICAgICAgICAgcmV0dXJuIGlzUmVhZG9ubHkgPyByZWFkb25seShyZXMpIDogcmVhY3RpdmUocmVzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH07XG59XG5jb25zdCBzZXQgPSAvKiNfX1BVUkVfXyovIGNyZWF0ZVNldHRlcigpO1xuY29uc3Qgc2hhbGxvd1NldCA9IC8qI19fUFVSRV9fKi8gY3JlYXRlU2V0dGVyKHRydWUpO1xuZnVuY3Rpb24gY3JlYXRlU2V0dGVyKHNoYWxsb3cgPSBmYWxzZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiBzZXQodGFyZ2V0LCBrZXksIHZhbHVlLCByZWNlaXZlcikge1xuICAgICAgICBsZXQgb2xkVmFsdWUgPSB0YXJnZXRba2V5XTtcbiAgICAgICAgaWYgKGlzUmVhZG9ubHkob2xkVmFsdWUpICYmIGlzUmVmKG9sZFZhbHVlKSAmJiAhaXNSZWYodmFsdWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzaGFsbG93KSB7XG4gICAgICAgICAgICBpZiAoIWlzU2hhbGxvdyh2YWx1ZSkgJiYgIWlzUmVhZG9ubHkodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgb2xkVmFsdWUgPSB0b1JhdyhvbGRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSB0b1Jhdyh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWlzQXJyYXkodGFyZ2V0KSAmJiBpc1JlZihvbGRWYWx1ZSkgJiYgIWlzUmVmKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIG9sZFZhbHVlLnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaGFkS2V5ID0gaXNBcnJheSh0YXJnZXQpICYmIGlzSW50ZWdlcktleShrZXkpXG4gICAgICAgICAgICA/IE51bWJlcihrZXkpIDwgdGFyZ2V0Lmxlbmd0aFxuICAgICAgICAgICAgOiBoYXNPd24odGFyZ2V0LCBrZXkpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBSZWZsZWN0LnNldCh0YXJnZXQsIGtleSwgdmFsdWUsIHJlY2VpdmVyKTtcbiAgICAgICAgLy8gZG9uJ3QgdHJpZ2dlciBpZiB0YXJnZXQgaXMgc29tZXRoaW5nIHVwIGluIHRoZSBwcm90b3R5cGUgY2hhaW4gb2Ygb3JpZ2luYWxcbiAgICAgICAgaWYgKHRhcmdldCA9PT0gdG9SYXcocmVjZWl2ZXIpKSB7XG4gICAgICAgICAgICBpZiAoIWhhZEtleSkge1xuICAgICAgICAgICAgICAgIHRyaWdnZXIodGFyZ2V0LCBcImFkZFwiIC8qIFRyaWdnZXJPcFR5cGVzLkFERCAqLywga2V5LCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChoYXNDaGFuZ2VkKHZhbHVlLCBvbGRWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICB0cmlnZ2VyKHRhcmdldCwgXCJzZXRcIiAvKiBUcmlnZ2VyT3BUeXBlcy5TRVQgKi8sIGtleSwgdmFsdWUsIG9sZFZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG59XG5mdW5jdGlvbiBkZWxldGVQcm9wZXJ0eSh0YXJnZXQsIGtleSkge1xuICAgIGNvbnN0IGhhZEtleSA9IGhhc093bih0YXJnZXQsIGtleSk7XG4gICAgY29uc3Qgb2xkVmFsdWUgPSB0YXJnZXRba2V5XTtcbiAgICBjb25zdCByZXN1bHQgPSBSZWZsZWN0LmRlbGV0ZVByb3BlcnR5KHRhcmdldCwga2V5KTtcbiAgICBpZiAocmVzdWx0ICYmIGhhZEtleSkge1xuICAgICAgICB0cmlnZ2VyKHRhcmdldCwgXCJkZWxldGVcIiAvKiBUcmlnZ2VyT3BUeXBlcy5ERUxFVEUgKi8sIGtleSwgdW5kZWZpbmVkLCBvbGRWYWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBoYXModGFyZ2V0LCBrZXkpIHtcbiAgICBjb25zdCByZXN1bHQgPSBSZWZsZWN0Lmhhcyh0YXJnZXQsIGtleSk7XG4gICAgaWYgKCFpc1N5bWJvbChrZXkpIHx8ICFidWlsdEluU3ltYm9scy5oYXMoa2V5KSkge1xuICAgICAgICB0cmFjayh0YXJnZXQsIFwiaGFzXCIgLyogVHJhY2tPcFR5cGVzLkhBUyAqLywga2V5KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIG93bktleXModGFyZ2V0KSB7XG4gICAgdHJhY2sodGFyZ2V0LCBcIml0ZXJhdGVcIiAvKiBUcmFja09wVHlwZXMuSVRFUkFURSAqLywgaXNBcnJheSh0YXJnZXQpID8gJ2xlbmd0aCcgOiBJVEVSQVRFX0tFWSk7XG4gICAgcmV0dXJuIFJlZmxlY3Qub3duS2V5cyh0YXJnZXQpO1xufVxuY29uc3QgbXV0YWJsZUhhbmRsZXJzID0ge1xuICAgIGdldCxcbiAgICBzZXQsXG4gICAgZGVsZXRlUHJvcGVydHksXG4gICAgaGFzLFxuICAgIG93bktleXNcbn07XG5jb25zdCByZWFkb25seUhhbmRsZXJzID0ge1xuICAgIGdldDogcmVhZG9ubHlHZXQsXG4gICAgc2V0KHRhcmdldCwga2V5KSB7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgIHdhcm4oYFNldCBvcGVyYXRpb24gb24ga2V5IFwiJHtTdHJpbmcoa2V5KX1cIiBmYWlsZWQ6IHRhcmdldCBpcyByZWFkb25seS5gLCB0YXJnZXQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG4gICAgZGVsZXRlUHJvcGVydHkodGFyZ2V0LCBrZXkpIHtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgd2FybihgRGVsZXRlIG9wZXJhdGlvbiBvbiBrZXkgXCIke1N0cmluZyhrZXkpfVwiIGZhaWxlZDogdGFyZ2V0IGlzIHJlYWRvbmx5LmAsIHRhcmdldCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufTtcbmNvbnN0IHNoYWxsb3dSZWFjdGl2ZUhhbmRsZXJzID0gLyojX19QVVJFX18qLyBleHRlbmQoe30sIG11dGFibGVIYW5kbGVycywge1xuICAgIGdldDogc2hhbGxvd0dldCxcbiAgICBzZXQ6IHNoYWxsb3dTZXRcbn0pO1xuLy8gUHJvcHMgaGFuZGxlcnMgYXJlIHNwZWNpYWwgaW4gdGhlIHNlbnNlIHRoYXQgaXQgc2hvdWxkIG5vdCB1bndyYXAgdG9wLWxldmVsXG4vLyByZWZzIChpbiBvcmRlciB0byBhbGxvdyByZWZzIHRvIGJlIGV4cGxpY2l0bHkgcGFzc2VkIGRvd24pLCBidXQgc2hvdWxkXG4vLyByZXRhaW4gdGhlIHJlYWN0aXZpdHkgb2YgdGhlIG5vcm1hbCByZWFkb25seSBvYmplY3QuXG5jb25zdCBzaGFsbG93UmVhZG9ubHlIYW5kbGVycyA9IC8qI19fUFVSRV9fKi8gZXh0ZW5kKHt9LCByZWFkb25seUhhbmRsZXJzLCB7XG4gICAgZ2V0OiBzaGFsbG93UmVhZG9ubHlHZXRcbn0pO1xuXG5jb25zdCB0b1NoYWxsb3cgPSAodmFsdWUpID0+IHZhbHVlO1xuY29uc3QgZ2V0UHJvdG8gPSAodikgPT4gUmVmbGVjdC5nZXRQcm90b3R5cGVPZih2KTtcbmZ1bmN0aW9uIGdldCQxKHRhcmdldCwga2V5LCBpc1JlYWRvbmx5ID0gZmFsc2UsIGlzU2hhbGxvdyA9IGZhbHNlKSB7XG4gICAgLy8gIzE3NzI6IHJlYWRvbmx5KHJlYWN0aXZlKE1hcCkpIHNob3VsZCByZXR1cm4gcmVhZG9ubHkgKyByZWFjdGl2ZSB2ZXJzaW9uXG4gICAgLy8gb2YgdGhlIHZhbHVlXG4gICAgdGFyZ2V0ID0gdGFyZ2V0W1wiX192X3Jhd1wiIC8qIFJlYWN0aXZlRmxhZ3MuUkFXICovXTtcbiAgICBjb25zdCByYXdUYXJnZXQgPSB0b1Jhdyh0YXJnZXQpO1xuICAgIGNvbnN0IHJhd0tleSA9IHRvUmF3KGtleSk7XG4gICAgaWYgKCFpc1JlYWRvbmx5KSB7XG4gICAgICAgIGlmIChrZXkgIT09IHJhd0tleSkge1xuICAgICAgICAgICAgdHJhY2socmF3VGFyZ2V0LCBcImdldFwiIC8qIFRyYWNrT3BUeXBlcy5HRVQgKi8sIGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgdHJhY2socmF3VGFyZ2V0LCBcImdldFwiIC8qIFRyYWNrT3BUeXBlcy5HRVQgKi8sIHJhd0tleSk7XG4gICAgfVxuICAgIGNvbnN0IHsgaGFzIH0gPSBnZXRQcm90byhyYXdUYXJnZXQpO1xuICAgIGNvbnN0IHdyYXAgPSBpc1NoYWxsb3cgPyB0b1NoYWxsb3cgOiBpc1JlYWRvbmx5ID8gdG9SZWFkb25seSA6IHRvUmVhY3RpdmU7XG4gICAgaWYgKGhhcy5jYWxsKHJhd1RhcmdldCwga2V5KSkge1xuICAgICAgICByZXR1cm4gd3JhcCh0YXJnZXQuZ2V0KGtleSkpO1xuICAgIH1cbiAgICBlbHNlIGlmIChoYXMuY2FsbChyYXdUYXJnZXQsIHJhd0tleSkpIHtcbiAgICAgICAgcmV0dXJuIHdyYXAodGFyZ2V0LmdldChyYXdLZXkpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodGFyZ2V0ICE9PSByYXdUYXJnZXQpIHtcbiAgICAgICAgLy8gIzM2MDIgcmVhZG9ubHkocmVhY3RpdmUoTWFwKSlcbiAgICAgICAgLy8gZW5zdXJlIHRoYXQgdGhlIG5lc3RlZCByZWFjdGl2ZSBgTWFwYCBjYW4gZG8gdHJhY2tpbmcgZm9yIGl0c2VsZlxuICAgICAgICB0YXJnZXQuZ2V0KGtleSk7XG4gICAgfVxufVxuZnVuY3Rpb24gaGFzJDEoa2V5LCBpc1JlYWRvbmx5ID0gZmFsc2UpIHtcbiAgICBjb25zdCB0YXJnZXQgPSB0aGlzW1wiX192X3Jhd1wiIC8qIFJlYWN0aXZlRmxhZ3MuUkFXICovXTtcbiAgICBjb25zdCByYXdUYXJnZXQgPSB0b1Jhdyh0YXJnZXQpO1xuICAgIGNvbnN0IHJhd0tleSA9IHRvUmF3KGtleSk7XG4gICAgaWYgKCFpc1JlYWRvbmx5KSB7XG4gICAgICAgIGlmIChrZXkgIT09IHJhd0tleSkge1xuICAgICAgICAgICAgdHJhY2socmF3VGFyZ2V0LCBcImhhc1wiIC8qIFRyYWNrT3BUeXBlcy5IQVMgKi8sIGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgdHJhY2socmF3VGFyZ2V0LCBcImhhc1wiIC8qIFRyYWNrT3BUeXBlcy5IQVMgKi8sIHJhd0tleSk7XG4gICAgfVxuICAgIHJldHVybiBrZXkgPT09IHJhd0tleVxuICAgICAgICA/IHRhcmdldC5oYXMoa2V5KVxuICAgICAgICA6IHRhcmdldC5oYXMoa2V5KSB8fCB0YXJnZXQuaGFzKHJhd0tleSk7XG59XG5mdW5jdGlvbiBzaXplKHRhcmdldCwgaXNSZWFkb25seSA9IGZhbHNlKSB7XG4gICAgdGFyZ2V0ID0gdGFyZ2V0W1wiX192X3Jhd1wiIC8qIFJlYWN0aXZlRmxhZ3MuUkFXICovXTtcbiAgICAhaXNSZWFkb25seSAmJiB0cmFjayh0b1Jhdyh0YXJnZXQpLCBcIml0ZXJhdGVcIiAvKiBUcmFja09wVHlwZXMuSVRFUkFURSAqLywgSVRFUkFURV9LRVkpO1xuICAgIHJldHVybiBSZWZsZWN0LmdldCh0YXJnZXQsICdzaXplJywgdGFyZ2V0KTtcbn1cbmZ1bmN0aW9uIGFkZCh2YWx1ZSkge1xuICAgIHZhbHVlID0gdG9SYXcodmFsdWUpO1xuICAgIGNvbnN0IHRhcmdldCA9IHRvUmF3KHRoaXMpO1xuICAgIGNvbnN0IHByb3RvID0gZ2V0UHJvdG8odGFyZ2V0KTtcbiAgICBjb25zdCBoYWRLZXkgPSBwcm90by5oYXMuY2FsbCh0YXJnZXQsIHZhbHVlKTtcbiAgICBpZiAoIWhhZEtleSkge1xuICAgICAgICB0YXJnZXQuYWRkKHZhbHVlKTtcbiAgICAgICAgdHJpZ2dlcih0YXJnZXQsIFwiYWRkXCIgLyogVHJpZ2dlck9wVHlwZXMuQUREICovLCB2YWx1ZSwgdmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbn1cbmZ1bmN0aW9uIHNldCQxKGtleSwgdmFsdWUpIHtcbiAgICB2YWx1ZSA9IHRvUmF3KHZhbHVlKTtcbiAgICBjb25zdCB0YXJnZXQgPSB0b1Jhdyh0aGlzKTtcbiAgICBjb25zdCB7IGhhcywgZ2V0IH0gPSBnZXRQcm90byh0YXJnZXQpO1xuICAgIGxldCBoYWRLZXkgPSBoYXMuY2FsbCh0YXJnZXQsIGtleSk7XG4gICAgaWYgKCFoYWRLZXkpIHtcbiAgICAgICAga2V5ID0gdG9SYXcoa2V5KTtcbiAgICAgICAgaGFkS2V5ID0gaGFzLmNhbGwodGFyZ2V0LCBrZXkpO1xuICAgIH1cbiAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgY2hlY2tJZGVudGl0eUtleXModGFyZ2V0LCBoYXMsIGtleSk7XG4gICAgfVxuICAgIGNvbnN0IG9sZFZhbHVlID0gZ2V0LmNhbGwodGFyZ2V0LCBrZXkpO1xuICAgIHRhcmdldC5zZXQoa2V5LCB2YWx1ZSk7XG4gICAgaWYgKCFoYWRLZXkpIHtcbiAgICAgICAgdHJpZ2dlcih0YXJnZXQsIFwiYWRkXCIgLyogVHJpZ2dlck9wVHlwZXMuQUREICovLCBrZXksIHZhbHVlKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaGFzQ2hhbmdlZCh2YWx1ZSwgb2xkVmFsdWUpKSB7XG4gICAgICAgIHRyaWdnZXIodGFyZ2V0LCBcInNldFwiIC8qIFRyaWdnZXJPcFR5cGVzLlNFVCAqLywga2V5LCB2YWx1ZSwgb2xkVmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbn1cbmZ1bmN0aW9uIGRlbGV0ZUVudHJ5KGtleSkge1xuICAgIGNvbnN0IHRhcmdldCA9IHRvUmF3KHRoaXMpO1xuICAgIGNvbnN0IHsgaGFzLCBnZXQgfSA9IGdldFByb3RvKHRhcmdldCk7XG4gICAgbGV0IGhhZEtleSA9IGhhcy5jYWxsKHRhcmdldCwga2V5KTtcbiAgICBpZiAoIWhhZEtleSkge1xuICAgICAgICBrZXkgPSB0b1JhdyhrZXkpO1xuICAgICAgICBoYWRLZXkgPSBoYXMuY2FsbCh0YXJnZXQsIGtleSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICBjaGVja0lkZW50aXR5S2V5cyh0YXJnZXQsIGhhcywga2V5KTtcbiAgICB9XG4gICAgY29uc3Qgb2xkVmFsdWUgPSBnZXQgPyBnZXQuY2FsbCh0YXJnZXQsIGtleSkgOiB1bmRlZmluZWQ7XG4gICAgLy8gZm9yd2FyZCB0aGUgb3BlcmF0aW9uIGJlZm9yZSBxdWV1ZWluZyByZWFjdGlvbnNcbiAgICBjb25zdCByZXN1bHQgPSB0YXJnZXQuZGVsZXRlKGtleSk7XG4gICAgaWYgKGhhZEtleSkge1xuICAgICAgICB0cmlnZ2VyKHRhcmdldCwgXCJkZWxldGVcIiAvKiBUcmlnZ2VyT3BUeXBlcy5ERUxFVEUgKi8sIGtleSwgdW5kZWZpbmVkLCBvbGRWYWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBjbGVhcigpIHtcbiAgICBjb25zdCB0YXJnZXQgPSB0b1Jhdyh0aGlzKTtcbiAgICBjb25zdCBoYWRJdGVtcyA9IHRhcmdldC5zaXplICE9PSAwO1xuICAgIGNvbnN0IG9sZFRhcmdldCA9IChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKVxuICAgICAgICA/IGlzTWFwKHRhcmdldClcbiAgICAgICAgICAgID8gbmV3IE1hcCh0YXJnZXQpXG4gICAgICAgICAgICA6IG5ldyBTZXQodGFyZ2V0KVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAvLyBmb3J3YXJkIHRoZSBvcGVyYXRpb24gYmVmb3JlIHF1ZXVlaW5nIHJlYWN0aW9uc1xuICAgIGNvbnN0IHJlc3VsdCA9IHRhcmdldC5jbGVhcigpO1xuICAgIGlmIChoYWRJdGVtcykge1xuICAgICAgICB0cmlnZ2VyKHRhcmdldCwgXCJjbGVhclwiIC8qIFRyaWdnZXJPcFR5cGVzLkNMRUFSICovLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgb2xkVGFyZ2V0KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUZvckVhY2goaXNSZWFkb25seSwgaXNTaGFsbG93KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGZvckVhY2goY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgICAgY29uc3Qgb2JzZXJ2ZWQgPSB0aGlzO1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBvYnNlcnZlZFtcIl9fdl9yYXdcIiAvKiBSZWFjdGl2ZUZsYWdzLlJBVyAqL107XG4gICAgICAgIGNvbnN0IHJhd1RhcmdldCA9IHRvUmF3KHRhcmdldCk7XG4gICAgICAgIGNvbnN0IHdyYXAgPSBpc1NoYWxsb3cgPyB0b1NoYWxsb3cgOiBpc1JlYWRvbmx5ID8gdG9SZWFkb25seSA6IHRvUmVhY3RpdmU7XG4gICAgICAgICFpc1JlYWRvbmx5ICYmIHRyYWNrKHJhd1RhcmdldCwgXCJpdGVyYXRlXCIgLyogVHJhY2tPcFR5cGVzLklURVJBVEUgKi8sIElURVJBVEVfS0VZKTtcbiAgICAgICAgcmV0dXJuIHRhcmdldC5mb3JFYWNoKCh2YWx1ZSwga2V5KSA9PiB7XG4gICAgICAgICAgICAvLyBpbXBvcnRhbnQ6IG1ha2Ugc3VyZSB0aGUgY2FsbGJhY2sgaXNcbiAgICAgICAgICAgIC8vIDEuIGludm9rZWQgd2l0aCB0aGUgcmVhY3RpdmUgbWFwIGFzIGB0aGlzYCBhbmQgM3JkIGFyZ1xuICAgICAgICAgICAgLy8gMi4gdGhlIHZhbHVlIHJlY2VpdmVkIHNob3VsZCBiZSBhIGNvcnJlc3BvbmRpbmcgcmVhY3RpdmUvcmVhZG9ubHkuXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2suY2FsbCh0aGlzQXJnLCB3cmFwKHZhbHVlKSwgd3JhcChrZXkpLCBvYnNlcnZlZCk7XG4gICAgICAgIH0pO1xuICAgIH07XG59XG5mdW5jdGlvbiBjcmVhdGVJdGVyYWJsZU1ldGhvZChtZXRob2QsIGlzUmVhZG9ubHksIGlzU2hhbGxvdykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSB0aGlzW1wiX192X3Jhd1wiIC8qIFJlYWN0aXZlRmxhZ3MuUkFXICovXTtcbiAgICAgICAgY29uc3QgcmF3VGFyZ2V0ID0gdG9SYXcodGFyZ2V0KTtcbiAgICAgICAgY29uc3QgdGFyZ2V0SXNNYXAgPSBpc01hcChyYXdUYXJnZXQpO1xuICAgICAgICBjb25zdCBpc1BhaXIgPSBtZXRob2QgPT09ICdlbnRyaWVzJyB8fCAobWV0aG9kID09PSBTeW1ib2wuaXRlcmF0b3IgJiYgdGFyZ2V0SXNNYXApO1xuICAgICAgICBjb25zdCBpc0tleU9ubHkgPSBtZXRob2QgPT09ICdrZXlzJyAmJiB0YXJnZXRJc01hcDtcbiAgICAgICAgY29uc3QgaW5uZXJJdGVyYXRvciA9IHRhcmdldFttZXRob2RdKC4uLmFyZ3MpO1xuICAgICAgICBjb25zdCB3cmFwID0gaXNTaGFsbG93ID8gdG9TaGFsbG93IDogaXNSZWFkb25seSA/IHRvUmVhZG9ubHkgOiB0b1JlYWN0aXZlO1xuICAgICAgICAhaXNSZWFkb25seSAmJlxuICAgICAgICAgICAgdHJhY2socmF3VGFyZ2V0LCBcIml0ZXJhdGVcIiAvKiBUcmFja09wVHlwZXMuSVRFUkFURSAqLywgaXNLZXlPbmx5ID8gTUFQX0tFWV9JVEVSQVRFX0tFWSA6IElURVJBVEVfS0VZKTtcbiAgICAgICAgLy8gcmV0dXJuIGEgd3JhcHBlZCBpdGVyYXRvciB3aGljaCByZXR1cm5zIG9ic2VydmVkIHZlcnNpb25zIG9mIHRoZVxuICAgICAgICAvLyB2YWx1ZXMgZW1pdHRlZCBmcm9tIHRoZSByZWFsIGl0ZXJhdG9yXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAvLyBpdGVyYXRvciBwcm90b2NvbFxuICAgICAgICAgICAgbmV4dCgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHZhbHVlLCBkb25lIH0gPSBpbm5lckl0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZG9uZVxuICAgICAgICAgICAgICAgICAgICA/IHsgdmFsdWUsIGRvbmUgfVxuICAgICAgICAgICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBpc1BhaXIgPyBbd3JhcCh2YWx1ZVswXSksIHdyYXAodmFsdWVbMV0pXSA6IHdyYXAodmFsdWUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9uZVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8vIGl0ZXJhYmxlIHByb3RvY29sXG4gICAgICAgICAgICBbU3ltYm9sLml0ZXJhdG9yXSgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlUmVhZG9ubHlNZXRob2QodHlwZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICBjb25zdCBrZXkgPSBhcmdzWzBdID8gYG9uIGtleSBcIiR7YXJnc1swXX1cIiBgIDogYGA7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYCR7Y2FwaXRhbGl6ZSh0eXBlKX0gb3BlcmF0aW9uICR7a2V5fWZhaWxlZDogdGFyZ2V0IGlzIHJlYWRvbmx5LmAsIHRvUmF3KHRoaXMpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHlwZSA9PT0gXCJkZWxldGVcIiAvKiBUcmlnZ2VyT3BUeXBlcy5ERUxFVEUgKi8gPyBmYWxzZSA6IHRoaXM7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUluc3RydW1lbnRhdGlvbnMoKSB7XG4gICAgY29uc3QgbXV0YWJsZUluc3RydW1lbnRhdGlvbnMgPSB7XG4gICAgICAgIGdldChrZXkpIHtcbiAgICAgICAgICAgIHJldHVybiBnZXQkMSh0aGlzLCBrZXkpO1xuICAgICAgICB9LFxuICAgICAgICBnZXQgc2l6ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBzaXplKHRoaXMpO1xuICAgICAgICB9LFxuICAgICAgICBoYXM6IGhhcyQxLFxuICAgICAgICBhZGQsXG4gICAgICAgIHNldDogc2V0JDEsXG4gICAgICAgIGRlbGV0ZTogZGVsZXRlRW50cnksXG4gICAgICAgIGNsZWFyLFxuICAgICAgICBmb3JFYWNoOiBjcmVhdGVGb3JFYWNoKGZhbHNlLCBmYWxzZSlcbiAgICB9O1xuICAgIGNvbnN0IHNoYWxsb3dJbnN0cnVtZW50YXRpb25zID0ge1xuICAgICAgICBnZXQoa2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gZ2V0JDEodGhpcywga2V5LCBmYWxzZSwgdHJ1ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGdldCBzaXplKCkge1xuICAgICAgICAgICAgcmV0dXJuIHNpemUodGhpcyk7XG4gICAgICAgIH0sXG4gICAgICAgIGhhczogaGFzJDEsXG4gICAgICAgIGFkZCxcbiAgICAgICAgc2V0OiBzZXQkMSxcbiAgICAgICAgZGVsZXRlOiBkZWxldGVFbnRyeSxcbiAgICAgICAgY2xlYXIsXG4gICAgICAgIGZvckVhY2g6IGNyZWF0ZUZvckVhY2goZmFsc2UsIHRydWUpXG4gICAgfTtcbiAgICBjb25zdCByZWFkb25seUluc3RydW1lbnRhdGlvbnMgPSB7XG4gICAgICAgIGdldChrZXkpIHtcbiAgICAgICAgICAgIHJldHVybiBnZXQkMSh0aGlzLCBrZXksIHRydWUpO1xuICAgICAgICB9LFxuICAgICAgICBnZXQgc2l6ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBzaXplKHRoaXMsIHRydWUpO1xuICAgICAgICB9LFxuICAgICAgICBoYXMoa2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gaGFzJDEuY2FsbCh0aGlzLCBrZXksIHRydWUpO1xuICAgICAgICB9LFxuICAgICAgICBhZGQ6IGNyZWF0ZVJlYWRvbmx5TWV0aG9kKFwiYWRkXCIgLyogVHJpZ2dlck9wVHlwZXMuQUREICovKSxcbiAgICAgICAgc2V0OiBjcmVhdGVSZWFkb25seU1ldGhvZChcInNldFwiIC8qIFRyaWdnZXJPcFR5cGVzLlNFVCAqLyksXG4gICAgICAgIGRlbGV0ZTogY3JlYXRlUmVhZG9ubHlNZXRob2QoXCJkZWxldGVcIiAvKiBUcmlnZ2VyT3BUeXBlcy5ERUxFVEUgKi8pLFxuICAgICAgICBjbGVhcjogY3JlYXRlUmVhZG9ubHlNZXRob2QoXCJjbGVhclwiIC8qIFRyaWdnZXJPcFR5cGVzLkNMRUFSICovKSxcbiAgICAgICAgZm9yRWFjaDogY3JlYXRlRm9yRWFjaCh0cnVlLCBmYWxzZSlcbiAgICB9O1xuICAgIGNvbnN0IHNoYWxsb3dSZWFkb25seUluc3RydW1lbnRhdGlvbnMgPSB7XG4gICAgICAgIGdldChrZXkpIHtcbiAgICAgICAgICAgIHJldHVybiBnZXQkMSh0aGlzLCBrZXksIHRydWUsIHRydWUpO1xuICAgICAgICB9LFxuICAgICAgICBnZXQgc2l6ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBzaXplKHRoaXMsIHRydWUpO1xuICAgICAgICB9LFxuICAgICAgICBoYXMoa2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gaGFzJDEuY2FsbCh0aGlzLCBrZXksIHRydWUpO1xuICAgICAgICB9LFxuICAgICAgICBhZGQ6IGNyZWF0ZVJlYWRvbmx5TWV0aG9kKFwiYWRkXCIgLyogVHJpZ2dlck9wVHlwZXMuQUREICovKSxcbiAgICAgICAgc2V0OiBjcmVhdGVSZWFkb25seU1ldGhvZChcInNldFwiIC8qIFRyaWdnZXJPcFR5cGVzLlNFVCAqLyksXG4gICAgICAgIGRlbGV0ZTogY3JlYXRlUmVhZG9ubHlNZXRob2QoXCJkZWxldGVcIiAvKiBUcmlnZ2VyT3BUeXBlcy5ERUxFVEUgKi8pLFxuICAgICAgICBjbGVhcjogY3JlYXRlUmVhZG9ubHlNZXRob2QoXCJjbGVhclwiIC8qIFRyaWdnZXJPcFR5cGVzLkNMRUFSICovKSxcbiAgICAgICAgZm9yRWFjaDogY3JlYXRlRm9yRWFjaCh0cnVlLCB0cnVlKVxuICAgIH07XG4gICAgY29uc3QgaXRlcmF0b3JNZXRob2RzID0gWydrZXlzJywgJ3ZhbHVlcycsICdlbnRyaWVzJywgU3ltYm9sLml0ZXJhdG9yXTtcbiAgICBpdGVyYXRvck1ldGhvZHMuZm9yRWFjaChtZXRob2QgPT4ge1xuICAgICAgICBtdXRhYmxlSW5zdHJ1bWVudGF0aW9uc1ttZXRob2RdID0gY3JlYXRlSXRlcmFibGVNZXRob2QobWV0aG9kLCBmYWxzZSwgZmFsc2UpO1xuICAgICAgICByZWFkb25seUluc3RydW1lbnRhdGlvbnNbbWV0aG9kXSA9IGNyZWF0ZUl0ZXJhYmxlTWV0aG9kKG1ldGhvZCwgdHJ1ZSwgZmFsc2UpO1xuICAgICAgICBzaGFsbG93SW5zdHJ1bWVudGF0aW9uc1ttZXRob2RdID0gY3JlYXRlSXRlcmFibGVNZXRob2QobWV0aG9kLCBmYWxzZSwgdHJ1ZSk7XG4gICAgICAgIHNoYWxsb3dSZWFkb25seUluc3RydW1lbnRhdGlvbnNbbWV0aG9kXSA9IGNyZWF0ZUl0ZXJhYmxlTWV0aG9kKG1ldGhvZCwgdHJ1ZSwgdHJ1ZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIFtcbiAgICAgICAgbXV0YWJsZUluc3RydW1lbnRhdGlvbnMsXG4gICAgICAgIHJlYWRvbmx5SW5zdHJ1bWVudGF0aW9ucyxcbiAgICAgICAgc2hhbGxvd0luc3RydW1lbnRhdGlvbnMsXG4gICAgICAgIHNoYWxsb3dSZWFkb25seUluc3RydW1lbnRhdGlvbnNcbiAgICBdO1xufVxuY29uc3QgW211dGFibGVJbnN0cnVtZW50YXRpb25zLCByZWFkb25seUluc3RydW1lbnRhdGlvbnMsIHNoYWxsb3dJbnN0cnVtZW50YXRpb25zLCBzaGFsbG93UmVhZG9ubHlJbnN0cnVtZW50YXRpb25zXSA9IC8qICNfX1BVUkVfXyovIGNyZWF0ZUluc3RydW1lbnRhdGlvbnMoKTtcbmZ1bmN0aW9uIGNyZWF0ZUluc3RydW1lbnRhdGlvbkdldHRlcihpc1JlYWRvbmx5LCBzaGFsbG93KSB7XG4gICAgY29uc3QgaW5zdHJ1bWVudGF0aW9ucyA9IHNoYWxsb3dcbiAgICAgICAgPyBpc1JlYWRvbmx5XG4gICAgICAgICAgICA/IHNoYWxsb3dSZWFkb25seUluc3RydW1lbnRhdGlvbnNcbiAgICAgICAgICAgIDogc2hhbGxvd0luc3RydW1lbnRhdGlvbnNcbiAgICAgICAgOiBpc1JlYWRvbmx5XG4gICAgICAgICAgICA/IHJlYWRvbmx5SW5zdHJ1bWVudGF0aW9uc1xuICAgICAgICAgICAgOiBtdXRhYmxlSW5zdHJ1bWVudGF0aW9ucztcbiAgICByZXR1cm4gKHRhcmdldCwga2V5LCByZWNlaXZlcikgPT4ge1xuICAgICAgICBpZiAoa2V5ID09PSBcIl9fdl9pc1JlYWN0aXZlXCIgLyogUmVhY3RpdmVGbGFncy5JU19SRUFDVElWRSAqLykge1xuICAgICAgICAgICAgcmV0dXJuICFpc1JlYWRvbmx5O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGtleSA9PT0gXCJfX3ZfaXNSZWFkb25seVwiIC8qIFJlYWN0aXZlRmxhZ3MuSVNfUkVBRE9OTFkgKi8pIHtcbiAgICAgICAgICAgIHJldHVybiBpc1JlYWRvbmx5O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGtleSA9PT0gXCJfX3ZfcmF3XCIgLyogUmVhY3RpdmVGbGFncy5SQVcgKi8pIHtcbiAgICAgICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFJlZmxlY3QuZ2V0KGhhc093bihpbnN0cnVtZW50YXRpb25zLCBrZXkpICYmIGtleSBpbiB0YXJnZXRcbiAgICAgICAgICAgID8gaW5zdHJ1bWVudGF0aW9uc1xuICAgICAgICAgICAgOiB0YXJnZXQsIGtleSwgcmVjZWl2ZXIpO1xuICAgIH07XG59XG5jb25zdCBtdXRhYmxlQ29sbGVjdGlvbkhhbmRsZXJzID0ge1xuICAgIGdldDogLyojX19QVVJFX18qLyBjcmVhdGVJbnN0cnVtZW50YXRpb25HZXR0ZXIoZmFsc2UsIGZhbHNlKVxufTtcbmNvbnN0IHNoYWxsb3dDb2xsZWN0aW9uSGFuZGxlcnMgPSB7XG4gICAgZ2V0OiAvKiNfX1BVUkVfXyovIGNyZWF0ZUluc3RydW1lbnRhdGlvbkdldHRlcihmYWxzZSwgdHJ1ZSlcbn07XG5jb25zdCByZWFkb25seUNvbGxlY3Rpb25IYW5kbGVycyA9IHtcbiAgICBnZXQ6IC8qI19fUFVSRV9fKi8gY3JlYXRlSW5zdHJ1bWVudGF0aW9uR2V0dGVyKHRydWUsIGZhbHNlKVxufTtcbmNvbnN0IHNoYWxsb3dSZWFkb25seUNvbGxlY3Rpb25IYW5kbGVycyA9IHtcbiAgICBnZXQ6IC8qI19fUFVSRV9fKi8gY3JlYXRlSW5zdHJ1bWVudGF0aW9uR2V0dGVyKHRydWUsIHRydWUpXG59O1xuZnVuY3Rpb24gY2hlY2tJZGVudGl0eUtleXModGFyZ2V0LCBoYXMsIGtleSkge1xuICAgIGNvbnN0IHJhd0tleSA9IHRvUmF3KGtleSk7XG4gICAgaWYgKHJhd0tleSAhPT0ga2V5ICYmIGhhcy5jYWxsKHRhcmdldCwgcmF3S2V5KSkge1xuICAgICAgICBjb25zdCB0eXBlID0gdG9SYXdUeXBlKHRhcmdldCk7XG4gICAgICAgIGNvbnNvbGUud2FybihgUmVhY3RpdmUgJHt0eXBlfSBjb250YWlucyBib3RoIHRoZSByYXcgYW5kIHJlYWN0aXZlIGAgK1xuICAgICAgICAgICAgYHZlcnNpb25zIG9mIHRoZSBzYW1lIG9iamVjdCR7dHlwZSA9PT0gYE1hcGAgPyBgIGFzIGtleXNgIDogYGB9LCBgICtcbiAgICAgICAgICAgIGB3aGljaCBjYW4gbGVhZCB0byBpbmNvbnNpc3RlbmNpZXMuIGAgK1xuICAgICAgICAgICAgYEF2b2lkIGRpZmZlcmVudGlhdGluZyBiZXR3ZWVuIHRoZSByYXcgYW5kIHJlYWN0aXZlIHZlcnNpb25zIGAgK1xuICAgICAgICAgICAgYG9mIGFuIG9iamVjdCBhbmQgb25seSB1c2UgdGhlIHJlYWN0aXZlIHZlcnNpb24gaWYgcG9zc2libGUuYCk7XG4gICAgfVxufVxuXG5jb25zdCByZWFjdGl2ZU1hcCA9IG5ldyBXZWFrTWFwKCk7XG5jb25zdCBzaGFsbG93UmVhY3RpdmVNYXAgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgcmVhZG9ubHlNYXAgPSBuZXcgV2Vha01hcCgpO1xuY29uc3Qgc2hhbGxvd1JlYWRvbmx5TWFwID0gbmV3IFdlYWtNYXAoKTtcbmZ1bmN0aW9uIHRhcmdldFR5cGVNYXAocmF3VHlwZSkge1xuICAgIHN3aXRjaCAocmF3VHlwZSkge1xuICAgICAgICBjYXNlICdPYmplY3QnOlxuICAgICAgICBjYXNlICdBcnJheSc6XG4gICAgICAgICAgICByZXR1cm4gMSAvKiBUYXJnZXRUeXBlLkNPTU1PTiAqLztcbiAgICAgICAgY2FzZSAnTWFwJzpcbiAgICAgICAgY2FzZSAnU2V0JzpcbiAgICAgICAgY2FzZSAnV2Vha01hcCc6XG4gICAgICAgIGNhc2UgJ1dlYWtTZXQnOlxuICAgICAgICAgICAgcmV0dXJuIDIgLyogVGFyZ2V0VHlwZS5DT0xMRUNUSU9OICovO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIDAgLyogVGFyZ2V0VHlwZS5JTlZBTElEICovO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldFRhcmdldFR5cGUodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWVbXCJfX3Zfc2tpcFwiIC8qIFJlYWN0aXZlRmxhZ3MuU0tJUCAqL10gfHwgIU9iamVjdC5pc0V4dGVuc2libGUodmFsdWUpXG4gICAgICAgID8gMCAvKiBUYXJnZXRUeXBlLklOVkFMSUQgKi9cbiAgICAgICAgOiB0YXJnZXRUeXBlTWFwKHRvUmF3VHlwZSh2YWx1ZSkpO1xufVxuZnVuY3Rpb24gcmVhY3RpdmUodGFyZ2V0KSB7XG4gICAgLy8gaWYgdHJ5aW5nIHRvIG9ic2VydmUgYSByZWFkb25seSBwcm94eSwgcmV0dXJuIHRoZSByZWFkb25seSB2ZXJzaW9uLlxuICAgIGlmIChpc1JlYWRvbmx5KHRhcmdldCkpIHtcbiAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICB9XG4gICAgcmV0dXJuIGNyZWF0ZVJlYWN0aXZlT2JqZWN0KHRhcmdldCwgZmFsc2UsIG11dGFibGVIYW5kbGVycywgbXV0YWJsZUNvbGxlY3Rpb25IYW5kbGVycywgcmVhY3RpdmVNYXApO1xufVxuLyoqXG4gKiBSZXR1cm4gYSBzaGFsbG93bHktcmVhY3RpdmUgY29weSBvZiB0aGUgb3JpZ2luYWwgb2JqZWN0LCB3aGVyZSBvbmx5IHRoZSByb290XG4gKiBsZXZlbCBwcm9wZXJ0aWVzIGFyZSByZWFjdGl2ZS4gSXQgYWxzbyBkb2VzIG5vdCBhdXRvLXVud3JhcCByZWZzIChldmVuIGF0IHRoZVxuICogcm9vdCBsZXZlbCkuXG4gKi9cbmZ1bmN0aW9uIHNoYWxsb3dSZWFjdGl2ZSh0YXJnZXQpIHtcbiAgICByZXR1cm4gY3JlYXRlUmVhY3RpdmVPYmplY3QodGFyZ2V0LCBmYWxzZSwgc2hhbGxvd1JlYWN0aXZlSGFuZGxlcnMsIHNoYWxsb3dDb2xsZWN0aW9uSGFuZGxlcnMsIHNoYWxsb3dSZWFjdGl2ZU1hcCk7XG59XG4vKipcbiAqIENyZWF0ZXMgYSByZWFkb25seSBjb3B5IG9mIHRoZSBvcmlnaW5hbCBvYmplY3QuIE5vdGUgdGhlIHJldHVybmVkIGNvcHkgaXMgbm90XG4gKiBtYWRlIHJlYWN0aXZlLCBidXQgYHJlYWRvbmx5YCBjYW4gYmUgY2FsbGVkIG9uIGFuIGFscmVhZHkgcmVhY3RpdmUgb2JqZWN0LlxuICovXG5mdW5jdGlvbiByZWFkb25seSh0YXJnZXQpIHtcbiAgICByZXR1cm4gY3JlYXRlUmVhY3RpdmVPYmplY3QodGFyZ2V0LCB0cnVlLCByZWFkb25seUhhbmRsZXJzLCByZWFkb25seUNvbGxlY3Rpb25IYW5kbGVycywgcmVhZG9ubHlNYXApO1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgcmVhY3RpdmUtY29weSBvZiB0aGUgb3JpZ2luYWwgb2JqZWN0LCB3aGVyZSBvbmx5IHRoZSByb290IGxldmVsXG4gKiBwcm9wZXJ0aWVzIGFyZSByZWFkb25seSwgYW5kIGRvZXMgTk9UIHVud3JhcCByZWZzIG5vciByZWN1cnNpdmVseSBjb252ZXJ0XG4gKiByZXR1cm5lZCBwcm9wZXJ0aWVzLlxuICogVGhpcyBpcyB1c2VkIGZvciBjcmVhdGluZyB0aGUgcHJvcHMgcHJveHkgb2JqZWN0IGZvciBzdGF0ZWZ1bCBjb21wb25lbnRzLlxuICovXG5mdW5jdGlvbiBzaGFsbG93UmVhZG9ubHkodGFyZ2V0KSB7XG4gICAgcmV0dXJuIGNyZWF0ZVJlYWN0aXZlT2JqZWN0KHRhcmdldCwgdHJ1ZSwgc2hhbGxvd1JlYWRvbmx5SGFuZGxlcnMsIHNoYWxsb3dSZWFkb25seUNvbGxlY3Rpb25IYW5kbGVycywgc2hhbGxvd1JlYWRvbmx5TWFwKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVJlYWN0aXZlT2JqZWN0KHRhcmdldCwgaXNSZWFkb25seSwgYmFzZUhhbmRsZXJzLCBjb2xsZWN0aW9uSGFuZGxlcnMsIHByb3h5TWFwKSB7XG4gICAgaWYgKCFpc09iamVjdCh0YXJnZXQpKSB7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgdmFsdWUgY2Fubm90IGJlIG1hZGUgcmVhY3RpdmU6ICR7U3RyaW5nKHRhcmdldCl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICB9XG4gICAgLy8gdGFyZ2V0IGlzIGFscmVhZHkgYSBQcm94eSwgcmV0dXJuIGl0LlxuICAgIC8vIGV4Y2VwdGlvbjogY2FsbGluZyByZWFkb25seSgpIG9uIGEgcmVhY3RpdmUgb2JqZWN0XG4gICAgaWYgKHRhcmdldFtcIl9fdl9yYXdcIiAvKiBSZWFjdGl2ZUZsYWdzLlJBVyAqL10gJiZcbiAgICAgICAgIShpc1JlYWRvbmx5ICYmIHRhcmdldFtcIl9fdl9pc1JlYWN0aXZlXCIgLyogUmVhY3RpdmVGbGFncy5JU19SRUFDVElWRSAqL10pKSB7XG4gICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfVxuICAgIC8vIHRhcmdldCBhbHJlYWR5IGhhcyBjb3JyZXNwb25kaW5nIFByb3h5XG4gICAgY29uc3QgZXhpc3RpbmdQcm94eSA9IHByb3h5TWFwLmdldCh0YXJnZXQpO1xuICAgIGlmIChleGlzdGluZ1Byb3h5KSB7XG4gICAgICAgIHJldHVybiBleGlzdGluZ1Byb3h5O1xuICAgIH1cbiAgICAvLyBvbmx5IHNwZWNpZmljIHZhbHVlIHR5cGVzIGNhbiBiZSBvYnNlcnZlZC5cbiAgICBjb25zdCB0YXJnZXRUeXBlID0gZ2V0VGFyZ2V0VHlwZSh0YXJnZXQpO1xuICAgIGlmICh0YXJnZXRUeXBlID09PSAwIC8qIFRhcmdldFR5cGUuSU5WQUxJRCAqLykge1xuICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIH1cbiAgICBjb25zdCBwcm94eSA9IG5ldyBQcm94eSh0YXJnZXQsIHRhcmdldFR5cGUgPT09IDIgLyogVGFyZ2V0VHlwZS5DT0xMRUNUSU9OICovID8gY29sbGVjdGlvbkhhbmRsZXJzIDogYmFzZUhhbmRsZXJzKTtcbiAgICBwcm94eU1hcC5zZXQodGFyZ2V0LCBwcm94eSk7XG4gICAgcmV0dXJuIHByb3h5O1xufVxuZnVuY3Rpb24gaXNSZWFjdGl2ZSh2YWx1ZSkge1xuICAgIGlmIChpc1JlYWRvbmx5KHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gaXNSZWFjdGl2ZSh2YWx1ZVtcIl9fdl9yYXdcIiAvKiBSZWFjdGl2ZUZsYWdzLlJBVyAqL10pO1xuICAgIH1cbiAgICByZXR1cm4gISEodmFsdWUgJiYgdmFsdWVbXCJfX3ZfaXNSZWFjdGl2ZVwiIC8qIFJlYWN0aXZlRmxhZ3MuSVNfUkVBQ1RJVkUgKi9dKTtcbn1cbmZ1bmN0aW9uIGlzUmVhZG9ubHkodmFsdWUpIHtcbiAgICByZXR1cm4gISEodmFsdWUgJiYgdmFsdWVbXCJfX3ZfaXNSZWFkb25seVwiIC8qIFJlYWN0aXZlRmxhZ3MuSVNfUkVBRE9OTFkgKi9dKTtcbn1cbmZ1bmN0aW9uIGlzU2hhbGxvdyh2YWx1ZSkge1xuICAgIHJldHVybiAhISh2YWx1ZSAmJiB2YWx1ZVtcIl9fdl9pc1NoYWxsb3dcIiAvKiBSZWFjdGl2ZUZsYWdzLklTX1NIQUxMT1cgKi9dKTtcbn1cbmZ1bmN0aW9uIGlzUHJveHkodmFsdWUpIHtcbiAgICByZXR1cm4gaXNSZWFjdGl2ZSh2YWx1ZSkgfHwgaXNSZWFkb25seSh2YWx1ZSk7XG59XG5mdW5jdGlvbiB0b1JhdyhvYnNlcnZlZCkge1xuICAgIGNvbnN0IHJhdyA9IG9ic2VydmVkICYmIG9ic2VydmVkW1wiX192X3Jhd1wiIC8qIFJlYWN0aXZlRmxhZ3MuUkFXICovXTtcbiAgICByZXR1cm4gcmF3ID8gdG9SYXcocmF3KSA6IG9ic2VydmVkO1xufVxuZnVuY3Rpb24gbWFya1Jhdyh2YWx1ZSkge1xuICAgIGRlZih2YWx1ZSwgXCJfX3Zfc2tpcFwiIC8qIFJlYWN0aXZlRmxhZ3MuU0tJUCAqLywgdHJ1ZSk7XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuY29uc3QgdG9SZWFjdGl2ZSA9ICh2YWx1ZSkgPT4gaXNPYmplY3QodmFsdWUpID8gcmVhY3RpdmUodmFsdWUpIDogdmFsdWU7XG5jb25zdCB0b1JlYWRvbmx5ID0gKHZhbHVlKSA9PiBpc09iamVjdCh2YWx1ZSkgPyByZWFkb25seSh2YWx1ZSkgOiB2YWx1ZTtcblxuZnVuY3Rpb24gdHJhY2tSZWZWYWx1ZShyZWYpIHtcbiAgICBpZiAoc2hvdWxkVHJhY2sgJiYgYWN0aXZlRWZmZWN0KSB7XG4gICAgICAgIHJlZiA9IHRvUmF3KHJlZik7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgIHRyYWNrRWZmZWN0cyhyZWYuZGVwIHx8IChyZWYuZGVwID0gY3JlYXRlRGVwKCkpLCB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0OiByZWYsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJnZXRcIiAvKiBUcmFja09wVHlwZXMuR0VUICovLFxuICAgICAgICAgICAgICAgIGtleTogJ3ZhbHVlJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0cmFja0VmZmVjdHMocmVmLmRlcCB8fCAocmVmLmRlcCA9IGNyZWF0ZURlcCgpKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiB0cmlnZ2VyUmVmVmFsdWUocmVmLCBuZXdWYWwpIHtcbiAgICByZWYgPSB0b1JhdyhyZWYpO1xuICAgIGlmIChyZWYuZGVwKSB7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgIHRyaWdnZXJFZmZlY3RzKHJlZi5kZXAsIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IHJlZixcbiAgICAgICAgICAgICAgICB0eXBlOiBcInNldFwiIC8qIFRyaWdnZXJPcFR5cGVzLlNFVCAqLyxcbiAgICAgICAgICAgICAgICBrZXk6ICd2YWx1ZScsXG4gICAgICAgICAgICAgICAgbmV3VmFsdWU6IG5ld1ZhbFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0cmlnZ2VyRWZmZWN0cyhyZWYuZGVwKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGlzUmVmKHIpIHtcbiAgICByZXR1cm4gISEociAmJiByLl9fdl9pc1JlZiA9PT0gdHJ1ZSk7XG59XG5mdW5jdGlvbiByZWYodmFsdWUpIHtcbiAgICByZXR1cm4gY3JlYXRlUmVmKHZhbHVlLCBmYWxzZSk7XG59XG5mdW5jdGlvbiBzaGFsbG93UmVmKHZhbHVlKSB7XG4gICAgcmV0dXJuIGNyZWF0ZVJlZih2YWx1ZSwgdHJ1ZSk7XG59XG5mdW5jdGlvbiBjcmVhdGVSZWYocmF3VmFsdWUsIHNoYWxsb3cpIHtcbiAgICBpZiAoaXNSZWYocmF3VmFsdWUpKSB7XG4gICAgICAgIHJldHVybiByYXdWYWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBSZWZJbXBsKHJhd1ZhbHVlLCBzaGFsbG93KTtcbn1cbmNsYXNzIFJlZkltcGwge1xuICAgIGNvbnN0cnVjdG9yKHZhbHVlLCBfX3ZfaXNTaGFsbG93KSB7XG4gICAgICAgIHRoaXMuX192X2lzU2hhbGxvdyA9IF9fdl9pc1NoYWxsb3c7XG4gICAgICAgIHRoaXMuZGVwID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9fdl9pc1JlZiA9IHRydWU7XG4gICAgICAgIHRoaXMuX3Jhd1ZhbHVlID0gX192X2lzU2hhbGxvdyA/IHZhbHVlIDogdG9SYXcodmFsdWUpO1xuICAgICAgICB0aGlzLl92YWx1ZSA9IF9fdl9pc1NoYWxsb3cgPyB2YWx1ZSA6IHRvUmVhY3RpdmUodmFsdWUpO1xuICAgIH1cbiAgICBnZXQgdmFsdWUoKSB7XG4gICAgICAgIHRyYWNrUmVmVmFsdWUodGhpcyk7XG4gICAgICAgIHJldHVybiB0aGlzLl92YWx1ZTtcbiAgICB9XG4gICAgc2V0IHZhbHVlKG5ld1ZhbCkge1xuICAgICAgICBjb25zdCB1c2VEaXJlY3RWYWx1ZSA9IHRoaXMuX192X2lzU2hhbGxvdyB8fCBpc1NoYWxsb3cobmV3VmFsKSB8fCBpc1JlYWRvbmx5KG5ld1ZhbCk7XG4gICAgICAgIG5ld1ZhbCA9IHVzZURpcmVjdFZhbHVlID8gbmV3VmFsIDogdG9SYXcobmV3VmFsKTtcbiAgICAgICAgaWYgKGhhc0NoYW5nZWQobmV3VmFsLCB0aGlzLl9yYXdWYWx1ZSkpIHtcbiAgICAgICAgICAgIHRoaXMuX3Jhd1ZhbHVlID0gbmV3VmFsO1xuICAgICAgICAgICAgdGhpcy5fdmFsdWUgPSB1c2VEaXJlY3RWYWx1ZSA/IG5ld1ZhbCA6IHRvUmVhY3RpdmUobmV3VmFsKTtcbiAgICAgICAgICAgIHRyaWdnZXJSZWZWYWx1ZSh0aGlzLCBuZXdWYWwpO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gdHJpZ2dlclJlZihyZWYpIHtcbiAgICB0cmlnZ2VyUmVmVmFsdWUocmVmLCAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyByZWYudmFsdWUgOiB2b2lkIDApO1xufVxuZnVuY3Rpb24gdW5yZWYocmVmKSB7XG4gICAgcmV0dXJuIGlzUmVmKHJlZikgPyByZWYudmFsdWUgOiByZWY7XG59XG5jb25zdCBzaGFsbG93VW53cmFwSGFuZGxlcnMgPSB7XG4gICAgZ2V0OiAodGFyZ2V0LCBrZXksIHJlY2VpdmVyKSA9PiB1bnJlZihSZWZsZWN0LmdldCh0YXJnZXQsIGtleSwgcmVjZWl2ZXIpKSxcbiAgICBzZXQ6ICh0YXJnZXQsIGtleSwgdmFsdWUsIHJlY2VpdmVyKSA9PiB7XG4gICAgICAgIGNvbnN0IG9sZFZhbHVlID0gdGFyZ2V0W2tleV07XG4gICAgICAgIGlmIChpc1JlZihvbGRWYWx1ZSkgJiYgIWlzUmVmKHZhbHVlKSkge1xuICAgICAgICAgICAgb2xkVmFsdWUudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFJlZmxlY3Quc2V0KHRhcmdldCwga2V5LCB2YWx1ZSwgcmVjZWl2ZXIpO1xuICAgICAgICB9XG4gICAgfVxufTtcbmZ1bmN0aW9uIHByb3h5UmVmcyhvYmplY3RXaXRoUmVmcykge1xuICAgIHJldHVybiBpc1JlYWN0aXZlKG9iamVjdFdpdGhSZWZzKVxuICAgICAgICA/IG9iamVjdFdpdGhSZWZzXG4gICAgICAgIDogbmV3IFByb3h5KG9iamVjdFdpdGhSZWZzLCBzaGFsbG93VW53cmFwSGFuZGxlcnMpO1xufVxuY2xhc3MgQ3VzdG9tUmVmSW1wbCB7XG4gICAgY29uc3RydWN0b3IoZmFjdG9yeSkge1xuICAgICAgICB0aGlzLmRlcCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fX3ZfaXNSZWYgPSB0cnVlO1xuICAgICAgICBjb25zdCB7IGdldCwgc2V0IH0gPSBmYWN0b3J5KCgpID0+IHRyYWNrUmVmVmFsdWUodGhpcyksICgpID0+IHRyaWdnZXJSZWZWYWx1ZSh0aGlzKSk7XG4gICAgICAgIHRoaXMuX2dldCA9IGdldDtcbiAgICAgICAgdGhpcy5fc2V0ID0gc2V0O1xuICAgIH1cbiAgICBnZXQgdmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9nZXQoKTtcbiAgICB9XG4gICAgc2V0IHZhbHVlKG5ld1ZhbCkge1xuICAgICAgICB0aGlzLl9zZXQobmV3VmFsKTtcbiAgICB9XG59XG5mdW5jdGlvbiBjdXN0b21SZWYoZmFjdG9yeSkge1xuICAgIHJldHVybiBuZXcgQ3VzdG9tUmVmSW1wbChmYWN0b3J5KTtcbn1cbmZ1bmN0aW9uIHRvUmVmcyhvYmplY3QpIHtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFpc1Byb3h5KG9iamVjdCkpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGB0b1JlZnMoKSBleHBlY3RzIGEgcmVhY3RpdmUgb2JqZWN0IGJ1dCByZWNlaXZlZCBhIHBsYWluIG9uZS5gKTtcbiAgICB9XG4gICAgY29uc3QgcmV0ID0gaXNBcnJheShvYmplY3QpID8gbmV3IEFycmF5KG9iamVjdC5sZW5ndGgpIDoge307XG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2JqZWN0KSB7XG4gICAgICAgIHJldFtrZXldID0gdG9SZWYob2JqZWN0LCBrZXkpO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufVxuY2xhc3MgT2JqZWN0UmVmSW1wbCB7XG4gICAgY29uc3RydWN0b3IoX29iamVjdCwgX2tleSwgX2RlZmF1bHRWYWx1ZSkge1xuICAgICAgICB0aGlzLl9vYmplY3QgPSBfb2JqZWN0O1xuICAgICAgICB0aGlzLl9rZXkgPSBfa2V5O1xuICAgICAgICB0aGlzLl9kZWZhdWx0VmFsdWUgPSBfZGVmYXVsdFZhbHVlO1xuICAgICAgICB0aGlzLl9fdl9pc1JlZiA9IHRydWU7XG4gICAgfVxuICAgIGdldCB2YWx1ZSgpIHtcbiAgICAgICAgY29uc3QgdmFsID0gdGhpcy5fb2JqZWN0W3RoaXMuX2tleV07XG4gICAgICAgIHJldHVybiB2YWwgPT09IHVuZGVmaW5lZCA/IHRoaXMuX2RlZmF1bHRWYWx1ZSA6IHZhbDtcbiAgICB9XG4gICAgc2V0IHZhbHVlKG5ld1ZhbCkge1xuICAgICAgICB0aGlzLl9vYmplY3RbdGhpcy5fa2V5XSA9IG5ld1ZhbDtcbiAgICB9XG59XG5mdW5jdGlvbiB0b1JlZihvYmplY3QsIGtleSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgY29uc3QgdmFsID0gb2JqZWN0W2tleV07XG4gICAgcmV0dXJuIGlzUmVmKHZhbClcbiAgICAgICAgPyB2YWxcbiAgICAgICAgOiBuZXcgT2JqZWN0UmVmSW1wbChvYmplY3QsIGtleSwgZGVmYXVsdFZhbHVlKTtcbn1cblxudmFyIF9hO1xuY2xhc3MgQ29tcHV0ZWRSZWZJbXBsIHtcbiAgICBjb25zdHJ1Y3RvcihnZXR0ZXIsIF9zZXR0ZXIsIGlzUmVhZG9ubHksIGlzU1NSKSB7XG4gICAgICAgIHRoaXMuX3NldHRlciA9IF9zZXR0ZXI7XG4gICAgICAgIHRoaXMuZGVwID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9fdl9pc1JlZiA9IHRydWU7XG4gICAgICAgIHRoaXNbX2FdID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5lZmZlY3QgPSBuZXcgUmVhY3RpdmVFZmZlY3QoZ2V0dGVyLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX2RpcnR5KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRyaWdnZXJSZWZWYWx1ZSh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZWZmZWN0LmNvbXB1dGVkID0gdGhpcztcbiAgICAgICAgdGhpcy5lZmZlY3QuYWN0aXZlID0gdGhpcy5fY2FjaGVhYmxlID0gIWlzU1NSO1xuICAgICAgICB0aGlzW1wiX192X2lzUmVhZG9ubHlcIiAvKiBSZWFjdGl2ZUZsYWdzLklTX1JFQURPTkxZICovXSA9IGlzUmVhZG9ubHk7XG4gICAgfVxuICAgIGdldCB2YWx1ZSgpIHtcbiAgICAgICAgLy8gdGhlIGNvbXB1dGVkIHJlZiBtYXkgZ2V0IHdyYXBwZWQgYnkgb3RoZXIgcHJveGllcyBlLmcuIHJlYWRvbmx5KCkgIzMzNzZcbiAgICAgICAgY29uc3Qgc2VsZiA9IHRvUmF3KHRoaXMpO1xuICAgICAgICB0cmFja1JlZlZhbHVlKHNlbGYpO1xuICAgICAgICBpZiAoc2VsZi5fZGlydHkgfHwgIXNlbGYuX2NhY2hlYWJsZSkge1xuICAgICAgICAgICAgc2VsZi5fZGlydHkgPSBmYWxzZTtcbiAgICAgICAgICAgIHNlbGYuX3ZhbHVlID0gc2VsZi5lZmZlY3QucnVuKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlbGYuX3ZhbHVlO1xuICAgIH1cbiAgICBzZXQgdmFsdWUobmV3VmFsdWUpIHtcbiAgICAgICAgdGhpcy5fc2V0dGVyKG5ld1ZhbHVlKTtcbiAgICB9XG59XG5fYSA9IFwiX192X2lzUmVhZG9ubHlcIiAvKiBSZWFjdGl2ZUZsYWdzLklTX1JFQURPTkxZICovO1xuZnVuY3Rpb24gY29tcHV0ZWQoZ2V0dGVyT3JPcHRpb25zLCBkZWJ1Z09wdGlvbnMsIGlzU1NSID0gZmFsc2UpIHtcbiAgICBsZXQgZ2V0dGVyO1xuICAgIGxldCBzZXR0ZXI7XG4gICAgY29uc3Qgb25seUdldHRlciA9IGlzRnVuY3Rpb24oZ2V0dGVyT3JPcHRpb25zKTtcbiAgICBpZiAob25seUdldHRlcikge1xuICAgICAgICBnZXR0ZXIgPSBnZXR0ZXJPck9wdGlvbnM7XG4gICAgICAgIHNldHRlciA9IChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKVxuICAgICAgICAgICAgPyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdXcml0ZSBvcGVyYXRpb24gZmFpbGVkOiBjb21wdXRlZCB2YWx1ZSBpcyByZWFkb25seScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiBOT09QO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZ2V0dGVyID0gZ2V0dGVyT3JPcHRpb25zLmdldDtcbiAgICAgICAgc2V0dGVyID0gZ2V0dGVyT3JPcHRpb25zLnNldDtcbiAgICB9XG4gICAgY29uc3QgY1JlZiA9IG5ldyBDb21wdXRlZFJlZkltcGwoZ2V0dGVyLCBzZXR0ZXIsIG9ubHlHZXR0ZXIgfHwgIXNldHRlciwgaXNTU1IpO1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgZGVidWdPcHRpb25zICYmICFpc1NTUikge1xuICAgICAgICBjUmVmLmVmZmVjdC5vblRyYWNrID0gZGVidWdPcHRpb25zLm9uVHJhY2s7XG4gICAgICAgIGNSZWYuZWZmZWN0Lm9uVHJpZ2dlciA9IGRlYnVnT3B0aW9ucy5vblRyaWdnZXI7XG4gICAgfVxuICAgIHJldHVybiBjUmVmO1xufVxuXG52YXIgX2EkMTtcbmNvbnN0IHRpY2sgPSAvKiNfX1BVUkVfXyovIFByb21pc2UucmVzb2x2ZSgpO1xuY29uc3QgcXVldWUgPSBbXTtcbmxldCBxdWV1ZWQgPSBmYWxzZTtcbmNvbnN0IHNjaGVkdWxlciA9IChmbikgPT4ge1xuICAgIHF1ZXVlLnB1c2goZm4pO1xuICAgIGlmICghcXVldWVkKSB7XG4gICAgICAgIHF1ZXVlZCA9IHRydWU7XG4gICAgICAgIHRpY2sudGhlbihmbHVzaCk7XG4gICAgfVxufTtcbmNvbnN0IGZsdXNoID0gKCkgPT4ge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcXVldWVbaV0oKTtcbiAgICB9XG4gICAgcXVldWUubGVuZ3RoID0gMDtcbiAgICBxdWV1ZWQgPSBmYWxzZTtcbn07XG5jbGFzcyBEZWZlcnJlZENvbXB1dGVkUmVmSW1wbCB7XG4gICAgY29uc3RydWN0b3IoZ2V0dGVyKSB7XG4gICAgICAgIHRoaXMuZGVwID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHRoaXMuX192X2lzUmVmID0gdHJ1ZTtcbiAgICAgICAgdGhpc1tfYSQxXSA9IHRydWU7XG4gICAgICAgIGxldCBjb21wYXJlVGFyZ2V0O1xuICAgICAgICBsZXQgaGFzQ29tcGFyZVRhcmdldCA9IGZhbHNlO1xuICAgICAgICBsZXQgc2NoZWR1bGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZWZmZWN0ID0gbmV3IFJlYWN0aXZlRWZmZWN0KGdldHRlciwgKGNvbXB1dGVkVHJpZ2dlcikgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuZGVwKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbXB1dGVkVHJpZ2dlcikge1xuICAgICAgICAgICAgICAgICAgICBjb21wYXJlVGFyZ2V0ID0gdGhpcy5fdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGhhc0NvbXBhcmVUYXJnZXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICghc2NoZWR1bGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlVG9Db21wYXJlID0gaGFzQ29tcGFyZVRhcmdldCA/IGNvbXBhcmVUYXJnZXQgOiB0aGlzLl92YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaGFzQ29tcGFyZVRhcmdldCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBzY2hlZHVsZXIoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZWZmZWN0LmFjdGl2ZSAmJiB0aGlzLl9nZXQoKSAhPT0gdmFsdWVUb0NvbXBhcmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyUmVmVmFsdWUodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBzY2hlZHVsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGNoYWluZWQgdXBzdHJlYW0gY29tcHV0ZWRzIGFyZSBub3RpZmllZCBzeW5jaHJvbm91c2x5IHRvIGVuc3VyZVxuICAgICAgICAgICAgICAgIC8vIHZhbHVlIGludmFsaWRhdGlvbiBpbiBjYXNlIG9mIHN5bmMgYWNjZXNzOyBub3JtYWwgZWZmZWN0cyBhcmVcbiAgICAgICAgICAgICAgICAvLyBkZWZlcnJlZCB0byBiZSB0cmlnZ2VyZWQgaW4gc2NoZWR1bGVyLlxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiB0aGlzLmRlcCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZS5jb21wdXRlZCBpbnN0YW5jZW9mIERlZmVycmVkQ29tcHV0ZWRSZWZJbXBsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnNjaGVkdWxlcih0cnVlIC8qIGNvbXB1dGVkVHJpZ2dlciAqLyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmVmZmVjdC5jb21wdXRlZCA9IHRoaXM7XG4gICAgfVxuICAgIF9nZXQoKSB7XG4gICAgICAgIGlmICh0aGlzLl9kaXJ0eSkge1xuICAgICAgICAgICAgdGhpcy5fZGlydHkgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiAodGhpcy5fdmFsdWUgPSB0aGlzLmVmZmVjdC5ydW4oKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xuICAgIH1cbiAgICBnZXQgdmFsdWUoKSB7XG4gICAgICAgIHRyYWNrUmVmVmFsdWUodGhpcyk7XG4gICAgICAgIC8vIHRoZSBjb21wdXRlZCByZWYgbWF5IGdldCB3cmFwcGVkIGJ5IG90aGVyIHByb3hpZXMgZS5nLiByZWFkb25seSgpICMzMzc2XG4gICAgICAgIHJldHVybiB0b1Jhdyh0aGlzKS5fZ2V0KCk7XG4gICAgfVxufVxuX2EkMSA9IFwiX192X2lzUmVhZG9ubHlcIiAvKiBSZWFjdGl2ZUZsYWdzLklTX1JFQURPTkxZICovO1xuZnVuY3Rpb24gZGVmZXJyZWRDb21wdXRlZChnZXR0ZXIpIHtcbiAgICByZXR1cm4gbmV3IERlZmVycmVkQ29tcHV0ZWRSZWZJbXBsKGdldHRlcik7XG59XG5cbmV4cG9ydCB7IEVmZmVjdFNjb3BlLCBJVEVSQVRFX0tFWSwgUmVhY3RpdmVFZmZlY3QsIGNvbXB1dGVkLCBjdXN0b21SZWYsIGRlZmVycmVkQ29tcHV0ZWQsIGVmZmVjdCwgZWZmZWN0U2NvcGUsIGVuYWJsZVRyYWNraW5nLCBnZXRDdXJyZW50U2NvcGUsIGlzUHJveHksIGlzUmVhY3RpdmUsIGlzUmVhZG9ubHksIGlzUmVmLCBpc1NoYWxsb3csIG1hcmtSYXcsIG9uU2NvcGVEaXNwb3NlLCBwYXVzZVRyYWNraW5nLCBwcm94eVJlZnMsIHJlYWN0aXZlLCByZWFkb25seSwgcmVmLCByZXNldFRyYWNraW5nLCBzaGFsbG93UmVhY3RpdmUsIHNoYWxsb3dSZWFkb25seSwgc2hhbGxvd1JlZiwgc3RvcCwgdG9SYXcsIHRvUmVmLCB0b1JlZnMsIHRyYWNrLCB0cmlnZ2VyLCB0cmlnZ2VyUmVmLCB1bnJlZiB9O1xuIiwiaW1wb3J0IHsgcGF1c2VUcmFja2luZywgcmVzZXRUcmFja2luZywgaXNSZWYsIHRvUmF3LCBpc1NoYWxsb3cgYXMgaXNTaGFsbG93JDEsIGlzUmVhY3RpdmUsIFJlYWN0aXZlRWZmZWN0LCByZWYsIHNoYWxsb3dSZWFkb25seSwgdHJhY2ssIHJlYWN0aXZlLCBzaGFsbG93UmVhY3RpdmUsIHRyaWdnZXIsIGlzUHJveHksIEVmZmVjdFNjb3BlLCBtYXJrUmF3LCBwcm94eVJlZnMsIGNvbXB1dGVkIGFzIGNvbXB1dGVkJDEsIGlzUmVhZG9ubHkgfSBmcm9tICdAdnVlL3JlYWN0aXZpdHknO1xuZXhwb3J0IHsgRWZmZWN0U2NvcGUsIFJlYWN0aXZlRWZmZWN0LCBjdXN0b21SZWYsIGVmZmVjdCwgZWZmZWN0U2NvcGUsIGdldEN1cnJlbnRTY29wZSwgaXNQcm94eSwgaXNSZWFjdGl2ZSwgaXNSZWFkb25seSwgaXNSZWYsIGlzU2hhbGxvdywgbWFya1Jhdywgb25TY29wZURpc3Bvc2UsIHByb3h5UmVmcywgcmVhY3RpdmUsIHJlYWRvbmx5LCByZWYsIHNoYWxsb3dSZWFjdGl2ZSwgc2hhbGxvd1JlYWRvbmx5LCBzaGFsbG93UmVmLCBzdG9wLCB0b1JhdywgdG9SZWYsIHRvUmVmcywgdHJpZ2dlclJlZiwgdW5yZWYgfSBmcm9tICdAdnVlL3JlYWN0aXZpdHknO1xuaW1wb3J0IHsgaXNTdHJpbmcsIGlzRnVuY3Rpb24sIGlzUHJvbWlzZSwgaXNBcnJheSwgTk9PUCwgZ2V0R2xvYmFsVGhpcywgZXh0ZW5kLCBFTVBUWV9PQkosIHRvSGFuZGxlcktleSwgdG9OdW1iZXIsIGh5cGhlbmF0ZSwgY2FtZWxpemUsIGlzT2JqZWN0LCBpc09uLCBoYXNPd24sIGlzTW9kZWxMaXN0ZW5lciwgaGFzQ2hhbmdlZCwgcmVtb3ZlLCBpc1NldCwgaXNNYXAsIGlzUGxhaW5PYmplY3QsIGludm9rZUFycmF5Rm5zLCBpc0J1aWx0SW5EaXJlY3RpdmUsIGNhcGl0YWxpemUsIGlzR2xvYmFsbHlXaGl0ZWxpc3RlZCwgZGVmLCBpc1Jlc2VydmVkUHJvcCwgRU1QVFlfQVJSLCB0b1Jhd1R5cGUsIG1ha2VNYXAsIE5PLCBub3JtYWxpemVDbGFzcywgbm9ybWFsaXplU3R5bGUgfSBmcm9tICdAdnVlL3NoYXJlZCc7XG5leHBvcnQgeyBjYW1lbGl6ZSwgY2FwaXRhbGl6ZSwgbm9ybWFsaXplQ2xhc3MsIG5vcm1hbGl6ZVByb3BzLCBub3JtYWxpemVTdHlsZSwgdG9EaXNwbGF5U3RyaW5nLCB0b0hhbmRsZXJLZXkgfSBmcm9tICdAdnVlL3NoYXJlZCc7XG5cbmNvbnN0IHN0YWNrID0gW107XG5mdW5jdGlvbiBwdXNoV2FybmluZ0NvbnRleHQodm5vZGUpIHtcbiAgICBzdGFjay5wdXNoKHZub2RlKTtcbn1cbmZ1bmN0aW9uIHBvcFdhcm5pbmdDb250ZXh0KCkge1xuICAgIHN0YWNrLnBvcCgpO1xufVxuZnVuY3Rpb24gd2Fybihtc2csIC4uLmFyZ3MpIHtcbiAgICBpZiAoIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSlcbiAgICAgICAgcmV0dXJuO1xuICAgIC8vIGF2b2lkIHByb3BzIGZvcm1hdHRpbmcgb3Igd2FybiBoYW5kbGVyIHRyYWNraW5nIGRlcHMgdGhhdCBtaWdodCBiZSBtdXRhdGVkXG4gICAgLy8gZHVyaW5nIHBhdGNoLCBsZWFkaW5nIHRvIGluZmluaXRlIHJlY3Vyc2lvbi5cbiAgICBwYXVzZVRyYWNraW5nKCk7XG4gICAgY29uc3QgaW5zdGFuY2UgPSBzdGFjay5sZW5ndGggPyBzdGFja1tzdGFjay5sZW5ndGggLSAxXS5jb21wb25lbnQgOiBudWxsO1xuICAgIGNvbnN0IGFwcFdhcm5IYW5kbGVyID0gaW5zdGFuY2UgJiYgaW5zdGFuY2UuYXBwQ29udGV4dC5jb25maWcud2FybkhhbmRsZXI7XG4gICAgY29uc3QgdHJhY2UgPSBnZXRDb21wb25lbnRUcmFjZSgpO1xuICAgIGlmIChhcHBXYXJuSGFuZGxlcikge1xuICAgICAgICBjYWxsV2l0aEVycm9ySGFuZGxpbmcoYXBwV2FybkhhbmRsZXIsIGluc3RhbmNlLCAxMSAvKiBFcnJvckNvZGVzLkFQUF9XQVJOX0hBTkRMRVIgKi8sIFtcbiAgICAgICAgICAgIG1zZyArIGFyZ3Muam9pbignJyksXG4gICAgICAgICAgICBpbnN0YW5jZSAmJiBpbnN0YW5jZS5wcm94eSxcbiAgICAgICAgICAgIHRyYWNlXG4gICAgICAgICAgICAgICAgLm1hcCgoeyB2bm9kZSB9KSA9PiBgYXQgPCR7Zm9ybWF0Q29tcG9uZW50TmFtZShpbnN0YW5jZSwgdm5vZGUudHlwZSl9PmApXG4gICAgICAgICAgICAgICAgLmpvaW4oJ1xcbicpLFxuICAgICAgICAgICAgdHJhY2VcbiAgICAgICAgXSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCB3YXJuQXJncyA9IFtgW1Z1ZSB3YXJuXTogJHttc2d9YCwgLi4uYXJnc107XG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICBpZiAodHJhY2UubGVuZ3RoICYmXG4gICAgICAgICAgICAvLyBhdm9pZCBzcGFtbWluZyBjb25zb2xlIGR1cmluZyB0ZXN0c1xuICAgICAgICAgICAgIWZhbHNlKSB7XG4gICAgICAgICAgICB3YXJuQXJncy5wdXNoKGBcXG5gLCAuLi5mb3JtYXRUcmFjZSh0cmFjZSkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUud2FybiguLi53YXJuQXJncyk7XG4gICAgfVxuICAgIHJlc2V0VHJhY2tpbmcoKTtcbn1cbmZ1bmN0aW9uIGdldENvbXBvbmVudFRyYWNlKCkge1xuICAgIGxldCBjdXJyZW50Vk5vZGUgPSBzdGFja1tzdGFjay5sZW5ndGggLSAxXTtcbiAgICBpZiAoIWN1cnJlbnRWTm9kZSkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIC8vIHdlIGNhbid0IGp1c3QgdXNlIHRoZSBzdGFjayBiZWNhdXNlIGl0IHdpbGwgYmUgaW5jb21wbGV0ZSBkdXJpbmcgdXBkYXRlc1xuICAgIC8vIHRoYXQgZGlkIG5vdCBzdGFydCBmcm9tIHRoZSByb290LiBSZS1jb25zdHJ1Y3QgdGhlIHBhcmVudCBjaGFpbiB1c2luZ1xuICAgIC8vIGluc3RhbmNlIHBhcmVudCBwb2ludGVycy5cbiAgICBjb25zdCBub3JtYWxpemVkU3RhY2sgPSBbXTtcbiAgICB3aGlsZSAoY3VycmVudFZOb2RlKSB7XG4gICAgICAgIGNvbnN0IGxhc3QgPSBub3JtYWxpemVkU3RhY2tbMF07XG4gICAgICAgIGlmIChsYXN0ICYmIGxhc3Qudm5vZGUgPT09IGN1cnJlbnRWTm9kZSkge1xuICAgICAgICAgICAgbGFzdC5yZWN1cnNlQ291bnQrKztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG5vcm1hbGl6ZWRTdGFjay5wdXNoKHtcbiAgICAgICAgICAgICAgICB2bm9kZTogY3VycmVudFZOb2RlLFxuICAgICAgICAgICAgICAgIHJlY3Vyc2VDb3VudDogMFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyZW50SW5zdGFuY2UgPSBjdXJyZW50Vk5vZGUuY29tcG9uZW50ICYmIGN1cnJlbnRWTm9kZS5jb21wb25lbnQucGFyZW50O1xuICAgICAgICBjdXJyZW50Vk5vZGUgPSBwYXJlbnRJbnN0YW5jZSAmJiBwYXJlbnRJbnN0YW5jZS52bm9kZTtcbiAgICB9XG4gICAgcmV0dXJuIG5vcm1hbGl6ZWRTdGFjaztcbn1cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5mdW5jdGlvbiBmb3JtYXRUcmFjZSh0cmFjZSkge1xuICAgIGNvbnN0IGxvZ3MgPSBbXTtcbiAgICB0cmFjZS5mb3JFYWNoKChlbnRyeSwgaSkgPT4ge1xuICAgICAgICBsb2dzLnB1c2goLi4uKGkgPT09IDAgPyBbXSA6IFtgXFxuYF0pLCAuLi5mb3JtYXRUcmFjZUVudHJ5KGVudHJ5KSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGxvZ3M7XG59XG5mdW5jdGlvbiBmb3JtYXRUcmFjZUVudHJ5KHsgdm5vZGUsIHJlY3Vyc2VDb3VudCB9KSB7XG4gICAgY29uc3QgcG9zdGZpeCA9IHJlY3Vyc2VDb3VudCA+IDAgPyBgLi4uICgke3JlY3Vyc2VDb3VudH0gcmVjdXJzaXZlIGNhbGxzKWAgOiBgYDtcbiAgICBjb25zdCBpc1Jvb3QgPSB2bm9kZS5jb21wb25lbnQgPyB2bm9kZS5jb21wb25lbnQucGFyZW50ID09IG51bGwgOiBmYWxzZTtcbiAgICBjb25zdCBvcGVuID0gYCBhdCA8JHtmb3JtYXRDb21wb25lbnROYW1lKHZub2RlLmNvbXBvbmVudCwgdm5vZGUudHlwZSwgaXNSb290KX1gO1xuICAgIGNvbnN0IGNsb3NlID0gYD5gICsgcG9zdGZpeDtcbiAgICByZXR1cm4gdm5vZGUucHJvcHNcbiAgICAgICAgPyBbb3BlbiwgLi4uZm9ybWF0UHJvcHModm5vZGUucHJvcHMpLCBjbG9zZV1cbiAgICAgICAgOiBbb3BlbiArIGNsb3NlXTtcbn1cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5mdW5jdGlvbiBmb3JtYXRQcm9wcyhwcm9wcykge1xuICAgIGNvbnN0IHJlcyA9IFtdO1xuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhwcm9wcyk7XG4gICAga2V5cy5zbGljZSgwLCAzKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgIHJlcy5wdXNoKC4uLmZvcm1hdFByb3Aoa2V5LCBwcm9wc1trZXldKSk7XG4gICAgfSk7XG4gICAgaWYgKGtleXMubGVuZ3RoID4gMykge1xuICAgICAgICByZXMucHVzaChgIC4uLmApO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufVxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmZ1bmN0aW9uIGZvcm1hdFByb3Aoa2V5LCB2YWx1ZSwgcmF3KSB7XG4gICAgaWYgKGlzU3RyaW5nKHZhbHVlKSkge1xuICAgICAgICB2YWx1ZSA9IEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHJhdyA/IHZhbHVlIDogW2Ake2tleX09JHt2YWx1ZX1gXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyB8fFxuICAgICAgICB0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJyB8fFxuICAgICAgICB2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiByYXcgPyB2YWx1ZSA6IFtgJHtrZXl9PSR7dmFsdWV9YF07XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzUmVmKHZhbHVlKSkge1xuICAgICAgICB2YWx1ZSA9IGZvcm1hdFByb3Aoa2V5LCB0b1Jhdyh2YWx1ZS52YWx1ZSksIHRydWUpO1xuICAgICAgICByZXR1cm4gcmF3ID8gdmFsdWUgOiBbYCR7a2V5fT1SZWY8YCwgdmFsdWUsIGA+YF07XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBbYCR7a2V5fT1mbiR7dmFsdWUubmFtZSA/IGA8JHt2YWx1ZS5uYW1lfT5gIDogYGB9YF07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YWx1ZSA9IHRvUmF3KHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHJhdyA/IHZhbHVlIDogW2Ake2tleX09YCwgdmFsdWVdO1xuICAgIH1cbn1cblxuY29uc3QgRXJyb3JUeXBlU3RyaW5ncyA9IHtcbiAgICBbXCJzcFwiIC8qIExpZmVjeWNsZUhvb2tzLlNFUlZFUl9QUkVGRVRDSCAqL106ICdzZXJ2ZXJQcmVmZXRjaCBob29rJyxcbiAgICBbXCJiY1wiIC8qIExpZmVjeWNsZUhvb2tzLkJFRk9SRV9DUkVBVEUgKi9dOiAnYmVmb3JlQ3JlYXRlIGhvb2snLFxuICAgIFtcImNcIiAvKiBMaWZlY3ljbGVIb29rcy5DUkVBVEVEICovXTogJ2NyZWF0ZWQgaG9vaycsXG4gICAgW1wiYm1cIiAvKiBMaWZlY3ljbGVIb29rcy5CRUZPUkVfTU9VTlQgKi9dOiAnYmVmb3JlTW91bnQgaG9vaycsXG4gICAgW1wibVwiIC8qIExpZmVjeWNsZUhvb2tzLk1PVU5URUQgKi9dOiAnbW91bnRlZCBob29rJyxcbiAgICBbXCJidVwiIC8qIExpZmVjeWNsZUhvb2tzLkJFRk9SRV9VUERBVEUgKi9dOiAnYmVmb3JlVXBkYXRlIGhvb2snLFxuICAgIFtcInVcIiAvKiBMaWZlY3ljbGVIb29rcy5VUERBVEVEICovXTogJ3VwZGF0ZWQnLFxuICAgIFtcImJ1bVwiIC8qIExpZmVjeWNsZUhvb2tzLkJFRk9SRV9VTk1PVU5UICovXTogJ2JlZm9yZVVubW91bnQgaG9vaycsXG4gICAgW1widW1cIiAvKiBMaWZlY3ljbGVIb29rcy5VTk1PVU5URUQgKi9dOiAndW5tb3VudGVkIGhvb2snLFxuICAgIFtcImFcIiAvKiBMaWZlY3ljbGVIb29rcy5BQ1RJVkFURUQgKi9dOiAnYWN0aXZhdGVkIGhvb2snLFxuICAgIFtcImRhXCIgLyogTGlmZWN5Y2xlSG9va3MuREVBQ1RJVkFURUQgKi9dOiAnZGVhY3RpdmF0ZWQgaG9vaycsXG4gICAgW1wiZWNcIiAvKiBMaWZlY3ljbGVIb29rcy5FUlJPUl9DQVBUVVJFRCAqL106ICdlcnJvckNhcHR1cmVkIGhvb2snLFxuICAgIFtcInJ0Y1wiIC8qIExpZmVjeWNsZUhvb2tzLlJFTkRFUl9UUkFDS0VEICovXTogJ3JlbmRlclRyYWNrZWQgaG9vaycsXG4gICAgW1wicnRnXCIgLyogTGlmZWN5Y2xlSG9va3MuUkVOREVSX1RSSUdHRVJFRCAqL106ICdyZW5kZXJUcmlnZ2VyZWQgaG9vaycsXG4gICAgWzAgLyogRXJyb3JDb2Rlcy5TRVRVUF9GVU5DVElPTiAqL106ICdzZXR1cCBmdW5jdGlvbicsXG4gICAgWzEgLyogRXJyb3JDb2Rlcy5SRU5ERVJfRlVOQ1RJT04gKi9dOiAncmVuZGVyIGZ1bmN0aW9uJyxcbiAgICBbMiAvKiBFcnJvckNvZGVzLldBVENIX0dFVFRFUiAqL106ICd3YXRjaGVyIGdldHRlcicsXG4gICAgWzMgLyogRXJyb3JDb2Rlcy5XQVRDSF9DQUxMQkFDSyAqL106ICd3YXRjaGVyIGNhbGxiYWNrJyxcbiAgICBbNCAvKiBFcnJvckNvZGVzLldBVENIX0NMRUFOVVAgKi9dOiAnd2F0Y2hlciBjbGVhbnVwIGZ1bmN0aW9uJyxcbiAgICBbNSAvKiBFcnJvckNvZGVzLk5BVElWRV9FVkVOVF9IQU5ETEVSICovXTogJ25hdGl2ZSBldmVudCBoYW5kbGVyJyxcbiAgICBbNiAvKiBFcnJvckNvZGVzLkNPTVBPTkVOVF9FVkVOVF9IQU5ETEVSICovXTogJ2NvbXBvbmVudCBldmVudCBoYW5kbGVyJyxcbiAgICBbNyAvKiBFcnJvckNvZGVzLlZOT0RFX0hPT0sgKi9dOiAndm5vZGUgaG9vaycsXG4gICAgWzggLyogRXJyb3JDb2Rlcy5ESVJFQ1RJVkVfSE9PSyAqL106ICdkaXJlY3RpdmUgaG9vaycsXG4gICAgWzkgLyogRXJyb3JDb2Rlcy5UUkFOU0lUSU9OX0hPT0sgKi9dOiAndHJhbnNpdGlvbiBob29rJyxcbiAgICBbMTAgLyogRXJyb3JDb2Rlcy5BUFBfRVJST1JfSEFORExFUiAqL106ICdhcHAgZXJyb3JIYW5kbGVyJyxcbiAgICBbMTEgLyogRXJyb3JDb2Rlcy5BUFBfV0FSTl9IQU5ETEVSICovXTogJ2FwcCB3YXJuSGFuZGxlcicsXG4gICAgWzEyIC8qIEVycm9yQ29kZXMuRlVOQ1RJT05fUkVGICovXTogJ3JlZiBmdW5jdGlvbicsXG4gICAgWzEzIC8qIEVycm9yQ29kZXMuQVNZTkNfQ09NUE9ORU5UX0xPQURFUiAqL106ICdhc3luYyBjb21wb25lbnQgbG9hZGVyJyxcbiAgICBbMTQgLyogRXJyb3JDb2Rlcy5TQ0hFRFVMRVIgKi9dOiAnc2NoZWR1bGVyIGZsdXNoLiBUaGlzIGlzIGxpa2VseSBhIFZ1ZSBpbnRlcm5hbHMgYnVnLiAnICtcbiAgICAgICAgJ1BsZWFzZSBvcGVuIGFuIGlzc3VlIGF0IGh0dHBzOi8vbmV3LWlzc3VlLnZ1ZWpzLm9yZy8/cmVwbz12dWVqcy9jb3JlJ1xufTtcbmZ1bmN0aW9uIGNhbGxXaXRoRXJyb3JIYW5kbGluZyhmbiwgaW5zdGFuY2UsIHR5cGUsIGFyZ3MpIHtcbiAgICBsZXQgcmVzO1xuICAgIHRyeSB7XG4gICAgICAgIHJlcyA9IGFyZ3MgPyBmbiguLi5hcmdzKSA6IGZuKCk7XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgaGFuZGxlRXJyb3IoZXJyLCBpbnN0YW5jZSwgdHlwZSk7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG59XG5mdW5jdGlvbiBjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZyhmbiwgaW5zdGFuY2UsIHR5cGUsIGFyZ3MpIHtcbiAgICBpZiAoaXNGdW5jdGlvbihmbikpIHtcbiAgICAgICAgY29uc3QgcmVzID0gY2FsbFdpdGhFcnJvckhhbmRsaW5nKGZuLCBpbnN0YW5jZSwgdHlwZSwgYXJncyk7XG4gICAgICAgIGlmIChyZXMgJiYgaXNQcm9taXNlKHJlcykpIHtcbiAgICAgICAgICAgIHJlcy5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgICAgICAgIGhhbmRsZUVycm9yKGVyciwgaW5zdGFuY2UsIHR5cGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG4gICAgY29uc3QgdmFsdWVzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmbi5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YWx1ZXMucHVzaChjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZyhmbltpXSwgaW5zdGFuY2UsIHR5cGUsIGFyZ3MpKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlcztcbn1cbmZ1bmN0aW9uIGhhbmRsZUVycm9yKGVyciwgaW5zdGFuY2UsIHR5cGUsIHRocm93SW5EZXYgPSB0cnVlKSB7XG4gICAgY29uc3QgY29udGV4dFZOb2RlID0gaW5zdGFuY2UgPyBpbnN0YW5jZS52bm9kZSA6IG51bGw7XG4gICAgaWYgKGluc3RhbmNlKSB7XG4gICAgICAgIGxldCBjdXIgPSBpbnN0YW5jZS5wYXJlbnQ7XG4gICAgICAgIC8vIHRoZSBleHBvc2VkIGluc3RhbmNlIGlzIHRoZSByZW5kZXIgcHJveHkgdG8ga2VlcCBpdCBjb25zaXN0ZW50IHdpdGggMi54XG4gICAgICAgIGNvbnN0IGV4cG9zZWRJbnN0YW5jZSA9IGluc3RhbmNlLnByb3h5O1xuICAgICAgICAvLyBpbiBwcm9kdWN0aW9uIHRoZSBob29rIHJlY2VpdmVzIG9ubHkgdGhlIGVycm9yIGNvZGVcbiAgICAgICAgY29uc3QgZXJyb3JJbmZvID0gKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gRXJyb3JUeXBlU3RyaW5nc1t0eXBlXSA6IHR5cGU7XG4gICAgICAgIHdoaWxlIChjdXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yQ2FwdHVyZWRIb29rcyA9IGN1ci5lYztcbiAgICAgICAgICAgIGlmIChlcnJvckNhcHR1cmVkSG9va3MpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVycm9yQ2FwdHVyZWRIb29rcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3JDYXB0dXJlZEhvb2tzW2ldKGVyciwgZXhwb3NlZEluc3RhbmNlLCBlcnJvckluZm8pID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VyID0gY3VyLnBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICAvLyBhcHAtbGV2ZWwgaGFuZGxpbmdcbiAgICAgICAgY29uc3QgYXBwRXJyb3JIYW5kbGVyID0gaW5zdGFuY2UuYXBwQ29udGV4dC5jb25maWcuZXJyb3JIYW5kbGVyO1xuICAgICAgICBpZiAoYXBwRXJyb3JIYW5kbGVyKSB7XG4gICAgICAgICAgICBjYWxsV2l0aEVycm9ySGFuZGxpbmcoYXBwRXJyb3JIYW5kbGVyLCBudWxsLCAxMCAvKiBFcnJvckNvZGVzLkFQUF9FUlJPUl9IQU5ETEVSICovLCBbZXJyLCBleHBvc2VkSW5zdGFuY2UsIGVycm9ySW5mb10pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuICAgIGxvZ0Vycm9yKGVyciwgdHlwZSwgY29udGV4dFZOb2RlLCB0aHJvd0luRGV2KTtcbn1cbmZ1bmN0aW9uIGxvZ0Vycm9yKGVyciwgdHlwZSwgY29udGV4dFZOb2RlLCB0aHJvd0luRGV2ID0gdHJ1ZSkge1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgY29uc3QgaW5mbyA9IEVycm9yVHlwZVN0cmluZ3NbdHlwZV07XG4gICAgICAgIGlmIChjb250ZXh0Vk5vZGUpIHtcbiAgICAgICAgICAgIHB1c2hXYXJuaW5nQ29udGV4dChjb250ZXh0Vk5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIHdhcm4oYFVuaGFuZGxlZCBlcnJvciR7aW5mbyA/IGAgZHVyaW5nIGV4ZWN1dGlvbiBvZiAke2luZm99YCA6IGBgfWApO1xuICAgICAgICBpZiAoY29udGV4dFZOb2RlKSB7XG4gICAgICAgICAgICBwb3BXYXJuaW5nQ29udGV4dCgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNyYXNoIGluIGRldiBieSBkZWZhdWx0IHNvIGl0J3MgbW9yZSBub3RpY2VhYmxlXG4gICAgICAgIGlmICh0aHJvd0luRGV2KSB7XG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIHJlY292ZXIgaW4gcHJvZCB0byByZWR1Y2UgdGhlIGltcGFjdCBvbiBlbmQtdXNlclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfVxufVxuXG5sZXQgaXNGbHVzaGluZyA9IGZhbHNlO1xubGV0IGlzRmx1c2hQZW5kaW5nID0gZmFsc2U7XG5jb25zdCBxdWV1ZSA9IFtdO1xubGV0IGZsdXNoSW5kZXggPSAwO1xuY29uc3QgcGVuZGluZ1Bvc3RGbHVzaENicyA9IFtdO1xubGV0IGFjdGl2ZVBvc3RGbHVzaENicyA9IG51bGw7XG5sZXQgcG9zdEZsdXNoSW5kZXggPSAwO1xuY29uc3QgcmVzb2x2ZWRQcm9taXNlID0gLyojX19QVVJFX18qLyBQcm9taXNlLnJlc29sdmUoKTtcbmxldCBjdXJyZW50Rmx1c2hQcm9taXNlID0gbnVsbDtcbmNvbnN0IFJFQ1VSU0lPTl9MSU1JVCA9IDEwMDtcbmZ1bmN0aW9uIG5leHRUaWNrKGZuKSB7XG4gICAgY29uc3QgcCA9IGN1cnJlbnRGbHVzaFByb21pc2UgfHwgcmVzb2x2ZWRQcm9taXNlO1xuICAgIHJldHVybiBmbiA/IHAudGhlbih0aGlzID8gZm4uYmluZCh0aGlzKSA6IGZuKSA6IHA7XG59XG4vLyAjMjc2OFxuLy8gVXNlIGJpbmFyeS1zZWFyY2ggdG8gZmluZCBhIHN1aXRhYmxlIHBvc2l0aW9uIGluIHRoZSBxdWV1ZSxcbi8vIHNvIHRoYXQgdGhlIHF1ZXVlIG1haW50YWlucyB0aGUgaW5jcmVhc2luZyBvcmRlciBvZiBqb2IncyBpZCxcbi8vIHdoaWNoIGNhbiBwcmV2ZW50IHRoZSBqb2IgZnJvbSBiZWluZyBza2lwcGVkIGFuZCBhbHNvIGNhbiBhdm9pZCByZXBlYXRlZCBwYXRjaGluZy5cbmZ1bmN0aW9uIGZpbmRJbnNlcnRpb25JbmRleChpZCkge1xuICAgIC8vIHRoZSBzdGFydCBpbmRleCBzaG91bGQgYmUgYGZsdXNoSW5kZXggKyAxYFxuICAgIGxldCBzdGFydCA9IGZsdXNoSW5kZXggKyAxO1xuICAgIGxldCBlbmQgPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUgKHN0YXJ0IDwgZW5kKSB7XG4gICAgICAgIGNvbnN0IG1pZGRsZSA9IChzdGFydCArIGVuZCkgPj4+IDE7XG4gICAgICAgIGNvbnN0IG1pZGRsZUpvYklkID0gZ2V0SWQocXVldWVbbWlkZGxlXSk7XG4gICAgICAgIG1pZGRsZUpvYklkIDwgaWQgPyAoc3RhcnQgPSBtaWRkbGUgKyAxKSA6IChlbmQgPSBtaWRkbGUpO1xuICAgIH1cbiAgICByZXR1cm4gc3RhcnQ7XG59XG5mdW5jdGlvbiBxdWV1ZUpvYihqb2IpIHtcbiAgICAvLyB0aGUgZGVkdXBlIHNlYXJjaCB1c2VzIHRoZSBzdGFydEluZGV4IGFyZ3VtZW50IG9mIEFycmF5LmluY2x1ZGVzKClcbiAgICAvLyBieSBkZWZhdWx0IHRoZSBzZWFyY2ggaW5kZXggaW5jbHVkZXMgdGhlIGN1cnJlbnQgam9iIHRoYXQgaXMgYmVpbmcgcnVuXG4gICAgLy8gc28gaXQgY2Fubm90IHJlY3Vyc2l2ZWx5IHRyaWdnZXIgaXRzZWxmIGFnYWluLlxuICAgIC8vIGlmIHRoZSBqb2IgaXMgYSB3YXRjaCgpIGNhbGxiYWNrLCB0aGUgc2VhcmNoIHdpbGwgc3RhcnQgd2l0aCBhICsxIGluZGV4IHRvXG4gICAgLy8gYWxsb3cgaXQgcmVjdXJzaXZlbHkgdHJpZ2dlciBpdHNlbGYgLSBpdCBpcyB0aGUgdXNlcidzIHJlc3BvbnNpYmlsaXR5IHRvXG4gICAgLy8gZW5zdXJlIGl0IGRvZXNuJ3QgZW5kIHVwIGluIGFuIGluZmluaXRlIGxvb3AuXG4gICAgaWYgKCFxdWV1ZS5sZW5ndGggfHxcbiAgICAgICAgIXF1ZXVlLmluY2x1ZGVzKGpvYiwgaXNGbHVzaGluZyAmJiBqb2IuYWxsb3dSZWN1cnNlID8gZmx1c2hJbmRleCArIDEgOiBmbHVzaEluZGV4KSkge1xuICAgICAgICBpZiAoam9iLmlkID09IG51bGwpIHtcbiAgICAgICAgICAgIHF1ZXVlLnB1c2goam9iKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHF1ZXVlLnNwbGljZShmaW5kSW5zZXJ0aW9uSW5kZXgoam9iLmlkKSwgMCwgam9iKTtcbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUZsdXNoKCk7XG4gICAgfVxufVxuZnVuY3Rpb24gcXVldWVGbHVzaCgpIHtcbiAgICBpZiAoIWlzRmx1c2hpbmcgJiYgIWlzRmx1c2hQZW5kaW5nKSB7XG4gICAgICAgIGlzRmx1c2hQZW5kaW5nID0gdHJ1ZTtcbiAgICAgICAgY3VycmVudEZsdXNoUHJvbWlzZSA9IHJlc29sdmVkUHJvbWlzZS50aGVuKGZsdXNoSm9icyk7XG4gICAgfVxufVxuZnVuY3Rpb24gaW52YWxpZGF0ZUpvYihqb2IpIHtcbiAgICBjb25zdCBpID0gcXVldWUuaW5kZXhPZihqb2IpO1xuICAgIGlmIChpID4gZmx1c2hJbmRleCkge1xuICAgICAgICBxdWV1ZS5zcGxpY2UoaSwgMSk7XG4gICAgfVxufVxuZnVuY3Rpb24gcXVldWVQb3N0Rmx1c2hDYihjYikge1xuICAgIGlmICghaXNBcnJheShjYikpIHtcbiAgICAgICAgaWYgKCFhY3RpdmVQb3N0Rmx1c2hDYnMgfHxcbiAgICAgICAgICAgICFhY3RpdmVQb3N0Rmx1c2hDYnMuaW5jbHVkZXMoY2IsIGNiLmFsbG93UmVjdXJzZSA/IHBvc3RGbHVzaEluZGV4ICsgMSA6IHBvc3RGbHVzaEluZGV4KSkge1xuICAgICAgICAgICAgcGVuZGluZ1Bvc3RGbHVzaENicy5wdXNoKGNiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gaWYgY2IgaXMgYW4gYXJyYXksIGl0IGlzIGEgY29tcG9uZW50IGxpZmVjeWNsZSBob29rIHdoaWNoIGNhbiBvbmx5IGJlXG4gICAgICAgIC8vIHRyaWdnZXJlZCBieSBhIGpvYiwgd2hpY2ggaXMgYWxyZWFkeSBkZWR1cGVkIGluIHRoZSBtYWluIHF1ZXVlLCBzb1xuICAgICAgICAvLyB3ZSBjYW4gc2tpcCBkdXBsaWNhdGUgY2hlY2sgaGVyZSB0byBpbXByb3ZlIHBlcmZcbiAgICAgICAgcGVuZGluZ1Bvc3RGbHVzaENicy5wdXNoKC4uLmNiKTtcbiAgICB9XG4gICAgcXVldWVGbHVzaCgpO1xufVxuZnVuY3Rpb24gZmx1c2hQcmVGbHVzaENicyhzZWVuLCBcbi8vIGlmIGN1cnJlbnRseSBmbHVzaGluZywgc2tpcCB0aGUgY3VycmVudCBqb2IgaXRzZWxmXG5pID0gaXNGbHVzaGluZyA/IGZsdXNoSW5kZXggKyAxIDogMCkge1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgc2VlbiA9IHNlZW4gfHwgbmV3IE1hcCgpO1xuICAgIH1cbiAgICBmb3IgKDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGNiID0gcXVldWVbaV07XG4gICAgICAgIGlmIChjYiAmJiBjYi5wcmUpIHtcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgY2hlY2tSZWN1cnNpdmVVcGRhdGVzKHNlZW4sIGNiKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcXVldWUuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgaS0tO1xuICAgICAgICAgICAgY2IoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGZsdXNoUG9zdEZsdXNoQ2JzKHNlZW4pIHtcbiAgICBpZiAocGVuZGluZ1Bvc3RGbHVzaENicy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgZGVkdXBlZCA9IFsuLi5uZXcgU2V0KHBlbmRpbmdQb3N0Rmx1c2hDYnMpXTtcbiAgICAgICAgcGVuZGluZ1Bvc3RGbHVzaENicy5sZW5ndGggPSAwO1xuICAgICAgICAvLyAjMTk0NyBhbHJlYWR5IGhhcyBhY3RpdmUgcXVldWUsIG5lc3RlZCBmbHVzaFBvc3RGbHVzaENicyBjYWxsXG4gICAgICAgIGlmIChhY3RpdmVQb3N0Rmx1c2hDYnMpIHtcbiAgICAgICAgICAgIGFjdGl2ZVBvc3RGbHVzaENicy5wdXNoKC4uLmRlZHVwZWQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGFjdGl2ZVBvc3RGbHVzaENicyA9IGRlZHVwZWQ7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgIHNlZW4gPSBzZWVuIHx8IG5ldyBNYXAoKTtcbiAgICAgICAgfVxuICAgICAgICBhY3RpdmVQb3N0Rmx1c2hDYnMuc29ydCgoYSwgYikgPT4gZ2V0SWQoYSkgLSBnZXRJZChiKSk7XG4gICAgICAgIGZvciAocG9zdEZsdXNoSW5kZXggPSAwOyBwb3N0Rmx1c2hJbmRleCA8IGFjdGl2ZVBvc3RGbHVzaENicy5sZW5ndGg7IHBvc3RGbHVzaEluZGV4KyspIHtcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcbiAgICAgICAgICAgICAgICBjaGVja1JlY3Vyc2l2ZVVwZGF0ZXMoc2VlbiwgYWN0aXZlUG9zdEZsdXNoQ2JzW3Bvc3RGbHVzaEluZGV4XSkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFjdGl2ZVBvc3RGbHVzaENic1twb3N0Rmx1c2hJbmRleF0oKTtcbiAgICAgICAgfVxuICAgICAgICBhY3RpdmVQb3N0Rmx1c2hDYnMgPSBudWxsO1xuICAgICAgICBwb3N0Rmx1c2hJbmRleCA9IDA7XG4gICAgfVxufVxuY29uc3QgZ2V0SWQgPSAoam9iKSA9PiBqb2IuaWQgPT0gbnVsbCA/IEluZmluaXR5IDogam9iLmlkO1xuY29uc3QgY29tcGFyYXRvciA9IChhLCBiKSA9PiB7XG4gICAgY29uc3QgZGlmZiA9IGdldElkKGEpIC0gZ2V0SWQoYik7XG4gICAgaWYgKGRpZmYgPT09IDApIHtcbiAgICAgICAgaWYgKGEucHJlICYmICFiLnByZSlcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgaWYgKGIucHJlICYmICFhLnByZSlcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgIH1cbiAgICByZXR1cm4gZGlmZjtcbn07XG5mdW5jdGlvbiBmbHVzaEpvYnMoc2Vlbikge1xuICAgIGlzRmx1c2hQZW5kaW5nID0gZmFsc2U7XG4gICAgaXNGbHVzaGluZyA9IHRydWU7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICBzZWVuID0gc2VlbiB8fCBuZXcgTWFwKCk7XG4gICAgfVxuICAgIC8vIFNvcnQgcXVldWUgYmVmb3JlIGZsdXNoLlxuICAgIC8vIFRoaXMgZW5zdXJlcyB0aGF0OlxuICAgIC8vIDEuIENvbXBvbmVudHMgYXJlIHVwZGF0ZWQgZnJvbSBwYXJlbnQgdG8gY2hpbGQuIChiZWNhdXNlIHBhcmVudCBpcyBhbHdheXNcbiAgICAvLyAgICBjcmVhdGVkIGJlZm9yZSB0aGUgY2hpbGQgc28gaXRzIHJlbmRlciBlZmZlY3Qgd2lsbCBoYXZlIHNtYWxsZXJcbiAgICAvLyAgICBwcmlvcml0eSBudW1iZXIpXG4gICAgLy8gMi4gSWYgYSBjb21wb25lbnQgaXMgdW5tb3VudGVkIGR1cmluZyBhIHBhcmVudCBjb21wb25lbnQncyB1cGRhdGUsXG4gICAgLy8gICAgaXRzIHVwZGF0ZSBjYW4gYmUgc2tpcHBlZC5cbiAgICBxdWV1ZS5zb3J0KGNvbXBhcmF0b3IpO1xuICAgIC8vIGNvbmRpdGlvbmFsIHVzYWdlIG9mIGNoZWNrUmVjdXJzaXZlVXBkYXRlIG11c3QgYmUgZGV0ZXJtaW5lZCBvdXQgb2ZcbiAgICAvLyB0cnkgLi4uIGNhdGNoIGJsb2NrIHNpbmNlIFJvbGx1cCBieSBkZWZhdWx0IGRlLW9wdGltaXplcyB0cmVlc2hha2luZ1xuICAgIC8vIGluc2lkZSB0cnktY2F0Y2guIFRoaXMgY2FuIGxlYXZlIGFsbCB3YXJuaW5nIGNvZGUgdW5zaGFrZWQuIEFsdGhvdWdoXG4gICAgLy8gdGhleSB3b3VsZCBnZXQgZXZlbnR1YWxseSBzaGFrZW4gYnkgYSBtaW5pZmllciBsaWtlIHRlcnNlciwgc29tZSBtaW5pZmllcnNcbiAgICAvLyB3b3VsZCBmYWlsIHRvIGRvIHRoYXQgKGUuZy4gaHR0cHM6Ly9naXRodWIuY29tL2V2YW53L2VzYnVpbGQvaXNzdWVzLzE2MTApXG4gICAgY29uc3QgY2hlY2sgPSAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJylcbiAgICAgICAgPyAoam9iKSA9PiBjaGVja1JlY3Vyc2l2ZVVwZGF0ZXMoc2Vlbiwgam9iKVxuICAgICAgICA6IE5PT1A7XG4gICAgdHJ5IHtcbiAgICAgICAgZm9yIChmbHVzaEluZGV4ID0gMDsgZmx1c2hJbmRleCA8IHF1ZXVlLmxlbmd0aDsgZmx1c2hJbmRleCsrKSB7XG4gICAgICAgICAgICBjb25zdCBqb2IgPSBxdWV1ZVtmbHVzaEluZGV4XTtcbiAgICAgICAgICAgIGlmIChqb2IgJiYgam9iLmFjdGl2ZSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGNoZWNrKGpvYikpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGBydW5uaW5nOmAsIGpvYi5pZClcbiAgICAgICAgICAgICAgICBjYWxsV2l0aEVycm9ySGFuZGxpbmcoam9iLCBudWxsLCAxNCAvKiBFcnJvckNvZGVzLlNDSEVEVUxFUiAqLyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZmluYWxseSB7XG4gICAgICAgIGZsdXNoSW5kZXggPSAwO1xuICAgICAgICBxdWV1ZS5sZW5ndGggPSAwO1xuICAgICAgICBmbHVzaFBvc3RGbHVzaENicyhzZWVuKTtcbiAgICAgICAgaXNGbHVzaGluZyA9IGZhbHNlO1xuICAgICAgICBjdXJyZW50Rmx1c2hQcm9taXNlID0gbnVsbDtcbiAgICAgICAgLy8gc29tZSBwb3N0Rmx1c2hDYiBxdWV1ZWQgam9icyFcbiAgICAgICAgLy8ga2VlcCBmbHVzaGluZyB1bnRpbCBpdCBkcmFpbnMuXG4gICAgICAgIGlmIChxdWV1ZS5sZW5ndGggfHwgcGVuZGluZ1Bvc3RGbHVzaENicy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGZsdXNoSm9icyhzZWVuKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGNoZWNrUmVjdXJzaXZlVXBkYXRlcyhzZWVuLCBmbikge1xuICAgIGlmICghc2Vlbi5oYXMoZm4pKSB7XG4gICAgICAgIHNlZW4uc2V0KGZuLCAxKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IGNvdW50ID0gc2Vlbi5nZXQoZm4pO1xuICAgICAgICBpZiAoY291bnQgPiBSRUNVUlNJT05fTElNSVQpIHtcbiAgICAgICAgICAgIGNvbnN0IGluc3RhbmNlID0gZm4ub3duZXJJbnN0YW5jZTtcbiAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudE5hbWUgPSBpbnN0YW5jZSAmJiBnZXRDb21wb25lbnROYW1lKGluc3RhbmNlLnR5cGUpO1xuICAgICAgICAgICAgd2FybihgTWF4aW11bSByZWN1cnNpdmUgdXBkYXRlcyBleGNlZWRlZCR7Y29tcG9uZW50TmFtZSA/IGAgaW4gY29tcG9uZW50IDwke2NvbXBvbmVudE5hbWV9PmAgOiBgYH0uIGAgK1xuICAgICAgICAgICAgICAgIGBUaGlzIG1lYW5zIHlvdSBoYXZlIGEgcmVhY3RpdmUgZWZmZWN0IHRoYXQgaXMgbXV0YXRpbmcgaXRzIG93biBgICtcbiAgICAgICAgICAgICAgICBgZGVwZW5kZW5jaWVzIGFuZCB0aHVzIHJlY3Vyc2l2ZWx5IHRyaWdnZXJpbmcgaXRzZWxmLiBQb3NzaWJsZSBzb3VyY2VzIGAgK1xuICAgICAgICAgICAgICAgIGBpbmNsdWRlIGNvbXBvbmVudCB0ZW1wbGF0ZSwgcmVuZGVyIGZ1bmN0aW9uLCB1cGRhdGVkIGhvb2sgb3IgYCArXG4gICAgICAgICAgICAgICAgYHdhdGNoZXIgc291cmNlIGZ1bmN0aW9uLmApO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzZWVuLnNldChmbiwgY291bnQgKyAxKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyogZXNsaW50LWRpc2FibGUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzICovXG5sZXQgaXNIbXJVcGRhdGluZyA9IGZhbHNlO1xuY29uc3QgaG1yRGlydHlDb21wb25lbnRzID0gbmV3IFNldCgpO1xuLy8gRXhwb3NlIHRoZSBITVIgcnVudGltZSBvbiB0aGUgZ2xvYmFsIG9iamVjdFxuLy8gVGhpcyBtYWtlcyBpdCBlbnRpcmVseSB0cmVlLXNoYWthYmxlIHdpdGhvdXQgcG9sbHV0aW5nIHRoZSBleHBvcnRzIGFuZCBtYWtlc1xuLy8gaXQgZWFzaWVyIHRvIGJlIHVzZWQgaW4gdG9vbGluZ3MgbGlrZSB2dWUtbG9hZGVyXG4vLyBOb3RlOiBmb3IgYSBjb21wb25lbnQgdG8gYmUgZWxpZ2libGUgZm9yIEhNUiBpdCBhbHNvIG5lZWRzIHRoZSBfX2htcklkIG9wdGlvblxuLy8gdG8gYmUgc2V0IHNvIHRoYXQgaXRzIGluc3RhbmNlcyBjYW4gYmUgcmVnaXN0ZXJlZCAvIHJlbW92ZWQuXG5pZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgZ2V0R2xvYmFsVGhpcygpLl9fVlVFX0hNUl9SVU5USU1FX18gPSB7XG4gICAgICAgIGNyZWF0ZVJlY29yZDogdHJ5V3JhcChjcmVhdGVSZWNvcmQpLFxuICAgICAgICByZXJlbmRlcjogdHJ5V3JhcChyZXJlbmRlciksXG4gICAgICAgIHJlbG9hZDogdHJ5V3JhcChyZWxvYWQpXG4gICAgfTtcbn1cbmNvbnN0IG1hcCA9IG5ldyBNYXAoKTtcbmZ1bmN0aW9uIHJlZ2lzdGVySE1SKGluc3RhbmNlKSB7XG4gICAgY29uc3QgaWQgPSBpbnN0YW5jZS50eXBlLl9faG1ySWQ7XG4gICAgbGV0IHJlY29yZCA9IG1hcC5nZXQoaWQpO1xuICAgIGlmICghcmVjb3JkKSB7XG4gICAgICAgIGNyZWF0ZVJlY29yZChpZCwgaW5zdGFuY2UudHlwZSk7XG4gICAgICAgIHJlY29yZCA9IG1hcC5nZXQoaWQpO1xuICAgIH1cbiAgICByZWNvcmQuaW5zdGFuY2VzLmFkZChpbnN0YW5jZSk7XG59XG5mdW5jdGlvbiB1bnJlZ2lzdGVySE1SKGluc3RhbmNlKSB7XG4gICAgbWFwLmdldChpbnN0YW5jZS50eXBlLl9faG1ySWQpLmluc3RhbmNlcy5kZWxldGUoaW5zdGFuY2UpO1xufVxuZnVuY3Rpb24gY3JlYXRlUmVjb3JkKGlkLCBpbml0aWFsRGVmKSB7XG4gICAgaWYgKG1hcC5oYXMoaWQpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgbWFwLnNldChpZCwge1xuICAgICAgICBpbml0aWFsRGVmOiBub3JtYWxpemVDbGFzc0NvbXBvbmVudChpbml0aWFsRGVmKSxcbiAgICAgICAgaW5zdGFuY2VzOiBuZXcgU2V0KClcbiAgICB9KTtcbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUNsYXNzQ29tcG9uZW50KGNvbXBvbmVudCkge1xuICAgIHJldHVybiBpc0NsYXNzQ29tcG9uZW50KGNvbXBvbmVudCkgPyBjb21wb25lbnQuX192Y2NPcHRzIDogY29tcG9uZW50O1xufVxuZnVuY3Rpb24gcmVyZW5kZXIoaWQsIG5ld1JlbmRlcikge1xuICAgIGNvbnN0IHJlY29yZCA9IG1hcC5nZXQoaWQpO1xuICAgIGlmICghcmVjb3JkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gdXBkYXRlIGluaXRpYWwgcmVjb3JkIChmb3Igbm90LXlldC1yZW5kZXJlZCBjb21wb25lbnQpXG4gICAgcmVjb3JkLmluaXRpYWxEZWYucmVuZGVyID0gbmV3UmVuZGVyO1xuICAgIFsuLi5yZWNvcmQuaW5zdGFuY2VzXS5mb3JFYWNoKGluc3RhbmNlID0+IHtcbiAgICAgICAgaWYgKG5ld1JlbmRlcikge1xuICAgICAgICAgICAgaW5zdGFuY2UucmVuZGVyID0gbmV3UmVuZGVyO1xuICAgICAgICAgICAgbm9ybWFsaXplQ2xhc3NDb21wb25lbnQoaW5zdGFuY2UudHlwZSkucmVuZGVyID0gbmV3UmVuZGVyO1xuICAgICAgICB9XG4gICAgICAgIGluc3RhbmNlLnJlbmRlckNhY2hlID0gW107XG4gICAgICAgIC8vIHRoaXMgZmxhZyBmb3JjZXMgY2hpbGQgY29tcG9uZW50cyB3aXRoIHNsb3QgY29udGVudCB0byB1cGRhdGVcbiAgICAgICAgaXNIbXJVcGRhdGluZyA9IHRydWU7XG4gICAgICAgIGluc3RhbmNlLnVwZGF0ZSgpO1xuICAgICAgICBpc0htclVwZGF0aW5nID0gZmFsc2U7XG4gICAgfSk7XG59XG5mdW5jdGlvbiByZWxvYWQoaWQsIG5ld0NvbXApIHtcbiAgICBjb25zdCByZWNvcmQgPSBtYXAuZ2V0KGlkKTtcbiAgICBpZiAoIXJlY29yZClcbiAgICAgICAgcmV0dXJuO1xuICAgIG5ld0NvbXAgPSBub3JtYWxpemVDbGFzc0NvbXBvbmVudChuZXdDb21wKTtcbiAgICAvLyB1cGRhdGUgaW5pdGlhbCBkZWYgKGZvciBub3QteWV0LXJlbmRlcmVkIGNvbXBvbmVudHMpXG4gICAgdXBkYXRlQ29tcG9uZW50RGVmKHJlY29yZC5pbml0aWFsRGVmLCBuZXdDb21wKTtcbiAgICAvLyBjcmVhdGUgYSBzbmFwc2hvdCB3aGljaCBhdm9pZHMgdGhlIHNldCBiZWluZyBtdXRhdGVkIGR1cmluZyB1cGRhdGVzXG4gICAgY29uc3QgaW5zdGFuY2VzID0gWy4uLnJlY29yZC5pbnN0YW5jZXNdO1xuICAgIGZvciAoY29uc3QgaW5zdGFuY2Ugb2YgaW5zdGFuY2VzKSB7XG4gICAgICAgIGNvbnN0IG9sZENvbXAgPSBub3JtYWxpemVDbGFzc0NvbXBvbmVudChpbnN0YW5jZS50eXBlKTtcbiAgICAgICAgaWYgKCFobXJEaXJ0eUNvbXBvbmVudHMuaGFzKG9sZENvbXApKSB7XG4gICAgICAgICAgICAvLyAxLiBVcGRhdGUgZXhpc3RpbmcgY29tcCBkZWZpbml0aW9uIHRvIG1hdGNoIG5ldyBvbmVcbiAgICAgICAgICAgIGlmIChvbGRDb21wICE9PSByZWNvcmQuaW5pdGlhbERlZikge1xuICAgICAgICAgICAgICAgIHVwZGF0ZUNvbXBvbmVudERlZihvbGRDb21wLCBuZXdDb21wKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIDIuIG1hcmsgZGVmaW5pdGlvbiBkaXJ0eS4gVGhpcyBmb3JjZXMgdGhlIHJlbmRlcmVyIHRvIHJlcGxhY2UgdGhlXG4gICAgICAgICAgICAvLyBjb21wb25lbnQgb24gcGF0Y2guXG4gICAgICAgICAgICBobXJEaXJ0eUNvbXBvbmVudHMuYWRkKG9sZENvbXApO1xuICAgICAgICB9XG4gICAgICAgIC8vIDMuIGludmFsaWRhdGUgb3B0aW9ucyByZXNvbHV0aW9uIGNhY2hlXG4gICAgICAgIGluc3RhbmNlLmFwcENvbnRleHQub3B0aW9uc0NhY2hlLmRlbGV0ZShpbnN0YW5jZS50eXBlKTtcbiAgICAgICAgLy8gNC4gYWN0dWFsbHkgdXBkYXRlXG4gICAgICAgIGlmIChpbnN0YW5jZS5jZVJlbG9hZCkge1xuICAgICAgICAgICAgLy8gY3VzdG9tIGVsZW1lbnRcbiAgICAgICAgICAgIGhtckRpcnR5Q29tcG9uZW50cy5hZGQob2xkQ29tcCk7XG4gICAgICAgICAgICBpbnN0YW5jZS5jZVJlbG9hZChuZXdDb21wLnN0eWxlcyk7XG4gICAgICAgICAgICBobXJEaXJ0eUNvbXBvbmVudHMuZGVsZXRlKG9sZENvbXApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGluc3RhbmNlLnBhcmVudCkge1xuICAgICAgICAgICAgLy8gNC4gRm9yY2UgdGhlIHBhcmVudCBpbnN0YW5jZSB0byByZS1yZW5kZXIuIFRoaXMgd2lsbCBjYXVzZSBhbGwgdXBkYXRlZFxuICAgICAgICAgICAgLy8gY29tcG9uZW50cyB0byBiZSB1bm1vdW50ZWQgYW5kIHJlLW1vdW50ZWQuIFF1ZXVlIHRoZSB1cGRhdGUgc28gdGhhdCB3ZVxuICAgICAgICAgICAgLy8gZG9uJ3QgZW5kIHVwIGZvcmNpbmcgdGhlIHNhbWUgcGFyZW50IHRvIHJlLXJlbmRlciBtdWx0aXBsZSB0aW1lcy5cbiAgICAgICAgICAgIHF1ZXVlSm9iKGluc3RhbmNlLnBhcmVudC51cGRhdGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGluc3RhbmNlLmFwcENvbnRleHQucmVsb2FkKSB7XG4gICAgICAgICAgICAvLyByb290IGluc3RhbmNlIG1vdW50ZWQgdmlhIGNyZWF0ZUFwcCgpIGhhcyBhIHJlbG9hZCBtZXRob2RcbiAgICAgICAgICAgIGluc3RhbmNlLmFwcENvbnRleHQucmVsb2FkKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIC8vIHJvb3QgaW5zdGFuY2UgaW5zaWRlIHRyZWUgY3JlYXRlZCB2aWEgcmF3IHJlbmRlcigpLiBGb3JjZSByZWxvYWQuXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1tITVJdIFJvb3Qgb3IgbWFudWFsbHkgbW91bnRlZCBpbnN0YW5jZSBtb2RpZmllZC4gRnVsbCByZWxvYWQgcmVxdWlyZWQuJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gNS4gbWFrZSBzdXJlIHRvIGNsZWFudXAgZGlydHkgaG1yIGNvbXBvbmVudHMgYWZ0ZXIgdXBkYXRlXG4gICAgcXVldWVQb3N0Rmx1c2hDYigoKSA9PiB7XG4gICAgICAgIGZvciAoY29uc3QgaW5zdGFuY2Ugb2YgaW5zdGFuY2VzKSB7XG4gICAgICAgICAgICBobXJEaXJ0eUNvbXBvbmVudHMuZGVsZXRlKG5vcm1hbGl6ZUNsYXNzQ29tcG9uZW50KGluc3RhbmNlLnR5cGUpKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuZnVuY3Rpb24gdXBkYXRlQ29tcG9uZW50RGVmKG9sZENvbXAsIG5ld0NvbXApIHtcbiAgICBleHRlbmQob2xkQ29tcCwgbmV3Q29tcCk7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2xkQ29tcCkge1xuICAgICAgICBpZiAoa2V5ICE9PSAnX19maWxlJyAmJiAhKGtleSBpbiBuZXdDb21wKSkge1xuICAgICAgICAgICAgZGVsZXRlIG9sZENvbXBba2V5XTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIHRyeVdyYXAoZm4pIHtcbiAgICByZXR1cm4gKGlkLCBhcmcpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBmbihpZCwgYXJnKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgW0hNUl0gU29tZXRoaW5nIHdlbnQgd3JvbmcgZHVyaW5nIFZ1ZSBjb21wb25lbnQgaG90LXJlbG9hZC4gYCArXG4gICAgICAgICAgICAgICAgYEZ1bGwgcmVsb2FkIHJlcXVpcmVkLmApO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxubGV0IGRldnRvb2xzO1xubGV0IGJ1ZmZlciA9IFtdO1xubGV0IGRldnRvb2xzTm90SW5zdGFsbGVkID0gZmFsc2U7XG5mdW5jdGlvbiBlbWl0KGV2ZW50LCAuLi5hcmdzKSB7XG4gICAgaWYgKGRldnRvb2xzKSB7XG4gICAgICAgIGRldnRvb2xzLmVtaXQoZXZlbnQsIC4uLmFyZ3MpO1xuICAgIH1cbiAgICBlbHNlIGlmICghZGV2dG9vbHNOb3RJbnN0YWxsZWQpIHtcbiAgICAgICAgYnVmZmVyLnB1c2goeyBldmVudCwgYXJncyB9KTtcbiAgICB9XG59XG5mdW5jdGlvbiBzZXREZXZ0b29sc0hvb2soaG9vaywgdGFyZ2V0KSB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICBkZXZ0b29scyA9IGhvb2s7XG4gICAgaWYgKGRldnRvb2xzKSB7XG4gICAgICAgIGRldnRvb2xzLmVuYWJsZWQgPSB0cnVlO1xuICAgICAgICBidWZmZXIuZm9yRWFjaCgoeyBldmVudCwgYXJncyB9KSA9PiBkZXZ0b29scy5lbWl0KGV2ZW50LCAuLi5hcmdzKSk7XG4gICAgICAgIGJ1ZmZlciA9IFtdO1xuICAgIH1cbiAgICBlbHNlIGlmIChcbiAgICAvLyBoYW5kbGUgbGF0ZSBkZXZ0b29scyBpbmplY3Rpb24gLSBvbmx5IGRvIHRoaXMgaWYgd2UgYXJlIGluIGFuIGFjdHVhbFxuICAgIC8vIGJyb3dzZXIgZW52aXJvbm1lbnQgdG8gYXZvaWQgdGhlIHRpbWVyIGhhbmRsZSBzdGFsbGluZyB0ZXN0IHJ1bm5lciBleGl0XG4gICAgLy8gKCM0ODE1KVxuICAgIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgIC8vIHNvbWUgZW52cyBtb2NrIHdpbmRvdyBidXQgbm90IGZ1bGx5XG4gICAgICAgIHdpbmRvdy5IVE1MRWxlbWVudCAmJlxuICAgICAgICAvLyBhbHNvIGV4Y2x1ZGUganNkb21cbiAgICAgICAgISgoX2IgPSAoX2EgPSB3aW5kb3cubmF2aWdhdG9yKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudXNlckFnZW50KSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuaW5jbHVkZXMoJ2pzZG9tJykpKSB7XG4gICAgICAgIGNvbnN0IHJlcGxheSA9ICh0YXJnZXQuX19WVUVfREVWVE9PTFNfSE9PS19SRVBMQVlfXyA9XG4gICAgICAgICAgICB0YXJnZXQuX19WVUVfREVWVE9PTFNfSE9PS19SRVBMQVlfXyB8fCBbXSk7XG4gICAgICAgIHJlcGxheS5wdXNoKChuZXdIb29rKSA9PiB7XG4gICAgICAgICAgICBzZXREZXZ0b29sc0hvb2sobmV3SG9vaywgdGFyZ2V0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGNsZWFyIGJ1ZmZlciBhZnRlciAzcyAtIHRoZSB1c2VyIHByb2JhYmx5IGRvZXNuJ3QgaGF2ZSBkZXZ0b29scyBpbnN0YWxsZWRcbiAgICAgICAgLy8gYXQgYWxsLCBhbmQga2VlcGluZyB0aGUgYnVmZmVyIHdpbGwgY2F1c2UgbWVtb3J5IGxlYWtzICgjNDczOClcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWRldnRvb2xzKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0Ll9fVlVFX0RFVlRPT0xTX0hPT0tfUkVQTEFZX18gPSBudWxsO1xuICAgICAgICAgICAgICAgIGRldnRvb2xzTm90SW5zdGFsbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBidWZmZXIgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgMzAwMCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBub24tYnJvd3NlciBlbnYsIGFzc3VtZSBub3QgaW5zdGFsbGVkXG4gICAgICAgIGRldnRvb2xzTm90SW5zdGFsbGVkID0gdHJ1ZTtcbiAgICAgICAgYnVmZmVyID0gW107XG4gICAgfVxufVxuZnVuY3Rpb24gZGV2dG9vbHNJbml0QXBwKGFwcCwgdmVyc2lvbikge1xuICAgIGVtaXQoXCJhcHA6aW5pdFwiIC8qIERldnRvb2xzSG9va3MuQVBQX0lOSVQgKi8sIGFwcCwgdmVyc2lvbiwge1xuICAgICAgICBGcmFnbWVudCxcbiAgICAgICAgVGV4dCxcbiAgICAgICAgQ29tbWVudCxcbiAgICAgICAgU3RhdGljXG4gICAgfSk7XG59XG5mdW5jdGlvbiBkZXZ0b29sc1VubW91bnRBcHAoYXBwKSB7XG4gICAgZW1pdChcImFwcDp1bm1vdW50XCIgLyogRGV2dG9vbHNIb29rcy5BUFBfVU5NT1VOVCAqLywgYXBwKTtcbn1cbmNvbnN0IGRldnRvb2xzQ29tcG9uZW50QWRkZWQgPSAvKiNfX1BVUkVfXyovIGNyZWF0ZURldnRvb2xzQ29tcG9uZW50SG9vayhcImNvbXBvbmVudDphZGRlZFwiIC8qIERldnRvb2xzSG9va3MuQ09NUE9ORU5UX0FEREVEICovKTtcbmNvbnN0IGRldnRvb2xzQ29tcG9uZW50VXBkYXRlZCA9IFxuLyojX19QVVJFX18qLyBjcmVhdGVEZXZ0b29sc0NvbXBvbmVudEhvb2soXCJjb21wb25lbnQ6dXBkYXRlZFwiIC8qIERldnRvb2xzSG9va3MuQ09NUE9ORU5UX1VQREFURUQgKi8pO1xuY29uc3QgX2RldnRvb2xzQ29tcG9uZW50UmVtb3ZlZCA9IC8qI19fUFVSRV9fKi8gY3JlYXRlRGV2dG9vbHNDb21wb25lbnRIb29rKFwiY29tcG9uZW50OnJlbW92ZWRcIiAvKiBEZXZ0b29sc0hvb2tzLkNPTVBPTkVOVF9SRU1PVkVEICovKTtcbmNvbnN0IGRldnRvb2xzQ29tcG9uZW50UmVtb3ZlZCA9IChjb21wb25lbnQpID0+IHtcbiAgICBpZiAoZGV2dG9vbHMgJiZcbiAgICAgICAgdHlwZW9mIGRldnRvb2xzLmNsZWFudXBCdWZmZXIgPT09ICdmdW5jdGlvbicgJiZcbiAgICAgICAgLy8gcmVtb3ZlIHRoZSBjb21wb25lbnQgaWYgaXQgd2Fzbid0IGJ1ZmZlcmVkXG4gICAgICAgICFkZXZ0b29scy5jbGVhbnVwQnVmZmVyKGNvbXBvbmVudCkpIHtcbiAgICAgICAgX2RldnRvb2xzQ29tcG9uZW50UmVtb3ZlZChjb21wb25lbnQpO1xuICAgIH1cbn07XG5mdW5jdGlvbiBjcmVhdGVEZXZ0b29sc0NvbXBvbmVudEhvb2soaG9vaykge1xuICAgIHJldHVybiAoY29tcG9uZW50KSA9PiB7XG4gICAgICAgIGVtaXQoaG9vaywgY29tcG9uZW50LmFwcENvbnRleHQuYXBwLCBjb21wb25lbnQudWlkLCBjb21wb25lbnQucGFyZW50ID8gY29tcG9uZW50LnBhcmVudC51aWQgOiB1bmRlZmluZWQsIGNvbXBvbmVudCk7XG4gICAgfTtcbn1cbmNvbnN0IGRldnRvb2xzUGVyZlN0YXJ0ID0gLyojX19QVVJFX18qLyBjcmVhdGVEZXZ0b29sc1BlcmZvcm1hbmNlSG9vayhcInBlcmY6c3RhcnRcIiAvKiBEZXZ0b29sc0hvb2tzLlBFUkZPUk1BTkNFX1NUQVJUICovKTtcbmNvbnN0IGRldnRvb2xzUGVyZkVuZCA9IC8qI19fUFVSRV9fKi8gY3JlYXRlRGV2dG9vbHNQZXJmb3JtYW5jZUhvb2soXCJwZXJmOmVuZFwiIC8qIERldnRvb2xzSG9va3MuUEVSRk9STUFOQ0VfRU5EICovKTtcbmZ1bmN0aW9uIGNyZWF0ZURldnRvb2xzUGVyZm9ybWFuY2VIb29rKGhvb2spIHtcbiAgICByZXR1cm4gKGNvbXBvbmVudCwgdHlwZSwgdGltZSkgPT4ge1xuICAgICAgICBlbWl0KGhvb2ssIGNvbXBvbmVudC5hcHBDb250ZXh0LmFwcCwgY29tcG9uZW50LnVpZCwgY29tcG9uZW50LCB0eXBlLCB0aW1lKTtcbiAgICB9O1xufVxuZnVuY3Rpb24gZGV2dG9vbHNDb21wb25lbnRFbWl0KGNvbXBvbmVudCwgZXZlbnQsIHBhcmFtcykge1xuICAgIGVtaXQoXCJjb21wb25lbnQ6ZW1pdFwiIC8qIERldnRvb2xzSG9va3MuQ09NUE9ORU5UX0VNSVQgKi8sIGNvbXBvbmVudC5hcHBDb250ZXh0LmFwcCwgY29tcG9uZW50LCBldmVudCwgcGFyYW1zKTtcbn1cblxuZnVuY3Rpb24gZW1pdCQxKGluc3RhbmNlLCBldmVudCwgLi4ucmF3QXJncykge1xuICAgIGlmIChpbnN0YW5jZS5pc1VubW91bnRlZClcbiAgICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IHByb3BzID0gaW5zdGFuY2Uudm5vZGUucHJvcHMgfHwgRU1QVFlfT0JKO1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgY29uc3QgeyBlbWl0c09wdGlvbnMsIHByb3BzT3B0aW9uczogW3Byb3BzT3B0aW9uc10gfSA9IGluc3RhbmNlO1xuICAgICAgICBpZiAoZW1pdHNPcHRpb25zKSB7XG4gICAgICAgICAgICBpZiAoIShldmVudCBpbiBlbWl0c09wdGlvbnMpICYmXG4gICAgICAgICAgICAgICAgIShmYWxzZSApKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFwcm9wc09wdGlvbnMgfHwgISh0b0hhbmRsZXJLZXkoZXZlbnQpIGluIHByb3BzT3B0aW9ucykpIHtcbiAgICAgICAgICAgICAgICAgICAgd2FybihgQ29tcG9uZW50IGVtaXR0ZWQgZXZlbnQgXCIke2V2ZW50fVwiIGJ1dCBpdCBpcyBuZWl0aGVyIGRlY2xhcmVkIGluIGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYHRoZSBlbWl0cyBvcHRpb24gbm9yIGFzIGFuIFwiJHt0b0hhbmRsZXJLZXkoZXZlbnQpfVwiIHByb3AuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsaWRhdG9yID0gZW1pdHNPcHRpb25zW2V2ZW50XTtcbiAgICAgICAgICAgICAgICBpZiAoaXNGdW5jdGlvbih2YWxpZGF0b3IpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzVmFsaWQgPSB2YWxpZGF0b3IoLi4ucmF3QXJncyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2FybihgSW52YWxpZCBldmVudCBhcmd1bWVudHM6IGV2ZW50IHZhbGlkYXRpb24gZmFpbGVkIGZvciBldmVudCBcIiR7ZXZlbnR9XCIuYCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGV0IGFyZ3MgPSByYXdBcmdzO1xuICAgIGNvbnN0IGlzTW9kZWxMaXN0ZW5lciA9IGV2ZW50LnN0YXJ0c1dpdGgoJ3VwZGF0ZTonKTtcbiAgICAvLyBmb3Igdi1tb2RlbCB1cGRhdGU6eHh4IGV2ZW50cywgYXBwbHkgbW9kaWZpZXJzIG9uIGFyZ3NcbiAgICBjb25zdCBtb2RlbEFyZyA9IGlzTW9kZWxMaXN0ZW5lciAmJiBldmVudC5zbGljZSg3KTtcbiAgICBpZiAobW9kZWxBcmcgJiYgbW9kZWxBcmcgaW4gcHJvcHMpIHtcbiAgICAgICAgY29uc3QgbW9kaWZpZXJzS2V5ID0gYCR7bW9kZWxBcmcgPT09ICdtb2RlbFZhbHVlJyA/ICdtb2RlbCcgOiBtb2RlbEFyZ31Nb2RpZmllcnNgO1xuICAgICAgICBjb25zdCB7IG51bWJlciwgdHJpbSB9ID0gcHJvcHNbbW9kaWZpZXJzS2V5XSB8fCBFTVBUWV9PQko7XG4gICAgICAgIGlmICh0cmltKSB7XG4gICAgICAgICAgICBhcmdzID0gcmF3QXJncy5tYXAoYSA9PiAoaXNTdHJpbmcoYSkgPyBhLnRyaW0oKSA6IGEpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobnVtYmVyKSB7XG4gICAgICAgICAgICBhcmdzID0gcmF3QXJncy5tYXAodG9OdW1iZXIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICAgIGRldnRvb2xzQ29tcG9uZW50RW1pdChpbnN0YW5jZSwgZXZlbnQsIGFyZ3MpO1xuICAgIH1cbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIGNvbnN0IGxvd2VyQ2FzZUV2ZW50ID0gZXZlbnQudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgaWYgKGxvd2VyQ2FzZUV2ZW50ICE9PSBldmVudCAmJiBwcm9wc1t0b0hhbmRsZXJLZXkobG93ZXJDYXNlRXZlbnQpXSkge1xuICAgICAgICAgICAgd2FybihgRXZlbnQgXCIke2xvd2VyQ2FzZUV2ZW50fVwiIGlzIGVtaXR0ZWQgaW4gY29tcG9uZW50IGAgK1xuICAgICAgICAgICAgICAgIGAke2Zvcm1hdENvbXBvbmVudE5hbWUoaW5zdGFuY2UsIGluc3RhbmNlLnR5cGUpfSBidXQgdGhlIGhhbmRsZXIgaXMgcmVnaXN0ZXJlZCBmb3IgXCIke2V2ZW50fVwiLiBgICtcbiAgICAgICAgICAgICAgICBgTm90ZSB0aGF0IEhUTUwgYXR0cmlidXRlcyBhcmUgY2FzZS1pbnNlbnNpdGl2ZSBhbmQgeW91IGNhbm5vdCB1c2UgYCArXG4gICAgICAgICAgICAgICAgYHYtb24gdG8gbGlzdGVuIHRvIGNhbWVsQ2FzZSBldmVudHMgd2hlbiB1c2luZyBpbi1ET00gdGVtcGxhdGVzLiBgICtcbiAgICAgICAgICAgICAgICBgWW91IHNob3VsZCBwcm9iYWJseSB1c2UgXCIke2h5cGhlbmF0ZShldmVudCl9XCIgaW5zdGVhZCBvZiBcIiR7ZXZlbnR9XCIuYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGV0IGhhbmRsZXJOYW1lO1xuICAgIGxldCBoYW5kbGVyID0gcHJvcHNbKGhhbmRsZXJOYW1lID0gdG9IYW5kbGVyS2V5KGV2ZW50KSldIHx8XG4gICAgICAgIC8vIGFsc28gdHJ5IGNhbWVsQ2FzZSBldmVudCBoYW5kbGVyICgjMjI0OSlcbiAgICAgICAgcHJvcHNbKGhhbmRsZXJOYW1lID0gdG9IYW5kbGVyS2V5KGNhbWVsaXplKGV2ZW50KSkpXTtcbiAgICAvLyBmb3Igdi1tb2RlbCB1cGRhdGU6eHh4IGV2ZW50cywgYWxzbyB0cmlnZ2VyIGtlYmFiLWNhc2UgZXF1aXZhbGVudFxuICAgIC8vIGZvciBwcm9wcyBwYXNzZWQgdmlhIGtlYmFiLWNhc2VcbiAgICBpZiAoIWhhbmRsZXIgJiYgaXNNb2RlbExpc3RlbmVyKSB7XG4gICAgICAgIGhhbmRsZXIgPSBwcm9wc1soaGFuZGxlck5hbWUgPSB0b0hhbmRsZXJLZXkoaHlwaGVuYXRlKGV2ZW50KSkpXTtcbiAgICB9XG4gICAgaWYgKGhhbmRsZXIpIHtcbiAgICAgICAgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoaGFuZGxlciwgaW5zdGFuY2UsIDYgLyogRXJyb3JDb2Rlcy5DT01QT05FTlRfRVZFTlRfSEFORExFUiAqLywgYXJncyk7XG4gICAgfVxuICAgIGNvbnN0IG9uY2VIYW5kbGVyID0gcHJvcHNbaGFuZGxlck5hbWUgKyBgT25jZWBdO1xuICAgIGlmIChvbmNlSGFuZGxlcikge1xuICAgICAgICBpZiAoIWluc3RhbmNlLmVtaXR0ZWQpIHtcbiAgICAgICAgICAgIGluc3RhbmNlLmVtaXR0ZWQgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpbnN0YW5jZS5lbWl0dGVkW2hhbmRsZXJOYW1lXSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGluc3RhbmNlLmVtaXR0ZWRbaGFuZGxlck5hbWVdID0gdHJ1ZTtcbiAgICAgICAgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcob25jZUhhbmRsZXIsIGluc3RhbmNlLCA2IC8qIEVycm9yQ29kZXMuQ09NUE9ORU5UX0VWRU5UX0hBTkRMRVIgKi8sIGFyZ3MpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUVtaXRzT3B0aW9ucyhjb21wLCBhcHBDb250ZXh0LCBhc01peGluID0gZmFsc2UpIHtcbiAgICBjb25zdCBjYWNoZSA9IGFwcENvbnRleHQuZW1pdHNDYWNoZTtcbiAgICBjb25zdCBjYWNoZWQgPSBjYWNoZS5nZXQoY29tcCk7XG4gICAgaWYgKGNhY2hlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBjYWNoZWQ7XG4gICAgfVxuICAgIGNvbnN0IHJhdyA9IGNvbXAuZW1pdHM7XG4gICAgbGV0IG5vcm1hbGl6ZWQgPSB7fTtcbiAgICAvLyBhcHBseSBtaXhpbi9leHRlbmRzIHByb3BzXG4gICAgbGV0IGhhc0V4dGVuZHMgPSBmYWxzZTtcbiAgICBpZiAoX19WVUVfT1BUSU9OU19BUElfXyAmJiAhaXNGdW5jdGlvbihjb21wKSkge1xuICAgICAgICBjb25zdCBleHRlbmRFbWl0cyA9IChyYXcpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRGcm9tRXh0ZW5kID0gbm9ybWFsaXplRW1pdHNPcHRpb25zKHJhdywgYXBwQ29udGV4dCwgdHJ1ZSk7XG4gICAgICAgICAgICBpZiAobm9ybWFsaXplZEZyb21FeHRlbmQpIHtcbiAgICAgICAgICAgICAgICBoYXNFeHRlbmRzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBleHRlbmQobm9ybWFsaXplZCwgbm9ybWFsaXplZEZyb21FeHRlbmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBpZiAoIWFzTWl4aW4gJiYgYXBwQ29udGV4dC5taXhpbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICBhcHBDb250ZXh0Lm1peGlucy5mb3JFYWNoKGV4dGVuZEVtaXRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29tcC5leHRlbmRzKSB7XG4gICAgICAgICAgICBleHRlbmRFbWl0cyhjb21wLmV4dGVuZHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb21wLm1peGlucykge1xuICAgICAgICAgICAgY29tcC5taXhpbnMuZm9yRWFjaChleHRlbmRFbWl0cyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFyYXcgJiYgIWhhc0V4dGVuZHMpIHtcbiAgICAgICAgaWYgKGlzT2JqZWN0KGNvbXApKSB7XG4gICAgICAgICAgICBjYWNoZS5zZXQoY29tcCwgbnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlmIChpc0FycmF5KHJhdykpIHtcbiAgICAgICAgcmF3LmZvckVhY2goa2V5ID0+IChub3JtYWxpemVkW2tleV0gPSBudWxsKSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBleHRlbmQobm9ybWFsaXplZCwgcmF3KTtcbiAgICB9XG4gICAgaWYgKGlzT2JqZWN0KGNvbXApKSB7XG4gICAgICAgIGNhY2hlLnNldChjb21wLCBub3JtYWxpemVkKTtcbiAgICB9XG4gICAgcmV0dXJuIG5vcm1hbGl6ZWQ7XG59XG4vLyBDaGVjayBpZiBhbiBpbmNvbWluZyBwcm9wIGtleSBpcyBhIGRlY2xhcmVkIGVtaXQgZXZlbnQgbGlzdGVuZXIuXG4vLyBlLmcuIFdpdGggYGVtaXRzOiB7IGNsaWNrOiBudWxsIH1gLCBwcm9wcyBuYW1lZCBgb25DbGlja2AgYW5kIGBvbmNsaWNrYCBhcmVcbi8vIGJvdGggY29uc2lkZXJlZCBtYXRjaGVkIGxpc3RlbmVycy5cbmZ1bmN0aW9uIGlzRW1pdExpc3RlbmVyKG9wdGlvbnMsIGtleSkge1xuICAgIGlmICghb3B0aW9ucyB8fCAhaXNPbihrZXkpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAga2V5ID0ga2V5LnNsaWNlKDIpLnJlcGxhY2UoL09uY2UkLywgJycpO1xuICAgIHJldHVybiAoaGFzT3duKG9wdGlvbnMsIGtleVswXS50b0xvd2VyQ2FzZSgpICsga2V5LnNsaWNlKDEpKSB8fFxuICAgICAgICBoYXNPd24ob3B0aW9ucywgaHlwaGVuYXRlKGtleSkpIHx8XG4gICAgICAgIGhhc093bihvcHRpb25zLCBrZXkpKTtcbn1cblxuLyoqXG4gKiBtYXJrIHRoZSBjdXJyZW50IHJlbmRlcmluZyBpbnN0YW5jZSBmb3IgYXNzZXQgcmVzb2x1dGlvbiAoZS5nLlxuICogcmVzb2x2ZUNvbXBvbmVudCwgcmVzb2x2ZURpcmVjdGl2ZSkgZHVyaW5nIHJlbmRlclxuICovXG5sZXQgY3VycmVudFJlbmRlcmluZ0luc3RhbmNlID0gbnVsbDtcbmxldCBjdXJyZW50U2NvcGVJZCA9IG51bGw7XG4vKipcbiAqIE5vdGU6IHJlbmRlcmluZyBjYWxscyBtYXliZSBuZXN0ZWQuIFRoZSBmdW5jdGlvbiByZXR1cm5zIHRoZSBwYXJlbnQgcmVuZGVyaW5nXG4gKiBpbnN0YW5jZSBpZiBwcmVzZW50LCB3aGljaCBzaG91bGQgYmUgcmVzdG9yZWQgYWZ0ZXIgdGhlIHJlbmRlciBpcyBkb25lOlxuICpcbiAqIGBgYGpzXG4gKiBjb25zdCBwcmV2ID0gc2V0Q3VycmVudFJlbmRlcmluZ0luc3RhbmNlKGkpXG4gKiAvLyAuLi5yZW5kZXJcbiAqIHNldEN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZShwcmV2KVxuICogYGBgXG4gKi9cbmZ1bmN0aW9uIHNldEN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZShpbnN0YW5jZSkge1xuICAgIGNvbnN0IHByZXYgPSBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2U7XG4gICAgY3VycmVudFJlbmRlcmluZ0luc3RhbmNlID0gaW5zdGFuY2U7XG4gICAgY3VycmVudFNjb3BlSWQgPSAoaW5zdGFuY2UgJiYgaW5zdGFuY2UudHlwZS5fX3Njb3BlSWQpIHx8IG51bGw7XG4gICAgcmV0dXJuIHByZXY7XG59XG4vKipcbiAqIFNldCBzY29wZSBpZCB3aGVuIGNyZWF0aW5nIGhvaXN0ZWQgdm5vZGVzLlxuICogQHByaXZhdGUgY29tcGlsZXIgaGVscGVyXG4gKi9cbmZ1bmN0aW9uIHB1c2hTY29wZUlkKGlkKSB7XG4gICAgY3VycmVudFNjb3BlSWQgPSBpZDtcbn1cbi8qKlxuICogVGVjaG5pY2FsbHkgd2Ugbm8gbG9uZ2VyIG5lZWQgdGhpcyBhZnRlciAzLjAuOCBidXQgd2UgbmVlZCB0byBrZWVwIHRoZSBzYW1lXG4gKiBBUEkgZm9yIGJhY2t3YXJkcyBjb21wYXQgdy8gY29kZSBnZW5lcmF0ZWQgYnkgY29tcGlsZXJzLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcG9wU2NvcGVJZCgpIHtcbiAgICBjdXJyZW50U2NvcGVJZCA9IG51bGw7XG59XG4vKipcbiAqIE9ubHkgZm9yIGJhY2t3YXJkcyBjb21wYXRcbiAqIEBwcml2YXRlXG4gKi9cbmNvbnN0IHdpdGhTY29wZUlkID0gKF9pZCkgPT4gd2l0aEN0eDtcbi8qKlxuICogV3JhcCBhIHNsb3QgZnVuY3Rpb24gdG8gbWVtb2l6ZSBjdXJyZW50IHJlbmRlcmluZyBpbnN0YW5jZVxuICogQHByaXZhdGUgY29tcGlsZXIgaGVscGVyXG4gKi9cbmZ1bmN0aW9uIHdpdGhDdHgoZm4sIGN0eCA9IGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSwgaXNOb25TY29wZWRTbG90IC8vIGZhbHNlIG9ubHlcbikge1xuICAgIGlmICghY3R4KVxuICAgICAgICByZXR1cm4gZm47XG4gICAgLy8gYWxyZWFkeSBub3JtYWxpemVkXG4gICAgaWYgKGZuLl9uKSB7XG4gICAgICAgIHJldHVybiBmbjtcbiAgICB9XG4gICAgY29uc3QgcmVuZGVyRm5XaXRoQ29udGV4dCA9ICguLi5hcmdzKSA9PiB7XG4gICAgICAgIC8vIElmIGEgdXNlciBjYWxscyBhIGNvbXBpbGVkIHNsb3QgaW5zaWRlIGEgdGVtcGxhdGUgZXhwcmVzc2lvbiAoIzE3NDUpLCBpdFxuICAgICAgICAvLyBjYW4gbWVzcyB1cCBibG9jayB0cmFja2luZywgc28gYnkgZGVmYXVsdCB3ZSBkaXNhYmxlIGJsb2NrIHRyYWNraW5nIGFuZFxuICAgICAgICAvLyBmb3JjZSBiYWlsIG91dCB3aGVuIGludm9raW5nIGEgY29tcGlsZWQgc2xvdCAoaW5kaWNhdGVkIGJ5IHRoZSAuX2QgZmxhZykuXG4gICAgICAgIC8vIFRoaXMgaXNuJ3QgbmVjZXNzYXJ5IGlmIHJlbmRlcmluZyBhIGNvbXBpbGVkIGA8c2xvdD5gLCBzbyB3ZSBmbGlwIHRoZVxuICAgICAgICAvLyAuX2QgZmxhZyBvZmYgd2hlbiBpbnZva2luZyB0aGUgd3JhcHBlZCBmbiBpbnNpZGUgYHJlbmRlclNsb3RgLlxuICAgICAgICBpZiAocmVuZGVyRm5XaXRoQ29udGV4dC5fZCkge1xuICAgICAgICAgICAgc2V0QmxvY2tUcmFja2luZygtMSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJldkluc3RhbmNlID0gc2V0Q3VycmVudFJlbmRlcmluZ0luc3RhbmNlKGN0eCk7XG4gICAgICAgIGxldCByZXM7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXMgPSBmbiguLi5hcmdzKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHNldEN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZShwcmV2SW5zdGFuY2UpO1xuICAgICAgICAgICAgaWYgKHJlbmRlckZuV2l0aENvbnRleHQuX2QpIHtcbiAgICAgICAgICAgICAgICBzZXRCbG9ja1RyYWNraW5nKDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICAgICAgICBkZXZ0b29sc0NvbXBvbmVudFVwZGF0ZWQoY3R4KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH07XG4gICAgLy8gbWFyayBub3JtYWxpemVkIHRvIGF2b2lkIGR1cGxpY2F0ZWQgd3JhcHBpbmdcbiAgICByZW5kZXJGbldpdGhDb250ZXh0Ll9uID0gdHJ1ZTtcbiAgICAvLyBtYXJrIHRoaXMgYXMgY29tcGlsZWQgYnkgZGVmYXVsdFxuICAgIC8vIHRoaXMgaXMgdXNlZCBpbiB2bm9kZS50cyAtPiBub3JtYWxpemVDaGlsZHJlbigpIHRvIHNldCB0aGUgc2xvdFxuICAgIC8vIHJlbmRlcmluZyBmbGFnLlxuICAgIHJlbmRlckZuV2l0aENvbnRleHQuX2MgPSB0cnVlO1xuICAgIC8vIGRpc2FibGUgYmxvY2sgdHJhY2tpbmcgYnkgZGVmYXVsdFxuICAgIHJlbmRlckZuV2l0aENvbnRleHQuX2QgPSB0cnVlO1xuICAgIHJldHVybiByZW5kZXJGbldpdGhDb250ZXh0O1xufVxuXG4vKipcbiAqIGRldiBvbmx5IGZsYWcgdG8gdHJhY2sgd2hldGhlciAkYXR0cnMgd2FzIHVzZWQgZHVyaW5nIHJlbmRlci5cbiAqIElmICRhdHRycyB3YXMgdXNlZCBkdXJpbmcgcmVuZGVyIHRoZW4gdGhlIHdhcm5pbmcgZm9yIGZhaWxlZCBhdHRyc1xuICogZmFsbHRocm91Z2ggY2FuIGJlIHN1cHByZXNzZWQuXG4gKi9cbmxldCBhY2Nlc3NlZEF0dHJzID0gZmFsc2U7XG5mdW5jdGlvbiBtYXJrQXR0cnNBY2Nlc3NlZCgpIHtcbiAgICBhY2Nlc3NlZEF0dHJzID0gdHJ1ZTtcbn1cbmZ1bmN0aW9uIHJlbmRlckNvbXBvbmVudFJvb3QoaW5zdGFuY2UpIHtcbiAgICBjb25zdCB7IHR5cGU6IENvbXBvbmVudCwgdm5vZGUsIHByb3h5LCB3aXRoUHJveHksIHByb3BzLCBwcm9wc09wdGlvbnM6IFtwcm9wc09wdGlvbnNdLCBzbG90cywgYXR0cnMsIGVtaXQsIHJlbmRlciwgcmVuZGVyQ2FjaGUsIGRhdGEsIHNldHVwU3RhdGUsIGN0eCwgaW5oZXJpdEF0dHJzIH0gPSBpbnN0YW5jZTtcbiAgICBsZXQgcmVzdWx0O1xuICAgIGxldCBmYWxsdGhyb3VnaEF0dHJzO1xuICAgIGNvbnN0IHByZXYgPSBzZXRDdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UoaW5zdGFuY2UpO1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgYWNjZXNzZWRBdHRycyA9IGZhbHNlO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodm5vZGUuc2hhcGVGbGFnICYgNCAvKiBTaGFwZUZsYWdzLlNUQVRFRlVMX0NPTVBPTkVOVCAqLykge1xuICAgICAgICAgICAgLy8gd2l0aFByb3h5IGlzIGEgcHJveHkgd2l0aCBhIGRpZmZlcmVudCBgaGFzYCB0cmFwIG9ubHkgZm9yXG4gICAgICAgICAgICAvLyBydW50aW1lLWNvbXBpbGVkIHJlbmRlciBmdW5jdGlvbnMgdXNpbmcgYHdpdGhgIGJsb2NrLlxuICAgICAgICAgICAgY29uc3QgcHJveHlUb1VzZSA9IHdpdGhQcm94eSB8fCBwcm94eTtcbiAgICAgICAgICAgIHJlc3VsdCA9IG5vcm1hbGl6ZVZOb2RlKHJlbmRlci5jYWxsKHByb3h5VG9Vc2UsIHByb3h5VG9Vc2UsIHJlbmRlckNhY2hlLCBwcm9wcywgc2V0dXBTdGF0ZSwgZGF0YSwgY3R4KSk7XG4gICAgICAgICAgICBmYWxsdGhyb3VnaEF0dHJzID0gYXR0cnM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBmdW5jdGlvbmFsXG4gICAgICAgICAgICBjb25zdCByZW5kZXIgPSBDb21wb25lbnQ7XG4gICAgICAgICAgICAvLyBpbiBkZXYsIG1hcmsgYXR0cnMgYWNjZXNzZWQgaWYgb3B0aW9uYWwgcHJvcHMgKGF0dHJzID09PSBwcm9wcylcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgYXR0cnMgPT09IHByb3BzKSB7XG4gICAgICAgICAgICAgICAgbWFya0F0dHJzQWNjZXNzZWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc3VsdCA9IG5vcm1hbGl6ZVZOb2RlKHJlbmRlci5sZW5ndGggPiAxXG4gICAgICAgICAgICAgICAgPyByZW5kZXIocHJvcHMsIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKVxuICAgICAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldCBhdHRycygpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrQXR0cnNBY2Nlc3NlZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhdHRycztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBzbG90cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtaXRcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA6IHsgYXR0cnMsIHNsb3RzLCBlbWl0IH0pXG4gICAgICAgICAgICAgICAgOiByZW5kZXIocHJvcHMsIG51bGwgLyogd2Uga25vdyBpdCBkb2Vzbid0IG5lZWQgaXQgKi8pKTtcbiAgICAgICAgICAgIGZhbGx0aHJvdWdoQXR0cnMgPSBDb21wb25lbnQucHJvcHNcbiAgICAgICAgICAgICAgICA/IGF0dHJzXG4gICAgICAgICAgICAgICAgOiBnZXRGdW5jdGlvbmFsRmFsbHRocm91Z2goYXR0cnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgYmxvY2tTdGFjay5sZW5ndGggPSAwO1xuICAgICAgICBoYW5kbGVFcnJvcihlcnIsIGluc3RhbmNlLCAxIC8qIEVycm9yQ29kZXMuUkVOREVSX0ZVTkNUSU9OICovKTtcbiAgICAgICAgcmVzdWx0ID0gY3JlYXRlVk5vZGUoQ29tbWVudCk7XG4gICAgfVxuICAgIC8vIGF0dHIgbWVyZ2luZ1xuICAgIC8vIGluIGRldiBtb2RlLCBjb21tZW50cyBhcmUgcHJlc2VydmVkLCBhbmQgaXQncyBwb3NzaWJsZSBmb3IgYSB0ZW1wbGF0ZVxuICAgIC8vIHRvIGhhdmUgY29tbWVudHMgYWxvbmcgc2lkZSB0aGUgcm9vdCBlbGVtZW50IHdoaWNoIG1ha2VzIGl0IGEgZnJhZ21lbnRcbiAgICBsZXQgcm9vdCA9IHJlc3VsdDtcbiAgICBsZXQgc2V0Um9vdCA9IHVuZGVmaW5lZDtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXG4gICAgICAgIHJlc3VsdC5wYXRjaEZsYWcgPiAwICYmXG4gICAgICAgIHJlc3VsdC5wYXRjaEZsYWcgJiAyMDQ4IC8qIFBhdGNoRmxhZ3MuREVWX1JPT1RfRlJBR01FTlQgKi8pIHtcbiAgICAgICAgW3Jvb3QsIHNldFJvb3RdID0gZ2V0Q2hpbGRSb290KHJlc3VsdCk7XG4gICAgfVxuICAgIGlmIChmYWxsdGhyb3VnaEF0dHJzICYmIGluaGVyaXRBdHRycyAhPT0gZmFsc2UpIHtcbiAgICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGZhbGx0aHJvdWdoQXR0cnMpO1xuICAgICAgICBjb25zdCB7IHNoYXBlRmxhZyB9ID0gcm9vdDtcbiAgICAgICAgaWYgKGtleXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoc2hhcGVGbGFnICYgKDEgLyogU2hhcGVGbGFncy5FTEVNRU5UICovIHwgNiAvKiBTaGFwZUZsYWdzLkNPTVBPTkVOVCAqLykpIHtcbiAgICAgICAgICAgICAgICBpZiAocHJvcHNPcHRpb25zICYmIGtleXMuc29tZShpc01vZGVsTGlzdGVuZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIGEgdi1tb2RlbCBsaXN0ZW5lciAob25VcGRhdGU6eHh4KSBoYXMgYSBjb3JyZXNwb25kaW5nIGRlY2xhcmVkXG4gICAgICAgICAgICAgICAgICAgIC8vIHByb3AsIGl0IGluZGljYXRlcyB0aGlzIGNvbXBvbmVudCBleHBlY3RzIHRvIGhhbmRsZSB2LW1vZGVsIGFuZFxuICAgICAgICAgICAgICAgICAgICAvLyBpdCBzaG91bGQgbm90IGZhbGx0aHJvdWdoLlxuICAgICAgICAgICAgICAgICAgICAvLyByZWxhdGVkOiAjMTU0MywgIzE2NDMsICMxOTg5XG4gICAgICAgICAgICAgICAgICAgIGZhbGx0aHJvdWdoQXR0cnMgPSBmaWx0ZXJNb2RlbExpc3RlbmVycyhmYWxsdGhyb3VnaEF0dHJzLCBwcm9wc09wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByb290ID0gY2xvbmVWTm9kZShyb290LCBmYWxsdGhyb3VnaEF0dHJzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhYWNjZXNzZWRBdHRycyAmJiByb290LnR5cGUgIT09IENvbW1lbnQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhbGxBdHRycyA9IE9iamVjdC5rZXlzKGF0dHJzKTtcbiAgICAgICAgICAgICAgICBjb25zdCBldmVudEF0dHJzID0gW107XG4gICAgICAgICAgICAgICAgY29uc3QgZXh0cmFBdHRycyA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gYWxsQXR0cnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGFsbEF0dHJzW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNPbihrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZ25vcmUgdi1tb2RlbCBoYW5kbGVycyB3aGVuIHRoZXkgZmFpbCB0byBmYWxsdGhyb3VnaFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc01vZGVsTGlzdGVuZXIoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBgb25gLCBsb3dlcmNhc2UgZmlyc3QgbGV0dGVyIHRvIHJlZmxlY3QgZXZlbnQgY2FzaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWNjdXJhdGVseVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50QXR0cnMucHVzaChrZXlbMl0udG9Mb3dlckNhc2UoKSArIGtleS5zbGljZSgzKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBleHRyYUF0dHJzLnB1c2goa2V5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZXh0cmFBdHRycy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgd2FybihgRXh0cmFuZW91cyBub24tcHJvcHMgYXR0cmlidXRlcyAoYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgJHtleHRyYUF0dHJzLmpvaW4oJywgJyl9KSBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGB3ZXJlIHBhc3NlZCB0byBjb21wb25lbnQgYnV0IGNvdWxkIG5vdCBiZSBhdXRvbWF0aWNhbGx5IGluaGVyaXRlZCBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBiZWNhdXNlIGNvbXBvbmVudCByZW5kZXJzIGZyYWdtZW50IG9yIHRleHQgcm9vdCBub2Rlcy5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50QXR0cnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYEV4dHJhbmVvdXMgbm9uLWVtaXRzIGV2ZW50IGxpc3RlbmVycyAoYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgJHtldmVudEF0dHJzLmpvaW4oJywgJyl9KSBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGB3ZXJlIHBhc3NlZCB0byBjb21wb25lbnQgYnV0IGNvdWxkIG5vdCBiZSBhdXRvbWF0aWNhbGx5IGluaGVyaXRlZCBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBiZWNhdXNlIGNvbXBvbmVudCByZW5kZXJzIGZyYWdtZW50IG9yIHRleHQgcm9vdCBub2Rlcy4gYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgSWYgdGhlIGxpc3RlbmVyIGlzIGludGVuZGVkIHRvIGJlIGEgY29tcG9uZW50IGN1c3RvbSBldmVudCBsaXN0ZW5lciBvbmx5LCBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBkZWNsYXJlIGl0IHVzaW5nIHRoZSBcImVtaXRzXCIgb3B0aW9uLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBpbmhlcml0IGRpcmVjdGl2ZXNcbiAgICBpZiAodm5vZGUuZGlycykge1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFpc0VsZW1lbnRSb290KHJvb3QpKSB7XG4gICAgICAgICAgICB3YXJuKGBSdW50aW1lIGRpcmVjdGl2ZSB1c2VkIG9uIGNvbXBvbmVudCB3aXRoIG5vbi1lbGVtZW50IHJvb3Qgbm9kZS4gYCArXG4gICAgICAgICAgICAgICAgYFRoZSBkaXJlY3RpdmVzIHdpbGwgbm90IGZ1bmN0aW9uIGFzIGludGVuZGVkLmApO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNsb25lIGJlZm9yZSBtdXRhdGluZyBzaW5jZSB0aGUgcm9vdCBtYXkgYmUgYSBob2lzdGVkIHZub2RlXG4gICAgICAgIHJvb3QgPSBjbG9uZVZOb2RlKHJvb3QpO1xuICAgICAgICByb290LmRpcnMgPSByb290LmRpcnMgPyByb290LmRpcnMuY29uY2F0KHZub2RlLmRpcnMpIDogdm5vZGUuZGlycztcbiAgICB9XG4gICAgLy8gaW5oZXJpdCB0cmFuc2l0aW9uIGRhdGFcbiAgICBpZiAodm5vZGUudHJhbnNpdGlvbikge1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFpc0VsZW1lbnRSb290KHJvb3QpKSB7XG4gICAgICAgICAgICB3YXJuKGBDb21wb25lbnQgaW5zaWRlIDxUcmFuc2l0aW9uPiByZW5kZXJzIG5vbi1lbGVtZW50IHJvb3Qgbm9kZSBgICtcbiAgICAgICAgICAgICAgICBgdGhhdCBjYW5ub3QgYmUgYW5pbWF0ZWQuYCk7XG4gICAgICAgIH1cbiAgICAgICAgcm9vdC50cmFuc2l0aW9uID0gdm5vZGUudHJhbnNpdGlvbjtcbiAgICB9XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBzZXRSb290KSB7XG4gICAgICAgIHNldFJvb3Qocm9vdCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXN1bHQgPSByb290O1xuICAgIH1cbiAgICBzZXRDdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UocHJldik7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbi8qKlxuICogZGV2IG9ubHlcbiAqIEluIGRldiBtb2RlLCB0ZW1wbGF0ZSByb290IGxldmVsIGNvbW1lbnRzIGFyZSByZW5kZXJlZCwgd2hpY2ggdHVybnMgdGhlXG4gKiB0ZW1wbGF0ZSBpbnRvIGEgZnJhZ21lbnQgcm9vdCwgYnV0IHdlIG5lZWQgdG8gbG9jYXRlIHRoZSBzaW5nbGUgZWxlbWVudFxuICogcm9vdCBmb3IgYXR0cnMgYW5kIHNjb3BlIGlkIHByb2Nlc3NpbmcuXG4gKi9cbmNvbnN0IGdldENoaWxkUm9vdCA9ICh2bm9kZSkgPT4ge1xuICAgIGNvbnN0IHJhd0NoaWxkcmVuID0gdm5vZGUuY2hpbGRyZW47XG4gICAgY29uc3QgZHluYW1pY0NoaWxkcmVuID0gdm5vZGUuZHluYW1pY0NoaWxkcmVuO1xuICAgIGNvbnN0IGNoaWxkUm9vdCA9IGZpbHRlclNpbmdsZVJvb3QocmF3Q2hpbGRyZW4pO1xuICAgIGlmICghY2hpbGRSb290KSB7XG4gICAgICAgIHJldHVybiBbdm5vZGUsIHVuZGVmaW5lZF07XG4gICAgfVxuICAgIGNvbnN0IGluZGV4ID0gcmF3Q2hpbGRyZW4uaW5kZXhPZihjaGlsZFJvb3QpO1xuICAgIGNvbnN0IGR5bmFtaWNJbmRleCA9IGR5bmFtaWNDaGlsZHJlbiA/IGR5bmFtaWNDaGlsZHJlbi5pbmRleE9mKGNoaWxkUm9vdCkgOiAtMTtcbiAgICBjb25zdCBzZXRSb290ID0gKHVwZGF0ZWRSb290KSA9PiB7XG4gICAgICAgIHJhd0NoaWxkcmVuW2luZGV4XSA9IHVwZGF0ZWRSb290O1xuICAgICAgICBpZiAoZHluYW1pY0NoaWxkcmVuKSB7XG4gICAgICAgICAgICBpZiAoZHluYW1pY0luZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICBkeW5hbWljQ2hpbGRyZW5bZHluYW1pY0luZGV4XSA9IHVwZGF0ZWRSb290O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodXBkYXRlZFJvb3QucGF0Y2hGbGFnID4gMCkge1xuICAgICAgICAgICAgICAgIHZub2RlLmR5bmFtaWNDaGlsZHJlbiA9IFsuLi5keW5hbWljQ2hpbGRyZW4sIHVwZGF0ZWRSb290XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFtub3JtYWxpemVWTm9kZShjaGlsZFJvb3QpLCBzZXRSb290XTtcbn07XG5mdW5jdGlvbiBmaWx0ZXJTaW5nbGVSb290KGNoaWxkcmVuKSB7XG4gICAgbGV0IHNpbmdsZVJvb3Q7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBjaGlsZCA9IGNoaWxkcmVuW2ldO1xuICAgICAgICBpZiAoaXNWTm9kZShjaGlsZCkpIHtcbiAgICAgICAgICAgIC8vIGlnbm9yZSB1c2VyIGNvbW1lbnRcbiAgICAgICAgICAgIGlmIChjaGlsZC50eXBlICE9PSBDb21tZW50IHx8IGNoaWxkLmNoaWxkcmVuID09PSAndi1pZicpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2luZ2xlUm9vdCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBoYXMgbW9yZSB0aGFuIDEgbm9uLWNvbW1lbnQgY2hpbGQsIHJldHVybiBub3dcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2luZ2xlUm9vdCA9IGNoaWxkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2luZ2xlUm9vdDtcbn1cbmNvbnN0IGdldEZ1bmN0aW9uYWxGYWxsdGhyb3VnaCA9IChhdHRycykgPT4ge1xuICAgIGxldCByZXM7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gYXR0cnMpIHtcbiAgICAgICAgaWYgKGtleSA9PT0gJ2NsYXNzJyB8fCBrZXkgPT09ICdzdHlsZScgfHwgaXNPbihrZXkpKSB7XG4gICAgICAgICAgICAocmVzIHx8IChyZXMgPSB7fSkpW2tleV0gPSBhdHRyc1trZXldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXM7XG59O1xuY29uc3QgZmlsdGVyTW9kZWxMaXN0ZW5lcnMgPSAoYXR0cnMsIHByb3BzKSA9PiB7XG4gICAgY29uc3QgcmVzID0ge307XG4gICAgZm9yIChjb25zdCBrZXkgaW4gYXR0cnMpIHtcbiAgICAgICAgaWYgKCFpc01vZGVsTGlzdGVuZXIoa2V5KSB8fCAhKGtleS5zbGljZSg5KSBpbiBwcm9wcykpIHtcbiAgICAgICAgICAgIHJlc1trZXldID0gYXR0cnNba2V5XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufTtcbmNvbnN0IGlzRWxlbWVudFJvb3QgPSAodm5vZGUpID0+IHtcbiAgICByZXR1cm4gKHZub2RlLnNoYXBlRmxhZyAmICg2IC8qIFNoYXBlRmxhZ3MuQ09NUE9ORU5UICovIHwgMSAvKiBTaGFwZUZsYWdzLkVMRU1FTlQgKi8pIHx8XG4gICAgICAgIHZub2RlLnR5cGUgPT09IENvbW1lbnQgLy8gcG90ZW50aWFsIHYtaWYgYnJhbmNoIHN3aXRjaFxuICAgICk7XG59O1xuZnVuY3Rpb24gc2hvdWxkVXBkYXRlQ29tcG9uZW50KHByZXZWTm9kZSwgbmV4dFZOb2RlLCBvcHRpbWl6ZWQpIHtcbiAgICBjb25zdCB7IHByb3BzOiBwcmV2UHJvcHMsIGNoaWxkcmVuOiBwcmV2Q2hpbGRyZW4sIGNvbXBvbmVudCB9ID0gcHJldlZOb2RlO1xuICAgIGNvbnN0IHsgcHJvcHM6IG5leHRQcm9wcywgY2hpbGRyZW46IG5leHRDaGlsZHJlbiwgcGF0Y2hGbGFnIH0gPSBuZXh0Vk5vZGU7XG4gICAgY29uc3QgZW1pdHMgPSBjb21wb25lbnQuZW1pdHNPcHRpb25zO1xuICAgIC8vIFBhcmVudCBjb21wb25lbnQncyByZW5kZXIgZnVuY3Rpb24gd2FzIGhvdC11cGRhdGVkLiBTaW5jZSB0aGlzIG1heSBoYXZlXG4gICAgLy8gY2F1c2VkIHRoZSBjaGlsZCBjb21wb25lbnQncyBzbG90cyBjb250ZW50IHRvIGhhdmUgY2hhbmdlZCwgd2UgbmVlZCB0b1xuICAgIC8vIGZvcmNlIHRoZSBjaGlsZCB0byB1cGRhdGUgYXMgd2VsbC5cbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIChwcmV2Q2hpbGRyZW4gfHwgbmV4dENoaWxkcmVuKSAmJiBpc0htclVwZGF0aW5nKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvLyBmb3JjZSBjaGlsZCB1cGRhdGUgZm9yIHJ1bnRpbWUgZGlyZWN0aXZlIG9yIHRyYW5zaXRpb24gb24gY29tcG9uZW50IHZub2RlLlxuICAgIGlmIChuZXh0Vk5vZGUuZGlycyB8fCBuZXh0Vk5vZGUudHJhbnNpdGlvbikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKG9wdGltaXplZCAmJiBwYXRjaEZsYWcgPj0gMCkge1xuICAgICAgICBpZiAocGF0Y2hGbGFnICYgMTAyNCAvKiBQYXRjaEZsYWdzLkRZTkFNSUNfU0xPVFMgKi8pIHtcbiAgICAgICAgICAgIC8vIHNsb3QgY29udGVudCB0aGF0IHJlZmVyZW5jZXMgdmFsdWVzIHRoYXQgbWlnaHQgaGF2ZSBjaGFuZ2VkLFxuICAgICAgICAgICAgLy8gZS5nLiBpbiBhIHYtZm9yXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGF0Y2hGbGFnICYgMTYgLyogUGF0Y2hGbGFncy5GVUxMX1BST1BTICovKSB7XG4gICAgICAgICAgICBpZiAoIXByZXZQcm9wcykge1xuICAgICAgICAgICAgICAgIHJldHVybiAhIW5leHRQcm9wcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHByZXNlbmNlIG9mIHRoaXMgZmxhZyBpbmRpY2F0ZXMgcHJvcHMgYXJlIGFsd2F5cyBub24tbnVsbFxuICAgICAgICAgICAgcmV0dXJuIGhhc1Byb3BzQ2hhbmdlZChwcmV2UHJvcHMsIG5leHRQcm9wcywgZW1pdHMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHBhdGNoRmxhZyAmIDggLyogUGF0Y2hGbGFncy5QUk9QUyAqLykge1xuICAgICAgICAgICAgY29uc3QgZHluYW1pY1Byb3BzID0gbmV4dFZOb2RlLmR5bmFtaWNQcm9wcztcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZHluYW1pY1Byb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gZHluYW1pY1Byb3BzW2ldO1xuICAgICAgICAgICAgICAgIGlmIChuZXh0UHJvcHNba2V5XSAhPT0gcHJldlByb3BzW2tleV0gJiZcbiAgICAgICAgICAgICAgICAgICAgIWlzRW1pdExpc3RlbmVyKGVtaXRzLCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gdGhpcyBwYXRoIGlzIG9ubHkgdGFrZW4gYnkgbWFudWFsbHkgd3JpdHRlbiByZW5kZXIgZnVuY3Rpb25zXG4gICAgICAgIC8vIHNvIHByZXNlbmNlIG9mIGFueSBjaGlsZHJlbiBsZWFkcyB0byBhIGZvcmNlZCB1cGRhdGVcbiAgICAgICAgaWYgKHByZXZDaGlsZHJlbiB8fCBuZXh0Q2hpbGRyZW4pIHtcbiAgICAgICAgICAgIGlmICghbmV4dENoaWxkcmVuIHx8ICFuZXh0Q2hpbGRyZW4uJHN0YWJsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChwcmV2UHJvcHMgPT09IG5leHRQcm9wcykge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghcHJldlByb3BzKSB7XG4gICAgICAgICAgICByZXR1cm4gISFuZXh0UHJvcHM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFuZXh0UHJvcHMpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBoYXNQcm9wc0NoYW5nZWQocHJldlByb3BzLCBuZXh0UHJvcHMsIGVtaXRzKTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gaGFzUHJvcHNDaGFuZ2VkKHByZXZQcm9wcywgbmV4dFByb3BzLCBlbWl0c09wdGlvbnMpIHtcbiAgICBjb25zdCBuZXh0S2V5cyA9IE9iamVjdC5rZXlzKG5leHRQcm9wcyk7XG4gICAgaWYgKG5leHRLZXlzLmxlbmd0aCAhPT0gT2JqZWN0LmtleXMocHJldlByb3BzKS5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmV4dEtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3Qga2V5ID0gbmV4dEtleXNbaV07XG4gICAgICAgIGlmIChuZXh0UHJvcHNba2V5XSAhPT0gcHJldlByb3BzW2tleV0gJiZcbiAgICAgICAgICAgICFpc0VtaXRMaXN0ZW5lcihlbWl0c09wdGlvbnMsIGtleSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIHVwZGF0ZUhPQ0hvc3RFbCh7IHZub2RlLCBwYXJlbnQgfSwgZWwgLy8gSG9zdE5vZGVcbikge1xuICAgIHdoaWxlIChwYXJlbnQgJiYgcGFyZW50LnN1YlRyZWUgPT09IHZub2RlKSB7XG4gICAgICAgICh2bm9kZSA9IHBhcmVudC52bm9kZSkuZWwgPSBlbDtcbiAgICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudDtcbiAgICB9XG59XG5cbmNvbnN0IGlzU3VzcGVuc2UgPSAodHlwZSkgPT4gdHlwZS5fX2lzU3VzcGVuc2U7XG4vLyBTdXNwZW5zZSBleHBvc2VzIGEgY29tcG9uZW50LWxpa2UgQVBJLCBhbmQgaXMgdHJlYXRlZCBsaWtlIGEgY29tcG9uZW50XG4vLyBpbiB0aGUgY29tcGlsZXIsIGJ1dCBpbnRlcm5hbGx5IGl0J3MgYSBzcGVjaWFsIGJ1aWx0LWluIHR5cGUgdGhhdCBob29rc1xuLy8gZGlyZWN0bHkgaW50byB0aGUgcmVuZGVyZXIuXG5jb25zdCBTdXNwZW5zZUltcGwgPSB7XG4gICAgbmFtZTogJ1N1c3BlbnNlJyxcbiAgICAvLyBJbiBvcmRlciB0byBtYWtlIFN1c3BlbnNlIHRyZWUtc2hha2FibGUsIHdlIG5lZWQgdG8gYXZvaWQgaW1wb3J0aW5nIGl0XG4gICAgLy8gZGlyZWN0bHkgaW4gdGhlIHJlbmRlcmVyLiBUaGUgcmVuZGVyZXIgY2hlY2tzIGZvciB0aGUgX19pc1N1c3BlbnNlIGZsYWdcbiAgICAvLyBvbiBhIHZub2RlJ3MgdHlwZSBhbmQgY2FsbHMgdGhlIGBwcm9jZXNzYCBtZXRob2QsIHBhc3NpbmcgaW4gcmVuZGVyZXJcbiAgICAvLyBpbnRlcm5hbHMuXG4gICAgX19pc1N1c3BlbnNlOiB0cnVlLFxuICAgIHByb2Nlc3MobjEsIG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCBcbiAgICAvLyBwbGF0Zm9ybS1zcGVjaWZpYyBpbXBsIHBhc3NlZCBmcm9tIHJlbmRlcmVyXG4gICAgcmVuZGVyZXJJbnRlcm5hbHMpIHtcbiAgICAgICAgaWYgKG4xID09IG51bGwpIHtcbiAgICAgICAgICAgIG1vdW50U3VzcGVuc2UobjIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIHJlbmRlcmVySW50ZXJuYWxzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBhdGNoU3VzcGVuc2UobjEsIG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIHJlbmRlcmVySW50ZXJuYWxzKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgaHlkcmF0ZTogaHlkcmF0ZVN1c3BlbnNlLFxuICAgIGNyZWF0ZTogY3JlYXRlU3VzcGVuc2VCb3VuZGFyeSxcbiAgICBub3JtYWxpemU6IG5vcm1hbGl6ZVN1c3BlbnNlQ2hpbGRyZW5cbn07XG4vLyBGb3JjZS1jYXN0ZWQgcHVibGljIHR5cGluZyBmb3IgaCBhbmQgVFNYIHByb3BzIGluZmVyZW5jZVxuY29uc3QgU3VzcGVuc2UgPSAoU3VzcGVuc2VJbXBsXG4gICAgKTtcbmZ1bmN0aW9uIHRyaWdnZXJFdmVudCh2bm9kZSwgbmFtZSkge1xuICAgIGNvbnN0IGV2ZW50TGlzdGVuZXIgPSB2bm9kZS5wcm9wcyAmJiB2bm9kZS5wcm9wc1tuYW1lXTtcbiAgICBpZiAoaXNGdW5jdGlvbihldmVudExpc3RlbmVyKSkge1xuICAgICAgICBldmVudExpc3RlbmVyKCk7XG4gICAgfVxufVxuZnVuY3Rpb24gbW91bnRTdXNwZW5zZSh2bm9kZSwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCwgcmVuZGVyZXJJbnRlcm5hbHMpIHtcbiAgICBjb25zdCB7IHA6IHBhdGNoLCBvOiB7IGNyZWF0ZUVsZW1lbnQgfSB9ID0gcmVuZGVyZXJJbnRlcm5hbHM7XG4gICAgY29uc3QgaGlkZGVuQ29udGFpbmVyID0gY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29uc3Qgc3VzcGVuc2UgPSAodm5vZGUuc3VzcGVuc2UgPSBjcmVhdGVTdXNwZW5zZUJvdW5kYXJ5KHZub2RlLCBwYXJlbnRTdXNwZW5zZSwgcGFyZW50Q29tcG9uZW50LCBjb250YWluZXIsIGhpZGRlbkNvbnRhaW5lciwgYW5jaG9yLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIHJlbmRlcmVySW50ZXJuYWxzKSk7XG4gICAgLy8gc3RhcnQgbW91bnRpbmcgdGhlIGNvbnRlbnQgc3VidHJlZSBpbiBhbiBvZmYtZG9tIGNvbnRhaW5lclxuICAgIHBhdGNoKG51bGwsIChzdXNwZW5zZS5wZW5kaW5nQnJhbmNoID0gdm5vZGUuc3NDb250ZW50KSwgaGlkZGVuQ29udGFpbmVyLCBudWxsLCBwYXJlbnRDb21wb25lbnQsIHN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzKTtcbiAgICAvLyBub3cgY2hlY2sgaWYgd2UgaGF2ZSBlbmNvdW50ZXJlZCBhbnkgYXN5bmMgZGVwc1xuICAgIGlmIChzdXNwZW5zZS5kZXBzID4gMCkge1xuICAgICAgICAvLyBoYXMgYXN5bmNcbiAgICAgICAgLy8gaW52b2tlIEBmYWxsYmFjayBldmVudFxuICAgICAgICB0cmlnZ2VyRXZlbnQodm5vZGUsICdvblBlbmRpbmcnKTtcbiAgICAgICAgdHJpZ2dlckV2ZW50KHZub2RlLCAnb25GYWxsYmFjaycpO1xuICAgICAgICAvLyBtb3VudCB0aGUgZmFsbGJhY2sgdHJlZVxuICAgICAgICBwYXRjaChudWxsLCB2bm9kZS5zc0ZhbGxiYWNrLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBudWxsLCAvLyBmYWxsYmFjayB0cmVlIHdpbGwgbm90IGhhdmUgc3VzcGVuc2UgY29udGV4dFxuICAgICAgICBpc1NWRywgc2xvdFNjb3BlSWRzKTtcbiAgICAgICAgc2V0QWN0aXZlQnJhbmNoKHN1c3BlbnNlLCB2bm9kZS5zc0ZhbGxiYWNrKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIFN1c3BlbnNlIGhhcyBubyBhc3luYyBkZXBzLiBKdXN0IHJlc29sdmUuXG4gICAgICAgIHN1c3BlbnNlLnJlc29sdmUoKTtcbiAgICB9XG59XG5mdW5jdGlvbiBwYXRjaFN1c3BlbnNlKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCB7IHA6IHBhdGNoLCB1bTogdW5tb3VudCwgbzogeyBjcmVhdGVFbGVtZW50IH0gfSkge1xuICAgIGNvbnN0IHN1c3BlbnNlID0gKG4yLnN1c3BlbnNlID0gbjEuc3VzcGVuc2UpO1xuICAgIHN1c3BlbnNlLnZub2RlID0gbjI7XG4gICAgbjIuZWwgPSBuMS5lbDtcbiAgICBjb25zdCBuZXdCcmFuY2ggPSBuMi5zc0NvbnRlbnQ7XG4gICAgY29uc3QgbmV3RmFsbGJhY2sgPSBuMi5zc0ZhbGxiYWNrO1xuICAgIGNvbnN0IHsgYWN0aXZlQnJhbmNoLCBwZW5kaW5nQnJhbmNoLCBpc0luRmFsbGJhY2ssIGlzSHlkcmF0aW5nIH0gPSBzdXNwZW5zZTtcbiAgICBpZiAocGVuZGluZ0JyYW5jaCkge1xuICAgICAgICBzdXNwZW5zZS5wZW5kaW5nQnJhbmNoID0gbmV3QnJhbmNoO1xuICAgICAgICBpZiAoaXNTYW1lVk5vZGVUeXBlKG5ld0JyYW5jaCwgcGVuZGluZ0JyYW5jaCkpIHtcbiAgICAgICAgICAgIC8vIHNhbWUgcm9vdCB0eXBlIGJ1dCBjb250ZW50IG1heSBoYXZlIGNoYW5nZWQuXG4gICAgICAgICAgICBwYXRjaChwZW5kaW5nQnJhbmNoLCBuZXdCcmFuY2gsIHN1c3BlbnNlLmhpZGRlbkNvbnRhaW5lciwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCBzdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgIGlmIChzdXNwZW5zZS5kZXBzIDw9IDApIHtcbiAgICAgICAgICAgICAgICBzdXNwZW5zZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpc0luRmFsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBwYXRjaChhY3RpdmVCcmFuY2gsIG5ld0ZhbGxiYWNrLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBudWxsLCAvLyBmYWxsYmFjayB0cmVlIHdpbGwgbm90IGhhdmUgc3VzcGVuc2UgY29udGV4dFxuICAgICAgICAgICAgICAgIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgICAgICAgICAgICAgc2V0QWN0aXZlQnJhbmNoKHN1c3BlbnNlLCBuZXdGYWxsYmFjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyB0b2dnbGVkIGJlZm9yZSBwZW5kaW5nIHRyZWUgaXMgcmVzb2x2ZWRcbiAgICAgICAgICAgIHN1c3BlbnNlLnBlbmRpbmdJZCsrO1xuICAgICAgICAgICAgaWYgKGlzSHlkcmF0aW5nKSB7XG4gICAgICAgICAgICAgICAgLy8gaWYgdG9nZ2xlZCBiZWZvcmUgaHlkcmF0aW9uIGlzIGZpbmlzaGVkLCB0aGUgY3VycmVudCBET00gdHJlZSBpc1xuICAgICAgICAgICAgICAgIC8vIG5vIGxvbmdlciB2YWxpZC4gc2V0IGl0IGFzIHRoZSBhY3RpdmUgYnJhbmNoIHNvIGl0IHdpbGwgYmUgdW5tb3VudGVkXG4gICAgICAgICAgICAgICAgLy8gd2hlbiByZXNvbHZlZFxuICAgICAgICAgICAgICAgIHN1c3BlbnNlLmlzSHlkcmF0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgc3VzcGVuc2UuYWN0aXZlQnJhbmNoID0gcGVuZGluZ0JyYW5jaDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHVubW91bnQocGVuZGluZ0JyYW5jaCwgcGFyZW50Q29tcG9uZW50LCBzdXNwZW5zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBpbmNyZW1lbnQgcGVuZGluZyBJRC4gdGhpcyBpcyB1c2VkIHRvIGludmFsaWRhdGUgYXN5bmMgY2FsbGJhY2tzXG4gICAgICAgICAgICAvLyByZXNldCBzdXNwZW5zZSBzdGF0ZVxuICAgICAgICAgICAgc3VzcGVuc2UuZGVwcyA9IDA7XG4gICAgICAgICAgICAvLyBkaXNjYXJkIGVmZmVjdHMgZnJvbSBwZW5kaW5nIGJyYW5jaFxuICAgICAgICAgICAgc3VzcGVuc2UuZWZmZWN0cy5sZW5ndGggPSAwO1xuICAgICAgICAgICAgLy8gZGlzY2FyZCBwcmV2aW91cyBjb250YWluZXJcbiAgICAgICAgICAgIHN1c3BlbnNlLmhpZGRlbkNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgaWYgKGlzSW5GYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIC8vIGFscmVhZHkgaW4gZmFsbGJhY2sgc3RhdGVcbiAgICAgICAgICAgICAgICBwYXRjaChudWxsLCBuZXdCcmFuY2gsIHN1c3BlbnNlLmhpZGRlbkNvbnRhaW5lciwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCBzdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgICAgICBpZiAoc3VzcGVuc2UuZGVwcyA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHN1c3BlbnNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHBhdGNoKGFjdGl2ZUJyYW5jaCwgbmV3RmFsbGJhY2ssIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIG51bGwsIC8vIGZhbGxiYWNrIHRyZWUgd2lsbCBub3QgaGF2ZSBzdXNwZW5zZSBjb250ZXh0XG4gICAgICAgICAgICAgICAgICAgIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgICAgICAgICAgICAgICAgIHNldEFjdGl2ZUJyYW5jaChzdXNwZW5zZSwgbmV3RmFsbGJhY2spO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGFjdGl2ZUJyYW5jaCAmJiBpc1NhbWVWTm9kZVR5cGUobmV3QnJhbmNoLCBhY3RpdmVCcmFuY2gpKSB7XG4gICAgICAgICAgICAgICAgLy8gdG9nZ2xlZCBcImJhY2tcIiB0byBjdXJyZW50IGFjdGl2ZSBicmFuY2hcbiAgICAgICAgICAgICAgICBwYXRjaChhY3RpdmVCcmFuY2gsIG5ld0JyYW5jaCwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgc3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgICAgICAgICAgICAgLy8gZm9yY2UgcmVzb2x2ZVxuICAgICAgICAgICAgICAgIHN1c3BlbnNlLnJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBzd2l0Y2hlZCB0byBhIDNyZCBicmFuY2hcbiAgICAgICAgICAgICAgICBwYXRjaChudWxsLCBuZXdCcmFuY2gsIHN1c3BlbnNlLmhpZGRlbkNvbnRhaW5lciwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCBzdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgICAgICBpZiAoc3VzcGVuc2UuZGVwcyA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHN1c3BlbnNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmIChhY3RpdmVCcmFuY2ggJiYgaXNTYW1lVk5vZGVUeXBlKG5ld0JyYW5jaCwgYWN0aXZlQnJhbmNoKSkge1xuICAgICAgICAgICAgLy8gcm9vdCBkaWQgbm90IGNoYW5nZSwganVzdCBub3JtYWwgcGF0Y2hcbiAgICAgICAgICAgIHBhdGNoKGFjdGl2ZUJyYW5jaCwgbmV3QnJhbmNoLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBzdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgIHNldEFjdGl2ZUJyYW5jaChzdXNwZW5zZSwgbmV3QnJhbmNoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIHJvb3Qgbm9kZSB0b2dnbGVkXG4gICAgICAgICAgICAvLyBpbnZva2UgQHBlbmRpbmcgZXZlbnRcbiAgICAgICAgICAgIHRyaWdnZXJFdmVudChuMiwgJ29uUGVuZGluZycpO1xuICAgICAgICAgICAgLy8gbW91bnQgcGVuZGluZyBicmFuY2ggaW4gb2ZmLWRvbSBjb250YWluZXJcbiAgICAgICAgICAgIHN1c3BlbnNlLnBlbmRpbmdCcmFuY2ggPSBuZXdCcmFuY2g7XG4gICAgICAgICAgICBzdXNwZW5zZS5wZW5kaW5nSWQrKztcbiAgICAgICAgICAgIHBhdGNoKG51bGwsIG5ld0JyYW5jaCwgc3VzcGVuc2UuaGlkZGVuQ29udGFpbmVyLCBudWxsLCBwYXJlbnRDb21wb25lbnQsIHN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgaWYgKHN1c3BlbnNlLmRlcHMgPD0gMCkge1xuICAgICAgICAgICAgICAgIC8vIGluY29taW5nIGJyYW5jaCBoYXMgbm8gYXN5bmMgZGVwcywgcmVzb2x2ZSBub3cuXG4gICAgICAgICAgICAgICAgc3VzcGVuc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyB0aW1lb3V0LCBwZW5kaW5nSWQgfSA9IHN1c3BlbnNlO1xuICAgICAgICAgICAgICAgIGlmICh0aW1lb3V0ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdXNwZW5zZS5wZW5kaW5nSWQgPT09IHBlbmRpbmdJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1c3BlbnNlLmZhbGxiYWNrKG5ld0ZhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSwgdGltZW91dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRpbWVvdXQgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgc3VzcGVuc2UuZmFsbGJhY2sobmV3RmFsbGJhY2spO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbmxldCBoYXNXYXJuZWQgPSBmYWxzZTtcbmZ1bmN0aW9uIGNyZWF0ZVN1c3BlbnNlQm91bmRhcnkodm5vZGUsIHBhcmVudCwgcGFyZW50Q29tcG9uZW50LCBjb250YWluZXIsIGhpZGRlbkNvbnRhaW5lciwgYW5jaG9yLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIHJlbmRlcmVySW50ZXJuYWxzLCBpc0h5ZHJhdGluZyA9IGZhbHNlKSB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhZmFsc2UgJiYgIWhhc1dhcm5lZCkge1xuICAgICAgICBoYXNXYXJuZWQgPSB0cnVlO1xuICAgICAgICAvLyBAdHMtaWdub3JlIGBjb25zb2xlLmluZm9gIGNhbm5vdCBiZSBudWxsIGVycm9yXG4gICAgICAgIGNvbnNvbGVbY29uc29sZS5pbmZvID8gJ2luZm8nIDogJ2xvZyddKGA8U3VzcGVuc2U+IGlzIGFuIGV4cGVyaW1lbnRhbCBmZWF0dXJlIGFuZCBpdHMgQVBJIHdpbGwgbGlrZWx5IGNoYW5nZS5gKTtcbiAgICB9XG4gICAgY29uc3QgeyBwOiBwYXRjaCwgbTogbW92ZSwgdW06IHVubW91bnQsIG46IG5leHQsIG86IHsgcGFyZW50Tm9kZSwgcmVtb3ZlIH0gfSA9IHJlbmRlcmVySW50ZXJuYWxzO1xuICAgIGNvbnN0IHRpbWVvdXQgPSB0b051bWJlcih2bm9kZS5wcm9wcyAmJiB2bm9kZS5wcm9wcy50aW1lb3V0KTtcbiAgICBjb25zdCBzdXNwZW5zZSA9IHtcbiAgICAgICAgdm5vZGUsXG4gICAgICAgIHBhcmVudCxcbiAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICBpc1NWRyxcbiAgICAgICAgY29udGFpbmVyLFxuICAgICAgICBoaWRkZW5Db250YWluZXIsXG4gICAgICAgIGFuY2hvcixcbiAgICAgICAgZGVwczogMCxcbiAgICAgICAgcGVuZGluZ0lkOiAwLFxuICAgICAgICB0aW1lb3V0OiB0eXBlb2YgdGltZW91dCA9PT0gJ251bWJlcicgPyB0aW1lb3V0IDogLTEsXG4gICAgICAgIGFjdGl2ZUJyYW5jaDogbnVsbCxcbiAgICAgICAgcGVuZGluZ0JyYW5jaDogbnVsbCxcbiAgICAgICAgaXNJbkZhbGxiYWNrOiB0cnVlLFxuICAgICAgICBpc0h5ZHJhdGluZyxcbiAgICAgICAgaXNVbm1vdW50ZWQ6IGZhbHNlLFxuICAgICAgICBlZmZlY3RzOiBbXSxcbiAgICAgICAgcmVzb2x2ZShyZXN1bWUgPSBmYWxzZSkge1xuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgIGlmICghcmVzdW1lICYmICFzdXNwZW5zZS5wZW5kaW5nQnJhbmNoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgc3VzcGVuc2UucmVzb2x2ZSgpIGlzIGNhbGxlZCB3aXRob3V0IGEgcGVuZGluZyBicmFuY2guYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzdXNwZW5zZS5pc1VubW91bnRlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHN1c3BlbnNlLnJlc29sdmUoKSBpcyBjYWxsZWQgb24gYW4gYWxyZWFkeSB1bm1vdW50ZWQgc3VzcGVuc2UgYm91bmRhcnkuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgeyB2bm9kZSwgYWN0aXZlQnJhbmNoLCBwZW5kaW5nQnJhbmNoLCBwZW5kaW5nSWQsIGVmZmVjdHMsIHBhcmVudENvbXBvbmVudCwgY29udGFpbmVyIH0gPSBzdXNwZW5zZTtcbiAgICAgICAgICAgIGlmIChzdXNwZW5zZS5pc0h5ZHJhdGluZykge1xuICAgICAgICAgICAgICAgIHN1c3BlbnNlLmlzSHlkcmF0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghcmVzdW1lKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVsYXlFbnRlciA9IGFjdGl2ZUJyYW5jaCAmJlxuICAgICAgICAgICAgICAgICAgICBwZW5kaW5nQnJhbmNoLnRyYW5zaXRpb24gJiZcbiAgICAgICAgICAgICAgICAgICAgcGVuZGluZ0JyYW5jaC50cmFuc2l0aW9uLm1vZGUgPT09ICdvdXQtaW4nO1xuICAgICAgICAgICAgICAgIGlmIChkZWxheUVudGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZUJyYW5jaC50cmFuc2l0aW9uLmFmdGVyTGVhdmUgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVuZGluZ0lkID09PSBzdXNwZW5zZS5wZW5kaW5nSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlKHBlbmRpbmdCcmFuY2gsIGNvbnRhaW5lciwgYW5jaG9yLCAwIC8qIE1vdmVUeXBlLkVOVEVSICovKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gdGhpcyBpcyBpbml0aWFsIGFuY2hvciBvbiBtb3VudFxuICAgICAgICAgICAgICAgIGxldCB7IGFuY2hvciB9ID0gc3VzcGVuc2U7XG4gICAgICAgICAgICAgICAgLy8gdW5tb3VudCBjdXJyZW50IGFjdGl2ZSB0cmVlXG4gICAgICAgICAgICAgICAgaWYgKGFjdGl2ZUJyYW5jaCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGUgZmFsbGJhY2sgdHJlZSB3YXMgbW91bnRlZCwgaXQgbWF5IGhhdmUgYmVlbiBtb3ZlZFxuICAgICAgICAgICAgICAgICAgICAvLyBhcyBwYXJ0IG9mIGEgcGFyZW50IHN1c3BlbnNlLiBnZXQgdGhlIGxhdGVzdCBhbmNob3IgZm9yIGluc2VydGlvblxuICAgICAgICAgICAgICAgICAgICBhbmNob3IgPSBuZXh0KGFjdGl2ZUJyYW5jaCk7XG4gICAgICAgICAgICAgICAgICAgIHVubW91bnQoYWN0aXZlQnJhbmNoLCBwYXJlbnRDb21wb25lbnQsIHN1c3BlbnNlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFkZWxheUVudGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIG1vdmUgY29udGVudCBmcm9tIG9mZi1kb20gY29udGFpbmVyIHRvIGFjdHVhbCBjb250YWluZXJcbiAgICAgICAgICAgICAgICAgICAgbW92ZShwZW5kaW5nQnJhbmNoLCBjb250YWluZXIsIGFuY2hvciwgMCAvKiBNb3ZlVHlwZS5FTlRFUiAqLyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0QWN0aXZlQnJhbmNoKHN1c3BlbnNlLCBwZW5kaW5nQnJhbmNoKTtcbiAgICAgICAgICAgIHN1c3BlbnNlLnBlbmRpbmdCcmFuY2ggPSBudWxsO1xuICAgICAgICAgICAgc3VzcGVuc2UuaXNJbkZhbGxiYWNrID0gZmFsc2U7XG4gICAgICAgICAgICAvLyBmbHVzaCBidWZmZXJlZCBlZmZlY3RzXG4gICAgICAgICAgICAvLyBjaGVjayBpZiB0aGVyZSBpcyBhIHBlbmRpbmcgcGFyZW50IHN1c3BlbnNlXG4gICAgICAgICAgICBsZXQgcGFyZW50ID0gc3VzcGVuc2UucGFyZW50O1xuICAgICAgICAgICAgbGV0IGhhc1VucmVzb2x2ZWRBbmNlc3RvciA9IGZhbHNlO1xuICAgICAgICAgICAgd2hpbGUgKHBhcmVudCkge1xuICAgICAgICAgICAgICAgIGlmIChwYXJlbnQucGVuZGluZ0JyYW5jaCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBmb3VuZCBhIHBlbmRpbmcgcGFyZW50IHN1c3BlbnNlLCBtZXJnZSBidWZmZXJlZCBwb3N0IGpvYnNcbiAgICAgICAgICAgICAgICAgICAgLy8gaW50byB0aGF0IHBhcmVudFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQuZWZmZWN0cy5wdXNoKC4uLmVmZmVjdHMpO1xuICAgICAgICAgICAgICAgICAgICBoYXNVbnJlc29sdmVkQW5jZXN0b3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIG5vIHBlbmRpbmcgcGFyZW50IHN1c3BlbnNlLCBmbHVzaCBhbGwgam9ic1xuICAgICAgICAgICAgaWYgKCFoYXNVbnJlc29sdmVkQW5jZXN0b3IpIHtcbiAgICAgICAgICAgICAgICBxdWV1ZVBvc3RGbHVzaENiKGVmZmVjdHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3VzcGVuc2UuZWZmZWN0cyA9IFtdO1xuICAgICAgICAgICAgLy8gaW52b2tlIEByZXNvbHZlIGV2ZW50XG4gICAgICAgICAgICB0cmlnZ2VyRXZlbnQodm5vZGUsICdvblJlc29sdmUnKTtcbiAgICAgICAgfSxcbiAgICAgICAgZmFsbGJhY2soZmFsbGJhY2tWTm9kZSkge1xuICAgICAgICAgICAgaWYgKCFzdXNwZW5zZS5wZW5kaW5nQnJhbmNoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgeyB2bm9kZSwgYWN0aXZlQnJhbmNoLCBwYXJlbnRDb21wb25lbnQsIGNvbnRhaW5lciwgaXNTVkcgfSA9IHN1c3BlbnNlO1xuICAgICAgICAgICAgLy8gaW52b2tlIEBmYWxsYmFjayBldmVudFxuICAgICAgICAgICAgdHJpZ2dlckV2ZW50KHZub2RlLCAnb25GYWxsYmFjaycpO1xuICAgICAgICAgICAgY29uc3QgYW5jaG9yID0gbmV4dChhY3RpdmVCcmFuY2gpO1xuICAgICAgICAgICAgY29uc3QgbW91bnRGYWxsYmFjayA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXN1c3BlbnNlLmlzSW5GYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIG1vdW50IHRoZSBmYWxsYmFjayB0cmVlXG4gICAgICAgICAgICAgICAgcGF0Y2gobnVsbCwgZmFsbGJhY2tWTm9kZSwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgbnVsbCwgLy8gZmFsbGJhY2sgdHJlZSB3aWxsIG5vdCBoYXZlIHN1c3BlbnNlIGNvbnRleHRcbiAgICAgICAgICAgICAgICBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgICAgIHNldEFjdGl2ZUJyYW5jaChzdXNwZW5zZSwgZmFsbGJhY2tWTm9kZSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgZGVsYXlFbnRlciA9IGZhbGxiYWNrVk5vZGUudHJhbnNpdGlvbiAmJiBmYWxsYmFja1ZOb2RlLnRyYW5zaXRpb24ubW9kZSA9PT0gJ291dC1pbic7XG4gICAgICAgICAgICBpZiAoZGVsYXlFbnRlcikge1xuICAgICAgICAgICAgICAgIGFjdGl2ZUJyYW5jaC50cmFuc2l0aW9uLmFmdGVyTGVhdmUgPSBtb3VudEZhbGxiYWNrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3VzcGVuc2UuaXNJbkZhbGxiYWNrID0gdHJ1ZTtcbiAgICAgICAgICAgIC8vIHVubW91bnQgY3VycmVudCBhY3RpdmUgYnJhbmNoXG4gICAgICAgICAgICB1bm1vdW50KGFjdGl2ZUJyYW5jaCwgcGFyZW50Q29tcG9uZW50LCBudWxsLCAvLyBubyBzdXNwZW5zZSBzbyB1bm1vdW50IGhvb2tzIGZpcmUgbm93XG4gICAgICAgICAgICB0cnVlIC8vIHNob3VsZFJlbW92ZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmICghZGVsYXlFbnRlcikge1xuICAgICAgICAgICAgICAgIG1vdW50RmFsbGJhY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgbW92ZShjb250YWluZXIsIGFuY2hvciwgdHlwZSkge1xuICAgICAgICAgICAgc3VzcGVuc2UuYWN0aXZlQnJhbmNoICYmXG4gICAgICAgICAgICAgICAgbW92ZShzdXNwZW5zZS5hY3RpdmVCcmFuY2gsIGNvbnRhaW5lciwgYW5jaG9yLCB0eXBlKTtcbiAgICAgICAgICAgIHN1c3BlbnNlLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICAgICAgfSxcbiAgICAgICAgbmV4dCgpIHtcbiAgICAgICAgICAgIHJldHVybiBzdXNwZW5zZS5hY3RpdmVCcmFuY2ggJiYgbmV4dChzdXNwZW5zZS5hY3RpdmVCcmFuY2gpO1xuICAgICAgICB9LFxuICAgICAgICByZWdpc3RlckRlcChpbnN0YW5jZSwgc2V0dXBSZW5kZXJFZmZlY3QpIHtcbiAgICAgICAgICAgIGNvbnN0IGlzSW5QZW5kaW5nU3VzcGVuc2UgPSAhIXN1c3BlbnNlLnBlbmRpbmdCcmFuY2g7XG4gICAgICAgICAgICBpZiAoaXNJblBlbmRpbmdTdXNwZW5zZSkge1xuICAgICAgICAgICAgICAgIHN1c3BlbnNlLmRlcHMrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGh5ZHJhdGVkRWwgPSBpbnN0YW5jZS52bm9kZS5lbDtcbiAgICAgICAgICAgIGluc3RhbmNlXG4gICAgICAgICAgICAgICAgLmFzeW5jRGVwLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgICAgICAgaGFuZGxlRXJyb3IoZXJyLCBpbnN0YW5jZSwgMCAvKiBFcnJvckNvZGVzLlNFVFVQX0ZVTkNUSU9OICovKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oYXN5bmNTZXR1cFJlc3VsdCA9PiB7XG4gICAgICAgICAgICAgICAgLy8gcmV0cnkgd2hlbiB0aGUgc2V0dXAoKSBwcm9taXNlIHJlc29sdmVzLlxuICAgICAgICAgICAgICAgIC8vIGNvbXBvbmVudCBtYXkgaGF2ZSBiZWVuIHVubW91bnRlZCBiZWZvcmUgcmVzb2x2ZS5cbiAgICAgICAgICAgICAgICBpZiAoaW5zdGFuY2UuaXNVbm1vdW50ZWQgfHxcbiAgICAgICAgICAgICAgICAgICAgc3VzcGVuc2UuaXNVbm1vdW50ZWQgfHxcbiAgICAgICAgICAgICAgICAgICAgc3VzcGVuc2UucGVuZGluZ0lkICE9PSBpbnN0YW5jZS5zdXNwZW5zZUlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gcmV0cnkgZnJvbSB0aGlzIGNvbXBvbmVudFxuICAgICAgICAgICAgICAgIGluc3RhbmNlLmFzeW5jUmVzb2x2ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgdm5vZGUgfSA9IGluc3RhbmNlO1xuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgcHVzaFdhcm5pbmdDb250ZXh0KHZub2RlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaGFuZGxlU2V0dXBSZXN1bHQoaW5zdGFuY2UsIGFzeW5jU2V0dXBSZXN1bHQsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBpZiAoaHlkcmF0ZWRFbCkge1xuICAgICAgICAgICAgICAgICAgICAvLyB2bm9kZSBtYXkgaGF2ZSBiZWVuIHJlcGxhY2VkIGlmIGFuIHVwZGF0ZSBoYXBwZW5lZCBiZWZvcmUgdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIGFzeW5jIGRlcCBpcyByZXNvbHZlZC5cbiAgICAgICAgICAgICAgICAgICAgdm5vZGUuZWwgPSBoeWRyYXRlZEVsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBwbGFjZWhvbGRlciA9ICFoeWRyYXRlZEVsICYmIGluc3RhbmNlLnN1YlRyZWUuZWw7XG4gICAgICAgICAgICAgICAgc2V0dXBSZW5kZXJFZmZlY3QoaW5zdGFuY2UsIHZub2RlLCBcbiAgICAgICAgICAgICAgICAvLyBjb21wb25lbnQgbWF5IGhhdmUgYmVlbiBtb3ZlZCBiZWZvcmUgcmVzb2x2ZS5cbiAgICAgICAgICAgICAgICAvLyBpZiB0aGlzIGlzIG5vdCBhIGh5ZHJhdGlvbiwgaW5zdGFuY2Uuc3ViVHJlZSB3aWxsIGJlIHRoZSBjb21tZW50XG4gICAgICAgICAgICAgICAgLy8gcGxhY2Vob2xkZXIuXG4gICAgICAgICAgICAgICAgcGFyZW50Tm9kZShoeWRyYXRlZEVsIHx8IGluc3RhbmNlLnN1YlRyZWUuZWwpLCBcbiAgICAgICAgICAgICAgICAvLyBhbmNob3Igd2lsbCBub3QgYmUgdXNlZCBpZiB0aGlzIGlzIGh5ZHJhdGlvbiwgc28gb25seSBuZWVkIHRvXG4gICAgICAgICAgICAgICAgLy8gY29uc2lkZXIgdGhlIGNvbW1lbnQgcGxhY2Vob2xkZXIgY2FzZS5cbiAgICAgICAgICAgICAgICBoeWRyYXRlZEVsID8gbnVsbCA6IG5leHQoaW5zdGFuY2Uuc3ViVHJlZSksIHN1c3BlbnNlLCBpc1NWRywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgICAgICBpZiAocGxhY2Vob2xkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlKHBsYWNlaG9sZGVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdXBkYXRlSE9DSG9zdEVsKGluc3RhbmNlLCB2bm9kZS5lbCk7XG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICBwb3BXYXJuaW5nQ29udGV4dCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBvbmx5IGRlY3JlYXNlIGRlcHMgY291bnQgaWYgc3VzcGVuc2UgaXMgbm90IGFscmVhZHkgcmVzb2x2ZWRcbiAgICAgICAgICAgICAgICBpZiAoaXNJblBlbmRpbmdTdXNwZW5zZSAmJiAtLXN1c3BlbnNlLmRlcHMgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgc3VzcGVuc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICB1bm1vdW50KHBhcmVudFN1c3BlbnNlLCBkb1JlbW92ZSkge1xuICAgICAgICAgICAgc3VzcGVuc2UuaXNVbm1vdW50ZWQgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHN1c3BlbnNlLmFjdGl2ZUJyYW5jaCkge1xuICAgICAgICAgICAgICAgIHVubW91bnQoc3VzcGVuc2UuYWN0aXZlQnJhbmNoLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBkb1JlbW92ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3VzcGVuc2UucGVuZGluZ0JyYW5jaCkge1xuICAgICAgICAgICAgICAgIHVubW91bnQoc3VzcGVuc2UucGVuZGluZ0JyYW5jaCwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgZG9SZW1vdmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gc3VzcGVuc2U7XG59XG5mdW5jdGlvbiBoeWRyYXRlU3VzcGVuc2Uobm9kZSwgdm5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCwgcmVuZGVyZXJJbnRlcm5hbHMsIGh5ZHJhdGVOb2RlKSB7XG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzICovXG4gICAgY29uc3Qgc3VzcGVuc2UgPSAodm5vZGUuc3VzcGVuc2UgPSBjcmVhdGVTdXNwZW5zZUJvdW5kYXJ5KHZub2RlLCBwYXJlbnRTdXNwZW5zZSwgcGFyZW50Q29tcG9uZW50LCBub2RlLnBhcmVudE5vZGUsIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLCBudWxsLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIHJlbmRlcmVySW50ZXJuYWxzLCB0cnVlIC8qIGh5ZHJhdGluZyAqLykpO1xuICAgIC8vIHRoZXJlIGFyZSB0d28gcG9zc2libGUgc2NlbmFyaW9zIGZvciBzZXJ2ZXItcmVuZGVyZWQgc3VzcGVuc2U6XG4gICAgLy8gLSBzdWNjZXNzOiBzc3IgY29udGVudCBzaG91bGQgYmUgZnVsbHkgcmVzb2x2ZWRcbiAgICAvLyAtIGZhaWx1cmU6IHNzciBjb250ZW50IHNob3VsZCBiZSB0aGUgZmFsbGJhY2sgYnJhbmNoLlxuICAgIC8vIGhvd2V2ZXIsIG9uIHRoZSBjbGllbnQgd2UgZG9uJ3QgcmVhbGx5IGtub3cgaWYgaXQgaGFzIGZhaWxlZCBvciBub3RcbiAgICAvLyBhdHRlbXB0IHRvIGh5ZHJhdGUgdGhlIERPTSBhc3N1bWluZyBpdCBoYXMgc3VjY2VlZGVkLCBidXQgd2Ugc3RpbGxcbiAgICAvLyBuZWVkIHRvIGNvbnN0cnVjdCBhIHN1c3BlbnNlIGJvdW5kYXJ5IGZpcnN0XG4gICAgY29uc3QgcmVzdWx0ID0gaHlkcmF0ZU5vZGUobm9kZSwgKHN1c3BlbnNlLnBlbmRpbmdCcmFuY2ggPSB2bm9kZS5zc0NvbnRlbnQpLCBwYXJlbnRDb21wb25lbnQsIHN1c3BlbnNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgaWYgKHN1c3BlbnNlLmRlcHMgPT09IDApIHtcbiAgICAgICAgc3VzcGVuc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICAgIC8qIGVzbGludC1lbmFibGUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzICovXG59XG5mdW5jdGlvbiBub3JtYWxpemVTdXNwZW5zZUNoaWxkcmVuKHZub2RlKSB7XG4gICAgY29uc3QgeyBzaGFwZUZsYWcsIGNoaWxkcmVuIH0gPSB2bm9kZTtcbiAgICBjb25zdCBpc1Nsb3RDaGlsZHJlbiA9IHNoYXBlRmxhZyAmIDMyIC8qIFNoYXBlRmxhZ3MuU0xPVFNfQ0hJTERSRU4gKi87XG4gICAgdm5vZGUuc3NDb250ZW50ID0gbm9ybWFsaXplU3VzcGVuc2VTbG90KGlzU2xvdENoaWxkcmVuID8gY2hpbGRyZW4uZGVmYXVsdCA6IGNoaWxkcmVuKTtcbiAgICB2bm9kZS5zc0ZhbGxiYWNrID0gaXNTbG90Q2hpbGRyZW5cbiAgICAgICAgPyBub3JtYWxpemVTdXNwZW5zZVNsb3QoY2hpbGRyZW4uZmFsbGJhY2spXG4gICAgICAgIDogY3JlYXRlVk5vZGUoQ29tbWVudCk7XG59XG5mdW5jdGlvbiBub3JtYWxpemVTdXNwZW5zZVNsb3Qocykge1xuICAgIGxldCBibG9jaztcbiAgICBpZiAoaXNGdW5jdGlvbihzKSkge1xuICAgICAgICBjb25zdCB0cmFja0Jsb2NrID0gaXNCbG9ja1RyZWVFbmFibGVkICYmIHMuX2M7XG4gICAgICAgIGlmICh0cmFja0Jsb2NrKSB7XG4gICAgICAgICAgICAvLyBkaXNhYmxlVHJhY2tpbmc6IGZhbHNlXG4gICAgICAgICAgICAvLyBhbGxvdyBibG9jayB0cmFja2luZyBmb3IgY29tcGlsZWQgc2xvdHNcbiAgICAgICAgICAgIC8vIChzZWUgLi9jb21wb25lbnRSZW5kZXJDb250ZXh0LnRzKVxuICAgICAgICAgICAgcy5fZCA9IGZhbHNlO1xuICAgICAgICAgICAgb3BlbkJsb2NrKCk7XG4gICAgICAgIH1cbiAgICAgICAgcyA9IHMoKTtcbiAgICAgICAgaWYgKHRyYWNrQmxvY2spIHtcbiAgICAgICAgICAgIHMuX2QgPSB0cnVlO1xuICAgICAgICAgICAgYmxvY2sgPSBjdXJyZW50QmxvY2s7XG4gICAgICAgICAgICBjbG9zZUJsb2NrKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlzQXJyYXkocykpIHtcbiAgICAgICAgY29uc3Qgc2luZ2xlQ2hpbGQgPSBmaWx0ZXJTaW5nbGVSb290KHMpO1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFzaW5nbGVDaGlsZCkge1xuICAgICAgICAgICAgd2FybihgPFN1c3BlbnNlPiBzbG90cyBleHBlY3QgYSBzaW5nbGUgcm9vdCBub2RlLmApO1xuICAgICAgICB9XG4gICAgICAgIHMgPSBzaW5nbGVDaGlsZDtcbiAgICB9XG4gICAgcyA9IG5vcm1hbGl6ZVZOb2RlKHMpO1xuICAgIGlmIChibG9jayAmJiAhcy5keW5hbWljQ2hpbGRyZW4pIHtcbiAgICAgICAgcy5keW5hbWljQ2hpbGRyZW4gPSBibG9jay5maWx0ZXIoYyA9PiBjICE9PSBzKTtcbiAgICB9XG4gICAgcmV0dXJuIHM7XG59XG5mdW5jdGlvbiBxdWV1ZUVmZmVjdFdpdGhTdXNwZW5zZShmbiwgc3VzcGVuc2UpIHtcbiAgICBpZiAoc3VzcGVuc2UgJiYgc3VzcGVuc2UucGVuZGluZ0JyYW5jaCkge1xuICAgICAgICBpZiAoaXNBcnJheShmbikpIHtcbiAgICAgICAgICAgIHN1c3BlbnNlLmVmZmVjdHMucHVzaCguLi5mbik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdXNwZW5zZS5lZmZlY3RzLnB1c2goZm4pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBxdWV1ZVBvc3RGbHVzaENiKGZuKTtcbiAgICB9XG59XG5mdW5jdGlvbiBzZXRBY3RpdmVCcmFuY2goc3VzcGVuc2UsIGJyYW5jaCkge1xuICAgIHN1c3BlbnNlLmFjdGl2ZUJyYW5jaCA9IGJyYW5jaDtcbiAgICBjb25zdCB7IHZub2RlLCBwYXJlbnRDb21wb25lbnQgfSA9IHN1c3BlbnNlO1xuICAgIGNvbnN0IGVsID0gKHZub2RlLmVsID0gYnJhbmNoLmVsKTtcbiAgICAvLyBpbiBjYXNlIHN1c3BlbnNlIGlzIHRoZSByb290IG5vZGUgb2YgYSBjb21wb25lbnQsXG4gICAgLy8gcmVjdXJzaXZlbHkgdXBkYXRlIHRoZSBIT0MgZWxcbiAgICBpZiAocGFyZW50Q29tcG9uZW50ICYmIHBhcmVudENvbXBvbmVudC5zdWJUcmVlID09PSB2bm9kZSkge1xuICAgICAgICBwYXJlbnRDb21wb25lbnQudm5vZGUuZWwgPSBlbDtcbiAgICAgICAgdXBkYXRlSE9DSG9zdEVsKHBhcmVudENvbXBvbmVudCwgZWwpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gcHJvdmlkZShrZXksIHZhbHVlKSB7XG4gICAgaWYgKCFjdXJyZW50SW5zdGFuY2UpIHtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgd2FybihgcHJvdmlkZSgpIGNhbiBvbmx5IGJlIHVzZWQgaW5zaWRlIHNldHVwKCkuYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGxldCBwcm92aWRlcyA9IGN1cnJlbnRJbnN0YW5jZS5wcm92aWRlcztcbiAgICAgICAgLy8gYnkgZGVmYXVsdCBhbiBpbnN0YW5jZSBpbmhlcml0cyBpdHMgcGFyZW50J3MgcHJvdmlkZXMgb2JqZWN0XG4gICAgICAgIC8vIGJ1dCB3aGVuIGl0IG5lZWRzIHRvIHByb3ZpZGUgdmFsdWVzIG9mIGl0cyBvd24sIGl0IGNyZWF0ZXMgaXRzXG4gICAgICAgIC8vIG93biBwcm92aWRlcyBvYmplY3QgdXNpbmcgcGFyZW50IHByb3ZpZGVzIG9iamVjdCBhcyBwcm90b3R5cGUuXG4gICAgICAgIC8vIHRoaXMgd2F5IGluIGBpbmplY3RgIHdlIGNhbiBzaW1wbHkgbG9vayB1cCBpbmplY3Rpb25zIGZyb20gZGlyZWN0XG4gICAgICAgIC8vIHBhcmVudCBhbmQgbGV0IHRoZSBwcm90b3R5cGUgY2hhaW4gZG8gdGhlIHdvcmsuXG4gICAgICAgIGNvbnN0IHBhcmVudFByb3ZpZGVzID0gY3VycmVudEluc3RhbmNlLnBhcmVudCAmJiBjdXJyZW50SW5zdGFuY2UucGFyZW50LnByb3ZpZGVzO1xuICAgICAgICBpZiAocGFyZW50UHJvdmlkZXMgPT09IHByb3ZpZGVzKSB7XG4gICAgICAgICAgICBwcm92aWRlcyA9IGN1cnJlbnRJbnN0YW5jZS5wcm92aWRlcyA9IE9iamVjdC5jcmVhdGUocGFyZW50UHJvdmlkZXMpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRTIGRvZXNuJ3QgYWxsb3cgc3ltYm9sIGFzIGluZGV4IHR5cGVcbiAgICAgICAgcHJvdmlkZXNba2V5XSA9IHZhbHVlO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGluamVjdChrZXksIGRlZmF1bHRWYWx1ZSwgdHJlYXREZWZhdWx0QXNGYWN0b3J5ID0gZmFsc2UpIHtcbiAgICAvLyBmYWxsYmFjayB0byBgY3VycmVudFJlbmRlcmluZ0luc3RhbmNlYCBzbyB0aGF0IHRoaXMgY2FuIGJlIGNhbGxlZCBpblxuICAgIC8vIGEgZnVuY3Rpb25hbCBjb21wb25lbnRcbiAgICBjb25zdCBpbnN0YW5jZSA9IGN1cnJlbnRJbnN0YW5jZSB8fCBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2U7XG4gICAgaWYgKGluc3RhbmNlKSB7XG4gICAgICAgIC8vICMyNDAwXG4gICAgICAgIC8vIHRvIHN1cHBvcnQgYGFwcC51c2VgIHBsdWdpbnMsXG4gICAgICAgIC8vIGZhbGxiYWNrIHRvIGFwcENvbnRleHQncyBgcHJvdmlkZXNgIGlmIHRoZSBpbnN0YW5jZSBpcyBhdCByb290XG4gICAgICAgIGNvbnN0IHByb3ZpZGVzID0gaW5zdGFuY2UucGFyZW50ID09IG51bGxcbiAgICAgICAgICAgID8gaW5zdGFuY2Uudm5vZGUuYXBwQ29udGV4dCAmJiBpbnN0YW5jZS52bm9kZS5hcHBDb250ZXh0LnByb3ZpZGVzXG4gICAgICAgICAgICA6IGluc3RhbmNlLnBhcmVudC5wcm92aWRlcztcbiAgICAgICAgaWYgKHByb3ZpZGVzICYmIGtleSBpbiBwcm92aWRlcykge1xuICAgICAgICAgICAgLy8gVFMgZG9lc24ndCBhbGxvdyBzeW1ib2wgYXMgaW5kZXggdHlwZVxuICAgICAgICAgICAgcmV0dXJuIHByb3ZpZGVzW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIHJldHVybiB0cmVhdERlZmF1bHRBc0ZhY3RvcnkgJiYgaXNGdW5jdGlvbihkZWZhdWx0VmFsdWUpXG4gICAgICAgICAgICAgICAgPyBkZWZhdWx0VmFsdWUuY2FsbChpbnN0YW5jZS5wcm94eSlcbiAgICAgICAgICAgICAgICA6IGRlZmF1bHRWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgIHdhcm4oYGluamVjdGlvbiBcIiR7U3RyaW5nKGtleSl9XCIgbm90IGZvdW5kLmApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICB3YXJuKGBpbmplY3QoKSBjYW4gb25seSBiZSB1c2VkIGluc2lkZSBzZXR1cCgpIG9yIGZ1bmN0aW9uYWwgY29tcG9uZW50cy5gKTtcbiAgICB9XG59XG5cbi8vIFNpbXBsZSBlZmZlY3QuXG5mdW5jdGlvbiB3YXRjaEVmZmVjdChlZmZlY3QsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZG9XYXRjaChlZmZlY3QsIG51bGwsIG9wdGlvbnMpO1xufVxuZnVuY3Rpb24gd2F0Y2hQb3N0RWZmZWN0KGVmZmVjdCwgb3B0aW9ucykge1xuICAgIHJldHVybiBkb1dhdGNoKGVmZmVjdCwgbnVsbCwgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKVxuICAgICAgICA/IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyksIHsgZmx1c2g6ICdwb3N0JyB9KSA6IHsgZmx1c2g6ICdwb3N0JyB9KSk7XG59XG5mdW5jdGlvbiB3YXRjaFN5bmNFZmZlY3QoZWZmZWN0LCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGRvV2F0Y2goZWZmZWN0LCBudWxsLCAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpXG4gICAgICAgID8gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zKSwgeyBmbHVzaDogJ3N5bmMnIH0pIDogeyBmbHVzaDogJ3N5bmMnIH0pKTtcbn1cbi8vIGluaXRpYWwgdmFsdWUgZm9yIHdhdGNoZXJzIHRvIHRyaWdnZXIgb24gdW5kZWZpbmVkIGluaXRpYWwgdmFsdWVzXG5jb25zdCBJTklUSUFMX1dBVENIRVJfVkFMVUUgPSB7fTtcbi8vIGltcGxlbWVudGF0aW9uXG5mdW5jdGlvbiB3YXRjaChzb3VyY2UsIGNiLCBvcHRpb25zKSB7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhaXNGdW5jdGlvbihjYikpIHtcbiAgICAgICAgd2FybihgXFxgd2F0Y2goZm4sIG9wdGlvbnM/KVxcYCBzaWduYXR1cmUgaGFzIGJlZW4gbW92ZWQgdG8gYSBzZXBhcmF0ZSBBUEkuIGAgK1xuICAgICAgICAgICAgYFVzZSBcXGB3YXRjaEVmZmVjdChmbiwgb3B0aW9ucz8pXFxgIGluc3RlYWQuIFxcYHdhdGNoXFxgIG5vdyBvbmx5IGAgK1xuICAgICAgICAgICAgYHN1cHBvcnRzIFxcYHdhdGNoKHNvdXJjZSwgY2IsIG9wdGlvbnM/KSBzaWduYXR1cmUuYCk7XG4gICAgfVxuICAgIHJldHVybiBkb1dhdGNoKHNvdXJjZSwgY2IsIG9wdGlvbnMpO1xufVxuZnVuY3Rpb24gZG9XYXRjaChzb3VyY2UsIGNiLCB7IGltbWVkaWF0ZSwgZGVlcCwgZmx1c2gsIG9uVHJhY2ssIG9uVHJpZ2dlciB9ID0gRU1QVFlfT0JKKSB7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhY2IpIHtcbiAgICAgICAgaWYgKGltbWVkaWF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB3YXJuKGB3YXRjaCgpIFwiaW1tZWRpYXRlXCIgb3B0aW9uIGlzIG9ubHkgcmVzcGVjdGVkIHdoZW4gdXNpbmcgdGhlIGAgK1xuICAgICAgICAgICAgICAgIGB3YXRjaChzb3VyY2UsIGNhbGxiYWNrLCBvcHRpb25zPykgc2lnbmF0dXJlLmApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkZWVwICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHdhcm4oYHdhdGNoKCkgXCJkZWVwXCIgb3B0aW9uIGlzIG9ubHkgcmVzcGVjdGVkIHdoZW4gdXNpbmcgdGhlIGAgK1xuICAgICAgICAgICAgICAgIGB3YXRjaChzb3VyY2UsIGNhbGxiYWNrLCBvcHRpb25zPykgc2lnbmF0dXJlLmApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHdhcm5JbnZhbGlkU291cmNlID0gKHMpID0+IHtcbiAgICAgICAgd2FybihgSW52YWxpZCB3YXRjaCBzb3VyY2U6IGAsIHMsIGBBIHdhdGNoIHNvdXJjZSBjYW4gb25seSBiZSBhIGdldHRlci9lZmZlY3QgZnVuY3Rpb24sIGEgcmVmLCBgICtcbiAgICAgICAgICAgIGBhIHJlYWN0aXZlIG9iamVjdCwgb3IgYW4gYXJyYXkgb2YgdGhlc2UgdHlwZXMuYCk7XG4gICAgfTtcbiAgICBjb25zdCBpbnN0YW5jZSA9IGN1cnJlbnRJbnN0YW5jZTtcbiAgICBsZXQgZ2V0dGVyO1xuICAgIGxldCBmb3JjZVRyaWdnZXIgPSBmYWxzZTtcbiAgICBsZXQgaXNNdWx0aVNvdXJjZSA9IGZhbHNlO1xuICAgIGlmIChpc1JlZihzb3VyY2UpKSB7XG4gICAgICAgIGdldHRlciA9ICgpID0+IHNvdXJjZS52YWx1ZTtcbiAgICAgICAgZm9yY2VUcmlnZ2VyID0gaXNTaGFsbG93JDEoc291cmNlKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNSZWFjdGl2ZShzb3VyY2UpKSB7XG4gICAgICAgIGdldHRlciA9ICgpID0+IHNvdXJjZTtcbiAgICAgICAgZGVlcCA9IHRydWU7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzQXJyYXkoc291cmNlKSkge1xuICAgICAgICBpc011bHRpU291cmNlID0gdHJ1ZTtcbiAgICAgICAgZm9yY2VUcmlnZ2VyID0gc291cmNlLnNvbWUocyA9PiBpc1JlYWN0aXZlKHMpIHx8IGlzU2hhbGxvdyQxKHMpKTtcbiAgICAgICAgZ2V0dGVyID0gKCkgPT4gc291cmNlLm1hcChzID0+IHtcbiAgICAgICAgICAgIGlmIChpc1JlZihzKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNSZWFjdGl2ZShzKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cmF2ZXJzZShzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzRnVuY3Rpb24ocykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbFdpdGhFcnJvckhhbmRsaW5nKHMsIGluc3RhbmNlLCAyIC8qIEVycm9yQ29kZXMuV0FUQ0hfR0VUVEVSICovKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiB3YXJuSW52YWxpZFNvdXJjZShzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzRnVuY3Rpb24oc291cmNlKSkge1xuICAgICAgICBpZiAoY2IpIHtcbiAgICAgICAgICAgIC8vIGdldHRlciB3aXRoIGNiXG4gICAgICAgICAgICBnZXR0ZXIgPSAoKSA9PiBjYWxsV2l0aEVycm9ySGFuZGxpbmcoc291cmNlLCBpbnN0YW5jZSwgMiAvKiBFcnJvckNvZGVzLldBVENIX0dFVFRFUiAqLyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBubyBjYiAtPiBzaW1wbGUgZWZmZWN0XG4gICAgICAgICAgICBnZXR0ZXIgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGluc3RhbmNlICYmIGluc3RhbmNlLmlzVW5tb3VudGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGNsZWFudXApIHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYW51cCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoc291cmNlLCBpbnN0YW5jZSwgMyAvKiBFcnJvckNvZGVzLldBVENIX0NBTExCQUNLICovLCBbb25DbGVhbnVwXSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBnZXR0ZXIgPSBOT09QO1xuICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgd2FybkludmFsaWRTb3VyY2Uoc291cmNlKTtcbiAgICB9XG4gICAgaWYgKGNiICYmIGRlZXApIHtcbiAgICAgICAgY29uc3QgYmFzZUdldHRlciA9IGdldHRlcjtcbiAgICAgICAgZ2V0dGVyID0gKCkgPT4gdHJhdmVyc2UoYmFzZUdldHRlcigpKTtcbiAgICB9XG4gICAgbGV0IGNsZWFudXA7XG4gICAgbGV0IG9uQ2xlYW51cCA9IChmbikgPT4ge1xuICAgICAgICBjbGVhbnVwID0gZWZmZWN0Lm9uU3RvcCA9ICgpID0+IHtcbiAgICAgICAgICAgIGNhbGxXaXRoRXJyb3JIYW5kbGluZyhmbiwgaW5zdGFuY2UsIDQgLyogRXJyb3JDb2Rlcy5XQVRDSF9DTEVBTlVQICovKTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIC8vIGluIFNTUiB0aGVyZSBpcyBubyBuZWVkIHRvIHNldHVwIGFuIGFjdHVhbCBlZmZlY3QsIGFuZCBpdCBzaG91bGQgYmUgbm9vcFxuICAgIC8vIHVubGVzcyBpdCdzIGVhZ2VyIG9yIHN5bmMgZmx1c2hcbiAgICBsZXQgc3NyQ2xlYW51cDtcbiAgICBpZiAoaXNJblNTUkNvbXBvbmVudFNldHVwKSB7XG4gICAgICAgIC8vIHdlIHdpbGwgYWxzbyBub3QgY2FsbCB0aGUgaW52YWxpZGF0ZSBjYWxsYmFjayAoKyBydW5uZXIgaXMgbm90IHNldCB1cClcbiAgICAgICAgb25DbGVhbnVwID0gTk9PUDtcbiAgICAgICAgaWYgKCFjYikge1xuICAgICAgICAgICAgZ2V0dGVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaW1tZWRpYXRlKSB7XG4gICAgICAgICAgICBjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZyhjYiwgaW5zdGFuY2UsIDMgLyogRXJyb3JDb2Rlcy5XQVRDSF9DQUxMQkFDSyAqLywgW1xuICAgICAgICAgICAgICAgIGdldHRlcigpLFxuICAgICAgICAgICAgICAgIGlzTXVsdGlTb3VyY2UgPyBbXSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBvbkNsZWFudXBcbiAgICAgICAgICAgIF0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmbHVzaCA9PT0gJ3N5bmMnKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB1c2VTU1JDb250ZXh0KCk7XG4gICAgICAgICAgICBzc3JDbGVhbnVwID0gY3R4Ll9fd2F0Y2hlckhhbmRsZXMgfHwgKGN0eC5fX3dhdGNoZXJIYW5kbGVzID0gW10pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIE5PT1A7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGV0IG9sZFZhbHVlID0gaXNNdWx0aVNvdXJjZVxuICAgICAgICA/IG5ldyBBcnJheShzb3VyY2UubGVuZ3RoKS5maWxsKElOSVRJQUxfV0FUQ0hFUl9WQUxVRSlcbiAgICAgICAgOiBJTklUSUFMX1dBVENIRVJfVkFMVUU7XG4gICAgY29uc3Qgam9iID0gKCkgPT4ge1xuICAgICAgICBpZiAoIWVmZmVjdC5hY3RpdmUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2IpIHtcbiAgICAgICAgICAgIC8vIHdhdGNoKHNvdXJjZSwgY2IpXG4gICAgICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IGVmZmVjdC5ydW4oKTtcbiAgICAgICAgICAgIGlmIChkZWVwIHx8XG4gICAgICAgICAgICAgICAgZm9yY2VUcmlnZ2VyIHx8XG4gICAgICAgICAgICAgICAgKGlzTXVsdGlTb3VyY2VcbiAgICAgICAgICAgICAgICAgICAgPyBuZXdWYWx1ZS5zb21lKCh2LCBpKSA9PiBoYXNDaGFuZ2VkKHYsIG9sZFZhbHVlW2ldKSlcbiAgICAgICAgICAgICAgICAgICAgOiBoYXNDaGFuZ2VkKG5ld1ZhbHVlLCBvbGRWYWx1ZSkpIHx8XG4gICAgICAgICAgICAgICAgKGZhbHNlICApKSB7XG4gICAgICAgICAgICAgICAgLy8gY2xlYW51cCBiZWZvcmUgcnVubmluZyBjYiBhZ2FpblxuICAgICAgICAgICAgICAgIGlmIChjbGVhbnVwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoY2IsIGluc3RhbmNlLCAzIC8qIEVycm9yQ29kZXMuV0FUQ0hfQ0FMTEJBQ0sgKi8sIFtcbiAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIC8vIHBhc3MgdW5kZWZpbmVkIGFzIHRoZSBvbGQgdmFsdWUgd2hlbiBpdCdzIGNoYW5nZWQgZm9yIHRoZSBmaXJzdCB0aW1lXG4gICAgICAgICAgICAgICAgICAgIG9sZFZhbHVlID09PSBJTklUSUFMX1dBVENIRVJfVkFMVUVcbiAgICAgICAgICAgICAgICAgICAgICAgID8gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICA6IChpc011bHRpU291cmNlICYmIG9sZFZhbHVlWzBdID09PSBJTklUSUFMX1dBVENIRVJfVkFMVUUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBbXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogb2xkVmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xlYW51cFxuICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgIG9sZFZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyB3YXRjaEVmZmVjdFxuICAgICAgICAgICAgZWZmZWN0LnJ1bigpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvLyBpbXBvcnRhbnQ6IG1hcmsgdGhlIGpvYiBhcyBhIHdhdGNoZXIgY2FsbGJhY2sgc28gdGhhdCBzY2hlZHVsZXIga25vd3NcbiAgICAvLyBpdCBpcyBhbGxvd2VkIHRvIHNlbGYtdHJpZ2dlciAoIzE3MjcpXG4gICAgam9iLmFsbG93UmVjdXJzZSA9ICEhY2I7XG4gICAgbGV0IHNjaGVkdWxlcjtcbiAgICBpZiAoZmx1c2ggPT09ICdzeW5jJykge1xuICAgICAgICBzY2hlZHVsZXIgPSBqb2I7IC8vIHRoZSBzY2hlZHVsZXIgZnVuY3Rpb24gZ2V0cyBjYWxsZWQgZGlyZWN0bHlcbiAgICB9XG4gICAgZWxzZSBpZiAoZmx1c2ggPT09ICdwb3N0Jykge1xuICAgICAgICBzY2hlZHVsZXIgPSAoKSA9PiBxdWV1ZVBvc3RSZW5kZXJFZmZlY3Qoam9iLCBpbnN0YW5jZSAmJiBpbnN0YW5jZS5zdXNwZW5zZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBkZWZhdWx0OiAncHJlJ1xuICAgICAgICBqb2IucHJlID0gdHJ1ZTtcbiAgICAgICAgaWYgKGluc3RhbmNlKVxuICAgICAgICAgICAgam9iLmlkID0gaW5zdGFuY2UudWlkO1xuICAgICAgICBzY2hlZHVsZXIgPSAoKSA9PiBxdWV1ZUpvYihqb2IpO1xuICAgIH1cbiAgICBjb25zdCBlZmZlY3QgPSBuZXcgUmVhY3RpdmVFZmZlY3QoZ2V0dGVyLCBzY2hlZHVsZXIpO1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgZWZmZWN0Lm9uVHJhY2sgPSBvblRyYWNrO1xuICAgICAgICBlZmZlY3Qub25UcmlnZ2VyID0gb25UcmlnZ2VyO1xuICAgIH1cbiAgICAvLyBpbml0aWFsIHJ1blxuICAgIGlmIChjYikge1xuICAgICAgICBpZiAoaW1tZWRpYXRlKSB7XG4gICAgICAgICAgICBqb2IoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9sZFZhbHVlID0gZWZmZWN0LnJ1bigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGZsdXNoID09PSAncG9zdCcpIHtcbiAgICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KGVmZmVjdC5ydW4uYmluZChlZmZlY3QpLCBpbnN0YW5jZSAmJiBpbnN0YW5jZS5zdXNwZW5zZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBlZmZlY3QucnVuKCk7XG4gICAgfVxuICAgIGNvbnN0IHVud2F0Y2ggPSAoKSA9PiB7XG4gICAgICAgIGVmZmVjdC5zdG9wKCk7XG4gICAgICAgIGlmIChpbnN0YW5jZSAmJiBpbnN0YW5jZS5zY29wZSkge1xuICAgICAgICAgICAgcmVtb3ZlKGluc3RhbmNlLnNjb3BlLmVmZmVjdHMsIGVmZmVjdCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGlmIChzc3JDbGVhbnVwKVxuICAgICAgICBzc3JDbGVhbnVwLnB1c2godW53YXRjaCk7XG4gICAgcmV0dXJuIHVud2F0Y2g7XG59XG4vLyB0aGlzLiR3YXRjaFxuZnVuY3Rpb24gaW5zdGFuY2VXYXRjaChzb3VyY2UsIHZhbHVlLCBvcHRpb25zKSB7XG4gICAgY29uc3QgcHVibGljVGhpcyA9IHRoaXMucHJveHk7XG4gICAgY29uc3QgZ2V0dGVyID0gaXNTdHJpbmcoc291cmNlKVxuICAgICAgICA/IHNvdXJjZS5pbmNsdWRlcygnLicpXG4gICAgICAgICAgICA/IGNyZWF0ZVBhdGhHZXR0ZXIocHVibGljVGhpcywgc291cmNlKVxuICAgICAgICAgICAgOiAoKSA9PiBwdWJsaWNUaGlzW3NvdXJjZV1cbiAgICAgICAgOiBzb3VyY2UuYmluZChwdWJsaWNUaGlzLCBwdWJsaWNUaGlzKTtcbiAgICBsZXQgY2I7XG4gICAgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgICAgIGNiID0gdmFsdWU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjYiA9IHZhbHVlLmhhbmRsZXI7XG4gICAgICAgIG9wdGlvbnMgPSB2YWx1ZTtcbiAgICB9XG4gICAgY29uc3QgY3VyID0gY3VycmVudEluc3RhbmNlO1xuICAgIHNldEN1cnJlbnRJbnN0YW5jZSh0aGlzKTtcbiAgICBjb25zdCByZXMgPSBkb1dhdGNoKGdldHRlciwgY2IuYmluZChwdWJsaWNUaGlzKSwgb3B0aW9ucyk7XG4gICAgaWYgKGN1cikge1xuICAgICAgICBzZXRDdXJyZW50SW5zdGFuY2UoY3VyKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHVuc2V0Q3VycmVudEluc3RhbmNlKCk7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG59XG5mdW5jdGlvbiBjcmVhdGVQYXRoR2V0dGVyKGN0eCwgcGF0aCkge1xuICAgIGNvbnN0IHNlZ21lbnRzID0gcGF0aC5zcGxpdCgnLicpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIGxldCBjdXIgPSBjdHg7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VnbWVudHMubGVuZ3RoICYmIGN1cjsgaSsrKSB7XG4gICAgICAgICAgICBjdXIgPSBjdXJbc2VnbWVudHNbaV1dO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjdXI7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHRyYXZlcnNlKHZhbHVlLCBzZWVuKSB7XG4gICAgaWYgKCFpc09iamVjdCh2YWx1ZSkgfHwgdmFsdWVbXCJfX3Zfc2tpcFwiIC8qIFJlYWN0aXZlRmxhZ3MuU0tJUCAqL10pIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBzZWVuID0gc2VlbiB8fCBuZXcgU2V0KCk7XG4gICAgaWYgKHNlZW4uaGFzKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIHNlZW4uYWRkKHZhbHVlKTtcbiAgICBpZiAoaXNSZWYodmFsdWUpKSB7XG4gICAgICAgIHRyYXZlcnNlKHZhbHVlLnZhbHVlLCBzZWVuKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdHJhdmVyc2UodmFsdWVbaV0sIHNlZW4pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzU2V0KHZhbHVlKSB8fCBpc01hcCh2YWx1ZSkpIHtcbiAgICAgICAgdmFsdWUuZm9yRWFjaCgodikgPT4ge1xuICAgICAgICAgICAgdHJhdmVyc2Uodiwgc2Vlbik7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc1BsYWluT2JqZWN0KHZhbHVlKSkge1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB2YWx1ZSkge1xuICAgICAgICAgICAgdHJhdmVyc2UodmFsdWVba2V5XSwgc2Vlbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuXG5mdW5jdGlvbiB1c2VUcmFuc2l0aW9uU3RhdGUoKSB7XG4gICAgY29uc3Qgc3RhdGUgPSB7XG4gICAgICAgIGlzTW91bnRlZDogZmFsc2UsXG4gICAgICAgIGlzTGVhdmluZzogZmFsc2UsXG4gICAgICAgIGlzVW5tb3VudGluZzogZmFsc2UsXG4gICAgICAgIGxlYXZpbmdWTm9kZXM6IG5ldyBNYXAoKVxuICAgIH07XG4gICAgb25Nb3VudGVkKCgpID0+IHtcbiAgICAgICAgc3RhdGUuaXNNb3VudGVkID0gdHJ1ZTtcbiAgICB9KTtcbiAgICBvbkJlZm9yZVVubW91bnQoKCkgPT4ge1xuICAgICAgICBzdGF0ZS5pc1VubW91bnRpbmcgPSB0cnVlO1xuICAgIH0pO1xuICAgIHJldHVybiBzdGF0ZTtcbn1cbmNvbnN0IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yID0gW0Z1bmN0aW9uLCBBcnJheV07XG5jb25zdCBCYXNlVHJhbnNpdGlvbkltcGwgPSB7XG4gICAgbmFtZTogYEJhc2VUcmFuc2l0aW9uYCxcbiAgICBwcm9wczoge1xuICAgICAgICBtb2RlOiBTdHJpbmcsXG4gICAgICAgIGFwcGVhcjogQm9vbGVhbixcbiAgICAgICAgcGVyc2lzdGVkOiBCb29sZWFuLFxuICAgICAgICAvLyBlbnRlclxuICAgICAgICBvbkJlZm9yZUVudGVyOiBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvcixcbiAgICAgICAgb25FbnRlcjogVHJhbnNpdGlvbkhvb2tWYWxpZGF0b3IsXG4gICAgICAgIG9uQWZ0ZXJFbnRlcjogVHJhbnNpdGlvbkhvb2tWYWxpZGF0b3IsXG4gICAgICAgIG9uRW50ZXJDYW5jZWxsZWQ6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yLFxuICAgICAgICAvLyBsZWF2ZVxuICAgICAgICBvbkJlZm9yZUxlYXZlOiBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvcixcbiAgICAgICAgb25MZWF2ZTogVHJhbnNpdGlvbkhvb2tWYWxpZGF0b3IsXG4gICAgICAgIG9uQWZ0ZXJMZWF2ZTogVHJhbnNpdGlvbkhvb2tWYWxpZGF0b3IsXG4gICAgICAgIG9uTGVhdmVDYW5jZWxsZWQ6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yLFxuICAgICAgICAvLyBhcHBlYXJcbiAgICAgICAgb25CZWZvcmVBcHBlYXI6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yLFxuICAgICAgICBvbkFwcGVhcjogVHJhbnNpdGlvbkhvb2tWYWxpZGF0b3IsXG4gICAgICAgIG9uQWZ0ZXJBcHBlYXI6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yLFxuICAgICAgICBvbkFwcGVhckNhbmNlbGxlZDogVHJhbnNpdGlvbkhvb2tWYWxpZGF0b3JcbiAgICB9LFxuICAgIHNldHVwKHByb3BzLCB7IHNsb3RzIH0pIHtcbiAgICAgICAgY29uc3QgaW5zdGFuY2UgPSBnZXRDdXJyZW50SW5zdGFuY2UoKTtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB1c2VUcmFuc2l0aW9uU3RhdGUoKTtcbiAgICAgICAgbGV0IHByZXZUcmFuc2l0aW9uS2V5O1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBzbG90cy5kZWZhdWx0ICYmIGdldFRyYW5zaXRpb25SYXdDaGlsZHJlbihzbG90cy5kZWZhdWx0KCksIHRydWUpO1xuICAgICAgICAgICAgaWYgKCFjaGlsZHJlbiB8fCAhY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGNoaWxkID0gY2hpbGRyZW5bMF07XG4gICAgICAgICAgICBpZiAoY2hpbGRyZW4ubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIGxldCBoYXNGb3VuZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIC8vIGxvY2F0ZSBmaXJzdCBub24tY29tbWVudCBjaGlsZFxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYyBvZiBjaGlsZHJlbikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYy50eXBlICE9PSBDb21tZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGhhc0ZvdW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2FybiBtb3JlIHRoYW4gb25lIG5vbi1jb21tZW50IGNoaWxkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FybignPHRyYW5zaXRpb24+IGNhbiBvbmx5IGJlIHVzZWQgb24gYSBzaW5nbGUgZWxlbWVudCBvciBjb21wb25lbnQuICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnVXNlIDx0cmFuc2l0aW9uLWdyb3VwPiBmb3IgbGlzdHMuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZCA9IGM7XG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNGb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHRoZXJlJ3Mgbm8gbmVlZCB0byB0cmFjayByZWFjdGl2aXR5IGZvciB0aGVzZSBwcm9wcyBzbyB1c2UgdGhlIHJhd1xuICAgICAgICAgICAgLy8gcHJvcHMgZm9yIGEgYml0IGJldHRlciBwZXJmXG4gICAgICAgICAgICBjb25zdCByYXdQcm9wcyA9IHRvUmF3KHByb3BzKTtcbiAgICAgICAgICAgIGNvbnN0IHsgbW9kZSB9ID0gcmF3UHJvcHM7XG4gICAgICAgICAgICAvLyBjaGVjayBtb2RlXG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXG4gICAgICAgICAgICAgICAgbW9kZSAmJlxuICAgICAgICAgICAgICAgIG1vZGUgIT09ICdpbi1vdXQnICYmXG4gICAgICAgICAgICAgICAgbW9kZSAhPT0gJ291dC1pbicgJiZcbiAgICAgICAgICAgICAgICBtb2RlICE9PSAnZGVmYXVsdCcpIHtcbiAgICAgICAgICAgICAgICB3YXJuKGBpbnZhbGlkIDx0cmFuc2l0aW9uPiBtb2RlOiAke21vZGV9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3RhdGUuaXNMZWF2aW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVtcHR5UGxhY2Vob2xkZXIoY2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gaW4gdGhlIGNhc2Ugb2YgPHRyYW5zaXRpb24+PGtlZXAtYWxpdmUvPjwvdHJhbnNpdGlvbj4sIHdlIG5lZWQgdG9cbiAgICAgICAgICAgIC8vIGNvbXBhcmUgdGhlIHR5cGUgb2YgdGhlIGtlcHQtYWxpdmUgY2hpbGRyZW4uXG4gICAgICAgICAgICBjb25zdCBpbm5lckNoaWxkID0gZ2V0S2VlcEFsaXZlQ2hpbGQoY2hpbGQpO1xuICAgICAgICAgICAgaWYgKCFpbm5lckNoaWxkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVtcHR5UGxhY2Vob2xkZXIoY2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZW50ZXJIb29rcyA9IHJlc29sdmVUcmFuc2l0aW9uSG9va3MoaW5uZXJDaGlsZCwgcmF3UHJvcHMsIHN0YXRlLCBpbnN0YW5jZSk7XG4gICAgICAgICAgICBzZXRUcmFuc2l0aW9uSG9va3MoaW5uZXJDaGlsZCwgZW50ZXJIb29rcyk7XG4gICAgICAgICAgICBjb25zdCBvbGRDaGlsZCA9IGluc3RhbmNlLnN1YlRyZWU7XG4gICAgICAgICAgICBjb25zdCBvbGRJbm5lckNoaWxkID0gb2xkQ2hpbGQgJiYgZ2V0S2VlcEFsaXZlQ2hpbGQob2xkQ2hpbGQpO1xuICAgICAgICAgICAgbGV0IHRyYW5zaXRpb25LZXlDaGFuZ2VkID0gZmFsc2U7XG4gICAgICAgICAgICBjb25zdCB7IGdldFRyYW5zaXRpb25LZXkgfSA9IGlubmVyQ2hpbGQudHlwZTtcbiAgICAgICAgICAgIGlmIChnZXRUcmFuc2l0aW9uS2V5KSB7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gZ2V0VHJhbnNpdGlvbktleSgpO1xuICAgICAgICAgICAgICAgIGlmIChwcmV2VHJhbnNpdGlvbktleSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHByZXZUcmFuc2l0aW9uS2V5ID0ga2V5O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChrZXkgIT09IHByZXZUcmFuc2l0aW9uS2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIHByZXZUcmFuc2l0aW9uS2V5ID0ga2V5O1xuICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uS2V5Q2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gaGFuZGxlIG1vZGVcbiAgICAgICAgICAgIGlmIChvbGRJbm5lckNoaWxkICYmXG4gICAgICAgICAgICAgICAgb2xkSW5uZXJDaGlsZC50eXBlICE9PSBDb21tZW50ICYmXG4gICAgICAgICAgICAgICAgKCFpc1NhbWVWTm9kZVR5cGUoaW5uZXJDaGlsZCwgb2xkSW5uZXJDaGlsZCkgfHwgdHJhbnNpdGlvbktleUNoYW5nZWQpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbGVhdmluZ0hvb2tzID0gcmVzb2x2ZVRyYW5zaXRpb25Ib29rcyhvbGRJbm5lckNoaWxkLCByYXdQcm9wcywgc3RhdGUsIGluc3RhbmNlKTtcbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgb2xkIHRyZWUncyBob29rcyBpbiBjYXNlIG9mIGR5bmFtaWMgdHJhbnNpdGlvblxuICAgICAgICAgICAgICAgIHNldFRyYW5zaXRpb25Ib29rcyhvbGRJbm5lckNoaWxkLCBsZWF2aW5nSG9va3MpO1xuICAgICAgICAgICAgICAgIC8vIHN3aXRjaGluZyBiZXR3ZWVuIGRpZmZlcmVudCB2aWV3c1xuICAgICAgICAgICAgICAgIGlmIChtb2RlID09PSAnb3V0LWluJykge1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5pc0xlYXZpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm4gcGxhY2Vob2xkZXIgbm9kZSBhbmQgcXVldWUgdXBkYXRlIHdoZW4gbGVhdmUgZmluaXNoZXNcbiAgICAgICAgICAgICAgICAgICAgbGVhdmluZ0hvb2tzLmFmdGVyTGVhdmUgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5pc0xlYXZpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICM2ODM1XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCBhbHNvIG5lZWRzIHRvIGJlIHVwZGF0ZWQgd2hlbiBhY3RpdmUgaXMgdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5zdGFuY2UudXBkYXRlLmFjdGl2ZSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS51cGRhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVtcHR5UGxhY2Vob2xkZXIoY2hpbGQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChtb2RlID09PSAnaW4tb3V0JyAmJiBpbm5lckNoaWxkLnR5cGUgIT09IENvbW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGVhdmluZ0hvb2tzLmRlbGF5TGVhdmUgPSAoZWwsIGVhcmx5UmVtb3ZlLCBkZWxheWVkTGVhdmUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxlYXZpbmdWTm9kZXNDYWNoZSA9IGdldExlYXZpbmdOb2Rlc0ZvclR5cGUoc3RhdGUsIG9sZElubmVyQ2hpbGQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGVhdmluZ1ZOb2Rlc0NhY2hlW1N0cmluZyhvbGRJbm5lckNoaWxkLmtleSldID0gb2xkSW5uZXJDaGlsZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVhcmx5IHJlbW92YWwgY2FsbGJhY2tcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsLl9sZWF2ZUNiID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhcmx5UmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwuX2xlYXZlQ2IgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGVudGVySG9va3MuZGVsYXllZExlYXZlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudGVySG9va3MuZGVsYXllZExlYXZlID0gZGVsYXllZExlYXZlO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjaGlsZDtcbiAgICAgICAgfTtcbiAgICB9XG59O1xuLy8gZXhwb3J0IHRoZSBwdWJsaWMgdHlwZSBmb3IgaC90c3ggaW5mZXJlbmNlXG4vLyBhbHNvIHRvIGF2b2lkIGlubGluZSBpbXBvcnQoKSBpbiBnZW5lcmF0ZWQgZC50cyBmaWxlc1xuY29uc3QgQmFzZVRyYW5zaXRpb24gPSBCYXNlVHJhbnNpdGlvbkltcGw7XG5mdW5jdGlvbiBnZXRMZWF2aW5nTm9kZXNGb3JUeXBlKHN0YXRlLCB2bm9kZSkge1xuICAgIGNvbnN0IHsgbGVhdmluZ1ZOb2RlcyB9ID0gc3RhdGU7XG4gICAgbGV0IGxlYXZpbmdWTm9kZXNDYWNoZSA9IGxlYXZpbmdWTm9kZXMuZ2V0KHZub2RlLnR5cGUpO1xuICAgIGlmICghbGVhdmluZ1ZOb2Rlc0NhY2hlKSB7XG4gICAgICAgIGxlYXZpbmdWTm9kZXNDYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIGxlYXZpbmdWTm9kZXMuc2V0KHZub2RlLnR5cGUsIGxlYXZpbmdWTm9kZXNDYWNoZSk7XG4gICAgfVxuICAgIHJldHVybiBsZWF2aW5nVk5vZGVzQ2FjaGU7XG59XG4vLyBUaGUgdHJhbnNpdGlvbiBob29rcyBhcmUgYXR0YWNoZWQgdG8gdGhlIHZub2RlIGFzIHZub2RlLnRyYW5zaXRpb25cbi8vIGFuZCB3aWxsIGJlIGNhbGxlZCBhdCBhcHByb3ByaWF0ZSB0aW1pbmcgaW4gdGhlIHJlbmRlcmVyLlxuZnVuY3Rpb24gcmVzb2x2ZVRyYW5zaXRpb25Ib29rcyh2bm9kZSwgcHJvcHMsIHN0YXRlLCBpbnN0YW5jZSkge1xuICAgIGNvbnN0IHsgYXBwZWFyLCBtb2RlLCBwZXJzaXN0ZWQgPSBmYWxzZSwgb25CZWZvcmVFbnRlciwgb25FbnRlciwgb25BZnRlckVudGVyLCBvbkVudGVyQ2FuY2VsbGVkLCBvbkJlZm9yZUxlYXZlLCBvbkxlYXZlLCBvbkFmdGVyTGVhdmUsIG9uTGVhdmVDYW5jZWxsZWQsIG9uQmVmb3JlQXBwZWFyLCBvbkFwcGVhciwgb25BZnRlckFwcGVhciwgb25BcHBlYXJDYW5jZWxsZWQgfSA9IHByb3BzO1xuICAgIGNvbnN0IGtleSA9IFN0cmluZyh2bm9kZS5rZXkpO1xuICAgIGNvbnN0IGxlYXZpbmdWTm9kZXNDYWNoZSA9IGdldExlYXZpbmdOb2Rlc0ZvclR5cGUoc3RhdGUsIHZub2RlKTtcbiAgICBjb25zdCBjYWxsSG9vayA9IChob29rLCBhcmdzKSA9PiB7XG4gICAgICAgIGhvb2sgJiZcbiAgICAgICAgICAgIGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nKGhvb2ssIGluc3RhbmNlLCA5IC8qIEVycm9yQ29kZXMuVFJBTlNJVElPTl9IT09LICovLCBhcmdzKTtcbiAgICB9O1xuICAgIGNvbnN0IGNhbGxBc3luY0hvb2sgPSAoaG9vaywgYXJncykgPT4ge1xuICAgICAgICBjb25zdCBkb25lID0gYXJnc1sxXTtcbiAgICAgICAgY2FsbEhvb2soaG9vaywgYXJncyk7XG4gICAgICAgIGlmIChpc0FycmF5KGhvb2spKSB7XG4gICAgICAgICAgICBpZiAoaG9vay5ldmVyeShob29rID0+IGhvb2subGVuZ3RoIDw9IDEpKVxuICAgICAgICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChob29rLmxlbmd0aCA8PSAxKSB7XG4gICAgICAgICAgICBkb25lKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGhvb2tzID0ge1xuICAgICAgICBtb2RlLFxuICAgICAgICBwZXJzaXN0ZWQsXG4gICAgICAgIGJlZm9yZUVudGVyKGVsKSB7XG4gICAgICAgICAgICBsZXQgaG9vayA9IG9uQmVmb3JlRW50ZXI7XG4gICAgICAgICAgICBpZiAoIXN0YXRlLmlzTW91bnRlZCkge1xuICAgICAgICAgICAgICAgIGlmIChhcHBlYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaG9vayA9IG9uQmVmb3JlQXBwZWFyIHx8IG9uQmVmb3JlRW50ZXI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZm9yIHNhbWUgZWxlbWVudCAodi1zaG93KVxuICAgICAgICAgICAgaWYgKGVsLl9sZWF2ZUNiKSB7XG4gICAgICAgICAgICAgICAgZWwuX2xlYXZlQ2IodHJ1ZSAvKiBjYW5jZWxsZWQgKi8pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZm9yIHRvZ2dsZWQgZWxlbWVudCB3aXRoIHNhbWUga2V5ICh2LWlmKVxuICAgICAgICAgICAgY29uc3QgbGVhdmluZ1ZOb2RlID0gbGVhdmluZ1ZOb2Rlc0NhY2hlW2tleV07XG4gICAgICAgICAgICBpZiAobGVhdmluZ1ZOb2RlICYmXG4gICAgICAgICAgICAgICAgaXNTYW1lVk5vZGVUeXBlKHZub2RlLCBsZWF2aW5nVk5vZGUpICYmXG4gICAgICAgICAgICAgICAgbGVhdmluZ1ZOb2RlLmVsLl9sZWF2ZUNiKSB7XG4gICAgICAgICAgICAgICAgLy8gZm9yY2UgZWFybHkgcmVtb3ZhbCAobm90IGNhbmNlbGxlZClcbiAgICAgICAgICAgICAgICBsZWF2aW5nVk5vZGUuZWwuX2xlYXZlQ2IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhbGxIb29rKGhvb2ssIFtlbF0pO1xuICAgICAgICB9LFxuICAgICAgICBlbnRlcihlbCkge1xuICAgICAgICAgICAgbGV0IGhvb2sgPSBvbkVudGVyO1xuICAgICAgICAgICAgbGV0IGFmdGVySG9vayA9IG9uQWZ0ZXJFbnRlcjtcbiAgICAgICAgICAgIGxldCBjYW5jZWxIb29rID0gb25FbnRlckNhbmNlbGxlZDtcbiAgICAgICAgICAgIGlmICghc3RhdGUuaXNNb3VudGVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFwcGVhcikge1xuICAgICAgICAgICAgICAgICAgICBob29rID0gb25BcHBlYXIgfHwgb25FbnRlcjtcbiAgICAgICAgICAgICAgICAgICAgYWZ0ZXJIb29rID0gb25BZnRlckFwcGVhciB8fCBvbkFmdGVyRW50ZXI7XG4gICAgICAgICAgICAgICAgICAgIGNhbmNlbEhvb2sgPSBvbkFwcGVhckNhbmNlbGxlZCB8fCBvbkVudGVyQ2FuY2VsbGVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBjYWxsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbnN0IGRvbmUgPSAoZWwuX2VudGVyQ2IgPSAoY2FuY2VsbGVkKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGNhbGxlZClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGNhbGxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKGNhbmNlbGxlZCkge1xuICAgICAgICAgICAgICAgICAgICBjYWxsSG9vayhjYW5jZWxIb29rLCBbZWxdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxIb29rKGFmdGVySG9vaywgW2VsXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChob29rcy5kZWxheWVkTGVhdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgaG9va3MuZGVsYXllZExlYXZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsLl9lbnRlckNiID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoaG9vaykge1xuICAgICAgICAgICAgICAgIGNhbGxBc3luY0hvb2soaG9vaywgW2VsLCBkb25lXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBkb25lKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGxlYXZlKGVsLCByZW1vdmUpIHtcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IFN0cmluZyh2bm9kZS5rZXkpO1xuICAgICAgICAgICAgaWYgKGVsLl9lbnRlckNiKSB7XG4gICAgICAgICAgICAgICAgZWwuX2VudGVyQ2IodHJ1ZSAvKiBjYW5jZWxsZWQgKi8pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0YXRlLmlzVW5tb3VudGluZykge1xuICAgICAgICAgICAgICAgIHJldHVybiByZW1vdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhbGxIb29rKG9uQmVmb3JlTGVhdmUsIFtlbF0pO1xuICAgICAgICAgICAgbGV0IGNhbGxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgY29uc3QgZG9uZSA9IChlbC5fbGVhdmVDYiA9IChjYW5jZWxsZWQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGVkKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZW1vdmUoKTtcbiAgICAgICAgICAgICAgICBpZiAoY2FuY2VsbGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxIb29rKG9uTGVhdmVDYW5jZWxsZWQsIFtlbF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbEhvb2sob25BZnRlckxlYXZlLCBbZWxdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWwuX2xlYXZlQ2IgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgaWYgKGxlYXZpbmdWTm9kZXNDYWNoZVtrZXldID09PSB2bm9kZSkge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgbGVhdmluZ1ZOb2Rlc0NhY2hlW2tleV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBsZWF2aW5nVk5vZGVzQ2FjaGVba2V5XSA9IHZub2RlO1xuICAgICAgICAgICAgaWYgKG9uTGVhdmUpIHtcbiAgICAgICAgICAgICAgICBjYWxsQXN5bmNIb29rKG9uTGVhdmUsIFtlbCwgZG9uZV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBjbG9uZSh2bm9kZSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmVUcmFuc2l0aW9uSG9va3Modm5vZGUsIHByb3BzLCBzdGF0ZSwgaW5zdGFuY2UpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gaG9va3M7XG59XG4vLyB0aGUgcGxhY2Vob2xkZXIgcmVhbGx5IG9ubHkgaGFuZGxlcyBvbmUgc3BlY2lhbCBjYXNlOiBLZWVwQWxpdmVcbi8vIGluIHRoZSBjYXNlIG9mIGEgS2VlcEFsaXZlIGluIGEgbGVhdmUgcGhhc2Ugd2UgbmVlZCB0byByZXR1cm4gYSBLZWVwQWxpdmVcbi8vIHBsYWNlaG9sZGVyIHdpdGggZW1wdHkgY29udGVudCB0byBhdm9pZCB0aGUgS2VlcEFsaXZlIGluc3RhbmNlIGZyb20gYmVpbmdcbi8vIHVubW91bnRlZC5cbmZ1bmN0aW9uIGVtcHR5UGxhY2Vob2xkZXIodm5vZGUpIHtcbiAgICBpZiAoaXNLZWVwQWxpdmUodm5vZGUpKSB7XG4gICAgICAgIHZub2RlID0gY2xvbmVWTm9kZSh2bm9kZSk7XG4gICAgICAgIHZub2RlLmNoaWxkcmVuID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHZub2RlO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldEtlZXBBbGl2ZUNoaWxkKHZub2RlKSB7XG4gICAgcmV0dXJuIGlzS2VlcEFsaXZlKHZub2RlKVxuICAgICAgICA/IHZub2RlLmNoaWxkcmVuXG4gICAgICAgICAgICA/IHZub2RlLmNoaWxkcmVuWzBdXG4gICAgICAgICAgICA6IHVuZGVmaW5lZFxuICAgICAgICA6IHZub2RlO1xufVxuZnVuY3Rpb24gc2V0VHJhbnNpdGlvbkhvb2tzKHZub2RlLCBob29rcykge1xuICAgIGlmICh2bm9kZS5zaGFwZUZsYWcgJiA2IC8qIFNoYXBlRmxhZ3MuQ09NUE9ORU5UICovICYmIHZub2RlLmNvbXBvbmVudCkge1xuICAgICAgICBzZXRUcmFuc2l0aW9uSG9va3Modm5vZGUuY29tcG9uZW50LnN1YlRyZWUsIGhvb2tzKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodm5vZGUuc2hhcGVGbGFnICYgMTI4IC8qIFNoYXBlRmxhZ3MuU1VTUEVOU0UgKi8pIHtcbiAgICAgICAgdm5vZGUuc3NDb250ZW50LnRyYW5zaXRpb24gPSBob29rcy5jbG9uZSh2bm9kZS5zc0NvbnRlbnQpO1xuICAgICAgICB2bm9kZS5zc0ZhbGxiYWNrLnRyYW5zaXRpb24gPSBob29rcy5jbG9uZSh2bm9kZS5zc0ZhbGxiYWNrKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHZub2RlLnRyYW5zaXRpb24gPSBob29rcztcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRUcmFuc2l0aW9uUmF3Q2hpbGRyZW4oY2hpbGRyZW4sIGtlZXBDb21tZW50ID0gZmFsc2UsIHBhcmVudEtleSkge1xuICAgIGxldCByZXQgPSBbXTtcbiAgICBsZXQga2V5ZWRGcmFnbWVudENvdW50ID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBjaGlsZCA9IGNoaWxkcmVuW2ldO1xuICAgICAgICAvLyAjNTM2MCBpbmhlcml0IHBhcmVudCBrZXkgaW4gY2FzZSBvZiA8dGVtcGxhdGUgdi1mb3I+XG4gICAgICAgIGNvbnN0IGtleSA9IHBhcmVudEtleSA9PSBudWxsXG4gICAgICAgICAgICA/IGNoaWxkLmtleVxuICAgICAgICAgICAgOiBTdHJpbmcocGFyZW50S2V5KSArIFN0cmluZyhjaGlsZC5rZXkgIT0gbnVsbCA/IGNoaWxkLmtleSA6IGkpO1xuICAgICAgICAvLyBoYW5kbGUgZnJhZ21lbnQgY2hpbGRyZW4gY2FzZSwgZS5nLiB2LWZvclxuICAgICAgICBpZiAoY2hpbGQudHlwZSA9PT0gRnJhZ21lbnQpIHtcbiAgICAgICAgICAgIGlmIChjaGlsZC5wYXRjaEZsYWcgJiAxMjggLyogUGF0Y2hGbGFncy5LRVlFRF9GUkFHTUVOVCAqLylcbiAgICAgICAgICAgICAgICBrZXllZEZyYWdtZW50Q291bnQrKztcbiAgICAgICAgICAgIHJldCA9IHJldC5jb25jYXQoZ2V0VHJhbnNpdGlvblJhd0NoaWxkcmVuKGNoaWxkLmNoaWxkcmVuLCBrZWVwQ29tbWVudCwga2V5KSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gY29tbWVudCBwbGFjZWhvbGRlcnMgc2hvdWxkIGJlIHNraXBwZWQsIGUuZy4gdi1pZlxuICAgICAgICBlbHNlIGlmIChrZWVwQ29tbWVudCB8fCBjaGlsZC50eXBlICE9PSBDb21tZW50KSB7XG4gICAgICAgICAgICByZXQucHVzaChrZXkgIT0gbnVsbCA/IGNsb25lVk5vZGUoY2hpbGQsIHsga2V5IH0pIDogY2hpbGQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vICMxMTI2IGlmIGEgdHJhbnNpdGlvbiBjaGlsZHJlbiBsaXN0IGNvbnRhaW5zIG11bHRpcGxlIHN1YiBmcmFnbWVudHMsIHRoZXNlXG4gICAgLy8gZnJhZ21lbnRzIHdpbGwgYmUgbWVyZ2VkIGludG8gYSBmbGF0IGNoaWxkcmVuIGFycmF5LiBTaW5jZSBlYWNoIHYtZm9yXG4gICAgLy8gZnJhZ21lbnQgbWF5IGNvbnRhaW4gZGlmZmVyZW50IHN0YXRpYyBiaW5kaW5ncyBpbnNpZGUsIHdlIG5lZWQgdG8gZGUtb3BcbiAgICAvLyB0aGVzZSBjaGlsZHJlbiB0byBmb3JjZSBmdWxsIGRpZmZzIHRvIGVuc3VyZSBjb3JyZWN0IGJlaGF2aW9yLlxuICAgIGlmIChrZXllZEZyYWdtZW50Q291bnQgPiAxKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmV0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICByZXRbaV0ucGF0Y2hGbGFnID0gLTIgLyogUGF0Y2hGbGFncy5CQUlMICovO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59XG5cbi8vIGltcGxlbWVudGF0aW9uLCBjbG9zZSB0byBuby1vcFxuZnVuY3Rpb24gZGVmaW5lQ29tcG9uZW50KG9wdGlvbnMpIHtcbiAgICByZXR1cm4gaXNGdW5jdGlvbihvcHRpb25zKSA/IHsgc2V0dXA6IG9wdGlvbnMsIG5hbWU6IG9wdGlvbnMubmFtZSB9IDogb3B0aW9ucztcbn1cblxuY29uc3QgaXNBc3luY1dyYXBwZXIgPSAoaSkgPT4gISFpLnR5cGUuX19hc3luY0xvYWRlcjtcbmZ1bmN0aW9uIGRlZmluZUFzeW5jQ29tcG9uZW50KHNvdXJjZSkge1xuICAgIGlmIChpc0Z1bmN0aW9uKHNvdXJjZSkpIHtcbiAgICAgICAgc291cmNlID0geyBsb2FkZXI6IHNvdXJjZSB9O1xuICAgIH1cbiAgICBjb25zdCB7IGxvYWRlciwgbG9hZGluZ0NvbXBvbmVudCwgZXJyb3JDb21wb25lbnQsIGRlbGF5ID0gMjAwLCB0aW1lb3V0LCAvLyB1bmRlZmluZWQgPSBuZXZlciB0aW1lcyBvdXRcbiAgICBzdXNwZW5zaWJsZSA9IHRydWUsIG9uRXJyb3I6IHVzZXJPbkVycm9yIH0gPSBzb3VyY2U7XG4gICAgbGV0IHBlbmRpbmdSZXF1ZXN0ID0gbnVsbDtcbiAgICBsZXQgcmVzb2x2ZWRDb21wO1xuICAgIGxldCByZXRyaWVzID0gMDtcbiAgICBjb25zdCByZXRyeSA9ICgpID0+IHtcbiAgICAgICAgcmV0cmllcysrO1xuICAgICAgICBwZW5kaW5nUmVxdWVzdCA9IG51bGw7XG4gICAgICAgIHJldHVybiBsb2FkKCk7XG4gICAgfTtcbiAgICBjb25zdCBsb2FkID0gKCkgPT4ge1xuICAgICAgICBsZXQgdGhpc1JlcXVlc3Q7XG4gICAgICAgIHJldHVybiAocGVuZGluZ1JlcXVlc3QgfHxcbiAgICAgICAgICAgICh0aGlzUmVxdWVzdCA9IHBlbmRpbmdSZXF1ZXN0ID1cbiAgICAgICAgICAgICAgICBsb2FkZXIoKVxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZXJyID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIgOiBuZXcgRXJyb3IoU3RyaW5nKGVycikpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodXNlck9uRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdXNlclJldHJ5ID0gKCkgPT4gcmVzb2x2ZShyZXRyeSgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1c2VyRmFpbCA9ICgpID0+IHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJPbkVycm9yKGVyciwgdXNlclJldHJ5LCB1c2VyRmFpbCwgcmV0cmllcyArIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAudGhlbigoY29tcCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpc1JlcXVlc3QgIT09IHBlbmRpbmdSZXF1ZXN0ICYmIHBlbmRpbmdSZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGVuZGluZ1JlcXVlc3Q7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhY29tcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2FybihgQXN5bmMgY29tcG9uZW50IGxvYWRlciByZXNvbHZlZCB0byB1bmRlZmluZWQuIGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBJZiB5b3UgYXJlIHVzaW5nIHJldHJ5KCksIG1ha2Ugc3VyZSB0byByZXR1cm4gaXRzIHJldHVybiB2YWx1ZS5gKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBpbnRlcm9wIG1vZHVsZSBkZWZhdWx0XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb21wICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAoY29tcC5fX2VzTW9kdWxlIHx8IGNvbXBbU3ltYm9sLnRvU3RyaW5nVGFnXSA9PT0gJ01vZHVsZScpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wID0gY29tcC5kZWZhdWx0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgY29tcCAmJiAhaXNPYmplY3QoY29tcCkgJiYgIWlzRnVuY3Rpb24oY29tcCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBhc3luYyBjb21wb25lbnQgbG9hZCByZXN1bHQ6ICR7Y29tcH1gKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlZENvbXAgPSBjb21wO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29tcDtcbiAgICAgICAgICAgICAgICB9KSkpO1xuICAgIH07XG4gICAgcmV0dXJuIGRlZmluZUNvbXBvbmVudCh7XG4gICAgICAgIG5hbWU6ICdBc3luY0NvbXBvbmVudFdyYXBwZXInLFxuICAgICAgICBfX2FzeW5jTG9hZGVyOiBsb2FkLFxuICAgICAgICBnZXQgX19hc3luY1Jlc29sdmVkKCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmVkQ29tcDtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0dXAoKSB7XG4gICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IGN1cnJlbnRJbnN0YW5jZTtcbiAgICAgICAgICAgIC8vIGFscmVhZHkgcmVzb2x2ZWRcbiAgICAgICAgICAgIGlmIChyZXNvbHZlZENvbXApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKCkgPT4gY3JlYXRlSW5uZXJDb21wKHJlc29sdmVkQ29tcCwgaW5zdGFuY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgb25FcnJvciA9IChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICBwZW5kaW5nUmVxdWVzdCA9IG51bGw7XG4gICAgICAgICAgICAgICAgaGFuZGxlRXJyb3IoZXJyLCBpbnN0YW5jZSwgMTMgLyogRXJyb3JDb2Rlcy5BU1lOQ19DT01QT05FTlRfTE9BREVSICovLCAhZXJyb3JDb21wb25lbnQgLyogZG8gbm90IHRocm93IGluIGRldiBpZiB1c2VyIHByb3ZpZGVkIGVycm9yIGNvbXBvbmVudCAqLyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8gc3VzcGVuc2UtY29udHJvbGxlZCBvciBTU1IuXG4gICAgICAgICAgICBpZiAoKHN1c3BlbnNpYmxlICYmIGluc3RhbmNlLnN1c3BlbnNlKSB8fFxuICAgICAgICAgICAgICAgIChpc0luU1NSQ29tcG9uZW50U2V0dXApKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxvYWQoKVxuICAgICAgICAgICAgICAgICAgICAudGhlbihjb21wID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgpID0+IGNyZWF0ZUlubmVyQ29tcChjb21wLCBpbnN0YW5jZSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG9uRXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgpID0+IGVycm9yQ29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgICAgICA/IGNyZWF0ZVZOb2RlKGVycm9yQ29tcG9uZW50LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVyclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGxvYWRlZCA9IHJlZihmYWxzZSk7XG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IHJlZigpO1xuICAgICAgICAgICAgY29uc3QgZGVsYXllZCA9IHJlZighIWRlbGF5KTtcbiAgICAgICAgICAgIGlmIChkZWxheSkge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBkZWxheWVkLnZhbHVlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSwgZGVsYXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRpbWVvdXQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWxvYWRlZC52YWx1ZSAmJiAhZXJyb3IudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVyciA9IG5ldyBFcnJvcihgQXN5bmMgY29tcG9uZW50IHRpbWVkIG91dCBhZnRlciAke3RpbWVvdXR9bXMuYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvci52YWx1ZSA9IGVycjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIHRpbWVvdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbG9hZCgpXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIGxvYWRlZC52YWx1ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKGluc3RhbmNlLnBhcmVudCAmJiBpc0tlZXBBbGl2ZShpbnN0YW5jZS5wYXJlbnQudm5vZGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHBhcmVudCBpcyBrZWVwLWFsaXZlLCBmb3JjZSB1cGRhdGUgc28gdGhlIGxvYWRlZCBjb21wb25lbnQnc1xuICAgICAgICAgICAgICAgICAgICAvLyBuYW1lIGlzIHRha2VuIGludG8gYWNjb3VudFxuICAgICAgICAgICAgICAgICAgICBxdWV1ZUpvYihpbnN0YW5jZS5wYXJlbnQudXBkYXRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgICAgICAgIG9uRXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICBlcnJvci52YWx1ZSA9IGVycjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobG9hZGVkLnZhbHVlICYmIHJlc29sdmVkQ29tcCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlSW5uZXJDb21wKHJlc29sdmVkQ29tcCwgaW5zdGFuY2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChlcnJvci52YWx1ZSAmJiBlcnJvckNvbXBvbmVudCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlVk5vZGUoZXJyb3JDb21wb25lbnQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvci52YWx1ZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobG9hZGluZ0NvbXBvbmVudCAmJiAhZGVsYXllZC52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlVk5vZGUobG9hZGluZ0NvbXBvbmVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuZnVuY3Rpb24gY3JlYXRlSW5uZXJDb21wKGNvbXAsIHBhcmVudCkge1xuICAgIGNvbnN0IHsgcmVmLCBwcm9wcywgY2hpbGRyZW4sIGNlIH0gPSBwYXJlbnQudm5vZGU7XG4gICAgY29uc3Qgdm5vZGUgPSBjcmVhdGVWTm9kZShjb21wLCBwcm9wcywgY2hpbGRyZW4pO1xuICAgIC8vIGVuc3VyZSBpbm5lciBjb21wb25lbnQgaW5oZXJpdHMgdGhlIGFzeW5jIHdyYXBwZXIncyByZWYgb3duZXJcbiAgICB2bm9kZS5yZWYgPSByZWY7XG4gICAgLy8gcGFzcyB0aGUgY3VzdG9tIGVsZW1lbnQgY2FsbGJhY2sgb24gdG8gdGhlIGlubmVyIGNvbXBcbiAgICAvLyBhbmQgcmVtb3ZlIGl0IGZyb20gdGhlIGFzeW5jIHdyYXBwZXJcbiAgICB2bm9kZS5jZSA9IGNlO1xuICAgIGRlbGV0ZSBwYXJlbnQudm5vZGUuY2U7XG4gICAgcmV0dXJuIHZub2RlO1xufVxuXG5jb25zdCBpc0tlZXBBbGl2ZSA9ICh2bm9kZSkgPT4gdm5vZGUudHlwZS5fX2lzS2VlcEFsaXZlO1xuY29uc3QgS2VlcEFsaXZlSW1wbCA9IHtcbiAgICBuYW1lOiBgS2VlcEFsaXZlYCxcbiAgICAvLyBNYXJrZXIgZm9yIHNwZWNpYWwgaGFuZGxpbmcgaW5zaWRlIHRoZSByZW5kZXJlci4gV2UgYXJlIG5vdCB1c2luZyBhID09PVxuICAgIC8vIGNoZWNrIGRpcmVjdGx5IG9uIEtlZXBBbGl2ZSBpbiB0aGUgcmVuZGVyZXIsIGJlY2F1c2UgaW1wb3J0aW5nIGl0IGRpcmVjdGx5XG4gICAgLy8gd291bGQgcHJldmVudCBpdCBmcm9tIGJlaW5nIHRyZWUtc2hha2VuLlxuICAgIF9faXNLZWVwQWxpdmU6IHRydWUsXG4gICAgcHJvcHM6IHtcbiAgICAgICAgaW5jbHVkZTogW1N0cmluZywgUmVnRXhwLCBBcnJheV0sXG4gICAgICAgIGV4Y2x1ZGU6IFtTdHJpbmcsIFJlZ0V4cCwgQXJyYXldLFxuICAgICAgICBtYXg6IFtTdHJpbmcsIE51bWJlcl1cbiAgICB9LFxuICAgIHNldHVwKHByb3BzLCB7IHNsb3RzIH0pIHtcbiAgICAgICAgY29uc3QgaW5zdGFuY2UgPSBnZXRDdXJyZW50SW5zdGFuY2UoKTtcbiAgICAgICAgLy8gS2VlcEFsaXZlIGNvbW11bmljYXRlcyB3aXRoIHRoZSBpbnN0YW50aWF0ZWQgcmVuZGVyZXIgdmlhIHRoZVxuICAgICAgICAvLyBjdHggd2hlcmUgdGhlIHJlbmRlcmVyIHBhc3NlcyBpbiBpdHMgaW50ZXJuYWxzLFxuICAgICAgICAvLyBhbmQgdGhlIEtlZXBBbGl2ZSBpbnN0YW5jZSBleHBvc2VzIGFjdGl2YXRlL2RlYWN0aXZhdGUgaW1wbGVtZW50YXRpb25zLlxuICAgICAgICAvLyBUaGUgd2hvbGUgcG9pbnQgb2YgdGhpcyBpcyB0byBhdm9pZCBpbXBvcnRpbmcgS2VlcEFsaXZlIGRpcmVjdGx5IGluIHRoZVxuICAgICAgICAvLyByZW5kZXJlciB0byBmYWNpbGl0YXRlIHRyZWUtc2hha2luZy5cbiAgICAgICAgY29uc3Qgc2hhcmVkQ29udGV4dCA9IGluc3RhbmNlLmN0eDtcbiAgICAgICAgLy8gaWYgdGhlIGludGVybmFsIHJlbmRlcmVyIGlzIG5vdCByZWdpc3RlcmVkLCBpdCBpbmRpY2F0ZXMgdGhhdCB0aGlzIGlzIHNlcnZlci1zaWRlIHJlbmRlcmluZyxcbiAgICAgICAgLy8gZm9yIEtlZXBBbGl2ZSwgd2UganVzdCBuZWVkIHRvIHJlbmRlciBpdHMgY2hpbGRyZW5cbiAgICAgICAgaWYgKCFzaGFyZWRDb250ZXh0LnJlbmRlcmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkcmVuID0gc2xvdHMuZGVmYXVsdCAmJiBzbG90cy5kZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoaWxkcmVuICYmIGNoaWxkcmVuLmxlbmd0aCA9PT0gMSA/IGNoaWxkcmVuWzBdIDogY2hpbGRyZW47XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNhY2hlID0gbmV3IE1hcCgpO1xuICAgICAgICBjb25zdCBrZXlzID0gbmV3IFNldCgpO1xuICAgICAgICBsZXQgY3VycmVudCA9IG51bGw7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICAgICAgICBpbnN0YW5jZS5fX3ZfY2FjaGUgPSBjYWNoZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJlbnRTdXNwZW5zZSA9IGluc3RhbmNlLnN1c3BlbnNlO1xuICAgICAgICBjb25zdCB7IHJlbmRlcmVyOiB7IHA6IHBhdGNoLCBtOiBtb3ZlLCB1bTogX3VubW91bnQsIG86IHsgY3JlYXRlRWxlbWVudCB9IH0gfSA9IHNoYXJlZENvbnRleHQ7XG4gICAgICAgIGNvbnN0IHN0b3JhZ2VDb250YWluZXIgPSBjcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgc2hhcmVkQ29udGV4dC5hY3RpdmF0ZSA9ICh2bm9kZSwgY29udGFpbmVyLCBhbmNob3IsIGlzU1ZHLCBvcHRpbWl6ZWQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGluc3RhbmNlID0gdm5vZGUuY29tcG9uZW50O1xuICAgICAgICAgICAgbW92ZSh2bm9kZSwgY29udGFpbmVyLCBhbmNob3IsIDAgLyogTW92ZVR5cGUuRU5URVIgKi8sIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgICAgICAgIC8vIGluIGNhc2UgcHJvcHMgaGF2ZSBjaGFuZ2VkXG4gICAgICAgICAgICBwYXRjaChpbnN0YW5jZS52bm9kZSwgdm5vZGUsIGNvbnRhaW5lciwgYW5jaG9yLCBpbnN0YW5jZSwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCB2bm9kZS5zbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgICAgICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGluc3RhbmNlLmlzRGVhY3RpdmF0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAoaW5zdGFuY2UuYSkge1xuICAgICAgICAgICAgICAgICAgICBpbnZva2VBcnJheUZucyhpbnN0YW5jZS5hKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgdm5vZGVIb29rID0gdm5vZGUucHJvcHMgJiYgdm5vZGUucHJvcHMub25Wbm9kZU1vdW50ZWQ7XG4gICAgICAgICAgICAgICAgaWYgKHZub2RlSG9vaykge1xuICAgICAgICAgICAgICAgICAgICBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBpbnN0YW5jZS5wYXJlbnQsIHZub2RlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBjb21wb25lbnRzIHRyZWVcbiAgICAgICAgICAgICAgICBkZXZ0b29sc0NvbXBvbmVudEFkZGVkKGluc3RhbmNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgc2hhcmVkQ29udGV4dC5kZWFjdGl2YXRlID0gKHZub2RlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IHZub2RlLmNvbXBvbmVudDtcbiAgICAgICAgICAgIG1vdmUodm5vZGUsIHN0b3JhZ2VDb250YWluZXIsIG51bGwsIDEgLyogTW92ZVR5cGUuTEVBVkUgKi8sIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgICAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGluc3RhbmNlLmRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGludm9rZUFycmF5Rm5zKGluc3RhbmNlLmRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgdm5vZGVIb29rID0gdm5vZGUucHJvcHMgJiYgdm5vZGUucHJvcHMub25Wbm9kZVVubW91bnRlZDtcbiAgICAgICAgICAgICAgICBpZiAodm5vZGVIb29rKSB7XG4gICAgICAgICAgICAgICAgICAgIGludm9rZVZOb2RlSG9vayh2bm9kZUhvb2ssIGluc3RhbmNlLnBhcmVudCwgdm5vZGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5pc0RlYWN0aXZhdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH0sIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIGNvbXBvbmVudHMgdHJlZVxuICAgICAgICAgICAgICAgIGRldnRvb2xzQ29tcG9uZW50QWRkZWQoaW5zdGFuY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBmdW5jdGlvbiB1bm1vdW50KHZub2RlKSB7XG4gICAgICAgICAgICAvLyByZXNldCB0aGUgc2hhcGVGbGFnIHNvIGl0IGNhbiBiZSBwcm9wZXJseSB1bm1vdW50ZWRcbiAgICAgICAgICAgIHJlc2V0U2hhcGVGbGFnKHZub2RlKTtcbiAgICAgICAgICAgIF91bm1vdW50KHZub2RlLCBpbnN0YW5jZSwgcGFyZW50U3VzcGVuc2UsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIHBydW5lQ2FjaGUoZmlsdGVyKSB7XG4gICAgICAgICAgICBjYWNoZS5mb3JFYWNoKCh2bm9kZSwga2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IGdldENvbXBvbmVudE5hbWUodm5vZGUudHlwZSk7XG4gICAgICAgICAgICAgICAgaWYgKG5hbWUgJiYgKCFmaWx0ZXIgfHwgIWZpbHRlcihuYW1lKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJ1bmVDYWNoZUVudHJ5KGtleSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gcHJ1bmVDYWNoZUVudHJ5KGtleSkge1xuICAgICAgICAgICAgY29uc3QgY2FjaGVkID0gY2FjaGUuZ2V0KGtleSk7XG4gICAgICAgICAgICBpZiAoIWN1cnJlbnQgfHwgY2FjaGVkLnR5cGUgIT09IGN1cnJlbnQudHlwZSkge1xuICAgICAgICAgICAgICAgIHVubW91bnQoY2FjaGVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICAvLyBjdXJyZW50IGFjdGl2ZSBpbnN0YW5jZSBzaG91bGQgbm8gbG9uZ2VyIGJlIGtlcHQtYWxpdmUuXG4gICAgICAgICAgICAgICAgLy8gd2UgY2FuJ3QgdW5tb3VudCBpdCBub3cgYnV0IGl0IG1pZ2h0IGJlIGxhdGVyLCBzbyByZXNldCBpdHMgZmxhZyBub3cuXG4gICAgICAgICAgICAgICAgcmVzZXRTaGFwZUZsYWcoY3VycmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYWNoZS5kZWxldGUoa2V5KTtcbiAgICAgICAgICAgIGtleXMuZGVsZXRlKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcHJ1bmUgY2FjaGUgb24gaW5jbHVkZS9leGNsdWRlIHByb3AgY2hhbmdlXG4gICAgICAgIHdhdGNoKCgpID0+IFtwcm9wcy5pbmNsdWRlLCBwcm9wcy5leGNsdWRlXSwgKFtpbmNsdWRlLCBleGNsdWRlXSkgPT4ge1xuICAgICAgICAgICAgaW5jbHVkZSAmJiBwcnVuZUNhY2hlKG5hbWUgPT4gbWF0Y2hlcyhpbmNsdWRlLCBuYW1lKSk7XG4gICAgICAgICAgICBleGNsdWRlICYmIHBydW5lQ2FjaGUobmFtZSA9PiAhbWF0Y2hlcyhleGNsdWRlLCBuYW1lKSk7XG4gICAgICAgIH0sIFxuICAgICAgICAvLyBwcnVuZSBwb3N0LXJlbmRlciBhZnRlciBgY3VycmVudGAgaGFzIGJlZW4gdXBkYXRlZFxuICAgICAgICB7IGZsdXNoOiAncG9zdCcsIGRlZXA6IHRydWUgfSk7XG4gICAgICAgIC8vIGNhY2hlIHN1YiB0cmVlIGFmdGVyIHJlbmRlclxuICAgICAgICBsZXQgcGVuZGluZ0NhY2hlS2V5ID0gbnVsbDtcbiAgICAgICAgY29uc3QgY2FjaGVTdWJ0cmVlID0gKCkgPT4ge1xuICAgICAgICAgICAgLy8gZml4ICMxNjIxLCB0aGUgcGVuZGluZ0NhY2hlS2V5IGNvdWxkIGJlIDBcbiAgICAgICAgICAgIGlmIChwZW5kaW5nQ2FjaGVLZXkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNhY2hlLnNldChwZW5kaW5nQ2FjaGVLZXksIGdldElubmVyQ2hpbGQoaW5zdGFuY2Uuc3ViVHJlZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBvbk1vdW50ZWQoY2FjaGVTdWJ0cmVlKTtcbiAgICAgICAgb25VcGRhdGVkKGNhY2hlU3VidHJlZSk7XG4gICAgICAgIG9uQmVmb3JlVW5tb3VudCgoKSA9PiB7XG4gICAgICAgICAgICBjYWNoZS5mb3JFYWNoKGNhY2hlZCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBzdWJUcmVlLCBzdXNwZW5zZSB9ID0gaW5zdGFuY2U7XG4gICAgICAgICAgICAgICAgY29uc3Qgdm5vZGUgPSBnZXRJbm5lckNoaWxkKHN1YlRyZWUpO1xuICAgICAgICAgICAgICAgIGlmIChjYWNoZWQudHlwZSA9PT0gdm5vZGUudHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBjdXJyZW50IGluc3RhbmNlIHdpbGwgYmUgdW5tb3VudGVkIGFzIHBhcnQgb2Yga2VlcC1hbGl2ZSdzIHVubW91bnRcbiAgICAgICAgICAgICAgICAgICAgcmVzZXRTaGFwZUZsYWcodm5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAvLyBidXQgaW52b2tlIGl0cyBkZWFjdGl2YXRlZCBob29rIGhlcmVcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGEgPSB2bm9kZS5jb21wb25lbnQuZGE7XG4gICAgICAgICAgICAgICAgICAgIGRhICYmIHF1ZXVlUG9zdFJlbmRlckVmZmVjdChkYSwgc3VzcGVuc2UpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHVubW91bnQoY2FjaGVkKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIHBlbmRpbmdDYWNoZUtleSA9IG51bGw7XG4gICAgICAgICAgICBpZiAoIXNsb3RzLmRlZmF1bHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGNoaWxkcmVuID0gc2xvdHMuZGVmYXVsdCgpO1xuICAgICAgICAgICAgY29uc3QgcmF3Vk5vZGUgPSBjaGlsZHJlblswXTtcbiAgICAgICAgICAgIGlmIChjaGlsZHJlbi5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICB3YXJuKGBLZWVwQWxpdmUgc2hvdWxkIGNvbnRhaW4gZXhhY3RseSBvbmUgY29tcG9uZW50IGNoaWxkLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjdXJyZW50ID0gbnVsbDtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2hpbGRyZW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghaXNWTm9kZShyYXdWTm9kZSkgfHxcbiAgICAgICAgICAgICAgICAoIShyYXdWTm9kZS5zaGFwZUZsYWcgJiA0IC8qIFNoYXBlRmxhZ3MuU1RBVEVGVUxfQ09NUE9ORU5UICovKSAmJlxuICAgICAgICAgICAgICAgICAgICAhKHJhd1ZOb2RlLnNoYXBlRmxhZyAmIDEyOCAvKiBTaGFwZUZsYWdzLlNVU1BFTlNFICovKSkpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50ID0gbnVsbDtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmF3Vk5vZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgdm5vZGUgPSBnZXRJbm5lckNoaWxkKHJhd1ZOb2RlKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbXAgPSB2bm9kZS50eXBlO1xuICAgICAgICAgICAgLy8gZm9yIGFzeW5jIGNvbXBvbmVudHMsIG5hbWUgY2hlY2sgc2hvdWxkIGJlIGJhc2VkIGluIGl0cyBsb2FkZWRcbiAgICAgICAgICAgIC8vIGlubmVyIGNvbXBvbmVudCBpZiBhdmFpbGFibGVcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBnZXRDb21wb25lbnROYW1lKGlzQXN5bmNXcmFwcGVyKHZub2RlKVxuICAgICAgICAgICAgICAgID8gdm5vZGUudHlwZS5fX2FzeW5jUmVzb2x2ZWQgfHwge31cbiAgICAgICAgICAgICAgICA6IGNvbXApO1xuICAgICAgICAgICAgY29uc3QgeyBpbmNsdWRlLCBleGNsdWRlLCBtYXggfSA9IHByb3BzO1xuICAgICAgICAgICAgaWYgKChpbmNsdWRlICYmICghbmFtZSB8fCAhbWF0Y2hlcyhpbmNsdWRlLCBuYW1lKSkpIHx8XG4gICAgICAgICAgICAgICAgKGV4Y2x1ZGUgJiYgbmFtZSAmJiBtYXRjaGVzKGV4Y2x1ZGUsIG5hbWUpKSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSB2bm9kZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmF3Vk5vZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBrZXkgPSB2bm9kZS5rZXkgPT0gbnVsbCA/IGNvbXAgOiB2bm9kZS5rZXk7XG4gICAgICAgICAgICBjb25zdCBjYWNoZWRWTm9kZSA9IGNhY2hlLmdldChrZXkpO1xuICAgICAgICAgICAgLy8gY2xvbmUgdm5vZGUgaWYgaXQncyByZXVzZWQgYmVjYXVzZSB3ZSBhcmUgZ29pbmcgdG8gbXV0YXRlIGl0XG4gICAgICAgICAgICBpZiAodm5vZGUuZWwpIHtcbiAgICAgICAgICAgICAgICB2bm9kZSA9IGNsb25lVk5vZGUodm5vZGUpO1xuICAgICAgICAgICAgICAgIGlmIChyYXdWTm9kZS5zaGFwZUZsYWcgJiAxMjggLyogU2hhcGVGbGFncy5TVVNQRU5TRSAqLykge1xuICAgICAgICAgICAgICAgICAgICByYXdWTm9kZS5zc0NvbnRlbnQgPSB2bm9kZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyAjMTUxMyBpdCdzIHBvc3NpYmxlIGZvciB0aGUgcmV0dXJuZWQgdm5vZGUgdG8gYmUgY2xvbmVkIGR1ZSB0byBhdHRyXG4gICAgICAgICAgICAvLyBmYWxsdGhyb3VnaCBvciBzY29wZUlkLCBzbyB0aGUgdm5vZGUgaGVyZSBtYXkgbm90IGJlIHRoZSBmaW5hbCB2bm9kZVxuICAgICAgICAgICAgLy8gdGhhdCBpcyBtb3VudGVkLiBJbnN0ZWFkIG9mIGNhY2hpbmcgaXQgZGlyZWN0bHksIHdlIHN0b3JlIHRoZSBwZW5kaW5nXG4gICAgICAgICAgICAvLyBrZXkgYW5kIGNhY2hlIGBpbnN0YW5jZS5zdWJUcmVlYCAodGhlIG5vcm1hbGl6ZWQgdm5vZGUpIGluXG4gICAgICAgICAgICAvLyBiZWZvcmVNb3VudC9iZWZvcmVVcGRhdGUgaG9va3MuXG4gICAgICAgICAgICBwZW5kaW5nQ2FjaGVLZXkgPSBrZXk7XG4gICAgICAgICAgICBpZiAoY2FjaGVkVk5vZGUpIHtcbiAgICAgICAgICAgICAgICAvLyBjb3B5IG92ZXIgbW91bnRlZCBzdGF0ZVxuICAgICAgICAgICAgICAgIHZub2RlLmVsID0gY2FjaGVkVk5vZGUuZWw7XG4gICAgICAgICAgICAgICAgdm5vZGUuY29tcG9uZW50ID0gY2FjaGVkVk5vZGUuY29tcG9uZW50O1xuICAgICAgICAgICAgICAgIGlmICh2bm9kZS50cmFuc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHJlY3Vyc2l2ZWx5IHVwZGF0ZSB0cmFuc2l0aW9uIGhvb2tzIG9uIHN1YlRyZWVcbiAgICAgICAgICAgICAgICAgICAgc2V0VHJhbnNpdGlvbkhvb2tzKHZub2RlLCB2bm9kZS50cmFuc2l0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gYXZvaWQgdm5vZGUgYmVpbmcgbW91bnRlZCBhcyBmcmVzaFxuICAgICAgICAgICAgICAgIHZub2RlLnNoYXBlRmxhZyB8PSA1MTIgLyogU2hhcGVGbGFncy5DT01QT05FTlRfS0VQVF9BTElWRSAqLztcbiAgICAgICAgICAgICAgICAvLyBtYWtlIHRoaXMga2V5IHRoZSBmcmVzaGVzdFxuICAgICAgICAgICAgICAgIGtleXMuZGVsZXRlKGtleSk7XG4gICAgICAgICAgICAgICAga2V5cy5hZGQoa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGtleXMuYWRkKGtleSk7XG4gICAgICAgICAgICAgICAgLy8gcHJ1bmUgb2xkZXN0IGVudHJ5XG4gICAgICAgICAgICAgICAgaWYgKG1heCAmJiBrZXlzLnNpemUgPiBwYXJzZUludChtYXgsIDEwKSkge1xuICAgICAgICAgICAgICAgICAgICBwcnVuZUNhY2hlRW50cnkoa2V5cy52YWx1ZXMoKS5uZXh0KCkudmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGF2b2lkIHZub2RlIGJlaW5nIHVubW91bnRlZFxuICAgICAgICAgICAgdm5vZGUuc2hhcGVGbGFnIHw9IDI1NiAvKiBTaGFwZUZsYWdzLkNPTVBPTkVOVF9TSE9VTERfS0VFUF9BTElWRSAqLztcbiAgICAgICAgICAgIGN1cnJlbnQgPSB2bm9kZTtcbiAgICAgICAgICAgIHJldHVybiBpc1N1c3BlbnNlKHJhd1ZOb2RlLnR5cGUpID8gcmF3Vk5vZGUgOiB2bm9kZTtcbiAgICAgICAgfTtcbiAgICB9XG59O1xuLy8gZXhwb3J0IHRoZSBwdWJsaWMgdHlwZSBmb3IgaC90c3ggaW5mZXJlbmNlXG4vLyBhbHNvIHRvIGF2b2lkIGlubGluZSBpbXBvcnQoKSBpbiBnZW5lcmF0ZWQgZC50cyBmaWxlc1xuY29uc3QgS2VlcEFsaXZlID0gS2VlcEFsaXZlSW1wbDtcbmZ1bmN0aW9uIG1hdGNoZXMocGF0dGVybiwgbmFtZSkge1xuICAgIGlmIChpc0FycmF5KHBhdHRlcm4pKSB7XG4gICAgICAgIHJldHVybiBwYXR0ZXJuLnNvbWUoKHApID0+IG1hdGNoZXMocCwgbmFtZSkpO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc1N0cmluZyhwYXR0ZXJuKSkge1xuICAgICAgICByZXR1cm4gcGF0dGVybi5zcGxpdCgnLCcpLmluY2x1ZGVzKG5hbWUpO1xuICAgIH1cbiAgICBlbHNlIGlmIChwYXR0ZXJuLnRlc3QpIHtcbiAgICAgICAgcmV0dXJuIHBhdHRlcm4udGVzdChuYW1lKTtcbiAgICB9XG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBvbkFjdGl2YXRlZChob29rLCB0YXJnZXQpIHtcbiAgICByZWdpc3RlcktlZXBBbGl2ZUhvb2soaG9vaywgXCJhXCIgLyogTGlmZWN5Y2xlSG9va3MuQUNUSVZBVEVEICovLCB0YXJnZXQpO1xufVxuZnVuY3Rpb24gb25EZWFjdGl2YXRlZChob29rLCB0YXJnZXQpIHtcbiAgICByZWdpc3RlcktlZXBBbGl2ZUhvb2soaG9vaywgXCJkYVwiIC8qIExpZmVjeWNsZUhvb2tzLkRFQUNUSVZBVEVEICovLCB0YXJnZXQpO1xufVxuZnVuY3Rpb24gcmVnaXN0ZXJLZWVwQWxpdmVIb29rKGhvb2ssIHR5cGUsIHRhcmdldCA9IGN1cnJlbnRJbnN0YW5jZSkge1xuICAgIC8vIGNhY2hlIHRoZSBkZWFjdGl2YXRlIGJyYW5jaCBjaGVjayB3cmFwcGVyIGZvciBpbmplY3RlZCBob29rcyBzbyB0aGUgc2FtZVxuICAgIC8vIGhvb2sgY2FuIGJlIHByb3Blcmx5IGRlZHVwZWQgYnkgdGhlIHNjaGVkdWxlci4gXCJfX3dkY1wiIHN0YW5kcyBmb3IgXCJ3aXRoXG4gICAgLy8gZGVhY3RpdmF0aW9uIGNoZWNrXCIuXG4gICAgY29uc3Qgd3JhcHBlZEhvb2sgPSBob29rLl9fd2RjIHx8XG4gICAgICAgIChob29rLl9fd2RjID0gKCkgPT4ge1xuICAgICAgICAgICAgLy8gb25seSBmaXJlIHRoZSBob29rIGlmIHRoZSB0YXJnZXQgaW5zdGFuY2UgaXMgTk9UIGluIGEgZGVhY3RpdmF0ZWQgYnJhbmNoLlxuICAgICAgICAgICAgbGV0IGN1cnJlbnQgPSB0YXJnZXQ7XG4gICAgICAgICAgICB3aGlsZSAoY3VycmVudCkge1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50LmlzRGVhY3RpdmF0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5wYXJlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaG9vaygpO1xuICAgICAgICB9KTtcbiAgICBpbmplY3RIb29rKHR5cGUsIHdyYXBwZWRIb29rLCB0YXJnZXQpO1xuICAgIC8vIEluIGFkZGl0aW9uIHRvIHJlZ2lzdGVyaW5nIGl0IG9uIHRoZSB0YXJnZXQgaW5zdGFuY2UsIHdlIHdhbGsgdXAgdGhlIHBhcmVudFxuICAgIC8vIGNoYWluIGFuZCByZWdpc3RlciBpdCBvbiBhbGwgYW5jZXN0b3IgaW5zdGFuY2VzIHRoYXQgYXJlIGtlZXAtYWxpdmUgcm9vdHMuXG4gICAgLy8gVGhpcyBhdm9pZHMgdGhlIG5lZWQgdG8gd2FsayB0aGUgZW50aXJlIGNvbXBvbmVudCB0cmVlIHdoZW4gaW52b2tpbmcgdGhlc2VcbiAgICAvLyBob29rcywgYW5kIG1vcmUgaW1wb3J0YW50bHksIGF2b2lkcyB0aGUgbmVlZCB0byB0cmFjayBjaGlsZCBjb21wb25lbnRzIGluXG4gICAgLy8gYXJyYXlzLlxuICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgbGV0IGN1cnJlbnQgPSB0YXJnZXQucGFyZW50O1xuICAgICAgICB3aGlsZSAoY3VycmVudCAmJiBjdXJyZW50LnBhcmVudCkge1xuICAgICAgICAgICAgaWYgKGlzS2VlcEFsaXZlKGN1cnJlbnQucGFyZW50LnZub2RlKSkge1xuICAgICAgICAgICAgICAgIGluamVjdFRvS2VlcEFsaXZlUm9vdCh3cmFwcGVkSG9vaywgdHlwZSwgdGFyZ2V0LCBjdXJyZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LnBhcmVudDtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGluamVjdFRvS2VlcEFsaXZlUm9vdChob29rLCB0eXBlLCB0YXJnZXQsIGtlZXBBbGl2ZVJvb3QpIHtcbiAgICAvLyBpbmplY3RIb29rIHdyYXBzIHRoZSBvcmlnaW5hbCBmb3IgZXJyb3IgaGFuZGxpbmcsIHNvIG1ha2Ugc3VyZSB0byByZW1vdmVcbiAgICAvLyB0aGUgd3JhcHBlZCB2ZXJzaW9uLlxuICAgIGNvbnN0IGluamVjdGVkID0gaW5qZWN0SG9vayh0eXBlLCBob29rLCBrZWVwQWxpdmVSb290LCB0cnVlIC8qIHByZXBlbmQgKi8pO1xuICAgIG9uVW5tb3VudGVkKCgpID0+IHtcbiAgICAgICAgcmVtb3ZlKGtlZXBBbGl2ZVJvb3RbdHlwZV0sIGluamVjdGVkKTtcbiAgICB9LCB0YXJnZXQpO1xufVxuZnVuY3Rpb24gcmVzZXRTaGFwZUZsYWcodm5vZGUpIHtcbiAgICAvLyBiaXR3aXNlIG9wZXJhdGlvbnMgdG8gcmVtb3ZlIGtlZXAgYWxpdmUgZmxhZ3NcbiAgICB2bm9kZS5zaGFwZUZsYWcgJj0gfjI1NiAvKiBTaGFwZUZsYWdzLkNPTVBPTkVOVF9TSE9VTERfS0VFUF9BTElWRSAqLztcbiAgICB2bm9kZS5zaGFwZUZsYWcgJj0gfjUxMiAvKiBTaGFwZUZsYWdzLkNPTVBPTkVOVF9LRVBUX0FMSVZFICovO1xufVxuZnVuY3Rpb24gZ2V0SW5uZXJDaGlsZCh2bm9kZSkge1xuICAgIHJldHVybiB2bm9kZS5zaGFwZUZsYWcgJiAxMjggLyogU2hhcGVGbGFncy5TVVNQRU5TRSAqLyA/IHZub2RlLnNzQ29udGVudCA6IHZub2RlO1xufVxuXG5mdW5jdGlvbiBpbmplY3RIb29rKHR5cGUsIGhvb2ssIHRhcmdldCA9IGN1cnJlbnRJbnN0YW5jZSwgcHJlcGVuZCA9IGZhbHNlKSB7XG4gICAgaWYgKHRhcmdldCkge1xuICAgICAgICBjb25zdCBob29rcyA9IHRhcmdldFt0eXBlXSB8fCAodGFyZ2V0W3R5cGVdID0gW10pO1xuICAgICAgICAvLyBjYWNoZSB0aGUgZXJyb3IgaGFuZGxpbmcgd3JhcHBlciBmb3IgaW5qZWN0ZWQgaG9va3Mgc28gdGhlIHNhbWUgaG9va1xuICAgICAgICAvLyBjYW4gYmUgcHJvcGVybHkgZGVkdXBlZCBieSB0aGUgc2NoZWR1bGVyLiBcIl9fd2VoXCIgc3RhbmRzIGZvciBcIndpdGggZXJyb3JcbiAgICAgICAgLy8gaGFuZGxpbmdcIi5cbiAgICAgICAgY29uc3Qgd3JhcHBlZEhvb2sgPSBob29rLl9fd2VoIHx8XG4gICAgICAgICAgICAoaG9vay5fX3dlaCA9ICguLi5hcmdzKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldC5pc1VubW91bnRlZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGRpc2FibGUgdHJhY2tpbmcgaW5zaWRlIGFsbCBsaWZlY3ljbGUgaG9va3NcbiAgICAgICAgICAgICAgICAvLyBzaW5jZSB0aGV5IGNhbiBwb3RlbnRpYWxseSBiZSBjYWxsZWQgaW5zaWRlIGVmZmVjdHMuXG4gICAgICAgICAgICAgICAgcGF1c2VUcmFja2luZygpO1xuICAgICAgICAgICAgICAgIC8vIFNldCBjdXJyZW50SW5zdGFuY2UgZHVyaW5nIGhvb2sgaW52b2NhdGlvbi5cbiAgICAgICAgICAgICAgICAvLyBUaGlzIGFzc3VtZXMgdGhlIGhvb2sgZG9lcyBub3Qgc3luY2hyb25vdXNseSB0cmlnZ2VyIG90aGVyIGhvb2tzLCB3aGljaFxuICAgICAgICAgICAgICAgIC8vIGNhbiBvbmx5IGJlIGZhbHNlIHdoZW4gdGhlIHVzZXIgZG9lcyBzb21ldGhpbmcgcmVhbGx5IGZ1bmt5LlxuICAgICAgICAgICAgICAgIHNldEN1cnJlbnRJbnN0YW5jZSh0YXJnZXQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nKGhvb2ssIHRhcmdldCwgdHlwZSwgYXJncyk7XG4gICAgICAgICAgICAgICAgdW5zZXRDdXJyZW50SW5zdGFuY2UoKTtcbiAgICAgICAgICAgICAgICByZXNldFRyYWNraW5nKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBpZiAocHJlcGVuZCkge1xuICAgICAgICAgICAgaG9va3MudW5zaGlmdCh3cmFwcGVkSG9vayk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBob29rcy5wdXNoKHdyYXBwZWRIb29rKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JhcHBlZEhvb2s7XG4gICAgfVxuICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICBjb25zdCBhcGlOYW1lID0gdG9IYW5kbGVyS2V5KEVycm9yVHlwZVN0cmluZ3NbdHlwZV0ucmVwbGFjZSgvIGhvb2skLywgJycpKTtcbiAgICAgICAgd2FybihgJHthcGlOYW1lfSBpcyBjYWxsZWQgd2hlbiB0aGVyZSBpcyBubyBhY3RpdmUgY29tcG9uZW50IGluc3RhbmNlIHRvIGJlIGAgK1xuICAgICAgICAgICAgYGFzc29jaWF0ZWQgd2l0aC4gYCArXG4gICAgICAgICAgICBgTGlmZWN5Y2xlIGluamVjdGlvbiBBUElzIGNhbiBvbmx5IGJlIHVzZWQgZHVyaW5nIGV4ZWN1dGlvbiBvZiBzZXR1cCgpLmAgK1xuICAgICAgICAgICAgKGAgSWYgeW91IGFyZSB1c2luZyBhc3luYyBzZXR1cCgpLCBtYWtlIHN1cmUgdG8gcmVnaXN0ZXIgbGlmZWN5Y2xlIGAgK1xuICAgICAgICAgICAgICAgICAgICBgaG9va3MgYmVmb3JlIHRoZSBmaXJzdCBhd2FpdCBzdGF0ZW1lbnQuYFxuICAgICAgICAgICAgICAgICkpO1xuICAgIH1cbn1cbmNvbnN0IGNyZWF0ZUhvb2sgPSAobGlmZWN5Y2xlKSA9PiAoaG9vaywgdGFyZ2V0ID0gY3VycmVudEluc3RhbmNlKSA9PiBcbi8vIHBvc3QtY3JlYXRlIGxpZmVjeWNsZSByZWdpc3RyYXRpb25zIGFyZSBub29wcyBkdXJpbmcgU1NSIChleGNlcHQgZm9yIHNlcnZlclByZWZldGNoKVxuKCFpc0luU1NSQ29tcG9uZW50U2V0dXAgfHwgbGlmZWN5Y2xlID09PSBcInNwXCIgLyogTGlmZWN5Y2xlSG9va3MuU0VSVkVSX1BSRUZFVENIICovKSAmJlxuICAgIGluamVjdEhvb2sobGlmZWN5Y2xlLCAoLi4uYXJncykgPT4gaG9vayguLi5hcmdzKSwgdGFyZ2V0KTtcbmNvbnN0IG9uQmVmb3JlTW91bnQgPSBjcmVhdGVIb29rKFwiYm1cIiAvKiBMaWZlY3ljbGVIb29rcy5CRUZPUkVfTU9VTlQgKi8pO1xuY29uc3Qgb25Nb3VudGVkID0gY3JlYXRlSG9vayhcIm1cIiAvKiBMaWZlY3ljbGVIb29rcy5NT1VOVEVEICovKTtcbmNvbnN0IG9uQmVmb3JlVXBkYXRlID0gY3JlYXRlSG9vayhcImJ1XCIgLyogTGlmZWN5Y2xlSG9va3MuQkVGT1JFX1VQREFURSAqLyk7XG5jb25zdCBvblVwZGF0ZWQgPSBjcmVhdGVIb29rKFwidVwiIC8qIExpZmVjeWNsZUhvb2tzLlVQREFURUQgKi8pO1xuY29uc3Qgb25CZWZvcmVVbm1vdW50ID0gY3JlYXRlSG9vayhcImJ1bVwiIC8qIExpZmVjeWNsZUhvb2tzLkJFRk9SRV9VTk1PVU5UICovKTtcbmNvbnN0IG9uVW5tb3VudGVkID0gY3JlYXRlSG9vayhcInVtXCIgLyogTGlmZWN5Y2xlSG9va3MuVU5NT1VOVEVEICovKTtcbmNvbnN0IG9uU2VydmVyUHJlZmV0Y2ggPSBjcmVhdGVIb29rKFwic3BcIiAvKiBMaWZlY3ljbGVIb29rcy5TRVJWRVJfUFJFRkVUQ0ggKi8pO1xuY29uc3Qgb25SZW5kZXJUcmlnZ2VyZWQgPSBjcmVhdGVIb29rKFwicnRnXCIgLyogTGlmZWN5Y2xlSG9va3MuUkVOREVSX1RSSUdHRVJFRCAqLyk7XG5jb25zdCBvblJlbmRlclRyYWNrZWQgPSBjcmVhdGVIb29rKFwicnRjXCIgLyogTGlmZWN5Y2xlSG9va3MuUkVOREVSX1RSQUNLRUQgKi8pO1xuZnVuY3Rpb24gb25FcnJvckNhcHR1cmVkKGhvb2ssIHRhcmdldCA9IGN1cnJlbnRJbnN0YW5jZSkge1xuICAgIGluamVjdEhvb2soXCJlY1wiIC8qIExpZmVjeWNsZUhvb2tzLkVSUk9SX0NBUFRVUkVEICovLCBob29rLCB0YXJnZXQpO1xufVxuXG4vKipcblJ1bnRpbWUgaGVscGVyIGZvciBhcHBseWluZyBkaXJlY3RpdmVzIHRvIGEgdm5vZGUuIEV4YW1wbGUgdXNhZ2U6XG5cbmNvbnN0IGNvbXAgPSByZXNvbHZlQ29tcG9uZW50KCdjb21wJylcbmNvbnN0IGZvbyA9IHJlc29sdmVEaXJlY3RpdmUoJ2ZvbycpXG5jb25zdCBiYXIgPSByZXNvbHZlRGlyZWN0aXZlKCdiYXInKVxuXG5yZXR1cm4gd2l0aERpcmVjdGl2ZXMoaChjb21wKSwgW1xuICBbZm9vLCB0aGlzLnhdLFxuICBbYmFyLCB0aGlzLnldXG5dKVxuKi9cbmZ1bmN0aW9uIHZhbGlkYXRlRGlyZWN0aXZlTmFtZShuYW1lKSB7XG4gICAgaWYgKGlzQnVpbHRJbkRpcmVjdGl2ZShuYW1lKSkge1xuICAgICAgICB3YXJuKCdEbyBub3QgdXNlIGJ1aWx0LWluIGRpcmVjdGl2ZSBpZHMgYXMgY3VzdG9tIGRpcmVjdGl2ZSBpZDogJyArIG5hbWUpO1xuICAgIH1cbn1cbi8qKlxuICogQWRkcyBkaXJlY3RpdmVzIHRvIGEgVk5vZGUuXG4gKi9cbmZ1bmN0aW9uIHdpdGhEaXJlY3RpdmVzKHZub2RlLCBkaXJlY3RpdmVzKSB7XG4gICAgY29uc3QgaW50ZXJuYWxJbnN0YW5jZSA9IGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZTtcbiAgICBpZiAoaW50ZXJuYWxJbnN0YW5jZSA9PT0gbnVsbCkge1xuICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgd2Fybihgd2l0aERpcmVjdGl2ZXMgY2FuIG9ubHkgYmUgdXNlZCBpbnNpZGUgcmVuZGVyIGZ1bmN0aW9ucy5gKTtcbiAgICAgICAgcmV0dXJuIHZub2RlO1xuICAgIH1cbiAgICBjb25zdCBpbnN0YW5jZSA9IGdldEV4cG9zZVByb3h5KGludGVybmFsSW5zdGFuY2UpIHx8XG4gICAgICAgIGludGVybmFsSW5zdGFuY2UucHJveHk7XG4gICAgY29uc3QgYmluZGluZ3MgPSB2bm9kZS5kaXJzIHx8ICh2bm9kZS5kaXJzID0gW10pO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGlyZWN0aXZlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgW2RpciwgdmFsdWUsIGFyZywgbW9kaWZpZXJzID0gRU1QVFlfT0JKXSA9IGRpcmVjdGl2ZXNbaV07XG4gICAgICAgIGlmIChkaXIpIHtcbiAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGRpcikpIHtcbiAgICAgICAgICAgICAgICBkaXIgPSB7XG4gICAgICAgICAgICAgICAgICAgIG1vdW50ZWQ6IGRpcixcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlZDogZGlyXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkaXIuZGVlcCkge1xuICAgICAgICAgICAgICAgIHRyYXZlcnNlKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJpbmRpbmdzLnB1c2goe1xuICAgICAgICAgICAgICAgIGRpcixcbiAgICAgICAgICAgICAgICBpbnN0YW5jZSxcbiAgICAgICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgICAgICBvbGRWYWx1ZTogdm9pZCAwLFxuICAgICAgICAgICAgICAgIGFyZyxcbiAgICAgICAgICAgICAgICBtb2RpZmllcnNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB2bm9kZTtcbn1cbmZ1bmN0aW9uIGludm9rZURpcmVjdGl2ZUhvb2sodm5vZGUsIHByZXZWTm9kZSwgaW5zdGFuY2UsIG5hbWUpIHtcbiAgICBjb25zdCBiaW5kaW5ncyA9IHZub2RlLmRpcnM7XG4gICAgY29uc3Qgb2xkQmluZGluZ3MgPSBwcmV2Vk5vZGUgJiYgcHJldlZOb2RlLmRpcnM7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiaW5kaW5ncy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBiaW5kaW5nID0gYmluZGluZ3NbaV07XG4gICAgICAgIGlmIChvbGRCaW5kaW5ncykge1xuICAgICAgICAgICAgYmluZGluZy5vbGRWYWx1ZSA9IG9sZEJpbmRpbmdzW2ldLnZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGxldCBob29rID0gYmluZGluZy5kaXJbbmFtZV07XG4gICAgICAgIGlmIChob29rKSB7XG4gICAgICAgICAgICAvLyBkaXNhYmxlIHRyYWNraW5nIGluc2lkZSBhbGwgbGlmZWN5Y2xlIGhvb2tzXG4gICAgICAgICAgICAvLyBzaW5jZSB0aGV5IGNhbiBwb3RlbnRpYWxseSBiZSBjYWxsZWQgaW5zaWRlIGVmZmVjdHMuXG4gICAgICAgICAgICBwYXVzZVRyYWNraW5nKCk7XG4gICAgICAgICAgICBjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZyhob29rLCBpbnN0YW5jZSwgOCAvKiBFcnJvckNvZGVzLkRJUkVDVElWRV9IT09LICovLCBbXG4gICAgICAgICAgICAgICAgdm5vZGUuZWwsXG4gICAgICAgICAgICAgICAgYmluZGluZyxcbiAgICAgICAgICAgICAgICB2bm9kZSxcbiAgICAgICAgICAgICAgICBwcmV2Vk5vZGVcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgcmVzZXRUcmFja2luZygpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5jb25zdCBDT01QT05FTlRTID0gJ2NvbXBvbmVudHMnO1xuY29uc3QgRElSRUNUSVZFUyA9ICdkaXJlY3RpdmVzJztcbi8qKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcmVzb2x2ZUNvbXBvbmVudChuYW1lLCBtYXliZVNlbGZSZWZlcmVuY2UpIHtcbiAgICByZXR1cm4gcmVzb2x2ZUFzc2V0KENPTVBPTkVOVFMsIG5hbWUsIHRydWUsIG1heWJlU2VsZlJlZmVyZW5jZSkgfHwgbmFtZTtcbn1cbmNvbnN0IE5VTExfRFlOQU1JQ19DT01QT05FTlQgPSBTeW1ib2woKTtcbi8qKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcmVzb2x2ZUR5bmFtaWNDb21wb25lbnQoY29tcG9uZW50KSB7XG4gICAgaWYgKGlzU3RyaW5nKGNvbXBvbmVudCkpIHtcbiAgICAgICAgcmV0dXJuIHJlc29sdmVBc3NldChDT01QT05FTlRTLCBjb21wb25lbnQsIGZhbHNlKSB8fCBjb21wb25lbnQ7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBpbnZhbGlkIHR5cGVzIHdpbGwgZmFsbHRocm91Z2ggdG8gY3JlYXRlVk5vZGUgYW5kIHJhaXNlIHdhcm5pbmdcbiAgICAgICAgcmV0dXJuIChjb21wb25lbnQgfHwgTlVMTF9EWU5BTUlDX0NPTVBPTkVOVCk7XG4gICAgfVxufVxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiByZXNvbHZlRGlyZWN0aXZlKG5hbWUpIHtcbiAgICByZXR1cm4gcmVzb2x2ZUFzc2V0KERJUkVDVElWRVMsIG5hbWUpO1xufVxuLy8gaW1wbGVtZW50YXRpb25cbmZ1bmN0aW9uIHJlc29sdmVBc3NldCh0eXBlLCBuYW1lLCB3YXJuTWlzc2luZyA9IHRydWUsIG1heWJlU2VsZlJlZmVyZW5jZSA9IGZhbHNlKSB7XG4gICAgY29uc3QgaW5zdGFuY2UgPSBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UgfHwgY3VycmVudEluc3RhbmNlO1xuICAgIGlmIChpbnN0YW5jZSkge1xuICAgICAgICBjb25zdCBDb21wb25lbnQgPSBpbnN0YW5jZS50eXBlO1xuICAgICAgICAvLyBleHBsaWNpdCBzZWxmIG5hbWUgaGFzIGhpZ2hlc3QgcHJpb3JpdHlcbiAgICAgICAgaWYgKHR5cGUgPT09IENPTVBPTkVOVFMpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGZOYW1lID0gZ2V0Q29tcG9uZW50TmFtZShDb21wb25lbnQsIGZhbHNlIC8qIGRvIG5vdCBpbmNsdWRlIGluZmVycmVkIG5hbWUgdG8gYXZvaWQgYnJlYWtpbmcgZXhpc3RpbmcgY29kZSAqLyk7XG4gICAgICAgICAgICBpZiAoc2VsZk5hbWUgJiZcbiAgICAgICAgICAgICAgICAoc2VsZk5hbWUgPT09IG5hbWUgfHxcbiAgICAgICAgICAgICAgICAgICAgc2VsZk5hbWUgPT09IGNhbWVsaXplKG5hbWUpIHx8XG4gICAgICAgICAgICAgICAgICAgIHNlbGZOYW1lID09PSBjYXBpdGFsaXplKGNhbWVsaXplKG5hbWUpKSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gQ29tcG9uZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlcyA9IFxuICAgICAgICAvLyBsb2NhbCByZWdpc3RyYXRpb25cbiAgICAgICAgLy8gY2hlY2sgaW5zdGFuY2VbdHlwZV0gZmlyc3Qgd2hpY2ggaXMgcmVzb2x2ZWQgZm9yIG9wdGlvbnMgQVBJXG4gICAgICAgIHJlc29sdmUoaW5zdGFuY2VbdHlwZV0gfHwgQ29tcG9uZW50W3R5cGVdLCBuYW1lKSB8fFxuICAgICAgICAgICAgLy8gZ2xvYmFsIHJlZ2lzdHJhdGlvblxuICAgICAgICAgICAgcmVzb2x2ZShpbnN0YW5jZS5hcHBDb250ZXh0W3R5cGVdLCBuYW1lKTtcbiAgICAgICAgaWYgKCFyZXMgJiYgbWF5YmVTZWxmUmVmZXJlbmNlKSB7XG4gICAgICAgICAgICAvLyBmYWxsYmFjayB0byBpbXBsaWNpdCBzZWxmLXJlZmVyZW5jZVxuICAgICAgICAgICAgcmV0dXJuIENvbXBvbmVudDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIHdhcm5NaXNzaW5nICYmICFyZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4dHJhID0gdHlwZSA9PT0gQ09NUE9ORU5UU1xuICAgICAgICAgICAgICAgID8gYFxcbklmIHRoaXMgaXMgYSBuYXRpdmUgY3VzdG9tIGVsZW1lbnQsIG1ha2Ugc3VyZSB0byBleGNsdWRlIGl0IGZyb20gYCArXG4gICAgICAgICAgICAgICAgICAgIGBjb21wb25lbnQgcmVzb2x1dGlvbiB2aWEgY29tcGlsZXJPcHRpb25zLmlzQ3VzdG9tRWxlbWVudC5gXG4gICAgICAgICAgICAgICAgOiBgYDtcbiAgICAgICAgICAgIHdhcm4oYEZhaWxlZCB0byByZXNvbHZlICR7dHlwZS5zbGljZSgwLCAtMSl9OiAke25hbWV9JHtleHRyYX1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgd2FybihgcmVzb2x2ZSR7Y2FwaXRhbGl6ZSh0eXBlLnNsaWNlKDAsIC0xKSl9IGAgK1xuICAgICAgICAgICAgYGNhbiBvbmx5IGJlIHVzZWQgaW4gcmVuZGVyKCkgb3Igc2V0dXAoKS5gKTtcbiAgICB9XG59XG5mdW5jdGlvbiByZXNvbHZlKHJlZ2lzdHJ5LCBuYW1lKSB7XG4gICAgcmV0dXJuIChyZWdpc3RyeSAmJlxuICAgICAgICAocmVnaXN0cnlbbmFtZV0gfHxcbiAgICAgICAgICAgIHJlZ2lzdHJ5W2NhbWVsaXplKG5hbWUpXSB8fFxuICAgICAgICAgICAgcmVnaXN0cnlbY2FwaXRhbGl6ZShjYW1lbGl6ZShuYW1lKSldKSk7XG59XG5cbi8qKlxuICogQWN0dWFsIGltcGxlbWVudGF0aW9uXG4gKi9cbmZ1bmN0aW9uIHJlbmRlckxpc3Qoc291cmNlLCByZW5kZXJJdGVtLCBjYWNoZSwgaW5kZXgpIHtcbiAgICBsZXQgcmV0O1xuICAgIGNvbnN0IGNhY2hlZCA9IChjYWNoZSAmJiBjYWNoZVtpbmRleF0pO1xuICAgIGlmIChpc0FycmF5KHNvdXJjZSkgfHwgaXNTdHJpbmcoc291cmNlKSkge1xuICAgICAgICByZXQgPSBuZXcgQXJyYXkoc291cmNlLmxlbmd0aCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gc291cmNlLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgcmV0W2ldID0gcmVuZGVySXRlbShzb3VyY2VbaV0sIGksIHVuZGVmaW5lZCwgY2FjaGVkICYmIGNhY2hlZFtpXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIHNvdXJjZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhTnVtYmVyLmlzSW50ZWdlcihzb3VyY2UpKSB7XG4gICAgICAgICAgICB3YXJuKGBUaGUgdi1mb3IgcmFuZ2UgZXhwZWN0IGFuIGludGVnZXIgdmFsdWUgYnV0IGdvdCAke3NvdXJjZX0uYCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0ID0gbmV3IEFycmF5KHNvdXJjZSk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc291cmNlOyBpKyspIHtcbiAgICAgICAgICAgIHJldFtpXSA9IHJlbmRlckl0ZW0oaSArIDEsIGksIHVuZGVmaW5lZCwgY2FjaGVkICYmIGNhY2hlZFtpXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoaXNPYmplY3Qoc291cmNlKSkge1xuICAgICAgICBpZiAoc291cmNlW1N5bWJvbC5pdGVyYXRvcl0pIHtcbiAgICAgICAgICAgIHJldCA9IEFycmF5LmZyb20oc291cmNlLCAoaXRlbSwgaSkgPT4gcmVuZGVySXRlbShpdGVtLCBpLCB1bmRlZmluZWQsIGNhY2hlZCAmJiBjYWNoZWRbaV0pKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhzb3VyY2UpO1xuICAgICAgICAgICAgcmV0ID0gbmV3IEFycmF5KGtleXMubGVuZ3RoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgICAgICAgIHJldFtpXSA9IHJlbmRlckl0ZW0oc291cmNlW2tleV0sIGtleSwgaSwgY2FjaGVkICYmIGNhY2hlZFtpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldCA9IFtdO1xuICAgIH1cbiAgICBpZiAoY2FjaGUpIHtcbiAgICAgICAgY2FjaGVbaW5kZXhdID0gcmV0O1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufVxuXG4vKipcbiAqIENvbXBpbGVyIHJ1bnRpbWUgaGVscGVyIGZvciBjcmVhdGluZyBkeW5hbWljIHNsb3RzIG9iamVjdFxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlU2xvdHMoc2xvdHMsIGR5bmFtaWNTbG90cykge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZHluYW1pY1Nsb3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHNsb3QgPSBkeW5hbWljU2xvdHNbaV07XG4gICAgICAgIC8vIGFycmF5IG9mIGR5bmFtaWMgc2xvdCBnZW5lcmF0ZWQgYnkgPHRlbXBsYXRlIHYtZm9yPVwiLi4uXCIgI1suLi5dPlxuICAgICAgICBpZiAoaXNBcnJheShzbG90KSkge1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBzbG90Lmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgc2xvdHNbc2xvdFtqXS5uYW1lXSA9IHNsb3Rbal0uZm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc2xvdCkge1xuICAgICAgICAgICAgLy8gY29uZGl0aW9uYWwgc2luZ2xlIHNsb3QgZ2VuZXJhdGVkIGJ5IDx0ZW1wbGF0ZSB2LWlmPVwiLi4uXCIgI2Zvbz5cbiAgICAgICAgICAgIHNsb3RzW3Nsb3QubmFtZV0gPSBzbG90LmtleVxuICAgICAgICAgICAgICAgID8gKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzID0gc2xvdC5mbiguLi5hcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gYXR0YWNoIGJyYW5jaCBrZXkgc28gZWFjaCBjb25kaXRpb25hbCBicmFuY2ggaXMgY29uc2lkZXJlZCBhXG4gICAgICAgICAgICAgICAgICAgIC8vIGRpZmZlcmVudCBmcmFnbWVudFxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmtleSA9IHNsb3Qua2V5O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA6IHNsb3QuZm47XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNsb3RzO1xufVxuXG4vKipcbiAqIENvbXBpbGVyIHJ1bnRpbWUgaGVscGVyIGZvciByZW5kZXJpbmcgYDxzbG90Lz5gXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiByZW5kZXJTbG90KHNsb3RzLCBuYW1lLCBwcm9wcyA9IHt9LCBcbi8vIHRoaXMgaXMgbm90IGEgdXNlci1mYWNpbmcgZnVuY3Rpb24sIHNvIHRoZSBmYWxsYmFjayBpcyBhbHdheXMgZ2VuZXJhdGVkIGJ5XG4vLyB0aGUgY29tcGlsZXIgYW5kIGd1YXJhbnRlZWQgdG8gYmUgYSBmdW5jdGlvbiByZXR1cm5pbmcgYW4gYXJyYXlcbmZhbGxiYWNrLCBub1Nsb3R0ZWQpIHtcbiAgICBpZiAoY3VycmVudFJlbmRlcmluZ0luc3RhbmNlLmlzQ0UgfHxcbiAgICAgICAgKGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZS5wYXJlbnQgJiZcbiAgICAgICAgICAgIGlzQXN5bmNXcmFwcGVyKGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZS5wYXJlbnQpICYmXG4gICAgICAgICAgICBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UucGFyZW50LmlzQ0UpKSB7XG4gICAgICAgIGlmIChuYW1lICE9PSAnZGVmYXVsdCcpXG4gICAgICAgICAgICBwcm9wcy5uYW1lID0gbmFtZTtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVZOb2RlKCdzbG90JywgcHJvcHMsIGZhbGxiYWNrICYmIGZhbGxiYWNrKCkpO1xuICAgIH1cbiAgICBsZXQgc2xvdCA9IHNsb3RzW25hbWVdO1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgc2xvdCAmJiBzbG90Lmxlbmd0aCA+IDEpIHtcbiAgICAgICAgd2FybihgU1NSLW9wdGltaXplZCBzbG90IGZ1bmN0aW9uIGRldGVjdGVkIGluIGEgbm9uLVNTUi1vcHRpbWl6ZWQgcmVuZGVyIGAgK1xuICAgICAgICAgICAgYGZ1bmN0aW9uLiBZb3UgbmVlZCB0byBtYXJrIHRoaXMgY29tcG9uZW50IHdpdGggJGR5bmFtaWMtc2xvdHMgaW4gdGhlIGAgK1xuICAgICAgICAgICAgYHBhcmVudCB0ZW1wbGF0ZS5gKTtcbiAgICAgICAgc2xvdCA9ICgpID0+IFtdO1xuICAgIH1cbiAgICAvLyBhIGNvbXBpbGVkIHNsb3QgZGlzYWJsZXMgYmxvY2sgdHJhY2tpbmcgYnkgZGVmYXVsdCB0byBhdm9pZCBtYW51YWxcbiAgICAvLyBpbnZvY2F0aW9uIGludGVyZmVyaW5nIHdpdGggdGVtcGxhdGUtYmFzZWQgYmxvY2sgdHJhY2tpbmcsIGJ1dCBpblxuICAgIC8vIGByZW5kZXJTbG90YCB3ZSBjYW4gYmUgc3VyZSB0aGF0IGl0J3MgdGVtcGxhdGUtYmFzZWQgc28gd2UgY2FuIGZvcmNlXG4gICAgLy8gZW5hYmxlIGl0LlxuICAgIGlmIChzbG90ICYmIHNsb3QuX2MpIHtcbiAgICAgICAgc2xvdC5fZCA9IGZhbHNlO1xuICAgIH1cbiAgICBvcGVuQmxvY2soKTtcbiAgICBjb25zdCB2YWxpZFNsb3RDb250ZW50ID0gc2xvdCAmJiBlbnN1cmVWYWxpZFZOb2RlKHNsb3QocHJvcHMpKTtcbiAgICBjb25zdCByZW5kZXJlZCA9IGNyZWF0ZUJsb2NrKEZyYWdtZW50LCB7XG4gICAgICAgIGtleTogcHJvcHMua2V5IHx8XG4gICAgICAgICAgICAvLyBzbG90IGNvbnRlbnQgYXJyYXkgb2YgYSBkeW5hbWljIGNvbmRpdGlvbmFsIHNsb3QgbWF5IGhhdmUgYSBicmFuY2hcbiAgICAgICAgICAgIC8vIGtleSBhdHRhY2hlZCBpbiB0aGUgYGNyZWF0ZVNsb3RzYCBoZWxwZXIsIHJlc3BlY3QgdGhhdFxuICAgICAgICAgICAgKHZhbGlkU2xvdENvbnRlbnQgJiYgdmFsaWRTbG90Q29udGVudC5rZXkpIHx8XG4gICAgICAgICAgICBgXyR7bmFtZX1gXG4gICAgfSwgdmFsaWRTbG90Q29udGVudCB8fCAoZmFsbGJhY2sgPyBmYWxsYmFjaygpIDogW10pLCB2YWxpZFNsb3RDb250ZW50ICYmIHNsb3RzLl8gPT09IDEgLyogU2xvdEZsYWdzLlNUQUJMRSAqL1xuICAgICAgICA/IDY0IC8qIFBhdGNoRmxhZ3MuU1RBQkxFX0ZSQUdNRU5UICovXG4gICAgICAgIDogLTIgLyogUGF0Y2hGbGFncy5CQUlMICovKTtcbiAgICBpZiAoIW5vU2xvdHRlZCAmJiByZW5kZXJlZC5zY29wZUlkKSB7XG4gICAgICAgIHJlbmRlcmVkLnNsb3RTY29wZUlkcyA9IFtyZW5kZXJlZC5zY29wZUlkICsgJy1zJ107XG4gICAgfVxuICAgIGlmIChzbG90ICYmIHNsb3QuX2MpIHtcbiAgICAgICAgc2xvdC5fZCA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiByZW5kZXJlZDtcbn1cbmZ1bmN0aW9uIGVuc3VyZVZhbGlkVk5vZGUodm5vZGVzKSB7XG4gICAgcmV0dXJuIHZub2Rlcy5zb21lKGNoaWxkID0+IHtcbiAgICAgICAgaWYgKCFpc1ZOb2RlKGNoaWxkKSlcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAoY2hpbGQudHlwZSA9PT0gQ29tbWVudClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKGNoaWxkLnR5cGUgPT09IEZyYWdtZW50ICYmXG4gICAgICAgICAgICAhZW5zdXJlVmFsaWRWTm9kZShjaGlsZC5jaGlsZHJlbikpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pXG4gICAgICAgID8gdm5vZGVzXG4gICAgICAgIDogbnVsbDtcbn1cblxuLyoqXG4gKiBGb3IgcHJlZml4aW5nIGtleXMgaW4gdi1vbj1cIm9ialwiIHdpdGggXCJvblwiXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiB0b0hhbmRsZXJzKG9iaiwgcHJlc2VydmVDYXNlSWZOZWNlc3NhcnkpIHtcbiAgICBjb25zdCByZXQgPSB7fTtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFpc09iamVjdChvYmopKSB7XG4gICAgICAgIHdhcm4oYHYtb24gd2l0aCBubyBhcmd1bWVudCBleHBlY3RzIGFuIG9iamVjdCB2YWx1ZS5gKTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XG4gICAgICAgIHJldFtwcmVzZXJ2ZUNhc2VJZk5lY2Vzc2FyeSAmJiAvW0EtWl0vLnRlc3Qoa2V5KVxuICAgICAgICAgICAgPyBgb246JHtrZXl9YFxuICAgICAgICAgICAgOiB0b0hhbmRsZXJLZXkoa2V5KV0gPSBvYmpba2V5XTtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn1cblxuLyoqXG4gKiAjMjQzNyBJbiBWdWUgMywgZnVuY3Rpb25hbCBjb21wb25lbnRzIGRvIG5vdCBoYXZlIGEgcHVibGljIGluc3RhbmNlIHByb3h5IGJ1dFxuICogdGhleSBleGlzdCBpbiB0aGUgaW50ZXJuYWwgcGFyZW50IGNoYWluLiBGb3IgY29kZSB0aGF0IHJlbGllcyBvbiB0cmF2ZXJzaW5nXG4gKiBwdWJsaWMgJHBhcmVudCBjaGFpbnMsIHNraXAgZnVuY3Rpb25hbCBvbmVzIGFuZCBnbyB0byB0aGUgcGFyZW50IGluc3RlYWQuXG4gKi9cbmNvbnN0IGdldFB1YmxpY0luc3RhbmNlID0gKGkpID0+IHtcbiAgICBpZiAoIWkpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIGlmIChpc1N0YXRlZnVsQ29tcG9uZW50KGkpKVxuICAgICAgICByZXR1cm4gZ2V0RXhwb3NlUHJveHkoaSkgfHwgaS5wcm94eTtcbiAgICByZXR1cm4gZ2V0UHVibGljSW5zdGFuY2UoaS5wYXJlbnQpO1xufTtcbmNvbnN0IHB1YmxpY1Byb3BlcnRpZXNNYXAgPSBcbi8vIE1vdmUgUFVSRSBtYXJrZXIgdG8gbmV3IGxpbmUgdG8gd29ya2Fyb3VuZCBjb21waWxlciBkaXNjYXJkaW5nIGl0XG4vLyBkdWUgdG8gdHlwZSBhbm5vdGF0aW9uXG4vKiNfX1BVUkVfXyovIGV4dGVuZChPYmplY3QuY3JlYXRlKG51bGwpLCB7XG4gICAgJDogaSA9PiBpLFxuICAgICRlbDogaSA9PiBpLnZub2RlLmVsLFxuICAgICRkYXRhOiBpID0+IGkuZGF0YSxcbiAgICAkcHJvcHM6IGkgPT4gKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/IHNoYWxsb3dSZWFkb25seShpLnByb3BzKSA6IGkucHJvcHMpLFxuICAgICRhdHRyczogaSA9PiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gc2hhbGxvd1JlYWRvbmx5KGkuYXR0cnMpIDogaS5hdHRycyksXG4gICAgJHNsb3RzOiBpID0+ICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyBzaGFsbG93UmVhZG9ubHkoaS5zbG90cykgOiBpLnNsb3RzKSxcbiAgICAkcmVmczogaSA9PiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gc2hhbGxvd1JlYWRvbmx5KGkucmVmcykgOiBpLnJlZnMpLFxuICAgICRwYXJlbnQ6IGkgPT4gZ2V0UHVibGljSW5zdGFuY2UoaS5wYXJlbnQpLFxuICAgICRyb290OiBpID0+IGdldFB1YmxpY0luc3RhbmNlKGkucm9vdCksXG4gICAgJGVtaXQ6IGkgPT4gaS5lbWl0LFxuICAgICRvcHRpb25zOiBpID0+IChfX1ZVRV9PUFRJT05TX0FQSV9fID8gcmVzb2x2ZU1lcmdlZE9wdGlvbnMoaSkgOiBpLnR5cGUpLFxuICAgICRmb3JjZVVwZGF0ZTogaSA9PiBpLmYgfHwgKGkuZiA9ICgpID0+IHF1ZXVlSm9iKGkudXBkYXRlKSksXG4gICAgJG5leHRUaWNrOiBpID0+IGkubiB8fCAoaS5uID0gbmV4dFRpY2suYmluZChpLnByb3h5KSksXG4gICAgJHdhdGNoOiBpID0+IChfX1ZVRV9PUFRJT05TX0FQSV9fID8gaW5zdGFuY2VXYXRjaC5iaW5kKGkpIDogTk9PUClcbn0pO1xuY29uc3QgaXNSZXNlcnZlZFByZWZpeCA9IChrZXkpID0+IGtleSA9PT0gJ18nIHx8IGtleSA9PT0gJyQnO1xuY29uc3QgaGFzU2V0dXBCaW5kaW5nID0gKHN0YXRlLCBrZXkpID0+IHN0YXRlICE9PSBFTVBUWV9PQkogJiYgIXN0YXRlLl9faXNTY3JpcHRTZXR1cCAmJiBoYXNPd24oc3RhdGUsIGtleSk7XG5jb25zdCBQdWJsaWNJbnN0YW5jZVByb3h5SGFuZGxlcnMgPSB7XG4gICAgZ2V0KHsgXzogaW5zdGFuY2UgfSwga2V5KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4LCBzZXR1cFN0YXRlLCBkYXRhLCBwcm9wcywgYWNjZXNzQ2FjaGUsIHR5cGUsIGFwcENvbnRleHQgfSA9IGluc3RhbmNlO1xuICAgICAgICAvLyBmb3IgaW50ZXJuYWwgZm9ybWF0dGVycyB0byBrbm93IHRoYXQgdGhpcyBpcyBhIFZ1ZSBpbnN0YW5jZVxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGtleSA9PT0gJ19faXNWdWUnKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBkYXRhIC8gcHJvcHMgLyBjdHhcbiAgICAgICAgLy8gVGhpcyBnZXR0ZXIgZ2V0cyBjYWxsZWQgZm9yIGV2ZXJ5IHByb3BlcnR5IGFjY2VzcyBvbiB0aGUgcmVuZGVyIGNvbnRleHRcbiAgICAgICAgLy8gZHVyaW5nIHJlbmRlciBhbmQgaXMgYSBtYWpvciBob3RzcG90LiBUaGUgbW9zdCBleHBlbnNpdmUgcGFydCBvZiB0aGlzXG4gICAgICAgIC8vIGlzIHRoZSBtdWx0aXBsZSBoYXNPd24oKSBjYWxscy4gSXQncyBtdWNoIGZhc3RlciB0byBkbyBhIHNpbXBsZSBwcm9wZXJ0eVxuICAgICAgICAvLyBhY2Nlc3Mgb24gYSBwbGFpbiBvYmplY3QsIHNvIHdlIHVzZSBhbiBhY2Nlc3NDYWNoZSBvYmplY3QgKHdpdGggbnVsbFxuICAgICAgICAvLyBwcm90b3R5cGUpIHRvIG1lbW9pemUgd2hhdCBhY2Nlc3MgdHlwZSBhIGtleSBjb3JyZXNwb25kcyB0by5cbiAgICAgICAgbGV0IG5vcm1hbGl6ZWRQcm9wcztcbiAgICAgICAgaWYgKGtleVswXSAhPT0gJyQnKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gYWNjZXNzQ2FjaGVba2V5XTtcbiAgICAgICAgICAgIGlmIChuICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG4pIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxIC8qIEFjY2Vzc1R5cGVzLlNFVFVQICovOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNldHVwU3RhdGVba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyIC8qIEFjY2Vzc1R5cGVzLkRBVEEgKi86XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YVtrZXldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDQgLyogQWNjZXNzVHlwZXMuQ09OVEVYVCAqLzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdHhba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzIC8qIEFjY2Vzc1R5cGVzLlBST1BTICovOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByb3BzW2tleV07XG4gICAgICAgICAgICAgICAgICAgIC8vIGRlZmF1bHQ6IGp1c3QgZmFsbHRocm91Z2hcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChoYXNTZXR1cEJpbmRpbmcoc2V0dXBTdGF0ZSwga2V5KSkge1xuICAgICAgICAgICAgICAgIGFjY2Vzc0NhY2hlW2tleV0gPSAxIC8qIEFjY2Vzc1R5cGVzLlNFVFVQICovO1xuICAgICAgICAgICAgICAgIHJldHVybiBzZXR1cFN0YXRlW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChkYXRhICE9PSBFTVBUWV9PQkogJiYgaGFzT3duKGRhdGEsIGtleSkpIHtcbiAgICAgICAgICAgICAgICBhY2Nlc3NDYWNoZVtrZXldID0gMiAvKiBBY2Nlc3NUeXBlcy5EQVRBICovO1xuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChcbiAgICAgICAgICAgIC8vIG9ubHkgY2FjaGUgb3RoZXIgcHJvcGVydGllcyB3aGVuIGluc3RhbmNlIGhhcyBkZWNsYXJlZCAodGh1cyBzdGFibGUpXG4gICAgICAgICAgICAvLyBwcm9wc1xuICAgICAgICAgICAgKG5vcm1hbGl6ZWRQcm9wcyA9IGluc3RhbmNlLnByb3BzT3B0aW9uc1swXSkgJiZcbiAgICAgICAgICAgICAgICBoYXNPd24obm9ybWFsaXplZFByb3BzLCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgYWNjZXNzQ2FjaGVba2V5XSA9IDMgLyogQWNjZXNzVHlwZXMuUFJPUFMgKi87XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb3BzW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjdHggIT09IEVNUFRZX09CSiAmJiBoYXNPd24oY3R4LCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgYWNjZXNzQ2FjaGVba2V5XSA9IDQgLyogQWNjZXNzVHlwZXMuQ09OVEVYVCAqLztcbiAgICAgICAgICAgICAgICByZXR1cm4gY3R4W2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghX19WVUVfT1BUSU9OU19BUElfXyB8fCBzaG91bGRDYWNoZUFjY2Vzcykge1xuICAgICAgICAgICAgICAgIGFjY2Vzc0NhY2hlW2tleV0gPSAwIC8qIEFjY2Vzc1R5cGVzLk9USEVSICovO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHB1YmxpY0dldHRlciA9IHB1YmxpY1Byb3BlcnRpZXNNYXBba2V5XTtcbiAgICAgICAgbGV0IGNzc01vZHVsZSwgZ2xvYmFsUHJvcGVydGllcztcbiAgICAgICAgLy8gcHVibGljICR4eHggcHJvcGVydGllc1xuICAgICAgICBpZiAocHVibGljR2V0dGVyKSB7XG4gICAgICAgICAgICBpZiAoa2V5ID09PSAnJGF0dHJzJykge1xuICAgICAgICAgICAgICAgIHRyYWNrKGluc3RhbmNlLCBcImdldFwiIC8qIFRyYWNrT3BUeXBlcy5HRVQgKi8sIGtleSk7XG4gICAgICAgICAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIG1hcmtBdHRyc0FjY2Vzc2VkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcHVibGljR2V0dGVyKGluc3RhbmNlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChcbiAgICAgICAgLy8gY3NzIG1vZHVsZSAoaW5qZWN0ZWQgYnkgdnVlLWxvYWRlcilcbiAgICAgICAgKGNzc01vZHVsZSA9IHR5cGUuX19jc3NNb2R1bGVzKSAmJlxuICAgICAgICAgICAgKGNzc01vZHVsZSA9IGNzc01vZHVsZVtrZXldKSkge1xuICAgICAgICAgICAgcmV0dXJuIGNzc01vZHVsZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjdHggIT09IEVNUFRZX09CSiAmJiBoYXNPd24oY3R4LCBrZXkpKSB7XG4gICAgICAgICAgICAvLyB1c2VyIG1heSBzZXQgY3VzdG9tIHByb3BlcnRpZXMgdG8gYHRoaXNgIHRoYXQgc3RhcnQgd2l0aCBgJGBcbiAgICAgICAgICAgIGFjY2Vzc0NhY2hlW2tleV0gPSA0IC8qIEFjY2Vzc1R5cGVzLkNPTlRFWFQgKi87XG4gICAgICAgICAgICByZXR1cm4gY3R4W2tleV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoXG4gICAgICAgIC8vIGdsb2JhbCBwcm9wZXJ0aWVzXG4gICAgICAgICgoZ2xvYmFsUHJvcGVydGllcyA9IGFwcENvbnRleHQuY29uZmlnLmdsb2JhbFByb3BlcnRpZXMpLFxuICAgICAgICAgICAgaGFzT3duKGdsb2JhbFByb3BlcnRpZXMsIGtleSkpKSB7XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGdsb2JhbFByb3BlcnRpZXNba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcbiAgICAgICAgICAgIGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSAmJlxuICAgICAgICAgICAgKCFpc1N0cmluZyhrZXkpIHx8XG4gICAgICAgICAgICAgICAgLy8gIzEwOTEgYXZvaWQgaW50ZXJuYWwgaXNSZWYvaXNWTm9kZSBjaGVja3Mgb24gY29tcG9uZW50IGluc3RhbmNlIGxlYWRpbmdcbiAgICAgICAgICAgICAgICAvLyB0byBpbmZpbml0ZSB3YXJuaW5nIGxvb3BcbiAgICAgICAgICAgICAgICBrZXkuaW5kZXhPZignX192JykgIT09IDApKSB7XG4gICAgICAgICAgICBpZiAoZGF0YSAhPT0gRU1QVFlfT0JKICYmIGlzUmVzZXJ2ZWRQcmVmaXgoa2V5WzBdKSAmJiBoYXNPd24oZGF0YSwga2V5KSkge1xuICAgICAgICAgICAgICAgIHdhcm4oYFByb3BlcnR5ICR7SlNPTi5zdHJpbmdpZnkoa2V5KX0gbXVzdCBiZSBhY2Nlc3NlZCB2aWEgJGRhdGEgYmVjYXVzZSBpdCBzdGFydHMgd2l0aCBhIHJlc2VydmVkIGAgK1xuICAgICAgICAgICAgICAgICAgICBgY2hhcmFjdGVyIChcIiRcIiBvciBcIl9cIikgYW5kIGlzIG5vdCBwcm94aWVkIG9uIHRoZSByZW5kZXIgY29udGV4dC5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGluc3RhbmNlID09PSBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICB3YXJuKGBQcm9wZXJ0eSAke0pTT04uc3RyaW5naWZ5KGtleSl9IHdhcyBhY2Nlc3NlZCBkdXJpbmcgcmVuZGVyIGAgK1xuICAgICAgICAgICAgICAgICAgICBgYnV0IGlzIG5vdCBkZWZpbmVkIG9uIGluc3RhbmNlLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbiAgICBzZXQoeyBfOiBpbnN0YW5jZSB9LCBrZXksIHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IHsgZGF0YSwgc2V0dXBTdGF0ZSwgY3R4IH0gPSBpbnN0YW5jZTtcbiAgICAgICAgaWYgKGhhc1NldHVwQmluZGluZyhzZXR1cFN0YXRlLCBrZXkpKSB7XG4gICAgICAgICAgICBzZXR1cFN0YXRlW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxuICAgICAgICAgICAgc2V0dXBTdGF0ZS5fX2lzU2NyaXB0U2V0dXAgJiZcbiAgICAgICAgICAgIGhhc093bihzZXR1cFN0YXRlLCBrZXkpKSB7XG4gICAgICAgICAgICB3YXJuKGBDYW5ub3QgbXV0YXRlIDxzY3JpcHQgc2V0dXA+IGJpbmRpbmcgXCIke2tleX1cIiBmcm9tIE9wdGlvbnMgQVBJLmApO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRhdGEgIT09IEVNUFRZX09CSiAmJiBoYXNPd24oZGF0YSwga2V5KSkge1xuICAgICAgICAgICAgZGF0YVtrZXldID0gdmFsdWU7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChoYXNPd24oaW5zdGFuY2UucHJvcHMsIGtleSkpIHtcbiAgICAgICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiB3YXJuKGBBdHRlbXB0aW5nIHRvIG11dGF0ZSBwcm9wIFwiJHtrZXl9XCIuIFByb3BzIGFyZSByZWFkb25seS5gKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoa2V5WzBdID09PSAnJCcgJiYga2V5LnNsaWNlKDEpIGluIGluc3RhbmNlKSB7XG4gICAgICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcbiAgICAgICAgICAgICAgICB3YXJuKGBBdHRlbXB0aW5nIHRvIG11dGF0ZSBwdWJsaWMgcHJvcGVydHkgXCIke2tleX1cIi4gYCArXG4gICAgICAgICAgICAgICAgICAgIGBQcm9wZXJ0aWVzIHN0YXJ0aW5nIHdpdGggJCBhcmUgcmVzZXJ2ZWQgYW5kIHJlYWRvbmx5LmApO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBrZXkgaW4gaW5zdGFuY2UuYXBwQ29udGV4dC5jb25maWcuZ2xvYmFsUHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjdHgsIGtleSwge1xuICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjdHhba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG4gICAgaGFzKHsgXzogeyBkYXRhLCBzZXR1cFN0YXRlLCBhY2Nlc3NDYWNoZSwgY3R4LCBhcHBDb250ZXh0LCBwcm9wc09wdGlvbnMgfSB9LCBrZXkpIHtcbiAgICAgICAgbGV0IG5vcm1hbGl6ZWRQcm9wcztcbiAgICAgICAgcmV0dXJuICghIWFjY2Vzc0NhY2hlW2tleV0gfHxcbiAgICAgICAgICAgIChkYXRhICE9PSBFTVBUWV9PQkogJiYgaGFzT3duKGRhdGEsIGtleSkpIHx8XG4gICAgICAgICAgICBoYXNTZXR1cEJpbmRpbmcoc2V0dXBTdGF0ZSwga2V5KSB8fFxuICAgICAgICAgICAgKChub3JtYWxpemVkUHJvcHMgPSBwcm9wc09wdGlvbnNbMF0pICYmIGhhc093bihub3JtYWxpemVkUHJvcHMsIGtleSkpIHx8XG4gICAgICAgICAgICBoYXNPd24oY3R4LCBrZXkpIHx8XG4gICAgICAgICAgICBoYXNPd24ocHVibGljUHJvcGVydGllc01hcCwga2V5KSB8fFxuICAgICAgICAgICAgaGFzT3duKGFwcENvbnRleHQuY29uZmlnLmdsb2JhbFByb3BlcnRpZXMsIGtleSkpO1xuICAgIH0sXG4gICAgZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIGRlc2NyaXB0b3IpIHtcbiAgICAgICAgaWYgKGRlc2NyaXB0b3IuZ2V0ICE9IG51bGwpIHtcbiAgICAgICAgICAgIC8vIGludmFsaWRhdGUga2V5IGNhY2hlIG9mIGEgZ2V0dGVyIGJhc2VkIHByb3BlcnR5ICM1NDE3XG4gICAgICAgICAgICB0YXJnZXQuXy5hY2Nlc3NDYWNoZVtrZXldID0gMDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChoYXNPd24oZGVzY3JpcHRvciwgJ3ZhbHVlJykpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0KHRhcmdldCwga2V5LCBkZXNjcmlwdG9yLnZhbHVlLCBudWxsKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUmVmbGVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgZGVzY3JpcHRvcik7XG4gICAgfVxufTtcbmlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWZhbHNlKSB7XG4gICAgUHVibGljSW5zdGFuY2VQcm94eUhhbmRsZXJzLm93bktleXMgPSAodGFyZ2V0KSA9PiB7XG4gICAgICAgIHdhcm4oYEF2b2lkIGFwcCBsb2dpYyB0aGF0IHJlbGllcyBvbiBlbnVtZXJhdGluZyBrZXlzIG9uIGEgY29tcG9uZW50IGluc3RhbmNlLiBgICtcbiAgICAgICAgICAgIGBUaGUga2V5cyB3aWxsIGJlIGVtcHR5IGluIHByb2R1Y3Rpb24gbW9kZSB0byBhdm9pZCBwZXJmb3JtYW5jZSBvdmVyaGVhZC5gKTtcbiAgICAgICAgcmV0dXJuIFJlZmxlY3Qub3duS2V5cyh0YXJnZXQpO1xuICAgIH07XG59XG5jb25zdCBSdW50aW1lQ29tcGlsZWRQdWJsaWNJbnN0YW5jZVByb3h5SGFuZGxlcnMgPSAvKiNfX1BVUkVfXyovIGV4dGVuZCh7fSwgUHVibGljSW5zdGFuY2VQcm94eUhhbmRsZXJzLCB7XG4gICAgZ2V0KHRhcmdldCwga2V5KSB7XG4gICAgICAgIC8vIGZhc3QgcGF0aCBmb3IgdW5zY29wYWJsZXMgd2hlbiB1c2luZyBgd2l0aGAgYmxvY2tcbiAgICAgICAgaWYgKGtleSA9PT0gU3ltYm9sLnVuc2NvcGFibGVzKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFB1YmxpY0luc3RhbmNlUHJveHlIYW5kbGVycy5nZXQodGFyZ2V0LCBrZXksIHRhcmdldCk7XG4gICAgfSxcbiAgICBoYXMoXywga2V5KSB7XG4gICAgICAgIGNvbnN0IGhhcyA9IGtleVswXSAhPT0gJ18nICYmICFpc0dsb2JhbGx5V2hpdGVsaXN0ZWQoa2V5KTtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhaGFzICYmIFB1YmxpY0luc3RhbmNlUHJveHlIYW5kbGVycy5oYXMoXywga2V5KSkge1xuICAgICAgICAgICAgd2FybihgUHJvcGVydHkgJHtKU09OLnN0cmluZ2lmeShrZXkpfSBzaG91bGQgbm90IHN0YXJ0IHdpdGggXyB3aGljaCBpcyBhIHJlc2VydmVkIHByZWZpeCBmb3IgVnVlIGludGVybmFscy5gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaGFzO1xuICAgIH1cbn0pO1xuLy8gZGV2IG9ubHlcbi8vIEluIGRldiBtb2RlLCB0aGUgcHJveHkgdGFyZ2V0IGV4cG9zZXMgdGhlIHNhbWUgcHJvcGVydGllcyBhcyBzZWVuIG9uIGB0aGlzYFxuLy8gZm9yIGVhc2llciBjb25zb2xlIGluc3BlY3Rpb24uIEluIHByb2QgbW9kZSBpdCB3aWxsIGJlIGFuIGVtcHR5IG9iamVjdCBzb1xuLy8gdGhlc2UgcHJvcGVydGllcyBkZWZpbml0aW9ucyBjYW4gYmUgc2tpcHBlZC5cbmZ1bmN0aW9uIGNyZWF0ZURldlJlbmRlckNvbnRleHQoaW5zdGFuY2UpIHtcbiAgICBjb25zdCB0YXJnZXQgPSB7fTtcbiAgICAvLyBleHBvc2UgaW50ZXJuYWwgaW5zdGFuY2UgZm9yIHByb3h5IGhhbmRsZXJzXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgYF9gLCB7XG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGdldDogKCkgPT4gaW5zdGFuY2VcbiAgICB9KTtcbiAgICAvLyBleHBvc2UgcHVibGljIHByb3BlcnRpZXNcbiAgICBPYmplY3Qua2V5cyhwdWJsaWNQcm9wZXJ0aWVzTWFwKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwge1xuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICBnZXQ6ICgpID0+IHB1YmxpY1Byb3BlcnRpZXNNYXBba2V5XShpbnN0YW5jZSksXG4gICAgICAgICAgICAvLyBpbnRlcmNlcHRlZCBieSB0aGUgcHJveHkgc28gbm8gbmVlZCBmb3IgaW1wbGVtZW50YXRpb24sXG4gICAgICAgICAgICAvLyBidXQgbmVlZGVkIHRvIHByZXZlbnQgc2V0IGVycm9yc1xuICAgICAgICAgICAgc2V0OiBOT09QXG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiB0YXJnZXQ7XG59XG4vLyBkZXYgb25seVxuZnVuY3Rpb24gZXhwb3NlUHJvcHNPblJlbmRlckNvbnRleHQoaW5zdGFuY2UpIHtcbiAgICBjb25zdCB7IGN0eCwgcHJvcHNPcHRpb25zOiBbcHJvcHNPcHRpb25zXSB9ID0gaW5zdGFuY2U7XG4gICAgaWYgKHByb3BzT3B0aW9ucykge1xuICAgICAgICBPYmplY3Qua2V5cyhwcm9wc09wdGlvbnMpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjdHgsIGtleSwge1xuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGdldDogKCkgPT4gaW5zdGFuY2UucHJvcHNba2V5XSxcbiAgICAgICAgICAgICAgICBzZXQ6IE5PT1BcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4vLyBkZXYgb25seVxuZnVuY3Rpb24gZXhwb3NlU2V0dXBTdGF0ZU9uUmVuZGVyQ29udGV4dChpbnN0YW5jZSkge1xuICAgIGNvbnN0IHsgY3R4LCBzZXR1cFN0YXRlIH0gPSBpbnN0YW5jZTtcbiAgICBPYmplY3Qua2V5cyh0b1JhdyhzZXR1cFN0YXRlKSkuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICBpZiAoIXNldHVwU3RhdGUuX19pc1NjcmlwdFNldHVwKSB7XG4gICAgICAgICAgICBpZiAoaXNSZXNlcnZlZFByZWZpeChrZXlbMF0pKSB7XG4gICAgICAgICAgICAgICAgd2Fybihgc2V0dXAoKSByZXR1cm4gcHJvcGVydHkgJHtKU09OLnN0cmluZ2lmeShrZXkpfSBzaG91bGQgbm90IHN0YXJ0IHdpdGggXCIkXCIgb3IgXCJfXCIgYCArXG4gICAgICAgICAgICAgICAgICAgIGB3aGljaCBhcmUgcmVzZXJ2ZWQgcHJlZml4ZXMgZm9yIFZ1ZSBpbnRlcm5hbHMuYCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGN0eCwga2V5LCB7XG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgZ2V0OiAoKSA9PiBzZXR1cFN0YXRlW2tleV0sXG4gICAgICAgICAgICAgICAgc2V0OiBOT09QXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVEdXBsaWNhdGVDaGVja2VyKCkge1xuICAgIGNvbnN0IGNhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICByZXR1cm4gKHR5cGUsIGtleSkgPT4ge1xuICAgICAgICBpZiAoY2FjaGVba2V5XSkge1xuICAgICAgICAgICAgd2FybihgJHt0eXBlfSBwcm9wZXJ0eSBcIiR7a2V5fVwiIGlzIGFscmVhZHkgZGVmaW5lZCBpbiAke2NhY2hlW2tleV19LmApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVba2V5XSA9IHR5cGU7XG4gICAgICAgIH1cbiAgICB9O1xufVxubGV0IHNob3VsZENhY2hlQWNjZXNzID0gdHJ1ZTtcbmZ1bmN0aW9uIGFwcGx5T3B0aW9ucyhpbnN0YW5jZSkge1xuICAgIGNvbnN0IG9wdGlvbnMgPSByZXNvbHZlTWVyZ2VkT3B0aW9ucyhpbnN0YW5jZSk7XG4gICAgY29uc3QgcHVibGljVGhpcyA9IGluc3RhbmNlLnByb3h5O1xuICAgIGNvbnN0IGN0eCA9IGluc3RhbmNlLmN0eDtcbiAgICAvLyBkbyBub3QgY2FjaGUgcHJvcGVydHkgYWNjZXNzIG9uIHB1YmxpYyBwcm94eSBkdXJpbmcgc3RhdGUgaW5pdGlhbGl6YXRpb25cbiAgICBzaG91bGRDYWNoZUFjY2VzcyA9IGZhbHNlO1xuICAgIC8vIGNhbGwgYmVmb3JlQ3JlYXRlIGZpcnN0IGJlZm9yZSBhY2Nlc3Npbmcgb3RoZXIgb3B0aW9ucyBzaW5jZVxuICAgIC8vIHRoZSBob29rIG1heSBtdXRhdGUgcmVzb2x2ZWQgb3B0aW9ucyAoIzI3OTEpXG4gICAgaWYgKG9wdGlvbnMuYmVmb3JlQ3JlYXRlKSB7XG4gICAgICAgIGNhbGxIb29rKG9wdGlvbnMuYmVmb3JlQ3JlYXRlLCBpbnN0YW5jZSwgXCJiY1wiIC8qIExpZmVjeWNsZUhvb2tzLkJFRk9SRV9DUkVBVEUgKi8pO1xuICAgIH1cbiAgICBjb25zdCB7IFxuICAgIC8vIHN0YXRlXG4gICAgZGF0YTogZGF0YU9wdGlvbnMsIGNvbXB1dGVkOiBjb21wdXRlZE9wdGlvbnMsIG1ldGhvZHMsIHdhdGNoOiB3YXRjaE9wdGlvbnMsIHByb3ZpZGU6IHByb3ZpZGVPcHRpb25zLCBpbmplY3Q6IGluamVjdE9wdGlvbnMsIFxuICAgIC8vIGxpZmVjeWNsZVxuICAgIGNyZWF0ZWQsIGJlZm9yZU1vdW50LCBtb3VudGVkLCBiZWZvcmVVcGRhdGUsIHVwZGF0ZWQsIGFjdGl2YXRlZCwgZGVhY3RpdmF0ZWQsIGJlZm9yZURlc3Ryb3ksIGJlZm9yZVVubW91bnQsIGRlc3Ryb3llZCwgdW5tb3VudGVkLCByZW5kZXIsIHJlbmRlclRyYWNrZWQsIHJlbmRlclRyaWdnZXJlZCwgZXJyb3JDYXB0dXJlZCwgc2VydmVyUHJlZmV0Y2gsIFxuICAgIC8vIHB1YmxpYyBBUElcbiAgICBleHBvc2UsIGluaGVyaXRBdHRycywgXG4gICAgLy8gYXNzZXRzXG4gICAgY29tcG9uZW50cywgZGlyZWN0aXZlcywgZmlsdGVycyB9ID0gb3B0aW9ucztcbiAgICBjb25zdCBjaGVja0R1cGxpY2F0ZVByb3BlcnRpZXMgPSAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyBjcmVhdGVEdXBsaWNhdGVDaGVja2VyKCkgOiBudWxsO1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgY29uc3QgW3Byb3BzT3B0aW9uc10gPSBpbnN0YW5jZS5wcm9wc09wdGlvbnM7XG4gICAgICAgIGlmIChwcm9wc09wdGlvbnMpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHByb3BzT3B0aW9ucykge1xuICAgICAgICAgICAgICAgIGNoZWNrRHVwbGljYXRlUHJvcGVydGllcyhcIlByb3BzXCIgLyogT3B0aW9uVHlwZXMuUFJPUFMgKi8sIGtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gb3B0aW9ucyBpbml0aWFsaXphdGlvbiBvcmRlciAodG8gYmUgY29uc2lzdGVudCB3aXRoIFZ1ZSAyKTpcbiAgICAvLyAtIHByb3BzIChhbHJlYWR5IGRvbmUgb3V0c2lkZSBvZiB0aGlzIGZ1bmN0aW9uKVxuICAgIC8vIC0gaW5qZWN0XG4gICAgLy8gLSBtZXRob2RzXG4gICAgLy8gLSBkYXRhIChkZWZlcnJlZCBzaW5jZSBpdCByZWxpZXMgb24gYHRoaXNgIGFjY2VzcylcbiAgICAvLyAtIGNvbXB1dGVkXG4gICAgLy8gLSB3YXRjaCAoZGVmZXJyZWQgc2luY2UgaXQgcmVsaWVzIG9uIGB0aGlzYCBhY2Nlc3MpXG4gICAgaWYgKGluamVjdE9wdGlvbnMpIHtcbiAgICAgICAgcmVzb2x2ZUluamVjdGlvbnMoaW5qZWN0T3B0aW9ucywgY3R4LCBjaGVja0R1cGxpY2F0ZVByb3BlcnRpZXMsIGluc3RhbmNlLmFwcENvbnRleHQuY29uZmlnLnVud3JhcEluamVjdGVkUmVmKTtcbiAgICB9XG4gICAgaWYgKG1ldGhvZHMpIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbWV0aG9kcykge1xuICAgICAgICAgICAgY29uc3QgbWV0aG9kSGFuZGxlciA9IG1ldGhvZHNba2V5XTtcbiAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKG1ldGhvZEhhbmRsZXIpKSB7XG4gICAgICAgICAgICAgICAgLy8gSW4gZGV2IG1vZGUsIHdlIHVzZSB0aGUgYGNyZWF0ZVJlbmRlckNvbnRleHRgIGZ1bmN0aW9uIHRvIGRlZmluZVxuICAgICAgICAgICAgICAgIC8vIG1ldGhvZHMgdG8gdGhlIHByb3h5IHRhcmdldCwgYW5kIHRob3NlIGFyZSByZWFkLW9ubHkgYnV0XG4gICAgICAgICAgICAgICAgLy8gcmVjb25maWd1cmFibGUsIHNvIGl0IG5lZWRzIHRvIGJlIHJlZGVmaW5lZCBoZXJlXG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4LCBrZXksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBtZXRob2RIYW5kbGVyLmJpbmQocHVibGljVGhpcyksXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjdHhba2V5XSA9IG1ldGhvZEhhbmRsZXIuYmluZChwdWJsaWNUaGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICBjaGVja0R1cGxpY2F0ZVByb3BlcnRpZXMoXCJNZXRob2RzXCIgLyogT3B0aW9uVHlwZXMuTUVUSE9EUyAqLywga2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICB3YXJuKGBNZXRob2QgXCIke2tleX1cIiBoYXMgdHlwZSBcIiR7dHlwZW9mIG1ldGhvZEhhbmRsZXJ9XCIgaW4gdGhlIGNvbXBvbmVudCBkZWZpbml0aW9uLiBgICtcbiAgICAgICAgICAgICAgICAgICAgYERpZCB5b3UgcmVmZXJlbmNlIHRoZSBmdW5jdGlvbiBjb3JyZWN0bHk/YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGRhdGFPcHRpb25zKSB7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWlzRnVuY3Rpb24oZGF0YU9wdGlvbnMpKSB7XG4gICAgICAgICAgICB3YXJuKGBUaGUgZGF0YSBvcHRpb24gbXVzdCBiZSBhIGZ1bmN0aW9uLiBgICtcbiAgICAgICAgICAgICAgICBgUGxhaW4gb2JqZWN0IHVzYWdlIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQuYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGF0YSA9IGRhdGFPcHRpb25zLmNhbGwocHVibGljVGhpcywgcHVibGljVGhpcyk7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgaXNQcm9taXNlKGRhdGEpKSB7XG4gICAgICAgICAgICB3YXJuKGBkYXRhKCkgcmV0dXJuZWQgYSBQcm9taXNlIC0gbm90ZSBkYXRhKCkgY2Fubm90IGJlIGFzeW5jOyBJZiB5b3UgYCArXG4gICAgICAgICAgICAgICAgYGludGVuZCB0byBwZXJmb3JtIGRhdGEgZmV0Y2hpbmcgYmVmb3JlIGNvbXBvbmVudCByZW5kZXJzLCB1c2UgYCArXG4gICAgICAgICAgICAgICAgYGFzeW5jIHNldHVwKCkgKyA8U3VzcGVuc2U+LmApO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNPYmplY3QoZGF0YSkpIHtcbiAgICAgICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiB3YXJuKGBkYXRhKCkgc2hvdWxkIHJldHVybiBhbiBvYmplY3QuYCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpbnN0YW5jZS5kYXRhID0gcmVhY3RpdmUoZGF0YSk7XG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBjaGVja0R1cGxpY2F0ZVByb3BlcnRpZXMoXCJEYXRhXCIgLyogT3B0aW9uVHlwZXMuREFUQSAqLywga2V5KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXhwb3NlIGRhdGEgb24gY3R4IGR1cmluZyBkZXZcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1Jlc2VydmVkUHJlZml4KGtleVswXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjdHgsIGtleSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldDogKCkgPT4gZGF0YVtrZXldLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldDogTk9PUFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gc3RhdGUgaW5pdGlhbGl6YXRpb24gY29tcGxldGUgYXQgdGhpcyBwb2ludCAtIHN0YXJ0IGNhY2hpbmcgYWNjZXNzXG4gICAgc2hvdWxkQ2FjaGVBY2Nlc3MgPSB0cnVlO1xuICAgIGlmIChjb21wdXRlZE9wdGlvbnMpIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gY29tcHV0ZWRPcHRpb25zKSB7XG4gICAgICAgICAgICBjb25zdCBvcHQgPSBjb21wdXRlZE9wdGlvbnNba2V5XTtcbiAgICAgICAgICAgIGNvbnN0IGdldCA9IGlzRnVuY3Rpb24ob3B0KVxuICAgICAgICAgICAgICAgID8gb3B0LmJpbmQocHVibGljVGhpcywgcHVibGljVGhpcylcbiAgICAgICAgICAgICAgICA6IGlzRnVuY3Rpb24ob3B0LmdldClcbiAgICAgICAgICAgICAgICAgICAgPyBvcHQuZ2V0LmJpbmQocHVibGljVGhpcywgcHVibGljVGhpcylcbiAgICAgICAgICAgICAgICAgICAgOiBOT09QO1xuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBnZXQgPT09IE5PT1ApIHtcbiAgICAgICAgICAgICAgICB3YXJuKGBDb21wdXRlZCBwcm9wZXJ0eSBcIiR7a2V5fVwiIGhhcyBubyBnZXR0ZXIuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzZXQgPSAhaXNGdW5jdGlvbihvcHQpICYmIGlzRnVuY3Rpb24ob3B0LnNldClcbiAgICAgICAgICAgICAgICA/IG9wdC5zZXQuYmluZChwdWJsaWNUaGlzKVxuICAgICAgICAgICAgICAgIDogKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpXG4gICAgICAgICAgICAgICAgICAgID8gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2FybihgV3JpdGUgb3BlcmF0aW9uIGZhaWxlZDogY29tcHV0ZWQgcHJvcGVydHkgXCIke2tleX1cIiBpcyByZWFkb25seS5gKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA6IE5PT1A7XG4gICAgICAgICAgICBjb25zdCBjID0gY29tcHV0ZWQoe1xuICAgICAgICAgICAgICAgIGdldCxcbiAgICAgICAgICAgICAgICBzZXRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGN0eCwga2V5LCB7XG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgZ2V0OiAoKSA9PiBjLnZhbHVlLFxuICAgICAgICAgICAgICAgIHNldDogdiA9PiAoYy52YWx1ZSA9IHYpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICBjaGVja0R1cGxpY2F0ZVByb3BlcnRpZXMoXCJDb21wdXRlZFwiIC8qIE9wdGlvblR5cGVzLkNPTVBVVEVEICovLCBrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGlmICh3YXRjaE9wdGlvbnMpIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gd2F0Y2hPcHRpb25zKSB7XG4gICAgICAgICAgICBjcmVhdGVXYXRjaGVyKHdhdGNoT3B0aW9uc1trZXldLCBjdHgsIHB1YmxpY1RoaXMsIGtleSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHByb3ZpZGVPcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHByb3ZpZGVzID0gaXNGdW5jdGlvbihwcm92aWRlT3B0aW9ucylcbiAgICAgICAgICAgID8gcHJvdmlkZU9wdGlvbnMuY2FsbChwdWJsaWNUaGlzKVxuICAgICAgICAgICAgOiBwcm92aWRlT3B0aW9ucztcbiAgICAgICAgUmVmbGVjdC5vd25LZXlzKHByb3ZpZGVzKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgICBwcm92aWRlKGtleSwgcHJvdmlkZXNba2V5XSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoY3JlYXRlZCkge1xuICAgICAgICBjYWxsSG9vayhjcmVhdGVkLCBpbnN0YW5jZSwgXCJjXCIgLyogTGlmZWN5Y2xlSG9va3MuQ1JFQVRFRCAqLyk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlZ2lzdGVyTGlmZWN5Y2xlSG9vayhyZWdpc3RlciwgaG9vaykge1xuICAgICAgICBpZiAoaXNBcnJheShob29rKSkge1xuICAgICAgICAgICAgaG9vay5mb3JFYWNoKF9ob29rID0+IHJlZ2lzdGVyKF9ob29rLmJpbmQocHVibGljVGhpcykpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChob29rKSB7XG4gICAgICAgICAgICByZWdpc3Rlcihob29rLmJpbmQocHVibGljVGhpcykpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlZ2lzdGVyTGlmZWN5Y2xlSG9vayhvbkJlZm9yZU1vdW50LCBiZWZvcmVNb3VudCk7XG4gICAgcmVnaXN0ZXJMaWZlY3ljbGVIb29rKG9uTW91bnRlZCwgbW91bnRlZCk7XG4gICAgcmVnaXN0ZXJMaWZlY3ljbGVIb29rKG9uQmVmb3JlVXBkYXRlLCBiZWZvcmVVcGRhdGUpO1xuICAgIHJlZ2lzdGVyTGlmZWN5Y2xlSG9vayhvblVwZGF0ZWQsIHVwZGF0ZWQpO1xuICAgIHJlZ2lzdGVyTGlmZWN5Y2xlSG9vayhvbkFjdGl2YXRlZCwgYWN0aXZhdGVkKTtcbiAgICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25EZWFjdGl2YXRlZCwgZGVhY3RpdmF0ZWQpO1xuICAgIHJlZ2lzdGVyTGlmZWN5Y2xlSG9vayhvbkVycm9yQ2FwdHVyZWQsIGVycm9yQ2FwdHVyZWQpO1xuICAgIHJlZ2lzdGVyTGlmZWN5Y2xlSG9vayhvblJlbmRlclRyYWNrZWQsIHJlbmRlclRyYWNrZWQpO1xuICAgIHJlZ2lzdGVyTGlmZWN5Y2xlSG9vayhvblJlbmRlclRyaWdnZXJlZCwgcmVuZGVyVHJpZ2dlcmVkKTtcbiAgICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25CZWZvcmVVbm1vdW50LCBiZWZvcmVVbm1vdW50KTtcbiAgICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25Vbm1vdW50ZWQsIHVubW91bnRlZCk7XG4gICAgcmVnaXN0ZXJMaWZlY3ljbGVIb29rKG9uU2VydmVyUHJlZmV0Y2gsIHNlcnZlclByZWZldGNoKTtcbiAgICBpZiAoaXNBcnJheShleHBvc2UpKSB7XG4gICAgICAgIGlmIChleHBvc2UubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCBleHBvc2VkID0gaW5zdGFuY2UuZXhwb3NlZCB8fCAoaW5zdGFuY2UuZXhwb3NlZCA9IHt9KTtcbiAgICAgICAgICAgIGV4cG9zZS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9zZWQsIGtleSwge1xuICAgICAgICAgICAgICAgICAgICBnZXQ6ICgpID0+IHB1YmxpY1RoaXNba2V5XSxcbiAgICAgICAgICAgICAgICAgICAgc2V0OiB2YWwgPT4gKHB1YmxpY1RoaXNba2V5XSA9IHZhbClcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFpbnN0YW5jZS5leHBvc2VkKSB7XG4gICAgICAgICAgICBpbnN0YW5jZS5leHBvc2VkID0ge307XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gb3B0aW9ucyB0aGF0IGFyZSBoYW5kbGVkIHdoZW4gY3JlYXRpbmcgdGhlIGluc3RhbmNlIGJ1dCBhbHNvIG5lZWQgdG8gYmVcbiAgICAvLyBhcHBsaWVkIGZyb20gbWl4aW5zXG4gICAgaWYgKHJlbmRlciAmJiBpbnN0YW5jZS5yZW5kZXIgPT09IE5PT1ApIHtcbiAgICAgICAgaW5zdGFuY2UucmVuZGVyID0gcmVuZGVyO1xuICAgIH1cbiAgICBpZiAoaW5oZXJpdEF0dHJzICE9IG51bGwpIHtcbiAgICAgICAgaW5zdGFuY2UuaW5oZXJpdEF0dHJzID0gaW5oZXJpdEF0dHJzO1xuICAgIH1cbiAgICAvLyBhc3NldCBvcHRpb25zLlxuICAgIGlmIChjb21wb25lbnRzKVxuICAgICAgICBpbnN0YW5jZS5jb21wb25lbnRzID0gY29tcG9uZW50cztcbiAgICBpZiAoZGlyZWN0aXZlcylcbiAgICAgICAgaW5zdGFuY2UuZGlyZWN0aXZlcyA9IGRpcmVjdGl2ZXM7XG59XG5mdW5jdGlvbiByZXNvbHZlSW5qZWN0aW9ucyhpbmplY3RPcHRpb25zLCBjdHgsIGNoZWNrRHVwbGljYXRlUHJvcGVydGllcyA9IE5PT1AsIHVud3JhcFJlZiA9IGZhbHNlKSB7XG4gICAgaWYgKGlzQXJyYXkoaW5qZWN0T3B0aW9ucykpIHtcbiAgICAgICAgaW5qZWN0T3B0aW9ucyA9IG5vcm1hbGl6ZUluamVjdChpbmplY3RPcHRpb25zKTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgaW4gaW5qZWN0T3B0aW9ucykge1xuICAgICAgICBjb25zdCBvcHQgPSBpbmplY3RPcHRpb25zW2tleV07XG4gICAgICAgIGxldCBpbmplY3RlZDtcbiAgICAgICAgaWYgKGlzT2JqZWN0KG9wdCkpIHtcbiAgICAgICAgICAgIGlmICgnZGVmYXVsdCcgaW4gb3B0KSB7XG4gICAgICAgICAgICAgICAgaW5qZWN0ZWQgPSBpbmplY3Qob3B0LmZyb20gfHwga2V5LCBvcHQuZGVmYXVsdCwgdHJ1ZSAvKiB0cmVhdCBkZWZhdWx0IGZ1bmN0aW9uIGFzIGZhY3RvcnkgKi8pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaW5qZWN0ZWQgPSBpbmplY3Qob3B0LmZyb20gfHwga2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGluamVjdGVkID0gaW5qZWN0KG9wdCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzUmVmKGluamVjdGVkKSkge1xuICAgICAgICAgICAgLy8gVE9ETyByZW1vdmUgdGhlIGNoZWNrIGluIDMuM1xuICAgICAgICAgICAgaWYgKHVud3JhcFJlZikge1xuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjdHgsIGtleSwge1xuICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGdldDogKCkgPT4gaW5qZWN0ZWQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHNldDogdiA9PiAoaW5qZWN0ZWQudmFsdWUgPSB2KVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICB3YXJuKGBpbmplY3RlZCBwcm9wZXJ0eSBcIiR7a2V5fVwiIGlzIGEgcmVmIGFuZCB3aWxsIGJlIGF1dG8tdW53cmFwcGVkIGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYGFuZCBubyBsb25nZXIgbmVlZHMgXFxgLnZhbHVlXFxgIGluIHRoZSBuZXh0IG1pbm9yIHJlbGVhc2UuIGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYFRvIG9wdC1pbiB0byB0aGUgbmV3IGJlaGF2aW9yIG5vdywgYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgc2V0IFxcYGFwcC5jb25maWcudW53cmFwSW5qZWN0ZWRSZWYgPSB0cnVlXFxgICh0aGlzIGNvbmZpZyBpcyBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGB0ZW1wb3JhcnkgYW5kIHdpbGwgbm90IGJlIG5lZWRlZCBpbiB0aGUgZnV0dXJlLilgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY3R4W2tleV0gPSBpbmplY3RlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGN0eFtrZXldID0gaW5qZWN0ZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgY2hlY2tEdXBsaWNhdGVQcm9wZXJ0aWVzKFwiSW5qZWN0XCIgLyogT3B0aW9uVHlwZXMuSU5KRUNUICovLCBrZXkpO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gY2FsbEhvb2soaG9vaywgaW5zdGFuY2UsIHR5cGUpIHtcbiAgICBjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZyhpc0FycmF5KGhvb2spXG4gICAgICAgID8gaG9vay5tYXAoaCA9PiBoLmJpbmQoaW5zdGFuY2UucHJveHkpKVxuICAgICAgICA6IGhvb2suYmluZChpbnN0YW5jZS5wcm94eSksIGluc3RhbmNlLCB0eXBlKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVdhdGNoZXIocmF3LCBjdHgsIHB1YmxpY1RoaXMsIGtleSkge1xuICAgIGNvbnN0IGdldHRlciA9IGtleS5pbmNsdWRlcygnLicpXG4gICAgICAgID8gY3JlYXRlUGF0aEdldHRlcihwdWJsaWNUaGlzLCBrZXkpXG4gICAgICAgIDogKCkgPT4gcHVibGljVGhpc1trZXldO1xuICAgIGlmIChpc1N0cmluZyhyYXcpKSB7XG4gICAgICAgIGNvbnN0IGhhbmRsZXIgPSBjdHhbcmF3XTtcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24oaGFuZGxlcikpIHtcbiAgICAgICAgICAgIHdhdGNoKGdldHRlciwgaGFuZGxlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICB3YXJuKGBJbnZhbGlkIHdhdGNoIGhhbmRsZXIgc3BlY2lmaWVkIGJ5IGtleSBcIiR7cmF3fVwiYCwgaGFuZGxlcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoaXNGdW5jdGlvbihyYXcpKSB7XG4gICAgICAgIHdhdGNoKGdldHRlciwgcmF3LmJpbmQocHVibGljVGhpcykpO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc09iamVjdChyYXcpKSB7XG4gICAgICAgIGlmIChpc0FycmF5KHJhdykpIHtcbiAgICAgICAgICAgIHJhdy5mb3JFYWNoKHIgPT4gY3JlYXRlV2F0Y2hlcihyLCBjdHgsIHB1YmxpY1RoaXMsIGtleSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgaGFuZGxlciA9IGlzRnVuY3Rpb24ocmF3LmhhbmRsZXIpXG4gICAgICAgICAgICAgICAgPyByYXcuaGFuZGxlci5iaW5kKHB1YmxpY1RoaXMpXG4gICAgICAgICAgICAgICAgOiBjdHhbcmF3LmhhbmRsZXJdO1xuICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24oaGFuZGxlcikpIHtcbiAgICAgICAgICAgICAgICB3YXRjaChnZXR0ZXIsIGhhbmRsZXIsIHJhdyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICB3YXJuKGBJbnZhbGlkIHdhdGNoIGhhbmRsZXIgc3BlY2lmaWVkIGJ5IGtleSBcIiR7cmF3LmhhbmRsZXJ9XCJgLCBoYW5kbGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgd2FybihgSW52YWxpZCB3YXRjaCBvcHRpb246IFwiJHtrZXl9XCJgLCByYXcpO1xuICAgIH1cbn1cbi8qKlxuICogUmVzb2x2ZSBtZXJnZWQgb3B0aW9ucyBhbmQgY2FjaGUgaXQgb24gdGhlIGNvbXBvbmVudC5cbiAqIFRoaXMgaXMgZG9uZSBvbmx5IG9uY2UgcGVyLWNvbXBvbmVudCBzaW5jZSB0aGUgbWVyZ2luZyBkb2VzIG5vdCBpbnZvbHZlXG4gKiBpbnN0YW5jZXMuXG4gKi9cbmZ1bmN0aW9uIHJlc29sdmVNZXJnZWRPcHRpb25zKGluc3RhbmNlKSB7XG4gICAgY29uc3QgYmFzZSA9IGluc3RhbmNlLnR5cGU7XG4gICAgY29uc3QgeyBtaXhpbnMsIGV4dGVuZHM6IGV4dGVuZHNPcHRpb25zIH0gPSBiYXNlO1xuICAgIGNvbnN0IHsgbWl4aW5zOiBnbG9iYWxNaXhpbnMsIG9wdGlvbnNDYWNoZTogY2FjaGUsIGNvbmZpZzogeyBvcHRpb25NZXJnZVN0cmF0ZWdpZXMgfSB9ID0gaW5zdGFuY2UuYXBwQ29udGV4dDtcbiAgICBjb25zdCBjYWNoZWQgPSBjYWNoZS5nZXQoYmFzZSk7XG4gICAgbGV0IHJlc29sdmVkO1xuICAgIGlmIChjYWNoZWQpIHtcbiAgICAgICAgcmVzb2x2ZWQgPSBjYWNoZWQ7XG4gICAgfVxuICAgIGVsc2UgaWYgKCFnbG9iYWxNaXhpbnMubGVuZ3RoICYmICFtaXhpbnMgJiYgIWV4dGVuZHNPcHRpb25zKSB7XG4gICAgICAgIHtcbiAgICAgICAgICAgIHJlc29sdmVkID0gYmFzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmVzb2x2ZWQgPSB7fTtcbiAgICAgICAgaWYgKGdsb2JhbE1peGlucy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGdsb2JhbE1peGlucy5mb3JFYWNoKG0gPT4gbWVyZ2VPcHRpb25zKHJlc29sdmVkLCBtLCBvcHRpb25NZXJnZVN0cmF0ZWdpZXMsIHRydWUpKTtcbiAgICAgICAgfVxuICAgICAgICBtZXJnZU9wdGlvbnMocmVzb2x2ZWQsIGJhc2UsIG9wdGlvbk1lcmdlU3RyYXRlZ2llcyk7XG4gICAgfVxuICAgIGlmIChpc09iamVjdChiYXNlKSkge1xuICAgICAgICBjYWNoZS5zZXQoYmFzZSwgcmVzb2x2ZWQpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzb2x2ZWQ7XG59XG5mdW5jdGlvbiBtZXJnZU9wdGlvbnModG8sIGZyb20sIHN0cmF0cywgYXNNaXhpbiA9IGZhbHNlKSB7XG4gICAgY29uc3QgeyBtaXhpbnMsIGV4dGVuZHM6IGV4dGVuZHNPcHRpb25zIH0gPSBmcm9tO1xuICAgIGlmIChleHRlbmRzT3B0aW9ucykge1xuICAgICAgICBtZXJnZU9wdGlvbnModG8sIGV4dGVuZHNPcHRpb25zLCBzdHJhdHMsIHRydWUpO1xuICAgIH1cbiAgICBpZiAobWl4aW5zKSB7XG4gICAgICAgIG1peGlucy5mb3JFYWNoKChtKSA9PiBtZXJnZU9wdGlvbnModG8sIG0sIHN0cmF0cywgdHJ1ZSkpO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGtleSBpbiBmcm9tKSB7XG4gICAgICAgIGlmIChhc01peGluICYmIGtleSA9PT0gJ2V4cG9zZScpIHtcbiAgICAgICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxuICAgICAgICAgICAgICAgIHdhcm4oYFwiZXhwb3NlXCIgb3B0aW9uIGlzIGlnbm9yZWQgd2hlbiBkZWNsYXJlZCBpbiBtaXhpbnMgb3IgZXh0ZW5kcy4gYCArXG4gICAgICAgICAgICAgICAgICAgIGBJdCBzaG91bGQgb25seSBiZSBkZWNsYXJlZCBpbiB0aGUgYmFzZSBjb21wb25lbnQgaXRzZWxmLmApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3Qgc3RyYXQgPSBpbnRlcm5hbE9wdGlvbk1lcmdlU3RyYXRzW2tleV0gfHwgKHN0cmF0cyAmJiBzdHJhdHNba2V5XSk7XG4gICAgICAgICAgICB0b1trZXldID0gc3RyYXQgPyBzdHJhdCh0b1trZXldLCBmcm9tW2tleV0pIDogZnJvbVtrZXldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0bztcbn1cbmNvbnN0IGludGVybmFsT3B0aW9uTWVyZ2VTdHJhdHMgPSB7XG4gICAgZGF0YTogbWVyZ2VEYXRhRm4sXG4gICAgcHJvcHM6IG1lcmdlT2JqZWN0T3B0aW9ucyxcbiAgICBlbWl0czogbWVyZ2VPYmplY3RPcHRpb25zLFxuICAgIC8vIG9iamVjdHNcbiAgICBtZXRob2RzOiBtZXJnZU9iamVjdE9wdGlvbnMsXG4gICAgY29tcHV0ZWQ6IG1lcmdlT2JqZWN0T3B0aW9ucyxcbiAgICAvLyBsaWZlY3ljbGVcbiAgICBiZWZvcmVDcmVhdGU6IG1lcmdlQXNBcnJheSxcbiAgICBjcmVhdGVkOiBtZXJnZUFzQXJyYXksXG4gICAgYmVmb3JlTW91bnQ6IG1lcmdlQXNBcnJheSxcbiAgICBtb3VudGVkOiBtZXJnZUFzQXJyYXksXG4gICAgYmVmb3JlVXBkYXRlOiBtZXJnZUFzQXJyYXksXG4gICAgdXBkYXRlZDogbWVyZ2VBc0FycmF5LFxuICAgIGJlZm9yZURlc3Ryb3k6IG1lcmdlQXNBcnJheSxcbiAgICBiZWZvcmVVbm1vdW50OiBtZXJnZUFzQXJyYXksXG4gICAgZGVzdHJveWVkOiBtZXJnZUFzQXJyYXksXG4gICAgdW5tb3VudGVkOiBtZXJnZUFzQXJyYXksXG4gICAgYWN0aXZhdGVkOiBtZXJnZUFzQXJyYXksXG4gICAgZGVhY3RpdmF0ZWQ6IG1lcmdlQXNBcnJheSxcbiAgICBlcnJvckNhcHR1cmVkOiBtZXJnZUFzQXJyYXksXG4gICAgc2VydmVyUHJlZmV0Y2g6IG1lcmdlQXNBcnJheSxcbiAgICAvLyBhc3NldHNcbiAgICBjb21wb25lbnRzOiBtZXJnZU9iamVjdE9wdGlvbnMsXG4gICAgZGlyZWN0aXZlczogbWVyZ2VPYmplY3RPcHRpb25zLFxuICAgIC8vIHdhdGNoXG4gICAgd2F0Y2g6IG1lcmdlV2F0Y2hPcHRpb25zLFxuICAgIC8vIHByb3ZpZGUgLyBpbmplY3RcbiAgICBwcm92aWRlOiBtZXJnZURhdGFGbixcbiAgICBpbmplY3Q6IG1lcmdlSW5qZWN0XG59O1xuZnVuY3Rpb24gbWVyZ2VEYXRhRm4odG8sIGZyb20pIHtcbiAgICBpZiAoIWZyb20pIHtcbiAgICAgICAgcmV0dXJuIHRvO1xuICAgIH1cbiAgICBpZiAoIXRvKSB7XG4gICAgICAgIHJldHVybiBmcm9tO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gbWVyZ2VkRGF0YUZuKCkge1xuICAgICAgICByZXR1cm4gKGV4dGVuZCkoaXNGdW5jdGlvbih0bykgPyB0by5jYWxsKHRoaXMsIHRoaXMpIDogdG8sIGlzRnVuY3Rpb24oZnJvbSkgPyBmcm9tLmNhbGwodGhpcywgdGhpcykgOiBmcm9tKTtcbiAgICB9O1xufVxuZnVuY3Rpb24gbWVyZ2VJbmplY3QodG8sIGZyb20pIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3RPcHRpb25zKG5vcm1hbGl6ZUluamVjdCh0byksIG5vcm1hbGl6ZUluamVjdChmcm9tKSk7XG59XG5mdW5jdGlvbiBub3JtYWxpemVJbmplY3QocmF3KSB7XG4gICAgaWYgKGlzQXJyYXkocmF3KSkge1xuICAgICAgICBjb25zdCByZXMgPSB7fTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByYXcubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHJlc1tyYXdbaV1dID0gcmF3W2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxuICAgIHJldHVybiByYXc7XG59XG5mdW5jdGlvbiBtZXJnZUFzQXJyYXkodG8sIGZyb20pIHtcbiAgICByZXR1cm4gdG8gPyBbLi4ubmV3IFNldChbXS5jb25jYXQodG8sIGZyb20pKV0gOiBmcm9tO1xufVxuZnVuY3Rpb24gbWVyZ2VPYmplY3RPcHRpb25zKHRvLCBmcm9tKSB7XG4gICAgcmV0dXJuIHRvID8gZXh0ZW5kKGV4dGVuZChPYmplY3QuY3JlYXRlKG51bGwpLCB0byksIGZyb20pIDogZnJvbTtcbn1cbmZ1bmN0aW9uIG1lcmdlV2F0Y2hPcHRpb25zKHRvLCBmcm9tKSB7XG4gICAgaWYgKCF0bylcbiAgICAgICAgcmV0dXJuIGZyb207XG4gICAgaWYgKCFmcm9tKVxuICAgICAgICByZXR1cm4gdG87XG4gICAgY29uc3QgbWVyZ2VkID0gZXh0ZW5kKE9iamVjdC5jcmVhdGUobnVsbCksIHRvKTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBmcm9tKSB7XG4gICAgICAgIG1lcmdlZFtrZXldID0gbWVyZ2VBc0FycmF5KHRvW2tleV0sIGZyb21ba2V5XSk7XG4gICAgfVxuICAgIHJldHVybiBtZXJnZWQ7XG59XG5cbmZ1bmN0aW9uIGluaXRQcm9wcyhpbnN0YW5jZSwgcmF3UHJvcHMsIGlzU3RhdGVmdWwsIC8vIHJlc3VsdCBvZiBiaXR3aXNlIGZsYWcgY29tcGFyaXNvblxuaXNTU1IgPSBmYWxzZSkge1xuICAgIGNvbnN0IHByb3BzID0ge307XG4gICAgY29uc3QgYXR0cnMgPSB7fTtcbiAgICBkZWYoYXR0cnMsIEludGVybmFsT2JqZWN0S2V5LCAxKTtcbiAgICBpbnN0YW5jZS5wcm9wc0RlZmF1bHRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICBzZXRGdWxsUHJvcHMoaW5zdGFuY2UsIHJhd1Byb3BzLCBwcm9wcywgYXR0cnMpO1xuICAgIC8vIGVuc3VyZSBhbGwgZGVjbGFyZWQgcHJvcCBrZXlzIGFyZSBwcmVzZW50XG4gICAgZm9yIChjb25zdCBrZXkgaW4gaW5zdGFuY2UucHJvcHNPcHRpb25zWzBdKSB7XG4gICAgICAgIGlmICghKGtleSBpbiBwcm9wcykpIHtcbiAgICAgICAgICAgIHByb3BzW2tleV0gPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gdmFsaWRhdGlvblxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgdmFsaWRhdGVQcm9wcyhyYXdQcm9wcyB8fCB7fSwgcHJvcHMsIGluc3RhbmNlKTtcbiAgICB9XG4gICAgaWYgKGlzU3RhdGVmdWwpIHtcbiAgICAgICAgLy8gc3RhdGVmdWxcbiAgICAgICAgaW5zdGFuY2UucHJvcHMgPSBpc1NTUiA/IHByb3BzIDogc2hhbGxvd1JlYWN0aXZlKHByb3BzKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmICghaW5zdGFuY2UudHlwZS5wcm9wcykge1xuICAgICAgICAgICAgLy8gZnVuY3Rpb25hbCB3LyBvcHRpb25hbCBwcm9wcywgcHJvcHMgPT09IGF0dHJzXG4gICAgICAgICAgICBpbnN0YW5jZS5wcm9wcyA9IGF0dHJzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gZnVuY3Rpb25hbCB3LyBkZWNsYXJlZCBwcm9wc1xuICAgICAgICAgICAgaW5zdGFuY2UucHJvcHMgPSBwcm9wcztcbiAgICAgICAgfVxuICAgIH1cbiAgICBpbnN0YW5jZS5hdHRycyA9IGF0dHJzO1xufVxuZnVuY3Rpb24gaXNJbkhtckNvbnRleHQoaW5zdGFuY2UpIHtcbiAgICB3aGlsZSAoaW5zdGFuY2UpIHtcbiAgICAgICAgaWYgKGluc3RhbmNlLnR5cGUuX19obXJJZClcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBpbnN0YW5jZSA9IGluc3RhbmNlLnBhcmVudDtcbiAgICB9XG59XG5mdW5jdGlvbiB1cGRhdGVQcm9wcyhpbnN0YW5jZSwgcmF3UHJvcHMsIHJhd1ByZXZQcm9wcywgb3B0aW1pemVkKSB7XG4gICAgY29uc3QgeyBwcm9wcywgYXR0cnMsIHZub2RlOiB7IHBhdGNoRmxhZyB9IH0gPSBpbnN0YW5jZTtcbiAgICBjb25zdCByYXdDdXJyZW50UHJvcHMgPSB0b1Jhdyhwcm9wcyk7XG4gICAgY29uc3QgW29wdGlvbnNdID0gaW5zdGFuY2UucHJvcHNPcHRpb25zO1xuICAgIGxldCBoYXNBdHRyc0NoYW5nZWQgPSBmYWxzZTtcbiAgICBpZiAoXG4gICAgLy8gYWx3YXlzIGZvcmNlIGZ1bGwgZGlmZiBpbiBkZXZcbiAgICAvLyAtICMxOTQyIGlmIGhtciBpcyBlbmFibGVkIHdpdGggc2ZjIGNvbXBvbmVudFxuICAgIC8vIC0gdml0ZSM4NzIgbm9uLXNmYyBjb21wb25lbnQgdXNlZCBieSBzZmMgY29tcG9uZW50XG4gICAgISgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgaXNJbkhtckNvbnRleHQoaW5zdGFuY2UpKSAmJlxuICAgICAgICAob3B0aW1pemVkIHx8IHBhdGNoRmxhZyA+IDApICYmXG4gICAgICAgICEocGF0Y2hGbGFnICYgMTYgLyogUGF0Y2hGbGFncy5GVUxMX1BST1BTICovKSkge1xuICAgICAgICBpZiAocGF0Y2hGbGFnICYgOCAvKiBQYXRjaEZsYWdzLlBST1BTICovKSB7XG4gICAgICAgICAgICAvLyBDb21waWxlci1nZW5lcmF0ZWQgcHJvcHMgJiBubyBrZXlzIGNoYW5nZSwganVzdCBzZXQgdGhlIHVwZGF0ZWRcbiAgICAgICAgICAgIC8vIHRoZSBwcm9wcy5cbiAgICAgICAgICAgIGNvbnN0IHByb3BzVG9VcGRhdGUgPSBpbnN0YW5jZS52bm9kZS5keW5hbWljUHJvcHM7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByb3BzVG9VcGRhdGUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQga2V5ID0gcHJvcHNUb1VwZGF0ZVtpXTtcbiAgICAgICAgICAgICAgICAvLyBza2lwIGlmIHRoZSBwcm9wIGtleSBpcyBhIGRlY2xhcmVkIGVtaXQgZXZlbnQgbGlzdGVuZXJcbiAgICAgICAgICAgICAgICBpZiAoaXNFbWl0TGlzdGVuZXIoaW5zdGFuY2UuZW1pdHNPcHRpb25zLCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBQUk9QUyBmbGFnIGd1YXJhbnRlZXMgcmF3UHJvcHMgdG8gYmUgbm9uLW51bGxcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHJhd1Byb3BzW2tleV07XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gYXR0ciAvIHByb3BzIHNlcGFyYXRpb24gd2FzIGRvbmUgb24gaW5pdCBhbmQgd2lsbCBiZSBjb25zaXN0ZW50XG4gICAgICAgICAgICAgICAgICAgIC8vIGluIHRoaXMgY29kZSBwYXRoLCBzbyBqdXN0IGNoZWNrIGlmIGF0dHJzIGhhdmUgaXQuXG4gICAgICAgICAgICAgICAgICAgIGlmIChoYXNPd24oYXR0cnMsIGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gYXR0cnNba2V5XSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNBdHRyc0NoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FtZWxpemVkS2V5ID0gY2FtZWxpemUoa2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzW2NhbWVsaXplZEtleV0gPSByZXNvbHZlUHJvcFZhbHVlKG9wdGlvbnMsIHJhd0N1cnJlbnRQcm9wcywgY2FtZWxpemVkS2V5LCB2YWx1ZSwgaW5zdGFuY2UsIGZhbHNlIC8qIGlzQWJzZW50ICovKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9PSBhdHRyc1trZXldKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyc1trZXldID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNBdHRyc0NoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBmdWxsIHByb3BzIHVwZGF0ZS5cbiAgICAgICAgaWYgKHNldEZ1bGxQcm9wcyhpbnN0YW5jZSwgcmF3UHJvcHMsIHByb3BzLCBhdHRycykpIHtcbiAgICAgICAgICAgIGhhc0F0dHJzQ2hhbmdlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaW4gY2FzZSBvZiBkeW5hbWljIHByb3BzLCBjaGVjayBpZiB3ZSBuZWVkIHRvIGRlbGV0ZSBrZXlzIGZyb21cbiAgICAgICAgLy8gdGhlIHByb3BzIG9iamVjdFxuICAgICAgICBsZXQga2ViYWJLZXk7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHJhd0N1cnJlbnRQcm9wcykge1xuICAgICAgICAgICAgaWYgKCFyYXdQcm9wcyB8fFxuICAgICAgICAgICAgICAgIC8vIGZvciBjYW1lbENhc2VcbiAgICAgICAgICAgICAgICAoIWhhc093bihyYXdQcm9wcywga2V5KSAmJlxuICAgICAgICAgICAgICAgICAgICAvLyBpdCdzIHBvc3NpYmxlIHRoZSBvcmlnaW5hbCBwcm9wcyB3YXMgcGFzc2VkIGluIGFzIGtlYmFiLWNhc2VcbiAgICAgICAgICAgICAgICAgICAgLy8gYW5kIGNvbnZlcnRlZCB0byBjYW1lbENhc2UgKCM5NTUpXG4gICAgICAgICAgICAgICAgICAgICgoa2ViYWJLZXkgPSBoeXBoZW5hdGUoa2V5KSkgPT09IGtleSB8fCAhaGFzT3duKHJhd1Byb3BzLCBrZWJhYktleSkpKSkge1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyYXdQcmV2UHJvcHMgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZvciBjYW1lbENhc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIChyYXdQcmV2UHJvcHNba2V5XSAhPT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZm9yIGtlYmFiLWNhc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYXdQcmV2UHJvcHNba2ViYWJLZXldICE9PSB1bmRlZmluZWQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wc1trZXldID0gcmVzb2x2ZVByb3BWYWx1ZShvcHRpb25zLCByYXdDdXJyZW50UHJvcHMsIGtleSwgdW5kZWZpbmVkLCBpbnN0YW5jZSwgdHJ1ZSAvKiBpc0Fic2VudCAqLyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBwcm9wc1trZXldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBpbiB0aGUgY2FzZSBvZiBmdW5jdGlvbmFsIGNvbXBvbmVudCB3L28gcHJvcHMgZGVjbGFyYXRpb24sIHByb3BzIGFuZFxuICAgICAgICAvLyBhdHRycyBwb2ludCB0byB0aGUgc2FtZSBvYmplY3Qgc28gaXQgc2hvdWxkIGFscmVhZHkgaGF2ZSBiZWVuIHVwZGF0ZWQuXG4gICAgICAgIGlmIChhdHRycyAhPT0gcmF3Q3VycmVudFByb3BzKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBhdHRycykge1xuICAgICAgICAgICAgICAgIGlmICghcmF3UHJvcHMgfHxcbiAgICAgICAgICAgICAgICAgICAgKCFoYXNPd24ocmF3UHJvcHMsIGtleSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICghZmFsc2UgKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGF0dHJzW2tleV07XG4gICAgICAgICAgICAgICAgICAgIGhhc0F0dHJzQ2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8vIHRyaWdnZXIgdXBkYXRlcyBmb3IgJGF0dHJzIGluIGNhc2UgaXQncyB1c2VkIGluIGNvbXBvbmVudCBzbG90c1xuICAgIGlmIChoYXNBdHRyc0NoYW5nZWQpIHtcbiAgICAgICAgdHJpZ2dlcihpbnN0YW5jZSwgXCJzZXRcIiAvKiBUcmlnZ2VyT3BUeXBlcy5TRVQgKi8sICckYXR0cnMnKTtcbiAgICB9XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICB2YWxpZGF0ZVByb3BzKHJhd1Byb3BzIHx8IHt9LCBwcm9wcywgaW5zdGFuY2UpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHNldEZ1bGxQcm9wcyhpbnN0YW5jZSwgcmF3UHJvcHMsIHByb3BzLCBhdHRycykge1xuICAgIGNvbnN0IFtvcHRpb25zLCBuZWVkQ2FzdEtleXNdID0gaW5zdGFuY2UucHJvcHNPcHRpb25zO1xuICAgIGxldCBoYXNBdHRyc0NoYW5nZWQgPSBmYWxzZTtcbiAgICBsZXQgcmF3Q2FzdFZhbHVlcztcbiAgICBpZiAocmF3UHJvcHMpIHtcbiAgICAgICAgZm9yIChsZXQga2V5IGluIHJhd1Byb3BzKSB7XG4gICAgICAgICAgICAvLyBrZXksIHJlZiBhcmUgcmVzZXJ2ZWQgYW5kIG5ldmVyIHBhc3NlZCBkb3duXG4gICAgICAgICAgICBpZiAoaXNSZXNlcnZlZFByb3Aoa2V5KSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSByYXdQcm9wc1trZXldO1xuICAgICAgICAgICAgLy8gcHJvcCBvcHRpb24gbmFtZXMgYXJlIGNhbWVsaXplZCBkdXJpbmcgbm9ybWFsaXphdGlvbiwgc28gdG8gc3VwcG9ydFxuICAgICAgICAgICAgLy8ga2ViYWIgLT4gY2FtZWwgY29udmVyc2lvbiBoZXJlIHdlIG5lZWQgdG8gY2FtZWxpemUgdGhlIGtleS5cbiAgICAgICAgICAgIGxldCBjYW1lbEtleTtcbiAgICAgICAgICAgIGlmIChvcHRpb25zICYmIGhhc093bihvcHRpb25zLCAoY2FtZWxLZXkgPSBjYW1lbGl6ZShrZXkpKSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW5lZWRDYXN0S2V5cyB8fCAhbmVlZENhc3RLZXlzLmluY2x1ZGVzKGNhbWVsS2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBwcm9wc1tjYW1lbEtleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIChyYXdDYXN0VmFsdWVzIHx8IChyYXdDYXN0VmFsdWVzID0ge30pKVtjYW1lbEtleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghaXNFbWl0TGlzdGVuZXIoaW5zdGFuY2UuZW1pdHNPcHRpb25zLCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEoa2V5IGluIGF0dHJzKSB8fCB2YWx1ZSAhPT0gYXR0cnNba2V5XSkge1xuICAgICAgICAgICAgICAgICAgICBhdHRyc1trZXldID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGhhc0F0dHJzQ2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChuZWVkQ2FzdEtleXMpIHtcbiAgICAgICAgY29uc3QgcmF3Q3VycmVudFByb3BzID0gdG9SYXcocHJvcHMpO1xuICAgICAgICBjb25zdCBjYXN0VmFsdWVzID0gcmF3Q2FzdFZhbHVlcyB8fCBFTVBUWV9PQko7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmVlZENhc3RLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBrZXkgPSBuZWVkQ2FzdEtleXNbaV07XG4gICAgICAgICAgICBwcm9wc1trZXldID0gcmVzb2x2ZVByb3BWYWx1ZShvcHRpb25zLCByYXdDdXJyZW50UHJvcHMsIGtleSwgY2FzdFZhbHVlc1trZXldLCBpbnN0YW5jZSwgIWhhc093bihjYXN0VmFsdWVzLCBrZXkpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaGFzQXR0cnNDaGFuZ2VkO1xufVxuZnVuY3Rpb24gcmVzb2x2ZVByb3BWYWx1ZShvcHRpb25zLCBwcm9wcywga2V5LCB2YWx1ZSwgaW5zdGFuY2UsIGlzQWJzZW50KSB7XG4gICAgY29uc3Qgb3B0ID0gb3B0aW9uc1trZXldO1xuICAgIGlmIChvcHQgIT0gbnVsbCkge1xuICAgICAgICBjb25zdCBoYXNEZWZhdWx0ID0gaGFzT3duKG9wdCwgJ2RlZmF1bHQnKTtcbiAgICAgICAgLy8gZGVmYXVsdCB2YWx1ZXNcbiAgICAgICAgaWYgKGhhc0RlZmF1bHQgJiYgdmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgZGVmYXVsdFZhbHVlID0gb3B0LmRlZmF1bHQ7XG4gICAgICAgICAgICBpZiAob3B0LnR5cGUgIT09IEZ1bmN0aW9uICYmIGlzRnVuY3Rpb24oZGVmYXVsdFZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgcHJvcHNEZWZhdWx0cyB9ID0gaW5zdGFuY2U7XG4gICAgICAgICAgICAgICAgaWYgKGtleSBpbiBwcm9wc0RlZmF1bHRzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gcHJvcHNEZWZhdWx0c1trZXldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0Q3VycmVudEluc3RhbmNlKGluc3RhbmNlKTtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBwcm9wc0RlZmF1bHRzW2tleV0gPSBkZWZhdWx0VmFsdWUuY2FsbChudWxsLCBwcm9wcyk7XG4gICAgICAgICAgICAgICAgICAgIHVuc2V0Q3VycmVudEluc3RhbmNlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBkZWZhdWx0VmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gYm9vbGVhbiBjYXN0aW5nXG4gICAgICAgIGlmIChvcHRbMCAvKiBCb29sZWFuRmxhZ3Muc2hvdWxkQ2FzdCAqL10pIHtcbiAgICAgICAgICAgIGlmIChpc0Fic2VudCAmJiAhaGFzRGVmYXVsdCkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChvcHRbMSAvKiBCb29sZWFuRmxhZ3Muc2hvdWxkQ2FzdFRydWUgKi9dICYmXG4gICAgICAgICAgICAgICAgKHZhbHVlID09PSAnJyB8fCB2YWx1ZSA9PT0gaHlwaGVuYXRlKGtleSkpKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZVByb3BzT3B0aW9ucyhjb21wLCBhcHBDb250ZXh0LCBhc01peGluID0gZmFsc2UpIHtcbiAgICBjb25zdCBjYWNoZSA9IGFwcENvbnRleHQucHJvcHNDYWNoZTtcbiAgICBjb25zdCBjYWNoZWQgPSBjYWNoZS5nZXQoY29tcCk7XG4gICAgaWYgKGNhY2hlZCkge1xuICAgICAgICByZXR1cm4gY2FjaGVkO1xuICAgIH1cbiAgICBjb25zdCByYXcgPSBjb21wLnByb3BzO1xuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSB7fTtcbiAgICBjb25zdCBuZWVkQ2FzdEtleXMgPSBbXTtcbiAgICAvLyBhcHBseSBtaXhpbi9leHRlbmRzIHByb3BzXG4gICAgbGV0IGhhc0V4dGVuZHMgPSBmYWxzZTtcbiAgICBpZiAoX19WVUVfT1BUSU9OU19BUElfXyAmJiAhaXNGdW5jdGlvbihjb21wKSkge1xuICAgICAgICBjb25zdCBleHRlbmRQcm9wcyA9IChyYXcpID0+IHtcbiAgICAgICAgICAgIGhhc0V4dGVuZHMgPSB0cnVlO1xuICAgICAgICAgICAgY29uc3QgW3Byb3BzLCBrZXlzXSA9IG5vcm1hbGl6ZVByb3BzT3B0aW9ucyhyYXcsIGFwcENvbnRleHQsIHRydWUpO1xuICAgICAgICAgICAgZXh0ZW5kKG5vcm1hbGl6ZWQsIHByb3BzKTtcbiAgICAgICAgICAgIGlmIChrZXlzKVxuICAgICAgICAgICAgICAgIG5lZWRDYXN0S2V5cy5wdXNoKC4uLmtleXMpO1xuICAgICAgICB9O1xuICAgICAgICBpZiAoIWFzTWl4aW4gJiYgYXBwQ29udGV4dC5taXhpbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICBhcHBDb250ZXh0Lm1peGlucy5mb3JFYWNoKGV4dGVuZFByb3BzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29tcC5leHRlbmRzKSB7XG4gICAgICAgICAgICBleHRlbmRQcm9wcyhjb21wLmV4dGVuZHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb21wLm1peGlucykge1xuICAgICAgICAgICAgY29tcC5taXhpbnMuZm9yRWFjaChleHRlbmRQcm9wcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFyYXcgJiYgIWhhc0V4dGVuZHMpIHtcbiAgICAgICAgaWYgKGlzT2JqZWN0KGNvbXApKSB7XG4gICAgICAgICAgICBjYWNoZS5zZXQoY29tcCwgRU1QVFlfQVJSKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gRU1QVFlfQVJSO1xuICAgIH1cbiAgICBpZiAoaXNBcnJheShyYXcpKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmF3Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFpc1N0cmluZyhyYXdbaV0pKSB7XG4gICAgICAgICAgICAgICAgd2FybihgcHJvcHMgbXVzdCBiZSBzdHJpbmdzIHdoZW4gdXNpbmcgYXJyYXkgc3ludGF4LmAsIHJhd1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkS2V5ID0gY2FtZWxpemUocmF3W2ldKTtcbiAgICAgICAgICAgIGlmICh2YWxpZGF0ZVByb3BOYW1lKG5vcm1hbGl6ZWRLZXkpKSB7XG4gICAgICAgICAgICAgICAgbm9ybWFsaXplZFtub3JtYWxpemVkS2V5XSA9IEVNUFRZX09CSjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChyYXcpIHtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhaXNPYmplY3QocmF3KSkge1xuICAgICAgICAgICAgd2FybihgaW52YWxpZCBwcm9wcyBvcHRpb25zYCwgcmF3KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiByYXcpIHtcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRLZXkgPSBjYW1lbGl6ZShrZXkpO1xuICAgICAgICAgICAgaWYgKHZhbGlkYXRlUHJvcE5hbWUobm9ybWFsaXplZEtleSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvcHQgPSByYXdba2V5XTtcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9wID0gKG5vcm1hbGl6ZWRbbm9ybWFsaXplZEtleV0gPVxuICAgICAgICAgICAgICAgICAgICBpc0FycmF5KG9wdCkgfHwgaXNGdW5jdGlvbihvcHQpID8geyB0eXBlOiBvcHQgfSA6IE9iamVjdC5hc3NpZ24oe30sIG9wdCkpO1xuICAgICAgICAgICAgICAgIGlmIChwcm9wKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJvb2xlYW5JbmRleCA9IGdldFR5cGVJbmRleChCb29sZWFuLCBwcm9wLnR5cGUpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHJpbmdJbmRleCA9IGdldFR5cGVJbmRleChTdHJpbmcsIHByb3AudHlwZSk7XG4gICAgICAgICAgICAgICAgICAgIHByb3BbMCAvKiBCb29sZWFuRmxhZ3Muc2hvdWxkQ2FzdCAqL10gPSBib29sZWFuSW5kZXggPiAtMTtcbiAgICAgICAgICAgICAgICAgICAgcHJvcFsxIC8qIEJvb2xlYW5GbGFncy5zaG91bGRDYXN0VHJ1ZSAqL10gPVxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nSW5kZXggPCAwIHx8IGJvb2xlYW5JbmRleCA8IHN0cmluZ0luZGV4O1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGUgcHJvcCBuZWVkcyBib29sZWFuIGNhc3Rpbmcgb3IgZGVmYXVsdCB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICBpZiAoYm9vbGVhbkluZGV4ID4gLTEgfHwgaGFzT3duKHByb3AsICdkZWZhdWx0JykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5lZWRDYXN0S2V5cy5wdXNoKG5vcm1hbGl6ZWRLZXkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHJlcyA9IFtub3JtYWxpemVkLCBuZWVkQ2FzdEtleXNdO1xuICAgIGlmIChpc09iamVjdChjb21wKSkge1xuICAgICAgICBjYWNoZS5zZXQoY29tcCwgcmVzKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn1cbmZ1bmN0aW9uIHZhbGlkYXRlUHJvcE5hbWUoa2V5KSB7XG4gICAgaWYgKGtleVswXSAhPT0gJyQnKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgd2FybihgSW52YWxpZCBwcm9wIG5hbWU6IFwiJHtrZXl9XCIgaXMgYSByZXNlcnZlZCBwcm9wZXJ0eS5gKTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuLy8gdXNlIGZ1bmN0aW9uIHN0cmluZyBuYW1lIHRvIGNoZWNrIHR5cGUgY29uc3RydWN0b3JzXG4vLyBzbyB0aGF0IGl0IHdvcmtzIGFjcm9zcyB2bXMgLyBpZnJhbWVzLlxuZnVuY3Rpb24gZ2V0VHlwZShjdG9yKSB7XG4gICAgY29uc3QgbWF0Y2ggPSBjdG9yICYmIGN0b3IudG9TdHJpbmcoKS5tYXRjaCgvXlxccypmdW5jdGlvbiAoXFx3KykvKTtcbiAgICByZXR1cm4gbWF0Y2ggPyBtYXRjaFsxXSA6IGN0b3IgPT09IG51bGwgPyAnbnVsbCcgOiAnJztcbn1cbmZ1bmN0aW9uIGlzU2FtZVR5cGUoYSwgYikge1xuICAgIHJldHVybiBnZXRUeXBlKGEpID09PSBnZXRUeXBlKGIpO1xufVxuZnVuY3Rpb24gZ2V0VHlwZUluZGV4KHR5cGUsIGV4cGVjdGVkVHlwZXMpIHtcbiAgICBpZiAoaXNBcnJheShleHBlY3RlZFR5cGVzKSkge1xuICAgICAgICByZXR1cm4gZXhwZWN0ZWRUeXBlcy5maW5kSW5kZXgodCA9PiBpc1NhbWVUeXBlKHQsIHR5cGUpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNGdW5jdGlvbihleHBlY3RlZFR5cGVzKSkge1xuICAgICAgICByZXR1cm4gaXNTYW1lVHlwZShleHBlY3RlZFR5cGVzLCB0eXBlKSA/IDAgOiAtMTtcbiAgICB9XG4gICAgcmV0dXJuIC0xO1xufVxuLyoqXG4gKiBkZXYgb25seVxuICovXG5mdW5jdGlvbiB2YWxpZGF0ZVByb3BzKHJhd1Byb3BzLCBwcm9wcywgaW5zdGFuY2UpIHtcbiAgICBjb25zdCByZXNvbHZlZFZhbHVlcyA9IHRvUmF3KHByb3BzKTtcbiAgICBjb25zdCBvcHRpb25zID0gaW5zdGFuY2UucHJvcHNPcHRpb25zWzBdO1xuICAgIGZvciAoY29uc3Qga2V5IGluIG9wdGlvbnMpIHtcbiAgICAgICAgbGV0IG9wdCA9IG9wdGlvbnNba2V5XTtcbiAgICAgICAgaWYgKG9wdCA9PSBudWxsKVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIHZhbGlkYXRlUHJvcChrZXksIHJlc29sdmVkVmFsdWVzW2tleV0sIG9wdCwgIWhhc093bihyYXdQcm9wcywga2V5KSAmJiAhaGFzT3duKHJhd1Byb3BzLCBoeXBoZW5hdGUoa2V5KSkpO1xuICAgIH1cbn1cbi8qKlxuICogZGV2IG9ubHlcbiAqL1xuZnVuY3Rpb24gdmFsaWRhdGVQcm9wKG5hbWUsIHZhbHVlLCBwcm9wLCBpc0Fic2VudCkge1xuICAgIGNvbnN0IHsgdHlwZSwgcmVxdWlyZWQsIHZhbGlkYXRvciB9ID0gcHJvcDtcbiAgICAvLyByZXF1aXJlZCFcbiAgICBpZiAocmVxdWlyZWQgJiYgaXNBYnNlbnQpIHtcbiAgICAgICAgd2FybignTWlzc2luZyByZXF1aXJlZCBwcm9wOiBcIicgKyBuYW1lICsgJ1wiJyk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gbWlzc2luZyBidXQgb3B0aW9uYWxcbiAgICBpZiAodmFsdWUgPT0gbnVsbCAmJiAhcHJvcC5yZXF1aXJlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIHR5cGUgY2hlY2tcbiAgICBpZiAodHlwZSAhPSBudWxsICYmIHR5cGUgIT09IHRydWUpIHtcbiAgICAgICAgbGV0IGlzVmFsaWQgPSBmYWxzZTtcbiAgICAgICAgY29uc3QgdHlwZXMgPSBpc0FycmF5KHR5cGUpID8gdHlwZSA6IFt0eXBlXTtcbiAgICAgICAgY29uc3QgZXhwZWN0ZWRUeXBlcyA9IFtdO1xuICAgICAgICAvLyB2YWx1ZSBpcyB2YWxpZCBhcyBsb25nIGFzIG9uZSBvZiB0aGUgc3BlY2lmaWVkIHR5cGVzIG1hdGNoXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHlwZXMubGVuZ3RoICYmICFpc1ZhbGlkOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHsgdmFsaWQsIGV4cGVjdGVkVHlwZSB9ID0gYXNzZXJ0VHlwZSh2YWx1ZSwgdHlwZXNbaV0pO1xuICAgICAgICAgICAgZXhwZWN0ZWRUeXBlcy5wdXNoKGV4cGVjdGVkVHlwZSB8fCAnJyk7XG4gICAgICAgICAgICBpc1ZhbGlkID0gdmFsaWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc1ZhbGlkKSB7XG4gICAgICAgICAgICB3YXJuKGdldEludmFsaWRUeXBlTWVzc2FnZShuYW1lLCB2YWx1ZSwgZXhwZWN0ZWRUeXBlcykpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIGN1c3RvbSB2YWxpZGF0b3JcbiAgICBpZiAodmFsaWRhdG9yICYmICF2YWxpZGF0b3IodmFsdWUpKSB7XG4gICAgICAgIHdhcm4oJ0ludmFsaWQgcHJvcDogY3VzdG9tIHZhbGlkYXRvciBjaGVjayBmYWlsZWQgZm9yIHByb3AgXCInICsgbmFtZSArICdcIi4nKTtcbiAgICB9XG59XG5jb25zdCBpc1NpbXBsZVR5cGUgPSAvKiNfX1BVUkVfXyovIG1ha2VNYXAoJ1N0cmluZyxOdW1iZXIsQm9vbGVhbixGdW5jdGlvbixTeW1ib2wsQmlnSW50Jyk7XG4vKipcbiAqIGRldiBvbmx5XG4gKi9cbmZ1bmN0aW9uIGFzc2VydFR5cGUodmFsdWUsIHR5cGUpIHtcbiAgICBsZXQgdmFsaWQ7XG4gICAgY29uc3QgZXhwZWN0ZWRUeXBlID0gZ2V0VHlwZSh0eXBlKTtcbiAgICBpZiAoaXNTaW1wbGVUeXBlKGV4cGVjdGVkVHlwZSkpIHtcbiAgICAgICAgY29uc3QgdCA9IHR5cGVvZiB2YWx1ZTtcbiAgICAgICAgdmFsaWQgPSB0ID09PSBleHBlY3RlZFR5cGUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgLy8gZm9yIHByaW1pdGl2ZSB3cmFwcGVyIG9iamVjdHNcbiAgICAgICAgaWYgKCF2YWxpZCAmJiB0ID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgdmFsaWQgPSB2YWx1ZSBpbnN0YW5jZW9mIHR5cGU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoZXhwZWN0ZWRUeXBlID09PSAnT2JqZWN0Jykge1xuICAgICAgICB2YWxpZCA9IGlzT2JqZWN0KHZhbHVlKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZXhwZWN0ZWRUeXBlID09PSAnQXJyYXknKSB7XG4gICAgICAgIHZhbGlkID0gaXNBcnJheSh2YWx1ZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGV4cGVjdGVkVHlwZSA9PT0gJ251bGwnKSB7XG4gICAgICAgIHZhbGlkID0gdmFsdWUgPT09IG51bGw7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YWxpZCA9IHZhbHVlIGluc3RhbmNlb2YgdHlwZTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdmFsaWQsXG4gICAgICAgIGV4cGVjdGVkVHlwZVxuICAgIH07XG59XG4vKipcbiAqIGRldiBvbmx5XG4gKi9cbmZ1bmN0aW9uIGdldEludmFsaWRUeXBlTWVzc2FnZShuYW1lLCB2YWx1ZSwgZXhwZWN0ZWRUeXBlcykge1xuICAgIGxldCBtZXNzYWdlID0gYEludmFsaWQgcHJvcDogdHlwZSBjaGVjayBmYWlsZWQgZm9yIHByb3AgXCIke25hbWV9XCIuYCArXG4gICAgICAgIGAgRXhwZWN0ZWQgJHtleHBlY3RlZFR5cGVzLm1hcChjYXBpdGFsaXplKS5qb2luKCcgfCAnKX1gO1xuICAgIGNvbnN0IGV4cGVjdGVkVHlwZSA9IGV4cGVjdGVkVHlwZXNbMF07XG4gICAgY29uc3QgcmVjZWl2ZWRUeXBlID0gdG9SYXdUeXBlKHZhbHVlKTtcbiAgICBjb25zdCBleHBlY3RlZFZhbHVlID0gc3R5bGVWYWx1ZSh2YWx1ZSwgZXhwZWN0ZWRUeXBlKTtcbiAgICBjb25zdCByZWNlaXZlZFZhbHVlID0gc3R5bGVWYWx1ZSh2YWx1ZSwgcmVjZWl2ZWRUeXBlKTtcbiAgICAvLyBjaGVjayBpZiB3ZSBuZWVkIHRvIHNwZWNpZnkgZXhwZWN0ZWQgdmFsdWVcbiAgICBpZiAoZXhwZWN0ZWRUeXBlcy5sZW5ndGggPT09IDEgJiZcbiAgICAgICAgaXNFeHBsaWNhYmxlKGV4cGVjdGVkVHlwZSkgJiZcbiAgICAgICAgIWlzQm9vbGVhbihleHBlY3RlZFR5cGUsIHJlY2VpdmVkVHlwZSkpIHtcbiAgICAgICAgbWVzc2FnZSArPSBgIHdpdGggdmFsdWUgJHtleHBlY3RlZFZhbHVlfWA7XG4gICAgfVxuICAgIG1lc3NhZ2UgKz0gYCwgZ290ICR7cmVjZWl2ZWRUeXBlfSBgO1xuICAgIC8vIGNoZWNrIGlmIHdlIG5lZWQgdG8gc3BlY2lmeSByZWNlaXZlZCB2YWx1ZVxuICAgIGlmIChpc0V4cGxpY2FibGUocmVjZWl2ZWRUeXBlKSkge1xuICAgICAgICBtZXNzYWdlICs9IGB3aXRoIHZhbHVlICR7cmVjZWl2ZWRWYWx1ZX0uYDtcbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG59XG4vKipcbiAqIGRldiBvbmx5XG4gKi9cbmZ1bmN0aW9uIHN0eWxlVmFsdWUodmFsdWUsIHR5cGUpIHtcbiAgICBpZiAodHlwZSA9PT0gJ1N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIGBcIiR7dmFsdWV9XCJgO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlID09PSAnTnVtYmVyJykge1xuICAgICAgICByZXR1cm4gYCR7TnVtYmVyKHZhbHVlKX1gO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGAke3ZhbHVlfWA7XG4gICAgfVxufVxuLyoqXG4gKiBkZXYgb25seVxuICovXG5mdW5jdGlvbiBpc0V4cGxpY2FibGUodHlwZSkge1xuICAgIGNvbnN0IGV4cGxpY2l0VHlwZXMgPSBbJ3N0cmluZycsICdudW1iZXInLCAnYm9vbGVhbiddO1xuICAgIHJldHVybiBleHBsaWNpdFR5cGVzLnNvbWUoZWxlbSA9PiB0eXBlLnRvTG93ZXJDYXNlKCkgPT09IGVsZW0pO1xufVxuLyoqXG4gKiBkZXYgb25seVxuICovXG5mdW5jdGlvbiBpc0Jvb2xlYW4oLi4uYXJncykge1xuICAgIHJldHVybiBhcmdzLnNvbWUoZWxlbSA9PiBlbGVtLnRvTG93ZXJDYXNlKCkgPT09ICdib29sZWFuJyk7XG59XG5cbmNvbnN0IGlzSW50ZXJuYWxLZXkgPSAoa2V5KSA9PiBrZXlbMF0gPT09ICdfJyB8fCBrZXkgPT09ICckc3RhYmxlJztcbmNvbnN0IG5vcm1hbGl6ZVNsb3RWYWx1ZSA9ICh2YWx1ZSkgPT4gaXNBcnJheSh2YWx1ZSlcbiAgICA/IHZhbHVlLm1hcChub3JtYWxpemVWTm9kZSlcbiAgICA6IFtub3JtYWxpemVWTm9kZSh2YWx1ZSldO1xuY29uc3Qgbm9ybWFsaXplU2xvdCA9IChrZXksIHJhd1Nsb3QsIGN0eCkgPT4ge1xuICAgIGlmIChyYXdTbG90Ll9uKSB7XG4gICAgICAgIC8vIGFscmVhZHkgbm9ybWFsaXplZCAtICM1MzUzXG4gICAgICAgIHJldHVybiByYXdTbG90O1xuICAgIH1cbiAgICBjb25zdCBub3JtYWxpemVkID0gd2l0aEN0eCgoLi4uYXJncykgPT4ge1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGN1cnJlbnRJbnN0YW5jZSkge1xuICAgICAgICAgICAgd2FybihgU2xvdCBcIiR7a2V5fVwiIGludm9rZWQgb3V0c2lkZSBvZiB0aGUgcmVuZGVyIGZ1bmN0aW9uOiBgICtcbiAgICAgICAgICAgICAgICBgdGhpcyB3aWxsIG5vdCB0cmFjayBkZXBlbmRlbmNpZXMgdXNlZCBpbiB0aGUgc2xvdC4gYCArXG4gICAgICAgICAgICAgICAgYEludm9rZSB0aGUgc2xvdCBmdW5jdGlvbiBpbnNpZGUgdGhlIHJlbmRlciBmdW5jdGlvbiBpbnN0ZWFkLmApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBub3JtYWxpemVTbG90VmFsdWUocmF3U2xvdCguLi5hcmdzKSk7XG4gICAgfSwgY3R4KTtcbiAgICBub3JtYWxpemVkLl9jID0gZmFsc2U7XG4gICAgcmV0dXJuIG5vcm1hbGl6ZWQ7XG59O1xuY29uc3Qgbm9ybWFsaXplT2JqZWN0U2xvdHMgPSAocmF3U2xvdHMsIHNsb3RzLCBpbnN0YW5jZSkgPT4ge1xuICAgIGNvbnN0IGN0eCA9IHJhd1Nsb3RzLl9jdHg7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gcmF3U2xvdHMpIHtcbiAgICAgICAgaWYgKGlzSW50ZXJuYWxLZXkoa2V5KSlcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHJhd1Nsb3RzW2tleV07XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkge1xuICAgICAgICAgICAgc2xvdHNba2V5XSA9IG5vcm1hbGl6ZVNsb3Qoa2V5LCB2YWx1ZSwgY3R4KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXG4gICAgICAgICAgICAgICAgIShmYWxzZSApKSB7XG4gICAgICAgICAgICAgICAgd2FybihgTm9uLWZ1bmN0aW9uIHZhbHVlIGVuY291bnRlcmVkIGZvciBzbG90IFwiJHtrZXl9XCIuIGAgK1xuICAgICAgICAgICAgICAgICAgICBgUHJlZmVyIGZ1bmN0aW9uIHNsb3RzIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2UuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkID0gbm9ybWFsaXplU2xvdFZhbHVlKHZhbHVlKTtcbiAgICAgICAgICAgIHNsb3RzW2tleV0gPSAoKSA9PiBub3JtYWxpemVkO1xuICAgICAgICB9XG4gICAgfVxufTtcbmNvbnN0IG5vcm1hbGl6ZVZOb2RlU2xvdHMgPSAoaW5zdGFuY2UsIGNoaWxkcmVuKSA9PiB7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxuICAgICAgICAhaXNLZWVwQWxpdmUoaW5zdGFuY2Uudm5vZGUpICYmXG4gICAgICAgICEoZmFsc2UgKSkge1xuICAgICAgICB3YXJuKGBOb24tZnVuY3Rpb24gdmFsdWUgZW5jb3VudGVyZWQgZm9yIGRlZmF1bHQgc2xvdC4gYCArXG4gICAgICAgICAgICBgUHJlZmVyIGZ1bmN0aW9uIHNsb3RzIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2UuYCk7XG4gICAgfVxuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBub3JtYWxpemVTbG90VmFsdWUoY2hpbGRyZW4pO1xuICAgIGluc3RhbmNlLnNsb3RzLmRlZmF1bHQgPSAoKSA9PiBub3JtYWxpemVkO1xufTtcbmNvbnN0IGluaXRTbG90cyA9IChpbnN0YW5jZSwgY2hpbGRyZW4pID0+IHtcbiAgICBpZiAoaW5zdGFuY2Uudm5vZGUuc2hhcGVGbGFnICYgMzIgLyogU2hhcGVGbGFncy5TTE9UU19DSElMRFJFTiAqLykge1xuICAgICAgICBjb25zdCB0eXBlID0gY2hpbGRyZW4uXztcbiAgICAgICAgaWYgKHR5cGUpIHtcbiAgICAgICAgICAgIC8vIHVzZXJzIGNhbiBnZXQgdGhlIHNoYWxsb3cgcmVhZG9ubHkgdmVyc2lvbiBvZiB0aGUgc2xvdHMgb2JqZWN0IHRocm91Z2ggYHRoaXMuJHNsb3RzYCxcbiAgICAgICAgICAgIC8vIHdlIHNob3VsZCBhdm9pZCB0aGUgcHJveHkgb2JqZWN0IHBvbGx1dGluZyB0aGUgc2xvdHMgb2YgdGhlIGludGVybmFsIGluc3RhbmNlXG4gICAgICAgICAgICBpbnN0YW5jZS5zbG90cyA9IHRvUmF3KGNoaWxkcmVuKTtcbiAgICAgICAgICAgIC8vIG1ha2UgY29tcGlsZXIgbWFya2VyIG5vbi1lbnVtZXJhYmxlXG4gICAgICAgICAgICBkZWYoY2hpbGRyZW4sICdfJywgdHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBub3JtYWxpemVPYmplY3RTbG90cyhjaGlsZHJlbiwgKGluc3RhbmNlLnNsb3RzID0ge30pKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaW5zdGFuY2Uuc2xvdHMgPSB7fTtcbiAgICAgICAgaWYgKGNoaWxkcmVuKSB7XG4gICAgICAgICAgICBub3JtYWxpemVWTm9kZVNsb3RzKGluc3RhbmNlLCBjaGlsZHJlbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGVmKGluc3RhbmNlLnNsb3RzLCBJbnRlcm5hbE9iamVjdEtleSwgMSk7XG59O1xuY29uc3QgdXBkYXRlU2xvdHMgPSAoaW5zdGFuY2UsIGNoaWxkcmVuLCBvcHRpbWl6ZWQpID0+IHtcbiAgICBjb25zdCB7IHZub2RlLCBzbG90cyB9ID0gaW5zdGFuY2U7XG4gICAgbGV0IG5lZWREZWxldGlvbkNoZWNrID0gdHJ1ZTtcbiAgICBsZXQgZGVsZXRpb25Db21wYXJpc29uVGFyZ2V0ID0gRU1QVFlfT0JKO1xuICAgIGlmICh2bm9kZS5zaGFwZUZsYWcgJiAzMiAvKiBTaGFwZUZsYWdzLlNMT1RTX0NISUxEUkVOICovKSB7XG4gICAgICAgIGNvbnN0IHR5cGUgPSBjaGlsZHJlbi5fO1xuICAgICAgICBpZiAodHlwZSkge1xuICAgICAgICAgICAgLy8gY29tcGlsZWQgc2xvdHMuXG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGlzSG1yVXBkYXRpbmcpIHtcbiAgICAgICAgICAgICAgICAvLyBQYXJlbnQgd2FzIEhNUiB1cGRhdGVkIHNvIHNsb3QgY29udGVudCBtYXkgaGF2ZSBjaGFuZ2VkLlxuICAgICAgICAgICAgICAgIC8vIGZvcmNlIHVwZGF0ZSBzbG90cyBhbmQgbWFyayBpbnN0YW5jZSBmb3IgaG1yIGFzIHdlbGxcbiAgICAgICAgICAgICAgICBleHRlbmQoc2xvdHMsIGNoaWxkcmVuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG9wdGltaXplZCAmJiB0eXBlID09PSAxIC8qIFNsb3RGbGFncy5TVEFCTEUgKi8pIHtcbiAgICAgICAgICAgICAgICAvLyBjb21waWxlZCBBTkQgc3RhYmxlLlxuICAgICAgICAgICAgICAgIC8vIG5vIG5lZWQgdG8gdXBkYXRlLCBhbmQgc2tpcCBzdGFsZSBzbG90cyByZW1vdmFsLlxuICAgICAgICAgICAgICAgIG5lZWREZWxldGlvbkNoZWNrID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBjb21waWxlZCBidXQgZHluYW1pYyAodi1pZi92LWZvciBvbiBzbG90cykgLSB1cGRhdGUgc2xvdHMsIGJ1dCBza2lwXG4gICAgICAgICAgICAgICAgLy8gbm9ybWFsaXphdGlvbi5cbiAgICAgICAgICAgICAgICBleHRlbmQoc2xvdHMsIGNoaWxkcmVuKTtcbiAgICAgICAgICAgICAgICAvLyAjMjg5M1xuICAgICAgICAgICAgICAgIC8vIHdoZW4gcmVuZGVyaW5nIHRoZSBvcHRpbWl6ZWQgc2xvdHMgYnkgbWFudWFsbHkgd3JpdHRlbiByZW5kZXIgZnVuY3Rpb24sXG4gICAgICAgICAgICAgICAgLy8gd2UgbmVlZCB0byBkZWxldGUgdGhlIGBzbG90cy5fYCBmbGFnIGlmIG5lY2Vzc2FyeSB0byBtYWtlIHN1YnNlcXVlbnQgdXBkYXRlcyByZWxpYWJsZSxcbiAgICAgICAgICAgICAgICAvLyBpLmUuIGxldCB0aGUgYHJlbmRlclNsb3RgIGNyZWF0ZSB0aGUgYmFpbGVkIEZyYWdtZW50XG4gICAgICAgICAgICAgICAgaWYgKCFvcHRpbWl6ZWQgJiYgdHlwZSA9PT0gMSAvKiBTbG90RmxhZ3MuU1RBQkxFICovKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBzbG90cy5fO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG5lZWREZWxldGlvbkNoZWNrID0gIWNoaWxkcmVuLiRzdGFibGU7XG4gICAgICAgICAgICBub3JtYWxpemVPYmplY3RTbG90cyhjaGlsZHJlbiwgc2xvdHMpO1xuICAgICAgICB9XG4gICAgICAgIGRlbGV0aW9uQ29tcGFyaXNvblRhcmdldCA9IGNoaWxkcmVuO1xuICAgIH1cbiAgICBlbHNlIGlmIChjaGlsZHJlbikge1xuICAgICAgICAvLyBub24gc2xvdCBvYmplY3QgY2hpbGRyZW4gKGRpcmVjdCB2YWx1ZSkgcGFzc2VkIHRvIGEgY29tcG9uZW50XG4gICAgICAgIG5vcm1hbGl6ZVZOb2RlU2xvdHMoaW5zdGFuY2UsIGNoaWxkcmVuKTtcbiAgICAgICAgZGVsZXRpb25Db21wYXJpc29uVGFyZ2V0ID0geyBkZWZhdWx0OiAxIH07XG4gICAgfVxuICAgIC8vIGRlbGV0ZSBzdGFsZSBzbG90c1xuICAgIGlmIChuZWVkRGVsZXRpb25DaGVjaykge1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzbG90cykge1xuICAgICAgICAgICAgaWYgKCFpc0ludGVybmFsS2V5KGtleSkgJiYgIShrZXkgaW4gZGVsZXRpb25Db21wYXJpc29uVGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBzbG90c1trZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcblxuZnVuY3Rpb24gY3JlYXRlQXBwQ29udGV4dCgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBhcHA6IG51bGwsXG4gICAgICAgIGNvbmZpZzoge1xuICAgICAgICAgICAgaXNOYXRpdmVUYWc6IE5PLFxuICAgICAgICAgICAgcGVyZm9ybWFuY2U6IGZhbHNlLFxuICAgICAgICAgICAgZ2xvYmFsUHJvcGVydGllczoge30sXG4gICAgICAgICAgICBvcHRpb25NZXJnZVN0cmF0ZWdpZXM6IHt9LFxuICAgICAgICAgICAgZXJyb3JIYW5kbGVyOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB3YXJuSGFuZGxlcjogdW5kZWZpbmVkLFxuICAgICAgICAgICAgY29tcGlsZXJPcHRpb25zOiB7fVxuICAgICAgICB9LFxuICAgICAgICBtaXhpbnM6IFtdLFxuICAgICAgICBjb21wb25lbnRzOiB7fSxcbiAgICAgICAgZGlyZWN0aXZlczoge30sXG4gICAgICAgIHByb3ZpZGVzOiBPYmplY3QuY3JlYXRlKG51bGwpLFxuICAgICAgICBvcHRpb25zQ2FjaGU6IG5ldyBXZWFrTWFwKCksXG4gICAgICAgIHByb3BzQ2FjaGU6IG5ldyBXZWFrTWFwKCksXG4gICAgICAgIGVtaXRzQ2FjaGU6IG5ldyBXZWFrTWFwKClcbiAgICB9O1xufVxubGV0IHVpZCA9IDA7XG5mdW5jdGlvbiBjcmVhdGVBcHBBUEkocmVuZGVyLCBoeWRyYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGNyZWF0ZUFwcChyb290Q29tcG9uZW50LCByb290UHJvcHMgPSBudWxsKSB7XG4gICAgICAgIGlmICghaXNGdW5jdGlvbihyb290Q29tcG9uZW50KSkge1xuICAgICAgICAgICAgcm9vdENvbXBvbmVudCA9IE9iamVjdC5hc3NpZ24oe30sIHJvb3RDb21wb25lbnQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyb290UHJvcHMgIT0gbnVsbCAmJiAhaXNPYmplY3Qocm9vdFByb3BzKSkge1xuICAgICAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIHdhcm4oYHJvb3QgcHJvcHMgcGFzc2VkIHRvIGFwcC5tb3VudCgpIG11c3QgYmUgYW4gb2JqZWN0LmApO1xuICAgICAgICAgICAgcm9vdFByb3BzID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlQXBwQ29udGV4dCgpO1xuICAgICAgICBjb25zdCBpbnN0YWxsZWRQbHVnaW5zID0gbmV3IFNldCgpO1xuICAgICAgICBsZXQgaXNNb3VudGVkID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IGFwcCA9IChjb250ZXh0LmFwcCA9IHtcbiAgICAgICAgICAgIF91aWQ6IHVpZCsrLFxuICAgICAgICAgICAgX2NvbXBvbmVudDogcm9vdENvbXBvbmVudCxcbiAgICAgICAgICAgIF9wcm9wczogcm9vdFByb3BzLFxuICAgICAgICAgICAgX2NvbnRhaW5lcjogbnVsbCxcbiAgICAgICAgICAgIF9jb250ZXh0OiBjb250ZXh0LFxuICAgICAgICAgICAgX2luc3RhbmNlOiBudWxsLFxuICAgICAgICAgICAgdmVyc2lvbixcbiAgICAgICAgICAgIGdldCBjb25maWcoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQuY29uZmlnO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldCBjb25maWcodikge1xuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgd2FybihgYXBwLmNvbmZpZyBjYW5ub3QgYmUgcmVwbGFjZWQuIE1vZGlmeSBpbmRpdmlkdWFsIG9wdGlvbnMgaW5zdGVhZC5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdXNlKHBsdWdpbiwgLi4ub3B0aW9ucykge1xuICAgICAgICAgICAgICAgIGlmIChpbnN0YWxsZWRQbHVnaW5zLmhhcyhwbHVnaW4pKSB7XG4gICAgICAgICAgICAgICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiB3YXJuKGBQbHVnaW4gaGFzIGFscmVhZHkgYmVlbiBhcHBsaWVkIHRvIHRhcmdldCBhcHAuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHBsdWdpbiAmJiBpc0Z1bmN0aW9uKHBsdWdpbi5pbnN0YWxsKSkge1xuICAgICAgICAgICAgICAgICAgICBpbnN0YWxsZWRQbHVnaW5zLmFkZChwbHVnaW4pO1xuICAgICAgICAgICAgICAgICAgICBwbHVnaW4uaW5zdGFsbChhcHAsIC4uLm9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc0Z1bmN0aW9uKHBsdWdpbikpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFsbGVkUGx1Z2lucy5hZGQocGx1Z2luKTtcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luKGFwcCwgLi4ub3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICB3YXJuKGBBIHBsdWdpbiBtdXN0IGVpdGhlciBiZSBhIGZ1bmN0aW9uIG9yIGFuIG9iamVjdCB3aXRoIGFuIFwiaW5zdGFsbFwiIGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYGZ1bmN0aW9uLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gYXBwO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1peGluKG1peGluKSB7XG4gICAgICAgICAgICAgICAgaWYgKF9fVlVFX09QVElPTlNfQVBJX18pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjb250ZXh0Lm1peGlucy5pbmNsdWRlcyhtaXhpbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQubWl4aW5zLnB1c2gobWl4aW4pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2FybignTWl4aW4gaGFzIGFscmVhZHkgYmVlbiBhcHBsaWVkIHRvIHRhcmdldCBhcHAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAobWl4aW4ubmFtZSA/IGA6ICR7bWl4aW4ubmFtZX1gIDogJycpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgd2FybignTWl4aW5zIGFyZSBvbmx5IGF2YWlsYWJsZSBpbiBidWlsZHMgc3VwcG9ydGluZyBPcHRpb25zIEFQSScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gYXBwO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNvbXBvbmVudChuYW1lLCBjb21wb25lbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlQ29tcG9uZW50TmFtZShuYW1lLCBjb250ZXh0LmNvbmZpZyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghY29tcG9uZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0LmNvbXBvbmVudHNbbmFtZV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgY29udGV4dC5jb21wb25lbnRzW25hbWVdKSB7XG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYENvbXBvbmVudCBcIiR7bmFtZX1cIiBoYXMgYWxyZWFkeSBiZWVuIHJlZ2lzdGVyZWQgaW4gdGFyZ2V0IGFwcC5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29udGV4dC5jb21wb25lbnRzW25hbWVdID0gY29tcG9uZW50O1xuICAgICAgICAgICAgICAgIHJldHVybiBhcHA7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGlyZWN0aXZlKG5hbWUsIGRpcmVjdGl2ZSkge1xuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGVEaXJlY3RpdmVOYW1lKG5hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWRpcmVjdGl2ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC5kaXJlY3RpdmVzW25hbWVdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGNvbnRleHQuZGlyZWN0aXZlc1tuYW1lXSkge1xuICAgICAgICAgICAgICAgICAgICB3YXJuKGBEaXJlY3RpdmUgXCIke25hbWV9XCIgaGFzIGFscmVhZHkgYmVlbiByZWdpc3RlcmVkIGluIHRhcmdldCBhcHAuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnRleHQuZGlyZWN0aXZlc1tuYW1lXSA9IGRpcmVjdGl2ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXBwO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1vdW50KHJvb3RDb250YWluZXIsIGlzSHlkcmF0ZSwgaXNTVkcpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlzTW91bnRlZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyAjNTU3MVxuICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIHJvb3RDb250YWluZXIuX192dWVfYXBwX18pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm4oYFRoZXJlIGlzIGFscmVhZHkgYW4gYXBwIGluc3RhbmNlIG1vdW50ZWQgb24gdGhlIGhvc3QgY29udGFpbmVyLlxcbmAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAgSWYgeW91IHdhbnQgdG8gbW91bnQgYW5vdGhlciBhcHAgb24gdGhlIHNhbWUgaG9zdCBjb250YWluZXIsYCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYCB5b3UgbmVlZCB0byB1bm1vdW50IHRoZSBwcmV2aW91cyBhcHAgYnkgY2FsbGluZyBcXGBhcHAudW5tb3VudCgpXFxgIGZpcnN0LmApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZub2RlID0gY3JlYXRlVk5vZGUocm9vdENvbXBvbmVudCwgcm9vdFByb3BzKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gc3RvcmUgYXBwIGNvbnRleHQgb24gdGhlIHJvb3QgVk5vZGUuXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgd2lsbCBiZSBzZXQgb24gdGhlIHJvb3QgaW5zdGFuY2Ugb24gaW5pdGlhbCBtb3VudC5cbiAgICAgICAgICAgICAgICAgICAgdm5vZGUuYXBwQ29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgICAgICAgICAgICAgIC8vIEhNUiByb290IHJlbG9hZFxuICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LnJlbG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXIoY2xvbmVWTm9kZSh2bm9kZSksIHJvb3RDb250YWluZXIsIGlzU1ZHKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzSHlkcmF0ZSAmJiBoeWRyYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoeWRyYXRlKHZub2RlLCByb290Q29udGFpbmVyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcih2bm9kZSwgcm9vdENvbnRhaW5lciwgaXNTVkcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlzTW91bnRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGFwcC5fY29udGFpbmVyID0gcm9vdENvbnRhaW5lcjtcbiAgICAgICAgICAgICAgICAgICAgcm9vdENvbnRhaW5lci5fX3Z1ZV9hcHBfXyA9IGFwcDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcC5faW5zdGFuY2UgPSB2bm9kZS5jb21wb25lbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXZ0b29sc0luaXRBcHAoYXBwLCB2ZXJzaW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0RXhwb3NlUHJveHkodm5vZGUuY29tcG9uZW50KSB8fCB2bm9kZS5jb21wb25lbnQucHJveHk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICB3YXJuKGBBcHAgaGFzIGFscmVhZHkgYmVlbiBtb3VudGVkLlxcbmAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYElmIHlvdSB3YW50IHRvIHJlbW91bnQgdGhlIHNhbWUgYXBwLCBtb3ZlIHlvdXIgYXBwIGNyZWF0aW9uIGxvZ2ljIGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYGludG8gYSBmYWN0b3J5IGZ1bmN0aW9uIGFuZCBjcmVhdGUgZnJlc2ggYXBwIGluc3RhbmNlcyBmb3IgZWFjaCBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBtb3VudCAtIGUuZy4gXFxgY29uc3QgY3JlYXRlTXlBcHAgPSAoKSA9PiBjcmVhdGVBcHAoQXBwKVxcYGApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB1bm1vdW50KCkge1xuICAgICAgICAgICAgICAgIGlmIChpc01vdW50ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyKG51bGwsIGFwcC5fY29udGFpbmVyKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcC5faW5zdGFuY2UgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGV2dG9vbHNVbm1vdW50QXBwKGFwcCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGFwcC5fY29udGFpbmVyLl9fdnVlX2FwcF9fO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgd2FybihgQ2Fubm90IHVubW91bnQgYW4gYXBwIHRoYXQgaXMgbm90IG1vdW50ZWQuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHByb3ZpZGUoa2V5LCB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYga2V5IGluIGNvbnRleHQucHJvdmlkZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgd2FybihgQXBwIGFscmVhZHkgcHJvdmlkZXMgcHJvcGVydHkgd2l0aCBrZXkgXCIke1N0cmluZyhrZXkpfVwiLiBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBJdCB3aWxsIGJlIG92ZXJ3cml0dGVuIHdpdGggdGhlIG5ldyB2YWx1ZS5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29udGV4dC5wcm92aWRlc1trZXldID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFwcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBhcHA7XG4gICAgfTtcbn1cblxuLyoqXG4gKiBGdW5jdGlvbiBmb3IgaGFuZGxpbmcgYSB0ZW1wbGF0ZSByZWZcbiAqL1xuZnVuY3Rpb24gc2V0UmVmKHJhd1JlZiwgb2xkUmF3UmVmLCBwYXJlbnRTdXNwZW5zZSwgdm5vZGUsIGlzVW5tb3VudCA9IGZhbHNlKSB7XG4gICAgaWYgKGlzQXJyYXkocmF3UmVmKSkge1xuICAgICAgICByYXdSZWYuZm9yRWFjaCgociwgaSkgPT4gc2V0UmVmKHIsIG9sZFJhd1JlZiAmJiAoaXNBcnJheShvbGRSYXdSZWYpID8gb2xkUmF3UmVmW2ldIDogb2xkUmF3UmVmKSwgcGFyZW50U3VzcGVuc2UsIHZub2RlLCBpc1VubW91bnQpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoaXNBc3luY1dyYXBwZXIodm5vZGUpICYmICFpc1VubW91bnQpIHtcbiAgICAgICAgLy8gd2hlbiBtb3VudGluZyBhc3luYyBjb21wb25lbnRzLCBub3RoaW5nIG5lZWRzIHRvIGJlIGRvbmUsXG4gICAgICAgIC8vIGJlY2F1c2UgdGhlIHRlbXBsYXRlIHJlZiBpcyBmb3J3YXJkZWQgdG8gaW5uZXIgY29tcG9uZW50XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgcmVmVmFsdWUgPSB2bm9kZS5zaGFwZUZsYWcgJiA0IC8qIFNoYXBlRmxhZ3MuU1RBVEVGVUxfQ09NUE9ORU5UICovXG4gICAgICAgID8gZ2V0RXhwb3NlUHJveHkodm5vZGUuY29tcG9uZW50KSB8fCB2bm9kZS5jb21wb25lbnQucHJveHlcbiAgICAgICAgOiB2bm9kZS5lbDtcbiAgICBjb25zdCB2YWx1ZSA9IGlzVW5tb3VudCA/IG51bGwgOiByZWZWYWx1ZTtcbiAgICBjb25zdCB7IGk6IG93bmVyLCByOiByZWYgfSA9IHJhd1JlZjtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFvd25lcikge1xuICAgICAgICB3YXJuKGBNaXNzaW5nIHJlZiBvd25lciBjb250ZXh0LiByZWYgY2Fubm90IGJlIHVzZWQgb24gaG9pc3RlZCB2bm9kZXMuIGAgK1xuICAgICAgICAgICAgYEEgdm5vZGUgd2l0aCByZWYgbXVzdCBiZSBjcmVhdGVkIGluc2lkZSB0aGUgcmVuZGVyIGZ1bmN0aW9uLmApO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG9sZFJlZiA9IG9sZFJhd1JlZiAmJiBvbGRSYXdSZWYucjtcbiAgICBjb25zdCByZWZzID0gb3duZXIucmVmcyA9PT0gRU1QVFlfT0JKID8gKG93bmVyLnJlZnMgPSB7fSkgOiBvd25lci5yZWZzO1xuICAgIGNvbnN0IHNldHVwU3RhdGUgPSBvd25lci5zZXR1cFN0YXRlO1xuICAgIC8vIGR5bmFtaWMgcmVmIGNoYW5nZWQuIHVuc2V0IG9sZCByZWZcbiAgICBpZiAob2xkUmVmICE9IG51bGwgJiYgb2xkUmVmICE9PSByZWYpIHtcbiAgICAgICAgaWYgKGlzU3RyaW5nKG9sZFJlZikpIHtcbiAgICAgICAgICAgIHJlZnNbb2xkUmVmXSA9IG51bGw7XG4gICAgICAgICAgICBpZiAoaGFzT3duKHNldHVwU3RhdGUsIG9sZFJlZikpIHtcbiAgICAgICAgICAgICAgICBzZXR1cFN0YXRlW29sZFJlZl0gPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzUmVmKG9sZFJlZikpIHtcbiAgICAgICAgICAgIG9sZFJlZi52YWx1ZSA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlzRnVuY3Rpb24ocmVmKSkge1xuICAgICAgICBjYWxsV2l0aEVycm9ySGFuZGxpbmcocmVmLCBvd25lciwgMTIgLyogRXJyb3JDb2Rlcy5GVU5DVElPTl9SRUYgKi8sIFt2YWx1ZSwgcmVmc10pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgX2lzU3RyaW5nID0gaXNTdHJpbmcocmVmKTtcbiAgICAgICAgY29uc3QgX2lzUmVmID0gaXNSZWYocmVmKTtcbiAgICAgICAgaWYgKF9pc1N0cmluZyB8fCBfaXNSZWYpIHtcbiAgICAgICAgICAgIGNvbnN0IGRvU2V0ID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChyYXdSZWYuZikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZyA9IF9pc1N0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgPyBoYXNPd24oc2V0dXBTdGF0ZSwgcmVmKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gc2V0dXBTdGF0ZVtyZWZdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiByZWZzW3JlZl1cbiAgICAgICAgICAgICAgICAgICAgICAgIDogcmVmLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNVbm1vdW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc0FycmF5KGV4aXN0aW5nKSAmJiByZW1vdmUoZXhpc3RpbmcsIHJlZlZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNBcnJheShleGlzdGluZykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX2lzU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZnNbcmVmXSA9IFtyZWZWYWx1ZV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYXNPd24oc2V0dXBTdGF0ZSwgcmVmKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dXBTdGF0ZVtyZWZdID0gcmVmc1tyZWZdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWYudmFsdWUgPSBbcmVmVmFsdWVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmF3UmVmLmspXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZzW3Jhd1JlZi5rXSA9IHJlZi52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghZXhpc3RpbmcuaW5jbHVkZXMocmVmVmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcucHVzaChyZWZWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoX2lzU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlZnNbcmVmXSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaGFzT3duKHNldHVwU3RhdGUsIHJlZikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldHVwU3RhdGVbcmVmXSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKF9pc1JlZikge1xuICAgICAgICAgICAgICAgICAgICByZWYudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJhd1JlZi5rKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmc1tyYXdSZWYua10gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIHdhcm4oJ0ludmFsaWQgdGVtcGxhdGUgcmVmIHR5cGU6JywgcmVmLCBgKCR7dHlwZW9mIHJlZn0pYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGRvU2V0LmlkID0gLTE7XG4gICAgICAgICAgICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KGRvU2V0LCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBkb1NldCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgd2FybignSW52YWxpZCB0ZW1wbGF0ZSByZWYgdHlwZTonLCByZWYsIGAoJHt0eXBlb2YgcmVmfSlgKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxubGV0IGhhc01pc21hdGNoID0gZmFsc2U7XG5jb25zdCBpc1NWR0NvbnRhaW5lciA9IChjb250YWluZXIpID0+IC9zdmcvLnRlc3QoY29udGFpbmVyLm5hbWVzcGFjZVVSSSkgJiYgY29udGFpbmVyLnRhZ05hbWUgIT09ICdmb3JlaWduT2JqZWN0JztcbmNvbnN0IGlzQ29tbWVudCA9IChub2RlKSA9PiBub2RlLm5vZGVUeXBlID09PSA4IC8qIERPTU5vZGVUeXBlcy5DT01NRU5UICovO1xuLy8gTm90ZTogaHlkcmF0aW9uIGlzIERPTS1zcGVjaWZpY1xuLy8gQnV0IHdlIGhhdmUgdG8gcGxhY2UgaXQgaW4gY29yZSBkdWUgdG8gdGlnaHQgY291cGxpbmcgd2l0aCBjb3JlIC0gc3BsaXR0aW5nXG4vLyBpdCBvdXQgY3JlYXRlcyBhIHRvbiBvZiB1bm5lY2Vzc2FyeSBjb21wbGV4aXR5LlxuLy8gSHlkcmF0aW9uIGFsc28gZGVwZW5kcyBvbiBzb21lIHJlbmRlcmVyIGludGVybmFsIGxvZ2ljIHdoaWNoIG5lZWRzIHRvIGJlXG4vLyBwYXNzZWQgaW4gdmlhIGFyZ3VtZW50cy5cbmZ1bmN0aW9uIGNyZWF0ZUh5ZHJhdGlvbkZ1bmN0aW9ucyhyZW5kZXJlckludGVybmFscykge1xuICAgIGNvbnN0IHsgbXQ6IG1vdW50Q29tcG9uZW50LCBwOiBwYXRjaCwgbzogeyBwYXRjaFByb3AsIGNyZWF0ZVRleHQsIG5leHRTaWJsaW5nLCBwYXJlbnROb2RlLCByZW1vdmUsIGluc2VydCwgY3JlYXRlQ29tbWVudCB9IH0gPSByZW5kZXJlckludGVybmFscztcbiAgICBjb25zdCBoeWRyYXRlID0gKHZub2RlLCBjb250YWluZXIpID0+IHtcbiAgICAgICAgaWYgKCFjb250YWluZXIuaGFzQ2hpbGROb2RlcygpKSB7XG4gICAgICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcbiAgICAgICAgICAgICAgICB3YXJuKGBBdHRlbXB0aW5nIHRvIGh5ZHJhdGUgZXhpc3RpbmcgbWFya3VwIGJ1dCBjb250YWluZXIgaXMgZW1wdHkuIGAgK1xuICAgICAgICAgICAgICAgICAgICBgUGVyZm9ybWluZyBmdWxsIG1vdW50IGluc3RlYWQuYCk7XG4gICAgICAgICAgICBwYXRjaChudWxsLCB2bm9kZSwgY29udGFpbmVyKTtcbiAgICAgICAgICAgIGZsdXNoUG9zdEZsdXNoQ2JzKCk7XG4gICAgICAgICAgICBjb250YWluZXIuX3Zub2RlID0gdm5vZGU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaGFzTWlzbWF0Y2ggPSBmYWxzZTtcbiAgICAgICAgaHlkcmF0ZU5vZGUoY29udGFpbmVyLmZpcnN0Q2hpbGQsIHZub2RlLCBudWxsLCBudWxsLCBudWxsKTtcbiAgICAgICAgZmx1c2hQb3N0Rmx1c2hDYnMoKTtcbiAgICAgICAgY29udGFpbmVyLl92bm9kZSA9IHZub2RlO1xuICAgICAgICBpZiAoaGFzTWlzbWF0Y2ggJiYgIWZhbHNlKSB7XG4gICAgICAgICAgICAvLyB0aGlzIGVycm9yIHNob3VsZCBzaG93IHVwIGluIHByb2R1Y3Rpb25cbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEh5ZHJhdGlvbiBjb21wbGV0ZWQgYnV0IGNvbnRhaW5zIG1pc21hdGNoZXMuYCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGh5ZHJhdGVOb2RlID0gKG5vZGUsIHZub2RlLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCA9IGZhbHNlKSA9PiB7XG4gICAgICAgIGNvbnN0IGlzRnJhZ21lbnRTdGFydCA9IGlzQ29tbWVudChub2RlKSAmJiBub2RlLmRhdGEgPT09ICdbJztcbiAgICAgICAgY29uc3Qgb25NaXNtYXRjaCA9ICgpID0+IGhhbmRsZU1pc21hdGNoKG5vZGUsIHZub2RlLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBzbG90U2NvcGVJZHMsIGlzRnJhZ21lbnRTdGFydCk7XG4gICAgICAgIGNvbnN0IHsgdHlwZSwgcmVmLCBzaGFwZUZsYWcsIHBhdGNoRmxhZyB9ID0gdm5vZGU7XG4gICAgICAgIGxldCBkb21UeXBlID0gbm9kZS5ub2RlVHlwZTtcbiAgICAgICAgdm5vZGUuZWwgPSBub2RlO1xuICAgICAgICBpZiAocGF0Y2hGbGFnID09PSAtMiAvKiBQYXRjaEZsYWdzLkJBSUwgKi8pIHtcbiAgICAgICAgICAgIG9wdGltaXplZCA9IGZhbHNlO1xuICAgICAgICAgICAgdm5vZGUuZHluYW1pY0NoaWxkcmVuID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgbmV4dE5vZGUgPSBudWxsO1xuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgVGV4dDpcbiAgICAgICAgICAgICAgICBpZiAoZG9tVHlwZSAhPT0gMyAvKiBET01Ob2RlVHlwZXMuVEVYVCAqLykge1xuICAgICAgICAgICAgICAgICAgICAvLyAjNTcyOCBlbXB0eSB0ZXh0IG5vZGUgaW5zaWRlIGEgc2xvdCBjYW4gY2F1c2UgaHlkcmF0aW9uIGZhaWx1cmVcbiAgICAgICAgICAgICAgICAgICAgLy8gYmVjYXVzZSB0aGUgc2VydmVyIHJlbmRlcmVkIEhUTUwgd29uJ3QgY29udGFpbiBhIHRleHQgbm9kZVxuICAgICAgICAgICAgICAgICAgICBpZiAodm5vZGUuY2hpbGRyZW4gPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnNlcnQoKHZub2RlLmVsID0gY3JlYXRlVGV4dCgnJykpLCBwYXJlbnROb2RlKG5vZGUpLCBub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHROb2RlID0gbm9kZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHROb2RlID0gb25NaXNtYXRjaCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZS5kYXRhICE9PSB2bm9kZS5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFzTWlzbWF0Y2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FybihgSHlkcmF0aW9uIHRleHQgbWlzbWF0Y2g6YCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBcXG4tIENsaWVudDogJHtKU09OLnN0cmluZ2lmeShub2RlLmRhdGEpfWAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgXFxuLSBTZXJ2ZXI6ICR7SlNPTi5zdHJpbmdpZnkodm5vZGUuY2hpbGRyZW4pfWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5kYXRhID0gdm5vZGUuY2hpbGRyZW47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbmV4dE5vZGUgPSBuZXh0U2libGluZyhub2RlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIENvbW1lbnQ6XG4gICAgICAgICAgICAgICAgaWYgKGRvbVR5cGUgIT09IDggLyogRE9NTm9kZVR5cGVzLkNPTU1FTlQgKi8gfHwgaXNGcmFnbWVudFN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgIG5leHROb2RlID0gb25NaXNtYXRjaCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbmV4dE5vZGUgPSBuZXh0U2libGluZyhub2RlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFN0YXRpYzpcbiAgICAgICAgICAgICAgICBpZiAoaXNGcmFnbWVudFN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVudGlyZSB0ZW1wbGF0ZSBpcyBzdGF0aWMgYnV0IFNTUmVkIGFzIGEgZnJhZ21lbnRcbiAgICAgICAgICAgICAgICAgICAgbm9kZSA9IG5leHRTaWJsaW5nKG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICBkb21UeXBlID0gbm9kZS5ub2RlVHlwZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGRvbVR5cGUgPT09IDEgLyogRE9NTm9kZVR5cGVzLkVMRU1FTlQgKi8gfHwgZG9tVHlwZSA9PT0gMyAvKiBET01Ob2RlVHlwZXMuVEVYVCAqLykge1xuICAgICAgICAgICAgICAgICAgICAvLyBkZXRlcm1pbmUgYW5jaG9yLCBhZG9wdCBjb250ZW50XG4gICAgICAgICAgICAgICAgICAgIG5leHROb2RlID0gbm9kZTtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlIHN0YXRpYyB2bm9kZSBoYXMgaXRzIGNvbnRlbnQgc3RyaXBwZWQgZHVyaW5nIGJ1aWxkLFxuICAgICAgICAgICAgICAgICAgICAvLyBhZG9wdCBpdCBmcm9tIHRoZSBzZXJ2ZXItcmVuZGVyZWQgSFRNTC5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmVlZFRvQWRvcHRDb250ZW50ID0gIXZub2RlLmNoaWxkcmVuLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2bm9kZS5zdGF0aWNDb3VudDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmVlZFRvQWRvcHRDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZub2RlLmNoaWxkcmVuICs9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHROb2RlLm5vZGVUeXBlID09PSAxIC8qIERPTU5vZGVUeXBlcy5FTEVNRU5UICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IG5leHROb2RlLm91dGVySFRNTFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBuZXh0Tm9kZS5kYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IHZub2RlLnN0YXRpY0NvdW50IC0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZub2RlLmFuY2hvciA9IG5leHROb2RlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dE5vZGUgPSBuZXh0U2libGluZyhuZXh0Tm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzRnJhZ21lbnRTdGFydCA/IG5leHRTaWJsaW5nKG5leHROb2RlKSA6IG5leHROb2RlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgb25NaXNtYXRjaCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgRnJhZ21lbnQ6XG4gICAgICAgICAgICAgICAgaWYgKCFpc0ZyYWdtZW50U3RhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV4dE5vZGUgPSBvbk1pc21hdGNoKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBuZXh0Tm9kZSA9IGh5ZHJhdGVGcmFnbWVudChub2RlLCB2bm9kZSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDEgLyogU2hhcGVGbGFncy5FTEVNRU5UICovKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkb21UeXBlICE9PSAxIC8qIERPTU5vZGVUeXBlcy5FTEVNRU5UICovIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICB2bm9kZS50eXBlLnRvTG93ZXJDYXNlKCkgIT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS50YWdOYW1lLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHROb2RlID0gb25NaXNtYXRjaCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dE5vZGUgPSBoeWRyYXRlRWxlbWVudChub2RlLCB2bm9kZSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNoYXBlRmxhZyAmIDYgLyogU2hhcGVGbGFncy5DT01QT05FTlQgKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gd2hlbiBzZXR0aW5nIHVwIHRoZSByZW5kZXIgZWZmZWN0LCBpZiB0aGUgaW5pdGlhbCB2bm9kZSBhbHJlYWR5XG4gICAgICAgICAgICAgICAgICAgIC8vIGhhcyAuZWwgc2V0LCB0aGUgY29tcG9uZW50IHdpbGwgcGVyZm9ybSBoeWRyYXRpb24gaW5zdGVhZCBvZiBtb3VudFxuICAgICAgICAgICAgICAgICAgICAvLyBvbiBpdHMgc3ViLXRyZWUuXG4gICAgICAgICAgICAgICAgICAgIHZub2RlLnNsb3RTY29wZUlkcyA9IHNsb3RTY29wZUlkcztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gcGFyZW50Tm9kZShub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgbW91bnRDb21wb25lbnQodm5vZGUsIGNvbnRhaW5lciwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkdDb250YWluZXIoY29udGFpbmVyKSwgb3B0aW1pemVkKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29tcG9uZW50IG1heSBiZSBhc3luYywgc28gaW4gdGhlIGNhc2Ugb2YgZnJhZ21lbnRzIHdlIGNhbm5vdCByZWx5XG4gICAgICAgICAgICAgICAgICAgIC8vIG9uIGNvbXBvbmVudCdzIHJlbmRlcmVkIG91dHB1dCB0byBkZXRlcm1pbmUgdGhlIGVuZCBvZiB0aGUgZnJhZ21lbnRcbiAgICAgICAgICAgICAgICAgICAgLy8gaW5zdGVhZCwgd2UgZG8gYSBsb29rYWhlYWQgdG8gZmluZCB0aGUgZW5kIGFuY2hvciBub2RlLlxuICAgICAgICAgICAgICAgICAgICBuZXh0Tm9kZSA9IGlzRnJhZ21lbnRTdGFydFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBsb2NhdGVDbG9zaW5nQXN5bmNBbmNob3Iobm9kZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIDogbmV4dFNpYmxpbmcobm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIC8vICM0MjkzIHRlbGVwb3J0IGFzIGNvbXBvbmVudCByb290XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXh0Tm9kZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgaXNDb21tZW50KG5leHROb2RlKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dE5vZGUuZGF0YSA9PT0gJ3RlbGVwb3J0IGVuZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHROb2RlID0gbmV4dFNpYmxpbmcobmV4dE5vZGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vICMzNzg3XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIGNvbXBvbmVudCBpcyBhc3luYywgaXQgbWF5IGdldCBtb3ZlZCAvIHVubW91bnRlZCBiZWZvcmUgaXRzXG4gICAgICAgICAgICAgICAgICAgIC8vIGlubmVyIGNvbXBvbmVudCBpcyBsb2FkZWQsIHNvIHdlIG5lZWQgdG8gZ2l2ZSBpdCBhIHBsYWNlaG9sZGVyXG4gICAgICAgICAgICAgICAgICAgIC8vIHZub2RlIHRoYXQgbWF0Y2hlcyBpdHMgYWRvcHRlZCBET00uXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0FzeW5jV3JhcHBlcih2bm9kZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzdWJUcmVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzRnJhZ21lbnRTdGFydCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YlRyZWUgPSBjcmVhdGVWTm9kZShGcmFnbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViVHJlZS5hbmNob3IgPSBuZXh0Tm9kZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IG5leHROb2RlLnByZXZpb3VzU2libGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGNvbnRhaW5lci5sYXN0Q2hpbGQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJUcmVlID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5ub2RlVHlwZSA9PT0gMyA/IGNyZWF0ZVRleHRWTm9kZSgnJykgOiBjcmVhdGVWTm9kZSgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJUcmVlLmVsID0gbm9kZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZub2RlLmNvbXBvbmVudC5zdWJUcmVlID0gc3ViVHJlZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChzaGFwZUZsYWcgJiA2NCAvKiBTaGFwZUZsYWdzLlRFTEVQT1JUICovKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkb21UeXBlICE9PSA4IC8qIERPTU5vZGVUeXBlcy5DT01NRU5UICovKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0Tm9kZSA9IG9uTWlzbWF0Y2goKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHROb2RlID0gdm5vZGUudHlwZS5oeWRyYXRlKG5vZGUsIHZub2RlLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCwgcmVuZGVyZXJJbnRlcm5hbHMsIGh5ZHJhdGVDaGlsZHJlbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoc2hhcGVGbGFnICYgMTI4IC8qIFNoYXBlRmxhZ3MuU1VTUEVOU0UgKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgbmV4dE5vZGUgPSB2bm9kZS50eXBlLmh5ZHJhdGUobm9kZSwgdm5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHQ29udGFpbmVyKHBhcmVudE5vZGUobm9kZSkpLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCwgcmVuZGVyZXJJbnRlcm5hbHMsIGh5ZHJhdGVOb2RlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIHdhcm4oJ0ludmFsaWQgSG9zdFZOb2RlIHR5cGU6JywgdHlwZSwgYCgke3R5cGVvZiB0eXBlfSlgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlZiAhPSBudWxsKSB7XG4gICAgICAgICAgICBzZXRSZWYocmVmLCBudWxsLCBwYXJlbnRTdXNwZW5zZSwgdm5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXh0Tm9kZTtcbiAgICB9O1xuICAgIGNvbnN0IGh5ZHJhdGVFbGVtZW50ID0gKGVsLCB2bm9kZSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpID0+IHtcbiAgICAgICAgb3B0aW1pemVkID0gb3B0aW1pemVkIHx8ICEhdm5vZGUuZHluYW1pY0NoaWxkcmVuO1xuICAgICAgICBjb25zdCB7IHR5cGUsIHByb3BzLCBwYXRjaEZsYWcsIHNoYXBlRmxhZywgZGlycyB9ID0gdm5vZGU7XG4gICAgICAgIC8vICM0MDA2IGZvciBmb3JtIGVsZW1lbnRzIHdpdGggbm9uLXN0cmluZyB2LW1vZGVsIHZhbHVlIGJpbmRpbmdzXG4gICAgICAgIC8vIGUuZy4gPG9wdGlvbiA6dmFsdWU9XCJvYmpcIj4sIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiA6dHJ1ZS12YWx1ZT1cIjFcIj5cbiAgICAgICAgY29uc3QgZm9yY2VQYXRjaFZhbHVlID0gKHR5cGUgPT09ICdpbnB1dCcgJiYgZGlycykgfHwgdHlwZSA9PT0gJ29wdGlvbic7XG4gICAgICAgIC8vIHNraXAgcHJvcHMgJiBjaGlsZHJlbiBpZiB0aGlzIGlzIGhvaXN0ZWQgc3RhdGljIG5vZGVzXG4gICAgICAgIC8vICM1NDA1IGluIGRldiwgYWx3YXlzIGh5ZHJhdGUgY2hpbGRyZW4gZm9yIEhNUlxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8IGZvcmNlUGF0Y2hWYWx1ZSB8fCBwYXRjaEZsYWcgIT09IC0xIC8qIFBhdGNoRmxhZ3MuSE9JU1RFRCAqLykge1xuICAgICAgICAgICAgaWYgKGRpcnMpIHtcbiAgICAgICAgICAgICAgICBpbnZva2VEaXJlY3RpdmVIb29rKHZub2RlLCBudWxsLCBwYXJlbnRDb21wb25lbnQsICdjcmVhdGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBwcm9wc1xuICAgICAgICAgICAgaWYgKHByb3BzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZvcmNlUGF0Y2hWYWx1ZSB8fFxuICAgICAgICAgICAgICAgICAgICAhb3B0aW1pemVkIHx8XG4gICAgICAgICAgICAgICAgICAgIHBhdGNoRmxhZyAmICgxNiAvKiBQYXRjaEZsYWdzLkZVTExfUFJPUFMgKi8gfCAzMiAvKiBQYXRjaEZsYWdzLkhZRFJBVEVfRVZFTlRTICovKSkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBwcm9wcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChmb3JjZVBhdGNoVmFsdWUgJiYga2V5LmVuZHNXaXRoKCd2YWx1ZScpKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpc09uKGtleSkgJiYgIWlzUmVzZXJ2ZWRQcm9wKGtleSkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0Y2hQcm9wKGVsLCBrZXksIG51bGwsIHByb3BzW2tleV0sIGZhbHNlLCB1bmRlZmluZWQsIHBhcmVudENvbXBvbmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocHJvcHMub25DbGljaykge1xuICAgICAgICAgICAgICAgICAgICAvLyBGYXN0IHBhdGggZm9yIGNsaWNrIGxpc3RlbmVycyAod2hpY2ggaXMgbW9zdCBvZnRlbikgdG8gYXZvaWRcbiAgICAgICAgICAgICAgICAgICAgLy8gaXRlcmF0aW5nIHRocm91Z2ggcHJvcHMuXG4gICAgICAgICAgICAgICAgICAgIHBhdGNoUHJvcChlbCwgJ29uQ2xpY2snLCBudWxsLCBwcm9wcy5vbkNsaWNrLCBmYWxzZSwgdW5kZWZpbmVkLCBwYXJlbnRDb21wb25lbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHZub2RlIC8gZGlyZWN0aXZlIGhvb2tzXG4gICAgICAgICAgICBsZXQgdm5vZGVIb29rcztcbiAgICAgICAgICAgIGlmICgodm5vZGVIb29rcyA9IHByb3BzICYmIHByb3BzLm9uVm5vZGVCZWZvcmVNb3VudCkpIHtcbiAgICAgICAgICAgICAgICBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rcywgcGFyZW50Q29tcG9uZW50LCB2bm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGlycykge1xuICAgICAgICAgICAgICAgIGludm9rZURpcmVjdGl2ZUhvb2sodm5vZGUsIG51bGwsIHBhcmVudENvbXBvbmVudCwgJ2JlZm9yZU1vdW50Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKHZub2RlSG9va3MgPSBwcm9wcyAmJiBwcm9wcy5vblZub2RlTW91bnRlZCkgfHwgZGlycykge1xuICAgICAgICAgICAgICAgIHF1ZXVlRWZmZWN0V2l0aFN1c3BlbnNlKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdm5vZGVIb29rcyAmJiBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rcywgcGFyZW50Q29tcG9uZW50LCB2bm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIGRpcnMgJiYgaW52b2tlRGlyZWN0aXZlSG9vayh2bm9kZSwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCAnbW91bnRlZCcpO1xuICAgICAgICAgICAgICAgIH0sIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGNoaWxkcmVuXG4gICAgICAgICAgICBpZiAoc2hhcGVGbGFnICYgMTYgLyogU2hhcGVGbGFncy5BUlJBWV9DSElMRFJFTiAqLyAmJlxuICAgICAgICAgICAgICAgIC8vIHNraXAgaWYgZWxlbWVudCBoYXMgaW5uZXJIVE1MIC8gdGV4dENvbnRlbnRcbiAgICAgICAgICAgICAgICAhKHByb3BzICYmIChwcm9wcy5pbm5lckhUTUwgfHwgcHJvcHMudGV4dENvbnRlbnQpKSkge1xuICAgICAgICAgICAgICAgIGxldCBuZXh0ID0gaHlkcmF0ZUNoaWxkcmVuKGVsLmZpcnN0Q2hpbGQsIHZub2RlLCBlbCwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgICAgIGxldCBoYXNXYXJuZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB3aGlsZSAobmV4dCkge1xuICAgICAgICAgICAgICAgICAgICBoYXNNaXNtYXRjaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWhhc1dhcm5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2FybihgSHlkcmF0aW9uIGNoaWxkcmVuIG1pc21hdGNoIGluIDwke3Zub2RlLnR5cGV9PjogYCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYHNlcnZlciByZW5kZXJlZCBlbGVtZW50IGNvbnRhaW5zIG1vcmUgY2hpbGQgbm9kZXMgdGhhbiBjbGllbnQgdmRvbS5gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc1dhcm5lZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIFNTUmVkIERPTSBjb250YWlucyBtb3JlIG5vZGVzIHRoYW4gaXQgc2hvdWxkLiBSZW1vdmUgdGhlbS5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VyID0gbmV4dDtcbiAgICAgICAgICAgICAgICAgICAgbmV4dCA9IG5leHQubmV4dFNpYmxpbmc7XG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZShjdXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHNoYXBlRmxhZyAmIDggLyogU2hhcGVGbGFncy5URVhUX0NISUxEUkVOICovKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVsLnRleHRDb250ZW50ICE9PSB2bm9kZS5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgICAgICBoYXNNaXNtYXRjaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgd2FybihgSHlkcmF0aW9uIHRleHQgY29udGVudCBtaXNtYXRjaCBpbiA8JHt2bm9kZS50eXBlfT46XFxuYCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYC0gQ2xpZW50OiAke2VsLnRleHRDb250ZW50fVxcbmAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAtIFNlcnZlcjogJHt2bm9kZS5jaGlsZHJlbn1gKTtcbiAgICAgICAgICAgICAgICAgICAgZWwudGV4dENvbnRlbnQgPSB2bm9kZS5jaGlsZHJlbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVsLm5leHRTaWJsaW5nO1xuICAgIH07XG4gICAgY29uc3QgaHlkcmF0ZUNoaWxkcmVuID0gKG5vZGUsIHBhcmVudFZOb2RlLCBjb250YWluZXIsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKSA9PiB7XG4gICAgICAgIG9wdGltaXplZCA9IG9wdGltaXplZCB8fCAhIXBhcmVudFZOb2RlLmR5bmFtaWNDaGlsZHJlbjtcbiAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBwYXJlbnRWTm9kZS5jaGlsZHJlbjtcbiAgICAgICAgY29uc3QgbCA9IGNoaWxkcmVuLmxlbmd0aDtcbiAgICAgICAgbGV0IGhhc1dhcm5lZCA9IGZhbHNlO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgY29uc3Qgdm5vZGUgPSBvcHRpbWl6ZWRcbiAgICAgICAgICAgICAgICA/IGNoaWxkcmVuW2ldXG4gICAgICAgICAgICAgICAgOiAoY2hpbGRyZW5baV0gPSBub3JtYWxpemVWTm9kZShjaGlsZHJlbltpXSkpO1xuICAgICAgICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgICAgICAgICBub2RlID0gaHlkcmF0ZU5vZGUobm9kZSwgdm5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHZub2RlLnR5cGUgPT09IFRleHQgJiYgIXZub2RlLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBoYXNNaXNtYXRjaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhaGFzV2FybmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYEh5ZHJhdGlvbiBjaGlsZHJlbiBtaXNtYXRjaCBpbiA8JHtjb250YWluZXIudGFnTmFtZS50b0xvd2VyQ2FzZSgpfT46IGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYHNlcnZlciByZW5kZXJlZCBlbGVtZW50IGNvbnRhaW5zIGZld2VyIGNoaWxkIG5vZGVzIHRoYW4gY2xpZW50IHZkb20uYCk7XG4gICAgICAgICAgICAgICAgICAgIGhhc1dhcm5lZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIHRoZSBTU1JlZCBET00gZGlkbid0IGNvbnRhaW4gZW5vdWdoIG5vZGVzLiBNb3VudCB0aGUgbWlzc2luZyBvbmVzLlxuICAgICAgICAgICAgICAgIHBhdGNoKG51bGwsIHZub2RlLCBjb250YWluZXIsIG51bGwsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHQ29udGFpbmVyKGNvbnRhaW5lciksIHNsb3RTY29wZUlkcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfTtcbiAgICBjb25zdCBoeWRyYXRlRnJhZ21lbnQgPSAobm9kZSwgdm5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgc2xvdFNjb3BlSWRzOiBmcmFnbWVudFNsb3RTY29wZUlkcyB9ID0gdm5vZGU7XG4gICAgICAgIGlmIChmcmFnbWVudFNsb3RTY29wZUlkcykge1xuICAgICAgICAgICAgc2xvdFNjb3BlSWRzID0gc2xvdFNjb3BlSWRzXG4gICAgICAgICAgICAgICAgPyBzbG90U2NvcGVJZHMuY29uY2F0KGZyYWdtZW50U2xvdFNjb3BlSWRzKVxuICAgICAgICAgICAgICAgIDogZnJhZ21lbnRTbG90U2NvcGVJZHM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gcGFyZW50Tm9kZShub2RlKTtcbiAgICAgICAgY29uc3QgbmV4dCA9IGh5ZHJhdGVDaGlsZHJlbihuZXh0U2libGluZyhub2RlKSwgdm5vZGUsIGNvbnRhaW5lciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICBpZiAobmV4dCAmJiBpc0NvbW1lbnQobmV4dCkgJiYgbmV4dC5kYXRhID09PSAnXScpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXh0U2libGluZygodm5vZGUuYW5jaG9yID0gbmV4dCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gZnJhZ21lbnQgZGlkbid0IGh5ZHJhdGUgc3VjY2Vzc2Z1bGx5LCBzaW5jZSB3ZSBkaWRuJ3QgZ2V0IGEgZW5kIGFuY2hvclxuICAgICAgICAgICAgLy8gYmFjay4gVGhpcyBzaG91bGQgaGF2ZSBsZWQgdG8gbm9kZS9jaGlsZHJlbiBtaXNtYXRjaCB3YXJuaW5ncy5cbiAgICAgICAgICAgIGhhc01pc21hdGNoID0gdHJ1ZTtcbiAgICAgICAgICAgIC8vIHNpbmNlIHRoZSBhbmNob3IgaXMgbWlzc2luZywgd2UgbmVlZCB0byBjcmVhdGUgb25lIGFuZCBpbnNlcnQgaXRcbiAgICAgICAgICAgIGluc2VydCgodm5vZGUuYW5jaG9yID0gY3JlYXRlQ29tbWVudChgXWApKSwgY29udGFpbmVyLCBuZXh0KTtcbiAgICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBoYW5kbGVNaXNtYXRjaCA9IChub2RlLCB2bm9kZSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgc2xvdFNjb3BlSWRzLCBpc0ZyYWdtZW50KSA9PiB7XG4gICAgICAgIGhhc01pc21hdGNoID0gdHJ1ZTtcbiAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXG4gICAgICAgICAgICB3YXJuKGBIeWRyYXRpb24gbm9kZSBtaXNtYXRjaDpcXG4tIENsaWVudCB2bm9kZTpgLCB2bm9kZS50eXBlLCBgXFxuLSBTZXJ2ZXIgcmVuZGVyZWQgRE9NOmAsIG5vZGUsIG5vZGUubm9kZVR5cGUgPT09IDMgLyogRE9NTm9kZVR5cGVzLlRFWFQgKi9cbiAgICAgICAgICAgICAgICA/IGAodGV4dClgXG4gICAgICAgICAgICAgICAgOiBpc0NvbW1lbnQobm9kZSkgJiYgbm9kZS5kYXRhID09PSAnWydcbiAgICAgICAgICAgICAgICAgICAgPyBgKHN0YXJ0IG9mIGZyYWdtZW50KWBcbiAgICAgICAgICAgICAgICAgICAgOiBgYCk7XG4gICAgICAgIHZub2RlLmVsID0gbnVsbDtcbiAgICAgICAgaWYgKGlzRnJhZ21lbnQpIHtcbiAgICAgICAgICAgIC8vIHJlbW92ZSBleGNlc3NpdmUgZnJhZ21lbnQgbm9kZXNcbiAgICAgICAgICAgIGNvbnN0IGVuZCA9IGxvY2F0ZUNsb3NpbmdBc3luY0FuY2hvcihub2RlKTtcbiAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dCA9IG5leHRTaWJsaW5nKG5vZGUpO1xuICAgICAgICAgICAgICAgIGlmIChuZXh0ICYmIG5leHQgIT09IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICByZW1vdmUobmV4dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmV4dCA9IG5leHRTaWJsaW5nKG5vZGUpO1xuICAgICAgICBjb25zdCBjb250YWluZXIgPSBwYXJlbnROb2RlKG5vZGUpO1xuICAgICAgICByZW1vdmUobm9kZSk7XG4gICAgICAgIHBhdGNoKG51bGwsIHZub2RlLCBjb250YWluZXIsIG5leHQsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHQ29udGFpbmVyKGNvbnRhaW5lciksIHNsb3RTY29wZUlkcyk7XG4gICAgICAgIHJldHVybiBuZXh0O1xuICAgIH07XG4gICAgY29uc3QgbG9jYXRlQ2xvc2luZ0FzeW5jQW5jaG9yID0gKG5vZGUpID0+IHtcbiAgICAgICAgbGV0IG1hdGNoID0gMDtcbiAgICAgICAgd2hpbGUgKG5vZGUpIHtcbiAgICAgICAgICAgIG5vZGUgPSBuZXh0U2libGluZyhub2RlKTtcbiAgICAgICAgICAgIGlmIChub2RlICYmIGlzQ29tbWVudChub2RlKSkge1xuICAgICAgICAgICAgICAgIGlmIChub2RlLmRhdGEgPT09ICdbJylcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2grKztcbiAgICAgICAgICAgICAgICBpZiAobm9kZS5kYXRhID09PSAnXScpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV4dFNpYmxpbmcobm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaC0tO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIH07XG4gICAgcmV0dXJuIFtoeWRyYXRlLCBoeWRyYXRlTm9kZV07XG59XG5cbi8qIGVzbGludC1kaXNhYmxlIG5vLXJlc3RyaWN0ZWQtZ2xvYmFscyAqL1xubGV0IHN1cHBvcnRlZDtcbmxldCBwZXJmO1xuZnVuY3Rpb24gc3RhcnRNZWFzdXJlKGluc3RhbmNlLCB0eXBlKSB7XG4gICAgaWYgKGluc3RhbmNlLmFwcENvbnRleHQuY29uZmlnLnBlcmZvcm1hbmNlICYmIGlzU3VwcG9ydGVkKCkpIHtcbiAgICAgICAgcGVyZi5tYXJrKGB2dWUtJHt0eXBlfS0ke2luc3RhbmNlLnVpZH1gKTtcbiAgICB9XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pIHtcbiAgICAgICAgZGV2dG9vbHNQZXJmU3RhcnQoaW5zdGFuY2UsIHR5cGUsIGlzU3VwcG9ydGVkKCkgPyBwZXJmLm5vdygpIDogRGF0ZS5ub3coKSk7XG4gICAgfVxufVxuZnVuY3Rpb24gZW5kTWVhc3VyZShpbnN0YW5jZSwgdHlwZSkge1xuICAgIGlmIChpbnN0YW5jZS5hcHBDb250ZXh0LmNvbmZpZy5wZXJmb3JtYW5jZSAmJiBpc1N1cHBvcnRlZCgpKSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0VGFnID0gYHZ1ZS0ke3R5cGV9LSR7aW5zdGFuY2UudWlkfWA7XG4gICAgICAgIGNvbnN0IGVuZFRhZyA9IHN0YXJ0VGFnICsgYDplbmRgO1xuICAgICAgICBwZXJmLm1hcmsoZW5kVGFnKTtcbiAgICAgICAgcGVyZi5tZWFzdXJlKGA8JHtmb3JtYXRDb21wb25lbnROYW1lKGluc3RhbmNlLCBpbnN0YW5jZS50eXBlKX0+ICR7dHlwZX1gLCBzdGFydFRhZywgZW5kVGFnKTtcbiAgICAgICAgcGVyZi5jbGVhck1hcmtzKHN0YXJ0VGFnKTtcbiAgICAgICAgcGVyZi5jbGVhck1hcmtzKGVuZFRhZyk7XG4gICAgfVxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICAgIGRldnRvb2xzUGVyZkVuZChpbnN0YW5jZSwgdHlwZSwgaXNTdXBwb3J0ZWQoKSA/IHBlcmYubm93KCkgOiBEYXRlLm5vdygpKTtcbiAgICB9XG59XG5mdW5jdGlvbiBpc1N1cHBvcnRlZCgpIHtcbiAgICBpZiAoc3VwcG9ydGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHN1cHBvcnRlZDtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5wZXJmb3JtYW5jZSkge1xuICAgICAgICBzdXBwb3J0ZWQgPSB0cnVlO1xuICAgICAgICBwZXJmID0gd2luZG93LnBlcmZvcm1hbmNlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgc3VwcG9ydGVkID0gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBzdXBwb3J0ZWQ7XG59XG5cbi8qKlxuICogVGhpcyBpcyBvbmx5IGNhbGxlZCBpbiBlc20tYnVuZGxlciBidWlsZHMuXG4gKiBJdCBpcyBjYWxsZWQgd2hlbiBhIHJlbmRlcmVyIGlzIGNyZWF0ZWQsIGluIGBiYXNlQ3JlYXRlUmVuZGVyZXJgIHNvIHRoYXRcbiAqIGltcG9ydGluZyBydW50aW1lLWNvcmUgaXMgc2lkZS1lZmZlY3RzIGZyZWUuXG4gKlxuICogaXN0YW5idWwtaWdub3JlLW5leHRcbiAqL1xuZnVuY3Rpb24gaW5pdEZlYXR1cmVGbGFncygpIHtcbiAgICBjb25zdCBuZWVkV2FybiA9IFtdO1xuICAgIGlmICh0eXBlb2YgX19WVUVfT1BUSU9OU19BUElfXyAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBuZWVkV2Fybi5wdXNoKGBfX1ZVRV9PUFRJT05TX0FQSV9fYCk7XG4gICAgICAgIGdldEdsb2JhbFRoaXMoKS5fX1ZVRV9PUFRJT05TX0FQSV9fID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBfX1ZVRV9QUk9EX0RFVlRPT0xTX18gIT09ICdib29sZWFuJykge1xuICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgbmVlZFdhcm4ucHVzaChgX19WVUVfUFJPRF9ERVZUT09MU19fYCk7XG4gICAgICAgIGdldEdsb2JhbFRoaXMoKS5fX1ZVRV9QUk9EX0RFVlRPT0xTX18gPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBuZWVkV2Fybi5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgbXVsdGkgPSBuZWVkV2Fybi5sZW5ndGggPiAxO1xuICAgICAgICBjb25zb2xlLndhcm4oYEZlYXR1cmUgZmxhZyR7bXVsdGkgPyBgc2AgOiBgYH0gJHtuZWVkV2Fybi5qb2luKCcsICcpfSAke211bHRpID8gYGFyZWAgOiBgaXNgfSBub3QgZXhwbGljaXRseSBkZWZpbmVkLiBZb3UgYXJlIHJ1bm5pbmcgdGhlIGVzbS1idW5kbGVyIGJ1aWxkIG9mIFZ1ZSwgYCArXG4gICAgICAgICAgICBgd2hpY2ggZXhwZWN0cyB0aGVzZSBjb21waWxlLXRpbWUgZmVhdHVyZSBmbGFncyB0byBiZSBnbG9iYWxseSBpbmplY3RlZCBgICtcbiAgICAgICAgICAgIGB2aWEgdGhlIGJ1bmRsZXIgY29uZmlnIGluIG9yZGVyIHRvIGdldCBiZXR0ZXIgdHJlZS1zaGFraW5nIGluIHRoZSBgICtcbiAgICAgICAgICAgIGBwcm9kdWN0aW9uIGJ1bmRsZS5cXG5cXG5gICtcbiAgICAgICAgICAgIGBGb3IgbW9yZSBkZXRhaWxzLCBzZWUgaHR0cHM6Ly9saW5rLnZ1ZWpzLm9yZy9mZWF0dXJlLWZsYWdzLmApO1xuICAgIH1cbn1cblxuY29uc3QgcXVldWVQb3N0UmVuZGVyRWZmZWN0ID0gcXVldWVFZmZlY3RXaXRoU3VzcGVuc2VcbiAgICA7XG4vKipcbiAqIFRoZSBjcmVhdGVSZW5kZXJlciBmdW5jdGlvbiBhY2NlcHRzIHR3byBnZW5lcmljIGFyZ3VtZW50czpcbiAqIEhvc3ROb2RlIGFuZCBIb3N0RWxlbWVudCwgY29ycmVzcG9uZGluZyB0byBOb2RlIGFuZCBFbGVtZW50IHR5cGVzIGluIHRoZVxuICogaG9zdCBlbnZpcm9ubWVudC4gRm9yIGV4YW1wbGUsIGZvciBydW50aW1lLWRvbSwgSG9zdE5vZGUgd291bGQgYmUgdGhlIERPTVxuICogYE5vZGVgIGludGVyZmFjZSBhbmQgSG9zdEVsZW1lbnQgd291bGQgYmUgdGhlIERPTSBgRWxlbWVudGAgaW50ZXJmYWNlLlxuICpcbiAqIEN1c3RvbSByZW5kZXJlcnMgY2FuIHBhc3MgaW4gdGhlIHBsYXRmb3JtIHNwZWNpZmljIHR5cGVzIGxpa2UgdGhpczpcbiAqXG4gKiBgYGAganNcbiAqIGNvbnN0IHsgcmVuZGVyLCBjcmVhdGVBcHAgfSA9IGNyZWF0ZVJlbmRlcmVyPE5vZGUsIEVsZW1lbnQ+KHtcbiAqICAgcGF0Y2hQcm9wLFxuICogICAuLi5ub2RlT3BzXG4gKiB9KVxuICogYGBgXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVJlbmRlcmVyKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gYmFzZUNyZWF0ZVJlbmRlcmVyKG9wdGlvbnMpO1xufVxuLy8gU2VwYXJhdGUgQVBJIGZvciBjcmVhdGluZyBoeWRyYXRpb24tZW5hYmxlZCByZW5kZXJlci5cbi8vIEh5ZHJhdGlvbiBsb2dpYyBpcyBvbmx5IHVzZWQgd2hlbiBjYWxsaW5nIHRoaXMgZnVuY3Rpb24sIG1ha2luZyBpdFxuLy8gdHJlZS1zaGFrYWJsZS5cbmZ1bmN0aW9uIGNyZWF0ZUh5ZHJhdGlvblJlbmRlcmVyKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gYmFzZUNyZWF0ZVJlbmRlcmVyKG9wdGlvbnMsIGNyZWF0ZUh5ZHJhdGlvbkZ1bmN0aW9ucyk7XG59XG4vLyBpbXBsZW1lbnRhdGlvblxuZnVuY3Rpb24gYmFzZUNyZWF0ZVJlbmRlcmVyKG9wdGlvbnMsIGNyZWF0ZUh5ZHJhdGlvbkZucykge1xuICAgIC8vIGNvbXBpbGUtdGltZSBmZWF0dXJlIGZsYWdzIGNoZWNrXG4gICAge1xuICAgICAgICBpbml0RmVhdHVyZUZsYWdzKCk7XG4gICAgfVxuICAgIGNvbnN0IHRhcmdldCA9IGdldEdsb2JhbFRoaXMoKTtcbiAgICB0YXJnZXQuX19WVUVfXyA9IHRydWU7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pIHtcbiAgICAgICAgc2V0RGV2dG9vbHNIb29rKHRhcmdldC5fX1ZVRV9ERVZUT09MU19HTE9CQUxfSE9PS19fLCB0YXJnZXQpO1xuICAgIH1cbiAgICBjb25zdCB7IGluc2VydDogaG9zdEluc2VydCwgcmVtb3ZlOiBob3N0UmVtb3ZlLCBwYXRjaFByb3A6IGhvc3RQYXRjaFByb3AsIGNyZWF0ZUVsZW1lbnQ6IGhvc3RDcmVhdGVFbGVtZW50LCBjcmVhdGVUZXh0OiBob3N0Q3JlYXRlVGV4dCwgY3JlYXRlQ29tbWVudDogaG9zdENyZWF0ZUNvbW1lbnQsIHNldFRleHQ6IGhvc3RTZXRUZXh0LCBzZXRFbGVtZW50VGV4dDogaG9zdFNldEVsZW1lbnRUZXh0LCBwYXJlbnROb2RlOiBob3N0UGFyZW50Tm9kZSwgbmV4dFNpYmxpbmc6IGhvc3ROZXh0U2libGluZywgc2V0U2NvcGVJZDogaG9zdFNldFNjb3BlSWQgPSBOT09QLCBpbnNlcnRTdGF0aWNDb250ZW50OiBob3N0SW5zZXJ0U3RhdGljQ29udGVudCB9ID0gb3B0aW9ucztcbiAgICAvLyBOb3RlOiBmdW5jdGlvbnMgaW5zaWRlIHRoaXMgY2xvc3VyZSBzaG91bGQgdXNlIGBjb25zdCB4eHggPSAoKSA9PiB7fWBcbiAgICAvLyBzdHlsZSBpbiBvcmRlciB0byBwcmV2ZW50IGJlaW5nIGlubGluZWQgYnkgbWluaWZpZXJzLlxuICAgIGNvbnN0IHBhdGNoID0gKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IgPSBudWxsLCBwYXJlbnRDb21wb25lbnQgPSBudWxsLCBwYXJlbnRTdXNwZW5zZSA9IG51bGwsIGlzU1ZHID0gZmFsc2UsIHNsb3RTY29wZUlkcyA9IG51bGwsIG9wdGltaXplZCA9IChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBpc0htclVwZGF0aW5nID8gZmFsc2UgOiAhIW4yLmR5bmFtaWNDaGlsZHJlbikgPT4ge1xuICAgICAgICBpZiAobjEgPT09IG4yKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gcGF0Y2hpbmcgJiBub3Qgc2FtZSB0eXBlLCB1bm1vdW50IG9sZCB0cmVlXG4gICAgICAgIGlmIChuMSAmJiAhaXNTYW1lVk5vZGVUeXBlKG4xLCBuMikpIHtcbiAgICAgICAgICAgIGFuY2hvciA9IGdldE5leHRIb3N0Tm9kZShuMSk7XG4gICAgICAgICAgICB1bm1vdW50KG4xLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCB0cnVlKTtcbiAgICAgICAgICAgIG4xID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAobjIucGF0Y2hGbGFnID09PSAtMiAvKiBQYXRjaEZsYWdzLkJBSUwgKi8pIHtcbiAgICAgICAgICAgIG9wdGltaXplZCA9IGZhbHNlO1xuICAgICAgICAgICAgbjIuZHluYW1pY0NoaWxkcmVuID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHR5cGUsIHJlZiwgc2hhcGVGbGFnIH0gPSBuMjtcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFRleHQ6XG4gICAgICAgICAgICAgICAgcHJvY2Vzc1RleHQobjEsIG4yLCBjb250YWluZXIsIGFuY2hvcik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIENvbW1lbnQ6XG4gICAgICAgICAgICAgICAgcHJvY2Vzc0NvbW1lbnROb2RlKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBTdGF0aWM6XG4gICAgICAgICAgICAgICAgaWYgKG4xID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgbW91bnRTdGF0aWNOb2RlKG4yLCBjb250YWluZXIsIGFuY2hvciwgaXNTVkcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgcGF0Y2hTdGF0aWNOb2RlKG4xLCBuMiwgY29udGFpbmVyLCBpc1NWRyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBGcmFnbWVudDpcbiAgICAgICAgICAgICAgICBwcm9jZXNzRnJhZ21lbnQobjEsIG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDEgLyogU2hhcGVGbGFncy5FTEVNRU5UICovKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NFbGVtZW50KG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNoYXBlRmxhZyAmIDYgLyogU2hhcGVGbGFncy5DT01QT05FTlQgKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc0NvbXBvbmVudChuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChzaGFwZUZsYWcgJiA2NCAvKiBTaGFwZUZsYWdzLlRFTEVQT1JUICovKSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGUucHJvY2VzcyhuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIGludGVybmFscyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNoYXBlRmxhZyAmIDEyOCAvKiBTaGFwZUZsYWdzLlNVU1BFTlNFICovKSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGUucHJvY2VzcyhuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIGludGVybmFscyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICB3YXJuKCdJbnZhbGlkIFZOb2RlIHR5cGU6JywgdHlwZSwgYCgke3R5cGVvZiB0eXBlfSlgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gc2V0IHJlZlxuICAgICAgICBpZiAocmVmICE9IG51bGwgJiYgcGFyZW50Q29tcG9uZW50KSB7XG4gICAgICAgICAgICBzZXRSZWYocmVmLCBuMSAmJiBuMS5yZWYsIHBhcmVudFN1c3BlbnNlLCBuMiB8fCBuMSwgIW4yKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgcHJvY2Vzc1RleHQgPSAobjEsIG4yLCBjb250YWluZXIsIGFuY2hvcikgPT4ge1xuICAgICAgICBpZiAobjEgPT0gbnVsbCkge1xuICAgICAgICAgICAgaG9zdEluc2VydCgobjIuZWwgPSBob3N0Q3JlYXRlVGV4dChuMi5jaGlsZHJlbikpLCBjb250YWluZXIsIGFuY2hvcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBlbCA9IChuMi5lbCA9IG4xLmVsKTtcbiAgICAgICAgICAgIGlmIChuMi5jaGlsZHJlbiAhPT0gbjEuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICBob3N0U2V0VGV4dChlbCwgbjIuY2hpbGRyZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBwcm9jZXNzQ29tbWVudE5vZGUgPSAobjEsIG4yLCBjb250YWluZXIsIGFuY2hvcikgPT4ge1xuICAgICAgICBpZiAobjEgPT0gbnVsbCkge1xuICAgICAgICAgICAgaG9zdEluc2VydCgobjIuZWwgPSBob3N0Q3JlYXRlQ29tbWVudChuMi5jaGlsZHJlbiB8fCAnJykpLCBjb250YWluZXIsIGFuY2hvcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyB0aGVyZSdzIG5vIHN1cHBvcnQgZm9yIGR5bmFtaWMgY29tbWVudHNcbiAgICAgICAgICAgIG4yLmVsID0gbjEuZWw7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IG1vdW50U3RhdGljTm9kZSA9IChuMiwgY29udGFpbmVyLCBhbmNob3IsIGlzU1ZHKSA9PiB7XG4gICAgICAgIFtuMi5lbCwgbjIuYW5jaG9yXSA9IGhvc3RJbnNlcnRTdGF0aWNDb250ZW50KG4yLmNoaWxkcmVuLCBjb250YWluZXIsIGFuY2hvciwgaXNTVkcsIG4yLmVsLCBuMi5hbmNob3IpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGV2IC8gSE1SIG9ubHlcbiAgICAgKi9cbiAgICBjb25zdCBwYXRjaFN0YXRpY05vZGUgPSAobjEsIG4yLCBjb250YWluZXIsIGlzU1ZHKSA9PiB7XG4gICAgICAgIC8vIHN0YXRpYyBub2RlcyBhcmUgb25seSBwYXRjaGVkIGR1cmluZyBkZXYgZm9yIEhNUlxuICAgICAgICBpZiAobjIuY2hpbGRyZW4gIT09IG4xLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICBjb25zdCBhbmNob3IgPSBob3N0TmV4dFNpYmxpbmcobjEuYW5jaG9yKTtcbiAgICAgICAgICAgIC8vIHJlbW92ZSBleGlzdGluZ1xuICAgICAgICAgICAgcmVtb3ZlU3RhdGljTm9kZShuMSk7XG4gICAgICAgICAgICBbbjIuZWwsIG4yLmFuY2hvcl0gPSBob3N0SW5zZXJ0U3RhdGljQ29udGVudChuMi5jaGlsZHJlbiwgY29udGFpbmVyLCBhbmNob3IsIGlzU1ZHKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG4yLmVsID0gbjEuZWw7XG4gICAgICAgICAgICBuMi5hbmNob3IgPSBuMS5hbmNob3I7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IG1vdmVTdGF0aWNOb2RlID0gKHsgZWwsIGFuY2hvciB9LCBjb250YWluZXIsIG5leHRTaWJsaW5nKSA9PiB7XG4gICAgICAgIGxldCBuZXh0O1xuICAgICAgICB3aGlsZSAoZWwgJiYgZWwgIT09IGFuY2hvcikge1xuICAgICAgICAgICAgbmV4dCA9IGhvc3ROZXh0U2libGluZyhlbCk7XG4gICAgICAgICAgICBob3N0SW5zZXJ0KGVsLCBjb250YWluZXIsIG5leHRTaWJsaW5nKTtcbiAgICAgICAgICAgIGVsID0gbmV4dDtcbiAgICAgICAgfVxuICAgICAgICBob3N0SW5zZXJ0KGFuY2hvciwgY29udGFpbmVyLCBuZXh0U2libGluZyk7XG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVTdGF0aWNOb2RlID0gKHsgZWwsIGFuY2hvciB9KSA9PiB7XG4gICAgICAgIGxldCBuZXh0O1xuICAgICAgICB3aGlsZSAoZWwgJiYgZWwgIT09IGFuY2hvcikge1xuICAgICAgICAgICAgbmV4dCA9IGhvc3ROZXh0U2libGluZyhlbCk7XG4gICAgICAgICAgICBob3N0UmVtb3ZlKGVsKTtcbiAgICAgICAgICAgIGVsID0gbmV4dDtcbiAgICAgICAgfVxuICAgICAgICBob3N0UmVtb3ZlKGFuY2hvcik7XG4gICAgfTtcbiAgICBjb25zdCBwcm9jZXNzRWxlbWVudCA9IChuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpID0+IHtcbiAgICAgICAgaXNTVkcgPSBpc1NWRyB8fCBuMi50eXBlID09PSAnc3ZnJztcbiAgICAgICAgaWYgKG4xID09IG51bGwpIHtcbiAgICAgICAgICAgIG1vdW50RWxlbWVudChuMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwYXRjaEVsZW1lbnQobjEsIG4yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBtb3VudEVsZW1lbnQgPSAodm5vZGUsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpID0+IHtcbiAgICAgICAgbGV0IGVsO1xuICAgICAgICBsZXQgdm5vZGVIb29rO1xuICAgICAgICBjb25zdCB7IHR5cGUsIHByb3BzLCBzaGFwZUZsYWcsIHRyYW5zaXRpb24sIGRpcnMgfSA9IHZub2RlO1xuICAgICAgICBlbCA9IHZub2RlLmVsID0gaG9zdENyZWF0ZUVsZW1lbnQodm5vZGUudHlwZSwgaXNTVkcsIHByb3BzICYmIHByb3BzLmlzLCBwcm9wcyk7XG4gICAgICAgIC8vIG1vdW50IGNoaWxkcmVuIGZpcnN0LCBzaW5jZSBzb21lIHByb3BzIG1heSByZWx5IG9uIGNoaWxkIGNvbnRlbnRcbiAgICAgICAgLy8gYmVpbmcgYWxyZWFkeSByZW5kZXJlZCwgZS5nLiBgPHNlbGVjdCB2YWx1ZT5gXG4gICAgICAgIGlmIChzaGFwZUZsYWcgJiA4IC8qIFNoYXBlRmxhZ3MuVEVYVF9DSElMRFJFTiAqLykge1xuICAgICAgICAgICAgaG9zdFNldEVsZW1lbnRUZXh0KGVsLCB2bm9kZS5jaGlsZHJlbik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc2hhcGVGbGFnICYgMTYgLyogU2hhcGVGbGFncy5BUlJBWV9DSElMRFJFTiAqLykge1xuICAgICAgICAgICAgbW91bnRDaGlsZHJlbih2bm9kZS5jaGlsZHJlbiwgZWwsIG51bGwsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHICYmIHR5cGUgIT09ICdmb3JlaWduT2JqZWN0Jywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkaXJzKSB7XG4gICAgICAgICAgICBpbnZva2VEaXJlY3RpdmVIb29rKHZub2RlLCBudWxsLCBwYXJlbnRDb21wb25lbnQsICdjcmVhdGVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcHJvcHNcbiAgICAgICAgaWYgKHByb3BzKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBwcm9wcykge1xuICAgICAgICAgICAgICAgIGlmIChrZXkgIT09ICd2YWx1ZScgJiYgIWlzUmVzZXJ2ZWRQcm9wKGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaG9zdFBhdGNoUHJvcChlbCwga2V5LCBudWxsLCBwcm9wc1trZXldLCBpc1NWRywgdm5vZGUuY2hpbGRyZW4sIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHVubW91bnRDaGlsZHJlbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBTcGVjaWFsIGNhc2UgZm9yIHNldHRpbmcgdmFsdWUgb24gRE9NIGVsZW1lbnRzOlxuICAgICAgICAgICAgICogLSBpdCBjYW4gYmUgb3JkZXItc2Vuc2l0aXZlIChlLmcuIHNob3VsZCBiZSBzZXQgKmFmdGVyKiBtaW4vbWF4LCAjMjMyNSwgIzQwMjQpXG4gICAgICAgICAgICAgKiAtIGl0IG5lZWRzIHRvIGJlIGZvcmNlZCAoIzE0NzEpXG4gICAgICAgICAgICAgKiAjMjM1MyBwcm9wb3NlcyBhZGRpbmcgYW5vdGhlciByZW5kZXJlciBvcHRpb24gdG8gY29uZmlndXJlIHRoaXMsIGJ1dFxuICAgICAgICAgICAgICogdGhlIHByb3BlcnRpZXMgYWZmZWN0cyBhcmUgc28gZmluaXRlIGl0IGlzIHdvcnRoIHNwZWNpYWwgY2FzaW5nIGl0XG4gICAgICAgICAgICAgKiBoZXJlIHRvIHJlZHVjZSB0aGUgY29tcGxleGl0eS4gKFNwZWNpYWwgY2FzaW5nIGl0IGFsc28gc2hvdWxkIG5vdFxuICAgICAgICAgICAgICogYWZmZWN0IG5vbi1ET00gcmVuZGVyZXJzKVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBpZiAoJ3ZhbHVlJyBpbiBwcm9wcykge1xuICAgICAgICAgICAgICAgIGhvc3RQYXRjaFByb3AoZWwsICd2YWx1ZScsIG51bGwsIHByb3BzLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgodm5vZGVIb29rID0gcHJvcHMub25Wbm9kZUJlZm9yZU1vdW50KSkge1xuICAgICAgICAgICAgICAgIGludm9rZVZOb2RlSG9vayh2bm9kZUhvb2ssIHBhcmVudENvbXBvbmVudCwgdm5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIHNjb3BlSWRcbiAgICAgICAgc2V0U2NvcGVJZChlbCwgdm5vZGUsIHZub2RlLnNjb3BlSWQsIHNsb3RTY29wZUlkcywgcGFyZW50Q29tcG9uZW50KTtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pIHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlbCwgJ19fdm5vZGUnLCB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHZub2RlLFxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlbCwgJ19fdnVlUGFyZW50Q29tcG9uZW50Jywge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2VcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkaXJzKSB7XG4gICAgICAgICAgICBpbnZva2VEaXJlY3RpdmVIb29rKHZub2RlLCBudWxsLCBwYXJlbnRDb21wb25lbnQsICdiZWZvcmVNb3VudCcpO1xuICAgICAgICB9XG4gICAgICAgIC8vICMxNTgzIEZvciBpbnNpZGUgc3VzcGVuc2UgKyBzdXNwZW5zZSBub3QgcmVzb2x2ZWQgY2FzZSwgZW50ZXIgaG9vayBzaG91bGQgY2FsbCB3aGVuIHN1c3BlbnNlIHJlc29sdmVkXG4gICAgICAgIC8vICMxNjg5IEZvciBpbnNpZGUgc3VzcGVuc2UgKyBzdXNwZW5zZSByZXNvbHZlZCBjYXNlLCBqdXN0IGNhbGwgaXRcbiAgICAgICAgY29uc3QgbmVlZENhbGxUcmFuc2l0aW9uSG9va3MgPSAoIXBhcmVudFN1c3BlbnNlIHx8IChwYXJlbnRTdXNwZW5zZSAmJiAhcGFyZW50U3VzcGVuc2UucGVuZGluZ0JyYW5jaCkpICYmXG4gICAgICAgICAgICB0cmFuc2l0aW9uICYmXG4gICAgICAgICAgICAhdHJhbnNpdGlvbi5wZXJzaXN0ZWQ7XG4gICAgICAgIGlmIChuZWVkQ2FsbFRyYW5zaXRpb25Ib29rcykge1xuICAgICAgICAgICAgdHJhbnNpdGlvbi5iZWZvcmVFbnRlcihlbCk7XG4gICAgICAgIH1cbiAgICAgICAgaG9zdEluc2VydChlbCwgY29udGFpbmVyLCBhbmNob3IpO1xuICAgICAgICBpZiAoKHZub2RlSG9vayA9IHByb3BzICYmIHByb3BzLm9uVm5vZGVNb3VudGVkKSB8fFxuICAgICAgICAgICAgbmVlZENhbGxUcmFuc2l0aW9uSG9va3MgfHxcbiAgICAgICAgICAgIGRpcnMpIHtcbiAgICAgICAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdm5vZGVIb29rICYmIGludm9rZVZOb2RlSG9vayh2bm9kZUhvb2ssIHBhcmVudENvbXBvbmVudCwgdm5vZGUpO1xuICAgICAgICAgICAgICAgIG5lZWRDYWxsVHJhbnNpdGlvbkhvb2tzICYmIHRyYW5zaXRpb24uZW50ZXIoZWwpO1xuICAgICAgICAgICAgICAgIGRpcnMgJiYgaW52b2tlRGlyZWN0aXZlSG9vayh2bm9kZSwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCAnbW91bnRlZCcpO1xuICAgICAgICAgICAgfSwgcGFyZW50U3VzcGVuc2UpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBzZXRTY29wZUlkID0gKGVsLCB2bm9kZSwgc2NvcGVJZCwgc2xvdFNjb3BlSWRzLCBwYXJlbnRDb21wb25lbnQpID0+IHtcbiAgICAgICAgaWYgKHNjb3BlSWQpIHtcbiAgICAgICAgICAgIGhvc3RTZXRTY29wZUlkKGVsLCBzY29wZUlkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2xvdFNjb3BlSWRzKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNsb3RTY29wZUlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGhvc3RTZXRTY29wZUlkKGVsLCBzbG90U2NvcGVJZHNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJlbnRDb21wb25lbnQpIHtcbiAgICAgICAgICAgIGxldCBzdWJUcmVlID0gcGFyZW50Q29tcG9uZW50LnN1YlRyZWU7XG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXG4gICAgICAgICAgICAgICAgc3ViVHJlZS5wYXRjaEZsYWcgPiAwICYmXG4gICAgICAgICAgICAgICAgc3ViVHJlZS5wYXRjaEZsYWcgJiAyMDQ4IC8qIFBhdGNoRmxhZ3MuREVWX1JPT1RfRlJBR01FTlQgKi8pIHtcbiAgICAgICAgICAgICAgICBzdWJUcmVlID1cbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyU2luZ2xlUm9vdChzdWJUcmVlLmNoaWxkcmVuKSB8fCBzdWJUcmVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZub2RlID09PSBzdWJUcmVlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyZW50Vk5vZGUgPSBwYXJlbnRDb21wb25lbnQudm5vZGU7XG4gICAgICAgICAgICAgICAgc2V0U2NvcGVJZChlbCwgcGFyZW50Vk5vZGUsIHBhcmVudFZOb2RlLnNjb3BlSWQsIHBhcmVudFZOb2RlLnNsb3RTY29wZUlkcywgcGFyZW50Q29tcG9uZW50LnBhcmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IG1vdW50Q2hpbGRyZW4gPSAoY2hpbGRyZW4sIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIHN0YXJ0ID0gMCkgPT4ge1xuICAgICAgICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgY2hpbGQgPSAoY2hpbGRyZW5baV0gPSBvcHRpbWl6ZWRcbiAgICAgICAgICAgICAgICA/IGNsb25lSWZNb3VudGVkKGNoaWxkcmVuW2ldKVxuICAgICAgICAgICAgICAgIDogbm9ybWFsaXplVk5vZGUoY2hpbGRyZW5baV0pKTtcbiAgICAgICAgICAgIHBhdGNoKG51bGwsIGNoaWxkLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgcGF0Y2hFbGVtZW50ID0gKG4xLCBuMiwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKSA9PiB7XG4gICAgICAgIGNvbnN0IGVsID0gKG4yLmVsID0gbjEuZWwpO1xuICAgICAgICBsZXQgeyBwYXRjaEZsYWcsIGR5bmFtaWNDaGlsZHJlbiwgZGlycyB9ID0gbjI7XG4gICAgICAgIC8vICMxNDI2IHRha2UgdGhlIG9sZCB2bm9kZSdzIHBhdGNoIGZsYWcgaW50byBhY2NvdW50IHNpbmNlIHVzZXIgbWF5IGNsb25lIGFcbiAgICAgICAgLy8gY29tcGlsZXItZ2VuZXJhdGVkIHZub2RlLCB3aGljaCBkZS1vcHRzIHRvIEZVTExfUFJPUFNcbiAgICAgICAgcGF0Y2hGbGFnIHw9IG4xLnBhdGNoRmxhZyAmIDE2IC8qIFBhdGNoRmxhZ3MuRlVMTF9QUk9QUyAqLztcbiAgICAgICAgY29uc3Qgb2xkUHJvcHMgPSBuMS5wcm9wcyB8fCBFTVBUWV9PQko7XG4gICAgICAgIGNvbnN0IG5ld1Byb3BzID0gbjIucHJvcHMgfHwgRU1QVFlfT0JKO1xuICAgICAgICBsZXQgdm5vZGVIb29rO1xuICAgICAgICAvLyBkaXNhYmxlIHJlY3Vyc2UgaW4gYmVmb3JlVXBkYXRlIGhvb2tzXG4gICAgICAgIHBhcmVudENvbXBvbmVudCAmJiB0b2dnbGVSZWN1cnNlKHBhcmVudENvbXBvbmVudCwgZmFsc2UpO1xuICAgICAgICBpZiAoKHZub2RlSG9vayA9IG5ld1Byb3BzLm9uVm5vZGVCZWZvcmVVcGRhdGUpKSB7XG4gICAgICAgICAgICBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBwYXJlbnRDb21wb25lbnQsIG4yLCBuMSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRpcnMpIHtcbiAgICAgICAgICAgIGludm9rZURpcmVjdGl2ZUhvb2sobjIsIG4xLCBwYXJlbnRDb21wb25lbnQsICdiZWZvcmVVcGRhdGUnKTtcbiAgICAgICAgfVxuICAgICAgICBwYXJlbnRDb21wb25lbnQgJiYgdG9nZ2xlUmVjdXJzZShwYXJlbnRDb21wb25lbnQsIHRydWUpO1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGlzSG1yVXBkYXRpbmcpIHtcbiAgICAgICAgICAgIC8vIEhNUiB1cGRhdGVkLCBmb3JjZSBmdWxsIGRpZmZcbiAgICAgICAgICAgIHBhdGNoRmxhZyA9IDA7XG4gICAgICAgICAgICBvcHRpbWl6ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGR5bmFtaWNDaGlsZHJlbiA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYXJlQ2hpbGRyZW5TVkcgPSBpc1NWRyAmJiBuMi50eXBlICE9PSAnZm9yZWlnbk9iamVjdCc7XG4gICAgICAgIGlmIChkeW5hbWljQ2hpbGRyZW4pIHtcbiAgICAgICAgICAgIHBhdGNoQmxvY2tDaGlsZHJlbihuMS5keW5hbWljQ2hpbGRyZW4sIGR5bmFtaWNDaGlsZHJlbiwgZWwsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGFyZUNoaWxkcmVuU1ZHLCBzbG90U2NvcGVJZHMpO1xuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBwYXJlbnRDb21wb25lbnQgJiYgcGFyZW50Q29tcG9uZW50LnR5cGUuX19obXJJZCkge1xuICAgICAgICAgICAgICAgIHRyYXZlcnNlU3RhdGljQ2hpbGRyZW4objEsIG4yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghb3B0aW1pemVkKSB7XG4gICAgICAgICAgICAvLyBmdWxsIGRpZmZcbiAgICAgICAgICAgIHBhdGNoQ2hpbGRyZW4objEsIG4yLCBlbCwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgYXJlQ2hpbGRyZW5TVkcsIHNsb3RTY29wZUlkcywgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXRjaEZsYWcgPiAwKSB7XG4gICAgICAgICAgICAvLyB0aGUgcHJlc2VuY2Ugb2YgYSBwYXRjaEZsYWcgbWVhbnMgdGhpcyBlbGVtZW50J3MgcmVuZGVyIGNvZGUgd2FzXG4gICAgICAgICAgICAvLyBnZW5lcmF0ZWQgYnkgdGhlIGNvbXBpbGVyIGFuZCBjYW4gdGFrZSB0aGUgZmFzdCBwYXRoLlxuICAgICAgICAgICAgLy8gaW4gdGhpcyBwYXRoIG9sZCBub2RlIGFuZCBuZXcgbm9kZSBhcmUgZ3VhcmFudGVlZCB0byBoYXZlIHRoZSBzYW1lIHNoYXBlXG4gICAgICAgICAgICAvLyAoaS5lLiBhdCB0aGUgZXhhY3Qgc2FtZSBwb3NpdGlvbiBpbiB0aGUgc291cmNlIHRlbXBsYXRlKVxuICAgICAgICAgICAgaWYgKHBhdGNoRmxhZyAmIDE2IC8qIFBhdGNoRmxhZ3MuRlVMTF9QUk9QUyAqLykge1xuICAgICAgICAgICAgICAgIC8vIGVsZW1lbnQgcHJvcHMgY29udGFpbiBkeW5hbWljIGtleXMsIGZ1bGwgZGlmZiBuZWVkZWRcbiAgICAgICAgICAgICAgICBwYXRjaFByb3BzKGVsLCBuMiwgb2xkUHJvcHMsIG5ld1Byb3BzLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBjbGFzc1xuICAgICAgICAgICAgICAgIC8vIHRoaXMgZmxhZyBpcyBtYXRjaGVkIHdoZW4gdGhlIGVsZW1lbnQgaGFzIGR5bmFtaWMgY2xhc3MgYmluZGluZ3MuXG4gICAgICAgICAgICAgICAgaWYgKHBhdGNoRmxhZyAmIDIgLyogUGF0Y2hGbGFncy5DTEFTUyAqLykge1xuICAgICAgICAgICAgICAgICAgICBpZiAob2xkUHJvcHMuY2xhc3MgIT09IG5ld1Byb3BzLmNsYXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBob3N0UGF0Y2hQcm9wKGVsLCAnY2xhc3MnLCBudWxsLCBuZXdQcm9wcy5jbGFzcywgaXNTVkcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIHN0eWxlXG4gICAgICAgICAgICAgICAgLy8gdGhpcyBmbGFnIGlzIG1hdGNoZWQgd2hlbiB0aGUgZWxlbWVudCBoYXMgZHluYW1pYyBzdHlsZSBiaW5kaW5nc1xuICAgICAgICAgICAgICAgIGlmIChwYXRjaEZsYWcgJiA0IC8qIFBhdGNoRmxhZ3MuU1RZTEUgKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgaG9zdFBhdGNoUHJvcChlbCwgJ3N0eWxlJywgb2xkUHJvcHMuc3R5bGUsIG5ld1Byb3BzLnN0eWxlLCBpc1NWRyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIHByb3BzXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBmbGFnIGlzIG1hdGNoZWQgd2hlbiB0aGUgZWxlbWVudCBoYXMgZHluYW1pYyBwcm9wL2F0dHIgYmluZGluZ3NcbiAgICAgICAgICAgICAgICAvLyBvdGhlciB0aGFuIGNsYXNzIGFuZCBzdHlsZS4gVGhlIGtleXMgb2YgZHluYW1pYyBwcm9wL2F0dHJzIGFyZSBzYXZlZCBmb3JcbiAgICAgICAgICAgICAgICAvLyBmYXN0ZXIgaXRlcmF0aW9uLlxuICAgICAgICAgICAgICAgIC8vIE5vdGUgZHluYW1pYyBrZXlzIGxpa2UgOltmb29dPVwiYmFyXCIgd2lsbCBjYXVzZSB0aGlzIG9wdGltaXphdGlvbiB0b1xuICAgICAgICAgICAgICAgIC8vIGJhaWwgb3V0IGFuZCBnbyB0aHJvdWdoIGEgZnVsbCBkaWZmIGJlY2F1c2Ugd2UgbmVlZCB0byB1bnNldCB0aGUgb2xkIGtleVxuICAgICAgICAgICAgICAgIGlmIChwYXRjaEZsYWcgJiA4IC8qIFBhdGNoRmxhZ3MuUFJPUFMgKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlIGZsYWcgaXMgcHJlc2VudCB0aGVuIGR5bmFtaWNQcm9wcyBtdXN0IGJlIG5vbi1udWxsXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb3BzVG9VcGRhdGUgPSBuMi5keW5hbWljUHJvcHM7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvcHNUb1VwZGF0ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gcHJvcHNUb1VwZGF0ZVtpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXYgPSBvbGRQcm9wc1trZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dCA9IG5ld1Byb3BzW2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAjMTQ3MSBmb3JjZSBwYXRjaCB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5leHQgIT09IHByZXYgfHwga2V5ID09PSAndmFsdWUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaG9zdFBhdGNoUHJvcChlbCwga2V5LCBwcmV2LCBuZXh0LCBpc1NWRywgbjEuY2hpbGRyZW4sIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHVubW91bnRDaGlsZHJlbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB0ZXh0XG4gICAgICAgICAgICAvLyBUaGlzIGZsYWcgaXMgbWF0Y2hlZCB3aGVuIHRoZSBlbGVtZW50IGhhcyBvbmx5IGR5bmFtaWMgdGV4dCBjaGlsZHJlbi5cbiAgICAgICAgICAgIGlmIChwYXRjaEZsYWcgJiAxIC8qIFBhdGNoRmxhZ3MuVEVYVCAqLykge1xuICAgICAgICAgICAgICAgIGlmIChuMS5jaGlsZHJlbiAhPT0gbjIuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgaG9zdFNldEVsZW1lbnRUZXh0KGVsLCBuMi5jaGlsZHJlbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFvcHRpbWl6ZWQgJiYgZHluYW1pY0NoaWxkcmVuID09IG51bGwpIHtcbiAgICAgICAgICAgIC8vIHVub3B0aW1pemVkLCBmdWxsIGRpZmZcbiAgICAgICAgICAgIHBhdGNoUHJvcHMoZWwsIG4yLCBvbGRQcm9wcywgbmV3UHJvcHMsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKHZub2RlSG9vayA9IG5ld1Byb3BzLm9uVm5vZGVVcGRhdGVkKSB8fCBkaXJzKSB7XG4gICAgICAgICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHZub2RlSG9vayAmJiBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBwYXJlbnRDb21wb25lbnQsIG4yLCBuMSk7XG4gICAgICAgICAgICAgICAgZGlycyAmJiBpbnZva2VEaXJlY3RpdmVIb29rKG4yLCBuMSwgcGFyZW50Q29tcG9uZW50LCAndXBkYXRlZCcpO1xuICAgICAgICAgICAgfSwgcGFyZW50U3VzcGVuc2UpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvLyBUaGUgZmFzdCBwYXRoIGZvciBibG9ja3MuXG4gICAgY29uc3QgcGF0Y2hCbG9ja0NoaWxkcmVuID0gKG9sZENoaWxkcmVuLCBuZXdDaGlsZHJlbiwgZmFsbGJhY2tDb250YWluZXIsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMpID0+IHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZXdDaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3Qgb2xkVk5vZGUgPSBvbGRDaGlsZHJlbltpXTtcbiAgICAgICAgICAgIGNvbnN0IG5ld1ZOb2RlID0gbmV3Q2hpbGRyZW5baV07XG4gICAgICAgICAgICAvLyBEZXRlcm1pbmUgdGhlIGNvbnRhaW5lciAocGFyZW50IGVsZW1lbnQpIGZvciB0aGUgcGF0Y2guXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBcbiAgICAgICAgICAgIC8vIG9sZFZOb2RlIG1heSBiZSBhbiBlcnJvcmVkIGFzeW5jIHNldHVwKCkgY29tcG9uZW50IGluc2lkZSBTdXNwZW5zZVxuICAgICAgICAgICAgLy8gd2hpY2ggd2lsbCBub3QgaGF2ZSBhIG1vdW50ZWQgZWxlbWVudFxuICAgICAgICAgICAgb2xkVk5vZGUuZWwgJiZcbiAgICAgICAgICAgICAgICAvLyAtIEluIHRoZSBjYXNlIG9mIGEgRnJhZ21lbnQsIHdlIG5lZWQgdG8gcHJvdmlkZSB0aGUgYWN0dWFsIHBhcmVudFxuICAgICAgICAgICAgICAgIC8vIG9mIHRoZSBGcmFnbWVudCBpdHNlbGYgc28gaXQgY2FuIG1vdmUgaXRzIGNoaWxkcmVuLlxuICAgICAgICAgICAgICAgIChvbGRWTm9kZS50eXBlID09PSBGcmFnbWVudCB8fFxuICAgICAgICAgICAgICAgICAgICAvLyAtIEluIHRoZSBjYXNlIG9mIGRpZmZlcmVudCBub2RlcywgdGhlcmUgaXMgZ29pbmcgdG8gYmUgYSByZXBsYWNlbWVudFxuICAgICAgICAgICAgICAgICAgICAvLyB3aGljaCBhbHNvIHJlcXVpcmVzIHRoZSBjb3JyZWN0IHBhcmVudCBjb250YWluZXJcbiAgICAgICAgICAgICAgICAgICAgIWlzU2FtZVZOb2RlVHlwZShvbGRWTm9kZSwgbmV3Vk5vZGUpIHx8XG4gICAgICAgICAgICAgICAgICAgIC8vIC0gSW4gdGhlIGNhc2Ugb2YgYSBjb21wb25lbnQsIGl0IGNvdWxkIGNvbnRhaW4gYW55dGhpbmcuXG4gICAgICAgICAgICAgICAgICAgIG9sZFZOb2RlLnNoYXBlRmxhZyAmICg2IC8qIFNoYXBlRmxhZ3MuQ09NUE9ORU5UICovIHwgNjQgLyogU2hhcGVGbGFncy5URUxFUE9SVCAqLykpXG4gICAgICAgICAgICAgICAgPyBob3N0UGFyZW50Tm9kZShvbGRWTm9kZS5lbClcbiAgICAgICAgICAgICAgICA6IC8vIEluIG90aGVyIGNhc2VzLCB0aGUgcGFyZW50IGNvbnRhaW5lciBpcyBub3QgYWN0dWFsbHkgdXNlZCBzbyB3ZVxuICAgICAgICAgICAgICAgICAgICAvLyBqdXN0IHBhc3MgdGhlIGJsb2NrIGVsZW1lbnQgaGVyZSB0byBhdm9pZCBhIERPTSBwYXJlbnROb2RlIGNhbGwuXG4gICAgICAgICAgICAgICAgICAgIGZhbGxiYWNrQ29udGFpbmVyO1xuICAgICAgICAgICAgcGF0Y2gob2xkVk5vZGUsIG5ld1ZOb2RlLCBjb250YWluZXIsIG51bGwsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIHRydWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBwYXRjaFByb3BzID0gKGVsLCB2bm9kZSwgb2xkUHJvcHMsIG5ld1Byb3BzLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRykgPT4ge1xuICAgICAgICBpZiAob2xkUHJvcHMgIT09IG5ld1Byb3BzKSB7XG4gICAgICAgICAgICBpZiAob2xkUHJvcHMgIT09IEVNUFRZX09CSikge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG9sZFByb3BzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNSZXNlcnZlZFByb3Aoa2V5KSAmJiAhKGtleSBpbiBuZXdQcm9wcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhvc3RQYXRjaFByb3AoZWwsIGtleSwgb2xkUHJvcHNba2V5XSwgbnVsbCwgaXNTVkcsIHZub2RlLmNoaWxkcmVuLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCB1bm1vdW50Q2hpbGRyZW4pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbmV3UHJvcHMpIHtcbiAgICAgICAgICAgICAgICAvLyBlbXB0eSBzdHJpbmcgaXMgbm90IHZhbGlkIHByb3BcbiAgICAgICAgICAgICAgICBpZiAoaXNSZXNlcnZlZFByb3Aoa2V5KSlcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dCA9IG5ld1Byb3BzW2tleV07XG4gICAgICAgICAgICAgICAgY29uc3QgcHJldiA9IG9sZFByb3BzW2tleV07XG4gICAgICAgICAgICAgICAgLy8gZGVmZXIgcGF0Y2hpbmcgdmFsdWVcbiAgICAgICAgICAgICAgICBpZiAobmV4dCAhPT0gcHJldiAmJiBrZXkgIT09ICd2YWx1ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgaG9zdFBhdGNoUHJvcChlbCwga2V5LCBwcmV2LCBuZXh0LCBpc1NWRywgdm5vZGUuY2hpbGRyZW4sIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHVubW91bnRDaGlsZHJlbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCd2YWx1ZScgaW4gbmV3UHJvcHMpIHtcbiAgICAgICAgICAgICAgICBob3N0UGF0Y2hQcm9wKGVsLCAndmFsdWUnLCBvbGRQcm9wcy52YWx1ZSwgbmV3UHJvcHMudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBwcm9jZXNzRnJhZ21lbnQgPSAobjEsIG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKSA9PiB7XG4gICAgICAgIGNvbnN0IGZyYWdtZW50U3RhcnRBbmNob3IgPSAobjIuZWwgPSBuMSA/IG4xLmVsIDogaG9zdENyZWF0ZVRleHQoJycpKTtcbiAgICAgICAgY29uc3QgZnJhZ21lbnRFbmRBbmNob3IgPSAobjIuYW5jaG9yID0gbjEgPyBuMS5hbmNob3IgOiBob3N0Q3JlYXRlVGV4dCgnJykpO1xuICAgICAgICBsZXQgeyBwYXRjaEZsYWcsIGR5bmFtaWNDaGlsZHJlbiwgc2xvdFNjb3BlSWRzOiBmcmFnbWVudFNsb3RTY29wZUlkcyB9ID0gbjI7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcbiAgICAgICAgICAgIC8vICM1NTIzIGRldiByb290IGZyYWdtZW50IG1heSBpbmhlcml0IGRpcmVjdGl2ZXNcbiAgICAgICAgICAgIChpc0htclVwZGF0aW5nIHx8IHBhdGNoRmxhZyAmIDIwNDggLyogUGF0Y2hGbGFncy5ERVZfUk9PVF9GUkFHTUVOVCAqLykpIHtcbiAgICAgICAgICAgIC8vIEhNUiB1cGRhdGVkIC8gRGV2IHJvb3QgZnJhZ21lbnQgKHcvIGNvbW1lbnRzKSwgZm9yY2UgZnVsbCBkaWZmXG4gICAgICAgICAgICBwYXRjaEZsYWcgPSAwO1xuICAgICAgICAgICAgb3B0aW1pemVkID0gZmFsc2U7XG4gICAgICAgICAgICBkeW5hbWljQ2hpbGRyZW4gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNoZWNrIGlmIHRoaXMgaXMgYSBzbG90IGZyYWdtZW50IHdpdGggOnNsb3R0ZWQgc2NvcGUgaWRzXG4gICAgICAgIGlmIChmcmFnbWVudFNsb3RTY29wZUlkcykge1xuICAgICAgICAgICAgc2xvdFNjb3BlSWRzID0gc2xvdFNjb3BlSWRzXG4gICAgICAgICAgICAgICAgPyBzbG90U2NvcGVJZHMuY29uY2F0KGZyYWdtZW50U2xvdFNjb3BlSWRzKVxuICAgICAgICAgICAgICAgIDogZnJhZ21lbnRTbG90U2NvcGVJZHM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG4xID09IG51bGwpIHtcbiAgICAgICAgICAgIGhvc3RJbnNlcnQoZnJhZ21lbnRTdGFydEFuY2hvciwgY29udGFpbmVyLCBhbmNob3IpO1xuICAgICAgICAgICAgaG9zdEluc2VydChmcmFnbWVudEVuZEFuY2hvciwgY29udGFpbmVyLCBhbmNob3IpO1xuICAgICAgICAgICAgLy8gYSBmcmFnbWVudCBjYW4gb25seSBoYXZlIGFycmF5IGNoaWxkcmVuXG4gICAgICAgICAgICAvLyBzaW5jZSB0aGV5IGFyZSBlaXRoZXIgZ2VuZXJhdGVkIGJ5IHRoZSBjb21waWxlciwgb3IgaW1wbGljaXRseSBjcmVhdGVkXG4gICAgICAgICAgICAvLyBmcm9tIGFycmF5cy5cbiAgICAgICAgICAgIG1vdW50Q2hpbGRyZW4objIuY2hpbGRyZW4sIGNvbnRhaW5lciwgZnJhZ21lbnRFbmRBbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAocGF0Y2hGbGFnID4gMCAmJlxuICAgICAgICAgICAgICAgIHBhdGNoRmxhZyAmIDY0IC8qIFBhdGNoRmxhZ3MuU1RBQkxFX0ZSQUdNRU5UICovICYmXG4gICAgICAgICAgICAgICAgZHluYW1pY0NoaWxkcmVuICYmXG4gICAgICAgICAgICAgICAgLy8gIzI3MTUgdGhlIHByZXZpb3VzIGZyYWdtZW50IGNvdWxkJ3ZlIGJlZW4gYSBCQUlMZWQgb25lIGFzIGEgcmVzdWx0XG4gICAgICAgICAgICAgICAgLy8gb2YgcmVuZGVyU2xvdCgpIHdpdGggbm8gdmFsaWQgY2hpbGRyZW5cbiAgICAgICAgICAgICAgICBuMS5keW5hbWljQ2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAvLyBhIHN0YWJsZSBmcmFnbWVudCAodGVtcGxhdGUgcm9vdCBvciA8dGVtcGxhdGUgdi1mb3I+KSBkb2Vzbid0IG5lZWQgdG9cbiAgICAgICAgICAgICAgICAvLyBwYXRjaCBjaGlsZHJlbiBvcmRlciwgYnV0IGl0IG1heSBjb250YWluIGR5bmFtaWNDaGlsZHJlbi5cbiAgICAgICAgICAgICAgICBwYXRjaEJsb2NrQ2hpbGRyZW4objEuZHluYW1pY0NoaWxkcmVuLCBkeW5hbWljQ2hpbGRyZW4sIGNvbnRhaW5lciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcyk7XG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBwYXJlbnRDb21wb25lbnQgJiYgcGFyZW50Q29tcG9uZW50LnR5cGUuX19obXJJZCkge1xuICAgICAgICAgICAgICAgICAgICB0cmF2ZXJzZVN0YXRpY0NoaWxkcmVuKG4xLCBuMik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgIC8vICMyMDgwIGlmIHRoZSBzdGFibGUgZnJhZ21lbnQgaGFzIGEga2V5LCBpdCdzIGEgPHRlbXBsYXRlIHYtZm9yPiB0aGF0IG1heVxuICAgICAgICAgICAgICAgIC8vICBnZXQgbW92ZWQgYXJvdW5kLiBNYWtlIHN1cmUgYWxsIHJvb3QgbGV2ZWwgdm5vZGVzIGluaGVyaXQgZWwuXG4gICAgICAgICAgICAgICAgLy8gIzIxMzQgb3IgaWYgaXQncyBhIGNvbXBvbmVudCByb290LCBpdCBtYXkgYWxzbyBnZXQgbW92ZWQgYXJvdW5kXG4gICAgICAgICAgICAgICAgLy8gYXMgdGhlIGNvbXBvbmVudCBpcyBiZWluZyBtb3ZlZC5cbiAgICAgICAgICAgICAgICBuMi5rZXkgIT0gbnVsbCB8fFxuICAgICAgICAgICAgICAgICAgICAocGFyZW50Q29tcG9uZW50ICYmIG4yID09PSBwYXJlbnRDb21wb25lbnQuc3ViVHJlZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJhdmVyc2VTdGF0aWNDaGlsZHJlbihuMSwgbjIsIHRydWUgLyogc2hhbGxvdyAqLyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8ga2V5ZWQgLyB1bmtleWVkLCBvciBtYW51YWwgZnJhZ21lbnRzLlxuICAgICAgICAgICAgICAgIC8vIGZvciBrZXllZCAmIHVua2V5ZWQsIHNpbmNlIHRoZXkgYXJlIGNvbXBpbGVyIGdlbmVyYXRlZCBmcm9tIHYtZm9yLFxuICAgICAgICAgICAgICAgIC8vIGVhY2ggY2hpbGQgaXMgZ3VhcmFudGVlZCB0byBiZSBhIGJsb2NrIHNvIHRoZSBmcmFnbWVudCB3aWxsIG5ldmVyXG4gICAgICAgICAgICAgICAgLy8gaGF2ZSBkeW5hbWljQ2hpbGRyZW4uXG4gICAgICAgICAgICAgICAgcGF0Y2hDaGlsZHJlbihuMSwgbjIsIGNvbnRhaW5lciwgZnJhZ21lbnRFbmRBbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHByb2Nlc3NDb21wb25lbnQgPSAobjEsIG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKSA9PiB7XG4gICAgICAgIG4yLnNsb3RTY29wZUlkcyA9IHNsb3RTY29wZUlkcztcbiAgICAgICAgaWYgKG4xID09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChuMi5zaGFwZUZsYWcgJiA1MTIgLyogU2hhcGVGbGFncy5DT01QT05FTlRfS0VQVF9BTElWRSAqLykge1xuICAgICAgICAgICAgICAgIHBhcmVudENvbXBvbmVudC5jdHguYWN0aXZhdGUobjIsIGNvbnRhaW5lciwgYW5jaG9yLCBpc1NWRywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1vdW50Q29tcG9uZW50KG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIG9wdGltaXplZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB1cGRhdGVDb21wb25lbnQobjEsIG4yLCBvcHRpbWl6ZWQpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBtb3VudENvbXBvbmVudCA9IChpbml0aWFsVk5vZGUsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgb3B0aW1pemVkKSA9PiB7XG4gICAgICAgIGNvbnN0IGluc3RhbmNlID0gKGluaXRpYWxWTm9kZS5jb21wb25lbnQgPSBjcmVhdGVDb21wb25lbnRJbnN0YW5jZShpbml0aWFsVk5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UpKTtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBpbnN0YW5jZS50eXBlLl9faG1ySWQpIHtcbiAgICAgICAgICAgIHJlZ2lzdGVySE1SKGluc3RhbmNlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICBwdXNoV2FybmluZ0NvbnRleHQoaW5pdGlhbFZOb2RlKTtcbiAgICAgICAgICAgIHN0YXJ0TWVhc3VyZShpbnN0YW5jZSwgYG1vdW50YCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaW5qZWN0IHJlbmRlcmVyIGludGVybmFscyBmb3Iga2VlcEFsaXZlXG4gICAgICAgIGlmIChpc0tlZXBBbGl2ZShpbml0aWFsVk5vZGUpKSB7XG4gICAgICAgICAgICBpbnN0YW5jZS5jdHgucmVuZGVyZXIgPSBpbnRlcm5hbHM7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmVzb2x2ZSBwcm9wcyBhbmQgc2xvdHMgZm9yIHNldHVwIGNvbnRleHRcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgIHN0YXJ0TWVhc3VyZShpbnN0YW5jZSwgYGluaXRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNldHVwQ29tcG9uZW50KGluc3RhbmNlKTtcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICBlbmRNZWFzdXJlKGluc3RhbmNlLCBgaW5pdGApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIHNldHVwKCkgaXMgYXN5bmMuIFRoaXMgY29tcG9uZW50IHJlbGllcyBvbiBhc3luYyBsb2dpYyB0byBiZSByZXNvbHZlZFxuICAgICAgICAvLyBiZWZvcmUgcHJvY2VlZGluZ1xuICAgICAgICBpZiAoaW5zdGFuY2UuYXN5bmNEZXApIHtcbiAgICAgICAgICAgIHBhcmVudFN1c3BlbnNlICYmIHBhcmVudFN1c3BlbnNlLnJlZ2lzdGVyRGVwKGluc3RhbmNlLCBzZXR1cFJlbmRlckVmZmVjdCk7XG4gICAgICAgICAgICAvLyBHaXZlIGl0IGEgcGxhY2Vob2xkZXIgaWYgdGhpcyBpcyBub3QgaHlkcmF0aW9uXG4gICAgICAgICAgICAvLyBUT0RPIGhhbmRsZSBzZWxmLWRlZmluZWQgZmFsbGJhY2tcbiAgICAgICAgICAgIGlmICghaW5pdGlhbFZOb2RlLmVsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGxhY2Vob2xkZXIgPSAoaW5zdGFuY2Uuc3ViVHJlZSA9IGNyZWF0ZVZOb2RlKENvbW1lbnQpKTtcbiAgICAgICAgICAgICAgICBwcm9jZXNzQ29tbWVudE5vZGUobnVsbCwgcGxhY2Vob2xkZXIsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBzZXR1cFJlbmRlckVmZmVjdChpbnN0YW5jZSwgaW5pdGlhbFZOb2RlLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBvcHRpbWl6ZWQpO1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICBwb3BXYXJuaW5nQ29udGV4dCgpO1xuICAgICAgICAgICAgZW5kTWVhc3VyZShpbnN0YW5jZSwgYG1vdW50YCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHVwZGF0ZUNvbXBvbmVudCA9IChuMSwgbjIsIG9wdGltaXplZCkgPT4ge1xuICAgICAgICBjb25zdCBpbnN0YW5jZSA9IChuMi5jb21wb25lbnQgPSBuMS5jb21wb25lbnQpO1xuICAgICAgICBpZiAoc2hvdWxkVXBkYXRlQ29tcG9uZW50KG4xLCBuMiwgb3B0aW1pemVkKSkge1xuICAgICAgICAgICAgaWYgKGluc3RhbmNlLmFzeW5jRGVwICYmXG4gICAgICAgICAgICAgICAgIWluc3RhbmNlLmFzeW5jUmVzb2x2ZWQpIHtcbiAgICAgICAgICAgICAgICAvLyBhc3luYyAmIHN0aWxsIHBlbmRpbmcgLSBqdXN0IHVwZGF0ZSBwcm9wcyBhbmQgc2xvdHNcbiAgICAgICAgICAgICAgICAvLyBzaW5jZSB0aGUgY29tcG9uZW50J3MgcmVhY3RpdmUgZWZmZWN0IGZvciByZW5kZXIgaXNuJ3Qgc2V0LXVwIHlldFxuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgcHVzaFdhcm5pbmdDb250ZXh0KG4yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdXBkYXRlQ29tcG9uZW50UHJlUmVuZGVyKGluc3RhbmNlLCBuMiwgb3B0aW1pemVkKTtcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIHBvcFdhcm5pbmdDb250ZXh0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIG5vcm1hbCB1cGRhdGVcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5uZXh0ID0gbjI7XG4gICAgICAgICAgICAgICAgLy8gaW4gY2FzZSB0aGUgY2hpbGQgY29tcG9uZW50IGlzIGFsc28gcXVldWVkLCByZW1vdmUgaXQgdG8gYXZvaWRcbiAgICAgICAgICAgICAgICAvLyBkb3VibGUgdXBkYXRpbmcgdGhlIHNhbWUgY2hpbGQgY29tcG9uZW50IGluIHRoZSBzYW1lIGZsdXNoLlxuICAgICAgICAgICAgICAgIGludmFsaWRhdGVKb2IoaW5zdGFuY2UudXBkYXRlKTtcbiAgICAgICAgICAgICAgICAvLyBpbnN0YW5jZS51cGRhdGUgaXMgdGhlIHJlYWN0aXZlIGVmZmVjdC5cbiAgICAgICAgICAgICAgICBpbnN0YW5jZS51cGRhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIG5vIHVwZGF0ZSBuZWVkZWQuIGp1c3QgY29weSBvdmVyIHByb3BlcnRpZXNcbiAgICAgICAgICAgIG4yLmVsID0gbjEuZWw7XG4gICAgICAgICAgICBpbnN0YW5jZS52bm9kZSA9IG4yO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBzZXR1cFJlbmRlckVmZmVjdCA9IChpbnN0YW5jZSwgaW5pdGlhbFZOb2RlLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBvcHRpbWl6ZWQpID0+IHtcbiAgICAgICAgY29uc3QgY29tcG9uZW50VXBkYXRlRm4gPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWluc3RhbmNlLmlzTW91bnRlZCkge1xuICAgICAgICAgICAgICAgIGxldCB2bm9kZUhvb2s7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBlbCwgcHJvcHMgfSA9IGluaXRpYWxWTm9kZTtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGJtLCBtLCBwYXJlbnQgfSA9IGluc3RhbmNlO1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzQXN5bmNXcmFwcGVyVk5vZGUgPSBpc0FzeW5jV3JhcHBlcihpbml0aWFsVk5vZGUpO1xuICAgICAgICAgICAgICAgIHRvZ2dsZVJlY3Vyc2UoaW5zdGFuY2UsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAvLyBiZWZvcmVNb3VudCBob29rXG4gICAgICAgICAgICAgICAgaWYgKGJtKSB7XG4gICAgICAgICAgICAgICAgICAgIGludm9rZUFycmF5Rm5zKGJtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gb25Wbm9kZUJlZm9yZU1vdW50XG4gICAgICAgICAgICAgICAgaWYgKCFpc0FzeW5jV3JhcHBlclZOb2RlICYmXG4gICAgICAgICAgICAgICAgICAgICh2bm9kZUhvb2sgPSBwcm9wcyAmJiBwcm9wcy5vblZub2RlQmVmb3JlTW91bnQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGludm9rZVZOb2RlSG9vayh2bm9kZUhvb2ssIHBhcmVudCwgaW5pdGlhbFZOb2RlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdG9nZ2xlUmVjdXJzZShpbnN0YW5jZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKGVsICYmIGh5ZHJhdGVOb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHZub2RlIGhhcyBhZG9wdGVkIGhvc3Qgbm9kZSAtIHBlcmZvcm0gaHlkcmF0aW9uIGluc3RlYWQgb2YgbW91bnQuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGh5ZHJhdGVTdWJUcmVlID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0TWVhc3VyZShpbnN0YW5jZSwgYHJlbmRlcmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2Uuc3ViVHJlZSA9IHJlbmRlckNvbXBvbmVudFJvb3QoaW5zdGFuY2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZE1lYXN1cmUoaW5zdGFuY2UsIGByZW5kZXJgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGBoeWRyYXRlYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBoeWRyYXRlTm9kZShlbCwgaW5zdGFuY2Uuc3ViVHJlZSwgaW5zdGFuY2UsIHBhcmVudFN1c3BlbnNlLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRNZWFzdXJlKGluc3RhbmNlLCBgaHlkcmF0ZWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNBc3luY1dyYXBwZXJWTm9kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbFZOb2RlLnR5cGUuX19hc3luY0xvYWRlcigpLnRoZW4oXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBub3RlOiB3ZSBhcmUgbW92aW5nIHRoZSByZW5kZXIgY2FsbCBpbnRvIGFuIGFzeW5jIGNhbGxiYWNrLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2hpY2ggbWVhbnMgaXQgd29uJ3QgdHJhY2sgZGVwZW5kZW5jaWVzIC0gYnV0IGl0J3Mgb2sgYmVjYXVzZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYSBzZXJ2ZXItcmVuZGVyZWQgYXN5bmMgd3JhcHBlciBpcyBhbHJlYWR5IGluIHJlc29sdmVkIHN0YXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgaXQgd2lsbCBuZXZlciBuZWVkIHRvIGNoYW5nZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICgpID0+ICFpbnN0YW5jZS5pc1VubW91bnRlZCAmJiBoeWRyYXRlU3ViVHJlZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGh5ZHJhdGVTdWJUcmVlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0TWVhc3VyZShpbnN0YW5jZSwgYHJlbmRlcmApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1YlRyZWUgPSAoaW5zdGFuY2Uuc3ViVHJlZSA9IHJlbmRlckNvbXBvbmVudFJvb3QoaW5zdGFuY2UpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5kTWVhc3VyZShpbnN0YW5jZSwgYHJlbmRlcmApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0TWVhc3VyZShpbnN0YW5jZSwgYHBhdGNoYCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcGF0Y2gobnVsbCwgc3ViVHJlZSwgY29udGFpbmVyLCBhbmNob3IsIGluc3RhbmNlLCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmRNZWFzdXJlKGluc3RhbmNlLCBgcGF0Y2hgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpbml0aWFsVk5vZGUuZWwgPSBzdWJUcmVlLmVsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBtb3VudGVkIGhvb2tcbiAgICAgICAgICAgICAgICBpZiAobSkge1xuICAgICAgICAgICAgICAgICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QobSwgcGFyZW50U3VzcGVuc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBvblZub2RlTW91bnRlZFxuICAgICAgICAgICAgICAgIGlmICghaXNBc3luY1dyYXBwZXJWTm9kZSAmJlxuICAgICAgICAgICAgICAgICAgICAodm5vZGVIb29rID0gcHJvcHMgJiYgcHJvcHMub25Wbm9kZU1vdW50ZWQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNjb3BlZEluaXRpYWxWTm9kZSA9IGluaXRpYWxWTm9kZTtcbiAgICAgICAgICAgICAgICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KCgpID0+IGludm9rZVZOb2RlSG9vayh2bm9kZUhvb2ssIHBhcmVudCwgc2NvcGVkSW5pdGlhbFZOb2RlKSwgcGFyZW50U3VzcGVuc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBhY3RpdmF0ZWQgaG9vayBmb3Iga2VlcC1hbGl2ZSByb290cy5cbiAgICAgICAgICAgICAgICAvLyAjMTc0MiBhY3RpdmF0ZWQgaG9vayBtdXN0IGJlIGFjY2Vzc2VkIGFmdGVyIGZpcnN0IHJlbmRlclxuICAgICAgICAgICAgICAgIC8vIHNpbmNlIHRoZSBob29rIG1heSBiZSBpbmplY3RlZCBieSBhIGNoaWxkIGtlZXAtYWxpdmVcbiAgICAgICAgICAgICAgICBpZiAoaW5pdGlhbFZOb2RlLnNoYXBlRmxhZyAmIDI1NiAvKiBTaGFwZUZsYWdzLkNPTVBPTkVOVF9TSE9VTERfS0VFUF9BTElWRSAqLyB8fFxuICAgICAgICAgICAgICAgICAgICAocGFyZW50ICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0FzeW5jV3JhcHBlcihwYXJlbnQudm5vZGUpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQudm5vZGUuc2hhcGVGbGFnICYgMjU2IC8qIFNoYXBlRmxhZ3MuQ09NUE9ORU5UX1NIT1VMRF9LRUVQX0FMSVZFICovKSkge1xuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5hICYmIHF1ZXVlUG9zdFJlbmRlckVmZmVjdChpbnN0YW5jZS5hLCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGluc3RhbmNlLmlzTW91bnRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pIHtcbiAgICAgICAgICAgICAgICAgICAgZGV2dG9vbHNDb21wb25lbnRBZGRlZChpbnN0YW5jZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vICMyNDU4OiBkZWZlcmVuY2UgbW91bnQtb25seSBvYmplY3QgcGFyYW1ldGVycyB0byBwcmV2ZW50IG1lbWxlYWtzXG4gICAgICAgICAgICAgICAgaW5pdGlhbFZOb2RlID0gY29udGFpbmVyID0gYW5jaG9yID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIHVwZGF0ZUNvbXBvbmVudFxuICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdHJpZ2dlcmVkIGJ5IG11dGF0aW9uIG9mIGNvbXBvbmVudCdzIG93biBzdGF0ZSAobmV4dDogbnVsbClcbiAgICAgICAgICAgICAgICAvLyBPUiBwYXJlbnQgY2FsbGluZyBwcm9jZXNzQ29tcG9uZW50IChuZXh0OiBWTm9kZSlcbiAgICAgICAgICAgICAgICBsZXQgeyBuZXh0LCBidSwgdSwgcGFyZW50LCB2bm9kZSB9ID0gaW5zdGFuY2U7XG4gICAgICAgICAgICAgICAgbGV0IG9yaWdpbk5leHQgPSBuZXh0O1xuICAgICAgICAgICAgICAgIGxldCB2bm9kZUhvb2s7XG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICBwdXNoV2FybmluZ0NvbnRleHQobmV4dCB8fCBpbnN0YW5jZS52bm9kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIERpc2FsbG93IGNvbXBvbmVudCBlZmZlY3QgcmVjdXJzaW9uIGR1cmluZyBwcmUtbGlmZWN5Y2xlIGhvb2tzLlxuICAgICAgICAgICAgICAgIHRvZ2dsZVJlY3Vyc2UoaW5zdGFuY2UsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBpZiAobmV4dCkge1xuICAgICAgICAgICAgICAgICAgICBuZXh0LmVsID0gdm5vZGUuZWw7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZUNvbXBvbmVudFByZVJlbmRlcihpbnN0YW5jZSwgbmV4dCwgb3B0aW1pemVkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5leHQgPSB2bm9kZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gYmVmb3JlVXBkYXRlIGhvb2tcbiAgICAgICAgICAgICAgICBpZiAoYnUpIHtcbiAgICAgICAgICAgICAgICAgICAgaW52b2tlQXJyYXlGbnMoYnUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBvblZub2RlQmVmb3JlVXBkYXRlXG4gICAgICAgICAgICAgICAgaWYgKCh2bm9kZUhvb2sgPSBuZXh0LnByb3BzICYmIG5leHQucHJvcHMub25Wbm9kZUJlZm9yZVVwZGF0ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaW52b2tlVk5vZGVIb29rKHZub2RlSG9vaywgcGFyZW50LCBuZXh0LCB2bm9kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRvZ2dsZVJlY3Vyc2UoaW5zdGFuY2UsIHRydWUpO1xuICAgICAgICAgICAgICAgIC8vIHJlbmRlclxuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRNZWFzdXJlKGluc3RhbmNlLCBgcmVuZGVyYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IG5leHRUcmVlID0gcmVuZGVyQ29tcG9uZW50Um9vdChpbnN0YW5jZSk7XG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICBlbmRNZWFzdXJlKGluc3RhbmNlLCBgcmVuZGVyYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHByZXZUcmVlID0gaW5zdGFuY2Uuc3ViVHJlZTtcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5zdWJUcmVlID0gbmV4dFRyZWU7XG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGBwYXRjaGApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwYXRjaChwcmV2VHJlZSwgbmV4dFRyZWUsIFxuICAgICAgICAgICAgICAgIC8vIHBhcmVudCBtYXkgaGF2ZSBjaGFuZ2VkIGlmIGl0J3MgaW4gYSB0ZWxlcG9ydFxuICAgICAgICAgICAgICAgIGhvc3RQYXJlbnROb2RlKHByZXZUcmVlLmVsKSwgXG4gICAgICAgICAgICAgICAgLy8gYW5jaG9yIG1heSBoYXZlIGNoYW5nZWQgaWYgaXQncyBpbiBhIGZyYWdtZW50XG4gICAgICAgICAgICAgICAgZ2V0TmV4dEhvc3ROb2RlKHByZXZUcmVlKSwgaW5zdGFuY2UsIHBhcmVudFN1c3BlbnNlLCBpc1NWRyk7XG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICBlbmRNZWFzdXJlKGluc3RhbmNlLCBgcGF0Y2hgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbmV4dC5lbCA9IG5leHRUcmVlLmVsO1xuICAgICAgICAgICAgICAgIGlmIChvcmlnaW5OZXh0ID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHNlbGYtdHJpZ2dlcmVkIHVwZGF0ZS4gSW4gY2FzZSBvZiBIT0MsIHVwZGF0ZSBwYXJlbnQgY29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgIC8vIHZub2RlIGVsLiBIT0MgaXMgaW5kaWNhdGVkIGJ5IHBhcmVudCBpbnN0YW5jZSdzIHN1YlRyZWUgcG9pbnRpbmdcbiAgICAgICAgICAgICAgICAgICAgLy8gdG8gY2hpbGQgY29tcG9uZW50J3Mgdm5vZGVcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlSE9DSG9zdEVsKGluc3RhbmNlLCBuZXh0VHJlZS5lbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIHVwZGF0ZWQgaG9va1xuICAgICAgICAgICAgICAgIGlmICh1KSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdCh1LCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIG9uVm5vZGVVcGRhdGVkXG4gICAgICAgICAgICAgICAgaWYgKCh2bm9kZUhvb2sgPSBuZXh0LnByb3BzICYmIG5leHQucHJvcHMub25Wbm9kZVVwZGF0ZWQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdCgoKSA9PiBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBwYXJlbnQsIG5leHQsIHZub2RlKSwgcGFyZW50U3VzcGVuc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xuICAgICAgICAgICAgICAgICAgICBkZXZ0b29sc0NvbXBvbmVudFVwZGF0ZWQoaW5zdGFuY2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIHBvcFdhcm5pbmdDb250ZXh0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvLyBjcmVhdGUgcmVhY3RpdmUgZWZmZWN0IGZvciByZW5kZXJpbmdcbiAgICAgICAgY29uc3QgZWZmZWN0ID0gKGluc3RhbmNlLmVmZmVjdCA9IG5ldyBSZWFjdGl2ZUVmZmVjdChjb21wb25lbnRVcGRhdGVGbiwgKCkgPT4gcXVldWVKb2IodXBkYXRlKSwgaW5zdGFuY2Uuc2NvcGUgLy8gdHJhY2sgaXQgaW4gY29tcG9uZW50J3MgZWZmZWN0IHNjb3BlXG4gICAgICAgICkpO1xuICAgICAgICBjb25zdCB1cGRhdGUgPSAoaW5zdGFuY2UudXBkYXRlID0gKCkgPT4gZWZmZWN0LnJ1bigpKTtcbiAgICAgICAgdXBkYXRlLmlkID0gaW5zdGFuY2UudWlkO1xuICAgICAgICAvLyBhbGxvd1JlY3Vyc2VcbiAgICAgICAgLy8gIzE4MDEsICMyMDQzIGNvbXBvbmVudCByZW5kZXIgZWZmZWN0cyBzaG91bGQgYWxsb3cgcmVjdXJzaXZlIHVwZGF0ZXNcbiAgICAgICAgdG9nZ2xlUmVjdXJzZShpbnN0YW5jZSwgdHJ1ZSk7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgIGVmZmVjdC5vblRyYWNrID0gaW5zdGFuY2UucnRjXG4gICAgICAgICAgICAgICAgPyBlID0+IGludm9rZUFycmF5Rm5zKGluc3RhbmNlLnJ0YywgZSlcbiAgICAgICAgICAgICAgICA6IHZvaWQgMDtcbiAgICAgICAgICAgIGVmZmVjdC5vblRyaWdnZXIgPSBpbnN0YW5jZS5ydGdcbiAgICAgICAgICAgICAgICA/IGUgPT4gaW52b2tlQXJyYXlGbnMoaW5zdGFuY2UucnRnLCBlKVxuICAgICAgICAgICAgICAgIDogdm9pZCAwO1xuICAgICAgICAgICAgdXBkYXRlLm93bmVySW5zdGFuY2UgPSBpbnN0YW5jZTtcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGUoKTtcbiAgICB9O1xuICAgIGNvbnN0IHVwZGF0ZUNvbXBvbmVudFByZVJlbmRlciA9IChpbnN0YW5jZSwgbmV4dFZOb2RlLCBvcHRpbWl6ZWQpID0+IHtcbiAgICAgICAgbmV4dFZOb2RlLmNvbXBvbmVudCA9IGluc3RhbmNlO1xuICAgICAgICBjb25zdCBwcmV2UHJvcHMgPSBpbnN0YW5jZS52bm9kZS5wcm9wcztcbiAgICAgICAgaW5zdGFuY2Uudm5vZGUgPSBuZXh0Vk5vZGU7XG4gICAgICAgIGluc3RhbmNlLm5leHQgPSBudWxsO1xuICAgICAgICB1cGRhdGVQcm9wcyhpbnN0YW5jZSwgbmV4dFZOb2RlLnByb3BzLCBwcmV2UHJvcHMsIG9wdGltaXplZCk7XG4gICAgICAgIHVwZGF0ZVNsb3RzKGluc3RhbmNlLCBuZXh0Vk5vZGUuY2hpbGRyZW4sIG9wdGltaXplZCk7XG4gICAgICAgIHBhdXNlVHJhY2tpbmcoKTtcbiAgICAgICAgLy8gcHJvcHMgdXBkYXRlIG1heSBoYXZlIHRyaWdnZXJlZCBwcmUtZmx1c2ggd2F0Y2hlcnMuXG4gICAgICAgIC8vIGZsdXNoIHRoZW0gYmVmb3JlIHRoZSByZW5kZXIgdXBkYXRlLlxuICAgICAgICBmbHVzaFByZUZsdXNoQ2JzKCk7XG4gICAgICAgIHJlc2V0VHJhY2tpbmcoKTtcbiAgICB9O1xuICAgIGNvbnN0IHBhdGNoQ2hpbGRyZW4gPSAobjEsIG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkID0gZmFsc2UpID0+IHtcbiAgICAgICAgY29uc3QgYzEgPSBuMSAmJiBuMS5jaGlsZHJlbjtcbiAgICAgICAgY29uc3QgcHJldlNoYXBlRmxhZyA9IG4xID8gbjEuc2hhcGVGbGFnIDogMDtcbiAgICAgICAgY29uc3QgYzIgPSBuMi5jaGlsZHJlbjtcbiAgICAgICAgY29uc3QgeyBwYXRjaEZsYWcsIHNoYXBlRmxhZyB9ID0gbjI7XG4gICAgICAgIC8vIGZhc3QgcGF0aFxuICAgICAgICBpZiAocGF0Y2hGbGFnID4gMCkge1xuICAgICAgICAgICAgaWYgKHBhdGNoRmxhZyAmIDEyOCAvKiBQYXRjaEZsYWdzLktFWUVEX0ZSQUdNRU5UICovKSB7XG4gICAgICAgICAgICAgICAgLy8gdGhpcyBjb3VsZCBiZSBlaXRoZXIgZnVsbHkta2V5ZWQgb3IgbWl4ZWQgKHNvbWUga2V5ZWQgc29tZSBub3QpXG4gICAgICAgICAgICAgICAgLy8gcHJlc2VuY2Ugb2YgcGF0Y2hGbGFnIG1lYW5zIGNoaWxkcmVuIGFyZSBndWFyYW50ZWVkIHRvIGJlIGFycmF5c1xuICAgICAgICAgICAgICAgIHBhdGNoS2V5ZWRDaGlsZHJlbihjMSwgYzIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHBhdGNoRmxhZyAmIDI1NiAvKiBQYXRjaEZsYWdzLlVOS0VZRURfRlJBR01FTlQgKi8pIHtcbiAgICAgICAgICAgICAgICAvLyB1bmtleWVkXG4gICAgICAgICAgICAgICAgcGF0Y2hVbmtleWVkQ2hpbGRyZW4oYzEsIGMyLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gY2hpbGRyZW4gaGFzIDMgcG9zc2liaWxpdGllczogdGV4dCwgYXJyYXkgb3Igbm8gY2hpbGRyZW4uXG4gICAgICAgIGlmIChzaGFwZUZsYWcgJiA4IC8qIFNoYXBlRmxhZ3MuVEVYVF9DSElMRFJFTiAqLykge1xuICAgICAgICAgICAgLy8gdGV4dCBjaGlsZHJlbiBmYXN0IHBhdGhcbiAgICAgICAgICAgIGlmIChwcmV2U2hhcGVGbGFnICYgMTYgLyogU2hhcGVGbGFncy5BUlJBWV9DSElMRFJFTiAqLykge1xuICAgICAgICAgICAgICAgIHVubW91bnRDaGlsZHJlbihjMSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYzIgIT09IGMxKSB7XG4gICAgICAgICAgICAgICAgaG9zdFNldEVsZW1lbnRUZXh0KGNvbnRhaW5lciwgYzIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHByZXZTaGFwZUZsYWcgJiAxNiAvKiBTaGFwZUZsYWdzLkFSUkFZX0NISUxEUkVOICovKSB7XG4gICAgICAgICAgICAgICAgLy8gcHJldiBjaGlsZHJlbiB3YXMgYXJyYXlcbiAgICAgICAgICAgICAgICBpZiAoc2hhcGVGbGFnICYgMTYgLyogU2hhcGVGbGFncy5BUlJBWV9DSElMRFJFTiAqLykge1xuICAgICAgICAgICAgICAgICAgICAvLyB0d28gYXJyYXlzLCBjYW5ub3QgYXNzdW1lIGFueXRoaW5nLCBkbyBmdWxsIGRpZmZcbiAgICAgICAgICAgICAgICAgICAgcGF0Y2hLZXllZENoaWxkcmVuKGMxLCBjMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBubyBuZXcgY2hpbGRyZW4sIGp1c3QgdW5tb3VudCBvbGRcbiAgICAgICAgICAgICAgICAgICAgdW5tb3VudENoaWxkcmVuKGMxLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBwcmV2IGNoaWxkcmVuIHdhcyB0ZXh0IE9SIG51bGxcbiAgICAgICAgICAgICAgICAvLyBuZXcgY2hpbGRyZW4gaXMgYXJyYXkgT1IgbnVsbFxuICAgICAgICAgICAgICAgIGlmIChwcmV2U2hhcGVGbGFnICYgOCAvKiBTaGFwZUZsYWdzLlRFWFRfQ0hJTERSRU4gKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgaG9zdFNldEVsZW1lbnRUZXh0KGNvbnRhaW5lciwgJycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBtb3VudCBuZXcgaWYgYXJyYXlcbiAgICAgICAgICAgICAgICBpZiAoc2hhcGVGbGFnICYgMTYgLyogU2hhcGVGbGFncy5BUlJBWV9DSElMRFJFTiAqLykge1xuICAgICAgICAgICAgICAgICAgICBtb3VudENoaWxkcmVuKGMyLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHBhdGNoVW5rZXllZENoaWxkcmVuID0gKGMxLCBjMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCkgPT4ge1xuICAgICAgICBjMSA9IGMxIHx8IEVNUFRZX0FSUjtcbiAgICAgICAgYzIgPSBjMiB8fCBFTVBUWV9BUlI7XG4gICAgICAgIGNvbnN0IG9sZExlbmd0aCA9IGMxLmxlbmd0aDtcbiAgICAgICAgY29uc3QgbmV3TGVuZ3RoID0gYzIubGVuZ3RoO1xuICAgICAgICBjb25zdCBjb21tb25MZW5ndGggPSBNYXRoLm1pbihvbGRMZW5ndGgsIG5ld0xlbmd0aCk7XG4gICAgICAgIGxldCBpO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgY29tbW9uTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IG5leHRDaGlsZCA9IChjMltpXSA9IG9wdGltaXplZFxuICAgICAgICAgICAgICAgID8gY2xvbmVJZk1vdW50ZWQoYzJbaV0pXG4gICAgICAgICAgICAgICAgOiBub3JtYWxpemVWTm9kZShjMltpXSkpO1xuICAgICAgICAgICAgcGF0Y2goYzFbaV0sIG5leHRDaGlsZCwgY29udGFpbmVyLCBudWxsLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvbGRMZW5ndGggPiBuZXdMZW5ndGgpIHtcbiAgICAgICAgICAgIC8vIHJlbW92ZSBvbGRcbiAgICAgICAgICAgIHVubW91bnRDaGlsZHJlbihjMSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgdHJ1ZSwgZmFsc2UsIGNvbW1vbkxlbmd0aCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBtb3VudCBuZXdcbiAgICAgICAgICAgIG1vdW50Q2hpbGRyZW4oYzIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIGNvbW1vbkxlbmd0aCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8vIGNhbiBiZSBhbGwta2V5ZWQgb3IgbWl4ZWRcbiAgICBjb25zdCBwYXRjaEtleWVkQ2hpbGRyZW4gPSAoYzEsIGMyLCBjb250YWluZXIsIHBhcmVudEFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKSA9PiB7XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgY29uc3QgbDIgPSBjMi5sZW5ndGg7XG4gICAgICAgIGxldCBlMSA9IGMxLmxlbmd0aCAtIDE7IC8vIHByZXYgZW5kaW5nIGluZGV4XG4gICAgICAgIGxldCBlMiA9IGwyIC0gMTsgLy8gbmV4dCBlbmRpbmcgaW5kZXhcbiAgICAgICAgLy8gMS4gc3luYyBmcm9tIHN0YXJ0XG4gICAgICAgIC8vIChhIGIpIGNcbiAgICAgICAgLy8gKGEgYikgZCBlXG4gICAgICAgIHdoaWxlIChpIDw9IGUxICYmIGkgPD0gZTIpIHtcbiAgICAgICAgICAgIGNvbnN0IG4xID0gYzFbaV07XG4gICAgICAgICAgICBjb25zdCBuMiA9IChjMltpXSA9IG9wdGltaXplZFxuICAgICAgICAgICAgICAgID8gY2xvbmVJZk1vdW50ZWQoYzJbaV0pXG4gICAgICAgICAgICAgICAgOiBub3JtYWxpemVWTm9kZShjMltpXSkpO1xuICAgICAgICAgICAgaWYgKGlzU2FtZVZOb2RlVHlwZShuMSwgbjIpKSB7XG4gICAgICAgICAgICAgICAgcGF0Y2gobjEsIG4yLCBjb250YWluZXIsIG51bGwsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgfVxuICAgICAgICAvLyAyLiBzeW5jIGZyb20gZW5kXG4gICAgICAgIC8vIGEgKGIgYylcbiAgICAgICAgLy8gZCBlIChiIGMpXG4gICAgICAgIHdoaWxlIChpIDw9IGUxICYmIGkgPD0gZTIpIHtcbiAgICAgICAgICAgIGNvbnN0IG4xID0gYzFbZTFdO1xuICAgICAgICAgICAgY29uc3QgbjIgPSAoYzJbZTJdID0gb3B0aW1pemVkXG4gICAgICAgICAgICAgICAgPyBjbG9uZUlmTW91bnRlZChjMltlMl0pXG4gICAgICAgICAgICAgICAgOiBub3JtYWxpemVWTm9kZShjMltlMl0pKTtcbiAgICAgICAgICAgIGlmIChpc1NhbWVWTm9kZVR5cGUobjEsIG4yKSkge1xuICAgICAgICAgICAgICAgIHBhdGNoKG4xLCBuMiwgY29udGFpbmVyLCBudWxsLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlMS0tO1xuICAgICAgICAgICAgZTItLTtcbiAgICAgICAgfVxuICAgICAgICAvLyAzLiBjb21tb24gc2VxdWVuY2UgKyBtb3VudFxuICAgICAgICAvLyAoYSBiKVxuICAgICAgICAvLyAoYSBiKSBjXG4gICAgICAgIC8vIGkgPSAyLCBlMSA9IDEsIGUyID0gMlxuICAgICAgICAvLyAoYSBiKVxuICAgICAgICAvLyBjIChhIGIpXG4gICAgICAgIC8vIGkgPSAwLCBlMSA9IC0xLCBlMiA9IDBcbiAgICAgICAgaWYgKGkgPiBlMSkge1xuICAgICAgICAgICAgaWYgKGkgPD0gZTIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0UG9zID0gZTIgKyAxO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFuY2hvciA9IG5leHRQb3MgPCBsMiA/IGMyW25leHRQb3NdLmVsIDogcGFyZW50QW5jaG9yO1xuICAgICAgICAgICAgICAgIHdoaWxlIChpIDw9IGUyKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhdGNoKG51bGwsIChjMltpXSA9IG9wdGltaXplZFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBjbG9uZUlmTW91bnRlZChjMltpXSlcbiAgICAgICAgICAgICAgICAgICAgICAgIDogbm9ybWFsaXplVk5vZGUoYzJbaV0pKSwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gNC4gY29tbW9uIHNlcXVlbmNlICsgdW5tb3VudFxuICAgICAgICAvLyAoYSBiKSBjXG4gICAgICAgIC8vIChhIGIpXG4gICAgICAgIC8vIGkgPSAyLCBlMSA9IDIsIGUyID0gMVxuICAgICAgICAvLyBhIChiIGMpXG4gICAgICAgIC8vIChiIGMpXG4gICAgICAgIC8vIGkgPSAwLCBlMSA9IDAsIGUyID0gLTFcbiAgICAgICAgZWxzZSBpZiAoaSA+IGUyKSB7XG4gICAgICAgICAgICB3aGlsZSAoaSA8PSBlMSkge1xuICAgICAgICAgICAgICAgIHVubW91bnQoYzFbaV0sIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHRydWUpO1xuICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyA1LiB1bmtub3duIHNlcXVlbmNlXG4gICAgICAgIC8vIFtpIC4uLiBlMSArIDFdOiBhIGIgW2MgZCBlXSBmIGdcbiAgICAgICAgLy8gW2kgLi4uIGUyICsgMV06IGEgYiBbZSBkIGMgaF0gZiBnXG4gICAgICAgIC8vIGkgPSAyLCBlMSA9IDQsIGUyID0gNVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHMxID0gaTsgLy8gcHJldiBzdGFydGluZyBpbmRleFxuICAgICAgICAgICAgY29uc3QgczIgPSBpOyAvLyBuZXh0IHN0YXJ0aW5nIGluZGV4XG4gICAgICAgICAgICAvLyA1LjEgYnVpbGQga2V5OmluZGV4IG1hcCBmb3IgbmV3Q2hpbGRyZW5cbiAgICAgICAgICAgIGNvbnN0IGtleVRvTmV3SW5kZXhNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICBmb3IgKGkgPSBzMjsgaSA8PSBlMjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dENoaWxkID0gKGMyW2ldID0gb3B0aW1pemVkXG4gICAgICAgICAgICAgICAgICAgID8gY2xvbmVJZk1vdW50ZWQoYzJbaV0pXG4gICAgICAgICAgICAgICAgICAgIDogbm9ybWFsaXplVk5vZGUoYzJbaV0pKTtcbiAgICAgICAgICAgICAgICBpZiAobmV4dENoaWxkLmtleSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYga2V5VG9OZXdJbmRleE1hcC5oYXMobmV4dENoaWxkLmtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm4oYER1cGxpY2F0ZSBrZXlzIGZvdW5kIGR1cmluZyB1cGRhdGU6YCwgSlNPTi5zdHJpbmdpZnkobmV4dENoaWxkLmtleSksIGBNYWtlIHN1cmUga2V5cyBhcmUgdW5pcXVlLmApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGtleVRvTmV3SW5kZXhNYXAuc2V0KG5leHRDaGlsZC5rZXksIGkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIDUuMiBsb29wIHRocm91Z2ggb2xkIGNoaWxkcmVuIGxlZnQgdG8gYmUgcGF0Y2hlZCBhbmQgdHJ5IHRvIHBhdGNoXG4gICAgICAgICAgICAvLyBtYXRjaGluZyBub2RlcyAmIHJlbW92ZSBub2RlcyB0aGF0IGFyZSBubyBsb25nZXIgcHJlc2VudFxuICAgICAgICAgICAgbGV0IGo7XG4gICAgICAgICAgICBsZXQgcGF0Y2hlZCA9IDA7XG4gICAgICAgICAgICBjb25zdCB0b0JlUGF0Y2hlZCA9IGUyIC0gczIgKyAxO1xuICAgICAgICAgICAgbGV0IG1vdmVkID0gZmFsc2U7XG4gICAgICAgICAgICAvLyB1c2VkIHRvIHRyYWNrIHdoZXRoZXIgYW55IG5vZGUgaGFzIG1vdmVkXG4gICAgICAgICAgICBsZXQgbWF4TmV3SW5kZXhTb0ZhciA9IDA7XG4gICAgICAgICAgICAvLyB3b3JrcyBhcyBNYXA8bmV3SW5kZXgsIG9sZEluZGV4PlxuICAgICAgICAgICAgLy8gTm90ZSB0aGF0IG9sZEluZGV4IGlzIG9mZnNldCBieSArMVxuICAgICAgICAgICAgLy8gYW5kIG9sZEluZGV4ID0gMCBpcyBhIHNwZWNpYWwgdmFsdWUgaW5kaWNhdGluZyB0aGUgbmV3IG5vZGUgaGFzXG4gICAgICAgICAgICAvLyBubyBjb3JyZXNwb25kaW5nIG9sZCBub2RlLlxuICAgICAgICAgICAgLy8gdXNlZCBmb3IgZGV0ZXJtaW5pbmcgbG9uZ2VzdCBzdGFibGUgc3Vic2VxdWVuY2VcbiAgICAgICAgICAgIGNvbnN0IG5ld0luZGV4VG9PbGRJbmRleE1hcCA9IG5ldyBBcnJheSh0b0JlUGF0Y2hlZCk7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdG9CZVBhdGNoZWQ7IGkrKylcbiAgICAgICAgICAgICAgICBuZXdJbmRleFRvT2xkSW5kZXhNYXBbaV0gPSAwO1xuICAgICAgICAgICAgZm9yIChpID0gczE7IGkgPD0gZTE7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHByZXZDaGlsZCA9IGMxW2ldO1xuICAgICAgICAgICAgICAgIGlmIChwYXRjaGVkID49IHRvQmVQYXRjaGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGFsbCBuZXcgY2hpbGRyZW4gaGF2ZSBiZWVuIHBhdGNoZWQgc28gdGhpcyBjYW4gb25seSBiZSBhIHJlbW92YWxcbiAgICAgICAgICAgICAgICAgICAgdW5tb3VudChwcmV2Q2hpbGQsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IG5ld0luZGV4O1xuICAgICAgICAgICAgICAgIGlmIChwcmV2Q2hpbGQua2V5ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3SW5kZXggPSBrZXlUb05ld0luZGV4TWFwLmdldChwcmV2Q2hpbGQua2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGtleS1sZXNzIG5vZGUsIHRyeSB0byBsb2NhdGUgYSBrZXktbGVzcyBub2RlIG9mIHRoZSBzYW1lIHR5cGVcbiAgICAgICAgICAgICAgICAgICAgZm9yIChqID0gczI7IGogPD0gZTI7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld0luZGV4VG9PbGRJbmRleE1hcFtqIC0gczJdID09PSAwICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTYW1lVk5vZGVUeXBlKHByZXZDaGlsZCwgYzJbal0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3SW5kZXggPSBqO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChuZXdJbmRleCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHVubW91bnQocHJldkNoaWxkLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld0luZGV4VG9PbGRJbmRleE1hcFtuZXdJbmRleCAtIHMyXSA9IGkgKyAxO1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV3SW5kZXggPj0gbWF4TmV3SW5kZXhTb0Zhcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF4TmV3SW5kZXhTb0ZhciA9IG5ld0luZGV4O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbW92ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHBhdGNoKHByZXZDaGlsZCwgYzJbbmV3SW5kZXhdLCBjb250YWluZXIsIG51bGwsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgICAgICAgICAgICAgICAgIHBhdGNoZWQrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyA1LjMgbW92ZSBhbmQgbW91bnRcbiAgICAgICAgICAgIC8vIGdlbmVyYXRlIGxvbmdlc3Qgc3RhYmxlIHN1YnNlcXVlbmNlIG9ubHkgd2hlbiBub2RlcyBoYXZlIG1vdmVkXG4gICAgICAgICAgICBjb25zdCBpbmNyZWFzaW5nTmV3SW5kZXhTZXF1ZW5jZSA9IG1vdmVkXG4gICAgICAgICAgICAgICAgPyBnZXRTZXF1ZW5jZShuZXdJbmRleFRvT2xkSW5kZXhNYXApXG4gICAgICAgICAgICAgICAgOiBFTVBUWV9BUlI7XG4gICAgICAgICAgICBqID0gaW5jcmVhc2luZ05ld0luZGV4U2VxdWVuY2UubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgIC8vIGxvb3BpbmcgYmFja3dhcmRzIHNvIHRoYXQgd2UgY2FuIHVzZSBsYXN0IHBhdGNoZWQgbm9kZSBhcyBhbmNob3JcbiAgICAgICAgICAgIGZvciAoaSA9IHRvQmVQYXRjaGVkIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0SW5kZXggPSBzMiArIGk7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dENoaWxkID0gYzJbbmV4dEluZGV4XTtcbiAgICAgICAgICAgICAgICBjb25zdCBhbmNob3IgPSBuZXh0SW5kZXggKyAxIDwgbDIgPyBjMltuZXh0SW5kZXggKyAxXS5lbCA6IHBhcmVudEFuY2hvcjtcbiAgICAgICAgICAgICAgICBpZiAobmV3SW5kZXhUb09sZEluZGV4TWFwW2ldID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIG1vdW50IG5ld1xuICAgICAgICAgICAgICAgICAgICBwYXRjaChudWxsLCBuZXh0Q2hpbGQsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChtb3ZlZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBtb3ZlIGlmOlxuICAgICAgICAgICAgICAgICAgICAvLyBUaGVyZSBpcyBubyBzdGFibGUgc3Vic2VxdWVuY2UgKGUuZy4gYSByZXZlcnNlKVxuICAgICAgICAgICAgICAgICAgICAvLyBPUiBjdXJyZW50IG5vZGUgaXMgbm90IGFtb25nIHRoZSBzdGFibGUgc2VxdWVuY2VcbiAgICAgICAgICAgICAgICAgICAgaWYgKGogPCAwIHx8IGkgIT09IGluY3JlYXNpbmdOZXdJbmRleFNlcXVlbmNlW2pdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb3ZlKG5leHRDaGlsZCwgY29udGFpbmVyLCBhbmNob3IsIDIgLyogTW92ZVR5cGUuUkVPUkRFUiAqLyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBqLS07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IG1vdmUgPSAodm5vZGUsIGNvbnRhaW5lciwgYW5jaG9yLCBtb3ZlVHlwZSwgcGFyZW50U3VzcGVuc2UgPSBudWxsKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgZWwsIHR5cGUsIHRyYW5zaXRpb24sIGNoaWxkcmVuLCBzaGFwZUZsYWcgfSA9IHZub2RlO1xuICAgICAgICBpZiAoc2hhcGVGbGFnICYgNiAvKiBTaGFwZUZsYWdzLkNPTVBPTkVOVCAqLykge1xuICAgICAgICAgICAgbW92ZSh2bm9kZS5jb21wb25lbnQuc3ViVHJlZSwgY29udGFpbmVyLCBhbmNob3IsIG1vdmVUeXBlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2hhcGVGbGFnICYgMTI4IC8qIFNoYXBlRmxhZ3MuU1VTUEVOU0UgKi8pIHtcbiAgICAgICAgICAgIHZub2RlLnN1c3BlbnNlLm1vdmUoY29udGFpbmVyLCBhbmNob3IsIG1vdmVUeXBlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2hhcGVGbGFnICYgNjQgLyogU2hhcGVGbGFncy5URUxFUE9SVCAqLykge1xuICAgICAgICAgICAgdHlwZS5tb3ZlKHZub2RlLCBjb250YWluZXIsIGFuY2hvciwgaW50ZXJuYWxzKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZSA9PT0gRnJhZ21lbnQpIHtcbiAgICAgICAgICAgIGhvc3RJbnNlcnQoZWwsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBtb3ZlKGNoaWxkcmVuW2ldLCBjb250YWluZXIsIGFuY2hvciwgbW92ZVR5cGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaG9zdEluc2VydCh2bm9kZS5hbmNob3IsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZSA9PT0gU3RhdGljKSB7XG4gICAgICAgICAgICBtb3ZlU3RhdGljTm9kZSh2bm9kZSwgY29udGFpbmVyLCBhbmNob3IpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIHNpbmdsZSBub2Rlc1xuICAgICAgICBjb25zdCBuZWVkVHJhbnNpdGlvbiA9IG1vdmVUeXBlICE9PSAyIC8qIE1vdmVUeXBlLlJFT1JERVIgKi8gJiZcbiAgICAgICAgICAgIHNoYXBlRmxhZyAmIDEgLyogU2hhcGVGbGFncy5FTEVNRU5UICovICYmXG4gICAgICAgICAgICB0cmFuc2l0aW9uO1xuICAgICAgICBpZiAobmVlZFRyYW5zaXRpb24pIHtcbiAgICAgICAgICAgIGlmIChtb3ZlVHlwZSA9PT0gMCAvKiBNb3ZlVHlwZS5FTlRFUiAqLykge1xuICAgICAgICAgICAgICAgIHRyYW5zaXRpb24uYmVmb3JlRW50ZXIoZWwpO1xuICAgICAgICAgICAgICAgIGhvc3RJbnNlcnQoZWwsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgICAgICAgICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoKCkgPT4gdHJhbnNpdGlvbi5lbnRlcihlbCksIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgbGVhdmUsIGRlbGF5TGVhdmUsIGFmdGVyTGVhdmUgfSA9IHRyYW5zaXRpb247XG4gICAgICAgICAgICAgICAgY29uc3QgcmVtb3ZlID0gKCkgPT4gaG9zdEluc2VydChlbCwgY29udGFpbmVyLCBhbmNob3IpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBlcmZvcm1MZWF2ZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGVhdmUoZWwsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWZ0ZXJMZWF2ZSAmJiBhZnRlckxlYXZlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKGRlbGF5TGVhdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsYXlMZWF2ZShlbCwgcmVtb3ZlLCBwZXJmb3JtTGVhdmUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcGVyZm9ybUxlYXZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaG9zdEluc2VydChlbCwgY29udGFpbmVyLCBhbmNob3IpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCB1bm1vdW50ID0gKHZub2RlLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBkb1JlbW92ZSA9IGZhbHNlLCBvcHRpbWl6ZWQgPSBmYWxzZSkgPT4ge1xuICAgICAgICBjb25zdCB7IHR5cGUsIHByb3BzLCByZWYsIGNoaWxkcmVuLCBkeW5hbWljQ2hpbGRyZW4sIHNoYXBlRmxhZywgcGF0Y2hGbGFnLCBkaXJzIH0gPSB2bm9kZTtcbiAgICAgICAgLy8gdW5zZXQgcmVmXG4gICAgICAgIGlmIChyZWYgIT0gbnVsbCkge1xuICAgICAgICAgICAgc2V0UmVmKHJlZiwgbnVsbCwgcGFyZW50U3VzcGVuc2UsIHZub2RlLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2hhcGVGbGFnICYgMjU2IC8qIFNoYXBlRmxhZ3MuQ09NUE9ORU5UX1NIT1VMRF9LRUVQX0FMSVZFICovKSB7XG4gICAgICAgICAgICBwYXJlbnRDb21wb25lbnQuY3R4LmRlYWN0aXZhdGUodm5vZGUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNob3VsZEludm9rZURpcnMgPSBzaGFwZUZsYWcgJiAxIC8qIFNoYXBlRmxhZ3MuRUxFTUVOVCAqLyAmJiBkaXJzO1xuICAgICAgICBjb25zdCBzaG91bGRJbnZva2VWbm9kZUhvb2sgPSAhaXNBc3luY1dyYXBwZXIodm5vZGUpO1xuICAgICAgICBsZXQgdm5vZGVIb29rO1xuICAgICAgICBpZiAoc2hvdWxkSW52b2tlVm5vZGVIb29rICYmXG4gICAgICAgICAgICAodm5vZGVIb29rID0gcHJvcHMgJiYgcHJvcHMub25Wbm9kZUJlZm9yZVVubW91bnQpKSB7XG4gICAgICAgICAgICBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBwYXJlbnRDb21wb25lbnQsIHZub2RlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2hhcGVGbGFnICYgNiAvKiBTaGFwZUZsYWdzLkNPTVBPTkVOVCAqLykge1xuICAgICAgICAgICAgdW5tb3VudENvbXBvbmVudCh2bm9kZS5jb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBkb1JlbW92ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoc2hhcGVGbGFnICYgMTI4IC8qIFNoYXBlRmxhZ3MuU1VTUEVOU0UgKi8pIHtcbiAgICAgICAgICAgICAgICB2bm9kZS5zdXNwZW5zZS51bm1vdW50KHBhcmVudFN1c3BlbnNlLCBkb1JlbW92ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNob3VsZEludm9rZURpcnMpIHtcbiAgICAgICAgICAgICAgICBpbnZva2VEaXJlY3RpdmVIb29rKHZub2RlLCBudWxsLCBwYXJlbnRDb21wb25lbnQsICdiZWZvcmVVbm1vdW50Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2hhcGVGbGFnICYgNjQgLyogU2hhcGVGbGFncy5URUxFUE9SVCAqLykge1xuICAgICAgICAgICAgICAgIHZub2RlLnR5cGUucmVtb3ZlKHZub2RlLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBvcHRpbWl6ZWQsIGludGVybmFscywgZG9SZW1vdmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZHluYW1pY0NoaWxkcmVuICYmXG4gICAgICAgICAgICAgICAgLy8gIzExNTM6IGZhc3QgcGF0aCBzaG91bGQgbm90IGJlIHRha2VuIGZvciBub24tc3RhYmxlICh2LWZvcikgZnJhZ21lbnRzXG4gICAgICAgICAgICAgICAgKHR5cGUgIT09IEZyYWdtZW50IHx8XG4gICAgICAgICAgICAgICAgICAgIChwYXRjaEZsYWcgPiAwICYmIHBhdGNoRmxhZyAmIDY0IC8qIFBhdGNoRmxhZ3MuU1RBQkxFX0ZSQUdNRU5UICovKSkpIHtcbiAgICAgICAgICAgICAgICAvLyBmYXN0IHBhdGggZm9yIGJsb2NrIG5vZGVzOiBvbmx5IG5lZWQgdG8gdW5tb3VudCBkeW5hbWljIGNoaWxkcmVuLlxuICAgICAgICAgICAgICAgIHVubW91bnRDaGlsZHJlbihkeW5hbWljQ2hpbGRyZW4sIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGZhbHNlLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCh0eXBlID09PSBGcmFnbWVudCAmJlxuICAgICAgICAgICAgICAgIHBhdGNoRmxhZyAmXG4gICAgICAgICAgICAgICAgICAgICgxMjggLyogUGF0Y2hGbGFncy5LRVlFRF9GUkFHTUVOVCAqLyB8IDI1NiAvKiBQYXRjaEZsYWdzLlVOS0VZRURfRlJBR01FTlQgKi8pKSB8fFxuICAgICAgICAgICAgICAgICghb3B0aW1pemVkICYmIHNoYXBlRmxhZyAmIDE2IC8qIFNoYXBlRmxhZ3MuQVJSQVlfQ0hJTERSRU4gKi8pKSB7XG4gICAgICAgICAgICAgICAgdW5tb3VudENoaWxkcmVuKGNoaWxkcmVuLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkb1JlbW92ZSkge1xuICAgICAgICAgICAgICAgIHJlbW92ZSh2bm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChzaG91bGRJbnZva2VWbm9kZUhvb2sgJiZcbiAgICAgICAgICAgICh2bm9kZUhvb2sgPSBwcm9wcyAmJiBwcm9wcy5vblZub2RlVW5tb3VudGVkKSkgfHxcbiAgICAgICAgICAgIHNob3VsZEludm9rZURpcnMpIHtcbiAgICAgICAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdm5vZGVIb29rICYmIGludm9rZVZOb2RlSG9vayh2bm9kZUhvb2ssIHBhcmVudENvbXBvbmVudCwgdm5vZGUpO1xuICAgICAgICAgICAgICAgIHNob3VsZEludm9rZURpcnMgJiZcbiAgICAgICAgICAgICAgICAgICAgaW52b2tlRGlyZWN0aXZlSG9vayh2bm9kZSwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCAndW5tb3VudGVkJyk7XG4gICAgICAgICAgICB9LCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHJlbW92ZSA9IHZub2RlID0+IHtcbiAgICAgICAgY29uc3QgeyB0eXBlLCBlbCwgYW5jaG9yLCB0cmFuc2l0aW9uIH0gPSB2bm9kZTtcbiAgICAgICAgaWYgKHR5cGUgPT09IEZyYWdtZW50KSB7XG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXG4gICAgICAgICAgICAgICAgdm5vZGUucGF0Y2hGbGFnID4gMCAmJlxuICAgICAgICAgICAgICAgIHZub2RlLnBhdGNoRmxhZyAmIDIwNDggLyogUGF0Y2hGbGFncy5ERVZfUk9PVF9GUkFHTUVOVCAqLyAmJlxuICAgICAgICAgICAgICAgIHRyYW5zaXRpb24gJiZcbiAgICAgICAgICAgICAgICAhdHJhbnNpdGlvbi5wZXJzaXN0ZWQpIHtcbiAgICAgICAgICAgICAgICB2bm9kZS5jaGlsZHJlbi5mb3JFYWNoKGNoaWxkID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoaWxkLnR5cGUgPT09IENvbW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhvc3RSZW1vdmUoY2hpbGQuZWwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlKGNoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVtb3ZlRnJhZ21lbnQoZWwsIGFuY2hvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGUgPT09IFN0YXRpYykge1xuICAgICAgICAgICAgcmVtb3ZlU3RhdGljTm9kZSh2bm9kZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGVyZm9ybVJlbW92ZSA9ICgpID0+IHtcbiAgICAgICAgICAgIGhvc3RSZW1vdmUoZWwpO1xuICAgICAgICAgICAgaWYgKHRyYW5zaXRpb24gJiYgIXRyYW5zaXRpb24ucGVyc2lzdGVkICYmIHRyYW5zaXRpb24uYWZ0ZXJMZWF2ZSkge1xuICAgICAgICAgICAgICAgIHRyYW5zaXRpb24uYWZ0ZXJMZWF2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBpZiAodm5vZGUuc2hhcGVGbGFnICYgMSAvKiBTaGFwZUZsYWdzLkVMRU1FTlQgKi8gJiZcbiAgICAgICAgICAgIHRyYW5zaXRpb24gJiZcbiAgICAgICAgICAgICF0cmFuc2l0aW9uLnBlcnNpc3RlZCkge1xuICAgICAgICAgICAgY29uc3QgeyBsZWF2ZSwgZGVsYXlMZWF2ZSB9ID0gdHJhbnNpdGlvbjtcbiAgICAgICAgICAgIGNvbnN0IHBlcmZvcm1MZWF2ZSA9ICgpID0+IGxlYXZlKGVsLCBwZXJmb3JtUmVtb3ZlKTtcbiAgICAgICAgICAgIGlmIChkZWxheUxlYXZlKSB7XG4gICAgICAgICAgICAgICAgZGVsYXlMZWF2ZSh2bm9kZS5lbCwgcGVyZm9ybVJlbW92ZSwgcGVyZm9ybUxlYXZlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBlcmZvcm1MZWF2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcGVyZm9ybVJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVGcmFnbWVudCA9IChjdXIsIGVuZCkgPT4ge1xuICAgICAgICAvLyBGb3IgZnJhZ21lbnRzLCBkaXJlY3RseSByZW1vdmUgYWxsIGNvbnRhaW5lZCBET00gbm9kZXMuXG4gICAgICAgIC8vIChmcmFnbWVudCBjaGlsZCBub2RlcyBjYW5ub3QgaGF2ZSB0cmFuc2l0aW9uKVxuICAgICAgICBsZXQgbmV4dDtcbiAgICAgICAgd2hpbGUgKGN1ciAhPT0gZW5kKSB7XG4gICAgICAgICAgICBuZXh0ID0gaG9zdE5leHRTaWJsaW5nKGN1cik7XG4gICAgICAgICAgICBob3N0UmVtb3ZlKGN1cik7XG4gICAgICAgICAgICBjdXIgPSBuZXh0O1xuICAgICAgICB9XG4gICAgICAgIGhvc3RSZW1vdmUoZW5kKTtcbiAgICB9O1xuICAgIGNvbnN0IHVubW91bnRDb21wb25lbnQgPSAoaW5zdGFuY2UsIHBhcmVudFN1c3BlbnNlLCBkb1JlbW92ZSkgPT4ge1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGluc3RhbmNlLnR5cGUuX19obXJJZCkge1xuICAgICAgICAgICAgdW5yZWdpc3RlckhNUihpbnN0YW5jZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBidW0sIHNjb3BlLCB1cGRhdGUsIHN1YlRyZWUsIHVtIH0gPSBpbnN0YW5jZTtcbiAgICAgICAgLy8gYmVmb3JlVW5tb3VudCBob29rXG4gICAgICAgIGlmIChidW0pIHtcbiAgICAgICAgICAgIGludm9rZUFycmF5Rm5zKGJ1bSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gc3RvcCBlZmZlY3RzIGluIGNvbXBvbmVudCBzY29wZVxuICAgICAgICBzY29wZS5zdG9wKCk7XG4gICAgICAgIC8vIHVwZGF0ZSBtYXkgYmUgbnVsbCBpZiBhIGNvbXBvbmVudCBpcyB1bm1vdW50ZWQgYmVmb3JlIGl0cyBhc3luY1xuICAgICAgICAvLyBzZXR1cCBoYXMgcmVzb2x2ZWQuXG4gICAgICAgIGlmICh1cGRhdGUpIHtcbiAgICAgICAgICAgIC8vIHNvIHRoYXQgc2NoZWR1bGVyIHdpbGwgbm8gbG9uZ2VyIGludm9rZSBpdFxuICAgICAgICAgICAgdXBkYXRlLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgdW5tb3VudChzdWJUcmVlLCBpbnN0YW5jZSwgcGFyZW50U3VzcGVuc2UsIGRvUmVtb3ZlKTtcbiAgICAgICAgfVxuICAgICAgICAvLyB1bm1vdW50ZWQgaG9va1xuICAgICAgICBpZiAodW0pIHtcbiAgICAgICAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdCh1bSwgcGFyZW50U3VzcGVuc2UpO1xuICAgICAgICB9XG4gICAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdCgoKSA9PiB7XG4gICAgICAgICAgICBpbnN0YW5jZS5pc1VubW91bnRlZCA9IHRydWU7XG4gICAgICAgIH0sIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgICAgLy8gQSBjb21wb25lbnQgd2l0aCBhc3luYyBkZXAgaW5zaWRlIGEgcGVuZGluZyBzdXNwZW5zZSBpcyB1bm1vdW50ZWQgYmVmb3JlXG4gICAgICAgIC8vIGl0cyBhc3luYyBkZXAgcmVzb2x2ZXMuIFRoaXMgc2hvdWxkIHJlbW92ZSB0aGUgZGVwIGZyb20gdGhlIHN1c3BlbnNlLCBhbmRcbiAgICAgICAgLy8gY2F1c2UgdGhlIHN1c3BlbnNlIHRvIHJlc29sdmUgaW1tZWRpYXRlbHkgaWYgdGhhdCB3YXMgdGhlIGxhc3QgZGVwLlxuICAgICAgICBpZiAocGFyZW50U3VzcGVuc2UgJiZcbiAgICAgICAgICAgIHBhcmVudFN1c3BlbnNlLnBlbmRpbmdCcmFuY2ggJiZcbiAgICAgICAgICAgICFwYXJlbnRTdXNwZW5zZS5pc1VubW91bnRlZCAmJlxuICAgICAgICAgICAgaW5zdGFuY2UuYXN5bmNEZXAgJiZcbiAgICAgICAgICAgICFpbnN0YW5jZS5hc3luY1Jlc29sdmVkICYmXG4gICAgICAgICAgICBpbnN0YW5jZS5zdXNwZW5zZUlkID09PSBwYXJlbnRTdXNwZW5zZS5wZW5kaW5nSWQpIHtcbiAgICAgICAgICAgIHBhcmVudFN1c3BlbnNlLmRlcHMtLTtcbiAgICAgICAgICAgIGlmIChwYXJlbnRTdXNwZW5zZS5kZXBzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcGFyZW50U3VzcGVuc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICAgICAgICBkZXZ0b29sc0NvbXBvbmVudFJlbW92ZWQoaW5zdGFuY2UpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCB1bm1vdW50Q2hpbGRyZW4gPSAoY2hpbGRyZW4sIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGRvUmVtb3ZlID0gZmFsc2UsIG9wdGltaXplZCA9IGZhbHNlLCBzdGFydCA9IDApID0+IHtcbiAgICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHVubW91bnQoY2hpbGRyZW5baV0sIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGRvUmVtb3ZlLCBvcHRpbWl6ZWQpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBnZXROZXh0SG9zdE5vZGUgPSB2bm9kZSA9PiB7XG4gICAgICAgIGlmICh2bm9kZS5zaGFwZUZsYWcgJiA2IC8qIFNoYXBlRmxhZ3MuQ09NUE9ORU5UICovKSB7XG4gICAgICAgICAgICByZXR1cm4gZ2V0TmV4dEhvc3ROb2RlKHZub2RlLmNvbXBvbmVudC5zdWJUcmVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodm5vZGUuc2hhcGVGbGFnICYgMTI4IC8qIFNoYXBlRmxhZ3MuU1VTUEVOU0UgKi8pIHtcbiAgICAgICAgICAgIHJldHVybiB2bm9kZS5zdXNwZW5zZS5uZXh0KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGhvc3ROZXh0U2libGluZygodm5vZGUuYW5jaG9yIHx8IHZub2RlLmVsKSk7XG4gICAgfTtcbiAgICBjb25zdCByZW5kZXIgPSAodm5vZGUsIGNvbnRhaW5lciwgaXNTVkcpID0+IHtcbiAgICAgICAgaWYgKHZub2RlID09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChjb250YWluZXIuX3Zub2RlKSB7XG4gICAgICAgICAgICAgICAgdW5tb3VudChjb250YWluZXIuX3Zub2RlLCBudWxsLCBudWxsLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBhdGNoKGNvbnRhaW5lci5fdm5vZGUgfHwgbnVsbCwgdm5vZGUsIGNvbnRhaW5lciwgbnVsbCwgbnVsbCwgbnVsbCwgaXNTVkcpO1xuICAgICAgICB9XG4gICAgICAgIGZsdXNoUHJlRmx1c2hDYnMoKTtcbiAgICAgICAgZmx1c2hQb3N0Rmx1c2hDYnMoKTtcbiAgICAgICAgY29udGFpbmVyLl92bm9kZSA9IHZub2RlO1xuICAgIH07XG4gICAgY29uc3QgaW50ZXJuYWxzID0ge1xuICAgICAgICBwOiBwYXRjaCxcbiAgICAgICAgdW06IHVubW91bnQsXG4gICAgICAgIG06IG1vdmUsXG4gICAgICAgIHI6IHJlbW92ZSxcbiAgICAgICAgbXQ6IG1vdW50Q29tcG9uZW50LFxuICAgICAgICBtYzogbW91bnRDaGlsZHJlbixcbiAgICAgICAgcGM6IHBhdGNoQ2hpbGRyZW4sXG4gICAgICAgIHBiYzogcGF0Y2hCbG9ja0NoaWxkcmVuLFxuICAgICAgICBuOiBnZXROZXh0SG9zdE5vZGUsXG4gICAgICAgIG86IG9wdGlvbnNcbiAgICB9O1xuICAgIGxldCBoeWRyYXRlO1xuICAgIGxldCBoeWRyYXRlTm9kZTtcbiAgICBpZiAoY3JlYXRlSHlkcmF0aW9uRm5zKSB7XG4gICAgICAgIFtoeWRyYXRlLCBoeWRyYXRlTm9kZV0gPSBjcmVhdGVIeWRyYXRpb25GbnMoaW50ZXJuYWxzKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVuZGVyLFxuICAgICAgICBoeWRyYXRlLFxuICAgICAgICBjcmVhdGVBcHA6IGNyZWF0ZUFwcEFQSShyZW5kZXIsIGh5ZHJhdGUpXG4gICAgfTtcbn1cbmZ1bmN0aW9uIHRvZ2dsZVJlY3Vyc2UoeyBlZmZlY3QsIHVwZGF0ZSB9LCBhbGxvd2VkKSB7XG4gICAgZWZmZWN0LmFsbG93UmVjdXJzZSA9IHVwZGF0ZS5hbGxvd1JlY3Vyc2UgPSBhbGxvd2VkO1xufVxuLyoqXG4gKiAjMTE1NlxuICogV2hlbiBhIGNvbXBvbmVudCBpcyBITVItZW5hYmxlZCwgd2UgbmVlZCB0byBtYWtlIHN1cmUgdGhhdCBhbGwgc3RhdGljIG5vZGVzXG4gKiBpbnNpZGUgYSBibG9jayBhbHNvIGluaGVyaXQgdGhlIERPTSBlbGVtZW50IGZyb20gdGhlIHByZXZpb3VzIHRyZWUgc28gdGhhdFxuICogSE1SIHVwZGF0ZXMgKHdoaWNoIGFyZSBmdWxsIHVwZGF0ZXMpIGNhbiByZXRyaWV2ZSB0aGUgZWxlbWVudCBmb3IgcGF0Y2hpbmcuXG4gKlxuICogIzIwODBcbiAqIEluc2lkZSBrZXllZCBgdGVtcGxhdGVgIGZyYWdtZW50IHN0YXRpYyBjaGlsZHJlbiwgaWYgYSBmcmFnbWVudCBpcyBtb3ZlZCxcbiAqIHRoZSBjaGlsZHJlbiB3aWxsIGFsd2F5cyBiZSBtb3ZlZC4gVGhlcmVmb3JlLCBpbiBvcmRlciB0byBlbnN1cmUgY29ycmVjdCBtb3ZlXG4gKiBwb3NpdGlvbiwgZWwgc2hvdWxkIGJlIGluaGVyaXRlZCBmcm9tIHByZXZpb3VzIG5vZGVzLlxuICovXG5mdW5jdGlvbiB0cmF2ZXJzZVN0YXRpY0NoaWxkcmVuKG4xLCBuMiwgc2hhbGxvdyA9IGZhbHNlKSB7XG4gICAgY29uc3QgY2gxID0gbjEuY2hpbGRyZW47XG4gICAgY29uc3QgY2gyID0gbjIuY2hpbGRyZW47XG4gICAgaWYgKGlzQXJyYXkoY2gxKSAmJiBpc0FycmF5KGNoMikpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaDEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIC8vIHRoaXMgaXMgb25seSBjYWxsZWQgaW4gdGhlIG9wdGltaXplZCBwYXRoIHNvIGFycmF5IGNoaWxkcmVuIGFyZVxuICAgICAgICAgICAgLy8gZ3VhcmFudGVlZCB0byBiZSB2bm9kZXNcbiAgICAgICAgICAgIGNvbnN0IGMxID0gY2gxW2ldO1xuICAgICAgICAgICAgbGV0IGMyID0gY2gyW2ldO1xuICAgICAgICAgICAgaWYgKGMyLnNoYXBlRmxhZyAmIDEgLyogU2hhcGVGbGFncy5FTEVNRU5UICovICYmICFjMi5keW5hbWljQ2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICBpZiAoYzIucGF0Y2hGbGFnIDw9IDAgfHwgYzIucGF0Y2hGbGFnID09PSAzMiAvKiBQYXRjaEZsYWdzLkhZRFJBVEVfRVZFTlRTICovKSB7XG4gICAgICAgICAgICAgICAgICAgIGMyID0gY2gyW2ldID0gY2xvbmVJZk1vdW50ZWQoY2gyW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgYzIuZWwgPSBjMS5lbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFzaGFsbG93KVxuICAgICAgICAgICAgICAgICAgICB0cmF2ZXJzZVN0YXRpY0NoaWxkcmVuKGMxLCBjMik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyAjNjg1MiBhbHNvIGluaGVyaXQgZm9yIHRleHQgbm9kZXNcbiAgICAgICAgICAgIGlmIChjMi50eXBlID09PSBUZXh0KSB7XG4gICAgICAgICAgICAgICAgYzIuZWwgPSBjMS5lbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGFsc28gaW5oZXJpdCBmb3IgY29tbWVudCBub2RlcywgYnV0IG5vdCBwbGFjZWhvbGRlcnMgKGUuZy4gdi1pZiB3aGljaFxuICAgICAgICAgICAgLy8gd291bGQgaGF2ZSByZWNlaXZlZCAuZWwgZHVyaW5nIGJsb2NrIHBhdGNoKVxuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBjMi50eXBlID09PSBDb21tZW50ICYmICFjMi5lbCkge1xuICAgICAgICAgICAgICAgIGMyLmVsID0gYzEuZWw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Mb25nZXN0X2luY3JlYXNpbmdfc3Vic2VxdWVuY2VcbmZ1bmN0aW9uIGdldFNlcXVlbmNlKGFycikge1xuICAgIGNvbnN0IHAgPSBhcnIuc2xpY2UoKTtcbiAgICBjb25zdCByZXN1bHQgPSBbMF07XG4gICAgbGV0IGksIGosIHUsIHYsIGM7XG4gICAgY29uc3QgbGVuID0gYXJyLmxlbmd0aDtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgY29uc3QgYXJySSA9IGFycltpXTtcbiAgICAgICAgaWYgKGFyckkgIT09IDApIHtcbiAgICAgICAgICAgIGogPSByZXN1bHRbcmVzdWx0Lmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgaWYgKGFycltqXSA8IGFyckkpIHtcbiAgICAgICAgICAgICAgICBwW2ldID0gajtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChpKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHUgPSAwO1xuICAgICAgICAgICAgdiA9IHJlc3VsdC5sZW5ndGggLSAxO1xuICAgICAgICAgICAgd2hpbGUgKHUgPCB2KSB7XG4gICAgICAgICAgICAgICAgYyA9ICh1ICsgdikgPj4gMTtcbiAgICAgICAgICAgICAgICBpZiAoYXJyW3Jlc3VsdFtjXV0gPCBhcnJJKSB7XG4gICAgICAgICAgICAgICAgICAgIHUgPSBjICsgMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHYgPSBjO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhcnJJIDwgYXJyW3Jlc3VsdFt1XV0pIHtcbiAgICAgICAgICAgICAgICBpZiAodSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcFtpXSA9IHJlc3VsdFt1IC0gMV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlc3VsdFt1XSA9IGk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgdSA9IHJlc3VsdC5sZW5ndGg7XG4gICAgdiA9IHJlc3VsdFt1IC0gMV07XG4gICAgd2hpbGUgKHUtLSA+IDApIHtcbiAgICAgICAgcmVzdWx0W3VdID0gdjtcbiAgICAgICAgdiA9IHBbdl07XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbmNvbnN0IGlzVGVsZXBvcnQgPSAodHlwZSkgPT4gdHlwZS5fX2lzVGVsZXBvcnQ7XG5jb25zdCBpc1RlbGVwb3J0RGlzYWJsZWQgPSAocHJvcHMpID0+IHByb3BzICYmIChwcm9wcy5kaXNhYmxlZCB8fCBwcm9wcy5kaXNhYmxlZCA9PT0gJycpO1xuY29uc3QgaXNUYXJnZXRTVkcgPSAodGFyZ2V0KSA9PiB0eXBlb2YgU1ZHRWxlbWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgdGFyZ2V0IGluc3RhbmNlb2YgU1ZHRWxlbWVudDtcbmNvbnN0IHJlc29sdmVUYXJnZXQgPSAocHJvcHMsIHNlbGVjdCkgPT4ge1xuICAgIGNvbnN0IHRhcmdldFNlbGVjdG9yID0gcHJvcHMgJiYgcHJvcHMudG87XG4gICAgaWYgKGlzU3RyaW5nKHRhcmdldFNlbGVjdG9yKSkge1xuICAgICAgICBpZiAoIXNlbGVjdCkge1xuICAgICAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXG4gICAgICAgICAgICAgICAgd2FybihgQ3VycmVudCByZW5kZXJlciBkb2VzIG5vdCBzdXBwb3J0IHN0cmluZyB0YXJnZXQgZm9yIFRlbGVwb3J0cy4gYCArXG4gICAgICAgICAgICAgICAgICAgIGAobWlzc2luZyBxdWVyeVNlbGVjdG9yIHJlbmRlcmVyIG9wdGlvbilgKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gc2VsZWN0KHRhcmdldFNlbGVjdG9yKTtcbiAgICAgICAgICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYEZhaWxlZCB0byBsb2NhdGUgVGVsZXBvcnQgdGFyZ2V0IHdpdGggc2VsZWN0b3IgXCIke3RhcmdldFNlbGVjdG9yfVwiLiBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBOb3RlIHRoZSB0YXJnZXQgZWxlbWVudCBtdXN0IGV4aXN0IGJlZm9yZSB0aGUgY29tcG9uZW50IGlzIG1vdW50ZWQgLSBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBpLmUuIHRoZSB0YXJnZXQgY2Fubm90IGJlIHJlbmRlcmVkIGJ5IHRoZSBjb21wb25lbnQgaXRzZWxmLCBhbmQgYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgaWRlYWxseSBzaG91bGQgYmUgb3V0c2lkZSBvZiB0aGUgZW50aXJlIFZ1ZSBjb21wb25lbnQgdHJlZS5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIXRhcmdldFNlbGVjdG9yICYmICFpc1RlbGVwb3J0RGlzYWJsZWQocHJvcHMpKSB7XG4gICAgICAgICAgICB3YXJuKGBJbnZhbGlkIFRlbGVwb3J0IHRhcmdldDogJHt0YXJnZXRTZWxlY3Rvcn1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGFyZ2V0U2VsZWN0b3I7XG4gICAgfVxufTtcbmNvbnN0IFRlbGVwb3J0SW1wbCA9IHtcbiAgICBfX2lzVGVsZXBvcnQ6IHRydWUsXG4gICAgcHJvY2VzcyhuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIGludGVybmFscykge1xuICAgICAgICBjb25zdCB7IG1jOiBtb3VudENoaWxkcmVuLCBwYzogcGF0Y2hDaGlsZHJlbiwgcGJjOiBwYXRjaEJsb2NrQ2hpbGRyZW4sIG86IHsgaW5zZXJ0LCBxdWVyeVNlbGVjdG9yLCBjcmVhdGVUZXh0LCBjcmVhdGVDb21tZW50IH0gfSA9IGludGVybmFscztcbiAgICAgICAgY29uc3QgZGlzYWJsZWQgPSBpc1RlbGVwb3J0RGlzYWJsZWQobjIucHJvcHMpO1xuICAgICAgICBsZXQgeyBzaGFwZUZsYWcsIGNoaWxkcmVuLCBkeW5hbWljQ2hpbGRyZW4gfSA9IG4yO1xuICAgICAgICAvLyAjMzMwMlxuICAgICAgICAvLyBITVIgdXBkYXRlZCwgZm9yY2UgZnVsbCBkaWZmXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgaXNIbXJVcGRhdGluZykge1xuICAgICAgICAgICAgb3B0aW1pemVkID0gZmFsc2U7XG4gICAgICAgICAgICBkeW5hbWljQ2hpbGRyZW4gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChuMSA9PSBudWxsKSB7XG4gICAgICAgICAgICAvLyBpbnNlcnQgYW5jaG9ycyBpbiB0aGUgbWFpbiB2aWV3XG4gICAgICAgICAgICBjb25zdCBwbGFjZWhvbGRlciA9IChuMi5lbCA9IChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKVxuICAgICAgICAgICAgICAgID8gY3JlYXRlQ29tbWVudCgndGVsZXBvcnQgc3RhcnQnKVxuICAgICAgICAgICAgICAgIDogY3JlYXRlVGV4dCgnJykpO1xuICAgICAgICAgICAgY29uc3QgbWFpbkFuY2hvciA9IChuMi5hbmNob3IgPSAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJylcbiAgICAgICAgICAgICAgICA/IGNyZWF0ZUNvbW1lbnQoJ3RlbGVwb3J0IGVuZCcpXG4gICAgICAgICAgICAgICAgOiBjcmVhdGVUZXh0KCcnKSk7XG4gICAgICAgICAgICBpbnNlcnQocGxhY2Vob2xkZXIsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgICAgICAgIGluc2VydChtYWluQW5jaG9yLCBjb250YWluZXIsIGFuY2hvcik7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSAobjIudGFyZ2V0ID0gcmVzb2x2ZVRhcmdldChuMi5wcm9wcywgcXVlcnlTZWxlY3RvcikpO1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0QW5jaG9yID0gKG4yLnRhcmdldEFuY2hvciA9IGNyZWF0ZVRleHQoJycpKTtcbiAgICAgICAgICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICBpbnNlcnQodGFyZ2V0QW5jaG9yLCB0YXJnZXQpO1xuICAgICAgICAgICAgICAgIC8vICMyNjUyIHdlIGNvdWxkIGJlIHRlbGVwb3J0aW5nIGZyb20gYSBub24tU1ZHIHRyZWUgaW50byBhbiBTVkcgdHJlZVxuICAgICAgICAgICAgICAgIGlzU1ZHID0gaXNTVkcgfHwgaXNUYXJnZXRTVkcodGFyZ2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhZGlzYWJsZWQpIHtcbiAgICAgICAgICAgICAgICB3YXJuKCdJbnZhbGlkIFRlbGVwb3J0IHRhcmdldCBvbiBtb3VudDonLCB0YXJnZXQsIGAoJHt0eXBlb2YgdGFyZ2V0fSlgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG1vdW50ID0gKGNvbnRhaW5lciwgYW5jaG9yKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gVGVsZXBvcnQgKmFsd2F5cyogaGFzIEFycmF5IGNoaWxkcmVuLiBUaGlzIGlzIGVuZm9yY2VkIGluIGJvdGggdGhlXG4gICAgICAgICAgICAgICAgLy8gY29tcGlsZXIgYW5kIHZub2RlIGNoaWxkcmVuIG5vcm1hbGl6YXRpb24uXG4gICAgICAgICAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDE2IC8qIFNoYXBlRmxhZ3MuQVJSQVlfQ0hJTERSRU4gKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgbW91bnRDaGlsZHJlbihjaGlsZHJlbiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChkaXNhYmxlZCkge1xuICAgICAgICAgICAgICAgIG1vdW50KGNvbnRhaW5lciwgbWFpbkFuY2hvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICBtb3VudCh0YXJnZXQsIHRhcmdldEFuY2hvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyB1cGRhdGUgY29udGVudFxuICAgICAgICAgICAgbjIuZWwgPSBuMS5lbDtcbiAgICAgICAgICAgIGNvbnN0IG1haW5BbmNob3IgPSAobjIuYW5jaG9yID0gbjEuYW5jaG9yKTtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IChuMi50YXJnZXQgPSBuMS50YXJnZXQpO1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0QW5jaG9yID0gKG4yLnRhcmdldEFuY2hvciA9IG4xLnRhcmdldEFuY2hvcik7XG4gICAgICAgICAgICBjb25zdCB3YXNEaXNhYmxlZCA9IGlzVGVsZXBvcnREaXNhYmxlZChuMS5wcm9wcyk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50Q29udGFpbmVyID0gd2FzRGlzYWJsZWQgPyBjb250YWluZXIgOiB0YXJnZXQ7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50QW5jaG9yID0gd2FzRGlzYWJsZWQgPyBtYWluQW5jaG9yIDogdGFyZ2V0QW5jaG9yO1xuICAgICAgICAgICAgaXNTVkcgPSBpc1NWRyB8fCBpc1RhcmdldFNWRyh0YXJnZXQpO1xuICAgICAgICAgICAgaWYgKGR5bmFtaWNDaGlsZHJlbikge1xuICAgICAgICAgICAgICAgIC8vIGZhc3QgcGF0aCB3aGVuIHRoZSB0ZWxlcG9ydCBoYXBwZW5zIHRvIGJlIGEgYmxvY2sgcm9vdFxuICAgICAgICAgICAgICAgIHBhdGNoQmxvY2tDaGlsZHJlbihuMS5keW5hbWljQ2hpbGRyZW4sIGR5bmFtaWNDaGlsZHJlbiwgY3VycmVudENvbnRhaW5lciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcyk7XG4gICAgICAgICAgICAgICAgLy8gZXZlbiBpbiBibG9jayB0cmVlIG1vZGUgd2UgbmVlZCB0byBtYWtlIHN1cmUgYWxsIHJvb3QtbGV2ZWwgbm9kZXNcbiAgICAgICAgICAgICAgICAvLyBpbiB0aGUgdGVsZXBvcnQgaW5oZXJpdCBwcmV2aW91cyBET00gcmVmZXJlbmNlcyBzbyB0aGF0IHRoZXkgY2FuXG4gICAgICAgICAgICAgICAgLy8gYmUgbW92ZWQgaW4gZnV0dXJlIHBhdGNoZXMuXG4gICAgICAgICAgICAgICAgdHJhdmVyc2VTdGF0aWNDaGlsZHJlbihuMSwgbjIsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIW9wdGltaXplZCkge1xuICAgICAgICAgICAgICAgIHBhdGNoQ2hpbGRyZW4objEsIG4yLCBjdXJyZW50Q29udGFpbmVyLCBjdXJyZW50QW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGlzYWJsZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXdhc0Rpc2FibGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVuYWJsZWQgLT4gZGlzYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgLy8gbW92ZSBpbnRvIG1haW4gY29udGFpbmVyXG4gICAgICAgICAgICAgICAgICAgIG1vdmVUZWxlcG9ydChuMiwgY29udGFpbmVyLCBtYWluQW5jaG9yLCBpbnRlcm5hbHMsIDEgLyogVGVsZXBvcnRNb3ZlVHlwZXMuVE9HR0xFICovKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyB0YXJnZXQgY2hhbmdlZFxuICAgICAgICAgICAgICAgIGlmICgobjIucHJvcHMgJiYgbjIucHJvcHMudG8pICE9PSAobjEucHJvcHMgJiYgbjEucHJvcHMudG8pKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRUYXJnZXQgPSAobjIudGFyZ2V0ID0gcmVzb2x2ZVRhcmdldChuMi5wcm9wcywgcXVlcnlTZWxlY3RvcikpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV4dFRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbW92ZVRlbGVwb3J0KG4yLCBuZXh0VGFyZ2V0LCBudWxsLCBpbnRlcm5hbHMsIDAgLyogVGVsZXBvcnRNb3ZlVHlwZXMuVEFSR0VUX0NIQU5HRSAqLyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuKCdJbnZhbGlkIFRlbGVwb3J0IHRhcmdldCBvbiB1cGRhdGU6JywgdGFyZ2V0LCBgKCR7dHlwZW9mIHRhcmdldH0pYCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAod2FzRGlzYWJsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZGlzYWJsZWQgLT4gZW5hYmxlZFxuICAgICAgICAgICAgICAgICAgICAvLyBtb3ZlIGludG8gdGVsZXBvcnQgdGFyZ2V0XG4gICAgICAgICAgICAgICAgICAgIG1vdmVUZWxlcG9ydChuMiwgdGFyZ2V0LCB0YXJnZXRBbmNob3IsIGludGVybmFscywgMSAvKiBUZWxlcG9ydE1vdmVUeXBlcy5UT0dHTEUgKi8pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVDc3NWYXJzKG4yKTtcbiAgICB9LFxuICAgIHJlbW92ZSh2bm9kZSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgb3B0aW1pemVkLCB7IHVtOiB1bm1vdW50LCBvOiB7IHJlbW92ZTogaG9zdFJlbW92ZSB9IH0sIGRvUmVtb3ZlKSB7XG4gICAgICAgIGNvbnN0IHsgc2hhcGVGbGFnLCBjaGlsZHJlbiwgYW5jaG9yLCB0YXJnZXRBbmNob3IsIHRhcmdldCwgcHJvcHMgfSA9IHZub2RlO1xuICAgICAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgICAgICBob3N0UmVtb3ZlKHRhcmdldEFuY2hvcik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gYW4gdW5tb3VudGVkIHRlbGVwb3J0IHNob3VsZCBhbHdheXMgcmVtb3ZlIGl0cyBjaGlsZHJlbiBpZiBub3QgZGlzYWJsZWRcbiAgICAgICAgaWYgKGRvUmVtb3ZlIHx8ICFpc1RlbGVwb3J0RGlzYWJsZWQocHJvcHMpKSB7XG4gICAgICAgICAgICBob3N0UmVtb3ZlKGFuY2hvcik7XG4gICAgICAgICAgICBpZiAoc2hhcGVGbGFnICYgMTYgLyogU2hhcGVGbGFncy5BUlJBWV9DSElMRFJFTiAqLykge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hpbGQgPSBjaGlsZHJlbltpXTtcbiAgICAgICAgICAgICAgICAgICAgdW5tb3VudChjaGlsZCwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgdHJ1ZSwgISFjaGlsZC5keW5hbWljQ2hpbGRyZW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgbW92ZTogbW92ZVRlbGVwb3J0LFxuICAgIGh5ZHJhdGU6IGh5ZHJhdGVUZWxlcG9ydFxufTtcbmZ1bmN0aW9uIG1vdmVUZWxlcG9ydCh2bm9kZSwgY29udGFpbmVyLCBwYXJlbnRBbmNob3IsIHsgbzogeyBpbnNlcnQgfSwgbTogbW92ZSB9LCBtb3ZlVHlwZSA9IDIgLyogVGVsZXBvcnRNb3ZlVHlwZXMuUkVPUkRFUiAqLykge1xuICAgIC8vIG1vdmUgdGFyZ2V0IGFuY2hvciBpZiB0aGlzIGlzIGEgdGFyZ2V0IGNoYW5nZS5cbiAgICBpZiAobW92ZVR5cGUgPT09IDAgLyogVGVsZXBvcnRNb3ZlVHlwZXMuVEFSR0VUX0NIQU5HRSAqLykge1xuICAgICAgICBpbnNlcnQodm5vZGUudGFyZ2V0QW5jaG9yLCBjb250YWluZXIsIHBhcmVudEFuY2hvcik7XG4gICAgfVxuICAgIGNvbnN0IHsgZWwsIGFuY2hvciwgc2hhcGVGbGFnLCBjaGlsZHJlbiwgcHJvcHMgfSA9IHZub2RlO1xuICAgIGNvbnN0IGlzUmVvcmRlciA9IG1vdmVUeXBlID09PSAyIC8qIFRlbGVwb3J0TW92ZVR5cGVzLlJFT1JERVIgKi87XG4gICAgLy8gbW92ZSBtYWluIHZpZXcgYW5jaG9yIGlmIHRoaXMgaXMgYSByZS1vcmRlci5cbiAgICBpZiAoaXNSZW9yZGVyKSB7XG4gICAgICAgIGluc2VydChlbCwgY29udGFpbmVyLCBwYXJlbnRBbmNob3IpO1xuICAgIH1cbiAgICAvLyBpZiB0aGlzIGlzIGEgcmUtb3JkZXIgYW5kIHRlbGVwb3J0IGlzIGVuYWJsZWQgKGNvbnRlbnQgaXMgaW4gdGFyZ2V0KVxuICAgIC8vIGRvIG5vdCBtb3ZlIGNoaWxkcmVuLiBTbyB0aGUgb3Bwb3NpdGUgaXM6IG9ubHkgbW92ZSBjaGlsZHJlbiBpZiB0aGlzXG4gICAgLy8gaXMgbm90IGEgcmVvcmRlciwgb3IgdGhlIHRlbGVwb3J0IGlzIGRpc2FibGVkXG4gICAgaWYgKCFpc1Jlb3JkZXIgfHwgaXNUZWxlcG9ydERpc2FibGVkKHByb3BzKSkge1xuICAgICAgICAvLyBUZWxlcG9ydCBoYXMgZWl0aGVyIEFycmF5IGNoaWxkcmVuIG9yIG5vIGNoaWxkcmVuLlxuICAgICAgICBpZiAoc2hhcGVGbGFnICYgMTYgLyogU2hhcGVGbGFncy5BUlJBWV9DSElMRFJFTiAqLykge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIG1vdmUoY2hpbGRyZW5baV0sIGNvbnRhaW5lciwgcGFyZW50QW5jaG9yLCAyIC8qIE1vdmVUeXBlLlJFT1JERVIgKi8pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8vIG1vdmUgbWFpbiB2aWV3IGFuY2hvciBpZiB0aGlzIGlzIGEgcmUtb3JkZXIuXG4gICAgaWYgKGlzUmVvcmRlcikge1xuICAgICAgICBpbnNlcnQoYW5jaG9yLCBjb250YWluZXIsIHBhcmVudEFuY2hvcik7XG4gICAgfVxufVxuZnVuY3Rpb24gaHlkcmF0ZVRlbGVwb3J0KG5vZGUsIHZub2RlLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCwgeyBvOiB7IG5leHRTaWJsaW5nLCBwYXJlbnROb2RlLCBxdWVyeVNlbGVjdG9yIH0gfSwgaHlkcmF0ZUNoaWxkcmVuKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gKHZub2RlLnRhcmdldCA9IHJlc29sdmVUYXJnZXQodm5vZGUucHJvcHMsIHF1ZXJ5U2VsZWN0b3IpKTtcbiAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgIC8vIGlmIG11bHRpcGxlIHRlbGVwb3J0cyByZW5kZXJlZCB0byB0aGUgc2FtZSB0YXJnZXQgZWxlbWVudCwgd2UgbmVlZCB0b1xuICAgICAgICAvLyBwaWNrIHVwIGZyb20gd2hlcmUgdGhlIGxhc3QgdGVsZXBvcnQgZmluaXNoZWQgaW5zdGVhZCBvZiB0aGUgZmlyc3Qgbm9kZVxuICAgICAgICBjb25zdCB0YXJnZXROb2RlID0gdGFyZ2V0Ll9scGEgfHwgdGFyZ2V0LmZpcnN0Q2hpbGQ7XG4gICAgICAgIGlmICh2bm9kZS5zaGFwZUZsYWcgJiAxNiAvKiBTaGFwZUZsYWdzLkFSUkFZX0NISUxEUkVOICovKSB7XG4gICAgICAgICAgICBpZiAoaXNUZWxlcG9ydERpc2FibGVkKHZub2RlLnByb3BzKSkge1xuICAgICAgICAgICAgICAgIHZub2RlLmFuY2hvciA9IGh5ZHJhdGVDaGlsZHJlbihuZXh0U2libGluZyhub2RlKSwgdm5vZGUsIHBhcmVudE5vZGUobm9kZSksIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgICAgICB2bm9kZS50YXJnZXRBbmNob3IgPSB0YXJnZXROb2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdm5vZGUuYW5jaG9yID0gbmV4dFNpYmxpbmcobm9kZSk7XG4gICAgICAgICAgICAgICAgLy8gbG9va2FoZWFkIHVudGlsIHdlIGZpbmQgdGhlIHRhcmdldCBhbmNob3JcbiAgICAgICAgICAgICAgICAvLyB3ZSBjYW5ub3QgcmVseSBvbiByZXR1cm4gdmFsdWUgb2YgaHlkcmF0ZUNoaWxkcmVuKCkgYmVjYXVzZSB0aGVyZVxuICAgICAgICAgICAgICAgIC8vIGNvdWxkIGJlIG5lc3RlZCB0ZWxlcG9ydHNcbiAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0QW5jaG9yID0gdGFyZ2V0Tm9kZTtcbiAgICAgICAgICAgICAgICB3aGlsZSAodGFyZ2V0QW5jaG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldEFuY2hvciA9IG5leHRTaWJsaW5nKHRhcmdldEFuY2hvcik7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXRBbmNob3IgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldEFuY2hvci5ub2RlVHlwZSA9PT0gOCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0QW5jaG9yLmRhdGEgPT09ICd0ZWxlcG9ydCBhbmNob3InKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2bm9kZS50YXJnZXRBbmNob3IgPSB0YXJnZXRBbmNob3I7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuX2xwYSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdm5vZGUudGFyZ2V0QW5jaG9yICYmIG5leHRTaWJsaW5nKHZub2RlLnRhcmdldEFuY2hvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBoeWRyYXRlQ2hpbGRyZW4odGFyZ2V0Tm9kZSwgdm5vZGUsIHRhcmdldCwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHVwZGF0ZUNzc1ZhcnModm5vZGUpO1xuICAgIH1cbiAgICByZXR1cm4gdm5vZGUuYW5jaG9yICYmIG5leHRTaWJsaW5nKHZub2RlLmFuY2hvcik7XG59XG4vLyBGb3JjZS1jYXN0ZWQgcHVibGljIHR5cGluZyBmb3IgaCBhbmQgVFNYIHByb3BzIGluZmVyZW5jZVxuY29uc3QgVGVsZXBvcnQgPSBUZWxlcG9ydEltcGw7XG5mdW5jdGlvbiB1cGRhdGVDc3NWYXJzKHZub2RlKSB7XG4gICAgLy8gcHJlc2VuY2Ugb2YgLnV0IG1ldGhvZCBpbmRpY2F0ZXMgb3duZXIgY29tcG9uZW50IHVzZXMgY3NzIHZhcnMuXG4gICAgLy8gY29kZSBwYXRoIGhlcmUgY2FuIGFzc3VtZSBicm93c2VyIGVudmlyb25tZW50LlxuICAgIGNvbnN0IGN0eCA9IHZub2RlLmN0eDtcbiAgICBpZiAoY3R4ICYmIGN0eC51dCkge1xuICAgICAgICBsZXQgbm9kZSA9IHZub2RlLmNoaWxkcmVuWzBdLmVsO1xuICAgICAgICB3aGlsZSAobm9kZSAhPT0gdm5vZGUudGFyZ2V0QW5jaG9yKSB7XG4gICAgICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gMSlcbiAgICAgICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgnZGF0YS12LW93bmVyJywgY3R4LnVpZCk7XG4gICAgICAgICAgICBub2RlID0gbm9kZS5uZXh0U2libGluZztcbiAgICAgICAgfVxuICAgICAgICBjdHgudXQoKTtcbiAgICB9XG59XG5cbmNvbnN0IEZyYWdtZW50ID0gU3ltYm9sKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/ICdGcmFnbWVudCcgOiB1bmRlZmluZWQpO1xuY29uc3QgVGV4dCA9IFN5bWJvbCgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyAnVGV4dCcgOiB1bmRlZmluZWQpO1xuY29uc3QgQ29tbWVudCA9IFN5bWJvbCgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyAnQ29tbWVudCcgOiB1bmRlZmluZWQpO1xuY29uc3QgU3RhdGljID0gU3ltYm9sKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/ICdTdGF0aWMnIDogdW5kZWZpbmVkKTtcbi8vIFNpbmNlIHYtaWYgYW5kIHYtZm9yIGFyZSB0aGUgdHdvIHBvc3NpYmxlIHdheXMgbm9kZSBzdHJ1Y3R1cmUgY2FuIGR5bmFtaWNhbGx5XG4vLyBjaGFuZ2UsIG9uY2Ugd2UgY29uc2lkZXIgdi1pZiBicmFuY2hlcyBhbmQgZWFjaCB2LWZvciBmcmFnbWVudCBhIGJsb2NrLCB3ZVxuLy8gY2FuIGRpdmlkZSBhIHRlbXBsYXRlIGludG8gbmVzdGVkIGJsb2NrcywgYW5kIHdpdGhpbiBlYWNoIGJsb2NrIHRoZSBub2RlXG4vLyBzdHJ1Y3R1cmUgd291bGQgYmUgc3RhYmxlLiBUaGlzIGFsbG93cyB1cyB0byBza2lwIG1vc3QgY2hpbGRyZW4gZGlmZmluZ1xuLy8gYW5kIG9ubHkgd29ycnkgYWJvdXQgdGhlIGR5bmFtaWMgbm9kZXMgKGluZGljYXRlZCBieSBwYXRjaCBmbGFncykuXG5jb25zdCBibG9ja1N0YWNrID0gW107XG5sZXQgY3VycmVudEJsb2NrID0gbnVsbDtcbi8qKlxuICogT3BlbiBhIGJsb2NrLlxuICogVGhpcyBtdXN0IGJlIGNhbGxlZCBiZWZvcmUgYGNyZWF0ZUJsb2NrYC4gSXQgY2Fubm90IGJlIHBhcnQgb2YgYGNyZWF0ZUJsb2NrYFxuICogYmVjYXVzZSB0aGUgY2hpbGRyZW4gb2YgdGhlIGJsb2NrIGFyZSBldmFsdWF0ZWQgYmVmb3JlIGBjcmVhdGVCbG9ja2AgaXRzZWxmXG4gKiBpcyBjYWxsZWQuIFRoZSBnZW5lcmF0ZWQgY29kZSB0eXBpY2FsbHkgbG9va3MgbGlrZSB0aGlzOlxuICpcbiAqIGBgYGpzXG4gKiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gKiAgIHJldHVybiAob3BlbkJsb2NrKCksY3JlYXRlQmxvY2soJ2RpdicsIG51bGwsIFsuLi5dKSlcbiAqIH1cbiAqIGBgYFxuICogZGlzYWJsZVRyYWNraW5nIGlzIHRydWUgd2hlbiBjcmVhdGluZyBhIHYtZm9yIGZyYWdtZW50IGJsb2NrLCBzaW5jZSBhIHYtZm9yXG4gKiBmcmFnbWVudCBhbHdheXMgZGlmZnMgaXRzIGNoaWxkcmVuLlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIG9wZW5CbG9jayhkaXNhYmxlVHJhY2tpbmcgPSBmYWxzZSkge1xuICAgIGJsb2NrU3RhY2sucHVzaCgoY3VycmVudEJsb2NrID0gZGlzYWJsZVRyYWNraW5nID8gbnVsbCA6IFtdKSk7XG59XG5mdW5jdGlvbiBjbG9zZUJsb2NrKCkge1xuICAgIGJsb2NrU3RhY2sucG9wKCk7XG4gICAgY3VycmVudEJsb2NrID0gYmxvY2tTdGFja1tibG9ja1N0YWNrLmxlbmd0aCAtIDFdIHx8IG51bGw7XG59XG4vLyBXaGV0aGVyIHdlIHNob3VsZCBiZSB0cmFja2luZyBkeW5hbWljIGNoaWxkIG5vZGVzIGluc2lkZSBhIGJsb2NrLlxuLy8gT25seSB0cmFja3Mgd2hlbiB0aGlzIHZhbHVlIGlzID4gMFxuLy8gV2UgYXJlIG5vdCB1c2luZyBhIHNpbXBsZSBib29sZWFuIGJlY2F1c2UgdGhpcyB2YWx1ZSBtYXkgbmVlZCB0byBiZVxuLy8gaW5jcmVtZW50ZWQvZGVjcmVtZW50ZWQgYnkgbmVzdGVkIHVzYWdlIG9mIHYtb25jZSAoc2VlIGJlbG93KVxubGV0IGlzQmxvY2tUcmVlRW5hYmxlZCA9IDE7XG4vKipcbiAqIEJsb2NrIHRyYWNraW5nIHNvbWV0aW1lcyBuZWVkcyB0byBiZSBkaXNhYmxlZCwgZm9yIGV4YW1wbGUgZHVyaW5nIHRoZVxuICogY3JlYXRpb24gb2YgYSB0cmVlIHRoYXQgbmVlZHMgdG8gYmUgY2FjaGVkIGJ5IHYtb25jZS4gVGhlIGNvbXBpbGVyIGdlbmVyYXRlc1xuICogY29kZSBsaWtlIHRoaXM6XG4gKlxuICogYGBgIGpzXG4gKiBfY2FjaGVbMV0gfHwgKFxuICogICBzZXRCbG9ja1RyYWNraW5nKC0xKSxcbiAqICAgX2NhY2hlWzFdID0gY3JlYXRlVk5vZGUoLi4uKSxcbiAqICAgc2V0QmxvY2tUcmFja2luZygxKSxcbiAqICAgX2NhY2hlWzFdXG4gKiApXG4gKiBgYGBcbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBzZXRCbG9ja1RyYWNraW5nKHZhbHVlKSB7XG4gICAgaXNCbG9ja1RyZWVFbmFibGVkICs9IHZhbHVlO1xufVxuZnVuY3Rpb24gc2V0dXBCbG9jayh2bm9kZSkge1xuICAgIC8vIHNhdmUgY3VycmVudCBibG9jayBjaGlsZHJlbiBvbiB0aGUgYmxvY2sgdm5vZGVcbiAgICB2bm9kZS5keW5hbWljQ2hpbGRyZW4gPVxuICAgICAgICBpc0Jsb2NrVHJlZUVuYWJsZWQgPiAwID8gY3VycmVudEJsb2NrIHx8IEVNUFRZX0FSUiA6IG51bGw7XG4gICAgLy8gY2xvc2UgYmxvY2tcbiAgICBjbG9zZUJsb2NrKCk7XG4gICAgLy8gYSBibG9jayBpcyBhbHdheXMgZ29pbmcgdG8gYmUgcGF0Y2hlZCwgc28gdHJhY2sgaXQgYXMgYSBjaGlsZCBvZiBpdHNcbiAgICAvLyBwYXJlbnQgYmxvY2tcbiAgICBpZiAoaXNCbG9ja1RyZWVFbmFibGVkID4gMCAmJiBjdXJyZW50QmxvY2spIHtcbiAgICAgICAgY3VycmVudEJsb2NrLnB1c2godm5vZGUpO1xuICAgIH1cbiAgICByZXR1cm4gdm5vZGU7XG59XG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnRCbG9jayh0eXBlLCBwcm9wcywgY2hpbGRyZW4sIHBhdGNoRmxhZywgZHluYW1pY1Byb3BzLCBzaGFwZUZsYWcpIHtcbiAgICByZXR1cm4gc2V0dXBCbG9jayhjcmVhdGVCYXNlVk5vZGUodHlwZSwgcHJvcHMsIGNoaWxkcmVuLCBwYXRjaEZsYWcsIGR5bmFtaWNQcm9wcywgc2hhcGVGbGFnLCB0cnVlIC8qIGlzQmxvY2sgKi8pKTtcbn1cbi8qKlxuICogQ3JlYXRlIGEgYmxvY2sgcm9vdCB2bm9kZS4gVGFrZXMgdGhlIHNhbWUgZXhhY3QgYXJndW1lbnRzIGFzIGBjcmVhdGVWTm9kZWAuXG4gKiBBIGJsb2NrIHJvb3Qga2VlcHMgdHJhY2sgb2YgZHluYW1pYyBub2RlcyB3aXRoaW4gdGhlIGJsb2NrIGluIHRoZVxuICogYGR5bmFtaWNDaGlsZHJlbmAgYXJyYXkuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlQmxvY2sodHlwZSwgcHJvcHMsIGNoaWxkcmVuLCBwYXRjaEZsYWcsIGR5bmFtaWNQcm9wcykge1xuICAgIHJldHVybiBzZXR1cEJsb2NrKGNyZWF0ZVZOb2RlKHR5cGUsIHByb3BzLCBjaGlsZHJlbiwgcGF0Y2hGbGFnLCBkeW5hbWljUHJvcHMsIHRydWUgLyogaXNCbG9jazogcHJldmVudCBhIGJsb2NrIGZyb20gdHJhY2tpbmcgaXRzZWxmICovKSk7XG59XG5mdW5jdGlvbiBpc1ZOb2RlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID8gdmFsdWUuX192X2lzVk5vZGUgPT09IHRydWUgOiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGlzU2FtZVZOb2RlVHlwZShuMSwgbjIpIHtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXG4gICAgICAgIG4yLnNoYXBlRmxhZyAmIDYgLyogU2hhcGVGbGFncy5DT01QT05FTlQgKi8gJiZcbiAgICAgICAgaG1yRGlydHlDb21wb25lbnRzLmhhcyhuMi50eXBlKSkge1xuICAgICAgICAvLyAjNzA0MiwgZW5zdXJlIHRoZSB2bm9kZSBiZWluZyB1bm1vdW50ZWQgZHVyaW5nIEhNUlxuICAgICAgICAvLyBiaXR3aXNlIG9wZXJhdGlvbnMgdG8gcmVtb3ZlIGtlZXAgYWxpdmUgZmxhZ3NcbiAgICAgICAgbjEuc2hhcGVGbGFnICY9IH4yNTYgLyogU2hhcGVGbGFncy5DT01QT05FTlRfU0hPVUxEX0tFRVBfQUxJVkUgKi87XG4gICAgICAgIG4yLnNoYXBlRmxhZyAmPSB+NTEyIC8qIFNoYXBlRmxhZ3MuQ09NUE9ORU5UX0tFUFRfQUxJVkUgKi87XG4gICAgICAgIC8vIEhNUiBvbmx5OiBpZiB0aGUgY29tcG9uZW50IGhhcyBiZWVuIGhvdC11cGRhdGVkLCBmb3JjZSBhIHJlbG9hZC5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gbjEudHlwZSA9PT0gbjIudHlwZSAmJiBuMS5rZXkgPT09IG4yLmtleTtcbn1cbmxldCB2bm9kZUFyZ3NUcmFuc2Zvcm1lcjtcbi8qKlxuICogSW50ZXJuYWwgQVBJIGZvciByZWdpc3RlcmluZyBhbiBhcmd1bWVudHMgdHJhbnNmb3JtIGZvciBjcmVhdGVWTm9kZVxuICogdXNlZCBmb3IgY3JlYXRpbmcgc3R1YnMgaW4gdGhlIHRlc3QtdXRpbHNcbiAqIEl0IGlzICppbnRlcm5hbCogYnV0IG5lZWRzIHRvIGJlIGV4cG9zZWQgZm9yIHRlc3QtdXRpbHMgdG8gcGljayB1cCBwcm9wZXJcbiAqIHR5cGluZ3NcbiAqL1xuZnVuY3Rpb24gdHJhbnNmb3JtVk5vZGVBcmdzKHRyYW5zZm9ybWVyKSB7XG4gICAgdm5vZGVBcmdzVHJhbnNmb3JtZXIgPSB0cmFuc2Zvcm1lcjtcbn1cbmNvbnN0IGNyZWF0ZVZOb2RlV2l0aEFyZ3NUcmFuc2Zvcm0gPSAoLi4uYXJncykgPT4ge1xuICAgIHJldHVybiBfY3JlYXRlVk5vZGUoLi4uKHZub2RlQXJnc1RyYW5zZm9ybWVyXG4gICAgICAgID8gdm5vZGVBcmdzVHJhbnNmb3JtZXIoYXJncywgY3VycmVudFJlbmRlcmluZ0luc3RhbmNlKVxuICAgICAgICA6IGFyZ3MpKTtcbn07XG5jb25zdCBJbnRlcm5hbE9iamVjdEtleSA9IGBfX3ZJbnRlcm5hbGA7XG5jb25zdCBub3JtYWxpemVLZXkgPSAoeyBrZXkgfSkgPT4ga2V5ICE9IG51bGwgPyBrZXkgOiBudWxsO1xuY29uc3Qgbm9ybWFsaXplUmVmID0gKHsgcmVmLCByZWZfa2V5LCByZWZfZm9yIH0pID0+IHtcbiAgICByZXR1cm4gKHJlZiAhPSBudWxsXG4gICAgICAgID8gaXNTdHJpbmcocmVmKSB8fCBpc1JlZihyZWYpIHx8IGlzRnVuY3Rpb24ocmVmKVxuICAgICAgICAgICAgPyB7IGk6IGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSwgcjogcmVmLCBrOiByZWZfa2V5LCBmOiAhIXJlZl9mb3IgfVxuICAgICAgICAgICAgOiByZWZcbiAgICAgICAgOiBudWxsKTtcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlVk5vZGUodHlwZSwgcHJvcHMgPSBudWxsLCBjaGlsZHJlbiA9IG51bGwsIHBhdGNoRmxhZyA9IDAsIGR5bmFtaWNQcm9wcyA9IG51bGwsIHNoYXBlRmxhZyA9IHR5cGUgPT09IEZyYWdtZW50ID8gMCA6IDEgLyogU2hhcGVGbGFncy5FTEVNRU5UICovLCBpc0Jsb2NrTm9kZSA9IGZhbHNlLCBuZWVkRnVsbENoaWxkcmVuTm9ybWFsaXphdGlvbiA9IGZhbHNlKSB7XG4gICAgY29uc3Qgdm5vZGUgPSB7XG4gICAgICAgIF9fdl9pc1ZOb2RlOiB0cnVlLFxuICAgICAgICBfX3Zfc2tpcDogdHJ1ZSxcbiAgICAgICAgdHlwZSxcbiAgICAgICAgcHJvcHMsXG4gICAgICAgIGtleTogcHJvcHMgJiYgbm9ybWFsaXplS2V5KHByb3BzKSxcbiAgICAgICAgcmVmOiBwcm9wcyAmJiBub3JtYWxpemVSZWYocHJvcHMpLFxuICAgICAgICBzY29wZUlkOiBjdXJyZW50U2NvcGVJZCxcbiAgICAgICAgc2xvdFNjb3BlSWRzOiBudWxsLFxuICAgICAgICBjaGlsZHJlbixcbiAgICAgICAgY29tcG9uZW50OiBudWxsLFxuICAgICAgICBzdXNwZW5zZTogbnVsbCxcbiAgICAgICAgc3NDb250ZW50OiBudWxsLFxuICAgICAgICBzc0ZhbGxiYWNrOiBudWxsLFxuICAgICAgICBkaXJzOiBudWxsLFxuICAgICAgICB0cmFuc2l0aW9uOiBudWxsLFxuICAgICAgICBlbDogbnVsbCxcbiAgICAgICAgYW5jaG9yOiBudWxsLFxuICAgICAgICB0YXJnZXQ6IG51bGwsXG4gICAgICAgIHRhcmdldEFuY2hvcjogbnVsbCxcbiAgICAgICAgc3RhdGljQ291bnQ6IDAsXG4gICAgICAgIHNoYXBlRmxhZyxcbiAgICAgICAgcGF0Y2hGbGFnLFxuICAgICAgICBkeW5hbWljUHJvcHMsXG4gICAgICAgIGR5bmFtaWNDaGlsZHJlbjogbnVsbCxcbiAgICAgICAgYXBwQ29udGV4dDogbnVsbCxcbiAgICAgICAgY3R4OiBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2VcbiAgICB9O1xuICAgIGlmIChuZWVkRnVsbENoaWxkcmVuTm9ybWFsaXphdGlvbikge1xuICAgICAgICBub3JtYWxpemVDaGlsZHJlbih2bm9kZSwgY2hpbGRyZW4pO1xuICAgICAgICAvLyBub3JtYWxpemUgc3VzcGVuc2UgY2hpbGRyZW5cbiAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDEyOCAvKiBTaGFwZUZsYWdzLlNVU1BFTlNFICovKSB7XG4gICAgICAgICAgICB0eXBlLm5vcm1hbGl6ZSh2bm9kZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoY2hpbGRyZW4pIHtcbiAgICAgICAgLy8gY29tcGlsZWQgZWxlbWVudCB2bm9kZSAtIGlmIGNoaWxkcmVuIGlzIHBhc3NlZCwgb25seSBwb3NzaWJsZSB0eXBlcyBhcmVcbiAgICAgICAgLy8gc3RyaW5nIG9yIEFycmF5LlxuICAgICAgICB2bm9kZS5zaGFwZUZsYWcgfD0gaXNTdHJpbmcoY2hpbGRyZW4pXG4gICAgICAgICAgICA/IDggLyogU2hhcGVGbGFncy5URVhUX0NISUxEUkVOICovXG4gICAgICAgICAgICA6IDE2IC8qIFNoYXBlRmxhZ3MuQVJSQVlfQ0hJTERSRU4gKi87XG4gICAgfVxuICAgIC8vIHZhbGlkYXRlIGtleVxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgdm5vZGUua2V5ICE9PSB2bm9kZS5rZXkpIHtcbiAgICAgICAgd2FybihgVk5vZGUgY3JlYXRlZCB3aXRoIGludmFsaWQga2V5IChOYU4pLiBWTm9kZSB0eXBlOmAsIHZub2RlLnR5cGUpO1xuICAgIH1cbiAgICAvLyB0cmFjayB2bm9kZSBmb3IgYmxvY2sgdHJlZVxuICAgIGlmIChpc0Jsb2NrVHJlZUVuYWJsZWQgPiAwICYmXG4gICAgICAgIC8vIGF2b2lkIGEgYmxvY2sgbm9kZSBmcm9tIHRyYWNraW5nIGl0c2VsZlxuICAgICAgICAhaXNCbG9ja05vZGUgJiZcbiAgICAgICAgLy8gaGFzIGN1cnJlbnQgcGFyZW50IGJsb2NrXG4gICAgICAgIGN1cnJlbnRCbG9jayAmJlxuICAgICAgICAvLyBwcmVzZW5jZSBvZiBhIHBhdGNoIGZsYWcgaW5kaWNhdGVzIHRoaXMgbm9kZSBuZWVkcyBwYXRjaGluZyBvbiB1cGRhdGVzLlxuICAgICAgICAvLyBjb21wb25lbnQgbm9kZXMgYWxzbyBzaG91bGQgYWx3YXlzIGJlIHBhdGNoZWQsIGJlY2F1c2UgZXZlbiBpZiB0aGVcbiAgICAgICAgLy8gY29tcG9uZW50IGRvZXNuJ3QgbmVlZCB0byB1cGRhdGUsIGl0IG5lZWRzIHRvIHBlcnNpc3QgdGhlIGluc3RhbmNlIG9uIHRvXG4gICAgICAgIC8vIHRoZSBuZXh0IHZub2RlIHNvIHRoYXQgaXQgY2FuIGJlIHByb3Blcmx5IHVubW91bnRlZCBsYXRlci5cbiAgICAgICAgKHZub2RlLnBhdGNoRmxhZyA+IDAgfHwgc2hhcGVGbGFnICYgNiAvKiBTaGFwZUZsYWdzLkNPTVBPTkVOVCAqLykgJiZcbiAgICAgICAgLy8gdGhlIEVWRU5UUyBmbGFnIGlzIG9ubHkgZm9yIGh5ZHJhdGlvbiBhbmQgaWYgaXQgaXMgdGhlIG9ubHkgZmxhZywgdGhlXG4gICAgICAgIC8vIHZub2RlIHNob3VsZCBub3QgYmUgY29uc2lkZXJlZCBkeW5hbWljIGR1ZSB0byBoYW5kbGVyIGNhY2hpbmcuXG4gICAgICAgIHZub2RlLnBhdGNoRmxhZyAhPT0gMzIgLyogUGF0Y2hGbGFncy5IWURSQVRFX0VWRU5UUyAqLykge1xuICAgICAgICBjdXJyZW50QmxvY2sucHVzaCh2bm9kZSk7XG4gICAgfVxuICAgIHJldHVybiB2bm9kZTtcbn1cbmNvbnN0IGNyZWF0ZVZOb2RlID0gKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/IGNyZWF0ZVZOb2RlV2l0aEFyZ3NUcmFuc2Zvcm0gOiBfY3JlYXRlVk5vZGUpO1xuZnVuY3Rpb24gX2NyZWF0ZVZOb2RlKHR5cGUsIHByb3BzID0gbnVsbCwgY2hpbGRyZW4gPSBudWxsLCBwYXRjaEZsYWcgPSAwLCBkeW5hbWljUHJvcHMgPSBudWxsLCBpc0Jsb2NrTm9kZSA9IGZhbHNlKSB7XG4gICAgaWYgKCF0eXBlIHx8IHR5cGUgPT09IE5VTExfRFlOQU1JQ19DT01QT05FTlQpIHtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhdHlwZSkge1xuICAgICAgICAgICAgd2FybihgSW52YWxpZCB2bm9kZSB0eXBlIHdoZW4gY3JlYXRpbmcgdm5vZGU6ICR7dHlwZX0uYCk7XG4gICAgICAgIH1cbiAgICAgICAgdHlwZSA9IENvbW1lbnQ7XG4gICAgfVxuICAgIGlmIChpc1ZOb2RlKHR5cGUpKSB7XG4gICAgICAgIC8vIGNyZWF0ZVZOb2RlIHJlY2VpdmluZyBhbiBleGlzdGluZyB2bm9kZS4gVGhpcyBoYXBwZW5zIGluIGNhc2VzIGxpa2VcbiAgICAgICAgLy8gPGNvbXBvbmVudCA6aXM9XCJ2bm9kZVwiLz5cbiAgICAgICAgLy8gIzIwNzggbWFrZSBzdXJlIHRvIG1lcmdlIHJlZnMgZHVyaW5nIHRoZSBjbG9uZSBpbnN0ZWFkIG9mIG92ZXJ3cml0aW5nIGl0XG4gICAgICAgIGNvbnN0IGNsb25lZCA9IGNsb25lVk5vZGUodHlwZSwgcHJvcHMsIHRydWUgLyogbWVyZ2VSZWY6IHRydWUgKi8pO1xuICAgICAgICBpZiAoY2hpbGRyZW4pIHtcbiAgICAgICAgICAgIG5vcm1hbGl6ZUNoaWxkcmVuKGNsb25lZCwgY2hpbGRyZW4pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0Jsb2NrVHJlZUVuYWJsZWQgPiAwICYmICFpc0Jsb2NrTm9kZSAmJiBjdXJyZW50QmxvY2spIHtcbiAgICAgICAgICAgIGlmIChjbG9uZWQuc2hhcGVGbGFnICYgNiAvKiBTaGFwZUZsYWdzLkNPTVBPTkVOVCAqLykge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRCbG9ja1tjdXJyZW50QmxvY2suaW5kZXhPZih0eXBlKV0gPSBjbG9uZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50QmxvY2sucHVzaChjbG9uZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNsb25lZC5wYXRjaEZsYWcgfD0gLTIgLyogUGF0Y2hGbGFncy5CQUlMICovO1xuICAgICAgICByZXR1cm4gY2xvbmVkO1xuICAgIH1cbiAgICAvLyBjbGFzcyBjb21wb25lbnQgbm9ybWFsaXphdGlvbi5cbiAgICBpZiAoaXNDbGFzc0NvbXBvbmVudCh0eXBlKSkge1xuICAgICAgICB0eXBlID0gdHlwZS5fX3ZjY09wdHM7XG4gICAgfVxuICAgIC8vIGNsYXNzICYgc3R5bGUgbm9ybWFsaXphdGlvbi5cbiAgICBpZiAocHJvcHMpIHtcbiAgICAgICAgLy8gZm9yIHJlYWN0aXZlIG9yIHByb3h5IG9iamVjdHMsIHdlIG5lZWQgdG8gY2xvbmUgaXQgdG8gZW5hYmxlIG11dGF0aW9uLlxuICAgICAgICBwcm9wcyA9IGd1YXJkUmVhY3RpdmVQcm9wcyhwcm9wcyk7XG4gICAgICAgIGxldCB7IGNsYXNzOiBrbGFzcywgc3R5bGUgfSA9IHByb3BzO1xuICAgICAgICBpZiAoa2xhc3MgJiYgIWlzU3RyaW5nKGtsYXNzKSkge1xuICAgICAgICAgICAgcHJvcHMuY2xhc3MgPSBub3JtYWxpemVDbGFzcyhrbGFzcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzT2JqZWN0KHN0eWxlKSkge1xuICAgICAgICAgICAgLy8gcmVhY3RpdmUgc3RhdGUgb2JqZWN0cyBuZWVkIHRvIGJlIGNsb25lZCBzaW5jZSB0aGV5IGFyZSBsaWtlbHkgdG8gYmVcbiAgICAgICAgICAgIC8vIG11dGF0ZWRcbiAgICAgICAgICAgIGlmIChpc1Byb3h5KHN0eWxlKSAmJiAhaXNBcnJheShzdHlsZSkpIHtcbiAgICAgICAgICAgICAgICBzdHlsZSA9IGV4dGVuZCh7fSwgc3R5bGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHJvcHMuc3R5bGUgPSBub3JtYWxpemVTdHlsZShzdHlsZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gZW5jb2RlIHRoZSB2bm9kZSB0eXBlIGluZm9ybWF0aW9uIGludG8gYSBiaXRtYXBcbiAgICBjb25zdCBzaGFwZUZsYWcgPSBpc1N0cmluZyh0eXBlKVxuICAgICAgICA/IDEgLyogU2hhcGVGbGFncy5FTEVNRU5UICovXG4gICAgICAgIDogaXNTdXNwZW5zZSh0eXBlKVxuICAgICAgICAgICAgPyAxMjggLyogU2hhcGVGbGFncy5TVVNQRU5TRSAqL1xuICAgICAgICAgICAgOiBpc1RlbGVwb3J0KHR5cGUpXG4gICAgICAgICAgICAgICAgPyA2NCAvKiBTaGFwZUZsYWdzLlRFTEVQT1JUICovXG4gICAgICAgICAgICAgICAgOiBpc09iamVjdCh0eXBlKVxuICAgICAgICAgICAgICAgICAgICA/IDQgLyogU2hhcGVGbGFncy5TVEFURUZVTF9DT01QT05FTlQgKi9cbiAgICAgICAgICAgICAgICAgICAgOiBpc0Z1bmN0aW9uKHR5cGUpXG4gICAgICAgICAgICAgICAgICAgICAgICA/IDIgLyogU2hhcGVGbGFncy5GVU5DVElPTkFMX0NPTVBPTkVOVCAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgOiAwO1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgc2hhcGVGbGFnICYgNCAvKiBTaGFwZUZsYWdzLlNUQVRFRlVMX0NPTVBPTkVOVCAqLyAmJiBpc1Byb3h5KHR5cGUpKSB7XG4gICAgICAgIHR5cGUgPSB0b1Jhdyh0eXBlKTtcbiAgICAgICAgd2FybihgVnVlIHJlY2VpdmVkIGEgQ29tcG9uZW50IHdoaWNoIHdhcyBtYWRlIGEgcmVhY3RpdmUgb2JqZWN0LiBUaGlzIGNhbiBgICtcbiAgICAgICAgICAgIGBsZWFkIHRvIHVubmVjZXNzYXJ5IHBlcmZvcm1hbmNlIG92ZXJoZWFkLCBhbmQgc2hvdWxkIGJlIGF2b2lkZWQgYnkgYCArXG4gICAgICAgICAgICBgbWFya2luZyB0aGUgY29tcG9uZW50IHdpdGggXFxgbWFya1Jhd1xcYCBvciB1c2luZyBcXGBzaGFsbG93UmVmXFxgIGAgK1xuICAgICAgICAgICAgYGluc3RlYWQgb2YgXFxgcmVmXFxgLmAsIGBcXG5Db21wb25lbnQgdGhhdCB3YXMgbWFkZSByZWFjdGl2ZTogYCwgdHlwZSk7XG4gICAgfVxuICAgIHJldHVybiBjcmVhdGVCYXNlVk5vZGUodHlwZSwgcHJvcHMsIGNoaWxkcmVuLCBwYXRjaEZsYWcsIGR5bmFtaWNQcm9wcywgc2hhcGVGbGFnLCBpc0Jsb2NrTm9kZSwgdHJ1ZSk7XG59XG5mdW5jdGlvbiBndWFyZFJlYWN0aXZlUHJvcHMocHJvcHMpIHtcbiAgICBpZiAoIXByb3BzKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gaXNQcm94eShwcm9wcykgfHwgSW50ZXJuYWxPYmplY3RLZXkgaW4gcHJvcHNcbiAgICAgICAgPyBleHRlbmQoe30sIHByb3BzKVxuICAgICAgICA6IHByb3BzO1xufVxuZnVuY3Rpb24gY2xvbmVWTm9kZSh2bm9kZSwgZXh0cmFQcm9wcywgbWVyZ2VSZWYgPSBmYWxzZSkge1xuICAgIC8vIFRoaXMgaXMgaW50ZW50aW9uYWxseSBOT1QgdXNpbmcgc3ByZWFkIG9yIGV4dGVuZCB0byBhdm9pZCB0aGUgcnVudGltZVxuICAgIC8vIGtleSBlbnVtZXJhdGlvbiBjb3N0LlxuICAgIGNvbnN0IHsgcHJvcHMsIHJlZiwgcGF0Y2hGbGFnLCBjaGlsZHJlbiB9ID0gdm5vZGU7XG4gICAgY29uc3QgbWVyZ2VkUHJvcHMgPSBleHRyYVByb3BzID8gbWVyZ2VQcm9wcyhwcm9wcyB8fCB7fSwgZXh0cmFQcm9wcykgOiBwcm9wcztcbiAgICBjb25zdCBjbG9uZWQgPSB7XG4gICAgICAgIF9fdl9pc1ZOb2RlOiB0cnVlLFxuICAgICAgICBfX3Zfc2tpcDogdHJ1ZSxcbiAgICAgICAgdHlwZTogdm5vZGUudHlwZSxcbiAgICAgICAgcHJvcHM6IG1lcmdlZFByb3BzLFxuICAgICAgICBrZXk6IG1lcmdlZFByb3BzICYmIG5vcm1hbGl6ZUtleShtZXJnZWRQcm9wcyksXG4gICAgICAgIHJlZjogZXh0cmFQcm9wcyAmJiBleHRyYVByb3BzLnJlZlxuICAgICAgICAgICAgPyAvLyAjMjA3OCBpbiB0aGUgY2FzZSBvZiA8Y29tcG9uZW50IDppcz1cInZub2RlXCIgcmVmPVwiZXh0cmFcIi8+XG4gICAgICAgICAgICAgICAgLy8gaWYgdGhlIHZub2RlIGl0c2VsZiBhbHJlYWR5IGhhcyBhIHJlZiwgY2xvbmVWTm9kZSB3aWxsIG5lZWQgdG8gbWVyZ2VcbiAgICAgICAgICAgICAgICAvLyB0aGUgcmVmcyBzbyB0aGUgc2luZ2xlIHZub2RlIGNhbiBiZSBzZXQgb24gbXVsdGlwbGUgcmVmc1xuICAgICAgICAgICAgICAgIG1lcmdlUmVmICYmIHJlZlxuICAgICAgICAgICAgICAgICAgICA/IGlzQXJyYXkocmVmKVxuICAgICAgICAgICAgICAgICAgICAgICAgPyByZWYuY29uY2F0KG5vcm1hbGl6ZVJlZihleHRyYVByb3BzKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIDogW3JlZiwgbm9ybWFsaXplUmVmKGV4dHJhUHJvcHMpXVxuICAgICAgICAgICAgICAgICAgICA6IG5vcm1hbGl6ZVJlZihleHRyYVByb3BzKVxuICAgICAgICAgICAgOiByZWYsXG4gICAgICAgIHNjb3BlSWQ6IHZub2RlLnNjb3BlSWQsXG4gICAgICAgIHNsb3RTY29wZUlkczogdm5vZGUuc2xvdFNjb3BlSWRzLFxuICAgICAgICBjaGlsZHJlbjogKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIHBhdGNoRmxhZyA9PT0gLTEgLyogUGF0Y2hGbGFncy5IT0lTVEVEICovICYmIGlzQXJyYXkoY2hpbGRyZW4pXG4gICAgICAgICAgICA/IGNoaWxkcmVuLm1hcChkZWVwQ2xvbmVWTm9kZSlcbiAgICAgICAgICAgIDogY2hpbGRyZW4sXG4gICAgICAgIHRhcmdldDogdm5vZGUudGFyZ2V0LFxuICAgICAgICB0YXJnZXRBbmNob3I6IHZub2RlLnRhcmdldEFuY2hvcixcbiAgICAgICAgc3RhdGljQ291bnQ6IHZub2RlLnN0YXRpY0NvdW50LFxuICAgICAgICBzaGFwZUZsYWc6IHZub2RlLnNoYXBlRmxhZyxcbiAgICAgICAgLy8gaWYgdGhlIHZub2RlIGlzIGNsb25lZCB3aXRoIGV4dHJhIHByb3BzLCB3ZSBjYW4gbm8gbG9uZ2VyIGFzc3VtZSBpdHNcbiAgICAgICAgLy8gZXhpc3RpbmcgcGF0Y2ggZmxhZyB0byBiZSByZWxpYWJsZSBhbmQgbmVlZCB0byBhZGQgdGhlIEZVTExfUFJPUFMgZmxhZy5cbiAgICAgICAgLy8gbm90ZTogcHJlc2VydmUgZmxhZyBmb3IgZnJhZ21lbnRzIHNpbmNlIHRoZXkgdXNlIHRoZSBmbGFnIGZvciBjaGlsZHJlblxuICAgICAgICAvLyBmYXN0IHBhdGhzIG9ubHkuXG4gICAgICAgIHBhdGNoRmxhZzogZXh0cmFQcm9wcyAmJiB2bm9kZS50eXBlICE9PSBGcmFnbWVudFxuICAgICAgICAgICAgPyBwYXRjaEZsYWcgPT09IC0xIC8vIGhvaXN0ZWQgbm9kZVxuICAgICAgICAgICAgICAgID8gMTYgLyogUGF0Y2hGbGFncy5GVUxMX1BST1BTICovXG4gICAgICAgICAgICAgICAgOiBwYXRjaEZsYWcgfCAxNiAvKiBQYXRjaEZsYWdzLkZVTExfUFJPUFMgKi9cbiAgICAgICAgICAgIDogcGF0Y2hGbGFnLFxuICAgICAgICBkeW5hbWljUHJvcHM6IHZub2RlLmR5bmFtaWNQcm9wcyxcbiAgICAgICAgZHluYW1pY0NoaWxkcmVuOiB2bm9kZS5keW5hbWljQ2hpbGRyZW4sXG4gICAgICAgIGFwcENvbnRleHQ6IHZub2RlLmFwcENvbnRleHQsXG4gICAgICAgIGRpcnM6IHZub2RlLmRpcnMsXG4gICAgICAgIHRyYW5zaXRpb246IHZub2RlLnRyYW5zaXRpb24sXG4gICAgICAgIC8vIFRoZXNlIHNob3VsZCB0ZWNobmljYWxseSBvbmx5IGJlIG5vbi1udWxsIG9uIG1vdW50ZWQgVk5vZGVzLiBIb3dldmVyLFxuICAgICAgICAvLyB0aGV5ICpzaG91bGQqIGJlIGNvcGllZCBmb3Iga2VwdC1hbGl2ZSB2bm9kZXMuIFNvIHdlIGp1c3QgYWx3YXlzIGNvcHlcbiAgICAgICAgLy8gdGhlbSBzaW5jZSB0aGVtIGJlaW5nIG5vbi1udWxsIGR1cmluZyBhIG1vdW50IGRvZXNuJ3QgYWZmZWN0IHRoZSBsb2dpYyBhc1xuICAgICAgICAvLyB0aGV5IHdpbGwgc2ltcGx5IGJlIG92ZXJ3cml0dGVuLlxuICAgICAgICBjb21wb25lbnQ6IHZub2RlLmNvbXBvbmVudCxcbiAgICAgICAgc3VzcGVuc2U6IHZub2RlLnN1c3BlbnNlLFxuICAgICAgICBzc0NvbnRlbnQ6IHZub2RlLnNzQ29udGVudCAmJiBjbG9uZVZOb2RlKHZub2RlLnNzQ29udGVudCksXG4gICAgICAgIHNzRmFsbGJhY2s6IHZub2RlLnNzRmFsbGJhY2sgJiYgY2xvbmVWTm9kZSh2bm9kZS5zc0ZhbGxiYWNrKSxcbiAgICAgICAgZWw6IHZub2RlLmVsLFxuICAgICAgICBhbmNob3I6IHZub2RlLmFuY2hvcixcbiAgICAgICAgY3R4OiB2bm9kZS5jdHhcbiAgICB9O1xuICAgIHJldHVybiBjbG9uZWQ7XG59XG4vKipcbiAqIERldiBvbmx5LCBmb3IgSE1SIG9mIGhvaXN0ZWQgdm5vZGVzIHJldXNlZCBpbiB2LWZvclxuICogaHR0cHM6Ly9naXRodWIuY29tL3ZpdGVqcy92aXRlL2lzc3Vlcy8yMDIyXG4gKi9cbmZ1bmN0aW9uIGRlZXBDbG9uZVZOb2RlKHZub2RlKSB7XG4gICAgY29uc3QgY2xvbmVkID0gY2xvbmVWTm9kZSh2bm9kZSk7XG4gICAgaWYgKGlzQXJyYXkodm5vZGUuY2hpbGRyZW4pKSB7XG4gICAgICAgIGNsb25lZC5jaGlsZHJlbiA9IHZub2RlLmNoaWxkcmVuLm1hcChkZWVwQ2xvbmVWTm9kZSk7XG4gICAgfVxuICAgIHJldHVybiBjbG9uZWQ7XG59XG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVRleHRWTm9kZSh0ZXh0ID0gJyAnLCBmbGFnID0gMCkge1xuICAgIHJldHVybiBjcmVhdGVWTm9kZShUZXh0LCBudWxsLCB0ZXh0LCBmbGFnKTtcbn1cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlU3RhdGljVk5vZGUoY29udGVudCwgbnVtYmVyT2ZOb2Rlcykge1xuICAgIC8vIEEgc3RhdGljIHZub2RlIGNhbiBjb250YWluIG11bHRpcGxlIHN0cmluZ2lmaWVkIGVsZW1lbnRzLCBhbmQgdGhlIG51bWJlclxuICAgIC8vIG9mIGVsZW1lbnRzIGlzIG5lY2Vzc2FyeSBmb3IgaHlkcmF0aW9uLlxuICAgIGNvbnN0IHZub2RlID0gY3JlYXRlVk5vZGUoU3RhdGljLCBudWxsLCBjb250ZW50KTtcbiAgICB2bm9kZS5zdGF0aWNDb3VudCA9IG51bWJlck9mTm9kZXM7XG4gICAgcmV0dXJuIHZub2RlO1xufVxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBjcmVhdGVDb21tZW50Vk5vZGUodGV4dCA9ICcnLCBcbi8vIHdoZW4gdXNlZCBhcyB0aGUgdi1lbHNlIGJyYW5jaCwgdGhlIGNvbW1lbnQgbm9kZSBtdXN0IGJlIGNyZWF0ZWQgYXMgYVxuLy8gYmxvY2sgdG8gZW5zdXJlIGNvcnJlY3QgdXBkYXRlcy5cbmFzQmxvY2sgPSBmYWxzZSkge1xuICAgIHJldHVybiBhc0Jsb2NrXG4gICAgICAgID8gKG9wZW5CbG9jaygpLCBjcmVhdGVCbG9jayhDb21tZW50LCBudWxsLCB0ZXh0KSlcbiAgICAgICAgOiBjcmVhdGVWTm9kZShDb21tZW50LCBudWxsLCB0ZXh0KTtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZVZOb2RlKGNoaWxkKSB7XG4gICAgaWYgKGNoaWxkID09IG51bGwgfHwgdHlwZW9mIGNoaWxkID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgLy8gZW1wdHkgcGxhY2Vob2xkZXJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVZOb2RlKENvbW1lbnQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc0FycmF5KGNoaWxkKSkge1xuICAgICAgICAvLyBmcmFnbWVudFxuICAgICAgICByZXR1cm4gY3JlYXRlVk5vZGUoRnJhZ21lbnQsIG51bGwsIFxuICAgICAgICAvLyAjMzY2NiwgYXZvaWQgcmVmZXJlbmNlIHBvbGx1dGlvbiB3aGVuIHJldXNpbmcgdm5vZGVcbiAgICAgICAgY2hpbGQuc2xpY2UoKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBjaGlsZCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgLy8gYWxyZWFkeSB2bm9kZSwgdGhpcyBzaG91bGQgYmUgdGhlIG1vc3QgY29tbW9uIHNpbmNlIGNvbXBpbGVkIHRlbXBsYXRlc1xuICAgICAgICAvLyBhbHdheXMgcHJvZHVjZSBhbGwtdm5vZGUgY2hpbGRyZW4gYXJyYXlzXG4gICAgICAgIHJldHVybiBjbG9uZUlmTW91bnRlZChjaGlsZCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBzdHJpbmdzIGFuZCBudW1iZXJzXG4gICAgICAgIHJldHVybiBjcmVhdGVWTm9kZShUZXh0LCBudWxsLCBTdHJpbmcoY2hpbGQpKTtcbiAgICB9XG59XG4vLyBvcHRpbWl6ZWQgbm9ybWFsaXphdGlvbiBmb3IgdGVtcGxhdGUtY29tcGlsZWQgcmVuZGVyIGZuc1xuZnVuY3Rpb24gY2xvbmVJZk1vdW50ZWQoY2hpbGQpIHtcbiAgICByZXR1cm4gKGNoaWxkLmVsID09PSBudWxsICYmIGNoaWxkLnBhdGNoRmxhZyAhPT0gLTEgLyogUGF0Y2hGbGFncy5IT0lTVEVEICovKSB8fFxuICAgICAgICBjaGlsZC5tZW1vXG4gICAgICAgID8gY2hpbGRcbiAgICAgICAgOiBjbG9uZVZOb2RlKGNoaWxkKTtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUNoaWxkcmVuKHZub2RlLCBjaGlsZHJlbikge1xuICAgIGxldCB0eXBlID0gMDtcbiAgICBjb25zdCB7IHNoYXBlRmxhZyB9ID0gdm5vZGU7XG4gICAgaWYgKGNoaWxkcmVuID09IG51bGwpIHtcbiAgICAgICAgY2hpbGRyZW4gPSBudWxsO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc0FycmF5KGNoaWxkcmVuKSkge1xuICAgICAgICB0eXBlID0gMTYgLyogU2hhcGVGbGFncy5BUlJBWV9DSElMRFJFTiAqLztcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGNoaWxkcmVuID09PSAnb2JqZWN0Jykge1xuICAgICAgICBpZiAoc2hhcGVGbGFnICYgKDEgLyogU2hhcGVGbGFncy5FTEVNRU5UICovIHwgNjQgLyogU2hhcGVGbGFncy5URUxFUE9SVCAqLykpIHtcbiAgICAgICAgICAgIC8vIE5vcm1hbGl6ZSBzbG90IHRvIHBsYWluIGNoaWxkcmVuIGZvciBwbGFpbiBlbGVtZW50IGFuZCBUZWxlcG9ydFxuICAgICAgICAgICAgY29uc3Qgc2xvdCA9IGNoaWxkcmVuLmRlZmF1bHQ7XG4gICAgICAgICAgICBpZiAoc2xvdCkge1xuICAgICAgICAgICAgICAgIC8vIF9jIG1hcmtlciBpcyBhZGRlZCBieSB3aXRoQ3R4KCkgaW5kaWNhdGluZyB0aGlzIGlzIGEgY29tcGlsZWQgc2xvdFxuICAgICAgICAgICAgICAgIHNsb3QuX2MgJiYgKHNsb3QuX2QgPSBmYWxzZSk7XG4gICAgICAgICAgICAgICAgbm9ybWFsaXplQ2hpbGRyZW4odm5vZGUsIHNsb3QoKSk7XG4gICAgICAgICAgICAgICAgc2xvdC5fYyAmJiAoc2xvdC5fZCA9IHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdHlwZSA9IDMyIC8qIFNoYXBlRmxhZ3MuU0xPVFNfQ0hJTERSRU4gKi87XG4gICAgICAgICAgICBjb25zdCBzbG90RmxhZyA9IGNoaWxkcmVuLl87XG4gICAgICAgICAgICBpZiAoIXNsb3RGbGFnICYmICEoSW50ZXJuYWxPYmplY3RLZXkgaW4gY2hpbGRyZW4pKSB7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW4uX2N0eCA9IGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHNsb3RGbGFnID09PSAzIC8qIFNsb3RGbGFncy5GT1JXQVJERUQgKi8gJiYgY3VycmVudFJlbmRlcmluZ0luc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgLy8gYSBjaGlsZCBjb21wb25lbnQgcmVjZWl2ZXMgZm9yd2FyZGVkIHNsb3RzIGZyb20gdGhlIHBhcmVudC5cbiAgICAgICAgICAgICAgICAvLyBpdHMgc2xvdCB0eXBlIGlzIGRldGVybWluZWQgYnkgaXRzIHBhcmVudCdzIHNsb3QgdHlwZS5cbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudFJlbmRlcmluZ0luc3RhbmNlLnNsb3RzLl8gPT09IDEgLyogU2xvdEZsYWdzLlNUQUJMRSAqLykge1xuICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbi5fID0gMSAvKiBTbG90RmxhZ3MuU1RBQkxFICovO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW4uXyA9IDIgLyogU2xvdEZsYWdzLkRZTkFNSUMgKi87XG4gICAgICAgICAgICAgICAgICAgIHZub2RlLnBhdGNoRmxhZyB8PSAxMDI0IC8qIFBhdGNoRmxhZ3MuRFlOQU1JQ19TTE9UUyAqLztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoaXNGdW5jdGlvbihjaGlsZHJlbikpIHtcbiAgICAgICAgY2hpbGRyZW4gPSB7IGRlZmF1bHQ6IGNoaWxkcmVuLCBfY3R4OiBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UgfTtcbiAgICAgICAgdHlwZSA9IDMyIC8qIFNoYXBlRmxhZ3MuU0xPVFNfQ0hJTERSRU4gKi87XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjaGlsZHJlbiA9IFN0cmluZyhjaGlsZHJlbik7XG4gICAgICAgIC8vIGZvcmNlIHRlbGVwb3J0IGNoaWxkcmVuIHRvIGFycmF5IHNvIGl0IGNhbiBiZSBtb3ZlZCBhcm91bmRcbiAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDY0IC8qIFNoYXBlRmxhZ3MuVEVMRVBPUlQgKi8pIHtcbiAgICAgICAgICAgIHR5cGUgPSAxNiAvKiBTaGFwZUZsYWdzLkFSUkFZX0NISUxEUkVOICovO1xuICAgICAgICAgICAgY2hpbGRyZW4gPSBbY3JlYXRlVGV4dFZOb2RlKGNoaWxkcmVuKV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0eXBlID0gOCAvKiBTaGFwZUZsYWdzLlRFWFRfQ0hJTERSRU4gKi87XG4gICAgICAgIH1cbiAgICB9XG4gICAgdm5vZGUuY2hpbGRyZW4gPSBjaGlsZHJlbjtcbiAgICB2bm9kZS5zaGFwZUZsYWcgfD0gdHlwZTtcbn1cbmZ1bmN0aW9uIG1lcmdlUHJvcHMoLi4uYXJncykge1xuICAgIGNvbnN0IHJldCA9IHt9O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCB0b01lcmdlID0gYXJnc1tpXTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdG9NZXJnZSkge1xuICAgICAgICAgICAgaWYgKGtleSA9PT0gJ2NsYXNzJykge1xuICAgICAgICAgICAgICAgIGlmIChyZXQuY2xhc3MgIT09IHRvTWVyZ2UuY2xhc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0LmNsYXNzID0gbm9ybWFsaXplQ2xhc3MoW3JldC5jbGFzcywgdG9NZXJnZS5jbGFzc10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGtleSA9PT0gJ3N0eWxlJykge1xuICAgICAgICAgICAgICAgIHJldC5zdHlsZSA9IG5vcm1hbGl6ZVN0eWxlKFtyZXQuc3R5bGUsIHRvTWVyZ2Uuc3R5bGVdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzT24oa2V5KSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nID0gcmV0W2tleV07XG4gICAgICAgICAgICAgICAgY29uc3QgaW5jb21pbmcgPSB0b01lcmdlW2tleV07XG4gICAgICAgICAgICAgICAgaWYgKGluY29taW5nICYmXG4gICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nICE9PSBpbmNvbWluZyAmJlxuICAgICAgICAgICAgICAgICAgICAhKGlzQXJyYXkoZXhpc3RpbmcpICYmIGV4aXN0aW5nLmluY2x1ZGVzKGluY29taW5nKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0W2tleV0gPSBleGlzdGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgPyBbXS5jb25jYXQoZXhpc3RpbmcsIGluY29taW5nKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBpbmNvbWluZztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChrZXkgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgcmV0W2tleV0gPSB0b01lcmdlW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn1cbmZ1bmN0aW9uIGludm9rZVZOb2RlSG9vayhob29rLCBpbnN0YW5jZSwgdm5vZGUsIHByZXZWTm9kZSA9IG51bGwpIHtcbiAgICBjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZyhob29rLCBpbnN0YW5jZSwgNyAvKiBFcnJvckNvZGVzLlZOT0RFX0hPT0sgKi8sIFtcbiAgICAgICAgdm5vZGUsXG4gICAgICAgIHByZXZWTm9kZVxuICAgIF0pO1xufVxuXG5jb25zdCBlbXB0eUFwcENvbnRleHQgPSBjcmVhdGVBcHBDb250ZXh0KCk7XG5sZXQgdWlkJDEgPSAwO1xuZnVuY3Rpb24gY3JlYXRlQ29tcG9uZW50SW5zdGFuY2Uodm5vZGUsIHBhcmVudCwgc3VzcGVuc2UpIHtcbiAgICBjb25zdCB0eXBlID0gdm5vZGUudHlwZTtcbiAgICAvLyBpbmhlcml0IHBhcmVudCBhcHAgY29udGV4dCAtIG9yIC0gaWYgcm9vdCwgYWRvcHQgZnJvbSByb290IHZub2RlXG4gICAgY29uc3QgYXBwQ29udGV4dCA9IChwYXJlbnQgPyBwYXJlbnQuYXBwQ29udGV4dCA6IHZub2RlLmFwcENvbnRleHQpIHx8IGVtcHR5QXBwQ29udGV4dDtcbiAgICBjb25zdCBpbnN0YW5jZSA9IHtcbiAgICAgICAgdWlkOiB1aWQkMSsrLFxuICAgICAgICB2bm9kZSxcbiAgICAgICAgdHlwZSxcbiAgICAgICAgcGFyZW50LFxuICAgICAgICBhcHBDb250ZXh0LFxuICAgICAgICByb290OiBudWxsLFxuICAgICAgICBuZXh0OiBudWxsLFxuICAgICAgICBzdWJUcmVlOiBudWxsLFxuICAgICAgICBlZmZlY3Q6IG51bGwsXG4gICAgICAgIHVwZGF0ZTogbnVsbCxcbiAgICAgICAgc2NvcGU6IG5ldyBFZmZlY3RTY29wZSh0cnVlIC8qIGRldGFjaGVkICovKSxcbiAgICAgICAgcmVuZGVyOiBudWxsLFxuICAgICAgICBwcm94eTogbnVsbCxcbiAgICAgICAgZXhwb3NlZDogbnVsbCxcbiAgICAgICAgZXhwb3NlUHJveHk6IG51bGwsXG4gICAgICAgIHdpdGhQcm94eTogbnVsbCxcbiAgICAgICAgcHJvdmlkZXM6IHBhcmVudCA/IHBhcmVudC5wcm92aWRlcyA6IE9iamVjdC5jcmVhdGUoYXBwQ29udGV4dC5wcm92aWRlcyksXG4gICAgICAgIGFjY2Vzc0NhY2hlOiBudWxsLFxuICAgICAgICByZW5kZXJDYWNoZTogW10sXG4gICAgICAgIC8vIGxvY2FsIHJlc29sdmVkIGFzc2V0c1xuICAgICAgICBjb21wb25lbnRzOiBudWxsLFxuICAgICAgICBkaXJlY3RpdmVzOiBudWxsLFxuICAgICAgICAvLyByZXNvbHZlZCBwcm9wcyBhbmQgZW1pdHMgb3B0aW9uc1xuICAgICAgICBwcm9wc09wdGlvbnM6IG5vcm1hbGl6ZVByb3BzT3B0aW9ucyh0eXBlLCBhcHBDb250ZXh0KSxcbiAgICAgICAgZW1pdHNPcHRpb25zOiBub3JtYWxpemVFbWl0c09wdGlvbnModHlwZSwgYXBwQ29udGV4dCksXG4gICAgICAgIC8vIGVtaXRcbiAgICAgICAgZW1pdDogbnVsbCxcbiAgICAgICAgZW1pdHRlZDogbnVsbCxcbiAgICAgICAgLy8gcHJvcHMgZGVmYXVsdCB2YWx1ZVxuICAgICAgICBwcm9wc0RlZmF1bHRzOiBFTVBUWV9PQkosXG4gICAgICAgIC8vIGluaGVyaXRBdHRyc1xuICAgICAgICBpbmhlcml0QXR0cnM6IHR5cGUuaW5oZXJpdEF0dHJzLFxuICAgICAgICAvLyBzdGF0ZVxuICAgICAgICBjdHg6IEVNUFRZX09CSixcbiAgICAgICAgZGF0YTogRU1QVFlfT0JKLFxuICAgICAgICBwcm9wczogRU1QVFlfT0JKLFxuICAgICAgICBhdHRyczogRU1QVFlfT0JKLFxuICAgICAgICBzbG90czogRU1QVFlfT0JKLFxuICAgICAgICByZWZzOiBFTVBUWV9PQkosXG4gICAgICAgIHNldHVwU3RhdGU6IEVNUFRZX09CSixcbiAgICAgICAgc2V0dXBDb250ZXh0OiBudWxsLFxuICAgICAgICAvLyBzdXNwZW5zZSByZWxhdGVkXG4gICAgICAgIHN1c3BlbnNlLFxuICAgICAgICBzdXNwZW5zZUlkOiBzdXNwZW5zZSA/IHN1c3BlbnNlLnBlbmRpbmdJZCA6IDAsXG4gICAgICAgIGFzeW5jRGVwOiBudWxsLFxuICAgICAgICBhc3luY1Jlc29sdmVkOiBmYWxzZSxcbiAgICAgICAgLy8gbGlmZWN5Y2xlIGhvb2tzXG4gICAgICAgIC8vIG5vdCB1c2luZyBlbnVtcyBoZXJlIGJlY2F1c2UgaXQgcmVzdWx0cyBpbiBjb21wdXRlZCBwcm9wZXJ0aWVzXG4gICAgICAgIGlzTW91bnRlZDogZmFsc2UsXG4gICAgICAgIGlzVW5tb3VudGVkOiBmYWxzZSxcbiAgICAgICAgaXNEZWFjdGl2YXRlZDogZmFsc2UsXG4gICAgICAgIGJjOiBudWxsLFxuICAgICAgICBjOiBudWxsLFxuICAgICAgICBibTogbnVsbCxcbiAgICAgICAgbTogbnVsbCxcbiAgICAgICAgYnU6IG51bGwsXG4gICAgICAgIHU6IG51bGwsXG4gICAgICAgIHVtOiBudWxsLFxuICAgICAgICBidW06IG51bGwsXG4gICAgICAgIGRhOiBudWxsLFxuICAgICAgICBhOiBudWxsLFxuICAgICAgICBydGc6IG51bGwsXG4gICAgICAgIHJ0YzogbnVsbCxcbiAgICAgICAgZWM6IG51bGwsXG4gICAgICAgIHNwOiBudWxsXG4gICAgfTtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIGluc3RhbmNlLmN0eCA9IGNyZWF0ZURldlJlbmRlckNvbnRleHQoaW5zdGFuY2UpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaW5zdGFuY2UuY3R4ID0geyBfOiBpbnN0YW5jZSB9O1xuICAgIH1cbiAgICBpbnN0YW5jZS5yb290ID0gcGFyZW50ID8gcGFyZW50LnJvb3QgOiBpbnN0YW5jZTtcbiAgICBpbnN0YW5jZS5lbWl0ID0gZW1pdCQxLmJpbmQobnVsbCwgaW5zdGFuY2UpO1xuICAgIC8vIGFwcGx5IGN1c3RvbSBlbGVtZW50IHNwZWNpYWwgaGFuZGxpbmdcbiAgICBpZiAodm5vZGUuY2UpIHtcbiAgICAgICAgdm5vZGUuY2UoaW5zdGFuY2UpO1xuICAgIH1cbiAgICByZXR1cm4gaW5zdGFuY2U7XG59XG5sZXQgY3VycmVudEluc3RhbmNlID0gbnVsbDtcbmNvbnN0IGdldEN1cnJlbnRJbnN0YW5jZSA9ICgpID0+IGN1cnJlbnRJbnN0YW5jZSB8fCBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2U7XG5jb25zdCBzZXRDdXJyZW50SW5zdGFuY2UgPSAoaW5zdGFuY2UpID0+IHtcbiAgICBjdXJyZW50SW5zdGFuY2UgPSBpbnN0YW5jZTtcbiAgICBpbnN0YW5jZS5zY29wZS5vbigpO1xufTtcbmNvbnN0IHVuc2V0Q3VycmVudEluc3RhbmNlID0gKCkgPT4ge1xuICAgIGN1cnJlbnRJbnN0YW5jZSAmJiBjdXJyZW50SW5zdGFuY2Uuc2NvcGUub2ZmKCk7XG4gICAgY3VycmVudEluc3RhbmNlID0gbnVsbDtcbn07XG5jb25zdCBpc0J1aWx0SW5UYWcgPSAvKiNfX1BVUkVfXyovIG1ha2VNYXAoJ3Nsb3QsY29tcG9uZW50Jyk7XG5mdW5jdGlvbiB2YWxpZGF0ZUNvbXBvbmVudE5hbWUobmFtZSwgY29uZmlnKSB7XG4gICAgY29uc3QgYXBwSXNOYXRpdmVUYWcgPSBjb25maWcuaXNOYXRpdmVUYWcgfHwgTk87XG4gICAgaWYgKGlzQnVpbHRJblRhZyhuYW1lKSB8fCBhcHBJc05hdGl2ZVRhZyhuYW1lKSkge1xuICAgICAgICB3YXJuKCdEbyBub3QgdXNlIGJ1aWx0LWluIG9yIHJlc2VydmVkIEhUTUwgZWxlbWVudHMgYXMgY29tcG9uZW50IGlkOiAnICsgbmFtZSk7XG4gICAgfVxufVxuZnVuY3Rpb24gaXNTdGF0ZWZ1bENvbXBvbmVudChpbnN0YW5jZSkge1xuICAgIHJldHVybiBpbnN0YW5jZS52bm9kZS5zaGFwZUZsYWcgJiA0IC8qIFNoYXBlRmxhZ3MuU1RBVEVGVUxfQ09NUE9ORU5UICovO1xufVxubGV0IGlzSW5TU1JDb21wb25lbnRTZXR1cCA9IGZhbHNlO1xuZnVuY3Rpb24gc2V0dXBDb21wb25lbnQoaW5zdGFuY2UsIGlzU1NSID0gZmFsc2UpIHtcbiAgICBpc0luU1NSQ29tcG9uZW50U2V0dXAgPSBpc1NTUjtcbiAgICBjb25zdCB7IHByb3BzLCBjaGlsZHJlbiB9ID0gaW5zdGFuY2Uudm5vZGU7XG4gICAgY29uc3QgaXNTdGF0ZWZ1bCA9IGlzU3RhdGVmdWxDb21wb25lbnQoaW5zdGFuY2UpO1xuICAgIGluaXRQcm9wcyhpbnN0YW5jZSwgcHJvcHMsIGlzU3RhdGVmdWwsIGlzU1NSKTtcbiAgICBpbml0U2xvdHMoaW5zdGFuY2UsIGNoaWxkcmVuKTtcbiAgICBjb25zdCBzZXR1cFJlc3VsdCA9IGlzU3RhdGVmdWxcbiAgICAgICAgPyBzZXR1cFN0YXRlZnVsQ29tcG9uZW50KGluc3RhbmNlLCBpc1NTUilcbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgaXNJblNTUkNvbXBvbmVudFNldHVwID0gZmFsc2U7XG4gICAgcmV0dXJuIHNldHVwUmVzdWx0O1xufVxuZnVuY3Rpb24gc2V0dXBTdGF0ZWZ1bENvbXBvbmVudChpbnN0YW5jZSwgaXNTU1IpIHtcbiAgICB2YXIgX2E7XG4gICAgY29uc3QgQ29tcG9uZW50ID0gaW5zdGFuY2UudHlwZTtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIGlmIChDb21wb25lbnQubmFtZSkge1xuICAgICAgICAgICAgdmFsaWRhdGVDb21wb25lbnROYW1lKENvbXBvbmVudC5uYW1lLCBpbnN0YW5jZS5hcHBDb250ZXh0LmNvbmZpZyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKENvbXBvbmVudC5jb21wb25lbnRzKSB7XG4gICAgICAgICAgICBjb25zdCBuYW1lcyA9IE9iamVjdC5rZXlzKENvbXBvbmVudC5jb21wb25lbnRzKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmFtZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YWxpZGF0ZUNvbXBvbmVudE5hbWUobmFtZXNbaV0sIGluc3RhbmNlLmFwcENvbnRleHQuY29uZmlnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoQ29tcG9uZW50LmRpcmVjdGl2ZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IG5hbWVzID0gT2JqZWN0LmtleXMoQ29tcG9uZW50LmRpcmVjdGl2ZXMpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuYW1lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhbGlkYXRlRGlyZWN0aXZlTmFtZShuYW1lc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKENvbXBvbmVudC5jb21waWxlck9wdGlvbnMgJiYgaXNSdW50aW1lT25seSgpKSB7XG4gICAgICAgICAgICB3YXJuKGBcImNvbXBpbGVyT3B0aW9uc1wiIGlzIG9ubHkgc3VwcG9ydGVkIHdoZW4gdXNpbmcgYSBidWlsZCBvZiBWdWUgdGhhdCBgICtcbiAgICAgICAgICAgICAgICBgaW5jbHVkZXMgdGhlIHJ1bnRpbWUgY29tcGlsZXIuIFNpbmNlIHlvdSBhcmUgdXNpbmcgYSBydW50aW1lLW9ubHkgYCArXG4gICAgICAgICAgICAgICAgYGJ1aWxkLCB0aGUgb3B0aW9ucyBzaG91bGQgYmUgcGFzc2VkIHZpYSB5b3VyIGJ1aWxkIHRvb2wgY29uZmlnIGluc3RlYWQuYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gMC4gY3JlYXRlIHJlbmRlciBwcm94eSBwcm9wZXJ0eSBhY2Nlc3MgY2FjaGVcbiAgICBpbnN0YW5jZS5hY2Nlc3NDYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgLy8gMS4gY3JlYXRlIHB1YmxpYyBpbnN0YW5jZSAvIHJlbmRlciBwcm94eVxuICAgIC8vIGFsc28gbWFyayBpdCByYXcgc28gaXQncyBuZXZlciBvYnNlcnZlZFxuICAgIGluc3RhbmNlLnByb3h5ID0gbWFya1JhdyhuZXcgUHJveHkoaW5zdGFuY2UuY3R4LCBQdWJsaWNJbnN0YW5jZVByb3h5SGFuZGxlcnMpKTtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIGV4cG9zZVByb3BzT25SZW5kZXJDb250ZXh0KGluc3RhbmNlKTtcbiAgICB9XG4gICAgLy8gMi4gY2FsbCBzZXR1cCgpXG4gICAgY29uc3QgeyBzZXR1cCB9ID0gQ29tcG9uZW50O1xuICAgIGlmIChzZXR1cCkge1xuICAgICAgICBjb25zdCBzZXR1cENvbnRleHQgPSAoaW5zdGFuY2Uuc2V0dXBDb250ZXh0ID1cbiAgICAgICAgICAgIHNldHVwLmxlbmd0aCA+IDEgPyBjcmVhdGVTZXR1cENvbnRleHQoaW5zdGFuY2UpIDogbnVsbCk7XG4gICAgICAgIHNldEN1cnJlbnRJbnN0YW5jZShpbnN0YW5jZSk7XG4gICAgICAgIHBhdXNlVHJhY2tpbmcoKTtcbiAgICAgICAgY29uc3Qgc2V0dXBSZXN1bHQgPSBjYWxsV2l0aEVycm9ySGFuZGxpbmcoc2V0dXAsIGluc3RhbmNlLCAwIC8qIEVycm9yQ29kZXMuU0VUVVBfRlVOQ1RJT04gKi8sIFsocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyBzaGFsbG93UmVhZG9ubHkoaW5zdGFuY2UucHJvcHMpIDogaW5zdGFuY2UucHJvcHMsIHNldHVwQ29udGV4dF0pO1xuICAgICAgICByZXNldFRyYWNraW5nKCk7XG4gICAgICAgIHVuc2V0Q3VycmVudEluc3RhbmNlKCk7XG4gICAgICAgIGlmIChpc1Byb21pc2Uoc2V0dXBSZXN1bHQpKSB7XG4gICAgICAgICAgICBzZXR1cFJlc3VsdC50aGVuKHVuc2V0Q3VycmVudEluc3RhbmNlLCB1bnNldEN1cnJlbnRJbnN0YW5jZSk7XG4gICAgICAgICAgICBpZiAoaXNTU1IpIHtcbiAgICAgICAgICAgICAgICAvLyByZXR1cm4gdGhlIHByb21pc2Ugc28gc2VydmVyLXJlbmRlcmVyIGNhbiB3YWl0IG9uIGl0XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNldHVwUmVzdWx0XG4gICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXNvbHZlZFJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBoYW5kbGVTZXR1cFJlc3VsdChpbnN0YW5jZSwgcmVzb2x2ZWRSZXN1bHQsIGlzU1NSKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZUVycm9yKGUsIGluc3RhbmNlLCAwIC8qIEVycm9yQ29kZXMuU0VUVVBfRlVOQ1RJT04gKi8pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gYXN5bmMgc2V0dXAgcmV0dXJuZWQgUHJvbWlzZS5cbiAgICAgICAgICAgICAgICAvLyBiYWlsIGhlcmUgYW5kIHdhaXQgZm9yIHJlLWVudHJ5LlxuICAgICAgICAgICAgICAgIGluc3RhbmNlLmFzeW5jRGVwID0gc2V0dXBSZXN1bHQ7XG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhaW5zdGFuY2Uuc3VzcGVuc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IChfYSA9IENvbXBvbmVudC5uYW1lKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnQW5vbnltb3VzJztcbiAgICAgICAgICAgICAgICAgICAgd2FybihgQ29tcG9uZW50IDwke25hbWV9Pjogc2V0dXAgZnVuY3Rpb24gcmV0dXJuZWQgYSBwcm9taXNlLCBidXQgbm8gYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgPFN1c3BlbnNlPiBib3VuZGFyeSB3YXMgZm91bmQgaW4gdGhlIHBhcmVudCBjb21wb25lbnQgdHJlZS4gYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgQSBjb21wb25lbnQgd2l0aCBhc3luYyBzZXR1cCgpIG11c3QgYmUgbmVzdGVkIGluIGEgPFN1c3BlbnNlPiBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBpbiBvcmRlciB0byBiZSByZW5kZXJlZC5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBoYW5kbGVTZXR1cFJlc3VsdChpbnN0YW5jZSwgc2V0dXBSZXN1bHQsIGlzU1NSKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZmluaXNoQ29tcG9uZW50U2V0dXAoaW5zdGFuY2UsIGlzU1NSKTtcbiAgICB9XG59XG5mdW5jdGlvbiBoYW5kbGVTZXR1cFJlc3VsdChpbnN0YW5jZSwgc2V0dXBSZXN1bHQsIGlzU1NSKSB7XG4gICAgaWYgKGlzRnVuY3Rpb24oc2V0dXBSZXN1bHQpKSB7XG4gICAgICAgIC8vIHNldHVwIHJldHVybmVkIGFuIGlubGluZSByZW5kZXIgZnVuY3Rpb25cbiAgICAgICAgaWYgKGluc3RhbmNlLnR5cGUuX19zc3JJbmxpbmVSZW5kZXIpIHtcbiAgICAgICAgICAgIC8vIHdoZW4gdGhlIGZ1bmN0aW9uJ3MgbmFtZSBpcyBgc3NyUmVuZGVyYCAoY29tcGlsZWQgYnkgU0ZDIGlubGluZSBtb2RlKSxcbiAgICAgICAgICAgIC8vIHNldCBpdCBhcyBzc3JSZW5kZXIgaW5zdGVhZC5cbiAgICAgICAgICAgIGluc3RhbmNlLnNzclJlbmRlciA9IHNldHVwUmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaW5zdGFuY2UucmVuZGVyID0gc2V0dXBSZXN1bHQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoaXNPYmplY3Qoc2V0dXBSZXN1bHQpKSB7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgaXNWTm9kZShzZXR1cFJlc3VsdCkpIHtcbiAgICAgICAgICAgIHdhcm4oYHNldHVwKCkgc2hvdWxkIG5vdCByZXR1cm4gVk5vZGVzIGRpcmVjdGx5IC0gYCArXG4gICAgICAgICAgICAgICAgYHJldHVybiBhIHJlbmRlciBmdW5jdGlvbiBpbnN0ZWFkLmApO1xuICAgICAgICB9XG4gICAgICAgIC8vIHNldHVwIHJldHVybmVkIGJpbmRpbmdzLlxuICAgICAgICAvLyBhc3N1bWluZyBhIHJlbmRlciBmdW5jdGlvbiBjb21waWxlZCBmcm9tIHRlbXBsYXRlIGlzIHByZXNlbnQuXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICAgICAgICBpbnN0YW5jZS5kZXZ0b29sc1Jhd1NldHVwU3RhdGUgPSBzZXR1cFJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBpbnN0YW5jZS5zZXR1cFN0YXRlID0gcHJveHlSZWZzKHNldHVwUmVzdWx0KTtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgZXhwb3NlU2V0dXBTdGF0ZU9uUmVuZGVyQ29udGV4dChpbnN0YW5jZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIHNldHVwUmVzdWx0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgd2Fybihgc2V0dXAoKSBzaG91bGQgcmV0dXJuIGFuIG9iamVjdC4gUmVjZWl2ZWQ6ICR7c2V0dXBSZXN1bHQgPT09IG51bGwgPyAnbnVsbCcgOiB0eXBlb2Ygc2V0dXBSZXN1bHR9YCk7XG4gICAgfVxuICAgIGZpbmlzaENvbXBvbmVudFNldHVwKGluc3RhbmNlLCBpc1NTUik7XG59XG5sZXQgY29tcGlsZTtcbmxldCBpbnN0YWxsV2l0aFByb3h5O1xuLyoqXG4gKiBGb3IgcnVudGltZS1kb20gdG8gcmVnaXN0ZXIgdGhlIGNvbXBpbGVyLlxuICogTm90ZSB0aGUgZXhwb3J0ZWQgbWV0aG9kIHVzZXMgYW55IHRvIGF2b2lkIGQudHMgcmVseWluZyBvbiB0aGUgY29tcGlsZXIgdHlwZXMuXG4gKi9cbmZ1bmN0aW9uIHJlZ2lzdGVyUnVudGltZUNvbXBpbGVyKF9jb21waWxlKSB7XG4gICAgY29tcGlsZSA9IF9jb21waWxlO1xuICAgIGluc3RhbGxXaXRoUHJveHkgPSBpID0+IHtcbiAgICAgICAgaWYgKGkucmVuZGVyLl9yYykge1xuICAgICAgICAgICAgaS53aXRoUHJveHkgPSBuZXcgUHJveHkoaS5jdHgsIFJ1bnRpbWVDb21waWxlZFB1YmxpY0luc3RhbmNlUHJveHlIYW5kbGVycyk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuLy8gZGV2IG9ubHlcbmNvbnN0IGlzUnVudGltZU9ubHkgPSAoKSA9PiAhY29tcGlsZTtcbmZ1bmN0aW9uIGZpbmlzaENvbXBvbmVudFNldHVwKGluc3RhbmNlLCBpc1NTUiwgc2tpcE9wdGlvbnMpIHtcbiAgICBjb25zdCBDb21wb25lbnQgPSBpbnN0YW5jZS50eXBlO1xuICAgIC8vIHRlbXBsYXRlIC8gcmVuZGVyIGZ1bmN0aW9uIG5vcm1hbGl6YXRpb25cbiAgICAvLyBjb3VsZCBiZSBhbHJlYWR5IHNldCB3aGVuIHJldHVybmVkIGZyb20gc2V0dXAoKVxuICAgIGlmICghaW5zdGFuY2UucmVuZGVyKSB7XG4gICAgICAgIC8vIG9ubHkgZG8gb24tdGhlLWZseSBjb21waWxlIGlmIG5vdCBpbiBTU1IgLSBTU1Igb24tdGhlLWZseSBjb21waWxhdGlvblxuICAgICAgICAvLyBpcyBkb25lIGJ5IHNlcnZlci1yZW5kZXJlclxuICAgICAgICBpZiAoIWlzU1NSICYmIGNvbXBpbGUgJiYgIUNvbXBvbmVudC5yZW5kZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IHRlbXBsYXRlID0gQ29tcG9uZW50LnRlbXBsYXRlIHx8XG4gICAgICAgICAgICAgICAgcmVzb2x2ZU1lcmdlZE9wdGlvbnMoaW5zdGFuY2UpLnRlbXBsYXRlO1xuICAgICAgICAgICAgaWYgKHRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGBjb21waWxlYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHsgaXNDdXN0b21FbGVtZW50LCBjb21waWxlck9wdGlvbnMgfSA9IGluc3RhbmNlLmFwcENvbnRleHQuY29uZmlnO1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgZGVsaW1pdGVycywgY29tcGlsZXJPcHRpb25zOiBjb21wb25lbnRDb21waWxlck9wdGlvbnMgfSA9IENvbXBvbmVudDtcbiAgICAgICAgICAgICAgICBjb25zdCBmaW5hbENvbXBpbGVyT3B0aW9ucyA9IGV4dGVuZChleHRlbmQoe1xuICAgICAgICAgICAgICAgICAgICBpc0N1c3RvbUVsZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgIGRlbGltaXRlcnNcbiAgICAgICAgICAgICAgICB9LCBjb21waWxlck9wdGlvbnMpLCBjb21wb25lbnRDb21waWxlck9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIENvbXBvbmVudC5yZW5kZXIgPSBjb21waWxlKHRlbXBsYXRlLCBmaW5hbENvbXBpbGVyT3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICBlbmRNZWFzdXJlKGluc3RhbmNlLCBgY29tcGlsZWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpbnN0YW5jZS5yZW5kZXIgPSAoQ29tcG9uZW50LnJlbmRlciB8fCBOT09QKTtcbiAgICAgICAgLy8gZm9yIHJ1bnRpbWUtY29tcGlsZWQgcmVuZGVyIGZ1bmN0aW9ucyB1c2luZyBgd2l0aGAgYmxvY2tzLCB0aGUgcmVuZGVyXG4gICAgICAgIC8vIHByb3h5IHVzZWQgbmVlZHMgYSBkaWZmZXJlbnQgYGhhc2AgaGFuZGxlciB3aGljaCBpcyBtb3JlIHBlcmZvcm1hbnQgYW5kXG4gICAgICAgIC8vIGFsc28gb25seSBhbGxvd3MgYSB3aGl0ZWxpc3Qgb2YgZ2xvYmFscyB0byBmYWxsdGhyb3VnaC5cbiAgICAgICAgaWYgKGluc3RhbGxXaXRoUHJveHkpIHtcbiAgICAgICAgICAgIGluc3RhbGxXaXRoUHJveHkoaW5zdGFuY2UpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIHN1cHBvcnQgZm9yIDIueCBvcHRpb25zXG4gICAgaWYgKF9fVlVFX09QVElPTlNfQVBJX18gJiYgIShmYWxzZSApKSB7XG4gICAgICAgIHNldEN1cnJlbnRJbnN0YW5jZShpbnN0YW5jZSk7XG4gICAgICAgIHBhdXNlVHJhY2tpbmcoKTtcbiAgICAgICAgYXBwbHlPcHRpb25zKGluc3RhbmNlKTtcbiAgICAgICAgcmVzZXRUcmFja2luZygpO1xuICAgICAgICB1bnNldEN1cnJlbnRJbnN0YW5jZSgpO1xuICAgIH1cbiAgICAvLyB3YXJuIG1pc3NpbmcgdGVtcGxhdGUvcmVuZGVyXG4gICAgLy8gdGhlIHJ1bnRpbWUgY29tcGlsYXRpb24gb2YgdGVtcGxhdGUgaW4gU1NSIGlzIGRvbmUgYnkgc2VydmVyLXJlbmRlclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIUNvbXBvbmVudC5yZW5kZXIgJiYgaW5zdGFuY2UucmVuZGVyID09PSBOT09QICYmICFpc1NTUikge1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKCFjb21waWxlICYmIENvbXBvbmVudC50ZW1wbGF0ZSkge1xuICAgICAgICAgICAgd2FybihgQ29tcG9uZW50IHByb3ZpZGVkIHRlbXBsYXRlIG9wdGlvbiBidXQgYCArXG4gICAgICAgICAgICAgICAgYHJ1bnRpbWUgY29tcGlsYXRpb24gaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJ1aWxkIG9mIFZ1ZS5gICtcbiAgICAgICAgICAgICAgICAoYCBDb25maWd1cmUgeW91ciBidW5kbGVyIHRvIGFsaWFzIFwidnVlXCIgdG8gXCJ2dWUvZGlzdC92dWUuZXNtLWJ1bmRsZXIuanNcIi5gXG4gICAgICAgICAgICAgICAgICAgICkgLyogc2hvdWxkIG5vdCBoYXBwZW4gKi8pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgd2FybihgQ29tcG9uZW50IGlzIG1pc3NpbmcgdGVtcGxhdGUgb3IgcmVuZGVyIGZ1bmN0aW9uLmApO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gY3JlYXRlQXR0cnNQcm94eShpbnN0YW5jZSkge1xuICAgIHJldHVybiBuZXcgUHJveHkoaW5zdGFuY2UuYXR0cnMsIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKVxuICAgICAgICA/IHtcbiAgICAgICAgICAgIGdldCh0YXJnZXQsIGtleSkge1xuICAgICAgICAgICAgICAgIG1hcmtBdHRyc0FjY2Vzc2VkKCk7XG4gICAgICAgICAgICAgICAgdHJhY2soaW5zdGFuY2UsIFwiZ2V0XCIgLyogVHJhY2tPcFR5cGVzLkdFVCAqLywgJyRhdHRycycpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXRba2V5XTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQoKSB7XG4gICAgICAgICAgICAgICAgd2Fybihgc2V0dXBDb250ZXh0LmF0dHJzIGlzIHJlYWRvbmx5LmApO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZWxldGVQcm9wZXJ0eSgpIHtcbiAgICAgICAgICAgICAgICB3YXJuKGBzZXR1cENvbnRleHQuYXR0cnMgaXMgcmVhZG9ubHkuYCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIDoge1xuICAgICAgICAgICAgZ2V0KHRhcmdldCwga2V5KSB7XG4gICAgICAgICAgICAgICAgdHJhY2soaW5zdGFuY2UsIFwiZ2V0XCIgLyogVHJhY2tPcFR5cGVzLkdFVCAqLywgJyRhdHRycycpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXRba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG59XG5mdW5jdGlvbiBjcmVhdGVTZXR1cENvbnRleHQoaW5zdGFuY2UpIHtcbiAgICBjb25zdCBleHBvc2UgPSBleHBvc2VkID0+IHtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBpbnN0YW5jZS5leHBvc2VkKSB7XG4gICAgICAgICAgICB3YXJuKGBleHBvc2UoKSBzaG91bGQgYmUgY2FsbGVkIG9ubHkgb25jZSBwZXIgc2V0dXAoKS5gKTtcbiAgICAgICAgfVxuICAgICAgICBpbnN0YW5jZS5leHBvc2VkID0gZXhwb3NlZCB8fCB7fTtcbiAgICB9O1xuICAgIGxldCBhdHRycztcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIC8vIFdlIHVzZSBnZXR0ZXJzIGluIGRldiBpbiBjYXNlIGxpYnMgbGlrZSB0ZXN0LXV0aWxzIG92ZXJ3cml0ZSBpbnN0YW5jZVxuICAgICAgICAvLyBwcm9wZXJ0aWVzIChvdmVyd3JpdGVzIHNob3VsZCBub3QgYmUgZG9uZSBpbiBwcm9kKVxuICAgICAgICByZXR1cm4gT2JqZWN0LmZyZWV6ZSh7XG4gICAgICAgICAgICBnZXQgYXR0cnMoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF0dHJzIHx8IChhdHRycyA9IGNyZWF0ZUF0dHJzUHJveHkoaW5zdGFuY2UpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXQgc2xvdHMoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNoYWxsb3dSZWFkb25seShpbnN0YW5jZS5zbG90cyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0IGVtaXQoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChldmVudCwgLi4uYXJncykgPT4gaW5zdGFuY2UuZW1pdChldmVudCwgLi4uYXJncyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXhwb3NlXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGdldCBhdHRycygpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXR0cnMgfHwgKGF0dHJzID0gY3JlYXRlQXR0cnNQcm94eShpbnN0YW5jZSkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNsb3RzOiBpbnN0YW5jZS5zbG90cyxcbiAgICAgICAgICAgIGVtaXQ6IGluc3RhbmNlLmVtaXQsXG4gICAgICAgICAgICBleHBvc2VcbiAgICAgICAgfTtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRFeHBvc2VQcm94eShpbnN0YW5jZSkge1xuICAgIGlmIChpbnN0YW5jZS5leHBvc2VkKSB7XG4gICAgICAgIHJldHVybiAoaW5zdGFuY2UuZXhwb3NlUHJveHkgfHxcbiAgICAgICAgICAgIChpbnN0YW5jZS5leHBvc2VQcm94eSA9IG5ldyBQcm94eShwcm94eVJlZnMobWFya1JhdyhpbnN0YW5jZS5leHBvc2VkKSksIHtcbiAgICAgICAgICAgICAgICBnZXQodGFyZ2V0LCBrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleSBpbiB0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXRba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChrZXkgaW4gcHVibGljUHJvcGVydGllc01hcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHB1YmxpY1Byb3BlcnRpZXNNYXBba2V5XShpbnN0YW5jZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGhhcyh0YXJnZXQsIGtleSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2V5IGluIHRhcmdldCB8fCBrZXkgaW4gcHVibGljUHJvcGVydGllc01hcDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSkpO1xuICAgIH1cbn1cbmNvbnN0IGNsYXNzaWZ5UkUgPSAvKD86XnxbLV9dKShcXHcpL2c7XG5jb25zdCBjbGFzc2lmeSA9IChzdHIpID0+IHN0ci5yZXBsYWNlKGNsYXNzaWZ5UkUsIGMgPT4gYy50b1VwcGVyQ2FzZSgpKS5yZXBsYWNlKC9bLV9dL2csICcnKTtcbmZ1bmN0aW9uIGdldENvbXBvbmVudE5hbWUoQ29tcG9uZW50LCBpbmNsdWRlSW5mZXJyZWQgPSB0cnVlKSB7XG4gICAgcmV0dXJuIGlzRnVuY3Rpb24oQ29tcG9uZW50KVxuICAgICAgICA/IENvbXBvbmVudC5kaXNwbGF5TmFtZSB8fCBDb21wb25lbnQubmFtZVxuICAgICAgICA6IENvbXBvbmVudC5uYW1lIHx8IChpbmNsdWRlSW5mZXJyZWQgJiYgQ29tcG9uZW50Ll9fbmFtZSk7XG59XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZnVuY3Rpb24gZm9ybWF0Q29tcG9uZW50TmFtZShpbnN0YW5jZSwgQ29tcG9uZW50LCBpc1Jvb3QgPSBmYWxzZSkge1xuICAgIGxldCBuYW1lID0gZ2V0Q29tcG9uZW50TmFtZShDb21wb25lbnQpO1xuICAgIGlmICghbmFtZSAmJiBDb21wb25lbnQuX19maWxlKSB7XG4gICAgICAgIGNvbnN0IG1hdGNoID0gQ29tcG9uZW50Ll9fZmlsZS5tYXRjaCgvKFteL1xcXFxdKylcXC5cXHcrJC8pO1xuICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICAgIG5hbWUgPSBtYXRjaFsxXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoIW5hbWUgJiYgaW5zdGFuY2UgJiYgaW5zdGFuY2UucGFyZW50KSB7XG4gICAgICAgIC8vIHRyeSB0byBpbmZlciB0aGUgbmFtZSBiYXNlZCBvbiByZXZlcnNlIHJlc29sdXRpb25cbiAgICAgICAgY29uc3QgaW5mZXJGcm9tUmVnaXN0cnkgPSAocmVnaXN0cnkpID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHJlZ2lzdHJ5KSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlZ2lzdHJ5W2tleV0gPT09IENvbXBvbmVudCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2V5O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgbmFtZSA9XG4gICAgICAgICAgICBpbmZlckZyb21SZWdpc3RyeShpbnN0YW5jZS5jb21wb25lbnRzIHx8XG4gICAgICAgICAgICAgICAgaW5zdGFuY2UucGFyZW50LnR5cGUuY29tcG9uZW50cykgfHwgaW5mZXJGcm9tUmVnaXN0cnkoaW5zdGFuY2UuYXBwQ29udGV4dC5jb21wb25lbnRzKTtcbiAgICB9XG4gICAgcmV0dXJuIG5hbWUgPyBjbGFzc2lmeShuYW1lKSA6IGlzUm9vdCA/IGBBcHBgIDogYEFub255bW91c2A7XG59XG5mdW5jdGlvbiBpc0NsYXNzQ29tcG9uZW50KHZhbHVlKSB7XG4gICAgcmV0dXJuIGlzRnVuY3Rpb24odmFsdWUpICYmICdfX3ZjY09wdHMnIGluIHZhbHVlO1xufVxuXG5jb25zdCBjb21wdXRlZCA9ICgoZ2V0dGVyT3JPcHRpb25zLCBkZWJ1Z09wdGlvbnMpID0+IHtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgcmV0dXJuIGNvbXB1dGVkJDEoZ2V0dGVyT3JPcHRpb25zLCBkZWJ1Z09wdGlvbnMsIGlzSW5TU1JDb21wb25lbnRTZXR1cCk7XG59KTtcblxuLy8gZGV2IG9ubHlcbmNvbnN0IHdhcm5SdW50aW1lVXNhZ2UgPSAobWV0aG9kKSA9PiB3YXJuKGAke21ldGhvZH0oKSBpcyBhIGNvbXBpbGVyLWhpbnQgaGVscGVyIHRoYXQgaXMgb25seSB1c2FibGUgaW5zaWRlIGAgK1xuICAgIGA8c2NyaXB0IHNldHVwPiBvZiBhIHNpbmdsZSBmaWxlIGNvbXBvbmVudC4gSXRzIGFyZ3VtZW50cyBzaG91bGQgYmUgYCArXG4gICAgYGNvbXBpbGVkIGF3YXkgYW5kIHBhc3NpbmcgaXQgYXQgcnVudGltZSBoYXMgbm8gZWZmZWN0LmApO1xuLy8gaW1wbGVtZW50YXRpb25cbmZ1bmN0aW9uIGRlZmluZVByb3BzKCkge1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgd2FyblJ1bnRpbWVVc2FnZShgZGVmaW5lUHJvcHNgKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG4vLyBpbXBsZW1lbnRhdGlvblxuZnVuY3Rpb24gZGVmaW5lRW1pdHMoKSB7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICB3YXJuUnVudGltZVVzYWdlKGBkZWZpbmVFbWl0c2ApO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbi8qKlxuICogVnVlIGA8c2NyaXB0IHNldHVwPmAgY29tcGlsZXIgbWFjcm8gZm9yIGRlY2xhcmluZyBhIGNvbXBvbmVudCdzIGV4cG9zZWRcbiAqIGluc3RhbmNlIHByb3BlcnRpZXMgd2hlbiBpdCBpcyBhY2Nlc3NlZCBieSBhIHBhcmVudCBjb21wb25lbnQgdmlhIHRlbXBsYXRlXG4gKiByZWZzLlxuICpcbiAqIGA8c2NyaXB0IHNldHVwPmAgY29tcG9uZW50cyBhcmUgY2xvc2VkIGJ5IGRlZmF1bHQgLSBpLmUuIHZhcmlhYmxlcyBpbnNpZGVcbiAqIHRoZSBgPHNjcmlwdCBzZXR1cD5gIHNjb3BlIGlzIG5vdCBleHBvc2VkIHRvIHBhcmVudCB1bmxlc3MgZXhwbGljaXRseSBleHBvc2VkXG4gKiB2aWEgYGRlZmluZUV4cG9zZWAuXG4gKlxuICogVGhpcyBpcyBvbmx5IHVzYWJsZSBpbnNpZGUgYDxzY3JpcHQgc2V0dXA+YCwgaXMgY29tcGlsZWQgYXdheSBpbiB0aGVcbiAqIG91dHB1dCBhbmQgc2hvdWxkICoqbm90KiogYmUgYWN0dWFsbHkgY2FsbGVkIGF0IHJ1bnRpbWUuXG4gKi9cbmZ1bmN0aW9uIGRlZmluZUV4cG9zZShleHBvc2VkKSB7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICB3YXJuUnVudGltZVVzYWdlKGBkZWZpbmVFeHBvc2VgKTtcbiAgICB9XG59XG4vKipcbiAqIFZ1ZSBgPHNjcmlwdCBzZXR1cD5gIGNvbXBpbGVyIG1hY3JvIGZvciBwcm92aWRpbmcgcHJvcHMgZGVmYXVsdCB2YWx1ZXMgd2hlblxuICogdXNpbmcgdHlwZS1iYXNlZCBgZGVmaW5lUHJvcHNgIGRlY2xhcmF0aW9uLlxuICpcbiAqIEV4YW1wbGUgdXNhZ2U6XG4gKiBgYGB0c1xuICogd2l0aERlZmF1bHRzKGRlZmluZVByb3BzPHtcbiAqICAgc2l6ZT86IG51bWJlclxuICogICBsYWJlbHM/OiBzdHJpbmdbXVxuICogfT4oKSwge1xuICogICBzaXplOiAzLFxuICogICBsYWJlbHM6ICgpID0+IFsnZGVmYXVsdCBsYWJlbCddXG4gKiB9KVxuICogYGBgXG4gKlxuICogVGhpcyBpcyBvbmx5IHVzYWJsZSBpbnNpZGUgYDxzY3JpcHQgc2V0dXA+YCwgaXMgY29tcGlsZWQgYXdheSBpbiB0aGUgb3V0cHV0XG4gKiBhbmQgc2hvdWxkICoqbm90KiogYmUgYWN0dWFsbHkgY2FsbGVkIGF0IHJ1bnRpbWUuXG4gKi9cbmZ1bmN0aW9uIHdpdGhEZWZhdWx0cyhwcm9wcywgZGVmYXVsdHMpIHtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIHdhcm5SdW50aW1lVXNhZ2UoYHdpdGhEZWZhdWx0c2ApO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIHVzZVNsb3RzKCkge1xuICAgIHJldHVybiBnZXRDb250ZXh0KCkuc2xvdHM7XG59XG5mdW5jdGlvbiB1c2VBdHRycygpIHtcbiAgICByZXR1cm4gZ2V0Q29udGV4dCgpLmF0dHJzO1xufVxuZnVuY3Rpb24gZ2V0Q29udGV4dCgpIHtcbiAgICBjb25zdCBpID0gZ2V0Q3VycmVudEluc3RhbmNlKCk7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhaSkge1xuICAgICAgICB3YXJuKGB1c2VDb250ZXh0KCkgY2FsbGVkIHdpdGhvdXQgYWN0aXZlIGluc3RhbmNlLmApO1xuICAgIH1cbiAgICByZXR1cm4gaS5zZXR1cENvbnRleHQgfHwgKGkuc2V0dXBDb250ZXh0ID0gY3JlYXRlU2V0dXBDb250ZXh0KGkpKTtcbn1cbi8qKlxuICogUnVudGltZSBoZWxwZXIgZm9yIG1lcmdpbmcgZGVmYXVsdCBkZWNsYXJhdGlvbnMuIEltcG9ydGVkIGJ5IGNvbXBpbGVkIGNvZGVcbiAqIG9ubHkuXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gbWVyZ2VEZWZhdWx0cyhyYXcsIGRlZmF1bHRzKSB7XG4gICAgY29uc3QgcHJvcHMgPSBpc0FycmF5KHJhdylcbiAgICAgICAgPyByYXcucmVkdWNlKChub3JtYWxpemVkLCBwKSA9PiAoKG5vcm1hbGl6ZWRbcF0gPSB7fSksIG5vcm1hbGl6ZWQpLCB7fSlcbiAgICAgICAgOiByYXc7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gZGVmYXVsdHMpIHtcbiAgICAgICAgY29uc3Qgb3B0ID0gcHJvcHNba2V5XTtcbiAgICAgICAgaWYgKG9wdCkge1xuICAgICAgICAgICAgaWYgKGlzQXJyYXkob3B0KSB8fCBpc0Z1bmN0aW9uKG9wdCkpIHtcbiAgICAgICAgICAgICAgICBwcm9wc1trZXldID0geyB0eXBlOiBvcHQsIGRlZmF1bHQ6IGRlZmF1bHRzW2tleV0gfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG9wdC5kZWZhdWx0ID0gZGVmYXVsdHNba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcHQgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHByb3BzW2tleV0gPSB7IGRlZmF1bHQ6IGRlZmF1bHRzW2tleV0gfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgIHdhcm4oYHByb3BzIGRlZmF1bHQga2V5IFwiJHtrZXl9XCIgaGFzIG5vIGNvcnJlc3BvbmRpbmcgZGVjbGFyYXRpb24uYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHByb3BzO1xufVxuLyoqXG4gKiBVc2VkIHRvIGNyZWF0ZSBhIHByb3h5IGZvciB0aGUgcmVzdCBlbGVtZW50IHdoZW4gZGVzdHJ1Y3R1cmluZyBwcm9wcyB3aXRoXG4gKiBkZWZpbmVQcm9wcygpLlxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVByb3BzUmVzdFByb3h5KHByb3BzLCBleGNsdWRlZEtleXMpIHtcbiAgICBjb25zdCByZXQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBwcm9wcykge1xuICAgICAgICBpZiAoIWV4Y2x1ZGVkS2V5cy5pbmNsdWRlcyhrZXkpKSB7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocmV0LCBrZXksIHtcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGdldDogKCkgPT4gcHJvcHNba2V5XVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn1cbi8qKlxuICogYDxzY3JpcHQgc2V0dXA+YCBoZWxwZXIgZm9yIHBlcnNpc3RpbmcgdGhlIGN1cnJlbnQgaW5zdGFuY2UgY29udGV4dCBvdmVyXG4gKiBhc3luYy9hd2FpdCBmbG93cy5cbiAqXG4gKiBgQHZ1ZS9jb21waWxlci1zZmNgIGNvbnZlcnRzIHRoZSBmb2xsb3dpbmc6XG4gKlxuICogYGBgdHNcbiAqIGNvbnN0IHggPSBhd2FpdCBmb28oKVxuICogYGBgXG4gKlxuICogaW50bzpcbiAqXG4gKiBgYGB0c1xuICogbGV0IF9fdGVtcCwgX19yZXN0b3JlXG4gKiBjb25zdCB4ID0gKChbX190ZW1wLCBfX3Jlc3RvcmVdID0gd2l0aEFzeW5jQ29udGV4dCgoKSA9PiBmb28oKSkpLF9fdGVtcD1hd2FpdCBfX3RlbXAsX19yZXN0b3JlKCksX190ZW1wKVxuICogYGBgXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gd2l0aEFzeW5jQ29udGV4dChnZXRBd2FpdGFibGUpIHtcbiAgICBjb25zdCBjdHggPSBnZXRDdXJyZW50SW5zdGFuY2UoKTtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFjdHgpIHtcbiAgICAgICAgd2Fybihgd2l0aEFzeW5jQ29udGV4dCBjYWxsZWQgd2l0aG91dCBhY3RpdmUgY3VycmVudCBpbnN0YW5jZS4gYCArXG4gICAgICAgICAgICBgVGhpcyBpcyBsaWtlbHkgYSBidWcuYCk7XG4gICAgfVxuICAgIGxldCBhd2FpdGFibGUgPSBnZXRBd2FpdGFibGUoKTtcbiAgICB1bnNldEN1cnJlbnRJbnN0YW5jZSgpO1xuICAgIGlmIChpc1Byb21pc2UoYXdhaXRhYmxlKSkge1xuICAgICAgICBhd2FpdGFibGUgPSBhd2FpdGFibGUuY2F0Y2goZSA9PiB7XG4gICAgICAgICAgICBzZXRDdXJyZW50SW5zdGFuY2UoY3R4KTtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gW2F3YWl0YWJsZSwgKCkgPT4gc2V0Q3VycmVudEluc3RhbmNlKGN0eCldO1xufVxuXG4vLyBBY3R1YWwgaW1wbGVtZW50YXRpb25cbmZ1bmN0aW9uIGgodHlwZSwgcHJvcHNPckNoaWxkcmVuLCBjaGlsZHJlbikge1xuICAgIGNvbnN0IGwgPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIGlmIChsID09PSAyKSB7XG4gICAgICAgIGlmIChpc09iamVjdChwcm9wc09yQ2hpbGRyZW4pICYmICFpc0FycmF5KHByb3BzT3JDaGlsZHJlbikpIHtcbiAgICAgICAgICAgIC8vIHNpbmdsZSB2bm9kZSB3aXRob3V0IHByb3BzXG4gICAgICAgICAgICBpZiAoaXNWTm9kZShwcm9wc09yQ2hpbGRyZW4pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVZOb2RlKHR5cGUsIG51bGwsIFtwcm9wc09yQ2hpbGRyZW5dKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHByb3BzIHdpdGhvdXQgY2hpbGRyZW5cbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVWTm9kZSh0eXBlLCBwcm9wc09yQ2hpbGRyZW4pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gb21pdCBwcm9wc1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVZOb2RlKHR5cGUsIG51bGwsIHByb3BzT3JDaGlsZHJlbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmIChsID4gMykge1xuICAgICAgICAgICAgY2hpbGRyZW4gPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09IDMgJiYgaXNWTm9kZShjaGlsZHJlbikpIHtcbiAgICAgICAgICAgIGNoaWxkcmVuID0gW2NoaWxkcmVuXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY3JlYXRlVk5vZGUodHlwZSwgcHJvcHNPckNoaWxkcmVuLCBjaGlsZHJlbik7XG4gICAgfVxufVxuXG5jb25zdCBzc3JDb250ZXh0S2V5ID0gU3ltYm9sKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/IGBzc3JDb250ZXh0YCA6IGBgKTtcbmNvbnN0IHVzZVNTUkNvbnRleHQgPSAoKSA9PiB7XG4gICAge1xuICAgICAgICBjb25zdCBjdHggPSBpbmplY3Qoc3NyQ29udGV4dEtleSk7XG4gICAgICAgIGlmICghY3R4KSB7XG4gICAgICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcbiAgICAgICAgICAgICAgICB3YXJuKGBTZXJ2ZXIgcmVuZGVyaW5nIGNvbnRleHQgbm90IHByb3ZpZGVkLiBNYWtlIHN1cmUgdG8gb25seSBjYWxsIGAgK1xuICAgICAgICAgICAgICAgICAgICBgdXNlU1NSQ29udGV4dCgpIGNvbmRpdGlvbmFsbHkgaW4gdGhlIHNlcnZlciBidWlsZC5gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY3R4O1xuICAgIH1cbn07XG5cbmZ1bmN0aW9uIGlzU2hhbGxvdyh2YWx1ZSkge1xuICAgIHJldHVybiAhISh2YWx1ZSAmJiB2YWx1ZVtcIl9fdl9pc1NoYWxsb3dcIiAvKiBSZWFjdGl2ZUZsYWdzLklTX1NIQUxMT1cgKi9dKTtcbn1cblxuZnVuY3Rpb24gaW5pdEN1c3RvbUZvcm1hdHRlcigpIHtcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1yZXN0cmljdGVkLWdsb2JhbHMgKi9cbiAgICBpZiAoIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCB0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHZ1ZVN0eWxlID0geyBzdHlsZTogJ2NvbG9yOiMzYmE3NzYnIH07XG4gICAgY29uc3QgbnVtYmVyU3R5bGUgPSB7IHN0eWxlOiAnY29sb3I6IzBiMWJjOScgfTtcbiAgICBjb25zdCBzdHJpbmdTdHlsZSA9IHsgc3R5bGU6ICdjb2xvcjojYjYyZTI0JyB9O1xuICAgIGNvbnN0IGtleXdvcmRTdHlsZSA9IHsgc3R5bGU6ICdjb2xvcjojOWQyODhjJyB9O1xuICAgIC8vIGN1c3RvbSBmb3JtYXR0ZXIgZm9yIENocm9tZVxuICAgIC8vIGh0dHBzOi8vd3d3Lm1hdHR6ZXVuZXJ0LmNvbS8yMDE2LzAyLzE5L2N1c3RvbS1jaHJvbWUtZGV2dG9vbHMtb2JqZWN0LWZvcm1hdHRlcnMuaHRtbFxuICAgIGNvbnN0IGZvcm1hdHRlciA9IHtcbiAgICAgICAgaGVhZGVyKG9iaikge1xuICAgICAgICAgICAgLy8gVE9ETyBhbHNvIGZvcm1hdCBDb21wb25lbnRQdWJsaWNJbnN0YW5jZSAmIGN0eC5zbG90cy9hdHRycyBpbiBzZXR1cFxuICAgICAgICAgICAgaWYgKCFpc09iamVjdChvYmopKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob2JqLl9faXNWdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWydkaXYnLCB2dWVTdHlsZSwgYFZ1ZUluc3RhbmNlYF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpc1JlZihvYmopKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHt9LFxuICAgICAgICAgICAgICAgICAgICBbJ3NwYW4nLCB2dWVTdHlsZSwgZ2VuUmVmRmxhZyhvYmopXSxcbiAgICAgICAgICAgICAgICAgICAgJzwnLFxuICAgICAgICAgICAgICAgICAgICBmb3JtYXRWYWx1ZShvYmoudmFsdWUpLFxuICAgICAgICAgICAgICAgICAgICBgPmBcbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNSZWFjdGl2ZShvYmopKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHt9LFxuICAgICAgICAgICAgICAgICAgICBbJ3NwYW4nLCB2dWVTdHlsZSwgaXNTaGFsbG93KG9iaikgPyAnU2hhbGxvd1JlYWN0aXZlJyA6ICdSZWFjdGl2ZSddLFxuICAgICAgICAgICAgICAgICAgICAnPCcsXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdFZhbHVlKG9iaiksXG4gICAgICAgICAgICAgICAgICAgIGA+JHtpc1JlYWRvbmx5KG9iaikgPyBgIChyZWFkb25seSlgIDogYGB9YFxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpc1JlYWRvbmx5KG9iaikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAge30sXG4gICAgICAgICAgICAgICAgICAgIFsnc3BhbicsIHZ1ZVN0eWxlLCBpc1NoYWxsb3cob2JqKSA/ICdTaGFsbG93UmVhZG9ubHknIDogJ1JlYWRvbmx5J10sXG4gICAgICAgICAgICAgICAgICAgICc8JyxcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0VmFsdWUob2JqKSxcbiAgICAgICAgICAgICAgICAgICAgJz4nXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9LFxuICAgICAgICBoYXNCb2R5KG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIG9iaiAmJiBvYmouX19pc1Z1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgYm9keShvYmopIHtcbiAgICAgICAgICAgIGlmIChvYmogJiYgb2JqLl9faXNWdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAge30sXG4gICAgICAgICAgICAgICAgICAgIC4uLmZvcm1hdEluc3RhbmNlKG9iai4kKVxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGZ1bmN0aW9uIGZvcm1hdEluc3RhbmNlKGluc3RhbmNlKSB7XG4gICAgICAgIGNvbnN0IGJsb2NrcyA9IFtdO1xuICAgICAgICBpZiAoaW5zdGFuY2UudHlwZS5wcm9wcyAmJiBpbnN0YW5jZS5wcm9wcykge1xuICAgICAgICAgICAgYmxvY2tzLnB1c2goY3JlYXRlSW5zdGFuY2VCbG9jaygncHJvcHMnLCB0b1JhdyhpbnN0YW5jZS5wcm9wcykpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5zdGFuY2Uuc2V0dXBTdGF0ZSAhPT0gRU1QVFlfT0JKKSB7XG4gICAgICAgICAgICBibG9ja3MucHVzaChjcmVhdGVJbnN0YW5jZUJsb2NrKCdzZXR1cCcsIGluc3RhbmNlLnNldHVwU3RhdGUpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5zdGFuY2UuZGF0YSAhPT0gRU1QVFlfT0JKKSB7XG4gICAgICAgICAgICBibG9ja3MucHVzaChjcmVhdGVJbnN0YW5jZUJsb2NrKCdkYXRhJywgdG9SYXcoaW5zdGFuY2UuZGF0YSkpKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb21wdXRlZCA9IGV4dHJhY3RLZXlzKGluc3RhbmNlLCAnY29tcHV0ZWQnKTtcbiAgICAgICAgaWYgKGNvbXB1dGVkKSB7XG4gICAgICAgICAgICBibG9ja3MucHVzaChjcmVhdGVJbnN0YW5jZUJsb2NrKCdjb21wdXRlZCcsIGNvbXB1dGVkKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaW5qZWN0ZWQgPSBleHRyYWN0S2V5cyhpbnN0YW5jZSwgJ2luamVjdCcpO1xuICAgICAgICBpZiAoaW5qZWN0ZWQpIHtcbiAgICAgICAgICAgIGJsb2Nrcy5wdXNoKGNyZWF0ZUluc3RhbmNlQmxvY2soJ2luamVjdGVkJywgaW5qZWN0ZWQpKTtcbiAgICAgICAgfVxuICAgICAgICBibG9ja3MucHVzaChbXG4gICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgIHt9LFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICdzcGFuJyxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiBrZXl3b3JkU3R5bGUuc3R5bGUgKyAnO29wYWNpdHk6MC42NidcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICckIChpbnRlcm5hbCk6ICdcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBbJ29iamVjdCcsIHsgb2JqZWN0OiBpbnN0YW5jZSB9XVxuICAgICAgICBdKTtcbiAgICAgICAgcmV0dXJuIGJsb2NrcztcbiAgICB9XG4gICAgZnVuY3Rpb24gY3JlYXRlSW5zdGFuY2VCbG9jayh0eXBlLCB0YXJnZXQpIHtcbiAgICAgICAgdGFyZ2V0ID0gZXh0ZW5kKHt9LCB0YXJnZXQpO1xuICAgICAgICBpZiAoIU9iamVjdC5rZXlzKHRhcmdldCkubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gWydzcGFuJywge31dO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgIHsgc3R5bGU6ICdsaW5lLWhlaWdodDoxLjI1ZW07bWFyZ2luLWJvdHRvbTowLjZlbScgfSxcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiAnY29sb3I6IzQ3NjU4MidcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHR5cGVcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBzdHlsZTogJ3BhZGRpbmctbGVmdDoxLjI1ZW0nXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAuLi5PYmplY3Qua2V5cyh0YXJnZXQpLm1hcChrZXkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7fSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFsnc3BhbicsIGtleXdvcmRTdHlsZSwga2V5ICsgJzogJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXRWYWx1ZSh0YXJnZXRba2V5XSwgZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgXTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZm9ybWF0VmFsdWUodiwgYXNSYXcgPSB0cnVlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdiA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHJldHVybiBbJ3NwYW4nLCBudW1iZXJTdHlsZSwgdl07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHYgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZXR1cm4gWydzcGFuJywgc3RyaW5nU3R5bGUsIEpTT04uc3RyaW5naWZ5KHYpXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgdiA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICByZXR1cm4gWydzcGFuJywga2V5d29yZFN0eWxlLCB2XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc09iamVjdCh2KSkge1xuICAgICAgICAgICAgcmV0dXJuIFsnb2JqZWN0JywgeyBvYmplY3Q6IGFzUmF3ID8gdG9SYXcodikgOiB2IH1dO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFsnc3BhbicsIHN0cmluZ1N0eWxlLCBTdHJpbmcodildO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGV4dHJhY3RLZXlzKGluc3RhbmNlLCB0eXBlKSB7XG4gICAgICAgIGNvbnN0IENvbXAgPSBpbnN0YW5jZS50eXBlO1xuICAgICAgICBpZiAoaXNGdW5jdGlvbihDb21wKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGV4dHJhY3RlZCA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBpbnN0YW5jZS5jdHgpIHtcbiAgICAgICAgICAgIGlmIChpc0tleU9mVHlwZShDb21wLCBrZXksIHR5cGUpKSB7XG4gICAgICAgICAgICAgICAgZXh0cmFjdGVkW2tleV0gPSBpbnN0YW5jZS5jdHhba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZXh0cmFjdGVkO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpc0tleU9mVHlwZShDb21wLCBrZXksIHR5cGUpIHtcbiAgICAgICAgY29uc3Qgb3B0cyA9IENvbXBbdHlwZV07XG4gICAgICAgIGlmICgoaXNBcnJheShvcHRzKSAmJiBvcHRzLmluY2x1ZGVzKGtleSkpIHx8XG4gICAgICAgICAgICAoaXNPYmplY3Qob3B0cykgJiYga2V5IGluIG9wdHMpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoQ29tcC5leHRlbmRzICYmIGlzS2V5T2ZUeXBlKENvbXAuZXh0ZW5kcywga2V5LCB0eXBlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKENvbXAubWl4aW5zICYmIENvbXAubWl4aW5zLnNvbWUobSA9PiBpc0tleU9mVHlwZShtLCBrZXksIHR5cGUpKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gZ2VuUmVmRmxhZyh2KSB7XG4gICAgICAgIGlmIChpc1NoYWxsb3codikpIHtcbiAgICAgICAgICAgIHJldHVybiBgU2hhbGxvd1JlZmA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHYuZWZmZWN0KSB7XG4gICAgICAgICAgICByZXR1cm4gYENvbXB1dGVkUmVmYDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYFJlZmA7XG4gICAgfVxuICAgIGlmICh3aW5kb3cuZGV2dG9vbHNGb3JtYXR0ZXJzKSB7XG4gICAgICAgIHdpbmRvdy5kZXZ0b29sc0Zvcm1hdHRlcnMucHVzaChmb3JtYXR0ZXIpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgd2luZG93LmRldnRvb2xzRm9ybWF0dGVycyA9IFtmb3JtYXR0ZXJdO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gd2l0aE1lbW8obWVtbywgcmVuZGVyLCBjYWNoZSwgaW5kZXgpIHtcbiAgICBjb25zdCBjYWNoZWQgPSBjYWNoZVtpbmRleF07XG4gICAgaWYgKGNhY2hlZCAmJiBpc01lbW9TYW1lKGNhY2hlZCwgbWVtbykpIHtcbiAgICAgICAgcmV0dXJuIGNhY2hlZDtcbiAgICB9XG4gICAgY29uc3QgcmV0ID0gcmVuZGVyKCk7XG4gICAgLy8gc2hhbGxvdyBjbG9uZVxuICAgIHJldC5tZW1vID0gbWVtby5zbGljZSgpO1xuICAgIHJldHVybiAoY2FjaGVbaW5kZXhdID0gcmV0KTtcbn1cbmZ1bmN0aW9uIGlzTWVtb1NhbWUoY2FjaGVkLCBtZW1vKSB7XG4gICAgY29uc3QgcHJldiA9IGNhY2hlZC5tZW1vO1xuICAgIGlmIChwcmV2Lmxlbmd0aCAhPSBtZW1vLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJldi5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoaGFzQ2hhbmdlZChwcmV2W2ldLCBtZW1vW2ldKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIG1ha2Ugc3VyZSB0byBsZXQgcGFyZW50IGJsb2NrIHRyYWNrIGl0IHdoZW4gcmV0dXJuaW5nIGNhY2hlZFxuICAgIGlmIChpc0Jsb2NrVHJlZUVuYWJsZWQgPiAwICYmIGN1cnJlbnRCbG9jaykge1xuICAgICAgICBjdXJyZW50QmxvY2sucHVzaChjYWNoZWQpO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuLy8gQ29yZSBBUEkgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5jb25zdCB2ZXJzaW9uID0gXCIzLjIuNDVcIjtcbmNvbnN0IF9zc3JVdGlscyA9IHtcbiAgICBjcmVhdGVDb21wb25lbnRJbnN0YW5jZSxcbiAgICBzZXR1cENvbXBvbmVudCxcbiAgICByZW5kZXJDb21wb25lbnRSb290LFxuICAgIHNldEN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSxcbiAgICBpc1ZOb2RlLFxuICAgIG5vcm1hbGl6ZVZOb2RlXG59O1xuLyoqXG4gKiBTU1IgdXRpbHMgZm9yIFxcQHZ1ZS9zZXJ2ZXItcmVuZGVyZXIuIE9ubHkgZXhwb3NlZCBpbiBzc3ItcG9zc2libGUgYnVpbGRzLlxuICogQGludGVybmFsXG4gKi9cbmNvbnN0IHNzclV0aWxzID0gKF9zc3JVdGlscyApO1xuLyoqXG4gKiBAaW50ZXJuYWwgb25seSBleHBvc2VkIGluIGNvbXBhdCBidWlsZHNcbiAqL1xuY29uc3QgcmVzb2x2ZUZpbHRlciA9IG51bGw7XG4vKipcbiAqIEBpbnRlcm5hbCBvbmx5IGV4cG9zZWQgaW4gY29tcGF0IGJ1aWxkcy5cbiAqL1xuY29uc3QgY29tcGF0VXRpbHMgPSAobnVsbCk7XG5cbmV4cG9ydCB7IEJhc2VUcmFuc2l0aW9uLCBDb21tZW50LCBGcmFnbWVudCwgS2VlcEFsaXZlLCBTdGF0aWMsIFN1c3BlbnNlLCBUZWxlcG9ydCwgVGV4dCwgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcsIGNhbGxXaXRoRXJyb3JIYW5kbGluZywgY2xvbmVWTm9kZSwgY29tcGF0VXRpbHMsIGNvbXB1dGVkLCBjcmVhdGVCbG9jaywgY3JlYXRlQ29tbWVudFZOb2RlLCBjcmVhdGVFbGVtZW50QmxvY2ssIGNyZWF0ZUJhc2VWTm9kZSBhcyBjcmVhdGVFbGVtZW50Vk5vZGUsIGNyZWF0ZUh5ZHJhdGlvblJlbmRlcmVyLCBjcmVhdGVQcm9wc1Jlc3RQcm94eSwgY3JlYXRlUmVuZGVyZXIsIGNyZWF0ZVNsb3RzLCBjcmVhdGVTdGF0aWNWTm9kZSwgY3JlYXRlVGV4dFZOb2RlLCBjcmVhdGVWTm9kZSwgZGVmaW5lQXN5bmNDb21wb25lbnQsIGRlZmluZUNvbXBvbmVudCwgZGVmaW5lRW1pdHMsIGRlZmluZUV4cG9zZSwgZGVmaW5lUHJvcHMsIGRldnRvb2xzLCBnZXRDdXJyZW50SW5zdGFuY2UsIGdldFRyYW5zaXRpb25SYXdDaGlsZHJlbiwgZ3VhcmRSZWFjdGl2ZVByb3BzLCBoLCBoYW5kbGVFcnJvciwgaW5pdEN1c3RvbUZvcm1hdHRlciwgaW5qZWN0LCBpc01lbW9TYW1lLCBpc1J1bnRpbWVPbmx5LCBpc1ZOb2RlLCBtZXJnZURlZmF1bHRzLCBtZXJnZVByb3BzLCBuZXh0VGljaywgb25BY3RpdmF0ZWQsIG9uQmVmb3JlTW91bnQsIG9uQmVmb3JlVW5tb3VudCwgb25CZWZvcmVVcGRhdGUsIG9uRGVhY3RpdmF0ZWQsIG9uRXJyb3JDYXB0dXJlZCwgb25Nb3VudGVkLCBvblJlbmRlclRyYWNrZWQsIG9uUmVuZGVyVHJpZ2dlcmVkLCBvblNlcnZlclByZWZldGNoLCBvblVubW91bnRlZCwgb25VcGRhdGVkLCBvcGVuQmxvY2ssIHBvcFNjb3BlSWQsIHByb3ZpZGUsIHB1c2hTY29wZUlkLCBxdWV1ZVBvc3RGbHVzaENiLCByZWdpc3RlclJ1bnRpbWVDb21waWxlciwgcmVuZGVyTGlzdCwgcmVuZGVyU2xvdCwgcmVzb2x2ZUNvbXBvbmVudCwgcmVzb2x2ZURpcmVjdGl2ZSwgcmVzb2x2ZUR5bmFtaWNDb21wb25lbnQsIHJlc29sdmVGaWx0ZXIsIHJlc29sdmVUcmFuc2l0aW9uSG9va3MsIHNldEJsb2NrVHJhY2tpbmcsIHNldERldnRvb2xzSG9vaywgc2V0VHJhbnNpdGlvbkhvb2tzLCBzc3JDb250ZXh0S2V5LCBzc3JVdGlscywgdG9IYW5kbGVycywgdHJhbnNmb3JtVk5vZGVBcmdzLCB1c2VBdHRycywgdXNlU1NSQ29udGV4dCwgdXNlU2xvdHMsIHVzZVRyYW5zaXRpb25TdGF0ZSwgdmVyc2lvbiwgd2Fybiwgd2F0Y2gsIHdhdGNoRWZmZWN0LCB3YXRjaFBvc3RFZmZlY3QsIHdhdGNoU3luY0VmZmVjdCwgd2l0aEFzeW5jQ29udGV4dCwgd2l0aEN0eCwgd2l0aERlZmF1bHRzLCB3aXRoRGlyZWN0aXZlcywgd2l0aE1lbW8sIHdpdGhTY29wZUlkIH07XG4iLCJpbXBvcnQgeyB3YXJuLCBjYW1lbGl6ZSwgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcsIGRlZmluZUNvbXBvbmVudCwgbmV4dFRpY2ssIGNyZWF0ZVZOb2RlLCBnZXRDdXJyZW50SW5zdGFuY2UsIHdhdGNoUG9zdEVmZmVjdCwgb25Nb3VudGVkLCBvblVubW91bnRlZCwgRnJhZ21lbnQsIFN0YXRpYywgaCwgQmFzZVRyYW5zaXRpb24sIHVzZVRyYW5zaXRpb25TdGF0ZSwgb25VcGRhdGVkLCB0b1JhdywgZ2V0VHJhbnNpdGlvblJhd0NoaWxkcmVuLCBzZXRUcmFuc2l0aW9uSG9va3MsIHJlc29sdmVUcmFuc2l0aW9uSG9va3MsIGNyZWF0ZVJlbmRlcmVyLCBpc1J1bnRpbWVPbmx5LCBjcmVhdGVIeWRyYXRpb25SZW5kZXJlciB9IGZyb20gJ0B2dWUvcnVudGltZS1jb3JlJztcbmV4cG9ydCAqIGZyb20gJ0B2dWUvcnVudGltZS1jb3JlJztcbmltcG9ydCB7IGlzU3RyaW5nLCBpc0FycmF5LCBoeXBoZW5hdGUsIGNhcGl0YWxpemUsIGlzU3BlY2lhbEJvb2xlYW5BdHRyLCBpbmNsdWRlQm9vbGVhbkF0dHIsIGlzT24sIGlzTW9kZWxMaXN0ZW5lciwgaXNGdW5jdGlvbiwgY2FtZWxpemUgYXMgY2FtZWxpemUkMSwgdG9OdW1iZXIsIGV4dGVuZCwgRU1QVFlfT0JKLCBpc09iamVjdCwgaW52b2tlQXJyYXlGbnMsIGxvb3NlSW5kZXhPZiwgaXNTZXQsIGxvb3NlRXF1YWwsIGlzSFRNTFRhZywgaXNTVkdUYWcgfSBmcm9tICdAdnVlL3NoYXJlZCc7XG5cbmNvbnN0IHN2Z05TID0gJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJztcbmNvbnN0IGRvYyA9ICh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnID8gZG9jdW1lbnQgOiBudWxsKTtcbmNvbnN0IHRlbXBsYXRlQ29udGFpbmVyID0gZG9jICYmIC8qI19fUFVSRV9fKi8gZG9jLmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7XG5jb25zdCBub2RlT3BzID0ge1xuICAgIGluc2VydDogKGNoaWxkLCBwYXJlbnQsIGFuY2hvcikgPT4ge1xuICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKGNoaWxkLCBhbmNob3IgfHwgbnVsbCk7XG4gICAgfSxcbiAgICByZW1vdmU6IGNoaWxkID0+IHtcbiAgICAgICAgY29uc3QgcGFyZW50ID0gY2hpbGQucGFyZW50Tm9kZTtcbiAgICAgICAgaWYgKHBhcmVudCkge1xuICAgICAgICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKGNoaWxkKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgY3JlYXRlRWxlbWVudDogKHRhZywgaXNTVkcsIGlzLCBwcm9wcykgPT4ge1xuICAgICAgICBjb25zdCBlbCA9IGlzU1ZHXG4gICAgICAgICAgICA/IGRvYy5jcmVhdGVFbGVtZW50TlMoc3ZnTlMsIHRhZylcbiAgICAgICAgICAgIDogZG9jLmNyZWF0ZUVsZW1lbnQodGFnLCBpcyA/IHsgaXMgfSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIGlmICh0YWcgPT09ICdzZWxlY3QnICYmIHByb3BzICYmIHByb3BzLm11bHRpcGxlICE9IG51bGwpIHtcbiAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnbXVsdGlwbGUnLCBwcm9wcy5tdWx0aXBsZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVsO1xuICAgIH0sXG4gICAgY3JlYXRlVGV4dDogdGV4dCA9PiBkb2MuY3JlYXRlVGV4dE5vZGUodGV4dCksXG4gICAgY3JlYXRlQ29tbWVudDogdGV4dCA9PiBkb2MuY3JlYXRlQ29tbWVudCh0ZXh0KSxcbiAgICBzZXRUZXh0OiAobm9kZSwgdGV4dCkgPT4ge1xuICAgICAgICBub2RlLm5vZGVWYWx1ZSA9IHRleHQ7XG4gICAgfSxcbiAgICBzZXRFbGVtZW50VGV4dDogKGVsLCB0ZXh0KSA9PiB7XG4gICAgICAgIGVsLnRleHRDb250ZW50ID0gdGV4dDtcbiAgICB9LFxuICAgIHBhcmVudE5vZGU6IG5vZGUgPT4gbm9kZS5wYXJlbnROb2RlLFxuICAgIG5leHRTaWJsaW5nOiBub2RlID0+IG5vZGUubmV4dFNpYmxpbmcsXG4gICAgcXVlcnlTZWxlY3Rvcjogc2VsZWN0b3IgPT4gZG9jLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpLFxuICAgIHNldFNjb3BlSWQoZWwsIGlkKSB7XG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZShpZCwgJycpO1xuICAgIH0sXG4gICAgLy8gX19VTlNBRkVfX1xuICAgIC8vIFJlYXNvbjogaW5uZXJIVE1MLlxuICAgIC8vIFN0YXRpYyBjb250ZW50IGhlcmUgY2FuIG9ubHkgY29tZSBmcm9tIGNvbXBpbGVkIHRlbXBsYXRlcy5cbiAgICAvLyBBcyBsb25nIGFzIHRoZSB1c2VyIG9ubHkgdXNlcyB0cnVzdGVkIHRlbXBsYXRlcywgdGhpcyBpcyBzYWZlLlxuICAgIGluc2VydFN0YXRpY0NvbnRlbnQoY29udGVudCwgcGFyZW50LCBhbmNob3IsIGlzU1ZHLCBzdGFydCwgZW5kKSB7XG4gICAgICAgIC8vIDxwYXJlbnQ+IGJlZm9yZSB8IGZpcnN0IC4uLiBsYXN0IHwgYW5jaG9yIDwvcGFyZW50PlxuICAgICAgICBjb25zdCBiZWZvcmUgPSBhbmNob3IgPyBhbmNob3IucHJldmlvdXNTaWJsaW5nIDogcGFyZW50Lmxhc3RDaGlsZDtcbiAgICAgICAgLy8gIzUzMDggY2FuIG9ubHkgdGFrZSBjYWNoZWQgcGF0aCBpZjpcbiAgICAgICAgLy8gLSBoYXMgYSBzaW5nbGUgcm9vdCBub2RlXG4gICAgICAgIC8vIC0gbmV4dFNpYmxpbmcgaW5mbyBpcyBzdGlsbCBhdmFpbGFibGVcbiAgICAgICAgaWYgKHN0YXJ0ICYmIChzdGFydCA9PT0gZW5kIHx8IHN0YXJ0Lm5leHRTaWJsaW5nKSkge1xuICAgICAgICAgICAgLy8gY2FjaGVkXG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUoc3RhcnQuY2xvbmVOb2RlKHRydWUpLCBhbmNob3IpO1xuICAgICAgICAgICAgICAgIGlmIChzdGFydCA9PT0gZW5kIHx8ICEoc3RhcnQgPSBzdGFydC5uZXh0U2libGluZykpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gZnJlc2ggaW5zZXJ0XG4gICAgICAgICAgICB0ZW1wbGF0ZUNvbnRhaW5lci5pbm5lckhUTUwgPSBpc1NWRyA/IGA8c3ZnPiR7Y29udGVudH08L3N2Zz5gIDogY29udGVudDtcbiAgICAgICAgICAgIGNvbnN0IHRlbXBsYXRlID0gdGVtcGxhdGVDb250YWluZXIuY29udGVudDtcbiAgICAgICAgICAgIGlmIChpc1NWRykge1xuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBvdXRlciBzdmcgd3JhcHBlclxuICAgICAgICAgICAgICAgIGNvbnN0IHdyYXBwZXIgPSB0ZW1wbGF0ZS5maXJzdENoaWxkO1xuICAgICAgICAgICAgICAgIHdoaWxlICh3cmFwcGVyLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGUuYXBwZW5kQ2hpbGQod3JhcHBlci5maXJzdENoaWxkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGVtcGxhdGUucmVtb3ZlQ2hpbGQod3JhcHBlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKHRlbXBsYXRlLCBhbmNob3IpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAvLyBmaXJzdFxuICAgICAgICAgICAgYmVmb3JlID8gYmVmb3JlLm5leHRTaWJsaW5nIDogcGFyZW50LmZpcnN0Q2hpbGQsXG4gICAgICAgICAgICAvLyBsYXN0XG4gICAgICAgICAgICBhbmNob3IgPyBhbmNob3IucHJldmlvdXNTaWJsaW5nIDogcGFyZW50Lmxhc3RDaGlsZFxuICAgICAgICBdO1xuICAgIH1cbn07XG5cbi8vIGNvbXBpbGVyIHNob3VsZCBub3JtYWxpemUgY2xhc3MgKyA6Y2xhc3MgYmluZGluZ3Mgb24gdGhlIHNhbWUgZWxlbWVudFxuLy8gaW50byBhIHNpbmdsZSBiaW5kaW5nIFsnc3RhdGljQ2xhc3MnLCBkeW5hbWljXVxuZnVuY3Rpb24gcGF0Y2hDbGFzcyhlbCwgdmFsdWUsIGlzU1ZHKSB7XG4gICAgLy8gZGlyZWN0bHkgc2V0dGluZyBjbGFzc05hbWUgc2hvdWxkIGJlIGZhc3RlciB0aGFuIHNldEF0dHJpYnV0ZSBpbiB0aGVvcnlcbiAgICAvLyBpZiB0aGlzIGlzIGFuIGVsZW1lbnQgZHVyaW5nIGEgdHJhbnNpdGlvbiwgdGFrZSB0aGUgdGVtcG9yYXJ5IHRyYW5zaXRpb25cbiAgICAvLyBjbGFzc2VzIGludG8gYWNjb3VudC5cbiAgICBjb25zdCB0cmFuc2l0aW9uQ2xhc3NlcyA9IGVsLl92dGM7XG4gICAgaWYgKHRyYW5zaXRpb25DbGFzc2VzKSB7XG4gICAgICAgIHZhbHVlID0gKHZhbHVlID8gW3ZhbHVlLCAuLi50cmFuc2l0aW9uQ2xhc3Nlc10gOiBbLi4udHJhbnNpdGlvbkNsYXNzZXNdKS5qb2luKCcgJyk7XG4gICAgfVxuICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnY2xhc3MnKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNTVkcpIHtcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdjbGFzcycsIHZhbHVlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGVsLmNsYXNzTmFtZSA9IHZhbHVlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gcGF0Y2hTdHlsZShlbCwgcHJldiwgbmV4dCkge1xuICAgIGNvbnN0IHN0eWxlID0gZWwuc3R5bGU7XG4gICAgY29uc3QgaXNDc3NTdHJpbmcgPSBpc1N0cmluZyhuZXh0KTtcbiAgICBpZiAobmV4dCAmJiAhaXNDc3NTdHJpbmcpIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbmV4dCkge1xuICAgICAgICAgICAgc2V0U3R5bGUoc3R5bGUsIGtleSwgbmV4dFtrZXldKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJldiAmJiAhaXNTdHJpbmcocHJldikpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHByZXYpIHtcbiAgICAgICAgICAgICAgICBpZiAobmV4dFtrZXldID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0U3R5bGUoc3R5bGUsIGtleSwgJycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgY3VycmVudERpc3BsYXkgPSBzdHlsZS5kaXNwbGF5O1xuICAgICAgICBpZiAoaXNDc3NTdHJpbmcpIHtcbiAgICAgICAgICAgIGlmIChwcmV2ICE9PSBuZXh0KSB7XG4gICAgICAgICAgICAgICAgc3R5bGUuY3NzVGV4dCA9IG5leHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocHJldikge1xuICAgICAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGluZGljYXRlcyB0aGF0IHRoZSBgZGlzcGxheWAgb2YgdGhlIGVsZW1lbnQgaXMgY29udHJvbGxlZCBieSBgdi1zaG93YCxcbiAgICAgICAgLy8gc28gd2UgYWx3YXlzIGtlZXAgdGhlIGN1cnJlbnQgYGRpc3BsYXlgIHZhbHVlIHJlZ2FyZGxlc3Mgb2YgdGhlIGBzdHlsZWBcbiAgICAgICAgLy8gdmFsdWUsIHRodXMgaGFuZGluZyBvdmVyIGNvbnRyb2wgdG8gYHYtc2hvd2AuXG4gICAgICAgIGlmICgnX3ZvZCcgaW4gZWwpIHtcbiAgICAgICAgICAgIHN0eWxlLmRpc3BsYXkgPSBjdXJyZW50RGlzcGxheTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmNvbnN0IHNlbWljb2xvblJFID0gL1teXFxcXF07XFxzKiQvO1xuY29uc3QgaW1wb3J0YW50UkUgPSAvXFxzKiFpbXBvcnRhbnQkLztcbmZ1bmN0aW9uIHNldFN0eWxlKHN0eWxlLCBuYW1lLCB2YWwpIHtcbiAgICBpZiAoaXNBcnJheSh2YWwpKSB7XG4gICAgICAgIHZhbC5mb3JFYWNoKHYgPT4gc2V0U3R5bGUoc3R5bGUsIG5hbWUsIHYpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmICh2YWwgPT0gbnVsbClcbiAgICAgICAgICAgIHZhbCA9ICcnO1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICBpZiAoc2VtaWNvbG9uUkUudGVzdCh2YWwpKSB7XG4gICAgICAgICAgICAgICAgd2FybihgVW5leHBlY3RlZCBzZW1pY29sb24gYXQgdGhlIGVuZCBvZiAnJHtuYW1lfScgc3R5bGUgdmFsdWU6ICcke3ZhbH0nYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5hbWUuc3RhcnRzV2l0aCgnLS0nKSkge1xuICAgICAgICAgICAgLy8gY3VzdG9tIHByb3BlcnR5IGRlZmluaXRpb25cbiAgICAgICAgICAgIHN0eWxlLnNldFByb3BlcnR5KG5hbWUsIHZhbCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBwcmVmaXhlZCA9IGF1dG9QcmVmaXgoc3R5bGUsIG5hbWUpO1xuICAgICAgICAgICAgaWYgKGltcG9ydGFudFJFLnRlc3QodmFsKSkge1xuICAgICAgICAgICAgICAgIC8vICFpbXBvcnRhbnRcbiAgICAgICAgICAgICAgICBzdHlsZS5zZXRQcm9wZXJ0eShoeXBoZW5hdGUocHJlZml4ZWQpLCB2YWwucmVwbGFjZShpbXBvcnRhbnRSRSwgJycpLCAnaW1wb3J0YW50Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzdHlsZVtwcmVmaXhlZF0gPSB2YWw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5jb25zdCBwcmVmaXhlcyA9IFsnV2Via2l0JywgJ01veicsICdtcyddO1xuY29uc3QgcHJlZml4Q2FjaGUgPSB7fTtcbmZ1bmN0aW9uIGF1dG9QcmVmaXgoc3R5bGUsIHJhd05hbWUpIHtcbiAgICBjb25zdCBjYWNoZWQgPSBwcmVmaXhDYWNoZVtyYXdOYW1lXTtcbiAgICBpZiAoY2FjaGVkKSB7XG4gICAgICAgIHJldHVybiBjYWNoZWQ7XG4gICAgfVxuICAgIGxldCBuYW1lID0gY2FtZWxpemUocmF3TmFtZSk7XG4gICAgaWYgKG5hbWUgIT09ICdmaWx0ZXInICYmIG5hbWUgaW4gc3R5bGUpIHtcbiAgICAgICAgcmV0dXJuIChwcmVmaXhDYWNoZVtyYXdOYW1lXSA9IG5hbWUpO1xuICAgIH1cbiAgICBuYW1lID0gY2FwaXRhbGl6ZShuYW1lKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByZWZpeGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHByZWZpeGVkID0gcHJlZml4ZXNbaV0gKyBuYW1lO1xuICAgICAgICBpZiAocHJlZml4ZWQgaW4gc3R5bGUpIHtcbiAgICAgICAgICAgIHJldHVybiAocHJlZml4Q2FjaGVbcmF3TmFtZV0gPSBwcmVmaXhlZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJhd05hbWU7XG59XG5cbmNvbnN0IHhsaW5rTlMgPSAnaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayc7XG5mdW5jdGlvbiBwYXRjaEF0dHIoZWwsIGtleSwgdmFsdWUsIGlzU1ZHLCBpbnN0YW5jZSkge1xuICAgIGlmIChpc1NWRyAmJiBrZXkuc3RhcnRzV2l0aCgneGxpbms6JykpIHtcbiAgICAgICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZU5TKHhsaW5rTlMsIGtleS5zbGljZSg2LCBrZXkubGVuZ3RoKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGVOUyh4bGlua05TLCBrZXksIHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gbm90ZSB3ZSBhcmUgb25seSBjaGVja2luZyBib29sZWFuIGF0dHJpYnV0ZXMgdGhhdCBkb24ndCBoYXZlIGFcbiAgICAgICAgLy8gY29ycmVzcG9uZGluZyBkb20gcHJvcCBvZiB0aGUgc2FtZSBuYW1lIGhlcmUuXG4gICAgICAgIGNvbnN0IGlzQm9vbGVhbiA9IGlzU3BlY2lhbEJvb2xlYW5BdHRyKGtleSk7XG4gICAgICAgIGlmICh2YWx1ZSA9PSBudWxsIHx8IChpc0Jvb2xlYW4gJiYgIWluY2x1ZGVCb29sZWFuQXR0cih2YWx1ZSkpKSB7XG4gICAgICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoa2V5KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZShrZXksIGlzQm9vbGVhbiA/ICcnIDogdmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyBfX1VOU0FGRV9fXG4vLyBmdW5jdGlvbnMuIFRoZSB1c2VyIGlzIHJlc3BvbnNpYmxlIGZvciB1c2luZyB0aGVtIHdpdGggb25seSB0cnVzdGVkIGNvbnRlbnQuXG5mdW5jdGlvbiBwYXRjaERPTVByb3AoZWwsIGtleSwgdmFsdWUsIFxuLy8gdGhlIGZvbGxvd2luZyBhcmdzIGFyZSBwYXNzZWQgb25seSBkdWUgdG8gcG90ZW50aWFsIGlubmVySFRNTC90ZXh0Q29udGVudFxuLy8gb3ZlcnJpZGluZyBleGlzdGluZyBWTm9kZXMsIGluIHdoaWNoIGNhc2UgdGhlIG9sZCB0cmVlIG11c3QgYmUgcHJvcGVybHlcbi8vIHVubW91bnRlZC5cbnByZXZDaGlsZHJlbiwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgdW5tb3VudENoaWxkcmVuKSB7XG4gICAgaWYgKGtleSA9PT0gJ2lubmVySFRNTCcgfHwga2V5ID09PSAndGV4dENvbnRlbnQnKSB7XG4gICAgICAgIGlmIChwcmV2Q2hpbGRyZW4pIHtcbiAgICAgICAgICAgIHVubW91bnRDaGlsZHJlbihwcmV2Q2hpbGRyZW4sIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsW2tleV0gPSB2YWx1ZSA9PSBudWxsID8gJycgOiB2YWx1ZTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoa2V5ID09PSAndmFsdWUnICYmXG4gICAgICAgIGVsLnRhZ05hbWUgIT09ICdQUk9HUkVTUycgJiZcbiAgICAgICAgLy8gY3VzdG9tIGVsZW1lbnRzIG1heSB1c2UgX3ZhbHVlIGludGVybmFsbHlcbiAgICAgICAgIWVsLnRhZ05hbWUuaW5jbHVkZXMoJy0nKSkge1xuICAgICAgICAvLyBzdG9yZSB2YWx1ZSBhcyBfdmFsdWUgYXMgd2VsbCBzaW5jZVxuICAgICAgICAvLyBub24tc3RyaW5nIHZhbHVlcyB3aWxsIGJlIHN0cmluZ2lmaWVkLlxuICAgICAgICBlbC5fdmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgY29uc3QgbmV3VmFsdWUgPSB2YWx1ZSA9PSBudWxsID8gJycgOiB2YWx1ZTtcbiAgICAgICAgaWYgKGVsLnZhbHVlICE9PSBuZXdWYWx1ZSB8fFxuICAgICAgICAgICAgLy8gIzQ5NTY6IGFsd2F5cyBzZXQgZm9yIE9QVElPTiBlbGVtZW50cyBiZWNhdXNlIGl0cyB2YWx1ZSBmYWxscyBiYWNrIHRvXG4gICAgICAgICAgICAvLyB0ZXh0Q29udGVudCBpZiBubyB2YWx1ZSBhdHRyaWJ1dGUgaXMgcHJlc2VudC4gQW5kIHNldHRpbmcgLnZhbHVlIGZvclxuICAgICAgICAgICAgLy8gT1BUSU9OIGhhcyBubyBzaWRlIGVmZmVjdFxuICAgICAgICAgICAgZWwudGFnTmFtZSA9PT0gJ09QVElPTicpIHtcbiAgICAgICAgICAgIGVsLnZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShrZXkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IG5lZWRSZW1vdmUgPSBmYWxzZTtcbiAgICBpZiAodmFsdWUgPT09ICcnIHx8IHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgY29uc3QgdHlwZSA9IHR5cGVvZiBlbFtrZXldO1xuICAgICAgICBpZiAodHlwZSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICAvLyBlLmcuIDxzZWxlY3QgbXVsdGlwbGU+IGNvbXBpbGVzIHRvIHsgbXVsdGlwbGU6ICcnIH1cbiAgICAgICAgICAgIHZhbHVlID0gaW5jbHVkZUJvb2xlYW5BdHRyKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh2YWx1ZSA9PSBudWxsICYmIHR5cGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAvLyBlLmcuIDxkaXYgOmlkPVwibnVsbFwiPlxuICAgICAgICAgICAgdmFsdWUgPSAnJztcbiAgICAgICAgICAgIG5lZWRSZW1vdmUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGUgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAvLyBlLmcuIDxpbWcgOndpZHRoPVwibnVsbFwiPlxuICAgICAgICAgICAgdmFsdWUgPSAwO1xuICAgICAgICAgICAgbmVlZFJlbW92ZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gc29tZSBwcm9wZXJ0aWVzIHBlcmZvcm0gdmFsdWUgdmFsaWRhdGlvbiBhbmQgdGhyb3csXG4gICAgLy8gc29tZSBwcm9wZXJ0aWVzIGhhcyBnZXR0ZXIsIG5vIHNldHRlciwgd2lsbCBlcnJvciBpbiAndXNlIHN0cmljdCdcbiAgICAvLyBlZy4gPHNlbGVjdCA6dHlwZT1cIm51bGxcIj48L3NlbGVjdD4gPHNlbGVjdCA6d2lsbFZhbGlkYXRlPVwibnVsbFwiPjwvc2VsZWN0PlxuICAgIHRyeSB7XG4gICAgICAgIGVsW2tleV0gPSB2YWx1ZTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gZG8gbm90IHdhcm4gaWYgdmFsdWUgaXMgYXV0by1jb2VyY2VkIGZyb20gbnVsbGlzaCB2YWx1ZXNcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhbmVlZFJlbW92ZSkge1xuICAgICAgICAgICAgd2FybihgRmFpbGVkIHNldHRpbmcgcHJvcCBcIiR7a2V5fVwiIG9uIDwke2VsLnRhZ05hbWUudG9Mb3dlckNhc2UoKX0+OiBgICtcbiAgICAgICAgICAgICAgICBgdmFsdWUgJHt2YWx1ZX0gaXMgaW52YWxpZC5gLCBlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBuZWVkUmVtb3ZlICYmIGVsLnJlbW92ZUF0dHJpYnV0ZShrZXkpO1xufVxuXG5mdW5jdGlvbiBhZGRFdmVudExpc3RlbmVyKGVsLCBldmVudCwgaGFuZGxlciwgb3B0aW9ucykge1xuICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpO1xufVxuZnVuY3Rpb24gcmVtb3ZlRXZlbnRMaXN0ZW5lcihlbCwgZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpIHtcbiAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKTtcbn1cbmZ1bmN0aW9uIHBhdGNoRXZlbnQoZWwsIHJhd05hbWUsIHByZXZWYWx1ZSwgbmV4dFZhbHVlLCBpbnN0YW5jZSA9IG51bGwpIHtcbiAgICAvLyB2ZWkgPSB2dWUgZXZlbnQgaW52b2tlcnNcbiAgICBjb25zdCBpbnZva2VycyA9IGVsLl92ZWkgfHwgKGVsLl92ZWkgPSB7fSk7XG4gICAgY29uc3QgZXhpc3RpbmdJbnZva2VyID0gaW52b2tlcnNbcmF3TmFtZV07XG4gICAgaWYgKG5leHRWYWx1ZSAmJiBleGlzdGluZ0ludm9rZXIpIHtcbiAgICAgICAgLy8gcGF0Y2hcbiAgICAgICAgZXhpc3RpbmdJbnZva2VyLnZhbHVlID0gbmV4dFZhbHVlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgW25hbWUsIG9wdGlvbnNdID0gcGFyc2VOYW1lKHJhd05hbWUpO1xuICAgICAgICBpZiAobmV4dFZhbHVlKSB7XG4gICAgICAgICAgICAvLyBhZGRcbiAgICAgICAgICAgIGNvbnN0IGludm9rZXIgPSAoaW52b2tlcnNbcmF3TmFtZV0gPSBjcmVhdGVJbnZva2VyKG5leHRWYWx1ZSwgaW5zdGFuY2UpKTtcbiAgICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoZWwsIG5hbWUsIGludm9rZXIsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGV4aXN0aW5nSW52b2tlcikge1xuICAgICAgICAgICAgLy8gcmVtb3ZlXG4gICAgICAgICAgICByZW1vdmVFdmVudExpc3RlbmVyKGVsLCBuYW1lLCBleGlzdGluZ0ludm9rZXIsIG9wdGlvbnMpO1xuICAgICAgICAgICAgaW52b2tlcnNbcmF3TmFtZV0gPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG59XG5jb25zdCBvcHRpb25zTW9kaWZpZXJSRSA9IC8oPzpPbmNlfFBhc3NpdmV8Q2FwdHVyZSkkLztcbmZ1bmN0aW9uIHBhcnNlTmFtZShuYW1lKSB7XG4gICAgbGV0IG9wdGlvbnM7XG4gICAgaWYgKG9wdGlvbnNNb2RpZmllclJFLnRlc3QobmFtZSkpIHtcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICBsZXQgbTtcbiAgICAgICAgd2hpbGUgKChtID0gbmFtZS5tYXRjaChvcHRpb25zTW9kaWZpZXJSRSkpKSB7XG4gICAgICAgICAgICBuYW1lID0gbmFtZS5zbGljZSgwLCBuYW1lLmxlbmd0aCAtIG1bMF0ubGVuZ3RoKTtcbiAgICAgICAgICAgIG9wdGlvbnNbbVswXS50b0xvd2VyQ2FzZSgpXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgZXZlbnQgPSBuYW1lWzJdID09PSAnOicgPyBuYW1lLnNsaWNlKDMpIDogaHlwaGVuYXRlKG5hbWUuc2xpY2UoMikpO1xuICAgIHJldHVybiBbZXZlbnQsIG9wdGlvbnNdO1xufVxuLy8gVG8gYXZvaWQgdGhlIG92ZXJoZWFkIG9mIHJlcGVhdGVkbHkgY2FsbGluZyBEYXRlLm5vdygpLCB3ZSBjYWNoZVxuLy8gYW5kIHVzZSB0aGUgc2FtZSB0aW1lc3RhbXAgZm9yIGFsbCBldmVudCBsaXN0ZW5lcnMgYXR0YWNoZWQgaW4gdGhlIHNhbWUgdGljay5cbmxldCBjYWNoZWROb3cgPSAwO1xuY29uc3QgcCA9IC8qI19fUFVSRV9fKi8gUHJvbWlzZS5yZXNvbHZlKCk7XG5jb25zdCBnZXROb3cgPSAoKSA9PiBjYWNoZWROb3cgfHwgKHAudGhlbigoKSA9PiAoY2FjaGVkTm93ID0gMCkpLCAoY2FjaGVkTm93ID0gRGF0ZS5ub3coKSkpO1xuZnVuY3Rpb24gY3JlYXRlSW52b2tlcihpbml0aWFsVmFsdWUsIGluc3RhbmNlKSB7XG4gICAgY29uc3QgaW52b2tlciA9IChlKSA9PiB7XG4gICAgICAgIC8vIGFzeW5jIGVkZ2UgY2FzZSB2dWVqcy92dWUjNjU2NlxuICAgICAgICAvLyBpbm5lciBjbGljayBldmVudCB0cmlnZ2VycyBwYXRjaCwgZXZlbnQgaGFuZGxlclxuICAgICAgICAvLyBhdHRhY2hlZCB0byBvdXRlciBlbGVtZW50IGR1cmluZyBwYXRjaCwgYW5kIHRyaWdnZXJlZCBhZ2Fpbi4gVGhpc1xuICAgICAgICAvLyBoYXBwZW5zIGJlY2F1c2UgYnJvd3NlcnMgZmlyZSBtaWNyb3Rhc2sgdGlja3MgYmV0d2VlbiBldmVudCBwcm9wYWdhdGlvbi5cbiAgICAgICAgLy8gdGhpcyBubyBsb25nZXIgaGFwcGVucyBmb3IgdGVtcGxhdGVzIGluIFZ1ZSAzLCBidXQgY291bGQgc3RpbGwgYmVcbiAgICAgICAgLy8gdGhlb3JldGljYWxseSBwb3NzaWJsZSBmb3IgaGFuZC13cml0dGVuIHJlbmRlciBmdW5jdGlvbnMuXG4gICAgICAgIC8vIHRoZSBzb2x1dGlvbjogd2Ugc2F2ZSB0aGUgdGltZXN0YW1wIHdoZW4gYSBoYW5kbGVyIGlzIGF0dGFjaGVkLFxuICAgICAgICAvLyBhbmQgYWxzbyBhdHRhY2ggdGhlIHRpbWVzdGFtcCB0byBhbnkgZXZlbnQgdGhhdCB3YXMgaGFuZGxlZCBieSB2dWVcbiAgICAgICAgLy8gZm9yIHRoZSBmaXJzdCB0aW1lICh0byBhdm9pZCBpbmNvbnNpc3RlbnQgZXZlbnQgdGltZXN0YW1wIGltcGxlbWVudGF0aW9uc1xuICAgICAgICAvLyBvciBldmVudHMgZmlyZWQgZnJvbSBpZnJhbWVzLCBlLmcuICMyNTEzKVxuICAgICAgICAvLyBUaGUgaGFuZGxlciB3b3VsZCBvbmx5IGZpcmUgaWYgdGhlIGV2ZW50IHBhc3NlZCB0byBpdCB3YXMgZmlyZWRcbiAgICAgICAgLy8gQUZURVIgaXQgd2FzIGF0dGFjaGVkLlxuICAgICAgICBpZiAoIWUuX3Z0cykge1xuICAgICAgICAgICAgZS5fdnRzID0gRGF0ZS5ub3coKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChlLl92dHMgPD0gaW52b2tlci5hdHRhY2hlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nKHBhdGNoU3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKGUsIGludm9rZXIudmFsdWUpLCBpbnN0YW5jZSwgNSAvKiBFcnJvckNvZGVzLk5BVElWRV9FVkVOVF9IQU5ETEVSICovLCBbZV0pO1xuICAgIH07XG4gICAgaW52b2tlci52YWx1ZSA9IGluaXRpYWxWYWx1ZTtcbiAgICBpbnZva2VyLmF0dGFjaGVkID0gZ2V0Tm93KCk7XG4gICAgcmV0dXJuIGludm9rZXI7XG59XG5mdW5jdGlvbiBwYXRjaFN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbihlLCB2YWx1ZSkge1xuICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgICBjb25zdCBvcmlnaW5hbFN0b3AgPSBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjtcbiAgICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24gPSAoKSA9PiB7XG4gICAgICAgICAgICBvcmlnaW5hbFN0b3AuY2FsbChlKTtcbiAgICAgICAgICAgIGUuX3N0b3BwZWQgPSB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdmFsdWUubWFwKGZuID0+IChlKSA9PiAhZS5fc3RvcHBlZCAmJiBmbiAmJiBmbihlKSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxufVxuXG5jb25zdCBuYXRpdmVPblJFID0gL15vblthLXpdLztcbmNvbnN0IHBhdGNoUHJvcCA9IChlbCwga2V5LCBwcmV2VmFsdWUsIG5leHRWYWx1ZSwgaXNTVkcgPSBmYWxzZSwgcHJldkNoaWxkcmVuLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCB1bm1vdW50Q2hpbGRyZW4pID0+IHtcbiAgICBpZiAoa2V5ID09PSAnY2xhc3MnKSB7XG4gICAgICAgIHBhdGNoQ2xhc3MoZWwsIG5leHRWYWx1ZSwgaXNTVkcpO1xuICAgIH1cbiAgICBlbHNlIGlmIChrZXkgPT09ICdzdHlsZScpIHtcbiAgICAgICAgcGF0Y2hTdHlsZShlbCwgcHJldlZhbHVlLCBuZXh0VmFsdWUpO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc09uKGtleSkpIHtcbiAgICAgICAgLy8gaWdub3JlIHYtbW9kZWwgbGlzdGVuZXJzXG4gICAgICAgIGlmICghaXNNb2RlbExpc3RlbmVyKGtleSkpIHtcbiAgICAgICAgICAgIHBhdGNoRXZlbnQoZWwsIGtleSwgcHJldlZhbHVlLCBuZXh0VmFsdWUsIHBhcmVudENvbXBvbmVudCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoa2V5WzBdID09PSAnLidcbiAgICAgICAgPyAoKGtleSA9IGtleS5zbGljZSgxKSksIHRydWUpXG4gICAgICAgIDoga2V5WzBdID09PSAnXidcbiAgICAgICAgICAgID8gKChrZXkgPSBrZXkuc2xpY2UoMSkpLCBmYWxzZSlcbiAgICAgICAgICAgIDogc2hvdWxkU2V0QXNQcm9wKGVsLCBrZXksIG5leHRWYWx1ZSwgaXNTVkcpKSB7XG4gICAgICAgIHBhdGNoRE9NUHJvcChlbCwga2V5LCBuZXh0VmFsdWUsIHByZXZDaGlsZHJlbiwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgdW5tb3VudENoaWxkcmVuKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIHNwZWNpYWwgY2FzZSBmb3IgPGlucHV0IHYtbW9kZWwgdHlwZT1cImNoZWNrYm94XCI+IHdpdGhcbiAgICAgICAgLy8gOnRydWUtdmFsdWUgJiA6ZmFsc2UtdmFsdWVcbiAgICAgICAgLy8gc3RvcmUgdmFsdWUgYXMgZG9tIHByb3BlcnRpZXMgc2luY2Ugbm9uLXN0cmluZyB2YWx1ZXMgd2lsbCBiZVxuICAgICAgICAvLyBzdHJpbmdpZmllZC5cbiAgICAgICAgaWYgKGtleSA9PT0gJ3RydWUtdmFsdWUnKSB7XG4gICAgICAgICAgICBlbC5fdHJ1ZVZhbHVlID0gbmV4dFZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGtleSA9PT0gJ2ZhbHNlLXZhbHVlJykge1xuICAgICAgICAgICAgZWwuX2ZhbHNlVmFsdWUgPSBuZXh0VmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgcGF0Y2hBdHRyKGVsLCBrZXksIG5leHRWYWx1ZSwgaXNTVkcpO1xuICAgIH1cbn07XG5mdW5jdGlvbiBzaG91bGRTZXRBc1Byb3AoZWwsIGtleSwgdmFsdWUsIGlzU1ZHKSB7XG4gICAgaWYgKGlzU1ZHKSB7XG4gICAgICAgIC8vIG1vc3Qga2V5cyBtdXN0IGJlIHNldCBhcyBhdHRyaWJ1dGUgb24gc3ZnIGVsZW1lbnRzIHRvIHdvcmtcbiAgICAgICAgLy8gLi4uZXhjZXB0IGlubmVySFRNTCAmIHRleHRDb250ZW50XG4gICAgICAgIGlmIChrZXkgPT09ICdpbm5lckhUTUwnIHx8IGtleSA9PT0gJ3RleHRDb250ZW50Jykge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gb3IgbmF0aXZlIG9uY2xpY2sgd2l0aCBmdW5jdGlvbiB2YWx1ZXNcbiAgICAgICAgaWYgKGtleSBpbiBlbCAmJiBuYXRpdmVPblJFLnRlc3Qoa2V5KSAmJiBpc0Z1bmN0aW9uKHZhbHVlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvLyB0aGVzZSBhcmUgZW51bWVyYXRlZCBhdHRycywgaG93ZXZlciB0aGVpciBjb3JyZXNwb25kaW5nIERPTSBwcm9wZXJ0aWVzXG4gICAgLy8gYXJlIGFjdHVhbGx5IGJvb2xlYW5zIC0gdGhpcyBsZWFkcyB0byBzZXR0aW5nIGl0IHdpdGggYSBzdHJpbmcgXCJmYWxzZVwiXG4gICAgLy8gdmFsdWUgbGVhZGluZyBpdCB0byBiZSBjb2VyY2VkIHRvIGB0cnVlYCwgc28gd2UgbmVlZCB0byBhbHdheXMgdHJlYXRcbiAgICAvLyB0aGVtIGFzIGF0dHJpYnV0ZXMuXG4gICAgLy8gTm90ZSB0aGF0IGBjb250ZW50RWRpdGFibGVgIGRvZXNuJ3QgaGF2ZSB0aGlzIHByb2JsZW06IGl0cyBET01cbiAgICAvLyBwcm9wZXJ0eSBpcyBhbHNvIGVudW1lcmF0ZWQgc3RyaW5nIHZhbHVlcy5cbiAgICBpZiAoa2V5ID09PSAnc3BlbGxjaGVjaycgfHwga2V5ID09PSAnZHJhZ2dhYmxlJyB8fCBrZXkgPT09ICd0cmFuc2xhdGUnKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gIzE3ODcsICMyODQwIGZvcm0gcHJvcGVydHkgb24gZm9ybSBlbGVtZW50cyBpcyByZWFkb25seSBhbmQgbXVzdCBiZSBzZXQgYXNcbiAgICAvLyBhdHRyaWJ1dGUuXG4gICAgaWYgKGtleSA9PT0gJ2Zvcm0nKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gIzE1MjYgPGlucHV0IGxpc3Q+IG11c3QgYmUgc2V0IGFzIGF0dHJpYnV0ZVxuICAgIGlmIChrZXkgPT09ICdsaXN0JyAmJiBlbC50YWdOYW1lID09PSAnSU5QVVQnKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gIzI3NjYgPHRleHRhcmVhIHR5cGU+IG11c3QgYmUgc2V0IGFzIGF0dHJpYnV0ZVxuICAgIGlmIChrZXkgPT09ICd0eXBlJyAmJiBlbC50YWdOYW1lID09PSAnVEVYVEFSRUEnKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gbmF0aXZlIG9uY2xpY2sgd2l0aCBzdHJpbmcgdmFsdWUsIG11c3QgYmUgc2V0IGFzIGF0dHJpYnV0ZVxuICAgIGlmIChuYXRpdmVPblJFLnRlc3Qoa2V5KSAmJiBpc1N0cmluZyh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4ga2V5IGluIGVsO1xufVxuXG5mdW5jdGlvbiBkZWZpbmVDdXN0b21FbGVtZW50KG9wdGlvbnMsIGh5ZHJhdGUpIHtcbiAgICBjb25zdCBDb21wID0gZGVmaW5lQ29tcG9uZW50KG9wdGlvbnMpO1xuICAgIGNsYXNzIFZ1ZUN1c3RvbUVsZW1lbnQgZXh0ZW5kcyBWdWVFbGVtZW50IHtcbiAgICAgICAgY29uc3RydWN0b3IoaW5pdGlhbFByb3BzKSB7XG4gICAgICAgICAgICBzdXBlcihDb21wLCBpbml0aWFsUHJvcHMsIGh5ZHJhdGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFZ1ZUN1c3RvbUVsZW1lbnQuZGVmID0gQ29tcDtcbiAgICByZXR1cm4gVnVlQ3VzdG9tRWxlbWVudDtcbn1cbmNvbnN0IGRlZmluZVNTUkN1c3RvbUVsZW1lbnQgPSAoKG9wdGlvbnMpID0+IHtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgcmV0dXJuIGRlZmluZUN1c3RvbUVsZW1lbnQob3B0aW9ucywgaHlkcmF0ZSk7XG59KTtcbmNvbnN0IEJhc2VDbGFzcyA9ICh0eXBlb2YgSFRNTEVsZW1lbnQgIT09ICd1bmRlZmluZWQnID8gSFRNTEVsZW1lbnQgOiBjbGFzcyB7XG59KTtcbmNsYXNzIFZ1ZUVsZW1lbnQgZXh0ZW5kcyBCYXNlQ2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKF9kZWYsIF9wcm9wcyA9IHt9LCBoeWRyYXRlKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuX2RlZiA9IF9kZWY7XG4gICAgICAgIHRoaXMuX3Byb3BzID0gX3Byb3BzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9pbnN0YW5jZSA9IG51bGw7XG4gICAgICAgIHRoaXMuX2Nvbm5lY3RlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9yZXNvbHZlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9udW1iZXJQcm9wcyA9IG51bGw7XG4gICAgICAgIGlmICh0aGlzLnNoYWRvd1Jvb3QgJiYgaHlkcmF0ZSkge1xuICAgICAgICAgICAgaHlkcmF0ZSh0aGlzLl9jcmVhdGVWTm9kZSgpLCB0aGlzLnNoYWRvd1Jvb3QpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiB0aGlzLnNoYWRvd1Jvb3QpIHtcbiAgICAgICAgICAgICAgICB3YXJuKGBDdXN0b20gZWxlbWVudCBoYXMgcHJlLXJlbmRlcmVkIGRlY2xhcmF0aXZlIHNoYWRvdyByb290IGJ1dCBpcyBub3QgYCArXG4gICAgICAgICAgICAgICAgICAgIGBkZWZpbmVkIGFzIGh5ZHJhdGFibGUuIFVzZSBcXGBkZWZpbmVTU1JDdXN0b21FbGVtZW50XFxgLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiAnb3BlbicgfSk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX2RlZi5fX2FzeW5jTG9hZGVyKSB7XG4gICAgICAgICAgICAgICAgLy8gZm9yIHN5bmMgY29tcG9uZW50IGRlZnMgd2UgY2FuIGltbWVkaWF0ZWx5IHJlc29sdmUgcHJvcHNcbiAgICAgICAgICAgICAgICB0aGlzLl9yZXNvbHZlUHJvcHModGhpcy5fZGVmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgdGhpcy5fY29ubmVjdGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKCF0aGlzLl9pbnN0YW5jZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX3Jlc29sdmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9yZXNvbHZlRGVmKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIHRoaXMuX2Nvbm5lY3RlZCA9IGZhbHNlO1xuICAgICAgICBuZXh0VGljaygoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX2Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgICAgIHJlbmRlcihudWxsLCB0aGlzLnNoYWRvd1Jvb3QpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2luc3RhbmNlID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIHJlc29sdmUgaW5uZXIgY29tcG9uZW50IGRlZmluaXRpb24gKGhhbmRsZSBwb3NzaWJsZSBhc3luYyBjb21wb25lbnQpXG4gICAgICovXG4gICAgX3Jlc29sdmVEZWYoKSB7XG4gICAgICAgIHRoaXMuX3Jlc29sdmVkID0gdHJ1ZTtcbiAgICAgICAgLy8gc2V0IGluaXRpYWwgYXR0cnNcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmF0dHJpYnV0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuX3NldEF0dHIodGhpcy5hdHRyaWJ1dGVzW2ldLm5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHdhdGNoIGZ1dHVyZSBhdHRyIGNoYW5nZXNcbiAgICAgICAgbmV3IE11dGF0aW9uT2JzZXJ2ZXIobXV0YXRpb25zID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbSBvZiBtdXRhdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXRBdHRyKG0uYXR0cmlidXRlTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLm9ic2VydmUodGhpcywgeyBhdHRyaWJ1dGVzOiB0cnVlIH0pO1xuICAgICAgICBjb25zdCByZXNvbHZlID0gKGRlZiwgaXNBc3luYyA9IGZhbHNlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB7IHByb3BzLCBzdHlsZXMgfSA9IGRlZjtcbiAgICAgICAgICAgIC8vIGNhc3QgTnVtYmVyLXR5cGUgcHJvcHMgc2V0IGJlZm9yZSByZXNvbHZlXG4gICAgICAgICAgICBsZXQgbnVtYmVyUHJvcHM7XG4gICAgICAgICAgICBpZiAocHJvcHMgJiYgIWlzQXJyYXkocHJvcHMpKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gcHJvcHMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3B0ID0gcHJvcHNba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdCA9PT0gTnVtYmVyIHx8IChvcHQgJiYgb3B0LnR5cGUgPT09IE51bWJlcikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXkgaW4gdGhpcy5fcHJvcHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9wcm9wc1trZXldID0gdG9OdW1iZXIodGhpcy5fcHJvcHNba2V5XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAobnVtYmVyUHJvcHMgfHwgKG51bWJlclByb3BzID0gT2JqZWN0LmNyZWF0ZShudWxsKSkpW2NhbWVsaXplJDEoa2V5KV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fbnVtYmVyUHJvcHMgPSBudW1iZXJQcm9wcztcbiAgICAgICAgICAgIGlmIChpc0FzeW5jKSB7XG4gICAgICAgICAgICAgICAgLy8gZGVmaW5pbmcgZ2V0dGVyL3NldHRlcnMgb24gcHJvdG90eXBlXG4gICAgICAgICAgICAgICAgLy8gZm9yIHN5bmMgZGVmcywgdGhpcyBhbHJlYWR5IGhhcHBlbmVkIGluIHRoZSBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgIHRoaXMuX3Jlc29sdmVQcm9wcyhkZWYpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gYXBwbHkgQ1NTXG4gICAgICAgICAgICB0aGlzLl9hcHBseVN0eWxlcyhzdHlsZXMpO1xuICAgICAgICAgICAgLy8gaW5pdGlhbCByZW5kZXJcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZSgpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBhc3luY0RlZiA9IHRoaXMuX2RlZi5fX2FzeW5jTG9hZGVyO1xuICAgICAgICBpZiAoYXN5bmNEZWYpIHtcbiAgICAgICAgICAgIGFzeW5jRGVmKCkudGhlbihkZWYgPT4gcmVzb2x2ZShkZWYsIHRydWUpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlc29sdmUodGhpcy5fZGVmKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfcmVzb2x2ZVByb3BzKGRlZikge1xuICAgICAgICBjb25zdCB7IHByb3BzIH0gPSBkZWY7XG4gICAgICAgIGNvbnN0IGRlY2xhcmVkUHJvcEtleXMgPSBpc0FycmF5KHByb3BzKSA/IHByb3BzIDogT2JqZWN0LmtleXMocHJvcHMgfHwge30pO1xuICAgICAgICAvLyBjaGVjayBpZiB0aGVyZSBhcmUgcHJvcHMgc2V0IHByZS11cGdyYWRlIG9yIGNvbm5lY3RcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXModGhpcykpIHtcbiAgICAgICAgICAgIGlmIChrZXlbMF0gIT09ICdfJyAmJiBkZWNsYXJlZFByb3BLZXlzLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXRQcm9wKGtleSwgdGhpc1trZXldLCB0cnVlLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gZGVmaW5pbmcgZ2V0dGVyL3NldHRlcnMgb24gcHJvdG90eXBlXG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIGRlY2xhcmVkUHJvcEtleXMubWFwKGNhbWVsaXplJDEpKSB7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywga2V5LCB7XG4gICAgICAgICAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0UHJvcChrZXkpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc2V0KHZhbCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zZXRQcm9wKGtleSwgdmFsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfc2V0QXR0cihrZXkpIHtcbiAgICAgICAgbGV0IHZhbHVlID0gdGhpcy5nZXRBdHRyaWJ1dGUoa2V5KTtcbiAgICAgICAgY29uc3QgY2FtZWxLZXkgPSBjYW1lbGl6ZSQxKGtleSk7XG4gICAgICAgIGlmICh0aGlzLl9udW1iZXJQcm9wcyAmJiB0aGlzLl9udW1iZXJQcm9wc1tjYW1lbEtleV0pIHtcbiAgICAgICAgICAgIHZhbHVlID0gdG9OdW1iZXIodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3NldFByb3AoY2FtZWxLZXksIHZhbHVlLCBmYWxzZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIF9nZXRQcm9wKGtleSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcHJvcHNba2V5XTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgX3NldFByb3Aoa2V5LCB2YWwsIHNob3VsZFJlZmxlY3QgPSB0cnVlLCBzaG91bGRVcGRhdGUgPSB0cnVlKSB7XG4gICAgICAgIGlmICh2YWwgIT09IHRoaXMuX3Byb3BzW2tleV0pIHtcbiAgICAgICAgICAgIHRoaXMuX3Byb3BzW2tleV0gPSB2YWw7XG4gICAgICAgICAgICBpZiAoc2hvdWxkVXBkYXRlICYmIHRoaXMuX2luc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyByZWZsZWN0XG4gICAgICAgICAgICBpZiAoc2hvdWxkUmVmbGVjdCkge1xuICAgICAgICAgICAgICAgIGlmICh2YWwgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoaHlwaGVuYXRlKGtleSksICcnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoaHlwaGVuYXRlKGtleSksIHZhbCArICcnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIXZhbCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShoeXBoZW5hdGUoa2V5KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIF91cGRhdGUoKSB7XG4gICAgICAgIHJlbmRlcih0aGlzLl9jcmVhdGVWTm9kZSgpLCB0aGlzLnNoYWRvd1Jvb3QpO1xuICAgIH1cbiAgICBfY3JlYXRlVk5vZGUoKSB7XG4gICAgICAgIGNvbnN0IHZub2RlID0gY3JlYXRlVk5vZGUodGhpcy5fZGVmLCBleHRlbmQoe30sIHRoaXMuX3Byb3BzKSk7XG4gICAgICAgIGlmICghdGhpcy5faW5zdGFuY2UpIHtcbiAgICAgICAgICAgIHZub2RlLmNlID0gaW5zdGFuY2UgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX2luc3RhbmNlID0gaW5zdGFuY2U7XG4gICAgICAgICAgICAgICAgaW5zdGFuY2UuaXNDRSA9IHRydWU7XG4gICAgICAgICAgICAgICAgLy8gSE1SXG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5jZVJlbG9hZCA9IG5ld1N0eWxlcyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhbHdheXMgcmVzZXQgc3R5bGVzXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fc3R5bGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc3R5bGVzLmZvckVhY2gocyA9PiB0aGlzLnNoYWRvd1Jvb3QucmVtb3ZlQ2hpbGQocykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3N0eWxlcy5sZW5ndGggPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fYXBwbHlTdHlsZXMobmV3U3R5bGVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2luc3RhbmNlID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBkaXNwYXRjaCA9IChldmVudCwgYXJncykgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KGV2ZW50LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IGFyZ3NcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgLy8gaW50ZXJjZXB0IGVtaXRcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5lbWl0ID0gKGV2ZW50LCAuLi5hcmdzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGRpc3BhdGNoIGJvdGggdGhlIHJhdyBhbmQgaHlwaGVuYXRlZCB2ZXJzaW9ucyBvZiBhbiBldmVudFxuICAgICAgICAgICAgICAgICAgICAvLyB0byBtYXRjaCBWdWUgYmVoYXZpb3JcbiAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2goZXZlbnQsIGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaHlwaGVuYXRlKGV2ZW50KSAhPT0gZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKGh5cGhlbmF0ZShldmVudCksIGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAvLyBsb2NhdGUgbmVhcmVzdCBWdWUgY3VzdG9tIGVsZW1lbnQgcGFyZW50IGZvciBwcm92aWRlL2luamVjdFxuICAgICAgICAgICAgICAgIGxldCBwYXJlbnQgPSB0aGlzO1xuICAgICAgICAgICAgICAgIHdoaWxlICgocGFyZW50ID1cbiAgICAgICAgICAgICAgICAgICAgcGFyZW50ICYmIChwYXJlbnQucGFyZW50Tm9kZSB8fCBwYXJlbnQuaG9zdCkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnQgaW5zdGFuY2VvZiBWdWVFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5wYXJlbnQgPSBwYXJlbnQuX2luc3RhbmNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UucHJvdmlkZXMgPSBwYXJlbnQuX2luc3RhbmNlLnByb3ZpZGVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2bm9kZTtcbiAgICB9XG4gICAgX2FwcGx5U3R5bGVzKHN0eWxlcykge1xuICAgICAgICBpZiAoc3R5bGVzKSB7XG4gICAgICAgICAgICBzdHlsZXMuZm9yRWFjaChjc3MgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgICAgICAgICAgICAgIHMudGV4dENvbnRlbnQgPSBjc3M7XG4gICAgICAgICAgICAgICAgdGhpcy5zaGFkb3dSb290LmFwcGVuZENoaWxkKHMpO1xuICAgICAgICAgICAgICAgIC8vIHJlY29yZCBmb3IgSE1SXG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICAodGhpcy5fc3R5bGVzIHx8ICh0aGlzLl9zdHlsZXMgPSBbXSkpLnB1c2gocyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIHVzZUNzc01vZHVsZShuYW1lID0gJyRzdHlsZScpIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgIHtcbiAgICAgICAgY29uc3QgaW5zdGFuY2UgPSBnZXRDdXJyZW50SW5zdGFuY2UoKTtcbiAgICAgICAgaWYgKCFpbnN0YW5jZSkge1xuICAgICAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIHdhcm4oYHVzZUNzc01vZHVsZSBtdXN0IGJlIGNhbGxlZCBpbnNpZGUgc2V0dXAoKWApO1xuICAgICAgICAgICAgcmV0dXJuIEVNUFRZX09CSjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtb2R1bGVzID0gaW5zdGFuY2UudHlwZS5fX2Nzc01vZHVsZXM7XG4gICAgICAgIGlmICghbW9kdWxlcykge1xuICAgICAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIHdhcm4oYEN1cnJlbnQgaW5zdGFuY2UgZG9lcyBub3QgaGF2ZSBDU1MgbW9kdWxlcyBpbmplY3RlZC5gKTtcbiAgICAgICAgICAgIHJldHVybiBFTVBUWV9PQko7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbW9kID0gbW9kdWxlc1tuYW1lXTtcbiAgICAgICAgaWYgKCFtb2QpIHtcbiAgICAgICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxuICAgICAgICAgICAgICAgIHdhcm4oYEN1cnJlbnQgaW5zdGFuY2UgZG9lcyBub3QgaGF2ZSBDU1MgbW9kdWxlIG5hbWVkIFwiJHtuYW1lfVwiLmApO1xuICAgICAgICAgICAgcmV0dXJuIEVNUFRZX09CSjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbW9kO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSdW50aW1lIGhlbHBlciBmb3IgU0ZDJ3MgQ1NTIHZhcmlhYmxlIGluamVjdGlvbiBmZWF0dXJlLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gdXNlQ3NzVmFycyhnZXR0ZXIpIHtcbiAgICBjb25zdCBpbnN0YW5jZSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpO1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgaWYgKCFpbnN0YW5jZSkge1xuICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcbiAgICAgICAgICAgIHdhcm4oYHVzZUNzc1ZhcnMgaXMgY2FsbGVkIHdpdGhvdXQgY3VycmVudCBhY3RpdmUgY29tcG9uZW50IGluc3RhbmNlLmApO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHVwZGF0ZVRlbGVwb3J0cyA9IChpbnN0YW5jZS51dCA9ICh2YXJzID0gZ2V0dGVyKGluc3RhbmNlLnByb3h5KSkgPT4ge1xuICAgICAgICBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYFtkYXRhLXYtb3duZXI9XCIke2luc3RhbmNlLnVpZH1cIl1gKSkuZm9yRWFjaChub2RlID0+IHNldFZhcnNPbk5vZGUobm9kZSwgdmFycykpO1xuICAgIH0pO1xuICAgIGNvbnN0IHNldFZhcnMgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHZhcnMgPSBnZXR0ZXIoaW5zdGFuY2UucHJveHkpO1xuICAgICAgICBzZXRWYXJzT25WTm9kZShpbnN0YW5jZS5zdWJUcmVlLCB2YXJzKTtcbiAgICAgICAgdXBkYXRlVGVsZXBvcnRzKHZhcnMpO1xuICAgIH07XG4gICAgd2F0Y2hQb3N0RWZmZWN0KHNldFZhcnMpO1xuICAgIG9uTW91bnRlZCgoKSA9PiB7XG4gICAgICAgIGNvbnN0IG9iID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoc2V0VmFycyk7XG4gICAgICAgIG9iLm9ic2VydmUoaW5zdGFuY2Uuc3ViVHJlZS5lbC5wYXJlbnROb2RlLCB7IGNoaWxkTGlzdDogdHJ1ZSB9KTtcbiAgICAgICAgb25Vbm1vdW50ZWQoKCkgPT4gb2IuZGlzY29ubmVjdCgpKTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIHNldFZhcnNPblZOb2RlKHZub2RlLCB2YXJzKSB7XG4gICAgaWYgKHZub2RlLnNoYXBlRmxhZyAmIDEyOCAvKiBTaGFwZUZsYWdzLlNVU1BFTlNFICovKSB7XG4gICAgICAgIGNvbnN0IHN1c3BlbnNlID0gdm5vZGUuc3VzcGVuc2U7XG4gICAgICAgIHZub2RlID0gc3VzcGVuc2UuYWN0aXZlQnJhbmNoO1xuICAgICAgICBpZiAoc3VzcGVuc2UucGVuZGluZ0JyYW5jaCAmJiAhc3VzcGVuc2UuaXNIeWRyYXRpbmcpIHtcbiAgICAgICAgICAgIHN1c3BlbnNlLmVmZmVjdHMucHVzaCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0VmFyc09uVk5vZGUoc3VzcGVuc2UuYWN0aXZlQnJhbmNoLCB2YXJzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIGRyaWxsIGRvd24gSE9DcyB1bnRpbCBpdCdzIGEgbm9uLWNvbXBvbmVudCB2bm9kZVxuICAgIHdoaWxlICh2bm9kZS5jb21wb25lbnQpIHtcbiAgICAgICAgdm5vZGUgPSB2bm9kZS5jb21wb25lbnQuc3ViVHJlZTtcbiAgICB9XG4gICAgaWYgKHZub2RlLnNoYXBlRmxhZyAmIDEgLyogU2hhcGVGbGFncy5FTEVNRU5UICovICYmIHZub2RlLmVsKSB7XG4gICAgICAgIHNldFZhcnNPbk5vZGUodm5vZGUuZWwsIHZhcnMpO1xuICAgIH1cbiAgICBlbHNlIGlmICh2bm9kZS50eXBlID09PSBGcmFnbWVudCkge1xuICAgICAgICB2bm9kZS5jaGlsZHJlbi5mb3JFYWNoKGMgPT4gc2V0VmFyc09uVk5vZGUoYywgdmFycykpO1xuICAgIH1cbiAgICBlbHNlIGlmICh2bm9kZS50eXBlID09PSBTdGF0aWMpIHtcbiAgICAgICAgbGV0IHsgZWwsIGFuY2hvciB9ID0gdm5vZGU7XG4gICAgICAgIHdoaWxlIChlbCkge1xuICAgICAgICAgICAgc2V0VmFyc09uTm9kZShlbCwgdmFycyk7XG4gICAgICAgICAgICBpZiAoZWwgPT09IGFuY2hvcilcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGVsID0gZWwubmV4dFNpYmxpbmc7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBzZXRWYXJzT25Ob2RlKGVsLCB2YXJzKSB7XG4gICAgaWYgKGVsLm5vZGVUeXBlID09PSAxKSB7XG4gICAgICAgIGNvbnN0IHN0eWxlID0gZWwuc3R5bGU7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHZhcnMpIHtcbiAgICAgICAgICAgIHN0eWxlLnNldFByb3BlcnR5KGAtLSR7a2V5fWAsIHZhcnNba2V5XSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmNvbnN0IFRSQU5TSVRJT04gPSAndHJhbnNpdGlvbic7XG5jb25zdCBBTklNQVRJT04gPSAnYW5pbWF0aW9uJztcbi8vIERPTSBUcmFuc2l0aW9uIGlzIGEgaGlnaGVyLW9yZGVyLWNvbXBvbmVudCBiYXNlZCBvbiB0aGUgcGxhdGZvcm0tYWdub3N0aWNcbi8vIGJhc2UgVHJhbnNpdGlvbiBjb21wb25lbnQsIHdpdGggRE9NLXNwZWNpZmljIGxvZ2ljLlxuY29uc3QgVHJhbnNpdGlvbiA9IChwcm9wcywgeyBzbG90cyB9KSA9PiBoKEJhc2VUcmFuc2l0aW9uLCByZXNvbHZlVHJhbnNpdGlvblByb3BzKHByb3BzKSwgc2xvdHMpO1xuVHJhbnNpdGlvbi5kaXNwbGF5TmFtZSA9ICdUcmFuc2l0aW9uJztcbmNvbnN0IERPTVRyYW5zaXRpb25Qcm9wc1ZhbGlkYXRvcnMgPSB7XG4gICAgbmFtZTogU3RyaW5nLFxuICAgIHR5cGU6IFN0cmluZyxcbiAgICBjc3M6IHtcbiAgICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgICAgZGVmYXVsdDogdHJ1ZVxuICAgIH0sXG4gICAgZHVyYXRpb246IFtTdHJpbmcsIE51bWJlciwgT2JqZWN0XSxcbiAgICBlbnRlckZyb21DbGFzczogU3RyaW5nLFxuICAgIGVudGVyQWN0aXZlQ2xhc3M6IFN0cmluZyxcbiAgICBlbnRlclRvQ2xhc3M6IFN0cmluZyxcbiAgICBhcHBlYXJGcm9tQ2xhc3M6IFN0cmluZyxcbiAgICBhcHBlYXJBY3RpdmVDbGFzczogU3RyaW5nLFxuICAgIGFwcGVhclRvQ2xhc3M6IFN0cmluZyxcbiAgICBsZWF2ZUZyb21DbGFzczogU3RyaW5nLFxuICAgIGxlYXZlQWN0aXZlQ2xhc3M6IFN0cmluZyxcbiAgICBsZWF2ZVRvQ2xhc3M6IFN0cmluZ1xufTtcbmNvbnN0IFRyYW5zaXRpb25Qcm9wc1ZhbGlkYXRvcnMgPSAoVHJhbnNpdGlvbi5wcm9wcyA9XG4gICAgLyojX19QVVJFX18qLyBleHRlbmQoe30sIEJhc2VUcmFuc2l0aW9uLnByb3BzLCBET01UcmFuc2l0aW9uUHJvcHNWYWxpZGF0b3JzKSk7XG4vKipcbiAqICMzMjI3IEluY29taW5nIGhvb2tzIG1heSBiZSBtZXJnZWQgaW50byBhcnJheXMgd2hlbiB3cmFwcGluZyBUcmFuc2l0aW9uXG4gKiB3aXRoIGN1c3RvbSBIT0NzLlxuICovXG5jb25zdCBjYWxsSG9vayA9IChob29rLCBhcmdzID0gW10pID0+IHtcbiAgICBpZiAoaXNBcnJheShob29rKSkge1xuICAgICAgICBob29rLmZvckVhY2goaCA9PiBoKC4uLmFyZ3MpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaG9vaykge1xuICAgICAgICBob29rKC4uLmFyZ3MpO1xuICAgIH1cbn07XG4vKipcbiAqIENoZWNrIGlmIGEgaG9vayBleHBlY3RzIGEgY2FsbGJhY2sgKDJuZCBhcmcpLCB3aGljaCBtZWFucyB0aGUgdXNlclxuICogaW50ZW5kcyB0byBleHBsaWNpdGx5IGNvbnRyb2wgdGhlIGVuZCBvZiB0aGUgdHJhbnNpdGlvbi5cbiAqL1xuY29uc3QgaGFzRXhwbGljaXRDYWxsYmFjayA9IChob29rKSA9PiB7XG4gICAgcmV0dXJuIGhvb2tcbiAgICAgICAgPyBpc0FycmF5KGhvb2spXG4gICAgICAgICAgICA/IGhvb2suc29tZShoID0+IGgubGVuZ3RoID4gMSlcbiAgICAgICAgICAgIDogaG9vay5sZW5ndGggPiAxXG4gICAgICAgIDogZmFsc2U7XG59O1xuZnVuY3Rpb24gcmVzb2x2ZVRyYW5zaXRpb25Qcm9wcyhyYXdQcm9wcykge1xuICAgIGNvbnN0IGJhc2VQcm9wcyA9IHt9O1xuICAgIGZvciAoY29uc3Qga2V5IGluIHJhd1Byb3BzKSB7XG4gICAgICAgIGlmICghKGtleSBpbiBET01UcmFuc2l0aW9uUHJvcHNWYWxpZGF0b3JzKSkge1xuICAgICAgICAgICAgYmFzZVByb3BzW2tleV0gPSByYXdQcm9wc1trZXldO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChyYXdQcm9wcy5jc3MgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBiYXNlUHJvcHM7XG4gICAgfVxuICAgIGNvbnN0IHsgbmFtZSA9ICd2JywgdHlwZSwgZHVyYXRpb24sIGVudGVyRnJvbUNsYXNzID0gYCR7bmFtZX0tZW50ZXItZnJvbWAsIGVudGVyQWN0aXZlQ2xhc3MgPSBgJHtuYW1lfS1lbnRlci1hY3RpdmVgLCBlbnRlclRvQ2xhc3MgPSBgJHtuYW1lfS1lbnRlci10b2AsIGFwcGVhckZyb21DbGFzcyA9IGVudGVyRnJvbUNsYXNzLCBhcHBlYXJBY3RpdmVDbGFzcyA9IGVudGVyQWN0aXZlQ2xhc3MsIGFwcGVhclRvQ2xhc3MgPSBlbnRlclRvQ2xhc3MsIGxlYXZlRnJvbUNsYXNzID0gYCR7bmFtZX0tbGVhdmUtZnJvbWAsIGxlYXZlQWN0aXZlQ2xhc3MgPSBgJHtuYW1lfS1sZWF2ZS1hY3RpdmVgLCBsZWF2ZVRvQ2xhc3MgPSBgJHtuYW1lfS1sZWF2ZS10b2AgfSA9IHJhd1Byb3BzO1xuICAgIGNvbnN0IGR1cmF0aW9ucyA9IG5vcm1hbGl6ZUR1cmF0aW9uKGR1cmF0aW9uKTtcbiAgICBjb25zdCBlbnRlckR1cmF0aW9uID0gZHVyYXRpb25zICYmIGR1cmF0aW9uc1swXTtcbiAgICBjb25zdCBsZWF2ZUR1cmF0aW9uID0gZHVyYXRpb25zICYmIGR1cmF0aW9uc1sxXTtcbiAgICBjb25zdCB7IG9uQmVmb3JlRW50ZXIsIG9uRW50ZXIsIG9uRW50ZXJDYW5jZWxsZWQsIG9uTGVhdmUsIG9uTGVhdmVDYW5jZWxsZWQsIG9uQmVmb3JlQXBwZWFyID0gb25CZWZvcmVFbnRlciwgb25BcHBlYXIgPSBvbkVudGVyLCBvbkFwcGVhckNhbmNlbGxlZCA9IG9uRW50ZXJDYW5jZWxsZWQgfSA9IGJhc2VQcm9wcztcbiAgICBjb25zdCBmaW5pc2hFbnRlciA9IChlbCwgaXNBcHBlYXIsIGRvbmUpID0+IHtcbiAgICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBpc0FwcGVhciA/IGFwcGVhclRvQ2xhc3MgOiBlbnRlclRvQ2xhc3MpO1xuICAgICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIGlzQXBwZWFyID8gYXBwZWFyQWN0aXZlQ2xhc3MgOiBlbnRlckFjdGl2ZUNsYXNzKTtcbiAgICAgICAgZG9uZSAmJiBkb25lKCk7XG4gICAgfTtcbiAgICBjb25zdCBmaW5pc2hMZWF2ZSA9IChlbCwgZG9uZSkgPT4ge1xuICAgICAgICBlbC5faXNMZWF2aW5nID0gZmFsc2U7XG4gICAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVGcm9tQ2xhc3MpO1xuICAgICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIGxlYXZlVG9DbGFzcyk7XG4gICAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVBY3RpdmVDbGFzcyk7XG4gICAgICAgIGRvbmUgJiYgZG9uZSgpO1xuICAgIH07XG4gICAgY29uc3QgbWFrZUVudGVySG9vayA9IChpc0FwcGVhcikgPT4ge1xuICAgICAgICByZXR1cm4gKGVsLCBkb25lKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBob29rID0gaXNBcHBlYXIgPyBvbkFwcGVhciA6IG9uRW50ZXI7XG4gICAgICAgICAgICBjb25zdCByZXNvbHZlID0gKCkgPT4gZmluaXNoRW50ZXIoZWwsIGlzQXBwZWFyLCBkb25lKTtcbiAgICAgICAgICAgIGNhbGxIb29rKGhvb2ssIFtlbCwgcmVzb2x2ZV0pO1xuICAgICAgICAgICAgbmV4dEZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIGlzQXBwZWFyID8gYXBwZWFyRnJvbUNsYXNzIDogZW50ZXJGcm9tQ2xhc3MpO1xuICAgICAgICAgICAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgaXNBcHBlYXIgPyBhcHBlYXJUb0NsYXNzIDogZW50ZXJUb0NsYXNzKTtcbiAgICAgICAgICAgICAgICBpZiAoIWhhc0V4cGxpY2l0Q2FsbGJhY2soaG9vaykpIHtcbiAgICAgICAgICAgICAgICAgICAgd2hlblRyYW5zaXRpb25FbmRzKGVsLCB0eXBlLCBlbnRlckR1cmF0aW9uLCByZXNvbHZlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIHJldHVybiBleHRlbmQoYmFzZVByb3BzLCB7XG4gICAgICAgIG9uQmVmb3JlRW50ZXIoZWwpIHtcbiAgICAgICAgICAgIGNhbGxIb29rKG9uQmVmb3JlRW50ZXIsIFtlbF0pO1xuICAgICAgICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBlbnRlckZyb21DbGFzcyk7XG4gICAgICAgICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIGVudGVyQWN0aXZlQ2xhc3MpO1xuICAgICAgICB9LFxuICAgICAgICBvbkJlZm9yZUFwcGVhcihlbCkge1xuICAgICAgICAgICAgY2FsbEhvb2sob25CZWZvcmVBcHBlYXIsIFtlbF0pO1xuICAgICAgICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBhcHBlYXJGcm9tQ2xhc3MpO1xuICAgICAgICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBhcHBlYXJBY3RpdmVDbGFzcyk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uRW50ZXI6IG1ha2VFbnRlckhvb2soZmFsc2UpLFxuICAgICAgICBvbkFwcGVhcjogbWFrZUVudGVySG9vayh0cnVlKSxcbiAgICAgICAgb25MZWF2ZShlbCwgZG9uZSkge1xuICAgICAgICAgICAgZWwuX2lzTGVhdmluZyA9IHRydWU7XG4gICAgICAgICAgICBjb25zdCByZXNvbHZlID0gKCkgPT4gZmluaXNoTGVhdmUoZWwsIGRvbmUpO1xuICAgICAgICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBsZWF2ZUZyb21DbGFzcyk7XG4gICAgICAgICAgICAvLyBmb3JjZSByZWZsb3cgc28gKi1sZWF2ZS1mcm9tIGNsYXNzZXMgaW1tZWRpYXRlbHkgdGFrZSBlZmZlY3QgKCMyNTkzKVxuICAgICAgICAgICAgZm9yY2VSZWZsb3coKTtcbiAgICAgICAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVBY3RpdmVDbGFzcyk7XG4gICAgICAgICAgICBuZXh0RnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghZWwuX2lzTGVhdmluZykge1xuICAgICAgICAgICAgICAgICAgICAvLyBjYW5jZWxsZWRcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIGxlYXZlRnJvbUNsYXNzKTtcbiAgICAgICAgICAgICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIGxlYXZlVG9DbGFzcyk7XG4gICAgICAgICAgICAgICAgaWYgKCFoYXNFeHBsaWNpdENhbGxiYWNrKG9uTGVhdmUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHdoZW5UcmFuc2l0aW9uRW5kcyhlbCwgdHlwZSwgbGVhdmVEdXJhdGlvbiwgcmVzb2x2ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjYWxsSG9vayhvbkxlYXZlLCBbZWwsIHJlc29sdmVdKTtcbiAgICAgICAgfSxcbiAgICAgICAgb25FbnRlckNhbmNlbGxlZChlbCkge1xuICAgICAgICAgICAgZmluaXNoRW50ZXIoZWwsIGZhbHNlKTtcbiAgICAgICAgICAgIGNhbGxIb29rKG9uRW50ZXJDYW5jZWxsZWQsIFtlbF0pO1xuICAgICAgICB9LFxuICAgICAgICBvbkFwcGVhckNhbmNlbGxlZChlbCkge1xuICAgICAgICAgICAgZmluaXNoRW50ZXIoZWwsIHRydWUpO1xuICAgICAgICAgICAgY2FsbEhvb2sob25BcHBlYXJDYW5jZWxsZWQsIFtlbF0pO1xuICAgICAgICB9LFxuICAgICAgICBvbkxlYXZlQ2FuY2VsbGVkKGVsKSB7XG4gICAgICAgICAgICBmaW5pc2hMZWF2ZShlbCk7XG4gICAgICAgICAgICBjYWxsSG9vayhvbkxlYXZlQ2FuY2VsbGVkLCBbZWxdKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuZnVuY3Rpb24gbm9ybWFsaXplRHVyYXRpb24oZHVyYXRpb24pIHtcbiAgICBpZiAoZHVyYXRpb24gPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNPYmplY3QoZHVyYXRpb24pKSB7XG4gICAgICAgIHJldHVybiBbTnVtYmVyT2YoZHVyYXRpb24uZW50ZXIpLCBOdW1iZXJPZihkdXJhdGlvbi5sZWF2ZSldO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgbiA9IE51bWJlck9mKGR1cmF0aW9uKTtcbiAgICAgICAgcmV0dXJuIFtuLCBuXTtcbiAgICB9XG59XG5mdW5jdGlvbiBOdW1iZXJPZih2YWwpIHtcbiAgICBjb25zdCByZXMgPSB0b051bWJlcih2YWwpO1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpXG4gICAgICAgIHZhbGlkYXRlRHVyYXRpb24ocmVzKTtcbiAgICByZXR1cm4gcmVzO1xufVxuZnVuY3Rpb24gdmFsaWRhdGVEdXJhdGlvbih2YWwpIHtcbiAgICBpZiAodHlwZW9mIHZhbCAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgd2FybihgPHRyYW5zaXRpb24+IGV4cGxpY2l0IGR1cmF0aW9uIGlzIG5vdCBhIHZhbGlkIG51bWJlciAtIGAgK1xuICAgICAgICAgICAgYGdvdCAke0pTT04uc3RyaW5naWZ5KHZhbCl9LmApO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc05hTih2YWwpKSB7XG4gICAgICAgIHdhcm4oYDx0cmFuc2l0aW9uPiBleHBsaWNpdCBkdXJhdGlvbiBpcyBOYU4gLSBgICtcbiAgICAgICAgICAgICd0aGUgZHVyYXRpb24gZXhwcmVzc2lvbiBtaWdodCBiZSBpbmNvcnJlY3QuJyk7XG4gICAgfVxufVxuZnVuY3Rpb24gYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBjbHMpIHtcbiAgICBjbHMuc3BsaXQoL1xccysvKS5mb3JFYWNoKGMgPT4gYyAmJiBlbC5jbGFzc0xpc3QuYWRkKGMpKTtcbiAgICAoZWwuX3Z0YyB8fFxuICAgICAgICAoZWwuX3Z0YyA9IG5ldyBTZXQoKSkpLmFkZChjbHMpO1xufVxuZnVuY3Rpb24gcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBjbHMpIHtcbiAgICBjbHMuc3BsaXQoL1xccysvKS5mb3JFYWNoKGMgPT4gYyAmJiBlbC5jbGFzc0xpc3QucmVtb3ZlKGMpKTtcbiAgICBjb25zdCB7IF92dGMgfSA9IGVsO1xuICAgIGlmIChfdnRjKSB7XG4gICAgICAgIF92dGMuZGVsZXRlKGNscyk7XG4gICAgICAgIGlmICghX3Z0Yy5zaXplKSB7XG4gICAgICAgICAgICBlbC5fdnRjID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gbmV4dEZyYW1lKGNiKSB7XG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGNiKTtcbiAgICB9KTtcbn1cbmxldCBlbmRJZCA9IDA7XG5mdW5jdGlvbiB3aGVuVHJhbnNpdGlvbkVuZHMoZWwsIGV4cGVjdGVkVHlwZSwgZXhwbGljaXRUaW1lb3V0LCByZXNvbHZlKSB7XG4gICAgY29uc3QgaWQgPSAoZWwuX2VuZElkID0gKytlbmRJZCk7XG4gICAgY29uc3QgcmVzb2x2ZUlmTm90U3RhbGUgPSAoKSA9PiB7XG4gICAgICAgIGlmIChpZCA9PT0gZWwuX2VuZElkKSB7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGlmIChleHBsaWNpdFRpbWVvdXQpIHtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQocmVzb2x2ZUlmTm90U3RhbGUsIGV4cGxpY2l0VGltZW91dCk7XG4gICAgfVxuICAgIGNvbnN0IHsgdHlwZSwgdGltZW91dCwgcHJvcENvdW50IH0gPSBnZXRUcmFuc2l0aW9uSW5mbyhlbCwgZXhwZWN0ZWRUeXBlKTtcbiAgICBpZiAoIXR5cGUpIHtcbiAgICAgICAgcmV0dXJuIHJlc29sdmUoKTtcbiAgICB9XG4gICAgY29uc3QgZW5kRXZlbnQgPSB0eXBlICsgJ2VuZCc7XG4gICAgbGV0IGVuZGVkID0gMDtcbiAgICBjb25zdCBlbmQgPSAoKSA9PiB7XG4gICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoZW5kRXZlbnQsIG9uRW5kKTtcbiAgICAgICAgcmVzb2x2ZUlmTm90U3RhbGUoKTtcbiAgICB9O1xuICAgIGNvbnN0IG9uRW5kID0gKGUpID0+IHtcbiAgICAgICAgaWYgKGUudGFyZ2V0ID09PSBlbCAmJiArK2VuZGVkID49IHByb3BDb3VudCkge1xuICAgICAgICAgICAgZW5kKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpZiAoZW5kZWQgPCBwcm9wQ291bnQpIHtcbiAgICAgICAgICAgIGVuZCgpO1xuICAgICAgICB9XG4gICAgfSwgdGltZW91dCArIDEpO1xuICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoZW5kRXZlbnQsIG9uRW5kKTtcbn1cbmZ1bmN0aW9uIGdldFRyYW5zaXRpb25JbmZvKGVsLCBleHBlY3RlZFR5cGUpIHtcbiAgICBjb25zdCBzdHlsZXMgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbCk7XG4gICAgLy8gSlNET00gbWF5IHJldHVybiB1bmRlZmluZWQgZm9yIHRyYW5zaXRpb24gcHJvcGVydGllc1xuICAgIGNvbnN0IGdldFN0eWxlUHJvcGVydGllcyA9IChrZXkpID0+IChzdHlsZXNba2V5XSB8fCAnJykuc3BsaXQoJywgJyk7XG4gICAgY29uc3QgdHJhbnNpdGlvbkRlbGF5cyA9IGdldFN0eWxlUHJvcGVydGllcyhgJHtUUkFOU0lUSU9OfURlbGF5YCk7XG4gICAgY29uc3QgdHJhbnNpdGlvbkR1cmF0aW9ucyA9IGdldFN0eWxlUHJvcGVydGllcyhgJHtUUkFOU0lUSU9OfUR1cmF0aW9uYCk7XG4gICAgY29uc3QgdHJhbnNpdGlvblRpbWVvdXQgPSBnZXRUaW1lb3V0KHRyYW5zaXRpb25EZWxheXMsIHRyYW5zaXRpb25EdXJhdGlvbnMpO1xuICAgIGNvbnN0IGFuaW1hdGlvbkRlbGF5cyA9IGdldFN0eWxlUHJvcGVydGllcyhgJHtBTklNQVRJT059RGVsYXlgKTtcbiAgICBjb25zdCBhbmltYXRpb25EdXJhdGlvbnMgPSBnZXRTdHlsZVByb3BlcnRpZXMoYCR7QU5JTUFUSU9OfUR1cmF0aW9uYCk7XG4gICAgY29uc3QgYW5pbWF0aW9uVGltZW91dCA9IGdldFRpbWVvdXQoYW5pbWF0aW9uRGVsYXlzLCBhbmltYXRpb25EdXJhdGlvbnMpO1xuICAgIGxldCB0eXBlID0gbnVsbDtcbiAgICBsZXQgdGltZW91dCA9IDA7XG4gICAgbGV0IHByb3BDb3VudCA9IDA7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKGV4cGVjdGVkVHlwZSA9PT0gVFJBTlNJVElPTikge1xuICAgICAgICBpZiAodHJhbnNpdGlvblRpbWVvdXQgPiAwKSB7XG4gICAgICAgICAgICB0eXBlID0gVFJBTlNJVElPTjtcbiAgICAgICAgICAgIHRpbWVvdXQgPSB0cmFuc2l0aW9uVGltZW91dDtcbiAgICAgICAgICAgIHByb3BDb3VudCA9IHRyYW5zaXRpb25EdXJhdGlvbnMubGVuZ3RoO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGV4cGVjdGVkVHlwZSA9PT0gQU5JTUFUSU9OKSB7XG4gICAgICAgIGlmIChhbmltYXRpb25UaW1lb3V0ID4gMCkge1xuICAgICAgICAgICAgdHlwZSA9IEFOSU1BVElPTjtcbiAgICAgICAgICAgIHRpbWVvdXQgPSBhbmltYXRpb25UaW1lb3V0O1xuICAgICAgICAgICAgcHJvcENvdW50ID0gYW5pbWF0aW9uRHVyYXRpb25zLmxlbmd0aDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGltZW91dCA9IE1hdGgubWF4KHRyYW5zaXRpb25UaW1lb3V0LCBhbmltYXRpb25UaW1lb3V0KTtcbiAgICAgICAgdHlwZSA9XG4gICAgICAgICAgICB0aW1lb3V0ID4gMFxuICAgICAgICAgICAgICAgID8gdHJhbnNpdGlvblRpbWVvdXQgPiBhbmltYXRpb25UaW1lb3V0XG4gICAgICAgICAgICAgICAgICAgID8gVFJBTlNJVElPTlxuICAgICAgICAgICAgICAgICAgICA6IEFOSU1BVElPTlxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgcHJvcENvdW50ID0gdHlwZVxuICAgICAgICAgICAgPyB0eXBlID09PSBUUkFOU0lUSU9OXG4gICAgICAgICAgICAgICAgPyB0cmFuc2l0aW9uRHVyYXRpb25zLmxlbmd0aFxuICAgICAgICAgICAgICAgIDogYW5pbWF0aW9uRHVyYXRpb25zLmxlbmd0aFxuICAgICAgICAgICAgOiAwO1xuICAgIH1cbiAgICBjb25zdCBoYXNUcmFuc2Zvcm0gPSB0eXBlID09PSBUUkFOU0lUSU9OICYmXG4gICAgICAgIC9cXGIodHJhbnNmb3JtfGFsbCkoLHwkKS8udGVzdChnZXRTdHlsZVByb3BlcnRpZXMoYCR7VFJBTlNJVElPTn1Qcm9wZXJ0eWApLnRvU3RyaW5nKCkpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGUsXG4gICAgICAgIHRpbWVvdXQsXG4gICAgICAgIHByb3BDb3VudCxcbiAgICAgICAgaGFzVHJhbnNmb3JtXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGdldFRpbWVvdXQoZGVsYXlzLCBkdXJhdGlvbnMpIHtcbiAgICB3aGlsZSAoZGVsYXlzLmxlbmd0aCA8IGR1cmF0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgZGVsYXlzID0gZGVsYXlzLmNvbmNhdChkZWxheXMpO1xuICAgIH1cbiAgICByZXR1cm4gTWF0aC5tYXgoLi4uZHVyYXRpb25zLm1hcCgoZCwgaSkgPT4gdG9NcyhkKSArIHRvTXMoZGVsYXlzW2ldKSkpO1xufVxuLy8gT2xkIHZlcnNpb25zIG9mIENocm9taXVtIChiZWxvdyA2MS4wLjMxNjMuMTAwKSBmb3JtYXRzIGZsb2F0aW5nIHBvaW50ZXJcbi8vIG51bWJlcnMgaW4gYSBsb2NhbGUtZGVwZW5kZW50IHdheSwgdXNpbmcgYSBjb21tYSBpbnN0ZWFkIG9mIGEgZG90LlxuLy8gSWYgY29tbWEgaXMgbm90IHJlcGxhY2VkIHdpdGggYSBkb3QsIHRoZSBpbnB1dCB3aWxsIGJlIHJvdW5kZWQgZG93blxuLy8gKGkuZS4gYWN0aW5nIGFzIGEgZmxvb3IgZnVuY3Rpb24pIGNhdXNpbmcgdW5leHBlY3RlZCBiZWhhdmlvcnNcbmZ1bmN0aW9uIHRvTXMocykge1xuICAgIHJldHVybiBOdW1iZXIocy5zbGljZSgwLCAtMSkucmVwbGFjZSgnLCcsICcuJykpICogMTAwMDtcbn1cbi8vIHN5bmNocm9ub3VzbHkgZm9yY2UgbGF5b3V0IHRvIHB1dCBlbGVtZW50cyBpbnRvIGEgY2VydGFpbiBzdGF0ZVxuZnVuY3Rpb24gZm9yY2VSZWZsb3coKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmJvZHkub2Zmc2V0SGVpZ2h0O1xufVxuXG5jb25zdCBwb3NpdGlvbk1hcCA9IG5ldyBXZWFrTWFwKCk7XG5jb25zdCBuZXdQb3NpdGlvbk1hcCA9IG5ldyBXZWFrTWFwKCk7XG5jb25zdCBUcmFuc2l0aW9uR3JvdXBJbXBsID0ge1xuICAgIG5hbWU6ICdUcmFuc2l0aW9uR3JvdXAnLFxuICAgIHByb3BzOiAvKiNfX1BVUkVfXyovIGV4dGVuZCh7fSwgVHJhbnNpdGlvblByb3BzVmFsaWRhdG9ycywge1xuICAgICAgICB0YWc6IFN0cmluZyxcbiAgICAgICAgbW92ZUNsYXNzOiBTdHJpbmdcbiAgICB9KSxcbiAgICBzZXR1cChwcm9wcywgeyBzbG90cyB9KSB7XG4gICAgICAgIGNvbnN0IGluc3RhbmNlID0gZ2V0Q3VycmVudEluc3RhbmNlKCk7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdXNlVHJhbnNpdGlvblN0YXRlKCk7XG4gICAgICAgIGxldCBwcmV2Q2hpbGRyZW47XG4gICAgICAgIGxldCBjaGlsZHJlbjtcbiAgICAgICAgb25VcGRhdGVkKCgpID0+IHtcbiAgICAgICAgICAgIC8vIGNoaWxkcmVuIGlzIGd1YXJhbnRlZWQgdG8gZXhpc3QgYWZ0ZXIgaW5pdGlhbCByZW5kZXJcbiAgICAgICAgICAgIGlmICghcHJldkNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG1vdmVDbGFzcyA9IHByb3BzLm1vdmVDbGFzcyB8fCBgJHtwcm9wcy5uYW1lIHx8ICd2J30tbW92ZWA7XG4gICAgICAgICAgICBpZiAoIWhhc0NTU1RyYW5zZm9ybShwcmV2Q2hpbGRyZW5bMF0uZWwsIGluc3RhbmNlLnZub2RlLmVsLCBtb3ZlQ2xhc3MpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gd2UgZGl2aWRlIHRoZSB3b3JrIGludG8gdGhyZWUgbG9vcHMgdG8gYXZvaWQgbWl4aW5nIERPTSByZWFkcyBhbmQgd3JpdGVzXG4gICAgICAgICAgICAvLyBpbiBlYWNoIGl0ZXJhdGlvbiAtIHdoaWNoIGhlbHBzIHByZXZlbnQgbGF5b3V0IHRocmFzaGluZy5cbiAgICAgICAgICAgIHByZXZDaGlsZHJlbi5mb3JFYWNoKGNhbGxQZW5kaW5nQ2JzKTtcbiAgICAgICAgICAgIHByZXZDaGlsZHJlbi5mb3JFYWNoKHJlY29yZFBvc2l0aW9uKTtcbiAgICAgICAgICAgIGNvbnN0IG1vdmVkQ2hpbGRyZW4gPSBwcmV2Q2hpbGRyZW4uZmlsdGVyKGFwcGx5VHJhbnNsYXRpb24pO1xuICAgICAgICAgICAgLy8gZm9yY2UgcmVmbG93IHRvIHB1dCBldmVyeXRoaW5nIGluIHBvc2l0aW9uXG4gICAgICAgICAgICBmb3JjZVJlZmxvdygpO1xuICAgICAgICAgICAgbW92ZWRDaGlsZHJlbi5mb3JFYWNoKGMgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gYy5lbDtcbiAgICAgICAgICAgICAgICBjb25zdCBzdHlsZSA9IGVsLnN0eWxlO1xuICAgICAgICAgICAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgbW92ZUNsYXNzKTtcbiAgICAgICAgICAgICAgICBzdHlsZS50cmFuc2Zvcm0gPSBzdHlsZS53ZWJraXRUcmFuc2Zvcm0gPSBzdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSAnJztcbiAgICAgICAgICAgICAgICBjb25zdCBjYiA9IChlbC5fbW92ZUNiID0gKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUgJiYgZS50YXJnZXQgIT09IGVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlIHx8IC90cmFuc2Zvcm0kLy50ZXN0KGUucHJvcGVydHlOYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIGNiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsLl9tb3ZlQ2IgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBtb3ZlQ2xhc3MpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIGNiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJhd1Byb3BzID0gdG9SYXcocHJvcHMpO1xuICAgICAgICAgICAgY29uc3QgY3NzVHJhbnNpdGlvblByb3BzID0gcmVzb2x2ZVRyYW5zaXRpb25Qcm9wcyhyYXdQcm9wcyk7XG4gICAgICAgICAgICBsZXQgdGFnID0gcmF3UHJvcHMudGFnIHx8IEZyYWdtZW50O1xuICAgICAgICAgICAgcHJldkNoaWxkcmVuID0gY2hpbGRyZW47XG4gICAgICAgICAgICBjaGlsZHJlbiA9IHNsb3RzLmRlZmF1bHQgPyBnZXRUcmFuc2l0aW9uUmF3Q2hpbGRyZW4oc2xvdHMuZGVmYXVsdCgpKSA6IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkID0gY2hpbGRyZW5baV07XG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkLmtleSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldFRyYW5zaXRpb25Ib29rcyhjaGlsZCwgcmVzb2x2ZVRyYW5zaXRpb25Ib29rcyhjaGlsZCwgY3NzVHJhbnNpdGlvblByb3BzLCBzdGF0ZSwgaW5zdGFuY2UpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYDxUcmFuc2l0aW9uR3JvdXA+IGNoaWxkcmVuIG11c3QgYmUga2V5ZWQuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHByZXZDaGlsZHJlbikge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJldkNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkID0gcHJldkNoaWxkcmVuW2ldO1xuICAgICAgICAgICAgICAgICAgICBzZXRUcmFuc2l0aW9uSG9va3MoY2hpbGQsIHJlc29sdmVUcmFuc2l0aW9uSG9va3MoY2hpbGQsIGNzc1RyYW5zaXRpb25Qcm9wcywgc3RhdGUsIGluc3RhbmNlKSk7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uTWFwLnNldChjaGlsZCwgY2hpbGQuZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVWTm9kZSh0YWcsIG51bGwsIGNoaWxkcmVuKTtcbiAgICAgICAgfTtcbiAgICB9XG59O1xuY29uc3QgVHJhbnNpdGlvbkdyb3VwID0gVHJhbnNpdGlvbkdyb3VwSW1wbDtcbmZ1bmN0aW9uIGNhbGxQZW5kaW5nQ2JzKGMpIHtcbiAgICBjb25zdCBlbCA9IGMuZWw7XG4gICAgaWYgKGVsLl9tb3ZlQ2IpIHtcbiAgICAgICAgZWwuX21vdmVDYigpO1xuICAgIH1cbiAgICBpZiAoZWwuX2VudGVyQ2IpIHtcbiAgICAgICAgZWwuX2VudGVyQ2IoKTtcbiAgICB9XG59XG5mdW5jdGlvbiByZWNvcmRQb3NpdGlvbihjKSB7XG4gICAgbmV3UG9zaXRpb25NYXAuc2V0KGMsIGMuZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpO1xufVxuZnVuY3Rpb24gYXBwbHlUcmFuc2xhdGlvbihjKSB7XG4gICAgY29uc3Qgb2xkUG9zID0gcG9zaXRpb25NYXAuZ2V0KGMpO1xuICAgIGNvbnN0IG5ld1BvcyA9IG5ld1Bvc2l0aW9uTWFwLmdldChjKTtcbiAgICBjb25zdCBkeCA9IG9sZFBvcy5sZWZ0IC0gbmV3UG9zLmxlZnQ7XG4gICAgY29uc3QgZHkgPSBvbGRQb3MudG9wIC0gbmV3UG9zLnRvcDtcbiAgICBpZiAoZHggfHwgZHkpIHtcbiAgICAgICAgY29uc3QgcyA9IGMuZWwuc3R5bGU7XG4gICAgICAgIHMudHJhbnNmb3JtID0gcy53ZWJraXRUcmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCR7ZHh9cHgsJHtkeX1weClgO1xuICAgICAgICBzLnRyYW5zaXRpb25EdXJhdGlvbiA9ICcwcyc7XG4gICAgICAgIHJldHVybiBjO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGhhc0NTU1RyYW5zZm9ybShlbCwgcm9vdCwgbW92ZUNsYXNzKSB7XG4gICAgLy8gRGV0ZWN0IHdoZXRoZXIgYW4gZWxlbWVudCB3aXRoIHRoZSBtb3ZlIGNsYXNzIGFwcGxpZWQgaGFzXG4gICAgLy8gQ1NTIHRyYW5zaXRpb25zLiBTaW5jZSB0aGUgZWxlbWVudCBtYXkgYmUgaW5zaWRlIGFuIGVudGVyaW5nXG4gICAgLy8gdHJhbnNpdGlvbiBhdCB0aGlzIHZlcnkgbW9tZW50LCB3ZSBtYWtlIGEgY2xvbmUgb2YgaXQgYW5kIHJlbW92ZVxuICAgIC8vIGFsbCBvdGhlciB0cmFuc2l0aW9uIGNsYXNzZXMgYXBwbGllZCB0byBlbnN1cmUgb25seSB0aGUgbW92ZSBjbGFzc1xuICAgIC8vIGlzIGFwcGxpZWQuXG4gICAgY29uc3QgY2xvbmUgPSBlbC5jbG9uZU5vZGUoKTtcbiAgICBpZiAoZWwuX3Z0Yykge1xuICAgICAgICBlbC5fdnRjLmZvckVhY2goY2xzID0+IHtcbiAgICAgICAgICAgIGNscy5zcGxpdCgvXFxzKy8pLmZvckVhY2goYyA9PiBjICYmIGNsb25lLmNsYXNzTGlzdC5yZW1vdmUoYykpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgbW92ZUNsYXNzLnNwbGl0KC9cXHMrLykuZm9yRWFjaChjID0+IGMgJiYgY2xvbmUuY2xhc3NMaXN0LmFkZChjKSk7XG4gICAgY2xvbmUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICBjb25zdCBjb250YWluZXIgPSAocm9vdC5ub2RlVHlwZSA9PT0gMSA/IHJvb3QgOiByb290LnBhcmVudE5vZGUpO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjbG9uZSk7XG4gICAgY29uc3QgeyBoYXNUcmFuc2Zvcm0gfSA9IGdldFRyYW5zaXRpb25JbmZvKGNsb25lKTtcbiAgICBjb250YWluZXIucmVtb3ZlQ2hpbGQoY2xvbmUpO1xuICAgIHJldHVybiBoYXNUcmFuc2Zvcm07XG59XG5cbmNvbnN0IGdldE1vZGVsQXNzaWduZXIgPSAodm5vZGUpID0+IHtcbiAgICBjb25zdCBmbiA9IHZub2RlLnByb3BzWydvblVwZGF0ZTptb2RlbFZhbHVlJ10gfHxcbiAgICAgICAgKGZhbHNlICk7XG4gICAgcmV0dXJuIGlzQXJyYXkoZm4pID8gdmFsdWUgPT4gaW52b2tlQXJyYXlGbnMoZm4sIHZhbHVlKSA6IGZuO1xufTtcbmZ1bmN0aW9uIG9uQ29tcG9zaXRpb25TdGFydChlKSB7XG4gICAgZS50YXJnZXQuY29tcG9zaW5nID0gdHJ1ZTtcbn1cbmZ1bmN0aW9uIG9uQ29tcG9zaXRpb25FbmQoZSkge1xuICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0O1xuICAgIGlmICh0YXJnZXQuY29tcG9zaW5nKSB7XG4gICAgICAgIHRhcmdldC5jb21wb3NpbmcgPSBmYWxzZTtcbiAgICAgICAgdGFyZ2V0LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdpbnB1dCcpKTtcbiAgICB9XG59XG4vLyBXZSBhcmUgZXhwb3J0aW5nIHRoZSB2LW1vZGVsIHJ1bnRpbWUgZGlyZWN0bHkgYXMgdm5vZGUgaG9va3Mgc28gdGhhdCBpdCBjYW5cbi8vIGJlIHRyZWUtc2hha2VuIGluIGNhc2Ugdi1tb2RlbCBpcyBuZXZlciB1c2VkLlxuY29uc3Qgdk1vZGVsVGV4dCA9IHtcbiAgICBjcmVhdGVkKGVsLCB7IG1vZGlmaWVyczogeyBsYXp5LCB0cmltLCBudW1iZXIgfSB9LCB2bm9kZSkge1xuICAgICAgICBlbC5fYXNzaWduID0gZ2V0TW9kZWxBc3NpZ25lcih2bm9kZSk7XG4gICAgICAgIGNvbnN0IGNhc3RUb051bWJlciA9IG51bWJlciB8fCAodm5vZGUucHJvcHMgJiYgdm5vZGUucHJvcHMudHlwZSA9PT0gJ251bWJlcicpO1xuICAgICAgICBhZGRFdmVudExpc3RlbmVyKGVsLCBsYXp5ID8gJ2NoYW5nZScgOiAnaW5wdXQnLCBlID0+IHtcbiAgICAgICAgICAgIGlmIChlLnRhcmdldC5jb21wb3NpbmcpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgbGV0IGRvbVZhbHVlID0gZWwudmFsdWU7XG4gICAgICAgICAgICBpZiAodHJpbSkge1xuICAgICAgICAgICAgICAgIGRvbVZhbHVlID0gZG9tVmFsdWUudHJpbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNhc3RUb051bWJlcikge1xuICAgICAgICAgICAgICAgIGRvbVZhbHVlID0gdG9OdW1iZXIoZG9tVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWwuX2Fzc2lnbihkb21WYWx1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodHJpbSkge1xuICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcihlbCwgJ2NoYW5nZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICBlbC52YWx1ZSA9IGVsLnZhbHVlLnRyaW0oKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICghbGF6eSkge1xuICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcihlbCwgJ2NvbXBvc2l0aW9uc3RhcnQnLCBvbkNvbXBvc2l0aW9uU3RhcnQpO1xuICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcihlbCwgJ2NvbXBvc2l0aW9uZW5kJywgb25Db21wb3NpdGlvbkVuZCk7XG4gICAgICAgICAgICAvLyBTYWZhcmkgPCAxMC4yICYgVUlXZWJWaWV3IGRvZXNuJ3QgZmlyZSBjb21wb3NpdGlvbmVuZCB3aGVuXG4gICAgICAgICAgICAvLyBzd2l0Y2hpbmcgZm9jdXMgYmVmb3JlIGNvbmZpcm1pbmcgY29tcG9zaXRpb24gY2hvaWNlXG4gICAgICAgICAgICAvLyB0aGlzIGFsc28gZml4ZXMgdGhlIGlzc3VlIHdoZXJlIHNvbWUgYnJvd3NlcnMgZS5nLiBpT1MgQ2hyb21lXG4gICAgICAgICAgICAvLyBmaXJlcyBcImNoYW5nZVwiIGluc3RlYWQgb2YgXCJpbnB1dFwiIG9uIGF1dG9jb21wbGV0ZS5cbiAgICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoZWwsICdjaGFuZ2UnLCBvbkNvbXBvc2l0aW9uRW5kKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgLy8gc2V0IHZhbHVlIG9uIG1vdW50ZWQgc28gaXQncyBhZnRlciBtaW4vbWF4IGZvciB0eXBlPVwicmFuZ2VcIlxuICAgIG1vdW50ZWQoZWwsIHsgdmFsdWUgfSkge1xuICAgICAgICBlbC52YWx1ZSA9IHZhbHVlID09IG51bGwgPyAnJyA6IHZhbHVlO1xuICAgIH0sXG4gICAgYmVmb3JlVXBkYXRlKGVsLCB7IHZhbHVlLCBtb2RpZmllcnM6IHsgbGF6eSwgdHJpbSwgbnVtYmVyIH0gfSwgdm5vZGUpIHtcbiAgICAgICAgZWwuX2Fzc2lnbiA9IGdldE1vZGVsQXNzaWduZXIodm5vZGUpO1xuICAgICAgICAvLyBhdm9pZCBjbGVhcmluZyB1bnJlc29sdmVkIHRleHQuICMyMzAyXG4gICAgICAgIGlmIChlbC5jb21wb3NpbmcpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSBlbCAmJiBlbC50eXBlICE9PSAncmFuZ2UnKSB7XG4gICAgICAgICAgICBpZiAobGF6eSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0cmltICYmIGVsLnZhbHVlLnRyaW0oKSA9PT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKG51bWJlciB8fCBlbC50eXBlID09PSAnbnVtYmVyJykgJiYgdG9OdW1iZXIoZWwudmFsdWUpID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IHZhbHVlID09IG51bGwgPyAnJyA6IHZhbHVlO1xuICAgICAgICBpZiAoZWwudmFsdWUgIT09IG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICBlbC52YWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgICB9XG4gICAgfVxufTtcbmNvbnN0IHZNb2RlbENoZWNrYm94ID0ge1xuICAgIC8vICM0MDk2IGFycmF5IGNoZWNrYm94ZXMgbmVlZCB0byBiZSBkZWVwIHRyYXZlcnNlZFxuICAgIGRlZXA6IHRydWUsXG4gICAgY3JlYXRlZChlbCwgXywgdm5vZGUpIHtcbiAgICAgICAgZWwuX2Fzc2lnbiA9IGdldE1vZGVsQXNzaWduZXIodm5vZGUpO1xuICAgICAgICBhZGRFdmVudExpc3RlbmVyKGVsLCAnY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbW9kZWxWYWx1ZSA9IGVsLl9tb2RlbFZhbHVlO1xuICAgICAgICAgICAgY29uc3QgZWxlbWVudFZhbHVlID0gZ2V0VmFsdWUoZWwpO1xuICAgICAgICAgICAgY29uc3QgY2hlY2tlZCA9IGVsLmNoZWNrZWQ7XG4gICAgICAgICAgICBjb25zdCBhc3NpZ24gPSBlbC5fYXNzaWduO1xuICAgICAgICAgICAgaWYgKGlzQXJyYXkobW9kZWxWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IGxvb3NlSW5kZXhPZihtb2RlbFZhbHVlLCBlbGVtZW50VmFsdWUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZvdW5kID0gaW5kZXggIT09IC0xO1xuICAgICAgICAgICAgICAgIGlmIChjaGVja2VkICYmICFmb3VuZCkge1xuICAgICAgICAgICAgICAgICAgICBhc3NpZ24obW9kZWxWYWx1ZS5jb25jYXQoZWxlbWVudFZhbHVlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFjaGVja2VkICYmIGZvdW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkID0gWy4uLm1vZGVsVmFsdWVdO1xuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICBhc3NpZ24oZmlsdGVyZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzU2V0KG1vZGVsVmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2xvbmVkID0gbmV3IFNldChtb2RlbFZhbHVlKTtcbiAgICAgICAgICAgICAgICBpZiAoY2hlY2tlZCkge1xuICAgICAgICAgICAgICAgICAgICBjbG9uZWQuYWRkKGVsZW1lbnRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjbG9uZWQuZGVsZXRlKGVsZW1lbnRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFzc2lnbihjbG9uZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXNzaWduKGdldENoZWNrYm94VmFsdWUoZWwsIGNoZWNrZWQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICAvLyBzZXQgaW5pdGlhbCBjaGVja2VkIG9uIG1vdW50IHRvIHdhaXQgZm9yIHRydWUtdmFsdWUvZmFsc2UtdmFsdWVcbiAgICBtb3VudGVkOiBzZXRDaGVja2VkLFxuICAgIGJlZm9yZVVwZGF0ZShlbCwgYmluZGluZywgdm5vZGUpIHtcbiAgICAgICAgZWwuX2Fzc2lnbiA9IGdldE1vZGVsQXNzaWduZXIodm5vZGUpO1xuICAgICAgICBzZXRDaGVja2VkKGVsLCBiaW5kaW5nLCB2bm9kZSk7XG4gICAgfVxufTtcbmZ1bmN0aW9uIHNldENoZWNrZWQoZWwsIHsgdmFsdWUsIG9sZFZhbHVlIH0sIHZub2RlKSB7XG4gICAgZWwuX21vZGVsVmFsdWUgPSB2YWx1ZTtcbiAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgZWwuY2hlY2tlZCA9IGxvb3NlSW5kZXhPZih2YWx1ZSwgdm5vZGUucHJvcHMudmFsdWUpID4gLTE7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzU2V0KHZhbHVlKSkge1xuICAgICAgICBlbC5jaGVja2VkID0gdmFsdWUuaGFzKHZub2RlLnByb3BzLnZhbHVlKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodmFsdWUgIT09IG9sZFZhbHVlKSB7XG4gICAgICAgIGVsLmNoZWNrZWQgPSBsb29zZUVxdWFsKHZhbHVlLCBnZXRDaGVja2JveFZhbHVlKGVsLCB0cnVlKSk7XG4gICAgfVxufVxuY29uc3Qgdk1vZGVsUmFkaW8gPSB7XG4gICAgY3JlYXRlZChlbCwgeyB2YWx1ZSB9LCB2bm9kZSkge1xuICAgICAgICBlbC5jaGVja2VkID0gbG9vc2VFcXVhbCh2YWx1ZSwgdm5vZGUucHJvcHMudmFsdWUpO1xuICAgICAgICBlbC5fYXNzaWduID0gZ2V0TW9kZWxBc3NpZ25lcih2bm9kZSk7XG4gICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoZWwsICdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgICAgICBlbC5fYXNzaWduKGdldFZhbHVlKGVsKSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgYmVmb3JlVXBkYXRlKGVsLCB7IHZhbHVlLCBvbGRWYWx1ZSB9LCB2bm9kZSkge1xuICAgICAgICBlbC5fYXNzaWduID0gZ2V0TW9kZWxBc3NpZ25lcih2bm9kZSk7XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gb2xkVmFsdWUpIHtcbiAgICAgICAgICAgIGVsLmNoZWNrZWQgPSBsb29zZUVxdWFsKHZhbHVlLCB2bm9kZS5wcm9wcy52YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuY29uc3Qgdk1vZGVsU2VsZWN0ID0ge1xuICAgIC8vIDxzZWxlY3QgbXVsdGlwbGU+IHZhbHVlIG5lZWQgdG8gYmUgZGVlcCB0cmF2ZXJzZWRcbiAgICBkZWVwOiB0cnVlLFxuICAgIGNyZWF0ZWQoZWwsIHsgdmFsdWUsIG1vZGlmaWVyczogeyBudW1iZXIgfSB9LCB2bm9kZSkge1xuICAgICAgICBjb25zdCBpc1NldE1vZGVsID0gaXNTZXQodmFsdWUpO1xuICAgICAgICBhZGRFdmVudExpc3RlbmVyKGVsLCAnY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRWYWwgPSBBcnJheS5wcm90b3R5cGUuZmlsdGVyXG4gICAgICAgICAgICAgICAgLmNhbGwoZWwub3B0aW9ucywgKG8pID0+IG8uc2VsZWN0ZWQpXG4gICAgICAgICAgICAgICAgLm1hcCgobykgPT4gbnVtYmVyID8gdG9OdW1iZXIoZ2V0VmFsdWUobykpIDogZ2V0VmFsdWUobykpO1xuICAgICAgICAgICAgZWwuX2Fzc2lnbihlbC5tdWx0aXBsZVxuICAgICAgICAgICAgICAgID8gaXNTZXRNb2RlbFxuICAgICAgICAgICAgICAgICAgICA/IG5ldyBTZXQoc2VsZWN0ZWRWYWwpXG4gICAgICAgICAgICAgICAgICAgIDogc2VsZWN0ZWRWYWxcbiAgICAgICAgICAgICAgICA6IHNlbGVjdGVkVmFsWzBdKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGVsLl9hc3NpZ24gPSBnZXRNb2RlbEFzc2lnbmVyKHZub2RlKTtcbiAgICB9LFxuICAgIC8vIHNldCB2YWx1ZSBpbiBtb3VudGVkICYgdXBkYXRlZCBiZWNhdXNlIDxzZWxlY3Q+IHJlbGllcyBvbiBpdHMgY2hpbGRyZW5cbiAgICAvLyA8b3B0aW9uPnMuXG4gICAgbW91bnRlZChlbCwgeyB2YWx1ZSB9KSB7XG4gICAgICAgIHNldFNlbGVjdGVkKGVsLCB2YWx1ZSk7XG4gICAgfSxcbiAgICBiZWZvcmVVcGRhdGUoZWwsIF9iaW5kaW5nLCB2bm9kZSkge1xuICAgICAgICBlbC5fYXNzaWduID0gZ2V0TW9kZWxBc3NpZ25lcih2bm9kZSk7XG4gICAgfSxcbiAgICB1cGRhdGVkKGVsLCB7IHZhbHVlIH0pIHtcbiAgICAgICAgc2V0U2VsZWN0ZWQoZWwsIHZhbHVlKTtcbiAgICB9XG59O1xuZnVuY3Rpb24gc2V0U2VsZWN0ZWQoZWwsIHZhbHVlKSB7XG4gICAgY29uc3QgaXNNdWx0aXBsZSA9IGVsLm11bHRpcGxlO1xuICAgIGlmIChpc011bHRpcGxlICYmICFpc0FycmF5KHZhbHVlKSAmJiAhaXNTZXQodmFsdWUpKSB7XG4gICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxuICAgICAgICAgICAgd2FybihgPHNlbGVjdCBtdWx0aXBsZSB2LW1vZGVsPiBleHBlY3RzIGFuIEFycmF5IG9yIFNldCB2YWx1ZSBmb3IgaXRzIGJpbmRpbmcsIGAgK1xuICAgICAgICAgICAgICAgIGBidXQgZ290ICR7T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKS5zbGljZSg4LCAtMSl9LmApO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwLCBsID0gZWwub3B0aW9ucy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgY29uc3Qgb3B0aW9uID0gZWwub3B0aW9uc1tpXTtcbiAgICAgICAgY29uc3Qgb3B0aW9uVmFsdWUgPSBnZXRWYWx1ZShvcHRpb24pO1xuICAgICAgICBpZiAoaXNNdWx0aXBsZSkge1xuICAgICAgICAgICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gbG9vc2VJbmRleE9mKHZhbHVlLCBvcHRpb25WYWx1ZSkgPiAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IHZhbHVlLmhhcyhvcHRpb25WYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAobG9vc2VFcXVhbChnZXRWYWx1ZShvcHRpb24pLCB2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoZWwuc2VsZWN0ZWRJbmRleCAhPT0gaSlcbiAgICAgICAgICAgICAgICAgICAgZWwuc2VsZWN0ZWRJbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGlmICghaXNNdWx0aXBsZSAmJiBlbC5zZWxlY3RlZEluZGV4ICE9PSAtMSkge1xuICAgICAgICBlbC5zZWxlY3RlZEluZGV4ID0gLTE7XG4gICAgfVxufVxuLy8gcmV0cmlldmUgcmF3IHZhbHVlIHNldCB2aWEgOnZhbHVlIGJpbmRpbmdzXG5mdW5jdGlvbiBnZXRWYWx1ZShlbCkge1xuICAgIHJldHVybiAnX3ZhbHVlJyBpbiBlbCA/IGVsLl92YWx1ZSA6IGVsLnZhbHVlO1xufVxuLy8gcmV0cmlldmUgcmF3IHZhbHVlIGZvciB0cnVlLXZhbHVlIGFuZCBmYWxzZS12YWx1ZSBzZXQgdmlhIDp0cnVlLXZhbHVlIG9yIDpmYWxzZS12YWx1ZSBiaW5kaW5nc1xuZnVuY3Rpb24gZ2V0Q2hlY2tib3hWYWx1ZShlbCwgY2hlY2tlZCkge1xuICAgIGNvbnN0IGtleSA9IGNoZWNrZWQgPyAnX3RydWVWYWx1ZScgOiAnX2ZhbHNlVmFsdWUnO1xuICAgIHJldHVybiBrZXkgaW4gZWwgPyBlbFtrZXldIDogY2hlY2tlZDtcbn1cbmNvbnN0IHZNb2RlbER5bmFtaWMgPSB7XG4gICAgY3JlYXRlZChlbCwgYmluZGluZywgdm5vZGUpIHtcbiAgICAgICAgY2FsbE1vZGVsSG9vayhlbCwgYmluZGluZywgdm5vZGUsIG51bGwsICdjcmVhdGVkJyk7XG4gICAgfSxcbiAgICBtb3VudGVkKGVsLCBiaW5kaW5nLCB2bm9kZSkge1xuICAgICAgICBjYWxsTW9kZWxIb29rKGVsLCBiaW5kaW5nLCB2bm9kZSwgbnVsbCwgJ21vdW50ZWQnKTtcbiAgICB9LFxuICAgIGJlZm9yZVVwZGF0ZShlbCwgYmluZGluZywgdm5vZGUsIHByZXZWTm9kZSkge1xuICAgICAgICBjYWxsTW9kZWxIb29rKGVsLCBiaW5kaW5nLCB2bm9kZSwgcHJldlZOb2RlLCAnYmVmb3JlVXBkYXRlJyk7XG4gICAgfSxcbiAgICB1cGRhdGVkKGVsLCBiaW5kaW5nLCB2bm9kZSwgcHJldlZOb2RlKSB7XG4gICAgICAgIGNhbGxNb2RlbEhvb2soZWwsIGJpbmRpbmcsIHZub2RlLCBwcmV2Vk5vZGUsICd1cGRhdGVkJyk7XG4gICAgfVxufTtcbmZ1bmN0aW9uIHJlc29sdmVEeW5hbWljTW9kZWwodGFnTmFtZSwgdHlwZSkge1xuICAgIHN3aXRjaCAodGFnTmFtZSkge1xuICAgICAgICBjYXNlICdTRUxFQ1QnOlxuICAgICAgICAgICAgcmV0dXJuIHZNb2RlbFNlbGVjdDtcbiAgICAgICAgY2FzZSAnVEVYVEFSRUEnOlxuICAgICAgICAgICAgcmV0dXJuIHZNb2RlbFRleHQ7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdjaGVja2JveCc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2TW9kZWxDaGVja2JveDtcbiAgICAgICAgICAgICAgICBjYXNlICdyYWRpbyc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2TW9kZWxSYWRpbztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdk1vZGVsVGV4dDtcbiAgICAgICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBjYWxsTW9kZWxIb29rKGVsLCBiaW5kaW5nLCB2bm9kZSwgcHJldlZOb2RlLCBob29rKSB7XG4gICAgY29uc3QgbW9kZWxUb1VzZSA9IHJlc29sdmVEeW5hbWljTW9kZWwoZWwudGFnTmFtZSwgdm5vZGUucHJvcHMgJiYgdm5vZGUucHJvcHMudHlwZSk7XG4gICAgY29uc3QgZm4gPSBtb2RlbFRvVXNlW2hvb2tdO1xuICAgIGZuICYmIGZuKGVsLCBiaW5kaW5nLCB2bm9kZSwgcHJldlZOb2RlKTtcbn1cbi8vIFNTUiB2bm9kZSB0cmFuc2Zvcm1zLCBvbmx5IHVzZWQgd2hlbiB1c2VyIGluY2x1ZGVzIGNsaWVudC1vcmllbnRlZCByZW5kZXJcbi8vIGZ1bmN0aW9uIGluIFNTUlxuZnVuY3Rpb24gaW5pdFZNb2RlbEZvclNTUigpIHtcbiAgICB2TW9kZWxUZXh0LmdldFNTUlByb3BzID0gKHsgdmFsdWUgfSkgPT4gKHsgdmFsdWUgfSk7XG4gICAgdk1vZGVsUmFkaW8uZ2V0U1NSUHJvcHMgPSAoeyB2YWx1ZSB9LCB2bm9kZSkgPT4ge1xuICAgICAgICBpZiAodm5vZGUucHJvcHMgJiYgbG9vc2VFcXVhbCh2bm9kZS5wcm9wcy52YWx1ZSwgdmFsdWUpKSB7XG4gICAgICAgICAgICByZXR1cm4geyBjaGVja2VkOiB0cnVlIH07XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHZNb2RlbENoZWNrYm94LmdldFNTUlByb3BzID0gKHsgdmFsdWUgfSwgdm5vZGUpID0+IHtcbiAgICAgICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgICBpZiAodm5vZGUucHJvcHMgJiYgbG9vc2VJbmRleE9mKHZhbHVlLCB2bm9kZS5wcm9wcy52YWx1ZSkgPiAtMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGNoZWNrZWQ6IHRydWUgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc1NldCh2YWx1ZSkpIHtcbiAgICAgICAgICAgIGlmICh2bm9kZS5wcm9wcyAmJiB2YWx1ZS5oYXModm5vZGUucHJvcHMudmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgY2hlY2tlZDogdHJ1ZSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4geyBjaGVja2VkOiB0cnVlIH07XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHZNb2RlbER5bmFtaWMuZ2V0U1NSUHJvcHMgPSAoYmluZGluZywgdm5vZGUpID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiB2bm9kZS50eXBlICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1vZGVsVG9Vc2UgPSByZXNvbHZlRHluYW1pY01vZGVsKFxuICAgICAgICAvLyByZXNvbHZlRHluYW1pY01vZGVsIGV4cGVjdHMgYW4gdXBwZXJjYXNlIHRhZyBuYW1lLCBidXQgdm5vZGUudHlwZSBpcyBsb3dlcmNhc2VcbiAgICAgICAgdm5vZGUudHlwZS50b1VwcGVyQ2FzZSgpLCB2bm9kZS5wcm9wcyAmJiB2bm9kZS5wcm9wcy50eXBlKTtcbiAgICAgICAgaWYgKG1vZGVsVG9Vc2UuZ2V0U1NSUHJvcHMpIHtcbiAgICAgICAgICAgIHJldHVybiBtb2RlbFRvVXNlLmdldFNTUlByb3BzKGJpbmRpbmcsIHZub2RlKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbmNvbnN0IHN5c3RlbU1vZGlmaWVycyA9IFsnY3RybCcsICdzaGlmdCcsICdhbHQnLCAnbWV0YSddO1xuY29uc3QgbW9kaWZpZXJHdWFyZHMgPSB7XG4gICAgc3RvcDogZSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpLFxuICAgIHByZXZlbnQ6IGUgPT4gZS5wcmV2ZW50RGVmYXVsdCgpLFxuICAgIHNlbGY6IGUgPT4gZS50YXJnZXQgIT09IGUuY3VycmVudFRhcmdldCxcbiAgICBjdHJsOiBlID0+ICFlLmN0cmxLZXksXG4gICAgc2hpZnQ6IGUgPT4gIWUuc2hpZnRLZXksXG4gICAgYWx0OiBlID0+ICFlLmFsdEtleSxcbiAgICBtZXRhOiBlID0+ICFlLm1ldGFLZXksXG4gICAgbGVmdDogZSA9PiAnYnV0dG9uJyBpbiBlICYmIGUuYnV0dG9uICE9PSAwLFxuICAgIG1pZGRsZTogZSA9PiAnYnV0dG9uJyBpbiBlICYmIGUuYnV0dG9uICE9PSAxLFxuICAgIHJpZ2h0OiBlID0+ICdidXR0b24nIGluIGUgJiYgZS5idXR0b24gIT09IDIsXG4gICAgZXhhY3Q6IChlLCBtb2RpZmllcnMpID0+IHN5c3RlbU1vZGlmaWVycy5zb21lKG0gPT4gZVtgJHttfUtleWBdICYmICFtb2RpZmllcnMuaW5jbHVkZXMobSkpXG59O1xuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5jb25zdCB3aXRoTW9kaWZpZXJzID0gKGZuLCBtb2RpZmllcnMpID0+IHtcbiAgICByZXR1cm4gKGV2ZW50LCAuLi5hcmdzKSA9PiB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbW9kaWZpZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBndWFyZCA9IG1vZGlmaWVyR3VhcmRzW21vZGlmaWVyc1tpXV07XG4gICAgICAgICAgICBpZiAoZ3VhcmQgJiYgZ3VhcmQoZXZlbnQsIG1vZGlmaWVycykpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmbihldmVudCwgLi4uYXJncyk7XG4gICAgfTtcbn07XG4vLyBLZXB0IGZvciAyLnggY29tcGF0LlxuLy8gTm90ZTogSUUxMSBjb21wYXQgZm9yIGBzcGFjZWJhcmAgYW5kIGBkZWxgIGlzIHJlbW92ZWQgZm9yIG5vdy5cbmNvbnN0IGtleU5hbWVzID0ge1xuICAgIGVzYzogJ2VzY2FwZScsXG4gICAgc3BhY2U6ICcgJyxcbiAgICB1cDogJ2Fycm93LXVwJyxcbiAgICBsZWZ0OiAnYXJyb3ctbGVmdCcsXG4gICAgcmlnaHQ6ICdhcnJvdy1yaWdodCcsXG4gICAgZG93bjogJ2Fycm93LWRvd24nLFxuICAgIGRlbGV0ZTogJ2JhY2tzcGFjZSdcbn07XG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmNvbnN0IHdpdGhLZXlzID0gKGZuLCBtb2RpZmllcnMpID0+IHtcbiAgICByZXR1cm4gKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmICghKCdrZXknIGluIGV2ZW50KSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGV2ZW50S2V5ID0gaHlwaGVuYXRlKGV2ZW50LmtleSk7XG4gICAgICAgIGlmIChtb2RpZmllcnMuc29tZShrID0+IGsgPT09IGV2ZW50S2V5IHx8IGtleU5hbWVzW2tdID09PSBldmVudEtleSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmbihldmVudCk7XG4gICAgICAgIH1cbiAgICB9O1xufTtcblxuY29uc3QgdlNob3cgPSB7XG4gICAgYmVmb3JlTW91bnQoZWwsIHsgdmFsdWUgfSwgeyB0cmFuc2l0aW9uIH0pIHtcbiAgICAgICAgZWwuX3ZvZCA9IGVsLnN0eWxlLmRpc3BsYXkgPT09ICdub25lJyA/ICcnIDogZWwuc3R5bGUuZGlzcGxheTtcbiAgICAgICAgaWYgKHRyYW5zaXRpb24gJiYgdmFsdWUpIHtcbiAgICAgICAgICAgIHRyYW5zaXRpb24uYmVmb3JlRW50ZXIoZWwpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2V0RGlzcGxheShlbCwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBtb3VudGVkKGVsLCB7IHZhbHVlIH0sIHsgdHJhbnNpdGlvbiB9KSB7XG4gICAgICAgIGlmICh0cmFuc2l0aW9uICYmIHZhbHVlKSB7XG4gICAgICAgICAgICB0cmFuc2l0aW9uLmVudGVyKGVsKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgdXBkYXRlZChlbCwgeyB2YWx1ZSwgb2xkVmFsdWUgfSwgeyB0cmFuc2l0aW9uIH0pIHtcbiAgICAgICAgaWYgKCF2YWx1ZSA9PT0gIW9sZFZhbHVlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAodHJhbnNpdGlvbikge1xuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbi5iZWZvcmVFbnRlcihlbCk7XG4gICAgICAgICAgICAgICAgc2V0RGlzcGxheShlbCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbi5lbnRlcihlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uLmxlYXZlKGVsLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldERpc3BsYXkoZWwsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNldERpc3BsYXkoZWwsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgYmVmb3JlVW5tb3VudChlbCwgeyB2YWx1ZSB9KSB7XG4gICAgICAgIHNldERpc3BsYXkoZWwsIHZhbHVlKTtcbiAgICB9XG59O1xuZnVuY3Rpb24gc2V0RGlzcGxheShlbCwgdmFsdWUpIHtcbiAgICBlbC5zdHlsZS5kaXNwbGF5ID0gdmFsdWUgPyBlbC5fdm9kIDogJ25vbmUnO1xufVxuLy8gU1NSIHZub2RlIHRyYW5zZm9ybXMsIG9ubHkgdXNlZCB3aGVuIHVzZXIgaW5jbHVkZXMgY2xpZW50LW9yaWVudGVkIHJlbmRlclxuLy8gZnVuY3Rpb24gaW4gU1NSXG5mdW5jdGlvbiBpbml0VlNob3dGb3JTU1IoKSB7XG4gICAgdlNob3cuZ2V0U1NSUHJvcHMgPSAoeyB2YWx1ZSB9KSA9PiB7XG4gICAgICAgIGlmICghdmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiB7IHN0eWxlOiB7IGRpc3BsYXk6ICdub25lJyB9IH07XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5jb25zdCByZW5kZXJlck9wdGlvbnMgPSAvKiNfX1BVUkVfXyovIGV4dGVuZCh7IHBhdGNoUHJvcCB9LCBub2RlT3BzKTtcbi8vIGxhenkgY3JlYXRlIHRoZSByZW5kZXJlciAtIHRoaXMgbWFrZXMgY29yZSByZW5kZXJlciBsb2dpYyB0cmVlLXNoYWthYmxlXG4vLyBpbiBjYXNlIHRoZSB1c2VyIG9ubHkgaW1wb3J0cyByZWFjdGl2aXR5IHV0aWxpdGllcyBmcm9tIFZ1ZS5cbmxldCByZW5kZXJlcjtcbmxldCBlbmFibGVkSHlkcmF0aW9uID0gZmFsc2U7XG5mdW5jdGlvbiBlbnN1cmVSZW5kZXJlcigpIHtcbiAgICByZXR1cm4gKHJlbmRlcmVyIHx8XG4gICAgICAgIChyZW5kZXJlciA9IGNyZWF0ZVJlbmRlcmVyKHJlbmRlcmVyT3B0aW9ucykpKTtcbn1cbmZ1bmN0aW9uIGVuc3VyZUh5ZHJhdGlvblJlbmRlcmVyKCkge1xuICAgIHJlbmRlcmVyID0gZW5hYmxlZEh5ZHJhdGlvblxuICAgICAgICA/IHJlbmRlcmVyXG4gICAgICAgIDogY3JlYXRlSHlkcmF0aW9uUmVuZGVyZXIocmVuZGVyZXJPcHRpb25zKTtcbiAgICBlbmFibGVkSHlkcmF0aW9uID0gdHJ1ZTtcbiAgICByZXR1cm4gcmVuZGVyZXI7XG59XG4vLyB1c2UgZXhwbGljaXQgdHlwZSBjYXN0cyBoZXJlIHRvIGF2b2lkIGltcG9ydCgpIGNhbGxzIGluIHJvbGxlZC11cCBkLnRzXG5jb25zdCByZW5kZXIgPSAoKC4uLmFyZ3MpID0+IHtcbiAgICBlbnN1cmVSZW5kZXJlcigpLnJlbmRlciguLi5hcmdzKTtcbn0pO1xuY29uc3QgaHlkcmF0ZSA9ICgoLi4uYXJncykgPT4ge1xuICAgIGVuc3VyZUh5ZHJhdGlvblJlbmRlcmVyKCkuaHlkcmF0ZSguLi5hcmdzKTtcbn0pO1xuY29uc3QgY3JlYXRlQXBwID0gKCguLi5hcmdzKSA9PiB7XG4gICAgY29uc3QgYXBwID0gZW5zdXJlUmVuZGVyZXIoKS5jcmVhdGVBcHAoLi4uYXJncyk7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICBpbmplY3ROYXRpdmVUYWdDaGVjayhhcHApO1xuICAgICAgICBpbmplY3RDb21waWxlck9wdGlvbnNDaGVjayhhcHApO1xuICAgIH1cbiAgICBjb25zdCB7IG1vdW50IH0gPSBhcHA7XG4gICAgYXBwLm1vdW50ID0gKGNvbnRhaW5lck9yU2VsZWN0b3IpID0+IHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gbm9ybWFsaXplQ29udGFpbmVyKGNvbnRhaW5lck9yU2VsZWN0b3IpO1xuICAgICAgICBpZiAoIWNvbnRhaW5lcilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgY29tcG9uZW50ID0gYXBwLl9jb21wb25lbnQ7XG4gICAgICAgIGlmICghaXNGdW5jdGlvbihjb21wb25lbnQpICYmICFjb21wb25lbnQucmVuZGVyICYmICFjb21wb25lbnQudGVtcGxhdGUpIHtcbiAgICAgICAgICAgIC8vIF9fVU5TQUZFX19cbiAgICAgICAgICAgIC8vIFJlYXNvbjogcG90ZW50aWFsIGV4ZWN1dGlvbiBvZiBKUyBleHByZXNzaW9ucyBpbiBpbi1ET00gdGVtcGxhdGUuXG4gICAgICAgICAgICAvLyBUaGUgdXNlciBtdXN0IG1ha2Ugc3VyZSB0aGUgaW4tRE9NIHRlbXBsYXRlIGlzIHRydXN0ZWQuIElmIGl0J3NcbiAgICAgICAgICAgIC8vIHJlbmRlcmVkIGJ5IHRoZSBzZXJ2ZXIsIHRoZSB0ZW1wbGF0ZSBzaG91bGQgbm90IGNvbnRhaW4gYW55IHVzZXIgZGF0YS5cbiAgICAgICAgICAgIGNvbXBvbmVudC50ZW1wbGF0ZSA9IGNvbnRhaW5lci5pbm5lckhUTUw7XG4gICAgICAgIH1cbiAgICAgICAgLy8gY2xlYXIgY29udGVudCBiZWZvcmUgbW91bnRpbmdcbiAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuICAgICAgICBjb25zdCBwcm94eSA9IG1vdW50KGNvbnRhaW5lciwgZmFsc2UsIGNvbnRhaW5lciBpbnN0YW5jZW9mIFNWR0VsZW1lbnQpO1xuICAgICAgICBpZiAoY29udGFpbmVyIGluc3RhbmNlb2YgRWxlbWVudCkge1xuICAgICAgICAgICAgY29udGFpbmVyLnJlbW92ZUF0dHJpYnV0ZSgndi1jbG9haycpO1xuICAgICAgICAgICAgY29udGFpbmVyLnNldEF0dHJpYnV0ZSgnZGF0YS12LWFwcCcsICcnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcHJveHk7XG4gICAgfTtcbiAgICByZXR1cm4gYXBwO1xufSk7XG5jb25zdCBjcmVhdGVTU1JBcHAgPSAoKC4uLmFyZ3MpID0+IHtcbiAgICBjb25zdCBhcHAgPSBlbnN1cmVIeWRyYXRpb25SZW5kZXJlcigpLmNyZWF0ZUFwcCguLi5hcmdzKTtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIGluamVjdE5hdGl2ZVRhZ0NoZWNrKGFwcCk7XG4gICAgICAgIGluamVjdENvbXBpbGVyT3B0aW9uc0NoZWNrKGFwcCk7XG4gICAgfVxuICAgIGNvbnN0IHsgbW91bnQgfSA9IGFwcDtcbiAgICBhcHAubW91bnQgPSAoY29udGFpbmVyT3JTZWxlY3RvcikgPT4ge1xuICAgICAgICBjb25zdCBjb250YWluZXIgPSBub3JtYWxpemVDb250YWluZXIoY29udGFpbmVyT3JTZWxlY3Rvcik7XG4gICAgICAgIGlmIChjb250YWluZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBtb3VudChjb250YWluZXIsIHRydWUsIGNvbnRhaW5lciBpbnN0YW5jZW9mIFNWR0VsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gYXBwO1xufSk7XG5mdW5jdGlvbiBpbmplY3ROYXRpdmVUYWdDaGVjayhhcHApIHtcbiAgICAvLyBJbmplY3QgYGlzTmF0aXZlVGFnYFxuICAgIC8vIHRoaXMgaXMgdXNlZCBmb3IgY29tcG9uZW50IG5hbWUgdmFsaWRhdGlvbiAoZGV2IG9ubHkpXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGFwcC5jb25maWcsICdpc05hdGl2ZVRhZycsIHtcbiAgICAgICAgdmFsdWU6ICh0YWcpID0+IGlzSFRNTFRhZyh0YWcpIHx8IGlzU1ZHVGFnKHRhZyksXG4gICAgICAgIHdyaXRhYmxlOiBmYWxzZVxuICAgIH0pO1xufVxuLy8gZGV2IG9ubHlcbmZ1bmN0aW9uIGluamVjdENvbXBpbGVyT3B0aW9uc0NoZWNrKGFwcCkge1xuICAgIGlmIChpc1J1bnRpbWVPbmx5KCkpIHtcbiAgICAgICAgY29uc3QgaXNDdXN0b21FbGVtZW50ID0gYXBwLmNvbmZpZy5pc0N1c3RvbUVsZW1lbnQ7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhcHAuY29uZmlnLCAnaXNDdXN0b21FbGVtZW50Jywge1xuICAgICAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpc0N1c3RvbUVsZW1lbnQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0KCkge1xuICAgICAgICAgICAgICAgIHdhcm4oYFRoZSBcXGBpc0N1c3RvbUVsZW1lbnRcXGAgY29uZmlnIG9wdGlvbiBpcyBkZXByZWNhdGVkLiBVc2UgYCArXG4gICAgICAgICAgICAgICAgICAgIGBcXGBjb21waWxlck9wdGlvbnMuaXNDdXN0b21FbGVtZW50XFxgIGluc3RlYWQuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBjb21waWxlck9wdGlvbnMgPSBhcHAuY29uZmlnLmNvbXBpbGVyT3B0aW9ucztcbiAgICAgICAgY29uc3QgbXNnID0gYFRoZSBcXGBjb21waWxlck9wdGlvbnNcXGAgY29uZmlnIG9wdGlvbiBpcyBvbmx5IHJlc3BlY3RlZCB3aGVuIHVzaW5nIGAgK1xuICAgICAgICAgICAgYGEgYnVpbGQgb2YgVnVlLmpzIHRoYXQgaW5jbHVkZXMgdGhlIHJ1bnRpbWUgY29tcGlsZXIgKGFrYSBcImZ1bGwgYnVpbGRcIikuIGAgK1xuICAgICAgICAgICAgYFNpbmNlIHlvdSBhcmUgdXNpbmcgdGhlIHJ1bnRpbWUtb25seSBidWlsZCwgXFxgY29tcGlsZXJPcHRpb25zXFxgIGAgK1xuICAgICAgICAgICAgYG11c3QgYmUgcGFzc2VkIHRvIFxcYEB2dWUvY29tcGlsZXItZG9tXFxgIGluIHRoZSBidWlsZCBzZXR1cCBpbnN0ZWFkLlxcbmAgK1xuICAgICAgICAgICAgYC0gRm9yIHZ1ZS1sb2FkZXI6IHBhc3MgaXQgdmlhIHZ1ZS1sb2FkZXIncyBcXGBjb21waWxlck9wdGlvbnNcXGAgbG9hZGVyIG9wdGlvbi5cXG5gICtcbiAgICAgICAgICAgIGAtIEZvciB2dWUtY2xpOiBzZWUgaHR0cHM6Ly9jbGkudnVlanMub3JnL2d1aWRlL3dlYnBhY2suaHRtbCNtb2RpZnlpbmctb3B0aW9ucy1vZi1hLWxvYWRlclxcbmAgK1xuICAgICAgICAgICAgYC0gRm9yIHZpdGU6IHBhc3MgaXQgdmlhIEB2aXRlanMvcGx1Z2luLXZ1ZSBvcHRpb25zLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3ZpdGVqcy92aXRlL3RyZWUvbWFpbi9wYWNrYWdlcy9wbHVnaW4tdnVlI2V4YW1wbGUtZm9yLXBhc3Npbmctb3B0aW9ucy10by12dWVjb21waWxlci1kb21gO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoYXBwLmNvbmZpZywgJ2NvbXBpbGVyT3B0aW9ucycsIHtcbiAgICAgICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgICAgICB3YXJuKG1zZyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBpbGVyT3B0aW9ucztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQoKSB7XG4gICAgICAgICAgICAgICAgd2Fybihtc2cpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG5mdW5jdGlvbiBub3JtYWxpemVDb250YWluZXIoY29udGFpbmVyKSB7XG4gICAgaWYgKGlzU3RyaW5nKGNvbnRhaW5lcikpIHtcbiAgICAgICAgY29uc3QgcmVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXIpO1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFyZXMpIHtcbiAgICAgICAgICAgIHdhcm4oYEZhaWxlZCB0byBtb3VudCBhcHA6IG1vdW50IHRhcmdldCBzZWxlY3RvciBcIiR7Y29udGFpbmVyfVwiIHJldHVybmVkIG51bGwuYCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxuICAgICAgICB3aW5kb3cuU2hhZG93Um9vdCAmJlxuICAgICAgICBjb250YWluZXIgaW5zdGFuY2VvZiB3aW5kb3cuU2hhZG93Um9vdCAmJlxuICAgICAgICBjb250YWluZXIubW9kZSA9PT0gJ2Nsb3NlZCcpIHtcbiAgICAgICAgd2FybihgbW91bnRpbmcgb24gYSBTaGFkb3dSb290IHdpdGggXFxge21vZGU6IFwiY2xvc2VkXCJ9XFxgIG1heSBsZWFkIHRvIHVucHJlZGljdGFibGUgYnVnc2ApO1xuICAgIH1cbiAgICByZXR1cm4gY29udGFpbmVyO1xufVxubGV0IHNzckRpcmVjdGl2ZUluaXRpYWxpemVkID0gZmFsc2U7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5jb25zdCBpbml0RGlyZWN0aXZlc0ZvclNTUiA9ICgpID0+IHtcbiAgICAgICAgaWYgKCFzc3JEaXJlY3RpdmVJbml0aWFsaXplZCkge1xuICAgICAgICAgICAgc3NyRGlyZWN0aXZlSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICAgICAgaW5pdFZNb2RlbEZvclNTUigpO1xuICAgICAgICAgICAgaW5pdFZTaG93Rm9yU1NSKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgO1xuXG5leHBvcnQgeyBUcmFuc2l0aW9uLCBUcmFuc2l0aW9uR3JvdXAsIFZ1ZUVsZW1lbnQsIGNyZWF0ZUFwcCwgY3JlYXRlU1NSQXBwLCBkZWZpbmVDdXN0b21FbGVtZW50LCBkZWZpbmVTU1JDdXN0b21FbGVtZW50LCBoeWRyYXRlLCBpbml0RGlyZWN0aXZlc0ZvclNTUiwgcmVuZGVyLCB1c2VDc3NNb2R1bGUsIHVzZUNzc1ZhcnMsIHZNb2RlbENoZWNrYm94LCB2TW9kZWxEeW5hbWljLCB2TW9kZWxSYWRpbywgdk1vZGVsU2VsZWN0LCB2TW9kZWxUZXh0LCB2U2hvdywgd2l0aEtleXMsIHdpdGhNb2RpZmllcnMgfTtcbiIsImltcG9ydCB7IGluaXRDdXN0b21Gb3JtYXR0ZXIsIHdhcm4gfSBmcm9tICdAdnVlL3J1bnRpbWUtZG9tJztcbmV4cG9ydCAqIGZyb20gJ0B2dWUvcnVudGltZS1kb20nO1xuXG5mdW5jdGlvbiBpbml0RGV2KCkge1xuICAgIHtcbiAgICAgICAgaW5pdEN1c3RvbUZvcm1hdHRlcigpO1xuICAgIH1cbn1cblxuLy8gVGhpcyBlbnRyeSBleHBvcnRzIHRoZSBydW50aW1lIG9ubHksIGFuZCBpcyBidWlsdCBhc1xuaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgIGluaXREZXYoKTtcbn1cbmNvbnN0IGNvbXBpbGUgPSAoKSA9PiB7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICB3YXJuKGBSdW50aW1lIGNvbXBpbGF0aW9uIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBidWlsZCBvZiBWdWUuYCArXG4gICAgICAgICAgICAoYCBDb25maWd1cmUgeW91ciBidW5kbGVyIHRvIGFsaWFzIFwidnVlXCIgdG8gXCJ2dWUvZGlzdC92dWUuZXNtLWJ1bmRsZXIuanNcIi5gXG4gICAgICAgICAgICAgICAgKSAvKiBzaG91bGQgbm90IGhhcHBlbiAqLyk7XG4gICAgfVxufTtcblxuZXhwb3J0IHsgY29tcGlsZSB9O1xuIiwiaW1wb3J0ICogYXMgVnVlIGZyb20gJ3Z1ZSdcblxudmFyIGlzVnVlMiA9IGZhbHNlXG52YXIgaXNWdWUzID0gdHJ1ZVxudmFyIFZ1ZTIgPSB1bmRlZmluZWRcblxuZnVuY3Rpb24gaW5zdGFsbCgpIHt9XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXQodGFyZ2V0LCBrZXksIHZhbCkge1xuICBpZiAoQXJyYXkuaXNBcnJheSh0YXJnZXQpKSB7XG4gICAgdGFyZ2V0Lmxlbmd0aCA9IE1hdGgubWF4KHRhcmdldC5sZW5ndGgsIGtleSlcbiAgICB0YXJnZXQuc3BsaWNlKGtleSwgMSwgdmFsKVxuICAgIHJldHVybiB2YWxcbiAgfVxuICB0YXJnZXRba2V5XSA9IHZhbFxuICByZXR1cm4gdmFsXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWwodGFyZ2V0LCBrZXkpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkodGFyZ2V0KSkge1xuICAgIHRhcmdldC5zcGxpY2Uoa2V5LCAxKVxuICAgIHJldHVyblxuICB9XG4gIGRlbGV0ZSB0YXJnZXRba2V5XVxufVxuXG5leHBvcnQgKiBmcm9tICd2dWUnXG5leHBvcnQge1xuICBWdWUsXG4gIFZ1ZTIsXG4gIGlzVnVlMixcbiAgaXNWdWUzLFxuICBpbnN0YWxsLFxufVxuIiwiZXhwb3J0IGZ1bmN0aW9uIGdldERldnRvb2xzR2xvYmFsSG9vaygpIHtcbiAgICByZXR1cm4gZ2V0VGFyZ2V0KCkuX19WVUVfREVWVE9PTFNfR0xPQkFMX0hPT0tfXztcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRUYXJnZXQoKSB7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHJldHVybiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpXG4gICAgICAgID8gd2luZG93XG4gICAgICAgIDogdHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgID8gZ2xvYmFsXG4gICAgICAgICAgICA6IHt9O1xufVxuZXhwb3J0IGNvbnN0IGlzUHJveHlBdmFpbGFibGUgPSB0eXBlb2YgUHJveHkgPT09ICdmdW5jdGlvbic7XG4iLCJleHBvcnQgY29uc3QgSE9PS19TRVRVUCA9ICdkZXZ0b29scy1wbHVnaW46c2V0dXAnO1xuZXhwb3J0IGNvbnN0IEhPT0tfUExVR0lOX1NFVFRJTkdTX1NFVCA9ICdwbHVnaW46c2V0dGluZ3M6c2V0JztcbiIsImxldCBzdXBwb3J0ZWQ7XG5sZXQgcGVyZjtcbmV4cG9ydCBmdW5jdGlvbiBpc1BlcmZvcm1hbmNlU3VwcG9ydGVkKCkge1xuICAgIHZhciBfYTtcbiAgICBpZiAoc3VwcG9ydGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHN1cHBvcnRlZDtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5wZXJmb3JtYW5jZSkge1xuICAgICAgICBzdXBwb3J0ZWQgPSB0cnVlO1xuICAgICAgICBwZXJmID0gd2luZG93LnBlcmZvcm1hbmNlO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyAmJiAoKF9hID0gZ2xvYmFsLnBlcmZfaG9va3MpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wZXJmb3JtYW5jZSkpIHtcbiAgICAgICAgc3VwcG9ydGVkID0gdHJ1ZTtcbiAgICAgICAgcGVyZiA9IGdsb2JhbC5wZXJmX2hvb2tzLnBlcmZvcm1hbmNlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgc3VwcG9ydGVkID0gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBzdXBwb3J0ZWQ7XG59XG5leHBvcnQgZnVuY3Rpb24gbm93KCkge1xuICAgIHJldHVybiBpc1BlcmZvcm1hbmNlU3VwcG9ydGVkKCkgPyBwZXJmLm5vdygpIDogRGF0ZS5ub3coKTtcbn1cbiIsImltcG9ydCB7IEhPT0tfUExVR0lOX1NFVFRJTkdTX1NFVCB9IGZyb20gJy4vY29uc3QuanMnO1xuaW1wb3J0IHsgbm93IH0gZnJvbSAnLi90aW1lLmpzJztcbmV4cG9ydCBjbGFzcyBBcGlQcm94eSB7XG4gICAgY29uc3RydWN0b3IocGx1Z2luLCBob29rKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgdGhpcy50YXJnZXRRdWV1ZSA9IFtdO1xuICAgICAgICB0aGlzLm9uUXVldWUgPSBbXTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMuaG9vayA9IGhvb2s7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRTZXR0aW5ncyA9IHt9O1xuICAgICAgICBpZiAocGx1Z2luLnNldHRpbmdzKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGlkIGluIHBsdWdpbi5zZXR0aW5ncykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBwbHVnaW4uc2V0dGluZ3NbaWRdO1xuICAgICAgICAgICAgICAgIGRlZmF1bHRTZXR0aW5nc1tpZF0gPSBpdGVtLmRlZmF1bHRWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsb2NhbFNldHRpbmdzU2F2ZUlkID0gYF9fdnVlLWRldnRvb2xzLXBsdWdpbi1zZXR0aW5nc19fJHtwbHVnaW4uaWR9YDtcbiAgICAgICAgbGV0IGN1cnJlbnRTZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRTZXR0aW5ncyk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByYXcgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShsb2NhbFNldHRpbmdzU2F2ZUlkKTtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKHJhdyk7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKGN1cnJlbnRTZXR0aW5ncywgZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIG5vb3BcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZhbGxiYWNrcyA9IHtcbiAgICAgICAgICAgIGdldFNldHRpbmdzKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50U2V0dGluZ3M7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0U2V0dGluZ3ModmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShsb2NhbFNldHRpbmdzU2F2ZUlkLCBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBub29wXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN1cnJlbnRTZXR0aW5ncyA9IHZhbHVlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG5vdygpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbm93KCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICBpZiAoaG9vaykge1xuICAgICAgICAgICAgaG9vay5vbihIT09LX1BMVUdJTl9TRVRUSU5HU19TRVQsIChwbHVnaW5JZCwgdmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocGx1Z2luSWQgPT09IHRoaXMucGx1Z2luLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmFsbGJhY2tzLnNldFNldHRpbmdzKHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByb3hpZWRPbiA9IG5ldyBQcm94eSh7fSwge1xuICAgICAgICAgICAgZ2V0OiAoX3RhcmdldCwgcHJvcCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50YXJnZXQub25bcHJvcF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25RdWV1ZS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IHByb3AsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJncyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnByb3hpZWRUYXJnZXQgPSBuZXcgUHJveHkoe30sIHtcbiAgICAgICAgICAgIGdldDogKF90YXJnZXQsIHByb3ApID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudGFyZ2V0W3Byb3BdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChwcm9wID09PSAnb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3hpZWRPbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoT2JqZWN0LmtleXModGhpcy5mYWxsYmFja3MpLmluY2x1ZGVzKHByb3ApKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoLi4uYXJncykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YXJnZXRRdWV1ZS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IHByb3AsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJncyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlOiAoKSA9PiB7IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZhbGxiYWNrc1twcm9wXSguLi5hcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoLi4uYXJncykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0UXVldWUucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogcHJvcCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJncyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBzZXRSZWFsVGFyZ2V0KHRhcmdldCkge1xuICAgICAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHRoaXMub25RdWV1ZSkge1xuICAgICAgICAgICAgdGhpcy50YXJnZXQub25baXRlbS5tZXRob2RdKC4uLml0ZW0uYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHRoaXMudGFyZ2V0UXVldWUpIHtcbiAgICAgICAgICAgIGl0ZW0ucmVzb2x2ZShhd2FpdCB0aGlzLnRhcmdldFtpdGVtLm1ldGhvZF0oLi4uaXRlbS5hcmdzKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBnZXRUYXJnZXQsIGdldERldnRvb2xzR2xvYmFsSG9vaywgaXNQcm94eUF2YWlsYWJsZSB9IGZyb20gJy4vZW52LmpzJztcbmltcG9ydCB7IEhPT0tfU0VUVVAgfSBmcm9tICcuL2NvbnN0LmpzJztcbmltcG9ydCB7IEFwaVByb3h5IH0gZnJvbSAnLi9wcm94eS5qcyc7XG5leHBvcnQgKiBmcm9tICcuL2FwaS9pbmRleC5qcyc7XG5leHBvcnQgKiBmcm9tICcuL3BsdWdpbi5qcyc7XG5leHBvcnQgKiBmcm9tICcuL3RpbWUuanMnO1xuZXhwb3J0IGZ1bmN0aW9uIHNldHVwRGV2dG9vbHNQbHVnaW4ocGx1Z2luRGVzY3JpcHRvciwgc2V0dXBGbikge1xuICAgIGNvbnN0IGRlc2NyaXB0b3IgPSBwbHVnaW5EZXNjcmlwdG9yO1xuICAgIGNvbnN0IHRhcmdldCA9IGdldFRhcmdldCgpO1xuICAgIGNvbnN0IGhvb2sgPSBnZXREZXZ0b29sc0dsb2JhbEhvb2soKTtcbiAgICBjb25zdCBlbmFibGVQcm94eSA9IGlzUHJveHlBdmFpbGFibGUgJiYgZGVzY3JpcHRvci5lbmFibGVFYXJseVByb3h5O1xuICAgIGlmIChob29rICYmICh0YXJnZXQuX19WVUVfREVWVE9PTFNfUExVR0lOX0FQSV9BVkFJTEFCTEVfXyB8fCAhZW5hYmxlUHJveHkpKSB7XG4gICAgICAgIGhvb2suZW1pdChIT09LX1NFVFVQLCBwbHVnaW5EZXNjcmlwdG9yLCBzZXR1cEZuKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IHByb3h5ID0gZW5hYmxlUHJveHkgPyBuZXcgQXBpUHJveHkoZGVzY3JpcHRvciwgaG9vaykgOiBudWxsO1xuICAgICAgICBjb25zdCBsaXN0ID0gdGFyZ2V0Ll9fVlVFX0RFVlRPT0xTX1BMVUdJTlNfXyA9IHRhcmdldC5fX1ZVRV9ERVZUT09MU19QTFVHSU5TX18gfHwgW107XG4gICAgICAgIGxpc3QucHVzaCh7XG4gICAgICAgICAgICBwbHVnaW5EZXNjcmlwdG9yOiBkZXNjcmlwdG9yLFxuICAgICAgICAgICAgc2V0dXBGbixcbiAgICAgICAgICAgIHByb3h5LFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHByb3h5KVxuICAgICAgICAgICAgc2V0dXBGbihwcm94eS5wcm94aWVkVGFyZ2V0KTtcbiAgICB9XG59XG4iLCIvKiFcbiAgKiBwaW5pYSB2Mi4wLjI5XG4gICogKGMpIDIwMjMgRWR1YXJkbyBTYW4gTWFydGluIE1vcm90ZVxuICAqIEBsaWNlbnNlIE1JVFxuICAqL1xuaW1wb3J0IHsgZ2V0Q3VycmVudEluc3RhbmNlLCBpbmplY3QsIHRvUmF3LCB3YXRjaCwgdW5yZWYsIG1hcmtSYXcsIGVmZmVjdFNjb3BlLCByZWYsIGlzVnVlMiwgaXNSZWYsIGlzUmVhY3RpdmUsIHNldCwgZ2V0Q3VycmVudFNjb3BlLCBvblNjb3BlRGlzcG9zZSwgcmVhY3RpdmUsIHRvUmVmLCBkZWwsIG5leHRUaWNrLCBjb21wdXRlZCwgdG9SZWZzIH0gZnJvbSAndnVlLWRlbWknO1xuaW1wb3J0IHsgc2V0dXBEZXZ0b29sc1BsdWdpbiB9IGZyb20gJ0B2dWUvZGV2dG9vbHMtYXBpJztcblxuLyoqXHJcbiAqIHNldEFjdGl2ZVBpbmlhIG11c3QgYmUgY2FsbGVkIHRvIGhhbmRsZSBTU1IgYXQgdGhlIHRvcCBvZiBmdW5jdGlvbnMgbGlrZVxyXG4gKiBgZmV0Y2hgLCBgc2V0dXBgLCBgc2VydmVyUHJlZmV0Y2hgIGFuZCBvdGhlcnNcclxuICovXHJcbmxldCBhY3RpdmVQaW5pYTtcclxuLyoqXHJcbiAqIFNldHMgb3IgdW5zZXRzIHRoZSBhY3RpdmUgcGluaWEuIFVzZWQgaW4gU1NSIGFuZCBpbnRlcm5hbGx5IHdoZW4gY2FsbGluZ1xyXG4gKiBhY3Rpb25zIGFuZCBnZXR0ZXJzXHJcbiAqXHJcbiAqIEBwYXJhbSBwaW5pYSAtIFBpbmlhIGluc3RhbmNlXHJcbiAqL1xyXG5jb25zdCBzZXRBY3RpdmVQaW5pYSA9IChwaW5pYSkgPT4gKGFjdGl2ZVBpbmlhID0gcGluaWEpO1xyXG4vKipcclxuICogR2V0IHRoZSBjdXJyZW50bHkgYWN0aXZlIHBpbmlhIGlmIHRoZXJlIGlzIGFueS5cclxuICovXHJcbmNvbnN0IGdldEFjdGl2ZVBpbmlhID0gKCkgPT4gKGdldEN1cnJlbnRJbnN0YW5jZSgpICYmIGluamVjdChwaW5pYVN5bWJvbCkpIHx8IGFjdGl2ZVBpbmlhO1xyXG5jb25zdCBwaW5pYVN5bWJvbCA9ICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyBTeW1ib2woJ3BpbmlhJykgOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBTeW1ib2woKSk7XG5cbmZ1bmN0aW9uIGlzUGxhaW5PYmplY3QoXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbm8pIHtcclxuICAgIHJldHVybiAobyAmJlxyXG4gICAgICAgIHR5cGVvZiBvID09PSAnb2JqZWN0JyAmJlxyXG4gICAgICAgIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKSA9PT0gJ1tvYmplY3QgT2JqZWN0XScgJiZcclxuICAgICAgICB0eXBlb2Ygby50b0pTT04gIT09ICdmdW5jdGlvbicpO1xyXG59XHJcbi8vIHR5cGUgRGVlcFJlYWRvbmx5PFQ+ID0geyByZWFkb25seSBbUCBpbiBrZXlvZiBUXTogRGVlcFJlYWRvbmx5PFRbUF0+IH1cclxuLy8gVE9ETzogY2FuIHdlIGNoYW5nZSB0aGVzZSB0byBudW1iZXJzP1xyXG4vKipcclxuICogUG9zc2libGUgdHlwZXMgZm9yIFN1YnNjcmlwdGlvbkNhbGxiYWNrXHJcbiAqL1xyXG52YXIgTXV0YXRpb25UeXBlO1xyXG4oZnVuY3Rpb24gKE11dGF0aW9uVHlwZSkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBEaXJlY3QgbXV0YXRpb24gb2YgdGhlIHN0YXRlOlxyXG4gICAgICpcclxuICAgICAqIC0gYHN0b3JlLm5hbWUgPSAnbmV3IG5hbWUnYFxyXG4gICAgICogLSBgc3RvcmUuJHN0YXRlLm5hbWUgPSAnbmV3IG5hbWUnYFxyXG4gICAgICogLSBgc3RvcmUubGlzdC5wdXNoKCduZXcgaXRlbScpYFxyXG4gICAgICovXHJcbiAgICBNdXRhdGlvblR5cGVbXCJkaXJlY3RcIl0gPSBcImRpcmVjdFwiO1xyXG4gICAgLyoqXHJcbiAgICAgKiBNdXRhdGVkIHRoZSBzdGF0ZSB3aXRoIGAkcGF0Y2hgIGFuZCBhbiBvYmplY3RcclxuICAgICAqXHJcbiAgICAgKiAtIGBzdG9yZS4kcGF0Y2goeyBuYW1lOiAnbmV3TmFtZScgfSlgXHJcbiAgICAgKi9cclxuICAgIE11dGF0aW9uVHlwZVtcInBhdGNoT2JqZWN0XCJdID0gXCJwYXRjaCBvYmplY3RcIjtcclxuICAgIC8qKlxyXG4gICAgICogTXV0YXRlZCB0aGUgc3RhdGUgd2l0aCBgJHBhdGNoYCBhbmQgYSBmdW5jdGlvblxyXG4gICAgICpcclxuICAgICAqIC0gYHN0b3JlLiRwYXRjaChzdGF0ZSA9PiBzdGF0ZS5uYW1lID0gJ25ld05hbWUnKWBcclxuICAgICAqL1xyXG4gICAgTXV0YXRpb25UeXBlW1wicGF0Y2hGdW5jdGlvblwiXSA9IFwicGF0Y2ggZnVuY3Rpb25cIjtcclxuICAgIC8vIG1heWJlIHJlc2V0PyBmb3IgJHN0YXRlID0ge30gYW5kICRyZXNldFxyXG59KShNdXRhdGlvblR5cGUgfHwgKE11dGF0aW9uVHlwZSA9IHt9KSk7XG5cbmNvbnN0IElTX0NMSUVOVCA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnO1xyXG4vKipcclxuICogU2hvdWxkIHdlIGFkZCB0aGUgZGV2dG9vbHMgcGx1Z2lucy5cclxuICogLSBvbmx5IGlmIGRldiBtb2RlIG9yIGZvcmNlZCB0aHJvdWdoIHRoZSBwcm9kIGRldnRvb2xzIGZsYWdcclxuICogLSBub3QgaW4gdGVzdFxyXG4gKiAtIG9ubHkgaWYgd2luZG93IGV4aXN0cyAoY291bGQgY2hhbmdlIGluIHRoZSBmdXR1cmUpXHJcbiAqL1xyXG5jb25zdCBVU0VfREVWVE9PTFMgPSAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8ICh0eXBlb2YgX19WVUVfUFJPRF9ERVZUT09MU19fICE9PSAndW5kZWZpbmVkJyAmJiBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pKSAmJiAhKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAndGVzdCcpICYmIElTX0NMSUVOVDtcblxuLypcclxuICogRmlsZVNhdmVyLmpzIEEgc2F2ZUFzKCkgRmlsZVNhdmVyIGltcGxlbWVudGF0aW9uLlxyXG4gKlxyXG4gKiBPcmlnaW5hbGx5IGJ5IEVsaSBHcmV5LCBhZGFwdGVkIGFzIGFuIEVTTSBtb2R1bGUgYnkgRWR1YXJkbyBTYW4gTWFydGluXHJcbiAqIE1vcm90ZS5cclxuICpcclxuICogTGljZW5zZSA6IE1JVFxyXG4gKi9cclxuLy8gVGhlIG9uZSBhbmQgb25seSB3YXkgb2YgZ2V0dGluZyBnbG9iYWwgc2NvcGUgaW4gYWxsIGVudmlyb25tZW50c1xyXG4vLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3EvMzI3NzE4Mi8xMDA4OTk5XHJcbmNvbnN0IF9nbG9iYWwgPSAvKiNfX1BVUkVfXyovICgoKSA9PiB0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JyAmJiB3aW5kb3cud2luZG93ID09PSB3aW5kb3dcclxuICAgID8gd2luZG93XHJcbiAgICA6IHR5cGVvZiBzZWxmID09PSAnb2JqZWN0JyAmJiBzZWxmLnNlbGYgPT09IHNlbGZcclxuICAgICAgICA/IHNlbGZcclxuICAgICAgICA6IHR5cGVvZiBnbG9iYWwgPT09ICdvYmplY3QnICYmIGdsb2JhbC5nbG9iYWwgPT09IGdsb2JhbFxyXG4gICAgICAgICAgICA/IGdsb2JhbFxyXG4gICAgICAgICAgICA6IHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0J1xyXG4gICAgICAgICAgICAgICAgPyBnbG9iYWxUaGlzXHJcbiAgICAgICAgICAgICAgICA6IHsgSFRNTEVsZW1lbnQ6IG51bGwgfSkoKTtcclxuZnVuY3Rpb24gYm9tKGJsb2IsIHsgYXV0b0JvbSA9IGZhbHNlIH0gPSB7fSkge1xyXG4gICAgLy8gcHJlcGVuZCBCT00gZm9yIFVURi04IFhNTCBhbmQgdGV4dC8qIHR5cGVzIChpbmNsdWRpbmcgSFRNTClcclxuICAgIC8vIG5vdGU6IHlvdXIgYnJvd3NlciB3aWxsIGF1dG9tYXRpY2FsbHkgY29udmVydCBVVEYtMTYgVStGRUZGIHRvIEVGIEJCIEJGXHJcbiAgICBpZiAoYXV0b0JvbSAmJlxyXG4gICAgICAgIC9eXFxzKig/OnRleHRcXC9cXFMqfGFwcGxpY2F0aW9uXFwveG1sfFxcUypcXC9cXFMqXFwreG1sKVxccyo7LipjaGFyc2V0XFxzKj1cXHMqdXRmLTgvaS50ZXN0KGJsb2IudHlwZSkpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEJsb2IoW1N0cmluZy5mcm9tQ2hhckNvZGUoMHhmZWZmKSwgYmxvYl0sIHsgdHlwZTogYmxvYi50eXBlIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGJsb2I7XHJcbn1cclxuZnVuY3Rpb24gZG93bmxvYWQodXJsLCBuYW1lLCBvcHRzKSB7XHJcbiAgICBjb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgIHhoci5vcGVuKCdHRVQnLCB1cmwpO1xyXG4gICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdibG9iJztcclxuICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2F2ZUFzKHhoci5yZXNwb25zZSwgbmFtZSwgb3B0cyk7XHJcbiAgICB9O1xyXG4gICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignY291bGQgbm90IGRvd25sb2FkIGZpbGUnKTtcclxuICAgIH07XHJcbiAgICB4aHIuc2VuZCgpO1xyXG59XHJcbmZ1bmN0aW9uIGNvcnNFbmFibGVkKHVybCkge1xyXG4gICAgY29uc3QgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAvLyB1c2Ugc3luYyB0byBhdm9pZCBwb3B1cCBibG9ja2VyXHJcbiAgICB4aHIub3BlbignSEVBRCcsIHVybCwgZmFsc2UpO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB4aHIuc2VuZCgpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHsgfVxyXG4gICAgcmV0dXJuIHhoci5zdGF0dXMgPj0gMjAwICYmIHhoci5zdGF0dXMgPD0gMjk5O1xyXG59XHJcbi8vIGBhLmNsaWNrKClgIGRvZXNuJ3Qgd29yayBmb3IgYWxsIGJyb3dzZXJzICgjNDY1KVxyXG5mdW5jdGlvbiBjbGljayhub2RlKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIG5vZGUuZGlzcGF0Y2hFdmVudChuZXcgTW91c2VFdmVudCgnY2xpY2snKSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGNvbnN0IGV2dCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdNb3VzZUV2ZW50cycpO1xyXG4gICAgICAgIGV2dC5pbml0TW91c2VFdmVudCgnY2xpY2snLCB0cnVlLCB0cnVlLCB3aW5kb3csIDAsIDAsIDAsIDgwLCAyMCwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIDAsIG51bGwpO1xyXG4gICAgICAgIG5vZGUuZGlzcGF0Y2hFdmVudChldnQpO1xyXG4gICAgfVxyXG59XHJcbmNvbnN0IF9uYXZpZ2F0b3IgPSBcclxuIHR5cGVvZiBuYXZpZ2F0b3IgPT09ICdvYmplY3QnID8gbmF2aWdhdG9yIDogeyB1c2VyQWdlbnQ6ICcnIH07XHJcbi8vIERldGVjdCBXZWJWaWV3IGluc2lkZSBhIG5hdGl2ZSBtYWNPUyBhcHAgYnkgcnVsaW5nIG91dCBhbGwgYnJvd3NlcnNcclxuLy8gV2UganVzdCBuZWVkIHRvIGNoZWNrIGZvciAnU2FmYXJpJyBiZWNhdXNlIGFsbCBvdGhlciBicm93c2VycyAoYmVzaWRlcyBGaXJlZm94KSBpbmNsdWRlIHRoYXQgdG9vXHJcbi8vIGh0dHBzOi8vd3d3LndoYXRpc215YnJvd3Nlci5jb20vZ3VpZGVzL3RoZS1sYXRlc3QtdXNlci1hZ2VudC9tYWNvc1xyXG5jb25zdCBpc01hY09TV2ViVmlldyA9IC8qI19fUFVSRV9fKi8gKCgpID0+IC9NYWNpbnRvc2gvLnRlc3QoX25hdmlnYXRvci51c2VyQWdlbnQpICYmXHJcbiAgICAvQXBwbGVXZWJLaXQvLnRlc3QoX25hdmlnYXRvci51c2VyQWdlbnQpICYmXHJcbiAgICAhL1NhZmFyaS8udGVzdChfbmF2aWdhdG9yLnVzZXJBZ2VudCkpKCk7XHJcbmNvbnN0IHNhdmVBcyA9ICFJU19DTElFTlRcclxuICAgID8gKCkgPT4geyB9IC8vIG5vb3BcclxuICAgIDogLy8gVXNlIGRvd25sb2FkIGF0dHJpYnV0ZSBmaXJzdCBpZiBwb3NzaWJsZSAoIzE5MyBMdW1pYSBtb2JpbGUpIHVubGVzcyB0aGlzIGlzIGEgbWFjT1MgV2ViVmlldyBvciBtaW5pIHByb2dyYW1cclxuICAgICAgICB0eXBlb2YgSFRNTEFuY2hvckVsZW1lbnQgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgICAgICdkb3dubG9hZCcgaW4gSFRNTEFuY2hvckVsZW1lbnQucHJvdG90eXBlICYmXHJcbiAgICAgICAgICAgICFpc01hY09TV2ViVmlld1xyXG4gICAgICAgICAgICA/IGRvd25sb2FkU2F2ZUFzXHJcbiAgICAgICAgICAgIDogLy8gVXNlIG1zU2F2ZU9yT3BlbkJsb2IgYXMgYSBzZWNvbmQgYXBwcm9hY2hcclxuICAgICAgICAgICAgICAgICdtc1NhdmVPck9wZW5CbG9iJyBpbiBfbmF2aWdhdG9yXHJcbiAgICAgICAgICAgICAgICAgICAgPyBtc1NhdmVBc1xyXG4gICAgICAgICAgICAgICAgICAgIDogLy8gRmFsbGJhY2sgdG8gdXNpbmcgRmlsZVJlYWRlciBhbmQgYSBwb3B1cFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlU2F2ZXJTYXZlQXM7XHJcbmZ1bmN0aW9uIGRvd25sb2FkU2F2ZUFzKGJsb2IsIG5hbWUgPSAnZG93bmxvYWQnLCBvcHRzKSB7XHJcbiAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xyXG4gICAgYS5kb3dubG9hZCA9IG5hbWU7XHJcbiAgICBhLnJlbCA9ICdub29wZW5lcic7IC8vIHRhYm5hYmJpbmdcclxuICAgIC8vIFRPRE86IGRldGVjdCBjaHJvbWUgZXh0ZW5zaW9ucyAmIHBhY2thZ2VkIGFwcHNcclxuICAgIC8vIGEudGFyZ2V0ID0gJ19ibGFuaydcclxuICAgIGlmICh0eXBlb2YgYmxvYiA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAvLyBTdXBwb3J0IHJlZ3VsYXIgbGlua3NcclxuICAgICAgICBhLmhyZWYgPSBibG9iO1xyXG4gICAgICAgIGlmIChhLm9yaWdpbiAhPT0gbG9jYXRpb24ub3JpZ2luKSB7XHJcbiAgICAgICAgICAgIGlmIChjb3JzRW5hYmxlZChhLmhyZWYpKSB7XHJcbiAgICAgICAgICAgICAgICBkb3dubG9hZChibG9iLCBuYW1lLCBvcHRzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGEudGFyZ2V0ID0gJ19ibGFuayc7XHJcbiAgICAgICAgICAgICAgICBjbGljayhhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY2xpY2soYSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgLy8gU3VwcG9ydCBibG9ic1xyXG4gICAgICAgIGEuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwoYS5ocmVmKTtcclxuICAgICAgICB9LCA0ZTQpOyAvLyA0MHNcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY2xpY2soYSk7XHJcbiAgICAgICAgfSwgMCk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gbXNTYXZlQXMoYmxvYiwgbmFtZSA9ICdkb3dubG9hZCcsIG9wdHMpIHtcclxuICAgIGlmICh0eXBlb2YgYmxvYiA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICBpZiAoY29yc0VuYWJsZWQoYmxvYikpIHtcclxuICAgICAgICAgICAgZG93bmxvYWQoYmxvYiwgbmFtZSwgb3B0cyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xyXG4gICAgICAgICAgICBhLmhyZWYgPSBibG9iO1xyXG4gICAgICAgICAgICBhLnRhcmdldCA9ICdfYmxhbmsnO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGNsaWNrKGEpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAvLyBAdHMtaWdub3JlOiB3b3JrcyBvbiB3aW5kb3dzXHJcbiAgICAgICAgbmF2aWdhdG9yLm1zU2F2ZU9yT3BlbkJsb2IoYm9tKGJsb2IsIG9wdHMpLCBuYW1lKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBmaWxlU2F2ZXJTYXZlQXMoYmxvYiwgbmFtZSwgb3B0cywgcG9wdXApIHtcclxuICAgIC8vIE9wZW4gYSBwb3B1cCBpbW1lZGlhdGVseSBkbyBnbyBhcm91bmQgcG9wdXAgYmxvY2tlclxyXG4gICAgLy8gTW9zdGx5IG9ubHkgYXZhaWxhYmxlIG9uIHVzZXIgaW50ZXJhY3Rpb24gYW5kIHRoZSBmaWxlUmVhZGVyIGlzIGFzeW5jIHNvLi4uXHJcbiAgICBwb3B1cCA9IHBvcHVwIHx8IG9wZW4oJycsICdfYmxhbmsnKTtcclxuICAgIGlmIChwb3B1cCkge1xyXG4gICAgICAgIHBvcHVwLmRvY3VtZW50LnRpdGxlID0gcG9wdXAuZG9jdW1lbnQuYm9keS5pbm5lclRleHQgPSAnZG93bmxvYWRpbmcuLi4nO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBibG9iID09PSAnc3RyaW5nJylcclxuICAgICAgICByZXR1cm4gZG93bmxvYWQoYmxvYiwgbmFtZSwgb3B0cyk7XHJcbiAgICBjb25zdCBmb3JjZSA9IGJsb2IudHlwZSA9PT0gJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSc7XHJcbiAgICBjb25zdCBpc1NhZmFyaSA9IC9jb25zdHJ1Y3Rvci9pLnRlc3QoU3RyaW5nKF9nbG9iYWwuSFRNTEVsZW1lbnQpKSB8fCAnc2FmYXJpJyBpbiBfZ2xvYmFsO1xyXG4gICAgY29uc3QgaXNDaHJvbWVJT1MgPSAvQ3JpT1NcXC9bXFxkXSsvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XHJcbiAgICBpZiAoKGlzQ2hyb21lSU9TIHx8IChmb3JjZSAmJiBpc1NhZmFyaSkgfHwgaXNNYWNPU1dlYlZpZXcpICYmXHJcbiAgICAgICAgdHlwZW9mIEZpbGVSZWFkZXIgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgLy8gU2FmYXJpIGRvZXNuJ3QgYWxsb3cgZG93bmxvYWRpbmcgb2YgYmxvYiBVUkxzXHJcbiAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuICAgICAgICByZWFkZXIub25sb2FkZW5kID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBsZXQgdXJsID0gcmVhZGVyLnJlc3VsdDtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB1cmwgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICBwb3B1cCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dyb25nIHJlYWRlci5yZXN1bHQgdHlwZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHVybCA9IGlzQ2hyb21lSU9TXHJcbiAgICAgICAgICAgICAgICA/IHVybFxyXG4gICAgICAgICAgICAgICAgOiB1cmwucmVwbGFjZSgvXmRhdGE6W147XSo7LywgJ2RhdGE6YXR0YWNobWVudC9maWxlOycpO1xyXG4gICAgICAgICAgICBpZiAocG9wdXApIHtcclxuICAgICAgICAgICAgICAgIHBvcHVwLmxvY2F0aW9uLmhyZWYgPSB1cmw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsb2NhdGlvbi5hc3NpZ24odXJsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwb3B1cCA9IG51bGw7IC8vIHJldmVyc2UtdGFibmFiYmluZyAjNDYwXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChibG9iKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XHJcbiAgICAgICAgaWYgKHBvcHVwKVxyXG4gICAgICAgICAgICBwb3B1cC5sb2NhdGlvbi5hc3NpZ24odXJsKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSB1cmw7XHJcbiAgICAgICAgcG9wdXAgPSBudWxsOyAvLyByZXZlcnNlLXRhYm5hYmJpbmcgIzQ2MFxyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7XHJcbiAgICAgICAgfSwgNGU0KTsgLy8gNDBzXHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIFNob3dzIGEgdG9hc3Qgb3IgY29uc29sZS5sb2dcclxuICpcclxuICogQHBhcmFtIG1lc3NhZ2UgLSBtZXNzYWdlIHRvIGxvZ1xyXG4gKiBAcGFyYW0gdHlwZSAtIGRpZmZlcmVudCBjb2xvciBvZiB0aGUgdG9vbHRpcFxyXG4gKi9cclxuZnVuY3Rpb24gdG9hc3RNZXNzYWdlKG1lc3NhZ2UsIHR5cGUpIHtcclxuICAgIGNvbnN0IHBpbmlhTWVzc2FnZSA9ICfwn42NICcgKyBtZXNzYWdlO1xyXG4gICAgaWYgKHR5cGVvZiBfX1ZVRV9ERVZUT09MU19UT0FTVF9fID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgX19WVUVfREVWVE9PTFNfVE9BU1RfXyhwaW5pYU1lc3NhZ2UsIHR5cGUpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodHlwZSA9PT0gJ2Vycm9yJykge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IocGluaWFNZXNzYWdlKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGUgPT09ICd3YXJuJykge1xyXG4gICAgICAgIGNvbnNvbGUud2FybihwaW5pYU1lc3NhZ2UpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5sb2cocGluaWFNZXNzYWdlKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBpc1BpbmlhKG8pIHtcclxuICAgIHJldHVybiAnX2EnIGluIG8gJiYgJ2luc3RhbGwnIGluIG87XHJcbn1cblxuZnVuY3Rpb24gY2hlY2tDbGlwYm9hcmRBY2Nlc3MoKSB7XHJcbiAgICBpZiAoISgnY2xpcGJvYXJkJyBpbiBuYXZpZ2F0b3IpKSB7XHJcbiAgICAgICAgdG9hc3RNZXNzYWdlKGBZb3VyIGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IHRoZSBDbGlwYm9hcmQgQVBJYCwgJ2Vycm9yJyk7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gY2hlY2tOb3RGb2N1c2VkRXJyb3IoZXJyb3IpIHtcclxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmXHJcbiAgICAgICAgZXJyb3IubWVzc2FnZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdkb2N1bWVudCBpcyBub3QgZm9jdXNlZCcpKSB7XHJcbiAgICAgICAgdG9hc3RNZXNzYWdlKCdZb3UgbmVlZCB0byBhY3RpdmF0ZSB0aGUgXCJFbXVsYXRlIGEgZm9jdXNlZCBwYWdlXCIgc2V0dGluZyBpbiB0aGUgXCJSZW5kZXJpbmdcIiBwYW5lbCBvZiBkZXZ0b29scy4nLCAnd2FybicpO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIGFjdGlvbkdsb2JhbENvcHlTdGF0ZShwaW5pYSkge1xyXG4gICAgaWYgKGNoZWNrQ2xpcGJvYXJkQWNjZXNzKCkpXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBhd2FpdCBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dChKU09OLnN0cmluZ2lmeShwaW5pYS5zdGF0ZS52YWx1ZSkpO1xyXG4gICAgICAgIHRvYXN0TWVzc2FnZSgnR2xvYmFsIHN0YXRlIGNvcGllZCB0byBjbGlwYm9hcmQuJyk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBpZiAoY2hlY2tOb3RGb2N1c2VkRXJyb3IoZXJyb3IpKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgdG9hc3RNZXNzYWdlKGBGYWlsZWQgdG8gc2VyaWFsaXplIHRoZSBzdGF0ZS4gQ2hlY2sgdGhlIGNvbnNvbGUgZm9yIG1vcmUgZGV0YWlscy5gLCAnZXJyb3InKTtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgIH1cclxufVxyXG5hc3luYyBmdW5jdGlvbiBhY3Rpb25HbG9iYWxQYXN0ZVN0YXRlKHBpbmlhKSB7XHJcbiAgICBpZiAoY2hlY2tDbGlwYm9hcmRBY2Nlc3MoKSlcclxuICAgICAgICByZXR1cm47XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHBpbmlhLnN0YXRlLnZhbHVlID0gSlNPTi5wYXJzZShhd2FpdCBuYXZpZ2F0b3IuY2xpcGJvYXJkLnJlYWRUZXh0KCkpO1xyXG4gICAgICAgIHRvYXN0TWVzc2FnZSgnR2xvYmFsIHN0YXRlIHBhc3RlZCBmcm9tIGNsaXBib2FyZC4nKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGlmIChjaGVja05vdEZvY3VzZWRFcnJvcihlcnJvcikpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB0b2FzdE1lc3NhZ2UoYEZhaWxlZCB0byBkZXNlcmlhbGl6ZSB0aGUgc3RhdGUgZnJvbSBjbGlwYm9hcmQuIENoZWNrIHRoZSBjb25zb2xlIGZvciBtb3JlIGRldGFpbHMuYCwgJ2Vycm9yJyk7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICB9XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gYWN0aW9uR2xvYmFsU2F2ZVN0YXRlKHBpbmlhKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHNhdmVBcyhuZXcgQmxvYihbSlNPTi5zdHJpbmdpZnkocGluaWEuc3RhdGUudmFsdWUpXSwge1xyXG4gICAgICAgICAgICB0eXBlOiAndGV4dC9wbGFpbjtjaGFyc2V0PXV0Zi04JyxcclxuICAgICAgICB9KSwgJ3BpbmlhLXN0YXRlLmpzb24nKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIHRvYXN0TWVzc2FnZShgRmFpbGVkIHRvIGV4cG9ydCB0aGUgc3RhdGUgYXMgSlNPTi4gQ2hlY2sgdGhlIGNvbnNvbGUgZm9yIG1vcmUgZGV0YWlscy5gLCAnZXJyb3InKTtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgIH1cclxufVxyXG5sZXQgZmlsZUlucHV0O1xyXG5mdW5jdGlvbiBnZXRGaWxlT3BlbmVyKCkge1xyXG4gICAgaWYgKCFmaWxlSW5wdXQpIHtcclxuICAgICAgICBmaWxlSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xyXG4gICAgICAgIGZpbGVJbnB1dC50eXBlID0gJ2ZpbGUnO1xyXG4gICAgICAgIGZpbGVJbnB1dC5hY2NlcHQgPSAnLmpzb24nO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gb3BlbkZpbGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgZmlsZUlucHV0Lm9uY2hhbmdlID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZXMgPSBmaWxlSW5wdXQuZmlsZXM7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWZpbGVzKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKG51bGwpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IGZpbGVzLml0ZW0oMCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWZpbGUpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUobnVsbCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh7IHRleHQ6IGF3YWl0IGZpbGUudGV4dCgpLCBmaWxlIH0pO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlOiBUT0RPOiBjaGFuZ2VkIGZyb20gNC4zIHRvIDQuNFxyXG4gICAgICAgICAgICBmaWxlSW5wdXQub25jYW5jZWwgPSAoKSA9PiByZXNvbHZlKG51bGwpO1xyXG4gICAgICAgICAgICBmaWxlSW5wdXQub25lcnJvciA9IHJlamVjdDtcclxuICAgICAgICAgICAgZmlsZUlucHV0LmNsaWNrKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3BlbkZpbGU7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gYWN0aW9uR2xvYmFsT3BlblN0YXRlRmlsZShwaW5pYSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBvcGVuID0gYXdhaXQgZ2V0RmlsZU9wZW5lcigpO1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG9wZW4oKTtcclxuICAgICAgICBpZiAoIXJlc3VsdClcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IHsgdGV4dCwgZmlsZSB9ID0gcmVzdWx0O1xyXG4gICAgICAgIHBpbmlhLnN0YXRlLnZhbHVlID0gSlNPTi5wYXJzZSh0ZXh0KTtcclxuICAgICAgICB0b2FzdE1lc3NhZ2UoYEdsb2JhbCBzdGF0ZSBpbXBvcnRlZCBmcm9tIFwiJHtmaWxlLm5hbWV9XCIuYCk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICB0b2FzdE1lc3NhZ2UoYEZhaWxlZCB0byBleHBvcnQgdGhlIHN0YXRlIGFzIEpTT04uIENoZWNrIHRoZSBjb25zb2xlIGZvciBtb3JlIGRldGFpbHMuYCwgJ2Vycm9yJyk7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICB9XHJcbn1cblxuZnVuY3Rpb24gZm9ybWF0RGlzcGxheShkaXNwbGF5KSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIF9jdXN0b206IHtcclxuICAgICAgICAgICAgZGlzcGxheSxcclxuICAgICAgICB9LFxyXG4gICAgfTtcclxufVxyXG5jb25zdCBQSU5JQV9ST09UX0xBQkVMID0gJ/CfjY0gUGluaWEgKHJvb3QpJztcclxuY29uc3QgUElOSUFfUk9PVF9JRCA9ICdfcm9vdCc7XHJcbmZ1bmN0aW9uIGZvcm1hdFN0b3JlRm9ySW5zcGVjdG9yVHJlZShzdG9yZSkge1xyXG4gICAgcmV0dXJuIGlzUGluaWEoc3RvcmUpXHJcbiAgICAgICAgPyB7XHJcbiAgICAgICAgICAgIGlkOiBQSU5JQV9ST09UX0lELFxyXG4gICAgICAgICAgICBsYWJlbDogUElOSUFfUk9PVF9MQUJFTCxcclxuICAgICAgICB9XHJcbiAgICAgICAgOiB7XHJcbiAgICAgICAgICAgIGlkOiBzdG9yZS4kaWQsXHJcbiAgICAgICAgICAgIGxhYmVsOiBzdG9yZS4kaWQsXHJcbiAgICAgICAgfTtcclxufVxyXG5mdW5jdGlvbiBmb3JtYXRTdG9yZUZvckluc3BlY3RvclN0YXRlKHN0b3JlKSB7XHJcbiAgICBpZiAoaXNQaW5pYShzdG9yZSkpIHtcclxuICAgICAgICBjb25zdCBzdG9yZU5hbWVzID0gQXJyYXkuZnJvbShzdG9yZS5fcy5rZXlzKCkpO1xyXG4gICAgICAgIGNvbnN0IHN0b3JlTWFwID0gc3RvcmUuX3M7XHJcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIHN0YXRlOiBzdG9yZU5hbWVzLm1hcCgoc3RvcmVJZCkgPT4gKHtcclxuICAgICAgICAgICAgICAgIGVkaXRhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAga2V5OiBzdG9yZUlkLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IHN0b3JlLnN0YXRlLnZhbHVlW3N0b3JlSWRdLFxyXG4gICAgICAgICAgICB9KSksXHJcbiAgICAgICAgICAgIGdldHRlcnM6IHN0b3JlTmFtZXNcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoKGlkKSA9PiBzdG9yZU1hcC5nZXQoaWQpLl9nZXR0ZXJzKVxyXG4gICAgICAgICAgICAgICAgLm1hcCgoaWQpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN0b3JlID0gc3RvcmVNYXAuZ2V0KGlkKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWRpdGFibGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGtleTogaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHN0b3JlLl9nZXR0ZXJzLnJlZHVjZSgoZ2V0dGVycywga2V5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldHRlcnNba2V5XSA9IHN0b3JlW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXR0ZXJzO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIHt9KSxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHN0YXRlO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgc3RhdGUgPSB7XHJcbiAgICAgICAgc3RhdGU6IE9iamVjdC5rZXlzKHN0b3JlLiRzdGF0ZSkubWFwKChrZXkpID0+ICh7XHJcbiAgICAgICAgICAgIGVkaXRhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICBrZXksXHJcbiAgICAgICAgICAgIHZhbHVlOiBzdG9yZS4kc3RhdGVba2V5XSxcclxuICAgICAgICB9KSksXHJcbiAgICB9O1xyXG4gICAgLy8gYXZvaWQgYWRkaW5nIGVtcHR5IGdldHRlcnNcclxuICAgIGlmIChzdG9yZS5fZ2V0dGVycyAmJiBzdG9yZS5fZ2V0dGVycy5sZW5ndGgpIHtcclxuICAgICAgICBzdGF0ZS5nZXR0ZXJzID0gc3RvcmUuX2dldHRlcnMubWFwKChnZXR0ZXJOYW1lKSA9PiAoe1xyXG4gICAgICAgICAgICBlZGl0YWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgIGtleTogZ2V0dGVyTmFtZSxcclxuICAgICAgICAgICAgdmFsdWU6IHN0b3JlW2dldHRlck5hbWVdLFxyXG4gICAgICAgIH0pKTtcclxuICAgIH1cclxuICAgIGlmIChzdG9yZS5fY3VzdG9tUHJvcGVydGllcy5zaXplKSB7XHJcbiAgICAgICAgc3RhdGUuY3VzdG9tUHJvcGVydGllcyA9IEFycmF5LmZyb20oc3RvcmUuX2N1c3RvbVByb3BlcnRpZXMpLm1hcCgoa2V5KSA9PiAoe1xyXG4gICAgICAgICAgICBlZGl0YWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAga2V5LFxyXG4gICAgICAgICAgICB2YWx1ZTogc3RvcmVba2V5XSxcclxuICAgICAgICB9KSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc3RhdGU7XHJcbn1cclxuZnVuY3Rpb24gZm9ybWF0RXZlbnREYXRhKGV2ZW50cykge1xyXG4gICAgaWYgKCFldmVudHMpXHJcbiAgICAgICAgcmV0dXJuIHt9O1xyXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZXZlbnRzKSkge1xyXG4gICAgICAgIC8vIFRPRE86IGhhbmRsZSBhZGQgYW5kIGRlbGV0ZSBmb3IgYXJyYXlzIGFuZCBvYmplY3RzXHJcbiAgICAgICAgcmV0dXJuIGV2ZW50cy5yZWR1Y2UoKGRhdGEsIGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGRhdGEua2V5cy5wdXNoKGV2ZW50LmtleSk7XHJcbiAgICAgICAgICAgIGRhdGEub3BlcmF0aW9ucy5wdXNoKGV2ZW50LnR5cGUpO1xyXG4gICAgICAgICAgICBkYXRhLm9sZFZhbHVlW2V2ZW50LmtleV0gPSBldmVudC5vbGRWYWx1ZTtcclxuICAgICAgICAgICAgZGF0YS5uZXdWYWx1ZVtldmVudC5rZXldID0gZXZlbnQubmV3VmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgIH0sIHtcclxuICAgICAgICAgICAgb2xkVmFsdWU6IHt9LFxyXG4gICAgICAgICAgICBrZXlzOiBbXSxcclxuICAgICAgICAgICAgb3BlcmF0aW9uczogW10sXHJcbiAgICAgICAgICAgIG5ld1ZhbHVlOiB7fSxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG9wZXJhdGlvbjogZm9ybWF0RGlzcGxheShldmVudHMudHlwZSksXHJcbiAgICAgICAgICAgIGtleTogZm9ybWF0RGlzcGxheShldmVudHMua2V5KSxcclxuICAgICAgICAgICAgb2xkVmFsdWU6IGV2ZW50cy5vbGRWYWx1ZSxcclxuICAgICAgICAgICAgbmV3VmFsdWU6IGV2ZW50cy5uZXdWYWx1ZSxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGZvcm1hdE11dGF0aW9uVHlwZSh0eXBlKSB7XHJcbiAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICBjYXNlIE11dGF0aW9uVHlwZS5kaXJlY3Q6XHJcbiAgICAgICAgICAgIHJldHVybiAnbXV0YXRpb24nO1xyXG4gICAgICAgIGNhc2UgTXV0YXRpb25UeXBlLnBhdGNoRnVuY3Rpb246XHJcbiAgICAgICAgICAgIHJldHVybiAnJHBhdGNoJztcclxuICAgICAgICBjYXNlIE11dGF0aW9uVHlwZS5wYXRjaE9iamVjdDpcclxuICAgICAgICAgICAgcmV0dXJuICckcGF0Y2gnO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiAndW5rbm93bic7XHJcbiAgICB9XHJcbn1cblxuLy8gdGltZWxpbmUgY2FuIGJlIHBhdXNlZCB3aGVuIGRpcmVjdGx5IGNoYW5naW5nIHRoZSBzdGF0ZVxyXG5sZXQgaXNUaW1lbGluZUFjdGl2ZSA9IHRydWU7XHJcbmNvbnN0IGNvbXBvbmVudFN0YXRlVHlwZXMgPSBbXTtcclxuY29uc3QgTVVUQVRJT05TX0xBWUVSX0lEID0gJ3BpbmlhOm11dGF0aW9ucyc7XHJcbmNvbnN0IElOU1BFQ1RPUl9JRCA9ICdwaW5pYSc7XHJcbi8qKlxyXG4gKiBHZXRzIHRoZSBkaXNwbGF5ZWQgbmFtZSBvZiBhIHN0b3JlIGluIGRldnRvb2xzXHJcbiAqXHJcbiAqIEBwYXJhbSBpZCAtIGlkIG9mIHRoZSBzdG9yZVxyXG4gKiBAcmV0dXJucyBhIGZvcm1hdHRlZCBzdHJpbmdcclxuICovXHJcbmNvbnN0IGdldFN0b3JlVHlwZSA9IChpZCkgPT4gJ/CfjY0gJyArIGlkO1xyXG4vKipcclxuICogQWRkIHRoZSBwaW5pYSBwbHVnaW4gd2l0aG91dCBhbnkgc3RvcmUuIEFsbG93cyBkaXNwbGF5aW5nIGEgUGluaWEgcGx1Z2luIHRhYlxyXG4gKiBhcyBzb29uIGFzIGl0IGlzIGFkZGVkIHRvIHRoZSBhcHBsaWNhdGlvbi5cclxuICpcclxuICogQHBhcmFtIGFwcCAtIFZ1ZSBhcHBsaWNhdGlvblxyXG4gKiBAcGFyYW0gcGluaWEgLSBwaW5pYSBpbnN0YW5jZVxyXG4gKi9cclxuZnVuY3Rpb24gcmVnaXN0ZXJQaW5pYURldnRvb2xzKGFwcCwgcGluaWEpIHtcclxuICAgIHNldHVwRGV2dG9vbHNQbHVnaW4oe1xyXG4gICAgICAgIGlkOiAnZGV2LmVzbS5waW5pYScsXHJcbiAgICAgICAgbGFiZWw6ICdQaW5pYSDwn42NJyxcclxuICAgICAgICBsb2dvOiAnaHR0cHM6Ly9waW5pYS52dWVqcy5vcmcvbG9nby5zdmcnLFxyXG4gICAgICAgIHBhY2thZ2VOYW1lOiAncGluaWEnLFxyXG4gICAgICAgIGhvbWVwYWdlOiAnaHR0cHM6Ly9waW5pYS52dWVqcy5vcmcnLFxyXG4gICAgICAgIGNvbXBvbmVudFN0YXRlVHlwZXMsXHJcbiAgICAgICAgYXBwLFxyXG4gICAgfSwgKGFwaSkgPT4ge1xyXG4gICAgICAgIGlmICh0eXBlb2YgYXBpLm5vdyAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICB0b2FzdE1lc3NhZ2UoJ1lvdSBzZWVtIHRvIGJlIHVzaW5nIGFuIG91dGRhdGVkIHZlcnNpb24gb2YgVnVlIERldnRvb2xzLiBBcmUgeW91IHN0aWxsIHVzaW5nIHRoZSBCZXRhIHJlbGVhc2UgaW5zdGVhZCBvZiB0aGUgc3RhYmxlIG9uZT8gWW91IGNhbiBmaW5kIHRoZSBsaW5rcyBhdCBodHRwczovL2RldnRvb2xzLnZ1ZWpzLm9yZy9ndWlkZS9pbnN0YWxsYXRpb24uaHRtbC4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYXBpLmFkZFRpbWVsaW5lTGF5ZXIoe1xyXG4gICAgICAgICAgICBpZDogTVVUQVRJT05TX0xBWUVSX0lELFxyXG4gICAgICAgICAgICBsYWJlbDogYFBpbmlhIPCfjY1gLFxyXG4gICAgICAgICAgICBjb2xvcjogMHhlNWRmODgsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXBpLmFkZEluc3BlY3Rvcih7XHJcbiAgICAgICAgICAgIGlkOiBJTlNQRUNUT1JfSUQsXHJcbiAgICAgICAgICAgIGxhYmVsOiAnUGluaWEg8J+NjScsXHJcbiAgICAgICAgICAgIGljb246ICdzdG9yYWdlJyxcclxuICAgICAgICAgICAgdHJlZUZpbHRlclBsYWNlaG9sZGVyOiAnU2VhcmNoIHN0b3JlcycsXHJcbiAgICAgICAgICAgIGFjdGlvbnM6IFtcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpY29uOiAnY29udGVudF9jb3B5JyxcclxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uR2xvYmFsQ29weVN0YXRlKHBpbmlhKTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHRvb2x0aXA6ICdTZXJpYWxpemUgYW5kIGNvcHkgdGhlIHN0YXRlJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2NvbnRlbnRfcGFzdGUnLFxyXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBhY3Rpb25HbG9iYWxQYXN0ZVN0YXRlKHBpbmlhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXBpLnNlbmRJbnNwZWN0b3JUcmVlKElOU1BFQ1RPUl9JRCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwaS5zZW5kSW5zcGVjdG9yU3RhdGUoSU5TUEVDVE9SX0lEKTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHRvb2x0aXA6ICdSZXBsYWNlIHRoZSBzdGF0ZSB3aXRoIHRoZSBjb250ZW50IG9mIHlvdXIgY2xpcGJvYXJkJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ3NhdmUnLFxyXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25HbG9iYWxTYXZlU3RhdGUocGluaWEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgdG9vbHRpcDogJ1NhdmUgdGhlIHN0YXRlIGFzIGEgSlNPTiBmaWxlJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2ZvbGRlcl9vcGVuJyxcclxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYWN0aW9uR2xvYmFsT3BlblN0YXRlRmlsZShwaW5pYSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwaS5zZW5kSW5zcGVjdG9yVHJlZShJTlNQRUNUT1JfSUQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcGkuc2VuZEluc3BlY3RvclN0YXRlKElOU1BFQ1RPUl9JRCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB0b29sdGlwOiAnSW1wb3J0IHRoZSBzdGF0ZSBmcm9tIGEgSlNPTiBmaWxlJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIG5vZGVBY3Rpb25zOiBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ3Jlc3RvcmUnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvb2x0aXA6ICdSZXNldCB0aGUgc3RhdGUgKG9wdGlvbiBzdG9yZSBvbmx5KScsXHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAobm9kZUlkKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0b3JlID0gcGluaWEuX3MuZ2V0KG5vZGVJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc3RvcmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0TWVzc2FnZShgQ2Fubm90IHJlc2V0IFwiJHtub2RlSWR9XCIgc3RvcmUgYmVjYXVzZSBpdCB3YXNuJ3QgZm91bmQuYCwgJ3dhcm4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghc3RvcmUuX2lzT3B0aW9uc0FQSSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RNZXNzYWdlKGBDYW5ub3QgcmVzZXQgXCIke25vZGVJZH1cIiBzdG9yZSBiZWNhdXNlIGl0J3MgYSBzZXR1cCBzdG9yZS5gLCAnd2FybicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmUuJHJlc2V0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2FzdE1lc3NhZ2UoYFN0b3JlIFwiJHtub2RlSWR9XCIgcmVzZXQuYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgXSxcclxuICAgICAgICB9KTtcclxuICAgICAgICBhcGkub24uaW5zcGVjdENvbXBvbmVudCgocGF5bG9hZCwgY3R4KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHByb3h5ID0gKHBheWxvYWQuY29tcG9uZW50SW5zdGFuY2UgJiZcclxuICAgICAgICAgICAgICAgIHBheWxvYWQuY29tcG9uZW50SW5zdGFuY2UucHJveHkpO1xyXG4gICAgICAgICAgICBpZiAocHJveHkgJiYgcHJveHkuX3BTdG9yZXMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBpbmlhU3RvcmVzID0gcGF5bG9hZC5jb21wb25lbnRJbnN0YW5jZS5wcm94eS5fcFN0b3JlcztcclxuICAgICAgICAgICAgICAgIE9iamVjdC52YWx1ZXMocGluaWFTdG9yZXMpLmZvckVhY2goKHN0b3JlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZC5pbnN0YW5jZURhdGEuc3RhdGUucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGdldFN0b3JlVHlwZShzdG9yZS4kaWQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6ICdzdGF0ZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc3RvcmUuX2lzT3B0aW9uc0FQSVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2N1c3RvbToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdG9SYXcoc3RvcmUuJHN0YXRlKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uczogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICdyZXN0b3JlJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sdGlwOiAnUmVzZXQgdGhlIHN0YXRlIG9mIHRoaXMgc3RvcmUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogKCkgPT4gc3RvcmUuJHJlc2V0KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IC8vIE5PVEU6IHdvcmthcm91bmQgdG8gdW53cmFwIHRyYW5zZmVycmVkIHJlZnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhzdG9yZS4kc3RhdGUpLnJlZHVjZSgoc3RhdGUsIGtleSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZVtrZXldID0gc3RvcmUuJHN0YXRlW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdGF0ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7fSksXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0b3JlLl9nZXR0ZXJzICYmIHN0b3JlLl9nZXR0ZXJzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXlsb2FkLmluc3RhbmNlRGF0YS5zdGF0ZS5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGdldFN0b3JlVHlwZShzdG9yZS4kaWQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiAnZ2V0dGVycycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0YWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc3RvcmUuX2dldHRlcnMucmVkdWNlKChnZXR0ZXJzLCBrZXkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXR0ZXJzW2tleV0gPSBzdG9yZVtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogd2UganVzdCB3YW50IHRvIHNob3cgaXQgaW4gZGV2dG9vbHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0dGVyc1trZXldID0gZXJyb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXR0ZXJzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwge30pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGFwaS5vbi5nZXRJbnNwZWN0b3JUcmVlKChwYXlsb2FkKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChwYXlsb2FkLmFwcCA9PT0gYXBwICYmIHBheWxvYWQuaW5zcGVjdG9ySWQgPT09IElOU1BFQ1RPUl9JRCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHN0b3JlcyA9IFtwaW5pYV07XHJcbiAgICAgICAgICAgICAgICBzdG9yZXMgPSBzdG9yZXMuY29uY2F0KEFycmF5LmZyb20ocGluaWEuX3MudmFsdWVzKCkpKTtcclxuICAgICAgICAgICAgICAgIHBheWxvYWQucm9vdE5vZGVzID0gKHBheWxvYWQuZmlsdGVyXHJcbiAgICAgICAgICAgICAgICAgICAgPyBzdG9yZXMuZmlsdGVyKChzdG9yZSkgPT4gJyRpZCcgaW4gc3RvcmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBzdG9yZS4kaWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMocGF5bG9hZC5maWx0ZXIudG9Mb3dlckNhc2UoKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBQSU5JQV9ST09UX0xBQkVMLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocGF5bG9hZC5maWx0ZXIudG9Mb3dlckNhc2UoKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgOiBzdG9yZXMpLm1hcChmb3JtYXRTdG9yZUZvckluc3BlY3RvclRyZWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXBpLm9uLmdldEluc3BlY3RvclN0YXRlKChwYXlsb2FkKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChwYXlsb2FkLmFwcCA9PT0gYXBwICYmIHBheWxvYWQuaW5zcGVjdG9ySWQgPT09IElOU1BFQ1RPUl9JRCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5zcGVjdGVkU3RvcmUgPSBwYXlsb2FkLm5vZGVJZCA9PT0gUElOSUFfUk9PVF9JRFxyXG4gICAgICAgICAgICAgICAgICAgID8gcGluaWFcclxuICAgICAgICAgICAgICAgICAgICA6IHBpbmlhLl9zLmdldChwYXlsb2FkLm5vZGVJZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWluc3BlY3RlZFN0b3JlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyBjb3VsZCBiZSB0aGUgc2VsZWN0ZWQgc3RvcmUgcmVzdG9yZWQgZm9yIGEgZGlmZmVyZW50IHByb2plY3RcclxuICAgICAgICAgICAgICAgICAgICAvLyBzbyBpdCdzIGJldHRlciBub3QgdG8gc2F5IGFueXRoaW5nIGhlcmVcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5zcGVjdGVkU3RvcmUpIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXlsb2FkLnN0YXRlID0gZm9ybWF0U3RvcmVGb3JJbnNwZWN0b3JTdGF0ZShpbnNwZWN0ZWRTdG9yZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBhcGkub24uZWRpdEluc3BlY3RvclN0YXRlKChwYXlsb2FkLCBjdHgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHBheWxvYWQuYXBwID09PSBhcHAgJiYgcGF5bG9hZC5pbnNwZWN0b3JJZCA9PT0gSU5TUEVDVE9SX0lEKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbnNwZWN0ZWRTdG9yZSA9IHBheWxvYWQubm9kZUlkID09PSBQSU5JQV9ST09UX0lEXHJcbiAgICAgICAgICAgICAgICAgICAgPyBwaW5pYVxyXG4gICAgICAgICAgICAgICAgICAgIDogcGluaWEuX3MuZ2V0KHBheWxvYWQubm9kZUlkKTtcclxuICAgICAgICAgICAgICAgIGlmICghaW5zcGVjdGVkU3RvcmUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG9hc3RNZXNzYWdlKGBzdG9yZSBcIiR7cGF5bG9hZC5ub2RlSWR9XCIgbm90IGZvdW5kYCwgJ2Vycm9yJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IHBhdGggfSA9IHBheWxvYWQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWlzUGluaWEoaW5zcGVjdGVkU3RvcmUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWNjZXNzIG9ubHkgdGhlIHN0YXRlXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhdGgubGVuZ3RoICE9PSAxIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICFpbnNwZWN0ZWRTdG9yZS5fY3VzdG9tUHJvcGVydGllcy5oYXMocGF0aFswXSkgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aFswXSBpbiBpbnNwZWN0ZWRTdG9yZS4kc3RhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aC51bnNoaWZ0KCckc3RhdGUnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBSb290IGFjY2Vzcywgd2UgY2FuIG9taXQgdGhlIGAudmFsdWVgIGJlY2F1c2UgdGhlIGRldnRvb2xzIEFQSSBkb2VzIGl0IGZvciB1c1xyXG4gICAgICAgICAgICAgICAgICAgIHBhdGgudW5zaGlmdCgnc3RhdGUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlzVGltZWxpbmVBY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHBheWxvYWQuc2V0KGluc3BlY3RlZFN0b3JlLCBwYXRoLCBwYXlsb2FkLnN0YXRlLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIGlzVGltZWxpbmVBY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXBpLm9uLmVkaXRDb21wb25lbnRTdGF0ZSgocGF5bG9hZCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAocGF5bG9hZC50eXBlLnN0YXJ0c1dpdGgoJ/CfjY0nKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RvcmVJZCA9IHBheWxvYWQudHlwZS5yZXBsYWNlKC9e8J+NjVxccyovLCAnJyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdG9yZSA9IHBpbmlhLl9zLmdldChzdG9yZUlkKTtcclxuICAgICAgICAgICAgICAgIGlmICghc3RvcmUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG9hc3RNZXNzYWdlKGBzdG9yZSBcIiR7c3RvcmVJZH1cIiBub3QgZm91bmRgLCAnZXJyb3InKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgcGF0aCB9ID0gcGF5bG9hZDtcclxuICAgICAgICAgICAgICAgIGlmIChwYXRoWzBdICE9PSAnc3RhdGUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRvYXN0TWVzc2FnZShgSW52YWxpZCBwYXRoIGZvciBzdG9yZSBcIiR7c3RvcmVJZH1cIjpcXG4ke3BhdGh9XFxuT25seSBzdGF0ZSBjYW4gYmUgbW9kaWZpZWQuYCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyByZXdyaXRlIHRoZSBmaXJzdCBlbnRyeSB0byBiZSBhYmxlIHRvIGRpcmVjdGx5IHNldCB0aGUgc3RhdGUgYXNcclxuICAgICAgICAgICAgICAgIC8vIHdlbGwgYXMgYW55IG90aGVyIHBhdGhcclxuICAgICAgICAgICAgICAgIHBhdGhbMF0gPSAnJHN0YXRlJztcclxuICAgICAgICAgICAgICAgIGlzVGltZWxpbmVBY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHBheWxvYWQuc2V0KHN0b3JlLCBwYXRoLCBwYXlsb2FkLnN0YXRlLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIGlzVGltZWxpbmVBY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBhZGRTdG9yZVRvRGV2dG9vbHMoYXBwLCBzdG9yZSkge1xyXG4gICAgaWYgKCFjb21wb25lbnRTdGF0ZVR5cGVzLmluY2x1ZGVzKGdldFN0b3JlVHlwZShzdG9yZS4kaWQpKSkge1xyXG4gICAgICAgIGNvbXBvbmVudFN0YXRlVHlwZXMucHVzaChnZXRTdG9yZVR5cGUoc3RvcmUuJGlkKSk7XHJcbiAgICB9XHJcbiAgICBzZXR1cERldnRvb2xzUGx1Z2luKHtcclxuICAgICAgICBpZDogJ2Rldi5lc20ucGluaWEnLFxyXG4gICAgICAgIGxhYmVsOiAnUGluaWEg8J+NjScsXHJcbiAgICAgICAgbG9nbzogJ2h0dHBzOi8vcGluaWEudnVlanMub3JnL2xvZ28uc3ZnJyxcclxuICAgICAgICBwYWNrYWdlTmFtZTogJ3BpbmlhJyxcclxuICAgICAgICBob21lcGFnZTogJ2h0dHBzOi8vcGluaWEudnVlanMub3JnJyxcclxuICAgICAgICBjb21wb25lbnRTdGF0ZVR5cGVzLFxyXG4gICAgICAgIGFwcCxcclxuICAgICAgICBzZXR0aW5nczoge1xyXG4gICAgICAgICAgICBsb2dTdG9yZUNoYW5nZXM6IHtcclxuICAgICAgICAgICAgICAgIGxhYmVsOiAnTm90aWZ5IGFib3V0IG5ldy9kZWxldGVkIHN0b3JlcycsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnYm9vbGVhbicsXHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6IHRydWUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIHVzZUVtb2ppczoge1xyXG4gICAgICAgICAgICAvLyAgIGxhYmVsOiAnVXNlIGVtb2ppcyBpbiBtZXNzYWdlcyDimqHvuI8nLFxyXG4gICAgICAgICAgICAvLyAgIHR5cGU6ICdib29sZWFuJyxcclxuICAgICAgICAgICAgLy8gICBkZWZhdWx0VmFsdWU6IHRydWUsXHJcbiAgICAgICAgICAgIC8vIH0sXHJcbiAgICAgICAgfSxcclxuICAgIH0sIChhcGkpID0+IHtcclxuICAgICAgICAvLyBncmFjZWZ1bGx5IGhhbmRsZSBlcnJvcnNcclxuICAgICAgICBjb25zdCBub3cgPSB0eXBlb2YgYXBpLm5vdyA9PT0gJ2Z1bmN0aW9uJyA/IGFwaS5ub3cuYmluZChhcGkpIDogRGF0ZS5ub3c7XHJcbiAgICAgICAgc3RvcmUuJG9uQWN0aW9uKCh7IGFmdGVyLCBvbkVycm9yLCBuYW1lLCBhcmdzIH0pID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZ3JvdXBJZCA9IHJ1bm5pbmdBY3Rpb25JZCsrO1xyXG4gICAgICAgICAgICBhcGkuYWRkVGltZWxpbmVFdmVudCh7XHJcbiAgICAgICAgICAgICAgICBsYXllcklkOiBNVVRBVElPTlNfTEFZRVJfSUQsXHJcbiAgICAgICAgICAgICAgICBldmVudDoge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IG5vdygpLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn8J+bqyAnICsgbmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBzdWJ0aXRsZTogJ3N0YXJ0JyxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlOiBmb3JtYXREaXNwbGF5KHN0b3JlLiRpZCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogZm9ybWF0RGlzcGxheShuYW1lKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJncyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwSWQsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYWZ0ZXIoKHJlc3VsdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgYWN0aXZlQWN0aW9uID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgYXBpLmFkZFRpbWVsaW5lRXZlbnQoe1xyXG4gICAgICAgICAgICAgICAgICAgIGxheWVySWQ6IE1VVEFUSU9OU19MQVlFUl9JRCxcclxuICAgICAgICAgICAgICAgICAgICBldmVudDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiBub3coKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfwn5usICcgKyBuYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0aXRsZTogJ2VuZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlOiBmb3JtYXREaXNwbGF5KHN0b3JlLiRpZCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb246IGZvcm1hdERpc3BsYXkobmFtZSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cElkLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG9uRXJyb3IoKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBhY3RpdmVBY3Rpb24gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICBhcGkuYWRkVGltZWxpbmVFdmVudCh7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXJJZDogTVVUQVRJT05TX0xBWUVSX0lELFxyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IG5vdygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dUeXBlOiAnZXJyb3InLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ/CfkqUgJyArIG5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRpdGxlOiAnZW5kJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmU6IGZvcm1hdERpc3BsYXkoc3RvcmUuJGlkKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogZm9ybWF0RGlzcGxheShuYW1lKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZCxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sIHRydWUpO1xyXG4gICAgICAgIHN0b3JlLl9jdXN0b21Qcm9wZXJ0aWVzLmZvckVhY2goKG5hbWUpID0+IHtcclxuICAgICAgICAgICAgd2F0Y2goKCkgPT4gdW5yZWYoc3RvcmVbbmFtZV0pLCAobmV3VmFsdWUsIG9sZFZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBhcGkubm90aWZ5Q29tcG9uZW50VXBkYXRlKCk7XHJcbiAgICAgICAgICAgICAgICBhcGkuc2VuZEluc3BlY3RvclN0YXRlKElOU1BFQ1RPUl9JRCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNUaW1lbGluZUFjdGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFwaS5hZGRUaW1lbGluZUV2ZW50KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXJJZDogTVVUQVRJT05TX0xBWUVSX0lELFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZTogbm93KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ0NoYW5nZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJ0aXRsZTogbmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGRWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cElkOiBhY3RpdmVBY3Rpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIHsgZGVlcDogdHJ1ZSB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBzdG9yZS4kc3Vic2NyaWJlKCh7IGV2ZW50cywgdHlwZSB9LCBzdGF0ZSkgPT4ge1xyXG4gICAgICAgICAgICBhcGkubm90aWZ5Q29tcG9uZW50VXBkYXRlKCk7XHJcbiAgICAgICAgICAgIGFwaS5zZW5kSW5zcGVjdG9yU3RhdGUoSU5TUEVDVE9SX0lEKTtcclxuICAgICAgICAgICAgaWYgKCFpc1RpbWVsaW5lQWN0aXZlKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAvLyByb290U3RvcmUuc3RhdGVbc3RvcmUuaWRdID0gc3RhdGVcclxuICAgICAgICAgICAgY29uc3QgZXZlbnREYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgdGltZTogbm93KCksXHJcbiAgICAgICAgICAgICAgICB0aXRsZTogZm9ybWF0TXV0YXRpb25UeXBlKHR5cGUpLFxyXG4gICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0b3JlOiBmb3JtYXREaXNwbGF5KHN0b3JlLiRpZCksXHJcbiAgICAgICAgICAgICAgICAgICAgLi4uZm9ybWF0RXZlbnREYXRhKGV2ZW50cyksXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZ3JvdXBJZDogYWN0aXZlQWN0aW9uLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAvLyByZXNldCBmb3IgdGhlIG5leHQgbXV0YXRpb25cclxuICAgICAgICAgICAgYWN0aXZlQWN0aW9uID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gTXV0YXRpb25UeXBlLnBhdGNoRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIGV2ZW50RGF0YS5zdWJ0aXRsZSA9ICfipLXvuI8nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGUgPT09IE11dGF0aW9uVHlwZS5wYXRjaE9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgZXZlbnREYXRhLnN1YnRpdGxlID0gJ/Cfp6knO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGV2ZW50cyAmJiAhQXJyYXkuaXNBcnJheShldmVudHMpKSB7XHJcbiAgICAgICAgICAgICAgICBldmVudERhdGEuc3VidGl0bGUgPSBldmVudHMudHlwZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZXZlbnRzKSB7XHJcbiAgICAgICAgICAgICAgICBldmVudERhdGEuZGF0YVsncmF3RXZlbnQocyknXSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBfY3VzdG9tOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdEZWJ1Z2dlckV2ZW50JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ29iamVjdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXA6ICdyYXcgRGVidWdnZXJFdmVudFtdJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGV2ZW50cyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhcGkuYWRkVGltZWxpbmVFdmVudCh7XHJcbiAgICAgICAgICAgICAgICBsYXllcklkOiBNVVRBVElPTlNfTEFZRVJfSUQsXHJcbiAgICAgICAgICAgICAgICBldmVudDogZXZlbnREYXRhLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LCB7IGRldGFjaGVkOiB0cnVlLCBmbHVzaDogJ3N5bmMnIH0pO1xyXG4gICAgICAgIGNvbnN0IGhvdFVwZGF0ZSA9IHN0b3JlLl9ob3RVcGRhdGU7XHJcbiAgICAgICAgc3RvcmUuX2hvdFVwZGF0ZSA9IG1hcmtSYXcoKG5ld1N0b3JlKSA9PiB7XHJcbiAgICAgICAgICAgIGhvdFVwZGF0ZShuZXdTdG9yZSk7XHJcbiAgICAgICAgICAgIGFwaS5hZGRUaW1lbGluZUV2ZW50KHtcclxuICAgICAgICAgICAgICAgIGxheWVySWQ6IE1VVEFUSU9OU19MQVlFUl9JRCxcclxuICAgICAgICAgICAgICAgIGV2ZW50OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGltZTogbm93KCksXHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfwn5SlICcgKyBzdG9yZS4kaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgc3VidGl0bGU6ICdITVIgdXBkYXRlJyxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlOiBmb3JtYXREaXNwbGF5KHN0b3JlLiRpZCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZm86IGZvcm1hdERpc3BsYXkoYEhNUiB1cGRhdGVgKSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgZGV2dG9vbHMgdG9vXHJcbiAgICAgICAgICAgIGFwaS5ub3RpZnlDb21wb25lbnRVcGRhdGUoKTtcclxuICAgICAgICAgICAgYXBpLnNlbmRJbnNwZWN0b3JUcmVlKElOU1BFQ1RPUl9JRCk7XHJcbiAgICAgICAgICAgIGFwaS5zZW5kSW5zcGVjdG9yU3RhdGUoSU5TUEVDVE9SX0lEKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCB7ICRkaXNwb3NlIH0gPSBzdG9yZTtcclxuICAgICAgICBzdG9yZS4kZGlzcG9zZSA9ICgpID0+IHtcclxuICAgICAgICAgICAgJGRpc3Bvc2UoKTtcclxuICAgICAgICAgICAgYXBpLm5vdGlmeUNvbXBvbmVudFVwZGF0ZSgpO1xyXG4gICAgICAgICAgICBhcGkuc2VuZEluc3BlY3RvclRyZWUoSU5TUEVDVE9SX0lEKTtcclxuICAgICAgICAgICAgYXBpLnNlbmRJbnNwZWN0b3JTdGF0ZShJTlNQRUNUT1JfSUQpO1xyXG4gICAgICAgICAgICBhcGkuZ2V0U2V0dGluZ3MoKS5sb2dTdG9yZUNoYW5nZXMgJiZcclxuICAgICAgICAgICAgICAgIHRvYXN0TWVzc2FnZShgRGlzcG9zZWQgXCIke3N0b3JlLiRpZH1cIiBzdG9yZSDwn5eRYCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyB0cmlnZ2VyIGFuIHVwZGF0ZSBzbyBpdCBjYW4gZGlzcGxheSBuZXcgcmVnaXN0ZXJlZCBzdG9yZXNcclxuICAgICAgICBhcGkubm90aWZ5Q29tcG9uZW50VXBkYXRlKCk7XHJcbiAgICAgICAgYXBpLnNlbmRJbnNwZWN0b3JUcmVlKElOU1BFQ1RPUl9JRCk7XHJcbiAgICAgICAgYXBpLnNlbmRJbnNwZWN0b3JTdGF0ZShJTlNQRUNUT1JfSUQpO1xyXG4gICAgICAgIGFwaS5nZXRTZXR0aW5ncygpLmxvZ1N0b3JlQ2hhbmdlcyAmJlxyXG4gICAgICAgICAgICB0b2FzdE1lc3NhZ2UoYFwiJHtzdG9yZS4kaWR9XCIgc3RvcmUgaW5zdGFsbGVkIPCfhpVgKTtcclxuICAgIH0pO1xyXG59XHJcbmxldCBydW5uaW5nQWN0aW9uSWQgPSAwO1xyXG5sZXQgYWN0aXZlQWN0aW9uO1xyXG4vKipcclxuICogUGF0Y2hlcyBhIHN0b3JlIHRvIGVuYWJsZSBhY3Rpb24gZ3JvdXBpbmcgaW4gZGV2dG9vbHMgYnkgd3JhcHBpbmcgdGhlIHN0b3JlIHdpdGggYSBQcm94eSB0aGF0IGlzIHBhc3NlZCBhcyB0aGVcclxuICogY29udGV4dCBvZiBhbGwgYWN0aW9ucywgYWxsb3dpbmcgdXMgdG8gc2V0IGBydW5uaW5nQWN0aW9uYCBvbiBlYWNoIGFjY2VzcyBhbmQgZWZmZWN0aXZlbHkgYXNzb2NpYXRpbmcgYW55IHN0YXRlXHJcbiAqIG11dGF0aW9uIHRvIHRoZSBhY3Rpb24uXHJcbiAqXHJcbiAqIEBwYXJhbSBzdG9yZSAtIHN0b3JlIHRvIHBhdGNoXHJcbiAqIEBwYXJhbSBhY3Rpb25OYW1lcyAtIGxpc3Qgb2YgYWN0aW9uc3QgdG8gcGF0Y2hcclxuICovXHJcbmZ1bmN0aW9uIHBhdGNoQWN0aW9uRm9yR3JvdXBpbmcoc3RvcmUsIGFjdGlvbk5hbWVzKSB7XHJcbiAgICAvLyBvcmlnaW5hbCBhY3Rpb25zIG9mIHRoZSBzdG9yZSBhcyB0aGV5IGFyZSBnaXZlbiBieSBwaW5pYS4gV2UgYXJlIGdvaW5nIHRvIG92ZXJyaWRlIHRoZW1cclxuICAgIGNvbnN0IGFjdGlvbnMgPSBhY3Rpb25OYW1lcy5yZWR1Y2UoKHN0b3JlQWN0aW9ucywgYWN0aW9uTmFtZSkgPT4ge1xyXG4gICAgICAgIC8vIHVzZSB0b1JhdyB0byBhdm9pZCB0cmFja2luZyAjNTQxXHJcbiAgICAgICAgc3RvcmVBY3Rpb25zW2FjdGlvbk5hbWVdID0gdG9SYXcoc3RvcmUpW2FjdGlvbk5hbWVdO1xyXG4gICAgICAgIHJldHVybiBzdG9yZUFjdGlvbnM7XHJcbiAgICB9LCB7fSk7XHJcbiAgICBmb3IgKGNvbnN0IGFjdGlvbk5hbWUgaW4gYWN0aW9ucykge1xyXG4gICAgICAgIHN0b3JlW2FjdGlvbk5hbWVdID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBzZXRBY3RpdmVQaW5pYShzdG9yZS5fcClcclxuICAgICAgICAgICAgLy8gdGhlIHJ1bm5pbmcgYWN0aW9uIGlkIGlzIGluY3JlbWVudGVkIGluIGEgYmVmb3JlIGFjdGlvbiBob29rXHJcbiAgICAgICAgICAgIGNvbnN0IF9hY3Rpb25JZCA9IHJ1bm5pbmdBY3Rpb25JZDtcclxuICAgICAgICAgICAgY29uc3QgdHJhY2tlZFN0b3JlID0gbmV3IFByb3h5KHN0b3JlLCB7XHJcbiAgICAgICAgICAgICAgICBnZXQoLi4uYXJncykge1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZUFjdGlvbiA9IF9hY3Rpb25JZDtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5nZXQoLi4uYXJncyk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2V0KC4uLmFyZ3MpIHtcclxuICAgICAgICAgICAgICAgICAgICBhY3RpdmVBY3Rpb24gPSBfYWN0aW9uSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJlZmxlY3Quc2V0KC4uLmFyZ3MpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBhY3Rpb25zW2FjdGlvbk5hbWVdLmFwcGx5KHRyYWNrZWRTdG9yZSwgYXJndW1lbnRzKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBwaW5pYS51c2UoZGV2dG9vbHNQbHVnaW4pXHJcbiAqL1xyXG5mdW5jdGlvbiBkZXZ0b29sc1BsdWdpbih7IGFwcCwgc3RvcmUsIG9wdGlvbnMgfSkge1xyXG4gICAgLy8gSE1SIG1vZHVsZVxyXG4gICAgaWYgKHN0b3JlLiRpZC5zdGFydHNXaXRoKCdfX2hvdDonKSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIC8vIGRldGVjdCBvcHRpb24gYXBpIHZzIHNldHVwIGFwaVxyXG4gICAgaWYgKG9wdGlvbnMuc3RhdGUpIHtcclxuICAgICAgICBzdG9yZS5faXNPcHRpb25zQVBJID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIC8vIG9ubHkgd3JhcCBhY3Rpb25zIGluIG9wdGlvbi1kZWZpbmVkIHN0b3JlcyBhcyB0aGlzIHRlY2huaXF1ZSByZWxpZXMgb25cclxuICAgIC8vIHdyYXBwaW5nIHRoZSBjb250ZXh0IG9mIHRoZSBhY3Rpb24gd2l0aCBhIHByb3h5XHJcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMuc3RhdGUgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICBwYXRjaEFjdGlvbkZvckdyb3VwaW5nKFxyXG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IGNhbiBjYXN0IHRoZSBzdG9yZS4uLlxyXG4gICAgICAgIHN0b3JlLCBPYmplY3Qua2V5cyhvcHRpb25zLmFjdGlvbnMpKTtcclxuICAgICAgICBjb25zdCBvcmlnaW5hbEhvdFVwZGF0ZSA9IHN0b3JlLl9ob3RVcGRhdGU7XHJcbiAgICAgICAgLy8gVXBncmFkZSB0aGUgSE1SIHRvIGFsc28gdXBkYXRlIHRoZSBuZXcgYWN0aW9uc1xyXG4gICAgICAgIHRvUmF3KHN0b3JlKS5faG90VXBkYXRlID0gZnVuY3Rpb24gKG5ld1N0b3JlKSB7XHJcbiAgICAgICAgICAgIG9yaWdpbmFsSG90VXBkYXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgIHBhdGNoQWN0aW9uRm9yR3JvdXBpbmcoc3RvcmUsIE9iamVjdC5rZXlzKG5ld1N0b3JlLl9obXJQYXlsb2FkLmFjdGlvbnMpKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgYWRkU3RvcmVUb0RldnRvb2xzKGFwcCwgXHJcbiAgICAvLyBGSVhNRTogaXMgdGhlcmUgYSB3YXkgdG8gYWxsb3cgdGhlIGFzc2lnbm1lbnQgZnJvbSBTdG9yZTxJZCwgUywgRywgQT4gdG8gU3RvcmVHZW5lcmljP1xyXG4gICAgc3RvcmUpO1xyXG59XG5cbi8qKlxyXG4gKiBDcmVhdGVzIGEgUGluaWEgaW5zdGFuY2UgdG8gYmUgdXNlZCBieSB0aGUgYXBwbGljYXRpb25cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZVBpbmlhKCkge1xyXG4gICAgY29uc3Qgc2NvcGUgPSBlZmZlY3RTY29wZSh0cnVlKTtcclxuICAgIC8vIE5PVEU6IGhlcmUgd2UgY291bGQgY2hlY2sgdGhlIHdpbmRvdyBvYmplY3QgZm9yIGEgc3RhdGUgYW5kIGRpcmVjdGx5IHNldCBpdFxyXG4gICAgLy8gaWYgdGhlcmUgaXMgYW55dGhpbmcgbGlrZSBpdCB3aXRoIFZ1ZSAzIFNTUlxyXG4gICAgY29uc3Qgc3RhdGUgPSBzY29wZS5ydW4oKCkgPT4gcmVmKHt9KSk7XHJcbiAgICBsZXQgX3AgPSBbXTtcclxuICAgIC8vIHBsdWdpbnMgYWRkZWQgYmVmb3JlIGNhbGxpbmcgYXBwLnVzZShwaW5pYSlcclxuICAgIGxldCB0b0JlSW5zdGFsbGVkID0gW107XHJcbiAgICBjb25zdCBwaW5pYSA9IG1hcmtSYXcoe1xyXG4gICAgICAgIGluc3RhbGwoYXBwKSB7XHJcbiAgICAgICAgICAgIC8vIHRoaXMgYWxsb3dzIGNhbGxpbmcgdXNlU3RvcmUoKSBvdXRzaWRlIG9mIGEgY29tcG9uZW50IHNldHVwIGFmdGVyXHJcbiAgICAgICAgICAgIC8vIGluc3RhbGxpbmcgcGluaWEncyBwbHVnaW5cclxuICAgICAgICAgICAgc2V0QWN0aXZlUGluaWEocGluaWEpO1xyXG4gICAgICAgICAgICBpZiAoIWlzVnVlMikge1xyXG4gICAgICAgICAgICAgICAgcGluaWEuX2EgPSBhcHA7XHJcbiAgICAgICAgICAgICAgICBhcHAucHJvdmlkZShwaW5pYVN5bWJvbCwgcGluaWEpO1xyXG4gICAgICAgICAgICAgICAgYXBwLmNvbmZpZy5nbG9iYWxQcm9wZXJ0aWVzLiRwaW5pYSA9IHBpbmlhO1xyXG4gICAgICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cclxuICAgICAgICAgICAgICAgIGlmIChVU0VfREVWVE9PTFMpIHtcclxuICAgICAgICAgICAgICAgICAgICByZWdpc3RlclBpbmlhRGV2dG9vbHMoYXBwLCBwaW5pYSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0b0JlSW5zdGFsbGVkLmZvckVhY2goKHBsdWdpbikgPT4gX3AucHVzaChwbHVnaW4pKTtcclxuICAgICAgICAgICAgICAgIHRvQmVJbnN0YWxsZWQgPSBbXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdXNlKHBsdWdpbikge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuX2EgJiYgIWlzVnVlMikge1xyXG4gICAgICAgICAgICAgICAgdG9CZUluc3RhbGxlZC5wdXNoKHBsdWdpbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBfcC5wdXNoKHBsdWdpbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBfcCxcclxuICAgICAgICAvLyBpdCdzIGFjdHVhbGx5IHVuZGVmaW5lZCBoZXJlXHJcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxyXG4gICAgICAgIF9hOiBudWxsLFxyXG4gICAgICAgIF9lOiBzY29wZSxcclxuICAgICAgICBfczogbmV3IE1hcCgpLFxyXG4gICAgICAgIHN0YXRlLFxyXG4gICAgfSk7XHJcbiAgICAvLyBwaW5pYSBkZXZ0b29scyByZWx5IG9uIGRldiBvbmx5IGZlYXR1cmVzIHNvIHRoZXkgY2Fubm90IGJlIGZvcmNlZCB1bmxlc3NcclxuICAgIC8vIHRoZSBkZXYgYnVpbGQgb2YgVnVlIGlzIHVzZWQuIEF2b2lkIG9sZCBicm93c2VycyBsaWtlIElFMTEuXHJcbiAgICBpZiAoVVNFX0RFVlRPT0xTICYmIHR5cGVvZiBQcm94eSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICBwaW5pYS51c2UoZGV2dG9vbHNQbHVnaW4pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBpbmlhO1xyXG59XG5cbi8qKlxyXG4gKiBDaGVja3MgaWYgYSBmdW5jdGlvbiBpcyBhIGBTdG9yZURlZmluaXRpb25gLlxyXG4gKlxyXG4gKiBAcGFyYW0gZm4gLSBvYmplY3QgdG8gdGVzdFxyXG4gKiBAcmV0dXJucyB0cnVlIGlmIGBmbmAgaXMgYSBTdG9yZURlZmluaXRpb25cclxuICovXHJcbmNvbnN0IGlzVXNlU3RvcmUgPSAoZm4pID0+IHtcclxuICAgIHJldHVybiB0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGZuLiRpZCA9PT0gJ3N0cmluZyc7XHJcbn07XHJcbi8qKlxyXG4gKiBNdXRhdGVzIGluIHBsYWNlIGBuZXdTdGF0ZWAgd2l0aCBgb2xkU3RhdGVgIHRvIF9ob3QgdXBkYXRlXyBpdC4gSXQgd2lsbFxyXG4gKiByZW1vdmUgYW55IGtleSBub3QgZXhpc3RpbmcgaW4gYG5ld1N0YXRlYCBhbmQgcmVjdXJzaXZlbHkgbWVyZ2UgcGxhaW5cclxuICogb2JqZWN0cy5cclxuICpcclxuICogQHBhcmFtIG5ld1N0YXRlIC0gbmV3IHN0YXRlIG9iamVjdCB0byBiZSBwYXRjaGVkXHJcbiAqIEBwYXJhbSBvbGRTdGF0ZSAtIG9sZCBzdGF0ZSB0aGF0IHNob3VsZCBiZSB1c2VkIHRvIHBhdGNoIG5ld1N0YXRlXHJcbiAqIEByZXR1cm5zIC0gbmV3U3RhdGVcclxuICovXHJcbmZ1bmN0aW9uIHBhdGNoT2JqZWN0KG5ld1N0YXRlLCBvbGRTdGF0ZSkge1xyXG4gICAgLy8gbm8gbmVlZCB0byBnbyB0aHJvdWdoIHN5bWJvbHMgYmVjYXVzZSB0aGV5IGNhbm5vdCBiZSBzZXJpYWxpemVkIGFueXdheVxyXG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2xkU3RhdGUpIHtcclxuICAgICAgICBjb25zdCBzdWJQYXRjaCA9IG9sZFN0YXRlW2tleV07XHJcbiAgICAgICAgLy8gc2tpcCB0aGUgd2hvbGUgc3ViIHRyZWVcclxuICAgICAgICBpZiAoIShrZXkgaW4gbmV3U3RhdGUpKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB0YXJnZXRWYWx1ZSA9IG5ld1N0YXRlW2tleV07XHJcbiAgICAgICAgaWYgKGlzUGxhaW5PYmplY3QodGFyZ2V0VmFsdWUpICYmXHJcbiAgICAgICAgICAgIGlzUGxhaW5PYmplY3Qoc3ViUGF0Y2gpICYmXHJcbiAgICAgICAgICAgICFpc1JlZihzdWJQYXRjaCkgJiZcclxuICAgICAgICAgICAgIWlzUmVhY3RpdmUoc3ViUGF0Y2gpKSB7XHJcbiAgICAgICAgICAgIG5ld1N0YXRlW2tleV0gPSBwYXRjaE9iamVjdCh0YXJnZXRWYWx1ZSwgc3ViUGF0Y2gpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gb2JqZWN0cyBhcmUgZWl0aGVyIGEgYml0IG1vcmUgY29tcGxleCAoZS5nLiByZWZzKSBvciBwcmltaXRpdmVzLCBzbyB3ZVxyXG4gICAgICAgICAgICAvLyBqdXN0IHNldCB0aGUgd2hvbGUgdGhpbmdcclxuICAgICAgICAgICAgaWYgKGlzVnVlMikge1xyXG4gICAgICAgICAgICAgICAgc2V0KG5ld1N0YXRlLCBrZXksIHN1YlBhdGNoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG5ld1N0YXRlW2tleV0gPSBzdWJQYXRjaDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBuZXdTdGF0ZTtcclxufVxyXG4vKipcclxuICogQ3JlYXRlcyBhbiBfYWNjZXB0XyBmdW5jdGlvbiB0byBwYXNzIHRvIGBpbXBvcnQubWV0YS5ob3RgIGluIFZpdGUgYXBwbGljYXRpb25zLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqc1xyXG4gKiBjb25zdCB1c2VVc2VyID0gZGVmaW5lU3RvcmUoLi4uKVxyXG4gKiBpZiAoaW1wb3J0Lm1ldGEuaG90KSB7XHJcbiAqICAgaW1wb3J0Lm1ldGEuaG90LmFjY2VwdChhY2NlcHRITVJVcGRhdGUodXNlVXNlciwgaW1wb3J0Lm1ldGEuaG90KSlcclxuICogfVxyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIGluaXRpYWxVc2VTdG9yZSAtIHJldHVybiBvZiB0aGUgZGVmaW5lU3RvcmUgdG8gaG90IHVwZGF0ZVxyXG4gKiBAcGFyYW0gaG90IC0gYGltcG9ydC5tZXRhLmhvdGBcclxuICovXHJcbmZ1bmN0aW9uIGFjY2VwdEhNUlVwZGF0ZShpbml0aWFsVXNlU3RvcmUsIGhvdCkge1xyXG4gICAgLy8gc3RyaXAgYXMgbXVjaCBhcyBwb3NzaWJsZSBmcm9tIGlpZmUucHJvZFxyXG4gICAgaWYgKCEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICByZXR1cm4gKCkgPT4geyB9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIChuZXdNb2R1bGUpID0+IHtcclxuICAgICAgICBjb25zdCBwaW5pYSA9IGhvdC5kYXRhLnBpbmlhIHx8IGluaXRpYWxVc2VTdG9yZS5fcGluaWE7XHJcbiAgICAgICAgaWYgKCFwaW5pYSkge1xyXG4gICAgICAgICAgICAvLyB0aGlzIHN0b3JlIGlzIHN0aWxsIG5vdCB1c2VkXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gcHJlc2VydmUgdGhlIHBpbmlhIGluc3RhbmNlIGFjcm9zcyBsb2Fkc1xyXG4gICAgICAgIGhvdC5kYXRhLnBpbmlhID0gcGluaWE7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2dvdCBkYXRhJywgbmV3U3RvcmUpXHJcbiAgICAgICAgZm9yIChjb25zdCBleHBvcnROYW1lIGluIG5ld01vZHVsZSkge1xyXG4gICAgICAgICAgICBjb25zdCB1c2VTdG9yZSA9IG5ld01vZHVsZVtleHBvcnROYW1lXTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2NoZWNraW5nIGZvcicsIGV4cG9ydE5hbWUpXHJcbiAgICAgICAgICAgIGlmIChpc1VzZVN0b3JlKHVzZVN0b3JlKSAmJiBwaW5pYS5fcy5oYXModXNlU3RvcmUuJGlkKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ0FjY2VwdGluZyB1cGRhdGUgZm9yJywgdXNlU3RvcmUuJGlkKVxyXG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSB1c2VTdG9yZS4kaWQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoaWQgIT09IGluaXRpYWxVc2VTdG9yZS4kaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFRoZSBpZCBvZiB0aGUgc3RvcmUgY2hhbmdlZCBmcm9tIFwiJHtpbml0aWFsVXNlU3RvcmUuJGlkfVwiIHRvIFwiJHtpZH1cIi4gUmVsb2FkaW5nLmApO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHJldHVybiBpbXBvcnQubWV0YS5ob3QuaW52YWxpZGF0ZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhvdC5pbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ1N0b3JlID0gcGluaWEuX3MuZ2V0KGlkKTtcclxuICAgICAgICAgICAgICAgIGlmICghZXhpc3RpbmdTdG9yZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbUGluaWFdOiBza2lwcGluZyBobXIgYmVjYXVzZSBzdG9yZSBkb2Vzbid0IGV4aXN0IHlldGApO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHVzZVN0b3JlKHBpbmlhLCBleGlzdGluZ1N0b3JlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cblxuY29uc3Qgbm9vcCA9ICgpID0+IHsgfTtcclxuZnVuY3Rpb24gYWRkU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbnMsIGNhbGxiYWNrLCBkZXRhY2hlZCwgb25DbGVhbnVwID0gbm9vcCkge1xyXG4gICAgc3Vic2NyaXB0aW9ucy5wdXNoKGNhbGxiYWNrKTtcclxuICAgIGNvbnN0IHJlbW92ZVN1YnNjcmlwdGlvbiA9ICgpID0+IHtcclxuICAgICAgICBjb25zdCBpZHggPSBzdWJzY3JpcHRpb25zLmluZGV4T2YoY2FsbGJhY2spO1xyXG4gICAgICAgIGlmIChpZHggPiAtMSkge1xyXG4gICAgICAgICAgICBzdWJzY3JpcHRpb25zLnNwbGljZShpZHgsIDEpO1xyXG4gICAgICAgICAgICBvbkNsZWFudXAoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgaWYgKCFkZXRhY2hlZCAmJiBnZXRDdXJyZW50U2NvcGUoKSkge1xyXG4gICAgICAgIG9uU2NvcGVEaXNwb3NlKHJlbW92ZVN1YnNjcmlwdGlvbik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVtb3ZlU3Vic2NyaXB0aW9uO1xyXG59XHJcbmZ1bmN0aW9uIHRyaWdnZXJTdWJzY3JpcHRpb25zKHN1YnNjcmlwdGlvbnMsIC4uLmFyZ3MpIHtcclxuICAgIHN1YnNjcmlwdGlvbnMuc2xpY2UoKS5mb3JFYWNoKChjYWxsYmFjaykgPT4ge1xyXG4gICAgICAgIGNhbGxiYWNrKC4uLmFyZ3MpO1xyXG4gICAgfSk7XHJcbn1cblxuZnVuY3Rpb24gbWVyZ2VSZWFjdGl2ZU9iamVjdHModGFyZ2V0LCBwYXRjaFRvQXBwbHkpIHtcclxuICAgIC8vIEhhbmRsZSBNYXAgaW5zdGFuY2VzXHJcbiAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgTWFwICYmIHBhdGNoVG9BcHBseSBpbnN0YW5jZW9mIE1hcCkge1xyXG4gICAgICAgIHBhdGNoVG9BcHBseS5mb3JFYWNoKCh2YWx1ZSwga2V5KSA9PiB0YXJnZXQuc2V0KGtleSwgdmFsdWUpKTtcclxuICAgIH1cclxuICAgIC8vIEhhbmRsZSBTZXQgaW5zdGFuY2VzXHJcbiAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgU2V0ICYmIHBhdGNoVG9BcHBseSBpbnN0YW5jZW9mIFNldCkge1xyXG4gICAgICAgIHBhdGNoVG9BcHBseS5mb3JFYWNoKHRhcmdldC5hZGQsIHRhcmdldCk7XHJcbiAgICB9XHJcbiAgICAvLyBubyBuZWVkIHRvIGdvIHRocm91Z2ggc3ltYm9scyBiZWNhdXNlIHRoZXkgY2Fubm90IGJlIHNlcmlhbGl6ZWQgYW55d2F5XHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBwYXRjaFRvQXBwbHkpIHtcclxuICAgICAgICBpZiAoIXBhdGNoVG9BcHBseS5oYXNPd25Qcm9wZXJ0eShrZXkpKVxyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICBjb25zdCBzdWJQYXRjaCA9IHBhdGNoVG9BcHBseVtrZXldO1xyXG4gICAgICAgIGNvbnN0IHRhcmdldFZhbHVlID0gdGFyZ2V0W2tleV07XHJcbiAgICAgICAgaWYgKGlzUGxhaW5PYmplY3QodGFyZ2V0VmFsdWUpICYmXHJcbiAgICAgICAgICAgIGlzUGxhaW5PYmplY3Qoc3ViUGF0Y2gpICYmXHJcbiAgICAgICAgICAgIHRhcmdldC5oYXNPd25Qcm9wZXJ0eShrZXkpICYmXHJcbiAgICAgICAgICAgICFpc1JlZihzdWJQYXRjaCkgJiZcclxuICAgICAgICAgICAgIWlzUmVhY3RpdmUoc3ViUGF0Y2gpKSB7XHJcbiAgICAgICAgICAgIC8vIE5PVEU6IGhlcmUgSSB3YW50ZWQgdG8gd2FybiBhYm91dCBpbmNvbnNpc3RlbnQgdHlwZXMgYnV0IGl0J3Mgbm90IHBvc3NpYmxlIGJlY2F1c2UgaW4gc2V0dXAgc3RvcmVzIG9uZSBtaWdodFxyXG4gICAgICAgICAgICAvLyBzdGFydCB0aGUgdmFsdWUgb2YgYSBwcm9wZXJ0eSBhcyBhIGNlcnRhaW4gdHlwZSBlLmcuIGEgTWFwLCBhbmQgdGhlbiBmb3Igc29tZSByZWFzb24sIGR1cmluZyBTU1IsIGNoYW5nZSB0aGF0XHJcbiAgICAgICAgICAgIC8vIHRvIGB1bmRlZmluZWRgLiBXaGVuIHRyeWluZyB0byBoeWRyYXRlLCB3ZSB3YW50IHRvIG92ZXJyaWRlIHRoZSBNYXAgd2l0aCBgdW5kZWZpbmVkYC5cclxuICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSBtZXJnZVJlYWN0aXZlT2JqZWN0cyh0YXJnZXRWYWx1ZSwgc3ViUGF0Y2gpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogc3ViUGF0Y2ggaXMgYSB2YWxpZCB2YWx1ZVxyXG4gICAgICAgICAgICB0YXJnZXRba2V5XSA9IHN1YlBhdGNoO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0YXJnZXQ7XHJcbn1cclxuY29uc3Qgc2tpcEh5ZHJhdGVTeW1ib2wgPSAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJylcclxuICAgID8gU3ltYm9sKCdwaW5pYTpza2lwSHlkcmF0aW9uJylcclxuICAgIDogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gU3ltYm9sKCk7XHJcbmNvbnN0IHNraXBIeWRyYXRlTWFwID0gLyojX19QVVJFX18qLyBuZXcgV2Vha01hcCgpO1xyXG4vKipcclxuICogVGVsbHMgUGluaWEgdG8gc2tpcCB0aGUgaHlkcmF0aW9uIHByb2Nlc3Mgb2YgYSBnaXZlbiBvYmplY3QuIFRoaXMgaXMgdXNlZnVsIGluIHNldHVwIHN0b3JlcyAob25seSkgd2hlbiB5b3UgcmV0dXJuIGFcclxuICogc3RhdGVmdWwgb2JqZWN0IGluIHRoZSBzdG9yZSBidXQgaXQgaXNuJ3QgcmVhbGx5IHN0YXRlLiBlLmcuIHJldHVybmluZyBhIHJvdXRlciBpbnN0YW5jZSBpbiBhIHNldHVwIHN0b3JlLlxyXG4gKlxyXG4gKiBAcGFyYW0gb2JqIC0gdGFyZ2V0IG9iamVjdFxyXG4gKiBAcmV0dXJucyBvYmpcclxuICovXHJcbmZ1bmN0aW9uIHNraXBIeWRyYXRlKG9iaikge1xyXG4gICAgcmV0dXJuIGlzVnVlMlxyXG4gICAgICAgID8gLy8gaW4gQHZ1ZS9jb21wb3NpdGlvbi1hcGksIHRoZSByZWZzIGFyZSBzZWFsZWQgc28gZGVmaW5lUHJvcGVydHkgZG9lc24ndCB3b3JrLi4uXHJcbiAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIHNraXBIeWRyYXRlTWFwLnNldChvYmosIDEpICYmIG9ialxyXG4gICAgICAgIDogT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgc2tpcEh5ZHJhdGVTeW1ib2wsIHt9KTtcclxufVxyXG4vKipcclxuICogUmV0dXJucyB3aGV0aGVyIGEgdmFsdWUgc2hvdWxkIGJlIGh5ZHJhdGVkXHJcbiAqXHJcbiAqIEBwYXJhbSBvYmogLSB0YXJnZXQgdmFyaWFibGVcclxuICogQHJldHVybnMgdHJ1ZSBpZiBgb2JqYCBzaG91bGQgYmUgaHlkcmF0ZWRcclxuICovXHJcbmZ1bmN0aW9uIHNob3VsZEh5ZHJhdGUob2JqKSB7XHJcbiAgICByZXR1cm4gaXNWdWUyXHJcbiAgICAgICAgPyAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyAhc2tpcEh5ZHJhdGVNYXAuaGFzKG9iailcclxuICAgICAgICA6ICFpc1BsYWluT2JqZWN0KG9iaikgfHwgIW9iai5oYXNPd25Qcm9wZXJ0eShza2lwSHlkcmF0ZVN5bWJvbCk7XHJcbn1cclxuY29uc3QgeyBhc3NpZ24gfSA9IE9iamVjdDtcclxuZnVuY3Rpb24gaXNDb21wdXRlZChvKSB7XHJcbiAgICByZXR1cm4gISEoaXNSZWYobykgJiYgby5lZmZlY3QpO1xyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZU9wdGlvbnNTdG9yZShpZCwgb3B0aW9ucywgcGluaWEsIGhvdCkge1xyXG4gICAgY29uc3QgeyBzdGF0ZSwgYWN0aW9ucywgZ2V0dGVycyB9ID0gb3B0aW9ucztcclxuICAgIGNvbnN0IGluaXRpYWxTdGF0ZSA9IHBpbmlhLnN0YXRlLnZhbHVlW2lkXTtcclxuICAgIGxldCBzdG9yZTtcclxuICAgIGZ1bmN0aW9uIHNldHVwKCkge1xyXG4gICAgICAgIGlmICghaW5pdGlhbFN0YXRlICYmICghKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8ICFob3QpKSB7XHJcbiAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xyXG4gICAgICAgICAgICBpZiAoaXNWdWUyKSB7XHJcbiAgICAgICAgICAgICAgICBzZXQocGluaWEuc3RhdGUudmFsdWUsIGlkLCBzdGF0ZSA/IHN0YXRlKCkgOiB7fSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwaW5pYS5zdGF0ZS52YWx1ZVtpZF0gPSBzdGF0ZSA/IHN0YXRlKCkgOiB7fTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBhdm9pZCBjcmVhdGluZyBhIHN0YXRlIGluIHBpbmlhLnN0YXRlLnZhbHVlXHJcbiAgICAgICAgY29uc3QgbG9jYWxTdGF0ZSA9IChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBob3RcclxuICAgICAgICAgICAgPyAvLyB1c2UgcmVmKCkgdG8gdW53cmFwIHJlZnMgaW5zaWRlIHN0YXRlIFRPRE86IGNoZWNrIGlmIHRoaXMgaXMgc3RpbGwgbmVjZXNzYXJ5XHJcbiAgICAgICAgICAgICAgICB0b1JlZnMocmVmKHN0YXRlID8gc3RhdGUoKSA6IHt9KS52YWx1ZSlcclxuICAgICAgICAgICAgOiB0b1JlZnMocGluaWEuc3RhdGUudmFsdWVbaWRdKTtcclxuICAgICAgICByZXR1cm4gYXNzaWduKGxvY2FsU3RhdGUsIGFjdGlvbnMsIE9iamVjdC5rZXlzKGdldHRlcnMgfHwge30pLnJlZHVjZSgoY29tcHV0ZWRHZXR0ZXJzLCBuYW1lKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgbmFtZSBpbiBsb2NhbFN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFvwn42NXTogQSBnZXR0ZXIgY2Fubm90IGhhdmUgdGhlIHNhbWUgbmFtZSBhcyBhbm90aGVyIHN0YXRlIHByb3BlcnR5LiBSZW5hbWUgb25lIG9mIHRoZW0uIEZvdW5kIHdpdGggXCIke25hbWV9XCIgaW4gc3RvcmUgXCIke2lkfVwiLmApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbXB1dGVkR2V0dGVyc1tuYW1lXSA9IG1hcmtSYXcoY29tcHV0ZWQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgc2V0QWN0aXZlUGluaWEocGluaWEpO1xyXG4gICAgICAgICAgICAgICAgLy8gaXQgd2FzIGNyZWF0ZWQganVzdCBiZWZvcmVcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN0b3JlID0gcGluaWEuX3MuZ2V0KGlkKTtcclxuICAgICAgICAgICAgICAgIC8vIGFsbG93IGNyb3NzIHVzaW5nIHN0b3Jlc1xyXG4gICAgICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cclxuICAgICAgICAgICAgICAgIGlmIChpc1Z1ZTIgJiYgIXN0b3JlLl9yKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcclxuICAgICAgICAgICAgICAgIC8vIHJldHVybiBnZXR0ZXJzIVtuYW1lXS5jYWxsKGNvbnRleHQsIGNvbnRleHQpXHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBhdm9pZCByZWFkaW5nIHRoZSBnZXR0ZXIgd2hpbGUgYXNzaWduaW5nIHdpdGggYSBnbG9iYWwgdmFyaWFibGVcclxuICAgICAgICAgICAgICAgIHJldHVybiBnZXR0ZXJzW25hbWVdLmNhbGwoc3RvcmUsIHN0b3JlKTtcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICByZXR1cm4gY29tcHV0ZWRHZXR0ZXJzO1xyXG4gICAgICAgIH0sIHt9KSk7XHJcbiAgICB9XHJcbiAgICBzdG9yZSA9IGNyZWF0ZVNldHVwU3RvcmUoaWQsIHNldHVwLCBvcHRpb25zLCBwaW5pYSwgaG90LCB0cnVlKTtcclxuICAgIHN0b3JlLiRyZXNldCA9IGZ1bmN0aW9uICRyZXNldCgpIHtcclxuICAgICAgICBjb25zdCBuZXdTdGF0ZSA9IHN0YXRlID8gc3RhdGUoKSA6IHt9O1xyXG4gICAgICAgIC8vIHdlIHVzZSBhIHBhdGNoIHRvIGdyb3VwIGFsbCBjaGFuZ2VzIGludG8gb25lIHNpbmdsZSBzdWJzY3JpcHRpb25cclxuICAgICAgICB0aGlzLiRwYXRjaCgoJHN0YXRlKSA9PiB7XHJcbiAgICAgICAgICAgIGFzc2lnbigkc3RhdGUsIG5ld1N0YXRlKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gc3RvcmU7XHJcbn1cclxuZnVuY3Rpb24gY3JlYXRlU2V0dXBTdG9yZSgkaWQsIHNldHVwLCBvcHRpb25zID0ge30sIHBpbmlhLCBob3QsIGlzT3B0aW9uc1N0b3JlKSB7XHJcbiAgICBsZXQgc2NvcGU7XHJcbiAgICBjb25zdCBvcHRpb25zRm9yUGx1Z2luID0gYXNzaWduKHsgYWN0aW9uczoge30gfSwgb3B0aW9ucyk7XHJcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cclxuICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IGFjdGl2ZSBpcyBhbiBpbnRlcm5hbCBwcm9wZXJ0eVxyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhcGluaWEuX2UuYWN0aXZlKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQaW5pYSBkZXN0cm95ZWQnKTtcclxuICAgIH1cclxuICAgIC8vIHdhdGNoZXIgb3B0aW9ucyBmb3IgJHN1YnNjcmliZVxyXG4gICAgY29uc3QgJHN1YnNjcmliZU9wdGlvbnMgPSB7XHJcbiAgICAgICAgZGVlcDogdHJ1ZSxcclxuICAgICAgICAvLyBmbHVzaDogJ3Bvc3QnLFxyXG4gICAgfTtcclxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFpc1Z1ZTIpIHtcclxuICAgICAgICAkc3Vic2NyaWJlT3B0aW9ucy5vblRyaWdnZXIgPSAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cclxuICAgICAgICAgICAgaWYgKGlzTGlzdGVuaW5nKSB7XHJcbiAgICAgICAgICAgICAgICBkZWJ1Z2dlckV2ZW50cyA9IGV2ZW50O1xyXG4gICAgICAgICAgICAgICAgLy8gYXZvaWQgdHJpZ2dlcmluZyB0aGlzIHdoaWxlIHRoZSBzdG9yZSBpcyBiZWluZyBidWlsdCBhbmQgdGhlIHN0YXRlIGlzIGJlaW5nIHNldCBpbiBwaW5pYVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzTGlzdGVuaW5nID09IGZhbHNlICYmICFzdG9yZS5faG90VXBkYXRpbmcpIHtcclxuICAgICAgICAgICAgICAgIC8vIGxldCBwYXRjaCBzZW5kIGFsbCB0aGUgZXZlbnRzIHRvZ2V0aGVyIGxhdGVyXHJcbiAgICAgICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGVidWdnZXJFdmVudHMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVidWdnZXJFdmVudHMucHVzaChldmVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCfwn42NIGRlYnVnZ2VyRXZlbnRzIHNob3VsZCBiZSBhbiBhcnJheS4gVGhpcyBpcyBtb3N0IGxpa2VseSBhbiBpbnRlcm5hbCBQaW5pYSBidWcuJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgLy8gaW50ZXJuYWwgc3RhdGVcclxuICAgIGxldCBpc0xpc3RlbmluZzsgLy8gc2V0IHRvIHRydWUgYXQgdGhlIGVuZFxyXG4gICAgbGV0IGlzU3luY0xpc3RlbmluZzsgLy8gc2V0IHRvIHRydWUgYXQgdGhlIGVuZFxyXG4gICAgbGV0IHN1YnNjcmlwdGlvbnMgPSBtYXJrUmF3KFtdKTtcclxuICAgIGxldCBhY3Rpb25TdWJzY3JpcHRpb25zID0gbWFya1JhdyhbXSk7XHJcbiAgICBsZXQgZGVidWdnZXJFdmVudHM7XHJcbiAgICBjb25zdCBpbml0aWFsU3RhdGUgPSBwaW5pYS5zdGF0ZS52YWx1ZVskaWRdO1xyXG4gICAgLy8gYXZvaWQgc2V0dGluZyB0aGUgc3RhdGUgZm9yIG9wdGlvbiBzdG9yZXMgaWYgaXQgaXMgc2V0XHJcbiAgICAvLyBieSB0aGUgc2V0dXBcclxuICAgIGlmICghaXNPcHRpb25zU3RvcmUgJiYgIWluaXRpYWxTdGF0ZSAmJiAoIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCAhaG90KSkge1xyXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xyXG4gICAgICAgIGlmIChpc1Z1ZTIpIHtcclxuICAgICAgICAgICAgc2V0KHBpbmlhLnN0YXRlLnZhbHVlLCAkaWQsIHt9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHBpbmlhLnN0YXRlLnZhbHVlWyRpZF0gPSB7fTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBob3RTdGF0ZSA9IHJlZih7fSk7XHJcbiAgICAvLyBhdm9pZCB0cmlnZ2VyaW5nIHRvbyBtYW55IGxpc3RlbmVyc1xyXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3BpbmlhL2lzc3Vlcy8xMTI5XHJcbiAgICBsZXQgYWN0aXZlTGlzdGVuZXI7XHJcbiAgICBmdW5jdGlvbiAkcGF0Y2gocGFydGlhbFN0YXRlT3JNdXRhdG9yKSB7XHJcbiAgICAgICAgbGV0IHN1YnNjcmlwdGlvbk11dGF0aW9uO1xyXG4gICAgICAgIGlzTGlzdGVuaW5nID0gaXNTeW5jTGlzdGVuaW5nID0gZmFsc2U7XHJcbiAgICAgICAgLy8gcmVzZXQgdGhlIGRlYnVnZ2VyIGV2ZW50cyBzaW5jZSBwYXRjaGVzIGFyZSBzeW5jXHJcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cclxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgIGRlYnVnZ2VyRXZlbnRzID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlb2YgcGFydGlhbFN0YXRlT3JNdXRhdG9yID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHBhcnRpYWxTdGF0ZU9yTXV0YXRvcihwaW5pYS5zdGF0ZS52YWx1ZVskaWRdKTtcclxuICAgICAgICAgICAgc3Vic2NyaXB0aW9uTXV0YXRpb24gPSB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBNdXRhdGlvblR5cGUucGF0Y2hGdW5jdGlvbixcclxuICAgICAgICAgICAgICAgIHN0b3JlSWQ6ICRpZCxcclxuICAgICAgICAgICAgICAgIGV2ZW50czogZGVidWdnZXJFdmVudHMsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBtZXJnZVJlYWN0aXZlT2JqZWN0cyhwaW5pYS5zdGF0ZS52YWx1ZVskaWRdLCBwYXJ0aWFsU3RhdGVPck11dGF0b3IpO1xyXG4gICAgICAgICAgICBzdWJzY3JpcHRpb25NdXRhdGlvbiA9IHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IE11dGF0aW9uVHlwZS5wYXRjaE9iamVjdCxcclxuICAgICAgICAgICAgICAgIHBheWxvYWQ6IHBhcnRpYWxTdGF0ZU9yTXV0YXRvcixcclxuICAgICAgICAgICAgICAgIHN0b3JlSWQ6ICRpZCxcclxuICAgICAgICAgICAgICAgIGV2ZW50czogZGVidWdnZXJFdmVudHMsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IG15TGlzdGVuZXJJZCA9IChhY3RpdmVMaXN0ZW5lciA9IFN5bWJvbCgpKTtcclxuICAgICAgICBuZXh0VGljaygpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoYWN0aXZlTGlzdGVuZXIgPT09IG15TGlzdGVuZXJJZCkge1xyXG4gICAgICAgICAgICAgICAgaXNMaXN0ZW5pbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaXNTeW5jTGlzdGVuaW5nID0gdHJ1ZTtcclxuICAgICAgICAvLyBiZWNhdXNlIHdlIHBhdXNlZCB0aGUgd2F0Y2hlciwgd2UgbmVlZCB0byBtYW51YWxseSBjYWxsIHRoZSBzdWJzY3JpcHRpb25zXHJcbiAgICAgICAgdHJpZ2dlclN1YnNjcmlwdGlvbnMoc3Vic2NyaXB0aW9ucywgc3Vic2NyaXB0aW9uTXV0YXRpb24sIHBpbmlhLnN0YXRlLnZhbHVlWyRpZF0pO1xyXG4gICAgfVxyXG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cclxuICAgIGNvbnN0ICRyZXNldCA9IChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKVxyXG4gICAgICAgID8gKCkgPT4ge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYPCfjY06IFN0b3JlIFwiJHskaWR9XCIgaXMgYnVpbHQgdXNpbmcgdGhlIHNldHVwIHN5bnRheCBhbmQgZG9lcyBub3QgaW1wbGVtZW50ICRyZXNldCgpLmApO1xyXG4gICAgICAgIH1cclxuICAgICAgICA6IG5vb3A7XHJcbiAgICBmdW5jdGlvbiAkZGlzcG9zZSgpIHtcclxuICAgICAgICBzY29wZS5zdG9wKCk7XHJcbiAgICAgICAgc3Vic2NyaXB0aW9ucyA9IFtdO1xyXG4gICAgICAgIGFjdGlvblN1YnNjcmlwdGlvbnMgPSBbXTtcclxuICAgICAgICBwaW5pYS5fcy5kZWxldGUoJGlkKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogV3JhcHMgYW4gYWN0aW9uIHRvIGhhbmRsZSBzdWJzY3JpcHRpb25zLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBuYW1lIC0gbmFtZSBvZiB0aGUgYWN0aW9uXHJcbiAgICAgKiBAcGFyYW0gYWN0aW9uIC0gYWN0aW9uIHRvIHdyYXBcclxuICAgICAqIEByZXR1cm5zIGEgd3JhcHBlZCBhY3Rpb24gdG8gaGFuZGxlIHN1YnNjcmlwdGlvbnNcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gd3JhcEFjdGlvbihuYW1lLCBhY3Rpb24pIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzZXRBY3RpdmVQaW5pYShwaW5pYSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGFyZ3MgPSBBcnJheS5mcm9tKGFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGFmdGVyQ2FsbGJhY2tMaXN0ID0gW107XHJcbiAgICAgICAgICAgIGNvbnN0IG9uRXJyb3JDYWxsYmFja0xpc3QgPSBbXTtcclxuICAgICAgICAgICAgZnVuY3Rpb24gYWZ0ZXIoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIGFmdGVyQ2FsbGJhY2tMaXN0LnB1c2goY2FsbGJhY2spO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uRXJyb3IoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIG9uRXJyb3JDYWxsYmFja0xpc3QucHVzaChjYWxsYmFjayk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxyXG4gICAgICAgICAgICB0cmlnZ2VyU3Vic2NyaXB0aW9ucyhhY3Rpb25TdWJzY3JpcHRpb25zLCB7XHJcbiAgICAgICAgICAgICAgICBhcmdzLFxyXG4gICAgICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgICAgIHN0b3JlLFxyXG4gICAgICAgICAgICAgICAgYWZ0ZXIsXHJcbiAgICAgICAgICAgICAgICBvbkVycm9yLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbGV0IHJldDtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHJldCA9IGFjdGlvbi5hcHBseSh0aGlzICYmIHRoaXMuJGlkID09PSAkaWQgPyB0aGlzIDogc3RvcmUsIGFyZ3MpO1xyXG4gICAgICAgICAgICAgICAgLy8gaGFuZGxlIHN5bmMgZXJyb3JzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICB0cmlnZ2VyU3Vic2NyaXB0aW9ucyhvbkVycm9yQ2FsbGJhY2tMaXN0LCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocmV0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldFxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKCh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyaWdnZXJTdWJzY3JpcHRpb25zKGFmdGVyQ2FsbGJhY2tMaXN0LCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlclN1YnNjcmlwdGlvbnMob25FcnJvckNhbGxiYWNrTGlzdCwgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBhbGxvdyB0aGUgYWZ0ZXJDYWxsYmFjayB0byBvdmVycmlkZSB0aGUgcmV0dXJuIHZhbHVlXHJcbiAgICAgICAgICAgIHRyaWdnZXJTdWJzY3JpcHRpb25zKGFmdGVyQ2FsbGJhY2tMaXN0LCByZXQpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBjb25zdCBfaG1yUGF5bG9hZCA9IC8qI19fUFVSRV9fKi8gbWFya1Jhdyh7XHJcbiAgICAgICAgYWN0aW9uczoge30sXHJcbiAgICAgICAgZ2V0dGVyczoge30sXHJcbiAgICAgICAgc3RhdGU6IFtdLFxyXG4gICAgICAgIGhvdFN0YXRlLFxyXG4gICAgfSk7XHJcbiAgICBjb25zdCBwYXJ0aWFsU3RvcmUgPSB7XHJcbiAgICAgICAgX3A6IHBpbmlhLFxyXG4gICAgICAgIC8vIF9zOiBzY29wZSxcclxuICAgICAgICAkaWQsXHJcbiAgICAgICAgJG9uQWN0aW9uOiBhZGRTdWJzY3JpcHRpb24uYmluZChudWxsLCBhY3Rpb25TdWJzY3JpcHRpb25zKSxcclxuICAgICAgICAkcGF0Y2gsXHJcbiAgICAgICAgJHJlc2V0LFxyXG4gICAgICAgICRzdWJzY3JpYmUoY2FsbGJhY2ssIG9wdGlvbnMgPSB7fSkge1xyXG4gICAgICAgICAgICBjb25zdCByZW1vdmVTdWJzY3JpcHRpb24gPSBhZGRTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9ucywgY2FsbGJhY2ssIG9wdGlvbnMuZGV0YWNoZWQsICgpID0+IHN0b3BXYXRjaGVyKCkpO1xyXG4gICAgICAgICAgICBjb25zdCBzdG9wV2F0Y2hlciA9IHNjb3BlLnJ1bigoKSA9PiB3YXRjaCgoKSA9PiBwaW5pYS5zdGF0ZS52YWx1ZVskaWRdLCAoc3RhdGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmZsdXNoID09PSAnc3luYycgPyBpc1N5bmNMaXN0ZW5pbmcgOiBpc0xpc3RlbmluZykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmVJZDogJGlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBNdXRhdGlvblR5cGUuZGlyZWN0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudHM6IGRlYnVnZ2VyRXZlbnRzLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sIHN0YXRlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgYXNzaWduKHt9LCAkc3Vic2NyaWJlT3B0aW9ucywgb3B0aW9ucykpKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlbW92ZVN1YnNjcmlwdGlvbjtcclxuICAgICAgICB9LFxyXG4gICAgICAgICRkaXNwb3NlLFxyXG4gICAgfTtcclxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xyXG4gICAgaWYgKGlzVnVlMikge1xyXG4gICAgICAgIC8vIHN0YXJ0IGFzIG5vbiByZWFkeVxyXG4gICAgICAgIHBhcnRpYWxTdG9yZS5fciA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgc3RvcmUgPSByZWFjdGl2ZSgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgVVNFX0RFVlRPT0xTXHJcbiAgICAgICAgPyBhc3NpZ24oe1xyXG4gICAgICAgICAgICBfaG1yUGF5bG9hZCxcclxuICAgICAgICAgICAgX2N1c3RvbVByb3BlcnRpZXM6IG1hcmtSYXcobmV3IFNldCgpKSwgLy8gZGV2dG9vbHMgY3VzdG9tIHByb3BlcnRpZXNcclxuICAgICAgICB9LCBwYXJ0aWFsU3RvcmVcclxuICAgICAgICAvLyBtdXN0IGJlIGFkZGVkIGxhdGVyXHJcbiAgICAgICAgLy8gc2V0dXBTdG9yZVxyXG4gICAgICAgIClcclxuICAgICAgICA6IHBhcnRpYWxTdG9yZSk7XHJcbiAgICAvLyBzdG9yZSB0aGUgcGFydGlhbCBzdG9yZSBub3cgc28gdGhlIHNldHVwIG9mIHN0b3JlcyBjYW4gaW5zdGFudGlhdGUgZWFjaCBvdGhlciBiZWZvcmUgdGhleSBhcmUgZmluaXNoZWQgd2l0aG91dFxyXG4gICAgLy8gY3JlYXRpbmcgaW5maW5pdGUgbG9vcHMuXHJcbiAgICBwaW5pYS5fcy5zZXQoJGlkLCBzdG9yZSk7XHJcbiAgICAvLyBUT0RPOiBpZGVhIGNyZWF0ZSBza2lwU2VyaWFsaXplIHRoYXQgbWFya3MgcHJvcGVydGllcyBhcyBub24gc2VyaWFsaXphYmxlIGFuZCB0aGV5IGFyZSBza2lwcGVkXHJcbiAgICBjb25zdCBzZXR1cFN0b3JlID0gcGluaWEuX2UucnVuKCgpID0+IHtcclxuICAgICAgICBzY29wZSA9IGVmZmVjdFNjb3BlKCk7XHJcbiAgICAgICAgcmV0dXJuIHNjb3BlLnJ1bigoKSA9PiBzZXR1cCgpKTtcclxuICAgIH0pO1xyXG4gICAgLy8gb3ZlcndyaXRlIGV4aXN0aW5nIGFjdGlvbnMgdG8gc3VwcG9ydCAkb25BY3Rpb25cclxuICAgIGZvciAoY29uc3Qga2V5IGluIHNldHVwU3RvcmUpIHtcclxuICAgICAgICBjb25zdCBwcm9wID0gc2V0dXBTdG9yZVtrZXldO1xyXG4gICAgICAgIGlmICgoaXNSZWYocHJvcCkgJiYgIWlzQ29tcHV0ZWQocHJvcCkpIHx8IGlzUmVhY3RpdmUocHJvcCkpIHtcclxuICAgICAgICAgICAgLy8gbWFyayBpdCBhcyBhIHBpZWNlIG9mIHN0YXRlIHRvIGJlIHNlcmlhbGl6ZWRcclxuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBob3QpIHtcclxuICAgICAgICAgICAgICAgIHNldChob3RTdGF0ZS52YWx1ZSwga2V5LCB0b1JlZihzZXR1cFN0b3JlLCBrZXkpKTtcclxuICAgICAgICAgICAgICAgIC8vIGNyZWF0ZU9wdGlvblN0b3JlIGRpcmVjdGx5IHNldHMgdGhlIHN0YXRlIGluIHBpbmlhLnN0YXRlLnZhbHVlIHNvIHdlXHJcbiAgICAgICAgICAgICAgICAvLyBjYW4ganVzdCBza2lwIHRoYXRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICghaXNPcHRpb25zU3RvcmUpIHtcclxuICAgICAgICAgICAgICAgIC8vIGluIHNldHVwIHN0b3JlcyB3ZSBtdXN0IGh5ZHJhdGUgdGhlIHN0YXRlIGFuZCBzeW5jIHBpbmlhIHN0YXRlIHRyZWUgd2l0aCB0aGUgcmVmcyB0aGUgdXNlciBqdXN0IGNyZWF0ZWRcclxuICAgICAgICAgICAgICAgIGlmIChpbml0aWFsU3RhdGUgJiYgc2hvdWxkSHlkcmF0ZShwcm9wKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1JlZihwcm9wKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wLnZhbHVlID0gaW5pdGlhbFN0YXRlW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBwcm9iYWJseSBhIHJlYWN0aXZlIG9iamVjdCwgbGV0cyByZWN1cnNpdmVseSBhc3NpZ25cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogcHJvcCBpcyB1bmtub3duXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lcmdlUmVhY3RpdmVPYmplY3RzKHByb3AsIGluaXRpYWxTdGF0ZVtrZXldKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyB0cmFuc2ZlciB0aGUgcmVmIHRvIHRoZSBwaW5pYSBzdGF0ZSB0byBrZWVwIGV2ZXJ5dGhpbmcgaW4gc3luY1xyXG4gICAgICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXHJcbiAgICAgICAgICAgICAgICBpZiAoaXNWdWUyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0KHBpbmlhLnN0YXRlLnZhbHVlWyRpZF0sIGtleSwgcHJvcCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBwaW5pYS5zdGF0ZS52YWx1ZVskaWRdW2tleV0gPSBwcm9wO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXHJcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgIF9obXJQYXlsb2FkLnN0YXRlLnB1c2goa2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBhY3Rpb25cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHByb3AgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogd2UgYXJlIG92ZXJyaWRpbmcgdGhlIGZ1bmN0aW9uIHdlIGF2b2lkIHdyYXBwaW5nIGlmXHJcbiAgICAgICAgICAgIGNvbnN0IGFjdGlvblZhbHVlID0gKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGhvdCA/IHByb3AgOiB3cmFwQWN0aW9uKGtleSwgcHJvcCk7XHJcbiAgICAgICAgICAgIC8vIHRoaXMgYSBob3QgbW9kdWxlIHJlcGxhY2VtZW50IHN0b3JlIGJlY2F1c2UgdGhlIGhvdFVwZGF0ZSBtZXRob2QgbmVlZHNcclxuICAgICAgICAgICAgLy8gdG8gZG8gaXQgd2l0aCB0aGUgcmlnaHQgY29udGV4dFxyXG4gICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cclxuICAgICAgICAgICAgaWYgKGlzVnVlMikge1xyXG4gICAgICAgICAgICAgICAgc2V0KHNldHVwU3RvcmUsIGtleSwgYWN0aW9uVmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxyXG4gICAgICAgICAgICAgICAgc2V0dXBTdG9yZVtrZXldID0gYWN0aW9uVmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cclxuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgX2htclBheWxvYWQuYWN0aW9uc1trZXldID0gcHJvcDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBsaXN0IGFjdGlvbnMgc28gdGhleSBjYW4gYmUgdXNlZCBpbiBwbHVnaW5zXHJcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcclxuICAgICAgICAgICAgb3B0aW9uc0ZvclBsdWdpbi5hY3Rpb25zW2tleV0gPSBwcm9wO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgLy8gYWRkIGdldHRlcnMgZm9yIGRldnRvb2xzXHJcbiAgICAgICAgICAgIGlmIChpc0NvbXB1dGVkKHByb3ApKSB7XHJcbiAgICAgICAgICAgICAgICBfaG1yUGF5bG9hZC5nZXR0ZXJzW2tleV0gPSBpc09wdGlvbnNTdG9yZVxyXG4gICAgICAgICAgICAgICAgICAgID8gLy8gQHRzLWV4cGVjdC1lcnJvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmdldHRlcnNba2V5XVxyXG4gICAgICAgICAgICAgICAgICAgIDogcHJvcDtcclxuICAgICAgICAgICAgICAgIGlmIChJU19DTElFTlQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBnZXR0ZXJzID0gc2V0dXBTdG9yZS5fZ2V0dGVycyB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiBzYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChzZXR1cFN0b3JlLl9nZXR0ZXJzID0gbWFya1JhdyhbXSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGdldHRlcnMucHVzaChrZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gYWRkIHRoZSBzdGF0ZSwgZ2V0dGVycywgYW5kIGFjdGlvbiBwcm9wZXJ0aWVzXHJcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cclxuICAgIGlmIChpc1Z1ZTIpIHtcclxuICAgICAgICBPYmplY3Qua2V5cyhzZXR1cFN0b3JlKS5mb3JFYWNoKChrZXkpID0+IHtcclxuICAgICAgICAgICAgc2V0KHN0b3JlLCBrZXksIHNldHVwU3RvcmVba2V5XSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBhc3NpZ24oc3RvcmUsIHNldHVwU3RvcmUpO1xyXG4gICAgICAgIC8vIGFsbG93cyByZXRyaWV2aW5nIHJlYWN0aXZlIG9iamVjdHMgd2l0aCBgc3RvcmVUb1JlZnMoKWAuIE11c3QgYmUgY2FsbGVkIGFmdGVyIGFzc2lnbmluZyB0byB0aGUgcmVhY3RpdmUgb2JqZWN0LlxyXG4gICAgICAgIC8vIE1ha2UgYHN0b3JlVG9SZWZzKClgIHdvcmsgd2l0aCBgcmVhY3RpdmUoKWAgIzc5OVxyXG4gICAgICAgIGFzc2lnbih0b1JhdyhzdG9yZSksIHNldHVwU3RvcmUpO1xyXG4gICAgfVxyXG4gICAgLy8gdXNlIHRoaXMgaW5zdGVhZCBvZiBhIGNvbXB1dGVkIHdpdGggc2V0dGVyIHRvIGJlIGFibGUgdG8gY3JlYXRlIGl0IGFueXdoZXJlXHJcbiAgICAvLyB3aXRob3V0IGxpbmtpbmcgdGhlIGNvbXB1dGVkIGxpZmVzcGFuIHRvIHdoZXJldmVyIHRoZSBzdG9yZSBpcyBmaXJzdFxyXG4gICAgLy8gY3JlYXRlZC5cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzdG9yZSwgJyRzdGF0ZScsIHtcclxuICAgICAgICBnZXQ6ICgpID0+ICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgaG90ID8gaG90U3RhdGUudmFsdWUgOiBwaW5pYS5zdGF0ZS52YWx1ZVskaWRdKSxcclxuICAgICAgICBzZXQ6IChzdGF0ZSkgPT4ge1xyXG4gICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cclxuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBob3QpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignY2Fubm90IHNldCBob3RTdGF0ZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICRwYXRjaCgoJHN0YXRlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBhc3NpZ24oJHN0YXRlLCBzdGF0ZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICB9KTtcclxuICAgIC8vIGFkZCB0aGUgaG90VXBkYXRlIGJlZm9yZSBwbHVnaW5zIHRvIGFsbG93IHRoZW0gdG8gb3ZlcnJpZGUgaXRcclxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgc3RvcmUuX2hvdFVwZGF0ZSA9IG1hcmtSYXcoKG5ld1N0b3JlKSA9PiB7XHJcbiAgICAgICAgICAgIHN0b3JlLl9ob3RVcGRhdGluZyA9IHRydWU7XHJcbiAgICAgICAgICAgIG5ld1N0b3JlLl9obXJQYXlsb2FkLnN0YXRlLmZvckVhY2goKHN0YXRlS2V5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGVLZXkgaW4gc3RvcmUuJHN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3U3RhdGVUYXJnZXQgPSBuZXdTdG9yZS4kc3RhdGVbc3RhdGVLZXldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9sZFN0YXRlU291cmNlID0gc3RvcmUuJHN0YXRlW3N0YXRlS2V5XTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG5ld1N0YXRlVGFyZ2V0ID09PSAnb2JqZWN0JyAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1BsYWluT2JqZWN0KG5ld1N0YXRlVGFyZ2V0KSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1BsYWluT2JqZWN0KG9sZFN0YXRlU291cmNlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRjaE9iamVjdChuZXdTdGF0ZVRhcmdldCwgb2xkU3RhdGVTb3VyY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHJhbnNmZXIgdGhlIHJlZlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdTdG9yZS4kc3RhdGVbc3RhdGVLZXldID0gb2xkU3RhdGVTb3VyY2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gcGF0Y2ggZGlyZWN0IGFjY2VzcyBwcm9wZXJ0aWVzIHRvIGFsbG93IHN0b3JlLnN0YXRlUHJvcGVydHkgdG8gd29yayBhc1xyXG4gICAgICAgICAgICAgICAgLy8gc3RvcmUuJHN0YXRlLnN0YXRlUHJvcGVydHlcclxuICAgICAgICAgICAgICAgIHNldChzdG9yZSwgc3RhdGVLZXksIHRvUmVmKG5ld1N0b3JlLiRzdGF0ZSwgc3RhdGVLZXkpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIHJlbW92ZSBkZWxldGVkIHN0YXRlIHByb3BlcnRpZXNcclxuICAgICAgICAgICAgT2JqZWN0LmtleXMoc3RvcmUuJHN0YXRlKS5mb3JFYWNoKChzdGF0ZUtleSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEoc3RhdGVLZXkgaW4gbmV3U3RvcmUuJHN0YXRlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbChzdG9yZSwgc3RhdGVLZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gYXZvaWQgZGV2dG9vbHMgbG9nZ2luZyB0aGlzIGFzIGEgbXV0YXRpb25cclxuICAgICAgICAgICAgaXNMaXN0ZW5pbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgaXNTeW5jTGlzdGVuaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHBpbmlhLnN0YXRlLnZhbHVlWyRpZF0gPSB0b1JlZihuZXdTdG9yZS5faG1yUGF5bG9hZCwgJ2hvdFN0YXRlJyk7XHJcbiAgICAgICAgICAgIGlzU3luY0xpc3RlbmluZyA9IHRydWU7XHJcbiAgICAgICAgICAgIG5leHRUaWNrKCkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpc0xpc3RlbmluZyA9IHRydWU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGFjdGlvbk5hbWUgaW4gbmV3U3RvcmUuX2htclBheWxvYWQuYWN0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYWN0aW9uID0gbmV3U3RvcmVbYWN0aW9uTmFtZV07XHJcbiAgICAgICAgICAgICAgICBzZXQoc3RvcmUsIGFjdGlvbk5hbWUsIHdyYXBBY3Rpb24oYWN0aW9uTmFtZSwgYWN0aW9uKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gVE9ETzogZG9lcyB0aGlzIHdvcmsgaW4gYm90aCBzZXR1cCBhbmQgb3B0aW9uIHN0b3JlP1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGdldHRlck5hbWUgaW4gbmV3U3RvcmUuX2htclBheWxvYWQuZ2V0dGVycykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZ2V0dGVyID0gbmV3U3RvcmUuX2htclBheWxvYWQuZ2V0dGVyc1tnZXR0ZXJOYW1lXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGdldHRlclZhbHVlID0gaXNPcHRpb25zU3RvcmVcclxuICAgICAgICAgICAgICAgICAgICA/IC8vIHNwZWNpYWwgaGFuZGxpbmcgb2Ygb3B0aW9ucyBhcGlcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcHV0ZWQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0QWN0aXZlUGluaWEocGluaWEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldHRlci5jYWxsKHN0b3JlLCBzdG9yZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgOiBnZXR0ZXI7XHJcbiAgICAgICAgICAgICAgICBzZXQoc3RvcmUsIGdldHRlck5hbWUsIGdldHRlclZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyByZW1vdmUgZGVsZXRlZCBnZXR0ZXJzXHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHN0b3JlLl9obXJQYXlsb2FkLmdldHRlcnMpLmZvckVhY2goKGtleSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEoa2V5IGluIG5ld1N0b3JlLl9obXJQYXlsb2FkLmdldHRlcnMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsKHN0b3JlLCBrZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gcmVtb3ZlIG9sZCBhY3Rpb25zXHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHN0b3JlLl9obXJQYXlsb2FkLmFjdGlvbnMpLmZvckVhY2goKGtleSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEoa2V5IGluIG5ld1N0b3JlLl9obXJQYXlsb2FkLmFjdGlvbnMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsKHN0b3JlLCBrZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSB2YWx1ZXMgdXNlZCBpbiBkZXZ0b29scyBhbmQgdG8gYWxsb3cgZGVsZXRpbmcgbmV3IHByb3BlcnRpZXMgbGF0ZXIgb25cclxuICAgICAgICAgICAgc3RvcmUuX2htclBheWxvYWQgPSBuZXdTdG9yZS5faG1yUGF5bG9hZDtcclxuICAgICAgICAgICAgc3RvcmUuX2dldHRlcnMgPSBuZXdTdG9yZS5fZ2V0dGVycztcclxuICAgICAgICAgICAgc3RvcmUuX2hvdFVwZGF0aW5nID0gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoVVNFX0RFVlRPT0xTKSB7XHJcbiAgICAgICAgY29uc3Qgbm9uRW51bWVyYWJsZSA9IHtcclxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgLy8gYXZvaWQgd2FybmluZyBvbiBkZXZ0b29scyB0cnlpbmcgdG8gZGlzcGxheSB0aGlzIHByb3BlcnR5XHJcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgWydfcCcsICdfaG1yUGF5bG9hZCcsICdfZ2V0dGVycycsICdfY3VzdG9tUHJvcGVydGllcyddLmZvckVhY2goKHApID0+IHtcclxuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHN0b3JlLCBwLCB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogc3RvcmVbcF0sXHJcbiAgICAgICAgICAgICAgICAuLi5ub25FbnVtZXJhYmxlLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xyXG4gICAgaWYgKGlzVnVlMikge1xyXG4gICAgICAgIC8vIG1hcmsgdGhlIHN0b3JlIGFzIHJlYWR5IGJlZm9yZSBwbHVnaW5zXHJcbiAgICAgICAgc3RvcmUuX3IgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgLy8gYXBwbHkgYWxsIHBsdWdpbnNcclxuICAgIHBpbmlhLl9wLmZvckVhY2goKGV4dGVuZGVyKSA9PiB7XHJcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cclxuICAgICAgICBpZiAoVVNFX0RFVlRPT0xTKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4dGVuc2lvbnMgPSBzY29wZS5ydW4oKCkgPT4gZXh0ZW5kZXIoe1xyXG4gICAgICAgICAgICAgICAgc3RvcmUsXHJcbiAgICAgICAgICAgICAgICBhcHA6IHBpbmlhLl9hLFxyXG4gICAgICAgICAgICAgICAgcGluaWEsXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBvcHRpb25zRm9yUGx1Z2luLFxyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKGV4dGVuc2lvbnMgfHwge30pLmZvckVhY2goKGtleSkgPT4gc3RvcmUuX2N1c3RvbVByb3BlcnRpZXMuYWRkKGtleSkpO1xyXG4gICAgICAgICAgICBhc3NpZ24oc3RvcmUsIGV4dGVuc2lvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgYXNzaWduKHN0b3JlLCBzY29wZS5ydW4oKCkgPT4gZXh0ZW5kZXIoe1xyXG4gICAgICAgICAgICAgICAgc3RvcmUsXHJcbiAgICAgICAgICAgICAgICBhcHA6IHBpbmlhLl9hLFxyXG4gICAgICAgICAgICAgICAgcGluaWEsXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBvcHRpb25zRm9yUGx1Z2luLFxyXG4gICAgICAgICAgICB9KSkpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxyXG4gICAgICAgIHN0b3JlLiRzdGF0ZSAmJlxyXG4gICAgICAgIHR5cGVvZiBzdG9yZS4kc3RhdGUgPT09ICdvYmplY3QnICYmXHJcbiAgICAgICAgdHlwZW9mIHN0b3JlLiRzdGF0ZS5jb25zdHJ1Y3RvciA9PT0gJ2Z1bmN0aW9uJyAmJlxyXG4gICAgICAgICFzdG9yZS4kc3RhdGUuY29uc3RydWN0b3IudG9TdHJpbmcoKS5pbmNsdWRlcygnW25hdGl2ZSBjb2RlXScpKSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKGBb8J+NjV06IFRoZSBcInN0YXRlXCIgbXVzdCBiZSBhIHBsYWluIG9iamVjdC4gSXQgY2Fubm90IGJlXFxuYCArXHJcbiAgICAgICAgICAgIGBcXHRzdGF0ZTogKCkgPT4gbmV3IE15Q2xhc3MoKVxcbmAgK1xyXG4gICAgICAgICAgICBgRm91bmQgaW4gc3RvcmUgXCIke3N0b3JlLiRpZH1cIi5gKTtcclxuICAgIH1cclxuICAgIC8vIG9ubHkgYXBwbHkgaHlkcmF0ZSB0byBvcHRpb24gc3RvcmVzIHdpdGggYW4gaW5pdGlhbCBzdGF0ZSBpbiBwaW5pYVxyXG4gICAgaWYgKGluaXRpYWxTdGF0ZSAmJlxyXG4gICAgICAgIGlzT3B0aW9uc1N0b3JlICYmXHJcbiAgICAgICAgb3B0aW9ucy5oeWRyYXRlKSB7XHJcbiAgICAgICAgb3B0aW9ucy5oeWRyYXRlKHN0b3JlLiRzdGF0ZSwgaW5pdGlhbFN0YXRlKTtcclxuICAgIH1cclxuICAgIGlzTGlzdGVuaW5nID0gdHJ1ZTtcclxuICAgIGlzU3luY0xpc3RlbmluZyA9IHRydWU7XHJcbiAgICByZXR1cm4gc3RvcmU7XHJcbn1cclxuZnVuY3Rpb24gZGVmaW5lU3RvcmUoXHJcbi8vIFRPRE86IGFkZCBwcm9wZXIgdHlwZXMgZnJvbSBhYm92ZVxyXG5pZE9yT3B0aW9ucywgc2V0dXAsIHNldHVwT3B0aW9ucykge1xyXG4gICAgbGV0IGlkO1xyXG4gICAgbGV0IG9wdGlvbnM7XHJcbiAgICBjb25zdCBpc1NldHVwU3RvcmUgPSB0eXBlb2Ygc2V0dXAgPT09ICdmdW5jdGlvbic7XHJcbiAgICBpZiAodHlwZW9mIGlkT3JPcHRpb25zID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIGlkID0gaWRPck9wdGlvbnM7XHJcbiAgICAgICAgLy8gdGhlIG9wdGlvbiBzdG9yZSBzZXR1cCB3aWxsIGNvbnRhaW4gdGhlIGFjdHVhbCBvcHRpb25zIGluIHRoaXMgY2FzZVxyXG4gICAgICAgIG9wdGlvbnMgPSBpc1NldHVwU3RvcmUgPyBzZXR1cE9wdGlvbnMgOiBzZXR1cDtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIG9wdGlvbnMgPSBpZE9yT3B0aW9ucztcclxuICAgICAgICBpZCA9IGlkT3JPcHRpb25zLmlkO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gdXNlU3RvcmUocGluaWEsIGhvdCkge1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRJbnN0YW5jZSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpO1xyXG4gICAgICAgIHBpbmlhID1cclxuICAgICAgICAgICAgLy8gaW4gdGVzdCBtb2RlLCBpZ25vcmUgdGhlIGFyZ3VtZW50IHByb3ZpZGVkIGFzIHdlIGNhbiBhbHdheXMgcmV0cmlldmUgYVxyXG4gICAgICAgICAgICAvLyBwaW5pYSBpbnN0YW5jZSB3aXRoIGdldEFjdGl2ZVBpbmlhKClcclxuICAgICAgICAgICAgKChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Rlc3QnKSAmJiBhY3RpdmVQaW5pYSAmJiBhY3RpdmVQaW5pYS5fdGVzdGluZyA/IG51bGwgOiBwaW5pYSkgfHxcclxuICAgICAgICAgICAgICAgIChjdXJyZW50SW5zdGFuY2UgJiYgaW5qZWN0KHBpbmlhU3ltYm9sLCBudWxsKSk7XHJcbiAgICAgICAgaWYgKHBpbmlhKVxyXG4gICAgICAgICAgICBzZXRBY3RpdmVQaW5pYShwaW5pYSk7XHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhYWN0aXZlUGluaWEpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBb8J+NjV06IGdldEFjdGl2ZVBpbmlhIHdhcyBjYWxsZWQgd2l0aCBubyBhY3RpdmUgUGluaWEuIERpZCB5b3UgZm9yZ2V0IHRvIGluc3RhbGwgcGluaWE/XFxuYCArXHJcbiAgICAgICAgICAgICAgICBgXFx0Y29uc3QgcGluaWEgPSBjcmVhdGVQaW5pYSgpXFxuYCArXHJcbiAgICAgICAgICAgICAgICBgXFx0YXBwLnVzZShwaW5pYSlcXG5gICtcclxuICAgICAgICAgICAgICAgIGBUaGlzIHdpbGwgZmFpbCBpbiBwcm9kdWN0aW9uLmApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwaW5pYSA9IGFjdGl2ZVBpbmlhO1xyXG4gICAgICAgIGlmICghcGluaWEuX3MuaGFzKGlkKSkge1xyXG4gICAgICAgICAgICAvLyBjcmVhdGluZyB0aGUgc3RvcmUgcmVnaXN0ZXJzIGl0IGluIGBwaW5pYS5fc2BcclxuICAgICAgICAgICAgaWYgKGlzU2V0dXBTdG9yZSkge1xyXG4gICAgICAgICAgICAgICAgY3JlYXRlU2V0dXBTdG9yZShpZCwgc2V0dXAsIG9wdGlvbnMsIHBpbmlhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNyZWF0ZU9wdGlvbnNTdG9yZShpZCwgb3B0aW9ucywgcGluaWEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXHJcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IG5vdCB0aGUgcmlnaHQgaW5mZXJyZWQgdHlwZVxyXG4gICAgICAgICAgICAgICAgdXNlU3RvcmUuX3BpbmlhID0gcGluaWE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgc3RvcmUgPSBwaW5pYS5fcy5nZXQoaWQpO1xyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgaG90KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGhvdElkID0gJ19faG90OicgKyBpZDtcclxuICAgICAgICAgICAgY29uc3QgbmV3U3RvcmUgPSBpc1NldHVwU3RvcmVcclxuICAgICAgICAgICAgICAgID8gY3JlYXRlU2V0dXBTdG9yZShob3RJZCwgc2V0dXAsIG9wdGlvbnMsIHBpbmlhLCB0cnVlKVxyXG4gICAgICAgICAgICAgICAgOiBjcmVhdGVPcHRpb25zU3RvcmUoaG90SWQsIGFzc2lnbih7fSwgb3B0aW9ucyksIHBpbmlhLCB0cnVlKTtcclxuICAgICAgICAgICAgaG90Ll9ob3RVcGRhdGUobmV3U3RvcmUpO1xyXG4gICAgICAgICAgICAvLyBjbGVhbnVwIHRoZSBzdGF0ZSBwcm9wZXJ0aWVzIGFuZCB0aGUgc3RvcmUgZnJvbSB0aGUgY2FjaGVcclxuICAgICAgICAgICAgZGVsZXRlIHBpbmlhLnN0YXRlLnZhbHVlW2hvdElkXTtcclxuICAgICAgICAgICAgcGluaWEuX3MuZGVsZXRlKGhvdElkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gc2F2ZSBzdG9yZXMgaW4gaW5zdGFuY2VzIHRvIGFjY2VzcyB0aGVtIGRldnRvb2xzXHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxyXG4gICAgICAgICAgICBJU19DTElFTlQgJiZcclxuICAgICAgICAgICAgY3VycmVudEluc3RhbmNlICYmXHJcbiAgICAgICAgICAgIGN1cnJlbnRJbnN0YW5jZS5wcm94eSAmJlxyXG4gICAgICAgICAgICAvLyBhdm9pZCBhZGRpbmcgc3RvcmVzIHRoYXQgYXJlIGp1c3QgYnVpbHQgZm9yIGhvdCBtb2R1bGUgcmVwbGFjZW1lbnRcclxuICAgICAgICAgICAgIWhvdCkge1xyXG4gICAgICAgICAgICBjb25zdCB2bSA9IGN1cnJlbnRJbnN0YW5jZS5wcm94eTtcclxuICAgICAgICAgICAgY29uc3QgY2FjaGUgPSAnX3BTdG9yZXMnIGluIHZtID8gdm0uX3BTdG9yZXMgOiAodm0uX3BTdG9yZXMgPSB7fSk7XHJcbiAgICAgICAgICAgIGNhY2hlW2lkXSA9IHN0b3JlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBTdG9yZUdlbmVyaWMgY2Fubm90IGJlIGNhc3RlZCB0b3dhcmRzIFN0b3JlXHJcbiAgICAgICAgcmV0dXJuIHN0b3JlO1xyXG4gICAgfVxyXG4gICAgdXNlU3RvcmUuJGlkID0gaWQ7XHJcbiAgICByZXR1cm4gdXNlU3RvcmU7XHJcbn1cblxubGV0IG1hcFN0b3JlU3VmZml4ID0gJ1N0b3JlJztcclxuLyoqXHJcbiAqIENoYW5nZXMgdGhlIHN1ZmZpeCBhZGRlZCBieSBgbWFwU3RvcmVzKClgLiBDYW4gYmUgc2V0IHRvIGFuIGVtcHR5IHN0cmluZy5cclxuICogRGVmYXVsdHMgdG8gYFwiU3RvcmVcImAuIE1ha2Ugc3VyZSB0byBleHRlbmQgdGhlIE1hcFN0b3Jlc0N1c3RvbWl6YXRpb25cclxuICogaW50ZXJmYWNlIGlmIHlvdSBhcmUgdXNpbmcgVHlwZVNjcmlwdC5cclxuICpcclxuICogQHBhcmFtIHN1ZmZpeCAtIG5ldyBzdWZmaXhcclxuICovXHJcbmZ1bmN0aW9uIHNldE1hcFN0b3JlU3VmZml4KHN1ZmZpeCAvLyBjb3VsZCBiZSAnU3RvcmUnIGJ1dCB0aGF0IHdvdWxkIGJlIGFubm95aW5nIGZvciBKU1xyXG4pIHtcclxuICAgIG1hcFN0b3JlU3VmZml4ID0gc3VmZml4O1xyXG59XHJcbi8qKlxyXG4gKiBBbGxvd3MgdXNpbmcgc3RvcmVzIHdpdGhvdXQgdGhlIGNvbXBvc2l0aW9uIEFQSSAoYHNldHVwKClgKSBieSBnZW5lcmF0aW5nIGFuXHJcbiAqIG9iamVjdCB0byBiZSBzcHJlYWQgaW4gdGhlIGBjb21wdXRlZGAgZmllbGQgb2YgYSBjb21wb25lbnQuIEl0IGFjY2VwdHMgYSBsaXN0XHJcbiAqIG9mIHN0b3JlIGRlZmluaXRpb25zLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqc1xyXG4gKiBleHBvcnQgZGVmYXVsdCB7XHJcbiAqICAgY29tcHV0ZWQ6IHtcclxuICogICAgIC8vIG90aGVyIGNvbXB1dGVkIHByb3BlcnRpZXNcclxuICogICAgIC4uLm1hcFN0b3Jlcyh1c2VVc2VyU3RvcmUsIHVzZUNhcnRTdG9yZSlcclxuICogICB9LFxyXG4gKlxyXG4gKiAgIGNyZWF0ZWQoKSB7XHJcbiAqICAgICB0aGlzLnVzZXJTdG9yZSAvLyBzdG9yZSB3aXRoIGlkIFwidXNlclwiXHJcbiAqICAgICB0aGlzLmNhcnRTdG9yZSAvLyBzdG9yZSB3aXRoIGlkIFwiY2FydFwiXHJcbiAqICAgfVxyXG4gKiB9XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gc3RvcmVzIC0gbGlzdCBvZiBzdG9yZXMgdG8gbWFwIHRvIGFuIG9iamVjdFxyXG4gKi9cclxuZnVuY3Rpb24gbWFwU3RvcmVzKC4uLnN0b3Jlcykge1xyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBBcnJheS5pc0FycmF5KHN0b3Jlc1swXSkpIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oYFvwn42NXTogRGlyZWN0bHkgcGFzcyBhbGwgc3RvcmVzIHRvIFwibWFwU3RvcmVzKClcIiB3aXRob3V0IHB1dHRpbmcgdGhlbSBpbiBhbiBhcnJheTpcXG5gICtcclxuICAgICAgICAgICAgYFJlcGxhY2VcXG5gICtcclxuICAgICAgICAgICAgYFxcdG1hcFN0b3JlcyhbdXNlQXV0aFN0b3JlLCB1c2VDYXJ0U3RvcmVdKVxcbmAgK1xyXG4gICAgICAgICAgICBgd2l0aFxcbmAgK1xyXG4gICAgICAgICAgICBgXFx0bWFwU3RvcmVzKHVzZUF1dGhTdG9yZSwgdXNlQ2FydFN0b3JlKVxcbmAgK1xyXG4gICAgICAgICAgICBgVGhpcyB3aWxsIGZhaWwgaW4gcHJvZHVjdGlvbiBpZiBub3QgZml4ZWQuYCk7XHJcbiAgICAgICAgc3RvcmVzID0gc3RvcmVzWzBdO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN0b3Jlcy5yZWR1Y2UoKHJlZHVjZWQsIHVzZVN0b3JlKSA9PiB7XHJcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogJGlkIGlzIGFkZGVkIGJ5IGRlZmluZVN0b3JlXHJcbiAgICAgICAgcmVkdWNlZFt1c2VTdG9yZS4kaWQgKyBtYXBTdG9yZVN1ZmZpeF0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1c2VTdG9yZSh0aGlzLiRwaW5pYSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gcmVkdWNlZDtcclxuICAgIH0sIHt9KTtcclxufVxyXG4vKipcclxuICogQWxsb3dzIHVzaW5nIHN0YXRlIGFuZCBnZXR0ZXJzIGZyb20gb25lIHN0b3JlIHdpdGhvdXQgdXNpbmcgdGhlIGNvbXBvc2l0aW9uXHJcbiAqIEFQSSAoYHNldHVwKClgKSBieSBnZW5lcmF0aW5nIGFuIG9iamVjdCB0byBiZSBzcHJlYWQgaW4gdGhlIGBjb21wdXRlZGAgZmllbGRcclxuICogb2YgYSBjb21wb25lbnQuXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VTdG9yZSAtIHN0b3JlIHRvIG1hcCBmcm9tXHJcbiAqIEBwYXJhbSBrZXlzT3JNYXBwZXIgLSBhcnJheSBvciBvYmplY3RcclxuICovXHJcbmZ1bmN0aW9uIG1hcFN0YXRlKHVzZVN0b3JlLCBrZXlzT3JNYXBwZXIpIHtcclxuICAgIHJldHVybiBBcnJheS5pc0FycmF5KGtleXNPck1hcHBlcilcclxuICAgICAgICA/IGtleXNPck1hcHBlci5yZWR1Y2UoKHJlZHVjZWQsIGtleSkgPT4ge1xyXG4gICAgICAgICAgICByZWR1Y2VkW2tleV0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdXNlU3RvcmUodGhpcy4kcGluaWEpW2tleV07XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJldHVybiByZWR1Y2VkO1xyXG4gICAgICAgIH0sIHt9KVxyXG4gICAgICAgIDogT2JqZWN0LmtleXMoa2V5c09yTWFwcGVyKS5yZWR1Y2UoKHJlZHVjZWQsIGtleSkgPT4ge1xyXG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXHJcbiAgICAgICAgICAgIHJlZHVjZWRba2V5XSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN0b3JlID0gdXNlU3RvcmUodGhpcy4kcGluaWEpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RvcmVLZXkgPSBrZXlzT3JNYXBwZXJba2V5XTtcclxuICAgICAgICAgICAgICAgIC8vIGZvciBzb21lIHJlYXNvbiBUUyBpcyB1bmFibGUgdG8gaW5mZXIgdGhlIHR5cGUgb2Ygc3RvcmVLZXkgdG8gYmUgYVxyXG4gICAgICAgICAgICAgICAgLy8gZnVuY3Rpb25cclxuICAgICAgICAgICAgICAgIHJldHVybiB0eXBlb2Ygc3RvcmVLZXkgPT09ICdmdW5jdGlvbidcclxuICAgICAgICAgICAgICAgICAgICA/IHN0b3JlS2V5LmNhbGwodGhpcywgc3RvcmUpXHJcbiAgICAgICAgICAgICAgICAgICAgOiBzdG9yZVtzdG9yZUtleV07XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJldHVybiByZWR1Y2VkO1xyXG4gICAgICAgIH0sIHt9KTtcclxufVxyXG4vKipcclxuICogQWxpYXMgZm9yIGBtYXBTdGF0ZSgpYC4gWW91IHNob3VsZCB1c2UgYG1hcFN0YXRlKClgIGluc3RlYWQuXHJcbiAqIEBkZXByZWNhdGVkIHVzZSBgbWFwU3RhdGUoKWAgaW5zdGVhZC5cclxuICovXHJcbmNvbnN0IG1hcEdldHRlcnMgPSBtYXBTdGF0ZTtcclxuLyoqXHJcbiAqIEFsbG93cyBkaXJlY3RseSB1c2luZyBhY3Rpb25zIGZyb20geW91ciBzdG9yZSB3aXRob3V0IHVzaW5nIHRoZSBjb21wb3NpdGlvblxyXG4gKiBBUEkgKGBzZXR1cCgpYCkgYnkgZ2VuZXJhdGluZyBhbiBvYmplY3QgdG8gYmUgc3ByZWFkIGluIHRoZSBgbWV0aG9kc2AgZmllbGRcclxuICogb2YgYSBjb21wb25lbnQuXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VTdG9yZSAtIHN0b3JlIHRvIG1hcCBmcm9tXHJcbiAqIEBwYXJhbSBrZXlzT3JNYXBwZXIgLSBhcnJheSBvciBvYmplY3RcclxuICovXHJcbmZ1bmN0aW9uIG1hcEFjdGlvbnModXNlU3RvcmUsIGtleXNPck1hcHBlcikge1xyXG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoa2V5c09yTWFwcGVyKVxyXG4gICAgICAgID8ga2V5c09yTWFwcGVyLnJlZHVjZSgocmVkdWNlZCwga2V5KSA9PiB7XHJcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcclxuICAgICAgICAgICAgcmVkdWNlZFtrZXldID0gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1c2VTdG9yZSh0aGlzLiRwaW5pYSlba2V5XSguLi5hcmdzKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlZHVjZWQ7XHJcbiAgICAgICAgfSwge30pXHJcbiAgICAgICAgOiBPYmplY3Qua2V5cyhrZXlzT3JNYXBwZXIpLnJlZHVjZSgocmVkdWNlZCwga2V5KSA9PiB7XHJcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcclxuICAgICAgICAgICAgcmVkdWNlZFtrZXldID0gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1c2VTdG9yZSh0aGlzLiRwaW5pYSlba2V5c09yTWFwcGVyW2tleV1dKC4uLmFyZ3MpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXR1cm4gcmVkdWNlZDtcclxuICAgICAgICB9LCB7fSk7XHJcbn1cclxuLyoqXHJcbiAqIEFsbG93cyB1c2luZyBzdGF0ZSBhbmQgZ2V0dGVycyBmcm9tIG9uZSBzdG9yZSB3aXRob3V0IHVzaW5nIHRoZSBjb21wb3NpdGlvblxyXG4gKiBBUEkgKGBzZXR1cCgpYCkgYnkgZ2VuZXJhdGluZyBhbiBvYmplY3QgdG8gYmUgc3ByZWFkIGluIHRoZSBgY29tcHV0ZWRgIGZpZWxkXHJcbiAqIG9mIGEgY29tcG9uZW50LlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlU3RvcmUgLSBzdG9yZSB0byBtYXAgZnJvbVxyXG4gKiBAcGFyYW0ga2V5c09yTWFwcGVyIC0gYXJyYXkgb3Igb2JqZWN0XHJcbiAqL1xyXG5mdW5jdGlvbiBtYXBXcml0YWJsZVN0YXRlKHVzZVN0b3JlLCBrZXlzT3JNYXBwZXIpIHtcclxuICAgIHJldHVybiBBcnJheS5pc0FycmF5KGtleXNPck1hcHBlcilcclxuICAgICAgICA/IGtleXNPck1hcHBlci5yZWR1Y2UoKHJlZHVjZWQsIGtleSkgPT4ge1xyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIHJlZHVjZWRba2V5XSA9IHtcclxuICAgICAgICAgICAgICAgIGdldCgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXNlU3RvcmUodGhpcy4kcGluaWEpW2tleV07XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2V0KHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaXQncyBlYXNpZXIgdG8gdHlwZSBpdCBoZXJlIGFzIGFueVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAodXNlU3RvcmUodGhpcy4kcGluaWEpW2tleV0gPSB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXR1cm4gcmVkdWNlZDtcclxuICAgICAgICB9LCB7fSlcclxuICAgICAgICA6IE9iamVjdC5rZXlzKGtleXNPck1hcHBlcikucmVkdWNlKChyZWR1Y2VkLCBrZXkpID0+IHtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICByZWR1Y2VkW2tleV0gPSB7XHJcbiAgICAgICAgICAgICAgICBnZXQoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVzZVN0b3JlKHRoaXMuJHBpbmlhKVtrZXlzT3JNYXBwZXJba2V5XV07XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2V0KHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaXQncyBlYXNpZXIgdG8gdHlwZSBpdCBoZXJlIGFzIGFueVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAodXNlU3RvcmUodGhpcy4kcGluaWEpW2tleXNPck1hcHBlcltrZXldXSA9IHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJldHVybiByZWR1Y2VkO1xyXG4gICAgICAgIH0sIHt9KTtcclxufVxuXG4vKipcclxuICogQ3JlYXRlcyBhbiBvYmplY3Qgb2YgcmVmZXJlbmNlcyB3aXRoIGFsbCB0aGUgc3RhdGUsIGdldHRlcnMsIGFuZCBwbHVnaW4tYWRkZWRcclxuICogc3RhdGUgcHJvcGVydGllcyBvZiB0aGUgc3RvcmUuIFNpbWlsYXIgdG8gYHRvUmVmcygpYCBidXQgc3BlY2lmaWNhbGx5XHJcbiAqIGRlc2lnbmVkIGZvciBQaW5pYSBzdG9yZXMgc28gbWV0aG9kcyBhbmQgbm9uIHJlYWN0aXZlIHByb3BlcnRpZXMgYXJlXHJcbiAqIGNvbXBsZXRlbHkgaWdub3JlZC5cclxuICpcclxuICogQHBhcmFtIHN0b3JlIC0gc3RvcmUgdG8gZXh0cmFjdCB0aGUgcmVmcyBmcm9tXHJcbiAqL1xyXG5mdW5jdGlvbiBzdG9yZVRvUmVmcyhzdG9yZSkge1xyXG4gICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy9waW5pYS9pc3N1ZXMvODUyXHJcbiAgICAvLyBJdCdzIGVhc2llciB0byBqdXN0IHVzZSB0b1JlZnMoKSBldmVuIGlmIGl0IGluY2x1ZGVzIG1vcmUgc3R1ZmZcclxuICAgIGlmIChpc1Z1ZTIpIHtcclxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiB0b1JlZnMgaW5jbHVkZSBtZXRob2RzIGFuZCBvdGhlcnNcclxuICAgICAgICByZXR1cm4gdG9SZWZzKHN0b3JlKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHN0b3JlID0gdG9SYXcoc3RvcmUpO1xyXG4gICAgICAgIGNvbnN0IHJlZnMgPSB7fTtcclxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzdG9yZSkge1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHN0b3JlW2tleV07XHJcbiAgICAgICAgICAgIGlmIChpc1JlZih2YWx1ZSkgfHwgaXNSZWFjdGl2ZSh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IHRoZSBrZXkgaXMgc3RhdGUgb3IgZ2V0dGVyXHJcbiAgICAgICAgICAgICAgICByZWZzW2tleV0gPVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIC0tLVxyXG4gICAgICAgICAgICAgICAgICAgIHRvUmVmKHN0b3JlLCBrZXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZWZzO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBWdWUgMiBQbHVnaW4gdGhhdCBtdXN0IGJlIGluc3RhbGxlZCBmb3IgcGluaWEgdG8gd29yay4gTm90ZSAqKnlvdSBkb24ndCBuZWVkXHJcbiAqIHRoaXMgcGx1Z2luIGlmIHlvdSBhcmUgdXNpbmcgTnV4dC5qcyoqLiBVc2UgdGhlIGBidWlsZE1vZHVsZWAgaW5zdGVhZDpcclxuICogaHR0cHM6Ly9waW5pYS52dWVqcy5vcmcvc3NyL251eHQuaHRtbC5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBganNcclxuICogaW1wb3J0IFZ1ZSBmcm9tICd2dWUnXHJcbiAqIGltcG9ydCB7IFBpbmlhVnVlUGx1Z2luLCBjcmVhdGVQaW5pYSB9IGZyb20gJ3BpbmlhJ1xyXG4gKlxyXG4gKiBWdWUudXNlKFBpbmlhVnVlUGx1Z2luKVxyXG4gKiBjb25zdCBwaW5pYSA9IGNyZWF0ZVBpbmlhKClcclxuICpcclxuICogbmV3IFZ1ZSh7XHJcbiAqICAgZWw6ICcjYXBwJyxcclxuICogICAvLyAuLi5cclxuICogICBwaW5pYSxcclxuICogfSlcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSBfVnVlIC0gYFZ1ZWAgaW1wb3J0ZWQgZnJvbSAndnVlJy5cclxuICovXHJcbmNvbnN0IFBpbmlhVnVlUGx1Z2luID0gZnVuY3Rpb24gKF9WdWUpIHtcclxuICAgIC8vIEVxdWl2YWxlbnQgb2ZcclxuICAgIC8vIGFwcC5jb25maWcuZ2xvYmFsUHJvcGVydGllcy4kcGluaWEgPSBwaW5pYVxyXG4gICAgX1Z1ZS5taXhpbih7XHJcbiAgICAgICAgYmVmb3JlQ3JlYXRlKCkge1xyXG4gICAgICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy4kb3B0aW9ucztcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMucGluaWEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBpbmlhID0gb3B0aW9ucy5waW5pYTtcclxuICAgICAgICAgICAgICAgIC8vIEhBQ0s6IHRha2VuIGZyb20gcHJvdmlkZSgpOiBodHRwczovL2dpdGh1Yi5jb20vdnVlanMvY29tcG9zaXRpb24tYXBpL2Jsb2IvbWFpbi9zcmMvYXBpcy9pbmplY3QudHMjTDMxXHJcbiAgICAgICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9wcm92aWRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb3ZpZGVDYWNoZSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnX3Byb3ZpZGVkJywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXQ6ICgpID0+IHByb3ZpZGVDYWNoZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0OiAodikgPT4gT2JqZWN0LmFzc2lnbihwcm92aWRlQ2FjaGUsIHYpLFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5fcHJvdmlkZWRbcGluaWFTeW1ib2xdID0gcGluaWE7XHJcbiAgICAgICAgICAgICAgICAvLyBwcm9wYWdhdGUgdGhlIHBpbmlhIGluc3RhbmNlIGluIGFuIFNTUiBmcmllbmRseSB3YXlcclxuICAgICAgICAgICAgICAgIC8vIGF2b2lkIGFkZGluZyBpdCB0byBudXh0IHR3aWNlXHJcbiAgICAgICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLiRwaW5pYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJHBpbmlhID0gcGluaWE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBwaW5pYS5fYSA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICBpZiAoSVNfQ0xJRU5UKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyBhbGxvd3MgY2FsbGluZyB1c2VTdG9yZSgpIG91dHNpZGUgb2YgYSBjb21wb25lbnQgc2V0dXAgYWZ0ZXJcclxuICAgICAgICAgICAgICAgICAgICAvLyBpbnN0YWxsaW5nIHBpbmlhJ3MgcGx1Z2luXHJcbiAgICAgICAgICAgICAgICAgICAgc2V0QWN0aXZlUGluaWEocGluaWEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKFVTRV9ERVZUT09MUykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlZ2lzdGVyUGluaWFEZXZ0b29scyhwaW5pYS5fYSwgcGluaWEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKCF0aGlzLiRwaW5pYSAmJiBvcHRpb25zLnBhcmVudCAmJiBvcHRpb25zLnBhcmVudC4kcGluaWEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuJHBpbmlhID0gb3B0aW9ucy5wYXJlbnQuJHBpbmlhO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBkZXN0cm95ZWQoKSB7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9wU3RvcmVzO1xyXG4gICAgICAgIH0sXHJcbiAgICB9KTtcclxufTtcblxuZXhwb3J0IHsgTXV0YXRpb25UeXBlLCBQaW5pYVZ1ZVBsdWdpbiwgYWNjZXB0SE1SVXBkYXRlLCBjcmVhdGVQaW5pYSwgZGVmaW5lU3RvcmUsIGdldEFjdGl2ZVBpbmlhLCBtYXBBY3Rpb25zLCBtYXBHZXR0ZXJzLCBtYXBTdGF0ZSwgbWFwU3RvcmVzLCBtYXBXcml0YWJsZVN0YXRlLCBzZXRBY3RpdmVQaW5pYSwgc2V0TWFwU3RvcmVTdWZmaXgsIHNraXBIeWRyYXRlLCBzdG9yZVRvUmVmcyB9O1xuIiwiaW1wb3J0IHsgU3VibWl0dGVkRGF0YSB9IGZyb20gXCIuL1N1Ym1pdHRlZERhdGFcIjtcbmltcG9ydCB7IEVudHJ5IH0gZnJvbSBcIi4vbW9kZWwvRW50cnlcIjtcblxuZXhwb3J0IGNsYXNzIFNhdmVTdGF0ZSB7XG4gICAgb3JpZ2luYWxFbnRyeT86IEVudHJ5O1xuICAgIG5ld0VudHJ5OiBFbnRyeSA9IG5ldyBFbnRyeSh7fSk7XG4gICAgdGl0bGVSZXNldFZhbHVlOiBzdHJpbmc7XG4gICAgc3VibWl0dGVkRGF0YT86IFN1Ym1pdHRlZERhdGE7XG4gICAgbGFzdEFjdGl2ZUF0PzogRGF0ZTtcbiAgICBzaG93VVJMTWlzbWF0Y2hXYXJuaW5nOiBib29sZWFuO1xuICAgIGZhdmljb24/OiBzdHJpbmc7XG59XG4iLCJpbXBvcnQgeyBEYXRhYmFzZSB9IGZyb20gXCIuLi9jb21tb24vbW9kZWwvRGF0YWJhc2VcIjtcbmltcG9ydCB7IFBhc3N3b3JkUHJvZmlsZSB9IGZyb20gXCIuLi9jb21tb24vbW9kZWwvUGFzc3dvcmRQcm9maWxlXCI7XG5pbXBvcnQgeyBLZWVOb3RpZmljYXRpb24gfSBmcm9tIFwiLi4vY29tbW9uL0tlZU5vdGlmaWNhdGlvblwiO1xuaW1wb3J0IHsgRW50cnlTdW1tYXJ5IH0gZnJvbSBcIi4uL2NvbW1vbi9tb2RlbC9FbnRyeVN1bW1hcnlcIjtcbmltcG9ydCB7IFNhdmVTdGF0ZSB9IGZyb20gXCIuLi9jb21tb24vU2F2ZVN0YXRlXCI7XG5pbXBvcnQgeyBTYXZlRW50cnlSZXN1bHQgfSBmcm9tIFwiLi4vY29tbW9uL1NhdmVFbnRyeVJlc3VsdFwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIEtlZVN0YXRlIHtcbiAgICBsYXRlc3RDb25uZWN0aW9uRXJyb3I6IHN0cmluZztcbiAgICBsYXN0S2VlUGFzc1JQQ1JlZnJlc2g6IG51bWJlcjtcbiAgICBBY3RpdmVLZWVQYXNzRGF0YWJhc2VJbmRleDogbnVtYmVyO1xuICAgIEtlZVBhc3NEYXRhYmFzZXM6IERhdGFiYXNlW107XG4gICAgUGFzc3dvcmRQcm9maWxlczogUGFzc3dvcmRQcm9maWxlW107XG4gICAgbm90aWZpY2F0aW9uczogS2VlTm90aWZpY2F0aW9uW107XG4gICAgY29ubmVjdGVkOiBib29sZWFuO1xuICAgIGNvbm5lY3RlZFdlYnNvY2tldDogYm9vbGVhbjtcbiAgICBjdXJyZW50U2VhcmNoVGVybTogc3RyaW5nO1xuICAgIGxvZ2luc0ZvdW5kOiBib29sZWFuO1xuICAgIHNlYXJjaFJlc3VsdHM6IEVudHJ5U3VtbWFyeVtdO1xuICAgIHNhdmVTdGF0ZTogU2F2ZVN0YXRlO1xuICAgIGdlbmVyYXRlZFBhc3N3b3JkOiBzdHJpbmc7XG4gICAgc2F2ZUVudHJ5UmVzdWx0OiBTYXZlRW50cnlSZXN1bHQ7XG4gICAgZW50cnlVcGRhdGVTdGFydGVkQXRUaW1lc3RhbXA6IG51bWJlcjtcbn1cblxuZXhwb3J0IGNvbnN0IGRlZmF1bHRzID0ge1xuICAgIGxhdGVzdENvbm5lY3Rpb25FcnJvcjogXCJcIixcbiAgICBsYXN0S2VlUGFzc1JQQ1JlZnJlc2g6IDAsXG4gICAgQWN0aXZlS2VlUGFzc0RhdGFiYXNlSW5kZXg6IC0xLFxuICAgIEtlZVBhc3NEYXRhYmFzZXM6IFtdLFxuICAgIFBhc3N3b3JkUHJvZmlsZXM6IFtdLFxuICAgIG5vdGlmaWNhdGlvbnM6IFtdLFxuICAgIGNvbm5lY3RlZDogZmFsc2UsXG4gICAgY29ubmVjdGVkV2Vic29ja2V0OiBmYWxzZSxcbiAgICBjdXJyZW50U2VhcmNoVGVybTogbnVsbCxcbiAgICBsb2dpbnNGb3VuZDogZmFsc2UsXG4gICAgc2VhcmNoUmVzdWx0czogbnVsbCxcbiAgICBzYXZlU3RhdGU6IG5ldyBTYXZlU3RhdGUoKSxcbiAgICBnZW5lcmF0ZWRQYXNzd29yZDogXCJcIixcbiAgICBzYXZlRW50cnlSZXN1bHQ6IHtcbiAgICAgICAgcmVzdWx0OiBudWxsLFxuICAgICAgICByZWNlaXZlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICBmaWxlTmFtZTogbnVsbCxcbiAgICAgICAgdXVpZDogbnVsbFxuICAgIH0sXG4gICAgZW50cnlVcGRhdGVTdGFydGVkQXRUaW1lc3RhbXA6IDBcbn07XG4iLCJleHBvcnQgZW51bSBTZXNzaW9uVHlwZSB7XG4gICAgRXZlbnQgPSBcImV2ZW50XCIsXG4gICAgV2Vic29ja2V0ID0gXCJ3ZWJzb2NrZXRcIlxufVxuIiwiaW1wb3J0IHsgY3JlYXRlUGluaWEsIGRlZmluZVN0b3JlLCBEZWZpbmVTdG9yZU9wdGlvbnMsIFBpbmlhLCBTdGF0ZVRyZWUsIFN0b3JlRGVmaW5pdGlvbiwgX0dldHRlcnNUcmVlIH0gZnJvbSBcInBpbmlhXCI7XG5cbmltcG9ydCB7IEtlZVN0YXRlLCBkZWZhdWx0cyB9IGZyb20gXCIuL0tlZVN0YXRlXCI7XG5pbXBvcnQgeyBTYXZlU3RhdGUgfSBmcm9tIFwiLi4vY29tbW9uL1NhdmVTdGF0ZVwiO1xuaW1wb3J0IHsgU2Vzc2lvblR5cGUgfSBmcm9tIFwiLi4vY29tbW9uL1Nlc3Npb25UeXBlXCI7XG5pbXBvcnQgeyBGaWVsZCB9IGZyb20gXCIuLi9jb21tb24vbW9kZWwvRmllbGRcIjtcbmltcG9ydCB7IEFwcCB9IGZyb20gXCJ2dWVcIjtcblxuLyoqXG4gKiBBIHJlcGxhY2VtZW50IGZvciBgZGVmaW5lU3RvcmVgIHdoaWNoIG1ha2VzIGFsbCBzdGF0ZSBwcm9wZXJ0aWVzIHJlYWRvbmx5XG4gKiB0byBwcmV2ZW50IG11dGF0aW9ucyBvdXRzaWRlIG9mIGFjdGlvbnMuXG4gKi9cbmZ1bmN0aW9uIGRlZmluZUltbXV0YWJsZVN0b3JlPElkIGV4dGVuZHMgc3RyaW5nLCBTIGV4dGVuZHMgU3RhdGVUcmVlID0gYW55LCBHIGV4dGVuZHMgX0dldHRlcnNUcmVlPFM+ID0gYW55LCBBID0gYW55PihcbiAgICBpZDogSWQsXG4gICAgb3B0aW9uczogT21pdDxEZWZpbmVTdG9yZU9wdGlvbnM8SWQsIFMsIEcsIEE+LCBcImlkXCI+XG4gICk6IFN0b3JlRGVmaW5pdGlvbjxJZCwgUmVhZG9ubHk8Uz4sIEcsIEE+IHtcbiAgICByZXR1cm4gZGVmaW5lU3RvcmUoaWQsIG9wdGlvbnMpO1xuICB9XG5cbmNvbnN0IHVzZVN0b3JlID0gZGVmaW5lSW1tdXRhYmxlU3RvcmUoXCJrZWVcIiwge1xuICAgIHN0YXRlOiAoKTogS2VlU3RhdGUgPT4gKGRlZmF1bHRzKSxcbiAgICBnZXR0ZXJzOiB7XG4gICAgICAgIHNob3dHZW5lcmF0ZVBhc3N3b3JkTGluazogKHN0YXRlOiBLZWVTdGF0ZSkgPT4gc3RhdGUuY29ubmVjdGVkLFxuICAgICAgICBzaG93TWF0Y2hlZExvZ2luczogKHN0YXRlOiBLZWVTdGF0ZSkgPT4gISFzdGF0ZS5sb2dpbnNGb3VuZCxcbiAgICAgICAgc2hvd05vdGlmaWNhdGlvbnM6IChzdGF0ZTogS2VlU3RhdGUpID0+XG4gICAgICAgICAgICBzdGF0ZS5ub3RpZmljYXRpb25zICYmICEhc3RhdGUubm90aWZpY2F0aW9ucy5sZW5ndGgsXG4gICAgICAgIGRhdGFiYXNlSXNPcGVuOiAoc3RhdGU6IEtlZVN0YXRlKSA9PlxuICAgICAgICAgICAgc3RhdGUuY29ubmVjdGVkICYmICEhc3RhdGUuS2VlUGFzc0RhdGFiYXNlcy5sZW5ndGgsXG5cbiAgICAgICAgZGF0YWJhc2VOYW1lOiAoc3RhdGU6IEtlZVN0YXRlKSA9PiB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgc3RhdGUuS2VlUGFzc0RhdGFiYXNlcyAmJlxuICAgICAgICAgICAgICAgIHN0YXRlLktlZVBhc3NEYXRhYmFzZXMubGVuZ3RoICYmXG4gICAgICAgICAgICAgICAgc3RhdGUuQWN0aXZlS2VlUGFzc0RhdGFiYXNlSW5kZXggPj0gMFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGIgPSBzdGF0ZS5LZWVQYXNzRGF0YWJhc2VzW3N0YXRlLkFjdGl2ZUtlZVBhc3NEYXRhYmFzZUluZGV4XTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGIubmFtZSA/IGRiLm5hbWUgOiBkYi5maWxlTmFtZS5yZXBsYWNlKC9eLipbXFxcXC9dLywgXCJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgICAgfSxcbiAgICAgICAgY29ubmVjdGlvblN0YXR1cyhzdGF0ZTogS2VlU3RhdGUpOiBzdHJpbmcge1xuICAgICAgICAgICAgaWYgKHN0YXRlLmNvbm5lY3RlZCkge1xuICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5LZWVQYXNzRGF0YWJhc2VzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRTVFJGKFwibXVsdGlwbGVQYXNzd29yZFNvdXJjZXNFbmFibGVkXCIsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLktlZVBhc3NEYXRhYmFzZXMubGVuZ3RoLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzdGF0ZS5LZWVQYXNzRGF0YWJhc2VzLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGFiYXNlTmFtZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJFNUUihcIm5vdGlmeUJhckxvZ2luVG9LZWVQYXNzQnV0dG9uX3RpcFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiAkU1RSKFwibm90aWZ5QmFyTGF1bmNoS2VlUGFzc0J1dHRvbl90aXBcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGNvbm5lY3Rpb25TdGF0dXNEZXRhaWwoc3RhdGU6IEtlZVN0YXRlKTogc3RyaW5nIHtcbiAgICAgICAgICAgIGlmIChzdGF0ZS5jb25uZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUuS2VlUGFzc0RhdGFiYXNlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkU1RSRihcImxvZ2dlZEluTXVsdGlwbGVfdGlwXCIsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLktlZVBhc3NEYXRhYmFzZXMubGVuZ3RoLnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFiYXNlTmFtZVxuICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHN0YXRlLktlZVBhc3NEYXRhYmFzZXMubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRTVFJGKFwibG9nZ2VkSW5fdGlwXCIsIHRoaXMuZGF0YWJhc2VOYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gJFNUUihcIm5vdGlmeUJhckxhdW5jaEtlZVBhc3NfbGFiZWxcIik7XG4gICAgICAgIH0sXG4gICAgICAgIHNob3dPcGVuS2VlUGFzc0J1dHRvbjogKHN0YXRlOiBLZWVTdGF0ZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHN0YXRlLmNvbm5lY3RlZFdlYnNvY2tldCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGhhc1dlYnNvY2tldERCcyA9IHN0YXRlLktlZVBhc3NEYXRhYmFzZXMuc29tZShcbiAgICAgICAgICAgICAgICAgICAgZGIgPT4gZGIuc2Vzc2lvblR5cGUgPT09IFNlc3Npb25UeXBlLldlYnNvY2tldFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3VwcG9ydHNXZWJzb2NrZXRGb2N1cyA9IHN0YXRlLktlZVBhc3NEYXRhYmFzZXMuc29tZShcbiAgICAgICAgICAgICAgICAgICAgZGIgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgIGRiLnNlc3Npb25UeXBlID09PSBTZXNzaW9uVHlwZS5XZWJzb2NrZXQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGRiLnNlc3Npb25GZWF0dXJlcy5pbmRleE9mKFwiS1BSUENfT1BFTl9BTkRfRk9DVVNfREFUQUJBU0VcIikgPj0gMFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgaWYgKCFoYXNXZWJzb2NrZXREQnMgfHwgc3VwcG9ydHNXZWJzb2NrZXRGb2N1cykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGFjdGlvbnM6IHtcbiAgICAgICAgdXBkYXRlQWN0aXZlS2VlUGFzc0RhdGFiYXNlSW5kZXgocGF5bG9hZCkge1xuICAgICAgICAgICAgdGhpcy4kcGF0Y2goe0FjdGl2ZUtlZVBhc3NEYXRhYmFzZUluZGV4OiBwYXlsb2FkfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdXBkYXRlQ29ubmVjdGVkKHBheWxvYWQpIHtcbiAgICAgICAgICAgIHRoaXMuJHBhdGNoKHtjb25uZWN0ZWQ6IHBheWxvYWR9KTtcbiAgICAgICAgfSxcblxuICAgICAgICB1cGRhdGVDb25uZWN0ZWRXZWJzb2NrZXQocGF5bG9hZCkge1xuICAgICAgICAgICAgdGhpcy4kcGF0Y2goe2Nvbm5lY3RlZFdlYnNvY2tldDogcGF5bG9hZH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIHVwZGF0ZUN1cnJlbnRTZWFyY2hUZXJtKHBheWxvYWQpIHtcbiAgICAgICAgICAgIHRoaXMuJHBhdGNoKHtjdXJyZW50U2VhcmNoVGVybTogcGF5bG9hZH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIHVwZGF0ZUtlZVBhc3NEYXRhYmFzZXMocGF5bG9hZCkge1xuICAgICAgICAgICAgdGhpcy4kcGF0Y2goe0tlZVBhc3NEYXRhYmFzZXM6IHBheWxvYWR9KTtcbiAgICAgICAgfSxcblxuICAgICAgICB1cGRhdGVMYXN0S2VlUGFzc1JQQ1JlZnJlc2gocGF5bG9hZCkge1xuICAgICAgICAgICAgdGhpcy4kcGF0Y2goe2xhc3RLZWVQYXNzUlBDUmVmcmVzaDogcGF5bG9hZH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIHVwZGF0ZUxhdGVzdENvbm5lY3Rpb25FcnJvcihwYXlsb2FkKSB7XG4gICAgICAgICAgICB0aGlzLiRwYXRjaCh7bGF0ZXN0Q29ubmVjdGlvbkVycm9yOiBwYXlsb2FkfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdXBkYXRlTG9naW5zRm91bmQocGF5bG9hZCkge1xuICAgICAgICAgICAgdGhpcy4kcGF0Y2goe2xvZ2luc0ZvdW5kOiBwYXlsb2FkIHx8IGZhbHNlfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdXBkYXRlTm90aWZpY2F0aW9ucyhwYXlsb2FkKSB7XG4gICAgICAgICAgICB0aGlzLiRwYXRjaCh7bm90aWZpY2F0aW9uczogcGF5bG9hZH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIHVwZGF0ZVBhc3N3b3JkUHJvZmlsZXMocGF5bG9hZCkge1xuICAgICAgICAgICAgdGhpcy4kcGF0Y2goe1Bhc3N3b3JkUHJvZmlsZXM6IHBheWxvYWR9KTtcbiAgICAgICAgfSxcblxuICAgICAgICB1cGRhdGVHZW5lcmF0ZWRQYXNzd29yZChwYXlsb2FkKSB7XG4gICAgICAgICAgICB0aGlzLiRwYXRjaCh7Z2VuZXJhdGVkUGFzc3dvcmQ6IHBheWxvYWR9KTtcbiAgICAgICAgfSxcblxuICAgICAgICB1cGRhdGVTdWJtaXR0ZWREYXRhKHBheWxvYWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhdGNoID0gdGhpcy5zYXZlU3RhdGUgPyB7fSA6IG5ldyBTYXZlU3RhdGUoKTtcbiAgICAgICAgICAgIHRoaXMuJHBhdGNoKHtzYXZlU3RhdGU6IHtcbiAgICAgICAgICAgICAgICBzdWJtaXR0ZWREYXRhOiBwYXlsb2FkIHx8IG51bGxcbiAgICAgICAgICAgIH19KTtcbiAgICAgICAgfSxcblxuICAgICAgICB1cGRhdGVTYXZlU3RhdGUocGF5bG9hZCkge1xuICAgICAgICAgICAgdGhpcy4kcGF0Y2goe3NhdmVTdGF0ZTogcGF5bG9hZCB8fCBudWxsfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdXBkYXRlU2VhcmNoUmVzdWx0cyhwYXlsb2FkKSB7XG4gICAgICAgICAgICB0aGlzLiRwYXRjaCh7c2VhcmNoUmVzdWx0czogcGF5bG9hZCB8fCBudWxsfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdXBkYXRlU2VhcmNoUmVzdWx0V2l0aEZ1bGxEZXRhaWxzKHBheWxvYWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGNsb25lZCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5zZWFyY2hSZXN1bHRzKSk7XG4gICAgICAgICAgICBjb25zdCBpZCA9IHBheWxvYWQudXVpZDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcyBvZiBjbG9uZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAocy51dWlkID09PSBpZCkge1xuICAgICAgICAgICAgICAgICAgICBzLmZ1bGxEZXRhaWxzID0gcGF5bG9hZCB8fCBudWxsO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLiRwYXRjaCh7IHNlYXJjaFJlc3VsdHM6IGNsb25lZCB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBhZGROb3RpZmljYXRpb24ocGF5bG9hZCkge1xuICAgICAgICAgICAgY29uc3QgY2xvbmVkID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLm5vdGlmaWNhdGlvbnMpKTtcbiAgICAgICAgICAgIGNsb25lZC5wdXNoKHBheWxvYWQpO1xuICAgICAgICAgICAgdGhpcy4kcGF0Y2goeyBub3RpZmljYXRpb25zOiBjbG9uZWQgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdXBkYXRlU2F2ZUVudHJ5UmVzdWx0KHBheWxvYWQpIHtcbiAgICAgICAgICAgIHRoaXMuJHBhdGNoKHtzYXZlRW50cnlSZXN1bHQ6IHBheWxvYWQgfHwgbnVsbH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlbW92ZUZpZWxkRnJvbUFjdGl2ZUVudHJ5KHBheWxvYWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGNsb25lZCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5zYXZlU3RhdGUubmV3RW50cnkuZmllbGRzKSk7XG4gICAgICAgICAgICBjb25zdCBmaXJzdFRleHRGaWVsZEluZGV4ID0gY2xvbmVkLmZpbmRJbmRleChcbiAgICAgICAgICAgICAgICBmID0+IGYudHlwZSA9PT0gXCJ0ZXh0XCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCBmaXJzdFBhc3N3b3JkRmllbGRJbmRleCA9IGNsb25lZC5maW5kSW5kZXgoXG4gICAgICAgICAgICAgICAgZiA9PiBmLnR5cGUgPT09IFwicGFzc3dvcmRcIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsRmllbGRJbmRleCA9IGNsb25lZC5maW5kSW5kZXgoXG4gICAgICAgICAgICAgICAgZiA9PiBmLnV1aWQgPT09IChwYXlsb2FkIHx8IG51bGwpXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY2xvbmVkLnNwbGljZShvcmlnaW5hbEZpZWxkSW5kZXgsIDEpO1xuXG4gICAgICAgICAgICBpZiAob3JpZ2luYWxGaWVsZEluZGV4ID09PSBmaXJzdFRleHRGaWVsZEluZGV4KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3VXNlcm5hbWVJbmRleCA9IGNsb25lZC5maW5kSW5kZXgoXG4gICAgICAgICAgICAgICAgICAgIGYgPT4gZi50eXBlID09PSBcInRleHRcIlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgaWYgKG5ld1VzZXJuYW1lSW5kZXggPCAwKSByZXR1cm47XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3VXNlcm5hbWUgPSBjbG9uZWQuc3BsaWNlKG5ld1VzZXJuYW1lSW5kZXgsIDEpWzBdO1xuICAgICAgICAgICAgICAgIGNsb25lZC5zcGxpY2UoXG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsRmllbGRJbmRleCxcbiAgICAgICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAgICAgbmV3IEZpZWxkKHsgLi4ubmV3VXNlcm5hbWUsIG5hbWU6IFwiS2VlUGFzcyB1c2VybmFtZVwiIH0pXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAob3JpZ2luYWxGaWVsZEluZGV4ID09PSBmaXJzdFBhc3N3b3JkRmllbGRJbmRleCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1Bhc3N3b3JkSW5kZXggPSBjbG9uZWQuZmluZEluZGV4KFxuICAgICAgICAgICAgICAgICAgICBmID0+IGYudHlwZSA9PT0gXCJwYXNzd29yZFwiXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBpZiAobmV3UGFzc3dvcmRJbmRleCA8IDApIHJldHVybjtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdQYXNzd29yZCA9IGNsb25lZC5zcGxpY2UobmV3UGFzc3dvcmRJbmRleCwgMSlbMF07XG4gICAgICAgICAgICAgICAgY2xvbmVkLnNwbGljZShcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxGaWVsZEluZGV4LFxuICAgICAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgICAgICBuZXcgRmllbGQoeyAuLi5uZXdQYXNzd29yZCwgbmFtZTogXCJLZWVQYXNzIHBhc3N3b3JkXCIgfSlcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy4kcGF0Y2goe3NhdmVTdGF0ZToge25ld0VudHJ5OiB7ZmllbGRzOiBjbG9uZWR9fX0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIHVwZGF0ZUVudHJ5VXBkYXRlU3RhcnRlZEF0VGltZXN0YW1wKHBheWxvYWQpIHtcbiAgICAgICAgICAgIHRoaXMuJHBhdGNoKHtlbnRyeVVwZGF0ZVN0YXJ0ZWRBdFRpbWVzdGFtcDogcGF5bG9hZCB8fCBudWxsfSk7XG4gICAgICAgIH1cblxuICAgIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCB1c2VTdG9yZTtcblxuZXhwb3J0IHR5cGUgS2VlU3RvcmUgPSBPbWl0PFxuICAgIFJldHVyblR5cGU8dHlwZW9mIHVzZVN0b3JlPixcbiAgICBrZXlvZiBSZXR1cm5UeXBlPHR5cGVvZiBkZWZpbmVTdG9yZT5cbj47XG5cblxuLy9UT0RPOiBEb2VzIHRoaXMgY3JlYXRlIGEgc3VpdGFibGUgc3R1YiBWdWUgaW5zdGFuY2UgZm9yIFBpbmlhIHRvIHdvcmsgd2l0aCBNVjI/XG5sZXQgc3R1YlZ1ZUFwcDogQXBwPEVsZW1lbnQ+O1xubGV0IHN0dWJQaW5pYTogUGluaWE7XG5leHBvcnQgZnVuY3Rpb24gdXNlU3R1YlN0b3JlKCkge1xuICAgIGlmICghc3R1YlBpbmlhKSB7XG4gICAgICAgIHN0dWJQaW5pYSA9IGNyZWF0ZVBpbmlhKCk7XG4gICAgfVxuICAgIGlmICghc3R1YlZ1ZUFwcCkge1xuICAgICAgICBzdHViVnVlQXBwID0gY3JlYXRlQXBwKGRlZmluZUNvbXBvbmVudCk7XG4gICAgICAgIHN0dWJWdWVBcHAudXNlKHN0dWJQaW5pYSk7XG4gICAgfVxuICAgIHJldHVybiB1c2VTdG9yZSgpO1xufVxuIiwiaW1wb3J0IHsgRmlsbGVkRmllbGQgfSBmcm9tIFwiLi9GaWxsZWRGaWVsZFwiO1xuaW1wb3J0IHsgUGFuZWxTdHViLCBQYW5lbFN0dWJPcHRpb25zIH0gZnJvbSBcIi4vUGFuZWxTdHViXCI7XG5pbXBvcnQgeyBGb3JtVXRpbHMgfSBmcm9tIFwiLi9mb3Jtc1V0aWxzXCI7XG5pbXBvcnQgeyBGb3JtU2F2aW5nIH0gZnJvbSBcIi4vZm9ybVNhdmluZ1wiO1xuaW1wb3J0IHsgS2VlRmllbGRJY29uIH0gZnJvbSBcIi4va2VlRmllbGRJY29uXCI7XG5pbXBvcnQgeyBNYXRjaFJlc3VsdCB9IGZyb20gXCIuL01hdGNoUmVzdWx0XCI7XG5pbXBvcnQgeyBGaW5kTWF0Y2hlc0JlaGF2aW91ciB9IGZyb20gXCIuL2ZpbmRNYXRjaGVzQmVoYXZpb3VyXCI7XG5pbXBvcnQgeyBLZWVMb2dnZXIsIEtlZUxvZyB9IGZyb20gXCIuLi9jb21tb24vTG9nZ2VyXCI7XG5pbXBvcnQgeyBDb25maWcgfSBmcm9tIFwiLi4vY29tbW9uL2NvbmZpZ1wiO1xuaW1wb3J0IHsgY29uZmlnTWFuYWdlciB9IGZyb20gXCIuLi9jb21tb24vQ29uZmlnTWFuYWdlclwiO1xuaW1wb3J0IHsgTWF0Y2hlZEZpZWxkIH0gZnJvbSBcIi4vTWF0Y2hlZEZpZWxkXCI7XG5pbXBvcnQgeyBGaWVsZCB9IGZyb20gXCIuLi9jb21tb24vbW9kZWwvRmllbGRcIjtcbmltcG9ydCB7IEVudHJ5IH0gZnJvbSBcIi4uL2NvbW1vbi9tb2RlbC9FbnRyeVwiO1xuaW1wb3J0IHVzZVN0b3JlIGZyb20gXCIuLi9zdG9yZVwiO1xuXG5jb25zdCBzdG9yZSA9IHVzZVN0b3JlKCk7XG5cbmludGVyZmFjZSBTY29yZU1hdHJpeCB7XG4gICAgc2NvcmU6IG51bWJlcjtcbiAgICBmb3JtRmllbGRJbmRleDogbnVtYmVyO1xuICAgIGRhdGFGaWVsZEluZGV4OiBudW1iZXI7XG59XG5cbmRlY2xhcmUgY29uc3QgcHVueWNvZGU7XG5cbmNsYXNzIEZpbGxBbmRTdWJtaXRBY3Rpb24ge1xuICAgIGZpbGw6IGJvb2xlYW47XG4gICAgc3VibWl0OiBib29sZWFuO1xufVxuXG5jbGFzcyBTdWJtaXRDYW5kaWRhdGUge1xuICAgIGRpc3RhbmNlOiBudW1iZXI7XG4gICAgZWxlbWVudDogSFRNTEVsZW1lbnQ7XG4gICAgc2NvcmU6IG51bWJlcjtcbn1cblxuY2xhc3MgRmllbGRNYXRjaFNjb3JlQ29uZmlnIHtcbiAgICBwdW5pc2hXcm9uZ0lEQW5kTmFtZTogYm9vbGVhbjtcbn1cblxuY2xhc3MgVmlzaWJsZUZpZWxkQ2FjaGUge1xuICAgIHBhc3N3b3JkOiBib29sZWFuW107XG4gICAgb3RoZXI6IGJvb2xlYW5bXTtcbn1cblxuZXhwb3J0IGNsYXNzIEZvcm1GaWxsaW5nIHtcbiAgICBwcml2YXRlIGZpbmRMb2dpbk9wOiBhbnkgPSB7fTtcbiAgICBwcml2YXRlIG1hdGNoUmVzdWx0OiBNYXRjaFJlc3VsdCA9IG5ldyBNYXRjaFJlc3VsdCgpO1xuICAgIHByaXZhdGUga2VlRmllbGRJY29uOiBLZWVGaWVsZEljb247XG5cbiAgICBwdWJsaWMgbWF0Y2hlZExvZ2luc1BhbmVsU3R1YjogUGFuZWxTdHViO1xuICAgIHByaXZhdGUgbWF0Y2hlZExvZ2luc1BhbmVsU3R1YlJhZjogbnVtYmVyO1xuXG4gICAgLy8gU2hvdWxkIHJlYWxseSBtYWtlIHRoaXMgcHJpdmF0ZSBhbmQgY2FsbCBpbmRpcmVjdGx5IGJ1dCBJJ20gd2FyeSBvZiBhbGwgcGVyZm9ybWFuY2Ugb3ZlcmhlYWRzIHdydCBET00gbXV0YXRpb24gb2JzZXJ2ZXJzXG4gICAgcHVibGljIGZvcm1GaW5kZXJUaW1lcjogbnVtYmVyID0gbnVsbDtcblxuICAgIHByaXZhdGUgc2VtYW50aWNXaGl0ZWxpc3RDYWNoZTtcbiAgICBwcml2YXRlIHNlbWFudGljQmxhY2tsaXN0Q2FjaGU7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBteVBvcnQ6IGJyb3dzZXIucnVudGltZS5Qb3J0LFxuICAgICAgICBwcml2YXRlIHBhcmVudEZyYW1lSWQ6IG51bWJlcixcbiAgICAgICAgcHJpdmF0ZSBmb3JtVXRpbHM6IEZvcm1VdGlscyxcbiAgICAgICAgcHJpdmF0ZSBmb3JtU2F2aW5nOiBGb3JtU2F2aW5nLFxuICAgICAgICBwcml2YXRlIExvZ2dlcjogS2VlTG9nZ2VyLFxuICAgICAgICBwcml2YXRlIGNvbmZpZzogQ29uZmlnLFxuICAgICAgICBwcml2YXRlIG1hdGNoRmluZGVyOiB7ICh1cmk6IHN0cmluZyk6IHZvaWQgfVxuICAgICkge1xuICAgICAgICB0aGlzLmtlZUZpZWxkSWNvbiA9IG5ldyBLZWVGaWVsZEljb24oXG4gICAgICAgICAgICBteVBvcnQsXG4gICAgICAgICAgICBwYXJlbnRGcmFtZUlkLFxuICAgICAgICAgICAgZm9ybVV0aWxzLFxuICAgICAgICAgICAgdGhpcy5jcmVhdGVNYXRjaGVkTG9naW5zUGFuZWxOZWFyTm9kZS5iaW5kKHRoaXMpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIGV4ZWN1dGVQcmltYXJ5QWN0aW9uKCkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLm1hdGNoUmVzdWx0LmVudHJpZXMgJiZcbiAgICAgICAgICAgIHRoaXMubWF0Y2hSZXN1bHQuZW50cmllcy5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICB0aGlzLm1hdGNoUmVzdWx0Lm1vc3RSZWxldmFudEZvcm1JbmRleCAhPSBudWxsICYmXG4gICAgICAgICAgICB0aGlzLm1hdGNoUmVzdWx0Lm1vc3RSZWxldmFudEZvcm1JbmRleCA+PSAwXG4gICAgICAgICkge1xuICAgICAgICAgICAgaWYgKHRoaXMubWF0Y2hSZXN1bHQuZW50cmllc1t0aGlzLm1hdGNoUmVzdWx0Lm1vc3RSZWxldmFudEZvcm1JbmRleF0ubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbGxBbmRTdWJtaXQoZmFsc2UsIHRoaXMubWF0Y2hSZXN1bHQubW9zdFJlbGV2YW50Rm9ybUluZGV4LCAwKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlTWF0Y2hlZExvZ2luc1BhbmVsKCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgIHRoaXMubWF0Y2hSZXN1bHQuZW50cmllc1t0aGlzLm1hdGNoUmVzdWx0Lm1vc3RSZWxldmFudEZvcm1JbmRleF0ubGVuZ3RoID4gMVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZU1hdGNoZWRMb2dpbnNQYW5lbCgpO1xuICAgICAgICAgICAgICAgIHRoaXMubWF0Y2hlZExvZ2luc1BhbmVsU3R1YiA9IG5ldyBQYW5lbFN0dWIoXG4gICAgICAgICAgICAgICAgICAgIFBhbmVsU3R1Yk9wdGlvbnMuTWF0Y2hlZExvZ2lucyxcbiAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnRGcmFtZUlkXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1hdGNoZWRMb2dpbnNQYW5lbFN0dWIuY3JlYXRlUGFuZWwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBjcmVhdGVNYXRjaGVkTG9naW5zUGFuZWxJbkNlbnRlcihzcGVjaWZpY0ZyYW1lSWQ6IG51bWJlcikge1xuICAgICAgICB0aGlzLmNsb3NlTWF0Y2hlZExvZ2luc1BhbmVsKCk7XG4gICAgICAgIHRoaXMubWF0Y2hlZExvZ2luc1BhbmVsU3R1YiA9IG5ldyBQYW5lbFN0dWIoXG4gICAgICAgICAgICBQYW5lbFN0dWJPcHRpb25zLk1hdGNoZWRMb2dpbnMsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgc3BlY2lmaWNGcmFtZUlkXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMubWF0Y2hlZExvZ2luc1BhbmVsU3R1Yi5jcmVhdGVQYW5lbCgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBjcmVhdGVNYXRjaGVkTG9naW5zUGFuZWxOZWFyTm9kZSh0YXJnZXQ6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIHRoaXMuY2xvc2VNYXRjaGVkTG9naW5zUGFuZWwoKTtcbiAgICAgICAgdGhpcy5tYXRjaGVkTG9naW5zUGFuZWxTdHViID0gbmV3IFBhbmVsU3R1YihcbiAgICAgICAgICAgIFBhbmVsU3R1Yk9wdGlvbnMuTWF0Y2hlZExvZ2lucyxcbiAgICAgICAgICAgIHRhcmdldCxcbiAgICAgICAgICAgIHRoaXMucGFyZW50RnJhbWVJZFxuICAgICAgICApO1xuICAgICAgICB0aGlzLm1hdGNoZWRMb2dpbnNQYW5lbFN0dWIuY3JlYXRlUGFuZWwoKTtcbiAgICAgICAgdGhpcy5tYXRjaGVkTG9naW5zUGFuZWxTdHViUmFmID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZU1hdGNoZWRMb2dpbnNQYW5lbFBvc2l0aW9uKClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY2xvc2VNYXRjaGVkTG9naW5zUGFuZWwoKSB7XG4gICAgICAgIGlmICh0aGlzLm1hdGNoZWRMb2dpbnNQYW5lbFN0dWIpIHRoaXMubWF0Y2hlZExvZ2luc1BhbmVsU3R1Yi5jbG9zZVBhbmVsKCk7XG4gICAgICAgIHRoaXMubWF0Y2hlZExvZ2luc1BhbmVsU3R1YiA9IG51bGw7XG4gICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMubWF0Y2hlZExvZ2luc1BhbmVsU3R1YlJhZik7XG4gICAgfVxuXG4gICAgcHVibGljIHVwZGF0ZU1hdGNoZWRMb2dpbnNQYW5lbFBvc2l0aW9uKCkge1xuICAgICAgICB0aGlzLm1hdGNoZWRMb2dpbnNQYW5lbFN0dWIudXBkYXRlQm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHRoaXMubWF0Y2hlZExvZ2luc1BhbmVsU3R1YlJhZiA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PlxuICAgICAgICAgICAgdGhpcy51cGRhdGVNYXRjaGVkTG9naW5zUGFuZWxQb3NpdGlvbigpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gUmVxdWlyZXMgS2VlUGFzc1JQQyAjMTAxXG4gICAgLy8gcHJpdmF0ZSBjYWxjdWxhdGVMYWJlbE1hdGNoU2NvcmUobWF0Y2hlZEZpZWxkOiBNYXRjaGVkRmllbGQsIGRhdGFGaWVsZDogRmllbGQpIHtcbiAgICAvLyAgICAgaWYgKCFtYXRjaGVkRmllbGQuZmllbGQubmFtZSB8fCAhZGF0YUZpZWxkLm5hbWUpIHJldHVybiAwO1xuXG4gICAgLy8gICAgIC8vIFdlIG9ubHkgcGVyc2lzdCBhIHNpbmdsZSBcImxhYmVsXCIgdmFsdWUsIGltcGxpY2l0bHkgdmlhIHRoZSBkaXNwbGF5IG5hbWVcbiAgICAvLyAgICAgLy8gZmllbGQuIENvdWxkIGNoYW5nZSB0aGlzIGluIGZ1dHVyZSB3aXRoIGFkZGl0aW9uYWwgZmVhdHVyZXMgYWRkZWQgdG8gdGhlXG4gICAgLy8gICAgIC8vIEtlZVBhc3NSUEMgbGlicmFyaWVzLlxuICAgIC8vICAgICBpZiAoXG4gICAgLy8gICAgICAgICBtYXRjaGVkRmllbGQuZmllbGQubG9jYXRvcnNbMF0ubGFiZWxzLnNvbWUoXG4gICAgLy8gICAgICAgICAgICAgbWF0Y2hlZEZpZWxkTGFiZWwgPT5cbiAgICAvLyAgICAgICAgICAgICAgICAgbWF0Y2hlZEZpZWxkTGFiZWwudG9Mb3dlckNhc2UoKSA9PT0gZGF0YUZpZWxkLm5hbWUudG9Mb3dlckNhc2UoKVxuICAgIC8vICAgICAgICAgKVxuICAgIC8vICAgICApIHtcbiAgICAvLyAgICAgICAgIHJldHVybiAxMDA7XG4gICAgLy8gICAgIH1cblxuICAgIC8vICAgICBjb25zdCB3ZWFrTWF0Y2hMYWJlbHMgPSBbZGF0YUZpZWxkLm5hbWUudG9Mb3dlckNhc2UoKV07XG4gICAgLy8gICAgIGlmIChkYXRhRmllbGQubmFtZSAhPT0gZGF0YUZpZWxkLmxvY2F0b3JzWzBdLm5hbWUpIHtcbiAgICAvLyAgICAgICAgIHdlYWtNYXRjaExhYmVscy5wdXNoKGRhdGFGaWVsZC5sb2NhdG9yc1swXS5uYW1lLnRvTG93ZXJDYXNlKCkpO1xuICAgIC8vICAgICB9XG5cbiAgICAvLyAgICAgaWYgKFxuICAgIC8vICAgICAgICAgbWF0Y2hlZEZpZWxkLmZpZWxkLmxvY2F0b3JzWzBdLmxhYmVscy5zb21lKG1hdGNoZWRGaWVsZExhYmVsID0+IHtcbiAgICAvLyAgICAgICAgICAgICB3ZWFrTWF0Y2hMYWJlbHMuc29tZShcbiAgICAvLyAgICAgICAgICAgICAgICAgZGF0YUxhYmVsID0+IG1hdGNoZWRGaWVsZExhYmVsLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihkYXRhTGFiZWwpID49IDBcbiAgICAvLyAgICAgICAgICAgICApO1xuICAgIC8vICAgICAgICAgfSlcbiAgICAvLyAgICAgKSB7XG4gICAgLy8gICAgICAgICByZXR1cm4gMzA7XG4gICAgLy8gICAgIH1cbiAgICAvLyAgICAgcmV0dXJuIDA7XG4gICAgLy8gfVxuXG4gICAgcHJpdmF0ZSBjYWxjdWxhdGVGaWVsZE1hdGNoU2NvcmUoXG4gICAgICAgIG1hdGNoZWRGaWVsZDogTWF0Y2hlZEZpZWxkLFxuICAgICAgICBkYXRhRmllbGQ6IEZpZWxkLFxuICAgICAgICBfY3VycmVudFBhZ2UsIC8vVE9ETzo0OiByZW1vdmUgcGFyYW1cbiAgICAgICAgY29uZmlnOiBGaWVsZE1hdGNoU2NvcmVDb25maWcsXG4gICAgICAgIGlzVmlzaWJsZT86IGJvb2xlYW5cbiAgICApIHtcbiAgICAgICAgY29uc3QgZm9ybUZpZWxkID0gbWF0Y2hlZEZpZWxkLmZpZWxkO1xuICAgICAgICAvLyBEZWZhdWx0IHNjb3JlIGlzIDEgc28gdGhhdCBiYWQgbWF0Y2hlcyB3aGljaCBhcmUgYXQgbGVhc3QgdGhlIGNvcnJlY3QgdHlwZVxuICAgICAgICAvLyBoYXZlIGEgY2hhbmNlIG9mIGJlaW5nIHNlbGVjdGVkIGlmIG5vIGdvb2QgbWF0Y2hlcyBhcmUgZm91bmRcbiAgICAgICAgbGV0IHNjb3JlID0gMTtcblxuICAgICAgICAvLyBEbyBub3QgYWxsb3cgYW55IG1hdGNoIGlmIGZpZWxkIHR5cGVzIGFyZSBzaWduaWZpY2FudGx5IG1pc21hdGNoZWQgKGUuZy4gY2hlY2tib3ggdnMgdGV4dCBmaWVsZClcbiAgICAgICAgaWYgKGZvcm1GaWVsZC50eXBlICE9PSBkYXRhRmllbGQudHlwZSkgcmV0dXJuIDA7XG5cbiAgICAgICAgLy8gc2NvcmUgKz0gdGhpcy5jYWxjdWxhdGVMYWJlbE1hdGNoU2NvcmUobWF0Y2hlZEZpZWxkLCBkYXRhRmllbGQpO1xuXG4gICAgICAgIC8vIElmIGZpZWxkIElEcyBtYXRjaCArKysrK1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICBmb3JtRmllbGQubG9jYXRvcnNbMF0uaWQgIT0gbnVsbCAmJlxuICAgICAgICAgICAgZm9ybUZpZWxkLmxvY2F0b3JzWzBdLmlkICE9IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgZm9ybUZpZWxkLmxvY2F0b3JzWzBdLmlkICE9IFwiXCIgJiZcbiAgICAgICAgICAgIGZvcm1GaWVsZC5sb2NhdG9yc1swXS5pZCA9PSBkYXRhRmllbGQubG9jYXRvcnNbMF0uaWRcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBzY29yZSArPSA1MDtcbiAgICAgICAgfSBlbHNlIGlmIChjb25maWcucHVuaXNoV3JvbmdJREFuZE5hbWUgJiYgZGF0YUZpZWxkLmxvY2F0b3JzWzBdLmlkKSB7XG4gICAgICAgICAgICBzY29yZSAtPSA1O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgZmllbGQgbmFtZXMgbWF0Y2ggKysrK1xuICAgICAgICAvLyAoV2UgZG8gbm90IHRyZWF0IElEIGFuZCBOQU1FIGFzIG11dHVhbGx5IGV4Y2x1c2l2ZSBiZWNhdXNlIHNvbWUgYmFkbHkgd3JpdHRlblxuICAgICAgICAvLyB3ZWJzaXRlcyBtaWdodCBoYXZlIGR1cGxpY2F0ZSBJRHMgYnV0IGRpZmZlcmVudCBuYW1lcyBzbyB0aGlzIGNvbWJpbmVkIGFwcHJvYWNoXG4gICAgICAgIC8vIG1pZ2h0IGFsbG93IHRoZW0gdG8gd29yayBjb3JyZWN0bHkpXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGZvcm1GaWVsZC5sb2NhdG9yc1swXS5uYW1lICE9IG51bGwgJiZcbiAgICAgICAgICAgIGZvcm1GaWVsZC5sb2NhdG9yc1swXS5uYW1lICE9IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgZm9ybUZpZWxkLmxvY2F0b3JzWzBdLm5hbWUgIT0gXCJcIiAmJlxuICAgICAgICAgICAgZm9ybUZpZWxkLmxvY2F0b3JzWzBdLm5hbWUgPT0gZGF0YUZpZWxkLmxvY2F0b3JzWzBdLm5hbWVcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBzY29yZSArPSA0MDtcbiAgICAgICAgfSBlbHNlIGlmIChjb25maWcucHVuaXNoV3JvbmdJREFuZE5hbWUgJiYgZGF0YUZpZWxkLmxvY2F0b3JzWzBdLm5hbWUpIHtcbiAgICAgICAgICAgIHNjb3JlIC09IDU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSYWRpbyBidXR0b25zIGhhdmUgdGhlaXIgdmFsdWVzIHNldCBieSB0aGUgd2Vic2l0ZSBhbmQgaGVuY2UgY2FuIHByb3ZpZGVcbiAgICAgICAgLy8gYSB1c2VmdWwgY3VlIHdoZW4gYm90aCBpZCBhbmQgbmFtZSBtYXRjaGluZyBmYWlsc1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICBmb3JtRmllbGQubG9jYXRvcnNbMF0udHlwZSA9PT0gXCJyYWRpb1wiICYmXG4gICAgICAgICAgICBmb3JtRmllbGQudmFsdWUgIT0gbnVsbCAmJlxuICAgICAgICAgICAgZm9ybUZpZWxkLnZhbHVlICE9IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgZm9ybUZpZWxkLnZhbHVlICE9IFwiXCIgJiZcbiAgICAgICAgICAgIGZvcm1GaWVsZC52YWx1ZSA9PSBkYXRhRmllbGQudmFsdWVcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBzY29yZSArPSAzMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGlzVmlzaWJsZSA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICB0aGlzLmZvcm1VdGlscy5pc0RPTUVsZW1lbnRWaXNpYmxlKG1hdGNoZWRGaWVsZC5ET01lbGVtZW50KVxuICAgICAgICApIHtcbiAgICAgICAgICAgIGlzVmlzaWJsZSA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBzY29yZSArPSBpc1Zpc2libGUgPyAzNSA6IDA7XG5cbiAgICAgICAgcmV0dXJuIHNjb3JlO1xuICAgIH1cblxuICAgIHByaXZhdGUgZmlsbE1hdGNoZWRGaWVsZHMoXG4gICAgICAgIGZpZWxkU2NvcmVNYXRyaXg6IFNjb3JlTWF0cml4W10sXG4gICAgICAgIGRhdGFGaWVsZHM6IEZpZWxkW10sXG4gICAgICAgIGZvcm1GaWVsZHM6IE1hdGNoZWRGaWVsZFtdLFxuICAgICAgICBhdXRvbWF0ZWQ6IGJvb2xlYW5cbiAgICApIHtcbiAgICAgICAgLy8gV2Ugd2FudCB0byBtYWtlIHN1cmUgZWFjaCBkYXRhIGZpZWxkIGlzIG1hdGNoZWQgdG8gb25seSBvbmUgZm9ybSBmaWVsZCBidXQgd2VcbiAgICAgICAgLy8gZG9uJ3Qga25vdyB3aGljaCBmaWVsZCB3aWxsIGJlIHRoZSBiZXN0IG1hdGNoIGFuZCB3ZSBkb24ndCB3YW50IHRvIGlnbm9yZVxuICAgICAgICAvLyBsZXNzIGFjY3VyYXRlIG1hdGNoZXMganVzdCBiZWNhdXNlIHRoZXkgaGFwcGVuIHRvIGFwcGVhciBsYXRlci5cblxuICAgICAgICAvLyBXZSBoYXZlIGEgbWF0cml4IG9mIG9iamVjdHMgcmVwcmVzZW50aW5nIGVhY2ggcG9zc2libGUgY29tYmluYXRpb24gb2YgZGF0YSBmaWVsZFxuICAgICAgICAvLyBhbmQgZm9ybSBmaWVsZCBhbmQgdGhlIHNjb3JlIGZvciB0aGF0IG1hdGNoLlxuICAgICAgICAvLyBXZSBjaG9vc2Ugd2hhdCB0byBmaWxsIGJ5IHNvcnRpbmcgdGhhdCBsaXN0IGJ5IHNjb3JlLlxuICAgICAgICAvLyBBZnRlciBmaWxsaW5nIGEgZmllbGQgd2UgcmVtb3ZlIGFsbCBvYmplY3RzIGZyb20gdGhlIGxpc3Qgd2hpY2ggYXJlIGZvciB0aGVcbiAgICAgICAgLy8gZGF0YSBmaWVsZCB3ZSBqdXN0IGZpbGxlZCBpbiBhbmQgdGhlIGZvcm0gZmllbGQgd2UgZmlsbGVkIGluLlxuXG4gICAgICAgIC8vIFRoaXMgbWVhbnMgd2UgYWx3YXlzIGZpbGwgZWFjaCBmb3JtIGZpZWxkIG9ubHkgb25jZSwgd2l0aCB0aGUgYmVzdCBtYXRjaFxuICAgICAgICAvLyBzZWxlY3RlZCBmcm9tIGFsbCBkYXRhIGZpZWxkcyB0aGF0IGhhdmVuJ3QgYWxyZWFkeSBiZWVuIHNlbGVjdGVkIGZvciBhbm90aGVyIGZvcm0gZmllbGRcblxuICAgICAgICAvLyBUaGUgYWJvdmUgYWxnb3JpdGhtIGNvdWxkIG1heWJlIGJlIHR3ZWFrZWQgc2xpZ2h0bHkgaW4gb3JkZXIgdG8gYXV0by1maWxsXG4gICAgICAgIC8vIGEgXCJjaGFuZ2UgcGFzc3dvcmRcIiBmb3JtIGlmIHdlIGV2ZXIgbWFuYWdlIHRvIG1ha2UgdGhhdCBhdXRvbWF0ZWRcblxuICAgICAgICAvLyAoc2NvcmUgaXMgcmVkdWNlZCBieSBvbmUgZm9yIGVhY2ggcG9zaXRpb24gd2UgZmluZCBpbiB0aGUgZm9ybSAtIHRoaXMgZ2l2ZXNcbiAgICAgICAgLy8gYSBzbGlnaHQgcHJpb3JpdHkgdG8gZmllbGRzIGF0IHRoZSB0b3Agb2YgYSBmb3JtIHdoaWNoIGNhbiBiZSB1c2VmdWwgb2NjYXNpb25hbGx5KVxuXG4gICAgICAgIGZpZWxkU2NvcmVNYXRyaXguc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgcmV0dXJuIGIuc2NvcmUgLSBhLnNjb3JlO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBSZW1lbWJlciB3aGF0IHdlJ3ZlIGZpbGxlZCBpbiBzbyB3ZSBjYW4gbWFrZSBtb3JlIGFjY3VyYXRlIGRlY2lzaW9ucyB3aGVuXG4gICAgICAgIC8vIHRoZSBmb3JtIGlzIHN1Ym1pdHRlZCBsYXRlci4gV2UgcmVzaXN0IHRoZSB1cmdlIHRoZSBpbmRleCBieSBlbGVtZW50IElEIG9yXG4gICAgICAgIC8vIHRoZSBET01lbGVtZW50IGl0c2VsZiBiZWNhdXNlIHNvbWUgd2Vic2l0ZXMgZG8gbm90IHNwZWNpZnkgYW4gSUQgYW5kIHNvbWVcbiAgICAgICAgLy8gbWF5IHJlbW92ZSB0aGUgRE9NZWxlbWVudCBiZWZvcmUgd2Ugc3VibWl0IHRoZSBmb3JtIChzb21ldGltZXMgdW5kZXIgdXNlclxuICAgICAgICAvLyBkaXJlY3Rpb24gYnV0IG9jY2FzaW9uYWxseSBhdXRvbWF0aWNhbGx5IHRvbylcbiAgICAgICAgY29uc3QgZmlsbGVkRmllbGRzOiBGaWxsZWRGaWVsZFtdID0gW107XG5cbiAgICAgICAgLy8gS2VlcCBmaWxsaW5nIGluIGZpZWxkcyB1bnRpbCB3ZSBmaW5kIG5vIG1vcmUgd2l0aCBhIHBvc2l0aXZlIHNjb3JlXG4gICAgICAgIHdoaWxlIChmaWVsZFNjb3JlTWF0cml4Lmxlbmd0aCA+IDAgJiYgZmllbGRTY29yZU1hdHJpeFswXS5zY29yZSA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGZmaSA9IGZpZWxkU2NvcmVNYXRyaXhbMF0uZm9ybUZpZWxkSW5kZXg7XG4gICAgICAgICAgICBjb25zdCBkZmkgPSBmaWVsZFNjb3JlTWF0cml4WzBdLmRhdGFGaWVsZEluZGV4O1xuICAgICAgICAgICAgY29uc3QgZm9ybUZpZWxkID0gZm9ybUZpZWxkc1tmZmldO1xuICAgICAgICAgICAgY29uc3QgZGF0YUZpZWxkID0gZGF0YUZpZWxkc1tkZmldO1xuICAgICAgICAgICAgY29uc3QgZG9tRWxlbWVudCA9IGZvcm1GaWVsZC5ET01lbGVtZW50O1xuXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50VmFsdWUgPSB0aGlzLmdldEZvcm1GaWVsZEN1cnJlbnRWYWx1ZShcbiAgICAgICAgICAgICAgICBkb21FbGVtZW50LFxuICAgICAgICAgICAgICAgIGZvcm1GaWVsZC5maWVsZC5sb2NhdG9yc1swXS50eXBlXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgYXV0b21hdGVkICYmXG4gICAgICAgICAgICAgICAgY3VycmVudFZhbHVlICYmXG4gICAgICAgICAgICAgICAgY3VycmVudFZhbHVlICE9PSAoZG9tRWxlbWVudCBhcyBhbnkpLmtlZUluaXRpYWxEZXRlY3RlZFZhbHVlXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICB0aGlzLkxvZ2dlci5pbmZvKFxuICAgICAgICAgICAgICAgICAgICBcIk5vdCBmaWxsaW5nIGZpZWxkIGJlY2F1c2UgaXQncyBub3QgZW1wdHkgYW5kIHdhcyBlZGl0ZWQgYnkgdXNlciBzaW5jZSBsYXN0IGxvYWQvZmlsbFwiXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgYXV0b21hdGVkICYmXG4gICAgICAgICAgICAgICAgY3VycmVudFZhbHVlICYmXG4gICAgICAgICAgICAgICAgIWNvbmZpZ01hbmFnZXIuY3VycmVudC5hdXRvRmlsbEZpZWxkc1dpdGhFeGlzdGluZ1ZhbHVlXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICB0aGlzLkxvZ2dlci5pbmZvKFxuICAgICAgICAgICAgICAgICAgICBcIk5vdCBmaWxsaW5nIGZpZWxkIGJlY2F1c2UgaXQncyBub3QgZW1wdHkgYW5kIHVzZXIgcHJlZmVyZW5jZSBpcyB0byBwcmV2ZW50IGF1dG9tYXRpYyBmaWxsXCJcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLkxvZ2dlci5pbmZvKFxuICAgICAgICAgICAgICAgICAgICBcIldlIHdpbGwgcG9wdWxhdGUgZmllbGQgXCIgKyBmZmkgKyBcIiAoaWQ6XCIgKyBmb3JtRmllbGQuZmllbGQubG9jYXRvcnNbMF0uaWQgKyBcIilcIlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgdGhpcy5maWxsQVNpbmdsZUZpZWxkKFxuICAgICAgICAgICAgICAgICAgICBkb21FbGVtZW50LFxuICAgICAgICAgICAgICAgICAgICBmb3JtRmllbGQuZmllbGQubG9jYXRvcnNbMF0udHlwZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YUZpZWxkLnZhbHVlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZmlsbGVkRmllbGRzLnB1c2goe1xuICAgICAgICAgICAgICAgIGlkOiBmb3JtRmllbGQuZmllbGQubG9jYXRvcnNbMF0uaWQsXG4gICAgICAgICAgICAgICAgRE9NZWxlbWVudDogZG9tRWxlbWVudCxcbiAgICAgICAgICAgICAgICBuYW1lOiBmb3JtRmllbGQuZmllbGQubG9jYXRvcnNbMF0ubmFtZSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogZGF0YUZpZWxkLnZhbHVlXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZmllbGRTY29yZU1hdHJpeCA9IGZpZWxkU2NvcmVNYXRyaXguZmlsdGVyKGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuZGF0YUZpZWxkSW5kZXggIT0gZGZpICYmIGVsZW1lbnQuZm9ybUZpZWxkSW5kZXggIT0gZmZpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGZpZWxkU2NvcmVNYXRyaXguc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgICAgIHJldHVybiBiLnNjb3JlIC0gYS5zY29yZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmaWxsZWRGaWVsZHM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRGb3JtRmllbGRDdXJyZW50VmFsdWUoXG4gICAgICAgIGRvbUVsZW1lbnQ6IEhUTUxJbnB1dEVsZW1lbnQgfCBIVE1MU2VsZWN0RWxlbWVudCxcbiAgICAgICAgZmllbGRUeXBlOiBzdHJpbmdcbiAgICApIHtcbiAgICAgICAgbGV0IGN1cnJlbnRWYWx1ZSA9IGRvbUVsZW1lbnQudmFsdWU7XG4gICAgICAgIGlmIChkb21FbGVtZW50IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCAmJiBmaWVsZFR5cGUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgaWYgKGRvbUVsZW1lbnQuY2hlY2tlZCkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRWYWx1ZSA9IFwiS0VFRk9YX0NIRUNLRURfRkxBR19UUlVFXCI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRWYWx1ZSA9IFwiS0VFRk9YX0NIRUNLRURfRkxBR19GQUxTRVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjdXJyZW50VmFsdWU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmaWxsQVNpbmdsZUZpZWxkKFxuICAgICAgICBkb21FbGVtZW50OiBIVE1MSW5wdXRFbGVtZW50IHwgSFRNTFNlbGVjdEVsZW1lbnQsXG4gICAgICAgIGZpZWxkVHlwZTogc3RyaW5nLFxuICAgICAgICB2YWx1ZTogc3RyaW5nXG4gICAgKSB7XG4gICAgICAgIGlmIChmaWVsZFR5cGUgPT0gXCJzZWxlY3Qtb25lXCIpIHtcbiAgICAgICAgICAgIGRvbUVsZW1lbnQudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgfSBlbHNlIGlmIChkb21FbGVtZW50IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCAmJiBmaWVsZFR5cGUgPT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgPT0gXCJLRUVGT1hfQ0hFQ0tFRF9GTEFHX1RSVUVcIikgZG9tRWxlbWVudC5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIGVsc2UgZG9tRWxlbWVudC5jaGVja2VkID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSBpZiAoZG9tRWxlbWVudCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQgJiYgZmllbGRUeXBlID09IFwicmFkaW9cIikge1xuICAgICAgICAgICAgZG9tRWxlbWVudC5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRvbUVsZW1lbnQudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vVE9ETzo0OiBJbnZlc3RpZ2F0ZSBhbmQgZG9jdW1lbnQgd2h5IHdlJ3JlIG5vdCB1c2luZyBkYXRhIGF0dHJpYnV0ZXMgdG8gc3RvcmUgdGhpcyBzdHJpbmcgaW4gdGhlIERPTVxuICAgICAgICAoZG9tRWxlbWVudCBhcyBhbnkpLmtlZUluaXRpYWxEZXRlY3RlZFZhbHVlID0gdmFsdWU7XG5cbiAgICAgICAgZG9tRWxlbWVudC5kaXNwYXRjaEV2ZW50KFxuICAgICAgICAgICAgbmV3IFVJRXZlbnQoXCJpbnB1dFwiLCB7XG4gICAgICAgICAgICAgICAgdmlldzogd2luZG93LFxuICAgICAgICAgICAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICAgICAgICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgICAgZG9tRWxlbWVudC5kaXNwYXRjaEV2ZW50KFxuICAgICAgICAgICAgbmV3IFVJRXZlbnQoXCJjaGFuZ2VcIiwge1xuICAgICAgICAgICAgICAgIHZpZXc6IHdpbmRvdyxcbiAgICAgICAgICAgICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgICAgICAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmaWxsTWFueUZvcm1GaWVsZHMoXG4gICAgICAgIGZvcm1GaWVsZHM6IE1hdGNoZWRGaWVsZFtdLFxuICAgICAgICBkYXRhRmllbGRzOiBGaWVsZFtdLFxuICAgICAgICBjdXJyZW50UGFnZSxcbiAgICAgICAgc2NvcmVDb25maWc6IEZpZWxkTWF0Y2hTY29yZUNvbmZpZyxcbiAgICAgICAgYXV0b21hdGVkOiBib29sZWFuXG4gICAgKSB7XG4gICAgICAgIHRoaXMuTG9nZ2VyLmRlYnVnKFwiX2ZpbGxNYW55Rm9ybUZpZWxkcyBzdGFydGVkXCIpO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGZvcm1GaWVsZHMgPT0gbnVsbCB8fFxuICAgICAgICAgICAgZm9ybUZpZWxkcyA9PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgIGRhdGFGaWVsZHMgPT0gbnVsbCB8fFxuICAgICAgICAgICAgZGF0YUZpZWxkcyA9PSB1bmRlZmluZWRcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLkxvZ2dlci5kZWJ1ZyhcIldlJ3ZlIHJlY2VpdmVkIHRoZSBkYXRhIHdlIG5lZWRcIik7XG5cbiAgICAgICAgdGhpcy5Mb2dnZXIuaW5mbyhcIkZpbGxpbmcgZm9ybSBmaWVsZHMgZm9yIHBhZ2UgXCIgKyBjdXJyZW50UGFnZSk7XG5cbiAgICAgICAgLy8gd2UgdHJ5IHRvIGZpbGwgZXZlcnkgZm9ybSBmaWVsZC4gV2UgdHJ5IHRvIG1hdGNoIGJ5IGlkIGZpcnN0IGFuZCB0aGVuIG5hbWUgYmVmb3JlIGp1c3QgZ3Vlc3NpbmcuXG4gICAgICAgIC8vIEdlbmVyYWxseSB3ZSdsbCBvbmx5IGZpbGwgaWYgdGhlIG1hdGNoZWQgZmllbGQgaXMgb2YgdGhlIHNhbWUgdHlwZSBhcyB0aGUgZm9ybSBmaWVsZCBidXRcbiAgICAgICAgLy8gd2UgYXJlIGZsZXhpYmxlIFJFIHRleHQgYW5kIHVzZXJuYW1lIGZpZWxkcyBiZWNhdXNlIHRoYXQncyBhbiBhcnRpZmljaWFsIGRpZmZlcmVuY2VcbiAgICAgICAgLy8gZm9yIHRoZSBzYWtlIG9mIHRoZSBLZWUgcGFzc3dvcmQgbWFuYWdlbWVudCBzb2Z0d2FyZS4gSG93ZXZlciwgdXNlcm5hbWVzIHdpbGwgYmUgY2hvc2VuIGFib3ZlXG4gICAgICAgIC8vIHRleHQgZmllbGRzIGlmIGFsbCBlbHNlIGlzIGVxdWFsXG4gICAgICAgIGNvbnN0IGZpZWxkU2NvcmVNYXRyaXggPSBbXTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZvcm1GaWVsZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgZGF0YUZpZWxkcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNjb3JlID0gdGhpcy5jYWxjdWxhdGVGaWVsZE1hdGNoU2NvcmUoXG4gICAgICAgICAgICAgICAgICAgIGZvcm1GaWVsZHNbaV0sXG4gICAgICAgICAgICAgICAgICAgIGRhdGFGaWVsZHNbal0sXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQYWdlLFxuICAgICAgICAgICAgICAgICAgICBzY29yZUNvbmZpZ1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgdGhpcy5Mb2dnZXIuZGVidWcoXG4gICAgICAgICAgICAgICAgICAgIFwiU3VpdGFiaWxpdHkgb2YgcHV0dGluZyBkYXRhIGZpZWxkIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGogK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCIgaW50byBmb3JtIGZpZWxkIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCIgKGlkOiBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtRmllbGRzW2ldLmZpZWxkLmxvY2F0b3JzWzBdLmlkICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiKSBpcyBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBzY29yZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgZmllbGRTY29yZU1hdHJpeC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgc2NvcmU6IHNjb3JlLFxuICAgICAgICAgICAgICAgICAgICBkYXRhRmllbGRJbmRleDogaixcbiAgICAgICAgICAgICAgICAgICAgZm9ybUZpZWxkSW5kZXg6IGlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmZpbGxNYXRjaGVkRmllbGRzKGZpZWxkU2NvcmVNYXRyaXgsIGRhdGFGaWVsZHMsIGZvcm1GaWVsZHMsIGF1dG9tYXRlZCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbml0TWF0Y2hSZXN1bHQoYmVoYXZpb3VyOiBGaW5kTWF0Y2hlc0JlaGF2aW91cikge1xuICAgICAgICAvL1RPRE86NDogIzYgY3JlYXRlIG5ldyBvYmplY3QgbWlnaHQgY2F1c2UgaXNzdWVzIHdpdGggbXVsdGktcGFnZSBvciBzdWJtaXQgYmVoYXZpb3VyPyBpZiBub3QsIHRoaXMgd291bGQgYmUgbmVhdGVyOlxuICAgICAgICAvLyBtYXRjaFJlc3VsdCA9IG5ldyBNYXRjaFJlc3VsdCgpO1xuICAgICAgICB0aGlzLm1hdGNoUmVzdWx0LlVVSUQgPSBcIlwiO1xuICAgICAgICB0aGlzLm1hdGNoUmVzdWx0LmVudHJpZXMgPSBbXTtcbiAgICAgICAgdGhpcy5tYXRjaFJlc3VsdC5tb3N0UmVsZXZhbnRGb3JtSW5kZXggPSBudWxsO1xuXG4gICAgICAgIHRoaXMubWF0Y2hSZXN1bHQubXVzdEF1dG9GaWxsRm9ybSA9IGZhbHNlO1xuICAgICAgICB0aGlzLm1hdGNoUmVzdWx0LmNhbm5vdEF1dG9GaWxsRm9ybSA9IGZhbHNlO1xuICAgICAgICB0aGlzLm1hdGNoUmVzdWx0Lm11c3RBdXRvU3VibWl0Rm9ybSA9IGZhbHNlO1xuICAgICAgICB0aGlzLm1hdGNoUmVzdWx0LmNhbm5vdEF1dG9TdWJtaXRGb3JtID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKGJlaGF2aW91ci5VVUlEICE9IHVuZGVmaW5lZCAmJiBiZWhhdmlvdXIuVVVJRCAhPSBudWxsICYmIGJlaGF2aW91ci5VVUlEICE9IFwiXCIpIHtcbiAgICAgICAgICAgIC8vIEtlZXAgYSByZWNvcmQgb2YgdGhlIHNwZWNpZmljIGVudHJ5IHdlIGFyZSBnb2luZyB0byBzZWFyY2ggZm9yICh3ZSBkZWxldGVcbiAgICAgICAgICAgIC8vIHRoZSB0YWJzdGF0ZSBiZWxvdyBhbmQgcmUtY3JlYXRlIGl0IGR1cmluZyBmb3JtIGZpbGwpXG4gICAgICAgICAgICB0aGlzLm1hdGNoUmVzdWx0LlVVSUQgPSBiZWhhdmlvdXIuVVVJRDtcbiAgICAgICAgICAgIHRoaXMubWF0Y2hSZXN1bHQuZGJGaWxlTmFtZSA9IGJlaGF2aW91ci5kYkZpbGVOYW1lO1xuXG4gICAgICAgICAgICAvLyB3ZSB3YW50IHRvIGZpbGwgdGhlIGZvcm0gd2l0aCB0aGlzIGRhdGFcbiAgICAgICAgICAgIHRoaXMubWF0Y2hSZXN1bHQubXVzdEF1dG9GaWxsRm9ybSA9IHRydWU7XG5cbiAgICAgICAgICAgIGlmIChiZWhhdmlvdXIubXVzdEF1dG9TdWJtaXRGb3JtKSB0aGlzLm1hdGNoUmVzdWx0Lm11c3RBdXRvU3VibWl0Rm9ybSA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm1hdGNoUmVzdWx0LmRvYyA9IHdpbmRvdy5kb2N1bWVudDtcblxuICAgICAgICB0aGlzLm1hdGNoUmVzdWx0LmZvcm1SZWFkeUZvclN1Ym1pdCA9IGZhbHNlOyAvLyB0cmFja3Mgd2hldGhlciB3ZSBhY3R1YWxseSBhdXRvLWZpbGwgb24gdGhpcyBwYWdlXG4gICAgICAgIHRoaXMubWF0Y2hSZXN1bHQuYXV0b2ZpbGxPblN1Y2Nlc3MgPSBiZWhhdmlvdXIuYXV0b2ZpbGxPblN1Y2Nlc3M7XG4gICAgICAgIHRoaXMubWF0Y2hSZXN1bHQuYXV0b3N1Ym1pdE9uU3VjY2VzcyA9IGJlaGF2aW91ci5hdXRvc3VibWl0T25TdWNjZXNzO1xuICAgICAgICB0aGlzLm1hdGNoUmVzdWx0Lm5vdGlmeVVzZXJPblN1Y2Nlc3MgPSBiZWhhdmlvdXIubm90aWZ5VXNlck9uU3VjY2VzcztcbiAgICAgICAgdGhpcy5tYXRjaFJlc3VsdC53cmFwcGVycyA9IFtdO1xuICAgICAgICB0aGlzLm1hdGNoUmVzdWx0LmFsbE1hdGNoaW5nTG9naW5zID0gW107XG4gICAgICAgIHRoaXMubWF0Y2hSZXN1bHQuZm9ybVJlbGV2YW5jZVNjb3JlcyA9IFtdO1xuICAgICAgICB0aGlzLm1hdGNoUmVzdWx0LnN1Ym1pdFRhcmdldHMgPSBbXTtcbiAgICAgICAgdGhpcy5tYXRjaFJlc3VsdC51c2VybmFtZUluZGV4QXJyYXkgPSBbXTtcbiAgICAgICAgdGhpcy5tYXRjaFJlc3VsdC5wYXNzd29yZEZpZWxkc0FycmF5ID0gW107XG4gICAgICAgIHRoaXMubWF0Y2hSZXN1bHQub3RoZXJGaWVsZHNBcnJheSA9IFtdO1xuICAgICAgICB0aGlzLm1hdGNoUmVzdWx0LnJlcXVlc3RDb3VudCA9IDA7XG4gICAgICAgIHRoaXMubWF0Y2hSZXN1bHQucmVzcG9uc2VDb3VudCA9IDA7XG4gICAgICAgIHRoaXMubWF0Y2hSZXN1bHQucmVxdWVzdElkcyA9IFtdOyAvLyB0aGUgSlNPTlJQQyByZXF1ZXN0IElkcyB0aGF0IHJlZmVyZW5jZSB0aGlzIG1hdGNoUmVzdWx0IG9iamVjdCAodG8gYWxsb3cgZGVsZXRpb24gYWZ0ZXIgYXN5bmMgY2FsbGJhY2sgcHJvY2Vzc2luZylcbiAgICB9XG5cbiAgICAvKiBFeHBlY3RzIHRoaXMgZGF0YSBvYmplY3Q6XG4gICAge1xuICAgICAgICBhdXRvZmlsbE9uU3VjY2VzczogdHJ1ZSwgLy8gVGhpcyB3b24ndCBvdmVycmlkZSBvdGhlciBjb25maWd1cmF0aW9uIG9wdGlvbnMgaWYgdHJ1ZSBidXQgaWYgZmFsc2UgaXQgd2lsbC5cbiAgICAgICAgYXV0b3N1Ym1pdE9uU3VjY2VzczogdHJ1ZSwgLy8gVGhpcyB3b24ndCBvdmVycmlkZSBvdGhlciBjb25maWd1cmF0aW9uIG9wdGlvbnMgaWYgdHJ1ZSBidXQgaWYgZmFsc2UgaXQgd2lsbC5cbiAgICAgICAgbm90aWZ5VXNlck9uU3VjY2VzczogdHJ1ZSwgLy8gZS5nLiB1c2VkIHdoZW4gcGVyaW9kaWMgZm9ybSBwb2xsaW5nIGZpbmRzIGEgZm9ybSBhZnRlciB0aGUgcGFnZSBoYXMgbG9hZGVkLlxuICAgICAgICAuLi4gb3RoZXJzXG4gICAgfVxuICAgICovXG4gICAgcHVibGljIGZpbmRNYXRjaGVzSW5UaGlzRnJhbWUoYmVoYXZpb3VyOiBGaW5kTWF0Y2hlc0JlaGF2aW91ciA9IHt9KSB7XG4gICAgICAgIHRoaXMuc2VtYW50aWNXaGl0ZWxpc3RDYWNoZSA9IHt9O1xuICAgICAgICB0aGlzLnNlbWFudGljQmxhY2tsaXN0Q2FjaGUgPSB7fTtcblxuICAgICAgICAvLyBXaGV0aGVyIG9yIG5vdCB0aGlzIHdhcyBpbnZva2VkIGFzIGEgcmVzdWx0IG9mIGEgRE9NIG11dGF0aW9uLCB3ZSB3b24ndCBuZWVkIHRoZSB0aW1lciB0byBmaXJlIGFueW1vcmVcbiAgICAgICAgaWYgKHRoaXMuZm9ybUZpbmRlclRpbWVyICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5mb3JtRmluZGVyVGltZXIpO1xuICAgICAgICAgICAgdGhpcy5mb3JtRmluZGVyVGltZXIgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHdpbmRvdy5kb2N1bWVudC5mb3Jtcy5sZW5ndGggPiA1MCkge1xuICAgICAgICAgICAgdGhpcy5Mb2dnZXIuZGVidWcoXG4gICAgICAgICAgICAgICAgXCJUb28gbWFueSBmb3JtcyBvbiB0aGlzIHBhZ2UuIEFzc3VtaW5nIGl0IGlzIG5vdCBhIGxvZ2luIHBhZ2VcIiArXG4gICAgICAgICAgICAgICAgICAgIFwiIGFuZCBhdm9pZGluZyBsb29raW5nIGZvciBsb2dpbiBmb3JtcyBpbiBvcmRlciB0byBhdm9pZCBwZXJmb3JtYW5jZSBpbXBhY3QuXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDYW4ndCBhcHBlbmQgdG8gYSBIVE1MQ29sbGVjdGlvbiBidXQgYWxsIHdlIHJlYWxseSB1c2UgaXQgZm9yIGlzIGl0ZXJhdGlvblxuICAgICAgICAvLyBhbmQgbGVuZ3RoIHNvIGNvbnZlcnRpbmcgdG8gYW4gYXJyYXkgc29tZXRpbWVzIHdpbGwgY2F1c2Ugbm8gaXNzdWVzXG4gICAgICAgIGxldCBmb3JtcyA9IG5ldyBBcnJheTxIVE1MRm9ybUVsZW1lbnQ+KCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd2luZG93LmRvY3VtZW50LmZvcm1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBmb3Jtcy5wdXNoKHdpbmRvdy5kb2N1bWVudC5mb3Jtcy5pdGVtKGkpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZvcmNpbmcgYSBzY2FuIGZvciBvcnBoYW5lZCBmaWVsZHMgb24gYWxsIHBhZ2VzLiBNYXkgbmVlZCB0byBjaGFuZ2VcbiAgICAgICAgLy8gdGhpcyBpZiByZWFsIHdvcmxkIHBlcmZvcm1hbmNlIGlzIHRvbyBzbG93LlxuICAgICAgICBjb25zdCBwc2V1ZG9Gb3JtID0gdGhpcy5zY2FuRm9yT3JwaGFuZWRGaWVsZHMod2luZG93LmRvY3VtZW50KTtcbiAgICAgICAgaWYgKHBzZXVkb0Zvcm0pIHtcbiAgICAgICAgICAgIGZvcm1zID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZm9ybXMpO1xuICAgICAgICAgICAgZm9ybXMucHVzaChwc2V1ZG9Gb3JtKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZm9ybXMgfHwgZm9ybXMubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIHRoaXMuTG9nZ2VyLmluZm8oXCJObyBmb3JtcyBmb3VuZCBvbiB0aGlzIHBhZ2UuXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdXJsID0gbmV3IFVSTCh3aW5kb3cuZG9jdW1lbnQuVVJMKTtcbiAgICAgICAgdXJsLmhvc3RuYW1lID0gcHVueWNvZGUudG9Vbmljb2RlKHVybC5ob3N0bmFtZSk7XG5cbiAgICAgICAgdGhpcy5Mb2dnZXIuaW5mbyhcbiAgICAgICAgICAgIFwiRmluZGluZyBtYXRjaGVzIGluIGEgZG9jdW1lbnQuIHJlYWR5U3RhdGU6IFwiICsgd2luZG93LmRvY3VtZW50LnJlYWR5U3RhdGVcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLmluaXRNYXRjaFJlc3VsdChiZWhhdmlvdXIpO1xuICAgICAgICB0aGlzLm1hdGNoUmVzdWx0LmZvcm1zID0gZm9ybXM7XG5cbiAgICAgICAgY29uc3QgY29uZiA9IGNvbmZpZ01hbmFnZXIuc2l0ZUNvbmZpZ0Zvcih1cmwuaHJlZik7XG5cbiAgICAgICAgdGhpcy5Mb2dnZXIuZGVidWcoXCJmaW5kTWF0Y2hlcyBwcm9jZXNzaW5nIFwiICsgZm9ybXMubGVuZ3RoICsgXCIgZm9ybXNcIik7XG5cbiAgICAgICAgbGV0IHNlYXJjaFNlbnRUb0tlZVBhc3MgPSBmYWxzZTtcblxuICAgICAgICAvLyBGb3IgZXZlcnkgZm9ybSwgaW5jbHVkaW5nIGFueSBwc2V1ZG8gZm9ybXMgd2UgY3JlYXRlZCBlYXJsaWVyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZm9ybXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGZvcm0gPSBmb3Jtc1tpXTtcbiAgICAgICAgICAgIHRoaXMubWF0Y2hSZXN1bHQuZW50cmllc1tpXSA9IFtdO1xuXG4gICAgICAgICAgICAvLyB0aGUgb3ZlcmFsbCByZWxldmFuY2Ugb2YgdGhpcyBmb3JtIGlzIHRoZSBtYXhpbXVtIG9mIGl0J3NcbiAgICAgICAgICAgIC8vIG1hdGNoaW5nIGVudHJpZXMgKHNvIHdlIGZpbGwgdGhlIG1vc3QgcmVsZXZhbnQgZm9ybSlcbiAgICAgICAgICAgIHRoaXMubWF0Y2hSZXN1bHQuZm9ybVJlbGV2YW5jZVNjb3Jlc1tpXSA9IDA7XG5cbiAgICAgICAgICAgIHRoaXMuTG9nZ2VyLmRlYnVnKFwiYWJvdXQgdG8gZ2V0IGZvcm0gZmllbGRzXCIpO1xuICAgICAgICAgICAgbGV0IHNjYW5SZXN1bHQ6IHtcbiAgICAgICAgICAgICAgICBvdGhlckZpZWxkczogTWF0Y2hlZEZpZWxkW107XG4gICAgICAgICAgICAgICAgYWN0dWFsVXNlcm5hbWVJbmRleD86IG51bWJlcjtcbiAgICAgICAgICAgICAgICBwd0ZpZWxkcz86IE1hdGNoZWRGaWVsZFtdO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgc2NhblJlc3VsdCA9IHRoaXMuZm9ybVV0aWxzLmdldEZvcm1GaWVsZHMoZm9ybSwgZmFsc2UsIDUwKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLkxvZ2dlci5kZWJ1ZyhcIkxvc3QgaW50ZXJlc3QgaW4gdGhpcyBmb3JtIGFmdGVyIGZpbmRpbmcgdG9vIG1hbnkgZmllbGRzXCIgKyBlKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXJuYW1lSW5kZXggPSBzY2FuUmVzdWx0LmFjdHVhbFVzZXJuYW1lSW5kZXg7XG4gICAgICAgICAgICBjb25zdCBwYXNzd29yZEZpZWxkcyA9IHNjYW5SZXN1bHQucHdGaWVsZHM7XG4gICAgICAgICAgICBjb25zdCBvdGhlckZpZWxkcyA9IHNjYW5SZXN1bHQub3RoZXJGaWVsZHM7XG5cbiAgICAgICAgICAgIC8vIFdlIHdhbnQgdG8gZmlsbCBpbiB0aGlzIGZvcm0gaWYgd2UgZmluZCBhIHBhc3N3b3JkIGZpZWxkIGJ1dCBmaXJzdFxuICAgICAgICAgICAgLy8gd2UgY2hlY2sgd2hldGhlciBhbnkgd2hpdGVsaXN0IG9yIGJsYWNrbGlzdCBlbnRyaWVzIG11c3Qgb3ZlcnJpZGUgdGhhdCBiZWhhdmlvdXJcbiAgICAgICAgICAgIGxldCBpbnRlcmVzdGluZ0Zvcm06IGJvb2xlYW4gPSBudWxsO1xuXG4gICAgICAgICAgICBpbnRlcmVzdGluZ0Zvcm0gPSBjb25maWdNYW5hZ2VyLmlzRm9ybUludGVyZXN0aW5nKFxuICAgICAgICAgICAgICAgIGZvcm0sXG4gICAgICAgICAgICAgICAgY29uZixcbiAgICAgICAgICAgICAgICBvdGhlckZpZWxkcy5tYXAoZiA9PiBmLmZpZWxkKVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgaWYgKGludGVyZXN0aW5nRm9ybSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLkxvZ2dlci5kZWJ1ZyhcbiAgICAgICAgICAgICAgICAgICAgXCJMb3N0IGludGVyZXN0IGluIHRoaXMgZm9ybSBhZnRlciBpbnNwZWN0aW5nIGZpZWxkIG5hbWVzIGFuZCBJRHNcIlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IG5vUGFzc3dvcmRGaWVsZCA9XG4gICAgICAgICAgICAgICAgcGFzc3dvcmRGaWVsZHMgPT0gbnVsbCB8fCBwYXNzd29yZEZpZWxkcy5sZW5ndGggPD0gMCB8fCBwYXNzd29yZEZpZWxkc1swXSA9PSBudWxsO1xuICAgICAgICAgICAgY29uc3Qgbm9PdGhlckZpZWxkID1cbiAgICAgICAgICAgICAgICB1c2VybmFtZUluZGV4IDwgMCB8fFxuICAgICAgICAgICAgICAgIG90aGVyRmllbGRzID09IG51bGwgfHxcbiAgICAgICAgICAgICAgICBvdGhlckZpZWxkcy5sZW5ndGggPD0gMCB8fFxuICAgICAgICAgICAgICAgIG90aGVyRmllbGRzW3VzZXJuYW1lSW5kZXhdID09IG51bGw7XG5cbiAgICAgICAgICAgIGlmIChub1Bhc3N3b3JkRmllbGQgJiYgKG5vT3RoZXJGaWVsZCB8fCBpbnRlcmVzdGluZ0Zvcm0gIT09IHRydWUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5Mb2dnZXIuZGVidWcoXG4gICAgICAgICAgICAgICAgICAgIFwiTm8gcGFzc3dvcmQgZmllbGQgZm91bmQgaW4gdGhpcyBmb3JtIGFuZCBlaXRoZXIgdGhlcmUgYXJlIG5vIG90aGVyXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCIgZmllbGRzIG9yIG5vIHdoaXRlbGlzdGVkIHRleHQgZmllbGQgb3IgZm9ybSBlbGVtZW50XCJcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgc3VibWl0VGFyZ2V0TmVpZ2hib3VyOiBIVE1MRWxlbWVudDtcbiAgICAgICAgICAgIGlmIChub1Bhc3N3b3JkRmllbGQpIHtcbiAgICAgICAgICAgICAgICBzdWJtaXRUYXJnZXROZWlnaGJvdXIgPSBvdGhlckZpZWxkc1t1c2VybmFtZUluZGV4XS5ET01lbGVtZW50O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzdWJtaXRUYXJnZXROZWlnaGJvdXIgPSBwYXNzd29yZEZpZWxkc1swXS5ET01lbGVtZW50O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmF0dGFjaFN1Ym1pdEhhbmRsZXJzKGZvcm0sIHN1Ym1pdFRhcmdldE5laWdoYm91ciwgaSk7XG5cbiAgICAgICAgICAgIHRoaXMubWF0Y2hSZXN1bHQudXNlcm5hbWVJbmRleEFycmF5W2ldID0gdXNlcm5hbWVJbmRleDtcbiAgICAgICAgICAgIHRoaXMubWF0Y2hSZXN1bHQucGFzc3dvcmRGaWVsZHNBcnJheVtpXSA9IHBhc3N3b3JkRmllbGRzO1xuICAgICAgICAgICAgdGhpcy5tYXRjaFJlc3VsdC5vdGhlckZpZWxkc0FycmF5W2ldID0gb3RoZXJGaWVsZHM7XG4gICAgICAgICAgICB0aGlzLm1hdGNoUmVzdWx0LnN1Ym1pdFRhcmdldHNbaV0gPSBzdWJtaXRUYXJnZXROZWlnaGJvdXI7XG5cbiAgICAgICAgICAgIC8vIFRoZSBlbnRyaWVzIHJldHVybmVkIGZyb20gS2VlUGFzcyBmb3IgZXZlcnkgZm9ybSB3aWxsIGJlIGlkZW50aWNhbCAoYmFzZWQgb24gdGFiL2ZyYW1lIFVSTClcbiAgICAgICAgICAgIGlmICghc2VhcmNoU2VudFRvS2VlUGFzcykge1xuICAgICAgICAgICAgICAgIHRoaXMuZmluZExvZ2luT3AuZm9ybXMgPSBmb3JtcztcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmRMb2dpbk9wLmZvcm1JbmRleGVzID0gW2ldO1xuICAgICAgICAgICAgICAgIHRoaXMuZmluZExvZ2luT3Aud3JhcHBlZEJ5ID0gdGhpcy5tYXRjaFJlc3VsdDtcbiAgICAgICAgICAgICAgICB0aGlzLm1hdGNoUmVzdWx0LndyYXBwZXJzW2ldID0gdGhpcy5maW5kTG9naW5PcDtcbiAgICAgICAgICAgICAgICB0aGlzLm1hdGNoUmVzdWx0LnJlcXVlc3RDb3VudCsrO1xuXG4gICAgICAgICAgICAgICAgLy8gU2VhcmNoIGZvciBtYXRjaGluZyBlbnRyaWVzIGZvciB0aGUgcmVsZXZhbnQgVVJMLiBUaGlzIHJlcXVlc3QgaXMgYXN5bmNocm9ub3VzLlxuICAgICAgICAgICAgICAgIHRoaXMubWF0Y2hGaW5kZXIodXJsLmhyZWYpO1xuICAgICAgICAgICAgICAgIHNlYXJjaFNlbnRUb0tlZVBhc3MgPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLkxvZ2dlci5kZWJ1ZyhcImZvcm1bXCIgKyBpICsgXCJdOiByZXVzaW5nIGVudHJpZXMgZnJvbSBsYXN0IGZvcm0uXCIpO1xuICAgICAgICAgICAgICAgIHRoaXMuZmluZExvZ2luT3AuZm9ybUluZGV4ZXMucHVzaChpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSAvLyBlbmQgb2YgZm9ybSBmb3IgbG9vcFxuICAgIH1cblxuICAgIC8vIEl0J3MgT0sgZm9yIHRoaXMgdG8gdGFrZSBhIGZldyBzZWNvbmRzIC0gaHVtYW5zIGNhbid0IHR5cGUgdGhhdCBmYXN0LlxuICAgIC8vIEJ5IG1ha2luZyB0aGlzIGFzeW5jIHdlIGFsbG93IHRoZSBzZWFyY2ggZm9yIGVudHJpZXMgdG8gYmVnaW4gZWFybGllclxuICAgIC8vIGFuZCByZWR1Y2UgcGVyY2VpdmVkIGltcGFjdCBvbiBwYWdlIGxvYWQgdGltZVxuICAgIHByaXZhdGUgYXN5bmMgYXR0YWNoU3VibWl0SGFuZGxlcnMoXG4gICAgICAgIGZvcm06IEhUTUxGb3JtRWxlbWVudCxcbiAgICAgICAgc3VibWl0VGFyZ2V0TmVpZ2hib3VyOiBIVE1MRWxlbWVudCxcbiAgICAgICAgZm9ybU51bWJlcjogbnVtYmVyXG4gICAgKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICAgICAgICBjb25zdCBzdWJtaXRUYXJnZXQgPSB0aGlzLmZpbmRTdWJtaXRCdXR0b24oZm9ybSwgc3VibWl0VGFyZ2V0TmVpZ2hib3VyKTtcbiAgICAgICAgICAgIHRoaXMuZm9ybVNhdmluZy5hZGRTdWJtaXRIYW5kbGVyKHN1Ym1pdFRhcmdldCwgZm9ybSk7XG4gICAgICAgICAgICBLZWVMb2cuaW5mbyhcbiAgICAgICAgICAgICAgICBcIlN1Ym1pdCBoYW5kbGVycyBhdHRhY2hlZCBhc3luY2hyb25vdXNseSB0byBmb3JtIFwiICtcbiAgICAgICAgICAgICAgICAgICAgZm9ybU51bWJlciArXG4gICAgICAgICAgICAgICAgICAgIFwiIGluIFwiICtcbiAgICAgICAgICAgICAgICAgICAgKHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnQpICtcbiAgICAgICAgICAgICAgICAgICAgXCJtc1wiXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBLZWVMb2cud2FybihcIkV4Y2VwdGlvbiB3aGlsZSBhZGRpbmcgc3VibWl0IGhhbmRsZXIuIE1lc3NhZ2U6IFwiICsgZS5tZXNzYWdlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgc2NhbkZvck9ycGhhbmVkRmllbGRzKGRvYykge1xuICAgICAgICBjb25zdCB0ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgIGNvbnN0IG9ycGhhbmVkRmllbGRzID0gW107XG4gICAgICAgIGxldCBwc2V1ZG9Gb3JtID0gbnVsbDtcblxuICAgICAgICAvLyBtdWNoIGZhc3RlciB0aGFuIHF1ZXJ5U2VsZWN0b3JBbGxcbiAgICAgICAgY29uc3QgaXRlbXMgPSBkb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJpbnB1dFwiKTtcbiAgICAgICAgZm9yIChjb25zdCB0YWcgb2YgaXRlbXMpIHtcbiAgICAgICAgICAgIGlmICghdGFnLmZvcm0pIG9ycGhhbmVkRmllbGRzLnB1c2godGFnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcnBoYW5lZEZpZWxkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBwc2V1ZG9Gb3JtID0ge1xuICAgICAgICAgICAgICAgIGVsZW1lbnRzOiBvcnBoYW5lZEZpZWxkcyxcbiAgICAgICAgICAgICAgICBpZDogXCJLZWUtcHNldWRvLWZvcm1cIixcbiAgICAgICAgICAgICAgICBuYW1lOiBcIktlZS1wc2V1ZG8tZm9ybVwiLFxuICAgICAgICAgICAgICAgIG93bmVyRG9jdW1lbnQ6IGRvYyxcbiAgICAgICAgICAgICAgICBnZXRFbGVtZW50c0J5VGFnTmFtZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50cztcbiAgICAgICAgICAgICAgICB9LCAvLyBPbmx5IHVzZSBpcyBmb3IgbGlzdGluZyBpbnB1dCBlbGVtZW50c1xuICAgICAgICAgICAgICAgIHF1ZXJ5U2VsZWN0b3JBbGw6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgICAgIH0sIC8vIE9ubHkgdXNlIGlzIGZvciBsaXN0aW5nIGJ1dHRvbiBlbGVtZW50c1xuICAgICAgICAgICAgICAgIHN1Ym1pdDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfSwgLy8gTm90IHBvc3NpYmxlIHRvIHN1Ym1pdCBhIHBzZXVkbyBmb3JtIHVubGVzcyBhIGJ1dHRvbiB3aXRoIGN1c3RvbSBKUyBoYXMgYWxyZWFkeSBiZWVuIGZvdW5kXG4gICAgICAgICAgICAgICAgb2Zmc2V0UGFyZW50OiB0cnVlLCAvLyBUaGlzIHRyaWNrcyBlbGVtZW50IHZpc2liaWxpdHkgY2hlY2tzIGludG8gdHJlYXRpbmcgdGhpcyBhcyB2aXNpYmxlIHRvIHRoZSB1c2VyXG4gICAgICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfSwgLy9UT0RPOjQ6IGhvb2sgdXAgdG8gdGhlIHN1Ym1pdCBmdW5jdGlvbiB0byBzaW11bGF0ZSByZWFsIGZvcm0gc3VibWlzc2lvblxuICAgICAgICAgICAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB0biA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICB0aGlzLkxvZ2dlci5kZWJ1ZyhcInNjYW5Gb3JPcnBoYW5lZEZpZWxkcyB0b29rOiBcIiArICh0biAtIHQpKTtcblxuICAgICAgICByZXR1cm4gcHNldWRvRm9ybTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZmluZExvZ2luc1Jlc3VsdEhhbmRsZXIoZW50cmllczogRW50cnlbXSkge1xuICAgICAgICBpZiAoIWVudHJpZXMpIHJldHVybjtcbiAgICAgICAgY29uc3QgdmFsaWRFbnRyaWVzID0gZW50cmllcy5maWx0ZXIoXG4gICAgICAgICAgICBlID0+IEVudHJ5LmdldFVzZXJuYW1lRmllbGQoZSkgfHwgRW50cnkuZ2V0UGFzc3dvcmRGaWVsZChlKVxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMubWF0Y2hSZXN1bHQgPSB0aGlzLmdldFJlbGV2YW5jZU9mTG9naW5NYXRjaGVzQWdhaW5zdEFsbEZvcm1zKFxuICAgICAgICAgICAgdmFsaWRFbnRyaWVzLFxuICAgICAgICAgICAgdGhpcy5maW5kTG9naW5PcCxcbiAgICAgICAgICAgIHRoaXMubWF0Y2hSZXN1bHRcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLmZpbGxBbmRTdWJtaXQodHJ1ZSk7XG4gICAgfVxuXG4gICAgZ2V0UmVsZXZhbmNlT2ZMb2dpbk1hdGNoZXNBZ2FpbnN0QWxsRm9ybXMoXG4gICAgICAgIGVudHJpZXM6IEVudHJ5W10sXG4gICAgICAgIGZpbmRMb2dpbk9wLFxuICAgICAgICBtYXRjaFJlc3VsdDogTWF0Y2hSZXN1bHRcbiAgICApIHtcbiAgICAgICAgY29uc3QgY3JTdHJpbmcgPSBKU09OLnN0cmluZ2lmeShlbnRyaWVzKTtcbiAgICAgICAgbGV0IGZpcnN0TWF0Y2hQcm9jZXNzZWQgPSBmYWxzZTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpbmRMb2dpbk9wLmZvcm1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAvLyBTa2lwIGFueSBmb3JtIHRoYXQgd2UgZG9uJ3Qgd2FudCB0byBtYXRjaCBhZ2FpbnN0IHRoaXMgc2V0IG9mIGVudHJpZXNcbiAgICAgICAgICAgIGlmIChmaW5kTG9naW5PcC5mb3JtSW5kZXhlcy5pbmRleE9mKGkpID09IC0xKSBjb250aW51ZTtcblxuICAgICAgICAgICAgLy8gaWYgdGhlcmUgaXMgbW9yZSB0aGFuIG9uZSBmb3JtLCB3ZSBoYXZlIHRvIHdvcmsgd2l0aCBjbG9uZXMgb2YgdGhlIGVudHJ5IHNvXG4gICAgICAgICAgICAvLyB0aGF0IHdlIGNhbiBtYW5pcHVsYXRlIHRoZSByZWxldmFuY3kgc2NvcmVzLCBldGMuIGluZGVwZW5kZW50bHkgZm9yIGVhY2hcbiAgICAgICAgICAgIC8vIGZvcm0gYW5kIGVudHJ5IGNvbWJpbmF0aW9uLiBXZSBjb3VsZCBiZSBtb3JlIGVmZmljaWVudCBmb3IgdGhlIGNvbW1vbiBjYXNlIG9mIDEgZm9ybVxuICAgICAgICAgICAgLy8gYnkgYXZvaWRpbmcgdGhlIGNsb25lIHRoZW4gYnV0IGtlZXBpbmcgdGhlIHNhbWUgYmVoYXZpb3VyIGdpdmVzIHVzIGEgaGlnaGVyIGNoYW5jZVxuICAgICAgICAgICAgLy8gb2Ygbm90aWNpbmcgYnVncy5cbiAgICAgICAgICAgIG1hdGNoUmVzdWx0LmVudHJpZXNbaV0gPSBKU09OLnBhcnNlKGNyU3RyaW5nKTsgLy9UT0RPOjQ6IGZhc3RlciBjbG9uZT8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvR3VpZGUvQVBJL0RPTS9UaGVfc3RydWN0dXJlZF9jbG9uZV9hbGdvcml0aG0gP1xuXG4gICAgICAgICAgICAvLyBOb3RoaW5nIHRvIGRvIGlmIHdlIGhhdmUgbm8gbWF0Y2hpbmcgZW50cmllcyBhdmFpbGFibGUuXG4gICAgICAgICAgICBpZiAobWF0Y2hSZXN1bHQuZW50cmllc1tpXS5sZW5ndGggPT0gMCkgY29udGludWU7XG5cbiAgICAgICAgICAgIHRoaXMuTG9nZ2VyLmluZm8oXCJtYXRjaCBmb3VuZCFcIik7XG5cbiAgICAgICAgICAgIGNvbnN0IGZvcm1WaXNpYmxlID0gdGhpcy5mb3JtVXRpbHMuaXNET01FbGVtZW50VmlzaWJsZShtYXRjaFJlc3VsdC5zdWJtaXRUYXJnZXRzW2ldKTtcbiAgICAgICAgICAgIHRoaXMuTG9nZ2VyLmRlYnVnKFwiZm9ybVZpc2libGU6IFwiICsgZm9ybVZpc2libGUpO1xuXG4gICAgICAgICAgICBjb25zdCB2aXNpYmxlRmllbGRDYWNoZSA9IHtcbiAgICAgICAgICAgICAgICBvdGhlcjogbWF0Y2hSZXN1bHQub3RoZXJGaWVsZHNBcnJheVtpXS5tYXAoZiA9PlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1VdGlscy5pc0RPTUVsZW1lbnRWaXNpYmxlKGYuRE9NZWxlbWVudClcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBtYXRjaFJlc3VsdC5wYXNzd29yZEZpZWxkc0FycmF5W2ldLm1hcChmID0+XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybVV0aWxzLmlzRE9NRWxlbWVudFZpc2libGUoZi5ET01lbGVtZW50KVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8vIGRldGVybWluZSB0aGUgcmVsZXZhbmNlIG9mIGVhY2ggZW50cnkgdG8gdGhpcyBmb3JtXG4gICAgICAgICAgICAvLyB3ZSBjb3VsZCBza2lwIHRoaXMgd2hlbiBhdXRvZmlsbGluZyBiYXNlZCBvbiB1dWlkIGJ1dCB3ZSB3b3VsZCBoYXZlIHRvIGNoZWNrIGZvclxuICAgICAgICAgICAgLy8gbWF0Y2hlcyBmaXJzdCBvciBlbHNlIHdlIHJpc2sgbm8gbWF0Y2ggYW5kIG5vIGFsdGVybmF0aXZlIG1hdGNoaW5nIGVudHJpZXMgb24gdGhlIG1haW5VSVxuICAgICAgICAgICAgLy8gYW5kIHdlIGFsc28gbm93IGNvbnNpZGVyIHRoZSB0b3RhbGl0eSBvZiBwb3NzaWJsZSBtYXRjaGVzIGFnYWluc3QgYSBmaWVsZCBpbiBvcmRlclxuICAgICAgICAgICAgLy8gdG8gbGltaXQgd2hpY2ggZmllbGRzIHdlIHNob3ZlIGEgS2VlIGljb24gaW50by5cbiAgICAgICAgICAgIGZvciAobGV0IHYgPSAwOyB2IDwgbWF0Y2hSZXN1bHQuZW50cmllc1tpXS5sZW5ndGg7IHYrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZlYXR1cmVzID0gc3RvcmUuS2VlUGFzc0RhdGFiYXNlcy5maW5kKFxuICAgICAgICAgICAgICAgICAgICBkYiA9PiBkYi5maWxlTmFtZSA9PT0gbWF0Y2hSZXN1bHQuZW50cmllc1tpXVt2XS5kYXRhYmFzZS5maWxlTmFtZVxuICAgICAgICAgICAgICAgICkuc2Vzc2lvbkZlYXR1cmVzO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkTWF0Y2hTY29yZUNvbmZpZzogRmllbGRNYXRjaFNjb3JlQ29uZmlnID0ge1xuICAgICAgICAgICAgICAgICAgICBwdW5pc2hXcm9uZ0lEQW5kTmFtZTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmVzLmluZGV4T2YoXCJLUFJQQ19GSUVMRF9ERUZBVUxUX05BTUVfQU5EX0lEX0VNUFRZXCIpID49IDBcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgc2NvcmUsIGxvd0ZpZWxkTWF0Y2hSYXRpbyB9ID0gdGhpcy5jYWxjdWxhdGVSZWxldmFuY2VTY29yZShcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hSZXN1bHQuZW50cmllc1tpXVt2XSxcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hSZXN1bHQucGFzc3dvcmRGaWVsZHNBcnJheVtpXSxcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hSZXN1bHQub3RoZXJGaWVsZHNBcnJheVtpXSxcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hSZXN1bHQuY3VycmVudFBhZ2UsXG4gICAgICAgICAgICAgICAgICAgIGZvcm1WaXNpYmxlLFxuICAgICAgICAgICAgICAgICAgICBmaWVsZE1hdGNoU2NvcmVDb25maWcsXG4gICAgICAgICAgICAgICAgICAgIHZpc2libGVGaWVsZENhY2hlXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIC8vIGNob29zaW5nIGJlc3QgZm9ybSBzaG91bGQgbm90IGJlIGFmZmVjdGVkIGJ5IGxvd0ZpZWxkTWF0Y2hSYXRpbyBlbnRyeSBzY29yZVxuICAgICAgICAgICAgICAgIC8vIGJ1dCB3aGVuIHdlIGNvbWUgdG8gZmlsbCB0aGUgZm9ybSB3ZSBjYW4gZm9yY2Ugb3Vyc2VsdmVzIGludG8gYSBuby1hdXRvLWZpbGwgYmVoYXZpb3VyLlxuICAgICAgICAgICAgICAgIG1hdGNoUmVzdWx0LmVudHJpZXNbaV1bdl0ucmVsZXZhbmNlU2NvcmUgPSBzY29yZTtcbiAgICAgICAgICAgICAgICBtYXRjaFJlc3VsdC5lbnRyaWVzW2ldW3ZdLmxvd0ZpZWxkTWF0Y2hSYXRpbyA9IGxvd0ZpZWxkTWF0Y2hSYXRpbztcblxuICAgICAgICAgICAgICAgIC8vIGFsc28gc2V0IHRoZSBmb3JtIGluZGV4IGFuZCBlbnRyeSBpbmRleCBvbiB0aGUgaW50ZXJuYWwgZW50cnkgb2JqZWN0IHNvXG4gICAgICAgICAgICAgICAgLy8gaXQgd2lsbCBwZXJzaXN0IHdoZW4gbGF0ZXIgcGFzc2VkIHRvIHRoZSBVSSBhbmQgd2UgY2FuIHVsdGltYXRlbHlcbiAgICAgICAgICAgICAgICAvLyBmaW5kIHRoZSBzYW1lIGVudHJ5IG9iamVjdCB3aGVuIHByb2Nlc3NpbmcgYSBtYXRjaGVkIGVudHJ5XG4gICAgICAgICAgICAgICAgbWF0Y2hSZXN1bHQuZW50cmllc1tpXVt2XS5mb3JtSW5kZXggPSBpO1xuICAgICAgICAgICAgICAgIG1hdGNoUmVzdWx0LmVudHJpZXNbaV1bdl0uZW50cnlJbmRleCA9IHY7XG5cbiAgICAgICAgICAgICAgICAvLyBSZW1lbWJlciB0aGUgYmVzdCBmb3JtIGZvciBlYWNoIGVudHJ5XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAhZmlyc3RNYXRjaFByb2Nlc3NlZCB8fFxuICAgICAgICAgICAgICAgICAgICBtYXRjaFJlc3VsdC5lbnRyaWVzW2ldW3ZdLnJlbGV2YW5jZVNjb3JlID5cbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoUmVzdWx0LmFsbE1hdGNoaW5nTG9naW5zW3ZdLnJlbGV2YW5jZVNjb3JlXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuTG9nZ2VyLmRlYnVnKFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJIaWdoZXIgcmVsZXZhbmNlIHNjb3JlIGZvdW5kIGZvciBlbnRyeSBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIgd2l0aCBmb3JtSW5kZXggXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoUmVzdWx0LmVudHJpZXNbaV1bdl0uZm9ybUluZGV4ICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIiAoXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmRMb2dpbk9wLmZvcm1zW2ldLmlkICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIilcIlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICBtYXRjaFJlc3VsdC5hbGxNYXRjaGluZ0xvZ2luc1t2XSA9IG1hdGNoUmVzdWx0LmVudHJpZXNbaV1bdl07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmlyc3RNYXRjaFByb2Nlc3NlZCA9IHRydWU7XG5cbiAgICAgICAgICAgIC8vIEZpbmQgdGhlIGJlc3QgZW50cnkgZm9yIHRoaXMgZm9ybVxuICAgICAgICAgICAgbWF0Y2hSZXN1bHQuZW50cmllc1tpXS5mb3JFYWNoKGZ1bmN0aW9uIChjKSB7XG4gICAgICAgICAgICAgICAgaWYgKGMucmVsZXZhbmNlU2NvcmUgPiBtYXRjaFJlc3VsdC5mb3JtUmVsZXZhbmNlU2NvcmVzW2ldKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hdGNoUmVzdWx0LmZvcm1SZWxldmFuY2VTY29yZXNbaV0gPSBjLnJlbGV2YW5jZVNjb3JlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLkxvZ2dlci5kZWJ1ZyhcbiAgICAgICAgICAgICAgICBcIlJlbGV2YW5jZSBvZiBmb3JtIFwiICtcbiAgICAgICAgICAgICAgICAgICAgaSArXG4gICAgICAgICAgICAgICAgICAgIFwiIChcIiArXG4gICAgICAgICAgICAgICAgICAgIGZpbmRMb2dpbk9wLmZvcm1zW2ldLmlkICtcbiAgICAgICAgICAgICAgICAgICAgXCIpIGlzIFwiICtcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hSZXN1bHQuZm9ybVJlbGV2YW5jZVNjb3Jlc1tpXVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWF0Y2hSZXN1bHQ7XG4gICAgfVxuXG4gICAgZ2V0TW9zdFJlbGV2YW50Rm9ybShmb3JtSW5kZXg/OiBudW1iZXIpIHtcbiAgICAgICAgY29uc3QgZmluZE1hdGNoZXNSZXN1bHQgPSB0aGlzLm1hdGNoUmVzdWx0O1xuXG4gICAgICAgIC8vIFRoZXJlIG1heSBiZSBubyByZXN1bHRzIGZvciB0aGlzIGZyYW1lIChlLmcuIG5vIGZvcm1zIGZvdW5kLCBzZWFyY2ggZmFpbGVkLCBldGMuKVxuICAgICAgICBpZiAoIWZpbmRNYXRjaGVzUmVzdWx0KSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGJlc3RGb3JtSW5kZXg6IDAsXG4gICAgICAgICAgICAgICAgYmVzdFJlbGV2YW5jZVNjb3JlOiAwLFxuICAgICAgICAgICAgICAgIGJlc3RGaW5kTWF0Y2hlc1Jlc3VsdDogdW5kZWZpbmVkXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IG1vc3RSZWxldmFudEZvcm1JbmRleCA9IDA7XG5cbiAgICAgICAgaWYgKGZvcm1JbmRleCA+PSAwKSBtb3N0UmVsZXZhbnRGb3JtSW5kZXggPSBmb3JtSW5kZXg7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZmluZE1hdGNoZXNSZXN1bHQuZm9ybVJlbGV2YW5jZVNjb3Jlcy5mb3JFYWNoKChjLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuTG9nZ2VyLmRlYnVnKFwiUmVsZXZhbmNlIG9mIGZvcm0gaXMgXCIgKyBjKTtcbiAgICAgICAgICAgICAgICBpZiAoYyA+IGZpbmRNYXRjaGVzUmVzdWx0LmZvcm1SZWxldmFuY2VTY29yZXNbbW9zdFJlbGV2YW50Rm9ybUluZGV4XSkge1xuICAgICAgICAgICAgICAgICAgICBtb3N0UmVsZXZhbnRGb3JtSW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuTG9nZ2VyLmRlYnVnKFwiVGhlIG1vc3QgcmVsZXZhbnQgZm9ybSBpcyAjXCIgKyBtb3N0UmVsZXZhbnRGb3JtSW5kZXgpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYmVzdEZvcm1JbmRleDogbW9zdFJlbGV2YW50Rm9ybUluZGV4LFxuICAgICAgICAgICAgYmVzdFJlbGV2YW5jZVNjb3JlOiBmaW5kTWF0Y2hlc1Jlc3VsdC5mb3JtUmVsZXZhbmNlU2NvcmVzW21vc3RSZWxldmFudEZvcm1JbmRleF0sXG4gICAgICAgICAgICBiZXN0RmluZE1hdGNoZXNSZXN1bHQ6IGZpbmRNYXRjaGVzUmVzdWx0XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gYXV0b21hdGVkIGNvdWxkIGJlIG9uIHBhZ2UgbG9hZCBvciByZXN1bHRpbmcgZnJvbSBvdGhlciBub24tdXNlci1pbnRlcmFjdGlvbi5cbiAgICAvLyBJdCdzIHBvc3NpYmxlIHRvIGZpbGwgYW5kIHN1Ym1pdCBhIGVudHJ5IHdpdGggYSBzcGVjaWZpYyB1dWlkIGJ1dFxuICAgIC8vIHRoYXQgcHJvY2VzcyBpcyBub3cgY2VudGVyZWQgb24gdGhlIGZpbmRNYXRjaGVzIGZ1bmN0aW9uLiBUaGlzIGZ1bmN0aW9uIGp1c3RcbiAgICAvLyB0YWtlcyB0aGUgcmVzdWx0cyBvZiB0aGF0ICh3aGljaCBtYXkgaW5jbHVkZSBhIHNwZWNpZmljIGVudHJ5IHRvIGZpbGwgYW5kIHN1Ym1pdCB0byBhIHNwZWNpZmljIGZvcm0pXG4gICAgZmlsbEFuZFN1Ym1pdChhdXRvbWF0ZWQ6IGJvb2xlYW4sIGZvcm1JbmRleD86IG51bWJlciwgZW50cnlJbmRleD86IG51bWJlcikge1xuICAgICAgICB0aGlzLkxvZ2dlci5kZWJ1ZyhcbiAgICAgICAgICAgIFwiZmlsbEFuZFN1Ym1pdCBzdGFydGVkLiBhdXRvbWF0ZWQ6IFwiICtcbiAgICAgICAgICAgICAgICBhdXRvbWF0ZWQgK1xuICAgICAgICAgICAgICAgIFwiLCBmb3JtSW5kZXg6IFwiICtcbiAgICAgICAgICAgICAgICBmb3JtSW5kZXggK1xuICAgICAgICAgICAgICAgIFwiLCBlbnRyeUluZGV4OiBcIiArXG4gICAgICAgICAgICAgICAgZW50cnlJbmRleFxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IG1hdGNoUmVzdWx0ID0gdGhpcy5tYXRjaFJlc3VsdDtcbiAgICAgICAgbGV0IHN1Ym1pdFRhcmdldE5laWdoYm91cjtcblxuICAgICAgICAvLyBHaXZlIHVwIGlmIHdlIGhhdmUgbm8gcmVzdWx0cyBmb3IgdGhpcyBmcmFtZSAoaS5lLiB0aGVyZSB3ZXJlIG5vIGZvcm1zIHRvIGZpbGwpXG4gICAgICAgIGlmICghbWF0Y2hSZXN1bHQpIHJldHVybjtcblxuICAgICAgICAvLyBXZSBkbyBzb21lIHRoaW5ncyBkaWZmZXJlbnRseSBpZiB3ZSdyZSBiZWluZyBtYW51YWxseSBhc2tlZCB0byBmaWxsIGFuZFxuICAgICAgICAvLyBzdWJtaXQgYSBzcGVjaWZpYyBtYXRjaGVkIGVudHJ5XG4gICAgICAgIGNvbnN0IGlzTWF0Y2hlZExvZ2luUmVxdWVzdCA9XG4gICAgICAgICAgICAhYXV0b21hdGVkICYmXG4gICAgICAgICAgICAoKG1hdGNoUmVzdWx0Lm1vc3RSZWxldmFudEZvcm1JbmRleCAhPT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgIG1hdGNoUmVzdWx0Lm1vc3RSZWxldmFudEZvcm1JbmRleCA+PSAwKSB8fFxuICAgICAgICAgICAgICAgIHR5cGVvZiBmb3JtSW5kZXggIT0gXCJ1bmRlZmluZWRcIikgJiZcbiAgICAgICAgICAgIHR5cGVvZiBlbnRyeUluZGV4ICE9IFwidW5kZWZpbmVkXCI7XG5cbiAgICAgICAgaWYgKCFpc01hdGNoZWRMb2dpblJlcXVlc3QpIHtcbiAgICAgICAgICAgIG1hdGNoUmVzdWx0Lm1vc3RSZWxldmFudEZvcm1JbmRleCA9IHRoaXMuZ2V0TW9zdFJlbGV2YW50Rm9ybSgpLmJlc3RGb3JtSW5kZXg7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTdXBwbGllZCBmb3JtSUQgb3ZlcnJpZGVzIGFueSB0aGF0IHdlIGp1c3QgYXV0b21hdGljYWxseSBjYWxjdWxhdGVkIGFib3ZlXG4gICAgICAgIGlmIChmb3JtSW5kZXggIT09IG51bGwgJiYgZm9ybUluZGV4ID49IDApIG1hdGNoUmVzdWx0Lm1vc3RSZWxldmFudEZvcm1JbmRleCA9IGZvcm1JbmRleDtcblxuICAgICAgICAvLyBmcm9tIG5vdyBvbiB3ZSBjb25jZW50cmF0ZSBvbiBqdXN0IHRoZSBtb3N0IHJlbGV2YW50IGZvcm0gYW5kIHRoZSBmaWVsZHMgd2UgZm91bmQgZWFybGllclxuICAgICAgICBjb25zdCBmb3JtID0gbWF0Y2hSZXN1bHQuZm9ybXNbbWF0Y2hSZXN1bHQubW9zdFJlbGV2YW50Rm9ybUluZGV4XTtcbiAgICAgICAgY29uc3QgcGFzc3dvcmRGaWVsZHMgPSBtYXRjaFJlc3VsdC5wYXNzd29yZEZpZWxkc0FycmF5W21hdGNoUmVzdWx0Lm1vc3RSZWxldmFudEZvcm1JbmRleF07XG4gICAgICAgIGNvbnN0IG90aGVyRmllbGRzID0gbWF0Y2hSZXN1bHQub3RoZXJGaWVsZHNBcnJheVttYXRjaFJlc3VsdC5tb3N0UmVsZXZhbnRGb3JtSW5kZXhdO1xuXG4gICAgICAgIGNvbnN0IG9yZGVyZWRFbnRyaWVzID0gdGhpcy5zb3J0TWF0Y2hlZEVudHJpZXMoXG4gICAgICAgICAgICBtYXRjaFJlc3VsdC5lbnRyaWVzW21hdGNoUmVzdWx0Lm1vc3RSZWxldmFudEZvcm1JbmRleF1cbiAgICAgICAgKTtcbiAgICAgICAgY29uc3Qgb3JkZXJlZEVudHJpZXNXaXRoUHJlZmVyZW5jZSA9IHRoaXMuZmxhZ1VzZXJQcmVmZXJyZWRFbnRyeShvcmRlcmVkRW50cmllcyk7XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgIWlzTWF0Y2hlZExvZ2luUmVxdWVzdCAmJlxuICAgICAgICAgICAgbWF0Y2hSZXN1bHQuZW50cmllc1ttYXRjaFJlc3VsdC5tb3N0UmVsZXZhbnRGb3JtSW5kZXhdLmxlbmd0aCA+IDBcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLm15UG9ydC5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgZW50cmllczogb3JkZXJlZEVudHJpZXNXaXRoUHJlZmVyZW5jZVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIEdpdmUgdGhlIHVzZXIgYSB3YXkgdG8gY2hvb3NlIGFuIGVudHJ5IGludGVyYWN0aXZlbHlcbiAgICAgICAgICAgIHRoaXMua2VlRmllbGRJY29uLmFkZEtlZUljb25Ub0ZpZWxkcyhcbiAgICAgICAgICAgICAgICBwYXNzd29yZEZpZWxkcyxcbiAgICAgICAgICAgICAgICBvdGhlckZpZWxkcyxcbiAgICAgICAgICAgICAgICBvcmRlcmVkRW50cmllc1dpdGhQcmVmZXJlbmNlXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gdGhpcyByZWNvcmRzIHRoZSBlbnRyeSB0aGF0IHdlIGV2ZW50dWFsbHkgY2hvb3NlIGFzIHRoZSBvbmUgdG8gZmlsbCB0aGUgY2hvc2VuIGZvcm0gd2l0aFxuICAgICAgICBsZXQgbWF0Y2hpbmdMb2dpbjogRW50cnkgPSBudWxsO1xuICAgICAgICBsZXQgYWN0aW9uOiBGaWxsQW5kU3VibWl0QWN0aW9uID0geyBmaWxsOiBmYWxzZSwgc3VibWl0OiBmYWxzZSB9O1xuICAgICAgICBsZXQgbXVsdGlwbGVNYXRjaGVzID0gZmFsc2U7XG5cbiAgICAgICAgLy8gSWYgd2Ugc3RhcnRlZCB0aGlzIGZpbGwvc3VibWl0IGF0dGVtcHQgZnJvbSBjZXJ0YWluIGNvbnRleHRzLCB3ZSB3aWxsIGhhdmVcbiAgICAgICAgLy8gYmVlbiB0b2xkIHRvIGVuc3VyZSB3ZSBkbyBub3QgcGVyZm9ybSBhdXRvLWZpbGwgb3Igc3VibWl0IGFuZCB3ZSdsbCBpbnN0ZWFkXG4gICAgICAgIC8vIGp1c3QgdGVsbCB0aGUgVUkgdG8gbm90aWZ5IHRoZSB1c2VyIGFib3V0IGFueSBtYXRjaGVzIHdlIGZvdW5kLiBBbHRob3VnaFxuICAgICAgICAvLyB3ZSBpZ25vcmUgdGhpcyBydWxlIGlmIHRoZSB1c2VyIGluaXRpYXRlZCB0aGUgZmlsbC9zdWJtaXQuXG4gICAgICAgIG1hdGNoUmVzdWx0LmNhbm5vdEF1dG9GaWxsRm9ybSA9IGZhbHNlO1xuICAgICAgICBtYXRjaFJlc3VsdC5jYW5ub3RBdXRvU3VibWl0Rm9ybSA9IGZhbHNlO1xuXG4gICAgICAgIGlmIChhdXRvbWF0ZWQgJiYgbWF0Y2hSZXN1bHQuYXV0b2ZpbGxPblN1Y2Nlc3MgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBtYXRjaFJlc3VsdC5jYW5ub3RBdXRvRmlsbEZvcm0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhdXRvbWF0ZWQgJiYgbWF0Y2hSZXN1bHQuYXV0b3N1Ym1pdE9uU3VjY2VzcyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIG1hdGNoUmVzdWx0LmNhbm5vdEF1dG9TdWJtaXRGb3JtID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE5vIHBvaW50IGxvb2tpbmcgYXQgZW50cnkgc3BlY2lmaWMgcHJlZmVyZW5jZXMgaWYgd2UgYXJlIG5vdCBhbGxvd2VkIHRvIGF1dG8tZmlsbFxuICAgICAgICBpZiAoIW1hdGNoUmVzdWx0LmNhbm5vdEF1dG9GaWxsRm9ybSkge1xuICAgICAgICAgICAgdGhpcy5Mb2dnZXIuZGVidWcoXCJXZSBhcmUgYWxsb3dlZCB0byBhdXRvLWZpbGwgdGhpcyBmb3JtLlwiKTtcblxuICAgICAgICAgICAgLy8gSWYgd2UndmUgYmVlbiBpbnN0cnVjdGVkIHRvIGZpbGwgYSBzcGVjaWZpYyBlbnRyeSwgd2UgbmVlZCB0byBzZWxlY3QgdGhhdFxuICAgICAgICAgICAgLy8gZW50cnkgYW5kIGNsZWFyIGFueSBwcmV2aW91c2x5IHNldCBpbmZvcm1hdGlvbiBhYm91dCBhbiBhdXRvLWZpbGxlZCBlbnRyeVxuICAgICAgICAgICAgLy8gc28gaXQgY2FuIGJlIHNldCBjb3JyZWN0bHkgbGF0ZXJcbiAgICAgICAgICAgIGlmIChlbnRyeUluZGV4ID49IDApIHtcbiAgICAgICAgICAgICAgICBtYXRjaGluZ0xvZ2luID0gbWF0Y2hSZXN1bHQuZW50cmllc1ttYXRjaFJlc3VsdC5tb3N0UmVsZXZhbnRGb3JtSW5kZXhdW2VudHJ5SW5kZXhdO1xuICAgICAgICAgICAgICAgIG1hdGNoUmVzdWx0LlVVSUQgPSBudWxsO1xuICAgICAgICAgICAgICAgIG1hdGNoUmVzdWx0LmRiRmlsZU5hbWUgPSBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgY2hlY2tNYXRjaGluZ0xvZ2luUmVsZXZhbmNlVGhyZXNob2xkID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgbWF0Y2hpbmdMb2dpbiA9PSBudWxsICYmXG4gICAgICAgICAgICAgICAgbWF0Y2hSZXN1bHQuZW50cmllc1ttYXRjaFJlc3VsdC5tb3N0UmVsZXZhbnRGb3JtSW5kZXhdLmxlbmd0aCA9PSAxXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBtYXRjaGluZ0xvZ2luID0gbWF0Y2hSZXN1bHQuZW50cmllc1ttYXRjaFJlc3VsdC5tb3N0UmVsZXZhbnRGb3JtSW5kZXhdWzBdO1xuICAgICAgICAgICAgICAgIGNoZWNrTWF0Y2hpbmdMb2dpblJlbGV2YW5jZVRocmVzaG9sZCA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgIG1hdGNoUmVzdWx0LlVVSUQgIT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgbWF0Y2hSZXN1bHQuVVVJRCAhPSBudWxsICYmXG4gICAgICAgICAgICAgICAgbWF0Y2hSZXN1bHQuVVVJRCAhPSBcIlwiXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAvLyBTa2lwIHRoZSByZWxldmFuY2UgdGVzdHMgaWYgd2UgaGF2ZSBiZWVuIHRvbGQgdG8gdXNlIGEgc3BlY2lmaWMgVVVJRFxuICAgICAgICAgICAgICAgIHRoaXMuTG9nZ2VyLmRlYnVnKFxuICAgICAgICAgICAgICAgICAgICBcIldlJ3ZlIGJlZW4gdG9sZCB0byB1c2UgYW4gZW50cnkgd2l0aCB0aGlzIFVVSUQ6IFwiICsgbWF0Y2hSZXN1bHQuVVVJRFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgZm9yIChcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNvdW50ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgY291bnQgPCBtYXRjaFJlc3VsdC5lbnRyaWVzW21hdGNoUmVzdWx0Lm1vc3RSZWxldmFudEZvcm1JbmRleF0ubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBjb3VudCsrXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoUmVzdWx0LmVudHJpZXNbbWF0Y2hSZXN1bHQubW9zdFJlbGV2YW50Rm9ybUluZGV4XVtjb3VudF0udXVpZCA9PVxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hSZXN1bHQuVVVJRFxuICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoaW5nTG9naW4gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoUmVzdWx0LmVudHJpZXNbbWF0Y2hSZXN1bHQubW9zdFJlbGV2YW50Rm9ybUluZGV4XVtjb3VudF07XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hpbmdMb2dpbiA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuTG9nZ2VyLndhcm4oXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkNvdWxkIG5vdCBmaW5kIHRoZSByZXF1aXJlZCBLZWVQYXNzIGVudHJ5LiBNYXliZSB0aGUgd2Vic2l0ZSByZWRpcmVjdGVkIHlvdSB0byBhIGRpZmZlcmVudCBkb21haW4gb3IgaG9zdG5hbWU/XCJcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgIG1hdGNoaW5nTG9naW4gPT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgICghbWF0Y2hSZXN1bHQuZW50cmllc1ttYXRjaFJlc3VsdC5tb3N0UmVsZXZhbnRGb3JtSW5kZXhdIHx8XG4gICAgICAgICAgICAgICAgICAgICFtYXRjaFJlc3VsdC5lbnRyaWVzW21hdGNoUmVzdWx0Lm1vc3RSZWxldmFudEZvcm1JbmRleF0ubGVuZ3RoKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5Mb2dnZXIuZGVidWcoXCJObyBlbnRyaWVzIGZvciBmb3JtLlwiKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobWF0Y2hpbmdMb2dpbiA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5Mb2dnZXIuZGVidWcoXG4gICAgICAgICAgICAgICAgICAgIFwiTXVsdGlwbGUgZW50cmllcyBmb3IgZm9ybSwgc28gdXNpbmcgcHJlZmVycmVkIG9yIG1vc3QgcmVsZXZhbnQuXCJcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIG1hdGNoaW5nTG9naW4gPVxuICAgICAgICAgICAgICAgICAgICBvcmRlcmVkRW50cmllc1dpdGhQcmVmZXJlbmNlLmZpbmQoZSA9PiBlLmlzUHJlZmVycmVkTWF0Y2gpIHx8XG4gICAgICAgICAgICAgICAgICAgIG9yZGVyZWRFbnRyaWVzV2l0aFByZWZlcmVuY2VbMF07XG4gICAgICAgICAgICAgICAgbXVsdGlwbGVNYXRjaGVzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjaGVja01hdGNoaW5nTG9naW5SZWxldmFuY2VUaHJlc2hvbGQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoYXV0b21hdGVkICYmIGNoZWNrTWF0Y2hpbmdMb2dpblJlbGV2YW5jZVRocmVzaG9sZCAmJiBtYXRjaGluZ0xvZ2luICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hpbmdMb2dpbi5yZWxldmFuY2VTY29yZSA8IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5Mb2dnZXIuaW5mbyhcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiT3VyIHNlbGVjdGVkIGVudHJ5IGlzIG5vdCByZWxldmFudCBlbm91Z2ggdG8gZXhjZWVkIG91ciB0aHJlc2hvbGQgc28gd2lsbCBub3QgYmUgYXV0by1maWxsZWQuXCJcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hpbmdMb2dpbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtYXRjaGluZ0xvZ2luLmxvd0ZpZWxkTWF0Y2hSYXRpbykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLkxvZ2dlci5pbmZvKFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJPdXIgc2VsZWN0ZWQgZW50cnkgaGFzIGEgbG93IGZpZWxkIG1hdGNoIHJhdGlvIHNvIHdpbGwgbm90IGJlIGF1dG8tZmlsbGVkLlwiXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIG1hdGNoaW5nTG9naW4gPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG1hdGNoaW5nTG9naW4gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIC8vVE9ETzo0OiAjNiBtdWx0aS1wYWdlXG4gICAgICAgICAgICAgICAgLy8gLy8gcmVjb3JkIC8gdXBkYXRlIHRoZSBpbmZvIGF0dGFjaGVkIHRvIHRoaXMgdGFiIHJlZ2FyZGluZ1xuICAgICAgICAgICAgICAgIC8vIC8vIHRoZSBudW1iZXIgb2YgcGFnZXMgb2YgZm9ybXMgd2Ugd2FudCB0byBmaWxsIGluXG4gICAgICAgICAgICAgICAgLy8gLy8gTkI6IHdlIGRvIHRoaXMgZXZlbiBpZiB3ZSBrbm93IHRoaXMgaXMgYSBzaW5nbGUgZm9ybVxuICAgICAgICAgICAgICAgIC8vIC8vIHN1Ym1pc3Npb24gYmVjYXVhc2UgdGhlbiBpZiB0aGUgdXNlciBnZXRzIGR1bXBlZFxuICAgICAgICAgICAgICAgIC8vIC8vIGJhY2sgdG8gdGhlIGZvcm0gKHBhc3N3b3JkIGVycm9yPykgdGhlbiB3ZSBrbm93IG5vdFxuICAgICAgICAgICAgICAgIC8vIC8vIHRvIGF1dG8tc3VibWl0IGFnYWluICh0byBhdm9pZCBnZXR0aW5nIHN0dWNrIGluIGEgbG9vcClcblxuICAgICAgICAgICAgICAgIC8vIGlmICh0YWJTdGF0ZS5jdXJyZW50UGFnZSA+IHRhYlN0YXRlLm1heGltdW1QYWdlKVxuICAgICAgICAgICAgICAgIC8vIHtcbiAgICAgICAgICAgICAgICAvLyAgICAgLy8gSSBkb24ndCB0aGluayB0aGlzIHNob3VsZCBldmVyIGhhcHBlbiBiZWNhdXNlIGl0J3MgcmVzZXQgb25Gb3JtU3VibWl0XG4gICAgICAgICAgICAgICAgLy8gICAgIC8vIGJlZm9yZSB0aGlzIHBhZ2UgaGFzIGxvYWRlZC5cblxuICAgICAgICAgICAgICAgIC8vICAgICB0YWJTdGF0ZS5jdXJyZW50UGFnZSA9IDA7XG4gICAgICAgICAgICAgICAgLy8gICAgIHRhYlN0YXRlLm1heGltdW1QYWdlID0gMDtcbiAgICAgICAgICAgICAgICAvLyAgICAgdGFiU3RhdGUuZm9yY2VBdXRvU3VibWl0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAvLyAgICAgbWF0Y2hSZXN1bHQuY2Fubm90QXV0b1N1Ym1pdEZvcm0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIC8vICAgICB0aGlzLkxvZ2dlci5pbmZvKFwiRXhjZWVkZWQgZXhwZWN0ZWQgbnVtYmVyIG9mIHBhZ2VzIGR1cmluZyB0aGlzIGZvcm0tZmlsbGluZyBzZXNzaW9uLiBOb3QgYXV0by1zdWJtaXRpbmcgdGhpcyBmb3JtLlwiKTtcbiAgICAgICAgICAgICAgICAvLyB9XG5cbiAgICAgICAgICAgICAgICAvLyAvLyBJZiB0aGUgdXNlciBtYW51YWxseSByZXF1ZXN0ZWQgdGhpcyB0byBiZSBmaWxsZWQgaW4gb3IgdGhlIGN1cnJlbnQgcGFnZSBpcyB1bmtub3duXG4gICAgICAgICAgICAgICAgLy8gaWYgKCFhdXRvbWF0ZWQpLy9UT0RPOjQ6ICM2IG11bHRpLXBhZ2UgfHwgdGFiU3RhdGUuY3VycmVudFBhZ2UgPD0gMClcbiAgICAgICAgICAgICAgICAvLyB7XG4gICAgICAgICAgICAgICAgLy8gICAgIGxldCBtYXhpbXVtUGFnZUNvdW50ID0gMTtcbiAgICAgICAgICAgICAgICAvLyAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXRjaGluZ0xvZ2luLnBhc3N3b3Jkcy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgICAvLyAgICAge1xuICAgICAgICAgICAgICAgIC8vICAgICAgICAgY29uc3QgcGFzc0ZpZWxkID0gbWF0Y2hpbmdMb2dpbi5wYXNzd29yZHNbaV07XG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBpZiAocGFzc0ZpZWxkLmZvcm1GaWVsZFBhZ2UgPiBtYXhpbXVtUGFnZUNvdW50KVxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIG1heGltdW1QYWdlQ291bnQgPSBwYXNzRmllbGQuZm9ybUZpZWxkUGFnZTtcbiAgICAgICAgICAgICAgICAvLyAgICAgfVxuICAgICAgICAgICAgICAgIC8vICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1hdGNoaW5nTG9naW4ub3RoZXJGaWVsZHMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICAgICAgLy8gICAgIHtcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIGNvbnN0IG90aGVyRmllbGQgPSBtYXRjaGluZ0xvZ2luLm90aGVyRmllbGRzW2ldO1xuICAgICAgICAgICAgICAgIC8vICAgICAgICAgaWYgKG90aGVyRmllbGQuZm9ybUZpZWxkUGFnZSA+IG1heGltdW1QYWdlQ291bnQpXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgbWF4aW11bVBhZ2VDb3VudCA9IG90aGVyRmllbGQuZm9ybUZpZWxkUGFnZTtcbiAgICAgICAgICAgICAgICAvLyAgICAgfVxuICAgICAgICAgICAgICAgIC8vICAgICAvL1RPRE86NDogIzY6IG11bHRpLXBhZ2VcbiAgICAgICAgICAgICAgICAvLyAgICAgLy8gLy8gYWx3YXlzIGFzc3VtZSBwYWdlIDEgKHZlcnkgcmFyZSBjYXNlcyB3aWxsIGdvIHdyb25nIC0gc2VlIGdpdGh1YiBLZWVGb3ggIzQxMSBmb3IgcmVsZXZhbnQgZW5oYW5jZW1lbnQgcmVxdWVzdClcbiAgICAgICAgICAgICAgICAvLyAgICAgLy8gLy8gUG9zc2libGUgcmVncmVzc2lvbiBzaW5jZSB2MS40OiBXZSB1c2VkIHRvIGlnbm9yZSBjdXJyZW50UGFnZSBlbnRpcmVseSBmb3IgdGhlIGZpcnN0XG4gICAgICAgICAgICAgICAgLy8gICAgIC8vIC8vIHBhZ2Ugb2YgYSBzdWJtaXNzaW9uLCBub3cgd2UgbWlnaHQgdHJ5IHRvIGdpdmUgcHJlZmVyZW5jZSB0byBwYWdlIDEgZmllbGRzICh0aG91Z2ggdG90YWxcbiAgICAgICAgICAgICAgICAvLyAgICAgLy8gLy8gcmVsZXZhbmNlIHNjb3JlIHNob3VsZG4ndCBiZSBzaGlmdGVkIGJ5IGVub3VnaCB0byBhZmZlY3Qgb3RoZXJ3aXNlIHdlbGwtbWF0Y2hlZCBmaWVsZHMpXG4gICAgICAgICAgICAgICAgLy8gICAgIC8vIHRhYlN0YXRlLmN1cnJlbnRQYWdlID0gMTtcbiAgICAgICAgICAgICAgICAvLyAgICAgLy8gdGFiU3RhdGUubWF4aW11bVBhZ2UgPSBtYXhpbXVtUGFnZUNvdW50O1xuICAgICAgICAgICAgICAgIC8vICAgICAvLyB0aGlzLkxvZ2dlci5kZWJ1ZyhcImN1cnJlbnRQYWdlIGlzOiBcIiArIHRhYlN0YXRlLmN1cnJlbnRQYWdlKTtcbiAgICAgICAgICAgICAgICAvLyAgICAgLy8gdGhpcy5Mb2dnZXIuZGVidWcoXCJtYXhpbXVtUGFnZSBpczogXCIgKyB0YWJTdGF0ZS5tYXhpbXVtUGFnZSk7XG4gICAgICAgICAgICAgICAgLy8gfVxuXG4gICAgICAgICAgICAgICAgLy8gRGVmYXVsdCBhdXRvLWZpbGwgYmVoYXZpb3VyIGRlcGVuZHMgdXBvbiB3aGV0aGVyIHRoaXMgaXMgYXV0b21hdGljIG9yXG4gICAgICAgICAgICAgICAgLy8gbWFudWFsLCB0aGUgY29ycmVzcG9uZGluZyB1c2VyIFwiYXV0b21hdGljXCIgb3B0aW9uLCBpZiB0aGVyZSBhcmUgb25lIG9yIG1hbnkgbWF0Y2hlc1xuICAgICAgICAgICAgICAgIC8vIGFuZCB0aGUgdXNlciBvcHRpb24gdG8gcHJldmVudCBhdXRvbWF0aWMgZmlsbCBkdWUgdG8gbXVsdGlwbGUgbWF0Y2hlc1xuICAgICAgICAgICAgICAgIGNvbnN0IGF1dG9GaWxsRW5hYmxlZCA9XG4gICAgICAgICAgICAgICAgICAgIGlzTWF0Y2hlZExvZ2luUmVxdWVzdCB8fFxuICAgICAgICAgICAgICAgICAgICAoYXV0b21hdGVkICYmIG11bHRpcGxlTWF0Y2hlcyAmJiAhdGhpcy5jb25maWcuYXV0b0ZpbGxGb3Jtc1dpdGhNdWx0aXBsZU1hdGNoZXNcbiAgICAgICAgICAgICAgICAgICAgICAgID8gZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy5jb25maWcuYXV0b0ZpbGxGb3Jtcyk7XG5cbiAgICAgICAgICAgICAgICAvLyBEZWZhdWx0IGF1dG8tc3VibWl0IGJlaGF2aW91ciBkZXBlbmRzIHVwb24gd2hldGhlciB0aGlzIGlzIGF1dG9tYXRpYyBvciBtYW51YWwgYW5kIHRoZSBjb3JyZXNwb25kaW5nIHVzZXIgb3B0aW9uXG4gICAgICAgICAgICAgICAgY29uc3QgYXV0b1N1Ym1pdEVuYWJsZWQgPSBpc01hdGNoZWRMb2dpblJlcXVlc3RcbiAgICAgICAgICAgICAgICAgICAgPyB0aGlzLmNvbmZpZy5hdXRvU3VibWl0TWF0Y2hlZEZvcm1zXG4gICAgICAgICAgICAgICAgICAgIDogdGhpcy5jb25maWcuYXV0b1N1Ym1pdEZvcm1zO1xuXG4gICAgICAgICAgICAgICAgYWN0aW9uID0geyBmaWxsOiBhdXRvRmlsbEVuYWJsZWQsIHN1Ym1pdDogYXV0b1N1Ym1pdEVuYWJsZWQgfTtcblxuICAgICAgICAgICAgICAgIC8vIE92ZXJyaWRlIGZpbGwgcHJlZmVyZW5jZXMgZnJvbSBwZXItZW50cnkgY29uZmlndXJhdGlvbiBvcHRpb25zXG4gICAgICAgICAgICAgICAgLy8gdW5sZXNzIHVzZXIgZXhwbGljaXR5IHNlbGVjdGVkIHRoZSBtYXRjaGVkIGVudHJ5XG4gICAgICAgICAgICAgICAgaWYgKCFpc01hdGNoZWRMb2dpblJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoaW5nTG9naW4uYWx3YXlzQXV0b0ZpbGwpIGFjdGlvbi5maWxsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoaW5nTG9naW4ubmV2ZXJBdXRvRmlsbCkgYWN0aW9uLmZpbGwgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBPdmVycmlkZSBzdWJtaXQgcHJlZmVyZW5jZXMgZnJvbSBwZXItZW50cnkgY29uZmlndXJhdGlvbiBvcHRpb25zXG4gICAgICAgICAgICAgICAgaWYgKCFpc01hdGNoZWRMb2dpblJlcXVlc3QgfHwgIXRoaXMuY29uZmlnLm1hbnVhbFN1Ym1pdE92ZXJyaWRlUHJvaGliaXRlZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2hpbmdMb2dpbi5hbHdheXNBdXRvU3VibWl0KSBhY3Rpb24uc3VibWl0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoaW5nTG9naW4ubmV2ZXJBdXRvU3VibWl0KSBhY3Rpb24uc3VibWl0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGFjdGlvbi5maWxsIHx8IG1hdGNoUmVzdWx0Lm11c3RBdXRvRmlsbEZvcm0pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5Mb2dnZXIuZGVidWcoXCJHb2luZyB0byBhdXRvLWZpbGwgYSBmb3JtXCIpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZlYXR1cmVzID0gc3RvcmUuS2VlUGFzc0RhdGFiYXNlcy5maW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgZGIgPT4gZGIuZmlsZU5hbWUgPT09IG1hdGNoaW5nTG9naW4uZGF0YWJhc2UuZmlsZU5hbWVcbiAgICAgICAgICAgICAgICAgICAgKS5zZXNzaW9uRmVhdHVyZXM7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNjb3JlQ29uZmlnOiBGaWVsZE1hdGNoU2NvcmVDb25maWcgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwdW5pc2hXcm9uZ0lEQW5kTmFtZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlcy5pbmRleE9mKFwiS1BSUENfRklFTERfREVGQVVMVF9OQU1FX0FORF9JRF9FTVBUWVwiKSA+PSAwXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RGaWxsZWRPdGhlciA9IHRoaXMuZmlsbE1hbnlGb3JtRmllbGRzKFxuICAgICAgICAgICAgICAgICAgICAgICAgb3RoZXJGaWVsZHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGluZ0xvZ2luLmZpZWxkcy5maWx0ZXIoZiA9PiBmLnR5cGUgIT09IFwicGFzc3dvcmRcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICAtMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3JlQ29uZmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0b21hdGVkXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RGaWxsZWRQYXNzd29yZHMgPSB0aGlzLmZpbGxNYW55Rm9ybUZpZWxkcyhcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkRmllbGRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hpbmdMb2dpbi5maWVsZHMuZmlsdGVyKGYgPT4gZi50eXBlID09PSBcInBhc3N3b3JkXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgLTEsXG4gICAgICAgICAgICAgICAgICAgICAgICBzY29yZUNvbmZpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9tYXRlZFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICBtYXRjaFJlc3VsdC5mb3JtUmVhZHlGb3JTdWJtaXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBtYXRjaFJlc3VsdC5sYXN0RmlsbGVkUGFzc3dvcmRzID0gbGFzdEZpbGxlZFBhc3N3b3JkcztcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hSZXN1bHQubGFzdEZpbGxlZE90aGVyID0gbGFzdEZpbGxlZE90aGVyO1xuICAgICAgICAgICAgICAgICAgICBpZiAobGFzdEZpbGxlZFBhc3N3b3JkcyAmJiBsYXN0RmlsbGVkUGFzc3dvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Ym1pdFRhcmdldE5laWdoYm91ciA9IGxhc3RGaWxsZWRQYXNzd29yZHNbMF0uRE9NZWxlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsYXN0RmlsbGVkT3RoZXIgJiYgbGFzdEZpbGxlZE90aGVyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Ym1pdFRhcmdldE5laWdoYm91ciA9IGxhc3RGaWxsZWRPdGhlclswXS5ET01lbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybVNhdmluZy51cGRhdGVNYXRjaFJlc3VsdChtYXRjaFJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gV2Ugb25seSBkbyB0aGlzIGlmIGFueSBmb3JtcyB3ZXJlIGF1dG8tZmlsbGVkIHN1Y2Nlc3NmdWxseVxuICAgICAgICBpZiAobWF0Y2hSZXN1bHQuZm9ybVJlYWR5Rm9yU3VibWl0KSB7XG4gICAgICAgICAgICAvLyBpZiB3ZSBkaWRuJ3QgYWxyZWFkeSBkZWZpbmUgYSB1dWlkLCB3ZSBzZXQgaXQgdXAgbm93XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgbWF0Y2hSZXN1bHQuVVVJRCA9PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgICAgICBtYXRjaFJlc3VsdC5VVUlEID09IG51bGwgfHxcbiAgICAgICAgICAgICAgICBtYXRjaFJlc3VsdC5VVUlEID09IFwiXCJcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHRoaXMuTG9nZ2VyLmRlYnVnKFwiU3luY2luZyBVVUlEIHRvOiBcIiArIG1hdGNoaW5nTG9naW4udXVpZCk7XG4gICAgICAgICAgICAgICAgbWF0Y2hSZXN1bHQuVVVJRCA9IG1hdGNoaW5nTG9naW4udXVpZDtcbiAgICAgICAgICAgICAgICBtYXRjaFJlc3VsdC5kYkZpbGVOYW1lID0gbWF0Y2hpbmdMb2dpbi5kYXRhYmFzZS5maWxlTmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIHRoaXMgZm9ybSBmaWxsIGlzIHRoZSBub24tZmluYWwgcGFnZSBvZiBhIG11bHRpLXBhZ2UgbG9naW4gcHJvY2VzcyB3ZSByZWNvcmQgdGhlXG4gICAgICAgIC8vIFVVSUQgYW5kIGRiRmlsZW5hbWUuIFdlIGFsc28gZW5hYmxlIGF1dG8tc3VibWl0IGluIHNvbWUgY2lyY3Vtc3RhbmNlc1xuICAgICAgICAvL1RPRE86NDogIzY6IG11bHRpLXBhZ2VcbiAgICAgICAgLy8gaWYgKG1hdGNoUmVzdWx0LlVVSUQgIT0gdW5kZWZpbmVkICYmIG1hdGNoUmVzdWx0LlVVSUQgIT0gbnVsbCAmJiBtYXRjaFJlc3VsdC5VVUlEICE9IFwiXCIpXG4gICAgICAgIC8vIHtcbiAgICAgICAgLy8gICAgIGlmICh0YWJTdGF0ZS5jdXJyZW50UGFnZSA+IDAgJiYgdGFiU3RhdGUuY3VycmVudFBhZ2UgPCB0YWJTdGF0ZS5tYXhpbXVtUGFnZSlcbiAgICAgICAgLy8gICAgIHtcbiAgICAgICAgLy8gICAgICAgICBpZiAobWF0Y2hSZXN1bHQuVVVJRClcbiAgICAgICAgLy8gICAgICAgICB7XG4gICAgICAgIC8vICAgICAgICAgICAgIHRoaXMuTG9nZ2VyLmRlYnVnKFwiU2V0dGluZyBVVUlEIHRvOiBcIiArIG1hdGNoUmVzdWx0LlVVSUQpO1xuICAgICAgICAvLyAgICAgICAgICAgICB0YWJTdGF0ZS5VVUlEID0gbWF0Y2hSZXN1bHQuVVVJRDtcbiAgICAgICAgLy8gICAgICAgICB9XG4gICAgICAgIC8vICAgICAgICAgaWYgKG1hdGNoUmVzdWx0LmRiRmlsZU5hbWUpXG4gICAgICAgIC8vICAgICAgICAge1xuICAgICAgICAvLyAgICAgICAgICAgICB0aGlzLkxvZ2dlci5kZWJ1ZyhcIlNldHRpbmcgZGJGaWxlTmFtZSB0bzogXCIgKyBtYXRjaFJlc3VsdC5kYkZpbGVOYW1lKTtcbiAgICAgICAgLy8gICAgICAgICAgICAgdGFiU3RhdGUuZGJGaWxlTmFtZSA9IG1hdGNoUmVzdWx0LmRiRmlsZU5hbWU7XG4gICAgICAgIC8vICAgICAgICAgfVxuXG4gICAgICAgIC8vICAgICAgICAgLy8gV2UgZm9yY2UgYXV0byBzdWJtaXQgZm9yIGFsbCBtdWx0aS1wYWdlIGVudHJpZXMgdGhhdCBoYXZlIGJlZW4gdHJpZ2dlcmVkXG4gICAgICAgIC8vICAgICAgICAgLy8gYnkgYSBvbmUtY2xpY2sgb3IgbWF0Y2hlZCBsb2dpbiB1c2VyIHNlbGVjdGlvbiwgcHJvdmlkZWQgdGhhdCBvcGVyYXRpb25cbiAgICAgICAgLy8gICAgICAgICAvLyBoYXMgbm90IGFscmVhZHkgYmVlbiBtYXJrZWQgY29tcGxldGUgYnkgdGhlIG9uRm9ybVN1Ym1pdEhhbmRsZXIgaW4gZm9ybXNTYXZlVGFiLmpzXG4gICAgICAgIC8vICAgICAgICAgaWYgKHRhYlN0YXRlLnVzZXJSZWNlbnRseURlbWFuZGVkQXV0b1N1Ym1pdClcbiAgICAgICAgLy8gICAgICAgICB7XG4gICAgICAgIC8vICAgICAgICAgICAgIHRhYlN0YXRlLmZvcmNlQXV0b1N1Ym1pdCA9IHRydWU7XG4gICAgICAgIC8vICAgICAgICAgICAgIHRoaXMuTG9nZ2VyLmRlYnVnKFwiU2V0IGZvcmNlQXV0b1N1Ym1pdCB0bzogdHJ1ZVwiKTtcbiAgICAgICAgLy8gICAgICAgICB9XG4gICAgICAgIC8vICAgICB9XG4gICAgICAgIC8vIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICAhbWF0Y2hSZXN1bHQuY2Fubm90QXV0b1N1Ym1pdEZvcm0gJiZcbiAgICAgICAgICAgIChhY3Rpb24uc3VibWl0IHx8IG1hdGNoUmVzdWx0Lm11c3RBdXRvU3VibWl0Rm9ybSkgJiZcbiAgICAgICAgICAgIG1hdGNoUmVzdWx0LmZvcm1SZWFkeUZvclN1Ym1pdFxuICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMuTG9nZ2VyLmluZm8oXCJBdXRvLXN1Ym1pdHRpbmcgZm9ybS4uLlwiKTtcbiAgICAgICAgICAgIHRoaXMuc3VibWl0Rm9ybShmb3JtLCBzdWJtaXRUYXJnZXROZWlnaGJvdXIpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzTWF0Y2hlZExvZ2luUmVxdWVzdCkge1xuICAgICAgICAgICAgdGhpcy5Mb2dnZXIuZGVidWcoXCJNYXRjaGVkIGVudHJ5IHJlcXVlc3QgaXMgbm90IGJlaW5nIGF1dG8tc3VibWl0dGVkLlwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm1hdGNoUmVzdWx0LmFsbE1hdGNoaW5nTG9naW5zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoYXV0b21hdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuTG9nZ2VyLmRlYnVnKFwiQXV0b21hdGljIGZvcm0gZmlsbCBjb21wbGV0ZS5cIik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5Mb2dnZXIuZGVidWcoXCJNYW51YWwgZm9ybSBmaWxsIGNvbXBsZXRlLlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuTG9nZ2VyLmluZm8oXCJOb3RoaW5nIHRvIGZpbGwuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgc29ydE1hdGNoZWRFbnRyaWVzKGVudHJpZXM6IEVudHJ5W10pOiBFbnRyeVtdIHtcbiAgICAgICAgcmV0dXJuIGVudHJpZXNcbiAgICAgICAgICAgIC5tYXAoZSA9PiBuZXcgRW50cnkoeyAuLi5lIH0pKVxuICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IGIucmVsZXZhbmNlU2NvcmUgLSBhLnJlbGV2YW5jZVNjb3JlKTtcbiAgICB9XG5cbiAgICBmbGFnVXNlclByZWZlcnJlZEVudHJ5KG9yZGVyZWRFbnRyaWVzOiBFbnRyeVtdKTogRW50cnlbXSB7XG4gICAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwod2luZG93LmRvY3VtZW50LlVSTCk7XG4gICAgICAgIHVybC5ob3N0bmFtZSA9IHB1bnljb2RlLnRvVW5pY29kZSh1cmwuaG9zdG5hbWUpO1xuICAgICAgICBjb25zdCBjb25mID0gY29uZmlnTWFuYWdlci5zaXRlQ29uZmlnRm9yKHVybC5ocmVmKTtcbiAgICAgICAgcmV0dXJuIG9yZGVyZWRFbnRyaWVzLm1hcChcbiAgICAgICAgICAgIGUgPT5cbiAgICAgICAgICAgICAgICBuZXcgRW50cnkoe1xuICAgICAgICAgICAgICAgICAgICAuLi5lLFxuICAgICAgICAgICAgICAgICAgICBpc1ByZWZlcnJlZE1hdGNoOiBjb25mLnByZWZlcnJlZEVudHJ5VXVpZCA9PT0gZS51dWlkID8gdHJ1ZSA6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGZpbmRTdWJtaXRCdXR0b24oZm9ybTogSFRNTEZvcm1FbGVtZW50LCBzdWJtaXRUYXJnZXROZWlnaGJvdXI6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IGNhbmRpZGF0ZXM6IFN1Ym1pdENhbmRpZGF0ZVtdID0gW107XG4gICAgICAgIGNvbnN0IERJU1RBTkNFX01BWF9TQ09SRSA9IDEwMDtcbiAgICAgICAgY29uc3QgRElTVEFOQ0VfRElGRkVSRU5DRV9GQUNUT1IgPSAyMDtcbiAgICAgICAgY29uc3QgVklTSUJMRV9TQ09SRSA9IDYwO1xuICAgICAgICBjb25zdCBDQVRfQlVUVE9OSU5GT1JNX1NDT1JFID0gNjA7XG4gICAgICAgIGNvbnN0IENBVF9TVUJNSVRJTlBVVElORk9STV9TQ09SRSA9IDUwO1xuICAgICAgICBjb25zdCBDQVRfQlVUVE9OT1VUU0lERUZPUk1fU0NPUkUgPSA0MDtcbiAgICAgICAgY29uc3QgQ0FUX0lNQUdFSU5QVVRJTkZPUk1fU0NPUkUgPSA0MDtcbiAgICAgICAgY29uc3QgQ0FUX0JVVFRPTklOUFVUSU5GT1JNX1NDT1JFID0gMzA7XG4gICAgICAgIGNvbnN0IENBVF9CVVRUT05ST0xFSU5GT1JNX1NDT1JFID0gMjA7XG4gICAgICAgIGNvbnN0IENBVF9CVVRUT05ST0xFT1VUU0lERUZPUk1fU0NPUkUgPSAxMDtcbiAgICAgICAgbGV0IG1pblNjb3JlVG9XaW4gPSAwO1xuICAgICAgICBjb25zdCBkaXN0YW5jZUNhbGMgPSAodiwgdCkgPT4gdGhpcy5jb21tb25BbmNlc3RvckRpc3RhbmNlKHYsIHQsIGRpc3RhbmNlTWFwKTtcbiAgICAgICAgY29uc3QgZGlzdGFuY2VNYXAgPSBuZXcgTWFwPE5vZGUsIG51bWJlcj4oKTtcbiAgICAgICAgY29uc3QgZlV0aWxzID0gdGhpcy5mb3JtVXRpbHM7XG5cbiAgICAgICAgZnVuY3Rpb24gdmVyaWZ5UG90ZW50aWFsQ2FuZGlkYXRlKHZhbHVlOiBIVE1MRWxlbWVudCwgc2NvcmU6IG51bWJlcikge1xuICAgICAgICAgICAgLy8gYWJvcnQgZWFybHkgaWYgd2UgY2FuJ3Qgd2luIGV2ZW4gd2l0aCBhIHBlcmZlY3QgdmlzaWJpbGl0eSBhbmQgZGlzdGFuY2Ugc2NvcmVcbiAgICAgICAgICAgIGlmIChtaW5TY29yZVRvV2luID4gc2NvcmUgKyBWSVNJQkxFX1NDT1JFICsgRElTVEFOQ0VfTUFYX1NDT1JFKSByZXR1cm47XG5cbiAgICAgICAgICAgIGNvbnN0IGlzVmlzaWJsZSA9IGZVdGlscy5pc0RPTUVsZW1lbnRWaXNpYmxlKHZhbHVlKTtcblxuICAgICAgICAgICAgLy8gU29tZSBmb3JtcyBhcmUgaGlkZGVuIChlLmcuIFR3aXR0ZXIpIGFuZCBzaW1wbHkgcmV2ZWFsZWQgdG8gdGhlIHVzZXIgYXQgYSBsYXRlciB0aW1lXG4gICAgICAgICAgICAvLyBUaGVyZWZvcmUgd2Ugc2hvdWxkIG9ubHkgcHVuaXNoIGJhc2VkIG9uIHZpc2liaWxpdHkgaWYgdGhlIGZvcm0gc3VibWl0VGFyZ2V0TmVpZ2hib3VyIGlzIHZpc2libGUuXG4gICAgICAgICAgICBpZiAoaXNWaXNpYmxlIHx8ICFmVXRpbHMuaXNET01FbGVtZW50VmlzaWJsZShzdWJtaXRUYXJnZXROZWlnaGJvdXIpKSB7XG4gICAgICAgICAgICAgICAgc2NvcmUgKz0gVklTSUJMRV9TQ09SRTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gYWJvcnQgZWFybHkgaWYgd2UgY2FuJ3Qgd2luIGV2ZW4gd2l0aCBhIHBlcmZlY3QgdmlzaWJpbGl0eSBhbmQgZGlzdGFuY2Ugc2NvcmVcbiAgICAgICAgICAgIGlmIChtaW5TY29yZVRvV2luID4gc2NvcmUgKyBESVNUQU5DRV9NQVhfU0NPUkUpIHJldHVybjtcblxuICAgICAgICAgICAgY2FuZGlkYXRlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBkaXN0YW5jZTogZGlzdGFuY2VDYWxjKHZhbHVlLCBzdWJtaXRUYXJnZXROZWlnaGJvdXIpLFxuICAgICAgICAgICAgICAgIGVsZW1lbnQ6IHZhbHVlLFxuICAgICAgICAgICAgICAgIHNjb3JlOiBzY29yZVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIG1pblNjb3JlVG9XaW4gPSBzY29yZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHJlc29sdmVBcmlhTGFiZWxWYWx1ZXMoZWxlbWVudDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGxhYmVscyA9IFtdO1xuICAgICAgICAgICAgaWYgKGVsZW1lbnQuaGFzQXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiKSkge1xuICAgICAgICAgICAgICAgIGxhYmVscy5wdXNoKGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiKS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsZW1lbnRcbiAgICAgICAgICAgICAgICAuZ2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbGxlZGJ5XCIpXG4gICAgICAgICAgICAgICAgPy50cmltKClcbiAgICAgICAgICAgICAgICAuc3BsaXQoXCIgXCIpXG4gICAgICAgICAgICAgICAgLmZvckVhY2goaWQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxhYmVsRWxlbWVudCA9IGZvcm0ub3duZXJEb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGFiZWxFbGVtZW50ICYmIGxhYmVsRWxlbWVudC5pbm5lclRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbHMucHVzaChsYWJlbEVsZW1lbnQuaW5uZXJUZXh0LnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBsYWJlbHM7XG4gICAgICAgIH1cblxuICAgICAgICAvKlxuICAgICAgICAgICAgSW4gRmlyZWZveCBBcnJheS5mcm9tLi4uZm9yZWFjaCBpcyBhYm91dCA1MCUgZmFzdGVyIHRoYW4gdGhlIGFsdGVybmF0aXZlIGluIHRoaXMgY29tbWVudCBiZWxvdy4uLiBidXQgMjAlIHNsb3dlciBpbiBDaHJvbWUuXG4gICAgICAgICAgICBjb25zdCBidXR0b25zID0gZm9ybS5vd25lckRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYnV0dG9uXCIpO1xuICAgICAgICAgICAgZm9yIChsZXQgaT0wOyBpPGJ1dHRvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGJ1dHRvbnNbaV07XG4gICAgICAgICAgICAgICAgLi4uXG4gICAgICAgICAgICAqL1xuICAgICAgICBBcnJheS5mcm9tKGZvcm0ub3duZXJEb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJ1dHRvblwiKSkuZm9yRWFjaCh2YWx1ZSA9PiB7XG4gICAgICAgICAgICBpZiAoIXZhbHVlLmlzQ29ubmVjdGVkKSByZXR1cm47XG4gICAgICAgICAgICBpZiAoIXZhbHVlLnR5cGUgfHwgdmFsdWUudHlwZSAhPSBcInJlc2V0XCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzZW1hbnRpY1ZhbHVlczogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUubmFtZSkgc2VtYW50aWNWYWx1ZXMucHVzaCh2YWx1ZS5uYW1lLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZS50ZXh0Q29udGVudCkgc2VtYW50aWNWYWx1ZXMucHVzaCh2YWx1ZS50ZXh0Q29udGVudC50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUudmFsdWUpIHNlbWFudGljVmFsdWVzLnB1c2godmFsdWUudmFsdWUudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgICAgICAgICAgc2VtYW50aWNWYWx1ZXMucHVzaCguLi5yZXNvbHZlQXJpYUxhYmVsVmFsdWVzKHZhbHVlKSk7XG5cbiAgICAgICAgICAgICAgICBsZXQgc2NvcmUgPSB0aGlzLnNjb3JlQWRqdXN0bWVudEZvck1hZ2ljV29yZHMoXG4gICAgICAgICAgICAgICAgICAgIHNlbWFudGljVmFsdWVzLFxuICAgICAgICAgICAgICAgICAgICA1MCxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZW1hbnRpY1doaXRlbGlzdENhY2hlLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbWFudGljQmxhY2tsaXN0Q2FjaGVcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHNjb3JlICs9XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLmZvcm0gJiYgdmFsdWUuZm9ybSA9PSBmb3JtXG4gICAgICAgICAgICAgICAgICAgICAgICA/IENBVF9CVVRUT05JTkZPUk1fU0NPUkVcbiAgICAgICAgICAgICAgICAgICAgICAgIDogQ0FUX0JVVFRPTk9VVFNJREVGT1JNX1NDT1JFO1xuXG4gICAgICAgICAgICAgICAgdmVyaWZ5UG90ZW50aWFsQ2FuZGlkYXRlKHZhbHVlLCBzY29yZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIEFycmF5LmZyb20oZm9ybS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImlucHV0XCIpKS5mb3JFYWNoKHZhbHVlID0+IHtcbiAgICAgICAgICAgIGlmICghdmFsdWUuaXNDb25uZWN0ZWQpIHJldHVybjtcbiAgICAgICAgICAgIGlmICh2YWx1ZS50eXBlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBsZXQgc2VtYW50aWNTY29yZSA9IDA7XG5cbiAgICAgICAgICAgICAgICBpZiAodmFsdWUudHlwZSA9PSBcInN1Ym1pdFwiIHx8IHZhbHVlLnR5cGUgPT0gXCJidXR0b25cIikge1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUubmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VtYW50aWNTY29yZSArPSB0aGlzLnNjb3JlQWRqdXN0bWVudEZvck1hZ2ljV29yZHMoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW3ZhbHVlLm5hbWUudG9Mb3dlckNhc2UoKV0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgNTAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZW1hbnRpY1doaXRlbGlzdENhY2hlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VtYW50aWNCbGFja2xpc3RDYWNoZVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIE5hbWVzIGFyZSBtb3JlIGltcG9ydGFudCBidXQgc29tZXRpbWVzIHRoZXkgZG9uJ3QgZXhpc3Qgb3IgYXJlIHJhbmRvbVxuICAgICAgICAgICAgICAgICAgICAvLyBzbyBjaGVjayB3aGF0IGlzIGFjdHVhbGx5IGRpc3BsYXllZCB0byB0aGUgdXNlclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZW1hbnRpY1ZhbHVlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbWFudGljVmFsdWVzLnB1c2godmFsdWUudmFsdWUudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc2VtYW50aWNWYWx1ZXMucHVzaCguLi5yZXNvbHZlQXJpYUxhYmVsVmFsdWVzKHZhbHVlKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZW1hbnRpY1ZhbHVlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZW1hbnRpY1Njb3JlICs9IHRoaXMuc2NvcmVBZGp1c3RtZW50Rm9yTWFnaWNXb3JkcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW1hbnRpY1ZhbHVlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA0MCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbWFudGljV2hpdGVsaXN0Q2FjaGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZW1hbnRpY0JsYWNrbGlzdENhY2hlXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZW1hbnRpY1Njb3JlICs9IHRoaXMuc2NvcmVBZGp1c3RtZW50Rm9yTWFnaWNXb3JkcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbdmFsdWUuaWQudG9Mb3dlckNhc2UoKV0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMjAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZW1hbnRpY1doaXRlbGlzdENhY2hlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VtYW50aWNCbGFja2xpc3RDYWNoZVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZS50eXBlID09IFwic3VibWl0XCIgfHwgdmFsdWUudHlwZSA9PSBcImJ1dHRvblwiIHx8IHZhbHVlLnR5cGUgPT0gXCJpbWFnZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzY29yZSA9IHNlbWFudGljU2NvcmU7XG4gICAgICAgICAgICAgICAgICAgIHNjb3JlICs9XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS50eXBlID09IFwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IENBVF9CVVRUT05JTlBVVElORk9STV9TQ09SRVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdmFsdWUudHlwZSA9PSBcImltYWdlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IENBVF9JTUFHRUlOUFVUSU5GT1JNX1NDT1JFXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBDQVRfU1VCTUlUSU5QVVRJTkZPUk1fU0NPUkU7XG4gICAgICAgICAgICAgICAgICAgIHZlcmlmeVBvdGVudGlhbENhbmRpZGF0ZSh2YWx1ZSwgc2NvcmUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgQXJyYXkuZnJvbShmb3JtLm93bmVyRG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltyb2xlPWJ1dHRvbl06bm90KGJ1dHRvbilcIikpLmZvckVhY2goXG4gICAgICAgICAgICAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghdmFsdWUuaXNDb25uZWN0ZWQpIHJldHVybjtcbiAgICAgICAgICAgICAgICBjb25zdCBzZW1hbnRpY1ZhbHVlczogc3RyaW5nW10gPSBbXTtcblxuICAgICAgICAgICAgICAgIC8vIHRlY2huaWNhbFxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5uYW1lKSBzZW1hbnRpY1ZhbHVlcy5wdXNoKHZhbHVlLm5hbWUudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlLmlkKSBzZW1hbnRpY1ZhbHVlcy5wdXNoKHZhbHVlLmlkLnRvTG93ZXJDYXNlKCkpO1xuXG4gICAgICAgICAgICAgICAgLy8gdXNlciB2aXNpYmxlXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlLnRpdGxlKSBzZW1hbnRpY1ZhbHVlcy5wdXNoKHZhbHVlLnRpdGxlLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5pbm5lclRleHQpIHNlbWFudGljVmFsdWVzLnB1c2godmFsdWUuaW5uZXJUZXh0LnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5kYXRhU2V0ICYmIHZhbHVlLmRhdGFTZXQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUuZGF0YVNldC50b29sdGlwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZW1hbnRpY1ZhbHVlcy5wdXNoKHZhbHVlLmRhdGFTZXQudG9vbHRpcC50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzZW1hbnRpY1ZhbHVlcy5wdXNoKC4uLnJlc29sdmVBcmlhTGFiZWxWYWx1ZXModmFsdWUpKTtcblxuICAgICAgICAgICAgICAgIGxldCBzY29yZSA9IHRoaXMuc2NvcmVBZGp1c3RtZW50Rm9yTWFnaWNXb3JkcyhcbiAgICAgICAgICAgICAgICAgICAgc2VtYW50aWNWYWx1ZXMsXG4gICAgICAgICAgICAgICAgICAgIDUwLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbWFudGljV2hpdGVsaXN0Q2FjaGUsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VtYW50aWNCbGFja2xpc3RDYWNoZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgc2NvcmUgKz1cbiAgICAgICAgICAgICAgICAgICAgdmFsdWUuZm9ybSAmJiB2YWx1ZS5mb3JtID09IGZvcm1cbiAgICAgICAgICAgICAgICAgICAgICAgID8gQ0FUX0JVVFRPTlJPTEVJTkZPUk1fU0NPUkVcbiAgICAgICAgICAgICAgICAgICAgICAgIDogQ0FUX0JVVFRPTlJPTEVPVVRTSURFRk9STV9TQ09SRTtcbiAgICAgICAgICAgICAgICB2ZXJpZnlQb3RlbnRpYWxDYW5kaWRhdGUodmFsdWUsIHNjb3JlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoY2FuZGlkYXRlcy5sZW5ndGggPD0gMCkgcmV0dXJuIG51bGw7XG4gICAgICAgIGlmIChjYW5kaWRhdGVzLmxlbmd0aCA9PT0gMSkgcmV0dXJuIGNhbmRpZGF0ZXNbMF0uZWxlbWVudDtcblxuICAgICAgICBjb25zdCBzdWJtaXRFbGVtZW50cyA9IGNhbmRpZGF0ZXMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgaWYgKGEuZGlzdGFuY2UgPiBiLmRpc3RhbmNlKSByZXR1cm4gLTE7XG4gICAgICAgICAgICBpZiAoYS5kaXN0YW5jZSA8IGIuZGlzdGFuY2UpIHJldHVybiAxO1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IG1heERpc3RhbmNlRGlmZmVyZW5jZSA9XG4gICAgICAgICAgICBzdWJtaXRFbGVtZW50c1swXS5kaXN0YW5jZSAtIHN1Ym1pdEVsZW1lbnRzW3N1Ym1pdEVsZW1lbnRzLmxlbmd0aCAtIDFdLmRpc3RhbmNlO1xuICAgICAgICBjb25zdCBkaXN0YW5jZVNjb3JlID0gTWF0aC5taW4oXG4gICAgICAgICAgICBESVNUQU5DRV9NQVhfU0NPUkUsXG4gICAgICAgICAgICBESVNUQU5DRV9ESUZGRVJFTkNFX0ZBQ1RPUiAqIG1heERpc3RhbmNlRGlmZmVyZW5jZVxuICAgICAgICApO1xuICAgICAgICBsZXQgZGlzdGFuY2VGYWN0b3IgPSAxIC8gc3VibWl0RWxlbWVudHMubGVuZ3RoO1xuICAgICAgICBsZXQgbGFzdERpc3RhbmNlID0gc3VibWl0RWxlbWVudHNbMF0uZGlzdGFuY2U7XG4gICAgICAgIHN1Ym1pdEVsZW1lbnRzLmZvckVhY2goKGNhbmRpZGF0ZSwgaW5kZXgsIGVsZW1lbnRzKSA9PiB7XG4gICAgICAgICAgICBpZiAoY2FuZGlkYXRlLmRpc3RhbmNlIDwgbGFzdERpc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgZGlzdGFuY2VGYWN0b3IgPSAoaW5kZXggKyAxKSAvIGVsZW1lbnRzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBsYXN0RGlzdGFuY2UgPSBjYW5kaWRhdGUuZGlzdGFuY2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYW5kaWRhdGUuc2NvcmUgKz0gZGlzdGFuY2VGYWN0b3IgKiBkaXN0YW5jZVNjb3JlO1xuICAgICAgICB9KTtcblxuICAgICAgICAvL1RPRE86NDogbW9yZSBhY2N1cmF0ZSBzZWFyY2hpbmcgb2Ygc3VibWl0IGJ1dHRvbnMsIGV0Yy4gdG8gYXZvaWQgcGFzc3dvcmQgcmVzZXRzIGlmIHBvc3NpYmxlXG4gICAgICAgIC8vIG1heWJlIHNwZWNpYWwgY2FzZXMgZm9yIGNvbW1vbiBIVE1MIG91dHB1dCBwYXR0ZXJucyAoZS5nLiBqYXZhc2NyaXB0LW9ubHkgQVNQLk5FVCBmb3JtcylcblxuICAgICAgICBsZXQgbWF4U2NvcmUgPSBzdWJtaXRFbGVtZW50c1swXS5zY29yZTtcbiAgICAgICAgbGV0IG1heFNjb3JlRWxlbWVudCA9IHN1Ym1pdEVsZW1lbnRzWzBdLmVsZW1lbnQ7XG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgc3VibWl0RWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChzdWJtaXRFbGVtZW50c1tpXS5zY29yZSA+IG1heFNjb3JlKSB7XG4gICAgICAgICAgICAgICAgbWF4U2NvcmUgPSBzdWJtaXRFbGVtZW50c1tpXS5zY29yZTtcbiAgICAgICAgICAgICAgICBtYXhTY29yZUVsZW1lbnQgPSBzdWJtaXRFbGVtZW50c1tpXS5lbGVtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXhTY29yZUVsZW1lbnQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzY29yZUFkanVzdG1lbnRGb3JNYWdpY1dvcmRzKFxuICAgICAgICBzZW1hbnRpY1ZhbHVlczogc3RyaW5nW10sXG4gICAgICAgIGZhY3RvcjogbnVtYmVyLFxuICAgICAgICBzZW1hbnRpY1doaXRlbGlzdENhY2hlLFxuICAgICAgICBzZW1hbnRpY0JsYWNrbGlzdENhY2hlXG4gICAgKSB7XG4gICAgICAgIC8vVE9ETzo0OiBvdGhlciBsYW5ndWFnZXNcbiAgICAgICAgY29uc3QgZ29vZFdvcmRzID0gW1xuICAgICAgICAgICAgXCJzdWJtaXRcIixcbiAgICAgICAgICAgIFwibG9naW5cIixcbiAgICAgICAgICAgIFwiZW50ZXJcIixcbiAgICAgICAgICAgIFwibG9nIGluXCIsXG4gICAgICAgICAgICBcInNpZ25pblwiLFxuICAgICAgICAgICAgXCJzaWduIGluXCIsXG4gICAgICAgICAgICBcIm5leHRcIixcbiAgICAgICAgICAgIFwiY29udGludWVcIlxuICAgICAgICBdO1xuICAgICAgICBjb25zdCBiYWRXb3JkcyA9IFtcbiAgICAgICAgICAgIFwicmVzZXRcIixcbiAgICAgICAgICAgIFwiY2FuY2VsXCIsXG4gICAgICAgICAgICBcImJhY2tcIixcbiAgICAgICAgICAgIFwiYWJvcnRcIixcbiAgICAgICAgICAgIFwidW5kb1wiLFxuICAgICAgICAgICAgXCJleGl0XCIsXG4gICAgICAgICAgICBcImVtcHR5XCIsXG4gICAgICAgICAgICBcImNsZWFyXCIsXG4gICAgICAgICAgICBcImNhcHRjaGFcIixcbiAgICAgICAgICAgIFwidG90cFwiLFxuICAgICAgICAgICAgXCJmb3Jnb3RcIixcbiAgICAgICAgICAgIFwiZGlzbWlzc1wiLFxuICAgICAgICAgICAgXCJkZWxldGVcIixcbiAgICAgICAgICAgIFwic2hvd1wiLFxuICAgICAgICAgICAgXCJyZXZlYWxcIlxuICAgICAgICBdO1xuICAgICAgICBsZXQgZ29vZFNjb3JlID0gZmFsc2U7XG4gICAgICAgIGxldCBiYWRTY29yZSA9IGZhbHNlO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VtYW50aWNWYWx1ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChnb29kU2NvcmUpIGJyZWFrO1xuICAgICAgICAgICAgaWYgKCFzZW1hbnRpY1ZhbHVlc1tpXSkgY29udGludWU7XG4gICAgICAgICAgICBjb25zdCBzZW1hbnRpY1ZhbHVlID0gc2VtYW50aWNWYWx1ZXNbaV0udHJpbSgpO1xuICAgICAgICAgICAgaWYgKCFzZW1hbnRpY1ZhbHVlKSBjb250aW51ZTtcblxuICAgICAgICAgICAgaWYgKHNlbWFudGljV2hpdGVsaXN0Q2FjaGVbc2VtYW50aWNWYWx1ZV0gPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBnb29kU2NvcmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlbWFudGljV2hpdGVsaXN0Q2FjaGVbc2VtYW50aWNWYWx1ZV0gPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGdvb2RXb3Jkcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIGlmIChzZW1hbnRpY1ZhbHVlLmluZGV4T2YoZ29vZFdvcmRzW2pdKSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGdvb2RTY29yZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHNlbWFudGljV2hpdGVsaXN0Q2FjaGVbc2VtYW50aWNWYWx1ZV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzZW1hbnRpY1doaXRlbGlzdENhY2hlW3NlbWFudGljVmFsdWVdID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VtYW50aWNWYWx1ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChiYWRTY29yZSkgYnJlYWs7XG4gICAgICAgICAgICBpZiAoIXNlbWFudGljVmFsdWVzW2ldKSBjb250aW51ZTtcbiAgICAgICAgICAgIGNvbnN0IHNlbWFudGljVmFsdWUgPSBzZW1hbnRpY1ZhbHVlc1tpXS50cmltKCk7XG4gICAgICAgICAgICBpZiAoIXNlbWFudGljVmFsdWUpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICBpZiAoc2VtYW50aWNCbGFja2xpc3RDYWNoZVtzZW1hbnRpY1ZhbHVlXSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIGJhZFNjb3JlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzZW1hbnRpY0JsYWNrbGlzdENhY2hlW3NlbWFudGljVmFsdWVdID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBiYWRXb3Jkcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIGlmIChzZW1hbnRpY1ZhbHVlLmluZGV4T2YoYmFkV29yZHNbal0pID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgYmFkU2NvcmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBzZW1hbnRpY0JsYWNrbGlzdENhY2hlW3NlbWFudGljVmFsdWVdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2VtYW50aWNCbGFja2xpc3RDYWNoZVtzZW1hbnRpY1ZhbHVlXSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChnb29kU2NvcmUgJiYgYmFkU2NvcmUpIHJldHVybiAwO1xuICAgICAgICBpZiAoYmFkU2NvcmUpIHJldHVybiAtMSAqIGZhY3RvcjtcbiAgICAgICAgaWYgKGdvb2RTY29yZSkgcmV0dXJuIGZhY3RvcjtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjb21tb25BbmNlc3RvckRpc3RhbmNlKG5vZGVBOiBOb2RlLCBub2RlQjogTm9kZSwgZGlzdGFuY2VNYXA6IE1hcDxOb2RlLCBudW1iZXI+KSB7XG4gICAgICAgIGxldCBkaXN0YW5jZSA9IDE7XG4gICAgICAgIGxldCBmb3VuZCA9IGZhbHNlO1xuICAgICAgICBjb25zdCBwZW5kaW5nTWFwOiBBcnJheTxOb2RlPiA9IFtdO1xuICAgICAgICBsZXQgcGVuZGluZ01hcFN0YXJ0RGlzdGFuY2UgPSAwO1xuXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25kLWFzc2lnblxuICAgICAgICB3aGlsZSAoKG5vZGVBID0gbm9kZUEucGFyZW50RWxlbWVudCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlZE5vZGVEaXN0YW5jZSA9IGRpc3RhbmNlTWFwLmdldChub2RlQSk7XG5cbiAgICAgICAgICAgIC8vIElmIHdlIGFscmVhZHkga25vdyBob3cgZmFyIHRoZSBwYXJlbnQgaXMgd2UgY2FuIHJldHVybiBlYXJseSBidXQgd2UgbWF5IGhhdmUgbGVhcm50IGFib3V0IG1vcmUgbm9kZXMgb24gb3VyIHdheVxuICAgICAgICAgICAgaWYgKGNhY2hlZE5vZGVEaXN0YW5jZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZGlzdGFuY2UgKz0gY2FjaGVkTm9kZURpc3RhbmNlO1xuICAgICAgICAgICAgICAgIHBlbmRpbmdNYXBTdGFydERpc3RhbmNlID0gY2FjaGVkTm9kZURpc3RhbmNlICsgMTtcbiAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHdlIGtub3cgd2UgZG9uJ3Qga25vdyBob3cgZmFyIHRoaXMgbm9kZSBpcyBzbyBsZXRzIGltcGxpY2l0bHkgc3RvcmUgaG93IGZhciB3ZSBoYXZlIGdvdCBzbyBmYXJcbiAgICAgICAgICAgIHBlbmRpbmdNYXAucHVzaChub2RlQSk7XG5cbiAgICAgICAgICAgIGlmIChub2RlQS5jb250YWlucyhub2RlQikpIHtcbiAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkaXN0YW5jZSsrO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZvdW5kKSB7XG4gICAgICAgICAgICAvLyBlYWNoIG5vZGUgdGhhdCB3ZSBjYW1lIGFjcm9zcyBvbiBvdXIgam91cm5leSBjYW4gYmUgYXNzaWduZWQgYSB2YWx1ZSBvZiBob3cgZmFyIGl0IGlzIGZyb20gdGhlIGNvbW1vbiBwYXJlbnRcbiAgICAgICAgICAgIGlmIChwZW5kaW5nTWFwLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gcGVuZGluZ01hcFN0YXJ0RGlzdGFuY2U7IGkgPCBkaXN0YW5jZSAmJiBwZW5kaW5nTWFwLmxlbmd0aCA+IDA7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBub2RlID0gcGVuZGluZ01hcC5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2VNYXAuc2V0KG5vZGUsIGkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkaXN0YW5jZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIERpc2Nvbm5lY3RlZCBub2RlIChJIGd1ZXNzIC0gcHJvYmFibHkgd29uJ3QgZXZlciBoYXBwZW4pXG4gICAgICAgICAgICByZXR1cm4gOTAwNzE5OTI1NDc0MDk5MTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFN1Ym1pdCBhIGZvcm1cbiAgICBwcml2YXRlIHN1Ym1pdEZvcm0oZm9ybTogSFRNTEZvcm1FbGVtZW50LCBzdWJtaXRUYXJnZXROZWlnaGJvdXI6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IHN1Ym1pdEVsZW1lbnQgPSB0aGlzLmZpbmRTdWJtaXRCdXR0b24oZm9ybSwgc3VibWl0VGFyZ2V0TmVpZ2hib3VyKTtcblxuICAgICAgICAvLyBBdm9pZCBzZWFyY2hpbmcgZm9yIG1hdGNoaW5nIHBhc3N3b3JkcyB1cG9uIGF1dG8tc3VibWlzc2lvblxuICAgICAgICB0aGlzLmZvcm1TYXZpbmcucmVtb3ZlQWxsU3VibWl0SGFuZGxlcnMoKTtcblxuICAgICAgICAvLyBJZiB3ZSd2ZSBmb3VuZCBhIGJ1dHRvbiB0byBjbGljaywgdXNlIHRoYXQ7IGlmIG5vdCwganVzdCBzdWJtaXQgdGhlIGZvcm0uXG4gICAgICAgIGlmIChzdWJtaXRFbGVtZW50ICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuTG9nZ2VyLmRlYnVnKFxuICAgICAgICAgICAgICAgIFwiU3VibWl0aW5nIHVzaW5nIGVsZW1lbnQ6IFwiICsgKHN1Ym1pdEVsZW1lbnQgYXMgYW55KS5uYW1lICsgXCI6IFwiICsgc3VibWl0RWxlbWVudC5pZFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHN1Ym1pdEVsZW1lbnQuY2xpY2soKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuTG9nZ2VyLmRlYnVnKFwiU3VibWl0aW5nIHVzaW5nIGZvcm1cIik7XG4gICAgICAgICAgICBmb3JtLnN1Ym1pdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9UT0RPOjQ6IG1heWJlIHNvbWV0aGluZyBsaWtlIHRoaXMgbWlnaHQgYmUgdXNlZnVsPyBEdW5ubyB3aHkgYSBjbGljaygpXG4gICAgICAgIC8vIGFib3ZlIHdvdWxkbid0IGJlIHN1ZmZpY2llbnQgYnV0IG1heWJlIHNvbWUgY3VzdG9tIGV2ZW50IHJhaXNpbmcgbWlnaHQgYmUgaGFuZHkuLi5cbiAgICAgICAgLypcbiAgICAgICAgZnVuY3Rpb24gc2ltdWxhdGVDbGljaygpIHtcbiAgICAgICAgdmFyIGV2dCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiTW91c2VFdmVudHNcIik7XG4gICAgICAgIGV2dC5pbml0TW91c2VFdmVudChcImNsaWNrXCIsIHRydWUsIHRydWUsIHdpbmRvdyxcbiAgICAgICAgICAgIDAsIDAsIDAsIDAsIDAsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCAwLCBudWxsKTtcbiAgICAgICAgdmFyIGNiID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjaGVja2JveFwiKTtcbiAgICAgICAgdmFyIGNhbmNlbGVkID0gIWNiLmRpc3BhdGNoRXZlbnQoZXZ0KTtcbiAgICAgICAgaWYoY2FuY2VsZWQpIHtcbiAgICAgICAgICAgIC8vIEEgaGFuZGxlciBjYWxsZWQgcHJldmVudERlZmF1bHRcbiAgICAgICAgICAgIGFsZXJ0KFwiY2FuY2VsZWRcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBOb25lIG9mIHRoZSBoYW5kbGVycyBjYWxsZWQgcHJldmVudERlZmF1bHRcbiAgICAgICAgICAgIGFsZXJ0KFwibm90IGNhbmNlbGVkXCIpO1xuICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgKi9cbiAgICB9XG5cbiAgICBwcml2YXRlIGNhbGN1bGF0ZVJlbGV2YW5jZVNjb3JlKFxuICAgICAgICBlbnRyeTogRW50cnksXG4gICAgICAgIHBhc3N3b3JkRmllbGRzOiBNYXRjaGVkRmllbGRbXSxcbiAgICAgICAgb3RoZXJGaWVsZHM6IE1hdGNoZWRGaWVsZFtdLFxuICAgICAgICBjdXJyZW50UGFnZTogbnVtYmVyLFxuICAgICAgICBmb3JtVmlzaWJsZTogYm9vbGVhbixcbiAgICAgICAgc2NvcmVDb25maWc6IEZpZWxkTWF0Y2hTY29yZUNvbmZpZyxcbiAgICAgICAgdmlzaWJsZUZpZWxkQ2FjaGU6IFZpc2libGVGaWVsZENhY2hlXG4gICAgKSB7XG4gICAgICAgIGxldCBzY29yZSA9IDA7XG4gICAgICAgIGxldCBsb3dGaWVsZE1hdGNoUmF0aW8gPSBmYWxzZTtcblxuICAgICAgICAvLyBLZWUgMy40KyBubyBsb25nZXIgY29uc2lkZXJzIHByaW9yaXR5IG92ZXJyaWRlcyBiZWNhdXNlIHRoZXkgd2VyZVxuICAgICAgICAvLyBjb21wbGljYXRlZCBhbmQgdW5yZWxpYWJsZSBldmVuIHdoZW4gZnVsbHkgdW5kZXJzdG9vZC5cblxuICAgICAgICAvLyBLZWUgMS41KyBubyBsb25nZXIgY29uc2lkZXJzIGFjdGlvbiBVUkxzIGluIHJlbGV2YW5jZSB3ZWlnaHRpbmcuIFNpbmNlIHRoZSBvbmx5XG4gICAgICAgIC8vIGVudHJ5IGVudHJpZXMgb2YgaW50ZXJlc3QgYXJlIGFscmVhZHkgcHJlLW1hdGNoZWQgYnkgS2VlUGFzcywgdGhpcyBzaG91bGQgaGF2ZSBiZWVuXG4gICAgICAgIC8vIGFkZGluZyBuZWdsaWdhYmxlIGFjY3VyYWN5IHRvIHRoZSBmb3JtIG1hdGNoaW5nLlxuXG4gICAgICAgIHNjb3JlICs9IGVudHJ5Lm1hdGNoQWNjdXJhY3k7XG5cbiAgICAgICAgLy8gUHVuaXNoIGJ1dCBkb24ndCBlbnRpcmVseSBleGNsdWRlIG1hdGNoZXMgYWdhaW5zdCBpbnZpc2libGUgZm9ybXNcbiAgICAgICAgLy8gVGhpcyBpcyBpbiBhZGRpdGlvbiB0byB0aGUgbWF4aW11bSBzY29yZSBvZiBpbnZpc2libGUgZmllbGRzIGJlaW5nIGxpbWl0ZWRcbiAgICAgICAgLy8gc28gdGhhdCBmb3JtcyB3aXRoIHNvbWUgdmlzaWJsZSBmaWVsZHMgYnV0IGludmlzaWJsZSB1c2VybmFtZS9wYXNzd29yZFxuICAgICAgICAvLyBmaWVsZHMgKG9yIG91ciBiZXN0IGd1ZXNzIGF0IHRoZW0gYW55d2F5KSBhcmUgY29uc2lkZXJlZCBhIGxlc3MgbGlrZWx5IG1hdGNoXG4gICAgICAgIGlmICghZm9ybVZpc2libGUpIHNjb3JlIC09IDIwO1xuXG4gICAgICAgIC8vIFRoaXMgaXMgc2ltaWxhciB0byBfZmlsbE1hbnlGb3JtRmllbGRzIHNvIG1pZ2h0IGJlIGFibGUgdG8gcmV1c2UgdGhlIHJlc3VsdHMgaW4gZnV0dXJlXG4gICAgICAgIC8vIChidXQgbmVlZCB0byB3YXRjaCBmb3IgY2hhbmdlcyB0aGF0IGludmFsaWRhdGUgdGhlIGVhcmxpZXIgY2FsY3VsYXRpb25zKS5cblxuICAgICAgICAvLyBSZXF1aXJlIGF0IGxlYXN0IGEgdHlwZSBtYXRjaCBmb3IgMi1maWVsZCBmb3JtcyAoZS5nLiB1c2VyL3Bhc3MpOyAxIG1pc3NpbmdcbiAgICAgICAgLy8gbWF0Y2ggZm9yIDMgb3IgNCBmaWVsZCBmb3JtczsgZXRjLlxuICAgICAgICBjb25zdCBtaW5NYXRjaGVkRmllbGRDb3VudFJhdGlvID0gMC41MDE7XG5cbiAgICAgICAgY29uc3QgW290aGVyUmVsZXZhbmNlU2NvcmUsIG90aGVyRmllbGRNYXRjaFN1Y2Nlc3Nlc10gPSB0aGlzLmRldGVybWluZVJlbGV2YW5jZVNjb3JlcyhcbiAgICAgICAgICAgIFwib3RoZXJcIixcbiAgICAgICAgICAgIG90aGVyRmllbGRzLFxuICAgICAgICAgICAgZW50cnkuZmllbGRzLmZpbHRlcihmID0+IGYudHlwZSAhPT0gXCJwYXNzd29yZFwiKSxcbiAgICAgICAgICAgIGN1cnJlbnRQYWdlLFxuICAgICAgICAgICAgc2NvcmVDb25maWcsXG4gICAgICAgICAgICB2aXNpYmxlRmllbGRDYWNoZS5vdGhlclxuICAgICAgICApO1xuICAgICAgICBjb25zdCBbcGFzc3dvcmRSZWxldmFuY2VTY29yZSwgcGFzc3dvcmRGaWVsZE1hdGNoU3VjY2Vzc2VzXSA9IHRoaXMuZGV0ZXJtaW5lUmVsZXZhbmNlU2NvcmVzKFxuICAgICAgICAgICAgXCJwYXNzd29yZFwiLFxuICAgICAgICAgICAgcGFzc3dvcmRGaWVsZHMsXG4gICAgICAgICAgICBlbnRyeS5maWVsZHMuZmlsdGVyKGYgPT4gZi50eXBlID09PSBcInBhc3N3b3JkXCIpLFxuICAgICAgICAgICAgY3VycmVudFBhZ2UsXG4gICAgICAgICAgICBzY29yZUNvbmZpZyxcbiAgICAgICAgICAgIHZpc2libGVGaWVsZENhY2hlLnBhc3N3b3JkXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgdG90YWxSZWxldmFuY2VTY29yZSA9IG90aGVyUmVsZXZhbmNlU2NvcmUgKyBwYXNzd29yZFJlbGV2YW5jZVNjb3JlO1xuXG4gICAgICAgIC8vIE9ubHkgY29uc2lkZXIgZmllbGRzIHRoYXQgY2FuIGV2ZXIgbWF0Y2ggYWJvdmUgdGhlIG1pbmltdW0gKGVzc2VudGlhbGx5XG4gICAgICAgIC8vIGlnbm9yZSBlbXB0eSBmb3JtIG9yIGVudHJ5IGZpZWxkcykuIFdpbGwgdW5kZXJlc3RpbWF0ZSBudW1iZXIgb2YgZm9ybVxuICAgICAgICAvLyBmaWVsZHMsIHJlc3VsdGluZyBpbiBpbmNyZWFzZWQgbWF0Y2ggcmF0aW8gYW5kIGxlc3MgYWNjdXJhdGUgcmVsZXZhbmN5XG4gICAgICAgIC8vIHNjb3JlcyBmb3IgZm9ybXMgdGhhdCBjb250YWluIGEgdXNlcm5hbWUvcGFzc3dvcmQgZmllbGQgd2l0aCBubyBuYW1lXG4gICAgICAgIC8vIG9yIGlkIGF0dHJpYnV0ZXMuIE5vIGlkZWEgaWYgdGhpcyB3aWxsIGNhdXNlIGEgcHJvYmxlbS4gU2VlbXMgdG8uXG4gICAgICAgIC8vIE1pdGlnYXRpbmcgYnkgYWRqdXN0aW5nIG1pbiByZWxldmFuY3kgdmFsdWVzLCBldGMuIHNvIGNhbiByZW1vdmVcbiAgICAgICAgLy8gdGhpcyBjb21tZW50IGluIGEgZmV3IHZlcnNpb25zIGlmIGFsbCBpcyBnb29kLlxuICAgICAgICAvLyB2My41IHN0aWxsIG5vdCBnb29kLiBIYXZlIGZpeGVkIGEgdmlzaWJpbGl0eSBidWcsIHdoaWNoIGV4YWNlcmJhdGVzXG4gICAgICAgIC8vIHNvbWUgb3RoZXIgYnVncy4gV2lsbCB0cnkgaWdub3Jpbmcgbm9uLXRleHQvcGFzc3dvcmQgZmllbGRzIGluIHJhdGlvXG4gICAgICAgIC8vIGNhbGN1bGF0aW9uIGZvciBhdXRvZmlsbCAoY2FuIGV4dGVuZCB0byBmb3JtIHNlbGVjdGlvbiBjYWxjdWxhdGlvbiBsYXRlciBpZiBnb29kKVxuICAgICAgICBjb25zdCBmb3JtRmllbGRDb3VudCA9IHBhc3N3b3JkRmllbGRzXG4gICAgICAgICAgICAuY29uY2F0KG90aGVyRmllbGRzKVxuICAgICAgICAgICAgLmZpbHRlcihmID0+IGYuZmllbGQubG9jYXRvcnNbMF0uaWQgfHwgZi5maWVsZC5sb2NhdG9yc1swXS5uYW1lIHx8IGYuZmllbGQudmFsdWUpXG4gICAgICAgICAgICAubGVuZ3RoO1xuICAgICAgICBjb25zdCBsb2dpbkZpZWxkQ291bnQgPSBlbnRyeS5maWVsZHMuZmlsdGVyKFxuICAgICAgICAgICAgZiA9PiBmLmxvY2F0b3JzWzBdLmlkIHx8IGYubG9jYXRvcnNbMF0ubmFtZSB8fCBmLnZhbHVlXG4gICAgICAgICkubGVuZ3RoO1xuICAgICAgICBjb25zdCBmb3JtRmllbGRDb3VudEZvckF1dG9maWxsID0gcGFzc3dvcmRGaWVsZHNcbiAgICAgICAgICAgIC5jb25jYXQob3RoZXJGaWVsZHMpXG4gICAgICAgICAgICAuZmlsdGVyKFxuICAgICAgICAgICAgICAgIGYgPT5cbiAgICAgICAgICAgICAgICAgICAgKGYuZmllbGQudHlwZSA9PT0gXCJwYXNzd29yZFwiIHx8IGYuZmllbGQudHlwZSA9PT0gXCJ0ZXh0XCIpICYmXG4gICAgICAgICAgICAgICAgICAgIChmLmZpZWxkLmxvY2F0b3JzWzBdLmlkIHx8IGYuZmllbGQubG9jYXRvcnNbMF0ubmFtZSlcbiAgICAgICAgICAgICkubGVuZ3RoO1xuICAgICAgICBjb25zdCBsb2dpbkZpZWxkQ291bnRGb3JBdXRvZmlsbCA9IGVudHJ5LmZpZWxkcy5maWx0ZXIoXG4gICAgICAgICAgICBmID0+XG4gICAgICAgICAgICAgICAgKGYudHlwZSA9PT0gXCJwYXNzd29yZFwiIHx8IGYudHlwZSA9PT0gXCJ0ZXh0XCIpICYmXG4gICAgICAgICAgICAgICAgKGYubG9jYXRvcnNbMF0uaWQgfHwgZi5sb2NhdG9yc1swXS5uYW1lIHx8IGYudmFsdWUpXG4gICAgICAgICkubGVuZ3RoO1xuXG4gICAgICAgIGNvbnN0IGZvcm1NYXRjaGVkRmllbGRDb3VudEZvckF1dG9maWxsID1cbiAgICAgICAgICAgIG90aGVyRmllbGRNYXRjaFN1Y2Nlc3Nlcy5maWx0ZXIocyA9PiBzID09PSB0cnVlKS5sZW5ndGggK1xuICAgICAgICAgICAgcGFzc3dvcmRGaWVsZE1hdGNoU3VjY2Vzc2VzLmZpbHRlcihzID0+IHMgPT09IHRydWUpLmxlbmd0aDtcblxuICAgICAgICBjb25zdCBudW1iZXJPZk5ld1Bhc3N3b3JkRmllbGRzID0gcGFzc3dvcmRGaWVsZHMuZmlsdGVyKGYgPT5cbiAgICAgICAgICAgIGYuZmllbGQubG9jYXRvcnNbMF0uYXV0b2NvbXBsZXRlVmFsdWVzPy5zb21lKHYgPT4gdiA9PT0gXCJuZXctcGFzc3dvcmRcIilcbiAgICAgICAgKS5sZW5ndGg7XG5cbiAgICAgICAgLy8gTGltaXRpbmcgdG8gbnVtYmVyIG9mIGVudHJ5IGZpZWxkcyB3aWxsIHJlZHVjZSBmYWxzZSBwb3NpdGl2ZXMgYnV0XG4gICAgICAgIC8vaW5jcmVhc2UgY2hhbmNlIG9mIGEgdmFsaWQgZm9ybSBiZWluZyBtaXNzZWQuXG4gICAgICAgIC8vIFRvIGhlbHAgd2l0aCBwYXNzd29yZCBjaGFuZ2luZywgd2UgdHJlYXQgYW55IGtub3duIFwibmV3IHBhc3N3b3JkXCIgZmllbGRzIGFzIGFuIGF1dG9tYXRpYyBtYXRjaFxuICAgICAgICBjb25zdCBmaWVsZE1hdGNoUmF0aW9Gb3JBdXRvZmlsbCA9XG4gICAgICAgICAgICBNYXRoLm1pbihcbiAgICAgICAgICAgICAgICBsb2dpbkZpZWxkQ291bnRGb3JBdXRvZmlsbCArIG51bWJlck9mTmV3UGFzc3dvcmRGaWVsZHMsXG4gICAgICAgICAgICAgICAgZm9ybU1hdGNoZWRGaWVsZENvdW50Rm9yQXV0b2ZpbGxcbiAgICAgICAgICAgICkgLyBNYXRoLm1heCgxLCBmb3JtRmllbGRDb3VudEZvckF1dG9maWxsKTtcblxuICAgICAgICB0aGlzLkxvZ2dlci5kZWJ1ZyhcbiAgICAgICAgICAgIFwiZm9ybUZpZWxkQ291bnQ6IFwiICtcbiAgICAgICAgICAgICAgICBmb3JtRmllbGRDb3VudCArXG4gICAgICAgICAgICAgICAgXCIsIGxvZ2luRmllbGRDb3VudDogXCIgK1xuICAgICAgICAgICAgICAgIGxvZ2luRmllbGRDb3VudCArXG4gICAgICAgICAgICAgICAgXCIsIGxvZ2luRmllbGRDb3VudEZvckF1dG9maWxsOiBcIiArXG4gICAgICAgICAgICAgICAgbG9naW5GaWVsZENvdW50Rm9yQXV0b2ZpbGwgK1xuICAgICAgICAgICAgICAgIFwiLCBmb3JtRmllbGRDb3VudEZvckF1dG9maWxsOiBcIiArXG4gICAgICAgICAgICAgICAgZm9ybUZpZWxkQ291bnRGb3JBdXRvZmlsbCArXG4gICAgICAgICAgICAgICAgXCIsIGZvcm1NYXRjaGVkRmllbGRDb3VudEZvckF1dG9maWxsOiBcIiArXG4gICAgICAgICAgICAgICAgZm9ybU1hdGNoZWRGaWVsZENvdW50Rm9yQXV0b2ZpbGwgK1xuICAgICAgICAgICAgICAgIFwiLCBudW1iZXJPZk5ld1Bhc3N3b3JkRmllbGRzOiBcIiArXG4gICAgICAgICAgICAgICAgbnVtYmVyT2ZOZXdQYXNzd29yZEZpZWxkcyArXG4gICAgICAgICAgICAgICAgXCIsIGZpZWxkTWF0Y2hSYXRpbzogXCIgK1xuICAgICAgICAgICAgICAgIGZpZWxkTWF0Y2hSYXRpb0ZvckF1dG9maWxsXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKGZpZWxkTWF0Y2hSYXRpb0ZvckF1dG9maWxsIDwgbWluTWF0Y2hlZEZpZWxkQ291bnRSYXRpbykge1xuICAgICAgICAgICAgdGhpcy5Mb2dnZXIuaW5mbyhcbiAgICAgICAgICAgICAgICBlbnRyeS51dWlkICtcbiAgICAgICAgICAgICAgICAgICAgXCIgd2lsbCBiZSBmb3JjZWQgdG8gbm90IGF1dG8tZmlsbCBiZWNhdXNlIHRoZSBmb3JtIGZpZWxkIG1hdGNoIHJhdGlvIChcIiArXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkTWF0Y2hSYXRpb0ZvckF1dG9maWxsICtcbiAgICAgICAgICAgICAgICAgICAgXCIpIGlzIG5vdCBoaWdoIGVub3VnaC5cIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGxvd0ZpZWxkTWF0Y2hSYXRpbyA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBhdmVyYWdlRmllbGRSZWxldmFuY2UgPVxuICAgICAgICAgICAgdG90YWxSZWxldmFuY2VTY29yZSAvIE1hdGgubWF4KGZvcm1GaWVsZENvdW50LCBsb2dpbkZpZWxkQ291bnQpO1xuICAgICAgICBjb25zdCBhZGp1c3RlZFJlbGV2YW5jZSA9XG4gICAgICAgICAgICBhdmVyYWdlRmllbGRSZWxldmFuY2UgLyAoTWF0aC5hYnMoZm9ybUZpZWxkQ291bnQgLSBsb2dpbkZpZWxkQ291bnQpICsgMSk7XG5cbiAgICAgICAgc2NvcmUgKz0gYWRqdXN0ZWRSZWxldmFuY2U7XG5cbiAgICAgICAgdGhpcy5Mb2dnZXIuaW5mbyhcIlJlbGV2YW5jZSBmb3IgXCIgKyBlbnRyeS51dWlkICsgXCIgaXM6IFwiICsgc2NvcmUpO1xuICAgICAgICByZXR1cm4geyBzY29yZTogc2NvcmUsIGxvd0ZpZWxkTWF0Y2hSYXRpbzogbG93RmllbGRNYXRjaFJhdGlvIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBkZXRlcm1pbmVSZWxldmFuY2VTY29yZXMoXG4gICAgICAgIGRlYnVnTmFtZTogc3RyaW5nLFxuICAgICAgICBtYXRjaGVkRmllbGRzOiBNYXRjaGVkRmllbGRbXSxcbiAgICAgICAgZW50cnlGaWVsZHM6IEZpZWxkW10sXG4gICAgICAgIGN1cnJlbnRQYWdlOiBudW1iZXIsXG4gICAgICAgIHNjb3JlQ29uZmlnOiBGaWVsZE1hdGNoU2NvcmVDb25maWcsXG4gICAgICAgIHZpc2libGVGaWVsZE1hcDogYm9vbGVhbltdXG4gICAgKTogW251bWJlciwgYm9vbGVhbltdXSB7XG4gICAgICAgIGxldCB0b3RhbFJlbGV2YW5jZVNjb3JlID0gMDtcbiAgICAgICAgY29uc3QgbWluRmllbGRSZWxldmFuY2UgPSAxO1xuICAgICAgICBjb25zdCBmaWVsZE1hdGNoU3VjY2Vzc2VzOiBib29sZWFuW10gPSBbXTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1hdGNoZWRGaWVsZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBtb3N0UmVsZXZhbnRTY29yZSA9IDA7XG4gICAgICAgICAgICBjb25zdCBmb3JtRmllbGQgPSBtYXRjaGVkRmllbGRzW2ldLmZpZWxkO1xuXG4gICAgICAgICAgICBpZiAoZm9ybUZpZWxkLmxvY2F0b3JzWzBdLmF1dG9jb21wbGV0ZVZhbHVlcz8uc29tZSh2ID0+IHYgPT09IFwibmV3LXBhc3N3b3JkXCIpKSB7XG4gICAgICAgICAgICAgICAgLy8gUmVjb3JkIGFzIGEgc3VjY2Vzc2Z1bCBtYXRjaCBmb3IgdGhlIHB1cnBvc2VzIG9mIG1hdGNoIHJhdGlvIGNhbGN1bGF0aW9uc1xuICAgICAgICAgICAgICAgIC8vIGlmIHRoaXMgaXMgYSBuZXcgcGFzc3dvcmQgZmllbGQgYXMgcGFydCBvZiBhIGNoYW5nZSBwYXNzd29yZCBmb3JtLiBTbyB3ZVxuICAgICAgICAgICAgICAgIC8vIGRvbid0IGFmZmVjdCB0aGUgc2VsZWN0aW9uIG9mIHRoZSBmb3JtIG9yIGVudHJ5IHRvIGZpbGwgYnV0IHdoZW4gYWxsXG4gICAgICAgICAgICAgICAgLy8gZWxzZSBpcyBlcXVhbCwgd2Ugd2lsbCBoYXZlIGEgaGlnaGVyIGNoYW5jZSBvZiBhdXRvLWZpbGxpbmcgdGhlIGV4aXN0aW5nXG4gICAgICAgICAgICAgICAgLy8gdXNlciBuYW1lIGFuZCBwYXNzd29yZCBmaWVsZHMuXG4gICAgICAgICAgICAgICAgZmllbGRNYXRjaFN1Y2Nlc3Nlc1tpXSA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgZW50cnlGaWVsZHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmbVNjb3JlID0gdGhpcy5jYWxjdWxhdGVGaWVsZE1hdGNoU2NvcmUoXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoZWRGaWVsZHNbaV0sXG4gICAgICAgICAgICAgICAgICAgIGVudHJ5RmllbGRzW2pdLFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50UGFnZSxcbiAgICAgICAgICAgICAgICAgICAgc2NvcmVDb25maWcsXG4gICAgICAgICAgICAgICAgICAgIHZpc2libGVGaWVsZE1hcFtpXVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgdGhpcy5Mb2dnZXIuZGVidWcoXG4gICAgICAgICAgICAgICAgICAgIFwiU3VpdGFiaWxpdHkgb2YgcHV0dGluZyBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z05hbWUgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCIgZmllbGQgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgaiArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIiBpbnRvIGZvcm0gZmllbGQgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgaSArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIiAoaWQ6IFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1GaWVsZC5sb2NhdG9yc1swXS5pZCArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIikgaXMgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgZm1TY29yZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgaWYgKGZtU2NvcmUgPiBtb3N0UmVsZXZhbnRTY29yZSkge1xuICAgICAgICAgICAgICAgICAgICBtb3N0UmVsZXZhbnRTY29yZSA9IGZtU2NvcmU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGZtU2NvcmVGb3JSYXRpbyA9IGZtU2NvcmUgLSAodmlzaWJsZUZpZWxkTWFwW2ldID8gMCA6IDEwKTtcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIChmb3JtRmllbGQudHlwZSA9PT0gXCJ0ZXh0XCIgfHwgZm9ybUZpZWxkLnR5cGUgPT09IFwicGFzc3dvcmRcIikgJiZcbiAgICAgICAgICAgICAgICAgICAgZm1TY29yZUZvclJhdGlvID49IG1pbkZpZWxkUmVsZXZhbmNlICYmXG4gICAgICAgICAgICAgICAgICAgIGVudHJ5RmllbGRzW2pdLnZhbHVlICYmXG4gICAgICAgICAgICAgICAgICAgICFmaWVsZE1hdGNoU3VjY2Vzc2VzW2ldXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkTWF0Y2hTdWNjZXNzZXNbaV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoZWRGaWVsZHNbaV0uaGlnaGVzdFNjb3JlID09IG51bGwgfHxcbiAgICAgICAgICAgICAgICAgICAgZm1TY29yZSA+IG1hdGNoZWRGaWVsZHNbaV0uaGlnaGVzdFNjb3JlXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hdGNoZWRGaWVsZHNbaV0uaGlnaGVzdFNjb3JlID0gZm1TY29yZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0b3RhbFJlbGV2YW5jZVNjb3JlICs9IG1vc3RSZWxldmFudFNjb3JlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbdG90YWxSZWxldmFuY2VTY29yZSwgZmllbGRNYXRjaFN1Y2Nlc3Nlc107XG4gICAgfVxuXG4gICAgcHVibGljIHJlbW92ZUtlZUljb25Gcm9tQWxsRmllbGRzKCkge1xuICAgICAgICB0aGlzLmtlZUZpZWxkSWNvbi5yZW1vdmVLZWVJY29uRnJvbUFsbEZpZWxkcygpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IEZpZWxkIH0gZnJvbSBcIi4uL2NvbW1vbi9tb2RlbC9GaWVsZFwiO1xuXG5leHBvcnQgY2xhc3MgTWF0Y2hlZEZpZWxkIHtcbiAgICBmaWVsZDogRmllbGQ7XG4gICAgRE9NZWxlbWVudDogSFRNTElucHV0RWxlbWVudCB8IEhUTUxTZWxlY3RFbGVtZW50O1xuICAgIGhpZ2hlc3RTY29yZTogbnVtYmVyO1xufVxuIiwiaW1wb3J0IHsgS2VlTG9nZ2VyIH0gZnJvbSBcIi4uL2NvbW1vbi9Mb2dnZXJcIjtcbmltcG9ydCB7IE1hdGNoZWRGaWVsZCB9IGZyb20gXCIuL01hdGNoZWRGaWVsZFwiO1xuaW1wb3J0IHsgRmllbGQgfSBmcm9tIFwiLi4vY29tbW9uL21vZGVsL0ZpZWxkXCI7XG5cbi8qXG4gIFRoaXMgY29udGFpbnMgY29kZSByZWxhdGVkIHRvIHRoZSBtYW5hZ2VtZW50IGFuZCBtYW5pcHVsYXRpb24gb2YgZm9ybXMgYW5kIGZvcm0gZmllbGRzLlxuKi9cblxuZXhwb3J0IGNsYXNzIEZvcm1VdGlscyB7XG4gICAgZmluZExvZ2luT3BzID0gW107XG4gICAgbWF0Y2hSZXN1bHRzID0gW107XG4gICAgTG9nZ2VyOiBLZWVMb2dnZXI7XG5cbiAgICBjb25zdHJ1Y3Rvcihsb2dnZXI6IEtlZUxvZ2dlcikge1xuICAgICAgICB0aGlzLkxvZ2dlciA9IGxvZ2dlcjtcbiAgICB9XG5cbiAgICBjb3VudEFsbERvY3VtZW50cyhmcmFtZTogV2luZG93KSB7XG4gICAgICAgIGlmICghdGhpcy5pc1VyaVdlQ2FuRmlsbChmcmFtZS5sb2NhdGlvbikpIHJldHVybiAwO1xuXG4gICAgICAgIGxldCBsb2NhbERvY0NvdW50ID0gMTtcblxuICAgICAgICBpZiAoZnJhbWUuZnJhbWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGZyYW1lcyA9IGZyYW1lLmZyYW1lcztcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZnJhbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxEb2NDb3VudCArPSB0aGlzLmNvdW50QWxsRG9jdW1lbnRzKGZyYW1lc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxvY2FsRG9jQ291bnQ7XG4gICAgfVxuXG4gICAgaXNVcmlXZUNhbkZpbGwodXJpKSB7XG4gICAgICAgIGlmICh1cmkucHJvdG9jb2wgPT0gXCJodHRwOlwiIHx8IHVyaS5wcm90b2NvbCA9PSBcImh0dHBzOlwiIHx8IHVyaS5wcm90b2NvbCA9PSBcImZpbGU6XCIpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpc0FUZXh0Rm9ybUZpZWxkVHlwZSh0eXBlKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHR5cGUgPT0gXCJjaGVja2JveFwiIHx8XG4gICAgICAgICAgICB0eXBlID09IFwic2VsZWN0LW9uZVwiIHx8XG4gICAgICAgICAgICB0eXBlID09IFwicmFkaW9cIiB8fFxuICAgICAgICAgICAgdHlwZSA9PSBcInBhc3N3b3JkXCIgfHxcbiAgICAgICAgICAgIHR5cGUgPT0gXCJoaWRkZW5cIiB8fFxuICAgICAgICAgICAgdHlwZSA9PSBcInN1Ym1pdFwiIHx8XG4gICAgICAgICAgICB0eXBlID09IFwiYnV0dG9uXCIgfHxcbiAgICAgICAgICAgIHR5cGUgPT0gXCJmaWxlXCIgfHxcbiAgICAgICAgICAgIHR5cGUgPT0gXCJpbWFnZVwiIHx8XG4gICAgICAgICAgICB0eXBlID09IFwicmVzZXRcIlxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHByaXZhdGUgaXNBS25vd25Vc2VybmFtZVN0cmluZyhmaWVsZE5hbWVJbikge1xuICAgICAgICBjb25zdCBmaWVsZE5hbWUgPSBmaWVsZE5hbWVJbi50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICBmaWVsZE5hbWUgPT0gXCJ1c2VybmFtZVwiIHx8XG4gICAgICAgICAgICBmaWVsZE5hbWUgPT0gXCJqX3VzZXJuYW1lXCIgfHxcbiAgICAgICAgICAgIGZpZWxkTmFtZSA9PSBcInVzZXJfbmFtZVwiIHx8XG4gICAgICAgICAgICBmaWVsZE5hbWUgPT0gXCJ1c2VyXCIgfHxcbiAgICAgICAgICAgIGZpZWxkTmFtZSA9PSBcInVzZXItbmFtZVwiIHx8XG4gICAgICAgICAgICBmaWVsZE5hbWUgPT0gXCJsb2dpblwiIHx8XG4gICAgICAgICAgICBmaWVsZE5hbWUgPT0gXCJ2Yl9sb2dpbl91c2VybmFtZVwiIHx8XG4gICAgICAgICAgICBmaWVsZE5hbWUgPT0gXCJuYW1lXCIgfHxcbiAgICAgICAgICAgIGZpZWxkTmFtZSA9PSBcInVzZXIgbmFtZVwiIHx8XG4gICAgICAgICAgICBmaWVsZE5hbWUgPT0gXCJ1c2VyIGlkXCIgfHxcbiAgICAgICAgICAgIGZpZWxkTmFtZSA9PSBcInVzZXItaWRcIiB8fFxuICAgICAgICAgICAgZmllbGROYW1lID09IFwidXNlcmlkXCIgfHxcbiAgICAgICAgICAgIGZpZWxkTmFtZSA9PSBcImVtYWlsXCIgfHxcbiAgICAgICAgICAgIGZpZWxkTmFtZSA9PSBcImUtbWFpbFwiIHx8XG4gICAgICAgICAgICBmaWVsZE5hbWUgPT0gXCJpZFwiIHx8XG4gICAgICAgICAgICBmaWVsZE5hbWUgPT0gXCJmb3JtX2xvZ2lubmFtZVwiIHx8XG4gICAgICAgICAgICBmaWVsZE5hbWUgPT0gXCJ3cG5hbWVcIiB8fFxuICAgICAgICAgICAgZmllbGROYW1lID09IFwibWFpbFwiIHx8XG4gICAgICAgICAgICBmaWVsZE5hbWUgPT0gXCJsb2dpbmlkXCIgfHxcbiAgICAgICAgICAgIGZpZWxkTmFtZSA9PSBcImxvZ2luIGlkXCIgfHxcbiAgICAgICAgICAgIGZpZWxkTmFtZSA9PSBcImxvZ2luX25hbWVcIiB8fFxuICAgICAgICAgICAgZmllbGROYW1lID09IFwib3BlbmlkX2lkZW50aWZpZXJcIiB8fFxuICAgICAgICAgICAgZmllbGROYW1lID09IFwiYXV0aGVudGljYXRpb25fZW1haWxcIiB8fFxuICAgICAgICAgICAgZmllbGROYW1lID09IFwib3BlbmlkXCIgfHxcbiAgICAgICAgICAgIGZpZWxkTmFtZSA9PSBcImF1dGhfZW1haWxcIiB8fFxuICAgICAgICAgICAgZmllbGROYW1lID09IFwiYXV0aF9pZFwiIHx8XG4gICAgICAgICAgICBmaWVsZE5hbWUgPT0gXCJhdXRoZW50aWNhdGlvbl9pZGVudGlmaWVyXCIgfHxcbiAgICAgICAgICAgIGZpZWxkTmFtZSA9PSBcImF1dGhlbnRpY2F0aW9uX2lkXCIgfHxcbiAgICAgICAgICAgIGZpZWxkTmFtZSA9PSBcImN1c3RvbWVyX251bWJlclwiIHx8XG4gICAgICAgICAgICBmaWVsZE5hbWUgPT0gXCJjdXN0b21lcm51bWJlclwiIHx8XG4gICAgICAgICAgICBmaWVsZE5hbWUgPT0gXCJvbmxpbmVpZFwiXG4gICAgICAgICkge1xuICAgICAgICAgICAgLy8gZXRjLiBldGMuXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLypcbiAgICAgKiBnZXRGb3JtRmllbGRzXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIHRoZSB1c2VybmFtZUluZGV4IGFuZCBwYXNzd29yZCBmaWVsZHMgZm91bmQgaW4gdGhlIGZvcm0uXG4gICAgICogQ2FuIGhhbmRsZSBjb21wbGV4IGZvcm1zIGJ5IHRyeWluZyB0byBmaWd1cmUgb3V0IHdoYXQgdGhlXG4gICAgICogcmVsZXZhbnQgZmllbGRzIGFyZS5cbiAgICAgKlxuICAgICAqIFJldHVybnM6IFt1c2VybmFtZUluZGV4LCBwYXNzd29yZHMsIC4uLl1cbiAgICAgKiBhbGwgYXJyYXlzIGFyZSBzdGFuZGFyZCBqYXZhc2NyaXB0IGFycmF5c1xuICAgICAqIHVzZXJuYW1lRmllbGQgbWF5IGJlIG51bGwuXG4gICAgICovXG4gICAgcHVibGljIGdldEZvcm1GaWVsZHMoZm9ybSwgaXNTdWJtaXNzaW9uOiBib29sZWFuLCBtYXhpbXVtRmllbGRDb3VudDogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IHB3RmllbGRzOiBNYXRjaGVkRmllbGRbXSA9IFtdO1xuICAgICAgICBjb25zdCBvdGhlckZpZWxkczogTWF0Y2hlZEZpZWxkW10gPSBbXTtcbiAgICAgICAgY29uc3QgYWxsRmllbGRzOiB7XG4gICAgICAgICAgICBpbmRleDogbnVtYmVyO1xuICAgICAgICAgICAgZWxlbWVudDogTWF0Y2hlZEZpZWxkO1xuICAgICAgICAgICAgdHlwZTogc3RyaW5nO1xuICAgICAgICB9W10gPSBbXTtcbiAgICAgICAgbGV0IGZpcnN0UGFzc3dvcmRJbmRleCA9IC0xO1xuICAgICAgICBsZXQgZmlyc3RQb3NzaWJsZVVzZXJuYW1lSW5kZXggPSAtMTtcbiAgICAgICAgbGV0IHVzZXJuYW1lSW5kZXggPSAtMTtcblxuICAgICAgICAvLyBzZWFyY2ggdGhlIERPTSBmb3IgYW55IGZvcm0gZmllbGRzIHdlIG1pZ2h0IGJlIGludGVyZXN0ZWQgaW5cbiAgICAgICAgY29uc3QgdG90YWxFbGVtZW50cyA9IGZvcm0uZWxlbWVudHMubGVuZ3RoO1xuICAgICAgICBjb25zdCBlbGVtZW50TGltaXQgPSB0b3RhbEVsZW1lbnRzIDwgMjAwMCA/IHRvdGFsRWxlbWVudHMgOiAyMDAwO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVsZW1lbnRMaW1pdDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoYWxsRmllbGRzLmxlbmd0aCA+IG1heGltdW1GaWVsZENvdW50KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVG9vIG1hbnkgZmllbGRzXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGZvcm0uZWxlbWVudHNbaV0ubG9jYWxOYW1lLnRvTG93ZXJDYXNlKCkgPT0gXCJvYmplY3RcIiB8fFxuICAgICAgICAgICAgICAgIGZvcm0uZWxlbWVudHNbaV0ubG9jYWxOYW1lLnRvTG93ZXJDYXNlKCkgPT0gXCJrZXlnZW5cIiB8fFxuICAgICAgICAgICAgICAgIGZvcm0uZWxlbWVudHNbaV0ubG9jYWxOYW1lLnRvTG93ZXJDYXNlKCkgPT0gXCJvdXRwdXRcIiB8fFxuICAgICAgICAgICAgICAgIChmb3JtLmVsZW1lbnRzW2ldLmxvY2FsTmFtZS50b0xvd2VyQ2FzZSgpICE9IFwiaW5wdXRcIiAmJlxuICAgICAgICAgICAgICAgICAgICAoZm9ybS5lbGVtZW50c1tpXS50eXBlID09IHVuZGVmaW5lZCB8fCBmb3JtLmVsZW1lbnRzW2ldLnR5cGUgPT0gbnVsbCkpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTsgLy8gbWF5YmUgaXQncyBzb21ldGhpbmcgdW4taW50ZXJlc3RpbmdcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgZG9tVHlwZTogc3RyaW5nID0gZm9ybS5lbGVtZW50c1tpXS50eXBlLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgICAgIGlmIChkb21UeXBlID09IFwiZmllbGRzZXRcIikgY29udGludWU7IC8vIG5vdCBpbnRlcmVzdGVkIGluIGZpZWxkc2V0c1xuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgZG9tVHlwZSAhPSBcInBhc3N3b3JkXCIgJiZcbiAgICAgICAgICAgICAgICAhdGhpcy5pc0FUZXh0Rm9ybUZpZWxkVHlwZShkb21UeXBlKSAmJlxuICAgICAgICAgICAgICAgIGRvbVR5cGUgIT0gXCJjaGVja2JveFwiICYmXG4gICAgICAgICAgICAgICAgZG9tVHlwZSAhPSBcInJhZGlvXCIgJiZcbiAgICAgICAgICAgICAgICBkb21UeXBlICE9IFwic2VsZWN0LW9uZVwiXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTsgLy8gaWdub3Jpbmcgb3RoZXIgZm9ybSB0eXBlc1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZG9tVHlwZSA9PSBcInJhZGlvXCIgJiYgaXNTdWJtaXNzaW9uICYmIGZvcm0uZWxlbWVudHNbaV0uY2hlY2tlZCA9PSBmYWxzZSkgY29udGludWU7XG4gICAgICAgICAgICBpZiAoZG9tVHlwZSA9PSBcInBhc3N3b3JkXCIgJiYgaXNTdWJtaXNzaW9uICYmICFmb3JtLmVsZW1lbnRzW2ldLnZhbHVlKSBjb250aW51ZTtcbiAgICAgICAgICAgIGlmIChkb21UeXBlID09IFwic2VsZWN0LW9uZVwiICYmIGlzU3VibWlzc2lvbiAmJiAhZm9ybS5lbGVtZW50c1tpXS52YWx1ZSkgY29udGludWU7XG5cbiAgICAgICAgICAgIHRoaXMuTG9nZ2VyLmRlYnVnKGBwcm9jZXNzaW5nIGZpZWxkIHdpdGggZG9tdHlwZSAke2RvbVR5cGV9Li4uYCk7XG4gICAgICAgICAgICBhbGxGaWVsZHNbYWxsRmllbGRzLmxlbmd0aF0gPSB7XG4gICAgICAgICAgICAgICAgaW5kZXg6IGksXG4gICAgICAgICAgICAgICAgZWxlbWVudDogbmV3IE1hdGNoZWRGaWVsZCgpLFxuICAgICAgICAgICAgICAgIHR5cGU6IGRvbVR5cGVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBsZXQgZmllbGRWYWx1ZSA9IGZvcm0uZWxlbWVudHNbaV0udmFsdWU7XG4gICAgICAgICAgICBpZiAoZG9tVHlwZSA9PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZm9ybS5lbGVtZW50c1tpXS5jaGVja2VkKSBmaWVsZFZhbHVlID0gXCJLRUVGT1hfQ0hFQ0tFRF9GTEFHX1RSVUVcIjtcbiAgICAgICAgICAgICAgICBlbHNlIGZpZWxkVmFsdWUgPSBcIktFRUZPWF9DSEVDS0VEX0ZMQUdfRkFMU0VcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGZpZWxkID0gRmllbGQuZnJvbURPTShmb3JtLmVsZW1lbnRzW2ldLCBkb21UeXBlLCBmaWVsZFZhbHVlKTtcbiAgICAgICAgICAgIGFsbEZpZWxkc1thbGxGaWVsZHMubGVuZ3RoIC0gMV0uZWxlbWVudC5maWVsZCA9IGZpZWxkO1xuICAgICAgICAgICAgYWxsRmllbGRzW2FsbEZpZWxkcy5sZW5ndGggLSAxXS5lbGVtZW50LkRPTWVsZW1lbnQgPSBmb3JtLmVsZW1lbnRzW2ldO1xuXG4gICAgICAgICAgICBpZiAoZG9tVHlwZSA9PSBcInBhc3N3b3JkXCIgJiYgZmlyc3RQYXNzd29yZEluZGV4ID09IC0xKSB7XG4gICAgICAgICAgICAgICAgZmlyc3RQYXNzd29yZEluZGV4ID0gYWxsRmllbGRzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICB0aGlzLmlzQVRleHRGb3JtRmllbGRUeXBlKGRvbVR5cGUpICYmXG4gICAgICAgICAgICAgICAgZmlyc3RQb3NzaWJsZVVzZXJuYW1lSW5kZXggPT0gLTEgJiZcbiAgICAgICAgICAgICAgICAodGhpcy5pc0FLbm93blVzZXJuYW1lU3RyaW5nKGZvcm0uZWxlbWVudHNbaV0ubmFtZSkgfHxcbiAgICAgICAgICAgICAgICAgICAgZmllbGQubG9jYXRvcnNbMF0ubGFiZWxzPy5zb21lKGxhYmVsID0+IHRoaXMuaXNBS25vd25Vc2VybmFtZVN0cmluZyhsYWJlbCkpKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgZmlyc3RQb3NzaWJsZVVzZXJuYW1lSW5kZXggPSBhbGxGaWVsZHMubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGZvcm0uZWxlbWVudHNbaV0ua2VlSW5pdGlhbERldGVjdGVkVmFsdWUgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGZvcm0uZWxlbWVudHNbaV0ua2VlSW5pdGlhbERldGVjdGVkVmFsdWUgPSBmaWVsZFZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gV29yayBvdXQgd2hpY2ggRE9NIGZvcm0gZWxlbWVudCBpcyBtb3N0IGxpa2VseSB0byBiZSB0aGUgdXNlcm5hbWUgZmllbGQuXG4gICAgICAgIC8vIFRoaXMgaW5mb3JtYXRpb24gaXMgb25seSB1c2VkIHRvIGRpc3BsYXkgdGhlIHVzZXJuYW1lIHRvIHRoZSB1c2VyIHNvIGFuIGluYWNjdXJhdGVcbiAgICAgICAgLy8gY2hvaWNlIHdvbid0IGltcGFjdCB0aGUgZm9ybSBkZXRlY3Rpb24gb3IgZmlsbGluZyBiZWhhdmlvdXIuXG4gICAgICAgIC8vVE9ETzo0OiBFeHRlbmQgdGhpcyB0byBpbnNwZWN0IG1vcmUgdGhhbiBqdXN0IHRoZSBuYW1lIG9mIHRoZSBmaWVsZC4gRS5nLiBtYXggbGVuZ3RoP1xuICAgICAgICAvL1RPRE86NDogRm9yIGZvcm0gZmlsbGluZyAobm90IHN1Ym1pdHRpbmcpIHdlIG1pZ2h0IHdhbnQgdG8gc2VsZWN0IGJhc2VkIHVwb24gZm91bmQgZGF0YSBpbiBLZWVQYXNzP1xuICAgICAgICBpZiAoZmlyc3RQb3NzaWJsZVVzZXJuYW1lSW5kZXggIT0gLTEpIHVzZXJuYW1lSW5kZXggPSBmaXJzdFBvc3NpYmxlVXNlcm5hbWVJbmRleDtcbiAgICAgICAgZWxzZSBpZiAoZmlyc3RQYXNzd29yZEluZGV4ID4gMCkgdXNlcm5hbWVJbmRleCA9IGZpcnN0UGFzc3dvcmRJbmRleCAtIDE7XG4gICAgICAgIHRoaXMuTG9nZ2VyLmRlYnVnKFwidXNlcm5hbWVJbmRleDogXCIgKyB1c2VybmFtZUluZGV4KTtcblxuICAgICAgICBsZXQgb3RoZXJDb3VudCA9IDA7XG4gICAgICAgIGxldCBhY3R1YWxVc2VybmFtZUluZGV4ID0gMDtcblxuICAgICAgICAvLyBzZXBhcmF0ZSB0aGUgZmllbGQgZGF0YSBpbnRvIGFwcHJvcHJpYXRlIHZhcmlhYmxlc1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFsbEZpZWxkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGFsbEZpZWxkc1tpXS50eXBlID09IFwicGFzc3dvcmRcIikgcHdGaWVsZHNbcHdGaWVsZHMubGVuZ3RoXSA9IGFsbEZpZWxkc1tpXS5lbGVtZW50O1xuICAgICAgICAgICAgZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgdGhpcy5pc0FUZXh0Rm9ybUZpZWxkVHlwZShhbGxGaWVsZHNbaV0udHlwZSkgfHxcbiAgICAgICAgICAgICAgICBhbGxGaWVsZHNbaV0udHlwZSA9PSBcImNoZWNrYm94XCIgfHxcbiAgICAgICAgICAgICAgICBhbGxGaWVsZHNbaV0udHlwZSA9PSBcInJhZGlvXCIgfHxcbiAgICAgICAgICAgICAgICBhbGxGaWVsZHNbaV0udHlwZSA9PSBcInNlbGVjdC1vbmVcIlxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgb3RoZXJGaWVsZHNbb3RoZXJGaWVsZHMubGVuZ3RoXSA9IGFsbEZpZWxkc1tpXS5lbGVtZW50O1xuICAgICAgICAgICAgICAgIGlmIChpID09IHVzZXJuYW1lSW5kZXgpIGFjdHVhbFVzZXJuYW1lSW5kZXggPSBvdGhlckNvdW50O1xuICAgICAgICAgICAgICAgIGVsc2Ugb3RoZXJDb3VudCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5Mb2dnZXIuZGVidWcoXCJhY3R1YWxVc2VybmFtZUluZGV4OiBcIiArIGFjdHVhbFVzZXJuYW1lSW5kZXgpO1xuICAgICAgICB0aGlzLkxvZ2dlci5kZWJ1ZyhcIm90aGVyRmllbGRzLmxlbmd0aDpcIiArIG90aGVyRmllbGRzLmxlbmd0aCk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFjdHVhbFVzZXJuYW1lSW5kZXgsXG4gICAgICAgICAgICBwd0ZpZWxkcyxcbiAgICAgICAgICAgIG90aGVyRmllbGRzXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gQSBiYXNpYywgc2xpZ2h0bHkgZmxhd2VkIGJ1dCBmYXN0IHZpc2liaWxpdHkgdGVzdFxuICAgIHB1YmxpYyBpc0RPTUVsZW1lbnRWaXNpYmxlKGVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGlmICghZWxlbWVudC5vZmZzZXRQYXJlbnQgJiYgZWxlbWVudC5vZmZzZXRIZWlnaHQgPT09IDAgJiYgZWxlbWVudC5vZmZzZXRXaWR0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIC8vIHVzZWQgZm9yIG11bHRpcGFnZSBzdHVmZiB0aGF0IHdlIG1pZ2h0IG5vdCBiZSBhYmxlIHRvIHN1cHBvcnQgeWV0IGluIHdlYmV4dGVuc2lvbnNcbiAgICAvLyByZXNldEZvcm1GaWxsU2Vzc2lvbiAoKSB7XG4gICAgLy8gICAgIGlmIChyZXNldEZvcm1GaWxsVGltZXIgIT0gbnVsbCkge1xuICAgIC8vICAgICAgICAgY2xlYXJUaW1lb3V0KHJlc2V0Rm9ybUZpbGxUaW1lcik7XG4gICAgLy8gICAgICAgICByZXNldEZvcm1GaWxsVGltZXIgPSBudWxsO1xuICAgIC8vICAgICB9XG4gICAgLy8gICAgIHRhYlN0YXRlLmN1cnJlbnRQYWdlID0gMDtcbiAgICAvLyAgICAgdGFiU3RhdGUubWF4aW11bVBhZ2UgPSAwO1xuICAgIC8vICAgICB0YWJTdGF0ZS5mb3JjZUF1dG9TdWJtaXQgPSBudWxsO1xuICAgIC8vICAgICB0YWJTdGF0ZS51c2VyUmVjZW50bHlEZW1hbmRlZEF1dG9TdWJtaXQgPSBmYWxzZTtcbiAgICAvLyAgICAgTG9nZ2VyLmRlYnVnKFwiUmVzZXQgZm9ybS1maWxsaW5nIHNlc3Npb24gKHBhZ2UgPSAwIGFuZCBjYW5jZWxsZWQgYW55IGZvcmNlZCBhdXRvc3VibWl0KS5cIik7XG4gICAgLy8gfTtcbiAgICAvL3ZhciByZXNldEZvcm1GaWxsVGltZXIgPSBudWxsO1xufVxuIiwiaW1wb3J0IHsgRm9ybVV0aWxzIH0gZnJvbSBcIi4vZm9ybXNVdGlsc1wiO1xuaW1wb3J0IHsgTWF0Y2hSZXN1bHQgfSBmcm9tIFwiLi9NYXRjaFJlc3VsdFwiO1xuaW1wb3J0IHsgRmlsbGVkRmllbGQgfSBmcm9tIFwiLi9GaWxsZWRGaWVsZFwiO1xuaW1wb3J0IHsgS2VlTG9nZ2VyIH0gZnJvbSBcIi4uL2NvbW1vbi9Mb2dnZXJcIjtcbmltcG9ydCB7IGNvbmZpZ01hbmFnZXIgfSBmcm9tIFwiLi4vY29tbW9uL0NvbmZpZ01hbmFnZXJcIjtcbmltcG9ydCB7IEFkZG9uTWVzc2FnZSB9IGZyb20gXCIuLi9jb21tb24vQWRkb25NZXNzYWdlXCI7XG5pbXBvcnQgeyBNYXRjaGVkRmllbGQgfSBmcm9tIFwiLi9NYXRjaGVkRmllbGRcIjtcbmltcG9ydCB7IEZpZWxkIH0gZnJvbSBcIi4uL2NvbW1vbi9tb2RlbC9GaWVsZFwiO1xuXG5kZWNsYXJlIGNvbnN0IHB1bnljb2RlO1xuXG5pbnRlcmZhY2UgU3VibWl0SGFuZGxlckF0dGFjaG1lbnQge1xuICAgIHRhcmdldDogSFRNTEVsZW1lbnQ7XG4gICAgaGFuZGxlcjogKGU6IEV2ZW50KSA9PiB2b2lkO1xuICAgIGZvcm06IEhUTUxGb3JtRWxlbWVudDtcbn1cblxuZXhwb3J0IGNsYXNzIEZvcm1TYXZpbmcge1xuICAgIHByaXZhdGUgTG9nZ2VyOiBLZWVMb2dnZXI7XG4gICAgcHJpdmF0ZSBmb3JtVXRpbHM6IEZvcm1VdGlscztcbiAgICBwcml2YXRlIFN1Ym1pdEhhbmRsZXJBdHRhY2htZW50czogU3VibWl0SGFuZGxlckF0dGFjaG1lbnRbXSA9IFtdO1xuICAgIHByaXZhdGUgbWF0Y2hSZXN1bHQ6IE1hdGNoUmVzdWx0OyAvL1RPRE86NDogTWF5IGJlIG92ZXJraWxsIHRvIGhhdmUgYWxsIHRoaXMgZGF0YSBhdmFpbGFibGUgZm9yIHNhdmluZ1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBteVBvcnQ6IGJyb3dzZXIucnVudGltZS5Qb3J0LCBsb2dnZXI6IEtlZUxvZ2dlciwgZm9ybVV0aWxzOiBGb3JtVXRpbHMpIHtcbiAgICAgICAgdGhpcy5Mb2dnZXIgPSBsb2dnZXI7XG4gICAgICAgIHRoaXMuZm9ybVV0aWxzID0gZm9ybVV0aWxzO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGRTdWJtaXRIYW5kbGVyKHRhcmdldDogSFRNTEVsZW1lbnQsIGZvcm1Ub1N1Ym1pdDogSFRNTEZvcm1FbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IGhhbmRsZXIgPSAoZTogRXZlbnQpID0+IHRoaXMuc3VibWl0SGFuZGxlcihlLCBmb3JtVG9TdWJtaXQpO1xuICAgICAgICB0aGlzLlN1Ym1pdEhhbmRsZXJBdHRhY2htZW50cy5wdXNoKHtcbiAgICAgICAgICAgIHRhcmdldDogdGFyZ2V0LFxuICAgICAgICAgICAgZm9ybTogZm9ybVRvU3VibWl0LFxuICAgICAgICAgICAgaGFuZGxlcjogaGFuZGxlclxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHRhcmdldCkgdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVyKTtcbiAgICAgICAgZm9ybVRvU3VibWl0LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlcik7XG4gICAgfVxuXG4gICAgcHVibGljIHJlbW92ZUFsbFN1Ym1pdEhhbmRsZXJzKCkge1xuICAgICAgICB0aGlzLlN1Ym1pdEhhbmRsZXJBdHRhY2htZW50cy5mb3JFYWNoKGF0dGFjaG1lbnQgPT4ge1xuICAgICAgICAgICAgaWYgKGF0dGFjaG1lbnQudGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgYXR0YWNobWVudC50YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGF0dGFjaG1lbnQuaGFuZGxlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhdHRhY2htZW50LmZvcm0ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBhdHRhY2htZW50LmhhbmRsZXIpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5TdWJtaXRIYW5kbGVyQXR0YWNobWVudHMgPSBbXTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdXBkYXRlTWF0Y2hSZXN1bHQobWF0Y2hSZXN1bHQ6IE1hdGNoUmVzdWx0KSB7XG4gICAgICAgIHRoaXMubWF0Y2hSZXN1bHQgPSBtYXRjaFJlc3VsdDtcbiAgICB9XG5cbiAgICAvLyBUaGlzIHdvbid0IGFsd2F5cyBiZSBjYWxsZWQgYmVmb3JlIGFsbCBldmVudCBoYW5kbGVycyBvbiB0aGUgd2ViIHBhZ2Ugc28gb25cbiAgICAvLyBzb21lIHNpdGVzIHdlIHdpbGwgc3RvcmUgaW52YWxpZCBkYXRhIChpbiBjYXNlcyB3aGVyZSB0aGUgbG9naW4gc2NyaXB0c1xuICAgIC8vIG1hbmdsZSB0aGUgY29udGVudHMgb2YgdGhlIGZpZWxkcyBiZWZvcmUgc3VibWl0dGluZyB0aGVtKS5cbiAgICAvL1RPRE86NDogUG9zc2libHkgY291bGQgc2xpZ2h0bHkgcmVkdWNlIGluY2lkZW5jZSBvZiB0aGlzIHByb2JsZW0gYnkgbGlzdGVuaW5nXG4gICAgLy8gdG8gZXZlcnkgY2xpY2sgb24gdGhlIGRvY3VtZW50IGJvZHkgb3IgdHJhY2tpbmcgYWxsIGlucHV0IGV2ZW50cyBidXQgcGVyZm9ybWFuY2U/XG4gICAgcHJpdmF0ZSBzdWJtaXRIYW5kbGVyKF9lOiBFdmVudCwgZm9ybTogSFRNTEZvcm1FbGVtZW50KSB7XG4gICAgICAgIHRoaXMuTG9nZ2VyLmRlYnVnKFwic3VibWl0SGFuZGxlciBjYWxsZWRcIik7XG5cbiAgICAgICAgLy8gVW50aWwgdGhlIG5leHQgdGltZSB3ZSBoYXZlIHNlYXJjaGVkIGZvciBmb3JtcyBpbiB0aGlzIHBhZ2UsXG4gICAgICAgIC8vIGRvbid0IHJlc3BvbmQgdG8gYW55IGZvcm0gc3VibWlzc2lvbiByZWxhdGVkIGV2ZW50c1xuICAgICAgICB0aGlzLnJlbW92ZUFsbFN1Ym1pdEhhbmRsZXJzKCk7XG5cbiAgICAgICAgY29uc3QgZG9jID0gZm9ybS5vd25lckRvY3VtZW50O1xuICAgICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKGRvYy5VUkwpO1xuICAgICAgICB1cmwuaG9zdG5hbWUgPSBwdW55Y29kZS50b1VuaWNvZGUodXJsLmhvc3RuYW1lKTtcblxuICAgICAgICBjb25zdCBjb25mID0gY29uZmlnTWFuYWdlci5zaXRlQ29uZmlnRm9yKHVybC5ocmVmKTtcbiAgICAgICAgaWYgKGNvbmYucHJldmVudFNhdmVOb3RpZmljYXRpb24pIHJldHVybjtcblxuICAgICAgICBsZXQgaXNQYXNzd29yZENoYW5nZUZvcm0gPSBmYWxzZTtcbiAgICAgICAgbGV0IGlzUmVnaXN0cmF0aW9uRm9ybSA9IGZhbHNlO1xuXG4gICAgICAgIC8vIEdldCB0aGUgYXBwcm9wcmlhdGUgZmllbGRzIGZyb20gdGhlIGZvcm0uXG4gICAgICAgIGNvbnN0IHBhc3N3b3JkRmllbGRzOiBNYXRjaGVkRmllbGRbXSA9IFtdO1xuICAgICAgICBsZXQgc2NhblJlc3VsdDoge1xuICAgICAgICAgICAgb3RoZXJGaWVsZHM6IE1hdGNoZWRGaWVsZFtdO1xuICAgICAgICAgICAgYWN0dWFsVXNlcm5hbWVJbmRleD86IG51bWJlcjtcbiAgICAgICAgICAgIHB3RmllbGRzPzogTWF0Y2hlZEZpZWxkW107XG4gICAgICAgIH07XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzY2FuUmVzdWx0ID0gdGhpcy5mb3JtVXRpbHMuZ2V0Rm9ybUZpZWxkcyhmb3JtLCB0cnVlLCA1MCk7XG4gICAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICB0aGlzLkxvZ2dlci53YXJuKFwiTG9zdCBpbnRlcmVzdCBpbiB0aGlzIGZvcm0gYWZ0ZXIgZmluZGluZyB0b28gbWFueSBmaWVsZHNcIiArIGV4KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB1c2VybmFtZUluZGV4ID0gc2NhblJlc3VsdC5hY3R1YWxVc2VybmFtZUluZGV4O1xuICAgICAgICBjb25zdCBwYXNzd29yZHMgPSBzY2FuUmVzdWx0LnB3RmllbGRzO1xuICAgICAgICBjb25zdCBvdGhlckZpZWxkcyA9IHNjYW5SZXN1bHQub3RoZXJGaWVsZHM7XG5cbiAgICAgICAgaWYgKHBhc3N3b3Jkcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAvLyBjb3VsZCBiZSBwYXNzd29yZCBjaGFuZ2UgZm9ybSBvciBtdWx0aS1wYXNzd29yZCBsb2dpbiBmb3JtIG9yIHNpZ24gdXAgZm9ybVxuICAgICAgICAgICAgLy8gbmFpdmUgZHVwbGljYXRlIGZpbmRlciAtIG1vcmUgdGhhbiBzdWZmaWNpZW50IGZvciB0aGUgbnVtYmVyIG9mIHBhc3N3b3JkcyBwZXIgZG9tYWluXG4gICAgICAgICAgICBsZXQgdHdvUGFzc3dvcmRzTWF0Y2hJbmRleCA9IC0xO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXNzd29yZHMubGVuZ3RoICYmIHR3b1Bhc3N3b3Jkc01hdGNoSW5kZXggPT0gLTE7IGkrKykge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSBpICsgMTsgaiA8IHBhc3N3b3Jkcy5sZW5ndGggJiYgdHdvUGFzc3dvcmRzTWF0Y2hJbmRleCA9PSAtMTsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXNzd29yZHNbal0uZmllbGQudmFsdWUgPT0gcGFzc3dvcmRzW2ldLmZpZWxkLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0d29QYXNzd29yZHNNYXRjaEluZGV4ID0gajtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHR3b1Bhc3N3b3Jkc01hdGNoSW5kZXggPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAvLyBlaXRoZXIgbWlzLXR5cGVkIHBhc3N3b3JkIGNoYW5nZSBmb3JtLCBzaW5nbGUgcGFzc3dvcmQgY2hhbmdlIGJveCBmb3JtIG9yIG11bHRpLXBhc3N3b3JkIGxvZ2luL3NpZ251cCwgYXNzdW1pbmcgbGF0dGVyLlxuICAgICAgICAgICAgICAgIHRoaXMuTG9nZ2VyLmRlYnVnKFwibXVsdGlwbGUgcGFzc3dvcmRzIGZvdW5kICh3aXRoIG5vIGlkZW50aWNhbCB2YWx1ZXMpXCIpO1xuXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXNzd29yZHMubGVuZ3RoOyBpKyspIHBhc3N3b3JkRmllbGRzLnB1c2gocGFzc3dvcmRzW2ldKTtcblxuICAgICAgICAgICAgICAgIC8vVE9ETzo0OiB0cnkgdG8gZGlzdGluZ3Vpc2ggYmV0d2VlbiBtdWx0aS1wYXNzd29yZCBsb2dpbi9zaWdudXAgYW5kIHR5cG8uIG1heWJlOiBpZiB1c2VybmFtZSBleGlzdHMgYW5kIG1hdGNoZXMgZXhpc3RpbmcgcGFzc3dvcmQgaXQgaXMgYSB0eXBvLCBlbHNlIG11bHRpLXBhc3N3b3JkXG4gICAgICAgICAgICAgICAgLy9yZXR1cm47XG4gICAgICAgICAgICB9IC8vIGl0J3MgcHJvYmFibHkgYSBwYXNzd29yZCBjaGFuZ2UgZm9ybSwgYnV0IG1heSBiZSBhIHNpZ24tdXAgZm9ybVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gd2UgbmVlZCB0byBpZ25vcmUgYW55IGZpZWxkcyB0aGF0IHdlcmUgcHJlc2VudGVkIHRvIHRoZVxuICAgICAgICAgICAgICAgIC8vIHVzZXIgYXMgZWl0aGVyIFwib2xkIHBhc3N3b3JkXCIgb3IgXCJyZXR5cGUgbmV3IHBhc3N3b3JkXCJcblxuICAgICAgICAgICAgICAgIHRoaXMuTG9nZ2VyLmRlYnVnKFxuICAgICAgICAgICAgICAgICAgICBcIkxvb2tzIGxpa2UgYSBwYXNzd29yZCBjaGFuZ2UgZm9ybSBvciBuZXcgcmVnaXN0cmF0aW9uIGZvcm0gaGFzIGJlZW4gc3VibWl0dGVkXCJcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIC8vIHRoZXJlIG1heSBiZSBtb3JlIHRoYW4gb25lIHBhaXIgb2YgbWF0Y2hlcyAtIHRob3VnaCwgd2UncmUgcGx1Y2tpbmcgZm9yIHRoZSBmaXJzdCBvbmVcbiAgICAgICAgICAgICAgICAvLyB3ZSBrbm93IHRoZSBpbmRleCBvZiBvbmUgbWF0Y2hpbmcgcGFzc3dvcmRcblxuICAgICAgICAgICAgICAgIC8vIGlmIHRoZXJlIGFyZSBvbmx5IHR3byBwYXNzd29yZHMgd2UgYWxyZWFkeSBrbm93IHRoYXQgdGhleSBtYXRjaFxuICAgICAgICAgICAgICAgIGlmIChwYXNzd29yZHMubGVuZ3RoID09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmRGaWVsZHMucHVzaChwYXNzd29yZHNbMF0pO1xuICAgICAgICAgICAgICAgICAgICAvL1RPRE86NDogaXQgaXMgYWxzbyByZWFzb25hYmx5IGxpa2VseSB0aGF0IHRoaXMgaW5kaWNhdGVzIGFcbiAgICAgICAgICAgICAgICAgICAgLy8gc2lnbi11cCBmb3JtIHJhdGhlciB0aGFuIGEgcGFzc3dvcmQgY2hhbmdlIGZvcm0uIGRlY2lkZVxuICAgICAgICAgICAgICAgICAgICAvLyB3aGljaCBoZXJlIGFuZCBmbGFnIHdoaWNoIG9uZSBpdCBpcy4gZm9yIG5vdywgd2UganVzdCBhc3N1bWVcbiAgICAgICAgICAgICAgICAgICAgLy8gaXQncyBhIHNpZ24tdXAgZm9ybSBiZWN1YXNlIHRoYXQgaXMgbW9yZSB1c2VmdWwgZm9yIHRoZSB1c2VyIGluIG1hbnkgY2FzZXNcbiAgICAgICAgICAgICAgICAgICAgaXNQYXNzd29yZENoYW5nZUZvcm0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgaXNSZWdpc3RyYXRpb25Gb3JtID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBIZXJlIHdlIGFzc3VtZSB0aGF0IGFueSBmb3JtIHdpdGggMyBwYXNzd29yZHMgb24gaXRcbiAgICAgICAgICAgICAgICAgICAgLy8gaXMgbXVjaCBtb3JlIGxpa2VseSB0byBiZSBhIGNoYW5nZSBwYXNzd29yZCBmb3JtIHRoYW5cbiAgICAgICAgICAgICAgICAgICAgLy8gYSBzaWduLXVwIGZvcm0gKG9idmlvdXNseSB0aGVyZSB3aWxsIGJlIGV4Y2VwdGlvbnMgYnV0XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgaXMgdGhlIGJlc3Qgd2UgY2FuIGRvIGZvciBub3cpXG4gICAgICAgICAgICAgICAgICAgIC8vIEJVVDogaGF2ZSBub3QgeWV0IGltcGxlbWVudGVkIHJlbGlhYmxlIHBhc3N3b3JkIGNoYW5nZSBmZWF0dXJlLi4uXG4gICAgICAgICAgICAgICAgICAgIGlzUGFzc3dvcmRDaGFuZ2VGb3JtID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGlzUmVnaXN0cmF0aW9uRm9ybSA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkRmllbGRzLnB1c2gocGFzc3dvcmRzW3R3b1Bhc3N3b3Jkc01hdGNoSW5kZXhdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAocGFzc3dvcmRzICE9IG51bGwgJiYgcGFzc3dvcmRzWzBdICE9IG51bGwgJiYgcGFzc3dvcmRzWzBdICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcGFzc3dvcmRGaWVsZHMucHVzaChwYXNzd29yZHNbMF0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIGF0IHRoaXMgcG9pbnQsIGF0IGxlYXN0IG9uZSBwYXNzd29yZEZpZWxkIGhhcyBiZWVuIGNob3NlbiBhbmQgYW5cbiAgICAgICAgLy8gb2xkUGFzc3dvcmRGaWVsZCBoYXMgYmVlbiBjaG9zZW4gaWYgYXBwbGljYWJsZS5cbiAgICAgICAgLy8gd2UgaGF2ZSBhbHNvIGRldGVybWluZWQgd2hldGhlciB0aGlzIGZvcm0gZmlsbCBpcyBsaWtlbHkgdG9cbiAgICAgICAgLy8gYmUgYSBuZXcgcmVnaXN0cmF0aW9uIGZvcm0gb3IgcGFzc3dvcmQgY2hhbmdlIGZvcm1cblxuICAgICAgICBjb25zdCBub25FbXB0eVBhc3N3b3JkRmllbGRzID0gdGhpcy5yZW1vdmVFbXB0eUZpZWxkcyhwYXNzd29yZEZpZWxkcyk7XG4gICAgICAgIGNvbnN0IG5vbkVtcHR5T3RoZXJGaWVsZHMgPSB0aGlzLnJlbW92ZUVtcHR5RmllbGRzKG90aGVyRmllbGRzKTtcblxuICAgICAgICAvLyBGaW5kIHRoZSBmaXJzdCBmaWxsZWQgcGFzc3dvcmQgdGhhdCBpcyBub3QgYmVpbmcgc3VibWl0dGVkIG9yIGhhcyBhIGNoYW5nZWQgdmFsdWVcbiAgICAgICAgY29uc3QgZGlmZmVyZW50UGFzc3dvcmQgPVxuICAgICAgICAgICAgIXRoaXMubWF0Y2hSZXN1bHQgfHxcbiAgICAgICAgICAgICF0aGlzLm1hdGNoUmVzdWx0Lmxhc3RGaWxsZWRQYXNzd29yZHMgfHxcbiAgICAgICAgICAgIHRoaXMuaGFzRmllbGRCZWVuTW9kaWZpZWQobm9uRW1wdHlQYXNzd29yZEZpZWxkcywgdGhpcy5tYXRjaFJlc3VsdC5sYXN0RmlsbGVkUGFzc3dvcmRzKTtcblxuICAgICAgICAvLyBGaW5kIHRoZSBmaXJzdCBmaWxsZWQgb3RoZXIgZmllbGQgdGhhdCBpcyBub3QgYmVpbmcgc3VibWl0dGVkIG9yIGhhcyBhIGNoYW5nZWQgdmFsdWVcbiAgICAgICAgY29uc3QgZGlmZmVyZW50T3RoZXIgPVxuICAgICAgICAgICAgIXRoaXMubWF0Y2hSZXN1bHQgfHxcbiAgICAgICAgICAgICF0aGlzLm1hdGNoUmVzdWx0Lmxhc3RGaWxsZWRPdGhlciB8fFxuICAgICAgICAgICAgdGhpcy5oYXNGaWVsZEJlZW5Nb2RpZmllZChub25FbXB0eU90aGVyRmllbGRzLCB0aGlzLm1hdGNoUmVzdWx0Lmxhc3RGaWxsZWRPdGhlcik7XG5cbiAgICAgICAgaWYgKGRpZmZlcmVudFBhc3N3b3JkIHx8IGRpZmZlcmVudE90aGVyKSB7XG4gICAgICAgICAgICBjb25zdCBzdWJtaXR0ZWREYXRhID0ge1xuICAgICAgICAgICAgICAgIHVybDogdXJsLmhyZWYsXG4gICAgICAgICAgICAgICAgZmllbGRzOiBGaWVsZC5jb21iaW5lRG9tRmllbGRMaXN0cyhcbiAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWVJbmRleCxcbiAgICAgICAgICAgICAgICAgICAgbm9uRW1wdHlPdGhlckZpZWxkcy5tYXAoZiA9PiBmLmZpZWxkKSxcbiAgICAgICAgICAgICAgICAgICAgbm9uRW1wdHlQYXNzd29yZEZpZWxkcy5tYXAoZiA9PiBmLmZpZWxkKVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgdGl0bGU6IGRvYy50aXRsZSB8fCB1cmwuaG9zdG5hbWUsXG4gICAgICAgICAgICAgICAgaXNQYXNzd29yZENoYW5nZUZvcm0sXG4gICAgICAgICAgICAgICAgaXNSZWdpc3RyYXRpb25Gb3JtXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLm15UG9ydC5wb3N0TWVzc2FnZSh7IHN1Ym1pdHRlZERhdGEgfSBhcyBBZGRvbk1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW1vdmVFbXB0eUZpZWxkcyhmaWVsZHM6IE1hdGNoZWRGaWVsZFtdKSB7XG4gICAgICAgIHJldHVybiBmaWVsZHMuZmlsdGVyKGYgPT4gZi5maWVsZC52YWx1ZSB8fCBmLmZpZWxkLnR5cGUgPT09IFwiYm9vbGVhblwiKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhc0ZpZWxkQmVlbk1vZGlmaWVkKFxuICAgICAgICBuZXdseVN1Ym1pdHRlZEZpZWxkczogTWF0Y2hlZEZpZWxkW10sXG4gICAgICAgIHByZXZpb3VzbHlGaWxsZWRGaWVsZHM6IEZpbGxlZEZpZWxkW11cbiAgICApIHtcbiAgICAgICAgcmV0dXJuICEhcHJldmlvdXNseUZpbGxlZEZpZWxkcy5maW5kKGZpbGxlZEZpZWxkID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN1Ym1pdHRlZEZpZWxkID0gbmV3bHlTdWJtaXR0ZWRGaWVsZHMuZmluZChcbiAgICAgICAgICAgICAgICBmID0+IGZpbGxlZEZpZWxkLkRPTWVsZW1lbnQgPT0gZi5ET01lbGVtZW50XG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAvLyBJZiB3ZSBoYXZlbid0IHN1Ym1pdHRlZCB0aGUgc2FtZSBET00gZWxlbWVudCB3ZSBmaWxsZWQgaW5cbiAgICAgICAgICAgIGlmICghc3VibWl0dGVkRmllbGQpIHJldHVybiB0cnVlO1xuXG4gICAgICAgICAgICBpZiAoc3VibWl0dGVkRmllbGQuZmllbGQudmFsdWUgIT0gZmlsbGVkRmllbGQudmFsdWUpIHJldHVybiB0cnVlO1xuXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFBhbmVsU3R1YiwgUGFuZWxTdHViT3B0aW9ucyB9IGZyb20gXCIuL1BhbmVsU3R1YlwiO1xuXG4vL2NvbnN0IHBhbmVsT3B0aW9ucyA9IFBhbmVsU3R1Yk9wdGlvbnMuR2VuZXJhdGVQYXNzd29yZExlZ2FjeTtcbmNvbnN0IHBhbmVsT3B0aW9ucyA9IFBhbmVsU3R1Yk9wdGlvbnMuR2VuZXJhdGVQYXNzd29yZDtcblxuZXhwb3J0IGNsYXNzIFBhc3N3b3JkR2VuZXJhdG9yIHtcbiAgICBwdWJsaWMgZ2VuZXJhdGVQYXNzd29yZFBhbmVsU3R1YjogUGFuZWxTdHViO1xuICAgIHByaXZhdGUgZ2VuZXJhdGVQYXNzd29yZFBhbmVsU3R1YlJhZjogbnVtYmVyO1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBwYXJlbnRGcmFtZUlkOiBudW1iZXIpIHt9XG5cbiAgICBwdWJsaWMgY3JlYXRlR2VuZXJhdGVQYXNzd29yZFBhbmVsKCkge1xuICAgICAgICB0aGlzLmNsb3NlR2VuZXJhdGVQYXNzd29yZFBhbmVsKCk7XG4gICAgICAgIHRoaXMuZ2VuZXJhdGVQYXNzd29yZFBhbmVsU3R1YiA9IG5ldyBQYW5lbFN0dWIocGFuZWxPcHRpb25zLCBudWxsLCB0aGlzLnBhcmVudEZyYW1lSWQpO1xuICAgICAgICB0aGlzLmdlbmVyYXRlUGFzc3dvcmRQYW5lbFN0dWIuY3JlYXRlUGFuZWwoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY3JlYXRlR2VuZXJhdGVQYXNzd29yZFBhbmVsTmVhck5vZGUodGFyZ2V0OiBIVE1MRWxlbWVudCkge1xuICAgICAgICB0aGlzLmNsb3NlR2VuZXJhdGVQYXNzd29yZFBhbmVsKCk7XG4gICAgICAgIHRoaXMuZ2VuZXJhdGVQYXNzd29yZFBhbmVsU3R1YiA9IG5ldyBQYW5lbFN0dWIocGFuZWxPcHRpb25zLCB0YXJnZXQsIHRoaXMucGFyZW50RnJhbWVJZCk7XG4gICAgICAgIHRoaXMuZ2VuZXJhdGVQYXNzd29yZFBhbmVsU3R1Yi5jcmVhdGVQYW5lbCgpO1xuICAgICAgICB0aGlzLmdlbmVyYXRlUGFzc3dvcmRQYW5lbFN0dWJSYWYgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT5cbiAgICAgICAgICAgIHRoaXMudXBkYXRlR2VuZXJhdGVQYXNzd29yZFBhbmVsUG9zaXRpb24oKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBjbG9zZUdlbmVyYXRlUGFzc3dvcmRQYW5lbCgpIHtcbiAgICAgICAgaWYgKHRoaXMuZ2VuZXJhdGVQYXNzd29yZFBhbmVsU3R1YikgdGhpcy5nZW5lcmF0ZVBhc3N3b3JkUGFuZWxTdHViLmNsb3NlUGFuZWwoKTtcbiAgICAgICAgdGhpcy5nZW5lcmF0ZVBhc3N3b3JkUGFuZWxTdHViID0gbnVsbDtcbiAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5nZW5lcmF0ZVBhc3N3b3JkUGFuZWxTdHViUmFmKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdXBkYXRlR2VuZXJhdGVQYXNzd29yZFBhbmVsUG9zaXRpb24oKSB7XG4gICAgICAgIHRoaXMuZ2VuZXJhdGVQYXNzd29yZFBhbmVsU3R1Yi51cGRhdGVCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgdGhpcy5nZW5lcmF0ZVBhc3N3b3JkUGFuZWxTdHViUmFmID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUdlbmVyYXRlUGFzc3dvcmRQYW5lbFBvc2l0aW9uKClcbiAgICAgICAgKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBNdXRhdGlvblR5cGUgfSBmcm9tIFwicGluaWFcIjtcbmltcG9ydCB7IEtlZUxvZyB9IGZyb20gXCJ+L2NvbW1vbi9Mb2dnZXJcIjtcbmltcG9ydCB7IGRlZXBFcXVhbCB9IGZyb20gXCJ+L2NvbW1vbi91dGlsc1wiO1xuaW1wb3J0IHsgS2VlU3RvcmUgfSBmcm9tIFwiLlwiO1xuaW1wb3J0IHsgS2VlU3RhdGUgfSBmcm9tIFwiLi9LZWVTdGF0ZVwiO1xuaW1wb3J0IHsgTXV0YXRpb24sIE11dGF0aW9uUGF5bG9hZCB9IGZyb20gXCIuL3N5bmNCYWNrZ3JvdW5kXCI7XG5cbmV4cG9ydCBjbGFzcyBTeW5jQ29udGVudCB7XG4gICAgcHJpdmF0ZSBzdG9yZTogS2VlU3RvcmU7XG4gICAgaW5pdGlhbGl6ZWQ6IGJvb2xlYW47XG4gICAgcmVjZWl2ZWRQYXlsb2FkczogTXV0YXRpb25QYXlsb2FkW107XG4gICAgcGVuZGluZ011dGF0aW9uczogTXV0YXRpb25bXTtcbiAgICBwcml2YXRlIHNlbmRNdXRhdGlvblBheWxvYWQ6IChtdXRhdGlvbjogTXV0YXRpb25QYXlsb2FkKSA9PiB2b2lkO1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucmVjZWl2ZWRQYXlsb2FkcyA9IFtdO1xuICAgICAgICB0aGlzLmluaXRpYWxpemVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucGVuZGluZ011dGF0aW9ucyA9IFtdO1xuICAgIH1cblxuICAgIGluaXQoc3RvcmU6IEtlZVN0b3JlLCBpbml0aWFsU3RhdGU6IEtlZVN0YXRlLCBzZW5kTXV0YXRpb246IChtdXRhdGlvbjogTXV0YXRpb25QYXlsb2FkKSA9PiB2b2lkLCB2dWVNb3VudD8pIHtcbiAgICAgICAgdGhpcy5zdG9yZSA9IHN0b3JlO1xuICAgICAgICB0aGlzLnN0b3JlLiRzdWJzY3JpYmUobXV0YXRpb24gPT4ge1xuICAgICAgICAgICAgaWYgKG11dGF0aW9uLnR5cGUgPT0gTXV0YXRpb25UeXBlLnBhdGNoT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVMb2NhbGx5R2VuZXJhdGVkTXV0YXRpb24obXV0YXRpb24pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlBpbmlhIGdlbmVyYXRlZCBhIG5vbi1vYmplY3QgbXV0YXRpb24uIFdlIGRvbid0IHRoaW5rIHdlIGNhbiBzdXBwb3J0IHRoaXMgYW5kIG5lZWQgdG8ga25vdyB0aGF0IGl0IGlzIHBvc3NpYmxlIGZvciBpdCB0byBoYXBwZW4hIFRlbGwgdXMgbm93IG9yIHdlaXJkIHRoaW5ncyB3aWxsIGhhcHBlbi5cIik7XG4gICAgICAgICAgICAgICAgfSAvLyAnZGlyZWN0JyB8ICdwYXRjaCBvYmplY3QnIHwgJ3BhdGNoIGZ1bmN0aW9uJ1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zZW5kTXV0YXRpb25QYXlsb2FkID0gc2VuZE11dGF0aW9uO1xuXG4gICAgICAgIHRoaXMuc3RvcmUuJHBhdGNoKGluaXRpYWxTdGF0ZSk7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLnByb2Nlc3NQZW5kaW5nTG9jYWxseVNvdXJjZWRNdXRhdGlvbnMoKTtcblxuICAgICAgICBpZiAodnVlTW91bnQpIHZ1ZU1vdW50KCk7XG4gICAgICAgIC8vIG1vdmUgc3RvcmUgc3Vic2NyaXB0aW9uIGFuZCBpbml0aWFsIHN0YXRlIHBhdGNoIHRvIGhlcmUsIGFmdGVyIGNyZWF0aW5nIGl0IGFuZCByZXR1cm5pbmcgZnJvbSB2dWV3SW5pdCgpXG4gICAgICAgIC8vIHdpbGwgbWVhbiBzbG93ZXIgaW5pdGlhbCBzdXBwb3J0IGZvciByZWNlaXZpbmcgbXV0YXRpb25zLi4uIHdoaWNoIGlzIGZ1Y2tlZD8gY29zIHdlIG1heSB3aWxsIGRlY2lkZSB0byBzZW5kIHRoZW0gYmVmb3JlIGJhY2tncm91bmQgaGFzIHJlc3BvbmRlZCB3aXRoIHRoZSBzdG9yZSBpbml0aWFsIHN0YXRlLlxuICAgICAgICAvLyBTb21lIHdheSB0byB1c2UgYSB0ZW1wb3Jhcnkgc3RvcmUgb24gYSB0ZW1wb3JhcnkgcGluaWEgaW5zdGFuY2Ugb24gYSB0ZW1wb3JhcnkgdnVlIGluc3RhbmNlP1xuICAgICAgICAvLyBDYW4gYWRkIHRvIHBlbmRpbmdNdXRhdGlvbnMgbm8gbWF0dGVyIHdoaWNoIHN0b3JlIGl0IGlzIGZyb21cbiAgICAgICAgLy8gY291bGQgZ2V0IHJlbW90ZW11dGF0aW9ucyBiZWZvcmUgd2UgYXJlIHJlYWR5IGJ1dCBtYXliZSBPSyB0byBqdXN0IGlnbm9yZSB0aGVtIGxpa2Ugd2UgZG8gY3VycmVudGx5LlxuICAgICAgICAvLyBTbywgdGhlcmVmb3JlIHdlIGhhdmUgdG8gaW5pdGlhbGlzZSB2dWUgYmVmb3JlIHdlIGhhdmUgaGVhcmQgYmFjayB3aGF0IHRoZSBpbml0aWFsIHN0b3JlIHN0YXRlIHNob3VsZCBiZS4gbWlnaHQganVzdCB3b3JrIGJ1dCBtYXliZSBuZWVkIHRvIGFkZCBhIFwibG9hZGluZ1wiIHN0YXR1cyB0byBWdWVcbiAgICAgICAgLy9pbnRpYWlsbHksIG9yIG1heWJlIHdlIGNhbiBnZXQgYXdheSB3aXRob3V0IGNhbGxpbmcgbW91bnQoKSB1bnRpbCBhZnRlciB0aGUgc3RhdGUgaGFzIGJlZW4gcmVjZWl2ZWQuXG4gICAgICAgIC8vIENvdWxkIHdvcmsuLi4gc28gdGhlbiB3ZSBkb24ndCBuZWVkIHRvIHN1cHBseSB0aGUgc3RvcmUgb3Igc3RhdGUgYmVmb3JlIHRoZSBzdG9yZSBjYW4gYmUgaW5pdGlhbGlhc2VkIHVzaW5nIHRoZSBuZXcgdnVlIGluc3RhbmNlLlxuICAgIH1cblxuICAgIHJlc2V0KG5ld1N0YXRlOiBLZWVTdGF0ZSkge1xuICAgICAgICB0aGlzLnN0b3JlLiRwYXRjaChuZXdTdGF0ZSk7XG4gICAgfVxuXG4gICAgcHVibGljIG9uUmVtb3RlTXV0YXRpb25QYXlsb2FkKHBheWxvYWQ6IE11dGF0aW9uUGF5bG9hZCkge1xuICAgICAgICBpZiAoIXRoaXMuaW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIEtlZUxvZy53YXJuKFwicHJvY2Vzc2luZyBwYXlsb2FkOiBcIiArIEpTT04uc3RyaW5naWZ5KHBheWxvYWQpKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlZFBheWxvYWRzLnB1c2gocGF5bG9hZCk7XG4gICAgICAgIHRoaXMuc3RvcmUuJHBhdGNoKHBheWxvYWQpO1xuICAgIH1cblxuICAgIGhhbmRsZUxvY2FsbHlHZW5lcmF0ZWRNdXRhdGlvbihtdXRhdGlvbjogTXV0YXRpb24pIHtcbiAgICAgICAgaWYgKCF0aGlzLmluaXRpYWxpemVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wZW5kaW5nTXV0YXRpb25zLnB1c2gobXV0YXRpb24pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLnJlY2VpdmVkUGF5bG9hZHMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZW5kTXV0YXRpb25QYXlsb2FkKG11dGF0aW9uLnBheWxvYWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgaXQncyByZWNlaXZlZCBtdXRhdGlvbiwgaWYgaXQncyBqdXN0IGlnbm9yZSBpdCwgaWYgbm90IHNlbmQgdG8gYmFja2dyb3VuZFxuICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5yZWNlaXZlZFBheWxvYWRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgZGVlcEVxdWFsKHRoaXMucmVjZWl2ZWRQYXlsb2Fkc1tpXSwgbXV0YXRpb24ucGF5bG9hZClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIEtlZUxvZy5kZWJ1ZyhcInBheWxvYWQgaXMgZGVlcGVxdWFsXCIpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVjZWl2ZWRQYXlsb2Fkcy5zcGxpY2UoaSwgMSk7XG5cbiAgICAgICAgICAgICAgICAvLyBNdWx0aXBsZSBtdXRhdGlvbnMgY2FuIGJlIGluIHRoZSByZWNlaXZlZCBxdWV1ZSBzbyB3ZSBoYXZlIHRvIGJyZWFrLFxuICAgICAgICAgICAgICAgIC8vIG90aGVyd2lzZSBkdXBsaWNhdGUgcmVjZWl2ZWQgbXV0YXRpb25zIHdpbGwgcmVzdWx0IGluIHNvbWUgYmVpbmcgc2VudFxuICAgICAgICAgICAgICAgIC8vIHRvIHRoZSBiYWNrZ3JvdW5kIHRocmVhZCwgbGVhZGluZyB0byBhbiBpbmZpbml0ZSBsb29wLlxuICAgICAgICAgICAgICAgIC8vIFRoZSBleGFjdCBtZWNoYW5pc20gYnkgd2hpY2ggdGhpcyBjYW4gaGFwcGVuIGlzIHVuY2xlYXIgYW5kIGl0XG4gICAgICAgICAgICAgICAgLy8gbWF5IGJlIGEgYnVnIG9yIG11dGFibGUgaW1wbGVtZW50YXRpb24gZGV0YWlsIG9mIFZ1ZVguIEkgaHlwb3RoZXNpc2VcbiAgICAgICAgICAgICAgICAvLyB0aGF0IG11bHRpcGxlIG11dGF0aW9ucyBhcnJpdmluZyBpbiBhIHNob3J0IHBlcmlvZCBvZiB0aW1lIGNhbiBnZXRcbiAgICAgICAgICAgICAgICAvLyBiYXRjaGVkIHRvZ2V0aGVyIGluIGEgd2F5IHRoYXQgYWxsb3dzIG11bHRpcGxlIGhvb2tzIHRvIHF1ZXVlIHVwXG4gICAgICAgICAgICAgICAgLy8gYmVmb3JlIGJlaW5nIGludm9rZWQuIFRodXMgdGhlIGZpcnN0IHRpbWUgdGhhdCB0aGlzIGxvb3AgaXMgY3JlYXRlZFxuICAgICAgICAgICAgICAgIC8vIGl0IHNldHMgdXAgYSBoaWdoZXIgY2hhbmNlIHRoYXQgdGhlIGxvb3Agd2lsbCByZXBlYXQgYWdhaW4sIHVudGlsXG4gICAgICAgICAgICAgICAgLy8gc3VjaCB0aW1lIGFzIHRoZSBiYXRjaGluZyBiZWhhdmlvdXIgaXMgYWxsIGJ1dCBndWFyYW50ZWVkIGFuZCB0aGVcbiAgICAgICAgICAgICAgICAvLyBsb29wIGNhbiBuZXZlciBlbmQuXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGkgPT0gMCkge1xuICAgICAgICAgICAgICAgIEtlZUxvZy5kZWJ1ZyhcInBheWxvYWQgaXMgbm90IGRlZXBlcXVhbCB0byBhbnkgcmVtb3RlbHkgcmVjZWl2ZWQgcGF5bG9hZCBzbyB3aWxsIHNlbmRcIik7XG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kTXV0YXRpb25QYXlsb2FkKG11dGF0aW9uLnBheWxvYWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJvY2Vzc1BlbmRpbmdMb2NhbGx5U291cmNlZE11dGF0aW9ucygpIHtcbiAgICAgICAgaWYgKCF0aGlzLnBlbmRpbmdNdXRhdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucGVuZGluZ011dGF0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5zZW5kTXV0YXRpb25QYXlsb2FkKHRoaXMucGVuZGluZ011dGF0aW9uc1tpXS5wYXlsb2FkKTtcbiAgICAgICAgICAgIHRoaXMucGVuZGluZ011dGF0aW9ucy5zcGxpY2UoaSwgMSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBBZGRvbk1lc3NhZ2UgfSBmcm9tIFwiLi9BZGRvbk1lc3NhZ2VcIjtcbmltcG9ydCB7IFZhdWx0TWVzc2FnZSB9IGZyb20gXCIuL1ZhdWx0TWVzc2FnZVwiO1xuXG5jbGFzcyBDb250ZW50UG9ydE1hbmFnZXIge1xuICAgIHByaXZhdGUgcG9ydDogYnJvd3Nlci5ydW50aW1lLlBvcnQ7XG5cbiAgICAvLyBwdWJsaWMgbWl4aW4gPSB7XG4gICAgLy8gICAgIG1ldGhvZHM6IHtcbiAgICAvLyAgICAgICAgIHBvc3RNZXNzYWdlOiBtc2cgPT4ge1xuICAgIC8vICAgICAgICAgICAgIHRoaXMucG9ydC5wb3N0TWVzc2FnZShtc2cpO1xuICAgIC8vICAgICAgICAgfVxuICAgIC8vICAgICB9XG4gICAgLy8gfTtcblxuICAgIHB1YmxpYyBwb3N0TWVzc2FnZShtc2c6IEFkZG9uTWVzc2FnZSB8IFZhdWx0TWVzc2FnZSkge1xuICAgICAgICB0aGlzLnBvcnQucG9zdE1lc3NhZ2UobXNnKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhcnR1cChuYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5wb3J0ID0gYnJvd3Nlci5ydW50aW1lLmNvbm5lY3QoeyBuYW1lIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBzaHV0ZG93bigpIHtcbiAgICAgICAgdGhpcy5wb3J0ID0gbnVsbDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0IHJhdygpOiBicm93c2VyLnJ1bnRpbWUuUG9ydCB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvcnQ7XG4gICAgfVxufVxuXG5leHBvcnQgY29uc3QgUG9ydCA9IG5ldyBDb250ZW50UG9ydE1hbmFnZXIoKTtcbiIsIi8qIGVzbGludC1kaXNhYmxlIG5vLWlubmVyLWRlY2xhcmF0aW9ucyAqL1xuaW1wb3J0IHsgRm9ybUZpbGxpbmcgfSBmcm9tIFwiLi9mb3JtRmlsbGluZ1wiO1xuaW1wb3J0IHsgRm9ybVV0aWxzIH0gZnJvbSBcIi4vZm9ybXNVdGlsc1wiO1xuaW1wb3J0IHsgRm9ybVNhdmluZyB9IGZyb20gXCIuL2Zvcm1TYXZpbmdcIjtcbmltcG9ydCB7IFBhc3N3b3JkR2VuZXJhdG9yIH0gZnJvbSBcIi4vUGFzc3dvcmRHZW5lcmF0b3JcIjtcbmltcG9ydCB7IEtlZUxvZyB9IGZyb20gXCIuLi9jb21tb24vTG9nZ2VyXCI7XG5pbXBvcnQgeyBjb25maWdNYW5hZ2VyIH0gZnJvbSBcIi4uL2NvbW1vbi9Db25maWdNYW5hZ2VyXCI7XG5pbXBvcnQgeyBBZGRvbk1lc3NhZ2UgfSBmcm9tIFwiLi4vY29tbW9uL0FkZG9uTWVzc2FnZVwiO1xuaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSBcIi4uL2NvbW1vbi9BY3Rpb25cIjtcbmltcG9ydCB1c2VTdG9yZSwgeyB1c2VTdHViU3RvcmUgfSBmcm9tIFwiLi4vc3RvcmVcIjtcbmltcG9ydCB7IFN5bmNDb250ZW50IH0gZnJvbSBcIi4uL3N0b3JlL3N5bmNDb250ZW50XCI7XG5pbXBvcnQgeyBQb3J0IH0gZnJvbSBcIi4uL2NvbW1vbi9wb3J0XCI7XG5pbXBvcnQgeyBjcmVhdGVQaW5pYSB9IGZyb20gXCJwaW5pYVwiO1xuaW1wb3J0IHsgTXV0YXRpb24gfSBmcm9tIFwiLi4vc3RvcmUvc3luY0JhY2tncm91bmRcIjtcblxuLyogVGhpcyBvcmNoZXN0cmF0ZXMgdGhlIG1haW4gZnVuY3Rpb25zIG9mIHRoZSBhZGQtb25cbm9uIGFsbCB3ZWJzaXRlIHBhZ2VzIGV4Y2VwdCB0aG9zZSBjb250YWluaW5nIGEgS1BSUEMgc2VydmVyICovXG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby12YXJcbnZhciBrZWVEdXBsaWNhdGlvbkNvdW50O1xuXG5pZiAoa2VlRHVwbGljYXRpb25Db3VudCkge1xuICAgIGlmIChLZWVMb2cgJiYgS2VlTG9nLmVycm9yKSB7XG4gICAgICAgIEtlZUxvZy5lcnJvcihcbiAgICAgICAgICAgIFwiRHVwbGljYXRlIEtlZSBjb250ZW50IHNjcmlwdCBpbnN0YW5jZSBkZXRlY3RlZCEgRm91bmQgdGhpcyBtYW55IG90aGVyIGluc3RhbmNlczogXCIgK1xuICAgICAgICAgICAgICAgIGtlZUR1cGxpY2F0aW9uQ291bnRcbiAgICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgXCJEdXBsaWNhdGUgS2VlIGNvbnRlbnQgc2NyaXB0IGluc3RhbmNlIGRldGVjdGVkISBGb3VuZCB0aGlzIG1hbnkgb3RoZXIgaW5zdGFuY2VzOiBcIiArXG4gICAgICAgICAgICAgICAga2VlRHVwbGljYXRpb25Db3VudFxuICAgICAgICApO1xuICAgIH1cbn0gZWxzZSB7XG4gICAga2VlRHVwbGljYXRpb25Db3VudCA9IDA7XG59XG5rZWVEdXBsaWNhdGlvbkNvdW50ICs9IDE7XG5cbmxldCBmb3JtVXRpbHM6IEZvcm1VdGlscztcbmxldCBmb3JtRmlsbGluZzogRm9ybUZpbGxpbmc7XG5sZXQgZm9ybVNhdmluZzogRm9ybVNhdmluZztcbmxldCBwYXNzd29yZEdlbmVyYXRvcjogUGFzc3dvcmRHZW5lcmF0b3I7XG5sZXQgZnJhbWVJZDogbnVtYmVyO1xubGV0IHN5bmNDb250ZW50OiBTeW5jQ29udGVudDtcbmxldCBjb25uZWN0ZWQgPSBmYWxzZTtcbmxldCBtZXNzYWdpbmdQb3J0Q29ubmVjdGlvblJldHJ5VGltZXI6IG51bWJlcjtcbmxldCBwYWdlU2hvd0ZpcmVkID0gZmFsc2U7XG5sZXQgY29uZmlnUmVhZHkgPSBmYWxzZTtcbmxldCBtaXNzaW5nUGFnZVNob3dUaW1lcjogbnVtYmVyO1xuXG5sZXQgaW5wdXRzT2JzZXJ2ZXI6IE11dGF0aW9uT2JzZXJ2ZXI7XG5cbmNvbnN0IHN0b3JlID0gdXNlU3R1YlN0b3JlKCk7XG5cbi8vIENvbnRlbnQgc2NyaXB0cyBhcmUgaW5qZWN0ZWQgaW50byBub24tSFRNTCBkb2N1bWVudHMgc3VjaCBhcyBTVkdzLlxuLy8gV2UgaGF2ZSBubyBpbnRlcmVzdCBpbiB0aGlzIGRvY3VtZW50IGlmIGl0IGhhcyBubyBib2R5IE5vZGVcbmlmIChkb2N1bWVudC5ib2R5KSB7XG4gICAgaW5wdXRzT2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihtdXRhdGlvbnMgPT4ge1xuICAgICAgICAvLyBJZiB3ZSBoYXZlIGFscmVhZHkgc2NoZWR1bGVkIGEgcmVzY2FuIHJlY2VudGx5LCBubyBmdXJ0aGVyIGFjdGlvbiByZXF1aXJlZFxuICAgICAgICBpZiAoZm9ybUZpbGxpbmcuZm9ybUZpbmRlclRpbWVyICE9PSBudWxsKSByZXR1cm47XG5cbiAgICAgICAgLy8gT25seSBwcm9jZWVkIGlmIHdlIGhhdmUgYSBEQiB0byBzZWFyY2hcbiAgICAgICAgaWYgKCFzdG9yZS5jb25uZWN0ZWQgfHwgc3RvcmUuQWN0aXZlS2VlUGFzc0RhdGFiYXNlSW5kZXggPCAwKSByZXR1cm47XG5cbiAgICAgICAgbGV0IHJlc2NhbiA9IGZhbHNlO1xuICAgICAgICBjb25zdCBpbnRlcmVzdGluZ05vZGVzID0gW1wiZm9ybVwiLCBcImlucHV0XCIsIFwic2VsZWN0XCJdO1xuICAgICAgICBtdXRhdGlvbnMuZm9yRWFjaChtdXRhdGlvbiA9PiB7XG4gICAgICAgICAgICBpZiAocmVzY2FuKSByZXR1cm47XG4gICAgICAgICAgICBpZiAobXV0YXRpb24udHlwZSA9PT0gXCJjaGlsZExpc3RcIiAmJiBtdXRhdGlvbi5hZGRlZE5vZGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG5vZGUgb2YgbXV0YXRpb24uYWRkZWROb2Rlcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzY2FuKSBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnRlcmVzdGluZ05vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gbm9kZSBhcyBFbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQucXVlcnlTZWxlY3RvciAmJiBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoaW50ZXJlc3RpbmdOb2Rlc1tpXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNjYW4gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBTY2hlZHVsZSBhIHJlc2NhbiBzb29uLiBOb3QgaW1tZWRpYXRlbHksIGluIGNhc2UgYSBiYXRjaCBvZiBtdXRhdGlvbnMgYXJlIGFib3V0IHRvIGJlIHRyaWdnZXJlZC5cbiAgICAgICAgaWYgKHJlc2Nhbikge1xuICAgICAgICAgICAgZm9ybUZpbGxpbmcuZm9ybUZpbmRlclRpbWVyID0gd2luZG93LnNldFRpbWVvdXQoXG4gICAgICAgICAgICAgICAgZm9ybUZpbGxpbmcuZmluZE1hdGNoZXNJblRoaXNGcmFtZS5iaW5kKGZvcm1GaWxsaW5nKSxcbiAgICAgICAgICAgICAgICA1MDBcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIG1hdGNoRmluZGVyKHVyaTogc3RyaW5nKSB7XG4gICAgICAgIFBvcnQucG9zdE1lc3NhZ2UoeyBmaW5kTWF0Y2hlczogeyB1cmkgfSB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0dXRvcmlhbEludGVncmF0aW9uKCkge1xuICAgICAgICBpZiAod2luZG93LmxvY2F0aW9uLmhvc3RuYW1lLmVuZHNXaXRoKFwidHV0b3JpYWwtYWRkb24ua2VlLnBtXCIpKSB7XG4gICAgICAgICAgICBjb25zdCB0cmFuc2ZlckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiS2VlRm94QWRkb25TdGF0ZVRyYW5zZmVyRWxlbWVudFwiKTtcbiAgICAgICAgICAgIHRyYW5zZmVyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXG4gICAgICAgICAgICAgICAgXCJzdGF0ZVwiLFxuICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGVkOiBzdG9yZS5jb25uZWN0ZWQsXG4gICAgICAgICAgICAgICAgICAgIHZlcnNpb246IGJyb3dzZXIucnVudGltZS5nZXRNYW5pZmVzdCgpLnZlcnNpb24sXG4gICAgICAgICAgICAgICAgICAgIGRiTG9hZGVkOiBzdG9yZS5LZWVQYXNzRGF0YWJhc2VzLmxlbmd0aCA+IDAsXG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25OYW1lczogc3RvcmUuS2VlUGFzc0RhdGFiYXNlcy5tYXAoZGIgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgIGRiLnNlc3Npb25UeXBlLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgKS5maWx0ZXIoKHYsIGksIGEpID0+IGEuaW5kZXhPZih2KSA9PT0gaSlcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZCh0cmFuc2ZlckVsZW1lbnQpO1xuXG4gICAgICAgICAgICBjb25zdCBldmVudCA9IG5ldyBFdmVudChcIktlZUZveEFkZG9uU3RhdGVUcmFuc2ZlckV2ZW50XCIsIHtcbiAgICAgICAgICAgICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgICAgICAgICAgIGNhbmNlbGFibGU6IGZhbHNlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRyYW5zZmVyRWxlbWVudC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uRmlyc3RDb25uZWN0KG15RnJhbWVJZDogbnVtYmVyKSB7XG4gICAgICAgIGZyYW1lSWQgPSBteUZyYW1lSWQ7XG5cbiAgICAgICAgS2VlTG9nLmF0dGFjaENvbmZpZyhjb25maWdNYW5hZ2VyLmN1cnJlbnQpO1xuICAgICAgICBmb3JtVXRpbHMgPSBuZXcgRm9ybVV0aWxzKEtlZUxvZyk7XG4gICAgICAgIGZvcm1TYXZpbmcgPSBuZXcgRm9ybVNhdmluZyhQb3J0LnJhdywgS2VlTG9nLCBmb3JtVXRpbHMpO1xuICAgICAgICBmb3JtRmlsbGluZyA9IG5ldyBGb3JtRmlsbGluZyhcbiAgICAgICAgICAgIFBvcnQucmF3LFxuICAgICAgICAgICAgZnJhbWVJZCxcbiAgICAgICAgICAgIGZvcm1VdGlscyxcbiAgICAgICAgICAgIGZvcm1TYXZpbmcsXG4gICAgICAgICAgICBLZWVMb2csXG4gICAgICAgICAgICBjb25maWdNYW5hZ2VyLmN1cnJlbnQsXG4gICAgICAgICAgICBtYXRjaEZpbmRlclxuICAgICAgICApO1xuICAgICAgICBwYXNzd29yZEdlbmVyYXRvciA9IG5ldyBQYXNzd29yZEdlbmVyYXRvcihmcmFtZUlkKTtcblxuICAgICAgICBpbnB1dHNPYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHsgY2hpbGRMaXN0OiB0cnVlLCBzdWJ0cmVlOiB0cnVlIH0pO1xuXG4gICAgICAgIHR1dG9yaWFsSW50ZWdyYXRpb24oKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzdGFydHVwKCkge1xuICAgICAgICBLZWVMb2cuZGVidWcoXCJjb250ZW50IHBhZ2Ugc3RhcnRpbmdcIik7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm5lY3RUb01lc3NhZ2luZ1BvcnQoKTtcbiAgICAgICAgICAgIGlmIChQb3J0LnJhdyA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgS2VlTG9nLndhcm4oXCJGYWlsZWQgdG8gY29ubmVjdCB0byBtZXNzYWdpbmcgcG9ydC4gV2UnbGwgdHJ5IGFnYWluIGxhdGVyLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgIEtlZUxvZy53YXJuKFxuICAgICAgICAgICAgICAgIFwiRmFpbGVkIHRvIGNvbm5lY3QgdG8gbWVzc2FnaW5nIHBvcnQuIFdlJ2xsIHRyeSBhZ2FpbiBsYXRlci4gRXhjZXB0aW9uIG1lc3NhZ2U6IFwiICtcbiAgICAgICAgICAgICAgICAgICAgZXgubWVzc2FnZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG1lc3NhZ2luZ1BvcnRDb25uZWN0aW9uUmV0cnlUaW1lciA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAoUG9ydC5yYXcgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIEtlZUxvZy5pbmZvKFwiTWVzc2FnaW5nIHBvcnQgd2FzIG5vdCBlc3RhYmxpc2hlZCBhdCBwYWdlIHN0YXJ0dXAuIFJldHJ5aW5nIG5vdy4uLlwiKTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25uZWN0VG9NZXNzYWdpbmdQb3J0KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChQb3J0LnJhdyA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBLZWVMb2cud2FybihcIkZhaWxlZCB0byBjb25uZWN0IHRvIG1lc3NhZ2luZyBwb3J0LiBXZSdsbCB0cnkgYWdhaW4gbGF0ZXIuXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgS2VlTG9nLndhcm4oXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkZhaWxlZCB0byBjb25uZWN0IHRvIG1lc3NhZ2luZyBwb3J0LiBXZSdsbCB0cnkgYWdhaW4gbGF0ZXIuIEV4Y2VwdGlvbiBtZXNzYWdlOiBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXgubWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChtZXNzYWdpbmdQb3J0Q29ubmVjdGlvblJldHJ5VGltZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCA1MDAwKTtcblxuICAgICAgICBLZWVMb2cuZGVidWcoXCJjb250ZW50IHBhZ2UgcmVhZHlcIik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY29ubmVjdFRvTWVzc2FnaW5nUG9ydCgpIHtcbiAgICAgICAgaWYgKFBvcnQucmF3KSB7XG4gICAgICAgICAgICBLZWVMb2cud2FybihcbiAgICAgICAgICAgICAgICBcInBvcnQgYWxyZWFkeSBzZXQgdG8gJ1wiICtcbiAgICAgICAgICAgICAgICAgICAgUG9ydC5yYXcubmFtZSArXG4gICAgICAgICAgICAgICAgICAgIFwiJy4gU2tpcHBpbmcgc3RhcnR1cCBiZWNhdXNlIGl0IHNob3VsZCBhbHJlYWR5IGJlIHVuZGVyd2F5IGJ1dCBpcyB0YWtpbmcgYSBsb25nIHRpbWUuXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc3luY0NvbnRlbnQgPSBuZXcgU3luY0NvbnRlbnQoc3RvcmUpO1xuICAgICAgICBQb3J0LnN0YXJ0dXAoXCJwYWdlXCIpO1xuXG4gICAgICAgIFBvcnQucmF3Lm9uTWVzc2FnZS5hZGRMaXN0ZW5lcihmdW5jdGlvbiAobTogQWRkb25NZXNzYWdlKSB7XG4gICAgICAgICAgICBLZWVMb2cuZGVidWcoXCJJbiBicm93c2VyIGNvbnRlbnQgcGFnZSBzY3JpcHQsIHJlY2VpdmVkIG1lc3NhZ2UgZnJvbSBiYWNrZ3JvdW5kIHNjcmlwdFwiKTtcblxuICAgICAgICAgICAgaWYgKG0uaW5pdGlhbFN0YXRlKSB7XG4gICAgICAgICAgICAgICAgc3luY0NvbnRlbnQuaW5pdChtLmluaXRpYWxTdGF0ZSwgKG11dGF0aW9uOiBNdXRhdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBQb3J0LnBvc3RNZXNzYWdlKHsgbXV0YXRpb24gfSBhcyBBZGRvbk1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG0ubXV0YXRpb24pIHtcbiAgICAgICAgICAgICAgICBzeW5jQ29udGVudC5vblJlbW90ZU11dGF0aW9uKG0ubXV0YXRpb24pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFjb25uZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICBvbkZpcnN0Q29ubmVjdChtLmZyYW1lSWQpO1xuICAgICAgICAgICAgICAgIGZvcm1GaWxsaW5nLmZpbmRNYXRjaGVzSW5UaGlzRnJhbWUoKTtcbiAgICAgICAgICAgICAgICBjb25uZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChtLmFjdGlvbiA9PSBBY3Rpb24uRGV0ZWN0Rm9ybXMpIHtcbiAgICAgICAgICAgICAgICBpZiAobS5yZXNldFN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFNvbWV0aW1lcyB0aGUgcGFnZSdzIFZ1ZXggc3RhdGUgY2FuIGJlIG91dCBvZiBzeW5jIHdpdGggdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIGJhY2tncm91bmQgLSBlLmcuIHdoZW4gdGhlIHRhYiBoYXMgYmVlbiBpbmFjdGl2ZSBmb3Igc29tZVxuICAgICAgICAgICAgICAgICAgICAvLyB0aW1lLiBJbiB0aGVzZSBjYXNlcywgd2UgbXVzdCBzdXBwbHkgdGhlIGZ1bGwgc3RhdGUgYWdhaW5cbiAgICAgICAgICAgICAgICAgICAgLy8gYmVmb3JlIGxvb2tpbmcgZm9yIG1hdGNoaW5nIGVudHJpZXMuXG4gICAgICAgICAgICAgICAgICAgIHN5bmNDb250ZW50LnJlc2V0KG0ucmVzZXRTdGF0ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvcm1GaWxsaW5nLnJlbW92ZUtlZUljb25Gcm9tQWxsRmllbGRzKCk7XG4gICAgICAgICAgICAgICAgZm9ybVNhdmluZy5yZW1vdmVBbGxTdWJtaXRIYW5kbGVycygpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHN0b3JlLmVudHJ5VXBkYXRlU3RhcnRlZEF0VGltZXN0YW1wID49IERhdGUubm93KCkgLSAyMDAwMCkge1xuICAgICAgICAgICAgICAgICAgICBmb3JtRmlsbGluZy5maW5kTWF0Y2hlc0luVGhpc0ZyYW1lKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9maWxsT25TdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9zdWJtaXRPblN1Y2Nlc3M6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1GaWxsaW5nLmZpbmRNYXRjaGVzSW5UaGlzRnJhbWUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChtLmZpbmRNYXRjaGVzUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgZm9ybUZpbGxpbmcuZmluZExvZ2luc1Jlc3VsdEhhbmRsZXIobS5maW5kTWF0Y2hlc1Jlc3VsdCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChtLmFjdGlvbiA9PSBBY3Rpb24uTWFudWFsRmlsbCAmJiBtLnNlbGVjdGVkRW50cnlJbmRleCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgZm9ybUZpbGxpbmcuY2xvc2VNYXRjaGVkTG9naW5zUGFuZWwoKTtcbiAgICAgICAgICAgICAgICBmb3JtRmlsbGluZy5maWxsQW5kU3VibWl0KGZhbHNlLCBudWxsLCBtLnNlbGVjdGVkRW50cnlJbmRleCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChtLmFjdGlvbiA9PSBBY3Rpb24uUmVzZXRGb3Jtcykge1xuICAgICAgICAgICAgICAgIGZvcm1GaWxsaW5nLnJlbW92ZUtlZUljb25Gcm9tQWxsRmllbGRzKCk7XG4gICAgICAgICAgICAgICAgZm9ybVNhdmluZy5yZW1vdmVBbGxTdWJtaXRIYW5kbGVycygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobS5hY3Rpb24gPT0gQWN0aW9uLlByaW1hcnkpIHtcbiAgICAgICAgICAgICAgICBmb3JtRmlsbGluZy5leGVjdXRlUHJpbWFyeUFjdGlvbigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobS5hY3Rpb24gPT0gQWN0aW9uLkdlbmVyYXRlUGFzc3dvcmQpIHtcbiAgICAgICAgICAgICAgICBwYXNzd29yZEdlbmVyYXRvci5jcmVhdGVHZW5lcmF0ZVBhc3N3b3JkUGFuZWwoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG0uYWN0aW9uID09IEFjdGlvbi5DbG9zZUFsbFBhbmVscykge1xuICAgICAgICAgICAgICAgIHBhc3N3b3JkR2VuZXJhdG9yLmNsb3NlR2VuZXJhdGVQYXNzd29yZFBhbmVsKCk7XG4gICAgICAgICAgICAgICAgZm9ybUZpbGxpbmcuY2xvc2VNYXRjaGVkTG9naW5zUGFuZWwoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG0uYWN0aW9uID09IEFjdGlvbi5TaG93TWF0Y2hlZExvZ2luc1BhbmVsKSB7XG4gICAgICAgICAgICAgICAgZm9ybUZpbGxpbmcuY3JlYXRlTWF0Y2hlZExvZ2luc1BhbmVsSW5DZW50ZXIobS5mcmFtZUlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwYWdlc2hvd1wiLCAoKSA9PiB7XG4gICAgICAgIHBhZ2VTaG93RmlyZWQgPSB0cnVlO1xuICAgICAgICBjbGVhclRpbWVvdXQobWlzc2luZ1BhZ2VTaG93VGltZXIpO1xuICAgICAgICBpZiAoY29uZmlnUmVhZHkpIHtcbiAgICAgICAgICAgIHN0YXJ0dXAoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicGFnZWhpZGVcIiwgKCkgPT4ge1xuICAgICAgICBpbnB1dHNPYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICAgIGlmIChQb3J0LnJhdykgUG9ydC5wb3N0TWVzc2FnZSh7IGFjdGlvbjogQWN0aW9uLlBhZ2VIaWRlIH0pO1xuICAgICAgICBmb3JtRmlsbGluZy5yZW1vdmVLZWVJY29uRnJvbUFsbEZpZWxkcygpO1xuICAgICAgICBQb3J0LnNodXRkb3duKCk7XG4gICAgICAgIGNvbm5lY3RlZCA9IGZhbHNlO1xuICAgICAgICBmcmFtZUlkID0gdW5kZWZpbmVkO1xuICAgICAgICBmb3JtVXRpbHMgPSB1bmRlZmluZWQ7XG4gICAgICAgIGZvcm1TYXZpbmcgPSB1bmRlZmluZWQ7XG4gICAgICAgIGZvcm1GaWxsaW5nID0gdW5kZWZpbmVkO1xuICAgICAgICBwYXNzd29yZEdlbmVyYXRvciA9IHVuZGVmaW5lZDtcbiAgICB9KTtcblxuICAgIC8vIExvYWQgb3VyIGNvbmZpZ1xuICAgIGNvbmZpZ01hbmFnZXIubG9hZCgoKSA9PiB7XG4gICAgICAgIGNvbmZpZ1JlYWR5ID0gdHJ1ZTtcbiAgICAgICAgaWYgKHBhZ2VTaG93RmlyZWQpIHtcbiAgICAgICAgICAgIHN0YXJ0dXAoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFBhZ2Ugc2hvdyBkb2VzIG5vdCBhbHdheXMgZmlyZSAoZS5nLiBvbiBmaXJzdCBpbnN0YWxsIG9mIHRoZSBleHRlbnNpb24pXG4gICAgICAgICAgICAvLyBzbyB3ZSB3b24ndCB3YWl0IGFyb3VuZCBmb3JldmVyLCBhdCB0aGUgY29zdCBvZiBvY2Nhc2lvbmFsIGR1cGxpY2F0ZVxuICAgICAgICAgICAgLy8gc3RhcnR1cCBjb2RlIC0gYnJvYWRseSBsaW1pdGVkIHRvIGRpc2NvdmVyaW5nIHRoYXQgdGhlIG1lc3NhZ2UgcG9ydFxuICAgICAgICAgICAgLy8gaXMgYWxyZWFkeSBlc3RhYmxpc2hlZC5cbiAgICAgICAgICAgIG1pc3NpbmdQYWdlU2hvd1RpbWVyID0gd2luZG93LnNldFRpbWVvdXQoc3RhcnR1cCwgMTUwMCk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbiJdLCJuYW1lcyI6WyJnbG9iYWwiLCJmYWN0b3J5IiwibW9kdWxlIiwidGhpcyIsIl9iIiwiX2EiLCJDSFJPTUVfU0VORF9NRVNTQUdFX0NBTExCQUNLX05PX1JFU1BPTlNFX01FU1NBR0UiLCJ3cmFwQVBJcyIsImV4dGVuc2lvbkFQSXMiLCJhcGlNZXRhZGF0YSIsIkRlZmF1bHRXZWFrTWFwIiwiY3JlYXRlSXRlbSIsIml0ZW1zIiwia2V5IiwiaXNUaGVuYWJsZSIsInZhbHVlIiwibWFrZUNhbGxiYWNrIiwicHJvbWlzZSIsIm1ldGFkYXRhIiwiY2FsbGJhY2tBcmdzIiwicGx1cmFsaXplQXJndW1lbnRzIiwibnVtQXJncyIsIndyYXBBc3luY0Z1bmN0aW9uIiwibmFtZSIsInRhcmdldCIsImFyZ3MiLCJyZXNvbHZlIiwicmVqZWN0IiwiY2JFcnJvciIsIndyYXBNZXRob2QiLCJtZXRob2QiLCJ3cmFwcGVyIiwidGFyZ2V0TWV0aG9kIiwidGhpc09iaiIsImhhc093blByb3BlcnR5Iiwid3JhcE9iamVjdCIsIndyYXBwZXJzIiwiY2FjaGUiLCJoYW5kbGVycyIsInByb3h5VGFyZ2V0IiwicHJvcCIsInJlY2VpdmVyIiwiZGVzYyIsIndyYXBFdmVudCIsIndyYXBwZXJNYXAiLCJsaXN0ZW5lciIsIm9uUmVxdWVzdEZpbmlzaGVkV3JhcHBlcnMiLCJyZXEiLCJ3cmFwcGVkUmVxIiwib25NZXNzYWdlV3JhcHBlcnMiLCJtZXNzYWdlIiwic2VuZGVyIiwic2VuZFJlc3BvbnNlIiwiZGlkQ2FsbFNlbmRSZXNwb25zZSIsIndyYXBwZWRTZW5kUmVzcG9uc2UiLCJzZW5kUmVzcG9uc2VQcm9taXNlIiwicmVzcG9uc2UiLCJyZXN1bHQiLCJlcnIiLCJpc1Jlc3VsdFRoZW5hYmxlIiwic2VuZFByb21pc2VkUmVzdWx0IiwibXNnIiwiZXJyb3IiLCJ3cmFwcGVkU2VuZE1lc3NhZ2VDYWxsYmFjayIsInJlcGx5Iiwid3JhcHBlZFNlbmRNZXNzYWdlIiwiYXBpTmFtZXNwYWNlT2JqIiwid3JhcHBlZENiIiwic3RhdGljV3JhcHBlcnMiLCJzZXR0aW5nTWV0YWRhdGEiLCJTaXRlQ29uZmlnIiwiU2l0ZUNvbmZpZ0xvb2t1cCIsIlNpdGVDb25maWdJbmRleCIsIkNvbmZpZyIsImRlZmF1bHRTaXRlQ29uZmlnIiwiQ29uZmlnTWlncmF0aW9ucyIsImN1cnJlbnQiLCJuZXdMb2dMZXZlbCIsIm5ld1NpdGVDb25maWciLCJpIiwidXJsIiwid2l0aG91dFByb3RvY29sIiwibmV3Q29uZmlnIiwicGF0aEluZGV4IiwiaG9zdCIsIndlaWdodCIsInBhZ2VQcmVmaXgiLCJvbGRDb25maWciLCJzYyIsIlV0aWxzIiwidmVyc2lvbkFycmF5IiwidmVyc2lvbkludCIsImJ5dGVBcnJheSIsImJ5dGUiLCJjaGFyQ29kZSIsImJ5dGVDb3VudCIsImJ5dGVzIiwiaGV4IiwiZGF0YSIsIm91dEZvcm1hdCIsImFsZ29yaXRobSIsImluQnVmZmVyIiwib3V0QnVmZmVyIiwidXRpbHMiLCJpbnQiLCJpbmRleCIsImludEFycmF5IiwiaiIsInN0ciIsImlucHV0IiwiZXh0cmFMZW5ndGgiLCJ2aWV3IiwiYmluYXJ5IiwibGVuIiwib2Zmc2V0IiwiYnVmZmVyIiwiYXJyYXlCdWZmZXIiLCJiYXNlNjQiLCJlbmNvZGluZ3MiLCJieXRlTGVuZ3RoIiwiYnl0ZVJlbWFpbmRlciIsIm1haW5MZW5ndGgiLCJhIiwiYiIsImMiLCJkIiwiY2h1bmsiLCJoZXhTdHJpbmciLCJudW1CeXRlcyIsImx1dCIsImR2YWxzIiwiZDAiLCJkMSIsImQyIiwiZDMiLCJkZWVwRXF1YWwiLCJsZW5ndGgiLCJrZXlzIiwibGlzdCIsImNvbnN0cnVjdG9yIiwiZXJyb3JDb25zdHJ1Y3RvcnMiLCJjb21tb25Qcm9wZXJ0aWVzIiwidG9Kc29uV2FzQ2FsbGVkIiwidG9KU09OIiwiZnJvbSIsImpzb24iLCJnZXRFcnJvckNvbnN0cnVjdG9yIiwiZGVzdHJveUNpcmN1bGFyIiwic2VlbiIsInRvIiwiZm9yY2VFbnVtZXJhYmxlIiwibWF4RGVwdGgiLCJkZXB0aCIsInVzZVRvSlNPTiIsInNlcmlhbGl6ZSIsImlzRXJyb3JMaWtlIiwiRXJyb3IiLCJjb250aW51ZURlc3Ryb3lDaXJjdWxhciIsInByb3BlcnR5IiwiZW51bWVyYWJsZSIsInNlcmlhbGl6ZUVycm9yIiwib3B0aW9ucyIsIktlZUxvZ2dlciIsImNvbmZpZyIsImUiLCJsb2dMZXZlbCIsIktlZUxvZyIsIkxBVEVTVF9WRVJTSU9OIiwiZGVmYXVsdENvbmZpZyIsIkNvbmZpZ01hbmFnZXIiLCJicm93c2VyLnN0b3JhZ2UiLCJjaGFuZ2VzIiwiYXJlYSIsImNvbmZpZ01hbmFnZXIiLCJ2YWx1ZXMiLCJudW1QYWdlcyIsInBhZ2VzIiwibyIsImNvbmZpZ1N0cmluZyIsImNvbmZpZ1ZhbHVlcyIsIm9uTG9hZGVkIiwicGFnZUNvdW50IiwibmV4dFBhZ2UiLCJvbGRQYWdlQ291bnQiLCJzYXZlTmVlZGVkIiwibWlncmF0aW9ucyIsIm1hdGNoZWRDb25maWdOb2RlcyIsIm5vZGUxIiwibm9kZTIiLCJ1cmxTdHJpbmciLCJwYWdlIiwiZG9tYWluIiwibWF0Y2hlZENvbmZpZ05vZGVzQW5kSW5kZXhlcyIsImRlcml2ZWRDb25maWciLCJub2RlIiwiaWMiLCJmb3JtIiwiY29uZiIsIm90aGVyRmllbGRzIiwiZmllbGRJZHMiLCJmaWVsZCIsImZpZWxkTmFtZXMiLCJmb3JtSWQiLCJmb3JtTmFtZSIsImV4Y2x1ZGVGb3JtSWRzIiwieCIsImV4Y2x1ZGVGb3JtTmFtZXMiLCJfZCIsIl9jIiwiZXhjbHVkZUZpZWxkSWRzIiwiX2YiLCJfZSIsImV4Y2x1ZGVGaWVsZE5hbWVzIiwiX2giLCJfZyIsImlkIiwibiIsImluY2x1ZGVGb3JtSWRzIiwiX2oiLCJfaSIsImluY2x1ZGVGb3JtTmFtZXMiLCJfbCIsIl9rIiwiaW5jbHVkZUZpZWxkSWRzIiwiX24iLCJfbSIsImluY2x1ZGVGaWVsZE5hbWVzIiwiX3AiLCJfbyIsInV1aWQiLCJjb25maWd1cmVkVGFyZ2V0IiwiYWxsQ29uZmlnTm9kZXNBbmRMb29rdXBzIiwiY3VycmVudFByZWZlcnJlZFV1aWQiLCJjbmwiLCJsb29rdXAiLCJ0MSIsInQyIiwicGFydGlhbENvbmZpZyIsInNvdXJjZSIsImNvbmZpZ0xvb2t1cCIsIlBhbmVsU3R1Yk9wdGlvbnMiLCJQYW5lbFN0dWIiLCJwYXJlbnRGcmFtZUlkIiwic2hhZG93Iiwic3R5bGUiLCJpZnJhbWUiLCJ0ZW1wbGF0ZSIsImJyb3dzZXIuZXh0ZW5zaW9uIiwiYm9keUVsZW1lbnRzIiwiZnJhbWVzZXRFbGVtZW50cyIsIm9sZFJlY3QiLCJwcmVmZXJyZWRDb250YWluZXJIZWlnaHQiLCJjb250YWluZXJIZWlnaHQiLCJjb250YWluZXJXaWR0aCIsInBvc2l0aW9uQWJvdmUiLCJ0YXJnZXRUb3AiLCJ0YXJnZXRCb3R0b20iLCJwcmVmZXJyZWRBcnJvd1hDb29yZCIsInByZWZlcnJlZEJvdHRvbSIsInByZWZlcnJlZFRvcCIsIm92ZXJmbG93Qm90dG9tIiwib3ZlcmZsb3dUb3AiLCJ0YXJnZXRXaWR0aCIsInJlbGF0aXZlTGVmdCIsInRvcCIsImxlZnQiLCJwYW5lbCIsIkFjdGlvbiIsIktlZUZpZWxkSWNvbiIsIm15UG9ydCIsImZvcm1VdGlscyIsImNyZWF0ZU1hdGNoZWRMb2dpbnNQYW5lbE5lYXJOb2RlIiwiZWxlbWVudCIsInBhc3N3b3JkRmllbGRzIiwiZW50cmllcyIsImltYWdlIiwidHJhbnNpdGlvbkNvbmZpZyIsInZhbCIsImZpZWxkcyIsImYiLCJmaWVsZFNldDEiLCJmaWVsZFNldDIiLCJjdXJyZW50U3R5bGUiLCJzaGFkb3dzIiwicyIsImJjcmVjdCIsImxlZnRMaW1pdCIsInRleHQiLCJjYW52YXMiLCJpbWciLCJjb250ZXh0IiwiTWF0Y2hSZXN1bHQiLCJTZXNzaW9uVHlwZSIsIkVudHJ5U3VtbWFyeSIsImVudHJ5IiwiRW50cnkiLCJlbnRyeVN1bW1hcnlEdG8iLCJwYXRoIiwiZGJGaWxlTmFtZSIsIkdyb3VwIiwiZyIsImdyb3VwRHRvIiwiY2hpbGRMaWdodEVudHJ5IiwiY2hpbGRHcm91cCIsImdyb3VwIiwiRGF0YWJhc2UiLCJkYiIsImR0byIsInNlc3Npb25UeXBlIiwic2Vzc2lvbkZlYXR1cmVzIiwiJFNUUiIsImJyb3dzZXIuaTE4biIsIiRTVFJGIiwic3VicyIsIkxvY2F0b3IiLCJsb2NhdG9yIiwiRW50cnlEdG8iLCJGb3JtRmllbGRUeXBlRFRPIiwiRmllbGQiLCJyZXZlYWxQYXNzd29yZHMiLCJyZXBsYWNlbWVudElmUHJvdGVjdGVkIiwiZG9tVHlwZSIsInVzZXJuYW1lSW5kZXgiLCJwYXNzd29yZHMiLCJsYWJlbHMiLCJjb2xsZWN0TGFiZWxzIiwiY29sbGVjdEF1dG9jb21wbGV0ZVZhbHVlcyIsInR5cGUiLCJsb2NhdG9yVHlwZSIsImlzVXNlcm5hbWUiLCJmZnQiLCJsYWJlbHNDb3VudCIsImxhYmVsIiwiYXJpYUxhYmVsIiwiYXJpYUxhYmVsSWRzIiwibGFiZWxFbGVtZW50IiwidiIsIkdyb3VwU3VtbWFyeSIsImdyb3VwU3VtbWFyeUR0byIsImVudHJ5RHRvIiwic29ydGVkRmllbGRzIiwibWF4aW11bVBhZ2UiLCJ1bnNvcnRlZEZpZWxkcyIsImZpcnN0UGFzc3dvcmRJbmRleCIsIm1ha2VNYXAiLCJleHBlY3RzTG93ZXJDYXNlIiwibWFwIiwibm9ybWFsaXplU3R5bGUiLCJpc0FycmF5IiwicmVzIiwiaXRlbSIsIm5vcm1hbGl6ZWQiLCJpc1N0cmluZyIsInBhcnNlU3RyaW5nU3R5bGUiLCJpc09iamVjdCIsImxpc3REZWxpbWl0ZXJSRSIsInByb3BlcnR5RGVsaW1pdGVyUkUiLCJzdHlsZUNvbW1lbnRSRSIsImNzc1RleHQiLCJyZXQiLCJ0bXAiLCJub3JtYWxpemVDbGFzcyIsIkhUTUxfVEFHUyIsIlNWR19UQUdTIiwiaXNIVE1MVGFnIiwiaXNTVkdUYWciLCJpc1NwZWNpYWxCb29sZWFuQXR0ciIsImluY2x1ZGVCb29sZWFuQXR0ciIsIkVNUFRZX09CSiIsIkVNUFRZX0FSUiIsIk5PT1AiLCJOTyIsIm9uUkUiLCJpc09uIiwiaXNNb2RlbExpc3RlbmVyIiwiZXh0ZW5kIiwicmVtb3ZlIiwiYXJyIiwiZWwiLCJoYXNPd24iLCJpc01hcCIsInRvVHlwZVN0cmluZyIsImlzU2V0IiwiaXNGdW5jdGlvbiIsImlzU3ltYm9sIiwiaXNQcm9taXNlIiwib2JqZWN0VG9TdHJpbmciLCJ0b1Jhd1R5cGUiLCJpc1BsYWluT2JqZWN0IiwiaXNJbnRlZ2VyS2V5IiwiaXNSZXNlcnZlZFByb3AiLCJpc0J1aWx0SW5EaXJlY3RpdmUiLCJjYWNoZVN0cmluZ0Z1bmN0aW9uIiwiZm4iLCJjYW1lbGl6ZVJFIiwiY2FtZWxpemUiLCJfIiwiaHlwaGVuYXRlUkUiLCJoeXBoZW5hdGUiLCJjYXBpdGFsaXplIiwidG9IYW5kbGVyS2V5IiwiaGFzQ2hhbmdlZCIsIm9sZFZhbHVlIiwiaW52b2tlQXJyYXlGbnMiLCJmbnMiLCJhcmciLCJkZWYiLCJvYmoiLCJ0b051bWJlciIsIl9nbG9iYWxUaGlzIiwiZ2V0R2xvYmFsVGhpcyIsIndhcm4iLCJhY3RpdmVFZmZlY3RTY29wZSIsIkVmZmVjdFNjb3BlIiwiZGV0YWNoZWQiLCJjdXJyZW50RWZmZWN0U2NvcGUiLCJmcm9tUGFyZW50IiwibCIsImxhc3QiLCJlZmZlY3RTY29wZSIsInJlY29yZEVmZmVjdFNjb3BlIiwiZWZmZWN0Iiwic2NvcGUiLCJnZXRDdXJyZW50U2NvcGUiLCJvblNjb3BlRGlzcG9zZSIsImNyZWF0ZURlcCIsImVmZmVjdHMiLCJkZXAiLCJ3YXNUcmFja2VkIiwidHJhY2tPcEJpdCIsIm5ld1RyYWNrZWQiLCJpbml0RGVwTWFya2VycyIsImRlcHMiLCJmaW5hbGl6ZURlcE1hcmtlcnMiLCJwdHIiLCJ0YXJnZXRNYXAiLCJlZmZlY3RUcmFja0RlcHRoIiwibWF4TWFya2VyQml0cyIsImFjdGl2ZUVmZmVjdCIsIklURVJBVEVfS0VZIiwiTUFQX0tFWV9JVEVSQVRFX0tFWSIsIlJlYWN0aXZlRWZmZWN0Iiwic2NoZWR1bGVyIiwicGFyZW50IiwibGFzdFNob3VsZFRyYWNrIiwic2hvdWxkVHJhY2siLCJjbGVhbnVwRWZmZWN0IiwidHJhY2tTdGFjayIsInBhdXNlVHJhY2tpbmciLCJyZXNldFRyYWNraW5nIiwidHJhY2siLCJkZXBzTWFwIiwidHJhY2tFZmZlY3RzIiwiZGVidWdnZXJFdmVudEV4dHJhSW5mbyIsInRyaWdnZXIiLCJuZXdWYWx1ZSIsIm9sZFRhcmdldCIsIm5ld0xlbmd0aCIsImV2ZW50SW5mbyIsInRyaWdnZXJFZmZlY3RzIiwidHJpZ2dlckVmZmVjdCIsImlzTm9uVHJhY2thYmxlS2V5cyIsImJ1aWx0SW5TeW1ib2xzIiwiZ2V0IiwiY3JlYXRlR2V0dGVyIiwic2hhbGxvd0dldCIsInJlYWRvbmx5R2V0Iiwic2hhbGxvd1JlYWRvbmx5R2V0IiwiYXJyYXlJbnN0cnVtZW50YXRpb25zIiwiY3JlYXRlQXJyYXlJbnN0cnVtZW50YXRpb25zIiwiaW5zdHJ1bWVudGF0aW9ucyIsInRvUmF3IiwiaXNSZWFkb25seSIsInNoYWxsb3ciLCJzaGFsbG93UmVhZG9ubHlNYXAiLCJyZWFkb25seU1hcCIsInNoYWxsb3dSZWFjdGl2ZU1hcCIsInJlYWN0aXZlTWFwIiwidGFyZ2V0SXNBcnJheSIsImlzUmVmIiwicmVhZG9ubHkiLCJyZWFjdGl2ZSIsInNldCIsImNyZWF0ZVNldHRlciIsInNoYWxsb3dTZXQiLCJpc1NoYWxsb3ciLCJoYWRLZXkiLCJkZWxldGVQcm9wZXJ0eSIsImhhcyIsIm93bktleXMiLCJtdXRhYmxlSGFuZGxlcnMiLCJyZWFkb25seUhhbmRsZXJzIiwic2hhbGxvd1JlYWN0aXZlSGFuZGxlcnMiLCJzaGFsbG93UmVhZG9ubHlIYW5kbGVycyIsInRvU2hhbGxvdyIsImdldFByb3RvIiwiZ2V0JDEiLCJyYXdUYXJnZXQiLCJyYXdLZXkiLCJ3cmFwIiwidG9SZWFkb25seSIsInRvUmVhY3RpdmUiLCJoYXMkMSIsInNpemUiLCJhZGQiLCJzZXQkMSIsImNoZWNrSWRlbnRpdHlLZXlzIiwiZGVsZXRlRW50cnkiLCJjbGVhciIsImhhZEl0ZW1zIiwiY3JlYXRlRm9yRWFjaCIsImNhbGxiYWNrIiwidGhpc0FyZyIsIm9ic2VydmVkIiwiY3JlYXRlSXRlcmFibGVNZXRob2QiLCJ0YXJnZXRJc01hcCIsImlzUGFpciIsImlzS2V5T25seSIsImlubmVySXRlcmF0b3IiLCJkb25lIiwiY3JlYXRlUmVhZG9ubHlNZXRob2QiLCJjcmVhdGVJbnN0cnVtZW50YXRpb25zIiwibXV0YWJsZUluc3RydW1lbnRhdGlvbnMiLCJzaGFsbG93SW5zdHJ1bWVudGF0aW9ucyIsInJlYWRvbmx5SW5zdHJ1bWVudGF0aW9ucyIsInNoYWxsb3dSZWFkb25seUluc3RydW1lbnRhdGlvbnMiLCJjcmVhdGVJbnN0cnVtZW50YXRpb25HZXR0ZXIiLCJtdXRhYmxlQ29sbGVjdGlvbkhhbmRsZXJzIiwic2hhbGxvd0NvbGxlY3Rpb25IYW5kbGVycyIsInJlYWRvbmx5Q29sbGVjdGlvbkhhbmRsZXJzIiwic2hhbGxvd1JlYWRvbmx5Q29sbGVjdGlvbkhhbmRsZXJzIiwidGFyZ2V0VHlwZU1hcCIsInJhd1R5cGUiLCJnZXRUYXJnZXRUeXBlIiwiY3JlYXRlUmVhY3RpdmVPYmplY3QiLCJzaGFsbG93UmVhY3RpdmUiLCJzaGFsbG93UmVhZG9ubHkiLCJiYXNlSGFuZGxlcnMiLCJjb2xsZWN0aW9uSGFuZGxlcnMiLCJwcm94eU1hcCIsImV4aXN0aW5nUHJveHkiLCJ0YXJnZXRUeXBlIiwicHJveHkiLCJpc1JlYWN0aXZlIiwiaXNQcm94eSIsInJhdyIsIm1hcmtSYXciLCJ0cmFja1JlZlZhbHVlIiwicmVmIiwidHJpZ2dlclJlZlZhbHVlIiwibmV3VmFsIiwiciIsImNyZWF0ZVJlZiIsInJhd1ZhbHVlIiwiUmVmSW1wbCIsIl9fdl9pc1NoYWxsb3ciLCJ1c2VEaXJlY3RWYWx1ZSIsInVucmVmIiwic2hhbGxvd1Vud3JhcEhhbmRsZXJzIiwicHJveHlSZWZzIiwib2JqZWN0V2l0aFJlZnMiLCJ0b1JlZnMiLCJvYmplY3QiLCJ0b1JlZiIsIk9iamVjdFJlZkltcGwiLCJfb2JqZWN0IiwiX2tleSIsIl9kZWZhdWx0VmFsdWUiLCJkZWZhdWx0VmFsdWUiLCJDb21wdXRlZFJlZkltcGwiLCJnZXR0ZXIiLCJfc2V0dGVyIiwiaXNTU1IiLCJzZWxmIiwiY29tcHV0ZWQiLCJnZXR0ZXJPck9wdGlvbnMiLCJkZWJ1Z09wdGlvbnMiLCJzZXR0ZXIiLCJvbmx5R2V0dGVyIiwiY1JlZiIsInN0YWNrIiwicHVzaFdhcm5pbmdDb250ZXh0Iiwidm5vZGUiLCJwb3BXYXJuaW5nQ29udGV4dCIsImluc3RhbmNlIiwiYXBwV2FybkhhbmRsZXIiLCJ0cmFjZSIsImdldENvbXBvbmVudFRyYWNlIiwiY2FsbFdpdGhFcnJvckhhbmRsaW5nIiwiZm9ybWF0Q29tcG9uZW50TmFtZSIsIndhcm5BcmdzIiwiZm9ybWF0VHJhY2UiLCJjdXJyZW50Vk5vZGUiLCJub3JtYWxpemVkU3RhY2siLCJwYXJlbnRJbnN0YW5jZSIsImxvZ3MiLCJmb3JtYXRUcmFjZUVudHJ5IiwicmVjdXJzZUNvdW50IiwicG9zdGZpeCIsImlzUm9vdCIsIm9wZW4iLCJjbG9zZSIsImZvcm1hdFByb3BzIiwicHJvcHMiLCJmb3JtYXRQcm9wIiwiRXJyb3JUeXBlU3RyaW5ncyIsImhhbmRsZUVycm9yIiwiY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmciLCJ0aHJvd0luRGV2IiwiY29udGV4dFZOb2RlIiwiY3VyIiwiZXhwb3NlZEluc3RhbmNlIiwiZXJyb3JJbmZvIiwiZXJyb3JDYXB0dXJlZEhvb2tzIiwiYXBwRXJyb3JIYW5kbGVyIiwibG9nRXJyb3IiLCJpbmZvIiwiaXNGbHVzaGluZyIsImlzRmx1c2hQZW5kaW5nIiwicXVldWUiLCJmbHVzaEluZGV4IiwicGVuZGluZ1Bvc3RGbHVzaENicyIsImFjdGl2ZVBvc3RGbHVzaENicyIsInBvc3RGbHVzaEluZGV4IiwicmVzb2x2ZWRQcm9taXNlIiwiY3VycmVudEZsdXNoUHJvbWlzZSIsIlJFQ1VSU0lPTl9MSU1JVCIsIm5leHRUaWNrIiwicCIsImZpbmRJbnNlcnRpb25JbmRleCIsInN0YXJ0IiwiZW5kIiwibWlkZGxlIiwiZ2V0SWQiLCJxdWV1ZUpvYiIsImpvYiIsInF1ZXVlRmx1c2giLCJmbHVzaEpvYnMiLCJpbnZhbGlkYXRlSm9iIiwicXVldWVQb3N0Rmx1c2hDYiIsImNiIiwiZmx1c2hQcmVGbHVzaENicyIsImNoZWNrUmVjdXJzaXZlVXBkYXRlcyIsImZsdXNoUG9zdEZsdXNoQ2JzIiwiZGVkdXBlZCIsImNvbXBhcmF0b3IiLCJkaWZmIiwiY2hlY2siLCJjb3VudCIsImNvbXBvbmVudE5hbWUiLCJnZXRDb21wb25lbnROYW1lIiwiaXNIbXJVcGRhdGluZyIsImhtckRpcnR5Q29tcG9uZW50cyIsInRyeVdyYXAiLCJjcmVhdGVSZWNvcmQiLCJyZXJlbmRlciIsInJlbG9hZCIsInJlZ2lzdGVySE1SIiwicmVjb3JkIiwidW5yZWdpc3RlckhNUiIsImluaXRpYWxEZWYiLCJub3JtYWxpemVDbGFzc0NvbXBvbmVudCIsImNvbXBvbmVudCIsImlzQ2xhc3NDb21wb25lbnQiLCJuZXdSZW5kZXIiLCJuZXdDb21wIiwidXBkYXRlQ29tcG9uZW50RGVmIiwiaW5zdGFuY2VzIiwib2xkQ29tcCIsImRldnRvb2xzIiwiZGV2dG9vbHNOb3RJbnN0YWxsZWQiLCJlbWl0IiwiZXZlbnQiLCJzZXREZXZ0b29sc0hvb2siLCJob29rIiwibmV3SG9vayIsImRldnRvb2xzSW5pdEFwcCIsImFwcCIsInZlcnNpb24iLCJGcmFnbWVudCIsIlRleHQiLCJDb21tZW50IiwiU3RhdGljIiwiZGV2dG9vbHNVbm1vdW50QXBwIiwiZGV2dG9vbHNDb21wb25lbnRBZGRlZCIsImNyZWF0ZURldnRvb2xzQ29tcG9uZW50SG9vayIsImRldnRvb2xzQ29tcG9uZW50VXBkYXRlZCIsIl9kZXZ0b29sc0NvbXBvbmVudFJlbW92ZWQiLCJkZXZ0b29sc0NvbXBvbmVudFJlbW92ZWQiLCJkZXZ0b29sc1BlcmZTdGFydCIsImNyZWF0ZURldnRvb2xzUGVyZm9ybWFuY2VIb29rIiwiZGV2dG9vbHNQZXJmRW5kIiwidGltZSIsImRldnRvb2xzQ29tcG9uZW50RW1pdCIsInBhcmFtcyIsImVtaXQkMSIsInJhd0FyZ3MiLCJlbWl0c09wdGlvbnMiLCJwcm9wc09wdGlvbnMiLCJ2YWxpZGF0b3IiLCJtb2RlbEFyZyIsIm1vZGlmaWVyc0tleSIsIm51bWJlciIsInRyaW0iLCJsb3dlckNhc2VFdmVudCIsImhhbmRsZXJOYW1lIiwiaGFuZGxlciIsIm9uY2VIYW5kbGVyIiwibm9ybWFsaXplRW1pdHNPcHRpb25zIiwiY29tcCIsImFwcENvbnRleHQiLCJhc01peGluIiwiY2FjaGVkIiwiaGFzRXh0ZW5kcyIsImV4dGVuZEVtaXRzIiwibm9ybWFsaXplZEZyb21FeHRlbmQiLCJpc0VtaXRMaXN0ZW5lciIsImN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSIsImN1cnJlbnRTY29wZUlkIiwic2V0Q3VycmVudFJlbmRlcmluZ0luc3RhbmNlIiwicHJldiIsIndpdGhDdHgiLCJjdHgiLCJpc05vblNjb3BlZFNsb3QiLCJyZW5kZXJGbldpdGhDb250ZXh0Iiwic2V0QmxvY2tUcmFja2luZyIsInByZXZJbnN0YW5jZSIsImFjY2Vzc2VkQXR0cnMiLCJtYXJrQXR0cnNBY2Nlc3NlZCIsInJlbmRlckNvbXBvbmVudFJvb3QiLCJDb21wb25lbnQiLCJ3aXRoUHJveHkiLCJzbG90cyIsImF0dHJzIiwicmVuZGVyIiwicmVuZGVyQ2FjaGUiLCJzZXR1cFN0YXRlIiwiaW5oZXJpdEF0dHJzIiwiZmFsbHRocm91Z2hBdHRycyIsInByb3h5VG9Vc2UiLCJub3JtYWxpemVWTm9kZSIsImdldEZ1bmN0aW9uYWxGYWxsdGhyb3VnaCIsImNyZWF0ZVZOb2RlIiwicm9vdCIsInNldFJvb3QiLCJnZXRDaGlsZFJvb3QiLCJzaGFwZUZsYWciLCJmaWx0ZXJNb2RlbExpc3RlbmVycyIsImNsb25lVk5vZGUiLCJhbGxBdHRycyIsImV2ZW50QXR0cnMiLCJleHRyYUF0dHJzIiwiaXNFbGVtZW50Um9vdCIsInJhd0NoaWxkcmVuIiwiZHluYW1pY0NoaWxkcmVuIiwiY2hpbGRSb290IiwiZmlsdGVyU2luZ2xlUm9vdCIsImR5bmFtaWNJbmRleCIsInVwZGF0ZWRSb290IiwiY2hpbGRyZW4iLCJzaW5nbGVSb290IiwiY2hpbGQiLCJpc1ZOb2RlIiwic2hvdWxkVXBkYXRlQ29tcG9uZW50IiwicHJldlZOb2RlIiwibmV4dFZOb2RlIiwib3B0aW1pemVkIiwicHJldlByb3BzIiwicHJldkNoaWxkcmVuIiwibmV4dFByb3BzIiwibmV4dENoaWxkcmVuIiwicGF0Y2hGbGFnIiwiZW1pdHMiLCJoYXNQcm9wc0NoYW5nZWQiLCJkeW5hbWljUHJvcHMiLCJuZXh0S2V5cyIsInVwZGF0ZUhPQ0hvc3RFbCIsImlzU3VzcGVuc2UiLCJxdWV1ZUVmZmVjdFdpdGhTdXNwZW5zZSIsInN1c3BlbnNlIiwicHJvdmlkZSIsImN1cnJlbnRJbnN0YW5jZSIsInByb3ZpZGVzIiwicGFyZW50UHJvdmlkZXMiLCJpbmplY3QiLCJ0cmVhdERlZmF1bHRBc0ZhY3RvcnkiLCJJTklUSUFMX1dBVENIRVJfVkFMVUUiLCJ3YXRjaCIsImRvV2F0Y2giLCJpbW1lZGlhdGUiLCJkZWVwIiwiZmx1c2giLCJvblRyYWNrIiwib25UcmlnZ2VyIiwid2FybkludmFsaWRTb3VyY2UiLCJmb3JjZVRyaWdnZXIiLCJpc011bHRpU291cmNlIiwiaXNTaGFsbG93JDEiLCJ0cmF2ZXJzZSIsImNsZWFudXAiLCJvbkNsZWFudXAiLCJiYXNlR2V0dGVyIiwic3NyQ2xlYW51cCIsImlzSW5TU1JDb21wb25lbnRTZXR1cCIsInVzZVNTUkNvbnRleHQiLCJxdWV1ZVBvc3RSZW5kZXJFZmZlY3QiLCJ1bndhdGNoIiwiaW5zdGFuY2VXYXRjaCIsInB1YmxpY1RoaXMiLCJjcmVhdGVQYXRoR2V0dGVyIiwic2V0Q3VycmVudEluc3RhbmNlIiwidW5zZXRDdXJyZW50SW5zdGFuY2UiLCJzZWdtZW50cyIsImRlZmluZUNvbXBvbmVudCIsImlzQXN5bmNXcmFwcGVyIiwiaXNLZWVwQWxpdmUiLCJvbkFjdGl2YXRlZCIsInJlZ2lzdGVyS2VlcEFsaXZlSG9vayIsIm9uRGVhY3RpdmF0ZWQiLCJ3cmFwcGVkSG9vayIsImluamVjdEhvb2siLCJpbmplY3RUb0tlZXBBbGl2ZVJvb3QiLCJrZWVwQWxpdmVSb290IiwiaW5qZWN0ZWQiLCJvblVubW91bnRlZCIsInByZXBlbmQiLCJob29rcyIsImFwaU5hbWUiLCJjcmVhdGVIb29rIiwibGlmZWN5Y2xlIiwib25CZWZvcmVNb3VudCIsIm9uTW91bnRlZCIsIm9uQmVmb3JlVXBkYXRlIiwib25VcGRhdGVkIiwib25CZWZvcmVVbm1vdW50Iiwib25TZXJ2ZXJQcmVmZXRjaCIsIm9uUmVuZGVyVHJpZ2dlcmVkIiwib25SZW5kZXJUcmFja2VkIiwib25FcnJvckNhcHR1cmVkIiwidmFsaWRhdGVEaXJlY3RpdmVOYW1lIiwiaW52b2tlRGlyZWN0aXZlSG9vayIsImJpbmRpbmdzIiwib2xkQmluZGluZ3MiLCJiaW5kaW5nIiwiTlVMTF9EWU5BTUlDX0NPTVBPTkVOVCIsImdldFB1YmxpY0luc3RhbmNlIiwiaXNTdGF0ZWZ1bENvbXBvbmVudCIsImdldEV4cG9zZVByb3h5IiwicHVibGljUHJvcGVydGllc01hcCIsInJlc29sdmVNZXJnZWRPcHRpb25zIiwiaXNSZXNlcnZlZFByZWZpeCIsImhhc1NldHVwQmluZGluZyIsInN0YXRlIiwiUHVibGljSW5zdGFuY2VQcm94eUhhbmRsZXJzIiwiYWNjZXNzQ2FjaGUiLCJub3JtYWxpemVkUHJvcHMiLCJzaG91bGRDYWNoZUFjY2VzcyIsInB1YmxpY0dldHRlciIsImNzc01vZHVsZSIsImdsb2JhbFByb3BlcnRpZXMiLCJkZXNjcmlwdG9yIiwiY3JlYXRlRGV2UmVuZGVyQ29udGV4dCIsImV4cG9zZVByb3BzT25SZW5kZXJDb250ZXh0IiwiZXhwb3NlU2V0dXBTdGF0ZU9uUmVuZGVyQ29udGV4dCIsImNyZWF0ZUR1cGxpY2F0ZUNoZWNrZXIiLCJhcHBseU9wdGlvbnMiLCJjYWxsSG9vayIsImRhdGFPcHRpb25zIiwiY29tcHV0ZWRPcHRpb25zIiwibWV0aG9kcyIsIndhdGNoT3B0aW9ucyIsInByb3ZpZGVPcHRpb25zIiwiaW5qZWN0T3B0aW9ucyIsImNyZWF0ZWQiLCJiZWZvcmVNb3VudCIsIm1vdW50ZWQiLCJiZWZvcmVVcGRhdGUiLCJ1cGRhdGVkIiwiYWN0aXZhdGVkIiwiZGVhY3RpdmF0ZWQiLCJiZWZvcmVEZXN0cm95IiwiYmVmb3JlVW5tb3VudCIsImRlc3Ryb3llZCIsInVubW91bnRlZCIsInJlbmRlclRyYWNrZWQiLCJyZW5kZXJUcmlnZ2VyZWQiLCJlcnJvckNhcHR1cmVkIiwic2VydmVyUHJlZmV0Y2giLCJleHBvc2UiLCJjb21wb25lbnRzIiwiZGlyZWN0aXZlcyIsImZpbHRlcnMiLCJjaGVja0R1cGxpY2F0ZVByb3BlcnRpZXMiLCJyZXNvbHZlSW5qZWN0aW9ucyIsIm1ldGhvZEhhbmRsZXIiLCJvcHQiLCJjcmVhdGVXYXRjaGVyIiwicmVnaXN0ZXJMaWZlY3ljbGVIb29rIiwicmVnaXN0ZXIiLCJfaG9vayIsImV4cG9zZWQiLCJ1bndyYXBSZWYiLCJub3JtYWxpemVJbmplY3QiLCJoIiwiYmFzZSIsIm1peGlucyIsImV4dGVuZHNPcHRpb25zIiwiZ2xvYmFsTWl4aW5zIiwib3B0aW9uTWVyZ2VTdHJhdGVnaWVzIiwicmVzb2x2ZWQiLCJtIiwibWVyZ2VPcHRpb25zIiwic3RyYXRzIiwic3RyYXQiLCJpbnRlcm5hbE9wdGlvbk1lcmdlU3RyYXRzIiwibWVyZ2VEYXRhRm4iLCJtZXJnZU9iamVjdE9wdGlvbnMiLCJtZXJnZUFzQXJyYXkiLCJtZXJnZVdhdGNoT3B0aW9ucyIsIm1lcmdlSW5qZWN0IiwibWVyZ2VkIiwiaW5pdFByb3BzIiwicmF3UHJvcHMiLCJpc1N0YXRlZnVsIiwiSW50ZXJuYWxPYmplY3RLZXkiLCJzZXRGdWxsUHJvcHMiLCJ2YWxpZGF0ZVByb3BzIiwiaXNJbkhtckNvbnRleHQiLCJ1cGRhdGVQcm9wcyIsInJhd1ByZXZQcm9wcyIsInJhd0N1cnJlbnRQcm9wcyIsImhhc0F0dHJzQ2hhbmdlZCIsInByb3BzVG9VcGRhdGUiLCJjYW1lbGl6ZWRLZXkiLCJyZXNvbHZlUHJvcFZhbHVlIiwia2ViYWJLZXkiLCJuZWVkQ2FzdEtleXMiLCJyYXdDYXN0VmFsdWVzIiwiY2FtZWxLZXkiLCJjYXN0VmFsdWVzIiwiaXNBYnNlbnQiLCJoYXNEZWZhdWx0IiwicHJvcHNEZWZhdWx0cyIsIm5vcm1hbGl6ZVByb3BzT3B0aW9ucyIsImV4dGVuZFByb3BzIiwibm9ybWFsaXplZEtleSIsInZhbGlkYXRlUHJvcE5hbWUiLCJib29sZWFuSW5kZXgiLCJnZXRUeXBlSW5kZXgiLCJzdHJpbmdJbmRleCIsImdldFR5cGUiLCJjdG9yIiwibWF0Y2giLCJpc1NhbWVUeXBlIiwiZXhwZWN0ZWRUeXBlcyIsInQiLCJyZXNvbHZlZFZhbHVlcyIsInZhbGlkYXRlUHJvcCIsInJlcXVpcmVkIiwiaXNWYWxpZCIsInR5cGVzIiwidmFsaWQiLCJleHBlY3RlZFR5cGUiLCJhc3NlcnRUeXBlIiwiZ2V0SW52YWxpZFR5cGVNZXNzYWdlIiwiaXNTaW1wbGVUeXBlIiwicmVjZWl2ZWRUeXBlIiwiZXhwZWN0ZWRWYWx1ZSIsInN0eWxlVmFsdWUiLCJyZWNlaXZlZFZhbHVlIiwiaXNFeHBsaWNhYmxlIiwiaXNCb29sZWFuIiwiZWxlbSIsImlzSW50ZXJuYWxLZXkiLCJub3JtYWxpemVTbG90VmFsdWUiLCJub3JtYWxpemVTbG90IiwicmF3U2xvdCIsIm5vcm1hbGl6ZU9iamVjdFNsb3RzIiwicmF3U2xvdHMiLCJub3JtYWxpemVWTm9kZVNsb3RzIiwiaW5pdFNsb3RzIiwidXBkYXRlU2xvdHMiLCJuZWVkRGVsZXRpb25DaGVjayIsImRlbGV0aW9uQ29tcGFyaXNvblRhcmdldCIsImNyZWF0ZUFwcENvbnRleHQiLCJ1aWQiLCJjcmVhdGVBcHBBUEkiLCJoeWRyYXRlIiwicm9vdENvbXBvbmVudCIsInJvb3RQcm9wcyIsImluc3RhbGxlZFBsdWdpbnMiLCJpc01vdW50ZWQiLCJwbHVnaW4iLCJtaXhpbiIsInZhbGlkYXRlQ29tcG9uZW50TmFtZSIsImRpcmVjdGl2ZSIsInJvb3RDb250YWluZXIiLCJpc0h5ZHJhdGUiLCJpc1NWRyIsInNldFJlZiIsInJhd1JlZiIsIm9sZFJhd1JlZiIsInBhcmVudFN1c3BlbnNlIiwiaXNVbm1vdW50IiwicmVmVmFsdWUiLCJvd25lciIsIm9sZFJlZiIsInJlZnMiLCJfaXNTdHJpbmciLCJfaXNSZWYiLCJkb1NldCIsImV4aXN0aW5nIiwic3VwcG9ydGVkIiwicGVyZiIsInN0YXJ0TWVhc3VyZSIsImlzU3VwcG9ydGVkIiwiZW5kTWVhc3VyZSIsInN0YXJ0VGFnIiwiZW5kVGFnIiwiaW5pdEZlYXR1cmVGbGFncyIsIm5lZWRXYXJuIiwibXVsdGkiLCJjcmVhdGVSZW5kZXJlciIsImJhc2VDcmVhdGVSZW5kZXJlciIsImNyZWF0ZUh5ZHJhdGlvbkZucyIsImhvc3RJbnNlcnQiLCJob3N0UmVtb3ZlIiwiaG9zdFBhdGNoUHJvcCIsImhvc3RDcmVhdGVFbGVtZW50IiwiaG9zdENyZWF0ZVRleHQiLCJob3N0Q3JlYXRlQ29tbWVudCIsImhvc3RTZXRUZXh0IiwiaG9zdFNldEVsZW1lbnRUZXh0IiwiaG9zdFBhcmVudE5vZGUiLCJob3N0TmV4dFNpYmxpbmciLCJob3N0U2V0U2NvcGVJZCIsImhvc3RJbnNlcnRTdGF0aWNDb250ZW50IiwicGF0Y2giLCJuMSIsIm4yIiwiY29udGFpbmVyIiwiYW5jaG9yIiwicGFyZW50Q29tcG9uZW50Iiwic2xvdFNjb3BlSWRzIiwiaXNTYW1lVk5vZGVUeXBlIiwiZ2V0TmV4dEhvc3ROb2RlIiwidW5tb3VudCIsInByb2Nlc3NUZXh0IiwicHJvY2Vzc0NvbW1lbnROb2RlIiwibW91bnRTdGF0aWNOb2RlIiwicGF0Y2hTdGF0aWNOb2RlIiwicHJvY2Vzc0ZyYWdtZW50IiwicHJvY2Vzc0VsZW1lbnQiLCJwcm9jZXNzQ29tcG9uZW50IiwiaW50ZXJuYWxzIiwicmVtb3ZlU3RhdGljTm9kZSIsIm1vdmVTdGF0aWNOb2RlIiwibmV4dFNpYmxpbmciLCJuZXh0IiwibW91bnRFbGVtZW50IiwicGF0Y2hFbGVtZW50Iiwidm5vZGVIb29rIiwidHJhbnNpdGlvbiIsImRpcnMiLCJtb3VudENoaWxkcmVuIiwidW5tb3VudENoaWxkcmVuIiwiaW52b2tlVk5vZGVIb29rIiwic2V0U2NvcGVJZCIsIm5lZWRDYWxsVHJhbnNpdGlvbkhvb2tzIiwic2NvcGVJZCIsInN1YlRyZWUiLCJwYXJlbnRWTm9kZSIsImNsb25lSWZNb3VudGVkIiwib2xkUHJvcHMiLCJuZXdQcm9wcyIsInRvZ2dsZVJlY3Vyc2UiLCJhcmVDaGlsZHJlblNWRyIsInBhdGNoQmxvY2tDaGlsZHJlbiIsInRyYXZlcnNlU3RhdGljQ2hpbGRyZW4iLCJwYXRjaENoaWxkcmVuIiwicGF0Y2hQcm9wcyIsIm9sZENoaWxkcmVuIiwibmV3Q2hpbGRyZW4iLCJmYWxsYmFja0NvbnRhaW5lciIsIm9sZFZOb2RlIiwibmV3Vk5vZGUiLCJmcmFnbWVudFN0YXJ0QW5jaG9yIiwiZnJhZ21lbnRFbmRBbmNob3IiLCJmcmFnbWVudFNsb3RTY29wZUlkcyIsIm1vdW50Q29tcG9uZW50IiwidXBkYXRlQ29tcG9uZW50IiwiaW5pdGlhbFZOb2RlIiwiY3JlYXRlQ29tcG9uZW50SW5zdGFuY2UiLCJzZXR1cENvbXBvbmVudCIsInNldHVwUmVuZGVyRWZmZWN0IiwicGxhY2Vob2xkZXIiLCJ1cGRhdGVDb21wb25lbnRQcmVSZW5kZXIiLCJjb21wb25lbnRVcGRhdGVGbiIsImJ1IiwidSIsIm9yaWdpbk5leHQiLCJuZXh0VHJlZSIsInByZXZUcmVlIiwiYm0iLCJpc0FzeW5jV3JhcHBlclZOb2RlIiwiaHlkcmF0ZU5vZGUiLCJoeWRyYXRlU3ViVHJlZSIsInNjb3BlZEluaXRpYWxWTm9kZSIsInVwZGF0ZSIsImMxIiwicHJldlNoYXBlRmxhZyIsImMyIiwicGF0Y2hLZXllZENoaWxkcmVuIiwicGF0Y2hVbmtleWVkQ2hpbGRyZW4iLCJvbGRMZW5ndGgiLCJjb21tb25MZW5ndGgiLCJuZXh0Q2hpbGQiLCJwYXJlbnRBbmNob3IiLCJsMiIsImUxIiwiZTIiLCJuZXh0UG9zIiwiczEiLCJzMiIsImtleVRvTmV3SW5kZXhNYXAiLCJwYXRjaGVkIiwidG9CZVBhdGNoZWQiLCJtb3ZlZCIsIm1heE5ld0luZGV4U29GYXIiLCJuZXdJbmRleFRvT2xkSW5kZXhNYXAiLCJwcmV2Q2hpbGQiLCJuZXdJbmRleCIsImluY3JlYXNpbmdOZXdJbmRleFNlcXVlbmNlIiwiZ2V0U2VxdWVuY2UiLCJuZXh0SW5kZXgiLCJtb3ZlIiwibW92ZVR5cGUiLCJsZWF2ZSIsImRlbGF5TGVhdmUiLCJhZnRlckxlYXZlIiwicGVyZm9ybUxlYXZlIiwiZG9SZW1vdmUiLCJzaG91bGRJbnZva2VEaXJzIiwic2hvdWxkSW52b2tlVm5vZGVIb29rIiwidW5tb3VudENvbXBvbmVudCIsInJlbW92ZUZyYWdtZW50IiwicGVyZm9ybVJlbW92ZSIsImJ1bSIsInVtIiwiYWxsb3dlZCIsImNoMSIsImNoMiIsImFyckkiLCJpc1RlbGVwb3J0IiwiY3VycmVudEJsb2NrIiwiaXNCbG9ja1RyZWVFbmFibGVkIiwiY3JlYXRlVk5vZGVXaXRoQXJnc1RyYW5zZm9ybSIsIl9jcmVhdGVWTm9kZSIsIm5vcm1hbGl6ZUtleSIsIm5vcm1hbGl6ZVJlZiIsInJlZl9rZXkiLCJyZWZfZm9yIiwiY3JlYXRlQmFzZVZOb2RlIiwiaXNCbG9ja05vZGUiLCJuZWVkRnVsbENoaWxkcmVuTm9ybWFsaXphdGlvbiIsIm5vcm1hbGl6ZUNoaWxkcmVuIiwiY2xvbmVkIiwiZ3VhcmRSZWFjdGl2ZVByb3BzIiwia2xhc3MiLCJleHRyYVByb3BzIiwibWVyZ2VSZWYiLCJtZXJnZWRQcm9wcyIsIm1lcmdlUHJvcHMiLCJkZWVwQ2xvbmVWTm9kZSIsImNyZWF0ZVRleHRWTm9kZSIsImZsYWciLCJzbG90Iiwic2xvdEZsYWciLCJ0b01lcmdlIiwiaW5jb21pbmciLCJlbXB0eUFwcENvbnRleHQiLCJ1aWQkMSIsImdldEN1cnJlbnRJbnN0YW5jZSIsImlzQnVpbHRJblRhZyIsImFwcElzTmF0aXZlVGFnIiwic2V0dXBSZXN1bHQiLCJzZXR1cFN0YXRlZnVsQ29tcG9uZW50IiwibmFtZXMiLCJpc1J1bnRpbWVPbmx5Iiwic2V0dXAiLCJzZXR1cENvbnRleHQiLCJjcmVhdGVTZXR1cENvbnRleHQiLCJyZXNvbHZlZFJlc3VsdCIsImhhbmRsZVNldHVwUmVzdWx0IiwiZmluaXNoQ29tcG9uZW50U2V0dXAiLCJjb21waWxlIiwic2tpcE9wdGlvbnMiLCJpc0N1c3RvbUVsZW1lbnQiLCJjb21waWxlck9wdGlvbnMiLCJkZWxpbWl0ZXJzIiwiY29tcG9uZW50Q29tcGlsZXJPcHRpb25zIiwiZmluYWxDb21waWxlck9wdGlvbnMiLCJjcmVhdGVBdHRyc1Byb3h5IiwiY2xhc3NpZnlSRSIsImNsYXNzaWZ5IiwiaW5jbHVkZUluZmVycmVkIiwiaW5mZXJGcm9tUmVnaXN0cnkiLCJyZWdpc3RyeSIsImNvbXB1dGVkJDEiLCJzc3JDb250ZXh0S2V5IiwiaW5pdEN1c3RvbUZvcm1hdHRlciIsInZ1ZVN0eWxlIiwibnVtYmVyU3R5bGUiLCJzdHJpbmdTdHlsZSIsImtleXdvcmRTdHlsZSIsImZvcm1hdHRlciIsImdlblJlZkZsYWciLCJmb3JtYXRWYWx1ZSIsImZvcm1hdEluc3RhbmNlIiwiYmxvY2tzIiwiY3JlYXRlSW5zdGFuY2VCbG9jayIsImV4dHJhY3RLZXlzIiwiYXNSYXciLCJDb21wIiwiZXh0cmFjdGVkIiwiaXNLZXlPZlR5cGUiLCJvcHRzIiwic3ZnTlMiLCJkb2MiLCJ0ZW1wbGF0ZUNvbnRhaW5lciIsIm5vZGVPcHMiLCJ0YWciLCJpcyIsInNlbGVjdG9yIiwiY29udGVudCIsImJlZm9yZSIsInBhdGNoQ2xhc3MiLCJ0cmFuc2l0aW9uQ2xhc3NlcyIsInBhdGNoU3R5bGUiLCJpc0Nzc1N0cmluZyIsInNldFN0eWxlIiwiY3VycmVudERpc3BsYXkiLCJzZW1pY29sb25SRSIsImltcG9ydGFudFJFIiwicHJlZml4ZWQiLCJhdXRvUHJlZml4IiwicHJlZml4ZXMiLCJwcmVmaXhDYWNoZSIsInJhd05hbWUiLCJ4bGlua05TIiwicGF0Y2hBdHRyIiwicGF0Y2hET01Qcm9wIiwibmVlZFJlbW92ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicGF0Y2hFdmVudCIsInByZXZWYWx1ZSIsIm5leHRWYWx1ZSIsImludm9rZXJzIiwiZXhpc3RpbmdJbnZva2VyIiwicGFyc2VOYW1lIiwiaW52b2tlciIsImNyZWF0ZUludm9rZXIiLCJvcHRpb25zTW9kaWZpZXJSRSIsImNhY2hlZE5vdyIsImdldE5vdyIsImluaXRpYWxWYWx1ZSIsInBhdGNoU3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uIiwib3JpZ2luYWxTdG9wIiwibmF0aXZlT25SRSIsInBhdGNoUHJvcCIsInNob3VsZFNldEFzUHJvcCIsInJlbmRlcmVyT3B0aW9ucyIsInJlbmRlcmVyIiwiZW5zdXJlUmVuZGVyZXIiLCJjcmVhdGVBcHAiLCJpbmplY3ROYXRpdmVUYWdDaGVjayIsImluamVjdENvbXBpbGVyT3B0aW9uc0NoZWNrIiwibW91bnQiLCJjb250YWluZXJPclNlbGVjdG9yIiwibm9ybWFsaXplQ29udGFpbmVyIiwiaW5pdERldiIsImlzVnVlMiIsImRlbCIsImdldERldnRvb2xzR2xvYmFsSG9vayIsImdldFRhcmdldCIsImlzUHJveHlBdmFpbGFibGUiLCJIT09LX1NFVFVQIiwiSE9PS19QTFVHSU5fU0VUVElOR1NfU0VUIiwiaXNQZXJmb3JtYW5jZVN1cHBvcnRlZCIsIm5vdyIsIkFwaVByb3h5IiwiZGVmYXVsdFNldHRpbmdzIiwibG9jYWxTZXR0aW5nc1NhdmVJZCIsImN1cnJlbnRTZXR0aW5ncyIsInBsdWdpbklkIiwiX3RhcmdldCIsInNldHVwRGV2dG9vbHNQbHVnaW4iLCJwbHVnaW5EZXNjcmlwdG9yIiwic2V0dXBGbiIsImVuYWJsZVByb3h5IiwiYWN0aXZlUGluaWEiLCJzZXRBY3RpdmVQaW5pYSIsInBpbmlhIiwicGluaWFTeW1ib2wiLCJNdXRhdGlvblR5cGUiLCJJU19DTElFTlQiLCJVU0VfREVWVE9PTFMiLCJfZ2xvYmFsIiwiYm9tIiwiYmxvYiIsImF1dG9Cb20iLCJkb3dubG9hZCIsInhociIsInNhdmVBcyIsImNvcnNFbmFibGVkIiwiY2xpY2siLCJldnQiLCJfbmF2aWdhdG9yIiwiaXNNYWNPU1dlYlZpZXciLCJkb3dubG9hZFNhdmVBcyIsIm1zU2F2ZUFzIiwiZmlsZVNhdmVyU2F2ZUFzIiwicG9wdXAiLCJmb3JjZSIsImlzU2FmYXJpIiwiaXNDaHJvbWVJT1MiLCJyZWFkZXIiLCJ0b2FzdE1lc3NhZ2UiLCJwaW5pYU1lc3NhZ2UiLCJpc1BpbmlhIiwiY2hlY2tDbGlwYm9hcmRBY2Nlc3MiLCJjaGVja05vdEZvY3VzZWRFcnJvciIsImFjdGlvbkdsb2JhbENvcHlTdGF0ZSIsImFjdGlvbkdsb2JhbFBhc3RlU3RhdGUiLCJhY3Rpb25HbG9iYWxTYXZlU3RhdGUiLCJmaWxlSW5wdXQiLCJnZXRGaWxlT3BlbmVyIiwib3BlbkZpbGUiLCJmaWxlcyIsImZpbGUiLCJhY3Rpb25HbG9iYWxPcGVuU3RhdGVGaWxlIiwiZm9ybWF0RGlzcGxheSIsImRpc3BsYXkiLCJQSU5JQV9ST09UX0xBQkVMIiwiUElOSUFfUk9PVF9JRCIsImZvcm1hdFN0b3JlRm9ySW5zcGVjdG9yVHJlZSIsInN0b3JlIiwiZm9ybWF0U3RvcmVGb3JJbnNwZWN0b3JTdGF0ZSIsInN0b3JlTmFtZXMiLCJzdG9yZU1hcCIsInN0b3JlSWQiLCJnZXR0ZXJzIiwiZ2V0dGVyTmFtZSIsImZvcm1hdEV2ZW50RGF0YSIsImV2ZW50cyIsImZvcm1hdE11dGF0aW9uVHlwZSIsImlzVGltZWxpbmVBY3RpdmUiLCJjb21wb25lbnRTdGF0ZVR5cGVzIiwiTVVUQVRJT05TX0xBWUVSX0lEIiwiSU5TUEVDVE9SX0lEIiwiZ2V0U3RvcmVUeXBlIiwicmVnaXN0ZXJQaW5pYURldnRvb2xzIiwiYXBpIiwibm9kZUlkIiwicGF5bG9hZCIsInBpbmlhU3RvcmVzIiwic3RvcmVzIiwiaW5zcGVjdGVkU3RvcmUiLCJhZGRTdG9yZVRvRGV2dG9vbHMiLCJhZnRlciIsIm9uRXJyb3IiLCJncm91cElkIiwicnVubmluZ0FjdGlvbklkIiwiYWN0aXZlQWN0aW9uIiwiZXZlbnREYXRhIiwiaG90VXBkYXRlIiwibmV3U3RvcmUiLCIkZGlzcG9zZSIsInBhdGNoQWN0aW9uRm9yR3JvdXBpbmciLCJhY3Rpb25OYW1lcyIsImFjdGlvbnMiLCJzdG9yZUFjdGlvbnMiLCJhY3Rpb25OYW1lIiwiX2FjdGlvbklkIiwidHJhY2tlZFN0b3JlIiwiZGV2dG9vbHNQbHVnaW4iLCJvcmlnaW5hbEhvdFVwZGF0ZSIsImNyZWF0ZVBpbmlhIiwidG9CZUluc3RhbGxlZCIsInBhdGNoT2JqZWN0IiwibmV3U3RhdGUiLCJvbGRTdGF0ZSIsInN1YlBhdGNoIiwidGFyZ2V0VmFsdWUiLCJub29wIiwiYWRkU3Vic2NyaXB0aW9uIiwic3Vic2NyaXB0aW9ucyIsInJlbW92ZVN1YnNjcmlwdGlvbiIsImlkeCIsInRyaWdnZXJTdWJzY3JpcHRpb25zIiwibWVyZ2VSZWFjdGl2ZU9iamVjdHMiLCJwYXRjaFRvQXBwbHkiLCJza2lwSHlkcmF0ZVN5bWJvbCIsInNob3VsZEh5ZHJhdGUiLCJhc3NpZ24iLCJpc0NvbXB1dGVkIiwiY3JlYXRlT3B0aW9uc1N0b3JlIiwiaG90IiwiaW5pdGlhbFN0YXRlIiwibG9jYWxTdGF0ZSIsImNvbXB1dGVkR2V0dGVycyIsImNyZWF0ZVNldHVwU3RvcmUiLCIkc3RhdGUiLCIkaWQiLCJpc09wdGlvbnNTdG9yZSIsIm9wdGlvbnNGb3JQbHVnaW4iLCIkc3Vic2NyaWJlT3B0aW9ucyIsImlzTGlzdGVuaW5nIiwiZGVidWdnZXJFdmVudHMiLCJpc1N5bmNMaXN0ZW5pbmciLCJhY3Rpb25TdWJzY3JpcHRpb25zIiwiaG90U3RhdGUiLCJhY3RpdmVMaXN0ZW5lciIsIiRwYXRjaCIsInBhcnRpYWxTdGF0ZU9yTXV0YXRvciIsInN1YnNjcmlwdGlvbk11dGF0aW9uIiwibXlMaXN0ZW5lcklkIiwiJHJlc2V0Iiwid3JhcEFjdGlvbiIsImFjdGlvbiIsImFmdGVyQ2FsbGJhY2tMaXN0Iiwib25FcnJvckNhbGxiYWNrTGlzdCIsIl9obXJQYXlsb2FkIiwicGFydGlhbFN0b3JlIiwic3RvcFdhdGNoZXIiLCJzZXR1cFN0b3JlIiwiYWN0aW9uVmFsdWUiLCJzdGF0ZUtleSIsIm5ld1N0YXRlVGFyZ2V0Iiwib2xkU3RhdGVTb3VyY2UiLCJnZXR0ZXJWYWx1ZSIsIm5vbkVudW1lcmFibGUiLCJleHRlbmRlciIsImV4dGVuc2lvbnMiLCJkZWZpbmVTdG9yZSIsImlkT3JPcHRpb25zIiwic2V0dXBPcHRpb25zIiwiaXNTZXR1cFN0b3JlIiwidXNlU3RvcmUiLCJob3RJZCIsInZtIiwiU2F2ZVN0YXRlIiwiZGVmYXVsdHMiLCJkZWZpbmVJbW11dGFibGVTdG9yZSIsImhhc1dlYnNvY2tldERCcyIsInN1cHBvcnRzV2Vic29ja2V0Rm9jdXMiLCJmaXJzdFRleHRGaWVsZEluZGV4IiwiZmlyc3RQYXNzd29yZEZpZWxkSW5kZXgiLCJvcmlnaW5hbEZpZWxkSW5kZXgiLCJuZXdVc2VybmFtZUluZGV4IiwibmV3VXNlcm5hbWUiLCJuZXdQYXNzd29yZEluZGV4IiwibmV3UGFzc3dvcmQiLCJzdHViVnVlQXBwIiwic3R1YlBpbmlhIiwidXNlU3R1YlN0b3JlIiwiRm9ybUZpbGxpbmciLCJmb3JtU2F2aW5nIiwiTG9nZ2VyIiwibWF0Y2hGaW5kZXIiLCJzcGVjaWZpY0ZyYW1lSWQiLCJtYXRjaGVkRmllbGQiLCJkYXRhRmllbGQiLCJfY3VycmVudFBhZ2UiLCJpc1Zpc2libGUiLCJmb3JtRmllbGQiLCJzY29yZSIsImZpZWxkU2NvcmVNYXRyaXgiLCJkYXRhRmllbGRzIiwiZm9ybUZpZWxkcyIsImF1dG9tYXRlZCIsImZpbGxlZEZpZWxkcyIsImZmaSIsImRmaSIsImRvbUVsZW1lbnQiLCJjdXJyZW50VmFsdWUiLCJmaWVsZFR5cGUiLCJjdXJyZW50UGFnZSIsInNjb3JlQ29uZmlnIiwiYmVoYXZpb3VyIiwiZm9ybXMiLCJwc2V1ZG9Gb3JtIiwic2VhcmNoU2VudFRvS2VlUGFzcyIsInNjYW5SZXN1bHQiLCJpbnRlcmVzdGluZ0Zvcm0iLCJub1Bhc3N3b3JkRmllbGQiLCJub090aGVyRmllbGQiLCJzdWJtaXRUYXJnZXROZWlnaGJvdXIiLCJmb3JtTnVtYmVyIiwic3VibWl0VGFyZ2V0Iiwib3JwaGFuZWRGaWVsZHMiLCJ0biIsInZhbGlkRW50cmllcyIsImZpbmRMb2dpbk9wIiwibWF0Y2hSZXN1bHQiLCJjclN0cmluZyIsImZpcnN0TWF0Y2hQcm9jZXNzZWQiLCJmb3JtVmlzaWJsZSIsInZpc2libGVGaWVsZENhY2hlIiwiZmllbGRNYXRjaFNjb3JlQ29uZmlnIiwibG93RmllbGRNYXRjaFJhdGlvIiwiZm9ybUluZGV4IiwiZmluZE1hdGNoZXNSZXN1bHQiLCJtb3N0UmVsZXZhbnRGb3JtSW5kZXgiLCJlbnRyeUluZGV4IiwiaXNNYXRjaGVkTG9naW5SZXF1ZXN0Iiwib3JkZXJlZEVudHJpZXMiLCJvcmRlcmVkRW50cmllc1dpdGhQcmVmZXJlbmNlIiwibWF0Y2hpbmdMb2dpbiIsIm11bHRpcGxlTWF0Y2hlcyIsImNoZWNrTWF0Y2hpbmdMb2dpblJlbGV2YW5jZVRocmVzaG9sZCIsImF1dG9GaWxsRW5hYmxlZCIsImF1dG9TdWJtaXRFbmFibGVkIiwibGFzdEZpbGxlZE90aGVyIiwibGFzdEZpbGxlZFBhc3N3b3JkcyIsImNhbmRpZGF0ZXMiLCJtaW5TY29yZVRvV2luIiwiZGlzdGFuY2VDYWxjIiwiZGlzdGFuY2VNYXAiLCJmVXRpbHMiLCJ2ZXJpZnlQb3RlbnRpYWxDYW5kaWRhdGUiLCJyZXNvbHZlQXJpYUxhYmVsVmFsdWVzIiwic2VtYW50aWNWYWx1ZXMiLCJzZW1hbnRpY1Njb3JlIiwic3VibWl0RWxlbWVudHMiLCJtYXhEaXN0YW5jZURpZmZlcmVuY2UiLCJkaXN0YW5jZVNjb3JlIiwiZGlzdGFuY2VGYWN0b3IiLCJsYXN0RGlzdGFuY2UiLCJjYW5kaWRhdGUiLCJlbGVtZW50cyIsIm1heFNjb3JlIiwibWF4U2NvcmVFbGVtZW50IiwiZmFjdG9yIiwic2VtYW50aWNXaGl0ZWxpc3RDYWNoZSIsInNlbWFudGljQmxhY2tsaXN0Q2FjaGUiLCJnb29kV29yZHMiLCJiYWRXb3JkcyIsImdvb2RTY29yZSIsImJhZFNjb3JlIiwic2VtYW50aWNWYWx1ZSIsIm5vZGVBIiwibm9kZUIiLCJkaXN0YW5jZSIsImZvdW5kIiwicGVuZGluZ01hcCIsInBlbmRpbmdNYXBTdGFydERpc3RhbmNlIiwiY2FjaGVkTm9kZURpc3RhbmNlIiwic3VibWl0RWxlbWVudCIsIm1pbk1hdGNoZWRGaWVsZENvdW50UmF0aW8iLCJvdGhlclJlbGV2YW5jZVNjb3JlIiwib3RoZXJGaWVsZE1hdGNoU3VjY2Vzc2VzIiwicGFzc3dvcmRSZWxldmFuY2VTY29yZSIsInBhc3N3b3JkRmllbGRNYXRjaFN1Y2Nlc3NlcyIsInRvdGFsUmVsZXZhbmNlU2NvcmUiLCJmb3JtRmllbGRDb3VudCIsImxvZ2luRmllbGRDb3VudCIsImZvcm1GaWVsZENvdW50Rm9yQXV0b2ZpbGwiLCJsb2dpbkZpZWxkQ291bnRGb3JBdXRvZmlsbCIsImZvcm1NYXRjaGVkRmllbGRDb3VudEZvckF1dG9maWxsIiwibnVtYmVyT2ZOZXdQYXNzd29yZEZpZWxkcyIsImZpZWxkTWF0Y2hSYXRpb0ZvckF1dG9maWxsIiwiYWRqdXN0ZWRSZWxldmFuY2UiLCJkZWJ1Z05hbWUiLCJtYXRjaGVkRmllbGRzIiwiZW50cnlGaWVsZHMiLCJ2aXNpYmxlRmllbGRNYXAiLCJtaW5GaWVsZFJlbGV2YW5jZSIsImZpZWxkTWF0Y2hTdWNjZXNzZXMiLCJtb3N0UmVsZXZhbnRTY29yZSIsImZtU2NvcmUiLCJmbVNjb3JlRm9yUmF0aW8iLCJNYXRjaGVkRmllbGQiLCJGb3JtVXRpbHMiLCJsb2dnZXIiLCJmcmFtZSIsImxvY2FsRG9jQ291bnQiLCJmcmFtZXMiLCJ1cmkiLCJmaWVsZE5hbWVJbiIsImZpZWxkTmFtZSIsImlzU3VibWlzc2lvbiIsIm1heGltdW1GaWVsZENvdW50IiwicHdGaWVsZHMiLCJhbGxGaWVsZHMiLCJmaXJzdFBvc3NpYmxlVXNlcm5hbWVJbmRleCIsInRvdGFsRWxlbWVudHMiLCJlbGVtZW50TGltaXQiLCJmaWVsZFZhbHVlIiwib3RoZXJDb3VudCIsImFjdHVhbFVzZXJuYW1lSW5kZXgiLCJGb3JtU2F2aW5nIiwiZm9ybVRvU3VibWl0IiwiYXR0YWNobWVudCIsImlzUGFzc3dvcmRDaGFuZ2VGb3JtIiwiaXNSZWdpc3RyYXRpb25Gb3JtIiwiZXgiLCJ0d29QYXNzd29yZHNNYXRjaEluZGV4Iiwibm9uRW1wdHlQYXNzd29yZEZpZWxkcyIsIm5vbkVtcHR5T3RoZXJGaWVsZHMiLCJkaWZmZXJlbnRQYXNzd29yZCIsImRpZmZlcmVudE90aGVyIiwic3VibWl0dGVkRGF0YSIsIm5ld2x5U3VibWl0dGVkRmllbGRzIiwicHJldmlvdXNseUZpbGxlZEZpZWxkcyIsImZpbGxlZEZpZWxkIiwic3VibWl0dGVkRmllbGQiLCJwYW5lbE9wdGlvbnMiLCJQYXNzd29yZEdlbmVyYXRvciIsIlN5bmNDb250ZW50Iiwic2VuZE11dGF0aW9uIiwidnVlTW91bnQiLCJtdXRhdGlvbiIsIkNvbnRlbnRQb3J0TWFuYWdlciIsImJyb3dzZXIucnVudGltZSIsIlBvcnQiLCJrZWVEdXBsaWNhdGlvbkNvdW50IiwiZm9ybUZpbGxpbmciLCJwYXNzd29yZEdlbmVyYXRvciIsImZyYW1lSWQiLCJzeW5jQ29udGVudCIsImNvbm5lY3RlZCIsIm1lc3NhZ2luZ1BvcnRDb25uZWN0aW9uUmV0cnlUaW1lciIsInBhZ2VTaG93RmlyZWQiLCJjb25maWdSZWFkeSIsIm1pc3NpbmdQYWdlU2hvd1RpbWVyIiwiaW5wdXRzT2JzZXJ2ZXIiLCJ0dXRvcmlhbEludGVncmF0aW9uIiwidHJhbnNmZXJFbGVtZW50Iiwib25GaXJzdENvbm5lY3QiLCJteUZyYW1lSWQiLCJzdGFydHVwIiwiY29ubmVjdFRvTWVzc2FnaW5nUG9ydCIsIm11dGF0aW9ucyIsInJlc2NhbiIsImludGVyZXN0aW5nTm9kZXMiXSwibWFwcGluZ3MiOiJvTkFBQyxTQUFVQSxFQUFRQyxFQUFTLENBSXhCQSxFQUFRQyxDQUFNLENBUWxCLEdBQUcsT0FBTyxXQUFlLElBQWMsV0FBYSxPQUFPLEtBQVMsSUFBYyxLQUFPQyxHQUFNLFNBQVVELEVBQVEsU0FZL0csR0FBSSxHQUFDRSxHQUFBQyxFQUFBLFdBQVcsU0FBWCxZQUFBQSxFQUFtQixVQUFuQixNQUFBRCxFQUE0QixJQUMvQixNQUFNLElBQUksTUFBTSwyREFB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
