function z(p,i){for(var e=0;e<i.length;e++){const t=i[e];if(typeof t!="string"&&!Array.isArray(t)){for(const s in t)if(s!=="default"&&!(s in p)){const n=Object.getOwnPropertyDescriptor(t,s);n&&Object.defineProperty(p,s,n.get?n:{enumerable:!0,get:()=>t[s]})}}}return Object.freeze(Object.defineProperty(p,Symbol.toStringTag,{value:"Module"}))}(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))t(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&t(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function t(s){if(s.ep)return;s.ep=!0;const n=e(s);fetch(s.href,n)}})();var J=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},T={},Z={get exports(){return T},set exports(p){T=p}};(function(p,i){(function(e,t){t(p)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:J,function(e){var t,s;if(!((s=(t=globalThis.chrome)==null?void 0:t.runtime)!=null&&s.id))throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const n="The message port closed before a response was received.",o=r=>{const d={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(d).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class C extends WeakMap{constructor(g,m=void 0){super(m),this.createItem=g}get(g){return this.has(g)||this.set(g,this.createItem(g)),super.get(g)}}const E=a=>a&&typeof a=="object"&&typeof a.then=="function",F=(a,g)=>(...m)=>{r.runtime.lastError?a.reject(new Error(r.runtime.lastError.message)):g.singleCallbackArg||m.length<=1&&g.singleCallbackArg!==!1?a.resolve(m[0]):a.resolve(m)},b=a=>a==1?"argument":"arguments",k=(a,g)=>function(u,...x){if(x.length<g.minArgs)throw new Error(`Expected at least ${g.minArgs} ${b(g.minArgs)} for ${a}(), got ${x.length}`);if(x.length>g.maxArgs)throw new Error(`Expected at most ${g.maxArgs} ${b(g.maxArgs)} for ${a}(), got ${x.length}`);return new Promise((w,v)=>{if(g.fallbackToNoCallback)try{u[a](...x,F({resolve:w,reject:v},g))}catch(c){console.warn(`${a} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,c),u[a](...x),g.fallbackToNoCallback=!1,g.noCallback=!0,w()}else g.noCallback?(u[a](...x),w()):u[a](...x,F({resolve:w,reject:v},g))})},V=(a,g,m)=>new Proxy(g,{apply(u,x,w){return m.call(x,a,...w)}});let R=Function.call.bind(Object.prototype.hasOwnProperty);const _=(a,g={},m={})=>{let u=Object.create(null),x={has(v,c){return c in a||c in u},get(v,c,L){if(c in u)return u[c];if(!(c in a))return;let A=a[c];if(typeof A=="function")if(typeof g[c]=="function")A=V(a,a[c],g[c]);else if(R(m,c)){let P=k(c,m[c]);A=V(a,a[c],P)}else A=A.bind(a);else if(typeof A=="object"&&A!==null&&(R(g,c)||R(m,c)))A=_(A,g[c],m[c]);else if(R(m,"*"))A=_(A,g[c],m["*"]);else return Object.defineProperty(u,c,{configurable:!0,enumerable:!0,get(){return a[c]},set(P){a[c]=P}}),A;return u[c]=A,A},set(v,c,L,A){return c in u?u[c]=L:a[c]=L,!0},defineProperty(v,c,L){return Reflect.defineProperty(u,c,L)},deleteProperty(v,c){return Reflect.deleteProperty(u,c)}},w=Object.create(a);return new Proxy(w,x)},O=a=>({addListener(g,m,...u){g.addListener(a.get(m),...u)},hasListener(g,m){return g.hasListener(a.get(m))},removeListener(g,m){g.removeListener(a.get(m))}}),$=new C(a=>typeof a!="function"?a:function(m){const u=_(m,{},{getContent:{minArgs:0,maxArgs:0}});a(u)}),N=new C(a=>typeof a!="function"?a:function(m,u,x){let w=!1,v,c=new Promise(f=>{v=function(h){w=!0,f(h)}}),L;try{L=a(m,u,v)}catch(f){L=Promise.reject(f)}const A=L!==!0&&E(L);if(L!==!0&&!A&&!w)return!1;const P=f=>{f.then(h=>{x(h)},h=>{let S;h&&(h instanceof Error||typeof h.message=="string")?S=h.message:S="An unexpected error occurred",x({__mozWebExtensionPolyfillReject__:!0,message:S})}).catch(h=>{console.error("Failed to send onMessage rejected reply",h)})};return P(A?L:c),!0}),B=({reject:a,resolve:g},m)=>{r.runtime.lastError?r.runtime.lastError.message===n?g():a(new Error(r.runtime.lastError.message)):m&&m.__mozWebExtensionPolyfillReject__?a(new Error(m.message)):g(m)},U=(a,g,m,...u)=>{if(u.length<g.minArgs)throw new Error(`Expected at least ${g.minArgs} ${b(g.minArgs)} for ${a}(), got ${u.length}`);if(u.length>g.maxArgs)throw new Error(`Expected at most ${g.maxArgs} ${b(g.maxArgs)} for ${a}(), got ${u.length}`);return new Promise((x,w)=>{const v=B.bind(null,{resolve:x,reject:w});u.push(v),m.sendMessage(...u)})},D={devtools:{network:{onRequestFinished:O($)}},runtime:{onMessage:O(N),onMessageExternal:O(N),sendMessage:U.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:U.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},M={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return d.privacy={network:{"*":M},services:{"*":M},websites:{"*":M}},_(r,D,d)};e.exports=o(chrome)}else e.exports=globalThis.browser})})(Z);const Q=T,se=z({__proto__:null,default:Q},[T]);class X{constructor(){this.outputStarted=!1,this.config={logLevel:2}}attachConfig(i){this.debug("Logging system config updated at "+Date()),this.config=i}formatMessage(i){return i?(this.outputStarted||(i="* "+i,this.outputStarted=!0),i):""}debug(i){this.config.logLevel>=4&&(i=this.formatMessage(i),i.length>0&&(console.debug(i),this.config.logLevel>=4&&this.send(4,i)))}info(i){this.config.logLevel>=3&&(i=this.formatMessage(i),i.length>0&&(console.info(i),this.config.logLevel>=4&&this.send(3,i)))}warn(i){this.config.logLevel>=2&&(i=this.formatMessage(i),i.length>0&&(console.warn(i),this.config.logLevel>=4&&this.send(2,i)))}error(i){this.config.logLevel>=1&&(i=this.formatMessage(i),i.length>0&&(console.error(i),this.config.logLevel>=4&&this.send(1,i)))}send(i,e){}stackTrace(){console.groupCollapsed("%c Stack Trace","color:cream; font-style: normal;"),console.debug(new Error().stack),console.groupEnd()}}const Y=new X;class ee{constructor(){this.pslInitialised=!1}versionAsInt(i){let e=0;for(let t=0;t<i.length;t++)e=e*256+i[t];return e}versionAsArray(i){const e=[0,0,0];for(let t=e.length-1;t>=0;t--){const s=i&255;e[t]=s,i=(i-s)/256}return e}versionAsString(i){let e="";const t=this.versionAsArray(i);for(let s=0;s<t.length;s++)s>0&&(e+="."),e+=t[s].toString();return e}toHexString(i){return("0"+i.toString(16)).slice(-2)}BigIntFromRandom(i){const e=new Uint8Array(i);window.crypto.getRandomValues(e);const t=Array.from(e).map(this.toHexString).join("");return BigInteger.parse(t,16)}hash(i,e="hex",t="SHA-256"){let s;return typeof i=="string"?s=new TextEncoder().encode(i):s=i,crypto.subtle.digest({name:t},s).then(n=>e=="base64"?I.byteArrayToBase64(n):Array.from(new Uint8Array(n)).map(this.toHexString).join(""))}intToByteArray(i){const e=[0,0,0,0];for(let t=e.length-1;t>=0;t--){const s=i&255;e[t]=s,i=(i-s)/256}return e}intArrayToByteArray(i){const e=new Array(i.length*4);for(let t=0;t<i.length;t++){let s=i[t];for(let n=3;n>=0;n--){const o=s&255;e[t*4+n]=o,s=(s-o)/256}}return e}stringToByteArray(i){return new TextEncoder().encode(i)}base64toByteArrayForHMAC(i,e,t=null){const s=atob(i),n=s.length;let o=0;if(!t){const r=new ArrayBuffer(n+e);t=new Uint8Array(r),o=20}for(let r=0;r<n;r++)t[r+o]=s.charCodeAt(r);return t}base64toByteArray(i){const e=atob(i),t=e.length,s=new ArrayBuffer(t),n=new Uint8Array(s);for(let o=0;o<t;o++)n[o]=e.charCodeAt(o);return n}byteArrayToBase64(i){let e="";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=new Uint8Array(i),n=s.byteLength,o=n%3,r=n-o;let d,C,E,F,b;for(let k=0;k<r;k=k+3)b=s[k]<<16|s[k+1]<<8|s[k+2],d=(b&16515072)>>18,C=(b&258048)>>12,E=(b&4032)>>6,F=b&63,e+=t[d]+t[C]+t[E]+t[F];return o==1?(b=s[r],d=(b&252)>>2,C=(b&3)<<4,e+=t[d]+t[C]+"=="):o==2&&(b=s[r]<<8|s[r+1],d=(b&64512)>>10,C=(b&1008)>>4,E=(b&15)<<2,e+=t[d]+t[C]+t[E]+"="),e}hexStringToByteArray(i,e=null){if(i.length%2!==0)throw Error("Must have an even number of hex digits to convert to bytes");const t=i.length/2;e||(e=new Uint8Array(t));for(let s=0;s<t;s++)e[s]=parseInt(i.substr(s*2,2),16);return e}newGUID(){const i=[];for(let r=0;r<256;r++)i[r]=(r<16?"0":"")+r.toString(16);const e=new Uint32Array(4);window.crypto.getRandomValues(e);const t=e[0],s=e[1],n=e[2],o=e[3];return i[t&255]+i[t>>8&255]+i[t>>16&255]+i[t>>24&255]+"-"+i[s&255]+i[s>>8&255]+"-"+i[s>>16&15|64]+i[s>>24&255]+"-"+i[n&63|128]+i[n>>8&255]+"-"+i[n>>16&255]+i[n>>24&255]+i[o&255]+i[o>>8&255]+i[o>>16&255]+i[o>>24&255]}base64urlDecode(i){return atob(i.replace(/-/g,"+").replace(/_/g,"/"))}binaryToByteArray(i){const e=i.length,t=new ArrayBuffer(e),s=new Uint8Array(t);for(let n=0;n<e;n++)s[n]=i.charCodeAt(n);return s}base64urltoByteArray(i){const e=this.base64urlDecode(i);return this.binaryToByteArray(e)}get psl(){if(!publicSuffixList)throw new Error("publicSuffixList library not present");return this.pslInitialised||(publicSuffixList.parse(pslData.text,punycode.toASCII),this.pslInitialised=!0),publicSuffixList}}const I=new ee;class K{}class y{}class G{}class ie{}const j=new G;j.pageRegex=new y;j.pageRegex["^.*$"]={config:{preventSaveNotification:!1,listMatchingCaseSensitive:!1,blackList:{form:{names:["search"],ids:["search"]},fields:{names:["search","q","query"],ids:["search","q"]}},whiteList:{form:{names:["login"],ids:["login"]},fields:{names:["username","j_username","user_name","user","user-name","login","vb_login_username","name","user name","user id","user-id","userid","email","e-mail","id","form_loginname","wpname","mail","loginid","login id","login_name","openid_identifier","authentication_email","openid","auth_email","auth_id","authentication_identifier","authentication_id","customer_number","customernumber","onlineid"],ids:["username","j_username","user_name","user","user-name","login","vb_login_username","name","user-id","userid","email","e-mail","id","form_loginname","wpname","mail","loginid","login_name","openid_identifier","authentication_email","openid","auth_email","auth_id","authentication_identifier","authentication_id","customer_number","customernumber","onlineid"]}},preferredEntryUuid:null},matchWeight:0,source:"Default"};class q{migrateToVersion8(i){Object.assign(i,{overWriteFieldsAutomatically:!1,version:8})}migrateToVersion7(i){i.notificationCountSavePassword>6?Object.assign(i,{notificationCountSavePassword:6,version:7}):Object.assign(i,{version:7})}migrateToVersion6(i){Object.assign(i,{animateWhenOfferingSave:!0,version:6})}migrateToVersion5(i){Object.assign(i,{notifyPasswordAvailableForPaste:!0,version:5})}migrateToVersion4(i){let e=2;i.logLevel===1&&(e=1),Object.assign(i,{logLevel:e,version:4})}migrateToVersion3(i){i.notificationCountGeneric==null&&(i.notificationCountGeneric=0),i.notificationCountSavePassword==null&&(i.notificationCountSavePassword=0),Object.assign(i,{currentSearchTermTimeout:30,version:3})}migrateToVersion2(i){let e=new G;if(!i.config||i.config.length==0){e=j;return}e.pageRegex=new y,e.hostExact=new y,e.pagePrefix=new y,e.pageRegex["^.*$"]={matchWeight:0,config:this.migrateIndividualSiteConfigSettingsToV2(i.config[0].config),source:"Migration"};for(let t=1;t<i.config.length;t++){const s=i.config[t].url;if(s.indexOf("://")==-1)continue;const n=s.substr(s.indexOf("://")+3);if(n.length<=1)continue;const o=this.migrateIndividualSiteConfigSettingsToV2(i.config[t].config),r=n.indexOf("/");if(r>-1||r==n.lastIndexOf("/")){const d=r>-1?n.substr(0,r):n;e.hostExact[d]={config:o,matchWeight:100,source:"Migration"}}else{let d=200;for(const C in e.pagePrefix)n.startsWith(C)&&d++;e.pagePrefix[n]={config:o,matchWeight:d,source:"Migration"}}}Object.assign(i,{siteConfig:e,config:null,version:2})}migrateIndividualSiteConfigSettingsToV2(i){const e=new K;return i.preventSaveNotification==null&&(e.preventSaveNotification=i.preventSaveNotification),i.interestingForms&&(i.interestingForms.name_w&&(e.whiteList?e.whiteList.form?e.whiteList.form.names||(e.whiteList.form.names=[]):e.whiteList.form={names:[]}:e.whiteList={form:{names:[]}},e.whiteList.form.names=i.interestingForms.name_w),i.interestingForms.id_w&&(e.whiteList?e.whiteList.form?e.whiteList.form.ids||(e.whiteList.form.ids=[]):e.whiteList.form={ids:[]}:e.whiteList={form:{ids:[]}},e.whiteList.form.ids=i.interestingForms.id_w),i.interestingForms.name_b&&(e.blackList?e.blackList.form?e.blackList.form.names||(e.blackList.form.names=[]):e.blackList.form={names:[]}:e.blackList={form:{names:[]}},e.blackList.form.names=i.interestingForms.name_b),i.interestingForms.id_b&&(e.blackList?e.blackList.form?e.blackList.form.ids||(e.blackList.form.ids=[]):e.blackList.form={ids:[]}:e.blackList={form:{ids:[]}},e.blackList.form.ids=i.interestingForms.id_b),i.interestingForms.f_name_w&&(e.whiteList?e.whiteList.fields?e.whiteList.fields.names||(e.whiteList.fields.names=[]):e.whiteList.fields={names:[]}:e.whiteList={fields:{names:[]}},e.whiteList.fields.names=i.interestingForms.f_name_w),i.interestingForms.f_id_w&&(e.whiteList?e.whiteList.fields?e.whiteList.fields.ids||(e.whiteList.fields.ids=[]):e.whiteList.fields={ids:[]}:e.whiteList={fields:{ids:[]}},e.whiteList.fields.ids=i.interestingForms.f_id_w),i.interestingForms.f_name_b&&(e.blackList?e.blackList.fields?e.blackList.fields.names||(e.blackList.fields.names=[]):e.blackList.fields={names:[]}:e.blackList={fields:{names:[]}},e.blackList.fields.names=i.interestingForms.f_name_b),i.interestingForms.f_id_b&&(e.blackList?e.blackList.fields?e.blackList.fields.ids||(e.blackList.fields.ids=[]):e.blackList.fields={ids:[]}:e.blackList={fields:{ids:[]}},e.blackList.fields.ids=i.interestingForms.f_id_b)),e}}const W=8,l=new ie;l.autoFillDialogs=!1;l.autoFillForms=!0;l.autoFillFormsWithMultipleMatches=!1;l.autoSubmitForms=!1;l.autoSubmitDialogs=!1;l.autoSubmitMatchedForms=!1;l.connSLClient=2;l.connSLServerMin=2;l.keePassDBToOpen="";l.keePassMRUDB="";l.KeePassRPCWebSocketPort=12546;l.KPRPCUsername="";l.KPRPCStoredKeys={};l.lastConnectedToKeePass="";l.listAllOpenDBs=!0;l.logLevel=2;l.logMethodConsole=!1;l.logMethodFile=!1;l.logSensitiveData=!1;l.metricsUsageDisabled=!1;l.metricsUserId="";l.notifyWhenEntryUpdated=!0;l.notifyWhenLateDiscovery=!1;l.notifyWhenLoggedOut=!1;l.overWriteFieldsAutomatically=!1;l.rememberMRUDB=!0;l.rememberMRUGroup=!0;l.saveFavicons=!0;l.searchAllOpenDBs=!0;l.config=null;l.siteConfig=j;l.tutorialProgress="";l.version=W;l.triggerChangeInputEventAfterFill=!1;l.autoSubmitNetworkAuthWithSingleMatch=!1;l.searchNetworkAuth=!0;l.notificationCountGeneric=0;l.notificationCountSavePassword=0;l.currentSearchTermTimeout=30;l.notifyPasswordAvailableForPaste=!0;l.animateWhenOfferingSave=!0;l.keeVaultLaunchMessageDismissed=!1;l.keeVaultLaunchStart=864e13;l.keeVaultLaunchEnd=864e13;l.manualSubmitOverrideProhibited=!1;l.theme=null;l.hideConfirmationAfterSave=!1;l.mustShowReleaseNotesAtStartup=!1;l.autoFillFieldsWithExistingValue=!1;class te{constructor(){this.maxCharsPerPage=1e4,this._listeners=[],this.current=l,T.storage.onChanged.addListener((i,e)=>this.reloadOnStorageChange(i,e))}addChangeListener(i){this._listeners.push(i)}reloadOnStorageChange(i,e){H.reload(()=>this._listeners.forEach(t=>t(i,e)))}async setASAP(i){Object.assign(this.current,i),await this.save()}splitStringToPages(i){const e=Math.ceil(i.length/this.maxCharsPerPage),t=new Array(e);for(let s=0,n=0;s<e;++s,n+=this.maxCharsPerPage)t[s]=i.substr(n,this.maxCharsPerPage);return t}async save(){const i=JSON.stringify(this.current),e=this.splitStringToPages(i),t={};t.keeConfigPageCount=e.length;for(let s=0;s<e.length;s++)t["keeConfigPage"+s]=e[s];await T.storage.local.set(t)}load(i){T.storage.local.get().then(e=>{const t=e.keeConfigPageCount;if(t){let s="";for(let n=0;n<t;n++){const o=e["keeConfigPage"+n];o&&(s+=o)}s&&(this.current=JSON.parse(s))}else{const s=e.keefoxConfigPageCount;if(s){let n="";for(let o=0;o<s;o++){const r=e["keefoxConfigPage"+o];r&&(n+=r)}n&&(this.current=JSON.parse(n))}}this.fixInvalidConfigData(),this.migrateToLatestVersion(),i()})}fixInvalidConfigData(){let i=!1;this.current.KPRPCStoredKeys==null&&(this.current.KPRPCStoredKeys={},i=!0),i&&this.save()}migrateToLatestVersion(){if(this.current.version>=W)return;const i=new q;switch(this.current.version){case 1:i.migrateToVersion2(this.current);case 2:i.migrateToVersion3(this.current);case 3:i.migrateToVersion4(this.current);case 4:i.migrateToVersion5(this.current);case 5:i.migrateToVersion6(this.current);case 6:i.migrateToVersion7(this.current);case 7:i.migrateToVersion8(this.current)}this.save()}migrateFromRemoteToLatestVersion(){if(this.current.version>=W)return;const i=new q;switch(this.current.version){case 5:i.migrateToVersion6(this.current);case 6:i.migrateToVersion7(this.current)}this.save()}reload(i){T.storage.local.get().then(e=>{const t=e.keeConfigPageCount;if(t){let s="";for(let n=0;n<t;n++){const o=e["keeConfigPage"+n];o&&(s+=o)}s&&(this.current=Object.assign(this.current,JSON.parse(s)))}i&&i()})}siteConfigLookupFor(i,e){if(i=="Domain"){if(e=="Exact")return this.current.siteConfig.domainExact||(this.current.siteConfig.domainExact=new y),this.current.siteConfig.domainExact;if(e=="Prefix")return this.current.siteConfig.domainPrefix||(this.current.siteConfig.domainPrefix=new y),this.current.siteConfig.domainPrefix;if(e=="Regex")return this.current.siteConfig.domainRegex||(this.current.siteConfig.domainRegex=new y),this.current.siteConfig.domainRegex}else if(i=="Host"){if(e=="Exact")return this.current.siteConfig.hostExact||(this.current.siteConfig.hostExact=new y),this.current.siteConfig.hostExact;if(e=="Prefix")return this.current.siteConfig.hostPrefix||(this.current.siteConfig.hostPrefix=new y),this.current.siteConfig.hostPrefix;if(e=="Regex")return this.current.siteConfig.hostRegex||(this.current.siteConfig.hostRegex=new y),this.current.siteConfig.hostRegex}else if(i=="Page"){if(e=="Exact")return this.current.siteConfig.pageExact||(this.current.siteConfig.pageExact=new y),this.current.siteConfig.pageExact;if(e=="Prefix")return this.current.siteConfig.pagePrefix||(this.current.siteConfig.pagePrefix=new y),this.current.siteConfig.pagePrefix;if(e=="Regex")return this.current.siteConfig.pageRegex||(this.current.siteConfig.pageRegex=new y),this.current.siteConfig.pageRegex}return null}siteConfigFor(i){const e=this.findAllConfigsFor(i);return e.sort((t,s)=>s.matchWeight-t.matchWeight),this.deriveConfigFromMatches(e)}findAllConfigsFor(i){const e=[],t=new URL(i),s=t.host,n=s+t.pathname,o=I.psl.getDomain(s);for(const r in this.current.siteConfig.domainExact)r===o&&e.push(this.current.siteConfig.domainExact[r]);for(const r in this.current.siteConfig.hostExact)r===s&&e.push(this.current.siteConfig.hostExact[r]);for(const r in this.current.siteConfig.pageExact)r===n&&e.push(this.current.siteConfig.pageExact[r]);for(const r in this.current.siteConfig.domainPrefix)o.startsWith(r)&&e.push(this.current.siteConfig.domainPrefix[r]);for(const r in this.current.siteConfig.hostPrefix)s.startsWith(r)&&e.push(this.current.siteConfig.hostPrefix[r]);for(const r in this.current.siteConfig.pagePrefix)n.startsWith(r)&&e.push(this.current.siteConfig.pagePrefix[r]);for(const r in this.current.siteConfig.domainRegex)new RegExp(r).test(o)&&e.push(this.current.siteConfig.domainRegex[r]);for(const r in this.current.siteConfig.hostRegex)new RegExp(r).test(s)&&e.push(this.current.siteConfig.hostRegex[r]);for(const r in this.current.siteConfig.pageRegex)new RegExp(r).test(n)&&e.push(this.current.siteConfig.pageRegex[r]);return e}findAllConfigsAndIndexFor(i){const e=[],t=new URL(i),s=t.host,n=s+t.pathname,o=I.psl.getDomain(s);for(const r in this.current.siteConfig.domainExact)r===o&&e.push({node:this.current.siteConfig.domainExact[r],target:"Domain",method:"Exact",lookupValue:r});for(const r in this.current.siteConfig.hostExact)r===s&&e.push({node:this.current.siteConfig.hostExact[r],target:"Host",method:"Exact",lookupValue:r});for(const r in this.current.siteConfig.pageExact)r===n&&e.push({node:this.current.siteConfig.pageExact[r],target:"Page",method:"Exact",lookupValue:r});for(const r in this.current.siteConfig.domainPrefix)o.startsWith(r)&&e.push({node:this.current.siteConfig.domainPrefix[r],target:"Domain",method:"Prefix",lookupValue:r});for(const r in this.current.siteConfig.hostPrefix)s.startsWith(r)&&e.push({node:this.current.siteConfig.hostPrefix[r],target:"Host",method:"Prefix",lookupValue:r});for(const r in this.current.siteConfig.pagePrefix)n.startsWith(r)&&e.push({node:this.current.siteConfig.pagePrefix[r],target:"Page",method:"Prefix",lookupValue:r});for(const r in this.current.siteConfig.domainRegex)new RegExp(r).test(o)&&e.push({node:this.current.siteConfig.domainRegex[r],target:"Domain",method:"Regex",lookupValue:r});for(const r in this.current.siteConfig.hostRegex)new RegExp(r).test(s)&&e.push({node:this.current.siteConfig.hostRegex[r],target:"Host",method:"Regex",lookupValue:r});for(const r in this.current.siteConfig.pageRegex)new RegExp(r).test(n)&&e.push({node:this.current.siteConfig.pageRegex[r],target:"Page",method:"Regex",lookupValue:r});return e}deriveConfigFromMatches(i){const e={};return i.forEach(t=>{t.config.preventSaveNotification!==void 0&&e.preventSaveNotification==null&&(e.preventSaveNotification=t.config.preventSaveNotification),t.config.listMatchingCaseSensitive!==void 0&&e.listMatchingCaseSensitive==null&&(e.listMatchingCaseSensitive=t.config.listMatchingCaseSensitive),t.config.blackList!==void 0&&(e.blackList===void 0&&(e.blackList={}),t.config.blackList.form!==void 0&&(e.blackList.form===void 0&&(e.blackList.form={}),t.config.blackList.form.ids!==void 0&&e.blackList.form.ids===void 0&&(e.blackList.form.ids=t.config.blackList.form.ids),t.config.blackList.form.names!==void 0&&e.blackList.form.names===void 0&&(e.blackList.form.names=t.config.blackList.form.names)),t.config.blackList.fields!==void 0&&(e.blackList.fields===void 0&&(e.blackList.fields={}),t.config.blackList.fields.ids!==void 0&&e.blackList.fields.ids===void 0&&(e.blackList.fields.ids=t.config.blackList.fields.ids),t.config.blackList.fields.names!==void 0&&e.blackList.fields.names===void 0&&(e.blackList.fields.names=t.config.blackList.fields.names))),t.config.whiteList!==void 0&&(e.whiteList===void 0&&(e.whiteList={}),t.config.whiteList.form!==void 0&&(e.whiteList.form===void 0&&(e.whiteList.form={}),t.config.whiteList.form.ids!==void 0&&e.whiteList.form.ids===void 0&&(e.whiteList.form.ids=t.config.whiteList.form.ids),t.config.whiteList.form.names!==void 0&&e.whiteList.form.names===void 0&&(e.whiteList.form.names=t.config.whiteList.form.names)),t.config.whiteList.fields!==void 0&&(e.whiteList.fields===void 0&&(e.whiteList.fields={}),t.config.whiteList.fields.ids!==void 0&&e.whiteList.fields.ids===void 0&&(e.whiteList.fields.ids=t.config.whiteList.fields.ids),t.config.whiteList.fields.names!==void 0&&e.whiteList.fields.names===void 0&&(e.whiteList.fields.names=t.config.whiteList.fields.names))),t.config.preferredEntryUuid!==void 0&&e.preferredEntryUuid==null&&(e.preferredEntryUuid=t.config.preferredEntryUuid)}),e}normalizeFormProperty(i,e){return typeof i!="string"?null:e?i.toLowerCase():i}isFormInteresting(i,e,t){var N,B,U,D,M,a,g,m,u,x,w,v,c,L,A,P;const s=e.listMatchingCaseSensitive!==!0,n=t.map(f=>{var h,S;return s?(h=f.locators[0])==null?void 0:h.id.toLowerCase():(S=f.locators[0])==null?void 0:S.id}).filter(Boolean),o=t.map(f=>{var h,S;return s?(h=f.locators[0])==null?void 0:h.name.toLowerCase():(S=f.locators[0])==null?void 0:S.name}).filter(Boolean),r=this.normalizeFormProperty(i.id,s),d=this.normalizeFormProperty(i.name,s),C=(((B=(N=e==null?void 0:e.blackList)==null?void 0:N.form)==null?void 0:B.ids)||[]).map(f=>s?f==null?void 0:f.toLowerCase():f).filter(Boolean),E=(((D=(U=e==null?void 0:e.blackList)==null?void 0:U.form)==null?void 0:D.names)||[]).map(f=>s?f==null?void 0:f.toLowerCase():f).filter(Boolean),F=(((a=(M=e==null?void 0:e.blackList)==null?void 0:M.fields)==null?void 0:a.ids)||[]).map(f=>s?f==null?void 0:f.toLowerCase():f).filter(Boolean),b=(((m=(g=e==null?void 0:e.blackList)==null?void 0:g.fields)==null?void 0:m.names)||[]).map(f=>s?f==null?void 0:f.toLowerCase():f).filter(Boolean);if(C.indexOf(r)>=0||E.indexOf(d)>=0||F.some(f=>n.find(h=>f===h)!==void 0)||b.some(f=>o.find(h=>f===h)!==void 0))return!1;const V=((x=(u=e==null?void 0:e.whiteList)==null?void 0:u.form)==null?void 0:x.ids)||[],R=((v=(w=e==null?void 0:e.whiteList)==null?void 0:w.form)==null?void 0:v.names)||[],_=((L=(c=e==null?void 0:e.whiteList)==null?void 0:c.fields)==null?void 0:L.ids)||[],O=((P=(A=e==null?void 0:e.whiteList)==null?void 0:A.fields)==null?void 0:P.names)||[];return V.indexOf(r)>=0||R.indexOf(d)>=0||_.some(f=>n.find(h=>f===h)!==void 0)||O.some(f=>o.find(h=>f===h)!==void 0)?!0:null}get activeTheme(){return this.current.theme||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}togglePreferredEntryUuid(i,e){let t;try{t=new URL(e)}catch{Y.error("Invalid URL supplied to togglePreferredEntryUuid. Preferred entry will not be altered.");return}const s="Domain",n=this.findAllConfigsAndIndexFor(e),r=this.siteConfigFor(e).preferredEntryUuid;r===i?n.forEach(d=>{d.node.config.preferredEntryUuid===i&&this.removePreferredEntryUuid(d)}):(n.forEach(d=>{d.node.config.preferredEntryUuid===r&&this.leastSpecificTarget(s,d.target)===s&&this.removePreferredEntryUuid(d)}),this.addSiteConfigParameters({preferredEntryUuid:i},t,s,"Exact","Auto")),this.save()}removePreferredEntryUuid(i){if(i.node.config.preferredEntryUuid=null,i.node.source==="Auto"&&this.equalsDefaultSiteConfig(i.node.config)){const e=this.siteConfigLookupFor(i.target,i.method);delete e[i.lookupValue]}}equalsDefaultSiteConfig(i){return!(typeof i.preferredEntryUuid=="boolean"||typeof i.preventSaveNotification=="boolean"||typeof i.listMatchingCaseSensitive=="boolean"||i.whiteList||i.blackList)}leastSpecificTarget(i,e){return i==="Domain"||e==="Domain"?"Domain":i==="Host"||e==="Host"?"Host":"Page"}valueFromUrl(i,e){const t=i.host;if(e==="Host")return t;if(e==="Page")return t+i.pathname;if(e==="Domain")return I.psl.getDomain(t)}addSiteConfigParameters(i,e,t,s,n){const o=this.valueFromUrl(e,t),r=H.siteConfigLookupFor(t,s);r[o]||(r[o]={config:new K,source:n,matchWeight:100}),Object.assign(r[o].config,i)}}const H=new te;export{Y as K,se as a,T as b,H as c,I as u};
