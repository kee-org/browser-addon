import{b as F,c as M,K as H,a as Ft}from"./ConfigManager-f1a6a1ab.js";import{g as st,w as ve,h as It,o as Lt,s as Rt,i as Bt,t as Ot,j as Me,r as N,k as Tt,l as T,m as we,p as Ut,n as Fe,q as Nt,v as rt,x as o,y as O,z as Gt,B as f,C as b,F as w,G as r,H as A,I as _,J as g,K as L,L as Q,N as q,O as U,u as R,P as re,b as ot,Q as B,R as D,T as G,c as Ie,U as k,V as Z,A as z,W as Se,X as Vt,Y as Wt,Z as Kt,_ as Ht,$ as W,a0 as K,a1 as Ee,E as se,a2 as De,a3 as it,D as lt,a4 as Oe,a5 as Xt,M as jt,e as $t,d as Yt}from"./SearcherAll-7598ce4f.js";function zt(e,t,n){const a=t.length-1;if(a<0)return e===void 0?n:e;for(let i=0;i<a;i++){if(e==null)return n;e=e[t[i]]}return e==null||e[t[a]]===void 0?n:e[t[a]]}function Te(e,t,n){return e==null||!t||typeof t!="string"?n:e[t]!==void 0?e[t]:(t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,""),zt(e,t.split("."),n))}function Jt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Array.from({length:e},(n,a)=>t+a)}function Ue(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function Zt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.max(t,Math.min(n,e))}function Qt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const n=[];let a=0;for(;a<e.length;)n.push(e.substr(a,t)),a+=t;return n}function X(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const a={};for(const i in e)a[i]=e[i];for(const i in t){const s=e[i],l=t[i];if(Ue(s)&&Ue(l)){a[i]=X(s,l,n);continue}if(Array.isArray(s)&&Array.isArray(l)&&n){a[i]=n(s,l);continue}a[i]=l}return a}function Le(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:"").replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase()}function ct(e,t,n){if(n&&(t={__isVue:!0,$parent:n,$options:t}),t){if(t.$_alreadyWarned=t.$_alreadyWarned||[],t.$_alreadyWarned.includes(e))return;t.$_alreadyWarned.push(e)}return`[Vuetify] ${e}`+(t?tn(t):"")}function le(e,t,n){const a=ct(e,t,n);a!=null&&console.warn(a)}function Ne(e,t,n){const a=ct(e,t,n);a!=null&&console.error(a)}const qt=/(?:^|[-_])(\w)/g,en=e=>e.replace(qt,t=>t.toUpperCase()).replace(/[-_]/g,"");function Ae(e,t){if(e.$root===e)return"<Root>";const n=typeof e=="function"&&e.cid!=null?e.options:e.__isVue?e.$options||e.constructor.options:e||{};let a=n.name||n._componentTag;const i=n.__file;if(!a&&i){const s=i.match(/([^/\\]+)\.vue$/);a=s==null?void 0:s[1]}return(a?`<${en(a)}>`:"<Anonymous>")+(i&&t!==!1?` at ${i}`:"")}function tn(e){if(e.__isVue&&e.$parent){const t=[];let n=0;for(;e;){if(t.length>0){const a=t[t.length-1];if(a.constructor===e.constructor){n++,e=e.$parent;continue}else n>0&&(t[t.length-1]=[a,n],n=0)}t.push(e),e=e.$parent}return`

found in

`+t.map((a,i)=>`${i===0?"---> ":" ".repeat(5+i*2)}${Array.isArray(a)?`${Ae(a[0])}... (${a[1]} recursive calls)`:Ae(a)}`).join(`
`)}else return`

(found in ${Ae(e)})`}const nn=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],an=e=>e<=.0031308?e*12.92:1.055*e**(1/2.4)-.055,sn=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],rn=e=>e<=.04045?e/12.92:((e+.055)/1.055)**2.4;function ut(e){const t=Array(3),n=an,a=nn;for(let i=0;i<3;++i)t[i]=Math.round(Zt(n(a[i][0]*e[0]+a[i][1]*e[1]+a[i][2]*e[2]))*255);return{r:t[0],g:t[1],b:t[2]}}function Re(e){let{r:t,g:n,b:a}=e;const i=[0,0,0],s=rn,l=sn;t=s(t/255),n=s(n/255),a=s(a/255);for(let c=0;c<3;++c)i[c]=l[c][0]*t+l[c][1]*n+l[c][2]*a;return i}const pe=.20689655172413793,on=e=>e>pe**3?Math.cbrt(e):e/(3*pe**2)+4/29,ln=e=>e>pe?e**3:3*pe**2*(e-4/29);function dt(e){const t=on,n=t(e[1]);return[116*n-16,500*(t(e[0]/.95047)-n),200*(n-t(e[2]/1.08883))]}function ft(e){const t=ln,n=(e[0]+16)/116;return[t(n+e[1]/500)*.95047,t(n),t(n-e[2]/200)*1.08883]}function J(e){if(typeof e=="number")return(isNaN(e)||e<0||e>16777215)&&le(`'${e}' is not a valid hex color`),{r:(e&16711680)>>16,g:(e&65280)>>8,b:e&255};if(typeof e=="string"){let t=e.startsWith("#")?e.slice(1):e;[3,4].includes(t.length)?t=t.split("").map(a=>a+a).join(""):[6,8].includes(t.length)||le(`'${e}' is not a valid hex(a) color`);const n=parseInt(t,16);return(isNaN(n)||n<0||n>4294967295)&&le(`'${e}' is not a valid hex(a) color`),un(t)}else throw new TypeError(`Colors can only be numbers or strings, recieved ${e==null?e:e.constructor.name} instead`)}function de(e){const t=Math.round(e).toString(16);return("00".substr(0,2-t.length)+t).toUpperCase()}function cn(e){let{r:t,g:n,b:a,a:i}=e;return`#${[de(t),de(n),de(a),i!==void 0?de(Math.round(i*255)):"FF"].join("")}`}function un(e){let[t,n,a,i]=Qt(e,2).map(s=>parseInt(s,16));return i=i===void 0?i:Math.round(i/255*100)/100,{r:t,g:n,b:a,a:i}}function dn(e,t){const n=dt(Re(e));return n[0]=n[0]+t*10,ut(ft(n))}function fn(e,t){const n=dt(Re(e));return n[0]=n[0]-t*10,ut(ft(n))}function hn(e){const t=J(e);return Re(t)[1]}function Be(e,t){const n=st();if(!n)throw new Error(`[Vuetify] ${e} ${t||"must be called from inside a setup function"}`);return n}let ht=0,me=new WeakMap;function mt(){const e=Be("getUid");if(me.has(e))return me.get(e);{const t=ht++;return me.set(e,t),t}}mt.reset=()=>{ht=0,me=new WeakMap};function mn(e){const{provides:t}=Be("injectSelf");if(t&&e in t)return t[e]}function pt(e,t){let n;ve(e,a=>{if(a&&!n)n=It(),n.run(t);else if(!a){var i;(i=n)==null||i.stop(),n=void 0}},{immediate:!0}),Lt(()=>{var a;(a=n)==null||a.stop()})}function vt(e,t){return n=>Object.keys(e).reduce((a,i)=>{const l=typeof e[i]=="object"&&e[i]!=null&&!Array.isArray(e[i])?e[i]:{type:e[i]};return n&&i in n?a[i]={...l,default:n[i]}:a[i]=l,t&&!a[i].source&&(a[i].source=t),a},{})}function pn(e,t){var n,a;return typeof((n=e.props)==null?void 0:n[t])<"u"||typeof((a=e.props)==null?void 0:a[Le(t)])<"u"}const ue=function(t){return t._setup=t._setup??t.setup,t.name?(t._setup&&(t.props=t.props??{},t.props=vt(t.props,Le(t.name))(),t.props._as=String,t.setup=function(a,i){const s=st(),l=yt(),c=Rt(),p=Bt({...Ot(a)});Me(()=>{const d=l.value.global,h=l.value[a._as??t.name];if(h){const v=Object.entries(h).filter(m=>{let[y]=m;return y.startsWith(y[0].toUpperCase())});v.length&&(c.value=Object.fromEntries(v))}for(const v of Object.keys(a)){let m=a[v];pn(s.vnode,v)||(m=(h==null?void 0:h[v])??(d==null?void 0:d[v])??a[v]),p[v]!==m&&(p[v]=m)}});const u=t._setup(p,i);return pt(c,()=>{var d;gn(X(((d=mn(ce))==null?void 0:d.value)??{},c.value))}),u}),t):(le("The component is missing an explicit name, unable to generate default prop value"),t)},j=typeof window<"u",vn=j&&("ontouchstart"in window||window.navigator.maxTouchPoints>0);j&&typeof CSS<"u"&&CSS.supports("selector(:focus-visible)");const ce=Symbol.for("vuetify:defaults");function yn(e){return N(e??{})}function yt(){const e=Tt(ce);if(!e)throw new Error("[Vuetify] Could not find defaults instance");return e}function gn(e,t){const n=yt(),a=N(e),i=T(()=>{const s=we(t==null?void 0:t.scoped),l=we(t==null?void 0:t.reset),c=we(t==null?void 0:t.root);let p=X(a.value,{prev:n.value});if(s)return p;if(l||c){const u=Number(l||1/0);for(let d=0;d<=u&&p.prev;d++)p=p.prev;return p}return X(p.prev,p)});return Ut(ce,i),i}const Ge=Symbol.for("vuetify:display"),Ve={mobileBreakpoint:"lg",thresholds:{xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560}},_n=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ve;return X(Ve,e)};function We(e){return j&&!e?window.innerWidth:0}function Ke(e){return j&&!e?window.innerHeight:0}function bn(){const e=j?window.navigator.userAgent:"ssr";function t(y){return Boolean(e.match(y))}const n=t(/android/i),a=t(/iphone|ipad|ipod/i),i=t(/cordova/i),s=t(/electron/i),l=t(/chrome/i),c=t(/edge/i),p=t(/firefox/i),u=t(/opera/i),d=t(/win/i),h=t(/mac/i),v=t(/linux/i),m=t(/ssr/i);return{android:n,ios:a,cordova:i,electron:s,chrome:l,edge:c,firefox:p,opera:u,win:d,mac:h,linux:v,touch:vn,ssr:m}}function wn(e,t){const{thresholds:n,mobileBreakpoint:a}=_n(e),i=N(Ke(t)),s=bn(),l=Fe({}),c=N(We(t));function p(){i.value=Ke(),c.value=We()}return Me(()=>{const u=c.value<n.sm,d=c.value<n.md&&!u,h=c.value<n.lg&&!(d||u),v=c.value<n.xl&&!(h||d||u),m=c.value<n.xxl&&!(v||h||d||u),y=c.value>=n.xxl,S=u?"xs":d?"sm":h?"md":v?"lg":m?"xl":"xxl",x=typeof a=="number"?a:n[a],C=s.ssr?s.android||s.ios||s.opera:c.value<x;l.xs=u,l.sm=d,l.md=h,l.lg=v,l.xl=m,l.xxl=y,l.smAndUp=!u,l.mdAndUp=!(u||d),l.lgAndUp=!(u||d||h),l.xlAndUp=!(u||d||h||v),l.smAndDown=!(h||v||m||y),l.mdAndDown=!(v||m||y),l.lgAndDown=!(m||y),l.xlAndDown=!y,l.name=S,l.height=i.value,l.width=c.value,l.mobile=C,l.mobileBreakpoint=a,l.platform=s,l.thresholds=n}),j&&window.addEventListener("resize",p,{passive:!0}),{...Nt(l),update:p,ssr:!!t}}const Sn={collapse:"mdi-chevron-up",complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close-circle",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-alert-circle",error:"mdi-close-circle",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sortAsc:"mdi-arrow-up",sortDesc:"mdi-arrow-down",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half-full",loading:"mdi-cached",first:"mdi-page-first",last:"mdi-page-last",unfold:"mdi-unfold-more-horizontal",file:"mdi-paperclip",plus:"mdi-plus",minus:"mdi-minus"},An={component:e=>rt(gt,{...e,class:"mdi"})},Cn=[String,Function,Object],He=Symbol.for("vuetify:icons"),ye=vt({icon:{type:Cn},tag:{type:String,required:!0}},"icon");ue({name:"VComponentIcon",props:ye(),setup(e,t){let{slots:n}=t;return()=>{var a;return o(e.tag,null,{default:()=>[e.icon?o(e.icon,null,null):(a=n.default)==null?void 0:a.call(n)]})}}});const kn=ue({name:"VSvgIcon",inheritAttrs:!1,props:ye(),setup(e,t){let{attrs:n}=t;return()=>o(e.tag,O(n,{style:null}),{default:()=>[o("svg",{class:"v-icon__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":"true"},[o("path",{d:e.icon},null)])]})}});ue({name:"VLigatureIcon",props:ye(),setup(e){return()=>o(e.tag,null,{default:()=>[e.icon]})}});const gt=ue({name:"VClassIcon",props:ye(),setup(e){return()=>o(e.tag,{class:e.icon},null)}}),xn={svg:{component:kn},class:{component:gt}};function Pn(e){return X({defaultSet:"mdi",sets:{...xn,mdi:An},aliases:Sn},e)}function En(e,t,n){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:h=>h,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:h=>h;const s=Be("useProxiedModel"),l=N(e[t]!==void 0?e[t]:n),c=Le(t),u=c!==t?T(()=>{var h,v,m,y;return e[t],!!(((h=s.vnode.props)!=null&&h.hasOwnProperty(t)||(v=s.vnode.props)!=null&&v.hasOwnProperty(c))&&((m=s.vnode.props)!=null&&m.hasOwnProperty(`onUpdate:${t}`)||(y=s.vnode.props)!=null&&y.hasOwnProperty(`onUpdate:${c}`)))}):T(()=>{var h,v;return e[t],!!((h=s.vnode.props)!=null&&h.hasOwnProperty(t)&&(v=s.vnode.props)!=null&&v.hasOwnProperty(`onUpdate:${t}`))});pt(()=>!u.value,()=>{ve(()=>e[t],h=>{l.value=h})});const d=T({get(){return a(u.value?e[t]:l.value)},set(h){const v=i(h);(u.value?e[t]:l.value)===v||a(u.value?e[t]:l.value)===h||(l.value=v,s==null||s.emit(`update:${t}`,v))}});return Object.defineProperty(d,"externalValue",{get:()=>u.value?e[t]:l.value}),d}const Dn={badge:"Badge",close:"Close",dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},datePicker:{itemsSelected:"{0} selected",nextMonthAriaLabel:"Next month",nextYearAriaLabel:"Next year",prevMonthAriaLabel:"Previous month",prevYearAriaLabel:"Previous year"},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more"},input:{clear:"Clear {0}",prependAction:"{0} prepended action",appendAction:"{0} appended action"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},timePicker:{am:"AM",pm:"PM"},pagination:{ariaLabel:{root:"Pagination Navigation",next:"Next page",previous:"Previous page",page:"Goto Page {0}",currentPage:"Page {0}, Current Page",first:"First page",last:"Last page"}},rating:{ariaLabel:{item:"Rating {0} of {1}"}}},Xe="$vuetify.",je=(e,t)=>e.replace(/\{(\d+)\}/g,(n,a)=>String(t[+a])),_t=(e,t,n)=>function(a){for(var i=arguments.length,s=new Array(i>1?i-1:0),l=1;l<i;l++)s[l-1]=arguments[l];if(!a.startsWith(Xe))return je(a,s);const c=a.replace(Xe,""),p=e.value&&n.value[e.value],u=t.value&&n.value[t.value];let d=Te(p,c,null);return d||(le(`Translation key "${a}" not found in "${e.value}", trying fallback locale`),d=Te(u,c,null)),d||(Ne(`Translation key "${a}" not found in fallback`),d=a),typeof d!="string"&&(Ne(`Translation key "${a}" has a non-string value`),d=a),je(d,s)};function bt(e,t){return(n,a)=>new Intl.NumberFormat([e.value,t.value],a).format(n)}function Ce(e,t,n){const a=En(e,t,e[t]??n.value);return a.value=e[t]??n.value,ve(n,i=>{e[t]==null&&(a.value=n.value)}),a}function wt(e){return t=>{const n=Ce(t,"locale",e.current),a=Ce(t,"fallback",e.fallback),i=Ce(t,"messages",e.messages);return{name:"vuetify",current:n,fallback:a,messages:i,t:_t(n,a,i),n:bt(n,a),provide:wt({current:n,fallback:a,messages:i})}}}function Mn(e){const t=N((e==null?void 0:e.locale)??"en"),n=N((e==null?void 0:e.fallback)??"en"),a=N({en:Dn,...e==null?void 0:e.messages});return{name:"vuetify",current:t,fallback:n,messages:a,t:_t(t,n,a),n:bt(t,n),provide:wt({current:t,fallback:n,messages:a})}}const Fn={af:!1,ar:!0,bg:!1,ca:!1,ckb:!1,cs:!1,de:!1,el:!1,en:!1,es:!1,et:!1,fa:!1,fi:!1,fr:!1,hr:!1,hu:!1,he:!0,id:!1,it:!1,ja:!1,ko:!1,lv:!1,lt:!1,nl:!1,no:!1,pl:!1,pt:!1,ro:!1,ru:!1,sk:!1,sl:!1,srCyrl:!1,srLatn:!1,sv:!1,th:!1,tr:!1,az:!1,uk:!1,vi:!1,zhHans:!1,zhHant:!1},$e=Symbol.for("vuetify:locale");function In(e){return e.name!=null}function Ln(e){const t=e!=null&&e.adapter&&In(e==null?void 0:e.adapter)?e==null?void 0:e.adapter:Mn(e),n=Rn(t,e);return{...t,...n}}function Rn(e,t){const n=N((t==null?void 0:t.rtl)??Fn),a=T(()=>n.value[e.current.value]??!1);return{isRtl:a,rtl:n,rtlClasses:T(()=>`v-locale--is-${a.value?"rtl":"ltr"}`)}}const te=2.4,Ye=.2126729,ze=.7151522,Je=.072175,Bn=.55,On=.58,Tn=.57,Un=.62,fe=.03,Ze=1.45,Nn=5e-4,Gn=1.25,Vn=1.25,Qe=.078,qe=12.82051282051282,he=.06,et=.001;function tt(e,t){const n=(e.r/255)**te,a=(e.g/255)**te,i=(e.b/255)**te,s=(t.r/255)**te,l=(t.g/255)**te,c=(t.b/255)**te;let p=n*Ye+a*ze+i*Je,u=s*Ye+l*ze+c*Je;if(p<=fe&&(p+=(fe-p)**Ze),u<=fe&&(u+=(fe-u)**Ze),Math.abs(u-p)<Nn)return 0;let d;if(u>p){const h=(u**Bn-p**On)*Gn;d=h<et?0:h<Qe?h-h*qe*he:h-he}else{const h=(u**Un-p**Tn)*Vn;d=h>-et?0:h>-Qe?h-h*qe*he:h+he}return d*100}const nt=Symbol.for("vuetify:theme"),oe={defaultTheme:"light",variations:{colors:[],lighten:0,darken:0},themes:{light:{dark:!1,colors:{background:"#FFFFFF",surface:"#FFFFFF","surface-variant":"#424242","on-surface-variant":"#EEEEEE",primary:"#6200EE","primary-darken-1":"#3700B3",secondary:"#03DAC6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#F5F5F5","theme-on-code":"#000000"}},dark:{dark:!0,colors:{background:"#121212",surface:"#212121","surface-variant":"#BDBDBD","on-surface-variant":"#424242",primary:"#BB86FC","primary-darken-1":"#3700B3",secondary:"#03DAC5","secondary-darken-1":"#03DAC5",error:"#CF6679",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#FFFFFF","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.1,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.16,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#343434","theme-on-code":"#CCCCCC"}}}};function Wn(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:oe;if(!e)return{...oe,isDisabled:!0};const t={};for(const[i,s]of Object.entries(e.themes??{})){var n,a;const l=s.dark||i==="dark"?(n=oe.themes)==null?void 0:n.dark:(a=oe.themes)==null?void 0:a.light;t[i]=X(l,s)}return X(oe,{...e,themes:t})}function Kn(e){const t=Fe(Wn(e)),n=N(t.defaultTheme),a=N(t.themes),i=T(()=>{const u={};for(const[d,h]of Object.entries(a.value)){const v=u[d]={...h,colors:{...h.colors}};if(t.variations)for(const m of t.variations.colors){const y=v.colors[m];if(y)for(const S of["lighten","darken"]){const x=S==="lighten"?dn:fn;for(const C of Jt(t.variations[S],1))v.colors[`${m}-${S}-${C}`]=cn(x(J(y),C))}}for(const m of Object.keys(v.colors)){if(/^on-[a-z]/.test(m)||v.colors[`on-${m}`])continue;const y=`on-${m}`,S=J(v.colors[m]),x=Math.abs(tt(J(0),S)),C=Math.abs(tt(J(16777215),S));v.colors[y]=C>Math.min(x,50)?"#fff":"#000"}}return u}),s=T(()=>i.value[n.value]),l=T(()=>{const u=[];s.value.dark&&ne(u,":root",["color-scheme: dark"]);for(const[m,y]of Object.entries(i.value)){const{variables:S,dark:x}=y;ne(u,`.v-theme--${m}`,[`color-scheme: ${x?"dark":"normal"}`,...Hn(y),...Object.keys(S).map(C=>{const Y=S[C],E=typeof Y=="string"&&Y.startsWith("#")?J(Y):void 0,ee=E?`${E.r}, ${E.g}, ${E.b}`:void 0;return`--v-${C}: ${ee??Y}`})])}const d=[],h=[],v=new Set(Object.values(i.value).flatMap(m=>Object.keys(m.colors)));for(const m of v)/^on-[a-z]/.test(m)?ne(h,`.${m}`,[`color: rgb(var(--v-theme-${m})) !important`]):(ne(d,`.bg-${m}`,[`--v-theme-overlay-multiplier: var(--v-theme-${m}-overlay-multiplier)`,`background: rgb(var(--v-theme-${m})) !important`,`color: rgb(var(--v-theme-on-${m})) !important`]),ne(h,`.text-${m}`,[`color: rgb(var(--v-theme-${m})) !important`]),ne(h,`.border-${m}`,[`--v-border-color: var(--v-theme-${m})`]));return u.push(...d,...h),u.map((m,y)=>y===0?m:`    ${m}`).join("")});function c(u){const d=u._context.provides.usehead;if(d)d.addHeadObjs(T(()=>{const h={children:l.value,type:"text/css",id:"vuetify-theme-stylesheet"};return t.cspNonce&&(h.nonce=t.cspNonce),{style:[h]}})),j&&Me(()=>d.updateDOM());else{let v=function(){if(!t.isDisabled){if(typeof document<"u"&&!h){const m=document.createElement("style");m.type="text/css",m.id="vuetify-theme-stylesheet",t.cspNonce&&m.setAttribute("nonce",t.cspNonce),h=m,document.head.appendChild(h)}h&&(h.innerHTML=l.value)}},h=j?document.getElementById("vuetify-theme-stylesheet"):null;ve(l,v,{immediate:!0})}}const p=T(()=>t.isDisabled?void 0:`v-theme--${n.value}`);return{install:c,isDisabled:t.isDisabled,name:n,themes:a,current:s,computedThemes:i,themeClasses:p,styles:l,global:{name:n,current:s}}}function ne(e,t,n){e.push(`${t} {
`,...n.map(a=>`  ${a};
`),`}
`)}function Hn(e){const t=e.dark?2:1,n=e.dark?1:2,a=[];for(const[i,s]of Object.entries(e.colors)){const l=J(s);a.push(`--v-theme-${i}: ${l.r},${l.g},${l.b}`),i.startsWith("on-")||a.push(`--v-theme-${i}-overlay-multiplier: ${hn(s)>.18?t:n}`)}return a}function St(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{blueprint:t,...n}=e,a=X(t,n),{aliases:i={},components:s={},directives:l={}}=a,c=yn(a.defaults),p=wn(a.display,a.ssr),u=Kn(a.theme),d=Pn(a.icons),h=Ln(a.locale);return{install:m=>{for(const y in l)m.directive(y,l[y]);for(const y in s)m.component(y,s[y]);for(const y in i)m.component(y,ue({...i[y],name:y,aliasName:i[y].name}));if(u.install(m),m.provide(ce,c),m.provide(Ge,p),m.provide(nt,u),m.provide(He,d),m.provide($e,h),j&&a.ssr)if(m.$nuxt)m.$nuxt.hook("app:suspense:resolve",()=>{p.update()});else{const{mount:y}=m;m.mount=function(){const S=y(...arguments);return Gt(()=>p.update()),m.mount=y,S}}mt.reset(),m.mixin({computed:{$vuetify(){return Fe({defaults:ie.call(this,ce),display:ie.call(this,Ge),theme:ie.call(this,nt),icons:ie.call(this,He),locale:ie.call(this,$e)})}}})},defaults:c,display:p,theme:u,icons:d,locale:h}}const Xn="3.1.2";St.version=Xn;function ie(e){var t,n;const a=this.$,i=((t=a.parent)==null?void 0:t.provides)??((n=a.vnode.appContext)==null?void 0:n.provides);if(i&&e in i)return i[e]}class jn{constructor(){this.mixin={methods:{postMessage:t=>{this.port.postMessage(t)}}}}postMessage(t){this.port.postMessage(t)}startup(t){this.port=F.runtime.connect({name:t})}shutdown(){this.port=null}get raw(){return this.port}}const P=new jn,$n=12e4,Yn=36e5,ge=750,zn={mixins:[P.mixin],props:["notification"],data:()=>({tooltipDelay:ge}),methods:{dispatchActionResponse(e,t,n){const a=this.postMessage;switch(t){case"enableHighSecurityKPRPCConnection":M.current.connSLClient=3,M.save();break;case"loadUrlUpgradeKee":a({loadUrlUpgradeKee:!0});break;case"disableNotifyWhenEntryUpdated":M.current.notifyWhenEntryUpdated=!1,M.save();break;case"launchLoginEditorFromNotification":a({loginEditor:{uuid:n.uuid,DBfilename:n.fileName}});break}a({removeNotification:e})},closeNotification(e){const t=this.postMessage;t({removeNotification:e})}}},V=(e,t)=>{const n=e.__vccOpts||e;for(const[a,i]of t)n[a]=i;return n},Jn={style:{float:"right"}};function Zn(e,t,n,a,i,s){const l=f("v-icon"),c=f("v-btn"),p=f("v-card-text"),u=f("v-tooltip"),d=f("v-row"),h=f("v-col"),v=f("v-card-actions"),m=f("v-card");return b(),w(m,{color:"yellow lighten-3"},{default:r(()=>[A("div",Jn,[o(c,{text:"",class:"ml-4 mr-2 px-2 primary--text",onClick:t[0]||(t[0]=y=>s.closeNotification(n.notification.id))},{default:r(()=>[_(g(e.$i18n("close"))+" ",1),o(l,null,{default:r(()=>[_("mdi-close")]),_:1})]),_:1})]),o(p,{class:"primary--text"},{default:r(()=>[(b(!0),L(q,null,Q(n.notification.messages,(y,S)=>(b(),L("p",{key:S},g(y),1))),128))]),_:1}),o(v,null,{default:r(()=>[o(d,{justify:"center",align:"end",class:"mb-1 mt-1"},{default:r(()=>[o(h,null,{default:r(()=>[o(d,{align:"end",class:"ml-2 justify-left my-0"},{default:r(()=>[(b(!0),L(q,null,Q(n.notification.buttons,(y,S)=>(b(),w(u,{key:S,top:"",disabled:!y.tooltip,"open-delay":e.tooltipDelay},{activator:r(({on:x})=>[o(c,O({id:y.id,class:"mr-4 my-2"},U(x),{onClick:C=>s.dispatchActionResponse(n.notification.id,y.action,y.values)}),{default:r(()=>[_(g(y.label),1)]),_:2},1040,["id","onClick"]),A("span",null,g(y.tooltip),1)]),_:2},1032,["disabled","open-delay"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const Qn=V(zn,[["render",Zn]]),qn={mixins:[P.mixin],setup(){const{updateSearchResults:e,updateCurrentSearchTerm:t}=R();return{updateSearchResults:e,updateCurrentSearchTerm:t}},data(){return{}},computed:{...re(R,["currentSearchTerm","KeePassDatabases","ActiveKeePassDatabaseIndex"])},created(){this.onDBChanged=()=>{this.search=new ot({KeePassDatabases:this.KeePassDatabases,ActiveKeePassDatabaseIndex:this.ActiveKeePassDatabaseIndex},{version:1,searchAllDatabases:M.current.searchAllOpenDBs,maximumResults:50})},this.onDBChanged()},mounted(){this.subscribe(e=>{e.type===mTypes.updateKeePassDatabases&&this.onDBChanged()})},methods:{onSearchComplete(e){H.debug("onSearchComplete"),e=e.sort(function(t,n){return t.relevanceScore>n.relevanceScore?-1:t.relevanceScore<n.relevanceScore?1:0}).map(t=>Object.assign(t,{fullDetails:null})),this.updateSearchResults(e)},onSearchInput(e){this.updateCurrentSearchTerm(e),this.search.execute(e,this.onSearchComplete.bind(this),[])},focusFirstResult(){const e=document.querySelector("#searchPanel > .v-card");e&&e.focus()},handleEscape(){const e=document.getElementById("searchBox");e.value?(e.value="",e.dispatchEvent(new Event("input"))):window.close()}}};function ea(e,t,n,a,i,s){const l=f("v-text-field");return b(),w(l,{id:"searchBox",solo:"",placeholder:e.$i18n("Search_label"),"hide-details":"",class:"search my-0",style:{},name:"cc5704978dc0411591addc66d25c325b",value:e.currentSearchTerm,autofocus:"",onInput:s.onSearchInput,onKeyup:[B(D(s.focusFirstResult,["stop","prevent"]),["arrow-down"]),B(D(s.focusFirstResult,["stop","prevent"]),["enter"]),B(D(s.handleEscape,["stop","prevent"]),["escape"])]},null,8,["placeholder","value","onInput","onKeyup"])}const ta=V(qn,[["render",ea]]),na={props:["field"],data:()=>({revealed:!1,tooltipDelay:ge}),computed:{displayValue:function(){return G.getDisplayValue(this.field,this.revealed)},tooltip:function(){return G.getDisplayTooltip(this.field,this.revealed)},useful:function(){return this.field.type!=="checkbox"&&this.displayValue.length>0},fieldStyle:function(){return this.field.type==="password"?"cursor: pointer":"cursor: default"}},methods:{toggleReveal:function(){this.revealed=!this.revealed},copyValue:async function(){await Ie(G.getDisplayValue(this.field,!0))}}};function aa(e,t,n,a,i,s){const l=f("v-tooltip"),c=f("v-col"),p=f("v-icon"),u=f("v-btn"),d=f("v-row");return s.useful?(b(),w(d,{key:0,justify:"center",align:"center"},{default:r(()=>[o(c,{class:"text-truncate my-2 text-right"},{default:r(()=>[o(l,{bottom:"","open-delay":e.tooltipDelay},{activator:r(({on:h})=>[A("span",O({style:s.fieldStyle},U(h,!0),{onClick:t[0]||(t[0]=(...v)=>s.toggleReveal&&s.toggleReveal(...v))}),g(s.displayValue),17)]),default:r(()=>[A("span",null,g(s.tooltip),1)]),_:1},8,["open-delay"])]),_:1}),o(c,{class:"my-0 shrink"},{default:r(()=>[o(l,{left:"","open-delay":e.tooltipDelay},{activator:r(({on:h})=>[o(u,O({small:"",icon:"",class:"my-0"},U(h),{onClick:s.copyValue}),{default:r(()=>[o(p,{small:""},{default:r(()=>[_(" mdi-content-copy ")]),_:1})]),_:2},1040,["onClick"])]),default:r(()=>[A("span",null,g(e.$i18n("copy_value_to_clipboard")),1)]),_:1},8,["open-delay"])]),_:1})]),_:1})):k("",!0)}const sa=V(na,[["render",aa]]);function ra(e,t){return e.type!==t.type?!1:e.id===t.id&&e.name===t.name}function ke(e,t){return e.type!==t.type?!1:!!(e.value===t.value||e.locators.some(n=>t.locators.some(a=>ra(n,a))))}function at(e,t){return e.type===t.type}function oa(e,t){var n;return(n=t.locators[0].autocompleteValues)!=null&&n.some(a=>a==="new-password")?e.locators[0]:t.locators[0]}function ia(e,t){const n=[],a=[],i=[];t.forEach((c,p)=>{if(c.type!=="text")return;let u=e.findIndex(d=>ke(d,c));u===-1&&(u=e.findIndex(d=>at(d,c))),u>=0&&(n.push(new G({...c,resetValue:e[u].value})),e.splice(u,1),i.push(p))}),t.forEach((c,p)=>{if(c.type!=="password")return;let u=e.findIndex(d=>ke(d,c));u===-1&&(u=e.findIndex(d=>at(d,c))),u>=0&&(n.push(new G({...c,resetValue:e[u].value,locators:[oa(e[u],c)]})),e.splice(u,1),i.push(p))}),t.forEach((c,p)=>{if(i.indexOf(p)>=0)return;const u=e.findIndex(d=>ke(d,c));u>=0?(n.push(new G({...c,resetValue:e[u].value})),e.splice(u,1)):n.push(c)}),e.forEach(c=>n.push(c));const s=n.findIndex(c=>c.type==="text");s>=0&&a.push(n.splice(s,1)[0]);const l=n.findIndex(c=>c.type==="password");return l>=0&&a.push(n.splice(l,1)[0]),a.concat(n)}function At(e,t,n){const a=t.submittedData,i=a?a.fields:[],s=ia(JSON.parse(JSON.stringify(e.fields)),i),l=a?{URLs:[a.url],fields:s,title:a.title}:{};return Object.assign({},e,l,n?{URLs:n}:{})}async function la(e){return(await F.webNavigation.getAllFrames({tabId:e.id})).map(n=>n.url)}async function ca(e,t){var s;const n=t?null:(await F.tabs.query({active:!0,currentWindow:!0}))[0],a=t??n.url;if(e.some(l=>l===a))return{urls:e,showWarning:!1};const i=(s=Z.fromString(a))==null?void 0:s.domainOrIPAddress;if(!i)return{urls:e,showWarning:!1};if(e.some(l=>{var c;return((c=Z.fromString(l))==null?void 0:c.domainOrIPAddress)===i}))return{urls:[a].concat(e.slice(1)),showWarning:!1};if(!t){const l=await la(n);if(e.some(c=>l.some(p=>{var u,d;return((u=Z.fromString(p))==null?void 0:u.domainOrIPAddress)===((d=Z.fromString(c))==null?void 0:d.domainOrIPAddress)})))return{urls:e,showWarning:!1}}return{urls:[a].concat(e),showWarning:!0}}const ua={components:{Field:sa},mixins:[P.mixin],props:["entrySummary","isFirstInAList","entryIndex","frameId"],setup(){const{updateSaveState:e}=R();return{updateSaveState:e}},data:()=>({expanded:!1,focussed:!1,tooltipDelay:ge}),computed:{titleStyle:function(){return"background-size:32px; background-position:16px calc(50% + 1px); background-image:url(data:image/png;base64,"+this.entrySummary.icon.iconImageData+")"},usernameDisplayValue:function(){const e=this.entrySummary;return e&&e.usernameValue?e.usernameValue:"["+$STR("noUsername_partial_tip")+"]"},tabindex:function(){return this.isFirstInAList?"0":"-1"},allFields:function(){return this.entrySummary.fullDetails.fields},entryDomain:function(){const e=this.entrySummary.url;if(!e||e.length<4)return"<unknown>";const t=Z.fromString(e);return t?t.domainWithPort||t.url.host:"<error>"},entryPath:function(){return this.entryPathIsLong?"... > "+this.entrySummary.fullDetails.parentGroup.path:this.fullEntryPath},entryPathIsLong:function(){return this.fullEntryPath.length>35},fullEntryPath:function(){const e=this.entrySummary.fullDetails;return e.database.name+" > "+e.parentGroup.path},isMatchedEntry:function(){return typeof this.entrySummary.isPreferredMatch=="boolean"}},methods:{toggleFullDetails(){this.expanded?this.hideFullDetails():this.showFullDetails()},showFullDetails(){!this.expanded&&!this.entrySummary.fullDetails&&P.postMessage({findMatches:{uuid:this.entrySummary.uuid,DBfilename:this.entrySummary.dbFileName}}),this.expanded=!0},hideFullDetails(){this.expanded=!1},async editEntry(){var s;const e=this.saveState,t=this.entrySummary.fullDetails,n=Object.assign({},e),{urls:a,showWarning:i}=await ca(t.URLs,(s=e.submittedData)==null?void 0:s.url);n.newEntry=At(t,e,a),n.titleResetValue=t.title,n.lastActiveAt=new Date,n.showURLMismatchWarning=i,this.updateSaveState(n)},focusin:function(e){this.$refs.card.$el.contains(e.relatedTarget)||(this.focussed=!0)},focusout:function(e){this.$refs.card.$el.contains(e.relatedTarget)||(this.focussed=!1)},async primaryClickAction(){if(this.entryIndex!==void 0)this.manualFill();else{const e=await F.tabs.query({currentWindow:!0,active:!0,url:["https://keevault.pm/*","https://app-beta.kee.pm/*","https://app-dev.kee.pm/*"]});e&&e.length>0?this.loadInNewTab():this.loadInSameTab()}},loadInSameTab(){F.tabs.update({url:this.entrySummary.url}),window.close()},loadInNewTab(){F.tabs.create({url:this.entrySummary.url}),window.close()},manualFill(){P.postMessage({action:z.ManualFill,selectedEntryIndex:this.entryIndex,frameId:this.frameId}),window.close()},nextInList(){this.$emit("move-next-in-list")},prevInList(){this.$emit("move-prev-in-list")},exitList(){this.$emit("move-out-of-list")},onPreferredEntryClick(){this.$emit("pref-entry-toggle",{uuid:this.entrySummary.uuid})}}},da={class:"text-truncate text-caption py-1"},fa={class:"text-truncate text-caption py-1"};function ha(e,t,n,a,i,s){const l=f("v-col"),c=f("v-row"),p=f("v-container"),u=f("v-hover"),d=f("v-icon"),h=f("v-btn"),v=f("Field"),m=f("v-tooltip"),y=f("v-divider"),S=f("v-checkbox"),x=f("v-slide-y-transition"),C=f("v-card-text"),Y=f("v-card");return b(),w(u,null,{default:r(()=>[o(Y,{ref:"card","slot-scope":"{ hover }",tabindex:`${s.tabindex}`,elevation:`${e.hover?12:3}`,class:"my-2",ripple:!1,onFocusin:s.focusin,onFocusout:s.focusout,onKeyup:[B(D(s.showFullDetails,["stop","prevent"]),["context-menu"]),B(D(s.nextInList,["stop","prevent"]),["arrow-down"]),B(D(s.prevInList,["stop","prevent"]),["arrow-up"]),B(D(s.showFullDetails,["stop","prevent"]),["arrow-right"]),B(D(s.hideFullDetails,["stop","prevent"]),["arrow-left"]),B(D(s.exitList,["stop","prevent"]),["escape"]),B(D(s.primaryClickAction,["self","stop","prevent"]),["enter"]),B(D(s.loadInNewTab,["ctrl","self","stop","prevent"]),["enter"])]},{default:r(()=>[o(p,{class:"ma-0 pa-0 my-2",style:Se(s.titleStyle)},{default:r(()=>[o(c,{class:"mr-3 ml-12 my-0",style:Se(`${e.hover?"cursor: pointer":""}`),onClick:[D(s.primaryClickAction,["left","exact"]),D(s.loadInNewTab,["left","ctrl"])],onMouseup:[D(s.loadInNewTab,["middle","exact"]),D(s.primaryClickAction,["middle","ctrl"])],onContextmenu:D(s.showFullDetails,["right","stop","prevent"])},{default:r(()=>[o(l,{class:"text-truncate"},{default:r(()=>[o(u,null,{default:r(()=>[o(p,{fluid:"",class:"ma-0 pa-0"},{default:r(()=>[o(c,{"no-gutters":"",class:"my-0"},{default:r(()=>[o(l,{class:"text-truncate"},{default:r(()=>[_(g(n.entrySummary.title),1)]),_:1})]),_:1}),o(c,{"no-gutters":"",class:"my-0"},{default:r(()=>[o(l,{style:Se(`${e.expanded?"visibility:hidden":""}`),class:"text-truncate text-caption"},{default:r(()=>[_(g(s.usernameDisplayValue),1)]),_:1},8,["style"])]),_:1})]),_:1})]),_:1})]),_:1}),e.hover||e.focussed?(b(),w(l,{key:0,cols:"2",class:"mr-3 align-self-center"},{default:r(()=>[o(h,{icon:"",onClick:D(s.toggleFullDetails,["stop","prevent"])},{default:r(()=>[o(d,null,{default:r(()=>[_(g(e.expanded?"mdi-chevron-down":"mdi-chevron-up"),1)]),_:1})]),_:1},8,["onClick"])]),_:1})):k("",!0)]),_:1},8,["style","onClick","onMouseup","onContextmenu"])]),_:1},8,["style"]),o(C,{class:"py-0 text-truncate",style:{cursor:"default"}},{default:r(()=>[o(x,null,{default:r(()=>[e.expanded&&n.entrySummary.fullDetails?(b(),w(p,{key:0,class:"my-0 pa-0 mx-2"},{default:r(()=>[(b(!0),L(q,null,Q(s.allFields,E=>(b(),w(v,{key:E.uuid,field:E},null,8,["field"]))),128)),o(c,{justify:"space-between",align:"center",class:"my-0"},{default:r(()=>[o(l,{class:"text-truncate"},{default:r(()=>[o(m,{top:"",disabled:!s.entryPathIsLong,"open-delay":e.tooltipDelay},{activator:r(({on:E})=>[o(c,O({class:"justify-left text-truncate flex-nowrap my-0",align:"center"},U(E)),{default:r(()=>[o(d,{small:"",class:"py-1 pl-0 pr-2"},{default:r(()=>[_("mdi-folder")]),_:1}),A("span",da,g(s.entryPath),1)]),_:2},1040)]),default:r(()=>[A("span",null,g(s.fullEntryPath),1)]),_:1},8,["disabled","open-delay"]),o(m,{top:"","open-delay":e.tooltipDelay},{activator:r(({on:E})=>[o(c,O({class:"justify-left text-truncate flex-nowrap my-0",align:"center"},U(E)),{default:r(()=>[o(d,{small:"",class:"py-1 pl-0 pr-2"},{default:r(()=>[_("mdi-cloud")]),_:1}),A("span",fa,g(s.entryDomain),1)]),_:2},1040)]),default:r(()=>[A("span",null,g(n.entrySummary.url),1)]),_:1},8,["open-delay"])]),_:1}),o(l,{class:"ma-2 shrink"},{default:r(()=>[o(h,{fab:"",small:"",left:"",onClick:s.editEntry},{default:r(()=>[o(d,null,{default:r(()=>[_("mdi-pencil")]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1}),s.isMatchedEntry?(b(),w(c,{key:0,justify:"space-between",align:"center"},{default:r(()=>[o(l,{class:"text-truncate pt-0 ma-0"},{default:r(()=>[o(y),o(S,{label:e.$i18n("preferred_matching_entry"),"input-value":n.entrySummary.isPreferredMatch,onChange:s.onPreferredEntryClick},null,8,["label","input-value","onChange"])]),_:1})]),_:1})):k("",!0)]),_:1})):k("",!0)]),_:1})]),_:1})]),_:1},8,["tabindex","elevation","onFocusin","onFocusout","onKeyup"])]),_:1})}const ma=V(ua,[["render",ha]]);class pa{constructor(t){this.matchedEntrySummaries=t,this.searchConfig=Vt({version:1})}filterExistingResults(t,n){return t.filter(a=>Wt(a,n,0,this.searchConfig))}execute(t,n){let a=!1;if((!this.matchedEntrySummaries||this.matchedEntrySummaries.length===0)&&(a=!0),n=n||this.searchConfig.onComplete,n||(a=!0),a)if(n){n([]);return}else return[];if(!t||t.length===0){n(this.matchedEntrySummaries);return}let i=[];Array.isArray(t)?i=t:t.length>0&&(i=Kt(t)),window.setTimeout(()=>{const s=this.filterExistingResults(this.matchedEntrySummaries,i);n(s)},1)}}const va={components:{Entry:ma},props:["matchedEntries","frameId"],data(){return{filteredMatches:null,uidMap:new Map}},computed:{...re(R,["currentSearchTerm","searchResults"]),deduplicatedSearchResults:function(){return this.searchResults?this.matchedEntries?this.searchResults.filter(e=>!this.matchedEntries.some(t=>t.uuid===e.uuid)):this.searchResults:null}},watch:{matchedEntries:function(e){this.initAndSearchMatchedEntries(e)}},created(){this.initAndSearchMatchedEntries(this.matchedEntries)},mounted(){this.subscribe(e=>{e.type===mTypes.updateCurrentSearchTerm&&this.searchOnlyMatches.execute(this.currentSearchTerm,this.onSearchOnlyMatchesComplete.bind(this))})},methods:{onSearchOnlyMatchesComplete(e){H.debug("onSearchOnlyMatchesComplete"),e=e.sort(function(t,n){return t.relevanceScore>n.relevanceScore?-1:t.relevanceScore<n.relevanceScore?1:0}),this.filteredMatches=e.map(t=>({entry:t,originalIndex:this.uidMap.get(t.uuid)}))},nextInList(e,t,n){const a=this.$refs[t].find(i=>parseInt(i.$el.dataset.index)===e);e<n-1?a.$el.nextElementSibling.focus():t==="listAarray"&&this.deduplicatedSearchResults.length>0&&this.$refs.listBarray.find(s=>parseInt(s.$el.dataset.index)===0).$el.focus()},prevInList(e,t){const n=this.$refs[t].find(a=>parseInt(a.$el.dataset.index)===e);e>0?n.$el.previousElementSibling.focus():t==="listBarray"&&this.filteredMatches.length>0?this.$refs.listAarray.find(i=>parseInt(i.$el.dataset.index)===this.filteredMatches.length-1).$el.focus():document.getElementById("searchBox").focus()},exitList(){document.getElementById("searchBox").focus()},initAndSearchMatchedEntries(e){if(e)for(let t=0;t<e.length;t++)this.uidMap.set(e[t].uuid,e[t].entryIndex);this.searchOnlyMatches=new pa(e==null?void 0:e.map(t=>Ht.fromEntry(t))),this.searchOnlyMatches.execute(this.currentSearchTerm,this.onSearchOnlyMatchesComplete.bind(this))}}},ya={id:"searchPanel",class:"pb-6 pt-0 pr-0"};function ga(e,t,n,a,i,s){const l=f("v-divider"),c=f("Entry"),p=f("v-subheader");return b(),L("div",ya,[W(o(l,null,null,512),[[K,i.filteredMatches&&i.filteredMatches.length>0]]),(b(!0),L(q,null,Q(i.filteredMatches,(u,d)=>(b(),w(c,O({key:u.entry.uuid,ref_for:!0,ref:"listAarray",entrySummary:u.entry,isFirstInAList:d===0,"frame-id":e.frame-e.id,"entry-index":u.originalIndex,"data-index":d,onMoveNextInList:h=>s.nextInList(d,"listAarray",i.filteredMatches.length),onMovePrevInList:h=>s.prevInList(d,"listAarray",i.filteredMatches.length),onMoveOutOfList:s.exitList},U(e.$listeners)),null,16,["entrySummary","isFirstInAList","frame-id","entry-index","data-index","onMoveNextInList","onMovePrevInList","onMoveOutOfList"]))),128)),W(o(l,{class:"mt-2"},null,512),[[K,s.deduplicatedSearchResults&&s.deduplicatedSearchResults.length>0]]),W(o(p,{class:"text-center",style:{"justify-content":"center"}},{default:r(()=>[_(g(e.$i18n("matches_from_other_sites")),1)]),_:1},512),[[K,s.deduplicatedSearchResults&&s.deduplicatedSearchResults.length>0]]),(b(!0),L(q,null,Q(s.deduplicatedSearchResults,(u,d)=>(b(),w(c,{key:u.uuid,ref_for:!0,ref:"listBarray",entrySummary:u,isFirstInAList:d===0,"data-index":d,onMoveNextInList:h=>s.nextInList(d,"listBarray",s.deduplicatedSearchResults.length),onMovePrevInList:h=>s.prevInList(d,"listBarray",s.deduplicatedSearchResults.length),onMoveOutOfList:s.exitList},null,8,["entrySummary","isFirstInAList","data-index","onMoveNextInList","onMovePrevInList","onMoveOutOfList"]))),128))])}const _a=V(va,[["render",ga]]),ba={mixins:[P.mixin],props:["field","standalone","topmost"],setup(){const{updateGeneratedPassword:e}=R();return{updateGeneratedPassword:e}},data:()=>({selectedProfile:"",forceCopy:!1,generatedPassword:"",revealed:!1,loading:!1}),computed:{...re(R,["PasswordProfiles","saveState"]),items:function(){return this.PasswordProfiles.map(e=>e.name)},disabled:function(){return!this.generatedPassword},forceCopyHint:function(){return this.forceCopy?this.$i18n("generatePassword_done_2"):""},renderedPassword:function(){return this.revealed?this.generatedPassword:"*".repeat(this.generatedPassword.length)},okButtonText:function(){return this.standalone?this.$i18n("generator_action_copy"):this.forceCopy?this.$i18n("generator_action_apply_and_copy"):this.$i18n("generator_action_apply")},cancelButtonText:function(){return this.standalone?this.$i18n("close"):this.$i18n("cancel")},dialogTransition:function(){return this.topmost?"false":"dialog-transition"}},methods:{ok:async function(){(this.standalone||this.forceCopy)&&this.$emit("copy-to-clipboard",{value:this.generatedPassword}),this.$emit("dialog-closed",{value:this.generatedPassword})},cancel:function(){this.$emit("dialog-closed")},profileChanged:function(e){var n,a,i;this.loading=!0;const t=this.$watch("$store.generatedPassword",function(s){t(),this.updateGeneratedPassword(""),this.generatedPassword=s,this.loading=!1});P.postMessage({action:z.GeneratePassword,passwordProfile:e,url:(i=(a=(n=this.saveState)==null?void 0:n.newEntry)==null?void 0:a.URLs)==null?void 0:i[0]})}}};const wa={key:0},Sa=A("br",null,null,-1),Aa={key:1};function Ca(e,t,n,a,i,s){const l=f("v-select"),c=f("v-col"),p=f("v-icon"),u=f("v-btn"),d=f("v-row"),h=f("v-card"),v=f("v-checkbox"),m=f("v-card-text"),y=f("v-spacer"),S=f("v-card-actions"),x=f("v-dialog");return b(),w(x,{value:"true",fullscreen:"",persistent:"","hide-overlay":"",transition:s.dialogTransition,onKeydown:B(s.cancel,["esc"])},{default:r(()=>[o(h,null,{default:r(()=>[A("div",null,[o(m,null,{default:r(()=>[o(l,{modelValue:e.selectedProfile,"onUpdate:modelValue":t[0]||(t[0]=C=>e.selectedProfile=C),items:s.items,label:e.$i18n("password_profile"),outlined:"",color:"secondary",hint:e.$i18n("password_profile_hint"),"persistent-hint":"",class:"mt-4",onChange:s.profileChanged},null,8,["modelValue","items","label","hint","onChange"]),o(h,{loading:e.loading,class:"mx-auto px-3 py-0 mt-4",style:{"font-family":"monospace"},"max-width":"300"},{default:r(()=>[o(d,{class:"flex-nowrap",align:"center"},{default:r(()=>[o(c,{cols:"10",class:"text-center"},{default:r(()=>[_(g(s.renderedPassword),1)]),_:1}),o(c,{cols:"2"},{default:r(()=>[o(u,{small:"",icon:"",onClick:t[1]||(t[1]=C=>e.revealed=!e.revealed)},{default:r(()=>[o(p,null,{default:r(()=>[_(g(e.revealed?"mdi-eye":"mdi-eye-off"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["loading"]),n.standalone?k("",!0):(b(),L("div",wa,[Sa,_(" "+g(e.$i18n("password_will_be_set_on_field")),1)])),n.standalone?k("",!0):(b(),L("div",Aa,[o(v,{modelValue:e.forceCopy,"onUpdate:modelValue":t[2]||(t[2]=C=>e.forceCopy=C),label:e.$i18n("also_copy_to_clipboard"),"persistent-hint":"",hint:s.forceCopyHint},null,8,["modelValue","label","hint"])]))]),_:1})]),o(S,null,{default:r(()=>[o(y),o(u,{color:"tertiary",onClick:s.cancel},{default:r(()=>[_(g(s.cancelButtonText),1)]),_:1},8,["onClick"]),o(u,{color:"primary",disabled:s.disabled,onClick:s.ok},{default:r(()=>[_(g(s.okButtonText),1)]),_:1},8,["disabled","onClick"])]),_:1})]),_:1})]),_:1},8,["transition","onKeydown"])}const Ct=V(ba,[["render",Ca]]),ka={components:{PasswordGenerator:Ct},props:["field"],data:()=>({revealed:!1,showPasswordGenerator:!1,focussed:!1}),computed:{renderType:function(){return this.field.type==="password"?this.revealed?"text":"password":this.field.type},resettable:function(){return this.field.resetValue!==this.field.value},label:function(){return G.getDisplayName(this.field)}},methods:{reset:function(){this.valueChanged(this.field.resetValue)},valueChanged:function(e){this.$emit("field-value-changed",{uuid:this.field.uuid,value:e})},deleteClicked:function(){this.$emit("field-deleted",{uuid:this.field.uuid})},passwordGeneratorClosed:function(e){e!=null&&e.value&&this.valueChanged(e.value),this.showPasswordGenerator=!1},onFocus(){this.focussed=!0},onBlur(){this.focussed=!1},copyToClipboard:async function(e){e!=null&&e.value&&await Ie(e.value)}}},xa={slot:"append"},Pa={slot:"append-outer"};function Ea(e,t,n,a,i,s){const l=f("v-icon"),c=f("v-btn"),p=f("v-fade-transition"),u=f("v-text-field"),d=f("PasswordGenerator"),h=f("v-col"),v=f("v-row");return n.field.type==="password"||n.field.type==="text"?(b(),w(v,{key:0},{default:r(()=>[o(h,null,{default:r(()=>[o(u,{label:s.label,value:n.field.value,color:"secondary",dense:"",outlined:"","hide-details":"auto",type:s.renderType,onInput:s.valueChanged,onFocus:s.onFocus,onBlur:s.onBlur},{default:r(()=>[A("template",xa,[o(p,null,{default:r(()=>[e.focussed&&s.resettable?(b(),w(c,{key:0,small:"",icon:"",onClick:s.reset},{default:r(()=>[o(l,null,{default:r(()=>[_("mdi-undo")]),_:1})]),_:1},8,["onClick"])):k("",!0)]),_:1}),n.field.type==="password"?(b(),w(c,{key:0,small:"",icon:"",onClick:t[0]||(t[0]=m=>e.revealed=!e.revealed)},{default:r(()=>[o(l,null,{default:r(()=>[_(g(e.revealed?"mdi-eye":"mdi-eye-off"),1)]),_:1})]),_:1})):k("",!0)]),A("template",Pa,[n.field.type==="password"?(b(),w(c,{key:0,small:"",icon:"",class:"mr-3",onClick:t[1]||(t[1]=m=>e.showPasswordGenerator=!0)},{default:r(()=>[o(l,null,{default:r(()=>[_("mdi-flash")]),_:1})]),_:1})):k("",!0),o(c,{small:"",icon:"",onClick:s.deleteClicked},{default:r(()=>[o(l,null,{default:r(()=>[_("mdi-delete")]),_:1})]),_:1},8,["onClick"])])]),_:1},8,["label","value","type","onInput","onFocus","onBlur"]),e.showPasswordGenerator?(b(),w(d,{key:0,onDialogClosed:s.passwordGeneratorClosed,onCopyToClipboard:s.copyToClipboard},null,8,["onDialogClosed","onCopyToClipboard"])):k("",!0)]),_:1})]),_:1})):k("",!0)}const Da=V(ka,[["render",Ea]]),Ma={components:{FieldEditor:Da},mixins:[P.mixin],setup(){const{updateSaveState:e,removeFieldFromActiveEntry:t}=R();return{updateSaveState:e,removeFieldFromActiveEntry:t}},data:()=>({originalFields:[],differentSiteConfirmation:!1,loading:!0,preferToSkipWhere:!1,skipWhere:!1,domainMatchesExistingEntry:!1,preferredGroupUuid:null,preferredDb:null,primaryFound:!1,titleFocussed:!0}),computed:{...re(R,["saveState","KeePassDatabases","ActiveKeePassDatabaseIndex"]),resettableTitle:function(){return this.saveState.titleResetValue!==this.saveState.newEntry.title},editingExisting:function(){const e=this.saveState.newEntry;return e.database.fileName&&e.database.root.uuid!==Ee},showURLMismatchWarning:function(){return this.saveState.showURLMismatchWarning},entryDomain:function(){const e=this.saveState.newEntry.URLs[0];if(!e||e.length<4)return"<unknown>";const t=Z.fromString(e);return t?t.domainWithPort||t.url.host:"<error>"},displayWhereReason:function(){return this.loading||!this.preferToSkipWhere?null:this.domainMatchesExistingEntry?this.$i18n("skip_where_reason_domain_entry_exists"):this.primaryFound?this.$i18n("skip_where_reason_group_not_found"):null}},async mounted(){this.preferToSkipWhere=M.current.rememberMRUGroup;const e=this.KeePassDatabases,{preferredGroupUuid:t,preferredDb:n,primaryFound:a}=this.getPreferredGroup(M.current.mruGroup,e);this.preferredGroupUuid=t,this.preferToSkipWhere&&(this.preferredDb=n,this.primaryFound=a,this.domainMatchesExistingEntry=this.anyEntryMatchesNewDomain(),this.preferredGroupUuid&&this.preferredDb&&!this.domainMatchesExistingEntry&&(this.skipWhere=!0)),this.loading=!1},methods:{cancel:function(){this.$emit("cancel-clicked")},nextClicked:function(){this.$emit("save-where-clicked",this.displayWhereReason,this.preferredGroupUuid)},saveEntry:function(){const e=Object.assign({},this.saveState);e.newEntry=new se({...e.newEntry,parentGroup:new De({uuid:this.preferredGroupUuid}),database:this.preferredDb}),this.updateSaveState(e),P.postMessage({action:z.CreateEntry}),window.close()},updateEntry:function(){P.postMessage({action:z.UpdateEntry}),window.close()},openFullEntryEditor(){const e=this.saveState.newEntry;P.postMessage({loginEditor:{uuid:e.uuid,DBfilename:e.database.fileName}}),window.close()},setTitle:function(e){const t=Object.assign({},this.saveState);t.newEntry=new se({...t.newEntry,title:e}),this.updateSaveState(t)},resetTitle:function(){this.setTitle(this.saveState.titleResetValue)},fieldValueChanged:function(e){const t=Object.assign({},this.saveState),n=this.saveState.newEntry.fields.findIndex(l=>l.uuid===e.uuid),a=this.saveState.newEntry.fields[n],i=new G({...a,value:e.value}),s=JSON.parse(JSON.stringify(t.newEntry.fields));s[n]=i,t.newEntry=new se({...t.newEntry,fields:s}),this.updateSaveState(t)},fieldDeleted:function(e){this.removeFieldFromActiveEntry(e.uuid)},getPreferredGroup:function(e,t){if(!e)return{preferredGroupUuid:null,preferredDb:null,primaryFound:!1};let n=!1;const a=[],i=e["{<{{<<kee-primary>>}}>}"];i&&(n=!0,a.push(i)),t.length===1&&e[t[0].fileName]&&e[t[0].fileName]!==a[0]&&a.push(e[t[0].fileName]);for(const s of a){if(!s)continue;const l=t.find(c=>it.containsId(c.root,s));if(l)return{preferredGroupUuid:s,preferredDb:new lt({fileName:l.fileName,root:new De({uuid:Ee})}),primaryFound:n}}return{preferredGroupUuid:null,preferredDb:null,primaryFound:n}},anyEntryMatchesNewDomain:function(){const e=this.saveState.newEntry.URLs[0];if(!e||e.length<4)return!1;const t=Z.fromString(e);if(!t)return!1;const a=new ot({KeePassDatabases:this.KeePassDatabases,ActiveKeePassDatabaseIndex:this.ActiveKeePassDatabaseIndex},{version:1,searchAllDatabases:M.current.searchAllOpenDBs,maximumResults:1}).execute("",void 0,[t.domainOrIPAddress]);return!!(a!=null&&a.length)},onTitleFocus(){this.titleFocussed=!0},onTitleBlur(){this.titleFocussed=!1}}},Fa={slot:"append"};function Ia(e,t,n,a,i,s){const l=f("v-icon"),c=f("v-btn"),p=f("v-text-field"),u=f("v-col"),d=f("v-row"),h=f("FieldEditor"),v=f("v-container"),m=f("v-slide-y-transition"),y=f("v-checkbox"),S=f("v-alert");return b(),L("div",null,[o(m,null,{default:r(()=>[o(v,{class:"my-3 pa-0"},{default:r(()=>[o(d,null,{default:r(()=>[o(u,null,{default:r(()=>[o(p,{label:e.$i18n("title"),color:"secondary",value:e.saveState.newEntry.title,dense:"",outlined:"","hide-details":"auto",type:e.text,autofocus:"",onInput:s.setTitle,onFocus:s.onTitleFocus,onBlur:s.onTitleBlur},{default:r(()=>[A("template",Fa,[e.titleFocussed&&s.resettableTitle?(b(),w(c,{key:0,small:"",icon:"",onClick:s.resetTitle},{default:r(()=>[o(l,null,{default:r(()=>[_("mdi-undo")]),_:1})]),_:1},8,["onClick"])):k("",!0)])]),_:1},8,["label","value","type","onInput","onFocus","onBlur"])]),_:1})]),_:1}),(b(!0),L(q,null,Q(e.saveState.newEntry.fields,x=>(b(),w(h,{key:x.uuid,field:x,onFieldValueChanged:s.fieldValueChanged,onFieldDeleted:s.fieldDeleted},null,8,["field","onFieldValueChanged","onFieldDeleted"]))),128))]),_:1})]),_:1}),s.showURLMismatchWarning?(b(),w(S,{key:0,border:"top","colored-border":"",type:"warning",icon:!1,elevation:"1",class:"my-3"},{default:r(()=>[o(d,{dense:""},{default:r(()=>[o(u,null,{default:r(()=>[A("p",null,g(e.$i18n("url_mismatch_1")),1),A("p",null,g(e.$i18n("url_mismatch_2")),1),A("p",null,g(e.$i18n("url_mismatch_3")),1)]),_:1})]),_:1}),o(d,{dense:""},{default:r(()=>[o(u,{class:"my-0 py-0"},{default:r(()=>[A("div",null,[o(y,{modelValue:e.differentSiteConfirmation,"onUpdate:modelValue":t[0]||(t[0]=x=>e.differentSiteConfirmation=x),class:"my-0 py-0","hide-details":"",label:e.$i18n("url_mismatch_confirm",s.entryDomain)},null,8,["modelValue","label"])])]),_:1})]),_:1})]),_:1})):k("",!0),o(c,{right:"",color:"tertiary",onClick:s.cancel},{default:r(()=>[_(g(e.$i18n("cancel")),1)]),_:1},8,["onClick"]),!e.loading&&!s.editingExisting&&!e.skipWhere?(b(),w(c,{key:1,right:"",color:"primary",onClick:s.nextClicked},{default:r(()=>[_(g(e.$i18n("next")),1)]),_:1},8,["onClick"])):k("",!0),!e.loading&&!s.editingExisting&&e.skipWhere?(b(),w(c,{key:2,right:"",color:"primary",onClick:s.saveEntry},{default:r(()=>[_(g(e.$i18n("save")),1)]),_:1},8,["onClick"])):k("",!0),e.loading?(b(),w(c,{key:3,loading:"",disabled:"",right:"",color:"primary"},{default:r(()=>[_(" ......... ")]),_:1})):k("",!0),s.editingExisting?(b(),w(c,{key:4,disabled:s.showURLMismatchWarning&&!e.differentSiteConfirmation,right:"",color:"primary",onClick:s.updateEntry},{default:r(()=>[_(g(e.$i18n("update")),1)]),_:1},8,["disabled","onClick"])):k("",!0),s.editingExisting?(b(),w(S,{key:5,border:"top","colored-border":"",type:"info",icon:!1,elevation:"1",class:"my-4"},{default:r(()=>[o(d,{align:"center"},{default:r(()=>[o(u,{class:"grow"},{default:r(()=>[_(g(e.$i18n("make_additional_changes_using_full_editor")),1)]),_:1})]),_:1}),o(d,{align:"center"},{default:r(()=>[o(u,{class:"grow"},{default:r(()=>[o(c,{small:"",onClick:s.openFullEntryEditor},{default:r(()=>[_(g(e.$i18n("open_full_editor")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})):k("",!0)])}const La=V(Ma,[["render",Ia]]);function Ra(e,t){return e.find(n=>it.containsId(n.root,t.uuid))}const Ba={mixins:[P.mixin],props:["preferredGroupUuid","displayReason"],setup(){const{updateSaveState:e}=R();return{updateSaveState:e}},data:()=>({search:null,saveEnabled:!1,skipInFuture:M.current.rememberMRUGroup,groupUuidArray:[]}),computed:{...re(R,["saveState","KeePassDatabases","ActiveKeePassDatabaseIndex"]),rootGroup:function(){return this.KeePassDatabases[this.ActiveKeePassDatabaseIndex].root},items:function(){return this.KeePassDatabases.map(e=>e.root)}},watch:{skipInFuture:async function(e,t){e!==t&&(this.saveEnabled=!1,M.current.rememberMRUGroup=e,await M.save(),this.saveEnabled=!0)}},mounted(){this.groupUuidArray=[{uuid:this.preferredGroupUuid}]},methods:{saveEntry:function(){P.postMessage({action:z.CreateEntry}),window.close()},setGroup:function(e){if(!((e==null?void 0:e.length)>0))return;const t=Ra(this.KeePassDatabases,e[0]),n=Object.assign({},this.saveState);n.newEntry=new se({...n.newEntry,parentGroup:e[0],database:new lt({fileName:t.fileName,root:new De({uuid:Ee})})}),this.updateSaveState(n),this.saveEnabled=!0}}};function Oa(e,t,n,a,i,s){const l=f("v-col"),c=f("v-row"),p=f("v-text-field"),u=f("v-sheet"),d=f("v-treeview"),h=f("v-card-text"),v=f("v-card"),m=f("v-checkbox"),y=f("v-container"),S=f("v-slide-y-transition"),x=f("v-btn");return b(),L("div",null,[o(S,null,{default:r(()=>[o(y,{class:"my-0 pa-0"},{default:r(()=>[o(c,{justify:"center"},{default:r(()=>[o(l,{style:{cursor:"default"},class:"text-h6 text-center py-0"},{default:r(()=>[_(g(e.$i18n("where")),1)]),_:1})]),_:1}),o(c,null,{default:r(()=>[o(l,null,{default:r(()=>[o(v,{class:"mx-auto","max-width":"500"},{default:r(()=>[o(u,{class:"pa-4 pb-1"},{default:r(()=>[o(p,{modelValue:e.search,"onUpdate:modelValue":t[0]||(t[0]=C=>e.search=C),label:e.$i18n("Search_label"),color:"secondary",outlined:"","hide-details":"auto",clearable:"",dense:"","clear-icon":"mdi-close-circle-outline"},null,8,["modelValue","label"])]),_:1}),o(h,null,{default:r(()=>[o(d,{active:e.groupUuidArray,items:s.items,search:e.search,"selection-type":"independent","item-children":"groups","item-key":"uuid","item-text":"title","open-all":"",dense:"",activatable:"",hoverable:"",color:"secondary",style:{height:"240px","overflow-y":"auto",cursor:"pointer"},"return-object":"true","onUpdate:active":s.setGroup},null,8,["active","items","search","onUpdate:active"])]),_:1})]),_:1})]),_:1})]),_:1}),n.displayReason?(b(),w(c,{key:0},{default:r(()=>[o(l,null,{default:r(()=>[o(h,null,{default:r(()=>[_(g(n.displayReason),1)]),_:1})]),_:1})]),_:1})):k("",!0),o(c,null,{default:r(()=>[o(l,{class:"py-0"},{default:r(()=>[o(m,{modelValue:e.skipInFuture,"onUpdate:modelValue":t[1]||(t[1]=C=>e.skipInFuture=C),label:e.$i18n("skip_where_enable_context")},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1})]),_:1}),o(x,{disabled:!e.saveEnabled,right:"",color:"primary",onClick:s.saveEntry},{default:r(()=>[_(g(e.$i18n("save")),1)]),_:1},8,["disabled","onClick"])])}const Ta=V(Ba,[["render",Oa]]);async function Ua(e){return new Promise(t=>window.setTimeout(t,e))}function Na(e){return new Promise(function(t){if(!e){t(void 0);return}const n=new Image;n.onload=function(){const a=document.createElement("canvas");a.width=this.width,a.height=this.height,a.getContext("2d").drawImage(this,0,0);const s=a.toDataURL("image/png");t(s.substr(22))},n.src=e})}async function Ga(){for(let e=0;e<45;e++){const t=(await F.tabs.query({active:!0,currentWindow:!0}))[0];if(t)return t.favIconUrl;Ua(1e3)}}const Va={components:{Notification:Qn,SearchResults:_a,SearchInput:ta,Save1stParty:La,SaveWhere:Ta,PasswordGenerator:Ct},mixins:[P.mixin],props:["matchedEntries","frameId"],setup(){const{updateSaveState:e,updateSaveEntryResult:t}=R();return{updateSaveState:e,updateSaveEntryResult:t}},data:function(){return{saveLastActiveAt:null,showSaveWhere:!1,displayWhereReason:null,preferredGroupUuid:"",cachedMatchedEntries:this.matchedEntries,tooltipDelay:ge,manualRecoveryPromptTimeMs:Yn,autoRecoveryTimeMs:$n,showPasswordGenerator:!1,lastSaveEntryResult:null}},computed:{...re(R,["showGeneratePasswordLink","saveState","showMatchedLogins","showOpenKeePassButton","connectionStatus","connectionStatusDetail","connected","databaseIsOpen","notifications","showNotifications"]),statusIconColour:function(){return this.connected&&this.databaseIsOpen?"green":this.connected?"orange":"red"},showSaveStart:function(){return new Date(this.saveLastActiveAt)>new Date(Date.now()-this.autoRecoveryTimeMs)},showSaveRecovery:function(){return!this.showSaveStart&&new Date(this.saveLastActiveAt)>new Date(Date.now()-this.manualRecoveryPromptTimeMs)},showSearchPanel:function(){return this.databaseIsOpen&&!this.showSaveStart},hasSubmittedData:function(){var e,t,n;return((n=(t=(e=this.saveState)==null?void 0:e.submittedData)==null?void 0:t.fields)==null?void 0:n.length)>0},showSaveResult:function(){return this.lastSaveEntryResult&&!this.showSaveStart}},watch:{saveState:function(e,t){var n,a;((n=e==null?void 0:e.newEntry)==null?void 0:n.uuid)!==((a=t==null?void 0:t.newEntry)==null?void 0:a.uuid)&&(this.saveLastActiveAt=e.lastActiveAt)}},mounted:async function(){var i,s;this.saveLastActiveAt=(i=this.saveState)==null?void 0:i.lastActiveAt,(this.handleLastSaveResult()||((s=this.saveState)==null?void 0:s.lastActiveAt)<=new Date(Date.now()-this.manualRecoveryPromptTimeMs))&&this.saveDiscard();const t=await Ga();if(!t)return;const n=await Na(t);if(!n)return;const a=Object.assign({},this.saveState);a.favicon=n,this.updateSaveState(a)},methods:{showOptions:()=>{F.runtime.openOptionsPage(),window.close()},saveStart:async function(){const e=(await F.tabs.query({active:!0,currentWindow:!0}))[0];if(!e)return;const t={URLs:[e.url],title:e.title,fields:[new G({name:"KeePass username",type:"text",locators:[new Oe({type:"text"})]}),new G({name:"KeePass password",type:"password",locators:[new Oe({type:"password"})]})]},n=this.saveState,a=Object.assign({},n);a.newEntry=At(new se(t),n),a.titleResetValue=a.newEntry.title,a.lastActiveAt=new Date,a.showURLMismatchWarning=!1,this.updateSaveState(a)},saveRecover:function(){const e=this.saveState,t=Object.assign({},e);t.lastActiveAt=new Date,this.updateSaveState(t),this.saveLastActiveAt=t.lastActiveAt},saveDiscard:function(){const e=this.saveState,t=Object.assign({},e);t.newEntry=new se({}),t.titleResetValue=null,t.lastActiveAt=null,t.showURLMismatchWarning=!1,t.favicon=null,this.updateSaveState(t)},saveWhere:function(e,t){this.displayWhereReason=e,this.preferredGroupUuid=t,this.showSaveWhere=!0},showHelp:()=>{F.tabs.create({url:"https://www.kee.pm/help"}),window.close()},openKeeVault:async function(){H.debug("open Kee Vault requested");const e=await F.tabs.query({url:["https://keevault.pm/*","https://app-beta.kee.pm/*","https://app-dev.kee.pm/*"]});e&&e[0]?(F.tabs.update(e[0].id,{active:!0}),F.windows.update(e[0].windowId,{focused:!0})):F.tabs.create({url:"https://keevault.pm/",active:!0}),window.close()},openKeePass:function(){H.debug("open KeePass requested"),this.$store.connectedWebsocket?P.postMessage({action:z.OpenKeePass}):H.info("KeePass no longer connected so taking no action"),window.close()},handleLastSaveResult:function(){const e=this.saveEntryResult;return e.result?e.result==="created"||e.result==="updated"?(M.current.hideConfirmationAfterSave||(this.lastSaveEntryResult=e),this.updateSaveEntryResult({result:null,receivedAt:new Date}),!0):(this.updateSaveEntryResult({result:null,receivedAt:new Date}),!1):!1},passwordGeneratorClosed:function(){this.showPasswordGenerator=!1},copyToClipboard:async function(e){e!=null&&e.value&&await Ie(e.value)},prefEntryToggle:async function(e){if(e!=null&&e.uuid){const t=(await F.tabs.query({active:!0,currentWindow:!0}))[0];if(!t)return;const n=new URL(t.url);n.hostname=punycode.toUnicode(n.hostname),M.togglePreferredEntryUuid(e.uuid,n.href);const a=M.siteConfigFor(n.href);this.cachedMatchedEntries=this.cachedMatchedEntries.map(i=>(i.isPreferredMatch=a.preferredEntryUuid===i.uuid,i)),P.postMessage({action:z.DetectForms})}},openFullEntryEditor:function(){P.postMessage({loginEditor:{uuid:this.lastSaveEntryResult.uuid,DBfilename:this.lastSaveEntryResult.fileName}}),this.lastSaveEntryResult=null,window.close()}}},Wa="data:image/png;base64,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",Ka="data:image/png;base64,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";const Ha={key:0,id:"notifications",class:"pt-6"},Xa=A("img",{width:"24px",height:"24px",src:Wa},null,-1),ja=A("img",{width:"24px",height:"24px",src:Ka},null,-1);function $a(e,t,n,a,i,s){const l=f("SearchInput"),c=f("v-app-bar"),p=f("v-col"),u=f("v-row"),d=f("v-btn"),h=f("v-spacer"),v=f("v-alert"),m=f("Notification"),y=f("SearchResults"),S=f("Save1stParty"),x=f("SaveWhere"),C=f("v-container"),Y=f("v-main"),E=f("v-icon"),ee=f("v-tooltip"),kt=f("v-divider"),_e=f("v-list-item-title"),be=f("v-list-item"),xt=f("v-list"),Pt=f("v-menu"),Et=f("v-footer"),Dt=f("PasswordGenerator"),Mt=f("v-app");return b(),w(Mt,{id:"inspire"},{default:r(()=>[o(c,{modelValue:s.showSearchPanel,"onUpdate:modelValue":t[0]||(t[0]=I=>s.showSearchPanel=I),app:"",style:{"max-width":"400px"}},{default:r(()=>[o(l)]),_:1},8,["modelValue"]),o(Y,{class:Xt(`${s.showSearchPanel?"app_height_medium":"app_height_tall"}`)},{default:r(()=>[o(C,{fluid:""},{default:r(()=>[W(o(v,{color:"secondary",border:"top","colored-border":"",elevation:"1"},{default:r(()=>[o(u,{dense:""},{default:r(()=>[o(p,null,{default:r(()=>[_(g(e.$i18n("unsaved_changes")),1)]),_:1})]),_:1}),o(u,{dense:"",align:"start"},{default:r(()=>[o(p,null,{default:r(()=>[o(d,{color:"primary",onClick:s.saveRecover},{default:r(()=>[_(g(e.$i18n("continue_saving")),1)]),_:1},8,["onClick"])]),_:1}),o(p,null,{default:r(()=>[o(d,{color:"tertiary",onClick:s.saveDiscard},{default:r(()=>[_(g(e.$i18n("discard_changes")),1)]),_:1},8,["onClick"])]),_:1}),o(h)]),_:1})]),_:1},512),[[K,s.showSaveRecovery]]),W(o(v,{color:"secondary",border:"top","colored-border":"",elevation:"1"},{default:r(()=>[o(u,{dense:""},{default:r(()=>[o(p,null,{default:r(()=>[_(g(e.$i18n("you_recently_saved")),1)]),_:1})]),_:1}),o(u,{dense:"",align:"start"},{default:r(()=>[o(p,null,{default:r(()=>[o(d,{onClick:s.openFullEntryEditor},{default:r(()=>[_(g(e.$i18n("open_full_editor")),1)]),_:1},8,["onClick"])]),_:1}),o(h)]),_:1})]),_:1},512),[[K,s.showSaveResult]]),e.showNotifications?(b(),L("div",Ha,[(b(!0),L(q,null,Q(e.notifications,I=>(b(),w(m,{key:I.id,notification:I},null,8,["notification"]))),128))])):k("",!0),W(o(y,{"matched-entries":e.cachedMatchedEntries,"frame-id":n.frameId,onPrefEntryToggle:s.prefEntryToggle},null,8,["matched-entries","frame-id","onPrefEntryToggle"]),[[K,s.showSearchPanel]]),s.showSaveStart&&!e.showSaveWhere?(b(),w(S,{key:1,onSaveWhereClicked:s.saveWhere,onCancelClicked:s.saveDiscard},null,8,["onSaveWhereClicked","onCancelClicked"])):k("",!0),e.showSaveWhere?(b(),w(x,{key:2,"display-reason":e.displayWhereReason,"preferred-group-uuid":e.preferredGroupUuid},null,8,["display-reason","preferred-group-uuid"])):k("",!0)]),_:1})]),_:1},8,["class"]),o(ee,{left:"","open-delay":e.tooltipDelay},{activator:r(({on:I})=>[W(o(d,O({fab:"",small:"",absolute:"",bottom:"",right:"",color:"primary",style:{bottom:"75px",right:"24px"},class:s.hasSubmittedData?"pulse-button":""},U(I),{onClick:s.saveStart}),{default:r(()=>[o(E,null,{default:r(()=>[_("mdi-plus")]),_:1})]),_:2},1040,["class","onClick"]),[[K,s.showSearchPanel&&!s.showSaveRecovery]])]),default:r(()=>[A("span",null,g(e.$i18n("create_new_entry")),1)]),_:1},8,["open-delay"]),o(Et,{app:"",height:"auto"},{default:r(()=>[o(ee,{top:"","open-delay":e.tooltipDelay},{activator:r(({on:I})=>[o(d,O({id:"password-open-kee-vault","aria-label":e.$i18n("Menu_Button_open_kee_vault_label"),class:"ml-0 mr-2",icon:""},U(I),{onClick:s.openKeeVault}),{default:r(()=>[Xa]),_:2},1040,["aria-label","onClick"])]),default:r(()=>[A("span",null,g(e.$i18n("Menu_Button_open_kee_vault_label")),1)]),_:1},8,["open-delay"]),o(ee,{top:"","open-delay":e.tooltipDelay},{activator:r(({on:I})=>[W(o(d,O({id:"password-open-keepass","aria-label":e.$i18n("Menu_Button_open_keepass_label"),class:"mr-2 ml-n1",icon:""},U(I),{onClick:s.openKeePass}),{default:r(()=>[ja]),_:2},1040,["aria-label","onClick"]),[[K,e.showOpenKeePassButton]])]),default:r(()=>[A("span",null,g(e.$i18n("Menu_Button_open_keepass_label")),1)]),_:1},8,["open-delay"]),o(kt,{vertical:""}),o(E,{size:"20px",color:s.statusIconColour,class:"mx-2"},{default:r(()=>[_(" mdi-lock ")]),_:1},8,["color"]),o(ee,{top:"","open-delay":e.tooltipDelay},{activator:r(({on:I})=>[A("div",O({class:"text-caption py-1 shrink",style:{"word-break":"break-word","overflow-wrap":"break-word","max-width":"210px"}},U(I,!0)),g(e.connectionStatus),17)]),default:r(()=>[A("span",null,g(e.connectionStatusDetail),1)]),_:1},8,["open-delay"]),o(h),o(Pt,{top:"","offset-y":"",small:""},{activator:r(({on:I})=>[o(d,O({icon:"",small:""},U(I)),{default:r(()=>[o(E,null,{default:r(()=>[_("mdi-menu")]),_:1})]),_:2},1040)]),default:r(()=>[o(xt,null,{default:r(()=>[o(be,{onClick:s.showHelp},{default:r(()=>[o(_e,{right:"",class:"mr-4 text-right text-body-2"},{default:r(()=>[_(g(e.$i18n("Help_Centre_Button_label")),1)]),_:1}),o(E,{size:"20px"},{default:r(()=>[_(" mdi-help ")]),_:1})]),_:1},8,["onClick"]),o(be,{onClick:s.showOptions},{default:r(()=>[o(_e,{class:"mr-4 text-right body-2"},{default:r(()=>[_(g(e.$i18n("Menu_Button_options_label")),1)]),_:1}),o(E,{size:"20px"},{default:r(()=>[_(" mdi-settings ")]),_:1})]),_:1},8,["onClick"]),W(o(be,{onClick:t[1]||(t[1]=I=>e.showPasswordGenerator=!0)},{default:r(()=>[o(_e,{class:"mr-4 text-right body-2"},{default:r(()=>[_(g(e.$i18n("Menu_Button_copyNewPasswordToClipboard_label")),1)]),_:1}),o(E,{size:"20px"},{default:r(()=>[_(" mdi-flash ")]),_:1})]),_:1},512),[[K,s.showSearchPanel]])]),_:1})]),_:1})]),_:1}),e.showPasswordGenerator?(b(),w(Dt,{key:0,standalone:!0,onDialogClosed:s.passwordGeneratorClosed,onCopyToClipboard:s.copyToClipboard},null,8,["onDialogClosed","onCopyToClipboard"])):k("",!0)]),_:1})}const Ya=V(Va,[["render",$a]]);class za{constructor(t){this.store=t,this.receivedMutations=[],this.initialized=!1,this.pendingMutations=[],this.store.$subscribe(n=>{if(n.type==jt.patchObject)this.hookMutation(n);else throw new Error("Pinia generated a non-object mutation. We don't think we can support this and need to know that it is possible for it to happen! Tell us now or weird things will happen.")})}init(t,n,a){this.sendMutation=n,this.store.$patch(t),this.initialized=!0,this.processPendingMutations(),a&&a()}reset(t){this.store.$patch(t)}onRemoteMutation(t){this.initialized&&(this.receivedMutations.push(t),this.store.$patch(t.payload))}hookMutation(t){if(!this.initialized)return this.pendingMutations.push(t);if(!this.receivedMutations.length)return this.sendMutation(t);for(let n=this.receivedMutations.length-1;n>=0;n--)if(this.receivedMutations[n]==t.payload){this.receivedMutations.splice(n,1);break}else n==0&&this.sendMutation(t)}processPendingMutations(){if(this.pendingMutations.length)for(let t=0;t<this.pendingMutations.length;t++)this.sendMutation(this.pendingMutations[t]),this.pendingMutations.splice(t,1)}}const Ja=$t(),xe=R();let ae,Pe;function Za(){H.debug("popup started"),H.attachConfig(M.current),Pe=new za(xe),P.startup("browserPopup"),P.raw.onMessage.addListener(function(e){if(H.debug("In browser popup script, received message from background script: "),e.initialState&&Pe.init(e.initialState,t=>{P.postMessage({mutation:t})},()=>{ae=Yt({mounted:function(){P.postMessage({action:z.GetPasswordProfiles})},render:()=>rt(Ya,{props:{matchedEntries:e.entries?e.entries:null,frameId:e.frameId}})});const t=St({theme:{dark:M.activeTheme==="dark",themes:{dark:{primary:"#1a466b",secondary:"#ABB2BF",tertiary:"#e66a2b",error:"#C34034",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"},light:{primary:"#1a466b",secondary:"#13334e",tertiary:"#e66a2b",error:"#C34034",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}}});ae.use(t),ae.use(Ja),ae.mount("#main"),ae.config.globalProperties.$browser=Ft,ae.config.globalProperties.$i18n=F.i18n.getMessage,window.setTimeout(()=>{window.focus();const n=$("#searchBox");n&&n.focus(),window.scrollTo(0,0)},50)}),e.mutation){Pe.onRemoteMutation(e.mutation);return}xe.connected&&e.findMatchesResult&&xe.updateSearchResultWithFullDetails(JSON.parse(JSON.stringify(e.findMatchesResult[0])))}),H.info("popup ready")}M.load(Za);
